/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
import{_ as t}from"../chunks/tslib.es6.js";import"../chunks/ArrayPool.js";import"../core/lang.js";import"../chunks/deprecate.js";import"../chunks/object.js";import"../kernel.js";import"../config.js";import{e,i as s,d as i,b as o,c as r}from"../chunks/Logger.js";import"../chunks/string.js";import{h as n,f as a}from"../chunks/metadata.js";import{property as l}from"../core/accessorSupport/decorators/property.js";import p from"../core/Accessor.js";import"../chunks/PropertyOrigin.js";import{l as c,j as m}from"../core/scheduling.js";import{o as u,throwIfAborted as d,createTask as h}from"../core/promiseUtils.js";import"../chunks/Message.js";import"../core/Error.js";import"../chunks/compilerUtils.js";import"../chunks/ensureType.js";import{subclass as g}from"../core/accessorSupport/decorators/subclass.js";import"../chunks/Evented.js";import j from"../core/Collection.js";import"../chunks/collectionUtils.js";import"../chunks/JSONSupport.js";import"../chunks/Promise.js";import"../chunks/Loadable.js";import"../chunks/asyncUtils.js";import"../chunks/loadAll.js";import"../core/urlUtils.js";import{aliasOf as b}from"../core/accessorSupport/decorators/aliasOf.js";import"../core/accessorSupport/decorators/cast.js";import"../chunks/jsonMap.js";import"../chunks/enumeration.js";import"../chunks/reader.js";import"../chunks/shared.js";import"../chunks/writer.js";import"../chunks/resourceExtension.js";import"../chunks/persistableUrlUtils.js";import"../geometry/SpatialReference.js";import"../chunks/locale.js";import{f as y}from"../chunks/number.js";import{substitute as f}from"../intl.js";import"../request.js";import"../chunks/assets.js";import"../geometry/Geometry.js";import"../geometry/Point.js";import"../chunks/Ellipsoid.js";import"../geometry/support/webMercatorUtils.js";import"../geometry/Extent.js";import"../portal/PortalQueryParams.js";import"../portal/PortalQueryResult.js";import"../portal/PortalFolder.js";import"../portal/PortalGroup.js";import"../portal/PortalUser.js";import"../portal/Portal.js";import"../portal/PortalItemResource.js";import"../portal/PortalRating.js";import"../portal/PortalItem.js";import"../chunks/mathUtils2.js";import"../chunks/vec3f64.js";import"../chunks/common.js";import"../chunks/vec3.js";import"../chunks/mathUtils.js";import"../chunks/colorUtils.js";import"../Color.js";import"../chunks/zmUtils.js";import"../geometry/Multipoint.js";import"../geometry/Polygon.js";import"../chunks/extentUtils.js";import"../geometry/Polyline.js";import"../chunks/typeUtils.js";import"../geometry/support/jsonUtils.js";import"../geometry.js";import"../layers/support/CodedValueDomain.js";import"../layers/support/Domain.js";import"../layers/support/InheritedDomain.js";import"../layers/support/RangeDomain.js";import"../chunks/domains.js";import"../chunks/arcadeOnDemand.js";import"../layers/support/fieldUtils.js";import"../popup/content/Content.js";import"../popup/content/AttachmentsContent.js";import"../popup/content/CustomContent.js";import"../chunks/date.js";import"../popup/support/FieldInfoFormat.js";import"../popup/FieldInfo.js";import"../popup/content/FieldsContent.js";import"../chunks/MediaInfo.js";import"../popup/content/support/ChartMediaInfoValueSeries.js";import"../popup/content/support/ChartMediaInfoValue.js";import"../chunks/chartMediaInfoUtils.js";import"../popup/content/BarChartMediaInfo.js";import"../popup/content/ColumnChartMediaInfo.js";import"../popup/content/support/ImageMediaInfoValue.js";import"../popup/content/ImageMediaInfo.js";import"../popup/content/LineChartMediaInfo.js";import"../popup/content/PieChartMediaInfo.js";import"../popup/content/MediaContent.js";import"../popup/content/TextContent.js";import"../popup/content.js";import"../popup/ExpressionInfo.js";import"../popup/LayerOptions.js";import"../popup/support/RelatedRecordsInfoFieldOrder.js";import"../popup/RelatedRecordsInfo.js";import"../chunks/Identifiable.js";import"../support/actions/ActionBase.js";import"../support/actions/ActionButton.js";import"../support/actions/ActionToggle.js";import"../PopupTemplate.js";import"../symbols/Symbol.js";import"../symbols/CIMSymbol.js";import"../symbols/Symbol3DLayer.js";import"../chunks/screenUtils.js";import"../chunks/opacityUtils.js";import"../chunks/materialUtils.js";import"../symbols/edges/Edges3D.js";import"../symbols/edges/SketchEdges3D.js";import"../symbols/edges/SolidEdges3D.js";import"../chunks/utils.js";import"../chunks/Symbol3DMaterial.js";import"../symbols/ExtrudeSymbol3DLayer.js";import"../symbols/LineSymbol.js";import"../symbols/LineSymbolMarker.js";import"../symbols/SimpleLineSymbol.js";import"../symbols/FillSymbol.js";import"../symbols/patterns/StylePattern3D.js";import"../symbols/FillSymbol3DLayer.js";import"../chunks/colors.js";import"../chunks/Symbol3DOutline.js";import"../symbols/Font.js";import"../symbols/IconSymbol3DLayer.js";import"../symbols/LineSymbol3DLayer.js";import"../symbols/ObjectSymbol3DLayer.js";import"../symbols/PathSymbol3DLayer.js";import"../symbols/TextSymbol3DLayer.js";import"../symbols/WaterSymbol3DLayer.js";import"../symbols/Symbol3D.js";import"../chunks/Thumbnail.js";import"../symbols/callouts/Callout3D.js";import"../symbols/callouts/LineCallout3D.js";import"../chunks/Symbol3DVerticalOffset.js";import"../symbols/LabelSymbol3D.js";import"../symbols/LineSymbol3D.js";import"../symbols/MarkerSymbol.js";import"../symbols/MeshSymbol3D.js";import"../chunks/urlUtils.js";import"../symbols/PictureFillSymbol.js";import"../symbols/PictureMarkerSymbol.js";import"../symbols/PointSymbol3D.js";import"../symbols/PolygonSymbol3D.js";import"../symbols/SimpleFillSymbol.js";import"../symbols/SimpleMarkerSymbol.js";import"../symbols/TextSymbol.js";import"../symbols/WebStyleSymbol.js";import"../symbols.js";import"../chunks/uid.js";import"../Graphic.js";import"../Ground.js";import"../core/Handles.js";import"../layers/Layer.js";import"../chunks/LegendOptions.js";import"../renderers/visualVariables/support/ColorStop.js";import"../renderers/support/AuthoringInfo.js";import"../renderers/support/AuthoringInfoVisualVariable.js";import"../tasks/support/ColorRamp.js";import"../tasks/support/AlgorithmicColorRamp.js";import"../tasks/support/MultipartColorRamp.js";import"../chunks/colorRamps.js";import"../renderers/Renderer.js";import"../renderers/visualVariables/VisualVariable.js";import"../renderers/visualVariables/ColorVariable.js";import"../renderers/visualVariables/support/OpacityStop.js";import"../renderers/visualVariables/OpacityVariable.js";import"../renderers/visualVariables/RotationVariable.js";import"../renderers/visualVariables/support/SizeStop.js";import"../renderers/visualVariables/SizeVariable.js";import"../chunks/sizeVariableUtils.js";import{v as k,c as v}from"../chunks/unitUtils.js";import"../chunks/lengthUtils.js";import"../chunks/visualVariableUtils.js";import"../chunks/VisualVariablesMixin.js";import"../chunks/symbolConversion.js";import"../symbols/support/jsonUtils.js";import"../renderers/support/ClassBreakInfo.js";import"../chunks/commonProperties.js";import"../renderers/ClassBreaksRenderer.js";import"../chunks/diffUtils.js";import"../renderers/support/UniqueValueInfo.js";import"../chunks/devEnvironmentUtils.js";import"../chunks/styleUtils.js";import"../renderers/UniqueValueRenderer.js";import"../chunks/normalizeUtilsCommon.js";import"../geometry/support/normalizeUtils.js";import"../chunks/MemCache.js";import"../chunks/ItemCache.js";import"../chunks/utils3.js";import"../symbols/support/cimSymbolUtils.js";import"../chunks/utils2.js";import"../chunks/LRUCache.js";import"../renderers/DictionaryRenderer.js";import"../renderers/support/AttributeColorInfo.js";import"../renderers/DotDensityRenderer.js";import"../renderers/support/HeatmapColorStop.js";import"../renderers/HeatmapRenderer.js";import"../renderers/SimpleRenderer.js";import"../renderers/support/jsonUtils.js";import"../chunks/timeUtils.js";import"../TimeExtent.js";import"../TimeInterval.js";import"../chunks/ReadOnlyMultiOriginJSONSupport.js";import"../chunks/MultiOriginJSONSupport.js";import{init as _}from"../core/watchUtils.js";import"../chunks/arcgisLayerUrl.js";import"../chunks/fieldType.js";import"../geometry/HeightModelInfo.js";import"../chunks/mat4.js";import"../chunks/pe.js";import"../chunks/aaBoundingRect.js";import"../chunks/geodesicConstants.js";import"../geometry/support/GeographicTransformationStep.js";import"../geometry/support/GeographicTransformation.js";import"../geometry/projection.js";import"../chunks/OperationalLayer.js";import"../chunks/ElevationInfo.js";import"../chunks/unitConversionUtils.js";import"../chunks/commonProperties2.js";import"../chunks/Scheduler.js";import"../core/HandleOwner.js";import"../chunks/_commonjsHelpers.js";import"../core/workers/RemoteClient.js";import"../core/workers/Connection.js";import"../core/workers/workers.js";import"../form/ExpressionInfo.js";import"../form/elements/FieldElement.js";import"../form/support/elements.js";import"../form/elements/inputs/Input.js";import"../form/elements/inputs/TextInput.js";import"../form/elements/inputs/BarcodeScannerInput.js";import"../form/elements/inputs/ComboBoxInput.js";import"../form/elements/inputs/DateTimePickerInput.js";import"../form/elements/inputs/RadioButtonsInput.js";import"../form/elements/inputs/TextAreaInput.js";import"../form/elements/inputs/TextBoxInput.js";import"../form/elements/support/inputs.js";import"../form/elements/GroupElement.js";import"../form/FormTemplate.js";import"../geometry/support/geodesicUtils.js";import"../geometry/Circle.js";import"../chunks/vec4f64.js";import"../chunks/quatf64.js";import"../chunks/mat3.js";import"../chunks/BufferView.js";import"../chunks/vec2.js";import"../chunks/vec4.js";import"../chunks/quat.js";import"../chunks/domUtils.js";import{f as C,i as x}from"../chunks/widgetUtils.js";import"../chunks/projector.js";import"../chunks/accessibleHandler.js";import{m as S}from"../chunks/messageBundle.js";import"./support/widget.js";import"../chunks/vmEvent.js";import{j as w}from"../chunks/index.js";import P from"./Widget.js";import"../chunks/zscale.js";import"../chunks/queryZScale.js";import"../layers/support/Field.js";import"../tasks/support/FeatureSet.js";import"../layers/FeatureLayer.js";import"../chunks/ArcGISService.js";import"../chunks/BlendLayer.js";import"../chunks/CustomParametersMixin.js";import"../chunks/PortalLayer.js";import"../chunks/RefreshableLayer.js";import"../chunks/ScaleRangeLayer.js";import"../layers/support/TimeInfo.js";import"../chunks/TemporalLayer.js";import"../layers/support/FeatureReductionSelection.js";import"../layers/support/FeatureReductionCluster.js";import"../chunks/labelUtils.js";import"../layers/support/LabelClass.js";import"../chunks/defaultsJSON.js";import"../chunks/defaults.js";import"../chunks/featureReductionUtils.js";import"../layers/support/FeatureTemplate.js";import"../layers/support/FeatureType.js";import"../chunks/fieldProperties.js";import"../layers/support/FieldsIndex.js";import"../layers/support/GeometryFieldsInfo.js";import"../chunks/labelingInfo.js";import"../layers/support/LayerFloorInfo.js";import"../layers/support/Relationship.js";import"../chunks/DataLayerSource.js";import"../chunks/styleUtils2.js";import"../support/popupUtils.js";import"../tasks/support/AttachmentQuery.js";import"../tasks/support/Query.js";import"../tasks/support/StatisticDefinition.js";import"../tasks/support/RelationshipQuery.js";import"../chunks/GraphicsCollection.js";import"../layers/GraphicsLayer.js";import"../chunks/utils4.js";import"../tasks/Task.js";import"../rest/query/support/AttachmentInfo.js";import"../chunks/query.js";import"../chunks/executeRelationshipQuery.js";import"../chunks/pbf.js";import"../chunks/OptimizedFeatureSet.js";import"../chunks/pbfQueryUtils.js";import"../chunks/featureConversionUtils.js";import"../tasks/QueryTask.js";import"../chunks/aaBoundingBox.js";import"../chunks/vec4f32.js";import"../layers/support/ElevationSampler.js";import"../chunks/quantizationUtils.js";import"../chunks/mat2d.js";import"../symbols/support/symbolUtils.js";import"../chunks/byteSizeEstimations.js";import"../chunks/dehydratedFeatureComparison.js";import"../chunks/dehydratedFeatures.js";import"../chunks/ElevationProvider.js";import"../chunks/interactiveToolUtils.js";import{t as L}from"../chunks/throttle.js";import{f as M,i as E,u as U}from"./Attachments.js";import"./Attachments/AttachmentsViewModel.js";import"./Feature/FeatureViewModel.js";import{l as T}from"./Feature.js";import"../chunks/AnchorElementViewModel.js";import"./Spinner/SpinnerViewModel.js";import"./Popup.js";import"../chunks/Queue.js";import"../chunks/InputManager.js";import"../chunks/layerViewUtils.js";import"../chunks/actions.js";import"./Popup/PopupViewModel.js";import"../chunks/GoTo.js";import"../chunks/MapUtils.js";import"../chunks/screenUtils2.js";import"../chunks/mat2df64.js";import"../chunks/vec2f64.js";import"../chunks/QueueProcessor.js";import"../chunks/requestImageUtils.js";import"../chunks/VertexColor.glsl.js";import"../chunks/Program.js";import"../chunks/FramebufferObject.js";import"../chunks/renderState.js";import"../chunks/glUtil.js";import"../chunks/InterleavedLayout.js";import"../chunks/mat4f32.js";import"../chunks/vec3f32.js";import"../chunks/stack.js";import"../chunks/geometryUtils.js";import"../chunks/ColorMaterial.js";import"../chunks/Util.js";import"../chunks/glUtil3D.js";import"../chunks/Object3D.js";import"../chunks/VertexArrayObject.js";import"../chunks/sdfPrimitives.js";import"../chunks/intersectorUtils.js";import"../chunks/Intersector.js";import"../chunks/PiUtils.glsl.js";import"../chunks/GLMaterialTexture.js";import"../chunks/VerticalOffset.glsl.js";import"../chunks/RibbonLineMaterial.js";import"../chunks/Texture.js";import"../chunks/ElevationQueryTileCache.js";import"../chunks/CameraSpace.glsl.js";import"../views/interactive/snapping/FeatureSnappingLayerSource.js";import"../chunks/Settings.js";import"../views/interactive/snapping/SnappingOptions.js";import"../views/draw/DrawAction.js";import"../chunks/elevationInfoUtils.js";import"../chunks/AppendVertex.js";import"../chunks/Keys.js";import"../views/draw/MultipointDrawAction.js";import"../chunks/InteractiveToolBase.js";import"../chunks/DrawTool.js";import"../chunks/VisualElement.js";import"../chunks/LaserlineVisualElement.js";import"../chunks/Object3DVisualElement.js";import"../chunks/RightAngleQuadVisualElement.js";import"../views/draw/PointDrawAction.js";import"../views/draw/PolygonDrawAction.js";import"../views/draw/PolylineDrawAction.js";import"../views/draw/SegmentDrawAction.js";import"../views/draw/Draw.js";import"../chunks/commonProperties4.js";import{P as A}from"../chunks/Popover.js";import{R as B}from"../chunks/ResizeObserver.js";import"./Sketch/SketchViewModel.js";import{F as I,N as D,a as F,M as V,m as z,E as O,L as R,P as $}from"../chunks/ElevationProfileLine.js";import G from"./ElevationProfile/ElevationProfileViewModel.js";import"../chunks/elevationQuerySourceUtils.js";import"./ElevationProfile/ElevationProfileLineGround.js";import"../chunks/ElevationQuery.js";import"./ElevationProfile/ElevationProfileLineInput.js";import"./ElevationProfile/ElevationProfileLineQuery.js";import"../chunks/SetUtils.js";import"./ElevationProfile/ElevationProfileLineView.js";const H="esri-elevation-profile",W={esriWidget:"esri-widget--panel esri-widget",esriWidgetDisabled:"esri-widget--disabled",buttonDisabled:"esri-button--disabled",widgetIcon:"esri-icon-elevation-profile",base:`${H}`,portrait:`${H}--portrait`,refined:`${H}--refined`,mainContainer:`${H}__main-container`,promptContainer:`${H}__prompt-container`,header:`${H}__header`,zoomOutButton:`${H}__zoom-out-button esri-icon-zoom-out-magnifying-glass`,actionButton:`${H}__action-button esri-button`,sketchButton:`${H}__sketch-button esri-button--primary`,sketchCancelButton:`${H}__sketch-cancel-button esri-button--secondary`,sketchDoneButton:`${H}__sketch-done-button esri-button--primary`,selectButton:`${H}__select-button esri-button--secondary`,selectCancelButton:`${H}__select-cancel-button esri-button--secondary`,chartContainer:`${H}__chart-container`,chartSpinner:`${H}__chart-spinner esri-icon-loading-indicator esri-rotating`,chartSpinnerVisible:`${H}__chart-spinner--visible`,chartSpinnerSmall:`${H}__chart-spinner--small`,footer:`${H}__footer`},q={line:"amcharts-LineSeries",cursorEnabled:"amcharts-cursor--enabled",axisTooltip:"amcharts-axis-tooltip",seriesTooltip:"amcharts-series-tooltip"},N="esri-elevation-profile-legend",Q="esri-elevation-profile-legend-item",Y={base:Q,disabled:`${Q}--disabled`,expanded:`${Q}--expanded`,colorIndicator:`${Q}__color-indicator`,header:`${Q}__header`,content:`${Q}__content`,collapseToggle:`${Q}__collapse-toggle esri-button esri-button--tertiary`,collapseToggleIcon:`${Q}__collapse-toggle__icon esri-icon-down`,label:`${Q}__label`,labelDisabled:`${Q}__label--disabled`,checkbox:`${Q}__checkbox`,checkboxChecked:`${Q}__checkbox--checked esri-icon-check-mark`},X="esri-elevation-profile-statistics",Z={base:X,statistic:`${X}__statistic`,statisticLabel:`${X}__statistic__label`,statisticValue:`${X}__statistic__value`,slopeValue:`${X}__slope-value`,slopeUpIcon:"esri-icon-arrow-up",slopeDownIcon:"esri-icon-arrow-down"},J="esri-elevation-profile-settings",K={base:`${J} esri-icon-handle-vertical`,popoverContent:`${J}__popover-content`,select:`${J}__select esri-select`,selectLabel:`${J}__select-label`};let tt=class extends p{constructor(){super(...arguments),this.legend=!0,this.chart=!0,this.settingsButton=!0,this.sketchButton=!0,this.selectButton=!0}};t([l()],tt.prototype,"legend",void 0),t([l()],tt.prototype,"chart",void 0),t([l()],tt.prototype,"settingsButton",void 0),t([l()],tt.prototype,"sketchButton",void 0),t([l()],tt.prototype,"selectButton",void 0),tt=t([g("esri.widgets.ElevationProfile.ElevationProfileVisibleElements")],tt);var et=tt;let st=class extends P{constructor(t,e){super(t,e),this._messagesUnits=null,this._updateLayout=t=>{const e=t.parentElement,s=t.style.display;e.removeChild(t),document.body.appendChild(t),t.style.display="block";let i=80;for(const e of t.childNodes)e instanceof HTMLElement&&(i=Math.max(i,e.offsetWidth));document.body.removeChild(t),e.appendChild(t),t.style.display=s,t.style.setProperty("--max-width",`${i}px`)},this._updateLayoutThrottled=L(this._updateLayout,100)}initialize(){this.own(this._updateLayoutThrottled)}render(){return w("div",{bind:this,class:Z.base,afterCreate:this._updateLayout,afterUpdate:this._updateLayoutThrottled},this._renderStatistics())}_renderStatistics(){var t;const e=null==(t=this._messages)?void 0:t.statistics;return e?[this._renderDistanceStatistic("maxDistance",e.maxDistance),this._renderElevationStatistic("elevationGain",e.gain),this._renderElevationStatistic("elevationLoss",e.loss),this._renderElevationStatistic("minElevation",e.minElevation),this._renderElevationStatistic("maxElevation",e.maxElevation),this._renderElevationStatistic("avgElevation",e.avgElevation),this._renderSlopeStatistic("maxPositiveSlope","maxNegativeSlope",e.maxSlope),this._renderSlopeStatistic("avgPositiveSlope","avgNegativeSlope",e.avgSlope)]:[]}_renderDistanceStatistic(t,e){const s=this._renderValue(t,(t=>{const e=this.effectiveUnits.distance;return M(this._messagesUnits,t,e,I)}));return this._renderStatistic(e,s)}_renderElevationStatistic(t,e){const s=this._renderValue(t,(t=>{const e=this.effectiveUnits.elevation;return M(this._messagesUnits,t,e,I)}));return this._renderStatistic(e,s)}_renderSlopeStatistic(t,e,s){const i=w("div",{key:"slope-up",class:Z.slopeValue},w("div",{class:Z.slopeUpIcon}),this._renderValue(t,(t=>E(t,"degrees",I))),w("div",{class:Z.slopeDownIcon}),this._renderValue(e,(t=>E(t,"degrees",I))));return this._renderStatistic(s,i)}_renderStatistic(t,e){return w("div",{class:Z.statistic},w("label",{class:Z.statisticLabel},t),w("div",{class:Z.statisticValue},e))}_renderValue(t,i){const o=this.line,r=1===o.progress?o.statistics:null,n=e(r,(e=>e[t]));return s(n)?i(n):D}};function it(t,{profiles:e}){const i=t.title;if(s(i))return i;switch(t.type){case"ground":return e.ground;case"input":return e.input;case"query":return e.query;case"view":return e.view;default:return""}}t([l()],st.prototype,"effectiveUnits",void 0),t([l()],st.prototype,"line",void 0),t([l(),S("esri/widgets/ElevationProfile/t9n/ElevationProfile")],st.prototype,"_messages",void 0),t([l(),S("esri/core/t9n/Units")],st.prototype,"_messagesUnits",void 0),st=t([g("esri.widgets.ElevationProfile.Statistics")],st);let ot=class extends P{constructor(t,e){super(t,e),this.expanded=!1,this.checkboxVisible=!0,this._messages=null}initialize(){this._statistics=new st(this._statisticsProps),this.own(this.watch("_statisticsProps",(t=>{this._statistics.set(t)})))}destroy(){this._statistics=i(this._statistics)}render(){const t=this.expanded;return w("div",{key:this,class:this.classes(Y.base,{[Y.disabled]:this.disabled,[Y.expanded]:t})},this._renderColorIndicator(),w("div",{key:"header",class:Y.header},this._renderLabelWithCheckbox(),this._renderCollapseToggleButton()),t&&w("div",{key:"content",class:Y.content},this._statistics.render()))}get disabled(){return!this.line.available}get _statisticsProps(){return{line:this.line,effectiveUnits:this.effectiveUnits}}_renderColorIndicator(){return w("div",{key:"color-indicator",class:Y.colorIndicator,styles:{backgroundColor:this.line.color.toCss()}})}_renderCollapseToggleButton(){const t=this._messages,e=this.expanded?t.hideDetails:t.showDetails;return w("button",{key:"collapse-toggle",bind:this,class:Y.collapseToggle,onclick:this._onCollapseToggleClick,title:e,"aria-label":e,type:"button"},w("span",{class:Y.collapseToggleIcon}))}_onCollapseToggleClick(){this.onExpandedToggle()}_renderLabelWithCheckbox(){const{line:t,checkboxVisible:e,disabled:s}=this,i=`${Y.base}__check-${t.id}`;return w("label",{key:"id",for:i,class:this.classes(Y.label,{[Y.labelDisabled]:s||!e})},e&&this._renderCheckbox(i),w("span",null,it(t,this._messages)))}_renderCheckbox(t){const e=this.line,s=e.visible,i=this.disabled,o=this._messages,r=s?o.hideProfile:o.showProfile,n=it(e,this._messages),a=f(r,{name:n});return w("button",{key:"checkbox",id:t,class:this.classes(Y.checkbox,{[Y.checkboxChecked]:s}),title:a,checked:s,disabled:i,role:"checkbox","aria-checked":s?"true":"false","aria-label":a,bind:this,onclick:t=>this._onCheckboxToggle(t,e)})}_onCheckboxToggle(t,e){t.stopPropagation(),e.toggleVisibility()}};t([l({nonNullable:!0})],ot.prototype,"effectiveUnits",void 0),t([l({nonNullable:!0})],ot.prototype,"line",void 0),t([l()],ot.prototype,"expanded",void 0),t([l()],ot.prototype,"disabled",null),t([l()],ot.prototype,"checkboxVisible",void 0),t([l()],ot.prototype,"onExpandedToggle",void 0),t([l()],ot.prototype,"_statistics",void 0),t([l(),S("esri/widgets/ElevationProfile/t9n/ElevationProfile")],ot.prototype,"_messages",void 0),ot=t([g("esri.widgets.ElevationProfile.LegendItem")],ot);let rt=class extends P{constructor(t,e){super(t,e),this._items=new j,this._expandedLine=null}initialize(){this.own([_(this,"profiles",(t=>{this._destroyItems(),this._items.addMany(t.map((t=>this._createItemForLine(t))))})),this.watch("effectiveUnits",(t=>{this._items.forEach((e=>{e.effectiveUnits=t}))}))])}destroy(){this._destroyItems()}render(){return w("div",{class:N},this._items.toArray().map((t=>t.render())))}_onExpandedToggle(t){this._expandedLine=t===this._expandedLine?null:t,this._items.forEach((t=>t.expanded=t.line===this._expandedLine))}_createItemForLine(t){return new ot({line:t,effectiveUnits:this.effectiveUnits,expanded:t===this._expandedLine,checkboxVisible:this.profiles.length>1,onExpandedToggle:()=>this._onExpandedToggle(t)})}_destroyItems(){this._items.drain((t=>t.destroy()))}};t([l()],rt.prototype,"profiles",void 0),t([l()],rt.prototype,"effectiveUnits",void 0),t([l()],rt.prototype,"_items",void 0),t([l()],rt.prototype,"_expandedLine",void 0),rt=t([g("esri.widgets.ElevationProfile.Legend")],rt);let nt=class extends P{constructor(t,e){super(t,e),this._messagesUnits=null,this._popover=null,this._buttonElement=null,this._clickOutsideHandle=null,this._requestFocusOnCreate=!1}destroy(){this._destroyPopover()}render(){const t=s(this._popover)&&this._popover.open?this._messages.hideSettings:this._messages.showSettings;return w("button",{class:K.base,title:t,bind:this,afterCreate:this._initializePopover,onclick:this._togglePopover,"aria-label":t})}_initializePopover(t){this._destroyPopover(),this._buttonElement=t,this._popover=new A({owner:this,placement:"bottom-end",offset:[0,0],anchorElement:t,renderContentFunction:()=>this._renderPopoverContent()})}_destroyPopover(){e(this._clickOutsideHandle,(t=>t.remove())),i(this._popover)}_renderPopoverContent(){const t=this._messagesUnits,{unit:e,unitOptions:s}=this;return w("div",{class:K.popoverContent,bind:this,onkeydown:this._onPopoverKeyDown,afterCreate:this._onPopoverContentAfterCreate},w("label",{class:K.selectLabel},this._messages.unitSelectLabel),w("select",{class:K.select,value:e,bind:this,onchange:this._onUnitChange,afterCreate:this._onUnitSelectAfterCreate},s.map((e=>w("option",{key:e,value:e},k(e)?t.systems[e]:t.units[e].pluralCapitalized)))))}_onUnitChange(t){const e=t.target;this.onUnitChange(e.value),this._closePopover()}_onUnitSelectAfterCreate(t){this._requestFocusOnCreate&&(this._requestFocusOnCreate=!1,t.focus())}_onPopoverKeyDown(t){switch(t.key){case"Enter":case"Escape":t.stopPropagation(),t.preventDefault(),this._closePopover()}}_togglePopover(t){s(this._popover)&&this._popover.open?this._closePopover():this._openPopover()}_openPopover(){e(this._popover,(t=>t.open=!0)),this._requestFocusOnCreate=!0}_closePopover({focusOnButton:t=!0}={}){e(this._popover,(t=>t.open=!1)),e(this._clickOutsideHandle,(t=>t.remove())),t&&e(this._buttonElement,(t=>t.focus()))}_onPopoverContentAfterCreate(t){e(this._clickOutsideHandle,(t=>t.remove())),this._clickOutsideHandle=n([u(t,"click",(t=>t.stopPropagation())),u(window,"click",(()=>this._closePopover({focusOnButton:!1})))])}};function at(t,e){const s=Math.floor(Math.log10(t)),i=t/10**s;let o;return o=e?i<1.5?1:i<3?2:i<5?2.5:i<7?5:10:i<=1?1:i<=2?2:i<=3?2.5:i<=5?5:10,o*10**s}t([l()],nt.prototype,"unit",void 0),t([l()],nt.prototype,"unitOptions",void 0),t([l()],nt.prototype,"onUnitChange",void 0),t([l(),S("esri/widgets/ElevationProfile/t9n/ElevationProfile")],nt.prototype,"_messages",void 0),t([l(),S("esri/core/t9n/Units")],nt.prototype,"_messagesUnits",void 0),nt=t([g("esri.widgets.ElevationProfile.SettingsButton")],nt);const lt={sideSpacing:15,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,axisFontSize:9,axisFontWeight:"400",axisGridStroke:"#f4f4f4",axisLabelsFontSize:9,axisLabelsFontWeight:"400",axisLabelsColor:"#a9a9a9",axisTooltipFontSize:12,axisTooltipBackgroundColor:"#323232",axisTooltipLabelColor:"#f8f8f8",axisTooltipPaddingTop:Math.round(3),axisTooltipPaddingBottom:Math.round(3),axisTooltipPaddingHorizontal:Math.round(3.75),xAxisMinGridDistance:50,xAxisLabelsSpacing:Math.round(6),xAxisMinLabelPosition:.05,xAxisMaxLabelPosition:.9,yAxisMinGridDistance:30,yAxisExtraFactorTop:.25,yAxisExtraFactorBottom:.02,yAxisLabelSpacing:Math.round(3.75),yAxisMinLabelPosition:0,yAxisMaxLabelPosition:.8,seriesTooltipFontSize:12,seriesTooltipBackgroundColor:"#f8f8f8",seriesTooltipLabelColor:"#323232",seriesFillLighten:.9,seriesTooltipSpacing:6,seriesTooltipPaddingVertical:Math.round(3.75),seriesTooltipPaddingHorizontal:Math.round(3.75),tooltipBorderRadius:0},pt={...lt,axisGridStroke:"#323232",axisLabelsColor:"#a9a9a9",axisTooltipBackgroundColor:"#323232",axisTooltipLabelColor:"#f8f8f8",seriesTooltipBackgroundColor:"#323232",seriesTooltipLabelColor:"#f8f8f8",seriesFillLighten:-.75};async function ct(t){const i=await T();d(t.abortOptions);const{am4core:a,am4charts:l}=i;a.options.minPolylineStep=3,a.options.autoSetClassName=!0,a.options.animationsEnabled=!1;const p=C(),m=p?pt:lt;p&&a.useTheme(i.am4themes_dark);const u=a.create(t.container,l.XYChart);u.arrangeTooltips=!1,u.preloader.disabled=!0,u.zoomOutButton.disabled=!0;const h=x();u.rtl=h,u.padding(m.paddingTop,h?m.paddingLeft:m.paddingRight,m.paddingBottom,h?m.paddingRight:m.paddingLeft);const g=u.plotContainer.background;g.strokeWidth=0,g.strokeOpacity=0,g.stroke=null;const j=u.xAxes.push(new l.ValueAxis),b=u.yAxes.push(new l.ValueAxis),y={params:t,amCharts4Index:i,amChart:u,xAxis:j,yAxis:b,series:new Map,data:null,messages:null,theme:m};u.cursor=function(t){const e=new t.amCharts4Index.am4charts.XYCursor;return e.trackable=!0,e.lineY.disabled=!0,e.behavior="zoomX",e}(y),function(t){const e=t.theme,s=t.amChart.tooltip,{am4core:i}=t.amCharts4Index;s.id="series-tooltip",s.fitPointerToBounds=!0,s.pointerOrientation="vertical",s.zIndex=-1,s.getFillFromObject=!1,s.label.fontSize=e.seriesTooltipFontSize,s.label.fill=i.color(e.seriesTooltipLabelColor),s.label.padding(e.seriesTooltipPaddingVertical,e.seriesTooltipPaddingHorizontal,e.seriesTooltipPaddingVertical,e.seriesTooltipPaddingHorizontal),s.background.cornerRadius=e.tooltipBorderRadius,s.background.stroke=null,s.background.fill=i.color(e.seriesTooltipBackgroundColor),s.background.padding(0,0,0,0),s.adapter.add("dy",(()=>e.seriesTooltipSpacing*(s.background.pointerY<=0?1:-1))),x()&&(s.label.textAlign="middle")}(y),function(t){const{xAxis:e,theme:s}=t,{am4core:i}=t.amCharts4Index;e.numberFormatter=kt(t,"distance"),e.strictMinMax=!0,e.cursorTooltipEnabled=!1,e.title.visible=!1;const o=e.renderer;o.line.visible=!1,o.minGridDistance=s.xAxisMinGridDistance,o.minLabelPosition=s.xAxisMinLabelPosition,o.maxLabelPosition=s.xAxisMaxLabelPosition,o.fontWeight=s.axisFontWeight,o.fontSize=s.axisFontSize,o.baseGrid.disabled=!0;const r=o.labels.template;r.fontSize=s.axisLabelsFontSize,r.fontWeight=s.axisLabelsFontWeight,r.fill=i.color(s.axisLabelsColor),r.paddingTop=s.xAxisLabelsSpacing,r.horizontalCenter="left",r.paddingLeft=0;const n=e.tooltip;n.id="axis-tooltip",n.background.fill=i.color(s.axisTooltipBackgroundColor),n.background.stroke=null,n.background.padding(0,0,0,0),n.label.fontSize=s.axisTooltipFontSize,n.label.fill=i.color(s.axisTooltipLabelColor),n.label.padding(s.axisTooltipPaddingTop,s.axisTooltipPaddingHorizontal,s.axisTooltipPaddingBottom,s.axisTooltipPaddingHorizontal);const a=o.grid.template;a.strokeOpacity=1,a.stroke=i.color(s.axisGridStroke)}(y),function(t){const{yAxis:e,theme:s}=t,{am4core:i}=t.amCharts4Index;e.numberFormatter=kt(t,"elevation"),e.title.visible=!1,e.cursorTooltipEnabled=!1,e.strictMinMax=!0,e.baseValue=F;const o=e.renderer;o.inside=!0,o.line.opacity=0,o.line.visible=!1,o.minGridDistance=s.yAxisMinGridDistance,o.minLabelPosition=s.yAxisMinLabelPosition,o.maxLabelPosition=s.yAxisMaxLabelPosition,o.fontWeight=s.axisFontWeight,o.fontSize=s.axisFontSize,o.baseGrid.disabled=!0;const r=o.labels.template;r.fontSize=s.axisLabelsFontSize,r.fontWeight=s.axisLabelsFontWeight,r.fill=i.color(s.axisLabelsColor),r.verticalCenter="bottom",r.paddingLeft=s.yAxisLabelSpacing,r.paddingBottom=0;const n=o.grid.template;n.strokeOpacity=1,n.stroke=i.color(s.axisGridStroke),x()&&(o.opposite=!0,r.textAlign="middle",r.paddingLeft=0,r.paddingRight=s.yAxisLabelSpacing)}(y);const f=[gt(y,t.onRangeChange),bt(y,t.onCursorPositionChange),jt(y)];let k=null,_=!1;const S=()=>{o(k)||("undefined"!=typeof window&&"cancelIdleCallback"in window?window.cancelIdleCallback(k):clearTimeout(k),k=null)};return{...y,destroy(){_=!0,S(),n(f).remove(),u.dispose()},update(t){if(t.data===y.data&&t.messages===y.messages)return;if(S(),_)return;const i=()=>{_||(k=null,function(t,{data:i,messages:n}){yt(t);const a=s(i)&&i.fullyRefined;t.amChart.cursor.disabled=!a,t.amChart.htmlContainer.classList.toggle(q.cursorEnabled,a);const l=t.data!==i,p=e(t.data,(t=>t.effectiveUnits))!==e(i,(t=>t.effectiveUnits));t.data=i,t.messages=n,l&&(function({xAxis:t,data:e}){if(o(e))return;let i=0;for(const t of e.lines){var n;const e=r(t.samples,[]),o=null==(n=c(e))?void 0:n.distance;s(o)&&o>i&&(i=o)}t.min=0,t.max=i}(t),function({yAxis:t,data:i,theme:r}){if(o(i))return;const n=e(i.statistics,(t=>t.maxDistance)),a=e(i.statistics,(t=>t.minElevation)),l=e(i.statistics,(t=>t.maxElevation));if(s(n)&&s(a)&&s(l)){let e=a,s=l;if(i.dynamicElevationRange){let t=n;const o=l-a,r=i.effectiveUnits;t=v(n,r.distance,"meters");let p=v(o,r.elevation,"meters");p=Math.max(p,t/V,p),p=v(p,"meters",r.elevation),e=a,s=e+p}const o=Math.max(s-e,.001);e-=r.yAxisExtraFactorBottom*o,s+=r.yAxisExtraFactorTop*o,[t.min,t.max]=function(t,e,s=10){const i=at(e-t,!1);if(0===i)return[t,e];const o=at(i/(s-1),!0);return[Math.floor(t/o)*o,Math.ceil(e/o)*o]}(e,s,10)}else t.min=void 0,t.max=void 0}(t),function(t){const{amChart:s,data:i}=t;if(o(i)||0===i.lines.length)return void s.series.clear();const r=new Map,n=new Set(s.series.values),a=i.lines.length;for(let o=0;o<a;o++){const l=i.lines[o];let p=t.series.get(l.id);p?(e(p.fill,(t=>n.delete(t))),n.delete(p.line)):(p=dt(t,l),e(p.fill,(t=>s.series.push(t))),s.series.push(p.line)),r.set(p.id,p);const c=a-o-1;e(p.fill,(t=>t.zIndex=c)),p.line.zIndex=a+c,mt(t,p,l)}t.series=r;for(const t of n)s.series.removeValue(t)}(t));p&&(t.yAxis.invalidateLabels(),t.xAxis.invalidateLabels())}(y,t))};k="undefined"!=typeof window&&"requestIdleCallback"in window?window.requestIdleCallback(i,{timeout:30}):setTimeout(i,30)},zoomOut(){_||y.xAxis.zoom({start:0,end:1},!1,!0)}}}function mt(t,{line:s,fill:i},o){const{theme:n}=t,{am4core:a}=t.amCharts4Index,{r:l,g:p,b:c,a:m}=o.color,u=a.color({r:l,g:p,b:c,a:m}),d=r(o.samples,[]),h=d.length>0;s.stroke=u,s.visible=h,e(i,(t=>{t.visible=h,t.fill=u.lighten(n.seriesFillLighten)}));const g=d.length,j=s.data;if(j.length===g){for(let t=0;t<g;++t)ut(j[t],d[t]);s.invalidateRawData(),e(i,(t=>t.invalidateRawData()))}else s.data=d,e(i,(t=>t.data=d))}function ut(t,e){t.x=e.x,t.y=e.y,t.z=e.z,t.distance=e.distance,t.elevation=e.elevation}function dt(t,e){const{id:s}=e,i=ht(t,`line-${s}`);i.strokeWidth=e.chartStrokeWidth,i.dy=e.chartStrokeOffsetY;let o=null;return e.chartFillEnabled&&(o=ht(t,`fill-${s}`),o.fillOpacity=1),{id:s,line:i,fill:o}}function ht(t,e){const s=new t.amCharts4Index.am4charts.LineSeries;s.id=e,s.showOnInit=!1,s.simplifiedProcessing=!0,s.minDistance=2,s.excludeFromTotal=!0,s.clickable=!1,s.contextMenuDisabled=!0,s.cursorHoverEnabled=!1,s.cursorTooltipEnabled=!1,s.connect=!1,s.fill=null,s.stroke=null;s.dataFields.valueX="distance";return s.dataFields.valueY="elevation",s}function gt({xAxis:t},e){const s=t.events.on("rangechangeended",(()=>{e(t.zoomFactor)}));return a((()=>s.dispose()))}function jt({xAxis:t,yAxis:e}){const s=t=>()=>{t.renderer.grid.each((t=>{t.visible="none"!==t.dataItem.label.dom.getAttribute("display")}))},i=[t.events.on("rangechangeended",s(t)),t.events.on("validated",s(t)),e.events.on("rangechangeended",s(e)),e.events.on("validated",s(e))];return a((()=>{i.forEach((t=>t.dispose()))}))}function bt(t,i){const{amChart:r,xAxis:n,yAxis:l}=t,{cursor:p}=r;let c=!1;const m=()=>{const r=n.toAxisPosition(p.xPosition),a=l.toAxisPosition(p.yPosition);i(r,a),function(t){const{amChart:i,xAxis:r,theme:n}=t;if(yt(t),!e(t.data,(t=>t.fullyRefined)))return;const a=i.tooltip,l=r.tooltip,p=function(t){const{amChart:i,yAxis:r,data:n}=t;if(o(n))return null;const a=n.lines.map((s=>({line:s,y:e(vt(t,s),(t=>t.elevation))}))).sort(ft),l=a.length?a[0].y:null;if(o(l))return null;const p=i.cursor,c=r.measuredHeight,m=c+i.pixelPaddingTop;return{text:a.map((({y:e,line:i})=>function(t,e,i){const{data:r,messages:n}=t;if(o(r)||o(n))return"";const a=f(n.chartTooltip,{name:it(e,n),elevation:s(i)?M(n,i,r.effectiveUnits.elevation,I):D});return`[${e.color.toHex()}]●[/] ${a}`}(t,i,e))).join("\n"),x:p.point.x+p.parent.pixelX+i.pixelPaddingLeft,y:m-r.valueToPosition(l)*c}}(t);if(s(p)){a.text=p.text,a.show(0),a.validate();const e=p.y-a.contentHeight-n.seriesTooltipSpacing;a.pointerOrientation=e<30?"up":"down",a.pointTo(p,!0),l.text=function(t){const{data:e,messages:i}=t;if(o(e)||o(i))return"";const r=e.lines[0],n=r?vt(t,r):null;return s(n)?M(i,n.distance,e.effectiveUnits.distance,I):"-"}(t),l.show(),i.cursor.show()}}(t)},u=()=>{c=!1,i(null,null),yt(t)},d=[p.events.on("cursorpositionchanged",(()=>{c&&m()})),r.events.on("over",(()=>{c=!0})),r.events.on("out",u),r.events.on("blur",u)];return a((()=>{d.forEach((t=>t.dispose()))}))}function yt({amChart:t,xAxis:e}){t.cursor.hide(),t.tooltip.hide(),e.hideTooltip()}function ft({y:t},{y:e}){return o(t)?1:o(e)?-1:e-t}function kt(t,e){const s=t.xAxis.numberFormatter.clone();return s.format=(s,i,r)=>{const{messages:n,data:a}=t;if(o(n)||o(a)||"string"==typeof s)return"";return`${y(s,{maximumFractionDigits:r})} ${U(n,a.effectiveUnits[e],"abbr")}`},s}function vt({amChart:t,xAxis:e},s){const i=r(s.samples,[]);if(0===i.length)return null;const o=e.toAxisPosition(t.cursor.xPosition),n=e.positionToValue(o);return m(i,n,(t=>t.distance))}const _t=[{type:"select"},{type:"sketch"}],Ct={none:null,"no-valid-input":"noProfile","no-visible-profiles":"noProfile","refined-but-no-chart-data":"noProfile","too-complex":"tooComplex","unknown-error":"unknown","invalid-geometry":"invalidGeometry","invalid-elevation-info":"invalidElevationInfo"};let xt=class extends P{constructor(t,e){super(t,e),this.viewModel=null,this.view=null,this.input=null,this.profiles=null,this.unitOptions=[],this.unit="metric",this.geodesicDistanceThreshold=1e5,this.visibleElements=new et,this.iconClass=W.widgetIcon,this.label=void 0,this.messages=null,this.messagesCommon=null,this.messagesUnits=null,this._chartContainer=null,this._chart=null,this._resizeObserver=null,this._portrait=!1,this._zoomOutButtonVisible=!1,this._chartInitTask=null,this._getChartUpdateParamsMemoized=z(((t,e,s,i)=>({chart:t,data:e,stationary:s,messages:i}))),this._getDetailsPropsMemoized=z(((t,e)=>({effectiveUnits:t,profiles:e}))),this._getSettingsButtonPropsMemoized=z(((t,e,s)=>({unit:t,unitOptions:e,onUnitChange:s}))),this._onUnitChange=t=>{this.unit=t},null!=t&&t.viewModel||(this._defaultViewModel=new G({view:null==t?void 0:t.view}),this.viewModel=this._defaultViewModel)}initialize(){this._settingsButton=new nt(this._settingsButtonProps),this.own(this.watch("_detailsProps",(t=>{this._legend.set(t)}))),this._legend=new rt(this._detailsProps),this.own(this.watch("_settingsButtonProps",(t=>{this._settingsButton.set(t)})))}postInitialize(){this.own([_(this,"_chartContainer",(()=>{this._destroyChart();const t=this._chartContainer;o(t)||(this._chartInitTask=h((e=>this._initializeChart(t,e))))})),_(this,"_chartUpdateParams",(()=>this._updateChart()))])}destroy(){this._destroyChart(),s(this._defaultViewModel)&&this.viewModel!==this._defaultViewModel&&this._defaultViewModel.destroy(),this._legend=i(this._legend),this._settingsButton=i(this._settingsButton),s(this._resizeObserver)&&(this._resizeObserver.disconnect(),this._resizeObserver=null)}get _chartUpdateParams(){const t=this.view;return this._getChartUpdateParamsMemoized(this._chart,this.viewModel.chartData,!s(t)||t.stationary,this._chartMessages)}get _chartMessages(){return{...this.messagesUnits,...this.messages}}get _detailsProps(){return this._getDetailsPropsMemoized(this.viewModel.effectiveUnits,this._profilesArray)}get _profilesArray(){return this.profiles.toArray()}get _settingsButtonProps(){return this._getSettingsButtonPropsMemoized(this.unit,this.unitOptions,this._onUnitChange)}render(){const{viewModel:t,visible:e}=this;return w("div",{key:this,class:this.classes({[W.base]:e,[W.esriWidget]:e,[W.esriWidgetDisabled]:e&&"disabled"===t.state,[W.portrait]:this._portrait,[W.refined]:1===this.viewModel.progress}),bind:this,afterCreate:this._onAfterCreate,"aria-label":this.messages.widgetLabel},e&&this._renderContentForState())}_renderContentForState(){switch(this.viewModel.state){case O.Ready:return this._renderContentForReadyState();case O.Selecting:return this._renderContentForSelectingState();case O.Creating:return this._renderContentForCreatingState();case O.Selected:return this._renderContentForSelectedState();case O.Created:return this._renderContentForCreatedState();case O.Disabled:return this._renderContentForReadyState()}}_renderContentForReadyState(){const{sketchButton:t,selectButton:e}=this.visibleElements,s=this.messages;let i;if(t&&e)i=s.readyPrompt;else if(t)i=s.readyPromptCreateOnly;else if(e)i=s.readyPromptSelectOnly;else{var o;i=null==(o=s.errors)?void 0:o.noProfile}return this._renderContent({prompt:i,chart:!1,actions:_t})}_renderContentForSelectingState(){const t=this.view;if(o(t))return null;const e=this.messages[`selectingPrompt-${t.type}`];return this._renderContent({prompt:e,chart:!1,actions:[{type:"select-cancel"}]})}_renderContentForCreatingState(){const{view:t,viewModel:e}=this;if(o(t))return null;const s=e.hasVertices?[{type:"sketch-cancel"},{type:"sketch-done",disabled:!e.tool.interaction.canStopCreating}]:[{type:"select"},{type:"sketch",disabled:!0}];if("no-valid-input"===e.errorState){const e=this.messages[`creatingPrompt-${t.type}`];return this._renderContent({chart:!1,actions:s,prompt:e})}const i=this._getErrorMessage();return i?this._renderContent({chart:!1,actions:s,prompt:i}):this._renderContent({chart:!0,actions:s})}_renderContentForSelectedState(){const t=this._getErrorMessage();return t?this._renderContent({chart:!1,actions:_t,prompt:t}):this._renderContent({chart:!0,actions:_t})}_renderContentForCreatedState(){const t=this._getErrorMessage();return t?this._renderContent({chart:!1,actions:_t,prompt:t}):this._renderContent({chart:!0,actions:_t})}_getErrorMessage(){var t,e;const s=Ct[this.viewModel.errorState];return null==(t=this.messages)||null==(e=t.errors)?void 0:e[s]}_renderContent(t){const e=s(t.prompt)?this._renderPrompt(t.prompt):t.chart&&this._renderChart();return[w("header",{key:"header",class:W.header},this._zoomOutButtonVisible&&this._renderZoomOutButton(),this.visibleElements.settingsButton&&this._settingsButton.render()),w("div",{class:W.mainContainer},e),this.visibleElements.legend&&this._legend.render(),this._renderActions(t)]}_renderZoomOutButton(){return w("button",{key:"zoom-out",class:W.zoomOutButton,bind:this,onclick:this._onZoomOutButtonClick,title:this.messages.zoomOut})}_onZoomOutButtonClick(){e(this._chart,(t=>t.zoomOut()))}_renderPrompt(t){return[w("div",{key:"prompt-container",bind:this,class:W.promptContainer},w("p",null,t))]}_renderChart(){if(!this.visibleElements.chart)return[w("div",{key:"empty-chart-container",class:W.chartContainer})];const{chartData:t,progress:e}=this.viewModel,i=this._canRenderChart(t);if(!i)return[this._renderSpinner({size:"large"}),w("div",{key:"chart-container-empty",class:W.chartContainer})];return[s(t)&&e>0&&e<1&&this._renderSpinner({size:i?"small":"large"}),w("div",{key:"chart-container",bind:this,class:W.chartContainer,afterCreate:this._onChartContainerAfterCreate,afterRemoved:this._onChartContainerRemoved})]}_renderSpinner(t){return w("div",{key:"spinner",class:this.classes(W.chartSpinner,{[W.chartSpinnerSmall]:"small"===t.size}),enterAnimation:this._spinnerEnterAnimation,exitAnimation:this._spinnerExitAnimation})}_spinnerEnterAnimation(t){requestAnimationFrame((()=>t.classList.add(W.chartSpinnerVisible)))}_spinnerExitAnimation(t,e){t.classList.remove(W.chartSpinnerVisible),setTimeout(e,200)}_canRenderChart(t){if(o(t))return!1;if(!this.viewModel.inputIsSketched)return t.fullyRefined;const e=t.lines.reduce(((t,{samples:e})=>s(e)?t+e.length:t),0);return t.fullyRefined||e<=R}_renderActions({actions:t}){const e=t.map((t=>{switch(t.type){case"sketch":return this.visibleElements.sketchButton&&this._renderAction({action:t,onClick:this._onSketchButtonClick,className:W.sketchButton,label:this.messages.sketchButtonLabel});case"sketch-cancel":return this.visibleElements.sketchButton&&this._renderAction({action:t,onClick:this._onCancelButtonClick,className:W.sketchCancelButton,label:this.messagesCommon.cancel});case"sketch-done":return this.visibleElements.sketchButton&&this._renderAction({action:t,onClick:this._onDoneButtonClick,className:W.sketchDoneButton,label:this.messagesCommon.done});case"select":return this.visibleElements.selectButton&&this._renderAction({action:t,onClick:this._onSelectButtonClick,className:W.selectButton,label:this.messages.selectButtonLabel});case"select-cancel":return this.visibleElements.selectButton&&this._renderAction({action:t,onClick:this._onCancelButtonClick,className:W.selectCancelButton,label:this.messagesCommon.cancel})}})).filter(Boolean);return e.length?w("footer",{key:"footer",class:W.footer},e):null}_renderAction({action:t,onClick:e,className:s,label:i}){return w("button",{key:`action-${t.type}`,class:this.classes(W.actionButton,s,{[W.buttonDisabled]:t.disabled}),bind:this,disabled:t.disabled,onclick:e},i)}_onSketchButtonClick(){this.viewModel.start({mode:"sketch"})}_onSelectButtonClick(){this.viewModel.start({mode:"select"})}_onCancelButtonClick(){this.viewModel.cancel()}_onDoneButtonClick(){this.viewModel.stop()}_updateChart(){const t=this._chartUpdateParams;t.stationary&&s(t.chart)&&t.messages&&t.chart.update(t)}_onChartContainerAfterCreate(t){this._chartContainer=t}_onChartContainerRemoved(){this._chartContainer=null}async _initializeChart(t,e){this._chart=await ct({container:t,abortOptions:{signal:e},onRangeChange:t=>{this._zoomOutButtonVisible=1!==t},onCursorPositionChange:t=>{this.viewModel.hoveredChartPosition=t}}),this._updateChart()}_destroyChart(){s(this._chartInitTask)&&(this._chartInitTask.abort(),this._chartInitTask=null),s(this._chart)&&(this._chart.destroy(),this._chart=null)}_onAfterCreate(t){const e=()=>{this._portrait=t.getBoundingClientRect().width<$};e(),this._resizeObserver=new B((()=>e())),this._resizeObserver.observe(t)}};t([l({type:G})],xt.prototype,"viewModel",void 0),t([b("viewModel.view")],xt.prototype,"view",void 0),t([b("viewModel.input")],xt.prototype,"input",void 0),t([b("viewModel.profiles")],xt.prototype,"profiles",void 0),t([b("viewModel.unitOptions")],xt.prototype,"unitOptions",void 0),t([b("viewModel.unit")],xt.prototype,"unit",void 0),t([b("viewModel.geodesicDistanceThreshold")],xt.prototype,"geodesicDistanceThreshold",void 0),t([l({type:et,nonNullable:!0})],xt.prototype,"visibleElements",void 0),t([l()],xt.prototype,"iconClass",void 0),t([b("messages.widgetLabel",{overridable:!0})],xt.prototype,"label",void 0),t([b("viewModel.visible")],xt.prototype,"visible",void 0),t([l(),S("esri/widgets/ElevationProfile/t9n/ElevationProfile")],xt.prototype,"messages",void 0),t([l(),S("esri/t9n/common")],xt.prototype,"messagesCommon",void 0),t([l(),S("esri/core/t9n/Units")],xt.prototype,"messagesUnits",void 0),t([l()],xt.prototype,"_chartContainer",void 0),t([l()],xt.prototype,"_chart",void 0),t([l()],xt.prototype,"_settingsButton",void 0),t([l()],xt.prototype,"_legend",void 0),t([l()],xt.prototype,"_portrait",void 0),t([l()],xt.prototype,"_zoomOutButtonVisible",void 0),t([l()],xt.prototype,"_chartUpdateParams",null),t([l()],xt.prototype,"_chartMessages",null),t([l()],xt.prototype,"_detailsProps",null),t([l()],xt.prototype,"_profilesArray",null),t([l()],xt.prototype,"_settingsButtonProps",null),xt=t([g("esri.widgets.ElevationProfile")],xt);var St=xt;export default St;
