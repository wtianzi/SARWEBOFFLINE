/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
import{_ as t}from"./tslib.es6.js";import"../core/lang.js";import"./Logger.js";import{property as e}from"../core/accessorSupport/decorators/property.js";import{e as o}from"./ensureType.js";import{subclass as r}from"../core/accessorSupport/decorators/subclass.js";import{a as s}from"./JSONSupport.js";import"../core/urlUtils.js";import"./resourceExtension.js";import n from"../geometry/SpatialReference.js";import i from"../request.js";import a from"../geometry/Point.js";import p from"../geometry/Extent.js";import"../geometry.js";import{p as l,e as u,a as c}from"./utils4.js";import y from"../tasks/support/AddressCandidate.js";import{a as d}from"./commonProperties3.js";let m=class extends s{constructor(t){super(t),this.address=null,this.apiKey=null,this.categories=null,this.countryCode=null,this.forStorage=null,this.location=null,this.locationType=null,this.magicKey=null,this.maxLocations=null,this.outFields=null,this.outSpatialReference=null,this.searchExtent=null}};t([e({type:Object,json:{write:!0}})],m.prototype,"address",void 0),t([e(d)],m.prototype,"apiKey",void 0),t([e({type:[String],json:{read:{source:"category",reader:t=>t?t.split(","):null},write:{target:"category",writer:(t,e)=>{e.category=t?t.join(","):null}}}})],m.prototype,"categories",void 0),t([e({type:String,json:{write:!0}})],m.prototype,"countryCode",void 0),t([e({type:Boolean,json:{write:!0}})],m.prototype,"forStorage",void 0),t([e({type:a,json:{write:{writer:(t,e)=>{e.location=t?t.clone().normalize():null}}}})],m.prototype,"location",void 0),t([e({type:String,json:{write:!0}})],m.prototype,"locationType",void 0),t([e({type:String,json:{write:!0}})],m.prototype,"magicKey",void 0),t([e({type:Number,json:{write:!0}})],m.prototype,"maxLocations",void 0),t([e({type:[String],json:{write:{writer:(t,e)=>{e.outFields=t?t.join(","):null}}}})],m.prototype,"outFields",void 0),t([e({type:n,json:{read:{source:"outSR"},write:{target:"outSR"}}})],m.prototype,"outSpatialReference",void 0),t([e({type:p,json:{write:{writer:(t,e)=>{const o=t?t.shiftCentralMeridian():null;e.searchExtent=o}}}})],m.prototype,"searchExtent",void 0),m=t([r("esri.tasks.support.AddressToLocationsParameters")],m),m.from=o(m);var f=m;async function g(t,e,o){e=f.from(e);const r=l(t),{address:s,...n}=e.toJSON(),a={...s,...n,f:"json"},p=u({...r.query,...a}),y=c(p,o),d=`${r.path}/findAddressCandidates`;return i(d,y).then(j)}function j({data:t}){if(!t)return[];const{candidates:e,spatialReference:o}=t;return e?e.map((t=>{if(!t)return;const{extent:e,location:r}=t,s=!e||function(t){return t&&"number"==typeof t.xmin&&"number"==typeof t.ymin&&"number"==typeof t.xmax&&"number"==typeof t.ymax}(e);return function(t){return t&&"number"==typeof t.x&&"number"==typeof t.y}(r)&&s?(e&&(e.spatialReference=o),r.spatialReference=o,y.fromJSON(t)):void 0})):[]}let h=class extends s{constructor(t){super(t),this.addresses=null,this.categories=null,this.countryCode=null,this.locationType=null,this.outSpatialReference=null}};t([e({type:[Object],json:{read:{reader:t=>t&&t.records?t.records.map((t=>t.attributes)):null},write:{writer:(t,e)=>{const o=[];Array.isArray(t)&&t.forEach((t=>{o.push({attributes:t})})),e.addresses={records:o}}}}})],h.prototype,"addresses",void 0),t([e({type:[String],json:{read:{source:"category",reader:t=>t?t.split(","):null},write:{target:"category",writer:(t,e)=>{e.category=t?t.join(","):null}}}})],h.prototype,"categories",void 0),t([e({type:String,json:{read:{source:"sourceCountry"},write:{target:"sourceCountry"}}})],h.prototype,"countryCode",void 0),t([e({type:String,json:{write:!0}})],h.prototype,"locationType",void 0),t([e({type:n,json:{read:{source:"outSR"},write:{target:"outSR"}}})],h.prototype,"outSpatialReference",void 0),h=t([r("esri.tasks.support.AddressesToLocationsParameters")],h),h.from=o(h);var S=h;async function v(t,e,o){e=S.from(e);const r=l(t),s={...e.toJSON(),f:"json"},n=u({...r.query,...s}),a=c(n,o),p=`${r.path}/geocodeAddresses`;return i(p,a).then(w)}function w(t){const{data:e}=t;if(!e)return[];const{locations:o,spatialReference:r}=e;return o?o.map((t=>{const{location:e}=t;return e&&(e.spatialReference=r),y.fromJSON(t)})):[]}let x=class extends s{constructor(t){super(t),this.apiKey=null,this.location=null,this.locationType=null,this.outSpatialReference=null}};t([e(d)],x.prototype,"apiKey",void 0),t([e({type:a,json:{write:{writer:(t,e)=>{const o=t?t.clone().normalize():null,r=void 0!==o;e.location=r?o:null}}}})],x.prototype,"location",void 0),t([e({type:String,json:{write:!0}})],x.prototype,"locationType",void 0),t([e({type:n,json:{read:{source:"outSR"},write:{target:"outSR"}}})],x.prototype,"outSpatialReference",void 0),x=t([r("esri.tasks.support.LocationToAddressParameters")],x),x.from=o(x);var R=x;async function b(t,e,o){e=R.from(e);const r=l(t),s={...e.toJSON(),f:"json"},n=u({...r.query,...s}),a=c(n,o),p=`${r.path}/reverseGeocode`;return i(p,a).then(C)}function C({data:t}){if(!t)return;const{address:e,location:o}=t,r=e&&e.Match_addr||"";return y.fromJSON({address:r,attributes:e||{},location:o,score:100})}let N=class extends s{constructor(t){super(t),this.isCollection=null,this.magicKey=null,this.text=null}};t([e({type:Boolean,json:{write:!0}})],N.prototype,"isCollection",void 0),t([e({type:String,json:{write:!0}})],N.prototype,"magicKey",void 0),t([e({type:String,json:{write:!0}})],N.prototype,"text",void 0),N=t([r("esri.tasks.support.SuggestionCandidate")],N);var O=N;let K=class extends s{constructor(t){super(t),this.apiKey=null,this.categories=null,this.countryCode=null,this.location=null,this.maxSuggestions=null,this.outSpatialReference=null,this.searchExtent=null,this.text=null}};t([e(d)],K.prototype,"apiKey",void 0),t([e({type:[String],json:{read:{source:"category",reader:t=>t?t.split(","):null},write:{target:"category",writer:(t,e)=>{e.category=t?t.join(","):null}}}})],K.prototype,"categories",void 0),t([e({type:String,json:{write:!0}})],K.prototype,"countryCode",void 0),t([e({type:a,json:{write:{writer:(t,e)=>{e.location=t?t.clone().normalize():null}}}})],K.prototype,"location",void 0),t([e({type:Number,json:{write:!0}})],K.prototype,"maxSuggestions",void 0),t([e({type:n,json:{read:{source:"outSR"},write:{target:"outSR"}}})],K.prototype,"outSpatialReference",void 0),t([e({type:p,json:{write:{writer:(t,e)=>{const o=t?t.shiftCentralMeridian():null;e.searchExtent=JSON.stringify(o)}}}})],K.prototype,"searchExtent",void 0),t([e({type:String,json:{write:!0}})],K.prototype,"text",void 0),K=t([r("esri.tasks.support.SuggestLocationsParameters")],K),K.from=o(K);var T=K;async function A(t,e,o){const r=l(t),s={...(e=T.from(e)).toJSON(),f:"json"},n=u({...r.query,...s}),a=c(n,o),p=`${r.path}/suggest`;return i(p,a).then(E)}function E(t){const{data:e}=t;if(!e)return[];const{suggestions:o}=e;return o?o.map((t=>new O(t))):[]}export{f as A,R as L,T as S,g as a,v as b,b as l,A as s};
