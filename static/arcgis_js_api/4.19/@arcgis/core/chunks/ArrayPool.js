/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
class t{constructor(t,e,i,s=1,o=0){if(this.ctor=t,this.acquireFunction=e,this.releaseFunction=i,this.allocationSize=s,this._pool=new Array(o),this._initialSize=o,this.ctor)for(let t=0;t<o;t++)this._pool[t]=new this.ctor;this.allocationSize=Math.max(s,1)}destroy(){this.prune(0)}acquire(...e){let i;if(t.test.disabled)i=new this.ctor;else{if(0===this._pool.length){const t=this.allocationSize;for(let e=0;e<t;e++)this._pool[e]=new this.ctor}i=this._pool.pop()}return this.acquireFunction?this.acquireFunction(i,...e):function(t){return t&&t.acquire&&"function"==typeof t.acquire}(i)&&i.acquire(...e),i}release(e){e&&!t.test.disabled&&(this.releaseFunction?this.releaseFunction(e):function(t){return t&&t.release&&"function"==typeof t.release}(e)&&e.release(),this._pool.push(e))}prune(t=this._initialSize){if(!(t>=this._pool.length)){for(let e=t;e<this._pool.length;++e){const t=this._pool[e];this._dispose(t)}this._pool.length=t}}_dispose(t){t.dispose&&"function"==typeof t.dispose&&t.dispose()}}t.test={disabled:!1};const e=Array.prototype.splice;function i(t){t.length=0}class s{constructor(e=50,s=50){this._pool=new t(Array,void 0,i,s,e)}acquire(){return this._pool.acquire()}copy(t){const i=this.acquire();return t.unshift(0,0),e.apply(i,t),t.splice(0,2),i}release(t){this._pool.release(t)}prune(){this._pool.prune(0)}static acquire(){return o.acquire()}static copy(t){return o.copy(t)}static release(t){return o.release(t)}static prune(){o.prune()}}const o=new s(100);export{s as A,t as O};
