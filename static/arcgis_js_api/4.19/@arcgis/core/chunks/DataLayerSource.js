/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
import{_ as e}from"./tslib.es6.js";import"../core/lang.js";import"./Logger.js";import{property as r}from"../core/accessorSupport/decorators/property.js";import{I as t,e as o,a as s}from"./ensureType.js";import{subclass as a,c as p}from"../core/accessorSupport/decorators/subclass.js";import{a as i}from"./JSONSupport.js";import"../core/urlUtils.js";import{cast as l}from"../core/accessorSupport/decorators/cast.js";import{s as n}from"./jsonMap.js";import{e as c}from"./enumeration.js";import{r as y}from"./reader.js";import"./resourceExtension.js";import u from"../geometry/SpatialReference.js";import{f as d}from"./typeUtils.js";import"../geometry.js";import S from"../layers/support/Field.js";var b;let m=b=class extends i{constructor(e){super(e),this.type="map-layer"}clone(){const{mapLayerId:e,gdbVersion:r}=this;return new b({mapLayerId:e,gdbVersion:r})}};var j;e([c({mapLayer:"map-layer"})],m.prototype,"type",void 0),e([r({type:t,json:{write:!0}})],m.prototype,"mapLayerId",void 0),e([r({type:String,json:{write:!0}})],m.prototype,"gdbVersion",void 0),m=b=e([a("esri.layers.support.source.MapLayerSource")],m);let f=j=class extends i{constructor(e){super(e),this.type="query-table"}clone(){var e;const{workspaceId:r,query:t,oidFields:o,spatialReference:s,geometryType:a}=this,p={workspaceId:r,query:t,oidFields:o,spatialReference:null!=(e=null==s?void 0:s.clone())?e:void 0,geometryType:a};return new j(p)}};var v;e([c({queryTable:"query-table"})],f.prototype,"type",void 0),e([r({type:String,json:{write:!0}})],f.prototype,"workspaceId",void 0),e([r({type:String,json:{write:!0}})],f.prototype,"query",void 0),e([r({type:String,json:{write:!0}})],f.prototype,"oidFields",void 0),e([r({type:u,json:{write:!0}})],f.prototype,"spatialReference",void 0),e([c(d)],f.prototype,"geometryType",void 0),f=j=e([a("esri.layers.support.source.QueryTableDataSource")],f);let g=v=class extends i{constructor(e){super(e),this.type="raster"}clone(){const{workspaceId:e,dataSourceName:r}=this;return new v({workspaceId:e,dataSourceName:r})}};var T;e([c({raster:"raster"})],g.prototype,"type",void 0),e([r({type:String,json:{write:!0}})],g.prototype,"dataSourceName",void 0),e([r({type:String,json:{write:!0}})],g.prototype,"workspaceId",void 0),g=v=e([a("esri.layers.support.source.RasterDataSource")],g);let w=T=class extends i{constructor(e){super(e),this.type="table"}clone(){const{workspaceId:e,gdbVersion:r,dataSourceName:t}=this;return new T({workspaceId:e,gdbVersion:r,dataSourceName:t})}};var h,I;e([c({table:"table"})],w.prototype,"type",void 0),e([r({type:String,json:{write:!0}})],w.prototype,"workspaceId",void 0),e([r({type:String,json:{write:!0}})],w.prototype,"gdbVersion",void 0),e([r({type:String,json:{write:!0}})],w.prototype,"dataSourceName",void 0),w=T=e([a("esri.layers.support.source.TableDataSource")],w);const L=n()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let k=h=class extends i{constructor(e){super(e),this.type="join-table"}readLeftTableSource(e,r,t){return x()(e,r,t)}castLeftTableSource(e){return s(N(),e)}readRightTableSource(e,r,t){return x()(e,r,t)}castRightTableSource(e){return s(N(),e)}clone(){var e,r;const{leftTableKey:t,rightTableKey:o,leftTableSource:s,rightTableSource:a,joinType:p}=this,i={leftTableKey:t,rightTableKey:o,leftTableSource:null!=(e=null==s?void 0:s.clone())?e:void 0,rightTableSource:null!=(r=null==a?void 0:a.clone())?r:void 0,joinType:p};return new h(i)}};e([c({joinTable:"join-table"})],k.prototype,"type",void 0),e([r({type:String,json:{write:!0}})],k.prototype,"leftTableKey",void 0),e([r({type:String,json:{write:!0}})],k.prototype,"rightTableKey",void 0),e([r({json:{write:!0}})],k.prototype,"leftTableSource",void 0),e([y("leftTableSource")],k.prototype,"readLeftTableSource",null),e([l("leftTableSource")],k.prototype,"castLeftTableSource",null),e([r({json:{write:!0}})],k.prototype,"rightTableSource",void 0),e([y("rightTableSource")],k.prototype,"readRightTableSource",null),e([l("rightTableSource")],k.prototype,"castRightTableSource",null),e([c(L)],k.prototype,"joinType",void 0),k=h=e([a("esri.layers.support.source.JoinTableDataSource")],k);let R=null;function x(){return R||(R=p({types:N()})),R}let q=null;function N(){return q||(q={key:"type",base:null,typeMap:{"data-layer":K,"map-layer":m}}),q}const D={key:"type",base:null,typeMap:{"join-table":k,"query-table":f,raster:g,table:w}};let K=I=class extends i{constructor(e){super(e),this.type="data-layer"}clone(){const{fields:e,dataSource:r}=this;return new I({fields:e,dataSource:r})}};e([c({dataLayer:"data-layer"})],K.prototype,"type",void 0),e([r({type:[S],json:{write:!0}})],K.prototype,"fields",void 0),e([r({types:D,json:{write:!0}})],K.prototype,"dataSource",void 0),K=I=e([a("esri.layers.support.source.DataLayerSource")],K),K.from=o(K);export{K as D,m as M};
