/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
import{_ as e}from"./tslib.es6.js";import"../core/lang.js";import{b as t,i,e as s}from"./Logger.js";import{h as o}from"./metadata.js";import{property as r}from"../core/accessorSupport/decorators/property.js";import{c as n,r as l}from"../core/Accessor.js";import{j as a}from"../core/scheduling.js";import"./ensureType.js";import{subclass as p}from"../core/accessorSupport/decorators/subclass.js";import{E as u}from"./Evented.js";import"../core/urlUtils.js";import{g as c}from"./resourceExtension.js";import m from"../geometry/Point.js";import d from"../Color.js";import{a as h,i as v,c as f}from"./unitUtils.js";import{a as g}from"./vec4f64.js";function y(e){let t,i,s=[],o=!1;return function(...r){return o&&t===this&&function(e,t){if(e.length!==t.length)return!1;for(let i=0;i<e.length;++i)if(e[i]!==t[i])return!1;return!0}(r,s)||(i=e.apply(this,r),t=this,s=r,o=!0),i}}var S;!function(e){e.Disabled="disabled",e.Ready="ready",e.Creating="creating",e.Created="created",e.Selecting="selecting",e.Selected="selected"}(S||(S={}));const b=-5e5,x={noDataValue:-5e5,demResolution:"auto",maximumAutoTileRequests:150,ignoreInvisibleLayers:!0},j=100,E=500,P=.1,w=3e3,_=1e4,R=300,C=1e5,z=1,N=400,U=" â€• ",M={width:3,outlineSize:0,falloff:0,outlineColor:g([1,1,1,0]),renderOccluded:16},O={size:14,borderStyle:"solid",borderWidth:3,borderColor:"#ffffff",boxShadow:"0px 0px 0px 5px rgba(255,255,255,0.2)"},D=10,k={progress:1,hasZ:!1,samples:[],statistics:null,spatialReference:null};function L(e,t,i){return null==e?null:f(e*t,"meters",i)}function F(e,t,i){return null==e?null:f(e*t,"meters",i)}let Z=class extends u.EventedAccessor{constructor(e){super(e),this.type=null,this.id=c(),this.title=null,this.color=new d("#000000"),this.visible=!0,this._getSamplesMemoized=y(((e,i)=>function(e,i){if(t(e)||t(i))return null;const{samples:s,spatialReference:o}=e,{distance:r,elevation:n}=i,l=h(o),a=v(o),p=s.length,u=new Array(p);for(let e=0;e<p;++e){const t=s[e],i=t.sampledZ,o=t.coordinate;u[e]={x:o[0],y:o[1],z:i,distance:L(t.distance,l,r),elevation:F(i,a,n)}}return u}(e,i))),this._getStatisticsMemoized=y(((e,i)=>function(e,i){if(t(e)||t(i)||t(e.statistics)||t(e.spatialReference))return null;const{distance:s,elevation:o}=i,{statistics:r,spatialReference:n}=e,l=h(n),a=v(n);return{maxDistance:L(r.maxDistance,l,s),minElevation:F(r.minElevation,a,o),maxElevation:F(r.maxElevation,a,o),avgElevation:F(r.avgElevation,a,o),elevationGain:F(r.elevationGain,a,o),elevationLoss:F(r.elevationLoss,a,o),maxPositiveSlope:r.maxPositiveSlope,maxNegativeSlope:r.maxNegativeSlope,avgPositiveSlope:r.avgPositiveSlope,avgNegativeSlope:r.avgNegativeSlope}}(e,i))),this.result=null,this.effectiveUnits=null,this.numSamplesForPreview=30,this.numSamplesPerChunk=200,this.chartFillEnabled=!0,this.chartStrokeWidth=1.5,this.chartStrokeOffsetY=0}get progress(){return i(this.result)&&this.visible?this.result.progress:0}get samples(){return this._getSamplesMemoized(this.result,this.effectiveUnits)}get statistics(){return this._getStatisticsMemoized(this.result,this.effectiveUnits)}get hoveredPoint(){return s(this._viewModel.hoveredChartPosition,(e=>this._getPoint(e)))}get available(){return!0}get hasZ(){const e=this.result;return i(e)&&e.hasZ}get minDemResolution(){return.1}queryElevation(){throw new Error("not implemented")}attach(e){return this._viewModel=e,o([n((()=>e.effectiveUnits),(e=>{this.effectiveUnits=e})),l((()=>[e.input]),(()=>this._onChange()))])}toggleVisibility(e){this.visible=void 0===e?!this.visible:e}_onChange(){this.emit("change")}_getPoint(e){const{samples:i,result:s}=this;if(t(i)||t(s))return null;const o=i.length;if(0===o)return null;const r=e*i[o-1].distance,{x:n,y:l,z:p}=a(i,r,(e=>e.distance));return t(p)?null:new m({x:n,y:l,z:p,spatialReference:s.spatialReference})}};e([r({nonNullable:!0})],Z.prototype,"id",void 0),e([r({nonNullable:!0})],Z.prototype,"title",void 0),e([r({type:d,nonNullable:!0})],Z.prototype,"color",void 0),e([r({nonNullable:!0})],Z.prototype,"visible",void 0),e([r({readOnly:!0})],Z.prototype,"progress",null),e([r({readOnly:!0})],Z.prototype,"samples",null),e([r({readOnly:!0})],Z.prototype,"statistics",null),e([r()],Z.prototype,"hoveredPoint",null),e([r()],Z.prototype,"available",null),e([r()],Z.prototype,"result",void 0),e([r()],Z.prototype,"effectiveUnits",void 0),e([r()],Z.prototype,"numSamplesForPreview",void 0),e([r()],Z.prototype,"numSamplesPerChunk",void 0),e([r()],Z.prototype,"chartFillEnabled",void 0),e([r()],Z.prototype,"chartStrokeWidth",void 0),e([r()],Z.prototype,"chartStrokeOffsetY",void 0),e([r({readOnly:!0})],Z.prototype,"hasZ",null),e([r({readOnly:!0})],Z.prototype,"minDemResolution",null),e([r()],Z.prototype,"_viewModel",void 0),Z=e([p("esri.widgets.ElevationProfile.ElevationProfileLine")],Z);var A=Z;export{E as D,S as E,z as F,O as H,_ as L,R as M,U as N,N as P,D as S,j as U,b as a,x as b,k as c,P as d,w as e,C as f,A as g,Z as h,M as i,y as m};
