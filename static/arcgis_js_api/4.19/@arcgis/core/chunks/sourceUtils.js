/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
import{j as e}from"../geometry/SpatialReference.js";import{sanitizeNullFieldValue as t,validateFieldValue as n,validationErrorToString as i,isNumericField as r,isStringField as s}from"../layers/support/fieldUtils.js";class o{constructor(){this.code=null,this.description=null}}class l{constructor(e){this.error=new o,this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error.description=e}}function a(e){return new l(e)}class u{constructor(e){this.globalId=null,this.success=!0,this.objectId=this.uniqueId=e}}function c(e){return new u(e)}const f=new Set;function d(e,t,r,s,o=!1,l){f.clear();for(const t in s){const u=e.get(t);if(!u)continue;const c=s[t],d=m(u,c);if(d!==c&&l&&l.push({name:"invalid-value-type",message:"attribute value was converted to match the field type",details:{field:u,originalValue:c,sanitizedValue:d}}),f.add(u.name),u&&(o||u.editable)){const e=n(u,d);if(e)return a(i(e,u,d));r[u.name]=d}}for(const e of t)if(!f.has(e.name))return a(`missing required field "${e.name}"`);return null}function m(e,n){let i=n;return"string"==typeof n&&r(e)?i=parseFloat(n):null!=n&&s(e)&&"string"!=typeof n&&(i=String(n)),t(i)}let h;function p(t,n){if(!t||!e(n))return t;if("rings"in t||"paths"in t){if(!h)throw new TypeError("geometry engine not loaded");return h.simplify(n,t)}return t}async function g(t,n){!e(t)||"esriGeometryPolygon"!==n&&"esriGeometryPolyline"!==n||await async function(){return h||(h=await import("./geometryEngineJSON.js").then((function(e){return e.g})),h)}()}export{a,c,g as l,d as m,p as s};
