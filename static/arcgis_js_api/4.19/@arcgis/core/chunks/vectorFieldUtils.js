/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
import{i as e}from"./Logger.js";import t from"../layers/support/PixelBlock.js";const i=180/Math.PI,r=function(e){return e&&"esri.layers.support.PixelBlock"===e.declaredClass&&e.pixels&&e.pixels.length>0},a=new Map;function n(e,t){return a.get(e)/a.get(t)||1}function o(e){return(450-e)%360}function s(e,t="geographic"){const[r,a]=e,n=Math.sqrt(r*r+a*a);let s=Math.atan2(a,r)*i;return s=(360+s)%360,"geographic"===t&&(s=o(s)),[n,s]}function h(e,t="geographic"){let r=e[1];"geographic"===t&&(r=o(r)),r%=360;const a=e[0];return[a*Math.cos(r/i),a*Math.sin(r/i)]}function l(e,i,a="geographic",n=1){if(!r(e))return e;const{pixels:o,width:l,height:c}=e,p=l*c,u=o[0],x=o[1],m=t.createEmptyBand(e.pixelType,p),g=t.createEmptyBand(e.pixelType,p);let f=0;for(let e=0;e<c;e++)for(let e=0;e<l;e++)"vector-uv"===i?([m[f],g[f]]=s([u[f],x[f]],a),m[f]*=n):([m[f],g[f]]=h([u[f],x[f]],a),m[f]*=n,g[f]*=n),f++;const d=new t({pixelType:e.pixelType,width:e.width,height:e.height,mask:e.mask,validPixelCount:e.validPixelCount,maskIsAlpha:e.maskIsAlpha,pixels:[m,g]});return d.updateStatistics(),d}function c(e,t,i=1){if(1===i||!r(e))return e;const a=e.clone(),{pixels:n,width:o,height:s}=a,h=n[0],l=n[1];let c=0;for(let e=0;e<s;e++)for(let e=0;e<o;e++)"vector-uv"===t?(h[c]*=i,l[c]*=i):h[c]*=i,c++;return a.updateStatistics(),a}function p(t,i,r,a,n){if(!e(n)||!n.spatialReference.equals(t.spatialReference))return{extent:t,width:i,height:r};const o=n.xmin,s=n.ymax;a=Math.max(a||0,30);const h=Math.ceil(i*(1/a)),l=Math.ceil(r*(1/a)),c=((t.xmax-t.xmin)/h+(t.ymax-t.ymin)/l)/2;return t.xmin=o+Math.floor((t.xmin-o)/c)*c,t.xmax=o+Math.ceil((t.xmax-o)/c)*c,t.ymin=s+Math.floor((t.ymin-s)/c)*c,t.ymax=s+Math.ceil((t.ymax-s)/c)*c,{extent:t,width:Math.round(t.width/c),height:Math.round(t.height/c)}}a.set("meter-per-second",1),a.set("kilometer-per-hour",.277778),a.set("knots",.514444),a.set("feet-per-second",.3048),a.set("mile-per-hour",.44704);export{c as a,l as c,n as g,p as s};
