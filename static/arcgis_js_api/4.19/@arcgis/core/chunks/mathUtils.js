/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
import{c as t,a as n,b as s}from"./mathUtils2.js";import{c as i}from"./vec3f64.js";import{s as a,c as o,n as r,d as c,a as e,l as h,b as u,e as f,f as m}from"./vec3.js";function M(t){const n=t[0]*t[0]+t[4]*t[4]+t[8]*t[8],s=t[1]*t[1]+t[5]*t[5]+t[9]*t[9],i=t[2]*t[2]+t[6]*t[6]+t[10]*t[10];return Math.sqrt(Math.max(Math.max(n,s),i))}function l(t,n){const s=Math.sqrt(n[0]*n[0]+n[4]*n[4]+n[8]*n[8]),i=Math.sqrt(n[1]*n[1]+n[5]*n[5]+n[9]*n[9]),a=Math.sqrt(n[2]*n[2]+n[6]*n[6]+n[10]*n[10]);return e(t,s,i,a),t}function d(t,n,s){s=s||t;const i=c(t,n);e(s,t[0]-i*n[0],t[1]-i*n[1],t[2]-i*n[2]),r(s,s)}function b(t,n,s){Math.abs(t[0])>Math.abs(t[1])?e(n,0,1,0):e(n,1,0,0),o(s,t,n),r(n,n),o(n,s,t),r(s,s)}function g(t,n){return(t%n+n)%n}function z(t,s){const i=h(t),a=n(t[2]/i),o=Math.atan2(t[1]/i,t[0]/i);return e(s,i,a,o),s}function p(t,n,s){const i=s[0]-n[0],a=s[1]-n[1],o=s[2]-n[2];let r=i*i+a*a+o*o;return r?(r=1/Math.sqrt(r),t[0]=i*r,t[1]=a*r,t[2]=o*r,t):(t[0]=0,t[1]=0,t[2]=0,t)}function x(t,n,s,i,a,o){const r=t+(n-t)*a;return r+(s+(i-s)*a-r)*o}function q(t,n,s,a=i()){const o=h(t),r=h(n),e=c(t,n)/(o*r);if(e<.9999999999999999){const i=Math.acos(e),c=((1-s)*o+s*r)/Math.sin(i),h=c/o*Math.sin((1-s)*i),m=c/r*Math.sin(s*i);return u(y,t,h),u(A,n,m),f(a,y,A)}return m(a,t,n,s)}function j(t,n,s,o=i(),e=i()){const M=h(t),l=h(n),d=c(t,n)/(M*l);if(d<.9999999999999999){const i=Math.acos(d),a=Math.sin(i),r=Math.sin(s*i),c=Math.sin((1-s)*i),h=(1-s)*M+s*l;{const s=h/a,i=s/l*r;u(y,t,s/M*c),u(A,n,i),f(o,y,A)}{const o=1/M*(-Math.cos((1-s)*i)*i*h+c*(-M+l));u(y,t,o);const m=1/l*(Math.cos(s*i)*i*h+r*(-M+l));u(A,n,m),f(e,y,A),u(e,e,1/a)}return e}return m(o,t,n,s),a(e,n,t),r(e,e),e}function w(t,n,i){t=r(y,t),n=r(A,n);const a=s(c(t,n));if(i){const s=o(U,t,n);if(c(s,i)<0)return-a}return a}function I(t){const n=t.length;return function(s){if(s<=t[0][0])return t[0][1];if(s>=t[n-1][0])return t[n-1][1];let i=1;for(;s>t[i][0];)i++;const a=t[i-1][0],o=t[i][0],r=(o-s)/(o-a);return r*t[i-1][1]+(1-r)*t[i][1]}}class P{constructor(t,n){this.min=t,this.max=n,this.range=n-t}ndiff(t,n=0){return Math.ceil((t-n)/this.range)*this.range+n}_normalize(t,n,s,i=0,a=!1){return(s-=i)<t?s+=this.ndiff(t-s):s>n&&(s-=this.ndiff(s-n)),a&&s===n&&(s=t),s+i}normalize(t,n=0,s=!1){return this._normalize(this.min,this.max,t,n,s)}clamp(n,s=0){return t(n-s,this.min,this.max)+s}monotonic(t,n,s){return t<n?n:n+this.ndiff(t-n,s)}minimalMonotonic(t,n,s){return this._normalize(t,t+this.range,n,s)}center(t,n,s){return n=this.monotonic(t,n,s),this.normalize((t+n)/2,s)}diff(t,n,s){return this.monotonic(t,n,s)-t}shortestSignedDiff(t,n){t=this.normalize(t);const s=(n=this.normalize(n))-t,i=n<t?this.minimalMonotonic(t,n)-t:n-this.minimalMonotonic(n,t);return Math.abs(s)<Math.abs(i)?s:i}contains(t,n,s){return n=this.minimalMonotonic(t,n),(s=this.minimalMonotonic(t,s))>t&&s<n}}function _(t,n,s,i){a(v,n,t),a(k,s,t),o(i,v,k),r(i,i),i[3]=-c(t,i)}const v=i(),k=i();function C(t){for(const n in t){const s=t[n];s instanceof Function&&(t[n]=s.bind(t))}return t}const D=C(new P(0,2*Math.PI)),F=C(new P(-Math.PI,Math.PI)),S=C(new P(0,360)),U=i(),y=i(),A=i();export{P as C,I as a,w as b,S as c,p as d,F as e,D as f,l as g,M as h,x as i,z as j,d as k,j as l,g as m,_ as p,q as s,b as t};
