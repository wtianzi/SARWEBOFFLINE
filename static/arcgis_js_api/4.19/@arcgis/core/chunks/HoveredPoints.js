/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
import{_ as e}from"./tslib.es6.js";import"../core/lang.js";import{e as o,r as t}from"./Logger.js";import{property as r}from"../core/accessorSupport/decorators/property.js";import s,{d as i}from"../core/Accessor.js";import"./ensureType.js";import{subclass as n}from"../core/accessorSupport/decorators/subclass.js";import d from"../core/Collection.js";import"../core/urlUtils.js";import"./resourceExtension.js";import{A as a}from"./AnchorElementViewModel.js";import{H as c}from"./ElevationProfileLine.js";let p=class extends s{constructor(e){super(e),this._hoveredPoints=new d}initialize(){this._updateScreenLocationsHandle=i((()=>{this._hoveredPoints.forEach((({anchor:e,element:t})=>{o(e.screenLocation,(({x:e,y:o})=>{t.style.transform=`translate(${e}px, ${o}px)`}))}))}))}destroy(){this._updateScreenLocationsHandle=t(this._updateScreenLocationsHandle),this._hoveredPoints.drain((e=>this._destroyHoveredPoint(e)))}update(e){const o=this.view,t=this._hoveredPoints,r=e.length;for(;this._hoveredPoints.length>r;)this._destroyHoveredPoint(this._hoveredPoints.pop());for(;this._hoveredPoints.length<r;){const e=this._makeHoveredPoint();t.push(e),o.surface.appendChild(e.element)}for(let o=0;o<r;++o){const s=t.getItemAt(r-1-o),i=e[o];this._updateHoveredPoint(s,i)}}_makeHoveredPoint(){const{size:e,borderStyle:o,borderColor:t,borderWidth:r,boxShadow:s}=c,i=this.view,n=new a({view:i,screenLocationEnabled:!0}),d=document.createElement("div"),p=d.style;return p.position="absolute",p.top="0",p.left="0",p.contain="strict",p.boxSizing="border-box",p.width=`${e}px`,p.height=`${e}px`,p.marginTop=`-${e/2}px`,p.marginLeft=`-${e/2}px`,p.border=`${o} ${r}px ${t}`,p.borderRadius=`${e}px`,p.boxShadow=s,{anchor:n,element:d}}_updateHoveredPoint({anchor:e,element:o},t){e.screenLocationEnabled=!0,e.location=t.hoveredPoint;const r=o.style;r.display="block",r.background=t.color.toCss()}_destroyHoveredPoint({anchor:e,element:o}){e.destroy(),this.view.surface.removeChild(o)}};e([r()],p.prototype,"view",void 0),e([r()],p.prototype,"_hoveredPoints",void 0),p=e([n("esri.widgets.ElevationProfile.support.HoveredPoints")],p);export{p as H};
