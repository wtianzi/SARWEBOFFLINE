/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
import{R as e,b as t,i as r}from"../core/Accessor.js";async function s(e,t){return"3d"===e.type?new((await n(t.type)).viewConstructor)({view:e,dataObject:t}):null}async function o(e,t){return"3d"===e.type?new((await n(t.type)).controllerConstructor)({view:e,dataObject:t}):null}async function i(e){await n(e)}async function n(e){if(!(e in a))switch(e){case"DirectLineMeasurement3D":a[e]=Promise.all([import("./DirectLineMeasurement3DView.js"),import("./DirectLineMeasurement3DController.js")]).then((e=>({viewConstructor:e[0].DirectLineMeasurement3DView,controllerConstructor:e[1].DirectLineMeasurement3DController})))}return a[e]}const a={};class c{constructor(r,s){this.owner=s,this.properties={},this.afterDispatchHandle=null;for(const t in r){const s=r[t],o=new e(s,null,null,2,2);this.properties[t]={pool:o,acquired:[]}}this.afterDispatchHandle=t((()=>this.release()))}destroy(){this.afterDispatchHandle&&(this.afterDispatchHandle.remove(),this.afterDispatchHandle=null);for(const e in this.properties){const t=this.properties[e];for(const e of t.acquired)r(e)||t.pool.release(e);t.pool.destroy(),t.pool=null,t.acquired=null}this.properties=null,this.owner=null}get(e){const t=this.owner._get(e),r=this.properties[e];let s=r.pool.acquire();for(r.acquired.push(s);s===t;)r.acquired.push(s),s=r.pool.acquire();return s}release(){for(const e in this.properties){const t=this.properties[e];let s=0;for(const e of t.acquired)r(e)?t.acquired[s++]=e:t.pool.release(e);t.acquired.length=s}}}export{c as P,s as a,o as b,i as p};
