/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.19/esri/copyright.txt for details.
*/
import{_ as r}from"../chunks/tslib.es6.js";import"../chunks/ArrayPool.js";import"../core/lang.js";import"../chunks/deprecate.js";import"../chunks/object.js";import"../kernel.js";import"../config.js";import{L as t}from"../chunks/Logger.js";import"../chunks/string.js";import"../chunks/metadata.js";import{property as e}from"../core/accessorSupport/decorators/property.js";import s from"../core/Accessor.js";import"../chunks/PropertyOrigin.js";import"../core/scheduling.js";import"../core/promiseUtils.js";import"../chunks/Message.js";import"../core/Error.js";import"../chunks/ensureType.js";import{subclass as o,W as i}from"../core/accessorSupport/decorators/subclass.js";import"../chunks/Evented.js";import l from"../core/Collection.js";import{r as m,c as p}from"../chunks/collectionUtils.js";import"../chunks/JSONSupport.js";import"../chunks/Promise.js";import"../chunks/Loadable.js";import{isAbsolute as a,normalize as n,hasSamePortal as y}from"../core/urlUtils.js";import{cast as c}from"../core/accessorSupport/decorators/cast.js";import"../chunks/jsonMap.js";import"../chunks/enumeration.js";import{r as u}from"../chunks/reader.js";import{w as j}from"../chunks/writer.js";import"../chunks/resourceExtension.js";import{f as h,t as g}from"../chunks/persistableUrlUtils.js";import"../geometry/SpatialReference.js";import"../chunks/locale.js";import"../chunks/number.js";import"../intl.js";import"../request.js";import"../chunks/assets.js";import"../geometry/Geometry.js";import"../geometry/Point.js";import"../chunks/Ellipsoid.js";import"../geometry/support/webMercatorUtils.js";import"../geometry/Extent.js";import"../portal/PortalQueryParams.js";import"../portal/PortalQueryResult.js";import"../portal/PortalFolder.js";import"../portal/PortalGroup.js";import"../portal/PortalUser.js";import d from"../portal/Portal.js";import"../chunks/mathUtils2.js";import"../chunks/colorUtils.js";import"../Color.js";import b from"./Symbol.js";import f from"./Symbol3DLayer.js";import"../chunks/screenUtils.js";import"../chunks/opacityUtils.js";import"../chunks/materialUtils.js";import"./edges/Edges3D.js";import"./edges/SketchEdges3D.js";import"./edges/SolidEdges3D.js";import"../chunks/utils.js";import"../chunks/Symbol3DMaterial.js";import k from"./ExtrudeSymbol3DLayer.js";import"./patterns/StylePattern3D.js";import S from"./FillSymbol3DLayer.js";import"../chunks/colors.js";import"../chunks/Symbol3DOutline.js";import"./Font.js";import U from"./IconSymbol3DLayer.js";import L from"./LineSymbol3DLayer.js";import D from"./ObjectSymbol3DLayer.js";import O from"./PathSymbol3DLayer.js";import _ from"./TextSymbol3DLayer.js";import v from"./WaterSymbol3DLayer.js";import{T as w}from"../chunks/Thumbnail.js";var N;let P=N=class extends s{constructor(){super(...arguments),this.portal=null}clone(){return new N({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};r([e({type:String})],P.prototype,"name",void 0),r([e({type:String})],P.prototype,"styleUrl",void 0),r([e({type:String})],P.prototype,"styleName",void 0),r([e({type:d})],P.prototype,"portal",void 0),P=N=r([o("esri.symbols.support.StyleOrigin")],P);var x=P;const E={icon:U,object:D,line:L,path:O,fill:S,extrude:k,text:_,water:v},T=l.ofType({base:f,key:"type",typeMap:E,errorContext:"symbol-layer"}),A=t.getLogger("esri.symbols.Symbol3D");let C=class extends b{constructor(r){super(r),this.styleOrigin=null,this.thumbnail=null,this.type=null;const t=this.__accessor__&&this.__accessor__.metadatas&&this.__accessor__.metadatas.symbolLayers,e=t&&t.type||l;this._set("symbolLayers",new e)}get color(){return null}set color(r){A.error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(r){m(r,this._get("symbolLayers"))}readStyleOrigin(r,t,e){if(r.styleUrl&&r.name){const t=h(r.styleUrl,e);return new x({styleUrl:t,name:r.name})}if(r.styleName&&r.name)return new x({portal:e&&e.portal||d.getDefault(),styleName:r.styleName,name:r.name});e&&e.messages&&e.messages.push(new i("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:e,definition:r}))}writeStyleOrigin(r,t,e,s){if(r.styleUrl&&r.name){let e=g(r.styleUrl,s);a(e)&&(e=n(e)),t.styleOrigin={styleUrl:e,name:r.name}}else r.styleName&&r.name&&(r.portal&&s&&s.portal&&!y(r.portal.restUrl,s.portal.restUrl)?s&&s.messages&&s.messages.push(new i("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):t.styleOrigin={styleName:r.styleName,name:r.name})}normalizeCtorArgs(r){return r instanceof f||r&&E[r.type]?{symbolLayers:[r]}:Array.isArray(r)?{symbolLayers:r}:r}};r([e({json:{read:!1,write:!1}})],C.prototype,"color",null),r([e({type:T,nonNullable:!0,json:{write:!0}}),c(p)],C.prototype,"symbolLayers",null),r([e({type:x})],C.prototype,"styleOrigin",void 0),r([u("styleOrigin")],C.prototype,"readStyleOrigin",null),r([j("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],C.prototype,"writeStyleOrigin",null),r([e({type:w,json:{read:!1}})],C.prototype,"thumbnail",void 0),r([e({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],C.prototype,"type",void 0),C=r([o("esri.symbols.Symbol3D")],C);var M=C;export default M;export{x as S};
