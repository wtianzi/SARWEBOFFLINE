//>>built
define("exports ../errors/RequestError ../errors/CancelError ../Deferred ../io-query ../_base/array ../_base/lang ../promise/Promise ../has".split(" "),function(f,v,n,w,p,x,l,y,q){function r(a){return q("native-arraybuffer")&&a instanceof ArrayBuffer}function t(a){return q("native-blob")&&a instanceof Blob}function z(a){return u(a)}function A(a){return void 0!==a.data?a.data:a.text}f.deepCopy=function(a,e){for(var c in e){var d=a[c],b=e[c];if("__proto__"!==c&&d!==b){var g=b;!g||"object"!==typeof g||
g instanceof FormData||("undefined"!==typeof Element?g instanceof Element:1===g.nodeType)||t(g)||r(g)?a[c]=b:"[object Date]"===Object.prototype.toString.call(b)?a[c]=new Date(b):l.isArray(b)?a[c]=f.deepCopyArray(b):d&&"object"===typeof d?f.deepCopy(d,b):a[c]=f.deepCopy({},b)}}return a};f.deepCopyArray=function(a){for(var e=[],c=0,d=a.length;c<d;c++){var b=a[c];"object"===typeof b?e.push(f.deepCopy({},b)):e.push(b)}return e};f.deepCreate=function(a,e){e=e||{};var c=l.delegate(a),d,b;for(d in a)(b=
a[d])&&"object"===typeof b&&(c[d]=f.deepCreate(b,e[d]));return f.deepCopy(c,e)};var u=Object.freeze||function(a){return a};f.deferred=function(a,e,c,d,b,g){var h=new w(function(k){e&&e(h,a);return k&&(k instanceof v||k instanceof n)?k:new n("Request canceled",a)});h.response=a;h.isValid=c;h.isReady=d;h.handleResponse=b;c=h.then(z).otherwise(function(k){k.response=a;throw k;});f.notify&&c.then(l.hitch(f.notify,"emit","load"),l.hitch(f.notify,"emit","error"));d=c.then(A);b=new y;for(var m in d)d.hasOwnProperty(m)&&
(b[m]=d[m]);b.response=c;u(b);g&&h.then(function(k){g.call(h,k)},function(k){g.call(h,a,k)});h.promise=b;h.then=b.then;return h};f.addCommonMethods=function(a,e){x.forEach(e||["GET","POST","PUT","DELETE"],function(c){a[("DELETE"===c?"DEL":c).toLowerCase()]=function(d,b){b=l.delegate(b||{});b.method=c;return a(d,b)}})};f.parseArgs=function(a,e,c){var d=e.data,b=e.query;!d||c||"object"!==typeof d||r(d)||t(d)||(e.data=p.objectToQuery(d));b?("object"===typeof b&&(b=p.objectToQuery(b)),e.preventCache&&
(b+=(b?"\x26":"")+"request.preventCache\x3d"+ +new Date)):e.preventCache&&(b="request.preventCache\x3d"+ +new Date);a&&b&&(a+=(~a.indexOf("?")?"\x26":"?")+b);return{url:a,options:e,getHeader:function(g){return null}}};f.checkStatus=function(a){a=a||0;return 200<=a&&300>a||304===a||1223===a||!a}});