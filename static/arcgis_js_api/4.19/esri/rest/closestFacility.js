// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.19/esri/copyright.txt for details.
//>>built
define("exports ../request ../geometry/support/normalizeUtils ./utils ../core/queryUtils ./networkUtils ../tasks/support/ClosestFacilitySolveResult".split(" "),function(n,q,r,t,u,c,v){const w=u.createQueryParamsHelper({accumulateAttributes:{name:"accumulateAttributeNames"},attributeParameterValues:!0,directionsTimeAttribute:{name:"directionsTimeAttributeName"},impedanceAttribute:{name:"impedanceAttributeName"},facilities:!0,incidents:!0,outSpatialReference:{name:"outSR",getter:k=>k.outSpatialReference.wkid},
pointBarriers:{name:"barriers"},polylineBarriers:!0,polygonBarriers:!0,restrictionAttributes:{name:"restrictionAttributeNames"},returnPointBarriers:{name:"returnBarriers"},returnRoutes:{name:"returnCFRoutes"},travelMode:!0});n.solve=async function(k,a,p){const l=[],e=[],d={},g={},m=t.parseUrl(k);a.incidents&&a.incidents.features&&c.collectGeometries(a.incidents.features,e,"incidents.features",d);a.facilities&&a.facilities.features&&c.collectGeometries(a.facilities.features,e,"facilities.features",
d);a.pointBarriers&&a.pointBarriers.features&&c.collectGeometries(a.pointBarriers.features,e,"pointBarriers.features",d);a.polylineBarriers&&a.polylineBarriers.features&&c.collectGeometries(a.polylineBarriers.features,e,"polylineBarriers.features",d);a.polygonBarriers&&a.polygonBarriers.features&&c.collectGeometries(a.polygonBarriers.features,e,"polygonBarriers.features",d);return r.normalizeCentralMeridian(e).then(b=>{for(const f in d){const h=d[f];l.push(f);g[f]=b.slice(h[0],h[1])}return c.isInputGeometryZAware(g,
l)?c.fetchServiceDescription(m.path):Promise.resolve({dontCheck:!0})}).then(b=>{("dontCheck"in b?b.dontCheck:b.hasZ)||c.dropZValuesOffInputGeometry(g,l);for(const f in g)g[f].forEach((h,x)=>{a.get(f)[x].geometry=h});b={query:{...m.query,f:"json",...w.toQueryParams(a)}};p&&(b={...p,...b});return q(`${m.path}/solveClosestFacility`,b)}).then(b=>v.fromJSON(b.data))};Object.defineProperty(n,"__esModule",{value:!0})});