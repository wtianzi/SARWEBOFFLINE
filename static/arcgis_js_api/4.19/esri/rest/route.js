// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.19/esri/copyright.txt for details.
//>>built
define("exports ../request ../geometry/support/normalizeUtils ./utils ../core/queryUtils ./networkUtils".split(" "),function(n,p,q,r,t,d){const u=t.createQueryParamsHelper({accumulateAttributes:{name:"accumulateAttributeNames"},attributeParameterValues:!0,directionsTimeAttribute:{name:"directionsTimeAttributeName"},impedanceAttribute:{name:"impedanceAttributeName"},outSpatialReference:{name:"outSR",getter:k=>k.outSpatialReference.wkid},pointBarriers:{name:"barriers"},polylineBarriers:!0,polygonBarriers:!0,
restrictionAttributes:{name:"restrictionAttributeNames"},stops:!0,travelMode:!0});n.solve=async function(k,a,v){const l=[],f=[],e={},g={},m=r.parseUrl(k);a.stops&&a.stops.features&&d.collectGeometries(a.stops.features,f,"stops.features",e);a.pointBarriers&&a.pointBarriers.features&&d.collectGeometries(a.pointBarriers.features,f,"pointBarriers.features",e);a.polylineBarriers&&a.polylineBarriers.features&&d.collectGeometries(a.polylineBarriers.features,f,"polylineBarriers.features",e);a.polygonBarriers&&
a.polygonBarriers.features&&d.collectGeometries(a.polygonBarriers.features,f,"polygonBarriers.features",e);return q.normalizeCentralMeridian(f).then(b=>{for(const c in e){const h=e[c];l.push(c);g[c]=b.slice(h[0],h[1])}return d.isInputGeometryZAware(g,l)?d.fetchServiceDescription(m.path):Promise.resolve({dontCheck:!0})}).then(b=>{("dontCheck"in b?b.dontCheck:b.hasZ)||d.dropZValuesOffInputGeometry(g,l);for(const h in g)g[h].forEach((w,x)=>{a.get(h)[x].geometry=w});b={...v,query:{...m.query,...u.toQueryParams(a),
f:"json"}};var {path:c}=m;c=c.endsWith("/solve")?c:c+"/solve";return p(c,b)}).then(b=>d.handleSolveResponse(b))};Object.defineProperty(n,"__esModule",{value:!0})});