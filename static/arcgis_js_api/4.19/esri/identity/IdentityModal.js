// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.19/esri/copyright.txt for details.
//>>built
/*
 tabbable 5.1.6
 @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
 focus-trap 6.3.0
 @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/ensureType ../core/handleUtils ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../widgets/support/decorators/messageBundle ../chunks/index ../widgets/support/widget ../widgets/Widget".split(" "),function(T,w,G,ma,na,U,A,oa,V,pa,qa,ra,W,q,X,m){function I(a,e){var d=
Object.keys(a);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(a);e&&(c=c.filter(function(f){return Object.getOwnPropertyDescriptor(a,f).enumerable}));d.push.apply(d,c)}return d}function Y(a){for(var e=1;e<arguments.length;e++){var d=null!=arguments[e]?arguments[e]:{};e%2?I(Object(d),!0).forEach(function(c){var f=d[c];c in a?Object.defineProperty(a,c,{value:f,enumerable:!0,configurable:!0,writable:!0}):a[c]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(d)):
I(Object(d)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(d,c))})}return a}G='input select textarea a[href] button [tabindex] audio[controls] video[controls] [contenteditable]:not([contenteditable\x3d"false"]) details\x3esummary:first-of-type details'.split(" ");var J=G.join(","),C="undefined"===typeof Element?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Z=function(a,e,d){var c=Array.prototype.slice.apply(a.querySelectorAll(J));
e&&C.call(a,J)&&c.unshift(a);return c=c.filter(d)},K=function(a){var e=parseInt(a.getAttribute("tabindex"),10);return isNaN(e)?"true"===a.contentEditable||("AUDIO"===a.nodeName||"VIDEO"===a.nodeName||"DETAILS"===a.nodeName)&&null===a.getAttribute("tabindex")?0:a.tabIndex:e},aa=function(a,e){return a.tabIndex===e.tabIndex?a.documentOrder-e.documentOrder:a.tabIndex-e.tabIndex},ba=function(a){return"DETAILS"===a.tagName&&Array.prototype.slice.apply(a.children).some(function(e){return"SUMMARY"===e.tagName})},
ca=function(a,e){for(var d=0;d<a.length;d++)if(a[d].checked&&a[d].form===e)return a[d]},da=function(a){if(!a.name)return!0;var e=a.form||a.ownerDocument,d=function(f){return e.querySelectorAll('input[type\x3d"radio"][name\x3d"'+f+'"]')};if("undefined"!==typeof window&&"undefined"!==typeof window.CSS&&"function"===typeof window.CSS.escape)var c=d(window.CSS.escape(a.name));else try{c=d(a.name)}catch(f){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",
f.message),!1}d=ca(c,a.form);return!d||d===a},ea=function(a){if("hidden"===getComputedStyle(a).visibility)return!0;var e=C.call(a,"details\x3esummary:first-of-type")?a.parentElement:a;if(C.call(e,"details:not([open]) *"))return!0;for(;a;){if("none"===getComputedStyle(a).display)return!0;a=a.parentElement}return!1},L=function(a){var e;(e=a.disabled)||(e="INPUT"===a.tagName&&"hidden"===a.type);return e||ea(a)||ba(a)?!1:!0},fa=function(a){var e;(e=!L(a))||(e="INPUT"===a.tagName&&"radio"===a.type&&!da(a));
return e||0>K(a)?!1:!0},ha=function(a,e){e=e||{};var d=[],c=[];Z(a,e.includeContainer,fa).forEach(function(f,g){var r=K(f);0===r?d.push(f):c.push({documentOrder:g,tabIndex:r,node:f})});return c.sort(aa).map(function(f){return f.node}).concat(d)},ia=G.concat("iframe").join(","),ja=function(a){if(!a)throw Error("No node provided");return!1===C.call(a,ia)?!1:L(a)},M,N=function(){var a=[];return{activateTrap:function(e){if(0<a.length){var d=a[a.length-1];d!==e&&d.pause()}d=a.indexOf(e);-1!==d&&a.splice(d,
1);a.push(e)},deactivateTrap:function(e){e=a.indexOf(e);-1!==e&&a.splice(e,1);0<a.length&&a[a.length-1].unpause()}}}(),H=function(a,e){var d=-1;a.every(function(c,f){return e(c)?(d=f,!1):!0});return d},D=function(a){for(var e=arguments.length,d=Array(1<e?e-1:0),c=1;c<e;c++)d[c-1]=arguments[c];return"function"===typeof a?a.apply(void 0,d):a},la=function(a,e){var d=document,c=Y({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0},e),f=[],g=[],r=null,x=null,l=!1,t=!1,y=function(k){return f.some(function(b){return b.contains(k)})},
n=function(k){var b=c[k];if(!b)return null;var h=b;if("string"===typeof b&&(h=d.querySelector(b),!h))throw Error("`".concat(k,"` refers to no known node"));if("function"===typeof b&&(h=b(),!h))throw Error("`".concat(k,"` did not return a node"));return h},z=function(){var k=null!==n("initialFocus")?n("initialFocus"):y(d.activeElement)?d.activeElement:(k=g[0])&&k.firstTabbableNode||n("fallbackFocus");if(!k)throw Error("Your focus-trap needs to have at least one focusable element");return k},E=function(){g=
f.map(function(k){var b=ha(k);if(0<b.length)return{container:k,firstTabbableNode:b[0],lastTabbableNode:b[b.length-1]}}).filter(function(k){return!!k});if(0>=g.length&&!n("fallbackFocus"))throw Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");},B=function h(b){b!==d.activeElement&&(b&&b.focus?(b.focus({preventScroll:!!c.preventScroll}),x=b,b.tagName&&"input"===b.tagName.toLowerCase()&&"function"===typeof b.select&&b.select()):h(z()))},F=function(b){y(b.target)||
(D(c.clickOutsideDeactivates,b)?u.deactivate({returnFocus:c.returnFocusOnDeactivate&&!ja(b.target)}):D(c.allowOutsideClick,b)||b.preventDefault())},O=function(b){var h=y(b.target);h||b.target instanceof Document?h&&(x=b.target):(b.stopImmediatePropagation(),B(x||z()))},ka=function(b){E();var h=null;if(0<g.length)if(0>H(g,function(v){return v.container.contains(b.target)}))h=b.shiftKey?g[g.length-1].lastTabbableNode:g[0].firstTabbableNode;else if(b.shiftKey){var p=H(g,function(v){return b.target===
v.firstTabbableNode});0<=p&&(h=g[0===p?g.length-1:p-1].lastTabbableNode)}else p=H(g,function(v){return b.target===v.lastTabbableNode}),0<=p&&(h=g[p===g.length-1?0:p+1].firstTabbableNode);else h=n("fallbackFocus");h&&(b.preventDefault(),B(h))},P=function(b){!1===c.escapeDeactivates||"Escape"!==b.key&&"Esc"!==b.key&&27!==b.keyCode?"Tab"!==b.key&&9!==b.keyCode||ka(b):(b.preventDefault(),u.deactivate())},Q=function(b){D(c.clickOutsideDeactivates,b)||y(b.target)||D(c.allowOutsideClick,b)||(b.preventDefault(),
b.stopImmediatePropagation())},R=function(){if(l)return N.activateTrap(u),M=c.delayInitialFocus?setTimeout(function(){B(z())},0):B(z()),d.addEventListener("focusin",O,!0),d.addEventListener("mousedown",F,{capture:!0,passive:!1}),d.addEventListener("touchstart",F,{capture:!0,passive:!1}),d.addEventListener("click",Q,{capture:!0,passive:!1}),d.addEventListener("keydown",P,{capture:!0,passive:!1}),u},S=function(){if(l)return d.removeEventListener("focusin",O,!0),d.removeEventListener("mousedown",F,!0),
d.removeEventListener("touchstart",F,!0),d.removeEventListener("click",Q,!0),d.removeEventListener("keydown",P,!0),u};var u={activate:function(b){if(l)return this;E();l=!0;t=!1;r=d.activeElement;(b=b&&b.onActivate?b.onActivate:c.onActivate)&&b();R();return this},deactivate:function(b){if(!l)return this;clearTimeout(M);S();t=l=!1;N.deactivateTrap(u);var h=b&&void 0!==b.onDeactivate?b.onDeactivate:c.onDeactivate;h&&h();(b&&void 0!==b.returnFocus?b.returnFocus:c.returnFocusOnDeactivate)&&setTimeout(function(){var p=
r,v=n("setReturnFocus");B(v?v:p)},0);return this},pause:function(){if(t||!l)return this;t=!0;S();return this},unpause:function(){if(!t||!l)return this;t=!1;E();R();return this},updateContainerElements:function(b){f=[].concat(b).filter(Boolean).map(function(h){return"string"===typeof h?d.querySelector(h):h});l&&E();return this}};u.updateContainerElements(a);return u};m=function(a){function e(c,f){var g=a.call(this,c,f)||this;g.container=document.createElement("div");g.content=null;g.open=!1;g._close=
()=>{g.open=!1};document.body.appendChild(g.container);g.own(g.watch("open",()=>g._toggleFocusTrap()));return g}T._inheritsLoose(e,a);var d=e.prototype;d.destroy=function(){this._destroyFocusTrap()};d.render=function(){var c=this.id;const {open:f,content:g,title:r,messages:x}=this;var l=f&&!!g;const t={["esri-identity-modal--open"]:l,["esri-identity-modal--closed"]:!l},y=q.jsx("button",{class:"esri-identity-modal__close-button","aria-label":x.close,title:x.close,bind:this,onclick:this._close},q.jsx("span",
{"aria-hidden":"true",class:"esri-icon-close"})),n=`${c}_title`;c=`${c}_content`;const z=r?q.jsx("h1",{id:n,class:"esri-identity-modal__title"},r):null;l=l?q.jsx("div",{bind:this,class:"esri-identity-modal__dialog",role:"dialog","aria-labelledby":n,"aria-describedby":c,afterCreate:this._createFocusTrap},y,z,this._renderContent(c)):null;return q.jsx("div",{tabIndex:-1,class:this.classes("esri-identity-modal",t)},l)};d._destroyFocusTrap=function(){var c;null==(c=this._focusTrap)?void 0:c.deactivate({onDeactivate:null});
this._focusTrap=null};d._toggleFocusTrap=function(){const {_focusTrap:c,open:f}=this;c&&(f?c.activate():c.deactivate())};d._createFocusTrap=function(c){this._destroyFocusTrap();const f=requestAnimationFrame(()=>{this._focusTrap=la(c,{initialFocus:"input",onDeactivate:this._close});this._toggleFocusTrap()});this.own(U.makeHandle(()=>cancelAnimationFrame(f)))};d._renderContent=function(c){const f=this.content;return"string"===typeof f?q.jsx("div",{class:"esri-identity-modal__content",id:c,innerHTML:f}):
X.isWidget(f)?q.jsx("div",{class:"esri-identity-modal__content",id:c},f.render()):f instanceof HTMLElement?q.jsx("div",{class:"esri-identity-modal__content",id:c,bind:f,afterCreate:this._attachToNode}):null};d._attachToNode=function(c){c.appendChild(this)};return e}(m);w.__decorate([A.property({readOnly:!0})],m.prototype,"container",void 0);w.__decorate([A.property()],m.prototype,"content",void 0);w.__decorate([A.property()],m.prototype,"open",void 0);w.__decorate([A.property(),W.messageBundle("esri/t9n/common")],
m.prototype,"messages",void 0);w.__decorate([A.property({aliasOf:"messages.auth.signIn"})],m.prototype,"title",void 0);return m=w.__decorate([V.subclass("esri.identity.IdentityModal")],m)});