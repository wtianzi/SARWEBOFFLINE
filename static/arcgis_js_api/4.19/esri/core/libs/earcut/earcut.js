// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.19/esri/copyright.txt for details.
//>>built
define(["exports"],function(A){function E(a,c,b,d,e){let f;if(e===0<B(a,c,b,d))for(;c<b;c+=d)f=F(c,a[c],a[c+1],f);else for(b-=d;b>=c;b-=d)f=F(b,a[b],a[b+1],f);f&&t(f,f.next)&&(w(f),f=f.next);return f}function x(a,c=a){if(!a)return a;let b;do if(b=!1,a.steiner||!t(a,a.next)&&0!==n(a.prev,a,a.next))a=a.next;else{w(a);a=c=a.prev;if(a===a.next)break;b=!0}while(b||a!==c);return c}function y(a,c,b,d,e,f,g=0){if(a){!g&&f&&(a=G(a,d,e,f));for(var l=a;a.prev!==a.next;){var k=a.prev,m=a.next;if(f)var h=K(a,
d,e,f);else a:{h=a;var p=h.prev,q=h;const u=h.next;if(0<=n(p,q,u)){h=!1;break a}let r=h.next.next;const L=r;let H=0;for(;r!==h.prev&&(0===H||r!==L);){H++;if(v(p.x,p.y,q.x,q.y,u.x,u.y,r.x,r.y)&&0<=n(r.prev,r,r.next)){h=!1;break a}r=r.next}h=!0}if(h)c.push(k.index/b),c.push(a.index/b),c.push(m.index/b),w(a),l=a=m.next;else if(a=m,a===l){if(!g)y(x(a),c,b,d,e,f,1);else if(1===g){g=c;l=b;k=a;do m=k.prev,h=k.next.next,!t(m,h)&&I(m,k,k.next,h)&&z(m,h)&&z(h,m)&&(g.push(m.index/l),g.push(k.index/l),g.push(h.index/
l),w(k),w(k.next),k=a=h),k=k.next;while(k!==a);a=k;y(a,c,b,d,e,f,2)}else if(2===g)a:{g=a;do{for(l=g.next.next;l!==g.prev;){if(k=g.index!==l.index){h=h=h=void 0;k=g;m=l;if(h=k.next.index!==m.index&&k.prev.index!==m.index){b:{h=k;do{if(h.index!==k.index&&h.next.index!==k.index&&h.index!==m.index&&h.next.index!==m.index&&I(h,h.next,k,m)){h=!0;break b}h=h.next}while(h!==k);h=!1}h=!h}if(h=h&&z(k,m)&&z(m,k)){h=k;p=!1;q=(k.x+m.x)/2;m=(k.y+m.y)/2;do h.y>m!==h.next.y>m&&h.next.y!==h.y&&q<(h.next.x-h.x)*(m-
h.y)/(h.next.y-h.y)+h.x&&(p=!p),h=h.next;while(h!==k);h=p}k=h}if(k){a=J(g,l);g=x(g,g.next);a=x(a,a.next);y(g,c,b,d,e,f);y(a,c,b,d,e,f);break a}l=l.next}g=g.next}while(g!==a)}break}}}}function K(a,c,b,d){const e=a.prev,f=a.next;if(0<=n(e,a,f))return!1;const g=e.x>a.x?e.x>f.x?e.x:f.x:a.x>f.x?a.x:f.x,l=e.y>a.y?e.y>f.y?e.y:f.y:a.y>f.y?a.y:f.y,k=C(e.x<a.x?e.x<f.x?e.x:f.x:a.x<f.x?a.x:f.x,e.y<a.y?e.y<f.y?e.y:f.y:a.y<f.y?a.y:f.y,c,b,d);c=C(g,l,c,b,d);b=a.prevZ;for(d=a.nextZ;b&&b.z>=k&&d&&d.z<=c;){if(b!==
a.prev&&b!==a.next&&v(e.x,e.y,a.x,a.y,f.x,f.y,b.x,b.y)&&0<=n(b.prev,b,b.next))return!1;b=b.prevZ;if(d!==a.prev&&d!==a.next&&v(e.x,e.y,a.x,a.y,f.x,f.y,d.x,d.y)&&0<=n(d.prev,d,d.next))return!1;d=d.nextZ}for(;b&&b.z>=k;){if(b!==a.prev&&b!==a.next&&v(e.x,e.y,a.x,a.y,f.x,f.y,b.x,b.y)&&0<=n(b.prev,b,b.next))return!1;b=b.prevZ}for(;d&&d.z<=c;){if(d!==a.prev&&d!==a.next&&v(e.x,e.y,a.x,a.y,f.x,f.y,d.x,d.y)&&0<=n(d.prev,d,d.next))return!1;d=d.nextZ}return!0}function F(a,c,b,d){a=new D(a,c,b);d?(a.next=d.next,
a.prev=d,d.next.prev=a,d.next=a):(a.prev=a,a.next=a);return a}function w(a){a.next.prev=a.prev;a.prev.next=a.next;a.prevZ&&(a.prevZ.nextZ=a.nextZ);a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function M(a){let c=a,b=a;do{if(c.x<b.x||c.x===b.x&&c.y<b.y)b=c;c=c.next}while(c!==a);return b}function N(a,c){let b=c;const d=a.x,e=a.y;let f=-Infinity,g;do{if(e<=b.y&&e>=b.next.y&&b.next.y!==b.y){var l=b.x+(e-b.y)*(b.next.x-b.x)/(b.next.y-b.y);if(l<=d&&l>f){f=l;if(l===d){if(e===b.y)return b;if(e===b.next.y)return b.next}g=
b.x<b.next.x?b:b.next}}b=b.next}while(b!==c);if(!g)return null;if(d===f)return g.prev;c=g;l=g.x;const k=g.y;let m=Infinity,h;for(b=g.next;b!==c;)d>=b.x&&b.x>=l&&d!==b.x&&v(e<k?d:f,e,l,k,e<k?f:d,e,b.x,b.y)&&(h=Math.abs(e-b.y)/(d-b.x),(h<m||h===m&&b.x>g.x)&&z(b,a)&&(g=b,m=h)),b=b.next;return g}function G(a,c,b,d){for(var e;e!==a;e=e.next){e=e||a;null===e.z&&(e.z=C(e.x,e.y,c,b,d));if(e.prev.next!==e||e.next.prev!==e)return e.prev.next=e,e.next.prev=e,G(a,c,b,d);e.prevZ=e.prev;e.nextZ=e.next}a.prevZ.nextZ=
null;a.prevZ=null;a:for(b=1;;){d=a;c=a=null;let f=0;for(;d;){f++;e=d;let g=0;for(;g<b&&e;g++)e=e.nextZ;let l=b;for(;0<g||0<l&&e;){let k;0===g?(k=e,e=e.nextZ,l--):0!==l&&e?d.z<=e.z?(k=d,d=d.nextZ,g--):(k=e,e=e.nextZ,l--):(k=d,d=d.nextZ,g--);c?c.nextZ=k:a=k;k.prevZ=c;c=k}d=e}c.nextZ=null;b*=2;if(2>f)break a}return a}function n(a,c,b){return(c.y-a.y)*(b.x-c.x)-(c.x-a.x)*(b.y-c.y)}function I(a,c,b,d){return t(a,c)&&t(b,d)||t(a,d)&&t(b,c)?!0:0<n(a,c,b)!==0<n(a,c,d)&&0<n(b,d,a)!==0<n(b,d,c)}function B(a,
c,b,d){let e=0;for(let f=c,g=b-d;f<b;f+=d)e+=(a[g]-a[f])*(a[f+1]+a[g+1]),g=f;return e}function v(a,c,b,d,e,f,g,l){return 0<=(e-g)*(c-l)-(a-g)*(f-l)&&0<=(a-g)*(d-l)-(b-g)*(c-l)&&0<=(b-g)*(f-l)-(e-g)*(d-l)}function z(a,c){return 0>n(a.prev,a,a.next)?0<=n(a,c,a.next)&&0<=n(a,a.prev,c):0>n(a,c,a.prev)||0>n(a,a.next,c)}function C(a,c,b,d,e){a=32767*(a-b)*e;c=32767*(c-d)*e;a=(a|a<<8)&16711935;a=(a|a<<4)&252645135;a=(a|a<<2)&858993459;c=(c|c<<8)&16711935;c=(c|c<<4)&252645135;c=(c|c<<2)&858993459;return(a|
a<<1)&1431655765|((c|c<<1)&1431655765)<<1}function t(a,c){return a.x===c.x&&a.y===c.y}function O(a,c){return a.x-c.x}function J(a,c){const b=new D(a.index,a.x,a.y),d=new D(c.index,c.x,c.y),e=a.next,f=c.prev;a.next=c;c.prev=a;b.next=e;e.prev=b;d.next=b;b.prev=d;f.next=d;d.prev=f;return d}let D=function(a,c,b){this.index=a;this.x=c;this.y=b;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1};A.deviation=function(a,c,b,d){var e=c&&c.length;let f=Math.abs(B(a,0,e?c[0]*b:a.length,b));
if(e)for(let g=0,l=c.length;g<l;g++)f-=Math.abs(B(a,c[g]*b,g<l-1?c[g+1]*b:a.length,b));c=0;for(e=0;e<d.length;e+=3){const g=d[e]*b,l=d[e+1]*b,k=d[e+2]*b;c+=Math.abs((a[g]-a[k])*(a[l+1]-a[g+1])-(a[g]-a[l])*(a[k+1]-a[g+1]))}return 0===f&&0===c?0:Math.abs((c-f)/f)};A.earcut=function(a,c,b){var d=c&&c.length;const e=d?c[0]*b:a.length;var f=E(a,0,e,b,!0);const g=[];if(!f||f.next===f.prev)return g;let l,k;var m,h;if(d){d=[];for(let q=0,u=c.length;q<u;q++){var p=E(a,c[q]*b,q<u-1?c[q+1]*b:a.length,b,!1);
p===p.next&&(p.steiner=!0);d.push(M(p))}d.sort(O);for(h of d){c=h;d=f;if(d=N(c,d))c=J(d,c),x(c,c.next);f=x(f,f.next)}}if(a.length>80*b){l=m=a[0];k=h=a[1];for(c=b;c<e;c+=b)d=a[c],p=a[c+1],l=Math.min(l,d),k=Math.min(k,p),m=Math.max(m,d),h=Math.max(h,p);m=Math.max(m-l,h-k);m=0!==m?1/m:0}y(f,g,b,l,k,m);return g};Object.defineProperty(A,"__esModule",{value:!0})});