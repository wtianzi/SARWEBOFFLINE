// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.19/esri/copyright.txt for details.
//>>built
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../config ../core/maybe ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../symbols/Symbol ../symbols/SimpleLineSymbol ../request ../symbols/PictureMarkerSymbol ../symbols/SimpleFillSymbol ../symbols/SimpleMarkerSymbol ../symbols ./Layer ../core/MultiOriginJSONSupport ./support/commonProperties ./mixins/OperationalLayer ./mixins/BlendLayer ./mixins/PortalLayer ./mixins/RefreshableLayer ./mixins/ScaleRangeLayer".split(" "),
function(p,c,q,r,t,I,J,d,K,u,v,w,L,M,g,x,y,m,z,A,N,b,B,n,C,D,E,F,G){const H=["atom","xml"];q={base:g,key:"type",typeMap:{"simple-line":x},errorContext:"symbol"};m={base:g,key:"type",typeMap:{"picture-marker":m,"simple-marker":A},errorContext:"symbol"};g={base:g,key:"type",typeMap:{"simple-fill":z},errorContext:"symbol"};b=function(h){function k(...a){a=h.call(this,...a)||this;a.description=null;a.legendEnabled=!0;a.lineSymbol=null;a.pointSymbol=null;a.polygonSymbol=null;a.operationalLayerType="GeoRSS";
a.outSpatialReference=null;a.url=null;a.type="geo-rss";return a}p._inheritsLoose(k,h);var l=k.prototype;l.normalizeCtorArgs=function(a,e){return"string"===typeof a?{url:a,...e}:a};l.readFeatureCollections=function(a,e){e.featureCollection.layers.forEach(f=>{(f=f.layerDefinition.drawingInfo.renderer.symbol)&&"esriSFS"===f.type&&f.outline&&-1!==f.outline.style.indexOf("esriSFS")&&(f.outline.style="esriSLSSolid")});return e.featureCollection.layers};l.load=function(a){const e=t.isSome(a)?a.signal:null;
this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service","Feature Service","Feature Collection","Scene Service"]},a).then(()=>this._fetchService(e),()=>this._fetchService(e)));return Promise.resolve(this)};l._fetchService=async function(a){({data:a}=await y(r.geoRSSServiceUrl,{query:{url:this.url,refresh:this.loaded?!0:void 0,outSR:this.outSpatialReference?JSON.stringify(this.outSpatialReference.toJSON()):void 0},signal:a}));this.read(a,{origin:"service"})};p._createClass(k,[{key:"title",
get:function(){const a=this._get("title");return a&&"defaults"!==this.originOf("title")?a:this.url?w.getFilename(this.url,H)||"GeoRSS":a||""},set:function(a){this._set("title",a)}}]);return k}(D.BlendLayer(F.RefreshableLayer(C.OperationalLayer(E.PortalLayer(G.ScaleRangeLayer(B.MultiOriginJSONMixin(b)))))));c.__decorate([d.property()],b.prototype,"description",void 0);c.__decorate([d.property({json:{origins:{service:{read:{source:"name",reader(h){return h||void 0}}}}}})],b.prototype,"title",null);
c.__decorate([d.property()],b.prototype,"featureCollections",void 0);c.__decorate([u.reader("service","featureCollections",["featureCollection.layers"])],b.prototype,"readFeatureCollections",null);c.__decorate([d.property(n.id)],b.prototype,"id",void 0);c.__decorate([d.property(n.legendEnabled)],b.prototype,"legendEnabled",void 0);c.__decorate([d.property({types:q,json:{write:!0}})],b.prototype,"lineSymbol",void 0);c.__decorate([d.property({type:["show","hide"]})],b.prototype,"listMode",void 0);c.__decorate([d.property({types:m,
json:{write:!0}})],b.prototype,"pointSymbol",void 0);c.__decorate([d.property({types:g,json:{write:!0}})],b.prototype,"polygonSymbol",void 0);c.__decorate([d.property({type:["GeoRSS"]})],b.prototype,"operationalLayerType",void 0);c.__decorate([d.property()],b.prototype,"outSpatialReference",void 0);c.__decorate([d.property(n.url)],b.prototype,"url",void 0);c.__decorate([d.property({readOnly:!0,json:{read:!1},value:"geo-rss"})],b.prototype,"type",void 0);return b=c.__decorate([v.subclass("esri.layers.GeoRSSLayer")],
b)});