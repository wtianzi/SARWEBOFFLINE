// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.19/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/mixins/ArcGISImageService":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/lang ../../core/maybe ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/aliasOf ../../core/jsonMap ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/Error ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/promiseUtils ../../geometry/SpatialReference ../../geometry/Point ../../geometry/Extent ../../geometry/Polygon ../../geometry ../../request ../../Graphic ../support/PixelBlock ../../rasterRenderers ../support/commonProperties ../support/Field ../support/FieldsIndex ../../tasks/support/FeatureSet ../../tasks/support/Query ../../tasks/QueryTask ../support/DimensionalDefinition ../support/RasterFunction ../support/imageryRendererUtils ../support/MosaicRule ../support/ExportImageServiceParameters ../support/RasterInfo ../support/RasterJobHandler ../support/rasterFormats/RasterCodec ../../renderers/support/rasterRendererHelper ../../renderers/support/RasterSymbolizer ../../rest/imageService ../../tasks/ImageIdentifyTask ../../tasks/support/ImageHistogramParameters ../../tasks/support/ImageIdentifyParameters".split(" "),
function(U,H,A,aa,y,J,I,S,F,L,v,z,g,n,k,w,q,p,x,r,m,f,C,E,t,b,d,u,e,a,h,c,l,D,N,Q,M,T,P,K,G,O,X,V,Z,Y,fa,ia){function ha(da){if(!da)return null;da=JSON.stringify(da).match(/"rasterFunction":"(.*?")/gi);return(da=null==da?void 0:da.map(pa=>pa.replace('"rasterFunction":"',"").replace('"',"")))?da.join("/"):null}const ca=I.getLogger("esri.layers.mixins.ArcGISImageService"),ka=v.strict()({RSP_NearestNeighbor:"nearest",RSP_BilinearInterpolation:"bilinear",RSP_CubicConvolution:"cubic",RSP_Majority:"majority"}),
ma=v.strict()({esriNoDataMatchAny:"any",esriNoDataMatchAll:"all"}),ua=v.strict()({U1:"u1",U2:"u2",U4:"u4",U8:"u8",S8:"s8",U16:"u16",S16:"s16",U32:"u32",S32:"s32",F32:"f32",F64:"f64",C64:"c64",C128:"c128",UNKNOWN:"unknown"}),ta=new Set("png png8 png24 png32 jpg bmp gif jpgpng lerc tiff".split(" ")),sa=F.ensureRange(S.ensureNumber,{min:0,max:255});U.ArcGISImageService=da=>{da=function(pa){function qa(){var B=pa.apply(this,arguments)||this;B._functionRasterInfos={};B._rasterJobHandler={instance:null,
refCount:0,connectionPromise:null};B._symbolizer=null;B._defaultServiceMosaicRule=null;B.rasterAttributeTableFieldPrefix="Raster.";B.adjustAspectRatio=null;B.bandCount=null;B.bandIds=void 0;B.capabilities=null;B.compressionQuality=void 0;B.compressionTolerance=.01;B.copyright=null;B.definitionExpression=null;B.exportImageServiceParameters=null;B.rasterInfo=null;B.fields=null;B.fullExtent=null;B.hasMultidimensions=!1;B.imageMaxHeight=4100;B.imageMaxWidth=4100;B.interpolation=void 0;B.minScale=0;B.maxScale=
0;B.multidimensionalInfo=null;B.noData=null;B.noDataInterpretation=void 0;B.objectIdField=null;B.pixelSizeX=null;B.pixelSizeY=null;B.pixelFilter=null;B.raster=void 0;B.viewId=void 0;B.renderer=null;B.rasterAttributeTable=null;B.rasterFunctionInfos=null;B.serviceDataType=null;B.spatialReference=null;B.pixelType=null;B.serviceRasterInfo=null;B.sourceJSON=null;B.url=null;B.version=null;return B}H._inheritsLoose(qa,pa);var ja=qa.prototype;ja.initialize=function(){this._set("exportImageServiceParameters",
new P.ExportImageServiceParameters({layer:this}))};ja.readDefaultServiceMosaicRule=function(B,R){return T.fromJSON(R)};ja.readBandIds=function(B,R){if(Array.isArray(B)&&0<B.length&&B.every(W=>"number"===typeof W))return B};ja.readCapabilities=function(B,R){return this._readCapabilities(R)};ja.writeCompressionQuality=function(B,R,W){null!=B&&"lerc"!==this.format&&(R[W]=B)};ja.writeCompressionTolerance=function(B,R,W){"lerc"===this.format&&null!=B&&(R[W]=B)};ja.readFormat=function(B,R){return"esriImageServiceDataTypeVector-UV"===
R.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===R.serviceDataType?"lerc":null!=this.pixelFilter?"lerc":"jpgpng"};ja.readMinScale=function(B,R){return null!=R.minLOD&&null!=R.maxLOD?B:0};ja.readMaxScale=function(B,R){return null!=R.minLOD&&null!=R.maxLOD?B:0};ja.readMosaicRule=function(B,R){return T.fromJSON(B||R.mosaicRule||R)};ja.writeMosaicRule=function(B,R,W){B=this.mosaicRule;const ba=this.definitionExpression;B?ba&&ba!==B.where&&(B=B.clone(),B.where=ba):ba&&(B=new T({where:ba}));
this._isValidCustomizedMosaicRule(B)&&(R[W]=B.toJSON())};ja.writeNoData=function(B,R,W){null!=B&&"number"===typeof B&&(R[W]=sa(B))};ja.readObjectIdField=function(B,R){B||(B=(B=R.fields.filter(W=>"esriFieldTypeOID"===W.type||"oid"===W.type))&&B[0]&&B[0].name);return B};ja.readRenderer=function(B,R,W){var ba,ea;B=null==R?void 0:null==(ba=R.layerDefinition)?void 0:null==(ea=ba.drawingInfo)?void 0:ea.renderer;W=u.read(B,W);if(null==W)return null;"vector-field"===W.type&&R.symbolTileSize&&!B.symbolTileSize&&
(W.symbolTileSize=R.symbolTileSize);M.isSupportedRendererType(W)||ca.warn("ArcGISImageService","Imagery layer doesn't support given renderer type.");return W};ja.writeRenderer=function(B,R,W){R.layerDefinition=R.layerDefinition||{};R.layerDefinition.drawingInfo=R.layerDefinition.drawingInfo||{};R.layerDefinition.drawingInfo.renderer=B.toJSON();"vector-field"===B.type&&(R.symbolTileSize=B.symbolTileSize)};ja.readRenderingRule=function(B,R){B=R.rasterFunctionInfos;return R.renderingRule||B&&B.length&&
"None"!==B[0].name?Q.fromJSON(R.renderingRule||{rasterFunctionInfos:R.rasterFunctionInfos}):null};ja.writeRenderingRule=function(B,R,W){this._isRFTJson(B)||(R[W]=B.toJSON())};ja.readSpatialReference=function(B,R){return(B=B||R.extent.spatialReference)?r.fromJSON(B):null};ja.readPixelType=function(B){return ua.fromJSON(B)||B};ja.writePixelType=function(B,R,W){if(J.isNone(this.serviceRasterInfo)||this.pixelType!==this.serviceRasterInfo.pixelType)R[W]=ua.toJSON(B)};ja.readVersion=function(B,R){(B=R.currentVersion)||
(B=R.hasOwnProperty("fields")||R.hasOwnProperty("timeInfo")?10:9.3);return B};ja.applyFilter=function(B){let R=B;this.pixelFilter&&(R=this._clonePixelData(B),this.pixelFilter(R));return R};ja.applyRenderer=async function(B,R){var W=B;if(!this._isPicture()&&this.renderer&&this._symbolizer&&!this.pixelFilter){W=JSON.stringify(this._cachedRendererJson)!==JSON.stringify(this.renderer.toJSON());const ba=this._rasterJobHandler.instance,{bandIds:ea}=this;ba?(W&&(this._symbolizer.bind(),await ba.updateSymbolizer(this._symbolizer,
R),this._cachedRendererJson=this.renderer.toJSON()),R=await ba.symbolize({bandIds:ea,...B},R),W={extent:B.extent,pixelBlock:R}):W={extent:B.extent,pixelBlock:this._symbolizer.symbolize({bandIds:ea,...B})}}return W};ja.destroy=function(){this._shutdownJobHandler()};ja.increaseRasterJobHandlerUsage=function(){this._rasterJobHandler.refCount++};ja.decreaseRasterJobHandlerUsage=function(){this._rasterJobHandler.refCount--;0>=this._rasterJobHandler.refCount&&this._shutdownJobHandler()};ja.computeHistograms=
async function(B,R){R=null==R?void 0:R.signal;await this._fetchCapabilities(R);if(!this.capabilities.operations.supportsComputeHistograms)throw new k("imagery-layer:compute-histograms","this operation is not supported on the input image service");B=S.ensureClass(fa,B).clone();const {raster:W,mosaicRule:ba,renderingRule:ea}=this;ea&&null==B.renderingRule&&(B.renderingRule=ea);ba&&null==B.mosaicRule&&(B.mosaicRule=ba);W&&null==B.raster&&(B.raster=W);return Z.computeHistograms(this.url,B,{signal:R})};
ja.computeStatisticsHistograms=async function(B,R){R=null==R?void 0:R.signal;await this._fetchCapabilities(R);if(!this.capabilities.operations.supportsComputeStatisticsHistograms)throw new k("imagery-layer:compute-statistics-histograms","this operation is not supported on the input image service");B=S.ensureClass(fa,B).clone();const {raster:W,mosaicRule:ba,renderingRule:ea}=this;ea&&null==B.renderingRule&&(B.renderingRule=ea);ba&&null==B.mosaicRule&&(B.mosaicRule=ba);W&&null==B.raster&&(B.raster=
W);return Z.computeStatisticsHistograms(this.url,B,{signal:R})};ja.fetchImage=function(B,R,W,ba={}){if(null==B||null==R||null==W)return Promise.reject(new k("imagery-layer:fetch-image","Insufficient parameters for requesting an image. A valid extent, width and height values are required."));const ea=this.renderer||this._symbolizer?this.generateRasterInfo(this.renderingRule,{signal:ba.signal}):null;return x.when(ea).then(la=>{la&&(this.rasterInfo=la);la={imageServiceParameters:this.getExportImageServiceParameters(B,
R,W,ba.timeExtent),imageProps:{extent:B,width:R,height:W,format:this.format},requestAsImageElement:ba.requestAsImageElement&&!this.pixelFilter||!1,signal:ba.signal};return this._requestArrayBuffer(la)})};ja.fetchKeyProperties=function(B){B=B&&B.renderingRule&&B.renderingRule.toJSON();return t(this.parsedUrl.path+"/keyProperties",{query:this._getQueryParams({renderingRule:10.3<=this.version&&B?JSON.stringify(B):null})}).then(R=>R.data)};ja.fetchRasterAttributeTable=function(B){B=B&&B.renderingRule&&
B.renderingRule.toJSON();return 10.1>this.version?Promise.reject(new k("#fetchRasterAttributeTable()","Failed to get rasterAttributeTable")):t(this.parsedUrl.path+"/rasterAttributeTable",{query:this._getQueryParams({renderingRule:10.3<=this.version&&B?JSON.stringify(B):null})}).then(R=>c.fromJSON(R.data))};ja.getCatalogItemRasterInfo=async function(B,R){var W=t(this.parsedUrl.path+"/"+B+"/info",{query:this._getQueryParams(),...R}).then(ba=>ba.data);B=t(this.parsedUrl.path+"/"+B+"/info/keyProperties",
{query:this._getQueryParams(),...R}).then(ba=>ba.data).catch(()=>{});W=await Promise.all([W,B]);if(W[0])return B=f.fromJSON(W[0].extent),R=W[0].statistics?W[0].statistics.map(ba=>({min:ba[0],max:ba[1],avg:ba[2],stddev:ba[3]})):null,new K({bandCount:W[0].bandCount,extent:B,spatialReference:B.sr,pixelSize:new m({x:W[0].pixelSizeX,y:W[0].pixelSizeY,spatialReference:B.sr}),pixelType:W[0].pixelType.toLowerCase(),statistics:R,histograms:W[0].histograms,keyProperties:W[1]||{}})};ja.getCatalogItemICSInfo=
async function(B,R){var {data:W}=await t(this.parsedUrl.path+"/"+B+"/info/ics",{query:this._getQueryParams(),...R});if(W=W&&W.ics){var ba=null;try{ba=(await t(this.parsedUrl.path+"/"+B+"/info",{query:this._getQueryParams(),...R})).data.extent}catch{}if(!ba||!ba.spatialReference)return{ics:W,icsToPixelTransform:null,icsExtent:null,northDirection:null};var ea=10.7<=this.version?t(this.parsedUrl.path+"/"+B+"/info/icstopixel",{query:this._getQueryParams(),...R}).then(ya=>ya.data).catch(()=>({})):{},la=
ba.spatialReference,oa={geometries:JSON.stringify({geometryType:"esriGeometryEnvelope",geometries:[ba]}),inSR:la.wkid||JSON.stringify(la),outSR:"0:"+B};oa=t(this.parsedUrl.path+"/project",{query:this._getQueryParams(oa),...R}).then(ya=>ya.data).catch(()=>({}));var na=(ba.xmin+ba.xmax)/2,xa=(ba.ymax-ba.ymin)/6;ba=ba.ymin+xa;var wa=[];for(let ya=0;5>ya;ya++)wa.push({x:na,y:ba+xa*ya});B={geometries:JSON.stringify({geometryType:"esriGeometryPoint",geometries:wa}),inSR:la.wkid||JSON.stringify(la),outSR:"0:"+
B};R=t(this.parsedUrl.path+"/project",{query:this._getQueryParams(B),...R}).then(ya=>ya.data).catch(()=>({}));ea=await Promise.all([ea,oa,R]);R=ea[0].ipxf;if(null==R){var Aa,ra,va;B=null==(Aa=W.geodataXform)?void 0:Aa.xf_0;"topup"===(null==B?void 0:null==(ra=B.name)?void 0:ra.toLowerCase())&&6===(null==B?void 0:null==(va=B.coefficients)?void 0:va.length)&&(R={affine:{name:"ics [sensor: Frame] to pixel (column, row) transformation",coefficients:B.coefficients,cellsizeRatio:0,type:"GeometricXform"}})}if(Aa=
f.fromJSON(ea[1]&&ea[1].geometries&&ea[1].geometries[0]))Aa.spatialReference=new r({wkid:0,imageCoordinateSystem:W});ra=ea[2].geometries?ea[2].geometries.filter(ya=>null!=ya&&null!=ya.x&&null!=ya.y&&"NaN"!==ya.x&&"NaN"!==ya.y):[];va=ra.length;if(3>va)return{ics:W,icsToPixelTransform:R,icsExtent:Aa,northDirection:null};la=oa=B=ea=0;for(na=0;na<va;na++)ea+=ra[na].x,B+=ra[na].y,oa+=ra[na].x*ra[na].x,la+=ra[na].x*ra[na].y;va=(va*la-ea*B)/(va*oa-ea*ea);ea=0;B=ra[4].x>ra[0].x;ra=ra[4].y>ra[0].y;Infinity===
va?ea=ra?90:270:0===va?ea=B?0:180:0<va?ea=B?180*Math.atan(va)/Math.PI:180*Math.atan(va)/Math.PI+180:0>va&&(ea=ra?180+180*Math.atan(va)/Math.PI:360+180*Math.atan(va)/Math.PI);return{ics:W,icsToPixelTransform:R,icsExtent:Aa,northDirection:ea}}};ja.generateRasterInfo=async function(B,R){if((!B||"none"===B.functionName.toLowerCase()||this._isVectorFieldResampleFunction(B))&&J.isSome(this.serviceRasterInfo))return this.serviceRasterInfo;const W=ha(B);if(this._functionRasterInfos[W])return this._functionRasterInfos[W];
B=this._generateRasterInfo(B,R);this._functionRasterInfos[W]=B;try{return await B}catch{return this._functionRasterInfos[W]=null}};ja.getExportImageServiceParameters=function(B,R,W,ba){B=B.clone().shiftCentralMeridian();var ea=B.spatialReference;if(ea.imageCoordinateSystem){const {id:ra,referenceServiceName:va}=ea.imageCoordinateSystem;ea=null!=ra?va?-1<this.parsedUrl.path.toLowerCase().indexOf("/"+va.toLowerCase()+"/")?"0:"+ra:JSON.stringify({icsid:ra,icsns:va}):"0:"+ra:JSON.stringify({ics:ea.imageCoordinateSystem})}else ea=
ea.wkid||JSON.stringify(ea.toJSON());J.isSome(this.serviceRasterInfo)&&this.pixelType!==this.serviceRasterInfo.pixelType&&(this.exportImageServiceParameters.pixelType=this.pixelType);const la=this.exportImageServiceParameters.toJSON(),{bandIds:oa,noData:na,mosaicRule:xa}=la;var {renderingRule:wa}=la;la.bandIds=oa instanceof Array&&0<oa.length&&!this.renderingRule?oa.join(","):void 0;if(null!=oa&&oa.length&&this.renderingRule)if("Colormap"===wa.rasterFunction){const ra=new Q({functionName:"ExtractBand",
functionArguments:{BandIds:oa,raster:wa.rasterFunctionArguments.Raster}});wa.rasterFunctionArguments.Raster=ra}else wa=new Q({functionName:"ExtractBand",functionArguments:{BandIds:oa,raster:wa}});na instanceof Array&&0<na.length&&(la.noData=na.join(","));const Aa=this.timeInfo;xa&&xa.multidimensionalDefinition&&ba&&Aa&&Aa.startField&&(xa.multidimensionalDefinition=xa.multidimensionalDefinition.filter(ra=>ra.dimensionName!==Aa.startField));la.mosaicRule=xa&&JSON.stringify(xa);la.renderingRule=wa&&
JSON.stringify(wa);wa={};if(ba){const {start:ra,end:va}=ba.toJSON();if(ra&&va&&ra===va)wa.time=""+ra;else if(null!=ra||null!=va)wa.time=`${null==ra?"null":ra},${null==va?"null":va}`}return{bbox:B.xmin+","+B.ymin+","+B.xmax+","+B.ymax,bboxSR:ea,imageSR:ea,size:R+","+W,...la,...wa}};ja.identify=async function(B,R){await this._fetchCapabilities(null==R?void 0:R.signal);if(!this.capabilities.operations.supportsIdentify)throw new k("imagery-layer:query-rasters","query operation is not supported on the input image service");
B=S.ensureClass(ia,B).clone();const {raster:W,mosaicRule:ba,renderingRule:ea}=this;ea&&null==B.renderingRule&&(B.renderingRule=ea);ba&&null==B.mosaicRule&&(B.mosaicRule=ba);W&&null==B.raster&&(B.raster=W);return(new Y({url:this.url})).execute(B,R)};ja.queryRasters=async function(B,R){await this._fetchCapabilities(null==R?void 0:R.signal);if(!this.capabilities.operations.supportsQuery)throw new k("imagery-layer:query-rasters","query operation is not supported on the input image service");B=S.ensureClass(l,
B);return this.queryTask.execute(B,R)};ja.queryVisibleRasters=function(B,R){if(!B)return Promise.reject(new k("imagery-layer: query-visible-rasters","missing query parameter"));const {pixelSize:W,returnDomainValues:ba,returnTopmostRaster:ea,showNoDataRecords:la}=R||{pixelSize:null,returnDomainValues:!1,returnTopmostRaster:!1,showNoDataRecords:!1};let oa=!1,na=R=null;const xa=this.rasterFunctionNamesIndex;if(J.isSome(B.outFields)&&(oa=B.outFields.some(ya=>-1===ya.toLowerCase().indexOf("raster.servicepixelvalue")),
10.4<=this.version)){const ya=B.outFields.filter(za=>-1<za.toLowerCase().indexOf("raster.servicepixelvalue")&&24<za.length).map(za=>{za=za.slice(25);return[this._updateRenderingRulesFunctionName(za,xa),za]});R=ya.map(za=>new Q({functionName:za[0]}));na=ya.map(za=>za[1]);0===R.length?this.renderingRule?(R.push(this.renderingRule),na.push(this.renderingRule.functionName)):R=null:this.renderingRule&&!R.some(za=>za.functionName===this.renderingRule.functionName)&&(R.push(this.renderingRule),na.push(this.renderingRule.functionName))}const wa=
J.isNone(B.outSpatialReference)||B.outSpatialReference.equals(this.spatialReference);R=this._getQueryParams({geometry:B.geometry,timeExtent:B.timeExtent,mosaicRule:this.exportImageServiceParameters.mosaicRule,renderingRule:10.4>this.version?this.renderingRule:null,renderingRules:R,pixelSize:W,returnCatalogItems:oa,returnGeometry:wa,maxItemCount:ea?1:null});delete R.f;const Aa=new ia(R),ra=new Y({url:this.url}),va=this.generateRasterInfo(this.renderingRule);return new Promise(ya=>{va.then(()=>{ra.execute(Aa).then(za=>
{const Fa=B.outFields;if(oa&&!wa&&za.catalogItems&&za.catalogItems.features&&0<za.catalogItems.features.length){const Ca=this.objectIdField||"ObjectId",Ga=za.catalogItems.features;var Da=Ga.map(Ba=>Ba.attributes&&Ba.attributes[Ca]);Da=new l({objectIds:Da,returnGeometry:!0,outSpatialReference:B.outSpatialReference,outFields:[Ca]});return this.queryRasters(Da).then(Ba=>{Ba&&Ba.features&&0<Ba.features.length&&Ba.features.forEach(Ha=>{Ga.forEach(Ea=>{Ea.attributes[Ca]===Ha.attributes[Ca]&&(Ea.geometry=
new C(Ha.geometry),Ea.geometry.spatialReference=B.outSpatialReference)})});ya(this._processVisibleRastersResponse(za,{returnDomainValues:ba,templateRRFunctionNames:na,showNoDataRecords:la,templateFields:Fa}))}).catch(()=>{throw new k("imagery-layer:query-visible-rasters","encountered error when querying visible rasters geometry");})}ya(this._processVisibleRastersResponse(za,{returnDomainValues:ba,templateRRFunctionNames:na,showNoDataRecords:la,templateFields:Fa}))}).catch(()=>{throw new k("imagery-layer:query-visible-rasters",
"encountered error when querying visible rasters");})})})};ja.fetchVariableStatisticsHistograms=async function(B,R){var W=t(this.parsedUrl.path+"/statistics",{query:this._getQueryParams({variable:B}),signal:R}).then(ba=>{var ea;return null==(ea=ba.data)?void 0:ea.statistics});B=t(this.parsedUrl.path+"/histograms",{query:this._getQueryParams({variable:B}),signal:R}).then(ba=>{var ea;return null==(ea=ba.data)?void 0:ea.histograms});W=await Promise.all([W,B]);W[0]&&W[0].forEach(ba=>{ba.avg=ba.mean;ba.stddev=
ba.standardDeviation});return{statistics:W[0]||null,histograms:W[1]||null}};ja._fetchService=async function(B){await this._fetchServiceInfo(B);J.isSome(this.serviceRasterInfo)&&!this.rasterInfo&&(this.rasterInfo=this.serviceRasterInfo);var R=this.sourceJSON;R=J.isSome(this.serviceRasterInfo)?Promise.resolve(this.serviceRasterInfo):this._fetchAuxiliaryRasterInfo({serviceInfo:R,signal:B}).then(W=>{this._set("serviceRasterInfo",W);return W});B=this.renderingRule&&"none"!==this.renderingRule.functionName.toLowerCase()?
this.generateRasterInfo(this.renderingRule,{signal:B}):null;return Promise.all([R,B]).then(W=>{W[1]?this._set("rasterInfo",W[1]):this._set("rasterInfo",W[0]);this.renderer&&0>X.getSupportedRendererTypes(this.rasterInfo).indexOf(this.renderer.type)&&(this.renderer=null,ca.warn("ArcGISImageService","Switching to the default renderer. Renderer applied is not valid for this Imagery Layer"));this._configDefaultRenderer();this.watch("renderer",()=>this._configDefaultRenderer());this.watch("renderingRule",
ba=>{(this.renderer||this._symbolizer||this.popupEnabled&&this.popupTemplate)&&this.generateRasterInfo(ba).then(ea=>{ea&&(this.rasterInfo=ea)})});(W=J.isSome(this.serviceRasterInfo)&&this.serviceRasterInfo.multidimensionalInfo)&&this._updateMultidimensionalDefinition(W)})};ja._initJobHandler=async function(){if(null!=this._rasterJobHandler.connectionPromise)return this._rasterJobHandler.connectionPromise;const B=new G;this._rasterJobHandler.connectionPromise=B.initialize().then(()=>{this._rasterJobHandler.instance=
B},()=>null);await this._rasterJobHandler.connectionPromise};ja._shutdownJobHandler=function(){this._rasterJobHandler.instance&&this._rasterJobHandler.instance.destroy();this._rasterJobHandler.instance=null;this._rasterJobHandler.connectionPromise=null;this._rasterJobHandler.refCount=0};ja._fetchCapabilities=async function(B){if(this.capabilities)return this.capabilities;await this._fetchServiceInfo(B);return this.capabilities};ja._fetchServiceInfo=async function(B){var R;let W=this.sourceJSON;if(!W){const {data:ba,
ssl:ea}=await t(this.parsedUrl.path,{query:this._getQueryParams(),signal:B});this.sourceJSON=W=ba;ea&&(this.url=this.url.replace(/^http:/i,"https:"))}if(-1<(null==(R=W.capabilities)?void 0:R.toLowerCase().split(",").map(ba=>ba.trim()).indexOf("tilesonly")))throw new k("imagery-layer:fetch-service-info","use ImageryTileLayer to open tiles-only image services");this.read(W,{origin:"service",url:this.parsedUrl})};ja._isVectorFieldResampleFunction=function(B){if(!J.isSome(B))return!1;const {functionName:R,
functionArguments:W}=B;B="resample"===R.toLowerCase();const ba=(null==W?void 0:W.ResampleType)||(null==W?void 0:W.resampleType);return B&&(7===ba||10===ba)};ja._isPicture=function(){return!this.format||-1<this.format.indexOf("jpg")||-1<this.format.indexOf("png")};ja._configDefaultRenderer=function(){if(!this._isPicture()&&!this.pixelFilter){if(!this.bandIds&&3<=this.rasterInfo.bandCount){const W=X.getDefaultBandCombination(this.rasterInfo);!W||3===this.rasterInfo.bandCount&&0===W[0]&&1===W[1]&&2===
W[2]||(this.bandIds=W)}if(!this.renderer){var B,R;this.renderer=X.createDefaultRenderer(this.rasterInfo,{bandIds:this.bandIds,variableName:this.renderingRule?null:null==(B=this.mosaicRule)?void 0:null==(R=B.multidimensionalDefinition)?void 0:R[0].variableName})}this._symbolizer?(this._symbolizer.rendererJSON=X.normalizeRendererJSON(this.renderer.toJSON()),this._symbolizer.rasterInfo=this.rasterInfo):this._symbolizer=new V({rendererJSON:this.renderer.toJSON(),rasterInfo:this.rasterInfo});this._symbolizer.bind()||
(this._symbolizer=null)}};ja._clonePixelData=function(B){return null==B?B:{extent:B.extent&&B.extent.clone(),pixelBlock:B.pixelBlock&&B.pixelBlock.clone()}};ja._getQueryParams=function(B){const {raster:R,viewId:W}=this;return{raster:R,viewId:W,f:"json",...B}};ja._decodePixelBlock=function(B,R,W){return this._rasterJobHandler.instance?this._rasterJobHandler.instance.decode({data:B,options:R}):O.decode(B,R,W)};ja._fetchMultidimensionalInfo=async function(B){var R;B=await t(this.parsedUrl.path+"/multidimensionalInfo",
{query:this._getQueryParams(),signal:B}).then(W=>{var ba;return null==(ba=W.data)?void 0:ba.multidimensionalInfo});null!=(R=B.variables)&&R.length&&B.variables.forEach(W=>{var ba;null!=(ba=W.statistics)&&ba.length&&W.statistics.forEach(ea=>{ea.avg=ea.mean;ea.stddev=ea.standardDeviation})});return B};ja._fetchAuxiliaryRasterInfo=function(B){const R=B&&B.serviceInfo;if(!R)return Promise.reject(new k("imagery-layer:fetch-metadata","valid serviceInfo is required"));var W=B.renderingRule?JSON.stringify(B.renderingRule.toJSON()):
null,ba=B.signal;B=R.hasRasterAttributeTable&&10.1<=this.version?t(this.parsedUrl.path+"/rasterAttributeTable",{query:this._getQueryParams({renderingRule:10.1<=this.version?W:null}),signal:ba}).then(oa=>c.fromJSON(oa.data)).catch(()=>null):!1;const ea=R.hasColormap&&10.1<=this.version?t(this.parsedUrl.path+"/colormap",{query:this._getQueryParams({renderingRule:10.6<=this.version?W:null}),signal:ba}).then(oa=>{var na;return null==(na=oa.data)?void 0:na.colormap}):!1,la=R.hasHistograms&&10.1<=this.version?
t(this.parsedUrl.path+"/histograms",{query:this._getQueryParams({renderingRule:10.1<=this.version?W:null}),signal:ba}).then(oa=>{var na;return null==(na=oa.data)?void 0:na.histograms}):!1;W=10.3<=this.version?t(this.parsedUrl.path+"/keyProperties",{query:this._getQueryParams({renderingRule:W}),signal:ba}).then(oa=>oa.data).catch(()=>{}):!1;ba=R.hasMultidimensions&&10.3<=this.version?this._fetchMultidimensionalInfo():!1;return Promise.all([B,ea,la,W,ba]).then(oa=>{let na=null;if(R.minValues&&R.minValues.length===
R.bandCount){na=[];for(var xa=0;xa<R.minValues.length;xa++)na.push({min:R.minValues[xa],max:R.maxValues[xa],avg:R.meanValues[xa],stddev:R.stdvValues[xa]})}xa=Math.ceil((R.extent.xmax-R.extent.xmin)/R.pixelSizeX-.1);const wa=Math.ceil((R.extent.ymax-R.extent.ymin)/R.pixelSizeY-.1),Aa=r.fromJSON(R.spatialReference||R.extent.spatialReference);return new K({width:xa,height:wa,bandCount:R.bandCount,extent:f.fromJSON(R.extent),spatialReference:Aa,pixelSize:new m({x:R.pixelSizeX,y:R.pixelSizeY,spatialReference:Aa}),
pixelType:R.pixelType.toLowerCase(),statistics:na,attributeTable:oa[0]||null,colormap:oa[1]||null,histograms:oa[2]||null,keyProperties:oa[3]||{},multidimensionalInfo:oa[4]||null})})};ja._requestArrayBuffer=function(B){const {imageProps:R,requestAsImageElement:W,signal:ba}=B;if(W&&!this.pixelFilter&&R.format&&-1<R.format.indexOf("png"))return t(this.parsedUrl.path+"/exportImage",{responseType:"image",query:this._getQueryParams({f:"image",...B.imageServiceParameters}),signal:ba}).then(la=>({imageElement:la.data,
params:R}));const ea=this._initJobHandler();B=t(this.parsedUrl.path+"/exportImage",{responseType:"array-buffer",query:this._getQueryParams({f:"image",...B.imageServiceParameters}),signal:ba});return Promise.all([B,ea]).then(la=>{la=la[0].data;const oa=R.format||"jpgpng";var na=oa;"bsq"!==na&&"bip"!==na&&(na=O.getFormat(la));if(!na)throw new k("imagery-layer:fetch-image","unsupported format signature "+String.fromCharCode.apply(null,new Uint8Array(la)));na="gif"===oa||"bmp"===oa||-1<oa.indexOf("png")&&
("png"===na||"jpg"===na);const xa={signal:ba};return na?O.decode(la,{useCanvas:!0,...R},xa).then(wa=>({pixelData:{pixelBlock:wa,extent:R.extent},params:R})):this._decodePixelBlock(la,{width:R.width,height:R.height,planes:null,pixelType:null,noDataValue:null,format:oa},xa).then(wa=>({pixelData:{pixelBlock:wa,extent:R.extent},params:R}))})};ja._generateRasterInfo=async function(B,R){const {data:W}=await t(this.parsedUrl.path,{query:this._getQueryParams({renderingRule:B}),...R});return await this._fetchAuxiliaryRasterInfo({serviceInfo:W,
renderingRule:B,...R})};ja._isValidCustomizedMosaicRule=function(B){return B&&JSON.stringify(B.toJSON())!==JSON.stringify(this._defaultServiceMosaicRule&&this._defaultServiceMosaicRule.toJSON())};ja._updateMultidimensionalDefinition=function(B){if(!this._isValidCustomizedMosaicRule(this.mosaicRule)){var R=B.variables[0].dimensions;B=[];for(var W in R)if(R.hasOwnProperty(W)){const ba=R[W],ea=ba.extent;let la=!0,oa=[ea[0]];ba.hasRanges&&!0===ba.hasRanges?(la=!1,oa=[ba.values[0]]):"stdz"===ba.name.toLowerCase()&&
Math.abs(ea[1])<=Math.abs(ea[0])&&(oa=[ea[1]]);B.push(new N({variableName:"",dimensionName:R[W].name,isSlice:la,values:oa}))}0<B.length&&(this.mosaicRule=this.mosaicRule||new T,W=this.mosaicRule.multidimensionalDefinition,!W||W&&0>=W.length)&&(this.mosaicRule.multidimensionalDefinition=B)}};ja._formatAttributeValue=function(B,R){if("string"===typeof B&&(R=(R=this._getFieldInfo(this.popupTemplate&&this.popupTemplate.fieldInfos,R))&&R.format)){let W,ba;return-1<B.trim().indexOf(",")?(W=",",ba=W+" ",
this._formatDelimitedString(B,W,ba,R)):-1<B.trim().indexOf(" ")?(W=ba=" ",this._formatDelimitedString(B,W,ba,R)):this._formatNumberFromString(B,R)}return B};ja._getFieldInfo=function(B,R){if(B&&B.length&&R){var W=R.toLowerCase(),ba=void 0;B.some(ea=>!ea.fieldName||ea.fieldName.toLowerCase()!==W&&ea.fieldName.toLowerCase()!==W.replace(/ /g,"_")?!1:(ba=ea,!0));return ba}};ja._formatDelimitedString=function(B,R,W,ba){return B&&R&&W&&ba?B.trim().split(R).map(ea=>this._formatNumberFromString(ea,ba)).join(W):
B};ja._formatNumberFromString=function(B,R){if(!B||!R)return B;const W=Number(B);return isNaN(W)?B:R.format(W)};ja._processVisibleRastersResponse=function(B,R){R=R||{};const W=B.value,{templateRRFunctionNames:ba,showNoDataRecords:ea,returnDomainValues:la,templateFields:oa}=R;R=B.processedValues;var na=B.catalogItems&&B.catalogItems.features;let xa=B.properties&&B.properties.Values&&B.properties.Values.map(za=>za.replace(/ /gi,", "))||[];var wa=this.objectIdField||"ObjectId";B="string"===typeof W&&
-1<W.toLowerCase().indexOf("nodata");const Aa=[];!W||na||B||(na={},na[wa]=0,na=new b(this.fullExtent,null,na),xa=[W],na=[na]);if(!na)return[];this._updateResponseFieldNames(na,oa);for(let za=0;za<na.length;za++){wa=na[za];if(null!=W&&!B){var ra=xa[za];var va=this.renderingRule&&R&&0<R.length&&ba&&0<ba.length&&-1<ba.indexOf(this.renderingRule.functionName)?R[ba.indexOf(this.renderingRule.functionName)]:W;if("nodata"===ra.toLowerCase()&&!ea)continue;wa.attributes["Raster.ItemPixelValue"]=this._formatAttributeValue(ra,
"Raster.ItemPixelValue");wa.attributes["Raster.ServicePixelValue"]=this._formatAttributeValue(va,"Raster.ServicePixelValue");this._updateFeatureWithMagDirValues(wa,ra);var ya=this.fields&&0<this.fields.length;va=this.renderingRule&&J.isSome(this.serviceRasterInfo)&&this.serviceRasterInfo.attributeTable?ya?ra:W:va;this.renderingRule||(va=ya?ra:W);this._updateFeatureWithRasterAttributeTableValues(wa,va)}wa.sourceLayer=this;la&&this._updateFeatureWithDomainValues(wa);if(ba&&R&&ba.length===R.length)for(ra=
0;ra<ba.length;ra++)ya="Raster.ServicePixelValue."+ba[ra],wa.attributes[ya]=this._formatAttributeValue(R[ra],ya);Aa.push(na[za])}return Aa};ja._updateFeatureWithRasterAttributeTableValues=function(B,R){var W=this.rasterInfo&&this.rasterInfo.attributeTable||J.isSome(this.serviceRasterInfo)&&this.serviceRasterInfo.attributeTable;const ba=W&&W.features;if(ba){W=W.fields;var ea=W.map(na=>na.name).filter(na=>"value"===na.toLowerCase()),la=ea&&ea[0];if(la){var oa=ba.filter(na=>na.attributes[la]===(null!=
R?parseInt(R,10):null));oa&&oa[0]&&W.forEach(na=>{const xa=this.rasterAttributeTableFieldPrefix+na.name;B.attributes[xa]=this._formatAttributeValue(oa[0].attributes[na.name],xa)})}}};ja._updateFeatureWithMagDirValues=function(B,R){if(this.pixelFilter&&("esriImageServiceDataTypeVector-UV"===this.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===this.serviceDataType)){var W=R.replace(" ",",").split(",").map(ba=>parseFloat(ba));R=W.map(ba=>[ba]);W=W.map(ba=>({minValue:ba,maxValue:ba,noDataValue:null}));
R=new d({height:1,width:1,pixelType:"f32",pixels:R,statistics:W});this.pixelFilter({pixelBlock:R,extent:new f(0,0,0,0,this.spatialReference)});B.attributes["Raster.Magnitude"]=R.pixels[0][0];B.attributes["Raster.Direction"]=R.pixels[1][0]}};ja._updateFeatureWithDomainValues=function(B){const R=this.fields&&this.fields.filter(W=>W.domain&&"coded-value"===W.domain.type);null!=R&&R.forEach(W=>{const ba=B.attributes[W.name];if(null!=ba){const ea=W.domain.codedValues.filter(la=>la.code===ba)[0];ea&&(B.attributes[W.name]=
ea.name)}})};ja._updateResponseFieldNames=function(B,R){if(R&&!(1>R.length)){var W=this.fieldsIndex;W&&B.forEach(ba=>{if(ba&&ba.attributes)for(const ea of R)if(W.has(ea)){const la=W.get(ea).name;la!==ea&&(ba.attributes[ea]=ba.attributes[la],delete ba.attributes[la])}})}};ja._updateRenderingRulesFunctionName=function(B,R){if(B&&!(1>B.length)){if("Raw"===B)return B.replace("Raw","None");var W=B.toLowerCase().replace(/ /gi,"_");return R.has(W)?R.get(W):B}};ja._isRFTJson=function(B){return B.name&&B.arguments&&
B.function&&B.hasOwnProperty("functionType")};ja._readCapabilities=function(B){const R=B.capabilities?B.capabilities.toLowerCase().split(",").map(xa=>xa.trim()):["image","catalog"],{currentVersion:W,advancedQueryCapabilities:ba,maxRecordCount:ea}=B,la=-1<R.indexOf("image"),oa="esriImageServiceDataTypeElevation"===B.serviceDataType,na=!!(B.spatialReference||B.extent&&B.extent.spatialReference);return{operations:{supportsComputeHistograms:la,supportsExportImage:la,supportsIdentify:la,supportsMeasure:-1<
R.indexOf("mensuration")&&na,supportsDownload:-1<R.indexOf("download"),supportsQuery:-1<R.indexOf("catalog")&&B.fields&&0<B.fields.length,supportsGetSamples:10.2<=W&&la,supportsProject:10.3<=W&&la,supportsComputeStatisticsHistograms:10.4<=W&&la,supportsQueryBoundary:10.6<=W&&la,supportsCalculateVolume:10.7<=W&&oa,supportsComputePixelLocation:10.7<=W&&-1<R.indexOf("catalog")},query:{supportsStatistics:!(!ba||!ba.supportsStatistics),supportsOrderBy:!(!ba||!ba.supportsOrderBy),supportsDistinct:!(!ba||
!ba.supportsDistinct),supportsPagination:!(!ba||!ba.supportsPagination),supportsStandardizedQueriesOnly:!(!ba||!ba.useStandardizedQueries),maxRecordCount:ea}}};H._createClass(qa,[{key:"rasterFunctionNamesIndex",get:function(){const B=new Map;if(!this.rasterFunctionInfos||1>this.rasterFunctionInfos.length)return B;this.rasterFunctionInfos.forEach(R=>{B.set(R.name.toLowerCase().replace(/ /gi,"_"),R.name)});return B}},{key:"queryTask",get:function(){return new D({url:this.url})}},{key:"fieldsIndex",
get:function(){return this.fields?new h(this.fields):null}},{key:"format",set:function(B){B&&ta.has(B.toLowerCase())&&this._set("format",B.toLowerCase())}},{key:"mosaicRule",set:function(B){B&&B.mosaicMethod&&(B=T.fromJSON({...B.toJSON(),mosaicMethod:B.mosaicMethod,mosaicOperation:B.mosaicOperation}));this._set("mosaicRule",B)}},{key:"parsedUrl",get:function(){return this.url?w.urlToObject(this.url):null}},{key:"rasterFields",get:function(){const B=this.rasterAttributeTableFieldPrefix||"Raster.";
var R=new a({name:"Raster.ItemPixelValue",alias:"Item Pixel Value",domain:null,editable:!1,length:50,type:"string"});const W=new a({name:"Raster.ServicePixelValue",alias:"Service Pixel Value",domain:null,editable:!1,length:50,type:"string"}),ba=new a({name:"Raster.ServicePixelValue.Raw",alias:"Raw Service Pixel Value",domain:null,editable:!1,length:50,type:"string"});let ea=this.fields?y.clone(this.fields):[];ea.push(W);this.capabilities.operations.supportsQuery&&this.fields&&0<this.fields.length&&
ea.push(R);10.4<=this.version&&this.rasterFunctionInfos&&this.rasterFunctionInfos.some(la=>"none"===la.name.toLowerCase())&&ea.push(ba);this.rasterFunctionInfos&&this.rasterFunctionInfos.filter(la=>"none"!==la.name.toLowerCase()).forEach(la=>{ea.push(new a({name:"Raster.ServicePixelValue."+la.name,alias:la.name,domain:null,editable:!1,length:50,type:"string"}))});null==this.pixelFilter||"esriImageServiceDataTypeVector-UV"!==this.serviceDataType&&"esriImageServiceDataTypeVector-MagDir"!==this.serviceDataType||
(ea.push(new a({name:"Raster.Magnitude",alias:"Magnitude",domain:null,editable:!1,type:"double"})),ea.push(new a({name:"Raster.Direction",alias:"Direction",domain:null,editable:!1,type:"double"})));(R=this.rasterInfo.attributeTable&&this.rasterInfo.attributeTable.fields||null)&&0<R.length&&(R=R.filter(la=>"esriFieldTypeOID"!==la.type&&"value"!==la.name.toLowerCase()).map(la=>{const oa=y.clone(la);oa.name=B+la.name;return oa}),ea=ea.concat(R));return ea}},{key:"renderingRule",set:function(B){B&&B.rasterFunction&&
(B=Q.fromJSON({...B.toJSON(),rasterFunction:B.rasterFunction,rasterFunctionArguments:B.rasterFunctionArguments}));this._set("renderingRule",B)}}]);return qa}(da);A.__decorate([F.property()],da.prototype,"_functionRasterInfos",void 0);A.__decorate([F.property()],da.prototype,"_rasterJobHandler",void 0);A.__decorate([F.property()],da.prototype,"_symbolizer",void 0);A.__decorate([F.property()],da.prototype,"_defaultServiceMosaicRule",void 0);A.__decorate([z.reader("_defaultServiceMosaicRule",["defaultMosaicMethod"])],
da.prototype,"readDefaultServiceMosaicRule",null);A.__decorate([F.property()],da.prototype,"_cachedRendererJson",void 0);A.__decorate([F.property()],da.prototype,"rasterAttributeTableFieldPrefix",void 0);A.__decorate([F.property({readOnly:!0})],da.prototype,"rasterFunctionNamesIndex",null);A.__decorate([F.property({readOnly:!0})],da.prototype,"queryTask",null);A.__decorate([F.property()],da.prototype,"adjustAspectRatio",void 0);A.__decorate([F.property({readOnly:!0}),L.aliasOf("serviceRasterInfo.bandCount")],
da.prototype,"bandCount",void 0);A.__decorate([F.property({type:[S.Integer],json:{write:!0}})],da.prototype,"bandIds",void 0);A.__decorate([z.reader("bandIds")],da.prototype,"readBandIds",null);A.__decorate([F.property({readOnly:!0,json:{read:!1}})],da.prototype,"capabilities",void 0);A.__decorate([z.reader("service","capabilities",["capabilities","currentVersion","serviceDataType"])],da.prototype,"readCapabilities",null);A.__decorate([F.property({type:Number})],da.prototype,"compressionQuality",
void 0);A.__decorate([n.writer("compressionQuality")],da.prototype,"writeCompressionQuality",null);A.__decorate([F.property({type:Number})],da.prototype,"compressionTolerance",void 0);A.__decorate([n.writer("compressionTolerance")],da.prototype,"writeCompressionTolerance",null);A.__decorate([F.property({json:{read:{source:"copyrightText"}}})],da.prototype,"copyright",void 0);A.__decorate([F.property({type:String,json:{read:{source:"layerDefinition.definitionExpression"},write:{target:"layerDefinition.definitionExpression"}}})],
da.prototype,"definitionExpression",void 0);A.__decorate([F.property({readOnly:!0,constructOnly:!0})],da.prototype,"exportImageServiceParameters",void 0);A.__decorate([F.property()],da.prototype,"rasterInfo",void 0);A.__decorate([F.property({readOnly:!0,type:[a]})],da.prototype,"fields",void 0);A.__decorate([F.property({readOnly:!0})],da.prototype,"fieldsIndex",null);A.__decorate([F.property({type:"png png8 png24 png32 jpg bmp gif jpgpng lerc tiff".split(" "),json:{write:!0}})],da.prototype,"format",
null);A.__decorate([z.reader("service","format",["serviceDataType"])],da.prototype,"readFormat",null);A.__decorate([F.property({type:f})],da.prototype,"fullExtent",void 0);A.__decorate([F.property({readOnly:!0})],da.prototype,"hasMultidimensions",void 0);A.__decorate([F.property({json:{read:{source:"maxImageHeight"}}})],da.prototype,"imageMaxHeight",void 0);A.__decorate([F.property({json:{read:{source:"maxImageWidth"}}})],da.prototype,"imageMaxWidth",void 0);A.__decorate([F.property({type:String,
json:{type:ka.jsonValues,read:ka.read,write:ka.write}})],da.prototype,"interpolation",void 0);A.__decorate([F.property()],da.prototype,"minScale",void 0);A.__decorate([z.reader("service","minScale")],da.prototype,"readMinScale",null);A.__decorate([F.property()],da.prototype,"maxScale",void 0);A.__decorate([z.reader("service","maxScale")],da.prototype,"readMaxScale",null);A.__decorate([F.property({type:T})],da.prototype,"mosaicRule",null);A.__decorate([z.reader("mosaicRule",["mosaicRule","defaultMosaicMethod"])],
da.prototype,"readMosaicRule",null);A.__decorate([n.writer("mosaicRule")],da.prototype,"writeMosaicRule",null);A.__decorate([F.property({readOnly:!0}),L.aliasOf("serviceRasterInfo.multidimensionalInfo")],da.prototype,"multidimensionalInfo",void 0);A.__decorate([F.property({json:{type:S.Integer}})],da.prototype,"noData",void 0);A.__decorate([n.writer("noData")],da.prototype,"writeNoData",null);A.__decorate([F.property({type:String,json:{type:ma.jsonValues,read:ma.read,write:ma.write}})],da.prototype,
"noDataInterpretation",void 0);A.__decorate([F.property({type:String,readOnly:!0,json:{read:{source:["fields"]}}})],da.prototype,"objectIdField",void 0);A.__decorate([z.reader("objectIdField")],da.prototype,"readObjectIdField",null);A.__decorate([F.property({readOnly:!0})],da.prototype,"parsedUrl",null);A.__decorate([F.property({readOnly:!0}),L.aliasOf("serviceRasterInfo.pixelSize.x")],da.prototype,"pixelSizeX",void 0);A.__decorate([F.property({readOnly:!0}),L.aliasOf("serviceRasterInfo.pixelSize.y")],
da.prototype,"pixelSizeY",void 0);A.__decorate([F.property({type:Function})],da.prototype,"pixelFilter",void 0);A.__decorate([F.property()],da.prototype,"raster",void 0);A.__decorate([F.property()],da.prototype,"viewId",void 0);A.__decorate([F.property({types:u.rasterRendererTypes,json:{name:"layerDefinition.drawingInfo.renderer",origins:{"web-scene":{types:u.websceneRasterRendererTypes,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy(pa){return{enabled:pa&&"vector-field"!==pa.type}}}}}}})],
da.prototype,"renderer",void 0);A.__decorate([z.reader("renderer")],da.prototype,"readRenderer",null);A.__decorate([n.writer("renderer")],da.prototype,"writeRenderer",null);A.__decorate([F.property(e.opacity)],da.prototype,"opacity",void 0);A.__decorate([F.property({readOnly:!0}),L.aliasOf("serviceRasterInfo.attributeTable")],da.prototype,"rasterAttributeTable",void 0);A.__decorate([F.property({readOnly:!0})],da.prototype,"rasterFields",null);A.__decorate([F.property({readOnly:!0})],da.prototype,
"rasterFunctionInfos",void 0);A.__decorate([F.property({type:Q})],da.prototype,"renderingRule",null);A.__decorate([z.reader("renderingRule",["renderingRule","rasterFunctionInfos"])],da.prototype,"readRenderingRule",null);A.__decorate([n.writer("renderingRule")],da.prototype,"writeRenderingRule",null);A.__decorate([F.property()],da.prototype,"serviceDataType",void 0);A.__decorate([F.property({readOnly:!0,type:r})],da.prototype,"spatialReference",void 0);A.__decorate([z.reader("spatialReference",["spatialReference",
"extent"])],da.prototype,"readSpatialReference",null);A.__decorate([F.property({json:{type:ua.jsonValues}})],da.prototype,"pixelType",void 0);A.__decorate([z.reader("pixelType")],da.prototype,"readPixelType",null);A.__decorate([n.writer("pixelType")],da.prototype,"writePixelType",null);A.__decorate([F.property({constructOnly:!0,type:K})],da.prototype,"serviceRasterInfo",void 0);A.__decorate([F.property()],da.prototype,"sourceJSON",void 0);A.__decorate([F.property(e.url)],da.prototype,"url",void 0);
A.__decorate([F.property({readOnly:!0})],da.prototype,"version",void 0);A.__decorate([z.reader("version",["currentVersion","fields","timeInfo"])],da.prototype,"readVersion",null);return da=A.__decorate([g.subclass("esri.layers.mixins.ArcGISImageService")],da)};Object.defineProperty(U,"__esModule",{value:!0})})},"esri/layers/support/PixelBlock":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/lang ../../core/maybe ../../core/Logger ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/Error ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport".split(" "),
function(U,H,A,aa,y,J,I,S,F,L,v,z,g,n,k){var w;const q=J.getLogger("esri.layers.support.PixelBlock");A=w=function(p){function x(m){m=p.call(this,m)||this;m.width=null;m.height=null;m.pixelType="f32";m.validPixelCount=null;m.mask=null;m.maskIsAlpha=!1;m.pixels=null;m.statistics=null;return m}U._inheritsLoose(x,p);x.createEmptyBand=function(m,f){return new (w.getPixelArrayConstructor(m))(f)};x.getPixelArrayConstructor=function(m){let f;switch(m){case "u1":case "u2":case "u4":case "u8":f=Uint8Array;
break;case "u16":f=Uint16Array;break;case "u32":f=Uint32Array;break;case "s8":f=Int8Array;break;case "s16":f=Int16Array;break;case "s32":f=Int32Array;break;case "u32":f=Uint32Array;break;case "f32":f=Float32Array;break;case "f64":f=Float64Array;break;case "c64":case "c128":case "unknown":f=Float32Array}return f};var r=x.prototype;r.castPixelType=function(m){if(!m)return"f32";m=m.toLowerCase();-1<["u1","u2","u4"].indexOf(m)?m="u8":-1==="unknown u8 s8 u16 s16 u32 s32 f32 f64".split(" ").indexOf(m)&&
(m="f32");return m};r.getPlaneCount=function(){return this.pixels&&this.pixels.length};r.addData=function(m){if(!m.pixels||m.pixels.length!==this.width*this.height)throw new v("pixelblock:invalid-or-missing-pixels","add data requires valid pixels array that has same length defined by pixel block width * height");this.pixels||(this.pixels=[]);this.statistics||(this.statistics=[]);this.pixels.push(m.pixels);this.statistics.push(m.statistics||{minValue:null,maxValue:null})};r.getAsRGBA=function(){const m=
new ArrayBuffer(this.width*this.height*4);switch(this.pixelType){case "s8":case "s16":case "u16":case "s32":case "u32":case "f32":case "f64":this._fillFromNon8Bit(m);break;default:this._fillFrom8Bit(m)}return new Uint8ClampedArray(m)};r.getAsRGBAFloat=function(){const m=new Float32Array(this.width*this.height*4);this._fillFrom32Bit(m);return m};r.updateStatistics=function(){this.statistics=this.pixels.map(C=>this._calculateBandStatistics(C,this.mask));const m=this.mask;let f=0;if(m)for(let C=0;C<
m.length;C++)m[C]&&f++;else f=this.width*this.height;this.validPixelCount=f};r.clamp=function(m){if(m&&"f64"!==m&&"f32"!==m){switch(m){case "u8":var f=[0,255];break;case "u16":f=[0,65535];break;case "u32":f=[0,4294967295];break;case "s8":f=[-128,127];break;case "s16":f=[-32768,32767];break;case "s32":f=[-2147483648,2147483647];break;default:f=[-3.4*1E39,3.4*1E39]}var [C,E]=f;f=this.pixels;var t=this.width*this.height,b=f.length,d=[];for(let h=0;h<b;h++){var u=w.createEmptyBand(m,t);var e=f[h];for(let c=
0;c<t;c++){var a=e[c];u[c]=a>E?E:a<C?C:a}d.push(u)}this.pixels=d;this.pixelType=m}};r.extractBands=function(m){if(y.isNone(m)||0===m.length||null==this.pixels||0===this.pixels.length)return this;var f=this.pixels.length;const C=m.some(E=>E>=this.pixels.length);f=f===m.length&&!m.some((E,t)=>E!==t);return C||f?this:new w({pixelType:this.pixelType,width:this.width,height:this.height,mask:this.mask,validPixelCount:this.validPixelCount,maskIsAlpha:this.maskIsAlpha,pixels:m.map(E=>this.pixels[E]),statistics:this.statistics&&
m.map(E=>this.statistics[E])})};r.clone=function(){const m=new w({width:this.width,height:this.height,pixelType:this.pixelType,maskIsAlpha:this.maskIsAlpha,validPixelCount:this.validPixelCount});this.mask&&(m.mask=this.mask instanceof Uint8Array?new Uint8Array(this.mask):this.mask.slice(0));let f;const C=w.getPixelArrayConstructor(this.pixelType);if(this.pixels&&0<this.pixels.length){m.pixels=[];const E=this.pixels[0].slice;for(f=0;f<this.pixels.length;f++)m.pixels[f]=E?this.pixels[f].slice(0,this.pixels[f].length):
new C(this.pixels[f])}if(this.statistics)for(m.statistics=[],f=0;f<this.statistics.length;f++)m.statistics[f]=aa.clone(this.statistics[f]);return m};r._fillFrom8Bit=function(m){const {mask:f,maskIsAlpha:C,pixels:E}=this;if(m&&E&&E.length){var t,b;var d=t=b=E[0];3<=E.length?(t=E[1],b=E[2]):2===E.length&&(t=E[1]);var u=new Uint32Array(m),e=this.width*this.height;if(d.length!==e)q.error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");else if(f&&f.length===e)if(C)for(m=0;m<e;m++)f[m]&&
(u[m]=f[m]<<24|b[m]<<16|t[m]<<8|d[m]);else for(m=0;m<e;m++)f[m]&&(u[m]=-16777216|b[m]<<16|t[m]<<8|d[m]);else for(m=0;m<e;m++)u[m]=-16777216|b[m]<<16|t[m]<<8|d[m]}else q.error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.")};r._fillFromNon8Bit=function(m){const {pixels:f,mask:C,statistics:E}=this;if(m&&f&&f.length){var t=this.pixelType,b=1,d=0;b=1;E&&0<E.length?(d=E.map(c=>c.minValue).reduce((c,l)=>Math.min(c,l)),b=E.map(c=>c.maxValue-c.minValue).reduce((c,l)=>Math.max(c,
l)),b=255/b):(b=255,"s8"===t?(d=-128,b=127):"u16"===t?b=65535:"s16"===t?(d=-32768,b=32767):"u32"===t?b=4294967295:"s32"===t?(d=-2147483648,b=2147483647):"f32"===t?(d=-3.4*1E39,b=3.4*1E39):"f64"===t&&(d=-Number.MAX_VALUE,b=Number.MAX_VALUE),b=255/(b-d));m=new Uint32Array(m);t=this.width*this.height;var u,e,a;var h=u=e=f[0];if(h.length!==t)return q.error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");if(2<=f.length)if(u=f[1],3<=f.length&&(e=f[2]),C&&C.length===t)for(a=0;a<t;a++)C[a]&&
(m[a]=-16777216|(e[a]-d)*b<<16|(u[a]-d)*b<<8|(h[a]-d)*b);else for(a=0;a<t;a++)m[a]=-16777216|(e[a]-d)*b<<16|(u[a]-d)*b<<8|(h[a]-d)*b;else if(C&&C.length===t)for(a=0;a<t;a++)u=(h[a]-d)*b,C[a]&&(m[a]=-16777216|u<<16|u<<8|u);else for(a=0;a<t;a++)u=(h[a]-d)*b,m[a]=-16777216|u<<16|u<<8|u}else q.error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.")};r._fillFrom32Bit=function(m){const {pixels:f,mask:C}=this;if(!m||!f||!f.length)return q.error("getAsRGBAFloat()","Unable to convert to RGBA. The input pixel block is empty.");
let E,t,b,d;E=t=b=f[0];3<=f.length?(t=f[1],b=f[2]):2===f.length&&(t=f[1]);const u=this.width*this.height;if(E.length!==u)return q.error("getAsRGBAFloat()","Unable to convert to RGBA. The pixelblock is invalid.");let e=0;if(C&&C.length===u)for(d=0;d<u;d++)m[e++]=E[d],m[e++]=t[d],m[e++]=b[d],m[e++]=C[d]&1;else for(d=0;d<u;d++)m[e++]=E[d],m[e++]=t[d],m[e++]=b[d],m[e++]=1};r._calculateBandStatistics=function(m,f){let C=Infinity,E=-Infinity;const t=m.length;let b,d=0;if(f)for(b=0;b<t;b++)f[b]&&(d=m[b],
C=d<C?d:C,E=d>E?d:E);else for(b=0;b<t;b++)d=m[b],C=d<C?d:C,E=d>E?d:E;return{minValue:C,maxValue:E}};return x}(k.JSONSupport);H.__decorate([I.property({json:{write:!0}})],A.prototype,"width",void 0);H.__decorate([I.property({json:{write:!0}})],A.prototype,"height",void 0);H.__decorate([I.property({json:{write:!0}})],A.prototype,"pixelType",void 0);H.__decorate([S.cast("pixelType")],A.prototype,"castPixelType",null);H.__decorate([I.property({json:{write:!0}})],A.prototype,"validPixelCount",void 0);
H.__decorate([I.property({json:{write:!0}})],A.prototype,"mask",void 0);H.__decorate([I.property({json:{write:!0}})],A.prototype,"maskIsAlpha",void 0);H.__decorate([I.property({json:{write:!0}})],A.prototype,"pixels",void 0);H.__decorate([I.property({json:{write:!0}})],A.prototype,"statistics",void 0);return A=w=H.__decorate([L.subclass("esri.layers.support.PixelBlock")],A)})},"esri/rasterRenderers":function(){define("exports ./core/Warning ./renderers/ClassBreaksRenderer ./renderers/RasterColormapRenderer ./renderers/RasterShadedReliefRenderer ./renderers/RasterStretchRenderer ./renderers/UniqueValueRenderer ./renderers/VectorFieldRenderer".split(" "),
function(U,H,A,aa,y,J,I,S){function F(g,n){if(!g)return null;if("classBreaks"===g.type&&g.classificationMethod){var k=g.authoringInfo||{classificationMethod:""};k.classificationMethod=g.classificationMethod;g.authoringInfo=k}k=g?z[g.type]||null:null;if(k)return k=new k,k.read(g,n),k;n&&n.messages&&g&&n.messages.push(new H("renderer:unsupported","Renderers of type '"+(g.type||"unknown")+"' are not supported",{definition:g,context:n}));return null}const L={key:"type",base:null,typeMap:{"unique-value":I,
"class-breaks":A,"raster-colormap":aa,"raster-stretch":J,"vector-field":S,"raster-shaded-relief":y}},v={...L,typeMap:{...L.typeMap}};delete v.typeMap["vector-field"];const z={uniqueValue:I,classBreaks:A,rasterStretch:J,rasterColormap:aa,vectorField:S,rasterShadedRelief:y};U.ClassBreaksRenderer=A;U.RasterColormapRenderer=aa;U.RasterShadedReliefRenderer=y;U.RasterStretchRenderer=J;U.UniqueValueRenderer=I;U.VectorFieldRenderer=S;U.fromJSON=function(g,n){return F(g,n)};U.rasterRendererTypes=L;U.read=
F;U.websceneRasterRendererTypes=v;Object.defineProperty(U,"__esModule",{value:!0})})},"esri/renderers/RasterColormapRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/JSONSupport ./support/ColormapInfo ./support/colorRampUtils".split(" "),
function(U,H,A,aa,y,J,I,S,F,L,v,z,g,n){var k;A=k=function(w){function q(x){x=w.call(this,x)||this;x.colormapInfos=null;x.type="raster-colormap";return x}U._inheritsLoose(q,w);q.createFromColormap=function(x,r){function m(C){return r?r[C]||"":String(C[0])}if(!x)return null;var f=5===x[0].length;x=x.sort(C=>C[0][0]-C[1][0]);f=f?x.map(C=>g.fromJSON({value:C[0],color:C.slice(1,5),label:m(C[0])})):x.map(C=>g.fromJSON({value:C[0],color:C.slice(1,4).concat([255]),label:m(C[0])}));return new k({colormapInfos:f})};
q.createFromColorramp=function(x){x=n.convertColorRampToColormap(x,256);return k.createFromColormap(x)};var p=q.prototype;p.clone=function(){return new k({colormapInfos:this.colormapInfos.map(x=>x.toJSON())})};p.extractColormap=function(){return this.colormapInfos.map(x=>[x.value,x.color.r,x.color.g,x.color.b,1<x.color.a?x.color.a:255*x.color.a&255]).sort((x,r)=>x[0]-r[0])};return q}(z.JSONSupport);H.__decorate([J.property({type:[g],json:{write:!0}})],A.prototype,"colormapInfos",void 0);H.__decorate([I.enumeration({rasterColormap:"raster-colormap"})],
A.prototype,"type",void 0);return A=k=H.__decorate([S.subclass("esri.renderers.RasterColormapRenderer")],A)})},"esri/renderers/support/ColormapInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../Color".split(" "),
function(U,H,A,aa,y,J,I,S,F,L,v,z,g){A=function(n){function k(){var w=n.apply(this,arguments)||this;w.value=null;w.label=null;w.color=null;return w}U._inheritsLoose(k,n);return k}(z.JSONSupport);H.__decorate([J.property({type:Number,json:{write:!0}})],A.prototype,"value",void 0);H.__decorate([J.property({type:String,json:{write:!0}})],A.prototype,"label",void 0);H.__decorate([J.property({type:g,json:{type:[y.Integer],write:!0}})],A.prototype,"color",void 0);return A=H.__decorate([S.subclass("esri.renderers.support.ColormapInfo")],
A)})},"esri/renderers/support/colorRampUtils":function(){define(["exports","../../Color","../../core/colorUtils"],function(U,H,A){function aa(S,F){if(!S||!F||S.length!==F.length)return!1;for(let L=0;L<S.length;L++)if(S[L]>F[L]+2||S[L]<F[L]-2)return!1;return!0}function y(S,F){if(S){F=F?F:J;var L=null,v;"algorithmic"===S.type?F.some(z=>{if(aa(S.fromColor.toRgb(),z.fromColor)&&aa(S.toColor.toRgb(),z.toColor))return L=z.id,!0}):"multipart"===S.type&&F.some(z=>{if(S.colorRamps&&z.colorRamps&&S.colorRamps.length===
z.colorRamps.length&&(v=S.colorRamps,!z.colorRamps.some((g,n)=>{if(!aa(v[n].fromColor.toRgb(),(new H(g.fromColor)).toRgb())||!aa(v[n].toColor.toRgb(),(new H(g.toColor)).toRgb()))return!0}))){if(L)return!0;L=z.id}});return L}}const J=[{id:"aspect_predefined",type:"multipart",colorRamps:[{fromColor:[190,190,190],toColor:[255,45,8]},{fromColor:[255,45,8],toColor:[255,181,61]},{fromColor:[255,181,61],toColor:[255,254,52]},{fromColor:[255,254,52],toColor:[0,251,50]},{fromColor:[0,251,50],toColor:[255,
254,52]},{fromColor:[0,253,255],toColor:[0,181,255]},{fromColor:[0,181,255],toColor:[26,35,253]},{fromColor:[26,35,253],toColor:[255,57,251]},{fromColor:[255,57,251],toColor:[255,45,8]}]},{id:"blackToWhite_predefined",fromColor:[0,0,0],toColor:[255,255,255]},{id:"blueBright_predefined",fromColor:[204,204,255],toColor:[0,0,224]},{id:"blueLightToDark_predefined",fromColor:[211,229,232],toColor:[46,100,140]},{id:"blueGreenBright_predefined",fromColor:[203,245,234],toColor:[48,207,146]},{id:"blueGreenLightToDark_predefined",
fromColor:[216,242,237],toColor:[21,79,74]},{id:"brownLightToDark_predefined",fromColor:[240,236,170],toColor:[102,72,48]},{id:"brownToBlueGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[156,85,31],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[33,130,145]}]},{id:"brownToBlueGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[110,70,45],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[48,100,102]}]},{id:"coefficientBias_predefined",fromColor:[214,
214,255],toColor:[0,57,148]},{id:"coldToHotDiverging_predefined",type:"multipart",colorRamps:[{fromColor:[69,117,181],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[214,47,39]}]},{id:"conditionNumber_predefined",type:"multipart",colorRamps:[{fromColor:[0,97,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,34,0]}]},{id:"cyanToPurple_predefined",type:"multipart",colorRamps:[{fromColor:[0,245,245],toColor:[0,0,245]},{fromColor:[0,0,245],toColor:[245,0,245]}]},{id:"cyanLightToBlueDark_predefined",
type:"multipart",colorRamps:[{fromColor:[182,237,240],toColor:[31,131,224]},{fromColor:[31,131,224],toColor:[9,9,145]}]},{id:"distance_predefined",fromColor:[255,200,0],toColor:[0,0,255]},{id:"elevation1_predefined",type:"multipart",colorRamps:[{fromColor:[175,240,233],toColor:[255,255,179]},{fromColor:[255,255,179],toColor:[0,128,64]},{fromColor:[0,128,64],toColor:[252,186,3]},{fromColor:[252,186,3],toColor:[128,0,0]},{fromColor:[120,0,0],toColor:[105,48,13]},{fromColor:[105,48,13],toColor:[171,
171,171]},{fromColor:[171,171,171],toColor:[255,252,255]}]},{id:"elevation2_predefined",type:"multipart",colorRamps:[{fromColor:[118,219,211],toColor:[255,255,199]},{fromColor:[255,255,199],toColor:[255,255,128]},{fromColor:[255,255,128],toColor:[217,194,121]},{fromColor:[217,194,121],toColor:[135,96,38]},{fromColor:[135,96,38],toColor:[150,150,181]},{fromColor:[150,150,181],toColor:[181,150,181]},{fromColor:[181,150,181],toColor:[255,252,255]}]},{id:"errors_predefined",fromColor:[255,235,214],toColor:[196,
10,10]},{id:"grayLightToDark_predefined",fromColor:[219,219,219],toColor:[69,69,69]},{id:"greenBright_predefined",fromColor:[204,255,204],toColor:[14,204,14]},{id:"greenLightToDark_predefined",fromColor:[220,245,233],toColor:[34,102,51]},{id:"greenToBlue_predefined",type:"multipart",colorRamps:[{fromColor:[32,204,16],toColor:[0,242,242]},{fromColor:[0,242,242],toColor:[2,33,227]}]},{id:"orangeBright_predefined",fromColor:[255,235,204],toColor:[240,118,5]},{id:"orangeLightToDark_predefined",fromColor:[250,
233,212],toColor:[171,65,36]},{id:"partialSpectrum_predefined",type:"multipart",colorRamps:[{fromColor:[242,241,162],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]},{fromColor:[252,3,69],toColor:[176,7,237]},{fromColor:[176,7,237],toColor:[2,29,173]}]},{id:"partialSpectrum1Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[135,38,38],toColor:[240,149,12]},{fromColor:[240,149,12],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[74,80,181]},{fromColor:[74,80,181],
toColor:[39,32,122]}]},{id:"partialSpectrum2Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[115,77,42],toColor:[201,137,52]},{fromColor:[201,137,52],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[91,63,176]},{fromColor:[91,63,176],toColor:[81,13,97]}]},{id:"pinkToYellowGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[158,30,113],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[99,110,45]}]},{id:"pinkToYellowGreenDivergingDark_predefined",type:"multipart",
colorRamps:[{fromColor:[97,47,73],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[22,59,15]}]},{id:"precipitation_predefined",type:"multipart",colorRamps:[{fromColor:[194,82,60],toColor:[237,161,19]},{fromColor:[237,161,19],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,219,0]},{fromColor:[0,219,0],toColor:[32,153,143]},{fromColor:[32,153,143],toColor:[11,44,122]}]},{id:"prediction_predefined",type:"multipart",colorRamps:[{fromColor:[40,146,199],toColor:[250,250,100]},{fromColor:[250,
250,100],toColor:[232,16,20]}]},{id:"purpleBright_predefined",fromColor:[255,204,255],toColor:[199,0,199]},{id:"purpleToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[77,32,150],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[20,122,11]}]},{id:"purpleToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[67,14,89],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[24,79,15]}]},{id:"purpleBlueBright_predefined",fromColor:[223,184,230],toColor:[112,
12,242]},{id:"purpleBlueLightToDark_predefined",fromColor:[229,213,242],toColor:[93,44,112]},{id:"purpleRedBright_predefined",fromColor:[255,204,225],toColor:[199,0,99]},{id:"purpleRedLightToDark_predefined",fromColor:[250,215,246],toColor:[143,17,57]},{id:"redBright_predefined",fromColor:[255,204,204],toColor:[219,0,0]},{id:"redLightToDark_predefined",fromColor:[255,224,224],toColor:[143,10,10]},{id:"redToBlueDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[196,69,57],toColor:[255,
255,191]},{fromColor:[255,255,191],toColor:[48,95,207]}]},{id:"redToBlueDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[107,13,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[13,53,97]}]},{id:"redToGreen_predefined",type:"multipart",colorRamps:[{fromColor:[245,0,0],toColor:[245,245,0]},{fromColor:[245,245,0],toColor:[0,245,0]}]},{id:"redToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[186,20,20],toColor:[255,255,191]},{fromColor:[255,255,
191],toColor:[54,145,33]}]},{id:"redToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,21,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[16,69,16]}]},{id:"slope_predefined",type:"multipart",colorRamps:[{fromColor:[56,168,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]},{id:"spectrumFullBright_predefined",type:"multipart",colorRamps:[{fromColor:[255,0,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,255,255]},{fromColor:[0,255,255],
toColor:[0,0,255]}]},{id:"spectrumFullDark_predefined",type:"multipart",colorRamps:[{fromColor:[153,0,0],toColor:[153,153,0]},{fromColor:[153,153,0],toColor:[0,153,153]},{fromColor:[0,153,153],toColor:[0,0,153]}]},{id:"spectrumFullLight_predefined",type:"multipart",colorRamps:[{fromColor:[255,153,153],toColor:[255,255,153]},{fromColor:[255,255,153],toColor:[153,255,255]},{fromColor:[153,255,255],toColor:[153,153,255]}]},{id:"surface_predefined",type:"multipart",colorRamps:[{fromColor:[112,153,89],
toColor:[242,238,162]},{fromColor:[242,238,162],toColor:[242,206,133]},{fromColor:[242,206,133],toColor:[194,140,124]},{fromColor:[194,140,124],toColor:[255,242,255]}]},{id:"temperature_predefined",type:"multipart",colorRamps:[{fromColor:[255,252,255],toColor:[255,0,255]},{fromColor:[255,0,255],toColor:[0,0,255]},{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,255,0]},{fromColor:[0,255,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,128,0]},{fromColor:[255,
128,0],toColor:[128,0,0]}]},{id:"whiteToBlack_predefined",fromColor:[255,255,255],toColor:[0,0,0]},{id:"yellowToDarkRed_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[242,167,46]},{fromColor:[242,167,46],toColor:[107,0,0]}]},{id:"yellowToGreenToDarkBlue_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[56,224,9]},{fromColor:[56,224,9],toColor:[26,147,171]},{fromColor:[26,147,171],toColor:[12,16,120]}]},{id:"yellowToRed_predefined",fromColor:[245,
245,0],toColor:[255,0,0]},{id:"yellowGreenBright_predefined",fromColor:[236,252,204],toColor:[157,204,16]},{id:"yellowGreenLightToDark_predefined",fromColor:[215,240,175],toColor:[96,107,45]}],I={aspect_predefined:"Aspect",blackToWhite_predefined:"Black to White",blueBright_predefined:"Blue Bright",blueLightToDark_predefined:"Blue Light to Dark",blueGreenBright_predefined:"Blue-Green Bright",blueGreenLightToDark_predefined:"Blue-Green Light to Dark",brownLightToDark_predefined:"Brown Light to Dark",
brownToBlueGreenDivergingBright_predefined:"Brown to Blue Green Diverging, Bright",brownToBlueGreenDivergingDark_predefined:"Brown to Blue Green Diverging, Dark",coefficientBias_predefined:"Coefficient Bias",coldToHotDiverging_predefined:"Cold to Hot Diverging",conditionNumber_predefined:"Condition Number",cyanToPurple_predefined:"Cyan to Purple",cyanLightToBlueDark_predefined:"Cyan-Light to Blue-Dark",distance_predefined:"Distance",elevation1_predefined:"Elevation #1",elevation2_predefined:"Elevation #2",
errors_predefined:"Errors",grayLightToDark_predefined:"Gray Light to Dark",greenBright_predefined:"Green Bright",greenLightToDark_predefined:"Green Light to Dark",greenToBlue_predefined:"Green to Blue",orangeBright_predefined:"Orange Bright",orangeLightToDark_predefined:"Orange Light to Dark",partialSpectrum_predefined:"Partial Spectrum",partialSpectrum1Diverging_predefined:"Partial Spectrum 1 Diverging",partialSpectrum2Diverging_predefined:"Partial Spectrum 2 Diverging",pinkToYellowGreenDivergingBright_predefined:"Pink to YellowGreen Diverging, Bright",
pinkToYellowGreenDivergingDark_predefined:"Pink to YellowGreen Diverging, Dark",precipitation_predefined:"Precipitation",prediction_predefined:"Prediction",purpleBright_predefined:"Purple Bright",purpleToGreenDivergingBright_predefined:"Purple to Green Diverging, Bright",purpleToGreenDivergingDark_predefined:"Purple to Green Diverging, Dark",purpleBlueBright_predefined:"Purple-Blue Bright",purpleBlueLightToDark_predefined:"Purple-Blue Light to Dark",purpleRedBright_predefined:"Purple-Red Bright",
purpleRedLightToDark_predefined:"Purple-Red Light to Dark",redBright_predefined:"Red Bright",redLightToDark_predefined:"Red Light to Dark",redToBlueDivergingBright_predefined:"Red to Blue Diverging, Bright",redToBlueDivergingDark_predefined:"Red to Blue Diverging, Dark",redToGreen_predefined:"Red to Green",redToGreenDivergingBright_predefined:"Red to Green Diverging, Bright",redToGreenDivergingDark_predefined:"Red to Green Diverging, Dark",slope_predefined:"Slope",spectrumFullBright_predefined:"Spectrum-Full Bright",
spectrumFullDark_predefined:"Spectrum-Full Dark",spectrumFullLight_predefined:"Spectrum-Full Light",surface_predefined:"Surface",temperature_predefined:"Temperature",whiteToBlack_predefined:"White to Black",yellowToDarkRed_predefined:"Yellow to Dark Red",yellowToGreenToDarkBlue_predefined:"Yellow to Green to Dark Blue",yellowToRed_predefined:"Yellow to Red",yellowGreenBright_predefined:"Yellow-Green Bright",yellowGreenLightToDark_predefined:"Yellow-Green Light to Dark"};U.PREDEFINED_COLOR_RAMP_NAME_MAP=
I;U.PREDEFINED_JSON_COLOR_RAMPS=J;U.convertColorRampToColormap=function(S,F,L=!1){if(S&&F&&!(1>F)){var v="toJSON"in S?S.toJSON():S,z="multipart"===v.type?v.colorRamps.length:1;S=[];var g=[],n,k,w,q=0;if(1===F){var p="multipart"===v.type?v.colorRamps[0].fromColor:v.fromColor;g.push([0].concat(p));return g}for(let r=0;r<z;r++)S[r]={start:null,end:null},S[r].start=q,S[r].end=q+1/z,q=S[r].end;for(let r=0;r<F;r++){var x=r/(F-1);S.forEach((m,f)=>{if(x>=m.start&&(x<m.end||r===F-1&&f===z-1)){w=(x-m.start)/
(m.end-m.start);"multipart"===v.type?(p=v.colorRamps[f].fromColor,n=v.colorRamps[f].toColor):(p=v.fromColor,n=v.toColor);if(0===r)g.push([r].concat(p.slice(0,3)));else if(r===F-1)g.push([r].concat(n.slice(0,3)));else{var C={r:n[0],g:n[1],b:n[2]};m=w;f=A.toLAB({r:p[0],g:p[1],b:p[2]});C=A.toLAB(C);k=A.toRGB({l:f.l*(1-m)+m*C.l,a:f.a*(1-m)+m*C.a,b:f.b*(1-m)+m*C.b});g.push([r,k.r,k.g,k.b])}m=null!=p[3]?1<p[3]?p[3]/255:p[3]:1;f=null!=n[3]?1<n[3]?n[3]/255:n[3]:1;L&&g[r].push(Math.min(255,Math.round(255*
(m*(1-w)+f*w))))}})}return g}};U.getColorRampId=y;U.getColorRampName=function(S){return(S=y(S))?I[S]:null};Object.defineProperty(U,"__esModule",{value:!0})})},"esri/core/colorUtils":function(){define(["exports"],function(U){function H(L,v){const z=[];let g,n;if(L[0].length!==v.length)throw"dimensions do not match";const k=L.length,w=L[0].length;let q=0;for(g=0;g<k;g++){for(n=q=0;n<w;n++)q+=L[g][n]*v[n];z.push(q)}return z}function A(L){L=[L.r/255,L.g/255,L.b/255].map(v=>.04045>=v?v/12.92:((v+.055)/
1.055)**2.4);L=H(S,L);return{x:100*L[0],y:100*L[1],z:100*L[2]}}function aa(L){L=H(F,[L.x/100,L.y/100,L.z/100]).map(v=>Math.min(1,Math.max(.0031308>=v?12.92*v:1.055*v**(1/2.4)-.055,0)));return{r:Math.round(255*L[0]),g:Math.round(255*L[1]),b:Math.round(255*L[2])}}function y(L){L=[L.x/95.047,L.y/100,L.z/108.883].map(v=>v>(6/29)**3?v**(1/3):1/3*(29/6)**2*v+4/29);return{l:116*L[1]-16,a:500*(L[0]-L[1]),b:200*(L[1]-L[2])}}function J(L){const v=L.l;L=[(v+16)/116+L.a/500,(v+16)/116,(v+16)/116-L.b/200].map(z=>
z>6/29?z**3:3*(6/29)**2*(z-4/29));return{x:95.047*L[0],y:100*L[1],z:108.883*L[2]}}function I(L){if("r"in L&&"g"in L&&"b"in L)return L;if("l"in L&&"c"in L&&"h"in L){var v=L.c;var z=L.h;v={l:L.l,a:v*Math.cos(z),b:v*Math.sin(z)};return aa(J(v))}if("l"in L&&"a"in L&&"b"in L)return aa(J(L));if("x"in L&&"y"in L&&"z"in L)return aa(L);if("h"in L&&"s"in L&&"v"in L){{z=(L.h+360)%360/60;v=L.v/100*255;L=L.s/100*v;const g=L*(1-Math.abs(z%2-1));switch(Math.floor(z)){case 0:z={r:L,g,b:0};break;case 1:z={r:g,g:L,
b:0};break;case 2:z={r:0,g:L,b:g};break;case 3:z={r:0,g,b:L};break;case 4:z={r:g,g:0,b:L};break;case 5:case 6:z={r:L,g:0,b:g};break;default:z={r:0,g:0,b:0}}z.r=Math.round(z.r+v-L);z.g=Math.round(z.g+v-L);z.b=Math.round(z.b+v-L);v=z}return v}return L}const S=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],F=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];U.darken=function(L,v){L=y(A(L));L.l*=1-v;return aa(J(L))};U.toHSV=function(L){if("h"in L&&"s"in L&&"v"in L)return L;
var v=I(L);{L=v.r;const z=v.g,g=v.b;v=Math.max(L,z,g);const n=v-Math.min(L,z,g);L=0===n?0:v===L?(z-g)/n%6:v===z?(g-L)/n+2:(L-z)/n+4;0>L&&(L+=6);L={h:60*L,s:100*(0===n?0:n/v),v:100/255*v}}return L};U.toLAB=function(L){return"l"in L&&"a"in L&&"b"in L?L:y(A(I(L)))};U.toLCH=function(L){if(!("l"in L&&"c"in L&&"h"in L)){{var v=y(A(I(L)));L=v.l;var z=v.a;const g=v.b;v=Math.sqrt(z*z+g*g);z=Math.atan2(g,z);z=0<z?z:z+2*Math.PI;L={l:L,c:v,h:z}}}return L};U.toRGB=I;U.toXYZ=function(L){return"x"in L&&"y"in L&&
"z"in L?L:A(I(L))};Object.defineProperty(U,"__esModule",{value:!0})})},"esri/renderers/RasterShadedReliefRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/lang ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/JSONSupport ../tasks/support/colorRamps".split(" "),
function(U,H,A,aa,y,J,I,S,F,L,v,z,g,n,k){var w;A=w=function(q){function p(r){r=q.call(this,r)||this;r.altitude=45;r.azimuth=315;r.colorRamp=null;r.hillshadeType="multi-directional";r.pixelSizePower=.664;r.pixelSizeFactor=.024;r.scalingType="none";r.type="raster-shaded-relief";r.zFactor=1;return r}U._inheritsLoose(p,q);var x=p.prototype;x.readColorRamp=function(r){return k.fromJSON(r)};x.clone=function(){return new w({hillshadeType:this.hillshadeType,altitude:this.altitude,azimuth:this.azimuth,zFactor:this.zFactor,
scalingType:this.scalingType,pixelSizeFactor:this.pixelSizeFactor,pixelSizePower:this.pixelSizePower,colorRamp:aa.clone(this.colorRamp)})};return p}(n.JSONSupport);H.__decorate([I.property({type:Number,json:{write:!0}})],A.prototype,"altitude",void 0);H.__decorate([I.property({type:Number,json:{write:!0}})],A.prototype,"azimuth",void 0);H.__decorate([I.property({types:k.types,json:{write:!0}})],A.prototype,"colorRamp",void 0);H.__decorate([F.reader("colorRamp")],A.prototype,"readColorRamp",null);
H.__decorate([I.property({type:["traditional","multi-directional"],json:{write:!0}})],A.prototype,"hillshadeType",void 0);H.__decorate([I.property({type:Number,json:{write:!0}})],A.prototype,"pixelSizePower",void 0);H.__decorate([I.property({type:Number,json:{write:!0}})],A.prototype,"pixelSizeFactor",void 0);H.__decorate([I.property({type:["none","adjusted"],json:{write:!0}})],A.prototype,"scalingType",void 0);H.__decorate([S.enumeration({rasterShadedRelief:"raster-shaded-relief"})],A.prototype,
"type",void 0);H.__decorate([I.property({type:Number,json:{write:!0}})],A.prototype,"zFactor",void 0);return A=w=H.__decorate([L.subclass("esri.renderers.RasterShadedReliefRenderer")],A)})},"esri/renderers/RasterStretchRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/lang ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/JSONSupport ../tasks/support/colorRamps ./support/stretchRendererUtils".split(" "),
function(U,H,A,aa,y,J,I,S,F,L,v,z,g,n,k,w,q){var p;A=p=function(x){function r(f){f=x.call(this,f)||this;f.colorRamp=null;f.computeGamma=!1;f.dynamicRangeAdjustment=!1;f.gamma=[];f.maxPercent=null;f.minPercent=null;f.numberOfStandardDeviations=null;f.outputMax=null;f.outputMin=null;f.sigmoidStrengthLevel=null;f.statistics=[];f.histograms=null;f.useGamma=!1;f.stretchType="none";f.type="raster-stretch";return f}U._inheritsLoose(r,x);var m=r.prototype;m.readColorRamp=function(f){if(f)return w.fromJSON(f)};
m.writeStatistics=function(f,C,E){var t;null!=(t=f)&&t.length&&(Array.isArray(f[0])||(f=f.map(b=>[b.min,b.max,b.avg,b.stddev])),C[E]=f)};m.readStretchType=function(f,C){f=C.stretchType;"number"===typeof f&&(f=q.stretchTypeFunctionEnum[f]);return q.stretchTypeJSONDict.read(f)};m.clone=function(){return new p({stretchType:this.stretchType,outputMin:this.outputMin,outputMax:this.outputMax,useGamma:this.useGamma,computeGamma:this.computeGamma,statistics:aa.clone(this.statistics),gamma:aa.clone(this.gamma),
sigmoidStrengthLevel:this.sigmoidStrengthLevel,numberOfStandardDeviations:this.numberOfStandardDeviations,minPercent:this.minPercent,maxPercent:this.maxPercent,colorRamp:aa.clone(this.colorRamp),histograms:aa.clone(this.histograms),dynamicRangeAdjustment:this.dynamicRangeAdjustment})};return r}(k.JSONSupport);H.__decorate([I.property({types:w.types,json:{write:!0}})],A.prototype,"colorRamp",void 0);H.__decorate([F.reader("colorRamp")],A.prototype,"readColorRamp",null);H.__decorate([I.property({type:Boolean,
json:{write:!0}})],A.prototype,"computeGamma",void 0);H.__decorate([I.property({type:Boolean,json:{write:{target:"dra"},read:{source:"dra"}}})],A.prototype,"dynamicRangeAdjustment",void 0);H.__decorate([I.property({type:[Number],json:{write:!0}})],A.prototype,"gamma",void 0);H.__decorate([I.property({type:Number,json:{write:!0}})],A.prototype,"maxPercent",void 0);H.__decorate([I.property({type:Number,json:{write:!0}})],A.prototype,"minPercent",void 0);H.__decorate([I.property({type:J.Integer,json:{write:!0}})],
A.prototype,"numberOfStandardDeviations",void 0);H.__decorate([I.property({type:Number,json:{read:{source:"max"},write:{target:"max"}}})],A.prototype,"outputMax",void 0);H.__decorate([I.property({type:Number,json:{read:{source:"min"},write:{target:"min"}}})],A.prototype,"outputMin",void 0);H.__decorate([I.property({type:Number,json:{write:!0}})],A.prototype,"sigmoidStrengthLevel",void 0);H.__decorate([I.property({json:{type:[[Number]],write:!0}})],A.prototype,"statistics",void 0);H.__decorate([I.property()],
A.prototype,"histograms",void 0);H.__decorate([v.writer("statistics")],A.prototype,"writeStatistics",null);H.__decorate([I.property({type:Boolean,json:{write:!0}})],A.prototype,"useGamma",void 0);H.__decorate([I.property({type:q.stretchTypeJSONDict.apiValues,json:{type:q.stretchTypeJSONDict.jsonValues,write:q.stretchTypeJSONDict.write}})],A.prototype,"stretchType",void 0);H.__decorate([F.reader("stretchType",["stretchType"])],A.prototype,"readStretchType",null);H.__decorate([S.enumeration({rasterStretch:"raster-stretch"})],
A.prototype,"type",void 0);return A=p=H.__decorate([L.subclass("esri.renderers.RasterStretchRenderer")],A)})},"esri/renderers/support/stretchRendererUtils":function(){define(["exports","../../core/jsonMap"],function(U,H){H=new H.JSONMap({none:"none",standardDeviation:"standard-deviation",histogramEqualization:"histogram-equalization",minMax:"min-max",percentClip:"percent-clip",sigmoid:"sigmoid"});U.stretchTypeFunctionEnum={0:"none",3:"standardDeviation",4:"histogramEqualization",5:"minMax",6:"percentClip",
9:"sigmoid"};U.stretchTypeJSONDict=H;Object.defineProperty(U,"__esModule",{value:!0})})},"esri/renderers/VectorFieldRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/lang ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/JSONSupport ../geometry/Point ../geometry ../Color ../symbols/SimpleLineSymbol ../symbols/PictureMarkerSymbol ../symbols/SimpleMarkerSymbol ../symbols ../Graphic ./visualVariables/RotationVariable ./visualVariables/support/visualVariableUtils ./visualVariables/SizeVariable ./mixins/VisualVariablesMixin ./support/ClassBreakInfo ./ClassBreaksRenderer ../geometry/support/normalizeUtils ../layers/support/rasterFunctions/vectorFieldUtils ../symbols/support/utils".split(" "),
function(U,H,A,aa,y,J,I,S,F,L,v,z,g,n,k,w,q,p,x,r,m,f,C,E,t,b,d,u,e,a,h,c){var l;const D=new Set(["esriMetersPerSecond","esriKilometersPerHour","esriKnots","esriFeetPerSecond","esriMilesPerHour"]),N=new S.JSONMap({esriMetersPerSecond:"meter-per-second",esriKilometersPerHour:"kilometer-per-hour",esriKnots:"knots",esriFeetPerSecond:"feet-per-second",esriMilesPerHour:"mile-per-hour"});A=new S.JSONMap({beaufort_ft:"beaufort-ft",beaufort_km:"beaufort-km",beaufort_kn:"beaufort-kn",beaufort_m:"beaufort-m",
beaufort_mi:"beaufort-mi",classified_arrow:"classified-arrow",ocean_current_kn:"ocean-current-kn",ocean_current_m:"ocean-current-m",simple_scalar:"simple-scalar",single_arrow:"single-arrow",wind_speed:"wind-barb"});S=new S.JSONMap({flow_from:"flow-from",flow_to:"flow-to"});k=l=function(Q){function M(P){P=Q.call(this,P)||this;P.attributeField="Magnitude";P.flowRepresentation="flow-from";P.rotationType="arithmetic";P.style="single-arrow";P.symbolTileSize=50;P.type="vector-field";return P}U._inheritsLoose(M,
Q);var T=M.prototype;T.readInputUnit=function(P,K){return D.has(P)?N.fromJSON(P):null};T.readOutputUnit=function(P,K){return D.has(P)?N.fromJSON(P):null};T.clone=function(){return new l({attributeField:this.attributeField,flowRepresentation:this.flowRepresentation,rotationType:this.rotationType,style:this.style,visualVariables:aa.clone(this.visualVariables),inputUnit:this.inputUnit,outputUnit:this.outputUnit})};T.getGraphicsFromPixelData=async function(P,K=!1){const G=[];var O=h.getUnitConversionFactor(this.inputUnit,
this.outputUnit);K=K?h.convertVectorFieldData(P.pixelBlock,"vector-uv",this.rotationType,O):h.convertVectorFieldUnit(P.pixelBlock,"vector-magdir",O);P=P.extent;O=K.mask&&0<K.mask.length;let X=0;const V=(P.xmax-P.xmin)/K.width,Z=(P.ymax-P.ymin)/K.height;for(let ia=0;ia<K.height;ia++)for(let ha=0;ha<K.width;ha++,X++){var Y=[P.xmin+ha*V+V/2,P.ymax-ia*Z-Z/2];if((!O||K.mask[X])&&Y&&2===Y.length){var fa={Magnitude:K.pixels[0][X],Direction:K.pixels[1][X]};Y=new w({x:Y[0],y:Y[1],spatialReference:P.spatialReference});
Y=(await a.normalizeCentralMeridian(Y))[0];fa=new C({geometry:{type:"point",x:Y.x,y:Y.y,spatialReference:P.spatialReference},attributes:fa});fa.symbol=this._getVisualVariablesAppliedSymbol(fa);G.push(fa)}}return G};T.getSymbol=function(P,K){};T.getSymbolAsync=async function(P,K){};T.getSymbols=function(){return[]};T.getClassBreakInfos=function(){var P;return null==(P=this.styleRenderer)?void 0:P.classBreakInfos};T.getDefaultSymbol=function(){var P;return null==(P=this.styleRenderer)?void 0:P.defaultSymbol};
T._getDefaultSymbol=function(P){return new m({path:"M14,32 14,18 9,23 16,3 22,23 17,18 17,32 z",outline:new x({width:0}),size:20,color:P||new p([0,92,230])})};T._getVisualVariablesAppliedSymbol=function(P){if(P){var K=this.styleRenderer&&this.styleRenderer.getSymbol(P);K=K.clone();var G=this.sizeVariables,O=this.rotationVariables;G&&G.length&&this.sizeVariables.forEach(X=>c.applySizesToSymbol(K,t.getAllSizes([X],P)));O&&O.length&&(G=P.attributes.Direction,P.attributes.Direction="flow-from"===this.flowRepresentation?
G:G+180,this.rotationVariables.forEach(X=>c.applyRotationToSymbol(K,t.getRotationAngle(X,P),X.axis)));return K}};T._createStyleRenderer=function(P){let K={defaultSymbol:this._getDefaultSymbol(),classBreakInfos:[]};switch(P){case "single-arrow":K=this._createSingleArrowRenderer();break;case "beaufort-kn":K=this._createBeaufortKnotsRenderer();break;case "beaufort-m":K=this._createBeaufortMeterRenderer();break;case "beaufort-ft":K=this._createBeaufortFeetRenderer();break;case "beaufort-mi":K=this._createBeaufortMilesRenderer();
break;case "beaufort-km":K=this._createBeaufortKilometersRenderer();break;case "ocean-current-m":K=this._createCurrentMeterRenderer();break;case "ocean-current-kn":K=this._createCurrentKnotsRenderer();break;case "simple-scalar":K=this._createSimpleScalarRenderer();break;case "wind-barb":K=this._createWindBarbsRenderer();break;case "classified-arrow":K=this._createClassifiedArrowRenderer()}return new e(K)};T._createSingleArrowRenderer=function(){return{defaultSymbol:this._getDefaultSymbol()}};T._createBeaufortKnotsRenderer=
function(){const P=this._getDefaultSymbol(new p([214,47,39])),K=this._getClassBreaks([0,1,3,6,10,16,21,27,33,40,47,55,63],[[40,146,199],[89,162,186],[129,179,171],[160,194,155],[191,212,138],[218,230,119],[250,250,100],[252,213,83],[252,179,102],[250,141,52],[247,110,42],[240,71,29]]);return{defaultSymbol:P,classBreakInfos:K}};T._createBeaufortMeterRenderer=function(){const P=this._getDefaultSymbol(new p([214,47,39])),K=this._getClassBreaks([0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7],
[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:P,classBreakInfos:K}};T._createBeaufortFeetRenderer=function(){const P=this._getDefaultSymbol(new p([214,47,39]));var K=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];K=K.map(G=>3.28084*G);K=this._getClassBreaks(K,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,
191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:P,classBreakInfos:K}};T._createBeaufortMilesRenderer=function(){const P=this._getDefaultSymbol(new p([214,47,39]));var K=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];K=K.map(G=>2.23694*G);K=this._getClassBreaks(K,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:P,
classBreakInfos:K}};T._createBeaufortKilometersRenderer=function(){const P=this._getDefaultSymbol(new p([214,47,39]));var K=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];K=K.map(G=>3.6*G);K=this._getClassBreaks(K,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:P,classBreakInfos:K}};T._createCurrentMeterRenderer=function(){const P=this._getDefaultSymbol(new p([177,
177,177])),K=this._getClassBreaks([0,.5,1,1.5,2],[[78,26,153],[179,27,26],[202,128,26],[177,177,177]]);return{defaultSymbol:P,classBreakInfos:K}};T._createCurrentKnotsRenderer=function(){const P=this._getDefaultSymbol(new p([177,177,177])),K=this._getClassBreaks([0,.25,.5,1,1.5,2,2.5,3,3.5,4],[[0,0,0],[0,37,100],[78,26,153],[151,0,100],[179,27,26],[177,78,26],[202,128,26],[177,179,52],[177,177,177]]);return{defaultSymbol:P,classBreakInfos:K}};T._createClassifiedArrowRenderer=function(){var P;const K=
this._getDefaultSymbol(new p([56,168,0]));var G=[0,1E-6,3.5,7,10.5,14];if(null!=(P=this.sizeVariables)&&P.length){const O=this.sizeVariables[0].minDataValue;P=this.sizeVariables[0].maxDataValue;if(O&&P){const X=(P-O)/5;G=Array.from(Array(6).keys()).map(V=>O+X*V)}}G=this._getClassBreaks(G,[[56,168,0],[139,309,0],[255,255,0],[255,128,0],[255,0,0]]);return{defaultSymbol:K,classBreakInfos:G}};T._createSimpleScalarRenderer=function(){return{defaultSymbol:r.fromJSON({imageData:"iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAQAAABLVLlLAAAABGdBTUEAAYagMeiWXwAAAAJiS0dEAACqjSMyAAAACXBIWXMAAABIAAAASABGyWs+AAAC3ElEQVRIx9XXvW4cVRQH8N982btpsIREJECyiCXsxX4DKh6AliqGKCBBE2SlwlHgAbBD/AKmyEYUeQ1KahPZSZQvBCkQLTHZ7KGY8Xodz4w3a1NwbzVzz/znfJ//zbStVC5q3icKak9GAs2QIdDx3PtW/S011NW3p+M5Eomh11ipTIKe6+4LQzHaQ+G+63pIZNJJQXMpljwTwj1brpgx5w1zZlyx5Z4QnllEIm2xeeSUHBf0hV0bejo1Uh09G3aFvgXk7cCJFBc9EdaRVuHJJaOdKyTV2TVhYLMduNR0Q9gxL5GaaTDw8GzejrDRBpxWoGsySRW0dttKuattwNkIlFw2YXgzOdYq4Ox49PlM+JrKd5OusjTWhBuVxUfMX/KXXZ3WEmkuqa67wspR4BTbwtKr/5u4fFgStse/T7EifFPnnYl9zPq4vmUOPrRndgoHjDti1gOPqlyXoifcRNGQzUd31lDyfHmob1Gp35vSr+P6vilcQ5Egtyd8YF/ySg9NhPM+9M/IOaHwp5+PSZayXTvCogEUwlatC3J8LLwYtcWB8EuDXQVuCkV5/B4eNHb7wGBs87LBDS+xjdVSn09wq1G8dFM+9tSUhIGneLvUdniKxKpTYljCpu3j7rVWlHj/P23v4NPGUEyeCQnexe9lJjzEQqMjJs+EzNAX6B98dBZVRmroJx95x/A/6gln18EyfCUsl+qdXb/tjvfbw+mwforpUOBz4XLVoBwAn3aWnfeH246NyBXhrq7TTN5lNSP9RkU+puUJm3W2Tsdq0nZWM07srk7MwQrZSRysjjGWBLRJNsNbfj2JMR4AbxpU1XLAb9Mxfpsq5EjMuuiR8L0JiHOOBX3hiUvOmavN0nMueSzcceFk0BK4pMqLo7vDD1Z0qrtDx7Itt4Xwm9UqbMmk8S0Dtuzb2pvOU99Z1nLTOfleNmvfZfP2pYZmPfajwosKdDBNpacNpVGGsWX9CyDI8Xq/Sj6QAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE0LTExLTEwVDAzOjE3OjU4LTA1OjAwF+tHyQAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxNC0xMS0xMFQwMzoxNzo1OC0wNTowMGa2/3UAAAAASUVORK5CYII\x3d",
height:20,width:20,type:"esriPMS",angle:0})}};T._createWindBarbsRenderer=function(){const P=Array.from(Array(31).keys()).map(X=>5*X),K=[{range:"0-5",path:"M20 20 M5 20 A15 15 0 1 0 35 20 A15 15 0 1 0 5 20 M20 20 M10 20 A10 10 0 1 0 30 20 A10 10 0 1 0 10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTIwIDIwIE01IDIwIEExNSAxNSAwIDEgMCAzNSAyMCBBMTUgMTUgMCAxIDAgNSAyMCBNMjAgMjAgTTEwIDIwIEExMCAxMCAwIDEgMCAzMCAyMCBBMTAgMTAgMCAxIDAgMTAgMjAiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"5-10",path:"M25 0 L25 40 M25 35 L17.5 37.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNyA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTTI1IDM1IEwxNy41IDM3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"10-15",path:"M25 0 L25 40 L10 45 L25 40",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNyA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"15-20",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L17.5 37.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjEyIDAgMTUgNDUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxNy41IDM3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"20-25",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},
{range:"25-30",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L17.5 32.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIEwyNSAzNSBNMjUgMzAgTDE3LjUgMzIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"30-35",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"35-40",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"40-45",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"45-50",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"50-55",path:"M25 0 L25 40 L10 40 L25 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"55-60",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L17.5 32.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxNy41IDMyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"60-65",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"65-70",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"70-75",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"75-80",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"80-85",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"85-90",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L17.5 17.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxNy41IDE3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"90-95",
path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"95-100",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20 L25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCBMMjUgMTUgTTI1IDEwIEwxNy41IDEyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"100-105",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"105-110",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDE3LjUgMjcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"110-115",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},
{range:"115-120",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDE3LjUgMjIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"120-125",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"125-130",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L17.5 17.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDE3LjUgMTcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"130-135",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"135-140",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDE3LjUgMTIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"140-145",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"145-150",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IE0yNSAxMCBNMjUgNSBMMTcuNSA3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"}],G=r.fromJSON({imageData:"iVBORw0KGgoAAAANSUhEUgAAACgAAAApCAQAAADtq6NDAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAJiS0dEAP+Hj8y/AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAEY0lEQVRIx5XXWWxWRRQH8N+d+31tUdGAVjGglYJABFEBY91jfDAg7piYaFTccA++uMQEFRcSXlATtxiXqMQt4G4iisYl0ai4sIQYtVFZ1KIFKdTS0l4f7vRCS5fPebozc+bM/2z/Mzcx0AgSiUxXnKfIdMn875FIhX53U2n/B/s+kKM4UINTjTBZImixxnrv+9a2iL6zEoUBXcoudrWj/OtHm3wt02lfU9Qao9OnHvIhgmww84MEl1qnxfNmGrqHxAizLdPpC6chGcAxKGGcL+30gOERf1BSpUqVslQSV8d5ReZFe8VQ9avufJn31cWwlJV7iafKStGOE/1qvfH9qUxxu8ydUdmuSKbGO8YUdT2inKLG69pM70tliktl5qIkCAJGmusDG7Vqsc0WjZa4UBlBiA5YZIcjYzB7qDtH5kaUJFLs7RGZTZ42W4PRRmtwvbdt1+wGiaS4drEtDttdZYIDNVuAclR3vA3+dI3qHqmVSy7U6Tv1MScCPvPR7nIpFlsdCy3FdTLPGhK92e2CUITjMJ9ocwKxnsZqc3O3JwMma3d6UVLnyVxB4aXemZqvPqLdpJhW3KVVbY4yYImPo6M5Urv50fj+0z/FG9YaEiENs8UtMfXUaTeTePNHlhXfA1UU+2lyD1Il3Gtt9+adfpNG7dNlpg2U/T3KYLZ2dUWFdTgp3/rQ4sK973qnInV5TIf40x3dhvrJPBiqyWUo4wAtLqhQYS71qK+QKOFRywmGK/kpikzV6WMKhh58vGWs4TIJNjiEYLIuP8Tt4/zmLyqk+AyrJSbF+Qq1DgqRUPMxyl+9q3IQhX/rMCJ6tEunriDs1oSyQZKlr9AkhT2ZIARbJfaJS1vtVbHB+Rgi0RK/y1q1BWsEEyLoz40xtGKcARPVWB1BTPO7f4LNtpkUl1aoMbViLyZo0GRjPD3BxnxjqXeLYlvhqYrzMMG3HoyJXa3JjfnGlbYYFlP7Jh3qKsKY4hQ7TY0nG+xwRL61n63mxHtqNHosigyMLmClNwvuecFnOZB88nNBDzNkzhxEZaKMBVoKapggMzvHHXBEpNSSFAvtcFRsVn0bW8LlMmcXs+c0Kne3gRR32+zg4uXwjC6zit6Wt4a8LXVfcp/MtQXHn2ynGbuCmb8GvvFeJLEE82ReU9/n6+dkq2x3buG9Wn94smcgAw631RPR7BTH+kbmHReZoEpOdEe7zWqZl40s0JWs9Hmv7hjBHqPDwsjGKVJnWWqjbdZp1KhJi0aPmxYZsIRhlttgeF+Jlke41QcOQKoqilSb6HJzSvNG3G/UoWnxwsmt+sVaYwd63dRbqdnMyCPVeyRPvpYgdavM22oGKoMUVRbJfOWMwidJ8Zzb1UvmWK/VVUXzHaTjjrVYh1897HT7xxYEVUaa5SWb/WO+YUWa9SrwvigzM8YlzlYv2GSdVCYxxlBtVnnFq5olwp5/BEk/OLsf5LUmG2+inRJdVvjZ97ZH9/zP34ug1O91pf4p+D+JYBpvrKxfbwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNC0xMS0xMFQwMzoxMjowOS0wNTowMB9ViV0AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTQtMTEtMTBUMDM6MTI6MDktMDU6MDBuCDHhAAAAAElFTkSuQmCC",
height:20,width:20,type:"esriPMS",angle:0}),O=P.map((X,V)=>{if(V!==P.length-1)if(0===V)var Z={minValue:X,maxValue:P[V+1],symbol:G};else Z=r.fromJSON({type:"esriPMS",imageData:K[V].imageData,contentType:"image/svg+xml",height:32,width:32,angle:0}),Z={minValue:X,maxValue:P[V+1],symbol:Z};return new u(Z)});return{defaultSymbol:G,classBreakInfos:O}};T._getClassBreaks=function(P,K){return K.map((G,O)=>new u({minValue:P[O],maxValue:P[O+1],symbol:this._getDefaultSymbol(new p(G))}))};U._createClass(M,[{key:"styleRenderer",
get:function(){const P=this.attributeField,K=this._createStyleRenderer(this.style);K.field=P;return K}},{key:"sizeVariables",get:function(){const P=[];if(this.visualVariables)for(var K of this.visualVariables)"size"===K.type&&P.push(K);0===P.length&&(K=new b({minSize:.2*this.symbolTileSize,maxSize:.8*this.symbolTileSize}),this.visualVariables?this.visualVariables.push(K):this._set("visualVariables",[K]),P.push(K));return P}},{key:"rotationVariables",get:function(){const P=[];if(this.visualVariables)for(var K of this.visualVariables)"rotation"===
K.type&&P.push(K);0===P.length&&(K=new E({field:"Direction",rotationType:this.rotationType}),this.visualVariables?this.visualVariables.push(K):this._set("visualVariables",[K]),P.push(K));return P}}]);return M}(d.VisualVariablesMixin(k.JSONSupport));H.__decorate([I.property({type:String,json:{write:!0}})],k.prototype,"attributeField",void 0);H.__decorate([I.property({type:S.apiValues,json:{type:S.jsonValues,read:{reader:S.read},write:{writer:S.write}}})],k.prototype,"flowRepresentation",void 0);H.__decorate([I.property({type:["geographic",
"arithmetic"],json:{write:!0}})],k.prototype,"rotationType",void 0);H.__decorate([I.property({type:A.apiValues,json:{type:A.jsonValues,read:{reader:A.read},write:{writer:A.write}}})],k.prototype,"style",void 0);H.__decorate([I.property({json:{write:!0}})],k.prototype,"symbolTileSize",void 0);H.__decorate([I.property({type:N.apiValues,json:{type:N.jsonValues,write:{writer:N.write}}})],k.prototype,"inputUnit",void 0);H.__decorate([L.reader("inputUnit")],k.prototype,"readInputUnit",null);H.__decorate([I.property({type:N.apiValues,
json:{type:N.jsonValues,read:{reader:N.read},write:{writer:N.write}}})],k.prototype,"outputUnit",void 0);H.__decorate([L.reader("outputUnit")],k.prototype,"readOutputUnit",null);H.__decorate([F.enumeration({vectorField:"vector-field"})],k.prototype,"type",void 0);H.__decorate([I.property({type:e})],k.prototype,"styleRenderer",null);H.__decorate([I.property({type:b})],k.prototype,"sizeVariables",null);H.__decorate([I.property({type:E})],k.prototype,"rotationVariables",null);return k=l=H.__decorate([v.subclass("esri.renderers.VectorFieldRenderer")],
k)})},"esri/layers/support/rasterFunctions/vectorFieldUtils":function(){define(["exports","../../../core/maybe","../PixelBlock"],function(U,H,A){function aa(F,L="geographic"){const [v,z]=F;F=Math.sqrt(v*v+z*z);let g=Math.atan2(z,v)*J;g=(360+g)%360;"geographic"===L&&(g=(450-g)%360);return[F,g]}function y(F,L="geographic"){let v=F[1];"geographic"===L&&(v=(450-v)%360);v%=360;F=F[0];return[F*Math.cos(v/J),F*Math.sin(v/J)]}const J=180/Math.PI,I=function(F){return F&&"esri.layers.support.PixelBlock"===
F.declaredClass&&F.pixels&&0<F.pixels.length},S=new Map;S.set("meter-per-second",1);S.set("kilometer-per-hour",.277778);S.set("knots",.514444);S.set("feet-per-second",.3048);S.set("mile-per-hour",.44704);U.convertVectorFieldData=function(F,L,v="geographic",z=1){if(!I(F))return F;const {pixels:g,width:n,height:k}=F;var w=n*k;const q=g[0],p=g[1],x=A.createEmptyBand(F.pixelType,w);w=A.createEmptyBand(F.pixelType,w);let r=0;for(let m=0;m<k;m++)for(let f=0;f<n;f++)"vector-uv"===L?([x[r],w[r]]=aa([q[r],
p[r]],v),x[r]*=z):([x[r],w[r]]=y([q[r],p[r]],v),x[r]*=z,w[r]*=z),r++;F=new A({pixelType:F.pixelType,width:F.width,height:F.height,mask:F.mask,validPixelCount:F.validPixelCount,maskIsAlpha:F.maskIsAlpha,pixels:[x,w]});F.updateStatistics();return F};U.convertVectorFieldUnit=function(F,L,v=1){if(1===v||!I(F))return F;F=F.clone();const {pixels:z,width:g,height:n}=F,k=z[0],w=z[1];let q=0;for(let p=0;p<n;p++)for(let x=0;x<g;x++)"vector-uv"===L?(k[q]*=v,w[q]*=v):k[q]*=v,q++;F.updateStatistics();return F};
U.getUnitConversionFactor=function(F,L){return S.get(F)/S.get(L)||1};U.isValidPixelBlock=I;U.snapImageToSymbolTile=function(F,L,v,z,g){if(!H.isSome(g)||!g.spatialReference.equals(F.spatialReference))return{extent:F,width:L,height:v};const n=g.xmin;g=g.ymax;z=Math.max(z||0,30);L=((F.xmax-F.xmin)/Math.ceil(1/z*L)+(F.ymax-F.ymin)/Math.ceil(1/z*v))/2;F.xmin=n+Math.floor((F.xmin-n)/L)*L;F.xmax=n+Math.ceil((F.xmax-n)/L)*L;F.ymin=g+Math.floor((F.ymin-g)/L)*L;F.ymax=g+Math.ceil((F.ymax-g)/L)*L;return{extent:F,
width:Math.round(F.width/L),height:Math.round(F.height/L)}};Object.defineProperty(U,"__esModule",{value:!0})})},"esri/layers/support/DimensionalDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/lang ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport".split(" "),
function(U,H,A,aa,y,J,I,S,F,L,v,z,g){var n;A=n=function(k){function w(q){q=k.call(this,q)||this;q.variableName=null;q.dimensionName=null;q.values=[];q.isSlice=!1;return q}U._inheritsLoose(w,k);w.prototype.clone=function(){return new n({variableName:this.variableName,dimensionName:this.dimensionName,values:aa.clone(this.values),isSlice:this.isSlice})};return w}(g.JSONSupport);H.__decorate([I.property({type:String,json:{write:!0}})],A.prototype,"variableName",void 0);H.__decorate([I.property({type:String,
json:{write:!0}})],A.prototype,"dimensionName",void 0);H.__decorate([I.property({type:J.types.array(J.types.oneOf([J.types.native(Number),J.types.array(J.types.native(Number))])),json:{write:!0}})],A.prototype,"values",void 0);H.__decorate([I.property({type:Boolean,json:{write:!0}})],A.prototype,"isSlice",void 0);return A=n=H.__decorate([F.subclass("esri.layers.support.DimensionalDefinition")],A)})},"esri/layers/support/RasterFunction":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/lang ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport".split(" "),
function(U,H,A,aa,y,J,I,S,F,L,v,z,g,n,k){var w;const q=new Set(["raster","raster2","dem","fillraster"]),p=new Set(["rasters"]),x=t=>t&&t.rasterFunction?E.fromJSON(t):t,r=t=>t&&t instanceof E?t.toJSON():t,m=t=>(null==t?void 0:t.functionName)&&!t.declaredClass,f=t=>m(t)?new E(t):t;var C;(function(t){t[t.MOSAIC=0]="MOSAIC";t[t.GROUP=1]="GROUP";t[t.ITEM=2]="ITEM"})(C||(C={}));let E=w=function(t){function b(u){u=t.call(this,u)||this;u.functionName=null;u.outputPixelType="unknown";u.variableName=null;u.description=
null;u.functionDefinition=null;u.thumbnail=null;return u}U._inheritsLoose(b,t);var d=b.prototype;d.readFunctionArguments=function(u,e){u=e.arguments||e.rasterFunctionArguments;if(null==u)var a=null;else{u=aa.clone(u);e={};for(a of Object.keys(u))q.has(a.toLowerCase())?e[a]=x(u[a]):p.has(a.toLowerCase())&&Array.isArray(u[a])?e[a]=u[a].map(x):e[a]=u[a];a=e}return a};d.writeFunctionArguments=function(u,e,a){const h={};for(const c of Object.keys(u))q.has(c.toLowerCase())?h[c]=r(u[c]):p.has(c.toLowerCase())&&
Array.isArray(u[c])?h[c]=u[c].map(r):h[c]=r(u[c]);this.functionDefinition?e.arguments=h:e[a]=h};d.readFunctionName=function(u,e){u=e.rasterFunctionInfos;const a=e.name;return a?a:u&&u.length&&"None"!==u[0].name?u[0].name:e.rasterFunction};d.writeFunctionName=function(u,e,a){this.functionDefinition?e.name=u:e[a]=u};d.readFunctionType=function(u){return C[u]};d.writeFunctionType=function(u,e,a){e[a]=C[u]};d.clone=function(){return new w({functionName:this.functionName,functionArguments:aa.clone(this.functionArguments),
outputPixelType:this.outputPixelType,variableName:this.variableName,description:this.description,functionType:this.functionType,functionDefinition:this.functionDefinition,thumbnail:this.thumbnail})};U._createClass(b,[{key:"functionArguments",set:function(u){if(u){const e=Object.keys(u);if(e.some(a=>q.has(a.toLowerCase())&&m(u[a]))||e.some(a=>p.has(a.toLowerCase())&&Array.isArray(u[a])&&u[a].some(h=>m(h)))){u=aa.clone(u);for(const a of e)q.has(a.toLowerCase())?u[a]=f(u[a]):p.has(a.toLowerCase())&&
Array.isArray(u[a])&&(u[a]=u[a].map(h=>f(h)))}}this._set("functionArguments",u)}}]);return b}(k.JSONSupport);H.__decorate([I.property({json:{type:Object,write:{target:"rasterFunctionArguments"}}})],E.prototype,"functionArguments",null);H.__decorate([F.reader("functionArguments",["rasterFunctionArguments","arguments"])],E.prototype,"readFunctionArguments",null);H.__decorate([v.writer("functionArguments")],E.prototype,"writeFunctionArguments",null);H.__decorate([I.property({json:{type:String,write:{target:"rasterFunction"}}})],
E.prototype,"functionName",void 0);H.__decorate([F.reader("functionName",["rasterFunction","rasterFunctionInfos","name"])],E.prototype,"readFunctionName",null);H.__decorate([v.writer("functionName")],E.prototype,"writeFunctionName",null);H.__decorate([S.enumeration({C128:"c128",C64:"c64",F32:"f32",F64:"f64",S16:"s16",S32:"s32",S8:"s8",U1:"u1",U16:"u16",U2:"u2",U32:"u32",U4:"u4",U8:"u8",UNKNOWN:"unknown"},{ignoreUnknown:!1}),I.property({json:{default:"unknown"}})],E.prototype,"outputPixelType",void 0);
H.__decorate([I.property({type:String,json:{read:!0,write:!0}})],E.prototype,"variableName",void 0);H.__decorate([I.property({type:String,json:{read:!0,write:!0,origins:{"web-document":{read:!1,write:!1}}}})],E.prototype,"description",void 0);H.__decorate([I.property({json:{origins:{"web-document":{read:!1,write:!1}}}})],E.prototype,"functionType",void 0);H.__decorate([F.reader("functionType")],E.prototype,"readFunctionType",null);H.__decorate([v.writer("functionType")],E.prototype,"writeFunctionType",
null);H.__decorate([I.property({type:Object,json:{read:{source:"function"},write:{target:"function"},origins:{"web-document":{read:!1,write:!1}}}})],E.prototype,"functionDefinition",void 0);H.__decorate([I.property({type:String,json:{read:!0,write:!0,origins:{"web-document":{read:!1,write:!1}}}})],E.prototype,"thumbnail",void 0);return E=w=H.__decorate([L.subclass("esri.layers.support.RasterFunction")],E)})},"esri/layers/support/imageryRendererUtils":function(){define("exports ../../core/lang ../../renderers/visualVariables/SizeVariable ../../renderers/support/colorRampUtils ../../renderers/support/stretchRendererUtils ./RasterFunction".split(" "),
function(U,H,A,aa,y,J){function I(p){const x=p.Raster;return x&&"esri.layers.support.RasterFunction"===x.declaredClass?I(x.functionArguments):p}function S(p,x){const r=new J;r.functionName="VectorFieldRenderer";const {dataType:m,bandProperties:f}=x;x="vector-uv"===m?!0:!1;let C,E;f&&2===f.length&&(C=f.map(u=>u.BandName.toLowerCase()).indexOf("magnitude"),E=f.map(u=>u.BandName.toLowerCase()).indexOf("direction"));if(-1===C||null===C)C=0,E=1;const t="arithmetic"===p.rotationType?1:2,b="flow-from"===
p.flowRepresentation?0:1,d=p.visualVariables?p.visualVariables.filter(u=>"Magnitude"===u.field)[0]:new A;p={magnitudeBandID:C,directionBandID:E,isUVComponents:x,referenceSystem:t,massFlowAngleRepresentation:b,symbolTileSize:50,symbolTileSizeUnits:100,calculationMethod:"Vector Average",symbologyName:k[p.style.toLowerCase().replace("-","_")],minimumMagnitude:d.minDataValue,maximumMagnitude:d.maxDataValue,minimumSymbolSize:d.minSize,maximumSymbolSize:d.maxSize};r.functionArguments=p;return r}function F(p,
x){const r=[],m=[],f=[],C=[],{pixelType:E,rasterAttributeTable:t}=x,b=t&&t.features,d=v(t);if(b&&Array.isArray(b)&&p.classBreakInfos){p.classBreakInfos.forEach((a,h)=>{const c=a.symbol.color;let l;c.a&&b.forEach(D=>{l=D.attributes[p.field];(l>=a.minValue&&l<a.maxValue||h===p.classBreakInfos.length-1&&l>=a.minValue)&&C.push([D.attributes[d],c.r,c.g,c.b])})});x=E?L(C,E):C;var u=new J;u.functionName="Colormap";u.functionArguments={};u.functionArguments.Colormap=x;u.variableName="Raster";return u}p.classBreakInfos.forEach((a,
h)=>{const c=a.symbol&&a.symbol.color;c.a?(0===h?r.push(a.minValue,a.maxValue+1E-6):r.push(a.minValue+1E-6,a.maxValue+1E-6),m.push(h),C.push([h,c.r,c.g,c.b])):f.push(a.minValue,a.maxValue)});x=E?L(C,E):C;u=new J;u.functionName="Remap";u.functionArguments={InputRanges:r,OutputValues:m,NoDataRanges:f};u.variableName="Raster";const e=new J;e.functionName="Colormap";e.functionArguments={Colormap:x,Raster:u};return e}function L(p,x){(x=n[String(x).toLowerCase()])&&p.push([Math.floor(x[0]-1),0,0,0],[Math.ceil(x[1]+
1),0,0,0]);return p}function v(p){if(p)return{fields:p}=p,(p=p&&p.find(x=>x&&x.name&&"value"===x.name.toLowerCase()))&&p.name}function z(p,x){const r=[],{pixelType:m,rasterAttributeTable:f}=x,C=f&&f.features,E=v(f);let t=!1;p.uniqueValueInfos&&p.uniqueValueInfos.forEach(d=>{const u=d.symbol.color;u.a&&(p.field!==E&&C?C&&C.forEach(e=>{String(e.attributes[p.field])===String(d.value)&&r.push([e.attributes[E],u.r,u.g,u.b])}):isNaN(+d.value)?t=!0:r.push([+d.value,u.r,u.g,u.b]))});if(t)return null;x=m&&
0<r.length?L(r,m):r;const b=new J;b.functionName="Colormap";b.functionArguments={};b.functionArguments.Colormap=x;b.variableName="Raster";return b}function g(p){const x=[];p.forEach(r=>{Array.isArray(r)?x.push(r):null!=r.min&&null!=r.max&&x.push([r.min,r.max,r.avg||0,r.stddev||0])});return x}const n={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767]},k={simple_scalar:"Simple Scalar",wind_barb:"Wind Barb",single_arrow:"Single Arrow",beaufort_kn:"Beaufort Wind (Knots)",
beaufort_m:"Beaufort Wind (MetersPerSecond)",ocean_current_m:"Ocean Current (MetersPerSecond)",ocean_current_kn:"Ocean Current (Knots)"},w=new Set("raster-stretch unique-value class-breaks raster-shaded-relief vector-field raster-colormap".split(" ")),q={none:0,standardDeviation:3,histogramEqualization:4,minMax:5,percentClip:6,sigmoid:9};U.combineRenderingRules=function(p,x){if(!p||!x)return H.clone(p||x);p=H.clone(p);"none"!==x.functionName.toLowerCase()&&(I(p.functionArguments).Raster=x);return p};
U.convertRendererToRenderingRule=function(p,x){x=x||{};switch(p.type){case "raster-stretch":var r=new J;r.functionName="Stretch";var m=q[y.stretchTypeJSONDict.toJSON(p.stretchType)],f=g(p.statistics);f={StretchType:m,Statistics:f,DRA:p.dynamicRangeAdjustment,UseGamma:p.useGamma,Gamma:p.gamma,ComputeGamma:p.computeGamma};null!=p.outputMin&&(f.Min=p.outputMin);null!=p.outputMax&&(f.Max=p.outputMax);m===q.standardDeviation?(f.NumberOfStandardDeviations=p.numberOfStandardDeviations,r.outputPixelType=
"u8"):m===q.percentClip?(f.MinPercent=p.minPercent,f.MaxPercent=p.maxPercent,r.outputPixelType="u8"):m===q.minMax?r.outputPixelType="u8":m===q.sigmoid&&(f.SigmoidStrengthLevel=p.sigmoidStrengthLevel);r.functionArguments=f;r.variableName="Raster";if(p.colorRamp){m=p.colorRamp;f=new J;const C=aa.getColorRampName(m);f.functionArguments=C?{colorRamp:C}:!x.convertColorRampToColormap||"algorithmic"!==m.type&&"multipart"!==m.type?{colorRamp:p.colorRamp.toJSON()}:{Colormap:aa.convertColorRampToColormap(m,
256)};f.variableName="Raster";f.functionName="Colormap";f.functionArguments.Raster=r;p=f}else p=r;return p;case "class-breaks":return F(p,x);case "unique-value":return z(p,x);case "raster-colormap":return(p=p.extractColormap())&&0!==p.length?({pixelType:x}=x,p=x?L(p,x):p,x=new J,x.functionName="Colormap",x.functionArguments={},x.functionArguments.Colormap=p,p=x):p=void 0,p;case "vector-field":return S(p,x);case "raster-shaded-relief":return"elevation"!==x.dataType?p=new J:(x=new J,x.functionName=
"Hillshade",r="traditional"===p.hillshadeType?0:1,m="none"===p.scalingType?1:3,f={HillshadeType:r,SlopeType:m,ZFactor:p.zFactor},0===r&&(f.Azimuth=p.azimuth,f.Altitude=p.altitude),3===m&&(f.PSPower=p.pixelSizePower,f.PSZFactor=p.pixelSizeFactor),x.functionArguments=f,x.variableName="Raster",p.colorRamp&&(x.functionName="ShadedRelief",f.Colormap=aa.convertColorRampToColormap(p.colorRamp,256)),p=x),p}};U.isSupportedRendererType=function(p){return w.has(p.type)};U.pixelTypeRanges=n;Object.defineProperty(U,
"__esModule",{value:!0})})},"esri/layers/support/MosaicRule":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/lang ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/jsonMap ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../geometry/Point ./DimensionalDefinition ./RasterFunction".split(" "),
function(U,H,A,aa,y,J,I,S,F,L,v,z,g,n,k,w,q,p){var x;const r=F.strict()({MT_FIRST:"first",MT_LAST:"last",MT_MIN:"min",MT_MAX:"max",MT_MEAN:"mean",MT_BLEND:"blend",MT_SUM:"sum"}),m=F.strict()({esriMosaicNone:"none",esriMosaicCenter:"center",esriMosaicNadir:"nadir",esriMosaicViewpoint:"viewpoint",esriMosaicAttribute:"attribute",esriMosaicLockRaster:"lock-raster",esriMosaicNorthwest:"northwest",esriMosaicSeamline:"seamline"});A=x=function(f){function C(t){t=f.call(this,t)||this;t.ascending=!0;t.itemRenderingRule=
null;t.lockRasterIds=null;t.method=null;t.multidimensionalDefinition=null;t.objectIds=null;t.operation=null;t.sortField=null;t.sortValue=null;t.viewpoint=null;t.where=null;return t}U._inheritsLoose(C,f);var E=C.prototype;E.readAscending=function(t,b){return null!=b.ascending?b.ascending:null!=b.sortAscending?b.sortAscending:!0};E.readMethod=function(t,b){t=b.mosaicMethod||b.defaultMosaicMethod;switch(t?t.toLowerCase().replace("esrimosaic",""):""){case "byattribute":case "attribute":t="esriMosaicAttribute";
break;case "lockraster":t="esriMosaicLockRaster";break;case "center":t="esriMosaicCenter";break;case "northwest":t="esriMosaicNorthwest";break;case "nadir":t="esriMosaicNadir";break;case "viewpoint":t="esriMosaicViewpoint";break;case "seamline":t="esriMosaicSeamline";break;case "none":t="esriMosaicNone";break;default:t="esriMosaicNone"}return t=m.fromJSON(t)};E.readOperation=function(t,b){t=b.mosaicOperation;b=b.mosaicOperator&&b.mosaicOperator.toLowerCase();b=t||(b?r.toJSON(b):null);return r.fromJSON(b)||
"first"};E.castSortValue=function(t){return null==t||"string"===typeof t||"number"===typeof t?t:`${t}`};E.clone=function(){return new x({ascending:this.ascending,itemRenderingRule:aa.clone(this.itemRenderingRule),lockRasterIds:aa.clone(this.lockRasterIds),method:this.method,multidimensionalDefinition:aa.clone(this.multidimensionalDefinition),objectIds:aa.clone(this.objectIds),operation:this.operation,sortField:this.sortField,sortValue:this.sortValue,viewpoint:aa.clone(this.viewpoint),where:this.where})};
return C}(k.JSONSupport);H.__decorate([I.property({type:Boolean,json:{write:!0}})],A.prototype,"ascending",void 0);H.__decorate([L.reader("ascending",["ascending","sortAscending"])],A.prototype,"readAscending",null);H.__decorate([I.property({type:p,json:{write:!0}})],A.prototype,"itemRenderingRule",void 0);H.__decorate([I.property({type:[J.Integer],json:{write:{overridePolicy(){return{enabled:"lock-raster"===this.method}}}}})],A.prototype,"lockRasterIds",void 0);H.__decorate([I.property({type:String,
json:{type:m.jsonValues,write:{target:"mosaicMethod",writer:m.write}}})],A.prototype,"method",void 0);H.__decorate([L.reader("method",["mosaicMethod","defaultMosaicMethod"])],A.prototype,"readMethod",null);H.__decorate([I.property({type:[q],json:{write:!0}})],A.prototype,"multidimensionalDefinition",void 0);H.__decorate([I.property({type:[J.Integer],json:{name:"fids",write:!0}})],A.prototype,"objectIds",void 0);H.__decorate([I.property({json:{type:r.jsonValues,read:{reader:r.read},write:{target:"mosaicOperation",
writer:r.write}}})],A.prototype,"operation",void 0);H.__decorate([L.reader("operation",["mosaicOperation","mosaicOperator"])],A.prototype,"readOperation",null);H.__decorate([I.property({type:String,json:{write:{overridePolicy(){return{enabled:"attribute"===this.method}}}}})],A.prototype,"sortField",void 0);H.__decorate([I.property({type:[String,Number],json:{write:{allowNull:!0,overridePolicy(){return{enabled:"attribute"===this.method,allowNull:!0}}}}})],A.prototype,"sortValue",void 0);H.__decorate([S.cast("sortValue")],
A.prototype,"castSortValue",null);H.__decorate([I.property({type:w,json:{write:!0}})],A.prototype,"viewpoint",void 0);H.__decorate([I.property({type:String,json:{write:!0}})],A.prototype,"where",void 0);return A=x=H.__decorate([v.subclass("esri.layers.support.MosaicRule")],A)})},"esri/layers/support/ExportImageServiceParameters":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/aliasOf ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ./RasterFunction ./imageryRendererUtils ./MosaicRule".split(" "),
function(U,H,A,aa,y,J,I,S,F,L,v,z,g,n,k,w,q,p){aa=new F.JSONMap({RSP_NearestNeighbor:"nearest",RSP_BilinearInterpolation:"bilinear",RSP_CubicConvolution:"cubic",RSP_Majority:"majority"});F=new F.JSONMap({esriNoDataMatchAny:"any",esriNoDataMatchAll:"all"});U.ExportImageServiceParameters=function(x){function r(){var f=x.apply(this,arguments)||this;f.layer=null;f.adjustAspectRatio=void 0;f.bandIds=void 0;f.compression=void 0;f.compressionQuality=void 0;f.compressionTolerance=.01;f.format=null;f.interpolation=
null;f.noData=null;f.noDataInterpretation=void 0;f.pixelType=void 0;f.lercVersion=2;return f}H._inheritsLoose(r,x);var m=r.prototype;m.writeAdjustAspectRatio=function(f,C,E){10.3>this.layer.version||(C[E]=f)};m.writeCompressionQuality=function(f,C,E){this.format&&-1<this.format.toLowerCase().indexOf("jpg")&&null!=f&&(C[E]=f)};m.writeCompressionTolerance=function(f,C,E){"lerc"===this.format&&null!=f&&(C[E]=f)};m.writeLercVersion=function(f,C,E){"lerc"===this.format&&10.5<=this.layer.version&&(C[E]=
f)};m.combineRendererWithRenderingRule=function(){var f;const C=this.layer,{rasterInfo:E,renderingRule:t,renderer:b}=C;return b&&q.isSupportedRendererType(b)?q.combineRenderingRules(q.convertRendererToRenderingRule(b,{rasterAttributeTable:E.attributeTable,pixelType:E.pixelType,dataType:E.dataType,bandProperties:null==(f=E.keyProperties)?void 0:f.BandProperties,convertColorRampToColormap:10.6>C.version}),t):t};m._addResampleRasterFunction=function(f){var C;if("vector-field"!==(null==(C=this.layer.renderer)?
void 0:C.type)||"Resample"===(null==f?void 0:f.functionName))return f;C=new w({functionName:"Resample",functionArguments:{ResamplingType:"esriImageServiceDataTypeVector-UV"===this.layer.serviceDataType?7:10,InputCellSize:{x:this.layer.pixelSizeX,y:this.layer.pixelSizeY}}});return q.combineRenderingRules(C,f)};H._createClass(r,[{key:"version",get:function(){const f=this.layer;f.commitProperty("bandIds");f.commitProperty("format");f.commitProperty("compressionQuality");f.commitProperty("compressionTolerance");
f.commitProperty("interpolation");f.commitProperty("noData");f.commitProperty("noDataInterpretation");f.commitProperty("mosaicRule");f.commitProperty("renderingRule");f.commitProperty("adjustAspectRatio");f.commitProperty("pixelFilter");f.commitProperty("renderer");f.commitProperty("definitionExpression");return(this._get("version")||0)+1},set:function(f){this._set("version",f)}},{key:"mosaicRule",get:function(){var f=this.layer;let C=f.mosaicRule;f=f.definitionExpression;C?f&&f!==C.where&&(C=C.clone(),
C.where=f):f&&(C=new p({where:f}));return C}},{key:"renderingRule",get:function(){var f=this.layer;let C=f.renderingRule;const E=f.pixelFilter;f=!f.format||-1<f.format.indexOf("jpg")||-1<f.format.indexOf("png");C=this._addResampleRasterFunction(C);f&&!E&&(C=this.combineRendererWithRenderingRule());return C}}]);return r}(k.JSONSupport);A.__decorate([I.property()],U.ExportImageServiceParameters.prototype,"layer",void 0);A.__decorate([I.property({json:{write:!0}})],U.ExportImageServiceParameters.prototype,
"adjustAspectRatio",void 0);A.__decorate([v.writer("adjustAspectRatio")],U.ExportImageServiceParameters.prototype,"writeAdjustAspectRatio",null);A.__decorate([I.property({json:{write:!0}}),S.aliasOf("layer.bandIds")],U.ExportImageServiceParameters.prototype,"bandIds",void 0);A.__decorate([I.property({json:{write:!0}})],U.ExportImageServiceParameters.prototype,"compression",void 0);A.__decorate([I.property({json:{write:!0}}),S.aliasOf("layer.compressionQuality")],U.ExportImageServiceParameters.prototype,
"compressionQuality",void 0);A.__decorate([v.writer("compressionQuality")],U.ExportImageServiceParameters.prototype,"writeCompressionQuality",null);A.__decorate([I.property({json:{write:!0}}),S.aliasOf("layer.compressionTolerance")],U.ExportImageServiceParameters.prototype,"compressionTolerance",void 0);A.__decorate([v.writer("compressionTolerance")],U.ExportImageServiceParameters.prototype,"writeCompressionTolerance",null);A.__decorate([I.property({json:{write:!0}}),S.aliasOf("layer.format")],U.ExportImageServiceParameters.prototype,
"format",void 0);A.__decorate([I.property({type:String,json:{read:{reader:aa.read},write:{writer:aa.write}}}),S.aliasOf("layer.interpolation")],U.ExportImageServiceParameters.prototype,"interpolation",void 0);A.__decorate([I.property({json:{write:!0}}),S.aliasOf("layer.noData")],U.ExportImageServiceParameters.prototype,"noData",void 0);A.__decorate([I.property({type:String,json:{read:{reader:F.read},write:{writer:F.write}}}),S.aliasOf("layer.noDataInterpretation")],U.ExportImageServiceParameters.prototype,
"noDataInterpretation",void 0);A.__decorate([I.property({json:{write:!0}})],U.ExportImageServiceParameters.prototype,"pixelType",void 0);A.__decorate([I.property({json:{write:!0}})],U.ExportImageServiceParameters.prototype,"lercVersion",void 0);A.__decorate([v.writer("lercVersion")],U.ExportImageServiceParameters.prototype,"writeLercVersion",null);A.__decorate([I.property({type:Number})],U.ExportImageServiceParameters.prototype,"version",null);A.__decorate([I.property({json:{write:!0}})],U.ExportImageServiceParameters.prototype,
"mosaicRule",null);A.__decorate([I.property({json:{write:!0}})],U.ExportImageServiceParameters.prototype,"renderingRule",null);U.ExportImageServiceParameters=A.__decorate([L.subclass("esri.layers.mixins.ExportImageServiceParameters")],U.ExportImageServiceParameters);Object.defineProperty(U,"__esModule",{value:!0})})},"esri/layers/support/RasterInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../geometry/Extent".split(" "),
function(U,H,A,aa,y,J,I,S,F,L,v,z,g){A=function(n){function k(w){w=n.call(this,w)||this;w.attributeTable=null;w.bandCount=null;w.colormap=null;w.extent=null;w.format=void 0;w.height=null;w.width=null;w.histograms=null;w.keyProperties={};w.multidimensionalInfo=null;w.noDataValue=null;w.pixelSize=null;w.pixelType=null;w.isPseudoSpatialReference=!1;w.spatialReference=null;w.statistics=null;w.storageInfo=null;w.transform=null;return w}U._inheritsLoose(k,n);U._createClass(k,[{key:"dataType",get:function(){const w=
this.keyProperties&&this.keyProperties.DataType;return w?w.toLowerCase():"generic"}},{key:"nativeExtent",get:function(){return this._get("nativeExtent")||this.extent},set:function(w){w&&this._set("nativeExtent",w)}},{key:"nativePixelSize",get:function(){if(null==this.transform)return this.pixelSize;const w=this.nativeExtent;return{x:w.width/this.width,y:w.height/this.height}}}]);return k}(z.JSONSupport);H.__decorate([J.property({json:{write:!0}})],A.prototype,"attributeTable",void 0);H.__decorate([J.property({json:{write:!0}})],
A.prototype,"bandCount",void 0);H.__decorate([J.property({json:{write:!0}})],A.prototype,"colormap",void 0);H.__decorate([J.property({type:String,readOnly:!0})],A.prototype,"dataType",null);H.__decorate([J.property({type:g,json:{write:!0}})],A.prototype,"extent",void 0);H.__decorate([J.property({type:g,json:{write:!0}})],A.prototype,"nativeExtent",null);H.__decorate([J.property({json:{write:!0}})],A.prototype,"nativePixelSize",null);H.__decorate([J.property({json:{write:!0}})],A.prototype,"format",
void 0);H.__decorate([J.property({json:{write:!0}})],A.prototype,"height",void 0);H.__decorate([J.property({json:{write:!0}})],A.prototype,"width",void 0);H.__decorate([J.property({json:{write:!0}})],A.prototype,"histograms",void 0);H.__decorate([J.property({json:{write:!0}})],A.prototype,"keyProperties",void 0);H.__decorate([J.property({json:{write:!0}})],A.prototype,"multidimensionalInfo",void 0);H.__decorate([J.property()],A.prototype,"noDataValue",void 0);H.__decorate([J.property({json:{write:!0}})],
A.prototype,"pixelSize",void 0);H.__decorate([J.property({json:{write:!0}})],A.prototype,"pixelType",void 0);H.__decorate([J.property()],A.prototype,"isPseudoSpatialReference",void 0);H.__decorate([J.property({json:{write:!0}})],A.prototype,"spatialReference",void 0);H.__decorate([J.property({json:{write:!0}})],A.prototype,"statistics",void 0);H.__decorate([J.property({json:{write:!0}})],A.prototype,"storageInfo",void 0);H.__decorate([J.property({json:{write:!0}})],A.prototype,"transform",void 0);
return A=H.__decorate([S.subclass("esri.layers.support.RasterInfo")],A)})},"esri/layers/support/RasterJobHandler":function(){define(["../../core/Error","./PixelBlock","../../core/workers/workers"],function(U,H,A){return function(){function aa(){this._workerThread=null;this._destroyed=!1}var y=aa.prototype;y.initialize=async function(){const J=await A.open("RasterWorker");this._destroyed?J.close():this._workerThread=J};y.destroy=function(){this._destroyed=!0;this._workerThread&&(this._workerThread.close(),
this._workerThread=null)};y.decode=async function(J,I){if(!this._workerThread)throw new U("raster-jobhandler:no-connection","no available worker connection");return(J=await this._workerThread.invoke("decode",J,I))?new H(J):null};y.symbolize=async function(J,I){if(!this._workerThread)throw new U("raster-jobhandler:no-connection","no available worker connection");J={extent:J.extent&&J.extent.toJSON(),pixelBlock:J.pixelBlock.toJSON(),simpleStretchParams:J.simpleStretchParams,bandIds:J.bandIds};return(I=
await this._workerThread.invoke("symbolize",J,I))?new H(I):null};y.updateSymbolizer=async function(J,I){var S;if(!this._workerThread)throw new U("raster-jobhandler:no-connection","no available worker connection");const F=null==J?void 0:null==(S=J.rendererJSON)?void 0:S.histograms;await Promise.all(this._workerThread.broadcast("updateSymbolizer",{symbolizerJSON:J.toJSON(),histograms:F},I))};y.stretch=async function(J,I){if(!this._workerThread)throw new U("raster-jobhandler:no-connection","no available worker connection");
if(null==J||!J.pixelBlock)return null;J={srcPixelBlock:J.pixelBlock.toJSON(),stretchParams:J.stretchParams};return(I=await this._workerThread.invoke("stretch",J,I))?new H(I):null};y.split=async function(J,I){if(!this._workerThread)throw new U("raster-jobhandler:no-connection","no available worker connection");if(null==J||!J.pixelBlock)return null;J={srcPixelBlock:J.pixelBlock.toJSON(),tileSize:J.tileSize,maximumPyramidLevel:J.maximumPyramidLevel};const S=await this._workerThread.invoke("split",J,
I);S&&S.forEach((F,L)=>{S.set(L,F?H.fromJSON(F):null)});return Promise.resolve(S)};y.estimateStatisticsHistograms=async function(J,I){if(!this._workerThread)throw new U("raster-jobhandler:no-connection","no available worker connection");if(null==J||!J.pixelBlock)return null;J={srcPixelBlock:J.pixelBlock.toJSON()};I=await this._workerThread.invoke("estimateStatisticsHistograms",J,I);return Promise.resolve(I)};y.mosaicAndTransform=async function(J,I){var S;if(!this._workerThread)throw new U("raster-jobhandler:no-connection",
"no available worker connection");if(null==J||null==(S=J.srcPixelBlocks)||!S.length)return null;J={...J,srcPixelBlocks:J.srcPixelBlocks.map(F=>F?F.toJSON():null)};return(I=await this._workerThread.invoke("mosaicAndTransform",J,I))?new H(I):null};return aa}()})},"esri/layers/support/rasterFormats/RasterCodec":function(){define("exports ../../../core/Error ../PixelBlock ../../../chunks/_commonjsHelpers ../../../chunks/Zlib ./ImageCanvasDecoder ./JpgPlus ../../../chunks/LercCodec ./Raw ./utils ./TiffDecoder".split(" "),
function(U,H,A,aa,y,J,I,S,F,L,v){function z(t,b){if(!L.isPlatformLittleEndian)throw new H("rasterCoded:decode","lerc decoder is not supported on big endian platform");const {width:d,height:u,pixelType:e}=b;var a=r(e);const h=a.pixelTypeCtor;b=null==b.noDataValue?a.noDataValue:b.noDataValue;a=0;let c,l=0,D;const N=t.byteLength-10;for(;l<N;){var Q=S.decode(t,{inputOffset:l,encodedMaskData:c,returnMask:0===a?!0:!1,returnEncodedMask:0===a?!0:!1,returnFileInfo:!0,pixelType:h,noDataValue:b});if(d&&u&&(Q.width!==
d||Q.height!==u))throw new H("rasterCoded:decode","lerc decoded result has width or height different from specified in options");l=Q.fileInfo.eofOffset;0===a&&(c=Q.encodedMaskData,D=new A({width:Q.width,height:Q.height,pixels:[],pixelType:e,mask:Q.maskData,statistics:[]}));a++;D.addData({pixels:Q.pixelData,statistics:{minValue:Q.minValue,maxValue:Q.maxValue,noDataValue:Q.noDataValue}});10<N-l&&(Q=String.fromCharCode.apply(null,new Uint8Array(t,l,10)),l=-1<l+Q.indexOf("CntZ")?Q.indexOf("CntZ"):0)}return D}
function g(t,b){if(!L.isPlatformLittleEndian)throw new H("rasterCoded:decode","lerc decoder is not supported on big endian platform");var d=0,u=0,e=0;let a;let h;const c=t.byteLength-10,l=[],{width:D,height:N}=b;for(b=0;u<c;){var Q;var M=f.decode(t,{inputOffset:u,maskData:a,returnFileInfo:!0});if(D&&N&&(M.width!==D||M.height!==N))throw new H("rasterCoded:decode","lerc2 decoded result has width or height different from what's specified in options");u=M.fileInfo.eofOffset;a=M.maskData;0===d&&(e=M.fileInfo.numValidPixel,
h=new A({width:M.width,height:M.height,pixels:[],pixelType:M.fileInfo.pixelType,mask:a,statistics:[]}));M.fileInfo.mask&&0<M.fileInfo.mask.numBytes&&b++;a&&l.push(a);if(1<M.dimCount&&(null==(Q=M.pixelData)?void 0:Q.length)===M.width*M.height*M.dimCount){var T,P,K,G;M.pixelData=M.pixelData.slice(-M.width*M.height);const O=null==(T=M.dimStats)?void 0:null==(P=T.minValues)?void 0:P[M.dimCount-1],X=null==(K=M.dimStats)?void 0:null==(G=K.maxValues)?void 0:G[M.dimCount-1];null!=O&&null!=X&&(M.minValue=
O,M.maxValue=X)}d++;h.addData({pixels:M.pixelData,statistics:{minValue:M.minValue,maxValue:M.maxValue}});10<c-u&&(M=String.fromCharCode.apply(null,new Uint8Array(t,u,10)),u+=-1<M.indexOf("Lerc")?M.indexOf("Lerc"):0)}u=d=t=0;if(1<b){u=h.width*h.height;a=new Uint8Array(u);a.set(l[0]);for(t=1;t<l.length;t++)for(e=l[t],d=0;d<u;d++)a[d]&=e[d];for(d=e=0;d<u;d++)e+=a[d];h.mask=a}h.validPixelCount=e;return h}function n(t){t=v.decode(t);t=new A({width:t.width,height:t.height,pixels:t.pixels,pixelType:t.pixelType.toLowerCase(),
mask:t.mask,statistics:null});t.updateStatistics();return t}function k(t){t=I.decode(t);t=new A({width:t.width,height:t.height,pixels:t.pixels,pixelType:"U8",mask:t.mask,statistics:null});t.updateStatistics();return t}function w(t,b){t=new Uint8Array(t);t=new C(t);const {width:d,height:u}=b;b=d*u;t=t.decode();let e=0;var a=0;let h;a=new Uint8Array(b);for(e=0;e<b;e++)a[e]=t[4*e+3];const c=new A({width:d,height:u,pixels:[],pixelType:"U8",mask:a,statistics:[]});for(e=0;3>e;e++){h=new Uint8Array(b);for(a=
0;a<b;a++)h[a]=t[4*a+e];c.addData({pixels:h})}c.updateStatistics();return c}async function q(t,b,d,u){t=await (new J).decode(t,{applyJpegMask:!1,format:b,...d},u);t=new A(t);t.updateStatistics();return t}function p(t){if(null==t)throw new H("rasterCodec:decode","parameter encodeddata is required.");t=new Uint8Array(t,0,10);let b="";255===t[0]&&216===t[1]?b="jpg":137===t[0]&&80===t[1]&&78===t[2]&&71===t[3]?b="png":67===t[0]&&110===t[1]&&116===t[2]&&90===t[3]&&73===t[4]&&109===t[5]&&97===t[6]&&103===
t[7]&&101===t[8]&&32===t[9]?b="lerc":76===t[0]&&101===t[1]&&114===t[2]&&99===t[3]&&50===t[4]&&32===t[5]?b="lerc2":73===t[0]&&73===t[1]&&42===t[2]&&0===t[3]||77===t[0]&&77===t[1]&&0===t[2]&&42===t[3]||73===t[0]&&73===t[1]&&43===t[2]&&0===t[3]||77===t[0]&&77===t[1]&&0===t[2]&&43===t[3]?b="tiff":71===t[0]&&73===t[1]&&70===t[2]?b="gif":66===t[0]&&77===t[1]?b="bmp":-1<String.fromCharCode.apply(null,t).toLowerCase().indexOf("error")&&(b="error");return b}function x(t){let b=null;switch(t){case "lerc":b=
z;break;case "lerc2":b=g;break;case "jpg":b=k;break;case "png":b=w;break;case "bsq":case "bip":b=(d,u)=>{{const {pixelTypeCtor:e}=r(u.pixelType),a=F.decode;d=a(d,{width:u.width,height:u.height,pixelType:e,format:t});u=new A({width:u.width,height:u.height,pixels:d.pixels,pixelType:u.pixelType,mask:d.mask,statistics:null});u.updateStatistics()}return u};break;case "tiff":b=n;break;case "error":b=()=>{throw new H("rasterCodec:decode","input data contains error");};break;default:b=()=>{throw new H("rasterCodec:decode",
"unsupported raster format");}}return b}function r(t){let b=null,d=null;switch(t?t.toLowerCase():"f32"){case "u1":case "u2":case "u4":case "u8":d=255;b=Uint8Array;break;case "u16":d=d||65535;b=Uint16Array;break;case "u32":d=d||2**32-1;b=Uint32Array;break;case "s8":d=d||-128;b=Int8Array;break;case "s16":d=d||-32768;b=Int16Array;break;case "s32":d=d||-(2**31);b=Int32Array;break;default:b=Float32Array}return{pixelTypeCtor:b,noDataValue:d}}function m(t,b=1){if(t){var {pixels:d,width:u,height:e,mask:a}=
t;if(d&&0!==d.length){var h=d.length,c=u-1,l=e-1,D=[],N,Q,M=A.getPixelArrayConstructor(t.pixelType);if(0===b){for(b=0;b<h;b++){var T=d[b];var P=new M(c*l);for(N=0;N<l;N++){var K=N*u;for(Q=0;Q<c;Q++)P[N*c+Q]=T[K+Q]}D.push(P)}if(a){var G=new Uint8Array(c*l);for(N=0;N<l;N++)for(K=N*u,Q=0;Q<c;Q++)G[N*c+Q]=a[K+Q]}}else{for(b=0;b<h;b++){T=d[b];P=new M(c*l);for(N=0;N<l;N++)for(K=N*u,Q=0;Q<c;Q++)P[N*c+Q]=(T[K+Q]+T[K+Q+1]+T[K+u+Q]+T[K+u+Q+1])/4;D.push(P)}if(a)for(G=new Uint8Array(c*l),N=0;N<l;N++)for(K=N*
u,Q=0;Q<c;Q++)G[N*c+Q]=Math.min.apply(null,[a[K+Q],a[K+Q+1],a[K+u+Q],a[K+u+Q+1]])}t.width=c;t.height=l;t.mask=G;t.pixels=D}}}var f=aa.createCommonjsModule(function(t){(function(b){b=b();void 0!==b&&(t.exports=b)})(function(){var b={unstuff:function(e,a,h,c,l,D,N,Q){var M=(1<<h)-1,T=0,P,K=0;e[e.length-1]<<=8*(4*e.length-Math.ceil(h*c/8));if(l)for(P=0;P<c;P++){if(0===K){var G=e[T++];K=32}if(K>=h){var O=G>>>K-h&M;K-=h}else K=h-K,O=(G&M)<<K&M,G=e[T++],K=32-K,O+=G>>>K;a[P]=l[O]}else for(l=Math.ceil((Q-
D)/N),P=0;P<c;P++)0===K&&(G=e[T++],K=32),K>=h?(O=G>>>K-h&M,K-=h):(K=h-K,O=(G&M)<<K&M,G=e[T++],K=32-K,O+=G>>>K),a[P]=O<l?D+O*N:Q},unstuffLUT:function(e,a,h,c,l,D){var N=(1<<a)-1,Q=0,M=0,T=0,P=T=0,K=[];e[e.length-1]<<=8*(4*e.length-Math.ceil(a*h/8));var G=Math.ceil((D-c)/l);for(M=0;M<h;M++){if(0===T){var O=e[Q++];T=32}T>=a?(P=O>>>T-a&N,T-=a):(T=a-T,P=(O&N)<<T&N,O=e[Q++],T=32-T,P+=O>>>T);K[M]=P<G?c+P*l:D}K.unshift(c);return K},unstuff2:function(e,a,h,c,l,D,N,Q){var M=(1<<h)-1,T=0,P,K=0,G=0;if(l)for(P=
0;P<c;P++){if(0===K){var O=e[T++];K=32;G=0}if(K>=h){var X=O>>>G&M;K-=h;G+=h}else{var V=h-K;X=O>>>G&M;O=e[T++];K=32-V;X|=(O&(1<<V)-1)<<h-V;G=V}a[P]=l[X]}else for(l=Math.ceil((Q-D)/N),P=0;P<c;P++)0===K&&(O=e[T++],K=32,G=0),K>=h?(X=O>>>G&M,K-=h,G+=h):(V=h-K,X=O>>>G&M,O=e[T++],K=32-V,X|=(O&(1<<V)-1)<<h-V,G=V),a[P]=X<l?D+X*N:Q;return a},unstuffLUT2:function(e,a,h,c,l,D){var N=(1<<a)-1,Q=0,M=0,T=0,P=0,K=0,G=0,O=[],X=Math.ceil((D-c)/l);for(M=0;M<h;M++){if(0===P){var V=e[Q++];P=32;G=0}P>=a?(K=V>>>G&N,P-=
a,G+=a):(T=a-P,K=V>>>G&N,V=e[Q++],P=32-T,K|=(V&(1<<T)-1)<<a-T,G=T);O[M]=K<X?c+K*l:D}O.unshift(c);return O},originalUnstuff:function(e,a,h,c){var l=(1<<h)-1,D=0,N,Q=0;e[e.length-1]<<=8*(4*e.length-Math.ceil(h*c/8));for(N=0;N<c;N++){if(0===Q){var M=e[D++];Q=32}if(Q>=h){var T=M>>>Q-h&l;Q-=h}else Q=h-Q,T=(M&l)<<Q&l,M=e[D++],Q=32-Q,T+=M>>>Q;a[N]=T}return a},originalUnstuff2:function(e,a,h,c){var l=(1<<h)-1,D=0,N,Q=0,M=0;for(N=0;N<c;N++){if(0===Q){var T=e[D++];Q=32;M=0}if(Q>=h){var P=T>>>M&l;Q-=h;M+=h}else{var K=
h-Q;P=T>>>M&l;T=e[D++];Q=32-K;P|=(T&(1<<K)-1)<<h-K;M=K}a[N]=P}return a}},d={HUFFMAN_LUT_BITS_MAX:12,computeChecksumFletcher32:function(e){for(var a=65535,h=65535,c=e.length,l=Math.floor(c/2),D=0;l;){var N=359<=l?359:l;l-=N;do a+=e[D++]<<8,h+=a+=e[D++];while(--N);a=(a&65535)+(a>>>16);h=(h&65535)+(h>>>16)}c&1&&(h+=a+=e[D]<<8);return((h&65535)+(h>>>16)<<16|(a&65535)+(a>>>16))>>>0},readHeaderInfo:function(e,a){var h=a.ptr,c=new Uint8Array(e,h,6),l={};l.fileIdentifierString=String.fromCharCode.apply(null,
c);if(0!==l.fileIdentifierString.lastIndexOf("Lerc2",0))throw"Unexpected file identifier string (expect Lerc2 ): "+l.fileIdentifierString;h+=6;c=new DataView(e,h,8);var D=c.getInt32(0,!0);l.fileVersion=D;h+=4;3<=D&&(l.checksum=c.getUint32(4,!0),h+=4);c=new DataView(e,h,12);l.height=c.getUint32(0,!0);l.width=c.getUint32(4,!0);h+=8;4<=D?(l.numDims=c.getUint32(8,!0),h+=4):l.numDims=1;c=new DataView(e,h,40);l.numValidPixel=c.getUint32(0,!0);l.microBlockSize=c.getInt32(4,!0);l.blobSize=c.getInt32(8,!0);
l.imageType=c.getInt32(12,!0);l.maxZError=c.getFloat64(16,!0);l.zMin=c.getFloat64(24,!0);l.zMax=c.getFloat64(32,!0);h+=40;a.headerInfo=l;a.ptr=h;if(3<=D&&(e=this.computeChecksumFletcher32(new Uint8Array(e,h-(4<=D?52:48),l.blobSize-14)),e!==l.checksum))throw"Checksum failed.";return!0},checkMinMaxRanges:function(e,a){var h=a.headerInfo,c=this.getDataTypeArray(h.imageType),l=h.numDims*this.getDataTypeSize(h.imageType),D=this.readSubArray(e,a.ptr,c,l);e=this.readSubArray(e,a.ptr+l,c,l);a.ptr+=2*l;l=
!0;for(a=0;a<h.numDims;a++)if(D[a]!==e[a]){l=!1;break}h.minValues=D;h.maxValues=e;return l},readSubArray:function(e,a,h,c){if(h===Uint8Array)e=new Uint8Array(e,a,c);else{var l=new ArrayBuffer(c);(new Uint8Array(l)).set(new Uint8Array(e,a,c));e=new h(l)}return e},readMask:function(e,a){var h=a.ptr,c=a.headerInfo,l=c.width*c.height,D=c.numValidPixel,N=new DataView(e,h,4);c={};c.numBytes=N.getUint32(0,!0);h+=4;if((0===D||l===D)&&0!==c.numBytes)throw"invalid mask";if(0===D)D=new Uint8Array(Math.ceil(l/
8)),c.bitset=D,N=new Uint8Array(l),a.pixels.resultMask=N,h+=c.numBytes;else if(0<c.numBytes){D=new Uint8Array(Math.ceil(l/8));N=new DataView(e,h,c.numBytes);e=N.getInt16(0,!0);var Q=2,M=0,T=0;do{if(0<e)for(;e--;)D[M++]=N.getUint8(Q++);else for(T=N.getUint8(Q++),e=-e;e--;)D[M++]=T;e=N.getInt16(Q,!0);Q+=2}while(Q<c.numBytes);if(-32768!==e||M<D.length)throw"Unexpected end of mask RLE encoding";N=new Uint8Array(l);for(Q=Q=e=0;Q<l;Q++)Q&7?(e=D[Q>>3],e<<=Q&7):e=D[Q>>3],e&128&&(N[Q]=1);a.pixels.resultMask=
N;c.bitset=D;h+=c.numBytes}a.ptr=h;a.mask=c;return!0},readDataOneSweep:function(e,a,h){var c=a.ptr,l=a.headerInfo,D=l.numDims,N=l.width*l.height;l=l.numValidPixel*d.getDataTypeSize(l.imageType)*D;var Q=a.pixels.resultMask;if(h===Uint8Array)e=new Uint8Array(e,c,l);else{var M=new ArrayBuffer(l);(new Uint8Array(M)).set(new Uint8Array(e,c,l));e=new h(M)}if(e.length===N*D)a.pixels.resultPixels=e;else{a.pixels.resultPixels=new h(N*D);var T=M=h=0,P=0;if(1<D)for(T=0;T<D;T++)for(P=T*N,M=0;M<N;M++)Q[M]&&(a.pixels.resultPixels[P+
M]=e[h++]);else for(M=0;M<N;M++)Q[M]&&(a.pixels.resultPixels[M]=e[h++])}a.ptr=c+l;return!0},readHuffmanTree:function(e,a){var h=this.HUFFMAN_LUT_BITS_MAX,c=new DataView(e,a.ptr,16);a.ptr+=16;if(2>c.getInt32(0,!0))throw"unsupported Huffman version";var l=c.getInt32(4,!0),D=c.getInt32(8,!0);c=c.getInt32(12,!0);if(D>=c)return!1;var N=new Uint32Array(c-D);d.decodeBits(e,a,N);var Q=[],M;for(M=D;M<c;M++){var T=M-(M<l?0:l);Q[T]={first:N[M-D],second:null}}M=e.byteLength-a.ptr;N=new ArrayBuffer(4*Math.ceil(M/
4));(new Uint8Array(N)).set(new Uint8Array(e,a.ptr,M));e=new Uint32Array(N);a=0;N=0;var P=e[0];for(M=D;M<c;M++){T=M-(M<l?0:l);var K=Q[T].first;0<K&&(Q[T].second=P<<a>>>32-K,32-a>=K?(a+=K,32===a&&(a=0,N++,P=e[N])):(a+=K-32,N++,P=e[N],Q[T].second|=P>>>32-a))}var G=P=0,O=new u;for(M=0;M<Q.length;M++)void 0!==Q[M]&&(P=Math.max(P,Q[M].first));G=P>=h?h:P;h=[];var X;for(M=D;M<c;M++)if(T=M-(M<l?0:l),K=Q[T].first,0<K)if(D=[K,T],K<=G){T=Q[T].second<<G-K;var V=1<<G-K;for(K=0;K<V;K++)h[T|K]=D}else for(T=Q[T].second,
V=O,--K;0<=K;K--)(X=T>>>K&1)?(V.right||(V.right=new u),V=V.right):(V.left||(V.left=new u),V=V.left),0!==K||V.val||(V.val=D[1]);return{decodeLut:h,numBitsLUTQick:G,numBitsLUT:P,tree:O,stuffedData:e,srcPtr:N,bitPos:a}},readHuffman:function(e,a,h){var c=a.headerInfo,l=c.numDims,D=a.headerInfo.height,N=a.headerInfo.width,Q=N*D,M=this.readHuffmanTree(e,a);e=M.decodeLut;var T=M.tree,P=M.stuffedData,K=M.srcPtr,G=M.bitPos,O=M.numBitsLUTQick;M=M.numBitsLUT;var X=0===a.headerInfo.imageType?128:0,V=a.pixels.resultMask,
Z,Y,fa,ia,ha,ca,ka=0;0<G&&(K++,G=0);var ma=P[K],ua=1===a.encodeMode,ta=new h(Q*l),sa=ta,da;for(da=0;da<c.numDims;da++){1<l&&(sa=new h(ta.buffer,Q*da,Q),ka=0);if(a.headerInfo.numValidPixel===N*D)for(fa=ha=0;fa<D;fa++)for(ia=0;ia<N;ia++,ha++){var pa=0;var qa=Z=ma<<G>>>32-O;32-G<O&&(qa=Z|=P[K+1]>>>64-G-O);if(e[qa])pa=e[qa][1],G+=e[qa][0];else for(qa=Z=ma<<G>>>32-M,32-G<M&&(qa=Z|=P[K+1]>>>64-G-M),qa=T,ca=0;ca<M;ca++)if(qa=(Y=Z>>>M-ca-1&1)?qa.right:qa.left,!qa.left&&!qa.right){pa=qa.val;G=G+ca+1;break}32<=
G&&(G-=32,K++,ma=P[K]);pa-=X;ua?(pa=0<ia?pa+ka:0<fa?pa+sa[ha-N]:pa+ka,pa&=255,ka=sa[ha]=pa):sa[ha]=pa}else for(fa=ha=0;fa<D;fa++)for(ia=0;ia<N;ia++,ha++)if(V[ha]){pa=0;qa=Z=ma<<G>>>32-O;32-G<O&&(qa=Z|=P[K+1]>>>64-G-O);if(e[qa])pa=e[qa][1],G+=e[qa][0];else for(qa=Z=ma<<G>>>32-M,32-G<M&&(qa=Z|=P[K+1]>>>64-G-M),qa=T,ca=0;ca<M;ca++)if(qa=(Y=Z>>>M-ca-1&1)?qa.right:qa.left,!qa.left&&!qa.right){pa=qa.val;G=G+ca+1;break}32<=G&&(G-=32,K++,ma=P[K]);pa-=X;ua?(pa=0<ia&&V[ha-1]?pa+ka:0<fa&&V[ha-N]?pa+sa[ha-N]:
pa+ka,pa&=255,ka=sa[ha]=pa):sa[ha]=pa}a.ptr=a.ptr+4*(K+1)+(0<G?4:0)}a.pixels.resultPixels=ta},decodeBits:function(e,a,h,c,l){var D=a.headerInfo,N=D.fileVersion,Q=0,M=new DataView(e,a.ptr,5<=e.byteLength-a.ptr?5:e.byteLength-a.ptr),T=M.getUint8(0);Q++;var P=T>>6,K=0===P?4:3-P,G=0<(T&32)?!0:!1;P=T&31;T=0;if(1===K)T=M.getUint8(Q),Q++;else if(2===K)T=M.getUint16(Q,!0),Q+=2;else if(4===K)T=M.getUint32(Q,!0),Q+=4;else throw"Invalid valid pixel count type";K=2*D.maxZError;l=1<D.numDims?D.maxValues[l]:D.zMax;
if(G){a.counter.lut++;G=M.getUint8(Q);Q++;D=Math.ceil((G-1)*P/8);var O=Math.ceil(D/4);O=new ArrayBuffer(4*O);var X=new Uint8Array(O);a.ptr+=Q;X.set(new Uint8Array(e,a.ptr,D));Q=new Uint32Array(O);a.ptr+=D;for(M=0;G-1>>>M;)M++;D=Math.ceil(T*M/8);O=Math.ceil(D/4);O=new ArrayBuffer(4*O);X=new Uint8Array(O);X.set(new Uint8Array(e,a.ptr,D));e=new Uint32Array(O);a.ptr+=D;a=3<=N?b.unstuffLUT2(Q,P,G-1,c,K,l):b.unstuffLUT(Q,P,G-1,c,K,l);3<=N?b.unstuff2(e,h,M,T,a):b.unstuff(e,h,M,T,a)}else a.counter.bitstuffer++,
M=P,a.ptr+=Q,0<M&&(D=Math.ceil(T*M/8),O=Math.ceil(D/4),O=new ArrayBuffer(4*O),X=new Uint8Array(O),X.set(new Uint8Array(e,a.ptr,D)),e=new Uint32Array(O),a.ptr+=D,3<=N?null==c?b.originalUnstuff2(e,h,M,T):b.unstuff2(e,h,M,T,!1,c,K,l):null==c?b.originalUnstuff(e,h,M,T):b.unstuff(e,h,M,T,!1,c,K,l))},readTiles:function(e,a,h){var c=a.headerInfo,l=c.width,D=c.height,N=c.microBlockSize,Q=c.imageType,M=d.getDataTypeSize(Q),T=Math.ceil(l/N),P=Math.ceil(D/N);a.pixels.numBlocksY=P;a.pixels.numBlocksX=T;var K=
a.pixels.ptr=0,G=0,O=0,X=0,V=0,Z=0,Y=0,fa=0,ia=0,ha=0,ca=0,ka=0,ma=0;Y=ma=Y=0;var ua=new h(N*N),ta=D%N||N,sa=l%N||N,da=c.numDims,pa,qa=a.pixels.resultMask,ja=a.pixels.resultPixels,B=5<=c.fileVersion?14:15,R=c.zMax;for(O=0;O<P;O++)for(V=O!==P-1?N:ta,X=0;X<T;X++)for(Z=X!==T-1?N:sa,ca=O*l*N+X*N,ka=l-Z,pa=0;pa<da;pa++){1<da?(ma=ja,ca=O*l*N+X*N,ja=new h(a.pixels.resultPixels.buffer,l*D*pa*M,l*D),R=c.maxValues[pa]):ma=null;Y=e.byteLength-a.ptr;K=new DataView(e,a.ptr,Math.min(10,Y));G={};Y=0;fa=K.getUint8(0);
Y++;var W=5<=c.fileVersion?fa&4:0;ia=fa>>6&255;ha=fa>>2&B;if(ha!==(X*N>>3&B))throw"integrity issue";if(W&&0===pa)throw"integrity issue";fa&=3;if(3<fa)throw a.ptr+=Y,"Invalid block encoding ("+fa+")";if(2===fa){if(W)if(qa)for(K=0;K<V;K++)for(G=0;G<Z;G++)qa[ca]&&(ja[ca]=ma[ca]),ca++;else for(K=0;K<V;K++)for(G=0;G<Z;G++)ja[ca]=ma[ca],ca++;a.counter.constant++;a.ptr+=Y}else if(0===fa){if(W)throw"integrity issue";a.counter.uncompressed++;a.ptr+=Y;ma=V*Z*M;Y=e.byteLength-a.ptr;ma=ma<Y?ma:Y;Y=new ArrayBuffer(0===
ma%M?ma:ma+M-ma%M);W=new Uint8Array(Y);W.set(new Uint8Array(e,a.ptr,ma));Y=new h(Y);ma=0;if(qa)for(K=0;K<V;K++){for(G=0;G<Z;G++)qa[ca]&&(ja[ca]=Y[ma++]),ca++;ca+=ka}else for(K=0;K<V;K++){for(G=0;G<Z;G++)ja[ca++]=Y[ma++];ca+=ka}a.ptr+=ma*M}else if(ia=d.getDataTypeUsed(W&&6>Q?4:Q,ia),ha=d.getOnePixel(G,Y,ia,K),Y+=d.getDataTypeSize(ia),3===fa)if(a.ptr+=Y,a.counter.constantoffset++,qa)for(K=0;K<V;K++){for(G=0;G<Z;G++)qa[ca]&&(ja[ca]=W?Math.min(R,ma[ca]+ha):ha),ca++;ca+=ka}else for(K=0;K<V;K++){for(G=
0;G<Z;G++)ja[ca]=W?Math.min(R,ma[ca]+ha):ha,ca++;ca+=ka}else if(a.ptr+=Y,d.decodeBits(e,a,ua,ha,pa),Y=0,W)if(qa)for(K=0;K<V;K++){for(G=0;G<Z;G++)qa[ca]&&(ja[ca]=ua[Y++]+ma[ca]),ca++;ca+=ka}else for(K=0;K<V;K++){for(G=0;G<Z;G++)ja[ca]=ua[Y++]+ma[ca],ca++;ca+=ka}else if(qa)for(K=0;K<V;K++){for(G=0;G<Z;G++)qa[ca]&&(ja[ca]=ua[Y++]),ca++;ca+=ka}else for(K=0;K<V;K++){for(G=0;G<Z;G++)ja[ca++]=ua[Y++];ca+=ka}}},formatFileInfo:function(e){return{fileIdentifierString:e.headerInfo.fileIdentifierString,fileVersion:e.headerInfo.fileVersion,
imageType:e.headerInfo.imageType,height:e.headerInfo.height,width:e.headerInfo.width,numValidPixel:e.headerInfo.numValidPixel,microBlockSize:e.headerInfo.microBlockSize,blobSize:e.headerInfo.blobSize,maxZError:e.headerInfo.maxZError,pixelType:d.getPixelType(e.headerInfo.imageType),eofOffset:e.eofOffset,mask:e.mask?{numBytes:e.mask.numBytes}:null,pixels:{numBlocksX:e.pixels.numBlocksX,numBlocksY:e.pixels.numBlocksY,maxValue:e.headerInfo.zMax,minValue:e.headerInfo.zMin,noDataValue:e.noDataValue}}},
constructConstantSurface:function(e){var a=e.headerInfo.zMax,h=e.headerInfo.numDims,c=e.headerInfo.height*e.headerInfo.width,l=0,D=0,N=0,Q=e.pixels.resultMask,M=e.pixels.resultPixels;if(Q)if(1<h)for(l=0;l<h;l++)for(N=l*c,a=e.headerInfo.maxValues[l],D=0;D<c;D++)Q[D]&&(M[N+D]=a);else for(D=0;D<c;D++)Q[D]&&(M[D]=a);else if(1<h)for(l=0;l<h;l++)for(N=l*c,a=e.headerInfo.maxValues[l],D=0;D<c;D++)M[N+D]=a;else for(D=0;D<c;D++)M[D]=a},getDataTypeArray:function(e){switch(e){case 0:e=Int8Array;break;case 1:e=
Uint8Array;break;case 2:e=Int16Array;break;case 3:e=Uint16Array;break;case 4:e=Int32Array;break;case 5:e=Uint32Array;break;case 6:e=Float32Array;break;case 7:e=Float64Array;break;default:e=Float32Array}return e},getPixelType:function(e){switch(e){case 0:e="S8";break;case 1:e="U8";break;case 2:e="S16";break;case 3:e="U16";break;case 4:e="S32";break;case 5:e="U32";break;case 6:e="F32";break;case 7:e="F64";break;default:e="F32"}return e},isValidPixelValue:function(e,a){if(null==a)return!1;switch(e){case 0:e=
-128<=a&&127>=a;break;case 1:e=0<=a&&255>=a;break;case 2:e=-32768<=a&&32767>=a;break;case 3:e=0<=a&&65536>=a;break;case 4:e=-2147483648<=a&&2147483647>=a;break;case 5:e=0<=a&&4294967296>=a;break;case 6:e=-3.4027999387901484E38<=a&&3.4027999387901484E38>=a;break;case 7:e=4.9E-324<=a&&1.7976931348623157E308>=a;break;default:e=!1}return e},getDataTypeSize:function(e){var a=0;switch(e){case 0:case 1:a=1;break;case 2:case 3:a=2;break;case 4:case 5:case 6:a=4;break;case 7:a=8;break;default:a=e}return a},
getDataTypeUsed:function(e,a){var h=e;switch(e){case 2:case 4:h=e-a;break;case 3:case 5:h=e-2*a;break;case 6:h=0===a?e:1===a?2:1;break;case 7:h=0===a?e:e-2*a+1;break;default:h=e}return h},getOnePixel:function(e,a,h,c){e=0;switch(h){case 0:e=c.getInt8(a);break;case 1:e=c.getUint8(a);break;case 2:e=c.getInt16(a,!0);break;case 3:e=c.getUint16(a,!0);break;case 4:e=c.getInt32(a,!0);break;case 5:e=c.getUInt32(a,!0);break;case 6:e=c.getFloat32(a,!0);break;case 7:e=c.getFloat64(a,!0);break;default:throw"the decoder does not understand this pixel type";
}return e}},u=function(e,a,h){this.val=e;this.left=a;this.right=h};return{decode:function(e,a){a=a||{};var h=a.noDataValue,c=0,l={};l.ptr=a.inputOffset||0;l.pixels={};if(d.readHeaderInfo(e,l)){c=l.headerInfo;var D=c.fileVersion,N=d.getDataTypeArray(c.imageType);if(5<D)throw"unsupported lerc version 2."+D;d.readMask(e,l);c.numValidPixel===c.width*c.height||l.pixels.resultMask||(l.pixels.resultMask=a.maskData);var Q=c.width*c.height;l.pixels.resultPixels=new N(Q*c.numDims);l.counter={onesweep:0,uncompressed:0,
lut:0,bitstuffer:0,constant:0,constantoffset:0};if(0!==c.numValidPixel)if(c.zMax===c.zMin)d.constructConstantSurface(l);else if(4<=D&&d.checkMinMaxRanges(e,l))d.constructConstantSurface(l);else{var M=new DataView(e,l.ptr,2),T=M.getUint8(0);l.ptr++;if(T)d.readDataOneSweep(e,l,N);else if(1<D&&1>=c.imageType&&1E-5>Math.abs(c.maxZError-.5)){M=M.getUint8(1);l.ptr++;l.encodeMode=M;if(2<M||4>D&&1<M)throw"Invalid Huffman flag "+M;M?d.readHuffman(e,l,N):d.readTiles(e,l,N)}else d.readTiles(e,l,N)}l.eofOffset=
l.ptr;a.inputOffset?(e=l.headerInfo.blobSize+a.inputOffset-l.ptr,1<=Math.abs(e)&&(l.eofOffset=a.inputOffset+l.headerInfo.blobSize)):(e=l.headerInfo.blobSize-l.ptr,1<=Math.abs(e)&&(l.eofOffset=l.headerInfo.blobSize));e={width:c.width,height:c.height,pixelData:l.pixels.resultPixels,minValue:c.zMin,maxValue:c.zMax,validPixelCount:c.numValidPixel,dimCount:c.numDims,dimStats:{minValues:c.minValues,maxValues:c.maxValues},maskData:l.pixels.resultMask};if(l.pixels.resultMask&&d.isValidPixelValue(c.imageType,
h)){D=l.pixels.resultMask;for(c=0;c<Q;c++)D[c]||(e.pixelData[c]=h);e.noDataValue=h}l.noDataValue=h;a.returnFileInfo&&(e.fileInfo=d.formatFileInfo(l));return e}},getBandCount:function(e){for(var a=0,h=0,c={ptr:0,pixels:{}};h<e.byteLength-58;)d.readHeaderInfo(e,c),h+=c.headerInfo.blobSize,a++,c.ptr=h;return a}}})}),C=function(t){function b(a){var h,c;this.data=a;this.pos=8;this.palette=[];this.imgData=[];this.transparency={};this.animation=null;this.text={};for(c=null;;){var l=this.readUInt32();var D=
a=void 0;a=[];for(D=0;4>D;++D)a.push(String.fromCharCode(this.data[this.pos++]));a=a.join("");switch(a){case "IHDR":this.width=this.readUInt32();this.height=this.readUInt32();this.bits=this.data[this.pos++];this.colorType=this.data[this.pos++];this.compressionMethod=this.data[this.pos++];this.filterMethod=this.data[this.pos++];this.interlaceMethod=this.data[this.pos++];break;case "acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||Infinity,frames:[]};break;case "PLTE":this.palette=
this.read(l);break;case "fcTL":c&&this.animation.frames.push(c);this.pos+=4;c={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()};a=this.readUInt16();l=this.readUInt16()||100;c.delay=1E3*a/l;c.disposeOp=this.data[this.pos++];c.blendOp=this.data[this.pos++];c.data=[];break;case "IDAT":case "fdAT":"fdAT"===a&&(this.pos+=4,l-=4);a=(null!=c?c.data:void 0)||this.imgData;for(D=0;0<=l?D<l:D>l;0<=l?++D:--D)a.push(this.data[this.pos++]);break;case "tRNS":this.transparency=
{};switch(this.colorType){case 3:this.transparency.indexed=this.read(l);l=255-this.transparency.indexed.length;if(0<l)for(a=0;0<=l?a<l:a>l;0<=l?++a:--a)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(l)[0];break;case 2:this.transparency.rgb=this.read(l)}break;case "tEXt":D=this.read(l);l=D.indexOf(0);a=String.fromCharCode.apply(String,D.slice(0,l));this.text[a]=String.fromCharCode.apply(String,D.slice(l+1));break;case "IEND":c&&this.animation.frames.push(c);
a:{switch(this.colorType){case 0:case 3:case 4:c=1;break a;case 2:case 6:c=3;break a}c=void 0}this.colors=c;this.hasAlphaChannel=4===(h=this.colorType)||6===h;h=this.colors+(this.hasAlphaChannel?1:0);this.pixelBitlength=this.bits*h;a:{switch(this.colors){case 1:h="DeviceGray";break a;case 3:h="DeviceRGB";break a}h=void 0}this.colorSpace=h;this.imgData=new Uint8Array(this.imgData);return;default:this.pos+=l}this.pos+=4;if(this.pos>this.data.length)throw Error("Incomplete or corrupt PNG file");}}var d;
b.load=function(a,h,c){"function"===typeof h&&(c=h);var l=new XMLHttpRequest;l.open("GET",a,!0);l.responseType="arraybuffer";l.onload=function(){var D=new Uint8Array(l.response||l.mozResponseArrayBuffer);D=new b(D);"function"===typeof(null!=h?h.getContext:void 0)&&D.render(h);return"function"===typeof c?c(D):void 0};return l.send(null)};b.prototype.read=function(a){var h;var c=[];for(h=0;0<=a?h<a:h>a;0<=a?++h:--h)c.push(this.data[this.pos++]);return c};b.prototype.readUInt32=function(){var a=this.data[this.pos++]<<
24;var h=this.data[this.pos++]<<16;var c=this.data[this.pos++]<<8;var l=this.data[this.pos++];return a|h|c|l};b.prototype.readUInt16=function(){var a=this.data[this.pos++]<<8;var h=this.data[this.pos++];return a|h};b.prototype.decodePixels=function(a){var h,c,l,D,N,Q,M,T;null==a&&(a=this.imgData);if(0===a.length)return new Uint8Array(0);a=new y.Zlib(a);a=a.getBytes();var P=this.pixelBitlength/8;var K=P*this.width;var G=new Uint8Array(K*this.height);var O=a.length;for(c=D=N=0;D<O;){switch(a[D++]){case 0:for(l=
h=0;h<K;l=h+=1)G[c++]=a[D++];break;case 1:for(l=Q=0;Q<K;l=Q+=1){h=a[D++];var X=l<P?0:G[c-P];G[c++]=(h+X)%256}break;case 2:for(l=X=0;X<K;l=X+=1){h=a[D++];var V=(l-l%P)/P;Q=N&&G[(N-1)*K+V*P+l%P];G[c++]=(Q+h)%256}break;case 3:for(l=T=0;T<K;l=T+=1)h=a[D++],V=(l-l%P)/P,X=l<P?0:G[c-P],Q=N&&G[(N-1)*K+V*P+l%P],G[c++]=(h+Math.floor((X+Q)/2))%256;break;case 4:for(l=T=0;T<K;l=T+=1){h=a[D++];V=(l-l%P)/P;X=l<P?0:G[c-P];0===N?Q=M=0:(Q=G[(N-1)*K+V*P+l%P],M=V&&G[(N-1)*K+(V-1)*P+l%P]);var Z=X+Q-M;l=Math.abs(Z-X);
V=Math.abs(Z-Q);Z=Math.abs(Z-M);X=l<=V&&l<=Z?X:V<=Z?Q:M;G[c++]=(h+X)%256}break;default:throw Error("Invalid filter algorithm: "+a[D-1]);}N++}return G};b.prototype.decodePalette=function(){var a,h,c,l,D;var N=this.palette;var Q=this.transparency.indexed||[];var M=new Uint8Array((Q.length||0)+N.length);var T=c=a=h=0;for(l=N.length;c<l;T=c+=3)M[h++]=N[T],M[h++]=N[T+1],M[h++]=N[T+2],M[h++]=null!=(D=Q[a++])?D:255;return M};b.prototype.copyToImageData=function(a,h){var c,l;var D=this.colors;var N=null;
var Q=this.hasAlphaChannel;this.palette.length&&(N=null!=(c=this._decodedPalette)?c:this._decodedPalette=this.decodePalette(),D=4,Q=!0);a=a.data||a;var M=a.length;var T=N||h;c=l=0;if(1===D)for(;c<M;)D=N?4*h[c/4]:l,l=T[D++],a[c++]=l,a[c++]=l,a[c++]=l,a[c++]=Q?T[D++]:this.transparency.grayscale&&this.transparency.grayscale===l?0:255,l=D;else for(;c<M;)D=N?4*h[c/4]:l,a[c++]=T[D++],a[c++]=T[D++],a[c++]=T[D++],a[c++]=Q?T[D++]:this.transparency.rgb&&this.transparency.rgb[1]===T[D-3]&&this.transparency.rgb[3]===
T[D-2]&&this.transparency.rgb[5]===T[D-1]?0:255,l=D};b.prototype.decode=function(){var a=new Uint8Array(this.width*this.height*4);this.copyToImageData(a,this.decodePixels());return a};var u=(d=t.document&&t.document.createElement("canvas"))&&d.getContext("2d");var e=function(a){u.width=a.width;u.height=a.height;u.clearRect(0,0,a.width,a.height);u.putImageData(a,0,0);a=new Image;a.src=d.toDataURL();return a};b.prototype.decodeFrames=function(a){var h,c;if(this.animation){var l=this.animation.frames;
var D=[];var N=h=0;for(c=l.length;h<c;N=++h){N=l[N];var Q=a.createImageData(N.width,N.height);var M=this.decodePixels(new Uint8Array(N.data));this.copyToImageData(Q,M);N.imageData=Q;D.push(N.image=e(Q))}return D}};b.prototype.renderFrame=function(a,h){var c=this.animation.frames;var l=c[h];c=c[h-1];0===h&&a.clearRect(0,0,this.width,this.height);1===(null!=c?c.disposeOp:void 0)?a.clearRect(c.xOffset,c.yOffset,c.width,c.height):2===(null!=c?c.disposeOp:void 0)&&a.putImageData(c.imageData,c.xOffset,
c.yOffset);0===l.blendOp&&a.clearRect(l.xOffset,l.yOffset,l.width,l.height);return a.drawImage(l.image,l.xOffset,l.yOffset)};b.prototype.animate=function(a){var h,c=this;var l=0;var D=this.animation;var N=D.numFrames;var Q=D.frames;var M=D.numPlays;return(h=function(){var T=l++%N;var P=Q[T];c.renderFrame(a,T);if(1<N&&l/N<M)return c.animation._timeout=setTimeout(h,P.delay)})()};b.prototype.stopAnimation=function(){var a;return clearTimeout(null!=(a=this.animation)?a._timeout:void 0)};b.prototype.render=
function(a){a._png&&a._png.stopAnimation();a._png=this;a.width=this.width;a.height=this.height;a=a.getContext("2d");if(this.animation)return this.decodeFrames(a),this.animate(a);var h=a.createImageData(this.width,this.height);this.copyToImageData(h,this.decodePixels());return a.putImageData(h,0,0)};return b}(self);const E=new Set(["jpg","png","bmp","gif"]);U.decode=async function(t,b,d){if(null==t)throw new H("rasterCodec:decode","missing encodeddata parameter.");if(null==b||null==b.width||null==
b.height)throw new H("rasterCodec:decode","requires width and height in options parameter.");let u=b.format&&b.format.toLowerCase();if("tiff"===u&&b.customOptions)return b=v.decodeTileOrStrip(t,b.customOptions),b=new A({width:b.width,height:b.height,pixels:b.pixels,pixelType:b.pixelType.toLowerCase(),mask:b.mask,statistics:null}),b.updateStatistics(),b;if(!u||"bsq"!==u&&"bip"!==u)u=p(t);b.useCanvas&&E.has(u)?t=await q(t,u,b,d):(d=x(u),b.isPoint&&(b={...b},b.width++,b.height++),t=d(t,b),b.isPoint&&
m(t));return t};U.getFormat=function(t){t=p(t);"lerc2"===t?t="lerc":"error"===t&&(t="");return t};Object.defineProperty(U,"__esModule",{value:!0})})},"esri/chunks/_commonjsHelpers":function(){define(["exports"],function(U){function H(){throw Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs");}U.commonjsGlobal="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};U.commonjsRequire=
H;U.createCommonjsModule=function(A,aa,y){return y={path:aa,exports:{},require:function(J,I){return H(J,void 0===I||null===I?y.path:I)}},A(y,y.exports),y.exports};U.getDefaultExportFromCjs=function(A){return A&&A.__esModule&&Object.prototype.hasOwnProperty.call(A,"default")?A["default"]:A}})},"esri/chunks/Zlib":function(){define(["exports","./_commonjsHelpers"],function(U,H){H=H.createCommonjsModule(function(A){(function(aa){aa=aa();void 0!==aa&&(A.exports=aa)})(function(){var aa=function(){function y(){this.bufferLength=
this.pos=0;this.eof=!1;this.buffer=null}y.prototype={ensureBuffer:function(J){var I=this.buffer,S=I?I.byteLength:0;if(J<S)return I;for(var F=512;F<J;)F<<=1;J=new Uint8Array(F);for(F=0;F<S;++F)J[F]=I[F];return this.buffer=J},getByte:function(){for(var J=this.pos;this.bufferLength<=J;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},getBytes:function(J){var I=this.pos;if(J){this.ensureBuffer(I+J);for(J=I+J;!this.eof&&this.bufferLength<J;)this.readBlock();var S=this.bufferLength;
J>S&&(J=S)}else{for(;!this.eof;)this.readBlock();J=this.bufferLength}this.pos=J;return this.buffer.subarray(I,J)},lookChar:function(){for(var J=this.pos;this.bufferLength<=J;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var J=this.pos;this.bufferLength<=J;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(J,I,S){for(var F=J+I;this.bufferLength<=F&&!this.eof;)this.readBlock();
return new Stream(this.buffer,J,I,S)},skip:function(J){J||(J=1);this.pos+=J},reset:function(){this.pos=0}};return y}();return function(){function y(z){throw Error(z);}function J(z){var g=0,n=z[g++],k=z[g++];-1!=n&&-1!=k||y("Invalid header in flate stream");8!=(n&15)&&y("Unknown compression method in flate stream");0!=((n<<8)+k)%31&&y("Bad FCHECK in flate stream");k&32&&y("FDICT bit set in flate stream");this.bytes=z;this.bytesPos=g;this.codeBuf=this.codeSize=0;aa.call(this)}if(!self||!self.Uint32Array)return null;
var I=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),S=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),F=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),L=[new Uint32Array([459008,524368,
524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59E4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,
524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,
524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,
524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,
524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,
524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,
524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,
524335,590015,524303,524431,524367,590079]),9],v=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];J.prototype=Object.create(aa.prototype);J.prototype.getBits=function(z){for(var g=this.codeSize,n=this.codeBuf,k=this.bytes,w=this.bytesPos,q;g<z;)"undefined"==typeof(q=k[w++])&&y("Bad encoding in flate stream"),n|=
q<<g,g+=8;this.codeBuf=n>>z;this.codeSize=g-=z;this.bytesPos=w;return n&(1<<z)-1};J.prototype.getCode=function(z){var g=z[0],n=z[1];z=this.codeSize;for(var k=this.codeBuf,w=this.bytes,q=this.bytesPos;z<n;){var p;"undefined"==typeof(p=w[q++])&&y("Bad encoding in flate stream");k|=p<<z;z+=8}n=g[k&(1<<n)-1];g=n>>16;n&=65535;(0==z||z<g||0==g)&&y("Bad encoding in flate stream");this.codeBuf=k>>g;this.codeSize=z-g;this.bytesPos=q;return n};J.prototype.generateHuffmanTable=function(z){for(var g=z.length,
n=0,k=0;k<g;++k)z[k]>n&&(n=z[k]);for(var w=1<<n,q=new Uint32Array(w),p=1,x=0,r=2;p<=n;++p,x<<=1,r<<=1)for(var m=0;m<g;++m)if(z[m]==p){var f=0,C=x;for(k=0;k<p;++k)f=f<<1|C&1,C>>=1;for(k=f;k<w;k+=r)q[k]=p<<16|m;++x}return[q,n]};J.prototype.readBlock=function(){function z(f,C,E,t,b){for(f=f.getBits(E)+t;0<f--;)C[x++]=b}var g=this.getBits(3);g&1&&(this.eof=!0);g>>=1;if(0==g){var n=this.bytes,k=this.bytesPos,w;"undefined"==typeof(w=n[k++])&&y("Bad block header in flate stream");var q=w;"undefined"==typeof(w=
n[k++])&&y("Bad block header in flate stream");q|=w<<8;"undefined"==typeof(w=n[k++])&&y("Bad block header in flate stream");g=w;"undefined"==typeof(w=n[k++])&&y("Bad block header in flate stream");(g|w<<8)!=(~q&65535)&&y("Bad uncompressed block length in flate stream");this.codeSize=this.codeBuf=0;w=this.bufferLength;g=this.ensureBuffer(w+q);this.bufferLength=q=w+q;for(var p=w;p<q;++p){if("undefined"==typeof(w=n[k++])){this.eof=!0;break}g[p]=w}this.bytesPos=k}else{if(1==g)k=L,w=v;else if(2==g){g=
this.getBits(5)+257;w=this.getBits(5)+1;n=this.getBits(4)+4;k=Array(I.length);for(var x=0;x<n;)k[I[x++]]=this.getBits(3);k=this.generateHuffmanTable(k);x=n=0;w=g+w;for(q=Array(w);x<w;)p=this.getCode(k),16==p?z(this,q,2,3,n):17==p?z(this,q,3,3,n=0):18==p?z(this,q,7,11,n=0):q[x++]=n=p;k=this.generateHuffmanTable(q.slice(0,g));w=this.generateHuffmanTable(q.slice(g,w))}else y("Unknown block type in flate stream");q=(g=this.buffer)?g.length:0;for(p=this.bufferLength;;){var r=this.getCode(k);if(256>r)p+
1>=q&&(g=this.ensureBuffer(p+1),q=g.length),g[p++]=r;else{if(256==r){this.bufferLength=p;break}r-=257;r=S[r];var m=r>>16;0<m&&(m=this.getBits(m));n=(r&65535)+m;r=this.getCode(w);r=F[r];m=r>>16;0<m&&(m=this.getBits(m));r=(r&65535)+m;p+n>=q&&(g=this.ensureBuffer(p+n),q=g.length);for(m=0;m<n;++m,++p)g[p]=g[p-r]}}}};return J}()})});U.Zlib=H})},"esri/layers/support/rasterFormats/ImageCanvasDecoder":function(){define(["../../../core/Error","../../../core/promiseUtils","../../../chunks/Zlib"],function(U,
H,A){return function(){function aa(y){y&&(this.canvas=y.canvas,this.ctx=y.ctx||y.canvas&&y.canvas.getContext("2d"))}aa.prototype.decode=function(y,J,I){if(!y||10>y.byteLength)throw new U("imagecanvasdecoder: decode","required a valid encoded data as input.");let {width:S,height:F,format:L}=J;const {applyJpegMask:v}=J;if(v&&(!S||!F))throw new U("imagecanvasdecoder: decode","image width and height are needed to apply jpeg mask directly to canvas");return new Promise((z,g)=>{let n=null;"jpg"===L&&v&&
(n=aa.getMask(y,J));const k=new Blob([new Uint8Array(y)],{type:"jpg"==="image/"+L?"jpeg":L}),w=URL.createObjectURL(k),q=new Image;let p;q.src=w;q.onload=()=>{URL.revokeObjectURL(w);if(H.isAborted(I))g(H.createAbortError());else{S=q.width;F=q.height;if(this.canvas){if(this.canvas.width!==S||this.canvas.height!==F)this.canvas.width=S,this.canvas.height=F;this.ctx.clearRect(0,0,S,F)}else this.canvas=document.createElement("canvas"),this.canvas.width=S,this.canvas.height=F,this.ctx=this.canvas.getContext("2d");
this.ctx.drawImage(q,0,0);var x=this.ctx.getImageData(0,0,S,F);p=x.data;var r;if(J.renderOnCanvas){if(n)for(r=0;r<n.length;r++)p[4*r+3]=n[r]?255:0;this.ctx.putImageData(x,0,0);z(null)}else{x=S*F;var m=new Uint8Array(x),f=new Uint8Array(x),C=new Uint8Array(x);if(n)for(r=0;r<x;r++)m[r]=p[4*r],f[r]=p[4*r+1],C[r]=p[4*r+2];else for(n=new Uint8Array(x),r=0;r<x;r++)m[r]=p[4*r],f[r]=p[4*r+1],C[r]=p[4*r+2],n[r]=p[4*r+3];z({width:S,height:F,pixels:[m,f,C],mask:n,pixelType:"u8"})}}};q.onerror=()=>{URL.revokeObjectURL(w);
g("cannot load image")}})};aa.getMask=function(y,J){let I=null;try{var S=new Uint8Array(y);y=0;var F=S.length-2;for(y=Math.ceil(S.length/2);y<F&&(255!==S[y]||217!==S[y+1]);y++);y+=2;if(y<S.length-1){const L=(new A.Zlib(S.subarray(y))).getBytes();I=new Uint8Array(J.width*J.height);J=0;for(S=0;S<L.length;S++)for(F=7;0<=F;F--)I[J++]=L[S]>>F&1}}catch(L){}return I};return aa}()})},"esri/layers/support/rasterFormats/JpgPlus":function(){define(["../../../chunks/Zlib","../../../chunks/Jpg"],function(U,H){return function(){function A(){}
A.decode=function(aa){var y=new Uint8Array(aa);aa=new H.Jpg;aa.parse(y);const {width:J,height:I,numComponents:S,eof:F}=aa;aa=aa.getData(J,I,!0);let L;const v=J*I;let z=0;var g=0,n=0;if(F<y.length-1)for(y=(new U.Zlib(y.subarray(F))).getBytes(),L=new Uint8Array(v),z=g=0;z<y.length;z++)for(n=7;0<=n;n--)L[g++]=y[z]>>n&1;y=null;if(1===S)y=[aa,aa,aa];else{y=[];for(z=0;3>z;z++)n=new Uint8Array(v),y.push(n);for(g=n=0;g<v;g++)for(z=0;3>z;z++)y[z][g]=aa[n++]}return{width:J,height:I,pixels:y,mask:L}};return A}()})},
"esri/chunks/Jpg":function(){define(["exports","./_commonjsHelpers"],function(U,H){H=H.createCommonjsModule(function(A){(function(aa){aa=aa();void 0!==aa&&(A.exports=aa)})(function(){var aa=function(){function y(J){this.message="JPEG error: "+J}y.prototype=Error();y.prototype.name="JpegError";return y.constructor=y}();return function(){function y(){this.decodeTransform=null;this.colorTransform=-1}function J(v,z){for(var g=0,n=[],k,w,q=16;0<q&&!v[q-1];)q--;n.push({children:[],index:0});var p=n[0],
x;for(k=0;k<q;k++){for(w=0;w<v[k];w++){p=n.pop();for(p.children[p.index]=z[g];0<p.index;)p=n.pop();p.index++;for(n.push(p);n.length<=k;)n.push(x={children:[],index:0}),p.children[p.index]=x.children,p=x;g++}k+1<q&&(n.push(x={children:[],index:0}),p.children[p.index]=x.children,p=x)}return n[0].children}function I(v,z,g,n,k,w,q,p,x){function r(){if(0<c)return c--,h>>c&1;h=v[z++];if(255===h){var Y=v[z++];if(Y)throw new aa("unexpected marker "+(h<<8|Y).toString(16));}c=7;return h>>>7}function m(Y){for(;;){Y=
Y[r()];if("number"===typeof Y)return Y;if("object"!==typeof Y)throw new aa("invalid huffman sequence");}}function f(Y){for(var fa=0;0<Y;)fa=fa<<1|r(),Y--;return fa}function C(Y){if(1===Y)return 1===r()?1:-1;var fa=f(Y);return fa>=1<<Y-1?fa:fa+(-1<<Y)+1}function E(Y,fa){var ia=m(Y.huffmanTableDC);ia=0===ia?0:C(ia);Y.blockData[fa]=Y.pred+=ia;for(ia=1;64>ia;){var ha=m(Y.huffmanTableAC),ca=ha&15;ha>>=4;if(0===ca){if(15>ha)break;ia+=16}else ia+=ha,Y.blockData[fa+L[ia]]=C(ca),ia++}}function t(Y,fa){var ia=
m(Y.huffmanTableDC);ia=0===ia?0:C(ia)<<x;Y.blockData[fa]=Y.pred+=ia}function b(Y,fa){Y.blockData[fa]|=r()<<x}function d(Y,fa){if(0<l)l--;else for(var ia=w;ia<=q;){var ha=m(Y.huffmanTableAC),ca=ha&15;ha>>=4;if(0===ca){if(15>ha){l=f(ha)+(1<<ha)-1;break}ia+=16}else ia+=ha,Y.blockData[fa+L[ia]]=C(ca)*(1<<x),ia++}}function u(Y,fa){for(var ia=w,ha=0,ca;ia<=q;){ca=L[ia];switch(D){case 0:ha=m(Y.huffmanTableAC);ca=ha&15;ha>>=4;if(0===ca)15>ha?(l=f(ha)+(1<<ha),D=4):(ha=16,D=1);else{if(1!==ca)throw new aa("invalid ACn encoding");
N=C(ca);D=ha?2:3}continue;case 1:case 2:Y.blockData[fa+ca]?Y.blockData[fa+ca]+=r()<<x:(ha--,0===ha&&(D=2===D?3:0));break;case 3:Y.blockData[fa+ca]?Y.blockData[fa+ca]+=r()<<x:(Y.blockData[fa+ca]=N<<x,D=0);break;case 4:Y.blockData[fa+ca]&&(Y.blockData[fa+ca]+=r()<<x)}ia++}4===D&&(l--,0===l&&(D=0))}var e=g.mcusPerLine,a=z,h=0,c=0,l=0,D=0,N,Q=n.length,M,T,P,K;p=g.progressive?0===w?0===p?t:b:0===p?d:u:E;var G=0;g=1===Q?n[0].blocksPerLine*n[0].blocksPerColumn:e*g.mcusPerColumn;for(var O,X;G<g;){var V=k?
Math.min(g-G,k):g;for(M=0;M<Q;M++)n[M].pred=0;l=0;if(1===Q){var Z=n[0];for(K=0;K<V;K++)p(Z,64*((Z.blocksPerLine+1)*(G/Z.blocksPerLine|0)+G%Z.blocksPerLine)),G++}else for(K=0;K<V;K++){for(M=0;M<Q;M++)for(Z=n[M],O=Z.h,X=Z.v,T=0;T<X;T++)for(P=0;P<O;P++)p(Z,64*((Z.blocksPerLine+1)*((G/e|0)*Z.v+T)+(G%e*Z.h+P)));G++}c=0;(Z=F(v,z))&&Z.invalid&&(console.log("decodeScan - unexpected MCU data, next marker is: "+Z.invalid),z=Z.offset);Z=Z&&Z.marker;if(!Z||65280>=Z)throw new aa("marker was not found");if(65488<=
Z&&65495>=Z)z+=2;else break}(Z=F(v,z))&&Z.invalid&&(console.log("decodeScan - unexpected Scan data, next marker is: "+Z.invalid),z=Z.offset);return z-a}function S(v,z){v=z.blocksPerLine;for(var g=z.blocksPerColumn,n=new Int16Array(64),k=0;k<g;k++)for(var w=0;w<v;w++){var q=void 0,p=void 0,x=void 0,r=void 0,m=void 0,f=void 0,C=void 0,E=void 0,t=m=f=r=p=q=void 0,b=void 0,d=void 0,u=void 0,e=64*((z.blocksPerLine+1)*k+w),a=n,h=z.quantizationTable,c=z.blockData;if(!h)throw new aa("missing required Quantization Table.");
for(var l=0;64>l;l+=8)q=c[e+l],E=c[e+l+1],C=c[e+l+2],f=c[e+l+3],m=c[e+l+4],r=c[e+l+5],x=c[e+l+6],p=c[e+l+7],q*=h[l],0===(E|C|f|m|r|x|p)?(q=5793*q+512>>10,a[l]=q,a[l+1]=q,a[l+2]=q,a[l+3]=q,a[l+4]=q,a[l+5]=q,a[l+6]=q,a[l+7]=q):(E*=h[l+1],C*=h[l+2],f*=h[l+3],m*=h[l+4],r*=h[l+5],x*=h[l+6],p*=h[l+7],u=5793*q+128>>8,d=5793*m+128>>8,b=C,t=x,m=2896*(E-p)+128>>8,p=2896*(E+p)+128>>8,f<<=4,r<<=4,u=u+d+1>>1,d=u-d,q=3784*b+1567*t+128>>8,b=1567*b-3784*t+128>>8,t=q,m=m+r+1>>1,r=m-r,p=p+f+1>>1,f=p-f,u=u+t+1>>1,t=
u-t,d=d+b+1>>1,b=d-b,q=2276*m+3406*p+2048>>12,m=3406*m-2276*p+2048>>12,p=q,q=799*f+4017*r+2048>>12,f=4017*f-799*r+2048>>12,r=q,a[l]=u+p,a[l+7]=u-p,a[l+1]=d+r,a[l+6]=d-r,a[l+2]=b+f,a[l+5]=b-f,a[l+3]=t+m,a[l+4]=t-m);for(h=0;8>h;++h)q=a[h],E=a[h+8],C=a[h+16],f=a[h+24],m=a[h+32],r=a[h+40],x=a[h+48],p=a[h+56],0===(E|C|f|m|r|x|p)?(q=5793*q+8192>>14,q=-2040>q?0:2024<=q?255:q+2056>>4,c[e+h]=q,c[e+h+8]=q,c[e+h+16]=q,c[e+h+24]=q,c[e+h+32]=q,c[e+h+40]=q,c[e+h+48]=q,c[e+h+56]=q):(u=5793*q+2048>>12,d=5793*m+2048>>
12,b=C,t=x,m=2896*(E-p)+2048>>12,p=2896*(E+p)+2048>>12,u=(u+d+1>>1)+4112,d=u-d,q=3784*b+1567*t+2048>>12,b=1567*b-3784*t+2048>>12,t=q,m=m+r+1>>1,r=m-r,p=p+f+1>>1,f=p-f,u=u+t+1>>1,t=u-t,d=d+b+1>>1,b=d-b,q=2276*m+3406*p+2048>>12,m=3406*m-2276*p+2048>>12,p=q,q=799*f+4017*r+2048>>12,f=4017*f-799*r+2048>>12,r=q,q=u+p,p=u-p,E=d+r,x=d-r,C=b+f,r=b-f,f=t+m,m=t-m,q=16>q?0:4080<=q?255:q>>4,E=16>E?0:4080<=E?255:E>>4,C=16>C?0:4080<=C?255:C>>4,f=16>f?0:4080<=f?255:f>>4,m=16>m?0:4080<=m?255:m>>4,r=16>r?0:4080<=r?
255:r>>4,x=16>x?0:4080<=x?255:x>>4,p=16>p?0:4080<=p?255:p>>4,c[e+h]=q,c[e+h+8]=E,c[e+h+16]=C,c[e+h+24]=f,c[e+h+32]=m,c[e+h+40]=r,c[e+h+48]=x,c[e+h+56]=p)}return z.blockData}function F(v,z,g){var n=v.length-1;g=g<z?g:z;if(z>=n)return null;var k=v[z]<<8|v[z+1];if(65472<=k&&65534>=k)return{invalid:null,marker:k,offset:z};for(z=v[g]<<8|v[g+1];!(65472<=z&&65534>=z);){if(++g>=n)return null;z=v[g]<<8|v[g+1]}return{invalid:k.toString(16),marker:z,offset:g}}if(!self||!self.Uint8ClampedArray)return null;var L=
new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);y.prototype={parse:function(v){function z(){var h=v[k]<<8|v[k+1];k+=2;return h}function g(){var h=z();h=k+h-2;var c=F(v,h,k);c&&c.invalid&&(console.log("readDataBlock - incorrect length, next marker is: "+c.invalid),h=c.offset);h=v.subarray(k,h);k+=h.length;return h}function n(h){for(var c=Math.ceil(h.samplesPerLine/
8/h.maxH),l=Math.ceil(h.scanLines/8/h.maxV),D=0;D<h.components.length;D++){a=h.components[D];var N=Math.ceil(Math.ceil(h.samplesPerLine/8)*a.h/h.maxH),Q=Math.ceil(Math.ceil(h.scanLines/8)*a.v/h.maxV);a.blockData=new Int16Array(64*l*a.v*(c*a.h+1));a.blocksPerLine=N;a.blocksPerColumn=Q}h.mcusPerLine=c;h.mcusPerColumn=l}var k=0,w=null,q=null,p=[],x=[],r=[],m=z();if(65496!==m)throw new aa("SOI not found");for(m=z();65497!==m;){switch(m){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var f=
g();65504===m&&74===f[0]&&70===f[1]&&73===f[2]&&70===f[3]&&0===f[4]&&(w={version:{major:f[5],minor:f[6]},densityUnits:f[7],xDensity:f[8]<<8|f[9],yDensity:f[10]<<8|f[11],thumbWidth:f[12],thumbHeight:f[13],thumbData:f.subarray(14,14+3*f[12]*f[13])});65518===m&&65===f[0]&&100===f[1]&&111===f[2]&&98===f[3]&&101===f[4]&&(q={version:f[5]<<8|f[6],flags0:f[7]<<8|f[8],flags1:f[9]<<8|f[10],transformCode:f[11]});break;case 65499:m=z()+k-2;for(var C;k<m;){var E=v[k++],t=new Uint16Array(64);if(0===E>>4)for(f=
0;64>f;f++)C=L[f],t[C]=v[k++];else if(1===E>>4)for(f=0;64>f;f++)C=L[f],t[C]=z();else throw new aa("DQT - invalid table spec");p[E&15]=t}break;case 65472:case 65473:case 65474:if(b)throw new aa("Only single frame JPEGs supported");z();var b={};b.extended=65473===m;b.progressive=65474===m;b.precision=v[k++];b.scanLines=z();b.samplesPerLine=z();b.components=[];b.componentIds={};f=v[k++];for(m=t=E=0;m<f;m++){C=v[k];var d=v[k+1]>>4;var u=v[k+1]&15;E<d&&(E=d);t<u&&(t=u);d=b.components.push({h:d,v:u,quantizationId:v[k+
2],quantizationTable:null});b.componentIds[C]=d-1;k+=3}b.maxH=E;b.maxV=t;n(b);break;case 65476:C=z();for(m=2;m<C;){E=v[k++];t=new Uint8Array(16);for(f=d=0;16>f;f++,k++)d+=t[f]=v[k];u=new Uint8Array(d);for(f=0;f<d;f++,k++)u[f]=v[k];m+=17+d;(0===E>>4?r:x)[E&15]=J(t,u)}break;case 65501:z();var e=z();break;case 65498:z();C=v[k++];f=[];for(m=0;m<C;m++){E=b.componentIds[v[k++]];var a=b.components[E];E=v[k++];a.huffmanTableDC=r[E>>4];a.huffmanTableAC=x[E&15];f.push(a)}m=v[k++];C=v[k++];E=v[k++];m=I(v,k,
b,f,e,m,C,E>>4,E&15);k+=m;break;case 65535:255!==v[k]&&k--;break;default:if(255===v[k-3]&&192<=v[k-2]&&254>=v[k-2])k-=3;else throw new aa("unknown marker "+m.toString(16));}m=z()}this.width=b.samplesPerLine;this.height=b.scanLines;this.jfif=w;this.eof=k;this.adobe=q;this.components=[];for(m=0;m<b.components.length;m++){a=b.components[m];if(w=p[a.quantizationId])a.quantizationTable=w;this.components.push({output:S(b,a),scaleX:a.h/b.maxH,scaleY:a.v/b.maxV,blocksPerLine:a.blocksPerLine,blocksPerColumn:a.blocksPerColumn})}this.numComponents=
this.components.length},_getLinearizedBlockData:function(v,z){var g=this.width/v,n=this.height/z,k,w,q=0,p=this.components.length,x=v*z*p,r=new Uint8ClampedArray(x),m=new Uint32Array(v);for(w=0;w<p;w++){var f=this.components[w];var C=f.scaleX*g;var E=f.scaleY*n;q=w;var t=f.output;var b=f.blocksPerLine+1<<3;for(k=0;k<v;k++)f=0|k*C,m[k]=(f&4294967288)<<3|f&7;for(C=0;C<z;C++)for(f=0|C*E,f=b*(f&4294967288)|(f&7)<<3,k=0;k<v;k++)r[q]=t[f+m[k]],q+=p}if(z=this.decodeTransform)for(w=0;w<x;)for(v=f=0;f<p;f++,
w++,v+=2)r[w]=(r[w]*z[v]>>8)+z[v+1];return r},_isColorConversionNeeded:function(){return this.adobe?!!this.adobe.transformCode:3===this.numComponents?0===this.colorTransform?!1:!0:1===this.colorTransform?!0:!1},_convertYccToRgb:function(v){for(var z,g,n,k=0,w=v.length;k<w;k+=3)z=v[k],g=v[k+1],n=v[k+2],v[k]=z-179.456+1.402*n,v[k+1]=z+135.459-.344*g-.714*n,v[k+2]=z-226.816+1.772*g;return v},_convertYcckToRgb:function(v){for(var z,g,n,k,w=0,q=0,p=v.length;q<p;q+=4)z=v[q],g=v[q+1],n=v[q+2],k=v[q+3],v[w++]=
-122.67195406894+g*(-6.60635669420364E-5*g+4.37130475926232E-4*n-5.4080610064599E-5*z+4.8449797120281E-4*k-.154362151871126)+n*(-9.57964378445773E-4*n+8.17076911346625E-4*z-.00477271405408747*k+1.53380253221734)+z*(9.61250184130688E-4*z-.00266257332283933*k+.48357088451265)+k*(-3.36197177618394E-4*k+.484791561490776),v[w++]=107.268039397724+g*(2.19927104525741E-5*g-6.40992018297945E-4*n+6.59397001245577E-4*z+4.26105652938837E-4*k-.176491792462875)+n*(-7.78269941513683E-4*n+.00130872261408275*z+7.70482631801132E-4*
k-.151051492775562)+z*(.00126935368114843*z-.00265090189010898*k+.25802910206845)+k*(-3.18913117588328E-4*k-.213742400323665),v[w++]=-20.810012546947+g*(-5.70115196973677E-4*g-2.63409051004589E-5*n+.0020741088115012*z-.00288260236853442*k+.814272968359295)+n*(-1.53496057440975E-5*n-1.32689043961446E-4*z+5.60833691242812E-4*k-.195152027534049)+z*(.00174418132927582*z-.00255243321439347*k+.116935020465145)+k*(-3.43531996510555E-4*k+.24165260232407);return v},_convertYcckToCmyk:function(v){for(var z,
g,n,k=0,w=v.length;k<w;k+=4)z=v[k],g=v[k+1],n=v[k+2],v[k]=434.456-z-1.402*n,v[k+1]=119.541-z+.344*g+.714*n,v[k+2]=481.816-z-1.772*g;return v},_convertCmykToRgb:function(v){for(var z,g,n,k,w=0,q=1/255,p=0,x=v.length;p<x;p+=4)z=v[p]*q,g=v[p+1]*q,n=v[p+2]*q,k=v[p+3]*q,v[w++]=255+z*(-4.387332384609988*z+54.48615194189176*g+18.82290502165302*n+212.25662451639585*k-285.2331026137004)+g*(1.7149763477362134*g-5.6096736904047315*n-17.873870861415444*k-5.497006427196366)+n*(-2.5217340131683033*n-21.248923337353073*
k+17.5119270841813)-k*(21.86122147463605*k+189.48180835922747),v[w++]=255+z*(8.841041422036149*z+60.118027045597366*g+6.871425592049007*n+31.159100130055922*k-79.2970844816548)+g*(-15.310361306967817*g+17.575251261109482*n+131.35250912493976*k-190.9453302588951)+n*(4.444339102852739*n+9.8632861493405*k-24.86741582555878)-k*(20.737325471181034*k+187.80453709719578),v[w++]=255+z*(.8842522430003296*z+8.078677503112928*g+30.89978309703729*n-.23883238689178934*k-14.183576799673286)+g*(10.49593273432072*
g+63.02378494754052*n+50.606957656360734*k-112.23884253719248)+n*(.03296041114873217*n+115.60384449646641*k-193.58209356861505)-k*(22.33816807309886*k+180.12613974708367);return v},getData:function(v,z,g){if(4<this.numComponents)throw new aa("Unsupported color mode");v=this._getLinearizedBlockData(v,z);if(1===this.numComponents&&g){g=v.length;z=new Uint8ClampedArray(3*g);for(var n=0,k=0;k<g;k++){var w=v[k];z[n++]=w;z[n++]=w;z[n++]=w}return z}if(3===this.numComponents&&this._isColorConversionNeeded())return this._convertYccToRgb(v);
if(4===this.numComponents){if(this._isColorConversionNeeded())return g?this._convertYcckToRgb(v):this._convertYcckToCmyk(v);if(g)return this._convertCmykToRgb(v)}return v}};return y}()})});U.Jpg=H})},"esri/chunks/LercCodec":function(){define(["exports"],function(U){function H(J){A[0]=J;return A[0]}const A=new Float32Array(1),aa=H(3.4028234663852886E38);var y=H(Math.max(-aa,Math.min(-Infinity,aa)));U.decode=function(J,I){I=I||{};var S=I.inputOffset||0;var F=I.encodedMaskData||null===I.encodedMaskData;
var L=new Uint8Array(J,S,10);L=String.fromCharCode.apply(null,L);if("CntZImage"!=L.trim())throw"Unexpected file identifier string: "+L;S+=10;var v=new DataView(J,S,24);var z=v.getInt32(0,!0);var g=v.getInt32(4,!0);var n=v.getUint32(8,!0);var k=v.getUint32(12,!0);var w=v.getFloat64(16,!0);S+=24;if(!F){v=new DataView(J,S,16);var q={};q.numBlocksY=v.getUint32(0,!0);q.numBlocksX=v.getUint32(4,!0);q.numBytes=v.getUint32(8,!0);q.maxValue=v.getFloat32(12,!0);S+=16;if(0<q.numBytes){F=new Uint8Array(Math.ceil(k*
n/8));v=new DataView(J,S,q.numBytes);var p=v.getInt16(0,!0);var x=2;var r=0;do{if(0<p)for(;p--;)F[r++]=v.getUint8(x++);else{var m=v.getUint8(x++);for(p=-p;p--;)F[r++]=m}p=v.getInt16(x,!0);x+=2}while(x<q.numBytes);if(-32768!==p||r<F.length)throw"Unexpected end of mask RLE encoding";q.bitset=F;S+=q.numBytes}else 0===(q.numBytes|q.numBlocksY|q.maxValue)&&(F=new Uint8Array(Math.ceil(k*n/8)),q.bitset=F)}v=new DataView(J,S,16);var f=F=m=r=x=p=void 0;p=v.getUint32(0,!0);x=v.getUint32(4,!0);r=v.getUint32(8,
!0);m=v.getFloat32(12,!0);S+=16;f=x;F=p;f+=0<k%f?1:0;var C=F+(0<n%F?1:0);F=Array(f*C);for(var E=1E9,t=0,b=0;b<C;b++)for(var d=0;d<f;d++){var u=0;v=new DataView(J,S,Math.min(10,J.byteLength-S));var e={};F[t++]=e;var a=v.getUint8(0);u++;e.encoding=a&63;if(3<e.encoding)throw"Invalid block encoding ("+e.encoding+")";if(2===e.encoding)S++,E=Math.min(E,0);else{if(0!==a&&2!==a){a>>=6;e.offsetType=a;if(2===a)e.offset=v.getInt8(1),u++;else if(1===a)e.offset=v.getInt16(1,!0),u+=2;else if(0===a)e.offset=v.getFloat32(1,
!0),u+=4;else throw"Invalid block offset type";E=Math.min(e.offset,E);if(1===e.encoding)if(a=v.getUint8(u),u++,e.bitsPerPixel=a&63,a>>=6,e.numValidPixelsType=a,2===a)e.numValidPixels=v.getUint8(u),u++;else if(1===a)e.numValidPixels=v.getUint16(u,!0),u+=2;else if(0===a)e.numValidPixels=v.getUint32(u,!0),u+=4;else throw"Invalid valid pixel count type";}S+=u;if(3!=e.encoding)if(0===e.encoding){v=(r-1)/4;if(v!==Math.floor(v))throw"uncompressed block has invalid length";u=new ArrayBuffer(4*v);a=new Uint8Array(u);
a.set(new Uint8Array(J,S,4*v));u=new Float32Array(u);for(a=0;a<u.length;a++)E=Math.min(E,u[a]);e.rawData=u;S+=4*v}else 1===e.encoding&&(v=Math.ceil(e.numValidPixels*e.bitsPerPixel/8),u=new ArrayBuffer(4*Math.ceil(v/4)),a=new Uint8Array(u),a.set(new Uint8Array(J,S,v)),e.stuffedData=new Uint32Array(u),S+=v)}}f=E;J=S;S=null!=I.noDataValue?H(Math.max(-aa,Math.min(I.noDataValue,aa))):y;C=I.encodedMaskData;a=I.returnMask;E=0;t=x;b=p;d=Math.floor(k/t);e=Math.floor(n/b);u=2*w;C=C||(q?q.bitset:null);var h;
v=new (I.pixelType||Float32Array)(k*n);a&&C&&(h=new Uint8Array(k*n));a=new Float32Array(d*e);for(var c,l,D=0;D<=b;D++){var N=D!==b?e:n%b;if(0!==N)for(var Q=0;Q<=t;Q++){var M=Q!==t?d:k%t;if(0!==M){var T=D*k*e+Q*d,P=k-M,K=F[E],G;if(2>K.encoding){if(0===K.encoding)var O=K.rawData;else{c=G=O=void 0;l=K.stuffedData;var X=K.bitsPerPixel,V=K.numValidPixels,Z=K.offset,Y=u,fa=a,ia=m,ha=(1<<X)-1,ca=0,ka=0,ma=Math.ceil((ia-Z)/Y);l[l.length-1]<<=8*(4*l.length-Math.ceil(X*V/8));for(c=0;c<V;c++)0===ka&&(O=l[ca++],
ka=32),ka>=X?(G=O>>>ka-X&ha,ka-=X):(ka=X-ka,G=(O&ha)<<ka&ha,O=l[ca++],ka=32-ka,G+=O>>>ka),fa[c]=G<ma?Z+G*Y:ia;O=a}G=0}else var ua=2===K.encoding?0:K.offset;if(C)for(l=0;l<N;l++){if(T&7){var ta=C[T>>3];ta<<=T&7}for(c=0;c<M;c++)T&7||(ta=C[T>>3]),ta&128?(h&&(h[T]=1),v[T++]=2>K.encoding?O[G++]:ua):(h&&(h[T]=0),v[T++]=S),ta<<=1;T+=P}else if(2>K.encoding)for(l=0;l<N;l++){for(c=0;c<M;c++)v[T++]=O[G++];T+=P}else for(l=0;l<N;l++)if(v.fill)v.fill(ua,T,T+M),T+=M+P;else{for(c=0;c<M;c++)v[T++]=ua;T+=P}if(1===
K.encoding&&G!==K.numValidPixels)throw"Block and Mask do not match";E++}}}ua=h;h={width:k,height:n,pixelData:v,minValue:f,maxValue:m,noDataValue:S};ua&&(h.maskData=ua);I.returnEncodedMask&&q&&(h.encodedMaskData=q.bitset?q.bitset:null);if(I.returnFileInfo&&(h.fileInfo={fileIdentifierString:L,fileVersion:z,imageType:g,height:n,width:k,maxZError:w,eofOffset:J,mask:q?{numBlocksX:q.numBlocksX,numBlocksY:q.numBlocksY,numBytes:q.numBytes,maxValue:q.maxValue}:null,pixels:{numBlocksX:x,numBlocksY:p,numBytes:r,
maxValue:m,minValue:f,noDataValue:S}},I.computeUsedBitDepths)){I=h.fileInfo;q=x*p;L={};for(z=0;z<q;z++)g=F[z],0===g.encoding?L.float32=!0:1===g.encoding?L[g.bitsPerPixel]=!0:L[0]=!0;q=Object.keys(L);I.bitDepths=q}return h}})},"esri/layers/support/rasterFormats/Raw":function(){define(function(){const U=function(H){let A=1;switch(H){case Uint8Array:case Int8Array:A=1;break;case Uint16Array:case Int16Array:A=2;break;case Uint32Array:case Int32Array:case Float32Array:A=4;break;case Float64Array:A=8}return A};
return function(){function H(){}H.decode=function(A,aa){var y=aa.pixelType;const J=[],I=aa.width*aa.height;var S=Math.floor(A.byteLength/(aa.width*aa.height*U(aa.pixelType)));const {bandIds:F,format:L}=aa;aa=F&&F.length||Math.floor(A.byteLength/(aa.width*aa.height*U(aa.pixelType)));var v=A.byteLength-A.byteLength%(I*U(y));const z=new y(A,0,I*S);let g,n;let k,w;if("bip"===L)for(g=0;g<aa;g++){k=new y(I);w=F?F[g]:g;for(n=0;n<I;n++)k[n]=z[n*S+w];J.push(k)}else if("bsq"===L)for(g=0;g<aa;g++)w=F?F[g]:g,
J.push(z.subarray(w*I,(w+1)*I));if(v<A.byteLength-1)if(A=A.slice(v),8*A.byteLength<I)var q=null;else{A=new Uint8Array(A,0,Math.ceil(I/8));y=new Uint8Array(I);for(aa=v=aa=q=S=0;aa<A.length-1;aa++)for(q=A[aa],v=7;0<=v;v--)y[S++]=q>>v&1;for(v=7;S<I-1;)q=A[A.length-1],y[S++]=q>>v&1,v--;q=y}return{pixels:J,mask:q}};return H}()})},"esri/layers/support/rasterFormats/utils":function(){define(["exports"],function(U){{var H=new ArrayBuffer(4);const A=new Uint8Array(H);(new Uint32Array(H))[0]=1;H=1===A[0]}U.isPlatformLittleEndian=
H;Object.defineProperty(U,"__esModule",{value:!0})})},"esri/layers/support/rasterFormats/TiffDecoder":function(){define("exports ../../../chunks/Zlib ../../../chunks/Jpg ../rasterDatasets/byteStreamUtils ./Lzw ./TiffTags ./utils".split(" "),function(U,H,A,aa,y,J,I){function S(b,d){let u="unknown";3===b?u="f32":1===b?1===d?u="u1":2===d?u="u2":4===d?u="u4":8>=d?u="u8":16>=d?u="u16":32>=d&&(u="u32"):2===b&&(8>=d?u="s8":16>=d?u="s16":32>=d&&(u="s32"));return u}function F(b){let d=null;switch(b?b.toLowerCase():
"f32"){case "u1":case "u2":case "u4":case "u8":d=Uint8Array;break;case "u16":d=Uint16Array;break;case "u32":d=Uint32Array;break;case "s8":d=Int8Array;break;case "s16":d=Int16Array;break;case "s32":d=Int32Array;break;default:d=Float32Array}return d}function L(b,d){return{x:d[0]*b.x+d[1]*b.y+d[2],y:d[3]*b.x+d[4]*b.y+d[5]}}function v(b,d){return(b=b.get(d))&&b.values}function z(b,d){return(b=b.get(d))&&b.values[0]}function g(b,d,u,e=0,a=J.TIFF_TAGS,h=4){var c=8===h;const l=c?q(new DataView(b,u,8),0,
d):(new DataView(b,u,2)).getUint16(0,d),D=4+2*h;var N=c?8:2;c=N+l*D;if(u+c>b.byteLength)return{success:!1,ifd:null,nextIFD:null,requiredBufferSize:c};const Q=u+c+4<=b.byteLength?p(new DataView(b,u+c,8===h?8:4),0,d,8===h):null;u+=N;N=new Map;let M,T,P,K,G;for(let X=0;X<l;X++){var O=new DataView(b,u+D*X,D);M=O.getUint16(0,d);P=O.getUint16(2,d);T=J.getTagName(M,a);const V=[];2===h?(K=O.getUint16(4,d),G=O.getUint16(6,d)):4===h?(K=O.getUint32(4,d),G=O.getUint32(8,d)):8===h&&(K=p(O,4,d,!0),G=p(O,12,d,!0),
V.push(O.getUint32(12,d)),V.push(O.getUint32(16,d)));O={id:M,type:P,valueCount:K,valueOffset:G,valueOffsets:V,values:null};n(b,d,O,e,!1,h);N.set(T,O)}return{success:!0,ifd:N,nextIFD:Q,requiredBufferSize:c}}function n(b,d,u,e=0,a=!1,h=4){if(u.values)return!0;var c=u.type,l=u.valueCount,D=u.valueOffset;let N=[];var Q=f[c],M=8*Q,T=l*Q,P=l*f[c]*8,K=8===h?64:32;h=u.valueOffsets;if(P>K&&T>(a?b.byteLength:b?b.byteLength-D+e:0))return u.offlineOffsetSize=[D,T],u.values=null,!1;if(P<=K)if(d||(32>=K?D>>>=32-
P:(b=null!=h&&h.length?h[0]:D>>>0,d=null!=h&&h.length?h[1]:Math.round((D-b)/4294967296),32>=P?(D=b>>>32-P,h[0]=D):(D=b*2**(32-P)+(d>>>32-P),h[0]=b,h[1]=d>>>32-P))),1===l&&M===K)N=[D];else if(64===K)for(b=null!=h&&h.length?h[0]:D>>>0,D=null!=h&&h.length?h[1]:Math.round((D-b)/4294967296),d=b,Q=32,b=1;b<=l;b++)T=32-M*b%32,Q<M?(T=d<<T>>>32-Q,P=D<<32-Q>>>32-Q,d=D,N.push(T+P*2**(M-Q)),Q-=32-(M-Q)):(N.push(d<<T>>>32-M),Q-=M),0===Q&&(Q=32,d=D);else for(b=1;b<=l;b++)N.push(D<<32-M*b>>>32-M);else for(D-=e,
a&&(D=0),l=D;l<D+T;l+=Q){switch(c){case 1:M=(new DataView(b,l,1)).getUint8(0);break;case 2:M=(new DataView(b,l,1)).getUint8(0);break;case 3:M=(new DataView(b,l,2)).getUint16(0,d);break;case 4:M=(new DataView(b,l,4)).getUint32(0,d);break;case 5:M=(new DataView(b,l,4)).getUint32(0,d)/(new DataView(b,l+4,4)).getUint32(0,d);break;case 6:M=(new DataView(b,l,1)).getInt8(0);break;case 7:M=(new DataView(b,l,1)).getUint8(0);break;case 8:M=(new DataView(b,l,2)).getInt16(0,d);break;case 9:M=(new DataView(b,
l,4)).getInt32(0,d);break;case 10:M=(new DataView(b,l,4)).getInt32(0,d)/(new DataView(b,l+4,4)).getInt32(0,d);break;case 11:M=(new DataView(b,l,4)).getFloat32(0,d);break;case 12:M=(new DataView(b,l,8)).getFloat64(0,d);break;case 16:case 18:M=q(new DataView(b,l,8),0,d);break;case 17:h=new DataView(b,l,8);P=(M=d)?h.getInt32(0,M):h.getUint32(0,M);h=M?h.getUint32(4,M):h.getInt32(4,M);K=0<=(M?P:h)?1:-1;M?P*=K:h*=K;M=K*(M?4294967296*h+P:4294967296*P+h);break;default:M=null}N.push(M)}if(2===c){c="";D=N;
N=[];for(b=0;b<D.length;b++)0===D[b]&&""!==c?(N.push(c),c=""):c+=String.fromCharCode(D[b]);""===c&&0!==N.length||N.push(c)}u.values=N;return!0}function k(b){var d=b[0];const u=z(d,"TILEWIDTH"),e=z(d,"TILELENGTH"),a=z(d,"IMAGEWIDTH"),h=z(d,"IMAGELENGTH");var c=z(d,"BITSPERSAMPLE");const l=z(d,"SAMPLESPERPIXEL");var D=z(d,"SAMPLEFORMAT")||1;const N=S(D,c),Q=v(d,"PLANARCONFIGURATION")?2===v(d,"PLANARCONFIGURATION")[0]:!1;var M=v(d,"GDAL_NODATA");let T;null!=M&&("string"===typeof M[0]?(T=M.map(ma=>parseFloat(ma)),
T.some(ma=>isNaN(ma))&&(T=null)):"number"===typeof M[0]&&(T=M));var P=z(d,"COMPRESSION")||1;switch(P){case 1:M="NONE";break;case 2:case 3:case 4:case 32771:M="CCITT";break;case 5:M="LZW";break;case 6:case 7:M="JPEG";break;case 32773:M="PACKBITS";break;case 8:case 32946:M="DEFLATE";break;case 34712:M="JPEG2000";break;default:M=String(P)}let K=!0,G="";1!==P&&5!==P&&6!==P&&8!==P&&32946!==P&&(K=!1,G+="unsupported tag compression "+P);3<D&&(K=!1,G+="unsupported tag sampleFormat "+D);0!==c%8&&(K=!1,G+=
"unsupported tag bitsPerSample "+c);c=z(d,"GEOASCIIPARAMS");if(c){var O=(O=c.split("|").filter(ma=>-1<ma.indexOf("ESRI PE String \x3d "))[0])?O.replace("ESRI PE String \x3d ",""):"";O=0===O.indexOf("PROJCS")||0===O.indexOf("GEOGCS")?{wkid:null,wkt:O}:null}D=v(d,"GEOTIEPOINTS");c=v(d,"GEOPIXELSCALE");P=v(d,"GEOTRANSMATRIX");var X=d.has("GEOKEYDIRECTORY")?d.get("GEOKEYDIRECTORY").data:null;d=!1;if(X){d=2===z(X,"GTRasterTypeGeoKey");var V=z(X,"GTModelTypeGeoKey");2===V?(X=z(X,"GeographicTypeGeoKey"),
1024<=X&&32766>=X&&(O={wkid:X})):1===V&&(X=z(X,"ProjectedCSTypeGeoKey"),1024<=X&&32766>=X&&(O={wkid:X}))}let Z;c&&D&&6<=D.length?(Z=[c[0],0,D[3]-D[0]*c[0],0,-Math.abs(c[1]),D[4]-D[1]*c[1]],d&&(Z[2]-=.5*Z[0]+.5*Z[1],Z[5]-=.5*Z[3]+.5*Z[4])):P&&16===P.length&&(Z=d?[P[0],P[1],P[3]-.5*P[0],P[4],P[5],P[7]-.5*P[5]]:[P[0],P[1],P[3],P[4],P[5],P[7]]);if(Z){var Y=[{x:0,y:h},{x:0,y:0},{x:a,y:h},{x:a,y:0}];P=D=Number.POSITIVE_INFINITY;V=X=Number.NEGATIVE_INFINITY;for(let ma=0;ma<Y.length;ma++)d=L(Y[ma],Z),D=d.x>
D?D:d.x,X=d.x<X?X:d.x,P=d.y>P?P:d.y,V=d.y<V?V:d.y;Y={xmin:D,xmax:X,ymin:P,ymax:V,spatialReference:O}}O=b.filter(ma=>1===z(ma,"NEWSUBFILETYPE"));let fa,ia,ha,ca;0<O.length&&(fa=Math.round(Math.log(a/z(O[0],"IMAGEWIDTH"))/Math.LN2),ia=Math.round(Math.log(a/z(O[O.length-1],"IMAGEWIDTH"))/Math.LN2),ha=z(O[O.length-1],"TILEWIDTH"),ca=z(O[O.length-1],"TILEHEIGHT"));ha=0<ia?ha||u:null;ca=0<ia?ca||e:null;let ka;u&&(ka=[{maxCol:Math.ceil(a/u)-1,maxRow:Math.ceil(h/e)-1,minRow:0,minCol:0}],O.forEach(ma=>{ka.push({maxCol:Math.ceil(z(ma,
"IMAGEWIDTH")/z(ma,"TILEWIDTH"))-1,maxRow:Math.ceil(z(ma,"IMAGELENGTH")/z(ma,"TILELENGTH"))-1,minRow:0,minCol:0})}));O=z(b[0],"GDAL_METADATA");O=t(O);G+=" "+m({width:a,height:h,tileWidth:u,tileHeight:e,planes:l,ifds:b});return{width:a,height:h,tileWidth:u,tileHeight:e,planes:l,isBSQ:Q,pixelType:N,compression:M,noData:T,isSupported:K,message:G,extent:Y,affine:c?null:Z,firstPyramidLevel:fa,maximumPyramidLevel:ia,pyramidBlockWidth:ha,pyramidBlockHeight:ca,tileBoundary:ka,metadata:O}}function w(b){const {littleEndian:d,
isBigTiff:u,firstIFD:e}=x(b);var a=e;const h=[];do if(a=r(b,d,a,0,J.TIFF_TAGS,u?8:4),a.success)h.push(a.ifd),a=a.nextIFD;else break;while(0<a);return{...k(h),littleEndian:d,isBigTiff:u,ifds:h}}function q(b,d,u){const e=b.getUint32(d,u);b=b.getUint32(d+4,u);return u?4294967296*b+e:4294967296*e+b}function p(b,d,u,e){return e?q(b,d,u):b.getUint32(d,u)}function x(b){var d=new DataView(b,0,16),u=d.getUint16(0,!1);b=null;if(18761===u)b=!0;else if(19789===u)b=!1;else throw"unexpected endianess byte";var e=
d.getUint16(2,b);if(42!==e&&43!==e)throw"unexpected tiff identifier";u=4;if(e=43===e){const a=d.getUint16(u,b);u+=2;if(8!==a)throw"unsupported bigtiff version";if(0!==d.getUint16(u,b))throw"unsupported bigtiff version";u+=2}d=p(d,u,b,e);return{littleEndian:b,isBigTiff:e,firstIFD:d}}function r(b,d,u,e=0,a=J.TIFF_TAGS,h=4){u=g(b,d,u,e,a,h);let c;const l=u.ifd;l&&(J.ifdTags.forEach((D,N)=>{l.has(N)&&(c=l.get(N),c.data=g(b,d,c.valueOffset-e,e,D).ifd)}),l.has("GEOKEYDIRECTORY")&&(c=l.get("GEOKEYDIRECTORY"),
(a=c.values)&&4<a.length&&(a=a[0]+"."+a[1]+"."+a[2],c.data=g(b,d,c.valueOffset+6-e,e,J.GEO_KEYS,2).ifd,c.data&&c.data.set("GEOTIFFVersion",{id:0,type:2,valueCount:1,valueOffset:null,values:[a]}))),l.has("XMP")&&(c=l.get("XMP"),a=c.values,"number"===typeof a[0]&&7===c.type&&(c.values=[aa.bytesToUTF8(new Uint8Array(a))])));return u}function m(b){const {width:d,height:u,tileHeight:e,tileWidth:a}=b,h=b.planes,c=a?a*e:d*u;b=v(b.ifds[0],"BITSPERSAMPLE")[0];let l="";c*h>2**30/(8<b?b/8:1)&&(l=a?"tiled tiff exceeding 1 gigabits per tile is not supported":
"scanline tiff exceeding 1 gigabits is not supported");return l}const f=[0,1,1,2,4,8,1,1,2,4,8,4,8,-1,-1,-1,8,8,8],C=function(b,d,u,e,a){var h=I.isPlatformLittleEndian===d,c=z(u,"BITSPERSAMPLE"),l=z(u,"SAMPLEFORMAT")||1;c=S(l,c);l=z(u,"COMPRESSION")||1;u=F(c);if(1===l){var D=b.slice(e,e+a);var N=new Uint8Array(D)}else 8===l||32946===l?(N=new Uint8Array(b,e,a),N=new H.Zlib(N),b=N.getBytes(),D=new ArrayBuffer(b.length),N=new Uint8Array(D),N.set(b)):6===l?(N=new Uint8Array(b,e,a),D=new A.Jpg,D.parse(N),
b=D.getData(D.width,D.height,!0),D=new ArrayBuffer(b.length),N=new Uint8Array(D),N.set(b)):5===l&&(N=y.decode(b,e,a,d),D=N.buffer);if("u8"!==c&&"s8"!==c&&!h)switch(D=new ArrayBuffer(N.length),h=new Uint8Array(D),c){case "u16":case "s16":for(c=0;c<N.length;c+=2)h[c]=N[c+1],h[c+1]=N[c];break;case "u32":case "s32":case "f32":for(c=0;c<N.length;c+=4)h[c]=N[c+3],h[c+1]=N[c+2],h[c+2]=N[c+1],h[c+3]=N[c]}return new u(D)},E=function(b,d,u){if(!(b&&0<b.length&&d&&u))return null;let e,a,h;const c=b[0].length,
l=b.length,D=new Uint8Array(c);for(let Q=0;Q<l;Q++)if(e=b[Q],a=d[Q],h=u[Q],0===Q)for(var N=0;N<c;N++)D[N]=e[N]<a||e[N]>h?0:1;else for(N=0;N<c;N++)D[N]&&(D[N]=e[N]<a||e[N]>h?0:1);return D},t=function(b){if(!b)return null;var d=b.match(/<Item(.*?)Item>/gi);if(!d||0===d.length)return null;b=new Map;var u;for(var e=0;e<d.length;e++){var a=d[e];var h=a.slice(6,a.indexOf("\x3e"));var c=a.indexOf("sample\x3d");-1<c&&(u=a.slice(c+8,a.indexOf('"',c+8)));c=a.indexOf("name\x3d");-1<c&&(h=a.slice(c+6,a.indexOf('"',
c+6)));h&&(a=a.slice(a.indexOf("\x3e")+1,a.indexOf("\x3c/Item\x3e")).trim(),null!=u?b.has(h)?b.get(h)[u]=a:b.set(h,[a]):b.set(h,a));u=null}d=b.get("STATISTICS_MINIMUM");h=b.get("STATISTICS_MAXIMUM");e=b.get("STATISTICS_MEAN");a=b.get("STATISTICS_STDDEV");u=null;if(d&&h)for(u=[],c=0;c<d.length;c++)u.push({min:parseFloat(d[c]),max:parseFloat(h[c]),avg:e&&parseFloat(e[c]),stddev:a&&parseFloat(a[c])});h=b.get("BandName");e=b.get("WavelengthMin");a=b.get("WavelengthMax");d=null;if(h)for(d=[],c=0;c<h.length;c++)d.push({BandName:h[c],
WavelengthMin:e&&parseFloat(e[c]),WavelengthMax:a&&parseFloat(a[c])});h=b.get("DataType");return{statistics:u,bandProperties:d,dataType:h,rawMetadata:b}};U.decode=function(b,d){d=d||w(b);const {ifds:u,noData:e}=d;if(0===u.length)throw"no valid image file directory";var a=m(d);if(a)throw a;var h=u[0];a=e?e[0]:null;if(d.tileWidth){var c=v(h,"TILEOFFSETS");if(void 0===c)h=null;else{var l=v(h,"TILEBYTECOUNTS"),D=d.tileWidth,N=d.tileHeight,{width:Q,height:M,pixelType:T,isBSQ:P}=d,K=d.planes,G=Q*M,O=v(h,
"BITSPERSAMPLE")[0],X=F(T),V=[];for(var Z=0;Z<K;Z++)V.push(new X(G));var Y,fa;G=Math.ceil(Q/D);if(0===O%8)for(O=0;O<c.length;O++){var ia=Math.floor(O/G)*N;var ha=O%G*D;Z=ia*Q+ha;X=C(b,d.littleEndian,h,c[O],l[O]);var ca=0;var ka=Z;ha=Math.min(D,Q-ha);var ma=Math.min(N,M-ia);for(ia=0;ia<K;ia++){var ua=V[ia];if(P)for(Y=0;Y<ma;Y++)for(ka=Z+Y*Q,ca=D*N*ia+Y*D,fa=0;fa<ha;fa++,ka++,ca++)ua[ka]=X[ca];else for(Y=0;Y<ma;Y++)for(ka=Z+Y*Q,ca=Y*D*K+ia,fa=0;fa<ha;fa++,ka++,ca+=K)ua[ka]=X[ca]}}h={width:Q,height:M,
pixelType:T,pixels:V}}}else if(c=d,ka=I.isPlatformLittleEndian===c.littleEndian,ca=v(h,"STRIPOFFSETS"),void 0===ca)h=null;else{var {width:ta,height:sa,pixelType:da}=c;d=c.planes;l=ta*sa;G=v(h,"BITSPERSAMPLE")[0];D=F(da);N=new D(l*d);O=v(h,"STRIPBYTECOUNTS");X=v(h,"ROWSPERSTRIP")[0];ha=v(h,"COMPRESSION")?v(h,"COMPRESSION")[0]:1;Y=X;if(0===G%8)for(h=0;h<ca.length;h++){ia=h*X*ta*d;Y=(h+1)*X>sa?sa-h*X:X;if("u8"===da||"s8"===da||ka)8===ha||32946===ha?(V=new Uint8Array(b,ca[h],O[h]),V=new H.Zlib(V),fa=
V.getBytes(),Z=new ArrayBuffer(fa.length),V=new Uint8Array(Z),V.set(fa),V.length!==Y*ta*d*G/8&&console.log("strip byte counts is different than expected")):6===ha?(V=new Uint8Array(b,ca[h],O[h]),Z=new A.Jpg,Z.parse(V),Y=Z.getData(Z.width,Z.height,!0),Z=new ArrayBuffer(Y.length),V=new Uint8Array(Z),V.set(Y)):5===ha?(V=y.decode(b,ca[h],O[h],c.littleEndian),Z=V.buffer):1===ha&&(O[h]!==Y*ta*d*G/8&&console.log("strip byte counts is different than expected"),Z=b.slice(ca[h],ca[h]+O[h]));else switch(6===
ha||8===ha||32946===ha?(V=new Uint8Array(b,ca[h],O[h]),V=new H.Zlib(V),V=V.getBytes(),Z=new ArrayBuffer(V.length),K=new Uint8Array(Z),V.length!==Y*ta*d*G/8&&console.log("strip byte counts is different than expected")):1===ha&&(O[h]!==Y*ta*d*G/8&&console.log("strip byte counts is different than expected"),Z=new ArrayBuffer(O[h]),V=new Uint8Array(b,ca[h],O[h]),K=new Uint8Array(Z)),da){case "u16":case "s16":for(Y=0;Y<V.length;Y+=2)K[Y]=V[Y+1],K[Y+1]=V[Y];break;case "u32":case "s32":case "f32":for(Y=
0;Y<V.length;Y+=4)K[Y]=V[Y+3],K[Y+1]=V[Y+2],K[Y+2]=V[Y+1],K[Y+3]=V[Y]}Y=new D(Z);N.set(Y,ia)}V=[];if(1===d)V.push(N);else for(h=0;h<d;h++){K=new D(l);for(b=0;b<l;b++)K[b]=N[b*d+h];V.push(K)}h={width:ta,height:sa,pixelType:da,pixels:V}}if(null!==a){h.mask=new Uint8Array(h.width*h.height);if(1E24<Math.abs(a))for(b=0;b<h.width*h.height;b++)h.mask[b]=1E-6>Math.abs((h.pixels[0][b]-a)/a)?0:1;else for(b=0;b<h.width*h.height;b++)h.mask[b]=h.pixels[0][b]===a?0:1;h.noDataValue=a}return h};U.decodeTileOrStrip=
function(b,d){const {headerInfo:u,ifd:e}=d;var a=C(b,u.littleEndian,e,d.offset||0,d.size||b.byteLength);const {pixelType:h,isBSQ:c,planes:l}=u;var D=F(h);b=a.length/l;const N=[];for(var Q=0;Q<l;Q++){var M=new D(b);if(c)M=a.slice(b*Q,b*(Q+1));else for(var T=0;T<b;T++)M[T]=a[T*l+Q];N.push(M)}a=z(e,"TILEWIDTH");D=z(e,"TILELENGTH");M=u.noData?u.noData[0]:null;Q=(T=u.metadata?u.metadata.statistics:null)?T.map(K=>K.min):null;T=T?T.map(K=>K.max):null;let P;if(null!=M)if(P=new Uint8Array(b),1E24<Math.abs(M))for(d=
0;d<b;d++)P[d]=1E-6>Math.abs((N[0][d]-M)/M)?0:1;else for(d=0;d<b;d++)P[d]=N[0][d]===M?0:1;else Q&&T&&d.applyMinMaxConstraint&&(P=E(N,Q,T));return{pixelType:h,width:a,height:D,pixels:N,mask:P,noDataValue:M}};U.getImageInfo=k;U.parseFieldValues=n;U.parseHeader=w;U.parseIFD=r;U.parseSignature=x;Object.defineProperty(U,"__esModule",{value:!0})})},"esri/layers/support/rasterDatasets/byteStreamUtils":function(){define(["exports"],function(U){U.bytesToUTF8=function(H,A){let aa=0,y="",J=0,I=0;const S=H.length;
for(;aa<S;)if(I=H[aa++],J=I>>4,8>J?J=1:15===J?(J=4,I=(I&7)<<18|(H[aa++]&63)<<12|(H[aa++]&63)<<6|H[aa++]&63):14===J?(J=3,I=(I&15)<<12|(H[aa++]&63)<<6|H[aa++]&63):(J=2,I=(I&31)<<6|H[aa++]&63),0!==I||A)y+=String.fromCharCode(I);return y};Object.defineProperty(U,"__esModule",{value:!0})})},"esri/layers/support/rasterFormats/Lzw":function(){define(["exports"],function(U){function H(J,I,S,F=!0){if(0!==I%4||0!==S%4){var L=new ArrayBuffer(4*Math.ceil(S/4));L=new Uint8Array(L);J=new Uint8Array(J,I,S);if(F)for(F=
0;F<L.length;F+=4)L[F]=J[F+3],L[F+1]=J[F+2],L[F+2]=J[F+1],L[F+3]=J[F];else L.set(J);return new Uint32Array(L.buffer)}if(F){F=new Uint8Array(J,I,S);L=new Uint8Array(F.length);for(J=0;J<L.length;J+=4)L[J]=F[J+3],L[J+1]=F[J+2],L[J+2]=F[J+1],L[J+3]=F[J];return new Uint32Array(L.buffer)}return new Uint32Array(J,I,S/4)}function A(){const J=[];for(let I=0;257>=I;I++)J[I]=[I];return J}function aa(J,I){for(let S=0;S<I.length;S++)J.push(I[S])}const y=new Set;y.add(511);y.add(1023);y.add(2047);y.add(4095);y.add(8191);
U.decode=function(J,I,S,F=!0){J=H(J,I,S,F);I=9;F=A();let L=32,v=F.length,z=[],g=1,n=J[0],k=0;const w=J.length;S=8*(4*w-S);const q=[];for(;null!=n;){if(L>=I)L-=I,k=n>>>32-I,n<<=I;else{k=n>>>32-L;n=J[g++];var p=I-L;L=32-p;k=(k<<p)+(n>>>L);n<<=p}if(257===k)break;if(256===k)I=9,F=A(),v=F.length,z=[];else{p=F[k];if(null==p){if(k>F.length)throw"data integrity issue: code does not exist on code page";z.push(z[0]);F[v++]=z.slice();aa(q,z)}else aa(q,p),z.push(p[0]),1<z.length&&(F[v++]=z.slice()),z=p.slice();
y.has(v)&&I++;0===L&&(n=J[g++],L=32);if(g>w||g===w&&L<=S)break}}return new Uint8Array(q)};Object.defineProperty(U,"__esModule",{value:!0})})},"esri/layers/support/rasterFormats/TiffTags":function(){define(function(){const U=(()=>{const y=[];y[254]="NEWSUBFILETYPE";y[255]="SUBFILETYPE";y[256]="IMAGEWIDTH";y[257]="IMAGELENGTH";y[258]="BITSPERSAMPLE";y[259]="COMPRESSION";y[262]="PHOTOMETRICINTERPRETATION";y[263]="THRESHHOLDING";y[264]="CELLWIDTH";y[265]="CELLLENGTH";y[266]="FILLORDER";y[269]="DOCUMENTNAME";
y[270]="IMAGEDESCRIPTION";y[271]="MAKE";y[272]="MODEL";y[273]="STRIPOFFSETS";y[274]="ORIENTATION";y[277]="SAMPLESPERPIXEL";y[278]="ROWSPERSTRIP";y[279]="STRIPBYTECOUNTS";y[280]="MINSAMPLEVALUE";y[281]="MAXSAMPLEVALUE";y[282]="XRESOLUTION";y[283]="YRESOLUTION";y[284]="PLANARCONFIGURATION";y[285]="PAGENAME";y[286]="XPOSITION";y[287]="YPOSITION";y[288]="FREEOFFSETS";y[289]="FREEBYTECOUNTS";y[290]="GRAYRESPONSEUNIT";y[291]="GRAYRESPONSECURVE";y[292]="T4OPTIONS";y[293]="T6OPTIONS";y[296]="RESOLUTIONUNIT";
y[297]="PAGENUMBER";y[300]="COLORRESPONSEUNIT";y[301]="TRANSFERFUNCTION";y[305]="SOFTWARE";y[306]="DATETIME";y[315]="ARTIST";y[316]="HOSTCOMPUTER";y[317]="PREDICTOR";y[318]="WHITEPOINT";y[319]="PRIMARYCHROMATICITIES";y[320]="COLORMAP";y[321]="HALFTONEHINTS";y[322]="TILEWIDTH";y[323]="TILELENGTH";y[324]="TILEOFFSETS";y[325]="TILEBYTECOUNTS";y[326]="BADFAXLINES";y[327]="CLEANFAXDATA";y[328]="CONSECUTIVEBADFAXLINES";y[330]="SUBIFD";y[332]="INKSET";y[333]="INKNAMES";y[334]="NUMBEROFINKS";y[336]="DOTRANGE";
y[337]="TARGETPRINTER";y[338]="EXTRASAMPLES";y[339]="SAMPLEFORMAT";y[340]="SMINSAMPLEVALUE";y[341]="SMAXSAMPLEVALUE";y[342]="TRANSFERRANGE";y[347]="JPEGTABLES";y[512]="JPEGPROC";y[513]="JPEGIFOFFSET";y[514]="JPEGIFBYTECOUNT";y[515]="JPEGRESTARTINTERVAL";y[517]="JPEGLOSSLESSPREDICTORS";y[518]="JPEGPOINTTRANSFORM";y[519]="JPEGQTABLES";y[520]="JPEGDCTABLES";y[521]="JPEGACTABLES";y[529]="YCBCRCOEFFICIENTS";y[530]="YCBCRSUBSAMPLING";y[531]="YCBCRPOSITIONING";y[532]="REFERENCEBLACKWHITE";y[700]="XMP";y[33550]=
"GEOPIXELSCALE";y[33922]="GEOTIEPOINTS";y[33432]="COPYRIGHT";y[42112]="GDAL_METADATA";y[42113]="GDAL_NODATA";y[50844]="RPCCOEFFICIENT";y[34264]="GEOTRANSMATRIX";y[34735]="GEOKEYDIRECTORY";y[34736]="GEODOUBLEPARAMS";y[34737]="GEOASCIIPARAMS";y[34665]="EXIFIFD";y[34853]="GPSIFD";y[40965]="INTEROPERABILITYIFD";return y})(),H=(()=>{const y=[].concat(U);y[36864]="ExifVersion";y[40960]="FlashpixVersion";y[40961]="ColorSpace";y[42240]="Gamma";y[37121]="ComponentsConfiguration";y[37122]="CompressedBitsPerPixel";
y[40962]="PixelXDimension";y[40963]="PixelYDimension";y[37500]="MakerNote";y[37510]="UserComment";y[40964]="RelatedSoundFile";y[36867]="DateTimeOriginal";y[36868]="DateTimeDigitized";y[36880]="OffsetTime";y[36881]="OffsetTimeOriginal";y[36882]="OffsetTimeDigitized";y[37520]="SubSecTime";y[37521]="SubSecTimeOriginal";y[37522]="SubSecTimeDigitized";y[37888]="Temperature";y[37889]="Humidity";y[37890]="Pressure";y[37891]="WaterDepth";y[37892]="Acceleration";y[37893]="CameraElevationAngle";y[42016]="ImageUniqueID";
y[42032]="CameraOwnerName";y[42033]="BodySerialNumber";y[42034]="LensSpecification";y[42035]="LensMake";y[42036]="LensModel";y[42037]="LensSerialNumber";y[33434]="ExposureTime";y[33437]="FNumber";y[34850]="ExposureProgram";y[34852]="SpectralSensitivity";y[34855]="PhotographicSensitivity";y[34856]="OECF";y[34864]="SensitivityType";y[34865]="StandardOutputSensitivity";y[34866]="RecommendedExposureIndex";y[34867]="ISOSpeed";y[34868]="ISOSpeedLatitudeyyy";y[34869]="ISOSpeedLatitudezzz";y[37377]="ShutterSpeedValue";
y[37378]="ApertureValue";y[37379]="BrightnessValue";y[37380]="ExposureBiasValue";y[37381]="MaxApertureValue";y[37382]="SubjectDistance";y[37383]="MeteringMode";y[37384]="LightSource";y[37385]="Flash";y[37386]="FocalLength";y[37396]="SubjectArea";y[41483]="FlashEnergy";y[41484]="SpatialFrequencyResponse";y[41486]="FocalPlaneXResolution";y[41487]="FocalPlaneYResolution";y[41488]="FocalPlaneResolutionUnit";y[41492]="SubjectLocation";y[41493]="ExposureIndex";y[41495]="SensingMethod";y[41728]="FileSource";
y[41729]="SceneType";y[41730]="CFAPattern";y[41985]="CustomRendered";y[41986]="ExposureMode";y[41987]="WhiteBalance";y[41988]="DigitalZoomRatio";y[41989]="FocalLengthIn35mmFilm";y[41990]="SceneCaptureType";y[41991]="GainControl";y[41992]="Contrast";y[41993]="Saturation";y[41994]="Sharpness";y[41995]="DeviceSettingDescription";y[41996]="SubjectDistanceRange";return y})(),A=(()=>{const y=[];y[1024]="GTModelTypeGeoKey";y[1025]="GTRasterTypeGeoKey";y[1026]="GTCitationGeoKey";y[2048]="GeographicTypeGeoKey";
y[2049]="GeogCitationGeoKey";y[2050]="GeogGeodeticDatumGeoKey";y[2051]="GeogPrimeMeridianGeoKey";y[2052]="GeogLinearUnitsGeoKey";y[2053]="GeogLinearUnitSizeGeoKey";y[2054]="GeogAngularUnitsGeoKey";y[2055]="GeogAngularUnitSizeGeoKey";y[2056]="GeogEllipsoidGeoKey";y[2057]="GeogSemiMajorAxisGeoKey";y[2058]="GeogSemiMinorAxisGeoKey";y[2059]="GeogInvFlatteningGeoKey";y[2061]="GeogPrimeMeridianLongGeoKey";y[2060]="GeogAzimuthUnitsGeoKey";y[3072]="ProjectedCSTypeGeoKey";y[3073]="PCSCitationGeoKey";y[3074]=
"ProjectionGeoKey";y[3075]="ProjCoordTransGeoKey";y[3076]="ProjLinearUnitsGeoKey";y[3077]="ProjLinearUnitSizeGeoKey";y[3078]="ProjStdParallel1GeoKey";y[3079]="ProjStdParallel2GeoKey";y[3080]="ProjNatOriginLongGeoKey";y[3081]="ProjNatOriginLatGeoKey";y[3082]="ProjFalseEastingGeoKey";y[3083]="ProjFalseNorthingGeoKey";y[3084]="ProjFalseOriginLongGeoKey";y[3085]="ProjFalseOriginLatGeoKey";y[3086]="ProjFalseOriginEastingGeoKey";y[3087]="ProjFalseOriginNorthingGeoKey";y[3088]="ProjCenterLongGeoKey";y[3090]=
"ProjCenterEastingGeoKey";y[3091]="ProjCenterNorthingGeoKey";y[3092]="ProjScaleAtNatOriginGeoKey";y[3093]="ProjScaleAtCenterGeoKey";y[3094]="ProjAzimuthAngleGeoKey";y[3095]="ProjStraightVertPoleLongGeoKey";y[4096]="VerticalCSTypeGeoKey";y[4097]="VerticalCitationGeoKey";y[4098]="VerticalDatumGeoKey";y[4099]="VerticalUnitsGeoKey";return y})(),aa=new Map;aa.set("EXIFIFD",H);aa.set("GPSIFD","GPSVersionID GPSLatitudeRef GPSLatitude GPSLongitudeRef GPSLongitude GPSAltitudeRef GPSAltitude GPSTimeStamp GPSSatellites GPSStatus GPSMeasureMode GPSDOP GPSSpeedRef GPSSpeed GPSTrackRef GPSTrack GPSImgDirectionRef GPSImgDirection GPSMapDatum GPSDestLatitudeRef GPSDestLatitude GPSDestLongitudeRef GPSDestLongitude GPSDestBearingRef GPSDestBearing GPSDestDistanceRef GPSDestDistance GPSProcessingMethod GPSAreaInformation GPSDateStamp GPSDifferential GPSHPositioningError".split(" "));
return{TIFF_TAGS:U,ifdTags:aa,GEO_KEYS:A,getTagName:function(y,J){J=(J||U)[y];void 0===J&&(J="unknown"+String(y));return J}}})},"esri/renderers/support/rasterRendererHelper":function(){define("exports ../../core/maybe ../../Color ../../tasks/support/AlgorithmicColorRamp ../../tasks/support/MultipartColorRamp ./AuthoringInfo ../../core/unitUtils ./ClassBreakInfo ../ClassBreaksRenderer ./colorRampUtils ../RasterColormapRenderer ../RasterShadedReliefRenderer ../RasterStretchRenderer ./UniqueValueInfo ../UniqueValueRenderer ../VectorFieldRenderer ../../rasterRenderers ../../layers/support/Field ../../layers/support/RasterInfo ../../tasks/support/ClassBreaksDefinition ../../tasks/support/generateRendererUtils".split(" "),
function(U,H,A,aa,y,J,I,S,F,L,v,z,g,n,k,w,q,p,x,r,m){function f(G,O){var X,V,Z,Y;G=C(G,null==O?void 0:O.variableName);const {bandCount:fa}=G;let {bandIds:ia,stretchType:ha}=O||{};null!=(X=ia)&&X.some(ua=>ua>=fa)&&(ia=null);let ca=H.unwrap(G.statistics),ka=H.unwrap(G.histograms);if(1<fa){var ma;ia=null!=(ma=ia)&&ma.length?ia:E(G);ca=null==ca?null:ia.map(ua=>ca[ua]);ka=null==ka?null:ia.map(ua=>ka[ua])}else ia=[0];null==ha&&(ha=b(G));O=!1;switch(ha){case "none":O=!1;break;case "percent-clip":O=!(null!=
(V=ka)&&V.length);break;default:O=!(null!=(Z=ca)&&Z.length)}G=1===(null==(Y=ia)?void 0:Y.length)&&"scientific"===G.dataType?P:null;Y=new g({stretchType:ha,dynamicRangeAdjustment:O,colorRamp:G,outputMin:0,outputMax:255,gamma:1===ia.length?[1]:[1,1,1],useGamma:!1});"percent-clip"===ha?Y.maxPercent=Y.minPercent=.25:"standard-deviation"===ha&&(Y.numberOfStandardDeviations=2);if(!O)if("percent-clip"===ha)Y.histograms=ka;else if("min-max"===ha||"standard-deviation"===ha)Y.statistics=ca;return Y}function C(G,
O){if(null==O)return G;let X=H.unwrap(G.statistics),V=H.unwrap(G.histograms);const {multidimensionalInfo:Z}=G;if(O&&H.isSome(Z)){const {statistics:Y,histograms:fa}=Z.variables.find(ia=>ia.name===O);null!=Y&&Y.length&&(X=Y);null!=fa&&fa.length&&(V=fa)}return x.fromJSON({...G.toJSON(),statistics:X,histograms:V})}function E(G){const O=G.bandCount;if(1===O)return null;if(2===O)return[0];G=G.keyProperties&&G.keyProperties.BandProperties;let X;if(G&&G.length===O){const {red:V,green:Z,blue:Y,nir:fa}=t(G);
null!=V&&null!=Z&&null!=Y?X=[V,Z,Y]:null!=fa&&null!=V&&null!=Z&&(X=[fa,V,Z])}!X&&3<=O&&(X=[0,1,2]);return X}function t(G){const O={};for(let Y=0;Y<G.length;Y++){var X,V=G[Y],Z=null==(X=V.BandName)?void 0:X.toLowerCase();"red"===Z?O.red=Y:"green"===Z?O.green=Y:"blue"===Z?O.blue=Y:"nearinfrared"===Z||"nearinfrared_1"===Z||"nir"===Z?O.nir=Y:V.WavelengthMax&&V.WavelengthMin&&(Z=V.WavelengthMin,V=V.WavelengthMax,null==O.blue&&410<=Z&&480>=Z&&480<=V&&540>=V?O.blue=Y:null==O.green&&490<=Z&&560>=Z&&560<=
V&&610>=V?O.green=Y:null==O.red&&595<=Z&&670>=Z&&660<=V&&730>=V?O.red=Y:null==O.nir&&700<=Z&&860>=Z&&800<=V&&950>=V&&(O.nir=Y))}return O}function b(G){let O="percent-clip";const {pixelType:X,dataType:V,histograms:Z,statistics:Y}=G;"u8"!==X||"processed"!==V&&H.isSome(Z)&&H.isSome(Y)?"u8"===X||"elevation"===V||"scientific"===V?O="min-max":H.isSome(Z)?O="percent-clip":H.isSome(Y)&&(O=O="min-max"):O="none";return O}function d(G,O,X,V){if(!a(G,O))return null;const {attributeTable:Z,statistics:Y}=G,fa=
u(Z,O),ia=e(Z,"red"),ha=e(Z,"green"),ca=e(Z,"blue");G=new J;const ka=[],ma=new Set,ua=!!(ia&&ha&&ca);if(H.isSome(Z))Z.features.forEach(ta=>{const sa=ta.attributes[fa.name];ma.has(ta.attributes[fa.name])||null==sa||(ma.add(sa),ka.push(new n({value:ta.attributes[fa.name],label:ta.attributes[fa.name]+"",symbol:{type:"simple-fill",style:"solid",outline:null,color:ua?new A([ta.attributes[ia.name],ta.attributes[ha.name],ta.attributes[ca.name],1]):new A([0,0,0,0])}})))});else if(null!=Y&&Y[0])for(O=Y[0].min;O<=
Y[0].max;O++)ka.push(new n({value:O,label:O.toString(),symbol:{type:"simple-fill",style:"solid",outline:null,color:new A([0,0,0,0])}}));ka.sort((ta,sa)=>ta.value&&"string"===typeof ta.value.valueOf()?0:ta.value>sa.value?1:-1);if(!ua){const ta=L.convertColorRampToColormap(K,ka.length);ka.forEach((sa,da)=>sa.symbol.color=new A(ta[da].slice(1,4)));G.colorRamp=K}if(X||V){const ta=X||L.convertColorRampToColormap(V,ka.length).map(sa=>sa.slice(1));ka.forEach((sa,da)=>sa.symbol.color=new A(ta[da]));G.colorRamp=
V}return new k({field:fa.name,uniqueValueInfos:ka,authoringInfo:G})}function u(G,O){let X;H.isSome(G)?(X=O?G.fields.find(V=>O.toLowerCase()===V.name.toLowerCase()):G.fields.find(V=>"string"===V.type&&-1<V.name.toLowerCase().indexOf("class")),X||(X=G.fields.find(V=>"string"===V.type))||(X=e(G,"value"))):X=new p({name:"value"});return X}function e(G,O){return H.isSome(G)?G.fields.find(X=>X.name.toLowerCase()===O):null}function a(G,O){const {attributeTable:X,bandCount:V}=G;return!H.isSome(X)&&N(G)?!0:
!H.isSome(X)||1<V||O&&null==X.fields.find(Z=>Z.name.toLowerCase()===O.toLowerCase())?!1:!0}function h(G){const {bandCount:O,colormap:X}=G;return H.isSome(X)&&X.length&&1===O}function c(G){if(!h(G))return null;let O;const {attributeTable:X,colormap:V}=G;if(H.isSome(X)){const Z=e(X,"value"),Y=u(X);"string"===Y.type&&(O={},X.features.forEach(fa=>{fa=fa.attributes;O[fa[Z.name]]=Y?fa[Y.name]:fa[Z.name]}))}return v.createFromColormap(H.unwrap(V),O)}function l(G){return"elevation"===G.dataType}function D(G){const {attributeTable:O,
bandCount:X}=G;return 1===X&&(H.isSome(O)||H.isSome(G.histograms))}function N(G){var O,X,V;return-1<["u8","s8"].indexOf(G.pixelType)&&null!=(null==(O=G.statistics)?void 0:null==(X=O[0])?void 0:X.min)&&null!=(null==(V=G.statistics[0])?void 0:V.max)&&1===G.bandCount}function Q(G){({dataType:G}=G);return"vector-uv"===G||"vector-magdir"===G}function M(G){return Q(G)?new w:null}function T(G){var O;return{color:null==(O=G.symbolLayers[0].material)?void 0:O.color,type:"esriSFS",style:"esriSFSSolid"}}const P=
y.fromJSON({type:"multipart",colorRamps:[{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]}),K=y.fromJSON(L.PREDEFINED_JSON_COLOR_RAMPS[0]);U.createClassBreaksRenderer=function(G,O){G=C(G,null==O?void 0:O.variableName);const {attributeTable:X}=G;if(!D(G))return null;const V=H.isSome(G.histograms)?G.histograms[0]:null;var Z=(null==O?void 0:O.numClasses)||5;const Y=new J({classificationMethod:null==O?void 0:O.classificationMethod,
colorRamp:null==O?void 0:O.colorRamp});let fa=(null==O?void 0:O.field)||"value";const ia=[],ha=[];if(H.isSome(X)){const ka=X.fields.find(sa=>"count"===sa.name.toLowerCase()),ma=X.fields.find(sa=>sa.name.toLowerCase()===fa.toLowerCase());fa=ma.name;const ua=X.features.length;let ta=0;X.features.forEach(sa=>ta+=sa.attributes[ka.name]/ua);X.features.forEach(sa=>{const da=sa.attributes[ma.name];sa=sa.attributes[ka.name];if(0<sa){ha.push(sa);sa=Math.max(1,Math.round(sa/ua/ta*1E3));for(let pa=0;pa<sa;pa++)ia.push(da)}})}else{({pixelType:G}=
G);const ka=(V.max-V.min)/V.size,ma=(G=-1<G.indexOf("s")||-1<G.indexOf("u"))&&1===ka?Math.floor(V.min+.5):V.min,ua=G&&1===ka?Math.floor(V.max-.5):V.max,ta=V.size;let sa=0;V.counts.forEach(da=>sa+=da/ta);V.counts.forEach((da,pa)=>{if(0<da){ha.push(da);da=Math.max(1,Math.round(da/ta/sa*1E3));pa=0===pa?ma:pa===ta-1?ua:V.min+ka*(pa+.5);for(let qa=0;qa<da;qa++)ia.push(pa)}})}Z=m.createGenerateRendererClassBreaks({values:ia,valueFrequency:ha,normalizationTotal:null,definition:new r({classificationMethod:(null==
O?void 0:O.classificationMethod)||"natural-breaks",breakCount:Z,definedInterval:null==O?void 0:O.definedInterval})});let ca=null==O?void 0:O.colors;ca||(O=(null==O?void 0:O.colorRamp)||P,Y.colorRamp=O,ca=L.convertColorRampToColormap(O,Z.classBreaks.length,!0).map(ka=>ka.slice(1)));O=Z.classBreaks.map((ka,ma)=>new S({minValue:ka.minValue,maxValue:ka.maxValue,label:ka.label,symbol:{type:"simple-fill",color:ca[ma]}}));return new F({field:fa,classBreakInfos:O,authoringInfo:Y})};U.createColorRamp=function(G){const O=
[];for(let X=0;X<G.length-1;X++)O[X]=new aa({algorithm:"hsv",fromColor:G[X],toColor:G[X+1]||new A({r:255,g:255,b:255,a:1})});return 2<G.length?new y({colorRamps:O}):O[0]};U.createColormapRenderer=c;U.createDefaultRenderer=function(G,O){const {attributeTable:X,colormap:V,dataType:Z}=G;if("vector-uv"===Z||"vector-magdir"===Z){var Y=M(G);if(H.isSome(Y))return Y}return H.isSome(V)&&(Y=c(G),H.isSome(Y))||H.isSome(X)&&(Y=d(G),H.isSome(Y))?Y:f(G,O)};U.createShadedReliefRenderer=function(G,O){var X;if(!l(G))return null;
({extent:G}=G);G=G.width*I.getMetersPerUnitForSR(G.spatialReference);O=null!=(X=O)?X:"multi-directional";return new z({hillshadeType:O,scalingType:5E6<G?"adjusted":"none"})};U.createStretchRenderer=f;U.createUVRenderer=d;U.createVectorFieldRenderer=M;U.getBandNames=function(G,O){var X;const V=G.keyProperties&&G.keyProperties.BandProperties;O=null!=(X=O)&&X.length?O:Array.from(Array(G.bandCount).keys());return O.map(Z=>V&&V.length===G.bandCount?V[Z]&&V[Z].BandName||"band_"+(Z+1):"band_"+(Z+1))};U.getClassField=
u;U.getDefaultBandCombination=E;U.getDefaultInterpolation=function(G,O,X){const V=["nearest","bilinear","cubic","majority"].find(Z=>Z===(null==X?void 0:X.toLowerCase()));return"Map"===O?null!=V?V:"bilinear":"thematic"===G.dataType||G.attributeTable||G.colormap?"nearest"===V||"majority"===V?V:"nearest":null!=V?V:"bilinear"};U.getSupportedRendererTypes=function(G){const O=["raster-stretch"];h(G)&&O.push("raster-colormap");a(G)&&O.push("unique-value");D(G)&&O.push("class-breaks");l(G)&&O.push("raster-shaded-relief");
Q(G)&&O.push("vector-field");return O};U.getWellKnownBandIndexes=t;U.isClassBreaksSupported=D;U.isColormapRendererSupported=h;U.isShadedReliefRendererSupported=l;U.isSingleBand8BitRasterWithStats=N;U.isUVRendererSupported=a;U.isVectorFieldRendererSupported=Q;U.normalizeRendererJSON=function(G){if("uniqueValue"===G.type){var O,X=G.uniqueValueInfos,V=X[0].symbol;null!=V&&null!=(O=V.symbolLayers)&&O.length&&(G.uniqueValueInfos=X.map(Z=>({value:Z.value,label:Z.label,symbol:Z.symbol?T(Z.symbol):null})));
return G}"classBreaks"===G.type&&(O=G.classBreakInfos,V=O[0].symbol,null!=V&&null!=(X=V.symbolLayers)&&X.length&&(G.classBreakInfos=O.map(Z=>({classMinValue:Z.classMinValue,classMaxValue:Z.classMaxValue,label:Z.label,symbol:Z.symbol?T(Z.symbol):null}))));return G};Object.defineProperty(U,"__esModule",{value:!0})})},"esri/tasks/support/ClassBreaksDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ./ClassificationDefinition".split(" "),
function(U,H,A,aa,y,J,I,S,F,L,v,z){A=new I.JSONMap({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"});I=new I.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});z=function(g){function n(){var k=g.apply(this,arguments)||this;k.breakCount=null;
k.classificationField=null;k.classificationMethod=null;k.normalizationField=null;k.normalizationType=null;k.type="class-breaks-definition";return k}U._inheritsLoose(n,g);U._createClass(n,[{key:"standardDeviationInterval",set:function(k){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",k)}},{key:"definedInterval",set:function(k){"defined-interval"===this.classificationMethod&&this._set("definedInterval",k)}}]);return n}(z);H.__decorate([J.property({json:{write:!0}})],
z.prototype,"breakCount",void 0);H.__decorate([J.property({json:{write:!0}})],z.prototype,"classificationField",void 0);H.__decorate([J.property({type:String,json:{read:A.read,write:A.write}})],z.prototype,"classificationMethod",void 0);H.__decorate([J.property({json:{write:!0}})],z.prototype,"normalizationField",void 0);H.__decorate([J.property({json:{read:I.read,write:I.write}})],z.prototype,"normalizationType",void 0);H.__decorate([J.property({value:null,json:{write:!0}})],z.prototype,"standardDeviationInterval",
null);H.__decorate([J.property({value:null,json:{write:!0}})],z.prototype,"definedInterval",null);H.__decorate([J.property()],z.prototype,"type",void 0);return z=H.__decorate([S.subclass("esri.tasks.support.ClassBreaksDefinition")],z)})},"esri/tasks/support/ClassificationDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../symbols/Symbol ./colorRamps".split(" "),
function(U,H,A,aa,y,J,I,S,F,L,v,z,g,n){A=new I.JSONMap({classBreaksDef:"class-breaks-definition",uniqueValueDef:"unique-value-definition"});z=function(k){function w(){var q=k.apply(this,arguments)||this;q.baseSymbol=null;q.colorRamp=null;q.type=null;return q}U._inheritsLoose(w,k);return w}(z.JSONSupport);H.__decorate([J.property({type:g,json:{write:!0}})],z.prototype,"baseSymbol",void 0);H.__decorate([J.property({types:n.types,json:{read:{reader:n.fromJSON},write:!0}})],z.prototype,"colorRamp",void 0);
H.__decorate([J.property({json:{read:A.read,write:A.write}})],z.prototype,"type",void 0);return z=H.__decorate([S.subclass("esri.tasks.support.ClassificationDefinition")],z)})},"esri/tasks/support/generateRendererUtils":function(){define(["exports"],function(U){function H(v){const {classificationMethod:z,breakCount:g,normalizationType:n,definedInterval:k}=v.definition,w=[];var q=v.values;if(0===q.length)return[];q=q.sort((C,E)=>C-E);var p=q[0],x=q[q.length-1];if("equal-interval"===z)if(q.length>=
g){q=(x-p)/g;v=p;for(var r=1;r<g;r++){var m=Number((p+r*q).toFixed(6));w.push({minValue:v,maxValue:m,label:A(v,m,n)});v=m}w.push({minValue:v,maxValue:x,label:A(v,x,n)})}else q.forEach(C=>{w.push({minValue:C,maxValue:C,label:A(C,C,n)})});else if("natural-breaks"===z){q=aa(q);v=y(q.uniqueValues,v.valueFrequency||q.valueFrequency,g);for(r=1;r<g;r++)q.uniqueValues.length>r&&(m=Number(q.uniqueValues[v[r]].toFixed(6)),w.push({minValue:p,maxValue:m,label:A(p,m,n)}),p=m);w.push({minValue:p,maxValue:x,label:A(p,
x,n)})}else if("quantile"===z)if(q.length>=g&&p!==x){v=Math.ceil(q.length/g);r=0;for(m=1;m<g;m++){var f=v+r-1;f>q.length&&(f=q.length-1);0>f&&(f=0);w.push({minValue:p,maxValue:q[f],label:A(p,q[f],n)});p=q[f];r+=v;v=Math.ceil((q.length-r)/(g-m))}w.push({minValue:p,maxValue:x,label:A(p,x,n)})}else for(x=-1,p=0;p<q.length;p++)v=q[p],v!==x&&(x=v,w.push({minValue:x,maxValue:v,label:A(x,v,n)}),x=v);else if("standard-deviation"===z)if(v=S(q),r=F(q,v),0===r)w.push({minValue:q[0],maxValue:q[0],label:A(q[0],
q[0],n)});else{q=I(p,x,g,v,r)*r;r=0;for(m=g;1<=m;m--)f=Number((v-(m-.5)*q).toFixed(6)),w.push({minValue:p,maxValue:f,label:A(p,f,n)}),p=f,r++;m=Number((v+.5*q).toFixed(6));w.push({minValue:p,maxValue:m,label:A(p,m,n)});p=m;r++;for(f=1;f<=g;f++)m=r===2*g?x:Number((v+(f+.5)*q).toFixed(6)),w.push({minValue:p,maxValue:m,label:A(p,m,n)}),p=m,r++}else if("defined-interval"===z){if(!k)return w;x=q[0];q=q[q.length-1];p=Math.ceil((q-x)/k);v=x;for(r=1;r<p;r++)m=Number((x+r*k).toFixed(6)),w.push({minValue:v,
maxValue:m,label:A(v,m,n)}),v=m;w.push({minValue:v,maxValue:q,label:A(v,q,n)})}return w}function A(v,z,g){let n=null;return n=v===z?g&&"percent-of-total"===g?v+"%":v.toString():g&&"percent-of-total"===g?v+"% - "+z+"%":v+" - "+z}function aa(v){const z=[],g=[];let n=Number.MIN_VALUE,k=1,w=-1;for(let q=0;q<v.length;q++){const p=v[q];p===n?(k++,g[w]=k):null!==p&&(z.push(p),n=p,k=1,g.push(k),w++)}return{uniqueValues:z,valueFrequency:g}}function y(v,z,g){var n=v.length;const k=[];g>n&&(g=n);for(var w=0;w<
g;w++)k.push(Math.round(w*n/g-1));k.push(n-1);w=J(k,v,z,g);{n=w.mean;w=w.sdcm;var q=g,p=0,x=0;let m=0,f=0,C=!0;for(let E=0;2>E&&C;E++){0===E&&(C=!1);for(var r=0;r<q-1;r++)for(;k[r+1]+1!==k[r+2];)if(k[r+1]+=1,p=L(r,k,v,z),m=p.sbMean,p=p.sbSdcm,x=L(r+1,k,v,z),f=x.sbMean,x=x.sbSdcm,p+x<w[r]+w[r+1])w[r]=p,w[r+1]=x,n[r]=m,n[r+1]=f,C=!0;else{--k[r+1];break}for(r=q-1;0<r;r--)for(;k[r]!==k[r-1]+1;)if(--k[r],p=L(r-1,k,v,z),m=p.sbMean,p=p.sbSdcm,x=L(r,k,v,z),f=x.sbMean,x=x.sbSdcm,p+x<w[r-1]+w[r])w[r-1]=p,w[r]=
x,n[r-1]=m,n[r]=f,C=!0;else{k[r]+=1;break}}n=C}n&&(w=J(k,v,z,g));return k}function J(v,z,g,n){let k=[];var w=[],q=[];let p=0;const x=[],r=[];for(var m=0;m<n;m++){var f=L(m,v,z,g);x.push(f.sbMean);r.push(f.sbSdcm);p+=r[m]}f=p;for(m=!0;m||p<f;){m=!1;k=[];for(w=0;w<n;w++)k.push(v[w]);for(q=0;q<n;q++)for(f=v[q]+1;f<=v[q+1];f++)if(w=z[f],0<q&&f!==v[q+1]&&Math.abs(w-x[q])>Math.abs(w-x[q-1]))v[q]=f;else if(q<n-1&&v[q]!==f-1&&Math.abs(w-x[q])>Math.abs(w-x[q+1])){v[q+1]=f-1;break}f=p;p=0;w=[];q=[];for(let C=
0;C<n;C++){w.push(x[C]);q.push(r[C]);const E=L(C,v,z,g);x[C]=E.sbMean;r[C]=E.sbSdcm;p+=r[C]}}if(p>f){for(z=0;z<n;z++)v[z]=k[z],x[z]=w[z],r[z]=q[z];p=f}return{mean:x,sdcm:r}}function I(v,z,g,n,k){v=Math.max(n-v,z-n)/k/g;return 1<=v?1:.5<=v?.5:.25}function S(v){let z=0;for(let g=0;g<v.length;g++)z+=v[g];return z/=v.length}function F(v,z){let g=0;for(let n=0;n<v.length;n++){const k=v[n];g+=(k-z)*(k-z)}g/=v.length;return Math.sqrt(g)}function L(v,z,g,n){var k=0,w=0;for(var q=z[v]+1;q<=z[v+1];q++){const p=
n[q];k+=g[q]*p;w+=p}0>=w&&console.log("Exception in Natural Breaks calculation");k/=w;w=0;for(q=z[v]+1;q<=z[v+1];q++)w+=n[q]*(g[q]-k)**2;return{sbMean:k,sbSdcm:w}}U.createGenerateRendererClassBreaks=function(v){const {normalizationTotal:z}=v;return{classBreaks:H(v),normalizationTotal:z}};U.createGenerateRendererUniqueValues=function(v){v=aa(v);const z=[],g=v.uniqueValues.length;for(let n=0;n<g;n++){const k=v.uniqueValues[n];z.push({value:k,count:v.valueFrequency[n],label:k.toString()})}return{uniqueValues:z}};
Object.defineProperty(U,"__esModule",{value:!0})})},"esri/renderers/support/RasterSymbolizer":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/maybe ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../core/colorUtils ./colorRampUtils ../../layers/support/RasterInfo ../../layers/support/rasterFunctions/pixelUtils ../../layers/support/rasterFunctions/surfaceUtils".split(" "),
function(U,H,A,aa,y,J,I,S,F,L,v,z,g,n,k,w,q,p){function x(C,E){const {attributeTable:t,bandCount:b}=C;return!aa.isSome(t)||1<b||E&&null==t.fields.find(d=>d.name.toLowerCase()===E.toLowerCase())?!1:!0}function r(C){const {bandCount:E,colormap:t}=C;return aa.isSome(t)&&t.length&&1===E}const m=y.getLogger("esri.renderers.support.RasterSymbolizer"),f={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-3.4*1E39,3.4*
1E39],f64:[-Number.MAX_VALUE,Number.MAX_VALUE]};A=function(C){function E(b){return C.call(this,b)||this}U._inheritsLoose(E,C);var t=E.prototype;t.bind=function(){const {rendererJSON:b}=this;if(!b)return!1;this.lookup={rendererJSON:{}};let d;switch(b.type){case "uniqueValue":d=this._updateUVRenderer(b);break;case "rasterColormap":d=this._updateColormapRenderer(b);break;case "rasterStretch":d=this._updateStretchRenderer(b);break;case "classBreaks":d=this._updateClassBreaksRenderer(b);break;case "rasterShadedRelief":d=
this._updateShadedReliefRenderer(b)}return d};t.symbolize=function(b){let d=b&&b.pixelBlock;if(!this.isValidPixelBlock(d))return d;if(b.simpleStretchParams&&"rasterStretch"===this.rendererJSON.type)return this.simpleStretch(d,b.simpleStretchParams);try{3<d.pixels.length&&(d=q.extractBands(d,[0,1,2]));let u;switch(this.rendererJSON.type){case "uniqueValue":case "rasterColormap":u=this._symbolize_colormap(d);break;case "classBreaks":u=this._symbolize_classBreaks(d);break;case "rasterStretch":u=this._symbolize_stretch(d,
b.bandIds);break;case "rasterShadedRelief":({extent:b}=b),u=this._symbolize_shadedRelief(d,{isGCS:b.spatialReference.isGeographic,resolution:{x:(b.xmax-b.xmin)/d.width,y:(b.ymax-b.ymin)/d.height}})}return u}catch(u){return m.error("symbolize",u.message),d}};t.simpleStretch=function(b,d){if(!this.isValidPixelBlock(b))return b;try{return 3<b.pixels.length&&(b=q.extractBands(b,[0,1,2])),q.stretch(b,d)}catch(u){return m.error("symbolize",u.message),b}};t.generateWebGLParameters=function(b){if(-1<["uniqueValue",
"rasterColormap","classBreaks"].indexOf(this.rendererJSON.type)){var d;const {indexedColormap:c,offset:l}=(null==(d=this.lookup)?void 0:d.colormapLut)||{};return{colormap:c,colormapOffset:l,type:"lut"}}const {pixelBlock:u,isGCS:e,resolution:a,bandIds:h}=b;({rendererJSON:b}=this);return"rasterStretch"===b.type?this.generateStretchWebGLParams(u,b,h):"rasterShadedRelief"===b.type?this.generateShadedReliefWebGLParams(b,e,a):null};t._isLUTChanged=function(b){if(!this.lookup||!this.lookup.rendererJSON)return!0;
if("colorRamp"in this.rendererJSON){const d=this.rendererJSON.colorRamp;if(b)return JSON.stringify(d)!==JSON.stringify(this.lookup.rendererJSON.colorRamp)}return JSON.stringify(this.rendererJSON)!==JSON.stringify(this.lookup.rendererJSON)};t._symbolize_colormap=function(b){return this._isLUTChanged()&&!this.bind()?b:q.colorize(b,this.lookup.colormapLut)};t._symbolize_classBreaks=function(b){const d=-1<["u8","u16","s8","s16"].indexOf(this.rasterInfo.pixelType);return this._isLUTChanged()&&!this.bind()?
b:d?q.colorize(b,this.lookup.colormapLut):q.remapColor(b,this.lookup.remapLut)};t._symbolize_stretch=function(b,d){const {pixelType:u,bandCount:e}=this.rasterInfo,a=this.rendererJSON,h=-1<["u8","u16","s8","s16"].indexOf(u);let c;var {dra:l}=a;var D=a.useGamma?a.gamma:null;if("histogramEqualization"===a.stretchType){var N=l?null:this.lookup.histogramLut;d=this.getStretchCutoff(a,b,d,!N);D=q.stretch(b,{...d,gamma:D});D=q.lookupPixels(D,{lut:l?d.histogramLut:N,offset:0})}else if(h){if(l)l=this.getStretchCutoff(a,
b,d),c=q.createStretchLUT({pixelType:u,...l,gamma:D});else{if(this._isLUTChanged()&&!this.bind())return b;c=this.lookup?this.lookup.stretchLut:null}if(!c)return b;1<e&&(null==d?void 0:d.length)===b.pixels.length&&(null==(N=c)?void 0:N.lut.length)===e&&(c={lut:d.map(Q=>c.lut[Q]),offset:c.offset});D=q.lookupPixels(b,c)}else l=this.getStretchCutoff(a,b,d),D=q.stretch(b,{...l,gamma:D});if(a.colorRamp){if(this._isLUTChanged(!0)&&!this.bind())return b;D=q.colorize(D,this.lookup.colormapLut)}return D};t._symbolize_shadedRelief=
function(b,d){var u,e,a=this.rendererJSON;d=p.hillshade(b,{...a,...d});if(!a.colorRamp||this._isLUTChanged(!0)&&!this.bind())return d;a=this.lookup?this.lookup.hsvMap:null;if(!a)return d;const h=null!=(u=null==(e=aa.unwrap(this.rasterInfo.statistics))?void 0:e[0])?u:{min:0,max:8E3};p.tintHillshade(d,b,a,h);return d};t._updateUVRenderer=function(b){const {bandCount:d,attributeTable:u,statistics:e,pixelType:a}=this.rasterInfo,h=b.field1;if(!h)return!1;var c=-1<["u8","s8"].indexOf(a)&&e&&null!=e[0].min&&
null!=e[0].max;if(!(x(this.rasterInfo,h)||1===d&&c))return!1;const l=[];if(u){const D=u.fields.filter(N=>"value"===N.name.toLowerCase())[0];if(!D)return!1;u.features.forEach(N=>{var Q,M=b.uniqueValueInfos.filter(T=>String(T.value)===String(N.attributes[h]))[0];(M=null==M?void 0:null==(Q=M.symbol)?void 0:Q.color)&&l.push([N.attributes[D.name]].concat(M))})}else{if("value"!==h.toLowerCase())return!1;b.uniqueValueInfos.forEach(D=>{var N;const Q=null==D?void 0:null==(N=D.symbol)?void 0:N.color;Q&&l.push([parseInt(""+
D.value,10)].concat(Q))})}if(0===l.length)return!1;c=q.createColormapLUT({colormap:l});this.lookup={rendererJSON:b,colormapLut:c};return this.canRenderInWebGL=!0};t._updateColormapRenderer=function(b){if(!r(this.rasterInfo))return!1;var d=b.colormapInfos.map(u=>[u.value].concat(u.color)).sort((u,e)=>u[0]-e[0]);if(!d||0===d.length)return!1;d=q.createColormapLUT({colormap:d});this.lookup={rendererJSON:b,colormapLut:d};return this.canRenderInWebGL=!0};t._updateShadedReliefRenderer=function(b){if("elevation"!==
this.rasterInfo.dataType)return!1;if(b.colorRamp){var d=k.convertColorRampToColormap(b.colorRamp,256,!0);d=q.createColormapLUT({colormap:d});const u=[],e=d.indexedColormap;for(let a=0;a<e.length;a+=4){const h=n.toHSV({r:e[a],g:e[a+1],b:e[a+2]});u.push([h.h/60,h.s/100,255*h.v/100])}this.lookup={rendererJSON:b,colormapLut:d,hsvMap:u}}else this.lookup=null;return this.canRenderInWebGL=!0};t._updateClassBreaksRenderer=function(b){var d=-1<["u8","u16","s8","s16"].indexOf(this.rasterInfo.pixelType),u=b.classBreakInfos;
if(null==u||!u.length)return!1;u=u.sort((l,D)=>l.classMaxValue-D.classMaxValue);const e=u[u.length-1];var a=b.minValue;if(!d){d=[];for(var h=0;h<u.length;h++){var c;d.push({value:null!=(c=u[h].classMinValue)?c:a,mappedColor:u[h].symbol.color});a=u[h].classMaxValue}d.push({value:e.classMaxValue,mappedColor:e.symbol.color});this.lookup={rendererJSON:b,remapLut:d};this.canRenderInWebGL=!1;return!0}c=[];a=Math.floor(b.minValue);for(d=0;d<u.length;d++){for(h=u[d];a<h.classMaxValue;a++)c.push([a].concat(h.symbol.color));
a=Math.ceil(h.classMaxValue)}e.classMaxValue===a&&c.push([e.classMaxValue].concat(e.symbol.color));u=q.createColormapLUT({colormap:c,fillUnspecified:!1});this.lookup={rendererJSON:b,colormapLut:u};return this.canRenderInWebGL=!0};t._isHistogramRequired=function(b){return"percentClip"===b||"histogramEqualization"===b};t._updateStretchRenderer=function(b){let {stretchType:d,dra:u}=b;if(!("none"===d||b.statistics||this.rasterInfo.statistics||u))return!1;var e=aa.unwrap(b.histograms||this.rasterInfo.histograms);
!this._isHistogramRequired(b.stretchType)||null!=e&&e.length||u||(d="minMax");const {gamma:a,useGamma:h,colorRamp:c}=b;var l=this.rasterInfo.pixelType;const D=!u&&-1<["u8","u16","s8","s16"].indexOf(l);"histogramEqualization"===d?(l=e.map(N=>q.createHistogramEqualizationLUT(N)),this.lookup={rendererJSON:b,histogramLut:l}):D&&(e=this.getStretchCutoff(b),l=q.createStretchLUT({pixelType:l,...e,gamma:h?a:null}),this.lookup={rendererJSON:b,stretchLut:l});c&&(l=k.convertColorRampToColormap(c,256,!0),this.lookup||
(this.lookup={rendererJSON:b}),this.lookup.colormapLut=q.createColormapLUT({colormap:l}),this.lookup.rendererJSON=b);return this.canRenderInWebGL=!0};t.getStretchCutoff=function(b,d,u,e){var a,h=b.stretchType;if(b.dra)if("minMax"===h&&d.statistics)var c=d.statistics.map(O=>[O.minValue,O.maxValue,0,0]);else{var l=q.estimateStatisticsHistograms(d);c=l.statistics;l=l.histograms}else{var D;c=0<(null==(D=b.statistics)?void 0:D.length)?b.statistics:aa.unwrap(this.rasterInfo.statistics);l=b.histograms||
aa.unwrap(this.rasterInfo.histograms)}!this._isHistogramRequired(h)||null!=(a=l)&&a.length||(h="minMax");var N=c||l?(c||l).length:this.rasterInfo.bandCount;a=[];D=[];let Q;let M,T,P;c&&!Array.isArray(c[0])&&(c=c.map(O=>[O.min,O.max,O.avg,O.stddev]));switch(h){case "none":c=f[this.rasterInfo.pixelType]||f.f32;for(d=0;d<N;d++)a[d]=c[0],D[d]=c[1];break;case "minMax":for(d=0;d<N;d++)a[d]=c[d][0],D[d]=c[d][1];break;case "standardDeviation":for(d=0;d<N;d++)a[d]=c[d][2]-b.numberOfStandardDeviations*c[d][3],
D[d]=c[d][2]+b.numberOfStandardDeviations*c[d][3],a[d]<c[d][0]&&(a[d]=c[d][0]),D[d]>c[d][1]&&(D[d]=c[d][1]);break;case "histogramEqualization":for(d=0;d<N;d++)a[d]=l[d].min,D[d]=l[d].max;break;case "percentClip":for(d=0;d<l.length;d++){c=l[d];M=new Uint32Array(c.size);var K=c.counts;Q=0;N=(c.max-c.min)/c.size;T=-.5===c.min&&1===N?.5:0;for(P=0;P<c.size;P++)Q+=K[P],M[P]=Q;K=b.minPercent*Q/100;for(P=0;P<c.size;P++)if(M[P]>K){a[d]=c.min+N*(P+T);break}K=(1-b.maxPercent/100)*Q;for(P=c.size-2;0<=P;P--)if(M[P]<
K){D[d]=c.min+N*(P+2-T);break}}break;default:for(d=0;d<N;d++)a[d]=c[d][0],D[d]=c[d][1]}let G;"histogramEqualization"===h?(h=l[0].size||256,b=0,e&&(G=l.map(O=>q.createHistogramEqualizationLUT(O)))):(h=b.max||255,b=b.min||0);return this.getSelectedBandCutoffs({minCutOff:a,maxCutOff:D,outMax:h,outMin:b,histogramLut:G},u)};t.getSelectedBandCutoffs=function(b,d){if(null==d||0===d.length)return b;const u=Math.max.apply(null,d),{minCutOff:e,maxCutOff:a,outMin:h,outMax:c,histogramLut:l}=b;return e.length===
d.length||e.length<=u?b:{minCutOff:d.map(D=>e[D]),maxCutOff:d.map(D=>a[D]),histogramLut:l?d.map(D=>l[D]):null,outMin:h,outMax:c}};t.generateStretchWebGLParams=function(b,d,u){var e;let a=null,h=null;var c=this.lookup&&this.lookup.colormapLut;d.colorRamp&&c&&(a=c.indexedColormap,h=c.offset);"histogramEqualization"===d.stretchType&&(d={...d,stretchType:"minMax"});({gamma:c}=d);const l=!!(d.useGamma&&c&&c.some(P=>1!==P)),{minCutOff:D,maxCutOff:N,outMin:Q,outMax:M}=this.getStretchCutoff(d,b,u);d=null==
(e=b)?void 0:e.getPlaneCount();2===d&&(b=b.clone(),b.statistics=[b.statistics[0]],b.pixels=[b.pixels[0]]);b=Math.min(3,(null==u?void 0:u.length)||d||this.rasterInfo.bandCount);u=new Float32Array(b);e=a||l?1:255;for(d=0;d<b;d++)u[d]=(M-Q)/(N[d]-D[d])/e;const T=new Float32Array(b);if(l)for(d=0;d<b;d++)T[d]=1<c[d]?2<c[d]?6.5+(c[d]-2)**2.5:6.5+100*(2-c[d])**4:1;return{bandCount:b,outMin:Q/e,outMax:M/e,minCutOff:D,maxCutOff:N,factor:u,useGamma:l,gamma:l?c:[1,1,1],gammaCorrection:l?T:[1,1,1],colormap:a,
colormapOffset:h,type:"stretch"}};t.generateShadedReliefWebGLParams=function(b,d,u){var e,a,h;let c=null,l=null;const D=this.lookup&&this.lookup.colormapLut;b.colorRamp&&D&&(c=D.indexedColormap,l=D.offset);d=p.calculateHillshadeParams({...b,isGCS:d,resolution:u});u=null==(e=aa.unwrap(this.rasterInfo.statistics))?void 0:e[0];return{...d,minValue:null!=(a=u.min)?a:0,maxValue:null!=(h=u.max)?h:8E3,hillshadeType:"traditional"===b.hillshadeType?0:1,type:"hillshade",colormap:c,colormapOffset:l}};t.isValidPixelBlock=
function(b){return!!(b&&b.pixels&&0<b.pixels.length&&0!==b.validPixelCount)};return E}(g.JSONSupport);H.__decorate([I.property({json:{write:!0}})],A.prototype,"rendererJSON",void 0);H.__decorate([I.property({type:w,json:{write:!0}})],A.prototype,"rasterInfo",void 0);H.__decorate([I.property({json:{write:!0}})],A.prototype,"lookup",void 0);H.__decorate([I.property()],A.prototype,"canRenderInWebGL",void 0);return A=H.__decorate([F.subclass("esri.renderers.support.RasterSymbolizer")],A)})},"esri/layers/support/rasterFunctions/pixelUtils":function(){define(["exports",
"../PixelBlock"],function(U,H){function A(g,n){g=Math.min(Math.max(g,-100),100);n=Math.min(Math.max(n,-100),100);let k,w;const q=new Uint8Array(256);for(k=0;256>k;k++)0<g&&100>g?w=(200*k-25500+510*n)/(2*(100-g))+128:0>=g&&-100<g?w=(200*k-25500+510*n)*(100+g)/2E4+128:100===g?(w=200*k-25500+256*(100-g)+510*n,w=0<w?255:0):-100===g&&(w=128),q[k]=255<w?255:0>w?0:w;return q}function aa(g,n,k,w,q,p,x,r){return{xmin:q<=k*g?0:q<k*g+g?q-k*g:g,ymin:p<=w*n?0:p<w*n+n?p-w*n:n,xmax:q+x<=k*g?0:q+x<k*g+g?q+x-k*g:
g,ymax:p+r<=w*n?0:p+r<w*n+n?p+r-w*n:n}}function y(g,n,k,w){var q=g.filter(M=>z(M))[0];if(null==q)return null;const p=w?w.width:n.width;w=w?w.height:n.height;const x=q.width,r=q.height,m=n.width/x;n=n.height/r;const f=k?k.x:0;k=k?k.y:0;const C=q.pixelType;var E=H.getPixelArrayConstructor(C);const t=q.pixels.length;q=[];let b,d;let u,e,a,h,c,l,D;for(e=0;e<t;e++){d=new E(p*w);for(a=0;a<n;a++)for(h=0;h<m;h++){var N=g[a*m+h];if(z(N))for(b=N.pixels[e],D=aa(x,r,h,a,f,k,p,w),c=D.ymin;c<D.ymax;c++)for(N=(a*
r+c-k)*p+(h*x-f),u=c*x,l=D.xmin;l<D.xmax;l++)d[N+l]=b[u+l]}q.push(d)}let Q;if(g.some(M=>null==M||M.mask&&0<M.mask.length))for(Q=new Uint8Array(p*w),a=0;a<n;a++)for(h=0;h<m;h++)if(E=(N=g[a*m+h])?N.mask:null,D=aa(x,r,h,a,f,k,p,w),E)for(c=D.ymin;c<D.ymax;c++)for(N=(a*r+c-k)*p+(h*x-f),u=c*x,l=D.xmin;l<D.xmax;l++)Q[N+l]=E[u+l];else if(N)for(c=D.ymin;c<D.ymax;c++)for(N=(a*r+c-k)*p+(h*x-f),u=c*x,l=D.xmin;l<D.xmax;l++)Q[N+l]=1;else for(c=D.ymin;c<D.ymax;c++)for(N=(a*r+c-k)*p+(h*x-f),u=c*x,l=D.xmin;l<D.xmax;l++)Q[N+
l]=0;g=new H({width:p,height:w,pixels:q,pixelType:C,mask:Q});g.updateStatistics();return g}function J(g){if(!z(g))return null;const n=g.clone(),{width:k,height:w,pixels:q,mask:p}=g;var x=q[0];g=n.pixels[0];for(let f=2;f<w-1;f++){const C=new Map;for(var r=f-2;r<f+2;r++)for(var m=0;4>m;m++){const E=r*k+m;F(C,x[E],p?p[E]:1)}g[f*k]=I(C);g[f*k+1]=g[f*k+2]=g[f*k];for(r=3;r<k-1;r++)m=(f-2)*k+r+1,F(C,x[m],p?p[m]:1),m=(f-1)*k+r+1,F(C,x[m],p?p[m]:1),m=f*k+r+1,F(C,x[m],p?p[m]:1),m=(f+1)*k+r+1,F(C,x[m],p?p[m]:
1),m=(f-2)*k+r-3,S(C,x[m],p?p[m]:1),m=(f-1)*k+r-3,S(C,x[m],p?p[m]:1),m=f*k+r-3,S(C,x[m],p?p[m]:1),m=(f+1)*k+r-3,S(C,x[m],p?p[m]:1),g[f*k+r]=I(C);g[f*k+r+1]=g[f*k+r]}for(x=0;x<k;x++)g[x]=g[k+x]=g[2*k+x],g[(w-1)*k+x]=g[(w-2)*k+x];n.updateStatistics();return n}function I(g){if(0===g.size)return 0;let n=0,k=-1,w=0;const q=g.keys();let p=q.next();for(;!p.done;)w=g.get(p.value),w>n&&(k=p.value,n=w),p=q.next();return k}function S(g,n,k){0!==k&&(k=g.get(n),1===k?g.delete(n):g.set(n,k-1))}function F(g,n,k){0!==
k&&g.set(n,g.has(n)?g.get(n)+1:1)}function L(g,n,k){let {x:w,y:q}=n;const {width:p,height:x}=k;if(0===w&&0===q&&x===g.height&&p===g.width)return g;const {width:r,height:m}=g;n=Math.max(0,q);const f=Math.max(0,w),C=Math.min(w+p,r),E=Math.min(q+x,m);if(0>C||0>E||!z(g))return null;w=Math.max(0,-w);q=Math.max(0,-q);const {pixels:t,mask:b}=g;var d=p*x,u=t.length;const e=[];for(var a=0;a<u;a++){var h=t[a],c=H.createEmptyBand(g.pixelType,d);for(let l=n;l<E;l++){const D=l*r;let N=(l+q-n)*p+w;for(let Q=f;Q<
C;Q++)c[N++]=h[D+Q]}e.push(c)}d=new Uint8Array(d);for(u=n;u<E;u++)for(a=u*r,h=(u+q-n)*p+w,c=f;c<C;c++)d[h++]=b?b[a+c]:1;g=new H({width:k.width,height:k.height,pixelType:g.pixelType,pixels:e,mask:d});g.updateStatistics();return g}function v(g,n=!0){if(!z(g))return null;const {pixels:k,width:w,height:q,mask:p,pixelType:x}=g;g=[];const r=Math.round(w/2),m=Math.round(q/2),f=q-1,C=w-1;for(var E=0;E<k.length;E++){var t=k[E],b=H.createEmptyBand(x,r*m),d=0;for(var u=0;u<q;u+=2)for(var e=0;e<w;e+=2){var a=
t[u*w+e];if(n){var h=e===C?a:t[u*w+e+1];const c=u===f?a:t[u*w+e+w],l=e===C?c:u===f?h:t[u*w+e+w+1];b[d++]=(a+h+c+l)/4}else b[d++]=a}g.push(b)}E=null;if(p)for(E=new Uint8Array(r*m),t=0,b=0;b<q;b+=2)for(d=0;d<w;d+=2)u=p[b*w+d],n?(e=d===C?u:p[b*w+d+1],a=b===f?u:p[b*w+d+w],h=d===C?a:b===f?e:p[b*w+d+w+1],E[t++]=u*e*a*h?1:0):E[t++]=u;return new H({width:r,height:m,pixelType:x,pixels:g,mask:E})}const z=function(g){return g&&"esri.layers.support.PixelBlock"===g.declaredClass&&g.pixels&&0<g.pixels.length};
U.approximateTransform=function(g,n,k,w,q="nearest"){if(!z(g))return null;"majority"===q&&(g=J(g));const {pixels:p,mask:x,pixelType:r}=g,m=g.width;var f=g.height;g=H.getPixelArrayConstructor(r);var C=p.length;const {width:E,height:t}=n;n=w.cols;var b=w.rows;const d=Math.ceil(E/n),u=Math.ceil(t/b);w=!1;for(var e=0;e<k.length;e+=3)-1===k[e]&&-1===k[e+1]&&-1===k[e+2]&&(w=!0);let a,h,c,l,D,N;const Q=new Float32Array(E*t),M=new Float32Array(E*t);e=0;let T,P;const K="majority"===q?0:.5;for(let X=0;X<u;X++)for(let V=
0;V<d;V++){a=12*(X*d+V);q=k[a];h=k[a+1];c=k[a+2];l=k[a+3];D=k[a+4];N=k[a+5];for(var G=0;G<b;G++){e=(X*b+G)*E+V*n;P=(G+.5)/b;for(var O=0;O<G;O++)T=(O+.5)/n,Q[e+O]=Math.round((q*T+h*P+c)*m-K),M[e+O]=Math.round((l*T+D*P+N)*f-K)}a+=6;q=k[a];h=k[a+1];c=k[a+2];l=k[a+3];D=k[a+4];N=k[a+5];for(G=0;G<b;G++)for(e=(X*b+G)*E+V*n,P=(G+.5)/b,O=G;O<n;O++)T=(O+.5)/n,Q[e+O]=Math.round((q*T+h*P+c)*m-K),M[e+O]=Math.round((l*T+D*P+N)*f-K)}k=(X,V)=>{for(let Z=0;Z<t;Z++){a=Z*E;for(let Y=0;Y<E;Y++)X[a]=0>Q[a]||0>M[a]?0:
V[Q[a]+M[a]*m],a++}};f=[];for(b=0;b<C;b++)n=new g(E*t),k(n,p[b]),f.push(n);g=new H({width:E,height:t,pixelType:r,pixels:f});if(x)g.mask=new Uint8Array(E*t),k(g.mask,x);else if(w)for(g.mask=new Uint8Array(E*t),C=0;C<E*t;C++)g.mask[C]=0>Q[C]||0>M[C]?0:1;g.updateStatistics();return g};U.clip=L;U.colorize=function(g,n){if(!z(g)||!n&&(n.indexedColormap||n.indexed2DColormap))return g;const k=g.clone();var w=k.pixels;let q=k.mask;const p=k.width*k.height;if(1!==w.length)return g;const {indexedColormap:x,
indexed2DColormap:r,offset:m,alphaSpecified:f}=n;n=x.length-1;g=0;w=w[0];const C=new Uint8Array(w.length),E=new Uint8Array(w.length),t=new Uint8Array(w.length);let b=0;if(x)if(q)for(g=0;g<p;g++)q[g]&&(b=4*(w[g]-m),b<m||b>n?q[g]=0:(C[g]=x[b],E[g]=x[b+1],t[g]=x[b+2],q[g]=x[b+3]));else{q=new Uint8Array(p);for(g=0;g<p;g++)b=4*(w[g]-m),b<m||b>n?q[g]=0:(C[g]=x[b],E[g]=x[b+1],t[g]=x[b+2],q[g]=x[b+3]);k.mask=q}else if(q)for(g=0;g<p;g++)q[g]&&(n=r[w[g]],C[g]=n[0],E[g]=n[1],t[g]=n[2],q[g]=n[3]);else{q=new Uint8Array(p);
for(g=0;g<p;g++)n=r[w[g]],C[g]=n[0],E[g]=n[1],t[g]=n[2],q[g]=n[3];k.mask=q}k.pixels=[C,E,t];k.statistics=null;k.pixelType="u8";k.maskIsAlpha=f;return k};U.createColormapLUT=function(g){if(g){var n=g.colormap;if(n&&0!==n.length){n=n.sort((f,C)=>f[0]-C[0]);var k=0;0>n[0][0]&&(k=n[0][0]);var w=Math.max(256,n[n.length-1][0]-k+1),q=new Uint8Array(4*w),p=[],x=0,r=0,m=5===n[0].length;if(65536<w)return n.forEach(f=>{p[f[0]-k]=m?f.slice(1):f.slice(1).concat([255])}),{indexed2DColormap:p,offset:k,alphaSpecified:m};
if(g.fillUnspecified)for(g=n[r],x=g[0]-k;x<w;x++)q[4*x]=g[1],q[4*x+1]=g[2],q[4*x+2]=g[3],q[4*x+3]=m?g[4]:255,x===g[0]-k&&(g=r===n.length-1?g:n[++r]);else for(x=0;x<n.length;x++)g=n[x],r=4*(g[0]-k),q[r]=g[1],q[r+1]=g[2],q[r+2]=g[3],q[r+3]=m?g[4]:255;return{indexedColormap:q,offset:k,alphaSpecified:m}}}};U.createContrastBrightnessLUT=A;U.createHistogramEqualizationLUT=function(g,n=256){n=Math.min(n,256);const {size:k,counts:w}=g;g=new Uint8Array(k);var q=w.reduce((f,C)=>f+C/n,0);let p=0;var x=0;let r=
0,m=q;for(let f=0;f<k;f++)if(r+=w[f],!(f<k-1&&r+w[f+1]<m)){for(;p<n-1&&m<r;)p++,m+=q;for(;x<=f;x++)g[x]=p;x=f+1}for(q=x;q<k;q++)g[q]=n-1;return g};U.createStretchLUT=function(g){const {minCutOff:n,maxCutOff:k,gamma:w,pixelType:q}=g,p=g.outMin||0,x=g.outMax||255;if(-1===["u8","u16","s8","s16"].indexOf(q))return null;const r=n.length;let m;let f=0;"s8"===q?f=-127:"s16"===q&&(f=-32767);let C=256;-1<["u16","s16"].indexOf(q)&&(C=65536);const E=[],t=x-p;for(m=0;m<r;m++)E[m]=k[m]-n[m];var b=w&&w.length>=
r;const d=[];if(b)for(m=0;m<r;m++)d[m]=1<w[m]?2<w[m]?6.5+(w[m]-2)**2.5:6.5+100*(2-w[m])**4:1;let u;const e=[];let a,h,c;if(b)for(m=0;m<r;m++){c=[];for(b=0;b<C;b++)a=b+f,u=(a-n[m])/E[m],h=1,1<w[m]&&(h-=(1/t)**(u*d[m])),c[b]=a<k[m]&&a>n[m]?Math.floor(h*t*u**(1/w[m]))+p:a>=k[m]?x:p;e[m]=c}else for(m=0;m<r;m++){c=[];for(b=0;b<C;b++)a=b+f,c[b]=a<=n[m]?p:a>=k[m]?x:Math.floor((a-n[m])/E[m]*t)+p;e[m]=c}if(null!=g.contrastOffset)for(g=A(g.contrastOffset,g.brightnessOffset),m=0;m<r;m++)for(c=e[m],b=0;b<C;b++)c[b]=
g[c[b]];return{lut:e,offset:f}};U.estimateStatisticsFromHistograms=function(g){const n=[];for(let p=0;p<g.length;p++){const {min:x,max:r,size:m,counts:f}=g[p];let C=0;var k=0;for(var w=0;w<m;w++)C+=f[w],k+=w*f[w];k/=C;w=0;for(var q=0;q<m;q++)w+=f[q]*(q-k)**2;q=(r-x)/m;n.push({min:x,max:r,avg:(k+.5)*q+x,stddev:Math.sqrt(w/(C-1))*q})}return n};U.estimateStatisticsHistograms=function(g){if(!z(g))return null;g.statistics||g.updateStatistics();const {pixels:n,mask:k,pixelType:w,statistics:q}=g;g=g.width*
g.height;const p=n.length;let x,r;let m;var f;const C=[],E=[];for(m=0;m<p;m++){var t=new Uint32Array(256);var b=n[m];if("u8"===w)if(x=-.5,r=255.5,k)for(f=0;f<g;f++)k[f]&&t[b[f]]++;else for(f=0;f<g;f++)t[b[f]]++;else{x=q[m].minValue;r=q[m].maxValue;var d=(r-x)/256;var u=new Uint32Array(257);if(k)for(f=0;f<g;f++)k[f]&&u[Math.floor((b[f]-x)/d)]++;else for(f=0;f<g;f++)u[Math.floor((b[f]-x)/d)]++;for(f=0;255>f;f++)t[f]=u[f];t[255]=u[255]+u[256]}C.push({min:x,max:r,size:256,counts:t});for(f=b=u=d=0;256>
f;f++)d+=t[f],u+=f*t[f];u/=d;for(f=0;256>f;f++)b+=t[f]*(f-u)**2;t=Math.sqrt(b/(d-1));d=(r-x)/256;f=(u+.5)*d+x;t*=d;E.push({min:x,max:r,avg:f,stddev:t})}return{statistics:E,histograms:C}};U.extractBands=function(g,n){if(null==n||!n.length||!z(g))return g;const k=g.pixels.length;return n&&n.some(w=>w>=k)||1===k&&1===n.length&&0===n[0]||k===n.length&&!n.some((w,q)=>w!==q)?g:new H({pixelType:g.pixelType,width:g.width,height:g.height,mask:g.mask,validPixelCount:g.validPixelCount,maskIsAlpha:g.maskIsAlpha,
pixels:n.map(w=>g.pixels[w]),statistics:g.statistics&&n.map(w=>g.statistics[w])})};U.getClipBounds=aa;U.lookupPixels=function(g,n){if(!z(g))return null;const {pixels:k,mask:w}=g,q=g.width*g.height,p=k.length;let x=n.lut;({offset:n}=n);let r,m;x&&1===x[0].length&&(x=k.map(()=>x));const f=[];let C,E,t;if(n)if(null==w)for(r=0;r<p;r++){C=k[r];E=x[r];t=new Uint8Array(q);for(m=0;m<q;m++)t[m]=E[C[m]-n];f.push(t)}else for(r=0;r<p;r++){C=k[r];E=x[r];t=new Uint8Array(q);for(m=0;m<q;m++)w[m]&&(t[m]=E[C[m]-n]);
f.push(t)}else if(null==w)for(r=0;r<p;r++){C=k[r];E=x[r];t=new Uint8Array(q);for(m=0;m<q;m++)t[m]=E[C[m]];f.push(t)}else for(r=0;r<p;r++){C=k[r];E=x[r];t=new Uint8Array(q);for(m=0;m<q;m++)w[m]&&(t[m]=E[C[m]]);f.push(t)}g=new H({width:g.width,height:g.height,pixels:f,mask:w,pixelType:"u8"});g.updateStatistics();return g};U.mosaic=y;U.mosaicPixelData=function(g,n){if(!g||0===g.length)return null;var k=g.filter(E=>E.pixelBlock)[0];if(!k)return null;var w=(k.extent.xmax-k.extent.xmin)/k.pixelBlock.width;
const q=(k.extent.ymax-k.extent.ymin)/k.pixelBlock.height,p=.01*Math.min(w,q),x=g.sort((E,t)=>Math.abs(E.extent.ymax-t.extent.ymax)>p?t.extent.ymax-E.extent.ymax:Math.abs(E.extent.xmin-t.extent.xmin)>p?E.extent.xmin-t.extent.xmin:0);var r=Math.min.apply(null,x.map(E=>E.extent.xmin));const m=Math.min.apply(null,x.map(E=>E.extent.ymin)),f=Math.max.apply(null,x.map(E=>E.extent.xmax)),C=Math.max.apply(null,x.map(E=>E.extent.ymax));g={x:Math.round((n.xmin-r)/w),y:Math.round((C-n.ymax)/q)};r={width:Math.round((f-
r)/w),height:Math.round((C-m)/q)};w={width:Math.round((n.xmax-n.xmin)/w),height:Math.round((n.ymax-n.ymin)/q)};if(Math.round(r.width/k.pixelBlock.width)*Math.round(r.height/k.pixelBlock.height)!==x.length||0>g.x||0>g.y||r.width<w.width||r.height<w.height)return null;k=x.map(E=>E.pixelBlock);k=y(k,r,g,w);return{extent:n,pixelBlock:k}};U.remapColor=function(g,n){if(!z(g))return null;g=g.clone();var {pixels:k}=g;const w=g.width*g.height,q=n.length,p=Math.floor(q/2),x=n[Math.floor(p)];k=k[0];let r,m,
f,C,E,t,b=!1;const d=new Uint8Array(w),u=new Uint8Array(w),e=new Uint8Array(w);let a=g.mask;const h=4===n[0].mappedColor.length;a||(a=new Uint8Array(w),a.fill(h?255:1),g.mask=a);for(E=0;E<w;E++)if(a[E]){r=k[E];b=!1;t=p;m=x;f=0;for(C=q-1;1<C-f;){if(r===m.value){b=!0;break}r>m.value?f=t:C=t;t=Math.floor((f+C)/2);m=n[Math.floor(t)]}b||(r===n[f].value?(m=n[f],b=!0):r===n[C].value?(m=n[C],b=!0):r<n[f].value?(b=!1,m=null):r>n[f].value&&(r<n[C].value?(m=n[f],b=!0):C===q-1?(b=!1,m=null):(m=n[C],b=!0)));b?
(d[E]=m.mappedColor[0],u[E]=m.mappedColor[1],e[E]=m.mappedColor[2],a[E]=m.mappedColor[3]):d[E]=u[E]=e[E]=a[E]=0}g.pixels=[d,u,e];g.mask=a;g.pixelType="u8";g.maskIsAlpha=h;return g};U.resampleByMajority=J;U.setValidBoundary=function(g,n,k){if(!z(g))return null;const {width:w,height:q}=g,p=n.x;n=n.y;const x=k.width+p;k=k.height+n;if(0>p||0>n||x>w||k>q||0===p&&0===n&&x===w&&k===q)return g;g.mask||(g.mask=new Uint8Array(w*q));const r=g.mask;for(let m=0;m<q;m++){const f=m*w;for(let C=0;C<w;C++)r[f+C]=
m<n||m>=k||C<p||C>=x?0:1}g.updateStatistics();return g};U.split=function(g,n,k){if(!z(g))return null;const {width:w,height:q}=n;let {width:p,height:x}=g;const r=new Map,m={x:0,y:0};k=null==k?1:1+k;for(let f=0;f<k;f++){const C=Math.ceil(p/w),E=Math.ceil(x/q);for(let t=0;t<E;t++){m.y=t*q;for(let b=0;b<C;b++){m.x=b*w;const d=L(g,m,n);r.set(`${f}/${t}/${b}`,d)}}f<k-1&&(g=v(g));p=Math.round(p/2);x=Math.round(x/2)}return r};U.stretch=function(g,n){if(!z(g))return null;g=g.clone();const {pixels:k,mask:w}=
g,{minCutOff:q,maxCutOff:p,gamma:x}=n,r=n.outMin||0;n=n.outMax||255;const m=g.width*g.height,f=k.length;let C;let E,t,b;const d=n-r,u=[];for(C=0;C<f;C++)u[C]=p[C]-q[C];var e=x&&x.length>=f;const a=[];if(e)for(C=0;C<f;C++)a[C]=1<x[C]?2<x[C]?6.5+(x[C]-2)**2.5:6.5+100*(2-x[C])**4:1;if(e)if(null!=w)for(e=0;e<m;e++){if(w[e])for(C=0;C<f;C++)E=k[C][e],b=(E-q[C])/u[C],t=1,1<x[C]&&(t-=(1/d)**(b*a[C])),k[C][e]=E<p[C]&&E>q[C]?Math.floor(t*d*b**(1/x[C]))+r:E>=p[C]?n:r}else for(e=0;e<m;e++)for(C=0;C<f;C++)E=k[C][e],
b=(E-q[C])/u[C],t=1,1<x[C]&&(t-=(1/d)**(b*a[C])),k[C][e]=E<p[C]&&E>q[C]?Math.floor(t*d*b**(1/x[C]))+r:E>=p[C]?n:r;else if(null!=w)for(e=0;e<m;e++){if(w[e])for(C=0;C<f;C++)E=k[C][e],k[C][e]=E<p[C]&&E>q[C]?Math.floor((E-q[C])/u[C]*d)+r:E>=p[C]?n:r}else for(e=0;e<m;e++)for(C=0;C<f;C++)E=k[C][e],k[C][e]=E<p[C]&&E>q[C]?Math.floor((E-q[C])/u[C]*d)+r:E>=p[C]?n:r;g.pixelType="u8";g.updateStatistics();return g};Object.defineProperty(U,"__esModule",{value:!0})})},"esri/layers/support/rasterFunctions/surfaceUtils":function(){define(["exports",
"../PixelBlock"],function(U,H){function A(y){let {altitude:J,azimuth:I}=y;const {hillshadeType:S,pixelSizePower:F,pixelSizeFactor:L,scalingType:v,isGCS:z,resolution:g}=y;var n="multi-directional"===S?2*y.zFactor:y.zFactor;const {x:k,y:w}=g;y=n/(8*k);var q=n/(8*w);z&&.001<n&&(y/=111E3,q/=111E3);"adjusted"===v&&(z?(y=111E3*k,q=111E3*w,y=(n+y**F*L)/(8*y),q=(n+q**F*L)/(8*q)):(y=(n+k**F*L)/(8*k),q=(n+w**F*L)/(8*w)));var p=(90-J)*Math.PI/180;n=Math.cos(p);let x=(360-I+90)*Math.PI/180,r=Math.sin(p)*Math.cos(x);
p=Math.sin(p)*Math.sin(x);const m=[315,270,225,360,180,0],f=[60,60,60,60,60,90];var C=new Float32Array([3,5,3,2,1,4]);const E=C.reduce((e,a)=>e+a);C=C.map(e=>e/E);const t="multi-directional"===S?m.length:1,b=new Float32Array(6),d=new Float32Array(6),u=new Float32Array(6);if("multi-directional"===S)for(let e=0;e<t;e++)J=f[e],I=m[e],p=(90-J)*Math.PI/180,n=Math.cos(p),x=(360-I+90)*Math.PI/180,r=Math.sin(p)*Math.cos(x),p=Math.sin(p)*Math.sin(x),b[e]=n,d[e]=r,u[e]=p;else b.fill(n),d.fill(r),u.fill(p);
return{resolution:g,factor:[y,q],sinZcosA:r,sinZsinA:p,cosZ:n,sinZcosAs:d,sinZsinAs:u,cosZs:b,weights:C,hillshadeType:["traditional","multi-directional"].indexOf(S)}}const aa=function(y){return y&&"esri.layers.support.PixelBlock"===y.declaredClass&&y.pixels&&0<y.pixels.length};U.calculateHillshadeParams=A;U.hillshade=function(y,J){if(!aa(y))return y;const {width:I,height:S,mask:F}=y,L=new Uint8Array(I*S);F&&L.set(F);const {factor:v,sinZcosA:z,sinZsinA:g,cosZ:n,sinZcosAs:k,sinZsinAs:w,cosZs:q,weights:p}=
A(J),[x,r]=v;var {hillshadeType:m}=J;const f=y.pixels[0];J=new Uint8Array(I*S);let C;for(let h=1;h<S-1;h++){const c=h*I;for(let l=1;l<I-1;l++)if(F&&!F[c+l])J[c+l]=0;else{var E=8;if(F&&(E=F[c-I+l-1]+F[c-I+l]+F[c-I+l+1]+F[c+l-1]+F[c+l+1]+F[c+I+l-1]+F[c+I+l]+F[c+I+l+1],7>E)){J[c+l]=0;L[c+l]=0;continue}if(7===E){var t=F[c-I+l-1]?f[c-I+l-1]:f[c+l];var b=F[c-I+l]?f[c-I+l]:f[c+l];var d=F[c-I+l+1]?f[c-I+l+1]:f[c+l];E=F[c+l-1]?f[c+l-1]:f[c+l];C=F[c+l+1]?f[c+l+1]:f[c+l];var u=F[c+I+l-1]?f[c+I+l-1]:f[c+l];var e=
F[c+I+l]?f[c+I+l]:f[c+l];var a=F[c+I+l+1]?f[c+I+l+1]:f[c+l]}else t=f[c-I+l-1],b=f[c-I+l],d=f[c-I+l+1],E=f[c+l-1],C=f[c+l+1],u=f[c+I+l-1],e=f[c+I+l],a=f[c+I+l+1];E=(d+C+C+a-(t+E+E+u))*x;t=(u+e+e+a-(t+b+b+d))*r;b=Math.sqrt(1+E*E+t*t);d=0;if("traditional"===m)E=255*(n+g*t-z*E)/b,0>E&&(E=0),d=E;else for(u=w.length,e=0;e<u;e++)a=255*(q[e]+w[e]*t-k[e]*E)/b,0>a&&(a=0),d+=a*p[e];J[c+l]=d&255}}for(m=0;m<S;m++)J[m*I]=J[m*I+1],J[(m+1)*I-1]=J[(m+1)*I-2];for(m=1;m<I-1;m++)J[m]=J[m+I],J[m+(S-1)*I]=J[m+(S-2)*I];
return new H({width:I,height:S,pixels:[J],mask:F?L:null,pixelType:"u8",validPixelCount:y.validPixelCount,statistics:[{minValue:0,maxValue:255}]})};U.tintHillshade=function(y,J,I,S){if(aa(y)&&aa(J)){var {min:F,max:L}=S;S=y.pixels[0];var {pixels:v,mask:z}=J;J=v[0];var g=255.00001/(L-F),n=new Uint8ClampedArray(J.length),k=new Uint8ClampedArray(J.length),w=new Uint8ClampedArray(J.length),q=I.length-1;for(let r=0;r<J.length;r++){if(z&&0===z[r])continue;var p=Math.floor((J[r]-F)*g);const [m,f]=I[0>p?0:
p>q?q:p];var x=S[r];p=x*f;const C=p*(1-Math.abs(m%2-1));x-=p;switch(Math.floor(m)){case 0:n[r]=p+x;k[r]=C+x;w[r]=x;break;case 1:n[r]=C+x;k[r]=p+x;w[r]=x;break;case 2:n[r]=x;k[r]=p+x;w[r]=C+x;break;case 3:n[r]=x;k[r]=C+x;w[r]=p+x;break;case 4:n[r]=C+x;k[r]=x;w[r]=p+x;break;case 5:case 6:n[r]=p+x,k[r]=x,w[r]=C+x}}y.pixels=[n,k,w];y.updateStatistics()}};Object.defineProperty(U,"__esModule",{value:!0})})},"esri/rest/imageService":function(){define("exports ../core/maybe ../request ../geometry/support/normalizeUtils ./utils ../tasks/support/ImageIdentifyResult".split(" "),
function(U,H,A,aa,y,J){async function I(S,F,L){S=y.parseUrl(S);var v=await aa.normalizeCentralMeridian(F.geometry?[F.geometry]:[]);F=F.toJSON();{const z=null==F?void 0:F.time;if(z&&(null!=z.start||null!=z.end)){const g=[];null!=z.start&&g.push(z.start);null!=z.end&&-1===g.indexOf(z.end)&&g.push(z.end);F.time=g.join(",")}}v=v&&v[0];H.isSome(v)&&(F.geometry=v.toJSON());S=y.encode({...S.query,f:"json",...F});return y.asValidOptions(S,L)}U.computeHistograms=async function(S,F,L){F=await I(S,F,L);S=y.parseUrl(S);
({data:S}=await A(`${S.path}/computeHistograms`,F));return{histograms:S.histograms}};U.computeStatisticsHistograms=async function(S,F,L){F=await I(S,F,L);S=y.parseUrl(S);({data:S}=await A(`${S.path}/computeStatisticsHistograms`,F));({statistics:F}=S);null!=F&&F.length&&F.forEach(v=>{v.avg=v.mean;v.stddev=v.standardDeviation});return{statistics:F,histograms:S.histograms}};U.identify=async function(S,F,L){const v=y.parseUrl(S);return aa.normalizeCentralMeridian(F.geometry?[F.geometry]:[]).then(z=>{var g=
F.toJSON();z=z&&z[0];H.isSome(z)&&(g.geometry=JSON.stringify(z.toJSON()));g=y.encode({...v.query,f:"json",...g});g=y.asValidOptions(g,L);return A(v.path+"/identify",g)}).then(z=>J.fromJSON(z.data))};Object.defineProperty(U,"__esModule",{value:!0})})},"esri/tasks/support/ImageIdentifyResult":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../geometry/Point ./FeatureSet".split(" "),
function(U,H,A,aa,y,J,I,S,F,L,v,z,g,n){A=function(k){function w(){var q=k.apply(this,arguments)||this;q.catalogItemVisibilities=null;q.catalogItems=null;q.location=null;q.name=null;q.objectId=null;q.processedValues=null;q.properties=null;q.value=null;return q}U._inheritsLoose(w,k);return w}(z.JSONSupport);H.__decorate([J.property({json:{write:!0}})],A.prototype,"catalogItemVisibilities",void 0);H.__decorate([J.property({type:n,json:{write:!0}})],A.prototype,"catalogItems",void 0);H.__decorate([J.property({type:g,
json:{write:!0}})],A.prototype,"location",void 0);H.__decorate([J.property({json:{write:!0}})],A.prototype,"name",void 0);H.__decorate([J.property({json:{write:!0}})],A.prototype,"objectId",void 0);H.__decorate([J.property({json:{write:!0}})],A.prototype,"processedValues",void 0);H.__decorate([J.property({json:{write:!0}})],A.prototype,"properties",void 0);H.__decorate([J.property({json:{write:!0}})],A.prototype,"value",void 0);return A=H.__decorate([S.subclass("esri.tasks.support.ImageIdentifyResult")],
A)})},"esri/tasks/ImageIdentifyTask":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ./Task ../rest/imageService".split(" "),function(U,H,A,aa,y,J,I,S,F,L,v,z,g){A=function(n){function k(){return n.apply(this,arguments)||this}U._inheritsLoose(k,
n);k.prototype.execute=function(w,q){return g.identify(this.url,w,q)};return k}(z);return A=H.__decorate([S.subclass("esri.tasks.ImageIdentifyTask")],A)})},"esri/tasks/support/ImageHistogramParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/lang ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../geometry/Point ../../geometry/support/jsonUtils ../../geometry ../../TimeExtent ../../layers/support/RasterFunction ../../layers/support/MosaicRule".split(" "),
function(U,H,A,aa,y,J,I,S,F,L,v,z,g,n,k,w,q,p,x,r){var m;A=m=function(f){function C(){var t=f.apply(this,arguments)||this;t.geometry=null;t.mosaicRule=null;t.renderingRule=null;t.pixelSize=null;t.raster=void 0;t.timeExtent=null;return t}U._inheritsLoose(C,f);var E=C.prototype;E.writeGeometry=function(t,b,d){null!=t&&(b.geometryType=w.getJsonType(t),b[d]=t.toJSON())};E.clone=function(){return new m(aa.clone({geometry:this.geometry,mosaicRule:this.mosaicRule,renderingRule:this.renderingRule,pixelSize:this.pixelSize,
raster:this.raster,timeExtent:this.timeExtent}))};return C}(n.JSONSupport);H.__decorate([I.property({types:q.geometryTypes,json:{read:w.fromJSON}})],A.prototype,"geometry",void 0);H.__decorate([L.writer("geometry")],A.prototype,"writeGeometry",null);H.__decorate([I.property({type:r,json:{write:!0}})],A.prototype,"mosaicRule",void 0);H.__decorate([I.property({type:x,json:{write:!0}})],A.prototype,"renderingRule",void 0);H.__decorate([I.property({type:k,json:{write:!0}})],A.prototype,"pixelSize",void 0);
H.__decorate([I.property({json:{write:!0}})],A.prototype,"raster",void 0);H.__decorate([I.property({type:p,json:{read:{source:"time"},write:{target:"time"}}})],A.prototype,"timeExtent",void 0);return A=m=H.__decorate([F.subclass("esri.tasks.support.ImageHistogramParameters")],A)})},"esri/tasks/support/ImageIdentifyParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/lang ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../geometry/Point ../../geometry/support/jsonUtils ../../TimeExtent ../../layers/support/RasterFunction ../../layers/support/MosaicRule".split(" "),
function(U,H,A,aa,y,J,I,S,F,L,v,z,g,n,k,w,q,p,x){var r;A=r=function(m){function f(){var E=m.apply(this,arguments)||this;E.geometry=null;E.renderingRules=null;E.pixelSize=null;E.returnGeometry=!0;E.returnCatalogItems=!0;E.returnPixelValues=!0;E.maxItemCount=null;E.timeExtent=null;E.raster=void 0;E.viewId=void 0;return E}U._inheritsLoose(f,m);var C=f.prototype;C.writeGeometry=function(E,t,b){null!=E&&(t.geometryType=w.getJsonType(E),t[b]=JSON.stringify(E.toJSON()))};C.writeMosaicRule=function(E,t,b){null!=
E&&(t[b]=JSON.stringify(E.toJSON()))};C.writeRenderingRule=function(E,t,b){null!=E&&(t[b]=JSON.stringify(E.toJSON()))};C.writeRenderingRules=function(E,t,b){null!=E&&(t[b]=JSON.stringify(E.map(d=>d.toJSON())))};C.writePixelSize=function(E,t,b){null!=E&&(t[b]=JSON.stringify(E))};C.writeTimeExtent=function(E,t,b){if(null!=E){const d=E.start?E.start.getTime():null;E=E.end?E.end.getTime():null;t[b]=null!=d?null!=E?`${d},${E}`:`${d}`:null}};C.clone=function(){return new r(aa.clone({geometry:this.geometry,
mosaicRule:this.mosaicRule,renderingRule:this.renderingRule,pixelSize:this.pixelSize,returnGeometry:this.returnGeometry,returnCatalogItems:this.returnCatalogItems,returnPixelValues:this.returnPixelValues,maxItemCount:this.maxItemCount,raster:this.raster,viewId:this.viewId,timeExtent:this.timeExtent}))};U._createClass(f,[{key:"mosaicRule",set:function(E){E&&E.mosaicMethod&&(E=x.fromJSON({...E.toJSON(),mosaicMethod:E.mosaicMethod,mosaicOperation:E.mosaicOperation}));this._set("mosaicRule",E)}},{key:"renderingRule",
set:function(E){E&&E.rasterFunction&&(E=p.fromJSON({...E.toJSON(),rasterFunction:E.rasterFunction,rasterFunctionArguments:E.rasterFunctionArguments}));this._set("renderingRule",E)}}]);return f}(n.JSONSupport);H.__decorate([I.property({json:{write:!0}})],A.prototype,"geometry",void 0);H.__decorate([L.writer("geometry")],A.prototype,"writeGeometry",null);H.__decorate([I.property({type:x,json:{write:!0}})],A.prototype,"mosaicRule",null);H.__decorate([L.writer("mosaicRule")],A.prototype,"writeMosaicRule",
null);H.__decorate([I.property({type:p,json:{write:!0}})],A.prototype,"renderingRule",null);H.__decorate([L.writer("renderingRule")],A.prototype,"writeRenderingRule",null);H.__decorate([I.property({type:[p],json:{write:!0}})],A.prototype,"renderingRules",void 0);H.__decorate([L.writer("renderingRules")],A.prototype,"writeRenderingRules",null);H.__decorate([I.property({type:k,json:{write:!0}})],A.prototype,"pixelSize",void 0);H.__decorate([L.writer("pixelSize")],A.prototype,"writePixelSize",null);
H.__decorate([I.property({type:Boolean,json:{write:!0}})],A.prototype,"returnGeometry",void 0);H.__decorate([I.property({type:Boolean,json:{write:!0}})],A.prototype,"returnCatalogItems",void 0);H.__decorate([I.property({type:Boolean,json:{write:!0}})],A.prototype,"returnPixelValues",void 0);H.__decorate([I.property({type:Number,json:{write:!0}})],A.prototype,"maxItemCount",void 0);H.__decorate([I.property({type:q,json:{write:{target:"time"}}})],A.prototype,"timeExtent",void 0);H.__decorate([L.writer("timeExtent")],
A.prototype,"writeTimeExtent",null);H.__decorate([I.property({json:{write:!0}})],A.prototype,"raster",void 0);H.__decorate([I.property({json:{write:!0}})],A.prototype,"viewId",void 0);return A=r=H.__decorate([F.subclass("esri.tasks.support.ImageIdentifyParameters")],A)})},"*noref":1}});
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/maybe ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../PopupTemplate ./Layer ../core/MultiOriginJSONSupport ./support/commonProperties ./mixins/OperationalLayer ./mixins/ArcGISService ./mixins/BlendLayer ./mixins/PortalLayer ./mixins/RefreshableLayer ./mixins/ScaleRangeLayer ./mixins/TemporalLayer ../support/popupUtils ./mixins/ArcGISImageService".split(" "),function(U,
H,A,aa,y,J,I,S,F,L,v,z,g,n,k,w,q,p,x,r,m,f,C,E,t,b){A=function(d){function u(...a){a=d.call(this,...a)||this;a.legendEnabled=!0;a.isReference=null;a.operationalLayerType="ArcGISImageServiceLayer";a.popupEnabled=!0;a.popupTemplate=null;a.type="imagery";return a}U._inheritsLoose(u,d);var e=u.prototype;e.normalizeCtorArgs=function(a,h){return"string"===typeof a?{url:a,...h}:a};e.load=function(a){const h=aa.isSome(a)?a.signal:null;this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service"]},
a).then(()=>this._fetchService(h),()=>this._fetchService(h)));return Promise.resolve(this)};e.writeOperationalLayerType=function(a,h,c){var l;a="vector-field"===(null==(l=this.renderer)?void 0:l.type);h[c]=a?"ArcGISImageServiceVectorLayer":"ArcGISImageServiceLayer"};e.createPopupTemplate=function(a){const h=this.rasterFields,c=this.title,l=new Set;var D=!1;let N=!1;this.capabilities&&(N=(D=this.capabilities.operations.supportsQuery&&this.fields&&0<this.fields.length)&&("esriImageServiceDataTypeVector-UV"===
this.serviceDataType||"esriImageServiceDataTypeVector-MagDir"===this.serviceDataType));const Q=new Set;D&&(Q.add("raster.itempixelvalue"),N&&Q.add("raster.magnitude").add("raster.direction"));for(const M of h)D=M.name.toLowerCase(),Q.has(D)||-1<D.indexOf("raster.servicepixelvalue.")||l.add(M.name);return t.createPopupTemplate({fields:h,title:c},{...a,visibleFieldNames:l})};e.redraw=function(){this.emit("redraw")};U._createClass(u,[{key:"defaultPopupTemplate",get:function(){return this.createPopupTemplate()}}]);
return u}(r.BlendLayer(E.TemporalLayer(f.RefreshableLayer(C.ScaleRangeLayer(p.OperationalLayer(m.PortalLayer(b.ArcGISImageService(x.ArcGISService(w.MultiOriginJSONMixin(k))))))))));H.__decorate([I.property(q.legendEnabled)],A.prototype,"legendEnabled",void 0);H.__decorate([I.property({type:["show","hide"]})],A.prototype,"listMode",void 0);H.__decorate([I.property({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],A.prototype,"isReference",void 0);H.__decorate([I.property({type:["ArcGISImageServiceLayer"],
json:{origins:{"web-map":{type:["ArcGISImageServiceLayer","ArcGISImageServiceVectorLayer"],read:!1,write:{target:"layerType",ignoreOrigin:!0}}}}})],A.prototype,"operationalLayerType",void 0);H.__decorate([L.writer("web-map","operationalLayerType")],A.prototype,"writeOperationalLayerType",null);H.__decorate([I.property(q.popupEnabled)],A.prototype,"popupEnabled",void 0);H.__decorate([I.property({type:n,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],A.prototype,"popupTemplate",void 0);
H.__decorate([I.property({readOnly:!0})],A.prototype,"defaultPopupTemplate",null);H.__decorate([I.property({readOnly:!0,json:{read:!1}})],A.prototype,"type",void 0);return A=H.__decorate([F.subclass("esri.layers.ImageryLayer")],A)});