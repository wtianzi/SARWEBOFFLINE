// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.19/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/support/PixelBlock":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/lang ../../core/maybe ../../core/Logger ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/Error ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport".split(" "),function(Y,T,R,U,r,K,M,
O,H,S,E,F,h,n,l){var v;const u=K.getLogger("esri.layers.support.PixelBlock");R=v=function(w){function C(k){k=w.call(this,k)||this;k.width=null;k.height=null;k.pixelType="f32";k.validPixelCount=null;k.mask=null;k.maskIsAlpha=!1;k.pixels=null;k.statistics=null;return k}Y._inheritsLoose(C,w);C.createEmptyBand=function(k,m){return new (v.getPixelArrayConstructor(k))(m)};C.getPixelArrayConstructor=function(k){let m;switch(k){case "u1":case "u2":case "u4":case "u8":m=Uint8Array;break;case "u16":m=Uint16Array;
break;case "u32":m=Uint32Array;break;case "s8":m=Int8Array;break;case "s16":m=Int16Array;break;case "s32":m=Int32Array;break;case "u32":m=Uint32Array;break;case "f32":m=Float32Array;break;case "f64":m=Float64Array;break;case "c64":case "c128":case "unknown":m=Float32Array}return m};var y=C.prototype;y.castPixelType=function(k){if(!k)return"f32";k=k.toLowerCase();-1<["u1","u2","u4"].indexOf(k)?k="u8":-1==="unknown u8 s8 u16 s16 u32 s32 f32 f64".split(" ").indexOf(k)&&(k="f32");return k};y.getPlaneCount=
function(){return this.pixels&&this.pixels.length};y.addData=function(k){if(!k.pixels||k.pixels.length!==this.width*this.height)throw new E("pixelblock:invalid-or-missing-pixels","add data requires valid pixels array that has same length defined by pixel block width * height");this.pixels||(this.pixels=[]);this.statistics||(this.statistics=[]);this.pixels.push(k.pixels);this.statistics.push(k.statistics||{minValue:null,maxValue:null})};y.getAsRGBA=function(){const k=new ArrayBuffer(this.width*this.height*
4);switch(this.pixelType){case "s8":case "s16":case "u16":case "s32":case "u32":case "f32":case "f64":this._fillFromNon8Bit(k);break;default:this._fillFrom8Bit(k)}return new Uint8ClampedArray(k)};y.getAsRGBAFloat=function(){const k=new Float32Array(this.width*this.height*4);this._fillFrom32Bit(k);return k};y.updateStatistics=function(){this.statistics=this.pixels.map(A=>this._calculateBandStatistics(A,this.mask));const k=this.mask;let m=0;if(k)for(let A=0;A<k.length;A++)k[A]&&m++;else m=this.width*
this.height;this.validPixelCount=m};y.clamp=function(k){if(k&&"f64"!==k&&"f32"!==k){switch(k){case "u8":var m=[0,255];break;case "u16":m=[0,65535];break;case "u32":m=[0,4294967295];break;case "s8":m=[-128,127];break;case "s16":m=[-32768,32767];break;case "s32":m=[-2147483648,2147483647];break;default:m=[-3.4*1E39,3.4*1E39]}var [A,D]=m;m=this.pixels;var t=this.width*this.height,b=m.length,d=[];for(let g=0;g<b;g++){var p=v.createEmptyBand(k,t);var e=m[g];for(let c=0;c<t;c++){var a=e[c];p[c]=a>D?D:a<
A?A:a}d.push(p)}this.pixels=d;this.pixelType=k}};y.extractBands=function(k){if(r.isNone(k)||0===k.length||null==this.pixels||0===this.pixels.length)return this;var m=this.pixels.length;const A=k.some(D=>D>=this.pixels.length);m=m===k.length&&!k.some((D,t)=>D!==t);return A||m?this:new v({pixelType:this.pixelType,width:this.width,height:this.height,mask:this.mask,validPixelCount:this.validPixelCount,maskIsAlpha:this.maskIsAlpha,pixels:k.map(D=>this.pixels[D]),statistics:this.statistics&&k.map(D=>this.statistics[D])})};
y.clone=function(){const k=new v({width:this.width,height:this.height,pixelType:this.pixelType,maskIsAlpha:this.maskIsAlpha,validPixelCount:this.validPixelCount});this.mask&&(k.mask=this.mask instanceof Uint8Array?new Uint8Array(this.mask):this.mask.slice(0));let m;const A=v.getPixelArrayConstructor(this.pixelType);if(this.pixels&&0<this.pixels.length){k.pixels=[];const D=this.pixels[0].slice;for(m=0;m<this.pixels.length;m++)k.pixels[m]=D?this.pixels[m].slice(0,this.pixels[m].length):new A(this.pixels[m])}if(this.statistics)for(k.statistics=
[],m=0;m<this.statistics.length;m++)k.statistics[m]=U.clone(this.statistics[m]);return k};y._fillFrom8Bit=function(k){const {mask:m,maskIsAlpha:A,pixels:D}=this;if(k&&D&&D.length){var t,b;var d=t=b=D[0];3<=D.length?(t=D[1],b=D[2]):2===D.length&&(t=D[1]);var p=new Uint32Array(k),e=this.width*this.height;if(d.length!==e)u.error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");else if(m&&m.length===e)if(A)for(k=0;k<e;k++)m[k]&&(p[k]=m[k]<<24|b[k]<<16|t[k]<<8|d[k]);else for(k=0;k<
e;k++)m[k]&&(p[k]=-16777216|b[k]<<16|t[k]<<8|d[k]);else for(k=0;k<e;k++)p[k]=-16777216|b[k]<<16|t[k]<<8|d[k]}else u.error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.")};y._fillFromNon8Bit=function(k){const {pixels:m,mask:A,statistics:D}=this;if(k&&m&&m.length){var t=this.pixelType,b=1,d=0;b=1;D&&0<D.length?(d=D.map(c=>c.minValue).reduce((c,f)=>Math.min(c,f)),b=D.map(c=>c.maxValue-c.minValue).reduce((c,f)=>Math.max(c,f)),b=255/b):(b=255,"s8"===t?(d=-128,b=127):"u16"===
t?b=65535:"s16"===t?(d=-32768,b=32767):"u32"===t?b=4294967295:"s32"===t?(d=-2147483648,b=2147483647):"f32"===t?(d=-3.4*1E39,b=3.4*1E39):"f64"===t&&(d=-Number.MAX_VALUE,b=Number.MAX_VALUE),b=255/(b-d));k=new Uint32Array(k);t=this.width*this.height;var p,e,a;var g=p=e=m[0];if(g.length!==t)return u.error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");if(2<=m.length)if(p=m[1],3<=m.length&&(e=m[2]),A&&A.length===t)for(a=0;a<t;a++)A[a]&&(k[a]=-16777216|(e[a]-d)*b<<16|(p[a]-d)*b<<
8|(g[a]-d)*b);else for(a=0;a<t;a++)k[a]=-16777216|(e[a]-d)*b<<16|(p[a]-d)*b<<8|(g[a]-d)*b;else if(A&&A.length===t)for(a=0;a<t;a++)p=(g[a]-d)*b,A[a]&&(k[a]=-16777216|p<<16|p<<8|p);else for(a=0;a<t;a++)p=(g[a]-d)*b,k[a]=-16777216|p<<16|p<<8|p}else u.error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.")};y._fillFrom32Bit=function(k){const {pixels:m,mask:A}=this;if(!k||!m||!m.length)return u.error("getAsRGBAFloat()","Unable to convert to RGBA. The input pixel block is empty.");
let D,t,b,d;D=t=b=m[0];3<=m.length?(t=m[1],b=m[2]):2===m.length&&(t=m[1]);const p=this.width*this.height;if(D.length!==p)return u.error("getAsRGBAFloat()","Unable to convert to RGBA. The pixelblock is invalid.");let e=0;if(A&&A.length===p)for(d=0;d<p;d++)k[e++]=D[d],k[e++]=t[d],k[e++]=b[d],k[e++]=A[d]&1;else for(d=0;d<p;d++)k[e++]=D[d],k[e++]=t[d],k[e++]=b[d],k[e++]=1};y._calculateBandStatistics=function(k,m){let A=Infinity,D=-Infinity;const t=k.length;let b,d=0;if(m)for(b=0;b<t;b++)m[b]&&(d=k[b],
A=d<A?d:A,D=d>D?d:D);else for(b=0;b<t;b++)d=k[b],A=d<A?d:A,D=d>D?d:D;return{minValue:A,maxValue:D}};return C}(l.JSONSupport);T.__decorate([M.property({json:{write:!0}})],R.prototype,"width",void 0);T.__decorate([M.property({json:{write:!0}})],R.prototype,"height",void 0);T.__decorate([M.property({json:{write:!0}})],R.prototype,"pixelType",void 0);T.__decorate([O.cast("pixelType")],R.prototype,"castPixelType",null);T.__decorate([M.property({json:{write:!0}})],R.prototype,"validPixelCount",void 0);
T.__decorate([M.property({json:{write:!0}})],R.prototype,"mask",void 0);T.__decorate([M.property({json:{write:!0}})],R.prototype,"maskIsAlpha",void 0);T.__decorate([M.property({json:{write:!0}})],R.prototype,"pixels",void 0);T.__decorate([M.property({json:{write:!0}})],R.prototype,"statistics",void 0);return R=v=T.__decorate([S.subclass("esri.layers.support.PixelBlock")],R)})},"esri/layers/support/rasterFormats/RasterCodec":function(){define("exports ../../../core/Error ../PixelBlock ../../../chunks/_commonjsHelpers ../../../chunks/Zlib ./ImageCanvasDecoder ./JpgPlus ../../../chunks/LercCodec ./Raw ./utils ./TiffDecoder".split(" "),
function(Y,T,R,U,r,K,M,O,H,S,E){function F(t,b){if(!S.isPlatformLittleEndian)throw new T("rasterCoded:decode","lerc decoder is not supported on big endian platform");const {width:d,height:p,pixelType:e}=b;var a=y(e);const g=a.pixelTypeCtor;b=null==b.noDataValue?a.noDataValue:b.noDataValue;a=0;let c,f=0,q;const z=t.byteLength-10;for(;f<z;){var B=O.decode(t,{inputOffset:f,encodedMaskData:c,returnMask:0===a?!0:!1,returnEncodedMask:0===a?!0:!1,returnFileInfo:!0,pixelType:g,noDataValue:b});if(d&&p&&(B.width!==
d||B.height!==p))throw new T("rasterCoded:decode","lerc decoded result has width or height different from specified in options");f=B.fileInfo.eofOffset;0===a&&(c=B.encodedMaskData,q=new R({width:B.width,height:B.height,pixels:[],pixelType:e,mask:B.maskData,statistics:[]}));a++;q.addData({pixels:B.pixelData,statistics:{minValue:B.minValue,maxValue:B.maxValue,noDataValue:B.noDataValue}});10<z-f&&(B=String.fromCharCode.apply(null,new Uint8Array(t,f,10)),f=-1<f+B.indexOf("CntZ")?B.indexOf("CntZ"):0)}return q}
function h(t,b){if(!S.isPlatformLittleEndian)throw new T("rasterCoded:decode","lerc decoder is not supported on big endian platform");var d=0,p=0,e=0;let a;let g;const c=t.byteLength-10,f=[],{width:q,height:z}=b;for(b=0;p<c;){var B;var x=m.decode(t,{inputOffset:p,maskData:a,returnFileInfo:!0});if(q&&z&&(x.width!==q||x.height!==z))throw new T("rasterCoded:decode","lerc2 decoded result has width or height different from what's specified in options");p=x.fileInfo.eofOffset;a=x.maskData;0===d&&(e=x.fileInfo.numValidPixel,
g=new R({width:x.width,height:x.height,pixels:[],pixelType:x.fileInfo.pixelType,mask:a,statistics:[]}));x.fileInfo.mask&&0<x.fileInfo.mask.numBytes&&b++;a&&f.push(a);if(1<x.dimCount&&(null==(B=x.pixelData)?void 0:B.length)===x.width*x.height*x.dimCount){var J,I,G,L;x.pixelData=x.pixelData.slice(-x.width*x.height);const N=null==(J=x.dimStats)?void 0:null==(I=J.minValues)?void 0:I[x.dimCount-1],W=null==(G=x.dimStats)?void 0:null==(L=G.maxValues)?void 0:L[x.dimCount-1];null!=N&&null!=W&&(x.minValue=
N,x.maxValue=W)}d++;g.addData({pixels:x.pixelData,statistics:{minValue:x.minValue,maxValue:x.maxValue}});10<c-p&&(x=String.fromCharCode.apply(null,new Uint8Array(t,p,10)),p+=-1<x.indexOf("Lerc")?x.indexOf("Lerc"):0)}p=d=t=0;if(1<b){p=g.width*g.height;a=new Uint8Array(p);a.set(f[0]);for(t=1;t<f.length;t++)for(e=f[t],d=0;d<p;d++)a[d]&=e[d];for(d=e=0;d<p;d++)e+=a[d];g.mask=a}g.validPixelCount=e;return g}function n(t){t=E.decode(t);t=new R({width:t.width,height:t.height,pixels:t.pixels,pixelType:t.pixelType.toLowerCase(),
mask:t.mask,statistics:null});t.updateStatistics();return t}function l(t){t=M.decode(t);t=new R({width:t.width,height:t.height,pixels:t.pixels,pixelType:"U8",mask:t.mask,statistics:null});t.updateStatistics();return t}function v(t,b){t=new Uint8Array(t);t=new A(t);const {width:d,height:p}=b;b=d*p;t=t.decode();let e=0;var a=0;let g;a=new Uint8Array(b);for(e=0;e<b;e++)a[e]=t[4*e+3];const c=new R({width:d,height:p,pixels:[],pixelType:"U8",mask:a,statistics:[]});for(e=0;3>e;e++){g=new Uint8Array(b);for(a=
0;a<b;a++)g[a]=t[4*a+e];c.addData({pixels:g})}c.updateStatistics();return c}async function u(t,b,d,p){t=await (new K).decode(t,{applyJpegMask:!1,format:b,...d},p);t=new R(t);t.updateStatistics();return t}function w(t){if(null==t)throw new T("rasterCodec:decode","parameter encodeddata is required.");t=new Uint8Array(t,0,10);let b="";255===t[0]&&216===t[1]?b="jpg":137===t[0]&&80===t[1]&&78===t[2]&&71===t[3]?b="png":67===t[0]&&110===t[1]&&116===t[2]&&90===t[3]&&73===t[4]&&109===t[5]&&97===t[6]&&103===
t[7]&&101===t[8]&&32===t[9]?b="lerc":76===t[0]&&101===t[1]&&114===t[2]&&99===t[3]&&50===t[4]&&32===t[5]?b="lerc2":73===t[0]&&73===t[1]&&42===t[2]&&0===t[3]||77===t[0]&&77===t[1]&&0===t[2]&&42===t[3]||73===t[0]&&73===t[1]&&43===t[2]&&0===t[3]||77===t[0]&&77===t[1]&&0===t[2]&&43===t[3]?b="tiff":71===t[0]&&73===t[1]&&70===t[2]?b="gif":66===t[0]&&77===t[1]?b="bmp":-1<String.fromCharCode.apply(null,t).toLowerCase().indexOf("error")&&(b="error");return b}function C(t){let b=null;switch(t){case "lerc":b=
F;break;case "lerc2":b=h;break;case "jpg":b=l;break;case "png":b=v;break;case "bsq":case "bip":b=(d,p)=>{{const {pixelTypeCtor:e}=y(p.pixelType),a=H.decode;d=a(d,{width:p.width,height:p.height,pixelType:e,format:t});p=new R({width:p.width,height:p.height,pixels:d.pixels,pixelType:p.pixelType,mask:d.mask,statistics:null});p.updateStatistics()}return p};break;case "tiff":b=n;break;case "error":b=()=>{throw new T("rasterCodec:decode","input data contains error");};break;default:b=()=>{throw new T("rasterCodec:decode",
"unsupported raster format");}}return b}function y(t){let b=null,d=null;switch(t?t.toLowerCase():"f32"){case "u1":case "u2":case "u4":case "u8":d=255;b=Uint8Array;break;case "u16":d=d||65535;b=Uint16Array;break;case "u32":d=d||2**32-1;b=Uint32Array;break;case "s8":d=d||-128;b=Int8Array;break;case "s16":d=d||-32768;b=Int16Array;break;case "s32":d=d||-(2**31);b=Int32Array;break;default:b=Float32Array}return{pixelTypeCtor:b,noDataValue:d}}function k(t,b=1){if(t){var {pixels:d,width:p,height:e,mask:a}=
t;if(d&&0!==d.length){var g=d.length,c=p-1,f=e-1,q=[],z,B,x=R.getPixelArrayConstructor(t.pixelType);if(0===b){for(b=0;b<g;b++){var J=d[b];var I=new x(c*f);for(z=0;z<f;z++){var G=z*p;for(B=0;B<c;B++)I[z*c+B]=J[G+B]}q.push(I)}if(a){var L=new Uint8Array(c*f);for(z=0;z<f;z++)for(G=z*p,B=0;B<c;B++)L[z*c+B]=a[G+B]}}else{for(b=0;b<g;b++){J=d[b];I=new x(c*f);for(z=0;z<f;z++)for(G=z*p,B=0;B<c;B++)I[z*c+B]=(J[G+B]+J[G+B+1]+J[G+p+B]+J[G+p+B+1])/4;q.push(I)}if(a)for(L=new Uint8Array(c*f),z=0;z<f;z++)for(G=z*
p,B=0;B<c;B++)L[z*c+B]=Math.min.apply(null,[a[G+B],a[G+B+1],a[G+p+B],a[G+p+B+1]])}t.width=c;t.height=f;t.mask=L;t.pixels=q}}}var m=U.createCommonjsModule(function(t){(function(b){b=b();void 0!==b&&(t.exports=b)})(function(){var b={unstuff:function(e,a,g,c,f,q,z,B){var x=(1<<g)-1,J=0,I,G=0;e[e.length-1]<<=8*(4*e.length-Math.ceil(g*c/8));if(f)for(I=0;I<c;I++){if(0===G){var L=e[J++];G=32}if(G>=g){var N=L>>>G-g&x;G-=g}else G=g-G,N=(L&x)<<G&x,L=e[J++],G=32-G,N+=L>>>G;a[I]=f[N]}else for(f=Math.ceil((B-
q)/z),I=0;I<c;I++)0===G&&(L=e[J++],G=32),G>=g?(N=L>>>G-g&x,G-=g):(G=g-G,N=(L&x)<<G&x,L=e[J++],G=32-G,N+=L>>>G),a[I]=N<f?q+N*z:B},unstuffLUT:function(e,a,g,c,f,q){var z=(1<<a)-1,B=0,x=0,J=0,I=J=0,G=[];e[e.length-1]<<=8*(4*e.length-Math.ceil(a*g/8));var L=Math.ceil((q-c)/f);for(x=0;x<g;x++){if(0===J){var N=e[B++];J=32}J>=a?(I=N>>>J-a&z,J-=a):(J=a-J,I=(N&z)<<J&z,N=e[B++],J=32-J,I+=N>>>J);G[x]=I<L?c+I*f:q}G.unshift(c);return G},unstuff2:function(e,a,g,c,f,q,z,B){var x=(1<<g)-1,J=0,I,G=0,L=0;if(f)for(I=
0;I<c;I++){if(0===G){var N=e[J++];G=32;L=0}if(G>=g){var W=N>>>L&x;G-=g;L+=g}else{var Q=g-G;W=N>>>L&x;N=e[J++];G=32-Q;W|=(N&(1<<Q)-1)<<g-Q;L=Q}a[I]=f[W]}else for(f=Math.ceil((B-q)/z),I=0;I<c;I++)0===G&&(N=e[J++],G=32,L=0),G>=g?(W=N>>>L&x,G-=g,L+=g):(Q=g-G,W=N>>>L&x,N=e[J++],G=32-Q,W|=(N&(1<<Q)-1)<<g-Q,L=Q),a[I]=W<f?q+W*z:B;return a},unstuffLUT2:function(e,a,g,c,f,q){var z=(1<<a)-1,B=0,x=0,J=0,I=0,G=0,L=0,N=[],W=Math.ceil((q-c)/f);for(x=0;x<g;x++){if(0===I){var Q=e[B++];I=32;L=0}I>=a?(G=Q>>>L&z,I-=
a,L+=a):(J=a-I,G=Q>>>L&z,Q=e[B++],I=32-J,G|=(Q&(1<<J)-1)<<a-J,L=J);N[x]=G<W?c+G*f:q}N.unshift(c);return N},originalUnstuff:function(e,a,g,c){var f=(1<<g)-1,q=0,z,B=0;e[e.length-1]<<=8*(4*e.length-Math.ceil(g*c/8));for(z=0;z<c;z++){if(0===B){var x=e[q++];B=32}if(B>=g){var J=x>>>B-g&f;B-=g}else B=g-B,J=(x&f)<<B&f,x=e[q++],B=32-B,J+=x>>>B;a[z]=J}return a},originalUnstuff2:function(e,a,g,c){var f=(1<<g)-1,q=0,z,B=0,x=0;for(z=0;z<c;z++){if(0===B){var J=e[q++];B=32;x=0}if(B>=g){var I=J>>>x&f;B-=g;x+=g}else{var G=
g-B;I=J>>>x&f;J=e[q++];B=32-G;I|=(J&(1<<G)-1)<<g-G;x=G}a[z]=I}return a}},d={HUFFMAN_LUT_BITS_MAX:12,computeChecksumFletcher32:function(e){for(var a=65535,g=65535,c=e.length,f=Math.floor(c/2),q=0;f;){var z=359<=f?359:f;f-=z;do a+=e[q++]<<8,g+=a+=e[q++];while(--z);a=(a&65535)+(a>>>16);g=(g&65535)+(g>>>16)}c&1&&(g+=a+=e[q]<<8);return((g&65535)+(g>>>16)<<16|(a&65535)+(a>>>16))>>>0},readHeaderInfo:function(e,a){var g=a.ptr,c=new Uint8Array(e,g,6),f={};f.fileIdentifierString=String.fromCharCode.apply(null,
c);if(0!==f.fileIdentifierString.lastIndexOf("Lerc2",0))throw"Unexpected file identifier string (expect Lerc2 ): "+f.fileIdentifierString;g+=6;c=new DataView(e,g,8);var q=c.getInt32(0,!0);f.fileVersion=q;g+=4;3<=q&&(f.checksum=c.getUint32(4,!0),g+=4);c=new DataView(e,g,12);f.height=c.getUint32(0,!0);f.width=c.getUint32(4,!0);g+=8;4<=q?(f.numDims=c.getUint32(8,!0),g+=4):f.numDims=1;c=new DataView(e,g,40);f.numValidPixel=c.getUint32(0,!0);f.microBlockSize=c.getInt32(4,!0);f.blobSize=c.getInt32(8,!0);
f.imageType=c.getInt32(12,!0);f.maxZError=c.getFloat64(16,!0);f.zMin=c.getFloat64(24,!0);f.zMax=c.getFloat64(32,!0);g+=40;a.headerInfo=f;a.ptr=g;if(3<=q&&(e=this.computeChecksumFletcher32(new Uint8Array(e,g-(4<=q?52:48),f.blobSize-14)),e!==f.checksum))throw"Checksum failed.";return!0},checkMinMaxRanges:function(e,a){var g=a.headerInfo,c=this.getDataTypeArray(g.imageType),f=g.numDims*this.getDataTypeSize(g.imageType),q=this.readSubArray(e,a.ptr,c,f);e=this.readSubArray(e,a.ptr+f,c,f);a.ptr+=2*f;f=
!0;for(a=0;a<g.numDims;a++)if(q[a]!==e[a]){f=!1;break}g.minValues=q;g.maxValues=e;return f},readSubArray:function(e,a,g,c){if(g===Uint8Array)e=new Uint8Array(e,a,c);else{var f=new ArrayBuffer(c);(new Uint8Array(f)).set(new Uint8Array(e,a,c));e=new g(f)}return e},readMask:function(e,a){var g=a.ptr,c=a.headerInfo,f=c.width*c.height,q=c.numValidPixel,z=new DataView(e,g,4);c={};c.numBytes=z.getUint32(0,!0);g+=4;if((0===q||f===q)&&0!==c.numBytes)throw"invalid mask";if(0===q)q=new Uint8Array(Math.ceil(f/
8)),c.bitset=q,z=new Uint8Array(f),a.pixels.resultMask=z,g+=c.numBytes;else if(0<c.numBytes){q=new Uint8Array(Math.ceil(f/8));z=new DataView(e,g,c.numBytes);e=z.getInt16(0,!0);var B=2,x=0,J=0;do{if(0<e)for(;e--;)q[x++]=z.getUint8(B++);else for(J=z.getUint8(B++),e=-e;e--;)q[x++]=J;e=z.getInt16(B,!0);B+=2}while(B<c.numBytes);if(-32768!==e||x<q.length)throw"Unexpected end of mask RLE encoding";z=new Uint8Array(f);for(B=B=e=0;B<f;B++)B&7?(e=q[B>>3],e<<=B&7):e=q[B>>3],e&128&&(z[B]=1);a.pixels.resultMask=
z;c.bitset=q;g+=c.numBytes}a.ptr=g;a.mask=c;return!0},readDataOneSweep:function(e,a,g){var c=a.ptr,f=a.headerInfo,q=f.numDims,z=f.width*f.height;f=f.numValidPixel*d.getDataTypeSize(f.imageType)*q;var B=a.pixels.resultMask;if(g===Uint8Array)e=new Uint8Array(e,c,f);else{var x=new ArrayBuffer(f);(new Uint8Array(x)).set(new Uint8Array(e,c,f));e=new g(x)}if(e.length===z*q)a.pixels.resultPixels=e;else{a.pixels.resultPixels=new g(z*q);var J=x=g=0,I=0;if(1<q)for(J=0;J<q;J++)for(I=J*z,x=0;x<z;x++)B[x]&&(a.pixels.resultPixels[I+
x]=e[g++]);else for(x=0;x<z;x++)B[x]&&(a.pixels.resultPixels[x]=e[g++])}a.ptr=c+f;return!0},readHuffmanTree:function(e,a){var g=this.HUFFMAN_LUT_BITS_MAX,c=new DataView(e,a.ptr,16);a.ptr+=16;if(2>c.getInt32(0,!0))throw"unsupported Huffman version";var f=c.getInt32(4,!0),q=c.getInt32(8,!0);c=c.getInt32(12,!0);if(q>=c)return!1;var z=new Uint32Array(c-q);d.decodeBits(e,a,z);var B=[],x;for(x=q;x<c;x++){var J=x-(x<f?0:f);B[J]={first:z[x-q],second:null}}x=e.byteLength-a.ptr;z=new ArrayBuffer(4*Math.ceil(x/
4));(new Uint8Array(z)).set(new Uint8Array(e,a.ptr,x));e=new Uint32Array(z);a=0;z=0;var I=e[0];for(x=q;x<c;x++){J=x-(x<f?0:f);var G=B[J].first;0<G&&(B[J].second=I<<a>>>32-G,32-a>=G?(a+=G,32===a&&(a=0,z++,I=e[z])):(a+=G-32,z++,I=e[z],B[J].second|=I>>>32-a))}var L=I=0,N=new p;for(x=0;x<B.length;x++)void 0!==B[x]&&(I=Math.max(I,B[x].first));L=I>=g?g:I;g=[];var W;for(x=q;x<c;x++)if(J=x-(x<f?0:f),G=B[J].first,0<G)if(q=[G,J],G<=L){J=B[J].second<<L-G;var Q=1<<L-G;for(G=0;G<Q;G++)g[J|G]=q}else for(J=B[J].second,
Q=N,--G;0<=G;G--)(W=J>>>G&1)?(Q.right||(Q.right=new p),Q=Q.right):(Q.left||(Q.left=new p),Q=Q.left),0!==G||Q.val||(Q.val=q[1]);return{decodeLut:g,numBitsLUTQick:L,numBitsLUT:I,tree:N,stuffedData:e,srcPtr:z,bitPos:a}},readHuffman:function(e,a,g){var c=a.headerInfo,f=c.numDims,q=a.headerInfo.height,z=a.headerInfo.width,B=z*q,x=this.readHuffmanTree(e,a);e=x.decodeLut;var J=x.tree,I=x.stuffedData,G=x.srcPtr,L=x.bitPos,N=x.numBitsLUTQick;x=x.numBitsLUT;var W=0===a.headerInfo.imageType?128:0,Q=a.pixels.resultMask,
V,P,aa,ba,Z,X,da=0;0<L&&(G++,L=0);var ca=I[G],ha=1===a.encodeMode,ia=new g(B*f),ja=ia,ka;for(ka=0;ka<c.numDims;ka++){1<f&&(ja=new g(ia.buffer,B*ka,B),da=0);if(a.headerInfo.numValidPixel===z*q)for(aa=Z=0;aa<q;aa++)for(ba=0;ba<z;ba++,Z++){var fa=0;var ea=V=ca<<L>>>32-N;32-L<N&&(ea=V|=I[G+1]>>>64-L-N);if(e[ea])fa=e[ea][1],L+=e[ea][0];else for(ea=V=ca<<L>>>32-x,32-L<x&&(ea=V|=I[G+1]>>>64-L-x),ea=J,X=0;X<x;X++)if(ea=(P=V>>>x-X-1&1)?ea.right:ea.left,!ea.left&&!ea.right){fa=ea.val;L=L+X+1;break}32<=L&&(L-=
32,G++,ca=I[G]);fa-=W;ha?(fa=0<ba?fa+da:0<aa?fa+ja[Z-z]:fa+da,fa&=255,da=ja[Z]=fa):ja[Z]=fa}else for(aa=Z=0;aa<q;aa++)for(ba=0;ba<z;ba++,Z++)if(Q[Z]){fa=0;ea=V=ca<<L>>>32-N;32-L<N&&(ea=V|=I[G+1]>>>64-L-N);if(e[ea])fa=e[ea][1],L+=e[ea][0];else for(ea=V=ca<<L>>>32-x,32-L<x&&(ea=V|=I[G+1]>>>64-L-x),ea=J,X=0;X<x;X++)if(ea=(P=V>>>x-X-1&1)?ea.right:ea.left,!ea.left&&!ea.right){fa=ea.val;L=L+X+1;break}32<=L&&(L-=32,G++,ca=I[G]);fa-=W;ha?(fa=0<ba&&Q[Z-1]?fa+da:0<aa&&Q[Z-z]?fa+ja[Z-z]:fa+da,fa&=255,da=ja[Z]=
fa):ja[Z]=fa}a.ptr=a.ptr+4*(G+1)+(0<L?4:0)}a.pixels.resultPixels=ia},decodeBits:function(e,a,g,c,f){var q=a.headerInfo,z=q.fileVersion,B=0,x=new DataView(e,a.ptr,5<=e.byteLength-a.ptr?5:e.byteLength-a.ptr),J=x.getUint8(0);B++;var I=J>>6,G=0===I?4:3-I,L=0<(J&32)?!0:!1;I=J&31;J=0;if(1===G)J=x.getUint8(B),B++;else if(2===G)J=x.getUint16(B,!0),B+=2;else if(4===G)J=x.getUint32(B,!0),B+=4;else throw"Invalid valid pixel count type";G=2*q.maxZError;f=1<q.numDims?q.maxValues[f]:q.zMax;if(L){a.counter.lut++;
L=x.getUint8(B);B++;q=Math.ceil((L-1)*I/8);var N=Math.ceil(q/4);N=new ArrayBuffer(4*N);var W=new Uint8Array(N);a.ptr+=B;W.set(new Uint8Array(e,a.ptr,q));B=new Uint32Array(N);a.ptr+=q;for(x=0;L-1>>>x;)x++;q=Math.ceil(J*x/8);N=Math.ceil(q/4);N=new ArrayBuffer(4*N);W=new Uint8Array(N);W.set(new Uint8Array(e,a.ptr,q));e=new Uint32Array(N);a.ptr+=q;a=3<=z?b.unstuffLUT2(B,I,L-1,c,G,f):b.unstuffLUT(B,I,L-1,c,G,f);3<=z?b.unstuff2(e,g,x,J,a):b.unstuff(e,g,x,J,a)}else a.counter.bitstuffer++,x=I,a.ptr+=B,0<
x&&(q=Math.ceil(J*x/8),N=Math.ceil(q/4),N=new ArrayBuffer(4*N),W=new Uint8Array(N),W.set(new Uint8Array(e,a.ptr,q)),e=new Uint32Array(N),a.ptr+=q,3<=z?null==c?b.originalUnstuff2(e,g,x,J):b.unstuff2(e,g,x,J,!1,c,G,f):null==c?b.originalUnstuff(e,g,x,J):b.unstuff(e,g,x,J,!1,c,G,f))},readTiles:function(e,a,g){var c=a.headerInfo,f=c.width,q=c.height,z=c.microBlockSize,B=c.imageType,x=d.getDataTypeSize(B),J=Math.ceil(f/z),I=Math.ceil(q/z);a.pixels.numBlocksY=I;a.pixels.numBlocksX=J;var G=a.pixels.ptr=0,
L=0,N=0,W=0,Q=0,V=0,P=0,aa=0,ba=0,Z=0,X=0,da=0,ca=0;P=ca=P=0;var ha=new g(z*z),ia=q%z||z,ja=f%z||z,ka=c.numDims,fa,ea=a.pixels.resultMask,la=a.pixels.resultPixels,oa=5<=c.fileVersion?14:15,na=c.zMax;for(N=0;N<I;N++)for(Q=N!==I-1?z:ia,W=0;W<J;W++)for(V=W!==J-1?z:ja,X=N*f*z+W*z,da=f-V,fa=0;fa<ka;fa++){1<ka?(ca=la,X=N*f*z+W*z,la=new g(a.pixels.resultPixels.buffer,f*q*fa*x,f*q),na=c.maxValues[fa]):ca=null;P=e.byteLength-a.ptr;G=new DataView(e,a.ptr,Math.min(10,P));L={};P=0;aa=G.getUint8(0);P++;var ma=
5<=c.fileVersion?aa&4:0;ba=aa>>6&255;Z=aa>>2&oa;if(Z!==(W*z>>3&oa))throw"integrity issue";if(ma&&0===fa)throw"integrity issue";aa&=3;if(3<aa)throw a.ptr+=P,"Invalid block encoding ("+aa+")";if(2===aa){if(ma)if(ea)for(G=0;G<Q;G++)for(L=0;L<V;L++)ea[X]&&(la[X]=ca[X]),X++;else for(G=0;G<Q;G++)for(L=0;L<V;L++)la[X]=ca[X],X++;a.counter.constant++;a.ptr+=P}else if(0===aa){if(ma)throw"integrity issue";a.counter.uncompressed++;a.ptr+=P;ca=Q*V*x;P=e.byteLength-a.ptr;ca=ca<P?ca:P;P=new ArrayBuffer(0===ca%x?
ca:ca+x-ca%x);ma=new Uint8Array(P);ma.set(new Uint8Array(e,a.ptr,ca));P=new g(P);ca=0;if(ea)for(G=0;G<Q;G++){for(L=0;L<V;L++)ea[X]&&(la[X]=P[ca++]),X++;X+=da}else for(G=0;G<Q;G++){for(L=0;L<V;L++)la[X++]=P[ca++];X+=da}a.ptr+=ca*x}else if(ba=d.getDataTypeUsed(ma&&6>B?4:B,ba),Z=d.getOnePixel(L,P,ba,G),P+=d.getDataTypeSize(ba),3===aa)if(a.ptr+=P,a.counter.constantoffset++,ea)for(G=0;G<Q;G++){for(L=0;L<V;L++)ea[X]&&(la[X]=ma?Math.min(na,ca[X]+Z):Z),X++;X+=da}else for(G=0;G<Q;G++){for(L=0;L<V;L++)la[X]=
ma?Math.min(na,ca[X]+Z):Z,X++;X+=da}else if(a.ptr+=P,d.decodeBits(e,a,ha,Z,fa),P=0,ma)if(ea)for(G=0;G<Q;G++){for(L=0;L<V;L++)ea[X]&&(la[X]=ha[P++]+ca[X]),X++;X+=da}else for(G=0;G<Q;G++){for(L=0;L<V;L++)la[X]=ha[P++]+ca[X],X++;X+=da}else if(ea)for(G=0;G<Q;G++){for(L=0;L<V;L++)ea[X]&&(la[X]=ha[P++]),X++;X+=da}else for(G=0;G<Q;G++){for(L=0;L<V;L++)la[X++]=ha[P++];X+=da}}},formatFileInfo:function(e){return{fileIdentifierString:e.headerInfo.fileIdentifierString,fileVersion:e.headerInfo.fileVersion,imageType:e.headerInfo.imageType,
height:e.headerInfo.height,width:e.headerInfo.width,numValidPixel:e.headerInfo.numValidPixel,microBlockSize:e.headerInfo.microBlockSize,blobSize:e.headerInfo.blobSize,maxZError:e.headerInfo.maxZError,pixelType:d.getPixelType(e.headerInfo.imageType),eofOffset:e.eofOffset,mask:e.mask?{numBytes:e.mask.numBytes}:null,pixels:{numBlocksX:e.pixels.numBlocksX,numBlocksY:e.pixels.numBlocksY,maxValue:e.headerInfo.zMax,minValue:e.headerInfo.zMin,noDataValue:e.noDataValue}}},constructConstantSurface:function(e){var a=
e.headerInfo.zMax,g=e.headerInfo.numDims,c=e.headerInfo.height*e.headerInfo.width,f=0,q=0,z=0,B=e.pixels.resultMask,x=e.pixels.resultPixels;if(B)if(1<g)for(f=0;f<g;f++)for(z=f*c,a=e.headerInfo.maxValues[f],q=0;q<c;q++)B[q]&&(x[z+q]=a);else for(q=0;q<c;q++)B[q]&&(x[q]=a);else if(1<g)for(f=0;f<g;f++)for(z=f*c,a=e.headerInfo.maxValues[f],q=0;q<c;q++)x[z+q]=a;else for(q=0;q<c;q++)x[q]=a},getDataTypeArray:function(e){switch(e){case 0:e=Int8Array;break;case 1:e=Uint8Array;break;case 2:e=Int16Array;break;
case 3:e=Uint16Array;break;case 4:e=Int32Array;break;case 5:e=Uint32Array;break;case 6:e=Float32Array;break;case 7:e=Float64Array;break;default:e=Float32Array}return e},getPixelType:function(e){switch(e){case 0:e="S8";break;case 1:e="U8";break;case 2:e="S16";break;case 3:e="U16";break;case 4:e="S32";break;case 5:e="U32";break;case 6:e="F32";break;case 7:e="F64";break;default:e="F32"}return e},isValidPixelValue:function(e,a){if(null==a)return!1;switch(e){case 0:e=-128<=a&&127>=a;break;case 1:e=0<=
a&&255>=a;break;case 2:e=-32768<=a&&32767>=a;break;case 3:e=0<=a&&65536>=a;break;case 4:e=-2147483648<=a&&2147483647>=a;break;case 5:e=0<=a&&4294967296>=a;break;case 6:e=-3.4027999387901484E38<=a&&3.4027999387901484E38>=a;break;case 7:e=4.9E-324<=a&&1.7976931348623157E308>=a;break;default:e=!1}return e},getDataTypeSize:function(e){var a=0;switch(e){case 0:case 1:a=1;break;case 2:case 3:a=2;break;case 4:case 5:case 6:a=4;break;case 7:a=8;break;default:a=e}return a},getDataTypeUsed:function(e,a){var g=
e;switch(e){case 2:case 4:g=e-a;break;case 3:case 5:g=e-2*a;break;case 6:g=0===a?e:1===a?2:1;break;case 7:g=0===a?e:e-2*a+1;break;default:g=e}return g},getOnePixel:function(e,a,g,c){e=0;switch(g){case 0:e=c.getInt8(a);break;case 1:e=c.getUint8(a);break;case 2:e=c.getInt16(a,!0);break;case 3:e=c.getUint16(a,!0);break;case 4:e=c.getInt32(a,!0);break;case 5:e=c.getUInt32(a,!0);break;case 6:e=c.getFloat32(a,!0);break;case 7:e=c.getFloat64(a,!0);break;default:throw"the decoder does not understand this pixel type";
}return e}},p=function(e,a,g){this.val=e;this.left=a;this.right=g};return{decode:function(e,a){a=a||{};var g=a.noDataValue,c=0,f={};f.ptr=a.inputOffset||0;f.pixels={};if(d.readHeaderInfo(e,f)){c=f.headerInfo;var q=c.fileVersion,z=d.getDataTypeArray(c.imageType);if(5<q)throw"unsupported lerc version 2."+q;d.readMask(e,f);c.numValidPixel===c.width*c.height||f.pixels.resultMask||(f.pixels.resultMask=a.maskData);var B=c.width*c.height;f.pixels.resultPixels=new z(B*c.numDims);f.counter={onesweep:0,uncompressed:0,
lut:0,bitstuffer:0,constant:0,constantoffset:0};if(0!==c.numValidPixel)if(c.zMax===c.zMin)d.constructConstantSurface(f);else if(4<=q&&d.checkMinMaxRanges(e,f))d.constructConstantSurface(f);else{var x=new DataView(e,f.ptr,2),J=x.getUint8(0);f.ptr++;if(J)d.readDataOneSweep(e,f,z);else if(1<q&&1>=c.imageType&&1E-5>Math.abs(c.maxZError-.5)){x=x.getUint8(1);f.ptr++;f.encodeMode=x;if(2<x||4>q&&1<x)throw"Invalid Huffman flag "+x;x?d.readHuffman(e,f,z):d.readTiles(e,f,z)}else d.readTiles(e,f,z)}f.eofOffset=
f.ptr;a.inputOffset?(e=f.headerInfo.blobSize+a.inputOffset-f.ptr,1<=Math.abs(e)&&(f.eofOffset=a.inputOffset+f.headerInfo.blobSize)):(e=f.headerInfo.blobSize-f.ptr,1<=Math.abs(e)&&(f.eofOffset=f.headerInfo.blobSize));e={width:c.width,height:c.height,pixelData:f.pixels.resultPixels,minValue:c.zMin,maxValue:c.zMax,validPixelCount:c.numValidPixel,dimCount:c.numDims,dimStats:{minValues:c.minValues,maxValues:c.maxValues},maskData:f.pixels.resultMask};if(f.pixels.resultMask&&d.isValidPixelValue(c.imageType,
g)){q=f.pixels.resultMask;for(c=0;c<B;c++)q[c]||(e.pixelData[c]=g);e.noDataValue=g}f.noDataValue=g;a.returnFileInfo&&(e.fileInfo=d.formatFileInfo(f));return e}},getBandCount:function(e){for(var a=0,g=0,c={ptr:0,pixels:{}};g<e.byteLength-58;)d.readHeaderInfo(e,c),g+=c.headerInfo.blobSize,a++,c.ptr=g;return a}}})}),A=function(t){function b(a){var g,c;this.data=a;this.pos=8;this.palette=[];this.imgData=[];this.transparency={};this.animation=null;this.text={};for(c=null;;){var f=this.readUInt32();var q=
a=void 0;a=[];for(q=0;4>q;++q)a.push(String.fromCharCode(this.data[this.pos++]));a=a.join("");switch(a){case "IHDR":this.width=this.readUInt32();this.height=this.readUInt32();this.bits=this.data[this.pos++];this.colorType=this.data[this.pos++];this.compressionMethod=this.data[this.pos++];this.filterMethod=this.data[this.pos++];this.interlaceMethod=this.data[this.pos++];break;case "acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||Infinity,frames:[]};break;case "PLTE":this.palette=
this.read(f);break;case "fcTL":c&&this.animation.frames.push(c);this.pos+=4;c={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()};a=this.readUInt16();f=this.readUInt16()||100;c.delay=1E3*a/f;c.disposeOp=this.data[this.pos++];c.blendOp=this.data[this.pos++];c.data=[];break;case "IDAT":case "fdAT":"fdAT"===a&&(this.pos+=4,f-=4);a=(null!=c?c.data:void 0)||this.imgData;for(q=0;0<=f?q<f:q>f;0<=f?++q:--q)a.push(this.data[this.pos++]);break;case "tRNS":this.transparency=
{};switch(this.colorType){case 3:this.transparency.indexed=this.read(f);f=255-this.transparency.indexed.length;if(0<f)for(a=0;0<=f?a<f:a>f;0<=f?++a:--a)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(f)[0];break;case 2:this.transparency.rgb=this.read(f)}break;case "tEXt":q=this.read(f);f=q.indexOf(0);a=String.fromCharCode.apply(String,q.slice(0,f));this.text[a]=String.fromCharCode.apply(String,q.slice(f+1));break;case "IEND":c&&this.animation.frames.push(c);
a:{switch(this.colorType){case 0:case 3:case 4:c=1;break a;case 2:case 6:c=3;break a}c=void 0}this.colors=c;this.hasAlphaChannel=4===(g=this.colorType)||6===g;g=this.colors+(this.hasAlphaChannel?1:0);this.pixelBitlength=this.bits*g;a:{switch(this.colors){case 1:g="DeviceGray";break a;case 3:g="DeviceRGB";break a}g=void 0}this.colorSpace=g;this.imgData=new Uint8Array(this.imgData);return;default:this.pos+=f}this.pos+=4;if(this.pos>this.data.length)throw Error("Incomplete or corrupt PNG file");}}var d;
b.load=function(a,g,c){"function"===typeof g&&(c=g);var f=new XMLHttpRequest;f.open("GET",a,!0);f.responseType="arraybuffer";f.onload=function(){var q=new Uint8Array(f.response||f.mozResponseArrayBuffer);q=new b(q);"function"===typeof(null!=g?g.getContext:void 0)&&q.render(g);return"function"===typeof c?c(q):void 0};return f.send(null)};b.prototype.read=function(a){var g;var c=[];for(g=0;0<=a?g<a:g>a;0<=a?++g:--g)c.push(this.data[this.pos++]);return c};b.prototype.readUInt32=function(){var a=this.data[this.pos++]<<
24;var g=this.data[this.pos++]<<16;var c=this.data[this.pos++]<<8;var f=this.data[this.pos++];return a|g|c|f};b.prototype.readUInt16=function(){var a=this.data[this.pos++]<<8;var g=this.data[this.pos++];return a|g};b.prototype.decodePixels=function(a){var g,c,f,q,z,B,x,J;null==a&&(a=this.imgData);if(0===a.length)return new Uint8Array(0);a=new r.Zlib(a);a=a.getBytes();var I=this.pixelBitlength/8;var G=I*this.width;var L=new Uint8Array(G*this.height);var N=a.length;for(c=q=z=0;q<N;){switch(a[q++]){case 0:for(f=
g=0;g<G;f=g+=1)L[c++]=a[q++];break;case 1:for(f=B=0;B<G;f=B+=1){g=a[q++];var W=f<I?0:L[c-I];L[c++]=(g+W)%256}break;case 2:for(f=W=0;W<G;f=W+=1){g=a[q++];var Q=(f-f%I)/I;B=z&&L[(z-1)*G+Q*I+f%I];L[c++]=(B+g)%256}break;case 3:for(f=J=0;J<G;f=J+=1)g=a[q++],Q=(f-f%I)/I,W=f<I?0:L[c-I],B=z&&L[(z-1)*G+Q*I+f%I],L[c++]=(g+Math.floor((W+B)/2))%256;break;case 4:for(f=J=0;J<G;f=J+=1){g=a[q++];Q=(f-f%I)/I;W=f<I?0:L[c-I];0===z?B=x=0:(B=L[(z-1)*G+Q*I+f%I],x=Q&&L[(z-1)*G+(Q-1)*I+f%I]);var V=W+B-x;f=Math.abs(V-W);
Q=Math.abs(V-B);V=Math.abs(V-x);W=f<=Q&&f<=V?W:Q<=V?B:x;L[c++]=(g+W)%256}break;default:throw Error("Invalid filter algorithm: "+a[q-1]);}z++}return L};b.prototype.decodePalette=function(){var a,g,c,f,q;var z=this.palette;var B=this.transparency.indexed||[];var x=new Uint8Array((B.length||0)+z.length);var J=c=a=g=0;for(f=z.length;c<f;J=c+=3)x[g++]=z[J],x[g++]=z[J+1],x[g++]=z[J+2],x[g++]=null!=(q=B[a++])?q:255;return x};b.prototype.copyToImageData=function(a,g){var c,f;var q=this.colors;var z=null;
var B=this.hasAlphaChannel;this.palette.length&&(z=null!=(c=this._decodedPalette)?c:this._decodedPalette=this.decodePalette(),q=4,B=!0);a=a.data||a;var x=a.length;var J=z||g;c=f=0;if(1===q)for(;c<x;)q=z?4*g[c/4]:f,f=J[q++],a[c++]=f,a[c++]=f,a[c++]=f,a[c++]=B?J[q++]:this.transparency.grayscale&&this.transparency.grayscale===f?0:255,f=q;else for(;c<x;)q=z?4*g[c/4]:f,a[c++]=J[q++],a[c++]=J[q++],a[c++]=J[q++],a[c++]=B?J[q++]:this.transparency.rgb&&this.transparency.rgb[1]===J[q-3]&&this.transparency.rgb[3]===
J[q-2]&&this.transparency.rgb[5]===J[q-1]?0:255,f=q};b.prototype.decode=function(){var a=new Uint8Array(this.width*this.height*4);this.copyToImageData(a,this.decodePixels());return a};var p=(d=t.document&&t.document.createElement("canvas"))&&d.getContext("2d");var e=function(a){p.width=a.width;p.height=a.height;p.clearRect(0,0,a.width,a.height);p.putImageData(a,0,0);a=new Image;a.src=d.toDataURL();return a};b.prototype.decodeFrames=function(a){var g,c;if(this.animation){var f=this.animation.frames;
var q=[];var z=g=0;for(c=f.length;g<c;z=++g){z=f[z];var B=a.createImageData(z.width,z.height);var x=this.decodePixels(new Uint8Array(z.data));this.copyToImageData(B,x);z.imageData=B;q.push(z.image=e(B))}return q}};b.prototype.renderFrame=function(a,g){var c=this.animation.frames;var f=c[g];c=c[g-1];0===g&&a.clearRect(0,0,this.width,this.height);1===(null!=c?c.disposeOp:void 0)?a.clearRect(c.xOffset,c.yOffset,c.width,c.height):2===(null!=c?c.disposeOp:void 0)&&a.putImageData(c.imageData,c.xOffset,
c.yOffset);0===f.blendOp&&a.clearRect(f.xOffset,f.yOffset,f.width,f.height);return a.drawImage(f.image,f.xOffset,f.yOffset)};b.prototype.animate=function(a){var g,c=this;var f=0;var q=this.animation;var z=q.numFrames;var B=q.frames;var x=q.numPlays;return(g=function(){var J=f++%z;var I=B[J];c.renderFrame(a,J);if(1<z&&f/z<x)return c.animation._timeout=setTimeout(g,I.delay)})()};b.prototype.stopAnimation=function(){var a;return clearTimeout(null!=(a=this.animation)?a._timeout:void 0)};b.prototype.render=
function(a){a._png&&a._png.stopAnimation();a._png=this;a.width=this.width;a.height=this.height;a=a.getContext("2d");if(this.animation)return this.decodeFrames(a),this.animate(a);var g=a.createImageData(this.width,this.height);this.copyToImageData(g,this.decodePixels());return a.putImageData(g,0,0)};return b}(self);const D=new Set(["jpg","png","bmp","gif"]);Y.decode=async function(t,b,d){if(null==t)throw new T("rasterCodec:decode","missing encodeddata parameter.");if(null==b||null==b.width||null==
b.height)throw new T("rasterCodec:decode","requires width and height in options parameter.");let p=b.format&&b.format.toLowerCase();if("tiff"===p&&b.customOptions)return b=E.decodeTileOrStrip(t,b.customOptions),b=new R({width:b.width,height:b.height,pixels:b.pixels,pixelType:b.pixelType.toLowerCase(),mask:b.mask,statistics:null}),b.updateStatistics(),b;if(!p||"bsq"!==p&&"bip"!==p)p=w(t);b.useCanvas&&D.has(p)?t=await u(t,p,b,d):(d=C(p),b.isPoint&&(b={...b},b.width++,b.height++),t=d(t,b),b.isPoint&&
k(t));return t};Y.getFormat=function(t){t=w(t);"lerc2"===t?t="lerc":"error"===t&&(t="");return t};Object.defineProperty(Y,"__esModule",{value:!0})})},"esri/chunks/Zlib":function(){define(["exports","./_commonjsHelpers"],function(Y,T){T=T.createCommonjsModule(function(R){(function(U){U=U();void 0!==U&&(R.exports=U)})(function(){var U=function(){function r(){this.bufferLength=this.pos=0;this.eof=!1;this.buffer=null}r.prototype={ensureBuffer:function(K){var M=this.buffer,O=M?M.byteLength:0;if(K<O)return M;
for(var H=512;H<K;)H<<=1;K=new Uint8Array(H);for(H=0;H<O;++H)K[H]=M[H];return this.buffer=K},getByte:function(){for(var K=this.pos;this.bufferLength<=K;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},getBytes:function(K){var M=this.pos;if(K){this.ensureBuffer(M+K);for(K=M+K;!this.eof&&this.bufferLength<K;)this.readBlock();var O=this.bufferLength;K>O&&(K=O)}else{for(;!this.eof;)this.readBlock();K=this.bufferLength}this.pos=K;return this.buffer.subarray(M,K)},lookChar:function(){for(var K=
this.pos;this.bufferLength<=K;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var K=this.pos;this.bufferLength<=K;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(K,M,O){for(var H=K+M;this.bufferLength<=H&&!this.eof;)this.readBlock();return new Stream(this.buffer,K,M,O)},skip:function(K){K||(K=1);this.pos+=K},reset:function(){this.pos=0}};return r}();return function(){function r(F){throw Error(F);
}function K(F){var h=0,n=F[h++],l=F[h++];-1!=n&&-1!=l||r("Invalid header in flate stream");8!=(n&15)&&r("Unknown compression method in flate stream");0!=((n<<8)+l)%31&&r("Bad FCHECK in flate stream");l&32&&r("FDICT bit set in flate stream");this.bytes=F;this.bytesPos=h;this.codeBuf=this.codeSize=0;U.call(this)}if(!self||!self.Uint32Array)return null;var M=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),O=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,
131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),H=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),S=[new Uint32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,
459020,524392,524328,59E4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,
459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,
459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,
459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,
459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,
459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,
459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],E=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,
327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];K.prototype=Object.create(U.prototype);K.prototype.getBits=function(F){for(var h=this.codeSize,n=this.codeBuf,l=this.bytes,v=this.bytesPos,u;h<F;)"undefined"==typeof(u=l[v++])&&r("Bad encoding in flate stream"),n|=u<<h,h+=8;this.codeBuf=n>>F;this.codeSize=h-=F;this.bytesPos=v;return n&(1<<F)-1};K.prototype.getCode=function(F){var h=F[0],n=F[1];F=this.codeSize;for(var l=
this.codeBuf,v=this.bytes,u=this.bytesPos;F<n;){var w;"undefined"==typeof(w=v[u++])&&r("Bad encoding in flate stream");l|=w<<F;F+=8}n=h[l&(1<<n)-1];h=n>>16;n&=65535;(0==F||F<h||0==h)&&r("Bad encoding in flate stream");this.codeBuf=l>>h;this.codeSize=F-h;this.bytesPos=u;return n};K.prototype.generateHuffmanTable=function(F){for(var h=F.length,n=0,l=0;l<h;++l)F[l]>n&&(n=F[l]);for(var v=1<<n,u=new Uint32Array(v),w=1,C=0,y=2;w<=n;++w,C<<=1,y<<=1)for(var k=0;k<h;++k)if(F[k]==w){var m=0,A=C;for(l=0;l<w;++l)m=
m<<1|A&1,A>>=1;for(l=m;l<v;l+=y)u[l]=w<<16|k;++C}return[u,n]};K.prototype.readBlock=function(){function F(m,A,D,t,b){for(m=m.getBits(D)+t;0<m--;)A[C++]=b}var h=this.getBits(3);h&1&&(this.eof=!0);h>>=1;if(0==h){var n=this.bytes,l=this.bytesPos,v;"undefined"==typeof(v=n[l++])&&r("Bad block header in flate stream");var u=v;"undefined"==typeof(v=n[l++])&&r("Bad block header in flate stream");u|=v<<8;"undefined"==typeof(v=n[l++])&&r("Bad block header in flate stream");h=v;"undefined"==typeof(v=n[l++])&&
r("Bad block header in flate stream");(h|v<<8)!=(~u&65535)&&r("Bad uncompressed block length in flate stream");this.codeSize=this.codeBuf=0;v=this.bufferLength;h=this.ensureBuffer(v+u);this.bufferLength=u=v+u;for(var w=v;w<u;++w){if("undefined"==typeof(v=n[l++])){this.eof=!0;break}h[w]=v}this.bytesPos=l}else{if(1==h)l=S,v=E;else if(2==h){h=this.getBits(5)+257;v=this.getBits(5)+1;n=this.getBits(4)+4;l=Array(M.length);for(var C=0;C<n;)l[M[C++]]=this.getBits(3);l=this.generateHuffmanTable(l);C=n=0;v=
h+v;for(u=Array(v);C<v;)w=this.getCode(l),16==w?F(this,u,2,3,n):17==w?F(this,u,3,3,n=0):18==w?F(this,u,7,11,n=0):u[C++]=n=w;l=this.generateHuffmanTable(u.slice(0,h));v=this.generateHuffmanTable(u.slice(h,v))}else r("Unknown block type in flate stream");u=(h=this.buffer)?h.length:0;for(w=this.bufferLength;;){var y=this.getCode(l);if(256>y)w+1>=u&&(h=this.ensureBuffer(w+1),u=h.length),h[w++]=y;else{if(256==y){this.bufferLength=w;break}y-=257;y=O[y];var k=y>>16;0<k&&(k=this.getBits(k));n=(y&65535)+k;
y=this.getCode(v);y=H[y];k=y>>16;0<k&&(k=this.getBits(k));y=(y&65535)+k;w+n>=u&&(h=this.ensureBuffer(w+n),u=h.length);for(k=0;k<n;++k,++w)h[w]=h[w-y]}}}};return K}()})});Y.Zlib=T})},"esri/layers/support/rasterFormats/ImageCanvasDecoder":function(){define(["../../../core/Error","../../../core/promiseUtils","../../../chunks/Zlib"],function(Y,T,R){return function(){function U(r){r&&(this.canvas=r.canvas,this.ctx=r.ctx||r.canvas&&r.canvas.getContext("2d"))}U.prototype.decode=function(r,K,M){if(!r||10>
r.byteLength)throw new Y("imagecanvasdecoder: decode","required a valid encoded data as input.");let {width:O,height:H,format:S}=K;const {applyJpegMask:E}=K;if(E&&(!O||!H))throw new Y("imagecanvasdecoder: decode","image width and height are needed to apply jpeg mask directly to canvas");return new Promise((F,h)=>{let n=null;"jpg"===S&&E&&(n=U.getMask(r,K));const l=new Blob([new Uint8Array(r)],{type:"jpg"==="image/"+S?"jpeg":S}),v=URL.createObjectURL(l),u=new Image;let w;u.src=v;u.onload=()=>{URL.revokeObjectURL(v);
if(T.isAborted(M))h(T.createAbortError());else{O=u.width;H=u.height;if(this.canvas){if(this.canvas.width!==O||this.canvas.height!==H)this.canvas.width=O,this.canvas.height=H;this.ctx.clearRect(0,0,O,H)}else this.canvas=document.createElement("canvas"),this.canvas.width=O,this.canvas.height=H,this.ctx=this.canvas.getContext("2d");this.ctx.drawImage(u,0,0);var C=this.ctx.getImageData(0,0,O,H);w=C.data;var y;if(K.renderOnCanvas){if(n)for(y=0;y<n.length;y++)w[4*y+3]=n[y]?255:0;this.ctx.putImageData(C,
0,0);F(null)}else{C=O*H;var k=new Uint8Array(C),m=new Uint8Array(C),A=new Uint8Array(C);if(n)for(y=0;y<C;y++)k[y]=w[4*y],m[y]=w[4*y+1],A[y]=w[4*y+2];else for(n=new Uint8Array(C),y=0;y<C;y++)k[y]=w[4*y],m[y]=w[4*y+1],A[y]=w[4*y+2],n[y]=w[4*y+3];F({width:O,height:H,pixels:[k,m,A],mask:n,pixelType:"u8"})}}};u.onerror=()=>{URL.revokeObjectURL(v);h("cannot load image")}})};U.getMask=function(r,K){let M=null;try{var O=new Uint8Array(r);r=0;var H=O.length-2;for(r=Math.ceil(O.length/2);r<H&&(255!==O[r]||
217!==O[r+1]);r++);r+=2;if(r<O.length-1){const S=(new R.Zlib(O.subarray(r))).getBytes();M=new Uint8Array(K.width*K.height);K=0;for(O=0;O<S.length;O++)for(H=7;0<=H;H--)M[K++]=S[O]>>H&1}}catch(S){}return M};return U}()})},"esri/layers/support/rasterFormats/JpgPlus":function(){define(["../../../chunks/Zlib","../../../chunks/Jpg"],function(Y,T){return function(){function R(){}R.decode=function(U){var r=new Uint8Array(U);U=new T.Jpg;U.parse(r);const {width:K,height:M,numComponents:O,eof:H}=U;U=U.getData(K,
M,!0);let S;const E=K*M;let F=0;var h=0,n=0;if(H<r.length-1)for(r=(new Y.Zlib(r.subarray(H))).getBytes(),S=new Uint8Array(E),F=h=0;F<r.length;F++)for(n=7;0<=n;n--)S[h++]=r[F]>>n&1;r=null;if(1===O)r=[U,U,U];else{r=[];for(F=0;3>F;F++)n=new Uint8Array(E),r.push(n);for(h=n=0;h<E;h++)for(F=0;3>F;F++)r[F][h]=U[n++]}return{width:K,height:M,pixels:r,mask:S}};return R}()})},"esri/chunks/Jpg":function(){define(["exports","./_commonjsHelpers"],function(Y,T){T=T.createCommonjsModule(function(R){(function(U){U=
U();void 0!==U&&(R.exports=U)})(function(){var U=function(){function r(K){this.message="JPEG error: "+K}r.prototype=Error();r.prototype.name="JpegError";return r.constructor=r}();return function(){function r(){this.decodeTransform=null;this.colorTransform=-1}function K(E,F){for(var h=0,n=[],l,v,u=16;0<u&&!E[u-1];)u--;n.push({children:[],index:0});var w=n[0],C;for(l=0;l<u;l++){for(v=0;v<E[l];v++){w=n.pop();for(w.children[w.index]=F[h];0<w.index;)w=n.pop();w.index++;for(n.push(w);n.length<=l;)n.push(C=
{children:[],index:0}),w.children[w.index]=C.children,w=C;h++}l+1<u&&(n.push(C={children:[],index:0}),w.children[w.index]=C.children,w=C)}return n[0].children}function M(E,F,h,n,l,v,u,w,C){function y(){if(0<c)return c--,g>>c&1;g=E[F++];if(255===g){var P=E[F++];if(P)throw new U("unexpected marker "+(g<<8|P).toString(16));}c=7;return g>>>7}function k(P){for(;;){P=P[y()];if("number"===typeof P)return P;if("object"!==typeof P)throw new U("invalid huffman sequence");}}function m(P){for(var aa=0;0<P;)aa=
aa<<1|y(),P--;return aa}function A(P){if(1===P)return 1===y()?1:-1;var aa=m(P);return aa>=1<<P-1?aa:aa+(-1<<P)+1}function D(P,aa){var ba=k(P.huffmanTableDC);ba=0===ba?0:A(ba);P.blockData[aa]=P.pred+=ba;for(ba=1;64>ba;){var Z=k(P.huffmanTableAC),X=Z&15;Z>>=4;if(0===X){if(15>Z)break;ba+=16}else ba+=Z,P.blockData[aa+S[ba]]=A(X),ba++}}function t(P,aa){var ba=k(P.huffmanTableDC);ba=0===ba?0:A(ba)<<C;P.blockData[aa]=P.pred+=ba}function b(P,aa){P.blockData[aa]|=y()<<C}function d(P,aa){if(0<f)f--;else for(var ba=
v;ba<=u;){var Z=k(P.huffmanTableAC),X=Z&15;Z>>=4;if(0===X){if(15>Z){f=m(Z)+(1<<Z)-1;break}ba+=16}else ba+=Z,P.blockData[aa+S[ba]]=A(X)*(1<<C),ba++}}function p(P,aa){for(var ba=v,Z=0,X;ba<=u;){X=S[ba];switch(q){case 0:Z=k(P.huffmanTableAC);X=Z&15;Z>>=4;if(0===X)15>Z?(f=m(Z)+(1<<Z),q=4):(Z=16,q=1);else{if(1!==X)throw new U("invalid ACn encoding");z=A(X);q=Z?2:3}continue;case 1:case 2:P.blockData[aa+X]?P.blockData[aa+X]+=y()<<C:(Z--,0===Z&&(q=2===q?3:0));break;case 3:P.blockData[aa+X]?P.blockData[aa+
X]+=y()<<C:(P.blockData[aa+X]=z<<C,q=0);break;case 4:P.blockData[aa+X]&&(P.blockData[aa+X]+=y()<<C)}ba++}4===q&&(f--,0===f&&(q=0))}var e=h.mcusPerLine,a=F,g=0,c=0,f=0,q=0,z,B=n.length,x,J,I,G;w=h.progressive?0===v?0===w?t:b:0===w?d:p:D;var L=0;h=1===B?n[0].blocksPerLine*n[0].blocksPerColumn:e*h.mcusPerColumn;for(var N,W;L<h;){var Q=l?Math.min(h-L,l):h;for(x=0;x<B;x++)n[x].pred=0;f=0;if(1===B){var V=n[0];for(G=0;G<Q;G++)w(V,64*((V.blocksPerLine+1)*(L/V.blocksPerLine|0)+L%V.blocksPerLine)),L++}else for(G=
0;G<Q;G++){for(x=0;x<B;x++)for(V=n[x],N=V.h,W=V.v,J=0;J<W;J++)for(I=0;I<N;I++)w(V,64*((V.blocksPerLine+1)*((L/e|0)*V.v+J)+(L%e*V.h+I)));L++}c=0;(V=H(E,F))&&V.invalid&&(console.log("decodeScan - unexpected MCU data, next marker is: "+V.invalid),F=V.offset);V=V&&V.marker;if(!V||65280>=V)throw new U("marker was not found");if(65488<=V&&65495>=V)F+=2;else break}(V=H(E,F))&&V.invalid&&(console.log("decodeScan - unexpected Scan data, next marker is: "+V.invalid),F=V.offset);return F-a}function O(E,F){E=
F.blocksPerLine;for(var h=F.blocksPerColumn,n=new Int16Array(64),l=0;l<h;l++)for(var v=0;v<E;v++){var u=void 0,w=void 0,C=void 0,y=void 0,k=void 0,m=void 0,A=void 0,D=void 0,t=k=m=y=w=u=void 0,b=void 0,d=void 0,p=void 0,e=64*((F.blocksPerLine+1)*l+v),a=n,g=F.quantizationTable,c=F.blockData;if(!g)throw new U("missing required Quantization Table.");for(var f=0;64>f;f+=8)u=c[e+f],D=c[e+f+1],A=c[e+f+2],m=c[e+f+3],k=c[e+f+4],y=c[e+f+5],C=c[e+f+6],w=c[e+f+7],u*=g[f],0===(D|A|m|k|y|C|w)?(u=5793*u+512>>10,
a[f]=u,a[f+1]=u,a[f+2]=u,a[f+3]=u,a[f+4]=u,a[f+5]=u,a[f+6]=u,a[f+7]=u):(D*=g[f+1],A*=g[f+2],m*=g[f+3],k*=g[f+4],y*=g[f+5],C*=g[f+6],w*=g[f+7],p=5793*u+128>>8,d=5793*k+128>>8,b=A,t=C,k=2896*(D-w)+128>>8,w=2896*(D+w)+128>>8,m<<=4,y<<=4,p=p+d+1>>1,d=p-d,u=3784*b+1567*t+128>>8,b=1567*b-3784*t+128>>8,t=u,k=k+y+1>>1,y=k-y,w=w+m+1>>1,m=w-m,p=p+t+1>>1,t=p-t,d=d+b+1>>1,b=d-b,u=2276*k+3406*w+2048>>12,k=3406*k-2276*w+2048>>12,w=u,u=799*m+4017*y+2048>>12,m=4017*m-799*y+2048>>12,y=u,a[f]=p+w,a[f+7]=p-w,a[f+1]=
d+y,a[f+6]=d-y,a[f+2]=b+m,a[f+5]=b-m,a[f+3]=t+k,a[f+4]=t-k);for(g=0;8>g;++g)u=a[g],D=a[g+8],A=a[g+16],m=a[g+24],k=a[g+32],y=a[g+40],C=a[g+48],w=a[g+56],0===(D|A|m|k|y|C|w)?(u=5793*u+8192>>14,u=-2040>u?0:2024<=u?255:u+2056>>4,c[e+g]=u,c[e+g+8]=u,c[e+g+16]=u,c[e+g+24]=u,c[e+g+32]=u,c[e+g+40]=u,c[e+g+48]=u,c[e+g+56]=u):(p=5793*u+2048>>12,d=5793*k+2048>>12,b=A,t=C,k=2896*(D-w)+2048>>12,w=2896*(D+w)+2048>>12,p=(p+d+1>>1)+4112,d=p-d,u=3784*b+1567*t+2048>>12,b=1567*b-3784*t+2048>>12,t=u,k=k+y+1>>1,y=k-y,
w=w+m+1>>1,m=w-m,p=p+t+1>>1,t=p-t,d=d+b+1>>1,b=d-b,u=2276*k+3406*w+2048>>12,k=3406*k-2276*w+2048>>12,w=u,u=799*m+4017*y+2048>>12,m=4017*m-799*y+2048>>12,y=u,u=p+w,w=p-w,D=d+y,C=d-y,A=b+m,y=b-m,m=t+k,k=t-k,u=16>u?0:4080<=u?255:u>>4,D=16>D?0:4080<=D?255:D>>4,A=16>A?0:4080<=A?255:A>>4,m=16>m?0:4080<=m?255:m>>4,k=16>k?0:4080<=k?255:k>>4,y=16>y?0:4080<=y?255:y>>4,C=16>C?0:4080<=C?255:C>>4,w=16>w?0:4080<=w?255:w>>4,c[e+g]=u,c[e+g+8]=D,c[e+g+16]=A,c[e+g+24]=m,c[e+g+32]=k,c[e+g+40]=y,c[e+g+48]=C,c[e+g+56]=
w)}return F.blockData}function H(E,F,h){var n=E.length-1;h=h<F?h:F;if(F>=n)return null;var l=E[F]<<8|E[F+1];if(65472<=l&&65534>=l)return{invalid:null,marker:l,offset:F};for(F=E[h]<<8|E[h+1];!(65472<=F&&65534>=F);){if(++h>=n)return null;F=E[h]<<8|E[h+1]}return{invalid:l.toString(16),marker:F,offset:h}}if(!self||!self.Uint8ClampedArray)return null;var S=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,
51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);r.prototype={parse:function(E){function F(){var g=E[l]<<8|E[l+1];l+=2;return g}function h(){var g=F();g=l+g-2;var c=H(E,g,l);c&&c.invalid&&(console.log("readDataBlock - incorrect length, next marker is: "+c.invalid),g=c.offset);g=E.subarray(l,g);l+=g.length;return g}function n(g){for(var c=Math.ceil(g.samplesPerLine/8/g.maxH),f=Math.ceil(g.scanLines/8/g.maxV),q=0;q<g.components.length;q++){a=g.components[q];var z=Math.ceil(Math.ceil(g.samplesPerLine/
8)*a.h/g.maxH),B=Math.ceil(Math.ceil(g.scanLines/8)*a.v/g.maxV);a.blockData=new Int16Array(64*f*a.v*(c*a.h+1));a.blocksPerLine=z;a.blocksPerColumn=B}g.mcusPerLine=c;g.mcusPerColumn=f}var l=0,v=null,u=null,w=[],C=[],y=[],k=F();if(65496!==k)throw new U("SOI not found");for(k=F();65497!==k;){switch(k){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var m=h();65504===
k&&74===m[0]&&70===m[1]&&73===m[2]&&70===m[3]&&0===m[4]&&(v={version:{major:m[5],minor:m[6]},densityUnits:m[7],xDensity:m[8]<<8|m[9],yDensity:m[10]<<8|m[11],thumbWidth:m[12],thumbHeight:m[13],thumbData:m.subarray(14,14+3*m[12]*m[13])});65518===k&&65===m[0]&&100===m[1]&&111===m[2]&&98===m[3]&&101===m[4]&&(u={version:m[5]<<8|m[6],flags0:m[7]<<8|m[8],flags1:m[9]<<8|m[10],transformCode:m[11]});break;case 65499:k=F()+l-2;for(var A;l<k;){var D=E[l++],t=new Uint16Array(64);if(0===D>>4)for(m=0;64>m;m++)A=
S[m],t[A]=E[l++];else if(1===D>>4)for(m=0;64>m;m++)A=S[m],t[A]=F();else throw new U("DQT - invalid table spec");w[D&15]=t}break;case 65472:case 65473:case 65474:if(b)throw new U("Only single frame JPEGs supported");F();var b={};b.extended=65473===k;b.progressive=65474===k;b.precision=E[l++];b.scanLines=F();b.samplesPerLine=F();b.components=[];b.componentIds={};m=E[l++];for(k=t=D=0;k<m;k++){A=E[l];var d=E[l+1]>>4;var p=E[l+1]&15;D<d&&(D=d);t<p&&(t=p);d=b.components.push({h:d,v:p,quantizationId:E[l+
2],quantizationTable:null});b.componentIds[A]=d-1;l+=3}b.maxH=D;b.maxV=t;n(b);break;case 65476:A=F();for(k=2;k<A;){D=E[l++];t=new Uint8Array(16);for(m=d=0;16>m;m++,l++)d+=t[m]=E[l];p=new Uint8Array(d);for(m=0;m<d;m++,l++)p[m]=E[l];k+=17+d;(0===D>>4?y:C)[D&15]=K(t,p)}break;case 65501:F();var e=F();break;case 65498:F();A=E[l++];m=[];for(k=0;k<A;k++){D=b.componentIds[E[l++]];var a=b.components[D];D=E[l++];a.huffmanTableDC=y[D>>4];a.huffmanTableAC=C[D&15];m.push(a)}k=E[l++];A=E[l++];D=E[l++];k=M(E,l,
b,m,e,k,A,D>>4,D&15);l+=k;break;case 65535:255!==E[l]&&l--;break;default:if(255===E[l-3]&&192<=E[l-2]&&254>=E[l-2])l-=3;else throw new U("unknown marker "+k.toString(16));}k=F()}this.width=b.samplesPerLine;this.height=b.scanLines;this.jfif=v;this.eof=l;this.adobe=u;this.components=[];for(k=0;k<b.components.length;k++){a=b.components[k];if(v=w[a.quantizationId])a.quantizationTable=v;this.components.push({output:O(b,a),scaleX:a.h/b.maxH,scaleY:a.v/b.maxV,blocksPerLine:a.blocksPerLine,blocksPerColumn:a.blocksPerColumn})}this.numComponents=
this.components.length},_getLinearizedBlockData:function(E,F){var h=this.width/E,n=this.height/F,l,v,u=0,w=this.components.length,C=E*F*w,y=new Uint8ClampedArray(C),k=new Uint32Array(E);for(v=0;v<w;v++){var m=this.components[v];var A=m.scaleX*h;var D=m.scaleY*n;u=v;var t=m.output;var b=m.blocksPerLine+1<<3;for(l=0;l<E;l++)m=0|l*A,k[l]=(m&4294967288)<<3|m&7;for(A=0;A<F;A++)for(m=0|A*D,m=b*(m&4294967288)|(m&7)<<3,l=0;l<E;l++)y[u]=t[m+k[l]],u+=w}if(F=this.decodeTransform)for(v=0;v<C;)for(E=m=0;m<w;m++,
v++,E+=2)y[v]=(y[v]*F[E]>>8)+F[E+1];return y},_isColorConversionNeeded:function(){return this.adobe?!!this.adobe.transformCode:3===this.numComponents?0===this.colorTransform?!1:!0:1===this.colorTransform?!0:!1},_convertYccToRgb:function(E){for(var F,h,n,l=0,v=E.length;l<v;l+=3)F=E[l],h=E[l+1],n=E[l+2],E[l]=F-179.456+1.402*n,E[l+1]=F+135.459-.344*h-.714*n,E[l+2]=F-226.816+1.772*h;return E},_convertYcckToRgb:function(E){for(var F,h,n,l,v=0,u=0,w=E.length;u<w;u+=4)F=E[u],h=E[u+1],n=E[u+2],l=E[u+3],E[v++]=
-122.67195406894+h*(-6.60635669420364E-5*h+4.37130475926232E-4*n-5.4080610064599E-5*F+4.8449797120281E-4*l-.154362151871126)+n*(-9.57964378445773E-4*n+8.17076911346625E-4*F-.00477271405408747*l+1.53380253221734)+F*(9.61250184130688E-4*F-.00266257332283933*l+.48357088451265)+l*(-3.36197177618394E-4*l+.484791561490776),E[v++]=107.268039397724+h*(2.19927104525741E-5*h-6.40992018297945E-4*n+6.59397001245577E-4*F+4.26105652938837E-4*l-.176491792462875)+n*(-7.78269941513683E-4*n+.00130872261408275*F+7.70482631801132E-4*
l-.151051492775562)+F*(.00126935368114843*F-.00265090189010898*l+.25802910206845)+l*(-3.18913117588328E-4*l-.213742400323665),E[v++]=-20.810012546947+h*(-5.70115196973677E-4*h-2.63409051004589E-5*n+.0020741088115012*F-.00288260236853442*l+.814272968359295)+n*(-1.53496057440975E-5*n-1.32689043961446E-4*F+5.60833691242812E-4*l-.195152027534049)+F*(.00174418132927582*F-.00255243321439347*l+.116935020465145)+l*(-3.43531996510555E-4*l+.24165260232407);return E},_convertYcckToCmyk:function(E){for(var F,
h,n,l=0,v=E.length;l<v;l+=4)F=E[l],h=E[l+1],n=E[l+2],E[l]=434.456-F-1.402*n,E[l+1]=119.541-F+.344*h+.714*n,E[l+2]=481.816-F-1.772*h;return E},_convertCmykToRgb:function(E){for(var F,h,n,l,v=0,u=1/255,w=0,C=E.length;w<C;w+=4)F=E[w]*u,h=E[w+1]*u,n=E[w+2]*u,l=E[w+3]*u,E[v++]=255+F*(-4.387332384609988*F+54.48615194189176*h+18.82290502165302*n+212.25662451639585*l-285.2331026137004)+h*(1.7149763477362134*h-5.6096736904047315*n-17.873870861415444*l-5.497006427196366)+n*(-2.5217340131683033*n-21.248923337353073*
l+17.5119270841813)-l*(21.86122147463605*l+189.48180835922747),E[v++]=255+F*(8.841041422036149*F+60.118027045597366*h+6.871425592049007*n+31.159100130055922*l-79.2970844816548)+h*(-15.310361306967817*h+17.575251261109482*n+131.35250912493976*l-190.9453302588951)+n*(4.444339102852739*n+9.8632861493405*l-24.86741582555878)-l*(20.737325471181034*l+187.80453709719578),E[v++]=255+F*(.8842522430003296*F+8.078677503112928*h+30.89978309703729*n-.23883238689178934*l-14.183576799673286)+h*(10.49593273432072*
h+63.02378494754052*n+50.606957656360734*l-112.23884253719248)+n*(.03296041114873217*n+115.60384449646641*l-193.58209356861505)-l*(22.33816807309886*l+180.12613974708367);return E},getData:function(E,F,h){if(4<this.numComponents)throw new U("Unsupported color mode");E=this._getLinearizedBlockData(E,F);if(1===this.numComponents&&h){h=E.length;F=new Uint8ClampedArray(3*h);for(var n=0,l=0;l<h;l++){var v=E[l];F[n++]=v;F[n++]=v;F[n++]=v}return F}if(3===this.numComponents&&this._isColorConversionNeeded())return this._convertYccToRgb(E);
if(4===this.numComponents){if(this._isColorConversionNeeded())return h?this._convertYcckToRgb(E):this._convertYcckToCmyk(E);if(h)return this._convertCmykToRgb(E)}return E}};return r}()})});Y.Jpg=T})},"esri/chunks/LercCodec":function(){define(["exports"],function(Y){function T(K){R[0]=K;return R[0]}const R=new Float32Array(1),U=T(3.4028234663852886E38);var r=T(Math.max(-U,Math.min(-Infinity,U)));Y.decode=function(K,M){M=M||{};var O=M.inputOffset||0;var H=M.encodedMaskData||null===M.encodedMaskData;
var S=new Uint8Array(K,O,10);S=String.fromCharCode.apply(null,S);if("CntZImage"!=S.trim())throw"Unexpected file identifier string: "+S;O+=10;var E=new DataView(K,O,24);var F=E.getInt32(0,!0);var h=E.getInt32(4,!0);var n=E.getUint32(8,!0);var l=E.getUint32(12,!0);var v=E.getFloat64(16,!0);O+=24;if(!H){E=new DataView(K,O,16);var u={};u.numBlocksY=E.getUint32(0,!0);u.numBlocksX=E.getUint32(4,!0);u.numBytes=E.getUint32(8,!0);u.maxValue=E.getFloat32(12,!0);O+=16;if(0<u.numBytes){H=new Uint8Array(Math.ceil(l*
n/8));E=new DataView(K,O,u.numBytes);var w=E.getInt16(0,!0);var C=2;var y=0;do{if(0<w)for(;w--;)H[y++]=E.getUint8(C++);else{var k=E.getUint8(C++);for(w=-w;w--;)H[y++]=k}w=E.getInt16(C,!0);C+=2}while(C<u.numBytes);if(-32768!==w||y<H.length)throw"Unexpected end of mask RLE encoding";u.bitset=H;O+=u.numBytes}else 0===(u.numBytes|u.numBlocksY|u.maxValue)&&(H=new Uint8Array(Math.ceil(l*n/8)),u.bitset=H)}E=new DataView(K,O,16);var m=H=k=y=C=w=void 0;w=E.getUint32(0,!0);C=E.getUint32(4,!0);y=E.getUint32(8,
!0);k=E.getFloat32(12,!0);O+=16;m=C;H=w;m+=0<l%m?1:0;var A=H+(0<n%H?1:0);H=Array(m*A);for(var D=1E9,t=0,b=0;b<A;b++)for(var d=0;d<m;d++){var p=0;E=new DataView(K,O,Math.min(10,K.byteLength-O));var e={};H[t++]=e;var a=E.getUint8(0);p++;e.encoding=a&63;if(3<e.encoding)throw"Invalid block encoding ("+e.encoding+")";if(2===e.encoding)O++,D=Math.min(D,0);else{if(0!==a&&2!==a){a>>=6;e.offsetType=a;if(2===a)e.offset=E.getInt8(1),p++;else if(1===a)e.offset=E.getInt16(1,!0),p+=2;else if(0===a)e.offset=E.getFloat32(1,
!0),p+=4;else throw"Invalid block offset type";D=Math.min(e.offset,D);if(1===e.encoding)if(a=E.getUint8(p),p++,e.bitsPerPixel=a&63,a>>=6,e.numValidPixelsType=a,2===a)e.numValidPixels=E.getUint8(p),p++;else if(1===a)e.numValidPixels=E.getUint16(p,!0),p+=2;else if(0===a)e.numValidPixels=E.getUint32(p,!0),p+=4;else throw"Invalid valid pixel count type";}O+=p;if(3!=e.encoding)if(0===e.encoding){E=(y-1)/4;if(E!==Math.floor(E))throw"uncompressed block has invalid length";p=new ArrayBuffer(4*E);a=new Uint8Array(p);
a.set(new Uint8Array(K,O,4*E));p=new Float32Array(p);for(a=0;a<p.length;a++)D=Math.min(D,p[a]);e.rawData=p;O+=4*E}else 1===e.encoding&&(E=Math.ceil(e.numValidPixels*e.bitsPerPixel/8),p=new ArrayBuffer(4*Math.ceil(E/4)),a=new Uint8Array(p),a.set(new Uint8Array(K,O,E)),e.stuffedData=new Uint32Array(p),O+=E)}}m=D;K=O;O=null!=M.noDataValue?T(Math.max(-U,Math.min(M.noDataValue,U))):r;A=M.encodedMaskData;a=M.returnMask;D=0;t=C;b=w;d=Math.floor(l/t);e=Math.floor(n/b);p=2*v;A=A||(u?u.bitset:null);var g;E=
new (M.pixelType||Float32Array)(l*n);a&&A&&(g=new Uint8Array(l*n));a=new Float32Array(d*e);for(var c,f,q=0;q<=b;q++){var z=q!==b?e:n%b;if(0!==z)for(var B=0;B<=t;B++){var x=B!==t?d:l%t;if(0!==x){var J=q*l*e+B*d,I=l-x,G=H[D],L;if(2>G.encoding){if(0===G.encoding)var N=G.rawData;else{c=L=N=void 0;f=G.stuffedData;var W=G.bitsPerPixel,Q=G.numValidPixels,V=G.offset,P=p,aa=a,ba=k,Z=(1<<W)-1,X=0,da=0,ca=Math.ceil((ba-V)/P);f[f.length-1]<<=8*(4*f.length-Math.ceil(W*Q/8));for(c=0;c<Q;c++)0===da&&(N=f[X++],da=
32),da>=W?(L=N>>>da-W&Z,da-=W):(da=W-da,L=(N&Z)<<da&Z,N=f[X++],da=32-da,L+=N>>>da),aa[c]=L<ca?V+L*P:ba;N=a}L=0}else var ha=2===G.encoding?0:G.offset;if(A)for(f=0;f<z;f++){if(J&7){var ia=A[J>>3];ia<<=J&7}for(c=0;c<x;c++)J&7||(ia=A[J>>3]),ia&128?(g&&(g[J]=1),E[J++]=2>G.encoding?N[L++]:ha):(g&&(g[J]=0),E[J++]=O),ia<<=1;J+=I}else if(2>G.encoding)for(f=0;f<z;f++){for(c=0;c<x;c++)E[J++]=N[L++];J+=I}else for(f=0;f<z;f++)if(E.fill)E.fill(ha,J,J+x),J+=x+I;else{for(c=0;c<x;c++)E[J++]=ha;J+=I}if(1===G.encoding&&
L!==G.numValidPixels)throw"Block and Mask do not match";D++}}}ha=g;g={width:l,height:n,pixelData:E,minValue:m,maxValue:k,noDataValue:O};ha&&(g.maskData=ha);M.returnEncodedMask&&u&&(g.encodedMaskData=u.bitset?u.bitset:null);if(M.returnFileInfo&&(g.fileInfo={fileIdentifierString:S,fileVersion:F,imageType:h,height:n,width:l,maxZError:v,eofOffset:K,mask:u?{numBlocksX:u.numBlocksX,numBlocksY:u.numBlocksY,numBytes:u.numBytes,maxValue:u.maxValue}:null,pixels:{numBlocksX:C,numBlocksY:w,numBytes:y,maxValue:k,
minValue:m,noDataValue:O}},M.computeUsedBitDepths)){M=g.fileInfo;u=C*w;S={};for(F=0;F<u;F++)h=H[F],0===h.encoding?S.float32=!0:1===h.encoding?S[h.bitsPerPixel]=!0:S[0]=!0;u=Object.keys(S);M.bitDepths=u}return g}})},"esri/layers/support/rasterFormats/Raw":function(){define(function(){const Y=function(T){let R=1;switch(T){case Uint8Array:case Int8Array:R=1;break;case Uint16Array:case Int16Array:R=2;break;case Uint32Array:case Int32Array:case Float32Array:R=4;break;case Float64Array:R=8}return R};return function(){function T(){}
T.decode=function(R,U){var r=U.pixelType;const K=[],M=U.width*U.height;var O=Math.floor(R.byteLength/(U.width*U.height*Y(U.pixelType)));const {bandIds:H,format:S}=U;U=H&&H.length||Math.floor(R.byteLength/(U.width*U.height*Y(U.pixelType)));var E=R.byteLength-R.byteLength%(M*Y(r));const F=new r(R,0,M*O);let h,n;let l,v;if("bip"===S)for(h=0;h<U;h++){l=new r(M);v=H?H[h]:h;for(n=0;n<M;n++)l[n]=F[n*O+v];K.push(l)}else if("bsq"===S)for(h=0;h<U;h++)v=H?H[h]:h,K.push(F.subarray(v*M,(v+1)*M));if(E<R.byteLength-
1)if(R=R.slice(E),8*R.byteLength<M)var u=null;else{R=new Uint8Array(R,0,Math.ceil(M/8));r=new Uint8Array(M);for(U=E=U=u=O=0;U<R.length-1;U++)for(u=R[U],E=7;0<=E;E--)r[O++]=u>>E&1;for(E=7;O<M-1;)u=R[R.length-1],r[O++]=u>>E&1,E--;u=r}return{pixels:K,mask:u}};return T}()})},"esri/layers/support/rasterFormats/utils":function(){define(["exports"],function(Y){{var T=new ArrayBuffer(4);const R=new Uint8Array(T);(new Uint32Array(T))[0]=1;T=1===R[0]}Y.isPlatformLittleEndian=T;Object.defineProperty(Y,"__esModule",
{value:!0})})},"esri/layers/support/rasterFormats/TiffDecoder":function(){define("exports ../../../chunks/Zlib ../../../chunks/Jpg ../rasterDatasets/byteStreamUtils ./Lzw ./TiffTags ./utils".split(" "),function(Y,T,R,U,r,K,M){function O(b,d){let p="unknown";3===b?p="f32":1===b?1===d?p="u1":2===d?p="u2":4===d?p="u4":8>=d?p="u8":16>=d?p="u16":32>=d&&(p="u32"):2===b&&(8>=d?p="s8":16>=d?p="s16":32>=d&&(p="s32"));return p}function H(b){let d=null;switch(b?b.toLowerCase():"f32"){case "u1":case "u2":case "u4":case "u8":d=
Uint8Array;break;case "u16":d=Uint16Array;break;case "u32":d=Uint32Array;break;case "s8":d=Int8Array;break;case "s16":d=Int16Array;break;case "s32":d=Int32Array;break;default:d=Float32Array}return d}function S(b,d){return{x:d[0]*b.x+d[1]*b.y+d[2],y:d[3]*b.x+d[4]*b.y+d[5]}}function E(b,d){return(b=b.get(d))&&b.values}function F(b,d){return(b=b.get(d))&&b.values[0]}function h(b,d,p,e=0,a=K.TIFF_TAGS,g=4){var c=8===g;const f=c?u(new DataView(b,p,8),0,d):(new DataView(b,p,2)).getUint16(0,d),q=4+2*g;var z=
c?8:2;c=z+f*q;if(p+c>b.byteLength)return{success:!1,ifd:null,nextIFD:null,requiredBufferSize:c};const B=p+c+4<=b.byteLength?w(new DataView(b,p+c,8===g?8:4),0,d,8===g):null;p+=z;z=new Map;let x,J,I,G,L;for(let W=0;W<f;W++){var N=new DataView(b,p+q*W,q);x=N.getUint16(0,d);I=N.getUint16(2,d);J=K.getTagName(x,a);const Q=[];2===g?(G=N.getUint16(4,d),L=N.getUint16(6,d)):4===g?(G=N.getUint32(4,d),L=N.getUint32(8,d)):8===g&&(G=w(N,4,d,!0),L=w(N,12,d,!0),Q.push(N.getUint32(12,d)),Q.push(N.getUint32(16,d)));
N={id:x,type:I,valueCount:G,valueOffset:L,valueOffsets:Q,values:null};n(b,d,N,e,!1,g);z.set(J,N)}return{success:!0,ifd:z,nextIFD:B,requiredBufferSize:c}}function n(b,d,p,e=0,a=!1,g=4){if(p.values)return!0;var c=p.type,f=p.valueCount,q=p.valueOffset;let z=[];var B=m[c],x=8*B,J=f*B,I=f*m[c]*8,G=8===g?64:32;g=p.valueOffsets;if(I>G&&J>(a?b.byteLength:b?b.byteLength-q+e:0))return p.offlineOffsetSize=[q,J],p.values=null,!1;if(I<=G)if(d||(32>=G?q>>>=32-I:(b=null!=g&&g.length?g[0]:q>>>0,d=null!=g&&g.length?
g[1]:Math.round((q-b)/4294967296),32>=I?(q=b>>>32-I,g[0]=q):(q=b*2**(32-I)+(d>>>32-I),g[0]=b,g[1]=d>>>32-I))),1===f&&x===G)z=[q];else if(64===G)for(b=null!=g&&g.length?g[0]:q>>>0,q=null!=g&&g.length?g[1]:Math.round((q-b)/4294967296),d=b,B=32,b=1;b<=f;b++)J=32-x*b%32,B<x?(J=d<<J>>>32-B,I=q<<32-B>>>32-B,d=q,z.push(J+I*2**(x-B)),B-=32-(x-B)):(z.push(d<<J>>>32-x),B-=x),0===B&&(B=32,d=q);else for(b=1;b<=f;b++)z.push(q<<32-x*b>>>32-x);else for(q-=e,a&&(q=0),f=q;f<q+J;f+=B){switch(c){case 1:x=(new DataView(b,
f,1)).getUint8(0);break;case 2:x=(new DataView(b,f,1)).getUint8(0);break;case 3:x=(new DataView(b,f,2)).getUint16(0,d);break;case 4:x=(new DataView(b,f,4)).getUint32(0,d);break;case 5:x=(new DataView(b,f,4)).getUint32(0,d)/(new DataView(b,f+4,4)).getUint32(0,d);break;case 6:x=(new DataView(b,f,1)).getInt8(0);break;case 7:x=(new DataView(b,f,1)).getUint8(0);break;case 8:x=(new DataView(b,f,2)).getInt16(0,d);break;case 9:x=(new DataView(b,f,4)).getInt32(0,d);break;case 10:x=(new DataView(b,f,4)).getInt32(0,
d)/(new DataView(b,f+4,4)).getInt32(0,d);break;case 11:x=(new DataView(b,f,4)).getFloat32(0,d);break;case 12:x=(new DataView(b,f,8)).getFloat64(0,d);break;case 16:case 18:x=u(new DataView(b,f,8),0,d);break;case 17:g=new DataView(b,f,8);I=(x=d)?g.getInt32(0,x):g.getUint32(0,x);g=x?g.getUint32(4,x):g.getInt32(4,x);G=0<=(x?I:g)?1:-1;x?I*=G:g*=G;x=G*(x?4294967296*g+I:4294967296*I+g);break;default:x=null}z.push(x)}if(2===c){c="";q=z;z=[];for(b=0;b<q.length;b++)0===q[b]&&""!==c?(z.push(c),c=""):c+=String.fromCharCode(q[b]);
""===c&&0!==z.length||z.push(c)}p.values=z;return!0}function l(b){var d=b[0];const p=F(d,"TILEWIDTH"),e=F(d,"TILELENGTH"),a=F(d,"IMAGEWIDTH"),g=F(d,"IMAGELENGTH");var c=F(d,"BITSPERSAMPLE");const f=F(d,"SAMPLESPERPIXEL");var q=F(d,"SAMPLEFORMAT")||1;const z=O(q,c),B=E(d,"PLANARCONFIGURATION")?2===E(d,"PLANARCONFIGURATION")[0]:!1;var x=E(d,"GDAL_NODATA");let J;null!=x&&("string"===typeof x[0]?(J=x.map(ca=>parseFloat(ca)),J.some(ca=>isNaN(ca))&&(J=null)):"number"===typeof x[0]&&(J=x));var I=F(d,"COMPRESSION")||
1;switch(I){case 1:x="NONE";break;case 2:case 3:case 4:case 32771:x="CCITT";break;case 5:x="LZW";break;case 6:case 7:x="JPEG";break;case 32773:x="PACKBITS";break;case 8:case 32946:x="DEFLATE";break;case 34712:x="JPEG2000";break;default:x=String(I)}let G=!0,L="";1!==I&&5!==I&&6!==I&&8!==I&&32946!==I&&(G=!1,L+="unsupported tag compression "+I);3<q&&(G=!1,L+="unsupported tag sampleFormat "+q);0!==c%8&&(G=!1,L+="unsupported tag bitsPerSample "+c);c=F(d,"GEOASCIIPARAMS");if(c){var N=(N=c.split("|").filter(ca=>
-1<ca.indexOf("ESRI PE String \x3d "))[0])?N.replace("ESRI PE String \x3d ",""):"";N=0===N.indexOf("PROJCS")||0===N.indexOf("GEOGCS")?{wkid:null,wkt:N}:null}q=E(d,"GEOTIEPOINTS");c=E(d,"GEOPIXELSCALE");I=E(d,"GEOTRANSMATRIX");var W=d.has("GEOKEYDIRECTORY")?d.get("GEOKEYDIRECTORY").data:null;d=!1;if(W){d=2===F(W,"GTRasterTypeGeoKey");var Q=F(W,"GTModelTypeGeoKey");2===Q?(W=F(W,"GeographicTypeGeoKey"),1024<=W&&32766>=W&&(N={wkid:W})):1===Q&&(W=F(W,"ProjectedCSTypeGeoKey"),1024<=W&&32766>=W&&(N={wkid:W}))}let V;
c&&q&&6<=q.length?(V=[c[0],0,q[3]-q[0]*c[0],0,-Math.abs(c[1]),q[4]-q[1]*c[1]],d&&(V[2]-=.5*V[0]+.5*V[1],V[5]-=.5*V[3]+.5*V[4])):I&&16===I.length&&(V=d?[I[0],I[1],I[3]-.5*I[0],I[4],I[5],I[7]-.5*I[5]]:[I[0],I[1],I[3],I[4],I[5],I[7]]);if(V){var P=[{x:0,y:g},{x:0,y:0},{x:a,y:g},{x:a,y:0}];I=q=Number.POSITIVE_INFINITY;Q=W=Number.NEGATIVE_INFINITY;for(let ca=0;ca<P.length;ca++)d=S(P[ca],V),q=d.x>q?q:d.x,W=d.x<W?W:d.x,I=d.y>I?I:d.y,Q=d.y<Q?Q:d.y;P={xmin:q,xmax:W,ymin:I,ymax:Q,spatialReference:N}}N=b.filter(ca=>
1===F(ca,"NEWSUBFILETYPE"));let aa,ba,Z,X;0<N.length&&(aa=Math.round(Math.log(a/F(N[0],"IMAGEWIDTH"))/Math.LN2),ba=Math.round(Math.log(a/F(N[N.length-1],"IMAGEWIDTH"))/Math.LN2),Z=F(N[N.length-1],"TILEWIDTH"),X=F(N[N.length-1],"TILEHEIGHT"));Z=0<ba?Z||p:null;X=0<ba?X||e:null;let da;p&&(da=[{maxCol:Math.ceil(a/p)-1,maxRow:Math.ceil(g/e)-1,minRow:0,minCol:0}],N.forEach(ca=>{da.push({maxCol:Math.ceil(F(ca,"IMAGEWIDTH")/F(ca,"TILEWIDTH"))-1,maxRow:Math.ceil(F(ca,"IMAGELENGTH")/F(ca,"TILELENGTH"))-1,minRow:0,
minCol:0})}));N=F(b[0],"GDAL_METADATA");N=t(N);L+=" "+k({width:a,height:g,tileWidth:p,tileHeight:e,planes:f,ifds:b});return{width:a,height:g,tileWidth:p,tileHeight:e,planes:f,isBSQ:B,pixelType:z,compression:x,noData:J,isSupported:G,message:L,extent:P,affine:c?null:V,firstPyramidLevel:aa,maximumPyramidLevel:ba,pyramidBlockWidth:Z,pyramidBlockHeight:X,tileBoundary:da,metadata:N}}function v(b){const {littleEndian:d,isBigTiff:p,firstIFD:e}=C(b);var a=e;const g=[];do if(a=y(b,d,a,0,K.TIFF_TAGS,p?8:4),
a.success)g.push(a.ifd),a=a.nextIFD;else break;while(0<a);return{...l(g),littleEndian:d,isBigTiff:p,ifds:g}}function u(b,d,p){const e=b.getUint32(d,p);b=b.getUint32(d+4,p);return p?4294967296*b+e:4294967296*e+b}function w(b,d,p,e){return e?u(b,d,p):b.getUint32(d,p)}function C(b){var d=new DataView(b,0,16),p=d.getUint16(0,!1);b=null;if(18761===p)b=!0;else if(19789===p)b=!1;else throw"unexpected endianess byte";var e=d.getUint16(2,b);if(42!==e&&43!==e)throw"unexpected tiff identifier";p=4;if(e=43===
e){const a=d.getUint16(p,b);p+=2;if(8!==a)throw"unsupported bigtiff version";if(0!==d.getUint16(p,b))throw"unsupported bigtiff version";p+=2}d=w(d,p,b,e);return{littleEndian:b,isBigTiff:e,firstIFD:d}}function y(b,d,p,e=0,a=K.TIFF_TAGS,g=4){p=h(b,d,p,e,a,g);let c;const f=p.ifd;f&&(K.ifdTags.forEach((q,z)=>{f.has(z)&&(c=f.get(z),c.data=h(b,d,c.valueOffset-e,e,q).ifd)}),f.has("GEOKEYDIRECTORY")&&(c=f.get("GEOKEYDIRECTORY"),(a=c.values)&&4<a.length&&(a=a[0]+"."+a[1]+"."+a[2],c.data=h(b,d,c.valueOffset+
6-e,e,K.GEO_KEYS,2).ifd,c.data&&c.data.set("GEOTIFFVersion",{id:0,type:2,valueCount:1,valueOffset:null,values:[a]}))),f.has("XMP")&&(c=f.get("XMP"),a=c.values,"number"===typeof a[0]&&7===c.type&&(c.values=[U.bytesToUTF8(new Uint8Array(a))])));return p}function k(b){const {width:d,height:p,tileHeight:e,tileWidth:a}=b,g=b.planes,c=a?a*e:d*p;b=E(b.ifds[0],"BITSPERSAMPLE")[0];let f="";c*g>2**30/(8<b?b/8:1)&&(f=a?"tiled tiff exceeding 1 gigabits per tile is not supported":"scanline tiff exceeding 1 gigabits is not supported");
return f}const m=[0,1,1,2,4,8,1,1,2,4,8,4,8,-1,-1,-1,8,8,8],A=function(b,d,p,e,a){var g=M.isPlatformLittleEndian===d,c=F(p,"BITSPERSAMPLE"),f=F(p,"SAMPLEFORMAT")||1;c=O(f,c);f=F(p,"COMPRESSION")||1;p=H(c);if(1===f){var q=b.slice(e,e+a);var z=new Uint8Array(q)}else 8===f||32946===f?(z=new Uint8Array(b,e,a),z=new T.Zlib(z),b=z.getBytes(),q=new ArrayBuffer(b.length),z=new Uint8Array(q),z.set(b)):6===f?(z=new Uint8Array(b,e,a),q=new R.Jpg,q.parse(z),b=q.getData(q.width,q.height,!0),q=new ArrayBuffer(b.length),
z=new Uint8Array(q),z.set(b)):5===f&&(z=r.decode(b,e,a,d),q=z.buffer);if("u8"!==c&&"s8"!==c&&!g)switch(q=new ArrayBuffer(z.length),g=new Uint8Array(q),c){case "u16":case "s16":for(c=0;c<z.length;c+=2)g[c]=z[c+1],g[c+1]=z[c];break;case "u32":case "s32":case "f32":for(c=0;c<z.length;c+=4)g[c]=z[c+3],g[c+1]=z[c+2],g[c+2]=z[c+1],g[c+3]=z[c]}return new p(q)},D=function(b,d,p){if(!(b&&0<b.length&&d&&p))return null;let e,a,g;const c=b[0].length,f=b.length,q=new Uint8Array(c);for(let B=0;B<f;B++)if(e=b[B],
a=d[B],g=p[B],0===B)for(var z=0;z<c;z++)q[z]=e[z]<a||e[z]>g?0:1;else for(z=0;z<c;z++)q[z]&&(q[z]=e[z]<a||e[z]>g?0:1);return q},t=function(b){if(!b)return null;var d=b.match(/<Item(.*?)Item>/gi);if(!d||0===d.length)return null;b=new Map;var p;for(var e=0;e<d.length;e++){var a=d[e];var g=a.slice(6,a.indexOf("\x3e"));var c=a.indexOf("sample\x3d");-1<c&&(p=a.slice(c+8,a.indexOf('"',c+8)));c=a.indexOf("name\x3d");-1<c&&(g=a.slice(c+6,a.indexOf('"',c+6)));g&&(a=a.slice(a.indexOf("\x3e")+1,a.indexOf("\x3c/Item\x3e")).trim(),
null!=p?b.has(g)?b.get(g)[p]=a:b.set(g,[a]):b.set(g,a));p=null}d=b.get("STATISTICS_MINIMUM");g=b.get("STATISTICS_MAXIMUM");e=b.get("STATISTICS_MEAN");a=b.get("STATISTICS_STDDEV");p=null;if(d&&g)for(p=[],c=0;c<d.length;c++)p.push({min:parseFloat(d[c]),max:parseFloat(g[c]),avg:e&&parseFloat(e[c]),stddev:a&&parseFloat(a[c])});g=b.get("BandName");e=b.get("WavelengthMin");a=b.get("WavelengthMax");d=null;if(g)for(d=[],c=0;c<g.length;c++)d.push({BandName:g[c],WavelengthMin:e&&parseFloat(e[c]),WavelengthMax:a&&
parseFloat(a[c])});g=b.get("DataType");return{statistics:p,bandProperties:d,dataType:g,rawMetadata:b}};Y.decode=function(b,d){d=d||v(b);const {ifds:p,noData:e}=d;if(0===p.length)throw"no valid image file directory";var a=k(d);if(a)throw a;var g=p[0];a=e?e[0]:null;if(d.tileWidth){var c=E(g,"TILEOFFSETS");if(void 0===c)g=null;else{var f=E(g,"TILEBYTECOUNTS"),q=d.tileWidth,z=d.tileHeight,{width:B,height:x,pixelType:J,isBSQ:I}=d,G=d.planes,L=B*x,N=E(g,"BITSPERSAMPLE")[0],W=H(J),Q=[];for(var V=0;V<G;V++)Q.push(new W(L));
var P,aa;L=Math.ceil(B/q);if(0===N%8)for(N=0;N<c.length;N++){var ba=Math.floor(N/L)*z;var Z=N%L*q;V=ba*B+Z;W=A(b,d.littleEndian,g,c[N],f[N]);var X=0;var da=V;Z=Math.min(q,B-Z);var ca=Math.min(z,x-ba);for(ba=0;ba<G;ba++){var ha=Q[ba];if(I)for(P=0;P<ca;P++)for(da=V+P*B,X=q*z*ba+P*q,aa=0;aa<Z;aa++,da++,X++)ha[da]=W[X];else for(P=0;P<ca;P++)for(da=V+P*B,X=P*q*G+ba,aa=0;aa<Z;aa++,da++,X+=G)ha[da]=W[X]}}g={width:B,height:x,pixelType:J,pixels:Q}}}else if(c=d,da=M.isPlatformLittleEndian===c.littleEndian,
X=E(g,"STRIPOFFSETS"),void 0===X)g=null;else{var {width:ia,height:ja,pixelType:ka}=c;d=c.planes;f=ia*ja;L=E(g,"BITSPERSAMPLE")[0];q=H(ka);z=new q(f*d);N=E(g,"STRIPBYTECOUNTS");W=E(g,"ROWSPERSTRIP")[0];Z=E(g,"COMPRESSION")?E(g,"COMPRESSION")[0]:1;P=W;if(0===L%8)for(g=0;g<X.length;g++){ba=g*W*ia*d;P=(g+1)*W>ja?ja-g*W:W;if("u8"===ka||"s8"===ka||da)8===Z||32946===Z?(Q=new Uint8Array(b,X[g],N[g]),Q=new T.Zlib(Q),aa=Q.getBytes(),V=new ArrayBuffer(aa.length),Q=new Uint8Array(V),Q.set(aa),Q.length!==P*ia*
d*L/8&&console.log("strip byte counts is different than expected")):6===Z?(Q=new Uint8Array(b,X[g],N[g]),V=new R.Jpg,V.parse(Q),P=V.getData(V.width,V.height,!0),V=new ArrayBuffer(P.length),Q=new Uint8Array(V),Q.set(P)):5===Z?(Q=r.decode(b,X[g],N[g],c.littleEndian),V=Q.buffer):1===Z&&(N[g]!==P*ia*d*L/8&&console.log("strip byte counts is different than expected"),V=b.slice(X[g],X[g]+N[g]));else switch(6===Z||8===Z||32946===Z?(Q=new Uint8Array(b,X[g],N[g]),Q=new T.Zlib(Q),Q=Q.getBytes(),V=new ArrayBuffer(Q.length),
G=new Uint8Array(V),Q.length!==P*ia*d*L/8&&console.log("strip byte counts is different than expected")):1===Z&&(N[g]!==P*ia*d*L/8&&console.log("strip byte counts is different than expected"),V=new ArrayBuffer(N[g]),Q=new Uint8Array(b,X[g],N[g]),G=new Uint8Array(V)),ka){case "u16":case "s16":for(P=0;P<Q.length;P+=2)G[P]=Q[P+1],G[P+1]=Q[P];break;case "u32":case "s32":case "f32":for(P=0;P<Q.length;P+=4)G[P]=Q[P+3],G[P+1]=Q[P+2],G[P+2]=Q[P+1],G[P+3]=Q[P]}P=new q(V);z.set(P,ba)}Q=[];if(1===d)Q.push(z);
else for(g=0;g<d;g++){G=new q(f);for(b=0;b<f;b++)G[b]=z[b*d+g];Q.push(G)}g={width:ia,height:ja,pixelType:ka,pixels:Q}}if(null!==a){g.mask=new Uint8Array(g.width*g.height);if(1E24<Math.abs(a))for(b=0;b<g.width*g.height;b++)g.mask[b]=1E-6>Math.abs((g.pixels[0][b]-a)/a)?0:1;else for(b=0;b<g.width*g.height;b++)g.mask[b]=g.pixels[0][b]===a?0:1;g.noDataValue=a}return g};Y.decodeTileOrStrip=function(b,d){const {headerInfo:p,ifd:e}=d;var a=A(b,p.littleEndian,e,d.offset||0,d.size||b.byteLength);const {pixelType:g,
isBSQ:c,planes:f}=p;var q=H(g);b=a.length/f;const z=[];for(var B=0;B<f;B++){var x=new q(b);if(c)x=a.slice(b*B,b*(B+1));else for(var J=0;J<b;J++)x[J]=a[J*f+B];z.push(x)}a=F(e,"TILEWIDTH");q=F(e,"TILELENGTH");x=p.noData?p.noData[0]:null;B=(J=p.metadata?p.metadata.statistics:null)?J.map(G=>G.min):null;J=J?J.map(G=>G.max):null;let I;if(null!=x)if(I=new Uint8Array(b),1E24<Math.abs(x))for(d=0;d<b;d++)I[d]=1E-6>Math.abs((z[0][d]-x)/x)?0:1;else for(d=0;d<b;d++)I[d]=z[0][d]===x?0:1;else B&&J&&d.applyMinMaxConstraint&&
(I=D(z,B,J));return{pixelType:g,width:a,height:q,pixels:z,mask:I,noDataValue:x}};Y.getImageInfo=l;Y.parseFieldValues=n;Y.parseHeader=v;Y.parseIFD=y;Y.parseSignature=C;Object.defineProperty(Y,"__esModule",{value:!0})})},"esri/layers/support/rasterDatasets/byteStreamUtils":function(){define(["exports"],function(Y){Y.bytesToUTF8=function(T,R){let U=0,r="",K=0,M=0;const O=T.length;for(;U<O;)if(M=T[U++],K=M>>4,8>K?K=1:15===K?(K=4,M=(M&7)<<18|(T[U++]&63)<<12|(T[U++]&63)<<6|T[U++]&63):14===K?(K=3,M=(M&15)<<
12|(T[U++]&63)<<6|T[U++]&63):(K=2,M=(M&31)<<6|T[U++]&63),0!==M||R)r+=String.fromCharCode(M);return r};Object.defineProperty(Y,"__esModule",{value:!0})})},"esri/layers/support/rasterFormats/Lzw":function(){define(["exports"],function(Y){function T(K,M,O,H=!0){if(0!==M%4||0!==O%4){var S=new ArrayBuffer(4*Math.ceil(O/4));S=new Uint8Array(S);K=new Uint8Array(K,M,O);if(H)for(H=0;H<S.length;H+=4)S[H]=K[H+3],S[H+1]=K[H+2],S[H+2]=K[H+1],S[H+3]=K[H];else S.set(K);return new Uint32Array(S.buffer)}if(H){H=new Uint8Array(K,
M,O);S=new Uint8Array(H.length);for(K=0;K<S.length;K+=4)S[K]=H[K+3],S[K+1]=H[K+2],S[K+2]=H[K+1],S[K+3]=H[K];return new Uint32Array(S.buffer)}return new Uint32Array(K,M,O/4)}function R(){const K=[];for(let M=0;257>=M;M++)K[M]=[M];return K}function U(K,M){for(let O=0;O<M.length;O++)K.push(M[O])}const r=new Set;r.add(511);r.add(1023);r.add(2047);r.add(4095);r.add(8191);Y.decode=function(K,M,O,H=!0){K=T(K,M,O,H);M=9;H=R();let S=32,E=H.length,F=[],h=1,n=K[0],l=0;const v=K.length;O=8*(4*v-O);const u=[];
for(;null!=n;){if(S>=M)S-=M,l=n>>>32-M,n<<=M;else{l=n>>>32-S;n=K[h++];var w=M-S;S=32-w;l=(l<<w)+(n>>>S);n<<=w}if(257===l)break;if(256===l)M=9,H=R(),E=H.length,F=[];else{w=H[l];if(null==w){if(l>H.length)throw"data integrity issue: code does not exist on code page";F.push(F[0]);H[E++]=F.slice();U(u,F)}else U(u,w),F.push(w[0]),1<F.length&&(H[E++]=F.slice()),F=w.slice();r.has(E)&&M++;0===S&&(n=K[h++],S=32);if(h>v||h===v&&S<=O)break}}return new Uint8Array(u)};Object.defineProperty(Y,"__esModule",{value:!0})})},
"esri/layers/support/rasterFormats/TiffTags":function(){define(function(){const Y=(()=>{const r=[];r[254]="NEWSUBFILETYPE";r[255]="SUBFILETYPE";r[256]="IMAGEWIDTH";r[257]="IMAGELENGTH";r[258]="BITSPERSAMPLE";r[259]="COMPRESSION";r[262]="PHOTOMETRICINTERPRETATION";r[263]="THRESHHOLDING";r[264]="CELLWIDTH";r[265]="CELLLENGTH";r[266]="FILLORDER";r[269]="DOCUMENTNAME";r[270]="IMAGEDESCRIPTION";r[271]="MAKE";r[272]="MODEL";r[273]="STRIPOFFSETS";r[274]="ORIENTATION";r[277]="SAMPLESPERPIXEL";r[278]="ROWSPERSTRIP";
r[279]="STRIPBYTECOUNTS";r[280]="MINSAMPLEVALUE";r[281]="MAXSAMPLEVALUE";r[282]="XRESOLUTION";r[283]="YRESOLUTION";r[284]="PLANARCONFIGURATION";r[285]="PAGENAME";r[286]="XPOSITION";r[287]="YPOSITION";r[288]="FREEOFFSETS";r[289]="FREEBYTECOUNTS";r[290]="GRAYRESPONSEUNIT";r[291]="GRAYRESPONSECURVE";r[292]="T4OPTIONS";r[293]="T6OPTIONS";r[296]="RESOLUTIONUNIT";r[297]="PAGENUMBER";r[300]="COLORRESPONSEUNIT";r[301]="TRANSFERFUNCTION";r[305]="SOFTWARE";r[306]="DATETIME";r[315]="ARTIST";r[316]="HOSTCOMPUTER";
r[317]="PREDICTOR";r[318]="WHITEPOINT";r[319]="PRIMARYCHROMATICITIES";r[320]="COLORMAP";r[321]="HALFTONEHINTS";r[322]="TILEWIDTH";r[323]="TILELENGTH";r[324]="TILEOFFSETS";r[325]="TILEBYTECOUNTS";r[326]="BADFAXLINES";r[327]="CLEANFAXDATA";r[328]="CONSECUTIVEBADFAXLINES";r[330]="SUBIFD";r[332]="INKSET";r[333]="INKNAMES";r[334]="NUMBEROFINKS";r[336]="DOTRANGE";r[337]="TARGETPRINTER";r[338]="EXTRASAMPLES";r[339]="SAMPLEFORMAT";r[340]="SMINSAMPLEVALUE";r[341]="SMAXSAMPLEVALUE";r[342]="TRANSFERRANGE";r[347]=
"JPEGTABLES";r[512]="JPEGPROC";r[513]="JPEGIFOFFSET";r[514]="JPEGIFBYTECOUNT";r[515]="JPEGRESTARTINTERVAL";r[517]="JPEGLOSSLESSPREDICTORS";r[518]="JPEGPOINTTRANSFORM";r[519]="JPEGQTABLES";r[520]="JPEGDCTABLES";r[521]="JPEGACTABLES";r[529]="YCBCRCOEFFICIENTS";r[530]="YCBCRSUBSAMPLING";r[531]="YCBCRPOSITIONING";r[532]="REFERENCEBLACKWHITE";r[700]="XMP";r[33550]="GEOPIXELSCALE";r[33922]="GEOTIEPOINTS";r[33432]="COPYRIGHT";r[42112]="GDAL_METADATA";r[42113]="GDAL_NODATA";r[50844]="RPCCOEFFICIENT";r[34264]=
"GEOTRANSMATRIX";r[34735]="GEOKEYDIRECTORY";r[34736]="GEODOUBLEPARAMS";r[34737]="GEOASCIIPARAMS";r[34665]="EXIFIFD";r[34853]="GPSIFD";r[40965]="INTEROPERABILITYIFD";return r})(),T=(()=>{const r=[].concat(Y);r[36864]="ExifVersion";r[40960]="FlashpixVersion";r[40961]="ColorSpace";r[42240]="Gamma";r[37121]="ComponentsConfiguration";r[37122]="CompressedBitsPerPixel";r[40962]="PixelXDimension";r[40963]="PixelYDimension";r[37500]="MakerNote";r[37510]="UserComment";r[40964]="RelatedSoundFile";r[36867]="DateTimeOriginal";
r[36868]="DateTimeDigitized";r[36880]="OffsetTime";r[36881]="OffsetTimeOriginal";r[36882]="OffsetTimeDigitized";r[37520]="SubSecTime";r[37521]="SubSecTimeOriginal";r[37522]="SubSecTimeDigitized";r[37888]="Temperature";r[37889]="Humidity";r[37890]="Pressure";r[37891]="WaterDepth";r[37892]="Acceleration";r[37893]="CameraElevationAngle";r[42016]="ImageUniqueID";r[42032]="CameraOwnerName";r[42033]="BodySerialNumber";r[42034]="LensSpecification";r[42035]="LensMake";r[42036]="LensModel";r[42037]="LensSerialNumber";
r[33434]="ExposureTime";r[33437]="FNumber";r[34850]="ExposureProgram";r[34852]="SpectralSensitivity";r[34855]="PhotographicSensitivity";r[34856]="OECF";r[34864]="SensitivityType";r[34865]="StandardOutputSensitivity";r[34866]="RecommendedExposureIndex";r[34867]="ISOSpeed";r[34868]="ISOSpeedLatitudeyyy";r[34869]="ISOSpeedLatitudezzz";r[37377]="ShutterSpeedValue";r[37378]="ApertureValue";r[37379]="BrightnessValue";r[37380]="ExposureBiasValue";r[37381]="MaxApertureValue";r[37382]="SubjectDistance";r[37383]=
"MeteringMode";r[37384]="LightSource";r[37385]="Flash";r[37386]="FocalLength";r[37396]="SubjectArea";r[41483]="FlashEnergy";r[41484]="SpatialFrequencyResponse";r[41486]="FocalPlaneXResolution";r[41487]="FocalPlaneYResolution";r[41488]="FocalPlaneResolutionUnit";r[41492]="SubjectLocation";r[41493]="ExposureIndex";r[41495]="SensingMethod";r[41728]="FileSource";r[41729]="SceneType";r[41730]="CFAPattern";r[41985]="CustomRendered";r[41986]="ExposureMode";r[41987]="WhiteBalance";r[41988]="DigitalZoomRatio";
r[41989]="FocalLengthIn35mmFilm";r[41990]="SceneCaptureType";r[41991]="GainControl";r[41992]="Contrast";r[41993]="Saturation";r[41994]="Sharpness";r[41995]="DeviceSettingDescription";r[41996]="SubjectDistanceRange";return r})(),R=(()=>{const r=[];r[1024]="GTModelTypeGeoKey";r[1025]="GTRasterTypeGeoKey";r[1026]="GTCitationGeoKey";r[2048]="GeographicTypeGeoKey";r[2049]="GeogCitationGeoKey";r[2050]="GeogGeodeticDatumGeoKey";r[2051]="GeogPrimeMeridianGeoKey";r[2052]="GeogLinearUnitsGeoKey";r[2053]="GeogLinearUnitSizeGeoKey";
r[2054]="GeogAngularUnitsGeoKey";r[2055]="GeogAngularUnitSizeGeoKey";r[2056]="GeogEllipsoidGeoKey";r[2057]="GeogSemiMajorAxisGeoKey";r[2058]="GeogSemiMinorAxisGeoKey";r[2059]="GeogInvFlatteningGeoKey";r[2061]="GeogPrimeMeridianLongGeoKey";r[2060]="GeogAzimuthUnitsGeoKey";r[3072]="ProjectedCSTypeGeoKey";r[3073]="PCSCitationGeoKey";r[3074]="ProjectionGeoKey";r[3075]="ProjCoordTransGeoKey";r[3076]="ProjLinearUnitsGeoKey";r[3077]="ProjLinearUnitSizeGeoKey";r[3078]="ProjStdParallel1GeoKey";r[3079]="ProjStdParallel2GeoKey";
r[3080]="ProjNatOriginLongGeoKey";r[3081]="ProjNatOriginLatGeoKey";r[3082]="ProjFalseEastingGeoKey";r[3083]="ProjFalseNorthingGeoKey";r[3084]="ProjFalseOriginLongGeoKey";r[3085]="ProjFalseOriginLatGeoKey";r[3086]="ProjFalseOriginEastingGeoKey";r[3087]="ProjFalseOriginNorthingGeoKey";r[3088]="ProjCenterLongGeoKey";r[3090]="ProjCenterEastingGeoKey";r[3091]="ProjCenterNorthingGeoKey";r[3092]="ProjScaleAtNatOriginGeoKey";r[3093]="ProjScaleAtCenterGeoKey";r[3094]="ProjAzimuthAngleGeoKey";r[3095]="ProjStraightVertPoleLongGeoKey";
r[4096]="VerticalCSTypeGeoKey";r[4097]="VerticalCitationGeoKey";r[4098]="VerticalDatumGeoKey";r[4099]="VerticalUnitsGeoKey";return r})(),U=new Map;U.set("EXIFIFD",T);U.set("GPSIFD","GPSVersionID GPSLatitudeRef GPSLatitude GPSLongitudeRef GPSLongitude GPSAltitudeRef GPSAltitude GPSTimeStamp GPSSatellites GPSStatus GPSMeasureMode GPSDOP GPSSpeedRef GPSSpeed GPSTrackRef GPSTrack GPSImgDirectionRef GPSImgDirection GPSMapDatum GPSDestLatitudeRef GPSDestLatitude GPSDestLongitudeRef GPSDestLongitude GPSDestBearingRef GPSDestBearing GPSDestDistanceRef GPSDestDistance GPSProcessingMethod GPSAreaInformation GPSDateStamp GPSDifferential GPSHPositioningError".split(" "));
return{TIFF_TAGS:Y,ifdTags:U,GEO_KEYS:R,getTagName:function(r,K){K=(K||Y)[r];void 0===K&&(K="unknown"+String(r));return K}}})},"esri/layers/support/rasterFunctions/pixelUtils":function(){define(["exports","../PixelBlock"],function(Y,T){function R(h,n){h=Math.min(Math.max(h,-100),100);n=Math.min(Math.max(n,-100),100);let l,v;const u=new Uint8Array(256);for(l=0;256>l;l++)0<h&&100>h?v=(200*l-25500+510*n)/(2*(100-h))+128:0>=h&&-100<h?v=(200*l-25500+510*n)*(100+h)/2E4+128:100===h?(v=200*l-25500+256*(100-
h)+510*n,v=0<v?255:0):-100===h&&(v=128),u[l]=255<v?255:0>v?0:v;return u}function U(h,n,l,v,u,w,C,y){return{xmin:u<=l*h?0:u<l*h+h?u-l*h:h,ymin:w<=v*n?0:w<v*n+n?w-v*n:n,xmax:u+C<=l*h?0:u+C<l*h+h?u+C-l*h:h,ymax:w+y<=v*n?0:w+y<v*n+n?w+y-v*n:n}}function r(h,n,l,v){var u=h.filter(x=>F(x))[0];if(null==u)return null;const w=v?v.width:n.width;v=v?v.height:n.height;const C=u.width,y=u.height,k=n.width/C;n=n.height/y;const m=l?l.x:0;l=l?l.y:0;const A=u.pixelType;var D=T.getPixelArrayConstructor(A);const t=u.pixels.length;
u=[];let b,d;let p,e,a,g,c,f,q;for(e=0;e<t;e++){d=new D(w*v);for(a=0;a<n;a++)for(g=0;g<k;g++){var z=h[a*k+g];if(F(z))for(b=z.pixels[e],q=U(C,y,g,a,m,l,w,v),c=q.ymin;c<q.ymax;c++)for(z=(a*y+c-l)*w+(g*C-m),p=c*C,f=q.xmin;f<q.xmax;f++)d[z+f]=b[p+f]}u.push(d)}let B;if(h.some(x=>null==x||x.mask&&0<x.mask.length))for(B=new Uint8Array(w*v),a=0;a<n;a++)for(g=0;g<k;g++)if(D=(z=h[a*k+g])?z.mask:null,q=U(C,y,g,a,m,l,w,v),D)for(c=q.ymin;c<q.ymax;c++)for(z=(a*y+c-l)*w+(g*C-m),p=c*C,f=q.xmin;f<q.xmax;f++)B[z+f]=
D[p+f];else if(z)for(c=q.ymin;c<q.ymax;c++)for(z=(a*y+c-l)*w+(g*C-m),p=c*C,f=q.xmin;f<q.xmax;f++)B[z+f]=1;else for(c=q.ymin;c<q.ymax;c++)for(z=(a*y+c-l)*w+(g*C-m),p=c*C,f=q.xmin;f<q.xmax;f++)B[z+f]=0;h=new T({width:w,height:v,pixels:u,pixelType:A,mask:B});h.updateStatistics();return h}function K(h){if(!F(h))return null;const n=h.clone(),{width:l,height:v,pixels:u,mask:w}=h;var C=u[0];h=n.pixels[0];for(let m=2;m<v-1;m++){const A=new Map;for(var y=m-2;y<m+2;y++)for(var k=0;4>k;k++){const D=y*l+k;H(A,
C[D],w?w[D]:1)}h[m*l]=M(A);h[m*l+1]=h[m*l+2]=h[m*l];for(y=3;y<l-1;y++)k=(m-2)*l+y+1,H(A,C[k],w?w[k]:1),k=(m-1)*l+y+1,H(A,C[k],w?w[k]:1),k=m*l+y+1,H(A,C[k],w?w[k]:1),k=(m+1)*l+y+1,H(A,C[k],w?w[k]:1),k=(m-2)*l+y-3,O(A,C[k],w?w[k]:1),k=(m-1)*l+y-3,O(A,C[k],w?w[k]:1),k=m*l+y-3,O(A,C[k],w?w[k]:1),k=(m+1)*l+y-3,O(A,C[k],w?w[k]:1),h[m*l+y]=M(A);h[m*l+y+1]=h[m*l+y]}for(C=0;C<l;C++)h[C]=h[l+C]=h[2*l+C],h[(v-1)*l+C]=h[(v-2)*l+C];n.updateStatistics();return n}function M(h){if(0===h.size)return 0;let n=0,l=-1,
v=0;const u=h.keys();let w=u.next();for(;!w.done;)v=h.get(w.value),v>n&&(l=w.value,n=v),w=u.next();return l}function O(h,n,l){0!==l&&(l=h.get(n),1===l?h.delete(n):h.set(n,l-1))}function H(h,n,l){0!==l&&h.set(n,h.has(n)?h.get(n)+1:1)}function S(h,n,l){let {x:v,y:u}=n;const {width:w,height:C}=l;if(0===v&&0===u&&C===h.height&&w===h.width)return h;const {width:y,height:k}=h;n=Math.max(0,u);const m=Math.max(0,v),A=Math.min(v+w,y),D=Math.min(u+C,k);if(0>A||0>D||!F(h))return null;v=Math.max(0,-v);u=Math.max(0,
-u);const {pixels:t,mask:b}=h;var d=w*C,p=t.length;const e=[];for(var a=0;a<p;a++){var g=t[a],c=T.createEmptyBand(h.pixelType,d);for(let f=n;f<D;f++){const q=f*y;let z=(f+u-n)*w+v;for(let B=m;B<A;B++)c[z++]=g[q+B]}e.push(c)}d=new Uint8Array(d);for(p=n;p<D;p++)for(a=p*y,g=(p+u-n)*w+v,c=m;c<A;c++)d[g++]=b?b[a+c]:1;h=new T({width:l.width,height:l.height,pixelType:h.pixelType,pixels:e,mask:d});h.updateStatistics();return h}function E(h,n=!0){if(!F(h))return null;const {pixels:l,width:v,height:u,mask:w,
pixelType:C}=h;h=[];const y=Math.round(v/2),k=Math.round(u/2),m=u-1,A=v-1;for(var D=0;D<l.length;D++){var t=l[D],b=T.createEmptyBand(C,y*k),d=0;for(var p=0;p<u;p+=2)for(var e=0;e<v;e+=2){var a=t[p*v+e];if(n){var g=e===A?a:t[p*v+e+1];const c=p===m?a:t[p*v+e+v],f=e===A?c:p===m?g:t[p*v+e+v+1];b[d++]=(a+g+c+f)/4}else b[d++]=a}h.push(b)}D=null;if(w)for(D=new Uint8Array(y*k),t=0,b=0;b<u;b+=2)for(d=0;d<v;d+=2)p=w[b*v+d],n?(e=d===A?p:w[b*v+d+1],a=b===m?p:w[b*v+d+v],g=d===A?a:b===m?e:w[b*v+d+v+1],D[t++]=p*
e*a*g?1:0):D[t++]=p;return new T({width:y,height:k,pixelType:C,pixels:h,mask:D})}const F=function(h){return h&&"esri.layers.support.PixelBlock"===h.declaredClass&&h.pixels&&0<h.pixels.length};Y.approximateTransform=function(h,n,l,v,u="nearest"){if(!F(h))return null;"majority"===u&&(h=K(h));const {pixels:w,mask:C,pixelType:y}=h,k=h.width;var m=h.height;h=T.getPixelArrayConstructor(y);var A=w.length;const {width:D,height:t}=n;n=v.cols;var b=v.rows;const d=Math.ceil(D/n),p=Math.ceil(t/b);v=!1;for(var e=
0;e<l.length;e+=3)-1===l[e]&&-1===l[e+1]&&-1===l[e+2]&&(v=!0);let a,g,c,f,q,z;const B=new Float32Array(D*t),x=new Float32Array(D*t);e=0;let J,I;const G="majority"===u?0:.5;for(let W=0;W<p;W++)for(let Q=0;Q<d;Q++){a=12*(W*d+Q);u=l[a];g=l[a+1];c=l[a+2];f=l[a+3];q=l[a+4];z=l[a+5];for(var L=0;L<b;L++){e=(W*b+L)*D+Q*n;I=(L+.5)/b;for(var N=0;N<L;N++)J=(N+.5)/n,B[e+N]=Math.round((u*J+g*I+c)*k-G),x[e+N]=Math.round((f*J+q*I+z)*m-G)}a+=6;u=l[a];g=l[a+1];c=l[a+2];f=l[a+3];q=l[a+4];z=l[a+5];for(L=0;L<b;L++)for(e=
(W*b+L)*D+Q*n,I=(L+.5)/b,N=L;N<n;N++)J=(N+.5)/n,B[e+N]=Math.round((u*J+g*I+c)*k-G),x[e+N]=Math.round((f*J+q*I+z)*m-G)}l=(W,Q)=>{for(let V=0;V<t;V++){a=V*D;for(let P=0;P<D;P++)W[a]=0>B[a]||0>x[a]?0:Q[B[a]+x[a]*k],a++}};m=[];for(b=0;b<A;b++)n=new h(D*t),l(n,w[b]),m.push(n);h=new T({width:D,height:t,pixelType:y,pixels:m});if(C)h.mask=new Uint8Array(D*t),l(h.mask,C);else if(v)for(h.mask=new Uint8Array(D*t),A=0;A<D*t;A++)h.mask[A]=0>B[A]||0>x[A]?0:1;h.updateStatistics();return h};Y.clip=S;Y.colorize=function(h,
n){if(!F(h)||!n&&(n.indexedColormap||n.indexed2DColormap))return h;const l=h.clone();var v=l.pixels;let u=l.mask;const w=l.width*l.height;if(1!==v.length)return h;const {indexedColormap:C,indexed2DColormap:y,offset:k,alphaSpecified:m}=n;n=C.length-1;h=0;v=v[0];const A=new Uint8Array(v.length),D=new Uint8Array(v.length),t=new Uint8Array(v.length);let b=0;if(C)if(u)for(h=0;h<w;h++)u[h]&&(b=4*(v[h]-k),b<k||b>n?u[h]=0:(A[h]=C[b],D[h]=C[b+1],t[h]=C[b+2],u[h]=C[b+3]));else{u=new Uint8Array(w);for(h=0;h<
w;h++)b=4*(v[h]-k),b<k||b>n?u[h]=0:(A[h]=C[b],D[h]=C[b+1],t[h]=C[b+2],u[h]=C[b+3]);l.mask=u}else if(u)for(h=0;h<w;h++)u[h]&&(n=y[v[h]],A[h]=n[0],D[h]=n[1],t[h]=n[2],u[h]=n[3]);else{u=new Uint8Array(w);for(h=0;h<w;h++)n=y[v[h]],A[h]=n[0],D[h]=n[1],t[h]=n[2],u[h]=n[3];l.mask=u}l.pixels=[A,D,t];l.statistics=null;l.pixelType="u8";l.maskIsAlpha=m;return l};Y.createColormapLUT=function(h){if(h){var n=h.colormap;if(n&&0!==n.length){n=n.sort((m,A)=>m[0]-A[0]);var l=0;0>n[0][0]&&(l=n[0][0]);var v=Math.max(256,
n[n.length-1][0]-l+1),u=new Uint8Array(4*v),w=[],C=0,y=0,k=5===n[0].length;if(65536<v)return n.forEach(m=>{w[m[0]-l]=k?m.slice(1):m.slice(1).concat([255])}),{indexed2DColormap:w,offset:l,alphaSpecified:k};if(h.fillUnspecified)for(h=n[y],C=h[0]-l;C<v;C++)u[4*C]=h[1],u[4*C+1]=h[2],u[4*C+2]=h[3],u[4*C+3]=k?h[4]:255,C===h[0]-l&&(h=y===n.length-1?h:n[++y]);else for(C=0;C<n.length;C++)h=n[C],y=4*(h[0]-l),u[y]=h[1],u[y+1]=h[2],u[y+2]=h[3],u[y+3]=k?h[4]:255;return{indexedColormap:u,offset:l,alphaSpecified:k}}}};
Y.createContrastBrightnessLUT=R;Y.createHistogramEqualizationLUT=function(h,n=256){n=Math.min(n,256);const {size:l,counts:v}=h;h=new Uint8Array(l);var u=v.reduce((m,A)=>m+A/n,0);let w=0;var C=0;let y=0,k=u;for(let m=0;m<l;m++)if(y+=v[m],!(m<l-1&&y+v[m+1]<k)){for(;w<n-1&&k<y;)w++,k+=u;for(;C<=m;C++)h[C]=w;C=m+1}for(u=C;u<l;u++)h[u]=n-1;return h};Y.createStretchLUT=function(h){const {minCutOff:n,maxCutOff:l,gamma:v,pixelType:u}=h,w=h.outMin||0,C=h.outMax||255;if(-1===["u8","u16","s8","s16"].indexOf(u))return null;
const y=n.length;let k;let m=0;"s8"===u?m=-127:"s16"===u&&(m=-32767);let A=256;-1<["u16","s16"].indexOf(u)&&(A=65536);const D=[],t=C-w;for(k=0;k<y;k++)D[k]=l[k]-n[k];var b=v&&v.length>=y;const d=[];if(b)for(k=0;k<y;k++)d[k]=1<v[k]?2<v[k]?6.5+(v[k]-2)**2.5:6.5+100*(2-v[k])**4:1;let p;const e=[];let a,g,c;if(b)for(k=0;k<y;k++){c=[];for(b=0;b<A;b++)a=b+m,p=(a-n[k])/D[k],g=1,1<v[k]&&(g-=(1/t)**(p*d[k])),c[b]=a<l[k]&&a>n[k]?Math.floor(g*t*p**(1/v[k]))+w:a>=l[k]?C:w;e[k]=c}else for(k=0;k<y;k++){c=[];for(b=
0;b<A;b++)a=b+m,c[b]=a<=n[k]?w:a>=l[k]?C:Math.floor((a-n[k])/D[k]*t)+w;e[k]=c}if(null!=h.contrastOffset)for(h=R(h.contrastOffset,h.brightnessOffset),k=0;k<y;k++)for(c=e[k],b=0;b<A;b++)c[b]=h[c[b]];return{lut:e,offset:m}};Y.estimateStatisticsFromHistograms=function(h){const n=[];for(let w=0;w<h.length;w++){const {min:C,max:y,size:k,counts:m}=h[w];let A=0;var l=0;for(var v=0;v<k;v++)A+=m[v],l+=v*m[v];l/=A;v=0;for(var u=0;u<k;u++)v+=m[u]*(u-l)**2;u=(y-C)/k;n.push({min:C,max:y,avg:(l+.5)*u+C,stddev:Math.sqrt(v/
(A-1))*u})}return n};Y.estimateStatisticsHistograms=function(h){if(!F(h))return null;h.statistics||h.updateStatistics();const {pixels:n,mask:l,pixelType:v,statistics:u}=h;h=h.width*h.height;const w=n.length;let C,y;let k;var m;const A=[],D=[];for(k=0;k<w;k++){var t=new Uint32Array(256);var b=n[k];if("u8"===v)if(C=-.5,y=255.5,l)for(m=0;m<h;m++)l[m]&&t[b[m]]++;else for(m=0;m<h;m++)t[b[m]]++;else{C=u[k].minValue;y=u[k].maxValue;var d=(y-C)/256;var p=new Uint32Array(257);if(l)for(m=0;m<h;m++)l[m]&&p[Math.floor((b[m]-
C)/d)]++;else for(m=0;m<h;m++)p[Math.floor((b[m]-C)/d)]++;for(m=0;255>m;m++)t[m]=p[m];t[255]=p[255]+p[256]}A.push({min:C,max:y,size:256,counts:t});for(m=b=p=d=0;256>m;m++)d+=t[m],p+=m*t[m];p/=d;for(m=0;256>m;m++)b+=t[m]*(m-p)**2;t=Math.sqrt(b/(d-1));d=(y-C)/256;m=(p+.5)*d+C;t*=d;D.push({min:C,max:y,avg:m,stddev:t})}return{statistics:D,histograms:A}};Y.extractBands=function(h,n){if(null==n||!n.length||!F(h))return h;const l=h.pixels.length;return n&&n.some(v=>v>=l)||1===l&&1===n.length&&0===n[0]||
l===n.length&&!n.some((v,u)=>v!==u)?h:new T({pixelType:h.pixelType,width:h.width,height:h.height,mask:h.mask,validPixelCount:h.validPixelCount,maskIsAlpha:h.maskIsAlpha,pixels:n.map(v=>h.pixels[v]),statistics:h.statistics&&n.map(v=>h.statistics[v])})};Y.getClipBounds=U;Y.lookupPixels=function(h,n){if(!F(h))return null;const {pixels:l,mask:v}=h,u=h.width*h.height,w=l.length;let C=n.lut;({offset:n}=n);let y,k;C&&1===C[0].length&&(C=l.map(()=>C));const m=[];let A,D,t;if(n)if(null==v)for(y=0;y<w;y++){A=
l[y];D=C[y];t=new Uint8Array(u);for(k=0;k<u;k++)t[k]=D[A[k]-n];m.push(t)}else for(y=0;y<w;y++){A=l[y];D=C[y];t=new Uint8Array(u);for(k=0;k<u;k++)v[k]&&(t[k]=D[A[k]-n]);m.push(t)}else if(null==v)for(y=0;y<w;y++){A=l[y];D=C[y];t=new Uint8Array(u);for(k=0;k<u;k++)t[k]=D[A[k]];m.push(t)}else for(y=0;y<w;y++){A=l[y];D=C[y];t=new Uint8Array(u);for(k=0;k<u;k++)v[k]&&(t[k]=D[A[k]]);m.push(t)}h=new T({width:h.width,height:h.height,pixels:m,mask:v,pixelType:"u8"});h.updateStatistics();return h};Y.mosaic=r;
Y.mosaicPixelData=function(h,n){if(!h||0===h.length)return null;var l=h.filter(D=>D.pixelBlock)[0];if(!l)return null;var v=(l.extent.xmax-l.extent.xmin)/l.pixelBlock.width;const u=(l.extent.ymax-l.extent.ymin)/l.pixelBlock.height,w=.01*Math.min(v,u),C=h.sort((D,t)=>Math.abs(D.extent.ymax-t.extent.ymax)>w?t.extent.ymax-D.extent.ymax:Math.abs(D.extent.xmin-t.extent.xmin)>w?D.extent.xmin-t.extent.xmin:0);var y=Math.min.apply(null,C.map(D=>D.extent.xmin));const k=Math.min.apply(null,C.map(D=>D.extent.ymin)),
m=Math.max.apply(null,C.map(D=>D.extent.xmax)),A=Math.max.apply(null,C.map(D=>D.extent.ymax));h={x:Math.round((n.xmin-y)/v),y:Math.round((A-n.ymax)/u)};y={width:Math.round((m-y)/v),height:Math.round((A-k)/u)};v={width:Math.round((n.xmax-n.xmin)/v),height:Math.round((n.ymax-n.ymin)/u)};if(Math.round(y.width/l.pixelBlock.width)*Math.round(y.height/l.pixelBlock.height)!==C.length||0>h.x||0>h.y||y.width<v.width||y.height<v.height)return null;l=C.map(D=>D.pixelBlock);l=r(l,y,h,v);return{extent:n,pixelBlock:l}};
Y.remapColor=function(h,n){if(!F(h))return null;h=h.clone();var {pixels:l}=h;const v=h.width*h.height,u=n.length,w=Math.floor(u/2),C=n[Math.floor(w)];l=l[0];let y,k,m,A,D,t,b=!1;const d=new Uint8Array(v),p=new Uint8Array(v),e=new Uint8Array(v);let a=h.mask;const g=4===n[0].mappedColor.length;a||(a=new Uint8Array(v),a.fill(g?255:1),h.mask=a);for(D=0;D<v;D++)if(a[D]){y=l[D];b=!1;t=w;k=C;m=0;for(A=u-1;1<A-m;){if(y===k.value){b=!0;break}y>k.value?m=t:A=t;t=Math.floor((m+A)/2);k=n[Math.floor(t)]}b||(y===
n[m].value?(k=n[m],b=!0):y===n[A].value?(k=n[A],b=!0):y<n[m].value?(b=!1,k=null):y>n[m].value&&(y<n[A].value?(k=n[m],b=!0):A===u-1?(b=!1,k=null):(k=n[A],b=!0)));b?(d[D]=k.mappedColor[0],p[D]=k.mappedColor[1],e[D]=k.mappedColor[2],a[D]=k.mappedColor[3]):d[D]=p[D]=e[D]=a[D]=0}h.pixels=[d,p,e];h.mask=a;h.pixelType="u8";h.maskIsAlpha=g;return h};Y.resampleByMajority=K;Y.setValidBoundary=function(h,n,l){if(!F(h))return null;const {width:v,height:u}=h,w=n.x;n=n.y;const C=l.width+w;l=l.height+n;if(0>w||
0>n||C>v||l>u||0===w&&0===n&&C===v&&l===u)return h;h.mask||(h.mask=new Uint8Array(v*u));const y=h.mask;for(let k=0;k<u;k++){const m=k*v;for(let A=0;A<v;A++)y[m+A]=k<n||k>=l||A<w||A>=C?0:1}h.updateStatistics();return h};Y.split=function(h,n,l){if(!F(h))return null;const {width:v,height:u}=n;let {width:w,height:C}=h;const y=new Map,k={x:0,y:0};l=null==l?1:1+l;for(let m=0;m<l;m++){const A=Math.ceil(w/v),D=Math.ceil(C/u);for(let t=0;t<D;t++){k.y=t*u;for(let b=0;b<A;b++){k.x=b*v;const d=S(h,k,n);y.set(`${m}/${t}/${b}`,
d)}}m<l-1&&(h=E(h));w=Math.round(w/2);C=Math.round(C/2)}return y};Y.stretch=function(h,n){if(!F(h))return null;h=h.clone();const {pixels:l,mask:v}=h,{minCutOff:u,maxCutOff:w,gamma:C}=n,y=n.outMin||0;n=n.outMax||255;const k=h.width*h.height,m=l.length;let A;let D,t,b;const d=n-y,p=[];for(A=0;A<m;A++)p[A]=w[A]-u[A];var e=C&&C.length>=m;const a=[];if(e)for(A=0;A<m;A++)a[A]=1<C[A]?2<C[A]?6.5+(C[A]-2)**2.5:6.5+100*(2-C[A])**4:1;if(e)if(null!=v)for(e=0;e<k;e++){if(v[e])for(A=0;A<m;A++)D=l[A][e],b=(D-u[A])/
p[A],t=1,1<C[A]&&(t-=(1/d)**(b*a[A])),l[A][e]=D<w[A]&&D>u[A]?Math.floor(t*d*b**(1/C[A]))+y:D>=w[A]?n:y}else for(e=0;e<k;e++)for(A=0;A<m;A++)D=l[A][e],b=(D-u[A])/p[A],t=1,1<C[A]&&(t-=(1/d)**(b*a[A])),l[A][e]=D<w[A]&&D>u[A]?Math.floor(t*d*b**(1/C[A]))+y:D>=w[A]?n:y;else if(null!=v)for(e=0;e<k;e++){if(v[e])for(A=0;A<m;A++)D=l[A][e],l[A][e]=D<w[A]&&D>u[A]?Math.floor((D-u[A])/p[A]*d)+y:D>=w[A]?n:y}else for(e=0;e<k;e++)for(A=0;A<m;A++)D=l[A][e],l[A][e]=D<w[A]&&D>u[A]?Math.floor((D-u[A])/p[A]*d)+y:D>=w[A]?
n:y;h.pixelType="u8";h.updateStatistics();return h};Object.defineProperty(Y,"__esModule",{value:!0})})},"esri/renderers/support/RasterSymbolizer":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/maybe ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../core/colorUtils ./colorRampUtils ../../layers/support/RasterInfo ../../layers/support/rasterFunctions/pixelUtils ../../layers/support/rasterFunctions/surfaceUtils".split(" "),
function(Y,T,R,U,r,K,M,O,H,S,E,F,h,n,l,v,u,w){function C(A,D){const {attributeTable:t,bandCount:b}=A;return!U.isSome(t)||1<b||D&&null==t.fields.find(d=>d.name.toLowerCase()===D.toLowerCase())?!1:!0}function y(A){const {bandCount:D,colormap:t}=A;return U.isSome(t)&&t.length&&1===D}const k=r.getLogger("esri.renderers.support.RasterSymbolizer"),m={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-3.4*1E39,3.4*1E39],
f64:[-Number.MAX_VALUE,Number.MAX_VALUE]};R=function(A){function D(b){return A.call(this,b)||this}Y._inheritsLoose(D,A);var t=D.prototype;t.bind=function(){const {rendererJSON:b}=this;if(!b)return!1;this.lookup={rendererJSON:{}};let d;switch(b.type){case "uniqueValue":d=this._updateUVRenderer(b);break;case "rasterColormap":d=this._updateColormapRenderer(b);break;case "rasterStretch":d=this._updateStretchRenderer(b);break;case "classBreaks":d=this._updateClassBreaksRenderer(b);break;case "rasterShadedRelief":d=
this._updateShadedReliefRenderer(b)}return d};t.symbolize=function(b){let d=b&&b.pixelBlock;if(!this.isValidPixelBlock(d))return d;if(b.simpleStretchParams&&"rasterStretch"===this.rendererJSON.type)return this.simpleStretch(d,b.simpleStretchParams);try{3<d.pixels.length&&(d=u.extractBands(d,[0,1,2]));let p;switch(this.rendererJSON.type){case "uniqueValue":case "rasterColormap":p=this._symbolize_colormap(d);break;case "classBreaks":p=this._symbolize_classBreaks(d);break;case "rasterStretch":p=this._symbolize_stretch(d,
b.bandIds);break;case "rasterShadedRelief":({extent:b}=b),p=this._symbolize_shadedRelief(d,{isGCS:b.spatialReference.isGeographic,resolution:{x:(b.xmax-b.xmin)/d.width,y:(b.ymax-b.ymin)/d.height}})}return p}catch(p){return k.error("symbolize",p.message),d}};t.simpleStretch=function(b,d){if(!this.isValidPixelBlock(b))return b;try{return 3<b.pixels.length&&(b=u.extractBands(b,[0,1,2])),u.stretch(b,d)}catch(p){return k.error("symbolize",p.message),b}};t.generateWebGLParameters=function(b){if(-1<["uniqueValue",
"rasterColormap","classBreaks"].indexOf(this.rendererJSON.type)){var d;const {indexedColormap:c,offset:f}=(null==(d=this.lookup)?void 0:d.colormapLut)||{};return{colormap:c,colormapOffset:f,type:"lut"}}const {pixelBlock:p,isGCS:e,resolution:a,bandIds:g}=b;({rendererJSON:b}=this);return"rasterStretch"===b.type?this.generateStretchWebGLParams(p,b,g):"rasterShadedRelief"===b.type?this.generateShadedReliefWebGLParams(b,e,a):null};t._isLUTChanged=function(b){if(!this.lookup||!this.lookup.rendererJSON)return!0;
if("colorRamp"in this.rendererJSON){const d=this.rendererJSON.colorRamp;if(b)return JSON.stringify(d)!==JSON.stringify(this.lookup.rendererJSON.colorRamp)}return JSON.stringify(this.rendererJSON)!==JSON.stringify(this.lookup.rendererJSON)};t._symbolize_colormap=function(b){return this._isLUTChanged()&&!this.bind()?b:u.colorize(b,this.lookup.colormapLut)};t._symbolize_classBreaks=function(b){const d=-1<["u8","u16","s8","s16"].indexOf(this.rasterInfo.pixelType);return this._isLUTChanged()&&!this.bind()?
b:d?u.colorize(b,this.lookup.colormapLut):u.remapColor(b,this.lookup.remapLut)};t._symbolize_stretch=function(b,d){const {pixelType:p,bandCount:e}=this.rasterInfo,a=this.rendererJSON,g=-1<["u8","u16","s8","s16"].indexOf(p);let c;var {dra:f}=a;var q=a.useGamma?a.gamma:null;if("histogramEqualization"===a.stretchType){var z=f?null:this.lookup.histogramLut;d=this.getStretchCutoff(a,b,d,!z);q=u.stretch(b,{...d,gamma:q});q=u.lookupPixels(q,{lut:f?d.histogramLut:z,offset:0})}else if(g){if(f)f=this.getStretchCutoff(a,
b,d),c=u.createStretchLUT({pixelType:p,...f,gamma:q});else{if(this._isLUTChanged()&&!this.bind())return b;c=this.lookup?this.lookup.stretchLut:null}if(!c)return b;1<e&&(null==d?void 0:d.length)===b.pixels.length&&(null==(z=c)?void 0:z.lut.length)===e&&(c={lut:d.map(B=>c.lut[B]),offset:c.offset});q=u.lookupPixels(b,c)}else f=this.getStretchCutoff(a,b,d),q=u.stretch(b,{...f,gamma:q});if(a.colorRamp){if(this._isLUTChanged(!0)&&!this.bind())return b;q=u.colorize(q,this.lookup.colormapLut)}return q};t._symbolize_shadedRelief=
function(b,d){var p,e,a=this.rendererJSON;d=w.hillshade(b,{...a,...d});if(!a.colorRamp||this._isLUTChanged(!0)&&!this.bind())return d;a=this.lookup?this.lookup.hsvMap:null;if(!a)return d;const g=null!=(p=null==(e=U.unwrap(this.rasterInfo.statistics))?void 0:e[0])?p:{min:0,max:8E3};w.tintHillshade(d,b,a,g);return d};t._updateUVRenderer=function(b){const {bandCount:d,attributeTable:p,statistics:e,pixelType:a}=this.rasterInfo,g=b.field1;if(!g)return!1;var c=-1<["u8","s8"].indexOf(a)&&e&&null!=e[0].min&&
null!=e[0].max;if(!(C(this.rasterInfo,g)||1===d&&c))return!1;const f=[];if(p){const q=p.fields.filter(z=>"value"===z.name.toLowerCase())[0];if(!q)return!1;p.features.forEach(z=>{var B,x=b.uniqueValueInfos.filter(J=>String(J.value)===String(z.attributes[g]))[0];(x=null==x?void 0:null==(B=x.symbol)?void 0:B.color)&&f.push([z.attributes[q.name]].concat(x))})}else{if("value"!==g.toLowerCase())return!1;b.uniqueValueInfos.forEach(q=>{var z;const B=null==q?void 0:null==(z=q.symbol)?void 0:z.color;B&&f.push([parseInt(""+
q.value,10)].concat(B))})}if(0===f.length)return!1;c=u.createColormapLUT({colormap:f});this.lookup={rendererJSON:b,colormapLut:c};return this.canRenderInWebGL=!0};t._updateColormapRenderer=function(b){if(!y(this.rasterInfo))return!1;var d=b.colormapInfos.map(p=>[p.value].concat(p.color)).sort((p,e)=>p[0]-e[0]);if(!d||0===d.length)return!1;d=u.createColormapLUT({colormap:d});this.lookup={rendererJSON:b,colormapLut:d};return this.canRenderInWebGL=!0};t._updateShadedReliefRenderer=function(b){if("elevation"!==
this.rasterInfo.dataType)return!1;if(b.colorRamp){var d=l.convertColorRampToColormap(b.colorRamp,256,!0);d=u.createColormapLUT({colormap:d});const p=[],e=d.indexedColormap;for(let a=0;a<e.length;a+=4){const g=n.toHSV({r:e[a],g:e[a+1],b:e[a+2]});p.push([g.h/60,g.s/100,255*g.v/100])}this.lookup={rendererJSON:b,colormapLut:d,hsvMap:p}}else this.lookup=null;return this.canRenderInWebGL=!0};t._updateClassBreaksRenderer=function(b){var d=-1<["u8","u16","s8","s16"].indexOf(this.rasterInfo.pixelType),p=b.classBreakInfos;
if(null==p||!p.length)return!1;p=p.sort((f,q)=>f.classMaxValue-q.classMaxValue);const e=p[p.length-1];var a=b.minValue;if(!d){d=[];for(var g=0;g<p.length;g++){var c;d.push({value:null!=(c=p[g].classMinValue)?c:a,mappedColor:p[g].symbol.color});a=p[g].classMaxValue}d.push({value:e.classMaxValue,mappedColor:e.symbol.color});this.lookup={rendererJSON:b,remapLut:d};this.canRenderInWebGL=!1;return!0}c=[];a=Math.floor(b.minValue);for(d=0;d<p.length;d++){for(g=p[d];a<g.classMaxValue;a++)c.push([a].concat(g.symbol.color));
a=Math.ceil(g.classMaxValue)}e.classMaxValue===a&&c.push([e.classMaxValue].concat(e.symbol.color));p=u.createColormapLUT({colormap:c,fillUnspecified:!1});this.lookup={rendererJSON:b,colormapLut:p};return this.canRenderInWebGL=!0};t._isHistogramRequired=function(b){return"percentClip"===b||"histogramEqualization"===b};t._updateStretchRenderer=function(b){let {stretchType:d,dra:p}=b;if(!("none"===d||b.statistics||this.rasterInfo.statistics||p))return!1;var e=U.unwrap(b.histograms||this.rasterInfo.histograms);
!this._isHistogramRequired(b.stretchType)||null!=e&&e.length||p||(d="minMax");const {gamma:a,useGamma:g,colorRamp:c}=b;var f=this.rasterInfo.pixelType;const q=!p&&-1<["u8","u16","s8","s16"].indexOf(f);"histogramEqualization"===d?(f=e.map(z=>u.createHistogramEqualizationLUT(z)),this.lookup={rendererJSON:b,histogramLut:f}):q&&(e=this.getStretchCutoff(b),f=u.createStretchLUT({pixelType:f,...e,gamma:g?a:null}),this.lookup={rendererJSON:b,stretchLut:f});c&&(f=l.convertColorRampToColormap(c,256,!0),this.lookup||
(this.lookup={rendererJSON:b}),this.lookup.colormapLut=u.createColormapLUT({colormap:f}),this.lookup.rendererJSON=b);return this.canRenderInWebGL=!0};t.getStretchCutoff=function(b,d,p,e){var a,g=b.stretchType;if(b.dra)if("minMax"===g&&d.statistics)var c=d.statistics.map(N=>[N.minValue,N.maxValue,0,0]);else{var f=u.estimateStatisticsHistograms(d);c=f.statistics;f=f.histograms}else{var q;c=0<(null==(q=b.statistics)?void 0:q.length)?b.statistics:U.unwrap(this.rasterInfo.statistics);f=b.histograms||U.unwrap(this.rasterInfo.histograms)}!this._isHistogramRequired(g)||
null!=(a=f)&&a.length||(g="minMax");var z=c||f?(c||f).length:this.rasterInfo.bandCount;a=[];q=[];let B;let x,J,I;c&&!Array.isArray(c[0])&&(c=c.map(N=>[N.min,N.max,N.avg,N.stddev]));switch(g){case "none":c=m[this.rasterInfo.pixelType]||m.f32;for(d=0;d<z;d++)a[d]=c[0],q[d]=c[1];break;case "minMax":for(d=0;d<z;d++)a[d]=c[d][0],q[d]=c[d][1];break;case "standardDeviation":for(d=0;d<z;d++)a[d]=c[d][2]-b.numberOfStandardDeviations*c[d][3],q[d]=c[d][2]+b.numberOfStandardDeviations*c[d][3],a[d]<c[d][0]&&(a[d]=
c[d][0]),q[d]>c[d][1]&&(q[d]=c[d][1]);break;case "histogramEqualization":for(d=0;d<z;d++)a[d]=f[d].min,q[d]=f[d].max;break;case "percentClip":for(d=0;d<f.length;d++){c=f[d];x=new Uint32Array(c.size);var G=c.counts;B=0;z=(c.max-c.min)/c.size;J=-.5===c.min&&1===z?.5:0;for(I=0;I<c.size;I++)B+=G[I],x[I]=B;G=b.minPercent*B/100;for(I=0;I<c.size;I++)if(x[I]>G){a[d]=c.min+z*(I+J);break}G=(1-b.maxPercent/100)*B;for(I=c.size-2;0<=I;I--)if(x[I]<G){q[d]=c.min+z*(I+2-J);break}}break;default:for(d=0;d<z;d++)a[d]=
c[d][0],q[d]=c[d][1]}let L;"histogramEqualization"===g?(g=f[0].size||256,b=0,e&&(L=f.map(N=>u.createHistogramEqualizationLUT(N)))):(g=b.max||255,b=b.min||0);return this.getSelectedBandCutoffs({minCutOff:a,maxCutOff:q,outMax:g,outMin:b,histogramLut:L},p)};t.getSelectedBandCutoffs=function(b,d){if(null==d||0===d.length)return b;const p=Math.max.apply(null,d),{minCutOff:e,maxCutOff:a,outMin:g,outMax:c,histogramLut:f}=b;return e.length===d.length||e.length<=p?b:{minCutOff:d.map(q=>e[q]),maxCutOff:d.map(q=>
a[q]),histogramLut:f?d.map(q=>f[q]):null,outMin:g,outMax:c}};t.generateStretchWebGLParams=function(b,d,p){var e;let a=null,g=null;var c=this.lookup&&this.lookup.colormapLut;d.colorRamp&&c&&(a=c.indexedColormap,g=c.offset);"histogramEqualization"===d.stretchType&&(d={...d,stretchType:"minMax"});({gamma:c}=d);const f=!!(d.useGamma&&c&&c.some(I=>1!==I)),{minCutOff:q,maxCutOff:z,outMin:B,outMax:x}=this.getStretchCutoff(d,b,p);d=null==(e=b)?void 0:e.getPlaneCount();2===d&&(b=b.clone(),b.statistics=[b.statistics[0]],
b.pixels=[b.pixels[0]]);b=Math.min(3,(null==p?void 0:p.length)||d||this.rasterInfo.bandCount);p=new Float32Array(b);e=a||f?1:255;for(d=0;d<b;d++)p[d]=(x-B)/(z[d]-q[d])/e;const J=new Float32Array(b);if(f)for(d=0;d<b;d++)J[d]=1<c[d]?2<c[d]?6.5+(c[d]-2)**2.5:6.5+100*(2-c[d])**4:1;return{bandCount:b,outMin:B/e,outMax:x/e,minCutOff:q,maxCutOff:z,factor:p,useGamma:f,gamma:f?c:[1,1,1],gammaCorrection:f?J:[1,1,1],colormap:a,colormapOffset:g,type:"stretch"}};t.generateShadedReliefWebGLParams=function(b,d,
p){var e,a,g;let c=null,f=null;const q=this.lookup&&this.lookup.colormapLut;b.colorRamp&&q&&(c=q.indexedColormap,f=q.offset);d=w.calculateHillshadeParams({...b,isGCS:d,resolution:p});p=null==(e=U.unwrap(this.rasterInfo.statistics))?void 0:e[0];return{...d,minValue:null!=(a=p.min)?a:0,maxValue:null!=(g=p.max)?g:8E3,hillshadeType:"traditional"===b.hillshadeType?0:1,type:"hillshade",colormap:c,colormapOffset:f}};t.isValidPixelBlock=function(b){return!!(b&&b.pixels&&0<b.pixels.length&&0!==b.validPixelCount)};
return D}(h.JSONSupport);T.__decorate([M.property({json:{write:!0}})],R.prototype,"rendererJSON",void 0);T.__decorate([M.property({type:v,json:{write:!0}})],R.prototype,"rasterInfo",void 0);T.__decorate([M.property({json:{write:!0}})],R.prototype,"lookup",void 0);T.__decorate([M.property()],R.prototype,"canRenderInWebGL",void 0);return R=T.__decorate([H.subclass("esri.renderers.support.RasterSymbolizer")],R)})},"esri/renderers/support/colorRampUtils":function(){define(["exports","../../Color","../../core/colorUtils"],
function(Y,T,R){function U(O,H){if(!O||!H||O.length!==H.length)return!1;for(let S=0;S<O.length;S++)if(O[S]>H[S]+2||O[S]<H[S]-2)return!1;return!0}function r(O,H){if(O){H=H?H:K;var S=null,E;"algorithmic"===O.type?H.some(F=>{if(U(O.fromColor.toRgb(),F.fromColor)&&U(O.toColor.toRgb(),F.toColor))return S=F.id,!0}):"multipart"===O.type&&H.some(F=>{if(O.colorRamps&&F.colorRamps&&O.colorRamps.length===F.colorRamps.length&&(E=O.colorRamps,!F.colorRamps.some((h,n)=>{if(!U(E[n].fromColor.toRgb(),(new T(h.fromColor)).toRgb())||
!U(E[n].toColor.toRgb(),(new T(h.toColor)).toRgb()))return!0}))){if(S)return!0;S=F.id}});return S}}const K=[{id:"aspect_predefined",type:"multipart",colorRamps:[{fromColor:[190,190,190],toColor:[255,45,8]},{fromColor:[255,45,8],toColor:[255,181,61]},{fromColor:[255,181,61],toColor:[255,254,52]},{fromColor:[255,254,52],toColor:[0,251,50]},{fromColor:[0,251,50],toColor:[255,254,52]},{fromColor:[0,253,255],toColor:[0,181,255]},{fromColor:[0,181,255],toColor:[26,35,253]},{fromColor:[26,35,253],toColor:[255,
57,251]},{fromColor:[255,57,251],toColor:[255,45,8]}]},{id:"blackToWhite_predefined",fromColor:[0,0,0],toColor:[255,255,255]},{id:"blueBright_predefined",fromColor:[204,204,255],toColor:[0,0,224]},{id:"blueLightToDark_predefined",fromColor:[211,229,232],toColor:[46,100,140]},{id:"blueGreenBright_predefined",fromColor:[203,245,234],toColor:[48,207,146]},{id:"blueGreenLightToDark_predefined",fromColor:[216,242,237],toColor:[21,79,74]},{id:"brownLightToDark_predefined",fromColor:[240,236,170],toColor:[102,
72,48]},{id:"brownToBlueGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[156,85,31],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[33,130,145]}]},{id:"brownToBlueGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[110,70,45],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[48,100,102]}]},{id:"coefficientBias_predefined",fromColor:[214,214,255],toColor:[0,57,148]},{id:"coldToHotDiverging_predefined",type:"multipart",colorRamps:[{fromColor:[69,
117,181],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[214,47,39]}]},{id:"conditionNumber_predefined",type:"multipart",colorRamps:[{fromColor:[0,97,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,34,0]}]},{id:"cyanToPurple_predefined",type:"multipart",colorRamps:[{fromColor:[0,245,245],toColor:[0,0,245]},{fromColor:[0,0,245],toColor:[245,0,245]}]},{id:"cyanLightToBlueDark_predefined",type:"multipart",colorRamps:[{fromColor:[182,237,240],toColor:[31,131,224]},{fromColor:[31,
131,224],toColor:[9,9,145]}]},{id:"distance_predefined",fromColor:[255,200,0],toColor:[0,0,255]},{id:"elevation1_predefined",type:"multipart",colorRamps:[{fromColor:[175,240,233],toColor:[255,255,179]},{fromColor:[255,255,179],toColor:[0,128,64]},{fromColor:[0,128,64],toColor:[252,186,3]},{fromColor:[252,186,3],toColor:[128,0,0]},{fromColor:[120,0,0],toColor:[105,48,13]},{fromColor:[105,48,13],toColor:[171,171,171]},{fromColor:[171,171,171],toColor:[255,252,255]}]},{id:"elevation2_predefined",type:"multipart",
colorRamps:[{fromColor:[118,219,211],toColor:[255,255,199]},{fromColor:[255,255,199],toColor:[255,255,128]},{fromColor:[255,255,128],toColor:[217,194,121]},{fromColor:[217,194,121],toColor:[135,96,38]},{fromColor:[135,96,38],toColor:[150,150,181]},{fromColor:[150,150,181],toColor:[181,150,181]},{fromColor:[181,150,181],toColor:[255,252,255]}]},{id:"errors_predefined",fromColor:[255,235,214],toColor:[196,10,10]},{id:"grayLightToDark_predefined",fromColor:[219,219,219],toColor:[69,69,69]},{id:"greenBright_predefined",
fromColor:[204,255,204],toColor:[14,204,14]},{id:"greenLightToDark_predefined",fromColor:[220,245,233],toColor:[34,102,51]},{id:"greenToBlue_predefined",type:"multipart",colorRamps:[{fromColor:[32,204,16],toColor:[0,242,242]},{fromColor:[0,242,242],toColor:[2,33,227]}]},{id:"orangeBright_predefined",fromColor:[255,235,204],toColor:[240,118,5]},{id:"orangeLightToDark_predefined",fromColor:[250,233,212],toColor:[171,65,36]},{id:"partialSpectrum_predefined",type:"multipart",colorRamps:[{fromColor:[242,
241,162],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]},{fromColor:[252,3,69],toColor:[176,7,237]},{fromColor:[176,7,237],toColor:[2,29,173]}]},{id:"partialSpectrum1Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[135,38,38],toColor:[240,149,12]},{fromColor:[240,149,12],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[74,80,181]},{fromColor:[74,80,181],toColor:[39,32,122]}]},{id:"partialSpectrum2Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[115,
77,42],toColor:[201,137,52]},{fromColor:[201,137,52],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[91,63,176]},{fromColor:[91,63,176],toColor:[81,13,97]}]},{id:"pinkToYellowGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[158,30,113],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[99,110,45]}]},{id:"pinkToYellowGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,47,73],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[22,59,
15]}]},{id:"precipitation_predefined",type:"multipart",colorRamps:[{fromColor:[194,82,60],toColor:[237,161,19]},{fromColor:[237,161,19],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,219,0]},{fromColor:[0,219,0],toColor:[32,153,143]},{fromColor:[32,153,143],toColor:[11,44,122]}]},{id:"prediction_predefined",type:"multipart",colorRamps:[{fromColor:[40,146,199],toColor:[250,250,100]},{fromColor:[250,250,100],toColor:[232,16,20]}]},{id:"purpleBright_predefined",fromColor:[255,204,255],toColor:[199,
0,199]},{id:"purpleToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[77,32,150],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[20,122,11]}]},{id:"purpleToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[67,14,89],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[24,79,15]}]},{id:"purpleBlueBright_predefined",fromColor:[223,184,230],toColor:[112,12,242]},{id:"purpleBlueLightToDark_predefined",fromColor:[229,213,242],toColor:[93,44,112]},
{id:"purpleRedBright_predefined",fromColor:[255,204,225],toColor:[199,0,99]},{id:"purpleRedLightToDark_predefined",fromColor:[250,215,246],toColor:[143,17,57]},{id:"redBright_predefined",fromColor:[255,204,204],toColor:[219,0,0]},{id:"redLightToDark_predefined",fromColor:[255,224,224],toColor:[143,10,10]},{id:"redToBlueDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[196,69,57],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[48,95,207]}]},{id:"redToBlueDivergingDark_predefined",
type:"multipart",colorRamps:[{fromColor:[107,13,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[13,53,97]}]},{id:"redToGreen_predefined",type:"multipart",colorRamps:[{fromColor:[245,0,0],toColor:[245,245,0]},{fromColor:[245,245,0],toColor:[0,245,0]}]},{id:"redToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[186,20,20],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[54,145,33]}]},{id:"redToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,
21,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[16,69,16]}]},{id:"slope_predefined",type:"multipart",colorRamps:[{fromColor:[56,168,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]},{id:"spectrumFullBright_predefined",type:"multipart",colorRamps:[{fromColor:[255,0,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,0,255]}]},{id:"spectrumFullDark_predefined",type:"multipart",colorRamps:[{fromColor:[153,0,0],toColor:[153,
153,0]},{fromColor:[153,153,0],toColor:[0,153,153]},{fromColor:[0,153,153],toColor:[0,0,153]}]},{id:"spectrumFullLight_predefined",type:"multipart",colorRamps:[{fromColor:[255,153,153],toColor:[255,255,153]},{fromColor:[255,255,153],toColor:[153,255,255]},{fromColor:[153,255,255],toColor:[153,153,255]}]},{id:"surface_predefined",type:"multipart",colorRamps:[{fromColor:[112,153,89],toColor:[242,238,162]},{fromColor:[242,238,162],toColor:[242,206,133]},{fromColor:[242,206,133],toColor:[194,140,124]},
{fromColor:[194,140,124],toColor:[255,242,255]}]},{id:"temperature_predefined",type:"multipart",colorRamps:[{fromColor:[255,252,255],toColor:[255,0,255]},{fromColor:[255,0,255],toColor:[0,0,255]},{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,255,0]},{fromColor:[0,255,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,128,0]},{fromColor:[255,128,0],toColor:[128,0,0]}]},{id:"whiteToBlack_predefined",fromColor:[255,255,255],toColor:[0,0,0]},{id:"yellowToDarkRed_predefined",
type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[242,167,46]},{fromColor:[242,167,46],toColor:[107,0,0]}]},{id:"yellowToGreenToDarkBlue_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[56,224,9]},{fromColor:[56,224,9],toColor:[26,147,171]},{fromColor:[26,147,171],toColor:[12,16,120]}]},{id:"yellowToRed_predefined",fromColor:[245,245,0],toColor:[255,0,0]},{id:"yellowGreenBright_predefined",fromColor:[236,252,204],toColor:[157,204,16]},{id:"yellowGreenLightToDark_predefined",
fromColor:[215,240,175],toColor:[96,107,45]}],M={aspect_predefined:"Aspect",blackToWhite_predefined:"Black to White",blueBright_predefined:"Blue Bright",blueLightToDark_predefined:"Blue Light to Dark",blueGreenBright_predefined:"Blue-Green Bright",blueGreenLightToDark_predefined:"Blue-Green Light to Dark",brownLightToDark_predefined:"Brown Light to Dark",brownToBlueGreenDivergingBright_predefined:"Brown to Blue Green Diverging, Bright",brownToBlueGreenDivergingDark_predefined:"Brown to Blue Green Diverging, Dark",
coefficientBias_predefined:"Coefficient Bias",coldToHotDiverging_predefined:"Cold to Hot Diverging",conditionNumber_predefined:"Condition Number",cyanToPurple_predefined:"Cyan to Purple",cyanLightToBlueDark_predefined:"Cyan-Light to Blue-Dark",distance_predefined:"Distance",elevation1_predefined:"Elevation #1",elevation2_predefined:"Elevation #2",errors_predefined:"Errors",grayLightToDark_predefined:"Gray Light to Dark",greenBright_predefined:"Green Bright",greenLightToDark_predefined:"Green Light to Dark",
greenToBlue_predefined:"Green to Blue",orangeBright_predefined:"Orange Bright",orangeLightToDark_predefined:"Orange Light to Dark",partialSpectrum_predefined:"Partial Spectrum",partialSpectrum1Diverging_predefined:"Partial Spectrum 1 Diverging",partialSpectrum2Diverging_predefined:"Partial Spectrum 2 Diverging",pinkToYellowGreenDivergingBright_predefined:"Pink to YellowGreen Diverging, Bright",pinkToYellowGreenDivergingDark_predefined:"Pink to YellowGreen Diverging, Dark",precipitation_predefined:"Precipitation",
prediction_predefined:"Prediction",purpleBright_predefined:"Purple Bright",purpleToGreenDivergingBright_predefined:"Purple to Green Diverging, Bright",purpleToGreenDivergingDark_predefined:"Purple to Green Diverging, Dark",purpleBlueBright_predefined:"Purple-Blue Bright",purpleBlueLightToDark_predefined:"Purple-Blue Light to Dark",purpleRedBright_predefined:"Purple-Red Bright",purpleRedLightToDark_predefined:"Purple-Red Light to Dark",redBright_predefined:"Red Bright",redLightToDark_predefined:"Red Light to Dark",
redToBlueDivergingBright_predefined:"Red to Blue Diverging, Bright",redToBlueDivergingDark_predefined:"Red to Blue Diverging, Dark",redToGreen_predefined:"Red to Green",redToGreenDivergingBright_predefined:"Red to Green Diverging, Bright",redToGreenDivergingDark_predefined:"Red to Green Diverging, Dark",slope_predefined:"Slope",spectrumFullBright_predefined:"Spectrum-Full Bright",spectrumFullDark_predefined:"Spectrum-Full Dark",spectrumFullLight_predefined:"Spectrum-Full Light",surface_predefined:"Surface",
temperature_predefined:"Temperature",whiteToBlack_predefined:"White to Black",yellowToDarkRed_predefined:"Yellow to Dark Red",yellowToGreenToDarkBlue_predefined:"Yellow to Green to Dark Blue",yellowToRed_predefined:"Yellow to Red",yellowGreenBright_predefined:"Yellow-Green Bright",yellowGreenLightToDark_predefined:"Yellow-Green Light to Dark"};Y.PREDEFINED_COLOR_RAMP_NAME_MAP=M;Y.PREDEFINED_JSON_COLOR_RAMPS=K;Y.convertColorRampToColormap=function(O,H,S=!1){if(O&&H&&!(1>H)){var E="toJSON"in O?O.toJSON():
O,F="multipart"===E.type?E.colorRamps.length:1;O=[];var h=[],n,l,v,u=0;if(1===H){var w="multipart"===E.type?E.colorRamps[0].fromColor:E.fromColor;h.push([0].concat(w));return h}for(let y=0;y<F;y++)O[y]={start:null,end:null},O[y].start=u,O[y].end=u+1/F,u=O[y].end;for(let y=0;y<H;y++){var C=y/(H-1);O.forEach((k,m)=>{if(C>=k.start&&(C<k.end||y===H-1&&m===F-1)){v=(C-k.start)/(k.end-k.start);"multipart"===E.type?(w=E.colorRamps[m].fromColor,n=E.colorRamps[m].toColor):(w=E.fromColor,n=E.toColor);if(0===
y)h.push([y].concat(w.slice(0,3)));else if(y===H-1)h.push([y].concat(n.slice(0,3)));else{var A={r:n[0],g:n[1],b:n[2]};k=v;m=R.toLAB({r:w[0],g:w[1],b:w[2]});A=R.toLAB(A);l=R.toRGB({l:m.l*(1-k)+k*A.l,a:m.a*(1-k)+k*A.a,b:m.b*(1-k)+k*A.b});h.push([y,l.r,l.g,l.b])}k=null!=w[3]?1<w[3]?w[3]/255:w[3]:1;m=null!=n[3]?1<n[3]?n[3]/255:n[3]:1;S&&h[y].push(Math.min(255,Math.round(255*(k*(1-v)+m*v))))}})}return h}};Y.getColorRampId=r;Y.getColorRampName=function(O){return(O=r(O))?M[O]:null};Object.defineProperty(Y,
"__esModule",{value:!0})})},"esri/layers/support/RasterInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../geometry/Extent".split(" "),function(Y,T,R,U,r,K,M,O,H,S,E,F,h){R=function(n){function l(v){v=
n.call(this,v)||this;v.attributeTable=null;v.bandCount=null;v.colormap=null;v.extent=null;v.format=void 0;v.height=null;v.width=null;v.histograms=null;v.keyProperties={};v.multidimensionalInfo=null;v.noDataValue=null;v.pixelSize=null;v.pixelType=null;v.isPseudoSpatialReference=!1;v.spatialReference=null;v.statistics=null;v.storageInfo=null;v.transform=null;return v}Y._inheritsLoose(l,n);Y._createClass(l,[{key:"dataType",get:function(){const v=this.keyProperties&&this.keyProperties.DataType;return v?
v.toLowerCase():"generic"}},{key:"nativeExtent",get:function(){return this._get("nativeExtent")||this.extent},set:function(v){v&&this._set("nativeExtent",v)}},{key:"nativePixelSize",get:function(){if(null==this.transform)return this.pixelSize;const v=this.nativeExtent;return{x:v.width/this.width,y:v.height/this.height}}}]);return l}(F.JSONSupport);T.__decorate([K.property({json:{write:!0}})],R.prototype,"attributeTable",void 0);T.__decorate([K.property({json:{write:!0}})],R.prototype,"bandCount",
void 0);T.__decorate([K.property({json:{write:!0}})],R.prototype,"colormap",void 0);T.__decorate([K.property({type:String,readOnly:!0})],R.prototype,"dataType",null);T.__decorate([K.property({type:h,json:{write:!0}})],R.prototype,"extent",void 0);T.__decorate([K.property({type:h,json:{write:!0}})],R.prototype,"nativeExtent",null);T.__decorate([K.property({json:{write:!0}})],R.prototype,"nativePixelSize",null);T.__decorate([K.property({json:{write:!0}})],R.prototype,"format",void 0);T.__decorate([K.property({json:{write:!0}})],
R.prototype,"height",void 0);T.__decorate([K.property({json:{write:!0}})],R.prototype,"width",void 0);T.__decorate([K.property({json:{write:!0}})],R.prototype,"histograms",void 0);T.__decorate([K.property({json:{write:!0}})],R.prototype,"keyProperties",void 0);T.__decorate([K.property({json:{write:!0}})],R.prototype,"multidimensionalInfo",void 0);T.__decorate([K.property()],R.prototype,"noDataValue",void 0);T.__decorate([K.property({json:{write:!0}})],R.prototype,"pixelSize",void 0);T.__decorate([K.property({json:{write:!0}})],
R.prototype,"pixelType",void 0);T.__decorate([K.property()],R.prototype,"isPseudoSpatialReference",void 0);T.__decorate([K.property({json:{write:!0}})],R.prototype,"spatialReference",void 0);T.__decorate([K.property({json:{write:!0}})],R.prototype,"statistics",void 0);T.__decorate([K.property({json:{write:!0}})],R.prototype,"storageInfo",void 0);T.__decorate([K.property({json:{write:!0}})],R.prototype,"transform",void 0);return R=T.__decorate([O.subclass("esri.layers.support.RasterInfo")],R)})},"esri/layers/support/rasterFunctions/surfaceUtils":function(){define(["exports",
"../PixelBlock"],function(Y,T){function R(r){let {altitude:K,azimuth:M}=r;const {hillshadeType:O,pixelSizePower:H,pixelSizeFactor:S,scalingType:E,isGCS:F,resolution:h}=r;var n="multi-directional"===O?2*r.zFactor:r.zFactor;const {x:l,y:v}=h;r=n/(8*l);var u=n/(8*v);F&&.001<n&&(r/=111E3,u/=111E3);"adjusted"===E&&(F?(r=111E3*l,u=111E3*v,r=(n+r**H*S)/(8*r),u=(n+u**H*S)/(8*u)):(r=(n+l**H*S)/(8*l),u=(n+v**H*S)/(8*v)));var w=(90-K)*Math.PI/180;n=Math.cos(w);let C=(360-M+90)*Math.PI/180,y=Math.sin(w)*Math.cos(C);
w=Math.sin(w)*Math.sin(C);const k=[315,270,225,360,180,0],m=[60,60,60,60,60,90];var A=new Float32Array([3,5,3,2,1,4]);const D=A.reduce((e,a)=>e+a);A=A.map(e=>e/D);const t="multi-directional"===O?k.length:1,b=new Float32Array(6),d=new Float32Array(6),p=new Float32Array(6);if("multi-directional"===O)for(let e=0;e<t;e++)K=m[e],M=k[e],w=(90-K)*Math.PI/180,n=Math.cos(w),C=(360-M+90)*Math.PI/180,y=Math.sin(w)*Math.cos(C),w=Math.sin(w)*Math.sin(C),b[e]=n,d[e]=y,p[e]=w;else b.fill(n),d.fill(y),p.fill(w);
return{resolution:h,factor:[r,u],sinZcosA:y,sinZsinA:w,cosZ:n,sinZcosAs:d,sinZsinAs:p,cosZs:b,weights:A,hillshadeType:["traditional","multi-directional"].indexOf(O)}}const U=function(r){return r&&"esri.layers.support.PixelBlock"===r.declaredClass&&r.pixels&&0<r.pixels.length};Y.calculateHillshadeParams=R;Y.hillshade=function(r,K){if(!U(r))return r;const {width:M,height:O,mask:H}=r,S=new Uint8Array(M*O);H&&S.set(H);const {factor:E,sinZcosA:F,sinZsinA:h,cosZ:n,sinZcosAs:l,sinZsinAs:v,cosZs:u,weights:w}=
R(K),[C,y]=E;var {hillshadeType:k}=K;const m=r.pixels[0];K=new Uint8Array(M*O);let A;for(let g=1;g<O-1;g++){const c=g*M;for(let f=1;f<M-1;f++)if(H&&!H[c+f])K[c+f]=0;else{var D=8;if(H&&(D=H[c-M+f-1]+H[c-M+f]+H[c-M+f+1]+H[c+f-1]+H[c+f+1]+H[c+M+f-1]+H[c+M+f]+H[c+M+f+1],7>D)){K[c+f]=0;S[c+f]=0;continue}if(7===D){var t=H[c-M+f-1]?m[c-M+f-1]:m[c+f];var b=H[c-M+f]?m[c-M+f]:m[c+f];var d=H[c-M+f+1]?m[c-M+f+1]:m[c+f];D=H[c+f-1]?m[c+f-1]:m[c+f];A=H[c+f+1]?m[c+f+1]:m[c+f];var p=H[c+M+f-1]?m[c+M+f-1]:m[c+f];var e=
H[c+M+f]?m[c+M+f]:m[c+f];var a=H[c+M+f+1]?m[c+M+f+1]:m[c+f]}else t=m[c-M+f-1],b=m[c-M+f],d=m[c-M+f+1],D=m[c+f-1],A=m[c+f+1],p=m[c+M+f-1],e=m[c+M+f],a=m[c+M+f+1];D=(d+A+A+a-(t+D+D+p))*C;t=(p+e+e+a-(t+b+b+d))*y;b=Math.sqrt(1+D*D+t*t);d=0;if("traditional"===k)D=255*(n+h*t-F*D)/b,0>D&&(D=0),d=D;else for(p=v.length,e=0;e<p;e++)a=255*(u[e]+v[e]*t-l[e]*D)/b,0>a&&(a=0),d+=a*w[e];K[c+f]=d&255}}for(k=0;k<O;k++)K[k*M]=K[k*M+1],K[(k+1)*M-1]=K[(k+1)*M-2];for(k=1;k<M-1;k++)K[k]=K[k+M],K[k+(O-1)*M]=K[k+(O-2)*M];
return new T({width:M,height:O,pixels:[K],mask:H?S:null,pixelType:"u8",validPixelCount:r.validPixelCount,statistics:[{minValue:0,maxValue:255}]})};Y.tintHillshade=function(r,K,M,O){if(U(r)&&U(K)){var {min:H,max:S}=O;O=r.pixels[0];var {pixels:E,mask:F}=K;K=E[0];var h=255.00001/(S-H),n=new Uint8ClampedArray(K.length),l=new Uint8ClampedArray(K.length),v=new Uint8ClampedArray(K.length),u=M.length-1;for(let y=0;y<K.length;y++){if(F&&0===F[y])continue;var w=Math.floor((K[y]-H)*h);const [k,m]=M[0>w?0:w>
u?u:w];var C=O[y];w=C*m;const A=w*(1-Math.abs(k%2-1));C-=w;switch(Math.floor(k)){case 0:n[y]=w+C;l[y]=A+C;v[y]=C;break;case 1:n[y]=A+C;l[y]=w+C;v[y]=C;break;case 2:n[y]=C;l[y]=w+C;v[y]=A+C;break;case 3:n[y]=C;l[y]=A+C;v[y]=w+C;break;case 4:n[y]=A+C;l[y]=C;v[y]=w+C;break;case 5:case 6:n[y]=w+C,l[y]=C,v[y]=A+C}}r.pixels=[n,l,v];r.updateStatistics()}};Object.defineProperty(Y,"__esModule",{value:!0})})},"*noref":1}});
define("../../geometry/Extent ../../geometry ./PixelBlock ./rasterFormats/RasterCodec ./rasterFunctions/pixelUtils ../../renderers/support/RasterSymbolizer".split(" "),function(Y,T,R,U,r,K){return function(){function M(){}var O=M.prototype;O.decode=async function(H){return(H=await U.decode(H.data,H.options))&&H.toJSON()};O.symbolize=function(H){H.pixelBlock=R.fromJSON(H.pixelBlock);H.extent=H.extent?Y.fromJSON(H.extent):null;H=this.symbolizer.symbolize(H);return Promise.resolve(H&&H.toJSON())};O.updateSymbolizer=
async function(H){var S;this.symbolizer=K.fromJSON(H.symbolizerJSON);H.histograms&&"rasterStretch"===(null==(S=this.symbolizer)?void 0:S.rendererJSON.type)&&(this.symbolizer.rendererJSON.histograms=H.histograms)};O.stretch=function(H){H=this.symbolizer.simpleStretch(R.fromJSON(H.srcPixelBlock),H.stretchParams);return Promise.resolve(H&&H.toJSON())};O.estimateStatisticsHistograms=function(H){H=r.estimateStatisticsHistograms(R.fromJSON(H.srcPixelBlock));return Promise.resolve(H)};O.split=function(H){const S=
r.split(R.fromJSON(H.srcPixelBlock),H.tileSize,H.maximumPyramidLevel);S&&S.forEach((E,F)=>{S.set(F,null==E?void 0:E.toJSON())});return Promise.resolve(S)};O.mosaicAndTransform=async function(H){var S=H.srcPixelBlocks.map(E=>E?new R(E):null);S=r.mosaic(S,H.srcMosaicSize);return H.coefs?(H=r.approximateTransform(S,H.destDimension,H.coefs,H.sampleSpacing,H.interpolation))&&H.toJSON():S&&S.toJSON()};return M}()});