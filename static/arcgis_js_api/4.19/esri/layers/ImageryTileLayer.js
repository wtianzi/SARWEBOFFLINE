// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.19/esri/copyright.txt for details.
//>>built
require({cache:{"esri/rasterRenderers":function(){define("exports ./core/Warning ./renderers/ClassBreaksRenderer ./renderers/RasterColormapRenderer ./renderers/RasterShadedReliefRenderer ./renderers/RasterStretchRenderer ./renderers/UniqueValueRenderer ./renderers/VectorFieldRenderer".split(" "),function(R,n,L,X,A,M,N,U){function W(r,k){if(!r)return null;if("classBreaks"===r.type&&r.classificationMethod){var g=r.authoringInfo||{classificationMethod:""};g.classificationMethod=r.classificationMethod;
r.authoringInfo=g}g=r?D[r.type]||null:null;if(g)return g=new g,g.read(r,k),g;k&&k.messages&&r&&k.messages.push(new n("renderer:unsupported","Renderers of type '"+(r.type||"unknown")+"' are not supported",{definition:r,context:k}));return null}const I={key:"type",base:null,typeMap:{"unique-value":N,"class-breaks":L,"raster-colormap":X,"raster-stretch":M,"vector-field":U,"raster-shaded-relief":A}},z={...I,typeMap:{...I.typeMap}};delete z.typeMap["vector-field"];const D={uniqueValue:N,classBreaks:L,
rasterStretch:M,rasterColormap:X,vectorField:U,rasterShadedRelief:A};R.ClassBreaksRenderer=L;R.RasterColormapRenderer=X;R.RasterShadedReliefRenderer=A;R.RasterStretchRenderer=M;R.UniqueValueRenderer=N;R.VectorFieldRenderer=U;R.fromJSON=function(r,k){return W(r,k)};R.rasterRendererTypes=I;R.read=W;R.websceneRasterRendererTypes=z;Object.defineProperty(R,"__esModule",{value:!0})})},"esri/renderers/RasterColormapRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/JSONSupport ./support/ColormapInfo ./support/colorRampUtils".split(" "),
function(R,n,L,X,A,M,N,U,W,I,z,D,r,k){var g;L=g=function(m){function p(E){E=m.call(this,E)||this;E.colormapInfos=null;E.type="raster-colormap";return E}R._inheritsLoose(p,m);p.createFromColormap=function(E,w){function q(B){return w?w[B]||"":String(B[0])}if(!E)return null;var t=5===E[0].length;E=E.sort(B=>B[0][0]-B[1][0]);t=t?E.map(B=>r.fromJSON({value:B[0],color:B.slice(1,5),label:q(B[0])})):E.map(B=>r.fromJSON({value:B[0],color:B.slice(1,4).concat([255]),label:q(B[0])}));return new g({colormapInfos:t})};
p.createFromColorramp=function(E){E=k.convertColorRampToColormap(E,256);return g.createFromColormap(E)};var y=p.prototype;y.clone=function(){return new g({colormapInfos:this.colormapInfos.map(E=>E.toJSON())})};y.extractColormap=function(){return this.colormapInfos.map(E=>[E.value,E.color.r,E.color.g,E.color.b,1<E.color.a?E.color.a:255*E.color.a&255]).sort((E,w)=>E[0]-w[0])};return p}(D.JSONSupport);n.__decorate([M.property({type:[r],json:{write:!0}})],L.prototype,"colormapInfos",void 0);n.__decorate([N.enumeration({rasterColormap:"raster-colormap"})],
L.prototype,"type",void 0);return L=g=n.__decorate([U.subclass("esri.renderers.RasterColormapRenderer")],L)})},"esri/renderers/support/ColormapInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../Color".split(" "),
function(R,n,L,X,A,M,N,U,W,I,z,D,r){L=function(k){function g(){var m=k.apply(this,arguments)||this;m.value=null;m.label=null;m.color=null;return m}R._inheritsLoose(g,k);return g}(D.JSONSupport);n.__decorate([M.property({type:Number,json:{write:!0}})],L.prototype,"value",void 0);n.__decorate([M.property({type:String,json:{write:!0}})],L.prototype,"label",void 0);n.__decorate([M.property({type:r,json:{type:[A.Integer],write:!0}})],L.prototype,"color",void 0);return L=n.__decorate([U.subclass("esri.renderers.support.ColormapInfo")],
L)})},"esri/renderers/support/colorRampUtils":function(){define(["exports","../../Color","../../core/colorUtils"],function(R,n,L){function X(U,W){if(!U||!W||U.length!==W.length)return!1;for(let I=0;I<U.length;I++)if(U[I]>W[I]+2||U[I]<W[I]-2)return!1;return!0}function A(U,W){if(U){W=W?W:M;var I=null,z;"algorithmic"===U.type?W.some(D=>{if(X(U.fromColor.toRgb(),D.fromColor)&&X(U.toColor.toRgb(),D.toColor))return I=D.id,!0}):"multipart"===U.type&&W.some(D=>{if(U.colorRamps&&D.colorRamps&&U.colorRamps.length===
D.colorRamps.length&&(z=U.colorRamps,!D.colorRamps.some((r,k)=>{if(!X(z[k].fromColor.toRgb(),(new n(r.fromColor)).toRgb())||!X(z[k].toColor.toRgb(),(new n(r.toColor)).toRgb()))return!0}))){if(I)return!0;I=D.id}});return I}}const M=[{id:"aspect_predefined",type:"multipart",colorRamps:[{fromColor:[190,190,190],toColor:[255,45,8]},{fromColor:[255,45,8],toColor:[255,181,61]},{fromColor:[255,181,61],toColor:[255,254,52]},{fromColor:[255,254,52],toColor:[0,251,50]},{fromColor:[0,251,50],toColor:[255,254,
52]},{fromColor:[0,253,255],toColor:[0,181,255]},{fromColor:[0,181,255],toColor:[26,35,253]},{fromColor:[26,35,253],toColor:[255,57,251]},{fromColor:[255,57,251],toColor:[255,45,8]}]},{id:"blackToWhite_predefined",fromColor:[0,0,0],toColor:[255,255,255]},{id:"blueBright_predefined",fromColor:[204,204,255],toColor:[0,0,224]},{id:"blueLightToDark_predefined",fromColor:[211,229,232],toColor:[46,100,140]},{id:"blueGreenBright_predefined",fromColor:[203,245,234],toColor:[48,207,146]},{id:"blueGreenLightToDark_predefined",
fromColor:[216,242,237],toColor:[21,79,74]},{id:"brownLightToDark_predefined",fromColor:[240,236,170],toColor:[102,72,48]},{id:"brownToBlueGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[156,85,31],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[33,130,145]}]},{id:"brownToBlueGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[110,70,45],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[48,100,102]}]},{id:"coefficientBias_predefined",fromColor:[214,
214,255],toColor:[0,57,148]},{id:"coldToHotDiverging_predefined",type:"multipart",colorRamps:[{fromColor:[69,117,181],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[214,47,39]}]},{id:"conditionNumber_predefined",type:"multipart",colorRamps:[{fromColor:[0,97,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,34,0]}]},{id:"cyanToPurple_predefined",type:"multipart",colorRamps:[{fromColor:[0,245,245],toColor:[0,0,245]},{fromColor:[0,0,245],toColor:[245,0,245]}]},{id:"cyanLightToBlueDark_predefined",
type:"multipart",colorRamps:[{fromColor:[182,237,240],toColor:[31,131,224]},{fromColor:[31,131,224],toColor:[9,9,145]}]},{id:"distance_predefined",fromColor:[255,200,0],toColor:[0,0,255]},{id:"elevation1_predefined",type:"multipart",colorRamps:[{fromColor:[175,240,233],toColor:[255,255,179]},{fromColor:[255,255,179],toColor:[0,128,64]},{fromColor:[0,128,64],toColor:[252,186,3]},{fromColor:[252,186,3],toColor:[128,0,0]},{fromColor:[120,0,0],toColor:[105,48,13]},{fromColor:[105,48,13],toColor:[171,
171,171]},{fromColor:[171,171,171],toColor:[255,252,255]}]},{id:"elevation2_predefined",type:"multipart",colorRamps:[{fromColor:[118,219,211],toColor:[255,255,199]},{fromColor:[255,255,199],toColor:[255,255,128]},{fromColor:[255,255,128],toColor:[217,194,121]},{fromColor:[217,194,121],toColor:[135,96,38]},{fromColor:[135,96,38],toColor:[150,150,181]},{fromColor:[150,150,181],toColor:[181,150,181]},{fromColor:[181,150,181],toColor:[255,252,255]}]},{id:"errors_predefined",fromColor:[255,235,214],toColor:[196,
10,10]},{id:"grayLightToDark_predefined",fromColor:[219,219,219],toColor:[69,69,69]},{id:"greenBright_predefined",fromColor:[204,255,204],toColor:[14,204,14]},{id:"greenLightToDark_predefined",fromColor:[220,245,233],toColor:[34,102,51]},{id:"greenToBlue_predefined",type:"multipart",colorRamps:[{fromColor:[32,204,16],toColor:[0,242,242]},{fromColor:[0,242,242],toColor:[2,33,227]}]},{id:"orangeBright_predefined",fromColor:[255,235,204],toColor:[240,118,5]},{id:"orangeLightToDark_predefined",fromColor:[250,
233,212],toColor:[171,65,36]},{id:"partialSpectrum_predefined",type:"multipart",colorRamps:[{fromColor:[242,241,162],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]},{fromColor:[252,3,69],toColor:[176,7,237]},{fromColor:[176,7,237],toColor:[2,29,173]}]},{id:"partialSpectrum1Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[135,38,38],toColor:[240,149,12]},{fromColor:[240,149,12],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[74,80,181]},{fromColor:[74,80,181],
toColor:[39,32,122]}]},{id:"partialSpectrum2Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[115,77,42],toColor:[201,137,52]},{fromColor:[201,137,52],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[91,63,176]},{fromColor:[91,63,176],toColor:[81,13,97]}]},{id:"pinkToYellowGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[158,30,113],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[99,110,45]}]},{id:"pinkToYellowGreenDivergingDark_predefined",type:"multipart",
colorRamps:[{fromColor:[97,47,73],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[22,59,15]}]},{id:"precipitation_predefined",type:"multipart",colorRamps:[{fromColor:[194,82,60],toColor:[237,161,19]},{fromColor:[237,161,19],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,219,0]},{fromColor:[0,219,0],toColor:[32,153,143]},{fromColor:[32,153,143],toColor:[11,44,122]}]},{id:"prediction_predefined",type:"multipart",colorRamps:[{fromColor:[40,146,199],toColor:[250,250,100]},{fromColor:[250,
250,100],toColor:[232,16,20]}]},{id:"purpleBright_predefined",fromColor:[255,204,255],toColor:[199,0,199]},{id:"purpleToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[77,32,150],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[20,122,11]}]},{id:"purpleToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[67,14,89],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[24,79,15]}]},{id:"purpleBlueBright_predefined",fromColor:[223,184,230],toColor:[112,
12,242]},{id:"purpleBlueLightToDark_predefined",fromColor:[229,213,242],toColor:[93,44,112]},{id:"purpleRedBright_predefined",fromColor:[255,204,225],toColor:[199,0,99]},{id:"purpleRedLightToDark_predefined",fromColor:[250,215,246],toColor:[143,17,57]},{id:"redBright_predefined",fromColor:[255,204,204],toColor:[219,0,0]},{id:"redLightToDark_predefined",fromColor:[255,224,224],toColor:[143,10,10]},{id:"redToBlueDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[196,69,57],toColor:[255,
255,191]},{fromColor:[255,255,191],toColor:[48,95,207]}]},{id:"redToBlueDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[107,13,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[13,53,97]}]},{id:"redToGreen_predefined",type:"multipart",colorRamps:[{fromColor:[245,0,0],toColor:[245,245,0]},{fromColor:[245,245,0],toColor:[0,245,0]}]},{id:"redToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[186,20,20],toColor:[255,255,191]},{fromColor:[255,255,
191],toColor:[54,145,33]}]},{id:"redToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,21,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[16,69,16]}]},{id:"slope_predefined",type:"multipart",colorRamps:[{fromColor:[56,168,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]},{id:"spectrumFullBright_predefined",type:"multipart",colorRamps:[{fromColor:[255,0,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,255,255]},{fromColor:[0,255,255],
toColor:[0,0,255]}]},{id:"spectrumFullDark_predefined",type:"multipart",colorRamps:[{fromColor:[153,0,0],toColor:[153,153,0]},{fromColor:[153,153,0],toColor:[0,153,153]},{fromColor:[0,153,153],toColor:[0,0,153]}]},{id:"spectrumFullLight_predefined",type:"multipart",colorRamps:[{fromColor:[255,153,153],toColor:[255,255,153]},{fromColor:[255,255,153],toColor:[153,255,255]},{fromColor:[153,255,255],toColor:[153,153,255]}]},{id:"surface_predefined",type:"multipart",colorRamps:[{fromColor:[112,153,89],
toColor:[242,238,162]},{fromColor:[242,238,162],toColor:[242,206,133]},{fromColor:[242,206,133],toColor:[194,140,124]},{fromColor:[194,140,124],toColor:[255,242,255]}]},{id:"temperature_predefined",type:"multipart",colorRamps:[{fromColor:[255,252,255],toColor:[255,0,255]},{fromColor:[255,0,255],toColor:[0,0,255]},{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,255,0]},{fromColor:[0,255,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,128,0]},{fromColor:[255,
128,0],toColor:[128,0,0]}]},{id:"whiteToBlack_predefined",fromColor:[255,255,255],toColor:[0,0,0]},{id:"yellowToDarkRed_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[242,167,46]},{fromColor:[242,167,46],toColor:[107,0,0]}]},{id:"yellowToGreenToDarkBlue_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[56,224,9]},{fromColor:[56,224,9],toColor:[26,147,171]},{fromColor:[26,147,171],toColor:[12,16,120]}]},{id:"yellowToRed_predefined",fromColor:[245,
245,0],toColor:[255,0,0]},{id:"yellowGreenBright_predefined",fromColor:[236,252,204],toColor:[157,204,16]},{id:"yellowGreenLightToDark_predefined",fromColor:[215,240,175],toColor:[96,107,45]}],N={aspect_predefined:"Aspect",blackToWhite_predefined:"Black to White",blueBright_predefined:"Blue Bright",blueLightToDark_predefined:"Blue Light to Dark",blueGreenBright_predefined:"Blue-Green Bright",blueGreenLightToDark_predefined:"Blue-Green Light to Dark",brownLightToDark_predefined:"Brown Light to Dark",
brownToBlueGreenDivergingBright_predefined:"Brown to Blue Green Diverging, Bright",brownToBlueGreenDivergingDark_predefined:"Brown to Blue Green Diverging, Dark",coefficientBias_predefined:"Coefficient Bias",coldToHotDiverging_predefined:"Cold to Hot Diverging",conditionNumber_predefined:"Condition Number",cyanToPurple_predefined:"Cyan to Purple",cyanLightToBlueDark_predefined:"Cyan-Light to Blue-Dark",distance_predefined:"Distance",elevation1_predefined:"Elevation #1",elevation2_predefined:"Elevation #2",
errors_predefined:"Errors",grayLightToDark_predefined:"Gray Light to Dark",greenBright_predefined:"Green Bright",greenLightToDark_predefined:"Green Light to Dark",greenToBlue_predefined:"Green to Blue",orangeBright_predefined:"Orange Bright",orangeLightToDark_predefined:"Orange Light to Dark",partialSpectrum_predefined:"Partial Spectrum",partialSpectrum1Diverging_predefined:"Partial Spectrum 1 Diverging",partialSpectrum2Diverging_predefined:"Partial Spectrum 2 Diverging",pinkToYellowGreenDivergingBright_predefined:"Pink to YellowGreen Diverging, Bright",
pinkToYellowGreenDivergingDark_predefined:"Pink to YellowGreen Diverging, Dark",precipitation_predefined:"Precipitation",prediction_predefined:"Prediction",purpleBright_predefined:"Purple Bright",purpleToGreenDivergingBright_predefined:"Purple to Green Diverging, Bright",purpleToGreenDivergingDark_predefined:"Purple to Green Diverging, Dark",purpleBlueBright_predefined:"Purple-Blue Bright",purpleBlueLightToDark_predefined:"Purple-Blue Light to Dark",purpleRedBright_predefined:"Purple-Red Bright",
purpleRedLightToDark_predefined:"Purple-Red Light to Dark",redBright_predefined:"Red Bright",redLightToDark_predefined:"Red Light to Dark",redToBlueDivergingBright_predefined:"Red to Blue Diverging, Bright",redToBlueDivergingDark_predefined:"Red to Blue Diverging, Dark",redToGreen_predefined:"Red to Green",redToGreenDivergingBright_predefined:"Red to Green Diverging, Bright",redToGreenDivergingDark_predefined:"Red to Green Diverging, Dark",slope_predefined:"Slope",spectrumFullBright_predefined:"Spectrum-Full Bright",
spectrumFullDark_predefined:"Spectrum-Full Dark",spectrumFullLight_predefined:"Spectrum-Full Light",surface_predefined:"Surface",temperature_predefined:"Temperature",whiteToBlack_predefined:"White to Black",yellowToDarkRed_predefined:"Yellow to Dark Red",yellowToGreenToDarkBlue_predefined:"Yellow to Green to Dark Blue",yellowToRed_predefined:"Yellow to Red",yellowGreenBright_predefined:"Yellow-Green Bright",yellowGreenLightToDark_predefined:"Yellow-Green Light to Dark"};R.PREDEFINED_COLOR_RAMP_NAME_MAP=
N;R.PREDEFINED_JSON_COLOR_RAMPS=M;R.convertColorRampToColormap=function(U,W,I=!1){if(U&&W&&!(1>W)){var z="toJSON"in U?U.toJSON():U,D="multipart"===z.type?z.colorRamps.length:1;U=[];var r=[],k,g,m,p=0;if(1===W){var y="multipart"===z.type?z.colorRamps[0].fromColor:z.fromColor;r.push([0].concat(y));return r}for(let w=0;w<D;w++)U[w]={start:null,end:null},U[w].start=p,U[w].end=p+1/D,p=U[w].end;for(let w=0;w<W;w++){var E=w/(W-1);U.forEach((q,t)=>{if(E>=q.start&&(E<q.end||w===W-1&&t===D-1)){m=(E-q.start)/
(q.end-q.start);"multipart"===z.type?(y=z.colorRamps[t].fromColor,k=z.colorRamps[t].toColor):(y=z.fromColor,k=z.toColor);if(0===w)r.push([w].concat(y.slice(0,3)));else if(w===W-1)r.push([w].concat(k.slice(0,3)));else{var B={r:k[0],g:k[1],b:k[2]};q=m;t=L.toLAB({r:y[0],g:y[1],b:y[2]});B=L.toLAB(B);g=L.toRGB({l:t.l*(1-q)+q*B.l,a:t.a*(1-q)+q*B.a,b:t.b*(1-q)+q*B.b});r.push([w,g.r,g.g,g.b])}q=null!=y[3]?1<y[3]?y[3]/255:y[3]:1;t=null!=k[3]?1<k[3]?k[3]/255:k[3]:1;I&&r[w].push(Math.min(255,Math.round(255*
(q*(1-m)+t*m))))}})}return r}};R.getColorRampId=A;R.getColorRampName=function(U){return(U=A(U))?N[U]:null};Object.defineProperty(R,"__esModule",{value:!0})})},"esri/core/colorUtils":function(){define(["exports"],function(R){function n(I,z){const D=[];let r,k;if(I[0].length!==z.length)throw"dimensions do not match";const g=I.length,m=I[0].length;let p=0;for(r=0;r<g;r++){for(k=p=0;k<m;k++)p+=I[r][k]*z[k];D.push(p)}return D}function L(I){I=[I.r/255,I.g/255,I.b/255].map(z=>.04045>=z?z/12.92:((z+.055)/
1.055)**2.4);I=n(U,I);return{x:100*I[0],y:100*I[1],z:100*I[2]}}function X(I){I=n(W,[I.x/100,I.y/100,I.z/100]).map(z=>Math.min(1,Math.max(.0031308>=z?12.92*z:1.055*z**(1/2.4)-.055,0)));return{r:Math.round(255*I[0]),g:Math.round(255*I[1]),b:Math.round(255*I[2])}}function A(I){I=[I.x/95.047,I.y/100,I.z/108.883].map(z=>z>(6/29)**3?z**(1/3):1/3*(29/6)**2*z+4/29);return{l:116*I[1]-16,a:500*(I[0]-I[1]),b:200*(I[1]-I[2])}}function M(I){const z=I.l;I=[(z+16)/116+I.a/500,(z+16)/116,(z+16)/116-I.b/200].map(D=>
D>6/29?D**3:3*(6/29)**2*(D-4/29));return{x:95.047*I[0],y:100*I[1],z:108.883*I[2]}}function N(I){if("r"in I&&"g"in I&&"b"in I)return I;if("l"in I&&"c"in I&&"h"in I){var z=I.c;var D=I.h;z={l:I.l,a:z*Math.cos(D),b:z*Math.sin(D)};return X(M(z))}if("l"in I&&"a"in I&&"b"in I)return X(M(I));if("x"in I&&"y"in I&&"z"in I)return X(I);if("h"in I&&"s"in I&&"v"in I){{D=(I.h+360)%360/60;z=I.v/100*255;I=I.s/100*z;const r=I*(1-Math.abs(D%2-1));switch(Math.floor(D)){case 0:D={r:I,g:r,b:0};break;case 1:D={r,g:I,b:0};
break;case 2:D={r:0,g:I,b:r};break;case 3:D={r:0,g:r,b:I};break;case 4:D={r,g:0,b:I};break;case 5:case 6:D={r:I,g:0,b:r};break;default:D={r:0,g:0,b:0}}D.r=Math.round(D.r+z-I);D.g=Math.round(D.g+z-I);D.b=Math.round(D.b+z-I);z=D}return z}return I}const U=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],W=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];R.darken=function(I,z){I=A(L(I));I.l*=1-z;return X(M(I))};R.toHSV=function(I){if("h"in I&&"s"in I&&"v"in I)return I;
var z=N(I);{I=z.r;const D=z.g,r=z.b;z=Math.max(I,D,r);const k=z-Math.min(I,D,r);I=0===k?0:z===I?(D-r)/k%6:z===D?(r-I)/k+2:(I-D)/k+4;0>I&&(I+=6);I={h:60*I,s:100*(0===k?0:k/z),v:100/255*z}}return I};R.toLAB=function(I){return"l"in I&&"a"in I&&"b"in I?I:A(L(N(I)))};R.toLCH=function(I){if(!("l"in I&&"c"in I&&"h"in I)){{var z=A(L(N(I)));I=z.l;var D=z.a;const r=z.b;z=Math.sqrt(D*D+r*r);D=Math.atan2(r,D);D=0<D?D:D+2*Math.PI;I={l:I,c:z,h:D}}}return I};R.toRGB=N;R.toXYZ=function(I){return"x"in I&&"y"in I&&
"z"in I?I:L(N(I))};Object.defineProperty(R,"__esModule",{value:!0})})},"esri/renderers/RasterShadedReliefRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/lang ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/JSONSupport ../tasks/support/colorRamps".split(" "),
function(R,n,L,X,A,M,N,U,W,I,z,D,r,k,g){var m;L=m=function(p){function y(w){w=p.call(this,w)||this;w.altitude=45;w.azimuth=315;w.colorRamp=null;w.hillshadeType="multi-directional";w.pixelSizePower=.664;w.pixelSizeFactor=.024;w.scalingType="none";w.type="raster-shaded-relief";w.zFactor=1;return w}R._inheritsLoose(y,p);var E=y.prototype;E.readColorRamp=function(w){return g.fromJSON(w)};E.clone=function(){return new m({hillshadeType:this.hillshadeType,altitude:this.altitude,azimuth:this.azimuth,zFactor:this.zFactor,
scalingType:this.scalingType,pixelSizeFactor:this.pixelSizeFactor,pixelSizePower:this.pixelSizePower,colorRamp:X.clone(this.colorRamp)})};return y}(k.JSONSupport);n.__decorate([N.property({type:Number,json:{write:!0}})],L.prototype,"altitude",void 0);n.__decorate([N.property({type:Number,json:{write:!0}})],L.prototype,"azimuth",void 0);n.__decorate([N.property({types:g.types,json:{write:!0}})],L.prototype,"colorRamp",void 0);n.__decorate([W.reader("colorRamp")],L.prototype,"readColorRamp",null);n.__decorate([N.property({type:["traditional",
"multi-directional"],json:{write:!0}})],L.prototype,"hillshadeType",void 0);n.__decorate([N.property({type:Number,json:{write:!0}})],L.prototype,"pixelSizePower",void 0);n.__decorate([N.property({type:Number,json:{write:!0}})],L.prototype,"pixelSizeFactor",void 0);n.__decorate([N.property({type:["none","adjusted"],json:{write:!0}})],L.prototype,"scalingType",void 0);n.__decorate([U.enumeration({rasterShadedRelief:"raster-shaded-relief"})],L.prototype,"type",void 0);n.__decorate([N.property({type:Number,
json:{write:!0}})],L.prototype,"zFactor",void 0);return L=m=n.__decorate([I.subclass("esri.renderers.RasterShadedReliefRenderer")],L)})},"esri/renderers/RasterStretchRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/lang ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/JSONSupport ../tasks/support/colorRamps ./support/stretchRendererUtils".split(" "),
function(R,n,L,X,A,M,N,U,W,I,z,D,r,k,g,m,p){var y;L=y=function(E){function w(t){t=E.call(this,t)||this;t.colorRamp=null;t.computeGamma=!1;t.dynamicRangeAdjustment=!1;t.gamma=[];t.maxPercent=null;t.minPercent=null;t.numberOfStandardDeviations=null;t.outputMax=null;t.outputMin=null;t.sigmoidStrengthLevel=null;t.statistics=[];t.histograms=null;t.useGamma=!1;t.stretchType="none";t.type="raster-stretch";return t}R._inheritsLoose(w,E);var q=w.prototype;q.readColorRamp=function(t){if(t)return m.fromJSON(t)};
q.writeStatistics=function(t,B,J){var G;null!=(G=t)&&G.length&&(Array.isArray(t[0])||(t=t.map(l=>[l.min,l.max,l.avg,l.stddev])),B[J]=t)};q.readStretchType=function(t,B){t=B.stretchType;"number"===typeof t&&(t=p.stretchTypeFunctionEnum[t]);return p.stretchTypeJSONDict.read(t)};q.clone=function(){return new y({stretchType:this.stretchType,outputMin:this.outputMin,outputMax:this.outputMax,useGamma:this.useGamma,computeGamma:this.computeGamma,statistics:X.clone(this.statistics),gamma:X.clone(this.gamma),
sigmoidStrengthLevel:this.sigmoidStrengthLevel,numberOfStandardDeviations:this.numberOfStandardDeviations,minPercent:this.minPercent,maxPercent:this.maxPercent,colorRamp:X.clone(this.colorRamp),histograms:X.clone(this.histograms),dynamicRangeAdjustment:this.dynamicRangeAdjustment})};return w}(g.JSONSupport);n.__decorate([N.property({types:m.types,json:{write:!0}})],L.prototype,"colorRamp",void 0);n.__decorate([W.reader("colorRamp")],L.prototype,"readColorRamp",null);n.__decorate([N.property({type:Boolean,
json:{write:!0}})],L.prototype,"computeGamma",void 0);n.__decorate([N.property({type:Boolean,json:{write:{target:"dra"},read:{source:"dra"}}})],L.prototype,"dynamicRangeAdjustment",void 0);n.__decorate([N.property({type:[Number],json:{write:!0}})],L.prototype,"gamma",void 0);n.__decorate([N.property({type:Number,json:{write:!0}})],L.prototype,"maxPercent",void 0);n.__decorate([N.property({type:Number,json:{write:!0}})],L.prototype,"minPercent",void 0);n.__decorate([N.property({type:M.Integer,json:{write:!0}})],
L.prototype,"numberOfStandardDeviations",void 0);n.__decorate([N.property({type:Number,json:{read:{source:"max"},write:{target:"max"}}})],L.prototype,"outputMax",void 0);n.__decorate([N.property({type:Number,json:{read:{source:"min"},write:{target:"min"}}})],L.prototype,"outputMin",void 0);n.__decorate([N.property({type:Number,json:{write:!0}})],L.prototype,"sigmoidStrengthLevel",void 0);n.__decorate([N.property({json:{type:[[Number]],write:!0}})],L.prototype,"statistics",void 0);n.__decorate([N.property()],
L.prototype,"histograms",void 0);n.__decorate([z.writer("statistics")],L.prototype,"writeStatistics",null);n.__decorate([N.property({type:Boolean,json:{write:!0}})],L.prototype,"useGamma",void 0);n.__decorate([N.property({type:p.stretchTypeJSONDict.apiValues,json:{type:p.stretchTypeJSONDict.jsonValues,write:p.stretchTypeJSONDict.write}})],L.prototype,"stretchType",void 0);n.__decorate([W.reader("stretchType",["stretchType"])],L.prototype,"readStretchType",null);n.__decorate([U.enumeration({rasterStretch:"raster-stretch"})],
L.prototype,"type",void 0);return L=y=n.__decorate([I.subclass("esri.renderers.RasterStretchRenderer")],L)})},"esri/renderers/support/stretchRendererUtils":function(){define(["exports","../../core/jsonMap"],function(R,n){n=new n.JSONMap({none:"none",standardDeviation:"standard-deviation",histogramEqualization:"histogram-equalization",minMax:"min-max",percentClip:"percent-clip",sigmoid:"sigmoid"});R.stretchTypeFunctionEnum={0:"none",3:"standardDeviation",4:"histogramEqualization",5:"minMax",6:"percentClip",
9:"sigmoid"};R.stretchTypeJSONDict=n;Object.defineProperty(R,"__esModule",{value:!0})})},"esri/renderers/VectorFieldRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/lang ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/JSONSupport ../geometry/Point ../geometry ../Color ../symbols/SimpleLineSymbol ../symbols/PictureMarkerSymbol ../symbols/SimpleMarkerSymbol ../symbols ../Graphic ./visualVariables/RotationVariable ./visualVariables/support/visualVariableUtils ./visualVariables/SizeVariable ./mixins/VisualVariablesMixin ./support/ClassBreakInfo ./ClassBreaksRenderer ../geometry/support/normalizeUtils ../layers/support/rasterFunctions/vectorFieldUtils ../symbols/support/utils".split(" "),
function(R,n,L,X,A,M,N,U,W,I,z,D,r,k,g,m,p,y,E,w,q,t,B,J,G,l,h,x,c,a,e,b){var d;const v=new Set(["esriMetersPerSecond","esriKilometersPerHour","esriKnots","esriFeetPerSecond","esriMilesPerHour"]),C=new U.JSONMap({esriMetersPerSecond:"meter-per-second",esriKilometersPerHour:"kilometer-per-hour",esriKnots:"knots",esriFeetPerSecond:"feet-per-second",esriMilesPerHour:"mile-per-hour"});L=new U.JSONMap({beaufort_ft:"beaufort-ft",beaufort_km:"beaufort-km",beaufort_kn:"beaufort-kn",beaufort_m:"beaufort-m",
beaufort_mi:"beaufort-mi",classified_arrow:"classified-arrow",ocean_current_kn:"ocean-current-kn",ocean_current_m:"ocean-current-m",simple_scalar:"simple-scalar",single_arrow:"single-arrow",wind_speed:"wind-barb"});U=new U.JSONMap({flow_from:"flow-from",flow_to:"flow-to"});g=d=function(H){function F(O){O=H.call(this,O)||this;O.attributeField="Magnitude";O.flowRepresentation="flow-from";O.rotationType="arithmetic";O.style="single-arrow";O.symbolTileSize=50;O.type="vector-field";return O}R._inheritsLoose(F,
H);var V=F.prototype;V.readInputUnit=function(O,Q){return v.has(O)?C.fromJSON(O):null};V.readOutputUnit=function(O,Q){return v.has(O)?C.fromJSON(O):null};V.clone=function(){return new d({attributeField:this.attributeField,flowRepresentation:this.flowRepresentation,rotationType:this.rotationType,style:this.style,visualVariables:X.clone(this.visualVariables),inputUnit:this.inputUnit,outputUnit:this.outputUnit})};V.getGraphicsFromPixelData=async function(O,Q=!1){const K=[];var P=e.getUnitConversionFactor(this.inputUnit,
this.outputUnit);Q=Q?e.convertVectorFieldData(O.pixelBlock,"vector-uv",this.rotationType,P):e.convertVectorFieldUnit(O.pixelBlock,"vector-magdir",P);O=O.extent;P=Q.mask&&0<Q.mask.length;let Z=0;const aa=(O.xmax-O.xmin)/Q.width,ha=(O.ymax-O.ymin)/Q.height;for(let u=0;u<Q.height;u++)for(let T=0;T<Q.width;T++,Z++){var ea=[O.xmin+T*aa+aa/2,O.ymax-u*ha-ha/2];if((!P||Q.mask[Z])&&ea&&2===ea.length){var f={Magnitude:Q.pixels[0][Z],Direction:Q.pixels[1][Z]};ea=new m({x:ea[0],y:ea[1],spatialReference:O.spatialReference});
ea=(await a.normalizeCentralMeridian(ea))[0];f=new B({geometry:{type:"point",x:ea.x,y:ea.y,spatialReference:O.spatialReference},attributes:f});f.symbol=this._getVisualVariablesAppliedSymbol(f);K.push(f)}}return K};V.getSymbol=function(O,Q){};V.getSymbolAsync=async function(O,Q){};V.getSymbols=function(){return[]};V.getClassBreakInfos=function(){var O;return null==(O=this.styleRenderer)?void 0:O.classBreakInfos};V.getDefaultSymbol=function(){var O;return null==(O=this.styleRenderer)?void 0:O.defaultSymbol};
V._getDefaultSymbol=function(O){return new q({path:"M14,32 14,18 9,23 16,3 22,23 17,18 17,32 z",outline:new E({width:0}),size:20,color:O||new y([0,92,230])})};V._getVisualVariablesAppliedSymbol=function(O){if(O){var Q=this.styleRenderer&&this.styleRenderer.getSymbol(O);Q=Q.clone();var K=this.sizeVariables,P=this.rotationVariables;K&&K.length&&this.sizeVariables.forEach(Z=>b.applySizesToSymbol(Q,G.getAllSizes([Z],O)));P&&P.length&&(K=O.attributes.Direction,O.attributes.Direction="flow-from"===this.flowRepresentation?
K:K+180,this.rotationVariables.forEach(Z=>b.applyRotationToSymbol(Q,G.getRotationAngle(Z,O),Z.axis)));return Q}};V._createStyleRenderer=function(O){let Q={defaultSymbol:this._getDefaultSymbol(),classBreakInfos:[]};switch(O){case "single-arrow":Q=this._createSingleArrowRenderer();break;case "beaufort-kn":Q=this._createBeaufortKnotsRenderer();break;case "beaufort-m":Q=this._createBeaufortMeterRenderer();break;case "beaufort-ft":Q=this._createBeaufortFeetRenderer();break;case "beaufort-mi":Q=this._createBeaufortMilesRenderer();
break;case "beaufort-km":Q=this._createBeaufortKilometersRenderer();break;case "ocean-current-m":Q=this._createCurrentMeterRenderer();break;case "ocean-current-kn":Q=this._createCurrentKnotsRenderer();break;case "simple-scalar":Q=this._createSimpleScalarRenderer();break;case "wind-barb":Q=this._createWindBarbsRenderer();break;case "classified-arrow":Q=this._createClassifiedArrowRenderer()}return new c(Q)};V._createSingleArrowRenderer=function(){return{defaultSymbol:this._getDefaultSymbol()}};V._createBeaufortKnotsRenderer=
function(){const O=this._getDefaultSymbol(new y([214,47,39])),Q=this._getClassBreaks([0,1,3,6,10,16,21,27,33,40,47,55,63],[[40,146,199],[89,162,186],[129,179,171],[160,194,155],[191,212,138],[218,230,119],[250,250,100],[252,213,83],[252,179,102],[250,141,52],[247,110,42],[240,71,29]]);return{defaultSymbol:O,classBreakInfos:Q}};V._createBeaufortMeterRenderer=function(){const O=this._getDefaultSymbol(new y([214,47,39])),Q=this._getClassBreaks([0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7],
[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:O,classBreakInfos:Q}};V._createBeaufortFeetRenderer=function(){const O=this._getDefaultSymbol(new y([214,47,39]));var Q=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];Q=Q.map(K=>3.28084*K);Q=this._getClassBreaks(Q,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,
191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:O,classBreakInfos:Q}};V._createBeaufortMilesRenderer=function(){const O=this._getDefaultSymbol(new y([214,47,39]));var Q=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];Q=Q.map(K=>2.23694*K);Q=this._getClassBreaks(Q,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:O,
classBreakInfos:Q}};V._createBeaufortKilometersRenderer=function(){const O=this._getDefaultSymbol(new y([214,47,39]));var Q=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];Q=Q.map(K=>3.6*K);Q=this._getClassBreaks(Q,[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]]);return{defaultSymbol:O,classBreakInfos:Q}};V._createCurrentMeterRenderer=function(){const O=this._getDefaultSymbol(new y([177,
177,177])),Q=this._getClassBreaks([0,.5,1,1.5,2],[[78,26,153],[179,27,26],[202,128,26],[177,177,177]]);return{defaultSymbol:O,classBreakInfos:Q}};V._createCurrentKnotsRenderer=function(){const O=this._getDefaultSymbol(new y([177,177,177])),Q=this._getClassBreaks([0,.25,.5,1,1.5,2,2.5,3,3.5,4],[[0,0,0],[0,37,100],[78,26,153],[151,0,100],[179,27,26],[177,78,26],[202,128,26],[177,179,52],[177,177,177]]);return{defaultSymbol:O,classBreakInfos:Q}};V._createClassifiedArrowRenderer=function(){var O;const Q=
this._getDefaultSymbol(new y([56,168,0]));var K=[0,1E-6,3.5,7,10.5,14];if(null!=(O=this.sizeVariables)&&O.length){const P=this.sizeVariables[0].minDataValue;O=this.sizeVariables[0].maxDataValue;if(P&&O){const Z=(O-P)/5;K=Array.from(Array(6).keys()).map(aa=>P+Z*aa)}}K=this._getClassBreaks(K,[[56,168,0],[139,309,0],[255,255,0],[255,128,0],[255,0,0]]);return{defaultSymbol:Q,classBreakInfos:K}};V._createSimpleScalarRenderer=function(){return{defaultSymbol:w.fromJSON({imageData:"iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAQAAABLVLlLAAAABGdBTUEAAYagMeiWXwAAAAJiS0dEAACqjSMyAAAACXBIWXMAAABIAAAASABGyWs+AAAC3ElEQVRIx9XXvW4cVRQH8N982btpsIREJECyiCXsxX4DKh6AliqGKCBBE2SlwlHgAbBD/AKmyEYUeQ1KahPZSZQvBCkQLTHZ7KGY8Xodz4w3a1NwbzVzz/znfJ//zbStVC5q3icKak9GAs2QIdDx3PtW/S011NW3p+M5Eomh11ipTIKe6+4LQzHaQ+G+63pIZNJJQXMpljwTwj1brpgx5w1zZlyx5Z4QnllEIm2xeeSUHBf0hV0bejo1Uh09G3aFvgXk7cCJFBc9EdaRVuHJJaOdKyTV2TVhYLMduNR0Q9gxL5GaaTDw8GzejrDRBpxWoGsySRW0dttKuattwNkIlFw2YXgzOdYq4Ox49PlM+JrKd5OusjTWhBuVxUfMX/KXXZ3WEmkuqa67wspR4BTbwtKr/5u4fFgStse/T7EifFPnnYl9zPq4vmUOPrRndgoHjDti1gOPqlyXoifcRNGQzUd31lDyfHmob1Gp35vSr+P6vilcQ5Egtyd8YF/ySg9NhPM+9M/IOaHwp5+PSZayXTvCogEUwlatC3J8LLwYtcWB8EuDXQVuCkV5/B4eNHb7wGBs87LBDS+xjdVSn09wq1G8dFM+9tSUhIGneLvUdniKxKpTYljCpu3j7rVWlHj/P23v4NPGUEyeCQnexe9lJjzEQqMjJs+EzNAX6B98dBZVRmroJx95x/A/6gln18EyfCUsl+qdXb/tjvfbw+mwforpUOBz4XLVoBwAn3aWnfeH246NyBXhrq7TTN5lNSP9RkU+puUJm3W2Tsdq0nZWM07srk7MwQrZSRysjjGWBLRJNsNbfj2JMR4AbxpU1XLAb9Mxfpsq5EjMuuiR8L0JiHOOBX3hiUvOmavN0nMueSzcceFk0BK4pMqLo7vDD1Z0qrtDx7Itt4Xwm9UqbMmk8S0Dtuzb2pvOU99Z1nLTOfleNmvfZfP2pYZmPfajwosKdDBNpacNpVGGsWX9CyDI8Xq/Sj6QAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE0LTExLTEwVDAzOjE3OjU4LTA1OjAwF+tHyQAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxNC0xMS0xMFQwMzoxNzo1OC0wNTowMGa2/3UAAAAASUVORK5CYII\x3d",
height:20,width:20,type:"esriPMS",angle:0})}};V._createWindBarbsRenderer=function(){const O=Array.from(Array(31).keys()).map(Z=>5*Z),Q=[{range:"0-5",path:"M20 20 M5 20 A15 15 0 1 0 35 20 A15 15 0 1 0 5 20 M20 20 M10 20 A10 10 0 1 0 30 20 A10 10 0 1 0 10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTIwIDIwIE01IDIwIEExNSAxNSAwIDEgMCAzNSAyMCBBMTUgMTUgMCAxIDAgNSAyMCBNMjAgMjAgTTEwIDIwIEExMCAxMCAwIDEgMCAzMCAyMCBBMTAgMTAgMCAxIDAgMTAgMjAiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"5-10",path:"M25 0 L25 40 M25 35 L17.5 37.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNyA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTTI1IDM1IEwxNy41IDM3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"10-15",path:"M25 0 L25 40 L10 45 L25 40",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNyA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"15-20",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L17.5 37.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjEyIDAgMTUgNDUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxNy41IDM3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"20-25",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},
{range:"25-30",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L17.5 32.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIEwyNSAzNSBNMjUgMzAgTDE3LjUgMzIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"30-35",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"35-40",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"40-45",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"45-50",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"50-55",path:"M25 0 L25 40 L10 40 L25 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"55-60",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L17.5 32.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxNy41IDMyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"60-65",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"65-70",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},
{range:"70-75",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"75-80",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"80-85",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"85-90",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L17.5 17.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxNy41IDE3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"90-95",
path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"95-100",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20 L25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCBMMjUgMTUgTTI1IDEwIEwxNy41IDEyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"},{range:"100-105",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"105-110",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDE3LjUgMjcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"110-115",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},
{range:"115-120",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDE3LjUgMjIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"120-125",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"125-130",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L17.5 17.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDE3LjUgMTcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},
{range:"130-135",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"135-140",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDE3LjUgMTIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg\x3d\x3d"},{range:"140-145",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"145-150",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",
imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IE0yNSAxMCBNMjUgNSBMMTcuNSA3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4\x3d"}],K=w.fromJSON({imageData:"iVBORw0KGgoAAAANSUhEUgAAACgAAAApCAQAAADtq6NDAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAJiS0dEAP+Hj8y/AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAEY0lEQVRIx5XXWWxWRRQH8N+d+31tUdGAVjGglYJABFEBY91jfDAg7piYaFTccA++uMQEFRcSXlATtxiXqMQt4G4iisYl0ai4sIQYtVFZ1KIFKdTS0l4f7vRCS5fPebozc+bM/2z/Mzcx0AgSiUxXnKfIdMn875FIhX53U2n/B/s+kKM4UINTjTBZImixxnrv+9a2iL6zEoUBXcoudrWj/OtHm3wt02lfU9Qao9OnHvIhgmww84MEl1qnxfNmGrqHxAizLdPpC6chGcAxKGGcL+30gOERf1BSpUqVslQSV8d5ReZFe8VQ9avufJn31cWwlJV7iafKStGOE/1qvfH9qUxxu8ydUdmuSKbGO8YUdT2inKLG69pM70tliktl5qIkCAJGmusDG7Vqsc0WjZa4UBlBiA5YZIcjYzB7qDtH5kaUJFLs7RGZTZ42W4PRRmtwvbdt1+wGiaS4drEtDttdZYIDNVuAclR3vA3+dI3qHqmVSy7U6Tv1MScCPvPR7nIpFlsdCy3FdTLPGhK92e2CUITjMJ9ocwKxnsZqc3O3JwMma3d6UVLnyVxB4aXemZqvPqLdpJhW3KVVbY4yYImPo6M5Urv50fj+0z/FG9YaEiENs8UtMfXUaTeTePNHlhXfA1UU+2lyD1Il3Gtt9+adfpNG7dNlpg2U/T3KYLZ2dUWFdTgp3/rQ4sK973qnInV5TIf40x3dhvrJPBiqyWUo4wAtLqhQYS71qK+QKOFRywmGK/kpikzV6WMKhh58vGWs4TIJNjiEYLIuP8Tt4/zmLyqk+AyrJSbF+Qq1DgqRUPMxyl+9q3IQhX/rMCJ6tEunriDs1oSyQZKlr9AkhT2ZIARbJfaJS1vtVbHB+Rgi0RK/y1q1BWsEEyLoz40xtGKcARPVWB1BTPO7f4LNtpkUl1aoMbViLyZo0GRjPD3BxnxjqXeLYlvhqYrzMMG3HoyJXa3JjfnGlbYYFlP7Jh3qKsKY4hQ7TY0nG+xwRL61n63mxHtqNHosigyMLmClNwvuecFnOZB88nNBDzNkzhxEZaKMBVoKapggMzvHHXBEpNSSFAvtcFRsVn0bW8LlMmcXs+c0Kne3gRR32+zg4uXwjC6zit6Wt4a8LXVfcp/MtQXHn2ynGbuCmb8GvvFeJLEE82ReU9/n6+dkq2x3buG9Wn94smcgAw631RPR7BTH+kbmHReZoEpOdEe7zWqZl40s0JWs9Hmv7hjBHqPDwsjGKVJnWWqjbdZp1KhJi0aPmxYZsIRhlttgeF+Jlke41QcOQKoqilSb6HJzSvNG3G/UoWnxwsmt+sVaYwd63dRbqdnMyCPVeyRPvpYgdavM22oGKoMUVRbJfOWMwidJ8Zzb1UvmWK/VVUXzHaTjjrVYh1897HT7xxYEVUaa5SWb/WO+YUWa9SrwvigzM8YlzlYv2GSdVCYxxlBtVnnFq5olwp5/BEk/OLsf5LUmG2+inRJdVvjZ97ZH9/zP34ug1O91pf4p+D+JYBpvrKxfbwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNC0xMS0xMFQwMzoxMjowOS0wNTowMB9ViV0AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTQtMTEtMTBUMDM6MTI6MDktMDU6MDBuCDHhAAAAAElFTkSuQmCC",
height:20,width:20,type:"esriPMS",angle:0}),P=O.map((Z,aa)=>{if(aa!==O.length-1)if(0===aa)var ha={minValue:Z,maxValue:O[aa+1],symbol:K};else ha=w.fromJSON({type:"esriPMS",imageData:Q[aa].imageData,contentType:"image/svg+xml",height:32,width:32,angle:0}),ha={minValue:Z,maxValue:O[aa+1],symbol:ha};return new x(ha)});return{defaultSymbol:K,classBreakInfos:P}};V._getClassBreaks=function(O,Q){return Q.map((K,P)=>new x({minValue:O[P],maxValue:O[P+1],symbol:this._getDefaultSymbol(new y(K))}))};R._createClass(F,
[{key:"styleRenderer",get:function(){const O=this.attributeField,Q=this._createStyleRenderer(this.style);Q.field=O;return Q}},{key:"sizeVariables",get:function(){const O=[];if(this.visualVariables)for(var Q of this.visualVariables)"size"===Q.type&&O.push(Q);0===O.length&&(Q=new l({minSize:.2*this.symbolTileSize,maxSize:.8*this.symbolTileSize}),this.visualVariables?this.visualVariables.push(Q):this._set("visualVariables",[Q]),O.push(Q));return O}},{key:"rotationVariables",get:function(){const O=[];
if(this.visualVariables)for(var Q of this.visualVariables)"rotation"===Q.type&&O.push(Q);0===O.length&&(Q=new J({field:"Direction",rotationType:this.rotationType}),this.visualVariables?this.visualVariables.push(Q):this._set("visualVariables",[Q]),O.push(Q));return O}}]);return F}(h.VisualVariablesMixin(g.JSONSupport));n.__decorate([N.property({type:String,json:{write:!0}})],g.prototype,"attributeField",void 0);n.__decorate([N.property({type:U.apiValues,json:{type:U.jsonValues,read:{reader:U.read},
write:{writer:U.write}}})],g.prototype,"flowRepresentation",void 0);n.__decorate([N.property({type:["geographic","arithmetic"],json:{write:!0}})],g.prototype,"rotationType",void 0);n.__decorate([N.property({type:L.apiValues,json:{type:L.jsonValues,read:{reader:L.read},write:{writer:L.write}}})],g.prototype,"style",void 0);n.__decorate([N.property({json:{write:!0}})],g.prototype,"symbolTileSize",void 0);n.__decorate([N.property({type:C.apiValues,json:{type:C.jsonValues,write:{writer:C.write}}})],g.prototype,
"inputUnit",void 0);n.__decorate([I.reader("inputUnit")],g.prototype,"readInputUnit",null);n.__decorate([N.property({type:C.apiValues,json:{type:C.jsonValues,read:{reader:C.read},write:{writer:C.write}}})],g.prototype,"outputUnit",void 0);n.__decorate([I.reader("outputUnit")],g.prototype,"readOutputUnit",null);n.__decorate([W.enumeration({vectorField:"vector-field"})],g.prototype,"type",void 0);n.__decorate([N.property({type:c})],g.prototype,"styleRenderer",null);n.__decorate([N.property({type:l})],
g.prototype,"sizeVariables",null);n.__decorate([N.property({type:J})],g.prototype,"rotationVariables",null);return g=d=n.__decorate([z.subclass("esri.renderers.VectorFieldRenderer")],g)})},"esri/layers/support/rasterFunctions/vectorFieldUtils":function(){define(["exports","../../../core/maybe","../PixelBlock"],function(R,n,L){function X(W,I="geographic"){const [z,D]=W;W=Math.sqrt(z*z+D*D);let r=Math.atan2(D,z)*M;r=(360+r)%360;"geographic"===I&&(r=(450-r)%360);return[W,r]}function A(W,I="geographic"){let z=
W[1];"geographic"===I&&(z=(450-z)%360);z%=360;W=W[0];return[W*Math.cos(z/M),W*Math.sin(z/M)]}const M=180/Math.PI,N=function(W){return W&&"esri.layers.support.PixelBlock"===W.declaredClass&&W.pixels&&0<W.pixels.length},U=new Map;U.set("meter-per-second",1);U.set("kilometer-per-hour",.277778);U.set("knots",.514444);U.set("feet-per-second",.3048);U.set("mile-per-hour",.44704);R.convertVectorFieldData=function(W,I,z="geographic",D=1){if(!N(W))return W;const {pixels:r,width:k,height:g}=W;var m=k*g;const p=
r[0],y=r[1],E=L.createEmptyBand(W.pixelType,m);m=L.createEmptyBand(W.pixelType,m);let w=0;for(let q=0;q<g;q++)for(let t=0;t<k;t++)"vector-uv"===I?([E[w],m[w]]=X([p[w],y[w]],z),E[w]*=D):([E[w],m[w]]=A([p[w],y[w]],z),E[w]*=D,m[w]*=D),w++;W=new L({pixelType:W.pixelType,width:W.width,height:W.height,mask:W.mask,validPixelCount:W.validPixelCount,maskIsAlpha:W.maskIsAlpha,pixels:[E,m]});W.updateStatistics();return W};R.convertVectorFieldUnit=function(W,I,z=1){if(1===z||!N(W))return W;W=W.clone();const {pixels:D,
width:r,height:k}=W,g=D[0],m=D[1];let p=0;for(let y=0;y<k;y++)for(let E=0;E<r;E++)"vector-uv"===I?(g[p]*=z,m[p]*=z):g[p]*=z,p++;W.updateStatistics();return W};R.getUnitConversionFactor=function(W,I){return U.get(W)/U.get(I)||1};R.isValidPixelBlock=N;R.snapImageToSymbolTile=function(W,I,z,D,r){if(!n.isSome(r)||!r.spatialReference.equals(W.spatialReference))return{extent:W,width:I,height:z};const k=r.xmin;r=r.ymax;D=Math.max(D||0,30);I=((W.xmax-W.xmin)/Math.ceil(1/D*I)+(W.ymax-W.ymin)/Math.ceil(1/D*
z))/2;W.xmin=k+Math.floor((W.xmin-k)/I)*I;W.xmax=k+Math.ceil((W.xmax-k)/I)*I;W.ymin=r+Math.floor((W.ymin-r)/I)*I;W.ymax=r+Math.ceil((W.ymax-r)/I)*I;return{extent:W,width:Math.round(W.width/I),height:Math.round(W.height/I)}};Object.defineProperty(R,"__esModule",{value:!0})})},"esri/layers/support/PixelBlock":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/lang ../../core/maybe ../../core/Logger ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/Error ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport".split(" "),
function(R,n,L,X,A,M,N,U,W,I,z,D,r,k,g){var m;const p=M.getLogger("esri.layers.support.PixelBlock");L=m=function(y){function E(q){q=y.call(this,q)||this;q.width=null;q.height=null;q.pixelType="f32";q.validPixelCount=null;q.mask=null;q.maskIsAlpha=!1;q.pixels=null;q.statistics=null;return q}R._inheritsLoose(E,y);E.createEmptyBand=function(q,t){return new (m.getPixelArrayConstructor(q))(t)};E.getPixelArrayConstructor=function(q){let t;switch(q){case "u1":case "u2":case "u4":case "u8":t=Uint8Array;break;
case "u16":t=Uint16Array;break;case "u32":t=Uint32Array;break;case "s8":t=Int8Array;break;case "s16":t=Int16Array;break;case "s32":t=Int32Array;break;case "u32":t=Uint32Array;break;case "f32":t=Float32Array;break;case "f64":t=Float64Array;break;case "c64":case "c128":case "unknown":t=Float32Array}return t};var w=E.prototype;w.castPixelType=function(q){if(!q)return"f32";q=q.toLowerCase();-1<["u1","u2","u4"].indexOf(q)?q="u8":-1==="unknown u8 s8 u16 s16 u32 s32 f32 f64".split(" ").indexOf(q)&&(q="f32");
return q};w.getPlaneCount=function(){return this.pixels&&this.pixels.length};w.addData=function(q){if(!q.pixels||q.pixels.length!==this.width*this.height)throw new z("pixelblock:invalid-or-missing-pixels","add data requires valid pixels array that has same length defined by pixel block width * height");this.pixels||(this.pixels=[]);this.statistics||(this.statistics=[]);this.pixels.push(q.pixels);this.statistics.push(q.statistics||{minValue:null,maxValue:null})};w.getAsRGBA=function(){const q=new ArrayBuffer(this.width*
this.height*4);switch(this.pixelType){case "s8":case "s16":case "u16":case "s32":case "u32":case "f32":case "f64":this._fillFromNon8Bit(q);break;default:this._fillFrom8Bit(q)}return new Uint8ClampedArray(q)};w.getAsRGBAFloat=function(){const q=new Float32Array(this.width*this.height*4);this._fillFrom32Bit(q);return q};w.updateStatistics=function(){this.statistics=this.pixels.map(B=>this._calculateBandStatistics(B,this.mask));const q=this.mask;let t=0;if(q)for(let B=0;B<q.length;B++)q[B]&&t++;else t=
this.width*this.height;this.validPixelCount=t};w.clamp=function(q){if(q&&"f64"!==q&&"f32"!==q){switch(q){case "u8":var t=[0,255];break;case "u16":t=[0,65535];break;case "u32":t=[0,4294967295];break;case "s8":t=[-128,127];break;case "s16":t=[-32768,32767];break;case "s32":t=[-2147483648,2147483647];break;default:t=[-3.4*1E39,3.4*1E39]}var [B,J]=t;t=this.pixels;var G=this.width*this.height,l=t.length,h=[];for(let e=0;e<l;e++){var x=m.createEmptyBand(q,G);var c=t[e];for(let b=0;b<G;b++){var a=c[b];x[b]=
a>J?J:a<B?B:a}h.push(x)}this.pixels=h;this.pixelType=q}};w.extractBands=function(q){if(A.isNone(q)||0===q.length||null==this.pixels||0===this.pixels.length)return this;var t=this.pixels.length;const B=q.some(J=>J>=this.pixels.length);t=t===q.length&&!q.some((J,G)=>J!==G);return B||t?this:new m({pixelType:this.pixelType,width:this.width,height:this.height,mask:this.mask,validPixelCount:this.validPixelCount,maskIsAlpha:this.maskIsAlpha,pixels:q.map(J=>this.pixels[J]),statistics:this.statistics&&q.map(J=>
this.statistics[J])})};w.clone=function(){const q=new m({width:this.width,height:this.height,pixelType:this.pixelType,maskIsAlpha:this.maskIsAlpha,validPixelCount:this.validPixelCount});this.mask&&(q.mask=this.mask instanceof Uint8Array?new Uint8Array(this.mask):this.mask.slice(0));let t;const B=m.getPixelArrayConstructor(this.pixelType);if(this.pixels&&0<this.pixels.length){q.pixels=[];const J=this.pixels[0].slice;for(t=0;t<this.pixels.length;t++)q.pixels[t]=J?this.pixels[t].slice(0,this.pixels[t].length):
new B(this.pixels[t])}if(this.statistics)for(q.statistics=[],t=0;t<this.statistics.length;t++)q.statistics[t]=X.clone(this.statistics[t]);return q};w._fillFrom8Bit=function(q){const {mask:t,maskIsAlpha:B,pixels:J}=this;if(q&&J&&J.length){var G,l;var h=G=l=J[0];3<=J.length?(G=J[1],l=J[2]):2===J.length&&(G=J[1]);var x=new Uint32Array(q),c=this.width*this.height;if(h.length!==c)p.error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");else if(t&&t.length===c)if(B)for(q=0;q<c;q++)t[q]&&
(x[q]=t[q]<<24|l[q]<<16|G[q]<<8|h[q]);else for(q=0;q<c;q++)t[q]&&(x[q]=-16777216|l[q]<<16|G[q]<<8|h[q]);else for(q=0;q<c;q++)x[q]=-16777216|l[q]<<16|G[q]<<8|h[q]}else p.error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.")};w._fillFromNon8Bit=function(q){const {pixels:t,mask:B,statistics:J}=this;if(q&&t&&t.length){var G=this.pixelType,l=1,h=0;l=1;J&&0<J.length?(h=J.map(b=>b.minValue).reduce((b,d)=>Math.min(b,d)),l=J.map(b=>b.maxValue-b.minValue).reduce((b,d)=>Math.max(b,
d)),l=255/l):(l=255,"s8"===G?(h=-128,l=127):"u16"===G?l=65535:"s16"===G?(h=-32768,l=32767):"u32"===G?l=4294967295:"s32"===G?(h=-2147483648,l=2147483647):"f32"===G?(h=-3.4*1E39,l=3.4*1E39):"f64"===G&&(h=-Number.MAX_VALUE,l=Number.MAX_VALUE),l=255/(l-h));q=new Uint32Array(q);G=this.width*this.height;var x,c,a;var e=x=c=t[0];if(e.length!==G)return p.error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");if(2<=t.length)if(x=t[1],3<=t.length&&(c=t[2]),B&&B.length===G)for(a=0;a<G;a++)B[a]&&
(q[a]=-16777216|(c[a]-h)*l<<16|(x[a]-h)*l<<8|(e[a]-h)*l);else for(a=0;a<G;a++)q[a]=-16777216|(c[a]-h)*l<<16|(x[a]-h)*l<<8|(e[a]-h)*l;else if(B&&B.length===G)for(a=0;a<G;a++)x=(e[a]-h)*l,B[a]&&(q[a]=-16777216|x<<16|x<<8|x);else for(a=0;a<G;a++)x=(e[a]-h)*l,q[a]=-16777216|x<<16|x<<8|x}else p.error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.")};w._fillFrom32Bit=function(q){const {pixels:t,mask:B}=this;if(!q||!t||!t.length)return p.error("getAsRGBAFloat()","Unable to convert to RGBA. The input pixel block is empty.");
let J,G,l,h;J=G=l=t[0];3<=t.length?(G=t[1],l=t[2]):2===t.length&&(G=t[1]);const x=this.width*this.height;if(J.length!==x)return p.error("getAsRGBAFloat()","Unable to convert to RGBA. The pixelblock is invalid.");let c=0;if(B&&B.length===x)for(h=0;h<x;h++)q[c++]=J[h],q[c++]=G[h],q[c++]=l[h],q[c++]=B[h]&1;else for(h=0;h<x;h++)q[c++]=J[h],q[c++]=G[h],q[c++]=l[h],q[c++]=1};w._calculateBandStatistics=function(q,t){let B=Infinity,J=-Infinity;const G=q.length;let l,h=0;if(t)for(l=0;l<G;l++)t[l]&&(h=q[l],
B=h<B?h:B,J=h>J?h:J);else for(l=0;l<G;l++)h=q[l],B=h<B?h:B,J=h>J?h:J;return{minValue:B,maxValue:J}};return E}(g.JSONSupport);n.__decorate([N.property({json:{write:!0}})],L.prototype,"width",void 0);n.__decorate([N.property({json:{write:!0}})],L.prototype,"height",void 0);n.__decorate([N.property({json:{write:!0}})],L.prototype,"pixelType",void 0);n.__decorate([U.cast("pixelType")],L.prototype,"castPixelType",null);n.__decorate([N.property({json:{write:!0}})],L.prototype,"validPixelCount",void 0);
n.__decorate([N.property({json:{write:!0}})],L.prototype,"mask",void 0);n.__decorate([N.property({json:{write:!0}})],L.prototype,"maskIsAlpha",void 0);n.__decorate([N.property({json:{write:!0}})],L.prototype,"pixels",void 0);n.__decorate([N.property({json:{write:!0}})],L.prototype,"statistics",void 0);return L=m=n.__decorate([I.subclass("esri.layers.support.PixelBlock")],L)})},"esri/layers/mixins/ImageryTileMixin":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/maybe ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/aliasOf ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../geometry/support/spatialReferenceUtils ../../geometry/SpatialReference ../../geometry/Extent ../../geometry ../../request ../../rasterRenderers ../support/arcgisLayerUrl ../support/commonProperties ../support/TileInfo ../support/DimensionalDefinition ../support/RasterJobHandler ../../renderers/support/rasterRendererHelper ../../renderers/support/RasterSymbolizer".split(" "),
function(R,n,L,X,A,M,N,U,W,I,z,D,r,k,g,m,p,y,E,w,q,t,B,J,G,l,h){const x=M.getLogger("esri.layers.mixins.ImageryTileMixin");R.ImageryTileMixin=c=>{c=function(a){function e(){var d=a.apply(this,arguments)||this;d._rasterJobHandler={instance:null,refCount:0,connectionPromise:null};d.bandIds=null;d.copyright=null;d.fullExtent=null;d.interpolation="nearest";d.raster=null;d.rasterInfo=null;d.sourceJSON=null;d.spatialReference=null;d.tileInfo=null;d.symbolizer=null;return d}n._inheritsLoose(e,a);var b=e.prototype;
b.updateRenderer=async function(){if(this.loaded&&JSON.stringify(this._cachedRendererJson)!==JSON.stringify(this.renderer)){var d=this._rasterJobHandler.instance;d&&(this.symbolizer.rendererJSON=l.normalizeRendererJSON(this.renderer.toJSON()),this.symbolizer.bind(),await d.updateSymbolizer(this.symbolizer),this._cachedRendererJson=this.renderer.toJSON())}};b.applyRenderer=async function(d,v){var C=d&&d.pixelBlock;if(!(C&&C.pixels&&0<C.pixels.length))return null;this.updateRenderer();C=this._rasterJobHandler.instance;
const {bandIds:H}=this;return C?await C.symbolize({...d,simpleStretchParams:v,bandIds:H}):this.symbolizer.symbolize({...d,simpleStretchParams:v,bandIds:H})};b.getTileUrl=function(d,v,C){return"RasterTileServer"===this.raster.datasetFormat?`${this.url}/tile/${d}/${v}/${C}`:""};b.getCompatibleTileInfo=function(d,v){if(!this.loaded)return null;const C=g.getInfo(d);return B.create({size:256,spatialReference:d,origin:C?{x:C.origin[0],y:C.origin[1]}:{x:v.xmin,y:v.ymax}})};b.getCompatibleFullExtent=function(d){return this.loaded?
this._compatibleFullExtent&&this._compatibleFullExtent.spatialReference.equals(d)?this._compatibleFullExtent:this._compatibleFullExtent=this.raster.computeExtent(d):null};b.fetchTile=async function(d,v,C,H={}){if(H.requestAsImageElement)return d=this.getTileUrl(d,v,C),E(d,{responseType:"image",query:{sliceId:this._sliceId,_ts:H.timestamp},signal:H.signal}).then(V=>V.data);await this._initJobHandler();const F="raster-shaded-relief"===this.renderer.type?{cols:1,rows:1}:null;this.multidimensionalDefinition&&
(H={multidimensionalDefinition:this.multidimensionalDefinition,sliceId:this._sliceId,buffer:F,...H});return this.raster.fetchTile(d,v,C,H)};b.fetchPixels=async function(d,v,C,H){await this._initJobHandler();this.multidimensionalDefinition&&(H={multidimensionalDefinition:this.multidimensionalDefinition,sliceId:this._sliceId,...H});return this.raster.fetchPixels(d,v,C,H)};b.identify=function(d,v={}){this.multidimensionalDefinition&&!v.multidimensionalDefinition&&(v={...v,multidimensionalDefinition:this.multidimensionalDefinition});
return this.raster.identify(d,v)};b.increaseRasterJobHandlerUsage=function(){this._rasterJobHandler.refCount++};b.decreaseRasterJobHandlerUsage=function(){this._rasterJobHandler.refCount--;0>=this._rasterJobHandler.refCount&&this._shutdownJobHandler()};b._configDefaultSettings=function(){this._configDefaultInterpolation();this._configDefaultSlice();this._configDefaultRenderer()};b._initJobHandler=function(){if(null!=this._rasterJobHandler.connectionPromise)return this._rasterJobHandler.connectionPromise;
const d=new G;this._rasterJobHandler.connectionPromise=d.initialize().then(()=>{this._rasterJobHandler.instance=d;this.raster.rasterJobHandler=d;this.renderer&&this.updateRenderer()}).catch(()=>null);return this._rasterJobHandler.connectionPromise};b._shutdownJobHandler=function(){this._rasterJobHandler.instance&&this._rasterJobHandler.instance.destroy();this._rasterJobHandler.instance=null;this._rasterJobHandler.connectionPromise=null;this._rasterJobHandler.refCount=0;this.raster.rasterJobHandler=
null};b._configDefaultInterpolation=function(){if(null==this.interpolation){var d;const v=l.getDefaultInterpolation(this.rasterInfo,this.raster.tileType,null==(d=this.sourceJSON)?void 0:d.defaultResamplingMethod);this._set("interpolation",v)}};b._configDefaultSlice=function(){const {multidimensionalInfo:d}=this.raster.rasterInfo;if(A.isSome(d)){if(!this.multidimensionalDefinition){const v=d.variables[0],C=[];v.dimensions.forEach(H=>{C.push(new J({variableName:v.name,dimensionName:H.name,values:H.hasRegularIntervals?
H.extent[0]:H.values[0],isSlice:!0}))});this.multidimensionalDefinition=C}this._sliceId=this.raster.getSliceIndex(this.multidimensionalDefinition)}};b._configDefaultRenderer=function(){const d=this.raster.rasterInfo;this.bandIds||(this.bandIds=l.getDefaultBandCombination(d));if(!this.renderer){var v,C;this.renderer=l.createDefaultRenderer(d,{bandIds:this.bandIds,variableName:null==(v=this.multidimensionalDefinition)?void 0:null==(C=v[0])?void 0:C.variableName})}this.symbolizer?(this.symbolizer.rendererJSON=
l.normalizeRendererJSON(this.renderer.toJSON()),this.symbolizer.rasterInfo=d):this.symbolizer=new h({rendererJSON:this.renderer.toJSON(),rasterInfo:d});this.symbolizer.bind()||x.warn("imagery-tile-mixin","The given renderer is not supported by the layer.")};n._createClass(e,[{key:"multidimensionalDefinition",set:function(d){this.raster&&(this._sliceId=this.raster.getSliceIndex(d));this._set("multidimensionalDefinition",d)}},{key:"url",set:function(d){this._set("url",q.sanitizeUrl(d,x))}},{key:"renderer",
set:function(d){this._set("renderer",d);this.updateRenderer()}}]);return e}(c);L.__decorate([U.property()],c.prototype,"_cachedRendererJson",void 0);L.__decorate([U.property()],c.prototype,"_sliceId",void 0);L.__decorate([U.property()],c.prototype,"_compatibleFullExtent",void 0);L.__decorate([U.property()],c.prototype,"_rasterJobHandler",void 0);L.__decorate([U.property()],c.prototype,"bandIds",void 0);L.__decorate([U.property()],c.prototype,"copyright",void 0);L.__decorate([U.property({type:p}),
W.aliasOf("rasterInfo.extent")],c.prototype,"fullExtent",void 0);L.__decorate([U.property()],c.prototype,"interpolation",void 0);L.__decorate([U.property()],c.prototype,"ioConfig",void 0);L.__decorate([U.property({type:[J]})],c.prototype,"multidimensionalDefinition",null);L.__decorate([U.property()],c.prototype,"raster",void 0);L.__decorate([U.property({readOnly:!0}),W.aliasOf("raster.rasterInfo")],c.prototype,"rasterInfo",void 0);L.__decorate([U.property()],c.prototype,"sourceJSON",void 0);L.__decorate([U.property({type:m}),
W.aliasOf("rasterInfo.spatialReference")],c.prototype,"spatialReference",void 0);L.__decorate([U.property({type:B}),W.aliasOf("rasterInfo.storageInfo.tileInfo")],c.prototype,"tileInfo",void 0);L.__decorate([U.property(t.url)],c.prototype,"url",null);L.__decorate([U.property({types:w.rasterRendererTypes})],c.prototype,"renderer",null);L.__decorate([U.property()],c.prototype,"symbolizer",void 0);return c=L.__decorate([z.subclass("esri.layers.ImageryTileMixin")],c)};Object.defineProperty(R,"__esModule",
{value:!0})})},"esri/layers/support/TileInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../geometry/support/spatialReferenceUtils ../../geometry/SpatialReference ../../geometry/support/webMercatorUtils ../../geometry/Point ../../geometry ../../core/unitUtils ../../geometry/support/aaBoundingRect ./LOD".split(" "),
function(R,n,L,X,A,M,N,U,W,I,z,D,r,k,g,m,p,y,E,w,q,t){var B;L=new N.JSONMap({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});k=B=function(J){function G(h){h=J.call(this,h)||this;h.dpi=96;h.format=null;h.origin=null;h.minScale=0;h.maxScale=0;h.size=null;h.spatialReference=null;return h}R._inheritsLoose(G,J);G.create=function(h=
{size:256,spatialReference:m.WebMercator}){var x=h.resolutionFactor||1,c=h.scales;const a=h.size||256,e=h.spatialReference||m.WebMercator;if(!g.isValid(e)){x=[];if(c)for(h=0;h<c.length;h++){var b=c[h];x.push({level:h,scale:b,resolution:b})}else for(c=5E-4,h=23;0<=h;h--)x.unshift({level:h,scale:c,resolution:c}),c*=2;return new B({dpi:96,lods:x,origin:new y(0,0,e),size:[a,a],spatialReference:e})}b=g.getInfo(e);h=h.origin?new y({x:h.origin.x,y:h.origin.y,spatialReference:e}):b?new y({x:b.origin[0],y:b.origin[1],
spatialReference:e}):new y({x:0,y:0,spatialReference:e});b=1/(39.37*w.getMetersPerUnitForSR(e)*96);const d=[];if(c)for(x=0;x<c.length;x++){var v=c[x];d.push({level:x,scale:v,resolution:v*b})}else{var C=g.isGeographic(e)?512/a*5.916575275917094E8:256/a*5.91657527591555E8;c=Math.ceil(24/x);d.push({level:0,scale:C,resolution:C*b});for(v=1;v<c;v++)C/=2**x,d.push({level:v,scale:C,resolution:C*b})}return new B({dpi:96,lods:d,origin:h,size:[a,a],spatialReference:e})};var l=G.prototype;l.readOrigin=function(h,
x){return y.fromJSON({spatialReference:x.spatialReference,...h})};l.readSize=function(h,x){return[x.cols,x.rows]};l.writeSize=function(h,x){x.cols=h[0];x.rows=h[0]};l.zoomToScale=function(h){const x=this.scales;if(0>=h)return x[0];if(h>=x.length)return x[x.length-1];{const c=Math.round(h);return x[c]+(c-h)*(x[Math.round(h-.5)]-x[c])}};l.scaleToZoom=function(h){const x=this.scales,c=x.length-1;let a=0;for(;a<c;a++){const e=x[a],b=x[a+1];if(e<=h)break;if(b===h)return a+1;if(e>h&&b<h)return a+1-(h-b)/
(e-b)}return a};l.snapScale=function(h,x=.95){h=this.scaleToZoom(h);return h%Math.floor(h)>=x?this.zoomToScale(Math.ceil(h)):this.zoomToScale(Math.floor(h))};l.tileAt=function(h,x,c,a){var e=this.lodAt(h);if(!e)return null;let b;if("number"===typeof x)b=x,x=c;else{if(g.equals(x.spatialReference,this.spatialReference))b=x.x,x=x.y;else{a=p.project(x,this.spatialReference);if(!a)return null;b=a.x;x=a.y}a=c}c=e.resolution*this.size[0];e=e.resolution*this.size[1];a||(a={id:null,level:0,row:0,col:0,extent:q.create()});
a.level=h;a.row=Math.floor((this.origin.y-x)/e+.001);a.col=Math.floor((b-this.origin.x)/c+.001);this.updateTileInfo(a);return a};l.updateTileInfo=function(h,x=0){var c=this.lodAt(h.level);c||1!==x||(x=this.lods[this.lods.length-1],x.level<h.level&&(c=x));if(c){var a=h.level-c.level;x=c.resolution*this.size[0]/2**a;c=c.resolution*this.size[1]/2**a;h.id=`${h.level}/${h.row}/${h.col}`;h.extent||(h.extent=q.create());h.extent[0]=this.origin.x+h.col*x;h.extent[1]=this.origin.y-(h.row+1)*c;h.extent[2]=
h.extent[0]+x;h.extent[3]=h.extent[1]+c}};l.upsampleTile=function(h){const x=this._upsampleLevels[h.level];if(!x||-1===x.parentLevel)return!1;h.level=x.parentLevel;h.row=Math.floor(h.row/x.factor+.001);h.col=Math.floor(h.col/x.factor+.001);this.updateTileInfo(h);return!0};l.getTileBounds=function(h,x){var {resolution:c}=this.lodAt(x.level);const a=c*this.size[0];c*=this.size[1];h[0]=this.origin.x+x.col*a;h[1]=this.origin.y-(x.row+1)*c;h[2]=h[0]+a;h[3]=h[1]+c;return h};l.lodAt=function(h){return this._levelToLOD&&
this._levelToLOD[h]||null};l.clone=function(){return B.fromJSON(this.write({}))};l._initializeUpsampleLevels=function(){const h=this.lods;this._upsampleLevels=[];let x=null;for(let c=0;c<h.length;c++){const a=h[c];this._upsampleLevels[a.level]={parentLevel:x?x.level:-1,factor:x?x.resolution/a.resolution:0};x=a}};R._createClass(G,[{key:"isWrappable",get:function(){const {spatialReference:h,origin:x}=this;if(h&&x){const c=g.getInfo(h);return h.isWrappable&&Math.abs(c.origin[0]-x.x)<=c.dx}return!1}},
{key:"lods",set:function(h){let x=0,c=0;const a=[];this._levelToLOD={};h&&(x=-Infinity,c=Infinity,h.forEach(e=>{a.push(e.scale);x=e.scale>x?e.scale:x;c=e.scale<c?e.scale:c;this._levelToLOD[e.level]=e}));this._set("scales",a);this._set("minScale",x);this._set("maxScale",c);this._set("lods",h);this._initializeUpsampleLevels()}}]);return G}(k.JSONSupport);n.__decorate([M.property({type:Number,json:{write:!0}})],k.prototype,"compressionQuality",void 0);n.__decorate([M.property({type:Number,json:{write:!0}})],
k.prototype,"dpi",void 0);n.__decorate([M.property({type:String,json:{read:L.read,write:L.write,origins:{"web-scene":{read:!1,write:!1}}}})],k.prototype,"format",void 0);n.__decorate([M.property({readOnly:!0})],k.prototype,"isWrappable",null);n.__decorate([M.property({type:y,json:{write:!0}})],k.prototype,"origin",void 0);n.__decorate([U.reader("origin")],k.prototype,"readOrigin",null);n.__decorate([M.property({type:[t],value:null,json:{write:!0}})],k.prototype,"lods",null);n.__decorate([M.property({readOnly:!0})],
k.prototype,"minScale",void 0);n.__decorate([M.property({readOnly:!0})],k.prototype,"maxScale",void 0);n.__decorate([M.property({readOnly:!0})],k.prototype,"scales",void 0);n.__decorate([M.property({cast:J=>Array.isArray(J)?J:"number"===typeof J?[J,J]:[256,256]})],k.prototype,"size",void 0);n.__decorate([U.reader("size",["rows","cols"])],k.prototype,"readSize",null);n.__decorate([I.writer("size",{cols:{type:A.Integer},rows:{type:A.Integer}})],k.prototype,"writeSize",null);n.__decorate([M.property({type:m,
json:{write:!0}})],k.prototype,"spatialReference",void 0);return k=B=n.__decorate([W.subclass("esri.layers.support.TileInfo")],k)})},"esri/geometry/support/aaBoundingRect":function(){define(["exports","../../core/has","../../core/maybe","../Extent"],function(R,n,L,X){function A(k=r){return[k[0],k[1],k[2],k[3]]}function M(k){return k[0]>=k[2]?0:k[2]-k[0]}function N(k){return k[1]>=k[3]?0:k[3]-k[1]}function U(k,g,m){return g>=k[0]&&m>=k[1]&&g<=k[2]&&m<=k[3]}function W(k,g){k[0]=g[0];k[1]=g[1];k[2]=
g[2];k[3]=g[3];return k}function I(k){return 4===k.length}function z(k,g,m){return k<g?g:k>m?m:k}const D=[Infinity,Infinity,-Infinity,-Infinity],r=[0,0,0,0];R.NEGATIVE_INFINITY=D;R.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];R.UNIT=[0,0,1,1];R.ZERO=r;R.allFinite=function(k){for(let g=0;4>g;g++)if(!isFinite(k[g]))return!1;return!0};R.area=function(k){return M(k)*N(k)};R.center=function(k,g=[0,0]){g[0]=(k[0]+k[2])/2;g[1]=(k[1]+k[3])/2;return g};R.clone=function(k){return[k[0],k[1],k[2],
k[3]]};R.contains=function(k,g){return g[0]>=k[0]&&g[2]<=k[2]&&g[1]>=k[1]&&g[3]<=k[3]};R.containsPoint=function(k,g){return U(k,g[0],g[1])};R.containsPointObject=function(k,g){return U(k,g.x,g.y)};R.containsPointWithMargin=function(k,g,m){return g[0]>=k[0]-m&&g[1]>=k[1]-m&&g[0]<=k[2]+m&&g[1]<=k[3]+m};R.containsXY=U;R.create=A;R.diameter=function(k){const g=M(k);k=N(k);return Math.sqrt(g*g+k*k)};R.distance=function(k,g){const m=(k[1]+k[3])/2,p=Math.max(Math.abs(g[0]-(k[0]+k[2])/2)-M(k)/2,0);k=Math.max(Math.abs(g[1]-
m)-N(k)/2,0);return Math.sqrt(p*p+k*k)};R.empty=function(k){return k?W(k,D):A(D)};R.equals=function(k,g,m){if(L.isNone(k)||L.isNone(g))return k===g;if(!I(k)||!I(g))return!1;if(m)for(let p=0;p<k.length;p++){if(!m(k[p],g[p]))return!1}else for(m=0;m<k.length;m++)if(k[m]!==g[m])return!1;return!0};R.expand=function(k,g,m=k){if("length"in g)if(I(g))m[0]=Math.min(k[0],g[0]),m[1]=Math.min(k[1],g[1]),m[2]=Math.max(k[2],g[2]),m[3]=Math.max(k[3],g[3]);else{if(2===g.length||3===g.length)m[0]=Math.min(k[0],g[0]),
m[1]=Math.min(k[1],g[1]),m[2]=Math.max(k[2],g[0]),m[3]=Math.max(k[3],g[1])}else switch(g.type){case "extent":m[0]=Math.min(k[0],g.xmin);m[1]=Math.min(k[1],g.ymin);m[2]=Math.max(k[2],g.xmax);m[3]=Math.max(k[3],g.ymax);break;case "point":m[0]=Math.min(k[0],g.x),m[1]=Math.min(k[1],g.y),m[2]=Math.max(k[2],g.x),m[3]=Math.max(k[3],g.y)}return m};R.expandPointInPlace=function(k,g){g[0]<k[0]&&(k[0]=g[0]);g[0]>k[2]&&(k[2]=g[0]);g[1]<k[1]&&(k[1]=g[1]);g[1]>k[3]&&(k[3]=g[1])};R.expandWithNestedArray=function(k,
g,m=k){const p=g.length;let y=k[0],E=k[1],w=k[2];k=k[3];for(let q=0;q<p;q++){const t=g[q];y=Math.min(y,t[0]);E=Math.min(E,t[1]);w=Math.max(w,t[0]);k=Math.max(k,t[1])}m[0]=y;m[1]=E;m[2]=w;m[3]=k;return m};R.fromExtent=function(k,g=A()){g[0]=k.xmin;g[1]=k.ymin;g[2]=k.xmax;g[3]=k.ymax;return g};R.fromValues=function(k,g,m,p,y=A()){y[0]=k;y[1]=g;y[2]=m;y[3]=p;return y};R.height=N;R.intersection=function(k,g,m=k){const p=g[0],y=g[1],E=g[2];g=g[3];m[0]=z(k[0],p,E);m[1]=z(k[1],y,g);m[2]=z(k[2],p,E);m[3]=
z(k[3],y,g);return m};R.intersects=function(k,g){return Math.max(g[0],k[0])<=Math.min(g[2],k[2])&&Math.max(g[1],k[1])<=Math.min(g[3],k[3])};R.is=I;R.isPoint=function(k){return(0===M(k)||!isFinite(k[0]))&&(0===N(k)||!isFinite(k[1]))};R.offset=function(k,g,m,p=k){p[0]=k[0]+g;p[1]=k[1]+m;p[2]=k[2]+g;p[3]=k[3]+m;return p};R.pad=function(k,g,m=k){m[0]=k[0]-g;m[1]=k[1]-g;m[2]=k[2]+g;m[3]=k[3]+g;return m};R.set=W;R.setMax=function(k,g,m=k){m[2]=g[0];m[3]=g[1];m!==k&&(m[0]=k[0],m[1]=k[1]);return k};R.setMin=
function(k,g,m=k){m[0]=g[0];m[1]=g[1];m!==k&&(m[2]=k[2],m[3]=k[3]);return m};R.size=function(k,g){g[0]=k[2]-k[0];g[1]=k[3]-k[1]};R.toExtent=function(k,g){return new X({xmin:k[0],ymin:k[1],xmax:k[2],ymax:k[3],spatialReference:g})};R.width=M;Object.defineProperty(R,"__esModule",{value:!0})})},"esri/layers/support/LOD":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport".split(" "),
function(R,n,L,X,A,M,N,U,W,I,z,D){var r;L=r=function(k){function g(m){m=k.call(this,m)||this;m.level=0;m.levelValue=null;m.resolution=0;m.scale=0;return m}R._inheritsLoose(g,k);g.prototype.clone=function(){return new r({level:this.level,levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})};return g}(D.JSONSupport);n.__decorate([M.property({type:A.Integer,json:{write:!0}})],L.prototype,"level",void 0);n.__decorate([M.property({type:String,json:{write:!0}})],L.prototype,"levelValue",
void 0);n.__decorate([M.property({type:Number,json:{write:!0}})],L.prototype,"resolution",void 0);n.__decorate([M.property({type:Number,json:{write:!0}})],L.prototype,"scale",void 0);return L=r=n.__decorate([U.subclass("esri.layers.support.LOD")],L)})},"esri/layers/support/DimensionalDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/lang ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport".split(" "),
function(R,n,L,X,A,M,N,U,W,I,z,D,r){var k;L=k=function(g){function m(p){p=g.call(this,p)||this;p.variableName=null;p.dimensionName=null;p.values=[];p.isSlice=!1;return p}R._inheritsLoose(m,g);m.prototype.clone=function(){return new k({variableName:this.variableName,dimensionName:this.dimensionName,values:X.clone(this.values),isSlice:this.isSlice})};return m}(r.JSONSupport);n.__decorate([N.property({type:String,json:{write:!0}})],L.prototype,"variableName",void 0);n.__decorate([N.property({type:String,
json:{write:!0}})],L.prototype,"dimensionName",void 0);n.__decorate([N.property({type:M.types.array(M.types.oneOf([M.types.native(Number),M.types.array(M.types.native(Number))])),json:{write:!0}})],L.prototype,"values",void 0);n.__decorate([N.property({type:Boolean,json:{write:!0}})],L.prototype,"isSlice",void 0);return L=k=n.__decorate([W.subclass("esri.layers.support.DimensionalDefinition")],L)})},"esri/layers/support/RasterJobHandler":function(){define(["../../core/Error","./PixelBlock","../../core/workers/workers"],
function(R,n,L){return function(){function X(){this._workerThread=null;this._destroyed=!1}var A=X.prototype;A.initialize=async function(){const M=await L.open("RasterWorker");this._destroyed?M.close():this._workerThread=M};A.destroy=function(){this._destroyed=!0;this._workerThread&&(this._workerThread.close(),this._workerThread=null)};A.decode=async function(M,N){if(!this._workerThread)throw new R("raster-jobhandler:no-connection","no available worker connection");return(M=await this._workerThread.invoke("decode",
M,N))?new n(M):null};A.symbolize=async function(M,N){if(!this._workerThread)throw new R("raster-jobhandler:no-connection","no available worker connection");M={extent:M.extent&&M.extent.toJSON(),pixelBlock:M.pixelBlock.toJSON(),simpleStretchParams:M.simpleStretchParams,bandIds:M.bandIds};return(N=await this._workerThread.invoke("symbolize",M,N))?new n(N):null};A.updateSymbolizer=async function(M,N){var U;if(!this._workerThread)throw new R("raster-jobhandler:no-connection","no available worker connection");
const W=null==M?void 0:null==(U=M.rendererJSON)?void 0:U.histograms;await Promise.all(this._workerThread.broadcast("updateSymbolizer",{symbolizerJSON:M.toJSON(),histograms:W},N))};A.stretch=async function(M,N){if(!this._workerThread)throw new R("raster-jobhandler:no-connection","no available worker connection");if(null==M||!M.pixelBlock)return null;M={srcPixelBlock:M.pixelBlock.toJSON(),stretchParams:M.stretchParams};return(N=await this._workerThread.invoke("stretch",M,N))?new n(N):null};A.split=
async function(M,N){if(!this._workerThread)throw new R("raster-jobhandler:no-connection","no available worker connection");if(null==M||!M.pixelBlock)return null;M={srcPixelBlock:M.pixelBlock.toJSON(),tileSize:M.tileSize,maximumPyramidLevel:M.maximumPyramidLevel};const U=await this._workerThread.invoke("split",M,N);U&&U.forEach((W,I)=>{U.set(I,W?n.fromJSON(W):null)});return Promise.resolve(U)};A.estimateStatisticsHistograms=async function(M,N){if(!this._workerThread)throw new R("raster-jobhandler:no-connection",
"no available worker connection");if(null==M||!M.pixelBlock)return null;M={srcPixelBlock:M.pixelBlock.toJSON()};N=await this._workerThread.invoke("estimateStatisticsHistograms",M,N);return Promise.resolve(N)};A.mosaicAndTransform=async function(M,N){var U;if(!this._workerThread)throw new R("raster-jobhandler:no-connection","no available worker connection");if(null==M||null==(U=M.srcPixelBlocks)||!U.length)return null;M={...M,srcPixelBlocks:M.srcPixelBlocks.map(W=>W?W.toJSON():null)};return(N=await this._workerThread.invoke("mosaicAndTransform",
M,N))?new n(N):null};return X}()})},"esri/renderers/support/rasterRendererHelper":function(){define("exports ../../core/maybe ../../Color ../../tasks/support/AlgorithmicColorRamp ../../tasks/support/MultipartColorRamp ./AuthoringInfo ../../core/unitUtils ./ClassBreakInfo ../ClassBreaksRenderer ./colorRampUtils ../RasterColormapRenderer ../RasterShadedReliefRenderer ../RasterStretchRenderer ./UniqueValueInfo ../UniqueValueRenderer ../VectorFieldRenderer ../../rasterRenderers ../../layers/support/Field ../../layers/support/RasterInfo ../../tasks/support/ClassBreaksDefinition ../../tasks/support/generateRendererUtils".split(" "),
function(R,n,L,X,A,M,N,U,W,I,z,D,r,k,g,m,p,y,E,w,q){function t(K,P){var Z,aa,ha,ea;K=B(K,null==P?void 0:P.variableName);const {bandCount:f}=K;let {bandIds:u,stretchType:T}=P||{};null!=(Z=u)&&Z.some(ia=>ia>=f)&&(u=null);let S=n.unwrap(K.statistics),ba=n.unwrap(K.histograms);if(1<f){var fa;u=null!=(fa=u)&&fa.length?u:J(K);S=null==S?null:u.map(ia=>S[ia]);ba=null==ba?null:u.map(ia=>ba[ia])}else u=[0];null==T&&(T=l(K));P=!1;switch(T){case "none":P=!1;break;case "percent-clip":P=!(null!=(aa=ba)&&aa.length);
break;default:P=!(null!=(ha=S)&&ha.length)}K=1===(null==(ea=u)?void 0:ea.length)&&"scientific"===K.dataType?O:null;ea=new r({stretchType:T,dynamicRangeAdjustment:P,colorRamp:K,outputMin:0,outputMax:255,gamma:1===u.length?[1]:[1,1,1],useGamma:!1});"percent-clip"===T?ea.maxPercent=ea.minPercent=.25:"standard-deviation"===T&&(ea.numberOfStandardDeviations=2);if(!P)if("percent-clip"===T)ea.histograms=ba;else if("min-max"===T||"standard-deviation"===T)ea.statistics=S;return ea}function B(K,P){if(null==
P)return K;let Z=n.unwrap(K.statistics),aa=n.unwrap(K.histograms);const {multidimensionalInfo:ha}=K;if(P&&n.isSome(ha)){const {statistics:ea,histograms:f}=ha.variables.find(u=>u.name===P);null!=ea&&ea.length&&(Z=ea);null!=f&&f.length&&(aa=f)}return E.fromJSON({...K.toJSON(),statistics:Z,histograms:aa})}function J(K){const P=K.bandCount;if(1===P)return null;if(2===P)return[0];K=K.keyProperties&&K.keyProperties.BandProperties;let Z;if(K&&K.length===P){const {red:aa,green:ha,blue:ea,nir:f}=G(K);null!=
aa&&null!=ha&&null!=ea?Z=[aa,ha,ea]:null!=f&&null!=aa&&null!=ha&&(Z=[f,aa,ha])}!Z&&3<=P&&(Z=[0,1,2]);return Z}function G(K){const P={};for(let ea=0;ea<K.length;ea++){var Z,aa=K[ea],ha=null==(Z=aa.BandName)?void 0:Z.toLowerCase();"red"===ha?P.red=ea:"green"===ha?P.green=ea:"blue"===ha?P.blue=ea:"nearinfrared"===ha||"nearinfrared_1"===ha||"nir"===ha?P.nir=ea:aa.WavelengthMax&&aa.WavelengthMin&&(ha=aa.WavelengthMin,aa=aa.WavelengthMax,null==P.blue&&410<=ha&&480>=ha&&480<=aa&&540>=aa?P.blue=ea:null==
P.green&&490<=ha&&560>=ha&&560<=aa&&610>=aa?P.green=ea:null==P.red&&595<=ha&&670>=ha&&660<=aa&&730>=aa?P.red=ea:null==P.nir&&700<=ha&&860>=ha&&800<=aa&&950>=aa&&(P.nir=ea))}return P}function l(K){let P="percent-clip";const {pixelType:Z,dataType:aa,histograms:ha,statistics:ea}=K;"u8"!==Z||"processed"!==aa&&n.isSome(ha)&&n.isSome(ea)?"u8"===Z||"elevation"===aa||"scientific"===aa?P="min-max":n.isSome(ha)?P="percent-clip":n.isSome(ea)&&(P=P="min-max"):P="none";return P}function h(K,P,Z,aa){if(!a(K,P))return null;
const {attributeTable:ha,statistics:ea}=K,f=x(ha,P),u=c(ha,"red"),T=c(ha,"green"),S=c(ha,"blue");K=new M;const ba=[],fa=new Set,ia=!!(u&&T&&S);if(n.isSome(ha))ha.features.forEach(ka=>{const ja=ka.attributes[f.name];fa.has(ka.attributes[f.name])||null==ja||(fa.add(ja),ba.push(new k({value:ka.attributes[f.name],label:ka.attributes[f.name]+"",symbol:{type:"simple-fill",style:"solid",outline:null,color:ia?new L([ka.attributes[u.name],ka.attributes[T.name],ka.attributes[S.name],1]):new L([0,0,0,0])}})))});
else if(null!=ea&&ea[0])for(P=ea[0].min;P<=ea[0].max;P++)ba.push(new k({value:P,label:P.toString(),symbol:{type:"simple-fill",style:"solid",outline:null,color:new L([0,0,0,0])}}));ba.sort((ka,ja)=>ka.value&&"string"===typeof ka.value.valueOf()?0:ka.value>ja.value?1:-1);if(!ia){const ka=I.convertColorRampToColormap(Q,ba.length);ba.forEach((ja,ma)=>ja.symbol.color=new L(ka[ma].slice(1,4)));K.colorRamp=Q}if(Z||aa){const ka=Z||I.convertColorRampToColormap(aa,ba.length).map(ja=>ja.slice(1));ba.forEach((ja,
ma)=>ja.symbol.color=new L(ka[ma]));K.colorRamp=aa}return new g({field:f.name,uniqueValueInfos:ba,authoringInfo:K})}function x(K,P){let Z;n.isSome(K)?(Z=P?K.fields.find(aa=>P.toLowerCase()===aa.name.toLowerCase()):K.fields.find(aa=>"string"===aa.type&&-1<aa.name.toLowerCase().indexOf("class")),Z||(Z=K.fields.find(aa=>"string"===aa.type))||(Z=c(K,"value"))):Z=new y({name:"value"});return Z}function c(K,P){return n.isSome(K)?K.fields.find(Z=>Z.name.toLowerCase()===P):null}function a(K,P){const {attributeTable:Z,
bandCount:aa}=K;return!n.isSome(Z)&&C(K)?!0:!n.isSome(Z)||1<aa||P&&null==Z.fields.find(ha=>ha.name.toLowerCase()===P.toLowerCase())?!1:!0}function e(K){const {bandCount:P,colormap:Z}=K;return n.isSome(Z)&&Z.length&&1===P}function b(K){if(!e(K))return null;let P;const {attributeTable:Z,colormap:aa}=K;if(n.isSome(Z)){const ha=c(Z,"value"),ea=x(Z);"string"===ea.type&&(P={},Z.features.forEach(f=>{f=f.attributes;P[f[ha.name]]=ea?f[ea.name]:f[ha.name]}))}return z.createFromColormap(n.unwrap(aa),P)}function d(K){return"elevation"===
K.dataType}function v(K){const {attributeTable:P,bandCount:Z}=K;return 1===Z&&(n.isSome(P)||n.isSome(K.histograms))}function C(K){var P,Z,aa;return-1<["u8","s8"].indexOf(K.pixelType)&&null!=(null==(P=K.statistics)?void 0:null==(Z=P[0])?void 0:Z.min)&&null!=(null==(aa=K.statistics[0])?void 0:aa.max)&&1===K.bandCount}function H(K){({dataType:K}=K);return"vector-uv"===K||"vector-magdir"===K}function F(K){return H(K)?new m:null}function V(K){var P;return{color:null==(P=K.symbolLayers[0].material)?void 0:
P.color,type:"esriSFS",style:"esriSFSSolid"}}const O=A.fromJSON({type:"multipart",colorRamps:[{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]}),Q=A.fromJSON(I.PREDEFINED_JSON_COLOR_RAMPS[0]);R.createClassBreaksRenderer=function(K,P){K=B(K,null==P?void 0:P.variableName);const {attributeTable:Z}=K;if(!v(K))return null;const aa=n.isSome(K.histograms)?K.histograms[0]:null;var ha=(null==P?void 0:P.numClasses)||5;const ea=
new M({classificationMethod:null==P?void 0:P.classificationMethod,colorRamp:null==P?void 0:P.colorRamp});let f=(null==P?void 0:P.field)||"value";const u=[],T=[];if(n.isSome(Z)){const ba=Z.fields.find(ja=>"count"===ja.name.toLowerCase()),fa=Z.fields.find(ja=>ja.name.toLowerCase()===f.toLowerCase());f=fa.name;const ia=Z.features.length;let ka=0;Z.features.forEach(ja=>ka+=ja.attributes[ba.name]/ia);Z.features.forEach(ja=>{const ma=ja.attributes[fa.name];ja=ja.attributes[ba.name];if(0<ja){T.push(ja);
ja=Math.max(1,Math.round(ja/ia/ka*1E3));for(let na=0;na<ja;na++)u.push(ma)}})}else{({pixelType:K}=K);const ba=(aa.max-aa.min)/aa.size,fa=(K=-1<K.indexOf("s")||-1<K.indexOf("u"))&&1===ba?Math.floor(aa.min+.5):aa.min,ia=K&&1===ba?Math.floor(aa.max-.5):aa.max,ka=aa.size;let ja=0;aa.counts.forEach(ma=>ja+=ma/ka);aa.counts.forEach((ma,na)=>{if(0<ma){T.push(ma);ma=Math.max(1,Math.round(ma/ka/ja*1E3));na=0===na?fa:na===ka-1?ia:aa.min+ba*(na+.5);for(let oa=0;oa<ma;oa++)u.push(na)}})}ha=q.createGenerateRendererClassBreaks({values:u,
valueFrequency:T,normalizationTotal:null,definition:new w({classificationMethod:(null==P?void 0:P.classificationMethod)||"natural-breaks",breakCount:ha,definedInterval:null==P?void 0:P.definedInterval})});let S=null==P?void 0:P.colors;S||(P=(null==P?void 0:P.colorRamp)||O,ea.colorRamp=P,S=I.convertColorRampToColormap(P,ha.classBreaks.length,!0).map(ba=>ba.slice(1)));P=ha.classBreaks.map((ba,fa)=>new U({minValue:ba.minValue,maxValue:ba.maxValue,label:ba.label,symbol:{type:"simple-fill",color:S[fa]}}));
return new W({field:f,classBreakInfos:P,authoringInfo:ea})};R.createColorRamp=function(K){const P=[];for(let Z=0;Z<K.length-1;Z++)P[Z]=new X({algorithm:"hsv",fromColor:K[Z],toColor:K[Z+1]||new L({r:255,g:255,b:255,a:1})});return 2<K.length?new A({colorRamps:P}):P[0]};R.createColormapRenderer=b;R.createDefaultRenderer=function(K,P){const {attributeTable:Z,colormap:aa,dataType:ha}=K;if("vector-uv"===ha||"vector-magdir"===ha){var ea=F(K);if(n.isSome(ea))return ea}return n.isSome(aa)&&(ea=b(K),n.isSome(ea))||
n.isSome(Z)&&(ea=h(K),n.isSome(ea))?ea:t(K,P)};R.createShadedReliefRenderer=function(K,P){var Z;if(!d(K))return null;({extent:K}=K);K=K.width*N.getMetersPerUnitForSR(K.spatialReference);P=null!=(Z=P)?Z:"multi-directional";return new D({hillshadeType:P,scalingType:5E6<K?"adjusted":"none"})};R.createStretchRenderer=t;R.createUVRenderer=h;R.createVectorFieldRenderer=F;R.getBandNames=function(K,P){var Z;const aa=K.keyProperties&&K.keyProperties.BandProperties;P=null!=(Z=P)&&Z.length?P:Array.from(Array(K.bandCount).keys());
return P.map(ha=>aa&&aa.length===K.bandCount?aa[ha]&&aa[ha].BandName||"band_"+(ha+1):"band_"+(ha+1))};R.getClassField=x;R.getDefaultBandCombination=J;R.getDefaultInterpolation=function(K,P,Z){const aa=["nearest","bilinear","cubic","majority"].find(ha=>ha===(null==Z?void 0:Z.toLowerCase()));return"Map"===P?null!=aa?aa:"bilinear":"thematic"===K.dataType||K.attributeTable||K.colormap?"nearest"===aa||"majority"===aa?aa:"nearest":null!=aa?aa:"bilinear"};R.getSupportedRendererTypes=function(K){const P=
["raster-stretch"];e(K)&&P.push("raster-colormap");a(K)&&P.push("unique-value");v(K)&&P.push("class-breaks");d(K)&&P.push("raster-shaded-relief");H(K)&&P.push("vector-field");return P};R.getWellKnownBandIndexes=G;R.isClassBreaksSupported=v;R.isColormapRendererSupported=e;R.isShadedReliefRendererSupported=d;R.isSingleBand8BitRasterWithStats=C;R.isUVRendererSupported=a;R.isVectorFieldRendererSupported=H;R.normalizeRendererJSON=function(K){if("uniqueValue"===K.type){var P,Z=K.uniqueValueInfos,aa=Z[0].symbol;
null!=aa&&null!=(P=aa.symbolLayers)&&P.length&&(K.uniqueValueInfos=Z.map(ha=>({value:ha.value,label:ha.label,symbol:ha.symbol?V(ha.symbol):null})));return K}"classBreaks"===K.type&&(P=K.classBreakInfos,aa=P[0].symbol,null!=aa&&null!=(Z=aa.symbolLayers)&&Z.length&&(K.classBreakInfos=P.map(ha=>({classMinValue:ha.classMinValue,classMaxValue:ha.classMaxValue,label:ha.label,symbol:ha.symbol?V(ha.symbol):null}))));return K};Object.defineProperty(R,"__esModule",{value:!0})})},"esri/layers/support/RasterInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../geometry/Extent".split(" "),
function(R,n,L,X,A,M,N,U,W,I,z,D,r){L=function(k){function g(m){m=k.call(this,m)||this;m.attributeTable=null;m.bandCount=null;m.colormap=null;m.extent=null;m.format=void 0;m.height=null;m.width=null;m.histograms=null;m.keyProperties={};m.multidimensionalInfo=null;m.noDataValue=null;m.pixelSize=null;m.pixelType=null;m.isPseudoSpatialReference=!1;m.spatialReference=null;m.statistics=null;m.storageInfo=null;m.transform=null;return m}R._inheritsLoose(g,k);R._createClass(g,[{key:"dataType",get:function(){const m=
this.keyProperties&&this.keyProperties.DataType;return m?m.toLowerCase():"generic"}},{key:"nativeExtent",get:function(){return this._get("nativeExtent")||this.extent},set:function(m){m&&this._set("nativeExtent",m)}},{key:"nativePixelSize",get:function(){if(null==this.transform)return this.pixelSize;const m=this.nativeExtent;return{x:m.width/this.width,y:m.height/this.height}}}]);return g}(D.JSONSupport);n.__decorate([M.property({json:{write:!0}})],L.prototype,"attributeTable",void 0);n.__decorate([M.property({json:{write:!0}})],
L.prototype,"bandCount",void 0);n.__decorate([M.property({json:{write:!0}})],L.prototype,"colormap",void 0);n.__decorate([M.property({type:String,readOnly:!0})],L.prototype,"dataType",null);n.__decorate([M.property({type:r,json:{write:!0}})],L.prototype,"extent",void 0);n.__decorate([M.property({type:r,json:{write:!0}})],L.prototype,"nativeExtent",null);n.__decorate([M.property({json:{write:!0}})],L.prototype,"nativePixelSize",null);n.__decorate([M.property({json:{write:!0}})],L.prototype,"format",
void 0);n.__decorate([M.property({json:{write:!0}})],L.prototype,"height",void 0);n.__decorate([M.property({json:{write:!0}})],L.prototype,"width",void 0);n.__decorate([M.property({json:{write:!0}})],L.prototype,"histograms",void 0);n.__decorate([M.property({json:{write:!0}})],L.prototype,"keyProperties",void 0);n.__decorate([M.property({json:{write:!0}})],L.prototype,"multidimensionalInfo",void 0);n.__decorate([M.property()],L.prototype,"noDataValue",void 0);n.__decorate([M.property({json:{write:!0}})],
L.prototype,"pixelSize",void 0);n.__decorate([M.property({json:{write:!0}})],L.prototype,"pixelType",void 0);n.__decorate([M.property()],L.prototype,"isPseudoSpatialReference",void 0);n.__decorate([M.property({json:{write:!0}})],L.prototype,"spatialReference",void 0);n.__decorate([M.property({json:{write:!0}})],L.prototype,"statistics",void 0);n.__decorate([M.property({json:{write:!0}})],L.prototype,"storageInfo",void 0);n.__decorate([M.property({json:{write:!0}})],L.prototype,"transform",void 0);
return L=n.__decorate([U.subclass("esri.layers.support.RasterInfo")],L)})},"esri/tasks/support/ClassBreaksDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ./ClassificationDefinition".split(" "),function(R,
n,L,X,A,M,N,U,W,I,z,D){L=new N.JSONMap({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"});N=new N.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});D=function(r){function k(){var g=r.apply(this,arguments)||this;g.breakCount=null;g.classificationField=
null;g.classificationMethod=null;g.normalizationField=null;g.normalizationType=null;g.type="class-breaks-definition";return g}R._inheritsLoose(k,r);R._createClass(k,[{key:"standardDeviationInterval",set:function(g){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",g)}},{key:"definedInterval",set:function(g){"defined-interval"===this.classificationMethod&&this._set("definedInterval",g)}}]);return k}(D);n.__decorate([M.property({json:{write:!0}})],D.prototype,"breakCount",
void 0);n.__decorate([M.property({json:{write:!0}})],D.prototype,"classificationField",void 0);n.__decorate([M.property({type:String,json:{read:L.read,write:L.write}})],D.prototype,"classificationMethod",void 0);n.__decorate([M.property({json:{write:!0}})],D.prototype,"normalizationField",void 0);n.__decorate([M.property({json:{read:N.read,write:N.write}})],D.prototype,"normalizationType",void 0);n.__decorate([M.property({value:null,json:{write:!0}})],D.prototype,"standardDeviationInterval",null);
n.__decorate([M.property({value:null,json:{write:!0}})],D.prototype,"definedInterval",null);n.__decorate([M.property()],D.prototype,"type",void 0);return D=n.__decorate([U.subclass("esri.tasks.support.ClassBreaksDefinition")],D)})},"esri/tasks/support/ClassificationDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../symbols/Symbol ./colorRamps".split(" "),
function(R,n,L,X,A,M,N,U,W,I,z,D,r,k){L=new N.JSONMap({classBreaksDef:"class-breaks-definition",uniqueValueDef:"unique-value-definition"});D=function(g){function m(){var p=g.apply(this,arguments)||this;p.baseSymbol=null;p.colorRamp=null;p.type=null;return p}R._inheritsLoose(m,g);return m}(D.JSONSupport);n.__decorate([M.property({type:r,json:{write:!0}})],D.prototype,"baseSymbol",void 0);n.__decorate([M.property({types:k.types,json:{read:{reader:k.fromJSON},write:!0}})],D.prototype,"colorRamp",void 0);
n.__decorate([M.property({json:{read:L.read,write:L.write}})],D.prototype,"type",void 0);return D=n.__decorate([U.subclass("esri.tasks.support.ClassificationDefinition")],D)})},"esri/tasks/support/generateRendererUtils":function(){define(["exports"],function(R){function n(z){const {classificationMethod:D,breakCount:r,normalizationType:k,definedInterval:g}=z.definition,m=[];var p=z.values;if(0===p.length)return[];p=p.sort((B,J)=>B-J);var y=p[0],E=p[p.length-1];if("equal-interval"===D)if(p.length>=
r){p=(E-y)/r;z=y;for(var w=1;w<r;w++){var q=Number((y+w*p).toFixed(6));m.push({minValue:z,maxValue:q,label:L(z,q,k)});z=q}m.push({minValue:z,maxValue:E,label:L(z,E,k)})}else p.forEach(B=>{m.push({minValue:B,maxValue:B,label:L(B,B,k)})});else if("natural-breaks"===D){p=X(p);z=A(p.uniqueValues,z.valueFrequency||p.valueFrequency,r);for(w=1;w<r;w++)p.uniqueValues.length>w&&(q=Number(p.uniqueValues[z[w]].toFixed(6)),m.push({minValue:y,maxValue:q,label:L(y,q,k)}),y=q);m.push({minValue:y,maxValue:E,label:L(y,
E,k)})}else if("quantile"===D)if(p.length>=r&&y!==E){z=Math.ceil(p.length/r);w=0;for(q=1;q<r;q++){var t=z+w-1;t>p.length&&(t=p.length-1);0>t&&(t=0);m.push({minValue:y,maxValue:p[t],label:L(y,p[t],k)});y=p[t];w+=z;z=Math.ceil((p.length-w)/(r-q))}m.push({minValue:y,maxValue:E,label:L(y,E,k)})}else for(E=-1,y=0;y<p.length;y++)z=p[y],z!==E&&(E=z,m.push({minValue:E,maxValue:z,label:L(E,z,k)}),E=z);else if("standard-deviation"===D)if(z=U(p),w=W(p,z),0===w)m.push({minValue:p[0],maxValue:p[0],label:L(p[0],
p[0],k)});else{p=N(y,E,r,z,w)*w;w=0;for(q=r;1<=q;q--)t=Number((z-(q-.5)*p).toFixed(6)),m.push({minValue:y,maxValue:t,label:L(y,t,k)}),y=t,w++;q=Number((z+.5*p).toFixed(6));m.push({minValue:y,maxValue:q,label:L(y,q,k)});y=q;w++;for(t=1;t<=r;t++)q=w===2*r?E:Number((z+(t+.5)*p).toFixed(6)),m.push({minValue:y,maxValue:q,label:L(y,q,k)}),y=q,w++}else if("defined-interval"===D){if(!g)return m;E=p[0];p=p[p.length-1];y=Math.ceil((p-E)/g);z=E;for(w=1;w<y;w++)q=Number((E+w*g).toFixed(6)),m.push({minValue:z,
maxValue:q,label:L(z,q,k)}),z=q;m.push({minValue:z,maxValue:p,label:L(z,p,k)})}return m}function L(z,D,r){let k=null;return k=z===D?r&&"percent-of-total"===r?z+"%":z.toString():r&&"percent-of-total"===r?z+"% - "+D+"%":z+" - "+D}function X(z){const D=[],r=[];let k=Number.MIN_VALUE,g=1,m=-1;for(let p=0;p<z.length;p++){const y=z[p];y===k?(g++,r[m]=g):null!==y&&(D.push(y),k=y,g=1,r.push(g),m++)}return{uniqueValues:D,valueFrequency:r}}function A(z,D,r){var k=z.length;const g=[];r>k&&(r=k);for(var m=0;m<
r;m++)g.push(Math.round(m*k/r-1));g.push(k-1);m=M(g,z,D,r);{k=m.mean;m=m.sdcm;var p=r,y=0,E=0;let q=0,t=0,B=!0;for(let J=0;2>J&&B;J++){0===J&&(B=!1);for(var w=0;w<p-1;w++)for(;g[w+1]+1!==g[w+2];)if(g[w+1]+=1,y=I(w,g,z,D),q=y.sbMean,y=y.sbSdcm,E=I(w+1,g,z,D),t=E.sbMean,E=E.sbSdcm,y+E<m[w]+m[w+1])m[w]=y,m[w+1]=E,k[w]=q,k[w+1]=t,B=!0;else{--g[w+1];break}for(w=p-1;0<w;w--)for(;g[w]!==g[w-1]+1;)if(--g[w],y=I(w-1,g,z,D),q=y.sbMean,y=y.sbSdcm,E=I(w,g,z,D),t=E.sbMean,E=E.sbSdcm,y+E<m[w-1]+m[w])m[w-1]=y,m[w]=
E,k[w-1]=q,k[w]=t,B=!0;else{g[w]+=1;break}}k=B}k&&(m=M(g,z,D,r));return g}function M(z,D,r,k){let g=[];var m=[],p=[];let y=0;const E=[],w=[];for(var q=0;q<k;q++){var t=I(q,z,D,r);E.push(t.sbMean);w.push(t.sbSdcm);y+=w[q]}t=y;for(q=!0;q||y<t;){q=!1;g=[];for(m=0;m<k;m++)g.push(z[m]);for(p=0;p<k;p++)for(t=z[p]+1;t<=z[p+1];t++)if(m=D[t],0<p&&t!==z[p+1]&&Math.abs(m-E[p])>Math.abs(m-E[p-1]))z[p]=t;else if(p<k-1&&z[p]!==t-1&&Math.abs(m-E[p])>Math.abs(m-E[p+1])){z[p+1]=t-1;break}t=y;y=0;m=[];p=[];for(let B=
0;B<k;B++){m.push(E[B]);p.push(w[B]);const J=I(B,z,D,r);E[B]=J.sbMean;w[B]=J.sbSdcm;y+=w[B]}}if(y>t){for(D=0;D<k;D++)z[D]=g[D],E[D]=m[D],w[D]=p[D];y=t}return{mean:E,sdcm:w}}function N(z,D,r,k,g){z=Math.max(k-z,D-k)/g/r;return 1<=z?1:.5<=z?.5:.25}function U(z){let D=0;for(let r=0;r<z.length;r++)D+=z[r];return D/=z.length}function W(z,D){let r=0;for(let k=0;k<z.length;k++){const g=z[k];r+=(g-D)*(g-D)}r/=z.length;return Math.sqrt(r)}function I(z,D,r,k){var g=0,m=0;for(var p=D[z]+1;p<=D[z+1];p++){const y=
k[p];g+=r[p]*y;m+=y}0>=m&&console.log("Exception in Natural Breaks calculation");g/=m;m=0;for(p=D[z]+1;p<=D[z+1];p++)m+=k[p]*(r[p]-g)**2;return{sbMean:g,sbSdcm:m}}R.createGenerateRendererClassBreaks=function(z){const {normalizationTotal:D}=z;return{classBreaks:n(z),normalizationTotal:D}};R.createGenerateRendererUniqueValues=function(z){z=X(z);const D=[],r=z.uniqueValues.length;for(let k=0;k<r;k++){const g=z.uniqueValues[k];D.push({value:g,count:z.valueFrequency[k],label:g.toString()})}return{uniqueValues:D}};
Object.defineProperty(R,"__esModule",{value:!0})})},"esri/renderers/support/RasterSymbolizer":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/maybe ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../core/colorUtils ./colorRampUtils ../../layers/support/RasterInfo ../../layers/support/rasterFunctions/pixelUtils ../../layers/support/rasterFunctions/surfaceUtils".split(" "),
function(R,n,L,X,A,M,N,U,W,I,z,D,r,k,g,m,p,y){function E(B,J){const {attributeTable:G,bandCount:l}=B;return!X.isSome(G)||1<l||J&&null==G.fields.find(h=>h.name.toLowerCase()===J.toLowerCase())?!1:!0}function w(B){const {bandCount:J,colormap:G}=B;return X.isSome(G)&&G.length&&1===J}const q=A.getLogger("esri.renderers.support.RasterSymbolizer"),t={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-3.4*1E39,3.4*1E39],
f64:[-Number.MAX_VALUE,Number.MAX_VALUE]};L=function(B){function J(l){return B.call(this,l)||this}R._inheritsLoose(J,B);var G=J.prototype;G.bind=function(){const {rendererJSON:l}=this;if(!l)return!1;this.lookup={rendererJSON:{}};let h;switch(l.type){case "uniqueValue":h=this._updateUVRenderer(l);break;case "rasterColormap":h=this._updateColormapRenderer(l);break;case "rasterStretch":h=this._updateStretchRenderer(l);break;case "classBreaks":h=this._updateClassBreaksRenderer(l);break;case "rasterShadedRelief":h=
this._updateShadedReliefRenderer(l)}return h};G.symbolize=function(l){let h=l&&l.pixelBlock;if(!this.isValidPixelBlock(h))return h;if(l.simpleStretchParams&&"rasterStretch"===this.rendererJSON.type)return this.simpleStretch(h,l.simpleStretchParams);try{3<h.pixels.length&&(h=p.extractBands(h,[0,1,2]));let x;switch(this.rendererJSON.type){case "uniqueValue":case "rasterColormap":x=this._symbolize_colormap(h);break;case "classBreaks":x=this._symbolize_classBreaks(h);break;case "rasterStretch":x=this._symbolize_stretch(h,
l.bandIds);break;case "rasterShadedRelief":({extent:l}=l),x=this._symbolize_shadedRelief(h,{isGCS:l.spatialReference.isGeographic,resolution:{x:(l.xmax-l.xmin)/h.width,y:(l.ymax-l.ymin)/h.height}})}return x}catch(x){return q.error("symbolize",x.message),h}};G.simpleStretch=function(l,h){if(!this.isValidPixelBlock(l))return l;try{return 3<l.pixels.length&&(l=p.extractBands(l,[0,1,2])),p.stretch(l,h)}catch(x){return q.error("symbolize",x.message),l}};G.generateWebGLParameters=function(l){if(-1<["uniqueValue",
"rasterColormap","classBreaks"].indexOf(this.rendererJSON.type)){var h;const {indexedColormap:b,offset:d}=(null==(h=this.lookup)?void 0:h.colormapLut)||{};return{colormap:b,colormapOffset:d,type:"lut"}}const {pixelBlock:x,isGCS:c,resolution:a,bandIds:e}=l;({rendererJSON:l}=this);return"rasterStretch"===l.type?this.generateStretchWebGLParams(x,l,e):"rasterShadedRelief"===l.type?this.generateShadedReliefWebGLParams(l,c,a):null};G._isLUTChanged=function(l){if(!this.lookup||!this.lookup.rendererJSON)return!0;
if("colorRamp"in this.rendererJSON){const h=this.rendererJSON.colorRamp;if(l)return JSON.stringify(h)!==JSON.stringify(this.lookup.rendererJSON.colorRamp)}return JSON.stringify(this.rendererJSON)!==JSON.stringify(this.lookup.rendererJSON)};G._symbolize_colormap=function(l){return this._isLUTChanged()&&!this.bind()?l:p.colorize(l,this.lookup.colormapLut)};G._symbolize_classBreaks=function(l){const h=-1<["u8","u16","s8","s16"].indexOf(this.rasterInfo.pixelType);return this._isLUTChanged()&&!this.bind()?
l:h?p.colorize(l,this.lookup.colormapLut):p.remapColor(l,this.lookup.remapLut)};G._symbolize_stretch=function(l,h){const {pixelType:x,bandCount:c}=this.rasterInfo,a=this.rendererJSON,e=-1<["u8","u16","s8","s16"].indexOf(x);let b;var {dra:d}=a;var v=a.useGamma?a.gamma:null;if("histogramEqualization"===a.stretchType){var C=d?null:this.lookup.histogramLut;h=this.getStretchCutoff(a,l,h,!C);v=p.stretch(l,{...h,gamma:v});v=p.lookupPixels(v,{lut:d?h.histogramLut:C,offset:0})}else if(e){if(d)d=this.getStretchCutoff(a,
l,h),b=p.createStretchLUT({pixelType:x,...d,gamma:v});else{if(this._isLUTChanged()&&!this.bind())return l;b=this.lookup?this.lookup.stretchLut:null}if(!b)return l;1<c&&(null==h?void 0:h.length)===l.pixels.length&&(null==(C=b)?void 0:C.lut.length)===c&&(b={lut:h.map(H=>b.lut[H]),offset:b.offset});v=p.lookupPixels(l,b)}else d=this.getStretchCutoff(a,l,h),v=p.stretch(l,{...d,gamma:v});if(a.colorRamp){if(this._isLUTChanged(!0)&&!this.bind())return l;v=p.colorize(v,this.lookup.colormapLut)}return v};G._symbolize_shadedRelief=
function(l,h){var x,c,a=this.rendererJSON;h=y.hillshade(l,{...a,...h});if(!a.colorRamp||this._isLUTChanged(!0)&&!this.bind())return h;a=this.lookup?this.lookup.hsvMap:null;if(!a)return h;const e=null!=(x=null==(c=X.unwrap(this.rasterInfo.statistics))?void 0:c[0])?x:{min:0,max:8E3};y.tintHillshade(h,l,a,e);return h};G._updateUVRenderer=function(l){const {bandCount:h,attributeTable:x,statistics:c,pixelType:a}=this.rasterInfo,e=l.field1;if(!e)return!1;var b=-1<["u8","s8"].indexOf(a)&&c&&null!=c[0].min&&
null!=c[0].max;if(!(E(this.rasterInfo,e)||1===h&&b))return!1;const d=[];if(x){const v=x.fields.filter(C=>"value"===C.name.toLowerCase())[0];if(!v)return!1;x.features.forEach(C=>{var H,F=l.uniqueValueInfos.filter(V=>String(V.value)===String(C.attributes[e]))[0];(F=null==F?void 0:null==(H=F.symbol)?void 0:H.color)&&d.push([C.attributes[v.name]].concat(F))})}else{if("value"!==e.toLowerCase())return!1;l.uniqueValueInfos.forEach(v=>{var C;const H=null==v?void 0:null==(C=v.symbol)?void 0:C.color;H&&d.push([parseInt(""+
v.value,10)].concat(H))})}if(0===d.length)return!1;b=p.createColormapLUT({colormap:d});this.lookup={rendererJSON:l,colormapLut:b};return this.canRenderInWebGL=!0};G._updateColormapRenderer=function(l){if(!w(this.rasterInfo))return!1;var h=l.colormapInfos.map(x=>[x.value].concat(x.color)).sort((x,c)=>x[0]-c[0]);if(!h||0===h.length)return!1;h=p.createColormapLUT({colormap:h});this.lookup={rendererJSON:l,colormapLut:h};return this.canRenderInWebGL=!0};G._updateShadedReliefRenderer=function(l){if("elevation"!==
this.rasterInfo.dataType)return!1;if(l.colorRamp){var h=g.convertColorRampToColormap(l.colorRamp,256,!0);h=p.createColormapLUT({colormap:h});const x=[],c=h.indexedColormap;for(let a=0;a<c.length;a+=4){const e=k.toHSV({r:c[a],g:c[a+1],b:c[a+2]});x.push([e.h/60,e.s/100,255*e.v/100])}this.lookup={rendererJSON:l,colormapLut:h,hsvMap:x}}else this.lookup=null;return this.canRenderInWebGL=!0};G._updateClassBreaksRenderer=function(l){var h=-1<["u8","u16","s8","s16"].indexOf(this.rasterInfo.pixelType),x=l.classBreakInfos;
if(null==x||!x.length)return!1;x=x.sort((d,v)=>d.classMaxValue-v.classMaxValue);const c=x[x.length-1];var a=l.minValue;if(!h){h=[];for(var e=0;e<x.length;e++){var b;h.push({value:null!=(b=x[e].classMinValue)?b:a,mappedColor:x[e].symbol.color});a=x[e].classMaxValue}h.push({value:c.classMaxValue,mappedColor:c.symbol.color});this.lookup={rendererJSON:l,remapLut:h};this.canRenderInWebGL=!1;return!0}b=[];a=Math.floor(l.minValue);for(h=0;h<x.length;h++){for(e=x[h];a<e.classMaxValue;a++)b.push([a].concat(e.symbol.color));
a=Math.ceil(e.classMaxValue)}c.classMaxValue===a&&b.push([c.classMaxValue].concat(c.symbol.color));x=p.createColormapLUT({colormap:b,fillUnspecified:!1});this.lookup={rendererJSON:l,colormapLut:x};return this.canRenderInWebGL=!0};G._isHistogramRequired=function(l){return"percentClip"===l||"histogramEqualization"===l};G._updateStretchRenderer=function(l){let {stretchType:h,dra:x}=l;if(!("none"===h||l.statistics||this.rasterInfo.statistics||x))return!1;var c=X.unwrap(l.histograms||this.rasterInfo.histograms);
!this._isHistogramRequired(l.stretchType)||null!=c&&c.length||x||(h="minMax");const {gamma:a,useGamma:e,colorRamp:b}=l;var d=this.rasterInfo.pixelType;const v=!x&&-1<["u8","u16","s8","s16"].indexOf(d);"histogramEqualization"===h?(d=c.map(C=>p.createHistogramEqualizationLUT(C)),this.lookup={rendererJSON:l,histogramLut:d}):v&&(c=this.getStretchCutoff(l),d=p.createStretchLUT({pixelType:d,...c,gamma:e?a:null}),this.lookup={rendererJSON:l,stretchLut:d});b&&(d=g.convertColorRampToColormap(b,256,!0),this.lookup||
(this.lookup={rendererJSON:l}),this.lookup.colormapLut=p.createColormapLUT({colormap:d}),this.lookup.rendererJSON=l);return this.canRenderInWebGL=!0};G.getStretchCutoff=function(l,h,x,c){var a,e=l.stretchType;if(l.dra)if("minMax"===e&&h.statistics)var b=h.statistics.map(P=>[P.minValue,P.maxValue,0,0]);else{var d=p.estimateStatisticsHistograms(h);b=d.statistics;d=d.histograms}else{var v;b=0<(null==(v=l.statistics)?void 0:v.length)?l.statistics:X.unwrap(this.rasterInfo.statistics);d=l.histograms||X.unwrap(this.rasterInfo.histograms)}!this._isHistogramRequired(e)||
null!=(a=d)&&a.length||(e="minMax");var C=b||d?(b||d).length:this.rasterInfo.bandCount;a=[];v=[];let H;let F,V,O;b&&!Array.isArray(b[0])&&(b=b.map(P=>[P.min,P.max,P.avg,P.stddev]));switch(e){case "none":b=t[this.rasterInfo.pixelType]||t.f32;for(h=0;h<C;h++)a[h]=b[0],v[h]=b[1];break;case "minMax":for(h=0;h<C;h++)a[h]=b[h][0],v[h]=b[h][1];break;case "standardDeviation":for(h=0;h<C;h++)a[h]=b[h][2]-l.numberOfStandardDeviations*b[h][3],v[h]=b[h][2]+l.numberOfStandardDeviations*b[h][3],a[h]<b[h][0]&&(a[h]=
b[h][0]),v[h]>b[h][1]&&(v[h]=b[h][1]);break;case "histogramEqualization":for(h=0;h<C;h++)a[h]=d[h].min,v[h]=d[h].max;break;case "percentClip":for(h=0;h<d.length;h++){b=d[h];F=new Uint32Array(b.size);var Q=b.counts;H=0;C=(b.max-b.min)/b.size;V=-.5===b.min&&1===C?.5:0;for(O=0;O<b.size;O++)H+=Q[O],F[O]=H;Q=l.minPercent*H/100;for(O=0;O<b.size;O++)if(F[O]>Q){a[h]=b.min+C*(O+V);break}Q=(1-l.maxPercent/100)*H;for(O=b.size-2;0<=O;O--)if(F[O]<Q){v[h]=b.min+C*(O+2-V);break}}break;default:for(h=0;h<C;h++)a[h]=
b[h][0],v[h]=b[h][1]}let K;"histogramEqualization"===e?(e=d[0].size||256,l=0,c&&(K=d.map(P=>p.createHistogramEqualizationLUT(P)))):(e=l.max||255,l=l.min||0);return this.getSelectedBandCutoffs({minCutOff:a,maxCutOff:v,outMax:e,outMin:l,histogramLut:K},x)};G.getSelectedBandCutoffs=function(l,h){if(null==h||0===h.length)return l;const x=Math.max.apply(null,h),{minCutOff:c,maxCutOff:a,outMin:e,outMax:b,histogramLut:d}=l;return c.length===h.length||c.length<=x?l:{minCutOff:h.map(v=>c[v]),maxCutOff:h.map(v=>
a[v]),histogramLut:d?h.map(v=>d[v]):null,outMin:e,outMax:b}};G.generateStretchWebGLParams=function(l,h,x){var c;let a=null,e=null;var b=this.lookup&&this.lookup.colormapLut;h.colorRamp&&b&&(a=b.indexedColormap,e=b.offset);"histogramEqualization"===h.stretchType&&(h={...h,stretchType:"minMax"});({gamma:b}=h);const d=!!(h.useGamma&&b&&b.some(O=>1!==O)),{minCutOff:v,maxCutOff:C,outMin:H,outMax:F}=this.getStretchCutoff(h,l,x);h=null==(c=l)?void 0:c.getPlaneCount();2===h&&(l=l.clone(),l.statistics=[l.statistics[0]],
l.pixels=[l.pixels[0]]);l=Math.min(3,(null==x?void 0:x.length)||h||this.rasterInfo.bandCount);x=new Float32Array(l);c=a||d?1:255;for(h=0;h<l;h++)x[h]=(F-H)/(C[h]-v[h])/c;const V=new Float32Array(l);if(d)for(h=0;h<l;h++)V[h]=1<b[h]?2<b[h]?6.5+(b[h]-2)**2.5:6.5+100*(2-b[h])**4:1;return{bandCount:l,outMin:H/c,outMax:F/c,minCutOff:v,maxCutOff:C,factor:x,useGamma:d,gamma:d?b:[1,1,1],gammaCorrection:d?V:[1,1,1],colormap:a,colormapOffset:e,type:"stretch"}};G.generateShadedReliefWebGLParams=function(l,h,
x){var c,a,e;let b=null,d=null;const v=this.lookup&&this.lookup.colormapLut;l.colorRamp&&v&&(b=v.indexedColormap,d=v.offset);h=y.calculateHillshadeParams({...l,isGCS:h,resolution:x});x=null==(c=X.unwrap(this.rasterInfo.statistics))?void 0:c[0];return{...h,minValue:null!=(a=x.min)?a:0,maxValue:null!=(e=x.max)?e:8E3,hillshadeType:"traditional"===l.hillshadeType?0:1,type:"hillshade",colormap:b,colormapOffset:d}};G.isValidPixelBlock=function(l){return!!(l&&l.pixels&&0<l.pixels.length&&0!==l.validPixelCount)};
return J}(r.JSONSupport);n.__decorate([N.property({json:{write:!0}})],L.prototype,"rendererJSON",void 0);n.__decorate([N.property({type:m,json:{write:!0}})],L.prototype,"rasterInfo",void 0);n.__decorate([N.property({json:{write:!0}})],L.prototype,"lookup",void 0);n.__decorate([N.property()],L.prototype,"canRenderInWebGL",void 0);return L=n.__decorate([W.subclass("esri.renderers.support.RasterSymbolizer")],L)})},"esri/layers/support/rasterFunctions/pixelUtils":function(){define(["exports","../PixelBlock"],
function(R,n){function L(r,k){r=Math.min(Math.max(r,-100),100);k=Math.min(Math.max(k,-100),100);let g,m;const p=new Uint8Array(256);for(g=0;256>g;g++)0<r&&100>r?m=(200*g-25500+510*k)/(2*(100-r))+128:0>=r&&-100<r?m=(200*g-25500+510*k)*(100+r)/2E4+128:100===r?(m=200*g-25500+256*(100-r)+510*k,m=0<m?255:0):-100===r&&(m=128),p[g]=255<m?255:0>m?0:m;return p}function X(r,k,g,m,p,y,E,w){return{xmin:p<=g*r?0:p<g*r+r?p-g*r:r,ymin:y<=m*k?0:y<m*k+k?y-m*k:k,xmax:p+E<=g*r?0:p+E<g*r+r?p+E-g*r:r,ymax:y+w<=m*k?0:
y+w<m*k+k?y+w-m*k:k}}function A(r,k,g,m){var p=r.filter(F=>D(F))[0];if(null==p)return null;const y=m?m.width:k.width;m=m?m.height:k.height;const E=p.width,w=p.height,q=k.width/E;k=k.height/w;const t=g?g.x:0;g=g?g.y:0;const B=p.pixelType;var J=n.getPixelArrayConstructor(B);const G=p.pixels.length;p=[];let l,h;let x,c,a,e,b,d,v;for(c=0;c<G;c++){h=new J(y*m);for(a=0;a<k;a++)for(e=0;e<q;e++){var C=r[a*q+e];if(D(C))for(l=C.pixels[c],v=X(E,w,e,a,t,g,y,m),b=v.ymin;b<v.ymax;b++)for(C=(a*w+b-g)*y+(e*E-t),
x=b*E,d=v.xmin;d<v.xmax;d++)h[C+d]=l[x+d]}p.push(h)}let H;if(r.some(F=>null==F||F.mask&&0<F.mask.length))for(H=new Uint8Array(y*m),a=0;a<k;a++)for(e=0;e<q;e++)if(J=(C=r[a*q+e])?C.mask:null,v=X(E,w,e,a,t,g,y,m),J)for(b=v.ymin;b<v.ymax;b++)for(C=(a*w+b-g)*y+(e*E-t),x=b*E,d=v.xmin;d<v.xmax;d++)H[C+d]=J[x+d];else if(C)for(b=v.ymin;b<v.ymax;b++)for(C=(a*w+b-g)*y+(e*E-t),x=b*E,d=v.xmin;d<v.xmax;d++)H[C+d]=1;else for(b=v.ymin;b<v.ymax;b++)for(C=(a*w+b-g)*y+(e*E-t),x=b*E,d=v.xmin;d<v.xmax;d++)H[C+d]=0;r=
new n({width:y,height:m,pixels:p,pixelType:B,mask:H});r.updateStatistics();return r}function M(r){if(!D(r))return null;const k=r.clone(),{width:g,height:m,pixels:p,mask:y}=r;var E=p[0];r=k.pixels[0];for(let t=2;t<m-1;t++){const B=new Map;for(var w=t-2;w<t+2;w++)for(var q=0;4>q;q++){const J=w*g+q;W(B,E[J],y?y[J]:1)}r[t*g]=N(B);r[t*g+1]=r[t*g+2]=r[t*g];for(w=3;w<g-1;w++)q=(t-2)*g+w+1,W(B,E[q],y?y[q]:1),q=(t-1)*g+w+1,W(B,E[q],y?y[q]:1),q=t*g+w+1,W(B,E[q],y?y[q]:1),q=(t+1)*g+w+1,W(B,E[q],y?y[q]:1),q=
(t-2)*g+w-3,U(B,E[q],y?y[q]:1),q=(t-1)*g+w-3,U(B,E[q],y?y[q]:1),q=t*g+w-3,U(B,E[q],y?y[q]:1),q=(t+1)*g+w-3,U(B,E[q],y?y[q]:1),r[t*g+w]=N(B);r[t*g+w+1]=r[t*g+w]}for(E=0;E<g;E++)r[E]=r[g+E]=r[2*g+E],r[(m-1)*g+E]=r[(m-2)*g+E];k.updateStatistics();return k}function N(r){if(0===r.size)return 0;let k=0,g=-1,m=0;const p=r.keys();let y=p.next();for(;!y.done;)m=r.get(y.value),m>k&&(g=y.value,k=m),y=p.next();return g}function U(r,k,g){0!==g&&(g=r.get(k),1===g?r.delete(k):r.set(k,g-1))}function W(r,k,g){0!==
g&&r.set(k,r.has(k)?r.get(k)+1:1)}function I(r,k,g){let {x:m,y:p}=k;const {width:y,height:E}=g;if(0===m&&0===p&&E===r.height&&y===r.width)return r;const {width:w,height:q}=r;k=Math.max(0,p);const t=Math.max(0,m),B=Math.min(m+y,w),J=Math.min(p+E,q);if(0>B||0>J||!D(r))return null;m=Math.max(0,-m);p=Math.max(0,-p);const {pixels:G,mask:l}=r;var h=y*E,x=G.length;const c=[];for(var a=0;a<x;a++){var e=G[a],b=n.createEmptyBand(r.pixelType,h);for(let d=k;d<J;d++){const v=d*w;let C=(d+p-k)*y+m;for(let H=t;H<
B;H++)b[C++]=e[v+H]}c.push(b)}h=new Uint8Array(h);for(x=k;x<J;x++)for(a=x*w,e=(x+p-k)*y+m,b=t;b<B;b++)h[e++]=l?l[a+b]:1;r=new n({width:g.width,height:g.height,pixelType:r.pixelType,pixels:c,mask:h});r.updateStatistics();return r}function z(r,k=!0){if(!D(r))return null;const {pixels:g,width:m,height:p,mask:y,pixelType:E}=r;r=[];const w=Math.round(m/2),q=Math.round(p/2),t=p-1,B=m-1;for(var J=0;J<g.length;J++){var G=g[J],l=n.createEmptyBand(E,w*q),h=0;for(var x=0;x<p;x+=2)for(var c=0;c<m;c+=2){var a=
G[x*m+c];if(k){var e=c===B?a:G[x*m+c+1];const b=x===t?a:G[x*m+c+m],d=c===B?b:x===t?e:G[x*m+c+m+1];l[h++]=(a+e+b+d)/4}else l[h++]=a}r.push(l)}J=null;if(y)for(J=new Uint8Array(w*q),G=0,l=0;l<p;l+=2)for(h=0;h<m;h+=2)x=y[l*m+h],k?(c=h===B?x:y[l*m+h+1],a=l===t?x:y[l*m+h+m],e=h===B?a:l===t?c:y[l*m+h+m+1],J[G++]=x*c*a*e?1:0):J[G++]=x;return new n({width:w,height:q,pixelType:E,pixels:r,mask:J})}const D=function(r){return r&&"esri.layers.support.PixelBlock"===r.declaredClass&&r.pixels&&0<r.pixels.length};
R.approximateTransform=function(r,k,g,m,p="nearest"){if(!D(r))return null;"majority"===p&&(r=M(r));const {pixels:y,mask:E,pixelType:w}=r,q=r.width;var t=r.height;r=n.getPixelArrayConstructor(w);var B=y.length;const {width:J,height:G}=k;k=m.cols;var l=m.rows;const h=Math.ceil(J/k),x=Math.ceil(G/l);m=!1;for(var c=0;c<g.length;c+=3)-1===g[c]&&-1===g[c+1]&&-1===g[c+2]&&(m=!0);let a,e,b,d,v,C;const H=new Float32Array(J*G),F=new Float32Array(J*G);c=0;let V,O;const Q="majority"===p?0:.5;for(let Z=0;Z<x;Z++)for(let aa=
0;aa<h;aa++){a=12*(Z*h+aa);p=g[a];e=g[a+1];b=g[a+2];d=g[a+3];v=g[a+4];C=g[a+5];for(var K=0;K<l;K++){c=(Z*l+K)*J+aa*k;O=(K+.5)/l;for(var P=0;P<K;P++)V=(P+.5)/k,H[c+P]=Math.round((p*V+e*O+b)*q-Q),F[c+P]=Math.round((d*V+v*O+C)*t-Q)}a+=6;p=g[a];e=g[a+1];b=g[a+2];d=g[a+3];v=g[a+4];C=g[a+5];for(K=0;K<l;K++)for(c=(Z*l+K)*J+aa*k,O=(K+.5)/l,P=K;P<k;P++)V=(P+.5)/k,H[c+P]=Math.round((p*V+e*O+b)*q-Q),F[c+P]=Math.round((d*V+v*O+C)*t-Q)}g=(Z,aa)=>{for(let ha=0;ha<G;ha++){a=ha*J;for(let ea=0;ea<J;ea++)Z[a]=0>H[a]||
0>F[a]?0:aa[H[a]+F[a]*q],a++}};t=[];for(l=0;l<B;l++)k=new r(J*G),g(k,y[l]),t.push(k);r=new n({width:J,height:G,pixelType:w,pixels:t});if(E)r.mask=new Uint8Array(J*G),g(r.mask,E);else if(m)for(r.mask=new Uint8Array(J*G),B=0;B<J*G;B++)r.mask[B]=0>H[B]||0>F[B]?0:1;r.updateStatistics();return r};R.clip=I;R.colorize=function(r,k){if(!D(r)||!k&&(k.indexedColormap||k.indexed2DColormap))return r;const g=r.clone();var m=g.pixels;let p=g.mask;const y=g.width*g.height;if(1!==m.length)return r;const {indexedColormap:E,
indexed2DColormap:w,offset:q,alphaSpecified:t}=k;k=E.length-1;r=0;m=m[0];const B=new Uint8Array(m.length),J=new Uint8Array(m.length),G=new Uint8Array(m.length);let l=0;if(E)if(p)for(r=0;r<y;r++)p[r]&&(l=4*(m[r]-q),l<q||l>k?p[r]=0:(B[r]=E[l],J[r]=E[l+1],G[r]=E[l+2],p[r]=E[l+3]));else{p=new Uint8Array(y);for(r=0;r<y;r++)l=4*(m[r]-q),l<q||l>k?p[r]=0:(B[r]=E[l],J[r]=E[l+1],G[r]=E[l+2],p[r]=E[l+3]);g.mask=p}else if(p)for(r=0;r<y;r++)p[r]&&(k=w[m[r]],B[r]=k[0],J[r]=k[1],G[r]=k[2],p[r]=k[3]);else{p=new Uint8Array(y);
for(r=0;r<y;r++)k=w[m[r]],B[r]=k[0],J[r]=k[1],G[r]=k[2],p[r]=k[3];g.mask=p}g.pixels=[B,J,G];g.statistics=null;g.pixelType="u8";g.maskIsAlpha=t;return g};R.createColormapLUT=function(r){if(r){var k=r.colormap;if(k&&0!==k.length){k=k.sort((t,B)=>t[0]-B[0]);var g=0;0>k[0][0]&&(g=k[0][0]);var m=Math.max(256,k[k.length-1][0]-g+1),p=new Uint8Array(4*m),y=[],E=0,w=0,q=5===k[0].length;if(65536<m)return k.forEach(t=>{y[t[0]-g]=q?t.slice(1):t.slice(1).concat([255])}),{indexed2DColormap:y,offset:g,alphaSpecified:q};
if(r.fillUnspecified)for(r=k[w],E=r[0]-g;E<m;E++)p[4*E]=r[1],p[4*E+1]=r[2],p[4*E+2]=r[3],p[4*E+3]=q?r[4]:255,E===r[0]-g&&(r=w===k.length-1?r:k[++w]);else for(E=0;E<k.length;E++)r=k[E],w=4*(r[0]-g),p[w]=r[1],p[w+1]=r[2],p[w+2]=r[3],p[w+3]=q?r[4]:255;return{indexedColormap:p,offset:g,alphaSpecified:q}}}};R.createContrastBrightnessLUT=L;R.createHistogramEqualizationLUT=function(r,k=256){k=Math.min(k,256);const {size:g,counts:m}=r;r=new Uint8Array(g);var p=m.reduce((t,B)=>t+B/k,0);let y=0;var E=0;let w=
0,q=p;for(let t=0;t<g;t++)if(w+=m[t],!(t<g-1&&w+m[t+1]<q)){for(;y<k-1&&q<w;)y++,q+=p;for(;E<=t;E++)r[E]=y;E=t+1}for(p=E;p<g;p++)r[p]=k-1;return r};R.createStretchLUT=function(r){const {minCutOff:k,maxCutOff:g,gamma:m,pixelType:p}=r,y=r.outMin||0,E=r.outMax||255;if(-1===["u8","u16","s8","s16"].indexOf(p))return null;const w=k.length;let q;let t=0;"s8"===p?t=-127:"s16"===p&&(t=-32767);let B=256;-1<["u16","s16"].indexOf(p)&&(B=65536);const J=[],G=E-y;for(q=0;q<w;q++)J[q]=g[q]-k[q];var l=m&&m.length>=
w;const h=[];if(l)for(q=0;q<w;q++)h[q]=1<m[q]?2<m[q]?6.5+(m[q]-2)**2.5:6.5+100*(2-m[q])**4:1;let x;const c=[];let a,e,b;if(l)for(q=0;q<w;q++){b=[];for(l=0;l<B;l++)a=l+t,x=(a-k[q])/J[q],e=1,1<m[q]&&(e-=(1/G)**(x*h[q])),b[l]=a<g[q]&&a>k[q]?Math.floor(e*G*x**(1/m[q]))+y:a>=g[q]?E:y;c[q]=b}else for(q=0;q<w;q++){b=[];for(l=0;l<B;l++)a=l+t,b[l]=a<=k[q]?y:a>=g[q]?E:Math.floor((a-k[q])/J[q]*G)+y;c[q]=b}if(null!=r.contrastOffset)for(r=L(r.contrastOffset,r.brightnessOffset),q=0;q<w;q++)for(b=c[q],l=0;l<B;l++)b[l]=
r[b[l]];return{lut:c,offset:t}};R.estimateStatisticsFromHistograms=function(r){const k=[];for(let y=0;y<r.length;y++){const {min:E,max:w,size:q,counts:t}=r[y];let B=0;var g=0;for(var m=0;m<q;m++)B+=t[m],g+=m*t[m];g/=B;m=0;for(var p=0;p<q;p++)m+=t[p]*(p-g)**2;p=(w-E)/q;k.push({min:E,max:w,avg:(g+.5)*p+E,stddev:Math.sqrt(m/(B-1))*p})}return k};R.estimateStatisticsHistograms=function(r){if(!D(r))return null;r.statistics||r.updateStatistics();const {pixels:k,mask:g,pixelType:m,statistics:p}=r;r=r.width*
r.height;const y=k.length;let E,w;let q;var t;const B=[],J=[];for(q=0;q<y;q++){var G=new Uint32Array(256);var l=k[q];if("u8"===m)if(E=-.5,w=255.5,g)for(t=0;t<r;t++)g[t]&&G[l[t]]++;else for(t=0;t<r;t++)G[l[t]]++;else{E=p[q].minValue;w=p[q].maxValue;var h=(w-E)/256;var x=new Uint32Array(257);if(g)for(t=0;t<r;t++)g[t]&&x[Math.floor((l[t]-E)/h)]++;else for(t=0;t<r;t++)x[Math.floor((l[t]-E)/h)]++;for(t=0;255>t;t++)G[t]=x[t];G[255]=x[255]+x[256]}B.push({min:E,max:w,size:256,counts:G});for(t=l=x=h=0;256>
t;t++)h+=G[t],x+=t*G[t];x/=h;for(t=0;256>t;t++)l+=G[t]*(t-x)**2;G=Math.sqrt(l/(h-1));h=(w-E)/256;t=(x+.5)*h+E;G*=h;J.push({min:E,max:w,avg:t,stddev:G})}return{statistics:J,histograms:B}};R.extractBands=function(r,k){if(null==k||!k.length||!D(r))return r;const g=r.pixels.length;return k&&k.some(m=>m>=g)||1===g&&1===k.length&&0===k[0]||g===k.length&&!k.some((m,p)=>m!==p)?r:new n({pixelType:r.pixelType,width:r.width,height:r.height,mask:r.mask,validPixelCount:r.validPixelCount,maskIsAlpha:r.maskIsAlpha,
pixels:k.map(m=>r.pixels[m]),statistics:r.statistics&&k.map(m=>r.statistics[m])})};R.getClipBounds=X;R.lookupPixels=function(r,k){if(!D(r))return null;const {pixels:g,mask:m}=r,p=r.width*r.height,y=g.length;let E=k.lut;({offset:k}=k);let w,q;E&&1===E[0].length&&(E=g.map(()=>E));const t=[];let B,J,G;if(k)if(null==m)for(w=0;w<y;w++){B=g[w];J=E[w];G=new Uint8Array(p);for(q=0;q<p;q++)G[q]=J[B[q]-k];t.push(G)}else for(w=0;w<y;w++){B=g[w];J=E[w];G=new Uint8Array(p);for(q=0;q<p;q++)m[q]&&(G[q]=J[B[q]-k]);
t.push(G)}else if(null==m)for(w=0;w<y;w++){B=g[w];J=E[w];G=new Uint8Array(p);for(q=0;q<p;q++)G[q]=J[B[q]];t.push(G)}else for(w=0;w<y;w++){B=g[w];J=E[w];G=new Uint8Array(p);for(q=0;q<p;q++)m[q]&&(G[q]=J[B[q]]);t.push(G)}r=new n({width:r.width,height:r.height,pixels:t,mask:m,pixelType:"u8"});r.updateStatistics();return r};R.mosaic=A;R.mosaicPixelData=function(r,k){if(!r||0===r.length)return null;var g=r.filter(J=>J.pixelBlock)[0];if(!g)return null;var m=(g.extent.xmax-g.extent.xmin)/g.pixelBlock.width;
const p=(g.extent.ymax-g.extent.ymin)/g.pixelBlock.height,y=.01*Math.min(m,p),E=r.sort((J,G)=>Math.abs(J.extent.ymax-G.extent.ymax)>y?G.extent.ymax-J.extent.ymax:Math.abs(J.extent.xmin-G.extent.xmin)>y?J.extent.xmin-G.extent.xmin:0);var w=Math.min.apply(null,E.map(J=>J.extent.xmin));const q=Math.min.apply(null,E.map(J=>J.extent.ymin)),t=Math.max.apply(null,E.map(J=>J.extent.xmax)),B=Math.max.apply(null,E.map(J=>J.extent.ymax));r={x:Math.round((k.xmin-w)/m),y:Math.round((B-k.ymax)/p)};w={width:Math.round((t-
w)/m),height:Math.round((B-q)/p)};m={width:Math.round((k.xmax-k.xmin)/m),height:Math.round((k.ymax-k.ymin)/p)};if(Math.round(w.width/g.pixelBlock.width)*Math.round(w.height/g.pixelBlock.height)!==E.length||0>r.x||0>r.y||w.width<m.width||w.height<m.height)return null;g=E.map(J=>J.pixelBlock);g=A(g,w,r,m);return{extent:k,pixelBlock:g}};R.remapColor=function(r,k){if(!D(r))return null;r=r.clone();var {pixels:g}=r;const m=r.width*r.height,p=k.length,y=Math.floor(p/2),E=k[Math.floor(y)];g=g[0];let w,q,
t,B,J,G,l=!1;const h=new Uint8Array(m),x=new Uint8Array(m),c=new Uint8Array(m);let a=r.mask;const e=4===k[0].mappedColor.length;a||(a=new Uint8Array(m),a.fill(e?255:1),r.mask=a);for(J=0;J<m;J++)if(a[J]){w=g[J];l=!1;G=y;q=E;t=0;for(B=p-1;1<B-t;){if(w===q.value){l=!0;break}w>q.value?t=G:B=G;G=Math.floor((t+B)/2);q=k[Math.floor(G)]}l||(w===k[t].value?(q=k[t],l=!0):w===k[B].value?(q=k[B],l=!0):w<k[t].value?(l=!1,q=null):w>k[t].value&&(w<k[B].value?(q=k[t],l=!0):B===p-1?(l=!1,q=null):(q=k[B],l=!0)));l?
(h[J]=q.mappedColor[0],x[J]=q.mappedColor[1],c[J]=q.mappedColor[2],a[J]=q.mappedColor[3]):h[J]=x[J]=c[J]=a[J]=0}r.pixels=[h,x,c];r.mask=a;r.pixelType="u8";r.maskIsAlpha=e;return r};R.resampleByMajority=M;R.setValidBoundary=function(r,k,g){if(!D(r))return null;const {width:m,height:p}=r,y=k.x;k=k.y;const E=g.width+y;g=g.height+k;if(0>y||0>k||E>m||g>p||0===y&&0===k&&E===m&&g===p)return r;r.mask||(r.mask=new Uint8Array(m*p));const w=r.mask;for(let q=0;q<p;q++){const t=q*m;for(let B=0;B<m;B++)w[t+B]=
q<k||q>=g||B<y||B>=E?0:1}r.updateStatistics();return r};R.split=function(r,k,g){if(!D(r))return null;const {width:m,height:p}=k;let {width:y,height:E}=r;const w=new Map,q={x:0,y:0};g=null==g?1:1+g;for(let t=0;t<g;t++){const B=Math.ceil(y/m),J=Math.ceil(E/p);for(let G=0;G<J;G++){q.y=G*p;for(let l=0;l<B;l++){q.x=l*m;const h=I(r,q,k);w.set(`${t}/${G}/${l}`,h)}}t<g-1&&(r=z(r));y=Math.round(y/2);E=Math.round(E/2)}return w};R.stretch=function(r,k){if(!D(r))return null;r=r.clone();const {pixels:g,mask:m}=
r,{minCutOff:p,maxCutOff:y,gamma:E}=k,w=k.outMin||0;k=k.outMax||255;const q=r.width*r.height,t=g.length;let B;let J,G,l;const h=k-w,x=[];for(B=0;B<t;B++)x[B]=y[B]-p[B];var c=E&&E.length>=t;const a=[];if(c)for(B=0;B<t;B++)a[B]=1<E[B]?2<E[B]?6.5+(E[B]-2)**2.5:6.5+100*(2-E[B])**4:1;if(c)if(null!=m)for(c=0;c<q;c++){if(m[c])for(B=0;B<t;B++)J=g[B][c],l=(J-p[B])/x[B],G=1,1<E[B]&&(G-=(1/h)**(l*a[B])),g[B][c]=J<y[B]&&J>p[B]?Math.floor(G*h*l**(1/E[B]))+w:J>=y[B]?k:w}else for(c=0;c<q;c++)for(B=0;B<t;B++)J=g[B][c],
l=(J-p[B])/x[B],G=1,1<E[B]&&(G-=(1/h)**(l*a[B])),g[B][c]=J<y[B]&&J>p[B]?Math.floor(G*h*l**(1/E[B]))+w:J>=y[B]?k:w;else if(null!=m)for(c=0;c<q;c++){if(m[c])for(B=0;B<t;B++)J=g[B][c],g[B][c]=J<y[B]&&J>p[B]?Math.floor((J-p[B])/x[B]*h)+w:J>=y[B]?k:w}else for(c=0;c<q;c++)for(B=0;B<t;B++)J=g[B][c],g[B][c]=J<y[B]&&J>p[B]?Math.floor((J-p[B])/x[B]*h)+w:J>=y[B]?k:w;r.pixelType="u8";r.updateStatistics();return r};Object.defineProperty(R,"__esModule",{value:!0})})},"esri/layers/support/rasterFunctions/surfaceUtils":function(){define(["exports",
"../PixelBlock"],function(R,n){function L(A){let {altitude:M,azimuth:N}=A;const {hillshadeType:U,pixelSizePower:W,pixelSizeFactor:I,scalingType:z,isGCS:D,resolution:r}=A;var k="multi-directional"===U?2*A.zFactor:A.zFactor;const {x:g,y:m}=r;A=k/(8*g);var p=k/(8*m);D&&.001<k&&(A/=111E3,p/=111E3);"adjusted"===z&&(D?(A=111E3*g,p=111E3*m,A=(k+A**W*I)/(8*A),p=(k+p**W*I)/(8*p)):(A=(k+g**W*I)/(8*g),p=(k+m**W*I)/(8*m)));var y=(90-M)*Math.PI/180;k=Math.cos(y);let E=(360-N+90)*Math.PI/180,w=Math.sin(y)*Math.cos(E);
y=Math.sin(y)*Math.sin(E);const q=[315,270,225,360,180,0],t=[60,60,60,60,60,90];var B=new Float32Array([3,5,3,2,1,4]);const J=B.reduce((c,a)=>c+a);B=B.map(c=>c/J);const G="multi-directional"===U?q.length:1,l=new Float32Array(6),h=new Float32Array(6),x=new Float32Array(6);if("multi-directional"===U)for(let c=0;c<G;c++)M=t[c],N=q[c],y=(90-M)*Math.PI/180,k=Math.cos(y),E=(360-N+90)*Math.PI/180,w=Math.sin(y)*Math.cos(E),y=Math.sin(y)*Math.sin(E),l[c]=k,h[c]=w,x[c]=y;else l.fill(k),h.fill(w),x.fill(y);
return{resolution:r,factor:[A,p],sinZcosA:w,sinZsinA:y,cosZ:k,sinZcosAs:h,sinZsinAs:x,cosZs:l,weights:B,hillshadeType:["traditional","multi-directional"].indexOf(U)}}const X=function(A){return A&&"esri.layers.support.PixelBlock"===A.declaredClass&&A.pixels&&0<A.pixels.length};R.calculateHillshadeParams=L;R.hillshade=function(A,M){if(!X(A))return A;const {width:N,height:U,mask:W}=A,I=new Uint8Array(N*U);W&&I.set(W);const {factor:z,sinZcosA:D,sinZsinA:r,cosZ:k,sinZcosAs:g,sinZsinAs:m,cosZs:p,weights:y}=
L(M),[E,w]=z;var {hillshadeType:q}=M;const t=A.pixels[0];M=new Uint8Array(N*U);let B;for(let e=1;e<U-1;e++){const b=e*N;for(let d=1;d<N-1;d++)if(W&&!W[b+d])M[b+d]=0;else{var J=8;if(W&&(J=W[b-N+d-1]+W[b-N+d]+W[b-N+d+1]+W[b+d-1]+W[b+d+1]+W[b+N+d-1]+W[b+N+d]+W[b+N+d+1],7>J)){M[b+d]=0;I[b+d]=0;continue}if(7===J){var G=W[b-N+d-1]?t[b-N+d-1]:t[b+d];var l=W[b-N+d]?t[b-N+d]:t[b+d];var h=W[b-N+d+1]?t[b-N+d+1]:t[b+d];J=W[b+d-1]?t[b+d-1]:t[b+d];B=W[b+d+1]?t[b+d+1]:t[b+d];var x=W[b+N+d-1]?t[b+N+d-1]:t[b+d];var c=
W[b+N+d]?t[b+N+d]:t[b+d];var a=W[b+N+d+1]?t[b+N+d+1]:t[b+d]}else G=t[b-N+d-1],l=t[b-N+d],h=t[b-N+d+1],J=t[b+d-1],B=t[b+d+1],x=t[b+N+d-1],c=t[b+N+d],a=t[b+N+d+1];J=(h+B+B+a-(G+J+J+x))*E;G=(x+c+c+a-(G+l+l+h))*w;l=Math.sqrt(1+J*J+G*G);h=0;if("traditional"===q)J=255*(k+r*G-D*J)/l,0>J&&(J=0),h=J;else for(x=m.length,c=0;c<x;c++)a=255*(p[c]+m[c]*G-g[c]*J)/l,0>a&&(a=0),h+=a*y[c];M[b+d]=h&255}}for(q=0;q<U;q++)M[q*N]=M[q*N+1],M[(q+1)*N-1]=M[(q+1)*N-2];for(q=1;q<N-1;q++)M[q]=M[q+N],M[q+(U-1)*N]=M[q+(U-2)*N];
return new n({width:N,height:U,pixels:[M],mask:W?I:null,pixelType:"u8",validPixelCount:A.validPixelCount,statistics:[{minValue:0,maxValue:255}]})};R.tintHillshade=function(A,M,N,U){if(X(A)&&X(M)){var {min:W,max:I}=U;U=A.pixels[0];var {pixels:z,mask:D}=M;M=z[0];var r=255.00001/(I-W),k=new Uint8ClampedArray(M.length),g=new Uint8ClampedArray(M.length),m=new Uint8ClampedArray(M.length),p=N.length-1;for(let w=0;w<M.length;w++){if(D&&0===D[w])continue;var y=Math.floor((M[w]-W)*r);const [q,t]=N[0>y?0:y>
p?p:y];var E=U[w];y=E*t;const B=y*(1-Math.abs(q%2-1));E-=y;switch(Math.floor(q)){case 0:k[w]=y+E;g[w]=B+E;m[w]=E;break;case 1:k[w]=B+E;g[w]=y+E;m[w]=E;break;case 2:k[w]=E;g[w]=y+E;m[w]=B+E;break;case 3:k[w]=E;g[w]=B+E;m[w]=y+E;break;case 4:k[w]=B+E;g[w]=E;m[w]=y+E;break;case 5:case 6:k[w]=y+E,g[w]=E,m[w]=B+E}}A.pixels=[k,g,m];A.updateStatistics()}};Object.defineProperty(R,"__esModule",{value:!0})})},"esri/layers/support/rasterDatasets/RasterFactory":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/Error ./CloudRaster ./ImageAuxRaster ./ImageServerRaster ./MRFRaster ./TIFFRaster".split(" "),
function(R,n,L,X,A,M,N){const U=new Map;U.set("CRF",{desc:"Cloud Raster Format",constructor:L});U.set("MRF",{desc:"Meta Raster Format",constructor:M});U.set("TIFF",{desc:"GeoTIFF",constructor:N});U.set("RasterTileServer",{desc:"Raster Tile Server",constructor:A});U.set("JPG",{desc:"JPG Raster Format",constructor:X});U.set("PNG",{desc:"PNG Raster Format",constructor:X});U.set("GIF",{desc:"GIF Raster Format",constructor:X});U.set("BMP",{desc:"BMP Raster Format",constructor:X});return function(){function W(){}
W.open=async function(I){const {url:z,ioConfig:D,sourceJSON:r}=I;let k=I.datasetFormat;null==k&&z.lastIndexOf(".")&&(k=z.slice(z.lastIndexOf(".")+1).toUpperCase());if("OVR"===k||"TIF"===k)k="TIFF";else if("JPG"===k||"JPEG"===k||"JFIF"===k)k="JPG";-1<z.toLowerCase().indexOf("/imageserver")&&-1===z.toLowerCase().indexOf("/wcsserver")&&(k="RasterTileServer");const g={bandIds:null,sampling:null},m={url:z,sourceJSON:r,datasetFormat:k,ioConfig:D||g};let p,y;if(this.supportedFormats.has(k))return p=U.get(k).constructor,
y=new p(m),await y.open({signal:I.signal}),y;if(k)throw new n("rasterfactory:open","not a supported format "+k);const E=Array.from(U.keys());let w=0;const q=function(){k=E[w++];if(!k)return null;p=U.get(k).constructor;y=new p(m);return y.open({signal:I.signal}).then(()=>y).catch(()=>q())};return q()};W.register=function(I,z,D){U.has(I.toUpperCase())||U.set(I.toUpperCase(),{desc:z,constructor:D})};R._createClass(W,null,[{key:"supportedFormats",get:function(){const I=new Set;U.forEach((z,D)=>I.add(D));
return I}}]);return W}()})},"esri/layers/support/rasterDatasets/CloudRaster":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/maybe ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../core/Error ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../../geometry/SpatialReference ../../../geometry/Point ../../../geometry/Extent ../../../geometry ../../../tasks/support/FeatureSet ../TileInfo ../RasterInfo ../RasterStorageInfo ./BaseRaster ./DBFParser ../rasterTransforms/utils".split(" "),
function(R,n,L,X,A,M,N,U,W,I,z,D,r,k,g,m,p,y,E,w,q,t,B,J){const G=new Map;G.set("int16","esriFieldTypeSmallInteger");G.set("int32","esriFieldTypeInteger");G.set("int64","esriFieldTypeInteger");G.set("float32","esriFieldTypeSingle");G.set("float64","esriFieldTypeDouble");G.set("text","esriFieldTypeString");L=function(l){function h(){var c=l.apply(this,arguments)||this;c.storageInfo=null;c.datasetFormat="CRF";return c}R._inheritsLoose(h,l);var x=h.prototype;x.open=async function(c){await this.init();
({data:c}=await this.request(this.url+"/conf.json",{signal:null==c?void 0:c.signal}));if(!this._validateHeader(c))throw new I("cloudraster:open","Invalid or unsupported conf.json.");this.datasetName=this.url.slice(this.url.lastIndexOf("/")+1);const {storageInfo:a,rasterInfo:e}=this._parseHeader(c);"thematic"===e.dataType&&(c=await this._fetchAuxiliaryInformation(),e.attributeTable=c);this._set("storageInfo",a);this._set("rasterInfo",e);this.ioConfig.retryCount=this.ioConfig.retryCount||0};x.fetchRawTile=
async function(c,a,e,b={}){c=this.rasterInfo.storageInfo.maximumPyramidLevel-c;if(0>c)return null;c=this._buildCacheFilePath(c,a,e,b.multidimensionalDefinition);a=this._getIndexRecordFromBundle(a,e);e=await this.request(c,{range:{from:0,to:this.storageInfo.headerSize-1},responseType:"array-buffer",signal:b.signal});if(!e)return null;e=new Uint8Array(e.data);a=this._getTileEndAndContentType(e,a);return 0===a.recordSize?null:(b=await this.request(c,{range:{from:a.position,to:a.position+a.recordSize},
responseType:"array-buffer",signal:b.signal}))?this.decodePixelBlock(b.data,{width:this.rasterInfo.storageInfo.tileInfo.size[0],height:this.rasterInfo.storageInfo.tileInfo.size[1],planes:null,pixelType:null}):null};x._validateHeader=function(c){const a="origin extent geodataXform LODInfos blockWidth blockHeight bandCount pixelType pixelSizeX pixelSizeY format packetSize".split(" ");return c&&"RasterInfo"===c.type&&!a.some(e=>!c[e])};x._parseHeader=function(c){var a,e;const b="u1 u2 u4 u8 s8 u16 s16 u32 s32 f32 f64".split(" ")[c.pixelType],
{bandCount:d,histograms:v,colormap:C,blockWidth:H,blockHeight:F,firstPyramidLevel:V,maximumPyramidLevel:O}=c,Q=c.statistics&&c.statistics.map(ka=>({min:ka.min,max:ka.max,avg:ka.mean,stddev:ka.standardDeviation,median:ka.median,mode:ka.mode}));var K=c.extent.spatialReference,P=null==(a=c.geodataXform)?void 0:a.spatialReference;a=new k(null!=K&&K.wkid||null!=K&&K.wkt?K:P);K=new m({xmin:c.extent.xmin,ymin:c.extent.ymin,xmax:c.extent.xmax,ymax:c.extent.ymax,spatialReference:a});P=new g({x:c.pixelSizeX,
y:c.pixelSizeY,spatialReference:a});const Z=Math.round((K.xmax-K.xmin)/P.x),aa=Math.round((K.ymax-K.ymin)/P.y),ha=this._parseTransform(c.geodataXform),ea=ha?K:null;ha&&(K=ha.forwardTransform(K),P.x=(K.xmax-K.xmin)/Z,P.y=(K.ymax-K.ymin)/aa);const f=null!=(e=c.properties)?e:{};var u=c.format.toLowerCase().replace("cache/","");e=new g(c.origin.x,c.origin.y,a);let T,S;if(C&&C.colors)for(T=[],S=0;S<C.colors.length;S++){var ba=C.colors[S];var fa=C.values?C.values[S]:S;T.push([fa,ba&255,ba<<16>>>24,ba<<
8>>>24,ba>>>24])}ba=c.LODInfos;fa=[];for(S=0;S<ba.levels.length;S++)fa.push({level:ba.levels[S],resolution:ba.resolutions[S],scale:96/.0254*ba.resolutions[S]});ba=new E({dpi:96,lods:fa,format:u,origin:e,size:[H,F],spatialReference:a});u={recordSize:8,packetSize:c.packetSize,headerSize:c.packetSize*c.packetSize*8+64};fa=[{maxCol:Math.ceil(Z/H)-1,maxRow:Math.ceil(aa/F)-1,minCol:0,minRow:0}];let ia=2;if(0<O)for(S=0;S<O;S++)fa.push({maxCol:Math.ceil(Z/ia/H)-1,maxRow:Math.ceil(aa/ia/F)-1,minCol:0,minRow:0}),
ia*=2;c=new w({width:Z,height:aa,pixelType:b,bandCount:d,extent:K,nativeExtent:ea,transform:ha,spatialReference:a,pixelSize:P,keyProperties:f,statistics:Q,histograms:v,multidimensionalInfo:c.mdInfo,colormap:T,storageInfo:new q({blockWidth:H,blockHeight:F,pyramidBlockWidth:H,pyramidBlockHeight:F,origin:e,tileInfo:ba,firstPyramidLevel:V,maximumPyramidLevel:O,blockBoundary:fa})});return{storageInfo:u,rasterInfo:c}};x._parseTransform=function(c){var a,e;if(!J.isTransformSupported(c))throw new I("cloudraster:open",
"the data contains unsupported geodata transform types");c=J.readTransform(c);if("identity"===c.type)return null;if(null==(a=c.forwardCoefficients)||!a.length||null==(e=c.inverseCoefficients)||!e.length)throw new I("cloudraster:open","the data contains unsupported geodata transforms - both forward and inverse coefficients are required currently");return c};x._fetchAuxiliaryInformation=async function(c){var a=this.request(this.url+"/conf.vat.json",{signal:c}).then(b=>b.data).catch(()=>null);c=this.request(this.url+
"/conf.vat.dbf",{responseType:"array-buffer",signal:c}).then(b=>b.data).catch(()=>null);a=await Promise.all([a,c]);let e;if(a[0]){c=a[0].fields;const b=a[0].values;if(c&&b){c=c.map(v=>({type:"OID"===v.name?"esriFieldTypeOID":G.get(v.type),name:v.name,alias:v.alias||v.name}));const d=b.map(v=>({attributes:v}));c&&b&&(e={fields:c,features:d})}}!e&&a[1]&&(e=B.parse(a[1]).recordSet);return y.fromJSON(e)};x._buildCacheFilePath=function(c,a,e,b){var d=this.storageInfo.packetSize;e=Math.floor(e/d)*d;a="R"+
this._toHexString4(Math.floor(a/d)*d)+"C"+this._toHexString4(e);d="L";d=10<=c?d+c.toString():d+("0"+c.toString());({multidimensionalInfo:c}=this.rasterInfo);const v=null==b?void 0:b[0];if(!X.isSome(c)||!v)return`${this.url}/_alllayers/${d}/${a}.bundle`;b=c.variables.filter(C=>C.name===v.variableName)[0].dimensions[0].values.indexOf(v.values[0]).toString(16);c=4-b.length;for(e=0;e<c;e++)b="0"+b;return`${this.url}/_alllayers/${v.variableName}/${"S"+b}/${d}/${a}.bundle`};x._getIndexRecordFromBundle=
function(c,a){const e=this.storageInfo.packetSize;c=c%e*e+a%e;if(0>c)throw"Invalid level / row / col";return c*this.storageInfo.recordSize+64};x._getTileEndAndContentType=function(c,a){c=c.subarray(a,a+8);a=0;let e;for(e=0;5>e;e++)a|=(c[e]&255)<<8*e;const b=a&0xffffffffff;a=0;for(e=5;8>e;e++)a|=(c[e]&255)<<8*(e-5);return{position:b,recordSize:a&0xffffffffff}};x._toHexString4=function(c){c=c.toString(16);if(4!==c.length){let a=4-c.length;for(;0<a--;)c="0"+c}return c};return h}(t);n.__decorate([N.property({readOnly:!0})],
L.prototype,"storageInfo",void 0);n.__decorate([N.property({type:String,json:{write:!0}})],L.prototype,"datasetFormat",void 0);return L=n.__decorate([W.subclass("esri.layers.support.rasterDatasets.CloudRaster")],L)})},"esri/layers/support/RasterStorageInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../geometry/Point".split(" "),
function(R,n,L,X,A,M,N,U,W,I,z,D,r){L=function(k){function g(){var m=k.apply(this,arguments)||this;m.blockWidth=void 0;m.blockHeight=void 0;m.compression=null;m.origin=null;m.firstPyramidLevel=null;m.maximumPyramidLevel=null;m.pyramidScalingFactor=2;m.pyramidBlockWidth=null;m.pyramidBlockHeight=null;m.isVirtualTileInfo=!1;m.tileInfo=null;m.blockBoundary=null;return m}R._inheritsLoose(g,k);return g}(D.JSONSupport);n.__decorate([M.property({type:Number,json:{write:!0}})],L.prototype,"blockWidth",void 0);
n.__decorate([M.property({type:Number,json:{write:!0}})],L.prototype,"blockHeight",void 0);n.__decorate([M.property({type:String,json:{write:!0}})],L.prototype,"compression",void 0);n.__decorate([M.property({type:r,json:{write:!0}})],L.prototype,"origin",void 0);n.__decorate([M.property({type:Number,json:{write:!0}})],L.prototype,"firstPyramidLevel",void 0);n.__decorate([M.property({type:Number,json:{write:!0}})],L.prototype,"maximumPyramidLevel",void 0);n.__decorate([M.property()],L.prototype,"pyramidScalingFactor",
void 0);n.__decorate([M.property({type:Number,json:{write:!0}})],L.prototype,"pyramidBlockWidth",void 0);n.__decorate([M.property({type:Number,json:{write:!0}})],L.prototype,"pyramidBlockHeight",void 0);n.__decorate([M.property({type:Boolean,json:{write:!0}})],L.prototype,"isVirtualTileInfo",void 0);n.__decorate([M.property({json:{write:!0}})],L.prototype,"tileInfo",void 0);n.__decorate([M.property()],L.prototype,"blockBoundary",void 0);return L=n.__decorate([U.subclass("esri.layers.support.RasterStorageInfo")],
L)})},"esri/layers/support/rasterDatasets/BaseRaster":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/maybe ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../core/Error ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../../core/promiseUtils ../../../core/JSONSupport ../../../geometry/Point ../../../geometry/Extent ../../../geometry ../../../request ../../../core/Promise ../arcgisLayerUrl ../commonProperties ../TileInfo ../rasterFormats/RasterCodec ../rasterFunctions/pixelUtils ../RasterStorageInfo ../rasterFunctions/rasterProjectionHelper ./RawBlockCache".split(" "),
function(R,n,L,X,A,M,N,U,W,I,z,D,r,k,g,m,p,y,E,w,q,t,B,J,G,l,h,x){L=function(c){function a(){var b=c.apply(this,arguments)||this;b.rasterJobHandler=null;b.datasetName=null;b.datasetFormat=null;b.rasterInfo=null;b.ioConfig={sampling:"closest"};return b}R._inheritsLoose(a,c);var e=a.prototype;e.init=async function(){const b=h.load();this.addResolvingPromise(b);await this.when()};e.normalizeCtorArgs=function(b){b&&b.ioConfig&&(b={...b,ioConfig:{resolution:null,bandIds:null,sampling:"closest",tileInfo:B.create(),
...b.ioConfig}});return b};e.open=async function(b){throw new I("BaseRaster:open-not-implemented","open() is not implemented");};e.fetchTile=async function(b,d,v,C={}){var H;const {tileInfo:F}=C;b=F.lodAt(b);d=this.getTileExtent({x:b.resolution,y:b.resolution},d,v,F.origin,F.spatialReference,F.size);null!=(H=C.multidimensionalDefinition)&&H.length&&X.isSome(this.rasterInfo.multidimensionalInfo)&&null==C.sliceId&&(C={...C,sliceId:this.getSliceIndex(C.multidimensionalDefinition)||0});return this.fetchPixels(d,
F.size[0],F.size[1],C)};e.identify=async function(b,d={}){const {spatialReference:v,extent:C}=this.rasterInfo;var {datumTransformation:H}=d;H=h.projectPoint(b,v,H);if(!C.intersects(H)||X.isSome(this.rasterInfo.transform)&&(H=this.rasterInfo.transform.inverseTransform(H),!this.rasterInfo.nativeExtent.intersects(H)))return{location:H,value:null};let F=0;if(d.srcResolution)F=h.snapPyramid(d.srcResolution,this.rasterInfo,this.ioConfig.sampling).pyramidLevel;else if(F=await this.computeBestPyramidLevelForLocation(b,
d),null==F)return{location:H,value:null};b=this.identifyPixelLocation(H,F,null);if(null===b)return{location:H,value:null};const {row:V,col:O,rowOffset:Q,colOffset:K}=b;b=x.getRasterId(this.url,d.sliceId);const P=`${F}/${V}/${O}`;let Z=x.getBlock(b,null,P);X.isSome(Z)||(Z=this.fetchRawTile(F,V,O,d),x.putBlock(b,null,P,Z));d=await Z;if(!(d&&d.pixels&&0<d.pixels.length))return{location:H,value:null};const aa=Q*this.rasterInfo.storageInfo.blockHeight+K;d=!d.mask||d.mask[aa]?d.pixels.map(ha=>ha[aa]):null;
return{location:H,value:d,pyramidLevel:F}};e.fetchPixels=async function(b,d,v,C={}){b=b.clone().normalize()[0];var H=this.rasterInfo.spatialReference,F=!b.spatialReference.equals(H),{datumTransformation:V}=C,O=new m({x:(b.xmax-b.xmin)/d,y:(b.ymax-b.ymin)/v,spatialReference:b.spatialReference}),Q=C.srcResolution||(F?h.projectResolution(O,H,b,V):O);if(!Q)return null;const {pyramidLevel:K,pyramidResolution:P,excessiveReading:Z}=h.snapPyramid(Q,this.rasterInfo,this.ioConfig.sampling);if(Z)return null;
var aa=this.rasterInfo.storageInfo;H=F?h.projectExtent(b,H,V):b;const ha=X.unwrap(this.rasterInfo.transform);ha&&(H=ha.inverseTransform(H));if(null==H)return null;var ea=Math.ceil((H.xmax-H.xmin)/P.x-.1),f=Math.ceil((H.ymax-H.ymin)/P.y-.1);if(8<ea/d||8<f/v)return null;ea=await this.fetchRawPixels(K,{x:Math.floor((H.xmin-aa.origin.x)/P.x+.1),y:Math.floor((aa.origin.y-H.ymax)/P.y+.1)},{width:ea,height:f},C);if(!ea)return null;f=0<K?aa.pyramidBlockWidth:aa.blockWidth;aa=0<K?aa.pyramidBlockHeight:aa.blockHeight;
if(!F&&1===ea.pixelBlocks.length&&f===d&&aa===v&&Q.x===O.x&&Q.y===O.y)return{extent:b,srcExtent:H,pixelBlock:ea.pixelBlocks[0]};F=h.getProjectionOffsetGrid(b,ea.extent,O,V,ha);V=!C.requestRawData;O={rows:F.spacing[0],cols:F.spacing[1]};const {pixelBlocks:u,mosaicSize:T,isPartiallyFilled:S}=ea;this.rasterJobHandler?d=await this.rasterJobHandler.mosaicAndTransform({srcPixelBlocks:u,srcMosaicSize:T,destDimension:V?{width:d,height:v}:null,coefs:V?F.coefficients:null,sampleSpacing:V?O:null,interpolation:C.interpolation},
C):(Q=G.mosaic(u,T),d=V?G.approximateTransform(Q,{width:d,height:v},F.coefficients,O,C.interpolation):Q);return C.requestRawData?{srcExtent:H,pixelBlock:d,transformGrid:F,extent:b,isPartiallyFilled:S}:{srcExtent:H,extent:b,pixelBlock:d}};e.fetchRawPixels=async function(b,d,v,C){const {origin:H,blockBoundary:F}=this.rasterInfo.storageInfo,{blockWidth:V,blockHeight:O}=this.getBlockWidthHeight(b);let {x:Q,y:K}=d,{width:P,height:Z}=v;C.buffer&&(Q-=C.buffer.cols,K-=C.buffer.rows,P+=2*C.buffer.cols,Z+=
2*C.buffer.rows);d=Math.floor(Q/V);v=Math.floor(K/O);const aa=Math.floor((Q+P-1)/V),ha=Math.floor((K+Z-1)/O);var ea=F[b];if(!ea)return null;const {minRow:f,minCol:u,maxCol:T,maxRow:S}=ea;if(ha<f||aa<u||v>S||d>T)return null;ea=[];let ba,fa=!1;for(var ia=v;ia<=ha;ia++)for(let ma=d;ma<=aa;ma++)ia>=f&&ma>=u&&S>=ia&&T>=ma?(ba=this._fetchRawTile(b,ia,ma,C),this.ioConfig.allowPartialFill&&(ba=new Promise(na=>{ba.then(oa=>na(oa)).catch(()=>{fa=!0;na(null)})})),ea.push(ba)):ea.push(null);if(0===ea.length)return null;
C=await Promise.all(ea);ea={height:(ha-v+1)*V,width:(aa-d+1)*O};const {nativePixelSize:ka,spatialReference:ja}=this.rasterInfo;ia=ka.x*2**b;b=ka.y*2**b;return{extent:new p({xmin:H.x+d*V*ia,xmax:H.x+(aa+1)*V*ia,ymin:H.y-(ha+1)*O*b,ymax:H.y-v*O*b,spatialReference:ja}),pixelBlocks:C,mosaicSize:ea,isPartiallyFilled:fa}};e.fetchRawTile=async function(b,d,v,C){throw new I("BaseRaster:read-not-implemented","fetchRawTile() is not implemented");};e.computeExtent=function(b){return h.projectExtent(this.rasterInfo.extent,
b)};e.decodePixelBlock=function(b,d){return!this.rasterJobHandler||d.useCanvas?J.decode(b,d):this.rasterJobHandler.decode({data:b,options:d})};e.request=async function(b,d,v){var C,H;const {customFetchParameters:F}=this.ioConfig,{range:V,query:O,headers:Q}=d;v=null!=(C=null!=(H=v)?H:d.retryCount)?C:this.ioConfig.retryCount;C=V?{Range:`bytes=${V.from}-${V.to}`}:null;try{return await E(b,{...d,query:{...O,...F},headers:{...Q,...C}})}catch(K){if(0<v)return v--,this.request(b,d,v);throw K;}};e.getSliceIndex=
function(b){const {multidimensionalInfo:d}=this.rasterInfo;if(!X.isSome(d)||null==b||!b.length)return null;let v=0;const C=b[0].variableName;for(let V=0;V<d.variables.length;V++){var H=d.variables[V];const O=H.dimensions;if(H.name!==C){v+=O.map(K=>this._getDimensionValuesCount(K)).reduce((K,P)=>K+P);break}H=O.map(K=>this._getDimensionValuesCount(K));const Q=O.length;for(let K=0;K<Q;K++){var F=b.filter(P=>P.dimensionName===O[K].name)[0];if(null==F)return null;F=Array.isArray(F.values[0])?F.values[0][0]:
F.values[0];F=this._getIndexFromDimensions(F,O[K]);if(-1===F)return null;H.shift();v=K===Q-1?v+F:v+F*H.reduce((P,Z)=>P+Z)}}return v};e.updateTileInfo=function(){const {storageInfo:b,spatialReference:d,extent:v,pixelSize:C}=this.rasterInfo;if(!b.tileInfo){const F=[];var H=b.maximumPyramidLevel||0;let V=Math.max(C.x,C.y),O=1/.0254*96*V;for(let Q=0;Q<=H;Q++)F.push({level:H-Q,resolution:V,scale:O}),V*=2,O*=2;H=new m({x:v.xmin,y:v.ymax,spatialReference:d});b.tileInfo=new B({origin:H,size:[b.blockWidth,
b.blockHeight],spatialReference:d,lods:F});b.isVirtualTileInfo=!0}};e.createRemoteDatasetStorageInfo=function(b,d=512,v=512,C){const {width:H,height:F,nativeExtent:V,pixelSize:O,spatialReference:Q}=b,K=new m({x:V.xmin,y:V.ymax,spatialReference:Q});null==C&&(C=Math.max(0,Math.round(Math.log(Math.max(H,F))/Math.LN2-8)));const P=this._computeBlockBoundary(V,O,C,512,512);b.storageInfo=new l({blockWidth:d,blockHeight:v,pyramidBlockWidth:d,pyramidBlockHeight:v,origin:K,firstPyramidLevel:1,maximumPyramidLevel:C,
blockBoundary:P})};e.computeBestPyramidLevelForLocation=async function(b,d){return 0};e.identifyPixelLocation=function(b,d,v){const {spatialReference:C,nativePixelSize:H,nativeExtent:F}=this.rasterInfo,{blockWidth:V,blockHeight:O,maximumPyramidLevel:Q,pyramidScalingFactor:K,origin:P}=this.rasterInfo.storageInfo;b=h.projectPoint(b,C,v);if(!F.intersects(b)||0>d||d>Q)return null;var Z=K**d;v=(P.y-b.y)/(Z*H.y)/O;Z=(b.x-P.x)/(Z*H.x)/V;return{pyramidLevel:d,row:Math.floor(v),col:Math.floor(Z),rowOffset:Math.min(O-
1,Math.floor((v-Math.floor(v))*O)),colOffset:Math.min(V-1,Math.floor((Z-Math.floor(Z))*V)),srcLocation:b}};e.getTileExtent=function(b,d,v,C,H,F){const [V,O]=F;v=C.x+v*V*b.x;d=C.y-d*O*b.y;return new p({xmin:v,xmax:v+V*b.x,ymin:d-O*b.y,ymax:d,spatialReference:H})};e.getBlockWidthHeight=function(b){return{blockWidth:0<b?this.rasterInfo.storageInfo.pyramidBlockWidth:this.rasterInfo.storageInfo.blockWidth,blockHeight:0<b?this.rasterInfo.storageInfo.pyramidBlockHeight:this.rasterInfo.storageInfo.blockHeight}};
e.isBlockOutside=function(b,d,v){b=this.rasterInfo.storageInfo.blockBoundary[b];return!b||b.maxRow<d||b.maxCol<v||b.minRow>d||b.minCol>v};e._computeBlockBoundary=function(b,d,v,C,H){let {x:F,y:V}=d;d=b.xmin;const O=b.ymax,Q=[{minCol:Math.floor((b.xmin-d+.1*F)/C/F),maxCol:Math.floor((b.xmax-d-.1*F)/C/F),minRow:Math.floor((O-b.ymax+.1*V)/H/V),maxRow:Math.floor((O-b.ymin-.1*V)/H/V)}];if(0<v)for(let K=0;K<v;K++)F*=2,V*=2,Q.push({minCol:Math.floor((b.xmin-d+.1*F)/C/F),maxCol:Math.floor((b.xmax-d-.1*F)/
C/F),minRow:Math.floor((O-b.ymax+.1*V)/H/F),maxRow:Math.floor((O-b.ymin-.1*V)/H/F)});return Q};e._fetchRawTile=function(b,d,v,C){var H=this.rasterInfo.storageInfo.blockBoundary[b];if(!H)return Promise.resolve(null);const {minRow:F,minCol:V,maxCol:O,maxRow:Q}=H;if(d<F||v<V||d>Q||v>O)return Promise.resolve(null);const K=x.getRasterId(this.url,C.sliceId),P=`${b}/${d}/${v}`;H=x.getBlock(K,C.registryId,P);if(!X.isSome(H)){const Z=k.createAbortController();H=this.fetchRawTile(b,d,v,{...C,signal:Z.signal});
x.putBlock(K,C.registryId,P,H,Z);H.catch(()=>{x.deleteBlock(K,C.registryId,P)})}if(C.signal)k.onAbort(C,()=>{x.decreaseRefCount(K,C.registryId,P)});return H};e._getIndexFromDimensions=function(b,d){const {extent:v,interval:C,unit:H,values:F}=d;if(null!=F&&F.length)return Array.isArray(F[0])?F.findIndex(K=>K[0]<=b&&K[1]>=b):F.indexOf(b);if(b>v[1])return-1;const V=v[0];let O=-1;if("ISO8601"===H){var Q;switch((null==(Q=d.intervalUnit)?void 0:Q.toLowerCase())||"seconds"){case "seconds":O=Math.round((b-
V)/1E3/C);break;case "minutes":O=Math.round((b-V)/6E4/C);break;case "hours":O=Math.round((b-V)/36E5/C);break;case "days":O=Math.round((b-V)/864E5/C);break;case "years":O=Math.round(((new Date(b)).getUTCFullYear()-(new Date(V)).getUTCFullYear())/C);break;case "decades":O=Math.round(((new Date(b)).getUTCFullYear()-(new Date(V)).getUTCFullYear())/10/C)}return O}return Math.round((b-V)/C)};e._getDimensionValuesCount=function(b){const {extent:d,interval:v,unit:C,values:H}=b;let F=(null==H?void 0:H.length)||
0;if(F)return F;const V=d[0];if(0===F&&"ISO8601"===C){var O;switch((null==(O=b.intervalUnit)?void 0:O.toLowerCase())||"seconds"){case "seconds":F=Math.round((d[1]-d[0])/1E3/v);break;case "minutes":F=Math.round((d[1]-d[0])/6E4/v);break;case "hours":F=Math.round((d[1]-d[0])/36E5/v);break;case "days":F=Math.round((d[1]-d[0])/864E5/v);break;case "years":F=Math.round(((new Date(d[1])).getUTCFullYear()-(new Date(V)).getUTCFullYear())/v);break;case "decades":F=Math.round(((new Date(d[1])).getUTCFullYear()-
(new Date(V)).getUTCFullYear())/10/v)}return F}return Math.round((d[1]-d[0])/v)};R._createClass(a,[{key:"url",set:function(b){this._set("url",q.sanitizeUrl(b,A.getLogger(this.declaredClass)))}}]);return a}(w.EsriPromiseMixin(g.JSONSupport));n.__decorate([N.property(t.url)],L.prototype,"url",null);n.__decorate([N.property({type:String,json:{write:!0}})],L.prototype,"datasetName",void 0);n.__decorate([N.property({type:String,json:{write:!0}})],L.prototype,"datasetFormat",void 0);n.__decorate([N.property()],
L.prototype,"rasterInfo",void 0);n.__decorate([N.property()],L.prototype,"ioConfig",void 0);n.__decorate([N.property()],L.prototype,"sourceJSON",void 0);return L=n.__decorate([W.subclass("esri.layers.support.rasterDatasets.BaseRaster")],L)})},"esri/layers/support/rasterFormats/RasterCodec":function(){define("exports ../../../core/Error ../PixelBlock ../../../chunks/_commonjsHelpers ../../../chunks/Zlib ./ImageCanvasDecoder ./JpgPlus ../../../chunks/LercCodec ./Raw ./utils ./TiffDecoder".split(" "),
function(R,n,L,X,A,M,N,U,W,I,z){function D(G,l){if(!I.isPlatformLittleEndian)throw new n("rasterCoded:decode","lerc decoder is not supported on big endian platform");const {width:h,height:x,pixelType:c}=l;var a=w(c);const e=a.pixelTypeCtor;l=null==l.noDataValue?a.noDataValue:l.noDataValue;a=0;let b,d=0,v;const C=G.byteLength-10;for(;d<C;){var H=U.decode(G,{inputOffset:d,encodedMaskData:b,returnMask:0===a?!0:!1,returnEncodedMask:0===a?!0:!1,returnFileInfo:!0,pixelType:e,noDataValue:l});if(h&&x&&(H.width!==
h||H.height!==x))throw new n("rasterCoded:decode","lerc decoded result has width or height different from specified in options");d=H.fileInfo.eofOffset;0===a&&(b=H.encodedMaskData,v=new L({width:H.width,height:H.height,pixels:[],pixelType:c,mask:H.maskData,statistics:[]}));a++;v.addData({pixels:H.pixelData,statistics:{minValue:H.minValue,maxValue:H.maxValue,noDataValue:H.noDataValue}});10<C-d&&(H=String.fromCharCode.apply(null,new Uint8Array(G,d,10)),d=-1<d+H.indexOf("CntZ")?H.indexOf("CntZ"):0)}return v}
function r(G,l){if(!I.isPlatformLittleEndian)throw new n("rasterCoded:decode","lerc decoder is not supported on big endian platform");var h=0,x=0,c=0;let a;let e;const b=G.byteLength-10,d=[],{width:v,height:C}=l;for(l=0;x<b;){var H;var F=t.decode(G,{inputOffset:x,maskData:a,returnFileInfo:!0});if(v&&C&&(F.width!==v||F.height!==C))throw new n("rasterCoded:decode","lerc2 decoded result has width or height different from what's specified in options");x=F.fileInfo.eofOffset;a=F.maskData;0===h&&(c=F.fileInfo.numValidPixel,
e=new L({width:F.width,height:F.height,pixels:[],pixelType:F.fileInfo.pixelType,mask:a,statistics:[]}));F.fileInfo.mask&&0<F.fileInfo.mask.numBytes&&l++;a&&d.push(a);if(1<F.dimCount&&(null==(H=F.pixelData)?void 0:H.length)===F.width*F.height*F.dimCount){var V,O,Q,K;F.pixelData=F.pixelData.slice(-F.width*F.height);const P=null==(V=F.dimStats)?void 0:null==(O=V.minValues)?void 0:O[F.dimCount-1],Z=null==(Q=F.dimStats)?void 0:null==(K=Q.maxValues)?void 0:K[F.dimCount-1];null!=P&&null!=Z&&(F.minValue=
P,F.maxValue=Z)}h++;e.addData({pixels:F.pixelData,statistics:{minValue:F.minValue,maxValue:F.maxValue}});10<b-x&&(F=String.fromCharCode.apply(null,new Uint8Array(G,x,10)),x+=-1<F.indexOf("Lerc")?F.indexOf("Lerc"):0)}x=h=G=0;if(1<l){x=e.width*e.height;a=new Uint8Array(x);a.set(d[0]);for(G=1;G<d.length;G++)for(c=d[G],h=0;h<x;h++)a[h]&=c[h];for(h=c=0;h<x;h++)c+=a[h];e.mask=a}e.validPixelCount=c;return e}function k(G){G=z.decode(G);G=new L({width:G.width,height:G.height,pixels:G.pixels,pixelType:G.pixelType.toLowerCase(),
mask:G.mask,statistics:null});G.updateStatistics();return G}function g(G){G=N.decode(G);G=new L({width:G.width,height:G.height,pixels:G.pixels,pixelType:"U8",mask:G.mask,statistics:null});G.updateStatistics();return G}function m(G,l){G=new Uint8Array(G);G=new B(G);const {width:h,height:x}=l;l=h*x;G=G.decode();let c=0;var a=0;let e;a=new Uint8Array(l);for(c=0;c<l;c++)a[c]=G[4*c+3];const b=new L({width:h,height:x,pixels:[],pixelType:"U8",mask:a,statistics:[]});for(c=0;3>c;c++){e=new Uint8Array(l);for(a=
0;a<l;a++)e[a]=G[4*a+c];b.addData({pixels:e})}b.updateStatistics();return b}async function p(G,l,h,x){G=await (new M).decode(G,{applyJpegMask:!1,format:l,...h},x);G=new L(G);G.updateStatistics();return G}function y(G){if(null==G)throw new n("rasterCodec:decode","parameter encodeddata is required.");G=new Uint8Array(G,0,10);let l="";255===G[0]&&216===G[1]?l="jpg":137===G[0]&&80===G[1]&&78===G[2]&&71===G[3]?l="png":67===G[0]&&110===G[1]&&116===G[2]&&90===G[3]&&73===G[4]&&109===G[5]&&97===G[6]&&103===
G[7]&&101===G[8]&&32===G[9]?l="lerc":76===G[0]&&101===G[1]&&114===G[2]&&99===G[3]&&50===G[4]&&32===G[5]?l="lerc2":73===G[0]&&73===G[1]&&42===G[2]&&0===G[3]||77===G[0]&&77===G[1]&&0===G[2]&&42===G[3]||73===G[0]&&73===G[1]&&43===G[2]&&0===G[3]||77===G[0]&&77===G[1]&&0===G[2]&&43===G[3]?l="tiff":71===G[0]&&73===G[1]&&70===G[2]?l="gif":66===G[0]&&77===G[1]?l="bmp":-1<String.fromCharCode.apply(null,G).toLowerCase().indexOf("error")&&(l="error");return l}function E(G){let l=null;switch(G){case "lerc":l=
D;break;case "lerc2":l=r;break;case "jpg":l=g;break;case "png":l=m;break;case "bsq":case "bip":l=(h,x)=>{{const {pixelTypeCtor:c}=w(x.pixelType),a=W.decode;h=a(h,{width:x.width,height:x.height,pixelType:c,format:G});x=new L({width:x.width,height:x.height,pixels:h.pixels,pixelType:x.pixelType,mask:h.mask,statistics:null});x.updateStatistics()}return x};break;case "tiff":l=k;break;case "error":l=()=>{throw new n("rasterCodec:decode","input data contains error");};break;default:l=()=>{throw new n("rasterCodec:decode",
"unsupported raster format");}}return l}function w(G){let l=null,h=null;switch(G?G.toLowerCase():"f32"){case "u1":case "u2":case "u4":case "u8":h=255;l=Uint8Array;break;case "u16":h=h||65535;l=Uint16Array;break;case "u32":h=h||2**32-1;l=Uint32Array;break;case "s8":h=h||-128;l=Int8Array;break;case "s16":h=h||-32768;l=Int16Array;break;case "s32":h=h||-(2**31);l=Int32Array;break;default:l=Float32Array}return{pixelTypeCtor:l,noDataValue:h}}function q(G,l=1){if(G){var {pixels:h,width:x,height:c,mask:a}=
G;if(h&&0!==h.length){var e=h.length,b=x-1,d=c-1,v=[],C,H,F=L.getPixelArrayConstructor(G.pixelType);if(0===l){for(l=0;l<e;l++){var V=h[l];var O=new F(b*d);for(C=0;C<d;C++){var Q=C*x;for(H=0;H<b;H++)O[C*b+H]=V[Q+H]}v.push(O)}if(a){var K=new Uint8Array(b*d);for(C=0;C<d;C++)for(Q=C*x,H=0;H<b;H++)K[C*b+H]=a[Q+H]}}else{for(l=0;l<e;l++){V=h[l];O=new F(b*d);for(C=0;C<d;C++)for(Q=C*x,H=0;H<b;H++)O[C*b+H]=(V[Q+H]+V[Q+H+1]+V[Q+x+H]+V[Q+x+H+1])/4;v.push(O)}if(a)for(K=new Uint8Array(b*d),C=0;C<d;C++)for(Q=C*
x,H=0;H<b;H++)K[C*b+H]=Math.min.apply(null,[a[Q+H],a[Q+H+1],a[Q+x+H],a[Q+x+H+1]])}G.width=b;G.height=d;G.mask=K;G.pixels=v}}}var t=X.createCommonjsModule(function(G){(function(l){l=l();void 0!==l&&(G.exports=l)})(function(){var l={unstuff:function(c,a,e,b,d,v,C,H){var F=(1<<e)-1,V=0,O,Q=0;c[c.length-1]<<=8*(4*c.length-Math.ceil(e*b/8));if(d)for(O=0;O<b;O++){if(0===Q){var K=c[V++];Q=32}if(Q>=e){var P=K>>>Q-e&F;Q-=e}else Q=e-Q,P=(K&F)<<Q&F,K=c[V++],Q=32-Q,P+=K>>>Q;a[O]=d[P]}else for(d=Math.ceil((H-
v)/C),O=0;O<b;O++)0===Q&&(K=c[V++],Q=32),Q>=e?(P=K>>>Q-e&F,Q-=e):(Q=e-Q,P=(K&F)<<Q&F,K=c[V++],Q=32-Q,P+=K>>>Q),a[O]=P<d?v+P*C:H},unstuffLUT:function(c,a,e,b,d,v){var C=(1<<a)-1,H=0,F=0,V=0,O=V=0,Q=[];c[c.length-1]<<=8*(4*c.length-Math.ceil(a*e/8));var K=Math.ceil((v-b)/d);for(F=0;F<e;F++){if(0===V){var P=c[H++];V=32}V>=a?(O=P>>>V-a&C,V-=a):(V=a-V,O=(P&C)<<V&C,P=c[H++],V=32-V,O+=P>>>V);Q[F]=O<K?b+O*d:v}Q.unshift(b);return Q},unstuff2:function(c,a,e,b,d,v,C,H){var F=(1<<e)-1,V=0,O,Q=0,K=0;if(d)for(O=
0;O<b;O++){if(0===Q){var P=c[V++];Q=32;K=0}if(Q>=e){var Z=P>>>K&F;Q-=e;K+=e}else{var aa=e-Q;Z=P>>>K&F;P=c[V++];Q=32-aa;Z|=(P&(1<<aa)-1)<<e-aa;K=aa}a[O]=d[Z]}else for(d=Math.ceil((H-v)/C),O=0;O<b;O++)0===Q&&(P=c[V++],Q=32,K=0),Q>=e?(Z=P>>>K&F,Q-=e,K+=e):(aa=e-Q,Z=P>>>K&F,P=c[V++],Q=32-aa,Z|=(P&(1<<aa)-1)<<e-aa,K=aa),a[O]=Z<d?v+Z*C:H;return a},unstuffLUT2:function(c,a,e,b,d,v){var C=(1<<a)-1,H=0,F=0,V=0,O=0,Q=0,K=0,P=[],Z=Math.ceil((v-b)/d);for(F=0;F<e;F++){if(0===O){var aa=c[H++];O=32;K=0}O>=a?(Q=
aa>>>K&C,O-=a,K+=a):(V=a-O,Q=aa>>>K&C,aa=c[H++],O=32-V,Q|=(aa&(1<<V)-1)<<a-V,K=V);P[F]=Q<Z?b+Q*d:v}P.unshift(b);return P},originalUnstuff:function(c,a,e,b){var d=(1<<e)-1,v=0,C,H=0;c[c.length-1]<<=8*(4*c.length-Math.ceil(e*b/8));for(C=0;C<b;C++){if(0===H){var F=c[v++];H=32}if(H>=e){var V=F>>>H-e&d;H-=e}else H=e-H,V=(F&d)<<H&d,F=c[v++],H=32-H,V+=F>>>H;a[C]=V}return a},originalUnstuff2:function(c,a,e,b){var d=(1<<e)-1,v=0,C,H=0,F=0;for(C=0;C<b;C++){if(0===H){var V=c[v++];H=32;F=0}if(H>=e){var O=V>>>
F&d;H-=e;F+=e}else{var Q=e-H;O=V>>>F&d;V=c[v++];H=32-Q;O|=(V&(1<<Q)-1)<<e-Q;F=Q}a[C]=O}return a}},h={HUFFMAN_LUT_BITS_MAX:12,computeChecksumFletcher32:function(c){for(var a=65535,e=65535,b=c.length,d=Math.floor(b/2),v=0;d;){var C=359<=d?359:d;d-=C;do a+=c[v++]<<8,e+=a+=c[v++];while(--C);a=(a&65535)+(a>>>16);e=(e&65535)+(e>>>16)}b&1&&(e+=a+=c[v]<<8);return((e&65535)+(e>>>16)<<16|(a&65535)+(a>>>16))>>>0},readHeaderInfo:function(c,a){var e=a.ptr,b=new Uint8Array(c,e,6),d={};d.fileIdentifierString=String.fromCharCode.apply(null,
b);if(0!==d.fileIdentifierString.lastIndexOf("Lerc2",0))throw"Unexpected file identifier string (expect Lerc2 ): "+d.fileIdentifierString;e+=6;b=new DataView(c,e,8);var v=b.getInt32(0,!0);d.fileVersion=v;e+=4;3<=v&&(d.checksum=b.getUint32(4,!0),e+=4);b=new DataView(c,e,12);d.height=b.getUint32(0,!0);d.width=b.getUint32(4,!0);e+=8;4<=v?(d.numDims=b.getUint32(8,!0),e+=4):d.numDims=1;b=new DataView(c,e,40);d.numValidPixel=b.getUint32(0,!0);d.microBlockSize=b.getInt32(4,!0);d.blobSize=b.getInt32(8,!0);
d.imageType=b.getInt32(12,!0);d.maxZError=b.getFloat64(16,!0);d.zMin=b.getFloat64(24,!0);d.zMax=b.getFloat64(32,!0);e+=40;a.headerInfo=d;a.ptr=e;if(3<=v&&(c=this.computeChecksumFletcher32(new Uint8Array(c,e-(4<=v?52:48),d.blobSize-14)),c!==d.checksum))throw"Checksum failed.";return!0},checkMinMaxRanges:function(c,a){var e=a.headerInfo,b=this.getDataTypeArray(e.imageType),d=e.numDims*this.getDataTypeSize(e.imageType),v=this.readSubArray(c,a.ptr,b,d);c=this.readSubArray(c,a.ptr+d,b,d);a.ptr+=2*d;d=
!0;for(a=0;a<e.numDims;a++)if(v[a]!==c[a]){d=!1;break}e.minValues=v;e.maxValues=c;return d},readSubArray:function(c,a,e,b){if(e===Uint8Array)c=new Uint8Array(c,a,b);else{var d=new ArrayBuffer(b);(new Uint8Array(d)).set(new Uint8Array(c,a,b));c=new e(d)}return c},readMask:function(c,a){var e=a.ptr,b=a.headerInfo,d=b.width*b.height,v=b.numValidPixel,C=new DataView(c,e,4);b={};b.numBytes=C.getUint32(0,!0);e+=4;if((0===v||d===v)&&0!==b.numBytes)throw"invalid mask";if(0===v)v=new Uint8Array(Math.ceil(d/
8)),b.bitset=v,C=new Uint8Array(d),a.pixels.resultMask=C,e+=b.numBytes;else if(0<b.numBytes){v=new Uint8Array(Math.ceil(d/8));C=new DataView(c,e,b.numBytes);c=C.getInt16(0,!0);var H=2,F=0,V=0;do{if(0<c)for(;c--;)v[F++]=C.getUint8(H++);else for(V=C.getUint8(H++),c=-c;c--;)v[F++]=V;c=C.getInt16(H,!0);H+=2}while(H<b.numBytes);if(-32768!==c||F<v.length)throw"Unexpected end of mask RLE encoding";C=new Uint8Array(d);for(H=H=c=0;H<d;H++)H&7?(c=v[H>>3],c<<=H&7):c=v[H>>3],c&128&&(C[H]=1);a.pixels.resultMask=
C;b.bitset=v;e+=b.numBytes}a.ptr=e;a.mask=b;return!0},readDataOneSweep:function(c,a,e){var b=a.ptr,d=a.headerInfo,v=d.numDims,C=d.width*d.height;d=d.numValidPixel*h.getDataTypeSize(d.imageType)*v;var H=a.pixels.resultMask;if(e===Uint8Array)c=new Uint8Array(c,b,d);else{var F=new ArrayBuffer(d);(new Uint8Array(F)).set(new Uint8Array(c,b,d));c=new e(F)}if(c.length===C*v)a.pixels.resultPixels=c;else{a.pixels.resultPixels=new e(C*v);var V=F=e=0,O=0;if(1<v)for(V=0;V<v;V++)for(O=V*C,F=0;F<C;F++)H[F]&&(a.pixels.resultPixels[O+
F]=c[e++]);else for(F=0;F<C;F++)H[F]&&(a.pixels.resultPixels[F]=c[e++])}a.ptr=b+d;return!0},readHuffmanTree:function(c,a){var e=this.HUFFMAN_LUT_BITS_MAX,b=new DataView(c,a.ptr,16);a.ptr+=16;if(2>b.getInt32(0,!0))throw"unsupported Huffman version";var d=b.getInt32(4,!0),v=b.getInt32(8,!0);b=b.getInt32(12,!0);if(v>=b)return!1;var C=new Uint32Array(b-v);h.decodeBits(c,a,C);var H=[],F;for(F=v;F<b;F++){var V=F-(F<d?0:d);H[V]={first:C[F-v],second:null}}F=c.byteLength-a.ptr;C=new ArrayBuffer(4*Math.ceil(F/
4));(new Uint8Array(C)).set(new Uint8Array(c,a.ptr,F));c=new Uint32Array(C);a=0;C=0;var O=c[0];for(F=v;F<b;F++){V=F-(F<d?0:d);var Q=H[V].first;0<Q&&(H[V].second=O<<a>>>32-Q,32-a>=Q?(a+=Q,32===a&&(a=0,C++,O=c[C])):(a+=Q-32,C++,O=c[C],H[V].second|=O>>>32-a))}var K=O=0,P=new x;for(F=0;F<H.length;F++)void 0!==H[F]&&(O=Math.max(O,H[F].first));K=O>=e?e:O;e=[];var Z;for(F=v;F<b;F++)if(V=F-(F<d?0:d),Q=H[V].first,0<Q)if(v=[Q,V],Q<=K){V=H[V].second<<K-Q;var aa=1<<K-Q;for(Q=0;Q<aa;Q++)e[V|Q]=v}else for(V=H[V].second,
aa=P,--Q;0<=Q;Q--)(Z=V>>>Q&1)?(aa.right||(aa.right=new x),aa=aa.right):(aa.left||(aa.left=new x),aa=aa.left),0!==Q||aa.val||(aa.val=v[1]);return{decodeLut:e,numBitsLUTQick:K,numBitsLUT:O,tree:P,stuffedData:c,srcPtr:C,bitPos:a}},readHuffman:function(c,a,e){var b=a.headerInfo,d=b.numDims,v=a.headerInfo.height,C=a.headerInfo.width,H=C*v,F=this.readHuffmanTree(c,a);c=F.decodeLut;var V=F.tree,O=F.stuffedData,Q=F.srcPtr,K=F.bitPos,P=F.numBitsLUTQick;F=F.numBitsLUT;var Z=0===a.headerInfo.imageType?128:0,
aa=a.pixels.resultMask,ha,ea,f,u,T,S,ba=0;0<K&&(Q++,K=0);var fa=O[Q],ia=1===a.encodeMode,ka=new e(H*d),ja=ka,ma;for(ma=0;ma<b.numDims;ma++){1<d&&(ja=new e(ka.buffer,H*ma,H),ba=0);if(a.headerInfo.numValidPixel===C*v)for(f=T=0;f<v;f++)for(u=0;u<C;u++,T++){var na=0;var oa=ha=fa<<K>>>32-P;32-K<P&&(oa=ha|=O[Q+1]>>>64-K-P);if(c[oa])na=c[oa][1],K+=c[oa][0];else for(oa=ha=fa<<K>>>32-F,32-K<F&&(oa=ha|=O[Q+1]>>>64-K-F),oa=V,S=0;S<F;S++)if(oa=(ea=ha>>>F-S-1&1)?oa.right:oa.left,!oa.left&&!oa.right){na=oa.val;
K=K+S+1;break}32<=K&&(K-=32,Q++,fa=O[Q]);na-=Z;ia?(na=0<u?na+ba:0<f?na+ja[T-C]:na+ba,na&=255,ba=ja[T]=na):ja[T]=na}else for(f=T=0;f<v;f++)for(u=0;u<C;u++,T++)if(aa[T]){na=0;oa=ha=fa<<K>>>32-P;32-K<P&&(oa=ha|=O[Q+1]>>>64-K-P);if(c[oa])na=c[oa][1],K+=c[oa][0];else for(oa=ha=fa<<K>>>32-F,32-K<F&&(oa=ha|=O[Q+1]>>>64-K-F),oa=V,S=0;S<F;S++)if(oa=(ea=ha>>>F-S-1&1)?oa.right:oa.left,!oa.left&&!oa.right){na=oa.val;K=K+S+1;break}32<=K&&(K-=32,Q++,fa=O[Q]);na-=Z;ia?(na=0<u&&aa[T-1]?na+ba:0<f&&aa[T-C]?na+ja[T-
C]:na+ba,na&=255,ba=ja[T]=na):ja[T]=na}a.ptr=a.ptr+4*(Q+1)+(0<K?4:0)}a.pixels.resultPixels=ka},decodeBits:function(c,a,e,b,d){var v=a.headerInfo,C=v.fileVersion,H=0,F=new DataView(c,a.ptr,5<=c.byteLength-a.ptr?5:c.byteLength-a.ptr),V=F.getUint8(0);H++;var O=V>>6,Q=0===O?4:3-O,K=0<(V&32)?!0:!1;O=V&31;V=0;if(1===Q)V=F.getUint8(H),H++;else if(2===Q)V=F.getUint16(H,!0),H+=2;else if(4===Q)V=F.getUint32(H,!0),H+=4;else throw"Invalid valid pixel count type";Q=2*v.maxZError;d=1<v.numDims?v.maxValues[d]:v.zMax;
if(K){a.counter.lut++;K=F.getUint8(H);H++;v=Math.ceil((K-1)*O/8);var P=Math.ceil(v/4);P=new ArrayBuffer(4*P);var Z=new Uint8Array(P);a.ptr+=H;Z.set(new Uint8Array(c,a.ptr,v));H=new Uint32Array(P);a.ptr+=v;for(F=0;K-1>>>F;)F++;v=Math.ceil(V*F/8);P=Math.ceil(v/4);P=new ArrayBuffer(4*P);Z=new Uint8Array(P);Z.set(new Uint8Array(c,a.ptr,v));c=new Uint32Array(P);a.ptr+=v;a=3<=C?l.unstuffLUT2(H,O,K-1,b,Q,d):l.unstuffLUT(H,O,K-1,b,Q,d);3<=C?l.unstuff2(c,e,F,V,a):l.unstuff(c,e,F,V,a)}else a.counter.bitstuffer++,
F=O,a.ptr+=H,0<F&&(v=Math.ceil(V*F/8),P=Math.ceil(v/4),P=new ArrayBuffer(4*P),Z=new Uint8Array(P),Z.set(new Uint8Array(c,a.ptr,v)),c=new Uint32Array(P),a.ptr+=v,3<=C?null==b?l.originalUnstuff2(c,e,F,V):l.unstuff2(c,e,F,V,!1,b,Q,d):null==b?l.originalUnstuff(c,e,F,V):l.unstuff(c,e,F,V,!1,b,Q,d))},readTiles:function(c,a,e){var b=a.headerInfo,d=b.width,v=b.height,C=b.microBlockSize,H=b.imageType,F=h.getDataTypeSize(H),V=Math.ceil(d/C),O=Math.ceil(v/C);a.pixels.numBlocksY=O;a.pixels.numBlocksX=V;var Q=
a.pixels.ptr=0,K=0,P=0,Z=0,aa=0,ha=0,ea=0,f=0,u=0,T=0,S=0,ba=0,fa=0;ea=fa=ea=0;var ia=new e(C*C),ka=v%C||C,ja=d%C||C,ma=b.numDims,na,oa=a.pixels.resultMask,ra=a.pixels.resultPixels,sa=5<=b.fileVersion?14:15,ua=b.zMax;for(P=0;P<O;P++)for(aa=P!==O-1?C:ka,Z=0;Z<V;Z++)for(ha=Z!==V-1?C:ja,S=P*d*C+Z*C,ba=d-ha,na=0;na<ma;na++){1<ma?(fa=ra,S=P*d*C+Z*C,ra=new e(a.pixels.resultPixels.buffer,d*v*na*F,d*v),ua=b.maxValues[na]):fa=null;ea=c.byteLength-a.ptr;Q=new DataView(c,a.ptr,Math.min(10,ea));K={};ea=0;f=Q.getUint8(0);
ea++;var ta=5<=b.fileVersion?f&4:0;u=f>>6&255;T=f>>2&sa;if(T!==(Z*C>>3&sa))throw"integrity issue";if(ta&&0===na)throw"integrity issue";f&=3;if(3<f)throw a.ptr+=ea,"Invalid block encoding ("+f+")";if(2===f){if(ta)if(oa)for(Q=0;Q<aa;Q++)for(K=0;K<ha;K++)oa[S]&&(ra[S]=fa[S]),S++;else for(Q=0;Q<aa;Q++)for(K=0;K<ha;K++)ra[S]=fa[S],S++;a.counter.constant++;a.ptr+=ea}else if(0===f){if(ta)throw"integrity issue";a.counter.uncompressed++;a.ptr+=ea;fa=aa*ha*F;ea=c.byteLength-a.ptr;fa=fa<ea?fa:ea;ea=new ArrayBuffer(0===
fa%F?fa:fa+F-fa%F);ta=new Uint8Array(ea);ta.set(new Uint8Array(c,a.ptr,fa));ea=new e(ea);fa=0;if(oa)for(Q=0;Q<aa;Q++){for(K=0;K<ha;K++)oa[S]&&(ra[S]=ea[fa++]),S++;S+=ba}else for(Q=0;Q<aa;Q++){for(K=0;K<ha;K++)ra[S++]=ea[fa++];S+=ba}a.ptr+=fa*F}else if(u=h.getDataTypeUsed(ta&&6>H?4:H,u),T=h.getOnePixel(K,ea,u,Q),ea+=h.getDataTypeSize(u),3===f)if(a.ptr+=ea,a.counter.constantoffset++,oa)for(Q=0;Q<aa;Q++){for(K=0;K<ha;K++)oa[S]&&(ra[S]=ta?Math.min(ua,fa[S]+T):T),S++;S+=ba}else for(Q=0;Q<aa;Q++){for(K=
0;K<ha;K++)ra[S]=ta?Math.min(ua,fa[S]+T):T,S++;S+=ba}else if(a.ptr+=ea,h.decodeBits(c,a,ia,T,na),ea=0,ta)if(oa)for(Q=0;Q<aa;Q++){for(K=0;K<ha;K++)oa[S]&&(ra[S]=ia[ea++]+fa[S]),S++;S+=ba}else for(Q=0;Q<aa;Q++){for(K=0;K<ha;K++)ra[S]=ia[ea++]+fa[S],S++;S+=ba}else if(oa)for(Q=0;Q<aa;Q++){for(K=0;K<ha;K++)oa[S]&&(ra[S]=ia[ea++]),S++;S+=ba}else for(Q=0;Q<aa;Q++){for(K=0;K<ha;K++)ra[S++]=ia[ea++];S+=ba}}},formatFileInfo:function(c){return{fileIdentifierString:c.headerInfo.fileIdentifierString,fileVersion:c.headerInfo.fileVersion,
imageType:c.headerInfo.imageType,height:c.headerInfo.height,width:c.headerInfo.width,numValidPixel:c.headerInfo.numValidPixel,microBlockSize:c.headerInfo.microBlockSize,blobSize:c.headerInfo.blobSize,maxZError:c.headerInfo.maxZError,pixelType:h.getPixelType(c.headerInfo.imageType),eofOffset:c.eofOffset,mask:c.mask?{numBytes:c.mask.numBytes}:null,pixels:{numBlocksX:c.pixels.numBlocksX,numBlocksY:c.pixels.numBlocksY,maxValue:c.headerInfo.zMax,minValue:c.headerInfo.zMin,noDataValue:c.noDataValue}}},
constructConstantSurface:function(c){var a=c.headerInfo.zMax,e=c.headerInfo.numDims,b=c.headerInfo.height*c.headerInfo.width,d=0,v=0,C=0,H=c.pixels.resultMask,F=c.pixels.resultPixels;if(H)if(1<e)for(d=0;d<e;d++)for(C=d*b,a=c.headerInfo.maxValues[d],v=0;v<b;v++)H[v]&&(F[C+v]=a);else for(v=0;v<b;v++)H[v]&&(F[v]=a);else if(1<e)for(d=0;d<e;d++)for(C=d*b,a=c.headerInfo.maxValues[d],v=0;v<b;v++)F[C+v]=a;else for(v=0;v<b;v++)F[v]=a},getDataTypeArray:function(c){switch(c){case 0:c=Int8Array;break;case 1:c=
Uint8Array;break;case 2:c=Int16Array;break;case 3:c=Uint16Array;break;case 4:c=Int32Array;break;case 5:c=Uint32Array;break;case 6:c=Float32Array;break;case 7:c=Float64Array;break;default:c=Float32Array}return c},getPixelType:function(c){switch(c){case 0:c="S8";break;case 1:c="U8";break;case 2:c="S16";break;case 3:c="U16";break;case 4:c="S32";break;case 5:c="U32";break;case 6:c="F32";break;case 7:c="F64";break;default:c="F32"}return c},isValidPixelValue:function(c,a){if(null==a)return!1;switch(c){case 0:c=
-128<=a&&127>=a;break;case 1:c=0<=a&&255>=a;break;case 2:c=-32768<=a&&32767>=a;break;case 3:c=0<=a&&65536>=a;break;case 4:c=-2147483648<=a&&2147483647>=a;break;case 5:c=0<=a&&4294967296>=a;break;case 6:c=-3.4027999387901484E38<=a&&3.4027999387901484E38>=a;break;case 7:c=4.9E-324<=a&&1.7976931348623157E308>=a;break;default:c=!1}return c},getDataTypeSize:function(c){var a=0;switch(c){case 0:case 1:a=1;break;case 2:case 3:a=2;break;case 4:case 5:case 6:a=4;break;case 7:a=8;break;default:a=c}return a},
getDataTypeUsed:function(c,a){var e=c;switch(c){case 2:case 4:e=c-a;break;case 3:case 5:e=c-2*a;break;case 6:e=0===a?c:1===a?2:1;break;case 7:e=0===a?c:c-2*a+1;break;default:e=c}return e},getOnePixel:function(c,a,e,b){c=0;switch(e){case 0:c=b.getInt8(a);break;case 1:c=b.getUint8(a);break;case 2:c=b.getInt16(a,!0);break;case 3:c=b.getUint16(a,!0);break;case 4:c=b.getInt32(a,!0);break;case 5:c=b.getUInt32(a,!0);break;case 6:c=b.getFloat32(a,!0);break;case 7:c=b.getFloat64(a,!0);break;default:throw"the decoder does not understand this pixel type";
}return c}},x=function(c,a,e){this.val=c;this.left=a;this.right=e};return{decode:function(c,a){a=a||{};var e=a.noDataValue,b=0,d={};d.ptr=a.inputOffset||0;d.pixels={};if(h.readHeaderInfo(c,d)){b=d.headerInfo;var v=b.fileVersion,C=h.getDataTypeArray(b.imageType);if(5<v)throw"unsupported lerc version 2."+v;h.readMask(c,d);b.numValidPixel===b.width*b.height||d.pixels.resultMask||(d.pixels.resultMask=a.maskData);var H=b.width*b.height;d.pixels.resultPixels=new C(H*b.numDims);d.counter={onesweep:0,uncompressed:0,
lut:0,bitstuffer:0,constant:0,constantoffset:0};if(0!==b.numValidPixel)if(b.zMax===b.zMin)h.constructConstantSurface(d);else if(4<=v&&h.checkMinMaxRanges(c,d))h.constructConstantSurface(d);else{var F=new DataView(c,d.ptr,2),V=F.getUint8(0);d.ptr++;if(V)h.readDataOneSweep(c,d,C);else if(1<v&&1>=b.imageType&&1E-5>Math.abs(b.maxZError-.5)){F=F.getUint8(1);d.ptr++;d.encodeMode=F;if(2<F||4>v&&1<F)throw"Invalid Huffman flag "+F;F?h.readHuffman(c,d,C):h.readTiles(c,d,C)}else h.readTiles(c,d,C)}d.eofOffset=
d.ptr;a.inputOffset?(c=d.headerInfo.blobSize+a.inputOffset-d.ptr,1<=Math.abs(c)&&(d.eofOffset=a.inputOffset+d.headerInfo.blobSize)):(c=d.headerInfo.blobSize-d.ptr,1<=Math.abs(c)&&(d.eofOffset=d.headerInfo.blobSize));c={width:b.width,height:b.height,pixelData:d.pixels.resultPixels,minValue:b.zMin,maxValue:b.zMax,validPixelCount:b.numValidPixel,dimCount:b.numDims,dimStats:{minValues:b.minValues,maxValues:b.maxValues},maskData:d.pixels.resultMask};if(d.pixels.resultMask&&h.isValidPixelValue(b.imageType,
e)){v=d.pixels.resultMask;for(b=0;b<H;b++)v[b]||(c.pixelData[b]=e);c.noDataValue=e}d.noDataValue=e;a.returnFileInfo&&(c.fileInfo=h.formatFileInfo(d));return c}},getBandCount:function(c){for(var a=0,e=0,b={ptr:0,pixels:{}};e<c.byteLength-58;)h.readHeaderInfo(c,b),e+=b.headerInfo.blobSize,a++,b.ptr=e;return a}}})}),B=function(G){function l(a){var e,b;this.data=a;this.pos=8;this.palette=[];this.imgData=[];this.transparency={};this.animation=null;this.text={};for(b=null;;){var d=this.readUInt32();var v=
a=void 0;a=[];for(v=0;4>v;++v)a.push(String.fromCharCode(this.data[this.pos++]));a=a.join("");switch(a){case "IHDR":this.width=this.readUInt32();this.height=this.readUInt32();this.bits=this.data[this.pos++];this.colorType=this.data[this.pos++];this.compressionMethod=this.data[this.pos++];this.filterMethod=this.data[this.pos++];this.interlaceMethod=this.data[this.pos++];break;case "acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||Infinity,frames:[]};break;case "PLTE":this.palette=
this.read(d);break;case "fcTL":b&&this.animation.frames.push(b);this.pos+=4;b={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()};a=this.readUInt16();d=this.readUInt16()||100;b.delay=1E3*a/d;b.disposeOp=this.data[this.pos++];b.blendOp=this.data[this.pos++];b.data=[];break;case "IDAT":case "fdAT":"fdAT"===a&&(this.pos+=4,d-=4);a=(null!=b?b.data:void 0)||this.imgData;for(v=0;0<=d?v<d:v>d;0<=d?++v:--v)a.push(this.data[this.pos++]);break;case "tRNS":this.transparency=
{};switch(this.colorType){case 3:this.transparency.indexed=this.read(d);d=255-this.transparency.indexed.length;if(0<d)for(a=0;0<=d?a<d:a>d;0<=d?++a:--a)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(d)[0];break;case 2:this.transparency.rgb=this.read(d)}break;case "tEXt":v=this.read(d);d=v.indexOf(0);a=String.fromCharCode.apply(String,v.slice(0,d));this.text[a]=String.fromCharCode.apply(String,v.slice(d+1));break;case "IEND":b&&this.animation.frames.push(b);
a:{switch(this.colorType){case 0:case 3:case 4:b=1;break a;case 2:case 6:b=3;break a}b=void 0}this.colors=b;this.hasAlphaChannel=4===(e=this.colorType)||6===e;e=this.colors+(this.hasAlphaChannel?1:0);this.pixelBitlength=this.bits*e;a:{switch(this.colors){case 1:e="DeviceGray";break a;case 3:e="DeviceRGB";break a}e=void 0}this.colorSpace=e;this.imgData=new Uint8Array(this.imgData);return;default:this.pos+=d}this.pos+=4;if(this.pos>this.data.length)throw Error("Incomplete or corrupt PNG file");}}var h;
l.load=function(a,e,b){"function"===typeof e&&(b=e);var d=new XMLHttpRequest;d.open("GET",a,!0);d.responseType="arraybuffer";d.onload=function(){var v=new Uint8Array(d.response||d.mozResponseArrayBuffer);v=new l(v);"function"===typeof(null!=e?e.getContext:void 0)&&v.render(e);return"function"===typeof b?b(v):void 0};return d.send(null)};l.prototype.read=function(a){var e;var b=[];for(e=0;0<=a?e<a:e>a;0<=a?++e:--e)b.push(this.data[this.pos++]);return b};l.prototype.readUInt32=function(){var a=this.data[this.pos++]<<
24;var e=this.data[this.pos++]<<16;var b=this.data[this.pos++]<<8;var d=this.data[this.pos++];return a|e|b|d};l.prototype.readUInt16=function(){var a=this.data[this.pos++]<<8;var e=this.data[this.pos++];return a|e};l.prototype.decodePixels=function(a){var e,b,d,v,C,H,F,V;null==a&&(a=this.imgData);if(0===a.length)return new Uint8Array(0);a=new A.Zlib(a);a=a.getBytes();var O=this.pixelBitlength/8;var Q=O*this.width;var K=new Uint8Array(Q*this.height);var P=a.length;for(b=v=C=0;v<P;){switch(a[v++]){case 0:for(d=
e=0;e<Q;d=e+=1)K[b++]=a[v++];break;case 1:for(d=H=0;H<Q;d=H+=1){e=a[v++];var Z=d<O?0:K[b-O];K[b++]=(e+Z)%256}break;case 2:for(d=Z=0;Z<Q;d=Z+=1){e=a[v++];var aa=(d-d%O)/O;H=C&&K[(C-1)*Q+aa*O+d%O];K[b++]=(H+e)%256}break;case 3:for(d=V=0;V<Q;d=V+=1)e=a[v++],aa=(d-d%O)/O,Z=d<O?0:K[b-O],H=C&&K[(C-1)*Q+aa*O+d%O],K[b++]=(e+Math.floor((Z+H)/2))%256;break;case 4:for(d=V=0;V<Q;d=V+=1){e=a[v++];aa=(d-d%O)/O;Z=d<O?0:K[b-O];0===C?H=F=0:(H=K[(C-1)*Q+aa*O+d%O],F=aa&&K[(C-1)*Q+(aa-1)*O+d%O]);var ha=Z+H-F;d=Math.abs(ha-
Z);aa=Math.abs(ha-H);ha=Math.abs(ha-F);Z=d<=aa&&d<=ha?Z:aa<=ha?H:F;K[b++]=(e+Z)%256}break;default:throw Error("Invalid filter algorithm: "+a[v-1]);}C++}return K};l.prototype.decodePalette=function(){var a,e,b,d,v;var C=this.palette;var H=this.transparency.indexed||[];var F=new Uint8Array((H.length||0)+C.length);var V=b=a=e=0;for(d=C.length;b<d;V=b+=3)F[e++]=C[V],F[e++]=C[V+1],F[e++]=C[V+2],F[e++]=null!=(v=H[a++])?v:255;return F};l.prototype.copyToImageData=function(a,e){var b,d;var v=this.colors;
var C=null;var H=this.hasAlphaChannel;this.palette.length&&(C=null!=(b=this._decodedPalette)?b:this._decodedPalette=this.decodePalette(),v=4,H=!0);a=a.data||a;var F=a.length;var V=C||e;b=d=0;if(1===v)for(;b<F;)v=C?4*e[b/4]:d,d=V[v++],a[b++]=d,a[b++]=d,a[b++]=d,a[b++]=H?V[v++]:this.transparency.grayscale&&this.transparency.grayscale===d?0:255,d=v;else for(;b<F;)v=C?4*e[b/4]:d,a[b++]=V[v++],a[b++]=V[v++],a[b++]=V[v++],a[b++]=H?V[v++]:this.transparency.rgb&&this.transparency.rgb[1]===V[v-3]&&this.transparency.rgb[3]===
V[v-2]&&this.transparency.rgb[5]===V[v-1]?0:255,d=v};l.prototype.decode=function(){var a=new Uint8Array(this.width*this.height*4);this.copyToImageData(a,this.decodePixels());return a};var x=(h=G.document&&G.document.createElement("canvas"))&&h.getContext("2d");var c=function(a){x.width=a.width;x.height=a.height;x.clearRect(0,0,a.width,a.height);x.putImageData(a,0,0);a=new Image;a.src=h.toDataURL();return a};l.prototype.decodeFrames=function(a){var e,b;if(this.animation){var d=this.animation.frames;
var v=[];var C=e=0;for(b=d.length;e<b;C=++e){C=d[C];var H=a.createImageData(C.width,C.height);var F=this.decodePixels(new Uint8Array(C.data));this.copyToImageData(H,F);C.imageData=H;v.push(C.image=c(H))}return v}};l.prototype.renderFrame=function(a,e){var b=this.animation.frames;var d=b[e];b=b[e-1];0===e&&a.clearRect(0,0,this.width,this.height);1===(null!=b?b.disposeOp:void 0)?a.clearRect(b.xOffset,b.yOffset,b.width,b.height):2===(null!=b?b.disposeOp:void 0)&&a.putImageData(b.imageData,b.xOffset,
b.yOffset);0===d.blendOp&&a.clearRect(d.xOffset,d.yOffset,d.width,d.height);return a.drawImage(d.image,d.xOffset,d.yOffset)};l.prototype.animate=function(a){var e,b=this;var d=0;var v=this.animation;var C=v.numFrames;var H=v.frames;var F=v.numPlays;return(e=function(){var V=d++%C;var O=H[V];b.renderFrame(a,V);if(1<C&&d/C<F)return b.animation._timeout=setTimeout(e,O.delay)})()};l.prototype.stopAnimation=function(){var a;return clearTimeout(null!=(a=this.animation)?a._timeout:void 0)};l.prototype.render=
function(a){a._png&&a._png.stopAnimation();a._png=this;a.width=this.width;a.height=this.height;a=a.getContext("2d");if(this.animation)return this.decodeFrames(a),this.animate(a);var e=a.createImageData(this.width,this.height);this.copyToImageData(e,this.decodePixels());return a.putImageData(e,0,0)};return l}(self);const J=new Set(["jpg","png","bmp","gif"]);R.decode=async function(G,l,h){if(null==G)throw new n("rasterCodec:decode","missing encodeddata parameter.");if(null==l||null==l.width||null==
l.height)throw new n("rasterCodec:decode","requires width and height in options parameter.");let x=l.format&&l.format.toLowerCase();if("tiff"===x&&l.customOptions)return l=z.decodeTileOrStrip(G,l.customOptions),l=new L({width:l.width,height:l.height,pixels:l.pixels,pixelType:l.pixelType.toLowerCase(),mask:l.mask,statistics:null}),l.updateStatistics(),l;if(!x||"bsq"!==x&&"bip"!==x)x=y(G);l.useCanvas&&J.has(x)?G=await p(G,x,l,h):(h=E(x),l.isPoint&&(l={...l},l.width++,l.height++),G=h(G,l),l.isPoint&&
q(G));return G};R.getFormat=function(G){G=y(G);"lerc2"===G?G="lerc":"error"===G&&(G="");return G};Object.defineProperty(R,"__esModule",{value:!0})})},"esri/chunks/_commonjsHelpers":function(){define(["exports"],function(R){function n(){throw Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs");}R.commonjsGlobal="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};R.commonjsRequire=
n;R.createCommonjsModule=function(L,X,A){return A={path:X,exports:{},require:function(M,N){return n(M,void 0===N||null===N?A.path:N)}},L(A,A.exports),A.exports};R.getDefaultExportFromCjs=function(L){return L&&L.__esModule&&Object.prototype.hasOwnProperty.call(L,"default")?L["default"]:L}})},"esri/chunks/Zlib":function(){define(["exports","./_commonjsHelpers"],function(R,n){n=n.createCommonjsModule(function(L){(function(X){X=X();void 0!==X&&(L.exports=X)})(function(){var X=function(){function A(){this.bufferLength=
this.pos=0;this.eof=!1;this.buffer=null}A.prototype={ensureBuffer:function(M){var N=this.buffer,U=N?N.byteLength:0;if(M<U)return N;for(var W=512;W<M;)W<<=1;M=new Uint8Array(W);for(W=0;W<U;++W)M[W]=N[W];return this.buffer=M},getByte:function(){for(var M=this.pos;this.bufferLength<=M;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},getBytes:function(M){var N=this.pos;if(M){this.ensureBuffer(N+M);for(M=N+M;!this.eof&&this.bufferLength<M;)this.readBlock();var U=this.bufferLength;
M>U&&(M=U)}else{for(;!this.eof;)this.readBlock();M=this.bufferLength}this.pos=M;return this.buffer.subarray(N,M)},lookChar:function(){for(var M=this.pos;this.bufferLength<=M;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var M=this.pos;this.bufferLength<=M;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(M,N,U){for(var W=M+N;this.bufferLength<=W&&!this.eof;)this.readBlock();
return new Stream(this.buffer,M,N,U)},skip:function(M){M||(M=1);this.pos+=M},reset:function(){this.pos=0}};return A}();return function(){function A(D){throw Error(D);}function M(D){var r=0,k=D[r++],g=D[r++];-1!=k&&-1!=g||A("Invalid header in flate stream");8!=(k&15)&&A("Unknown compression method in flate stream");0!=((k<<8)+g)%31&&A("Bad FCHECK in flate stream");g&32&&A("FDICT bit set in flate stream");this.bytes=D;this.bytesPos=r;this.codeBuf=this.codeSize=0;X.call(this)}if(!self||!self.Uint32Array)return null;
var N=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),U=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),W=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),I=[new Uint32Array([459008,524368,
524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59E4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,
524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,
524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,
524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,
524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,
524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,
524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,
524335,590015,524303,524431,524367,590079]),9],z=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];M.prototype=Object.create(X.prototype);M.prototype.getBits=function(D){for(var r=this.codeSize,k=this.codeBuf,g=this.bytes,m=this.bytesPos,p;r<D;)"undefined"==typeof(p=g[m++])&&A("Bad encoding in flate stream"),k|=p<<
r,r+=8;this.codeBuf=k>>D;this.codeSize=r-=D;this.bytesPos=m;return k&(1<<D)-1};M.prototype.getCode=function(D){var r=D[0],k=D[1];D=this.codeSize;for(var g=this.codeBuf,m=this.bytes,p=this.bytesPos;D<k;){var y;"undefined"==typeof(y=m[p++])&&A("Bad encoding in flate stream");g|=y<<D;D+=8}k=r[g&(1<<k)-1];r=k>>16;k&=65535;(0==D||D<r||0==r)&&A("Bad encoding in flate stream");this.codeBuf=g>>r;this.codeSize=D-r;this.bytesPos=p;return k};M.prototype.generateHuffmanTable=function(D){for(var r=D.length,k=
0,g=0;g<r;++g)D[g]>k&&(k=D[g]);for(var m=1<<k,p=new Uint32Array(m),y=1,E=0,w=2;y<=k;++y,E<<=1,w<<=1)for(var q=0;q<r;++q)if(D[q]==y){var t=0,B=E;for(g=0;g<y;++g)t=t<<1|B&1,B>>=1;for(g=t;g<m;g+=w)p[g]=y<<16|q;++E}return[p,k]};M.prototype.readBlock=function(){function D(t,B,J,G,l){for(t=t.getBits(J)+G;0<t--;)B[E++]=l}var r=this.getBits(3);r&1&&(this.eof=!0);r>>=1;if(0==r){var k=this.bytes,g=this.bytesPos,m;"undefined"==typeof(m=k[g++])&&A("Bad block header in flate stream");var p=m;"undefined"==typeof(m=
k[g++])&&A("Bad block header in flate stream");p|=m<<8;"undefined"==typeof(m=k[g++])&&A("Bad block header in flate stream");r=m;"undefined"==typeof(m=k[g++])&&A("Bad block header in flate stream");(r|m<<8)!=(~p&65535)&&A("Bad uncompressed block length in flate stream");this.codeSize=this.codeBuf=0;m=this.bufferLength;r=this.ensureBuffer(m+p);this.bufferLength=p=m+p;for(var y=m;y<p;++y){if("undefined"==typeof(m=k[g++])){this.eof=!0;break}r[y]=m}this.bytesPos=g}else{if(1==r)g=I,m=z;else if(2==r){r=
this.getBits(5)+257;m=this.getBits(5)+1;k=this.getBits(4)+4;g=Array(N.length);for(var E=0;E<k;)g[N[E++]]=this.getBits(3);g=this.generateHuffmanTable(g);E=k=0;m=r+m;for(p=Array(m);E<m;)y=this.getCode(g),16==y?D(this,p,2,3,k):17==y?D(this,p,3,3,k=0):18==y?D(this,p,7,11,k=0):p[E++]=k=y;g=this.generateHuffmanTable(p.slice(0,r));m=this.generateHuffmanTable(p.slice(r,m))}else A("Unknown block type in flate stream");p=(r=this.buffer)?r.length:0;for(y=this.bufferLength;;){var w=this.getCode(g);if(256>w)y+
1>=p&&(r=this.ensureBuffer(y+1),p=r.length),r[y++]=w;else{if(256==w){this.bufferLength=y;break}w-=257;w=U[w];var q=w>>16;0<q&&(q=this.getBits(q));k=(w&65535)+q;w=this.getCode(m);w=W[w];q=w>>16;0<q&&(q=this.getBits(q));w=(w&65535)+q;y+k>=p&&(r=this.ensureBuffer(y+k),p=r.length);for(q=0;q<k;++q,++y)r[y]=r[y-w]}}}};return M}()})});R.Zlib=n})},"esri/layers/support/rasterFormats/ImageCanvasDecoder":function(){define(["../../../core/Error","../../../core/promiseUtils","../../../chunks/Zlib"],function(R,
n,L){return function(){function X(A){A&&(this.canvas=A.canvas,this.ctx=A.ctx||A.canvas&&A.canvas.getContext("2d"))}X.prototype.decode=function(A,M,N){if(!A||10>A.byteLength)throw new R("imagecanvasdecoder: decode","required a valid encoded data as input.");let {width:U,height:W,format:I}=M;const {applyJpegMask:z}=M;if(z&&(!U||!W))throw new R("imagecanvasdecoder: decode","image width and height are needed to apply jpeg mask directly to canvas");return new Promise((D,r)=>{let k=null;"jpg"===I&&z&&(k=
X.getMask(A,M));const g=new Blob([new Uint8Array(A)],{type:"jpg"==="image/"+I?"jpeg":I}),m=URL.createObjectURL(g),p=new Image;let y;p.src=m;p.onload=()=>{URL.revokeObjectURL(m);if(n.isAborted(N))r(n.createAbortError());else{U=p.width;W=p.height;if(this.canvas){if(this.canvas.width!==U||this.canvas.height!==W)this.canvas.width=U,this.canvas.height=W;this.ctx.clearRect(0,0,U,W)}else this.canvas=document.createElement("canvas"),this.canvas.width=U,this.canvas.height=W,this.ctx=this.canvas.getContext("2d");
this.ctx.drawImage(p,0,0);var E=this.ctx.getImageData(0,0,U,W);y=E.data;var w;if(M.renderOnCanvas){if(k)for(w=0;w<k.length;w++)y[4*w+3]=k[w]?255:0;this.ctx.putImageData(E,0,0);D(null)}else{E=U*W;var q=new Uint8Array(E),t=new Uint8Array(E),B=new Uint8Array(E);if(k)for(w=0;w<E;w++)q[w]=y[4*w],t[w]=y[4*w+1],B[w]=y[4*w+2];else for(k=new Uint8Array(E),w=0;w<E;w++)q[w]=y[4*w],t[w]=y[4*w+1],B[w]=y[4*w+2],k[w]=y[4*w+3];D({width:U,height:W,pixels:[q,t,B],mask:k,pixelType:"u8"})}}};p.onerror=()=>{URL.revokeObjectURL(m);
r("cannot load image")}})};X.getMask=function(A,M){let N=null;try{var U=new Uint8Array(A);A=0;var W=U.length-2;for(A=Math.ceil(U.length/2);A<W&&(255!==U[A]||217!==U[A+1]);A++);A+=2;if(A<U.length-1){const I=(new L.Zlib(U.subarray(A))).getBytes();N=new Uint8Array(M.width*M.height);M=0;for(U=0;U<I.length;U++)for(W=7;0<=W;W--)N[M++]=I[U]>>W&1}}catch(I){}return N};return X}()})},"esri/layers/support/rasterFormats/JpgPlus":function(){define(["../../../chunks/Zlib","../../../chunks/Jpg"],function(R,n){return function(){function L(){}
L.decode=function(X){var A=new Uint8Array(X);X=new n.Jpg;X.parse(A);const {width:M,height:N,numComponents:U,eof:W}=X;X=X.getData(M,N,!0);let I;const z=M*N;let D=0;var r=0,k=0;if(W<A.length-1)for(A=(new R.Zlib(A.subarray(W))).getBytes(),I=new Uint8Array(z),D=r=0;D<A.length;D++)for(k=7;0<=k;k--)I[r++]=A[D]>>k&1;A=null;if(1===U)A=[X,X,X];else{A=[];for(D=0;3>D;D++)k=new Uint8Array(z),A.push(k);for(r=k=0;r<z;r++)for(D=0;3>D;D++)A[D][r]=X[k++]}return{width:M,height:N,pixels:A,mask:I}};return L}()})},"esri/chunks/Jpg":function(){define(["exports",
"./_commonjsHelpers"],function(R,n){n=n.createCommonjsModule(function(L){(function(X){X=X();void 0!==X&&(L.exports=X)})(function(){var X=function(){function A(M){this.message="JPEG error: "+M}A.prototype=Error();A.prototype.name="JpegError";return A.constructor=A}();return function(){function A(){this.decodeTransform=null;this.colorTransform=-1}function M(z,D){for(var r=0,k=[],g,m,p=16;0<p&&!z[p-1];)p--;k.push({children:[],index:0});var y=k[0],E;for(g=0;g<p;g++){for(m=0;m<z[g];m++){y=k.pop();for(y.children[y.index]=
D[r];0<y.index;)y=k.pop();y.index++;for(k.push(y);k.length<=g;)k.push(E={children:[],index:0}),y.children[y.index]=E.children,y=E;r++}g+1<p&&(k.push(E={children:[],index:0}),y.children[y.index]=E.children,y=E)}return k[0].children}function N(z,D,r,k,g,m,p,y,E){function w(){if(0<b)return b--,e>>b&1;e=z[D++];if(255===e){var ea=z[D++];if(ea)throw new X("unexpected marker "+(e<<8|ea).toString(16));}b=7;return e>>>7}function q(ea){for(;;){ea=ea[w()];if("number"===typeof ea)return ea;if("object"!==typeof ea)throw new X("invalid huffman sequence");
}}function t(ea){for(var f=0;0<ea;)f=f<<1|w(),ea--;return f}function B(ea){if(1===ea)return 1===w()?1:-1;var f=t(ea);return f>=1<<ea-1?f:f+(-1<<ea)+1}function J(ea,f){var u=q(ea.huffmanTableDC);u=0===u?0:B(u);ea.blockData[f]=ea.pred+=u;for(u=1;64>u;){var T=q(ea.huffmanTableAC),S=T&15;T>>=4;if(0===S){if(15>T)break;u+=16}else u+=T,ea.blockData[f+I[u]]=B(S),u++}}function G(ea,f){var u=q(ea.huffmanTableDC);u=0===u?0:B(u)<<E;ea.blockData[f]=ea.pred+=u}function l(ea,f){ea.blockData[f]|=w()<<E}function h(ea,
f){if(0<d)d--;else for(var u=m;u<=p;){var T=q(ea.huffmanTableAC),S=T&15;T>>=4;if(0===S){if(15>T){d=t(T)+(1<<T)-1;break}u+=16}else u+=T,ea.blockData[f+I[u]]=B(S)*(1<<E),u++}}function x(ea,f){for(var u=m,T=0,S;u<=p;){S=I[u];switch(v){case 0:T=q(ea.huffmanTableAC);S=T&15;T>>=4;if(0===S)15>T?(d=t(T)+(1<<T),v=4):(T=16,v=1);else{if(1!==S)throw new X("invalid ACn encoding");C=B(S);v=T?2:3}continue;case 1:case 2:ea.blockData[f+S]?ea.blockData[f+S]+=w()<<E:(T--,0===T&&(v=2===v?3:0));break;case 3:ea.blockData[f+
S]?ea.blockData[f+S]+=w()<<E:(ea.blockData[f+S]=C<<E,v=0);break;case 4:ea.blockData[f+S]&&(ea.blockData[f+S]+=w()<<E)}u++}4===v&&(d--,0===d&&(v=0))}var c=r.mcusPerLine,a=D,e=0,b=0,d=0,v=0,C,H=k.length,F,V,O,Q;y=r.progressive?0===m?0===y?G:l:0===y?h:x:J;var K=0;r=1===H?k[0].blocksPerLine*k[0].blocksPerColumn:c*r.mcusPerColumn;for(var P,Z;K<r;){var aa=g?Math.min(r-K,g):r;for(F=0;F<H;F++)k[F].pred=0;d=0;if(1===H){var ha=k[0];for(Q=0;Q<aa;Q++)y(ha,64*((ha.blocksPerLine+1)*(K/ha.blocksPerLine|0)+K%ha.blocksPerLine)),
K++}else for(Q=0;Q<aa;Q++){for(F=0;F<H;F++)for(ha=k[F],P=ha.h,Z=ha.v,V=0;V<Z;V++)for(O=0;O<P;O++)y(ha,64*((ha.blocksPerLine+1)*((K/c|0)*ha.v+V)+(K%c*ha.h+O)));K++}b=0;(ha=W(z,D))&&ha.invalid&&(console.log("decodeScan - unexpected MCU data, next marker is: "+ha.invalid),D=ha.offset);ha=ha&&ha.marker;if(!ha||65280>=ha)throw new X("marker was not found");if(65488<=ha&&65495>=ha)D+=2;else break}(ha=W(z,D))&&ha.invalid&&(console.log("decodeScan - unexpected Scan data, next marker is: "+ha.invalid),D=ha.offset);
return D-a}function U(z,D){z=D.blocksPerLine;for(var r=D.blocksPerColumn,k=new Int16Array(64),g=0;g<r;g++)for(var m=0;m<z;m++){var p=void 0,y=void 0,E=void 0,w=void 0,q=void 0,t=void 0,B=void 0,J=void 0,G=q=t=w=y=p=void 0,l=void 0,h=void 0,x=void 0,c=64*((D.blocksPerLine+1)*g+m),a=k,e=D.quantizationTable,b=D.blockData;if(!e)throw new X("missing required Quantization Table.");for(var d=0;64>d;d+=8)p=b[c+d],J=b[c+d+1],B=b[c+d+2],t=b[c+d+3],q=b[c+d+4],w=b[c+d+5],E=b[c+d+6],y=b[c+d+7],p*=e[d],0===(J|
B|t|q|w|E|y)?(p=5793*p+512>>10,a[d]=p,a[d+1]=p,a[d+2]=p,a[d+3]=p,a[d+4]=p,a[d+5]=p,a[d+6]=p,a[d+7]=p):(J*=e[d+1],B*=e[d+2],t*=e[d+3],q*=e[d+4],w*=e[d+5],E*=e[d+6],y*=e[d+7],x=5793*p+128>>8,h=5793*q+128>>8,l=B,G=E,q=2896*(J-y)+128>>8,y=2896*(J+y)+128>>8,t<<=4,w<<=4,x=x+h+1>>1,h=x-h,p=3784*l+1567*G+128>>8,l=1567*l-3784*G+128>>8,G=p,q=q+w+1>>1,w=q-w,y=y+t+1>>1,t=y-t,x=x+G+1>>1,G=x-G,h=h+l+1>>1,l=h-l,p=2276*q+3406*y+2048>>12,q=3406*q-2276*y+2048>>12,y=p,p=799*t+4017*w+2048>>12,t=4017*t-799*w+2048>>12,
w=p,a[d]=x+y,a[d+7]=x-y,a[d+1]=h+w,a[d+6]=h-w,a[d+2]=l+t,a[d+5]=l-t,a[d+3]=G+q,a[d+4]=G-q);for(e=0;8>e;++e)p=a[e],J=a[e+8],B=a[e+16],t=a[e+24],q=a[e+32],w=a[e+40],E=a[e+48],y=a[e+56],0===(J|B|t|q|w|E|y)?(p=5793*p+8192>>14,p=-2040>p?0:2024<=p?255:p+2056>>4,b[c+e]=p,b[c+e+8]=p,b[c+e+16]=p,b[c+e+24]=p,b[c+e+32]=p,b[c+e+40]=p,b[c+e+48]=p,b[c+e+56]=p):(x=5793*p+2048>>12,h=5793*q+2048>>12,l=B,G=E,q=2896*(J-y)+2048>>12,y=2896*(J+y)+2048>>12,x=(x+h+1>>1)+4112,h=x-h,p=3784*l+1567*G+2048>>12,l=1567*l-3784*
G+2048>>12,G=p,q=q+w+1>>1,w=q-w,y=y+t+1>>1,t=y-t,x=x+G+1>>1,G=x-G,h=h+l+1>>1,l=h-l,p=2276*q+3406*y+2048>>12,q=3406*q-2276*y+2048>>12,y=p,p=799*t+4017*w+2048>>12,t=4017*t-799*w+2048>>12,w=p,p=x+y,y=x-y,J=h+w,E=h-w,B=l+t,w=l-t,t=G+q,q=G-q,p=16>p?0:4080<=p?255:p>>4,J=16>J?0:4080<=J?255:J>>4,B=16>B?0:4080<=B?255:B>>4,t=16>t?0:4080<=t?255:t>>4,q=16>q?0:4080<=q?255:q>>4,w=16>w?0:4080<=w?255:w>>4,E=16>E?0:4080<=E?255:E>>4,y=16>y?0:4080<=y?255:y>>4,b[c+e]=p,b[c+e+8]=J,b[c+e+16]=B,b[c+e+24]=t,b[c+e+32]=q,
b[c+e+40]=w,b[c+e+48]=E,b[c+e+56]=y)}return D.blockData}function W(z,D,r){var k=z.length-1;r=r<D?r:D;if(D>=k)return null;var g=z[D]<<8|z[D+1];if(65472<=g&&65534>=g)return{invalid:null,marker:g,offset:D};for(D=z[r]<<8|z[r+1];!(65472<=D&&65534>=D);){if(++r>=k)return null;D=z[r]<<8|z[r+1]}return{invalid:g.toString(16),marker:D,offset:r}}if(!self||!self.Uint8ClampedArray)return null;var I=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,
57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);A.prototype={parse:function(z){function D(){var e=z[g]<<8|z[g+1];g+=2;return e}function r(){var e=D();e=g+e-2;var b=W(z,e,g);b&&b.invalid&&(console.log("readDataBlock - incorrect length, next marker is: "+b.invalid),e=b.offset);e=z.subarray(g,e);g+=e.length;return e}function k(e){for(var b=Math.ceil(e.samplesPerLine/8/e.maxH),d=Math.ceil(e.scanLines/8/e.maxV),v=0;v<e.components.length;v++){a=e.components[v];var C=
Math.ceil(Math.ceil(e.samplesPerLine/8)*a.h/e.maxH),H=Math.ceil(Math.ceil(e.scanLines/8)*a.v/e.maxV);a.blockData=new Int16Array(64*d*a.v*(b*a.h+1));a.blocksPerLine=C;a.blocksPerColumn=H}e.mcusPerLine=b;e.mcusPerColumn=d}var g=0,m=null,p=null,y=[],E=[],w=[],q=D();if(65496!==q)throw new X("SOI not found");for(q=D();65497!==q;){switch(q){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var t=
r();65504===q&&74===t[0]&&70===t[1]&&73===t[2]&&70===t[3]&&0===t[4]&&(m={version:{major:t[5],minor:t[6]},densityUnits:t[7],xDensity:t[8]<<8|t[9],yDensity:t[10]<<8|t[11],thumbWidth:t[12],thumbHeight:t[13],thumbData:t.subarray(14,14+3*t[12]*t[13])});65518===q&&65===t[0]&&100===t[1]&&111===t[2]&&98===t[3]&&101===t[4]&&(p={version:t[5]<<8|t[6],flags0:t[7]<<8|t[8],flags1:t[9]<<8|t[10],transformCode:t[11]});break;case 65499:q=D()+g-2;for(var B;g<q;){var J=z[g++],G=new Uint16Array(64);if(0===J>>4)for(t=
0;64>t;t++)B=I[t],G[B]=z[g++];else if(1===J>>4)for(t=0;64>t;t++)B=I[t],G[B]=D();else throw new X("DQT - invalid table spec");y[J&15]=G}break;case 65472:case 65473:case 65474:if(l)throw new X("Only single frame JPEGs supported");D();var l={};l.extended=65473===q;l.progressive=65474===q;l.precision=z[g++];l.scanLines=D();l.samplesPerLine=D();l.components=[];l.componentIds={};t=z[g++];for(q=G=J=0;q<t;q++){B=z[g];var h=z[g+1]>>4;var x=z[g+1]&15;J<h&&(J=h);G<x&&(G=x);h=l.components.push({h,v:x,quantizationId:z[g+
2],quantizationTable:null});l.componentIds[B]=h-1;g+=3}l.maxH=J;l.maxV=G;k(l);break;case 65476:B=D();for(q=2;q<B;){J=z[g++];G=new Uint8Array(16);for(t=h=0;16>t;t++,g++)h+=G[t]=z[g];x=new Uint8Array(h);for(t=0;t<h;t++,g++)x[t]=z[g];q+=17+h;(0===J>>4?w:E)[J&15]=M(G,x)}break;case 65501:D();var c=D();break;case 65498:D();B=z[g++];t=[];for(q=0;q<B;q++){J=l.componentIds[z[g++]];var a=l.components[J];J=z[g++];a.huffmanTableDC=w[J>>4];a.huffmanTableAC=E[J&15];t.push(a)}q=z[g++];B=z[g++];J=z[g++];q=N(z,g,
l,t,c,q,B,J>>4,J&15);g+=q;break;case 65535:255!==z[g]&&g--;break;default:if(255===z[g-3]&&192<=z[g-2]&&254>=z[g-2])g-=3;else throw new X("unknown marker "+q.toString(16));}q=D()}this.width=l.samplesPerLine;this.height=l.scanLines;this.jfif=m;this.eof=g;this.adobe=p;this.components=[];for(q=0;q<l.components.length;q++){a=l.components[q];if(m=y[a.quantizationId])a.quantizationTable=m;this.components.push({output:U(l,a),scaleX:a.h/l.maxH,scaleY:a.v/l.maxV,blocksPerLine:a.blocksPerLine,blocksPerColumn:a.blocksPerColumn})}this.numComponents=
this.components.length},_getLinearizedBlockData:function(z,D){var r=this.width/z,k=this.height/D,g,m,p=0,y=this.components.length,E=z*D*y,w=new Uint8ClampedArray(E),q=new Uint32Array(z);for(m=0;m<y;m++){var t=this.components[m];var B=t.scaleX*r;var J=t.scaleY*k;p=m;var G=t.output;var l=t.blocksPerLine+1<<3;for(g=0;g<z;g++)t=0|g*B,q[g]=(t&4294967288)<<3|t&7;for(B=0;B<D;B++)for(t=0|B*J,t=l*(t&4294967288)|(t&7)<<3,g=0;g<z;g++)w[p]=G[t+q[g]],p+=y}if(D=this.decodeTransform)for(m=0;m<E;)for(z=t=0;t<y;t++,
m++,z+=2)w[m]=(w[m]*D[z]>>8)+D[z+1];return w},_isColorConversionNeeded:function(){return this.adobe?!!this.adobe.transformCode:3===this.numComponents?0===this.colorTransform?!1:!0:1===this.colorTransform?!0:!1},_convertYccToRgb:function(z){for(var D,r,k,g=0,m=z.length;g<m;g+=3)D=z[g],r=z[g+1],k=z[g+2],z[g]=D-179.456+1.402*k,z[g+1]=D+135.459-.344*r-.714*k,z[g+2]=D-226.816+1.772*r;return z},_convertYcckToRgb:function(z){for(var D,r,k,g,m=0,p=0,y=z.length;p<y;p+=4)D=z[p],r=z[p+1],k=z[p+2],g=z[p+3],z[m++]=
-122.67195406894+r*(-6.60635669420364E-5*r+4.37130475926232E-4*k-5.4080610064599E-5*D+4.8449797120281E-4*g-.154362151871126)+k*(-9.57964378445773E-4*k+8.17076911346625E-4*D-.00477271405408747*g+1.53380253221734)+D*(9.61250184130688E-4*D-.00266257332283933*g+.48357088451265)+g*(-3.36197177618394E-4*g+.484791561490776),z[m++]=107.268039397724+r*(2.19927104525741E-5*r-6.40992018297945E-4*k+6.59397001245577E-4*D+4.26105652938837E-4*g-.176491792462875)+k*(-7.78269941513683E-4*k+.00130872261408275*D+7.70482631801132E-4*
g-.151051492775562)+D*(.00126935368114843*D-.00265090189010898*g+.25802910206845)+g*(-3.18913117588328E-4*g-.213742400323665),z[m++]=-20.810012546947+r*(-5.70115196973677E-4*r-2.63409051004589E-5*k+.0020741088115012*D-.00288260236853442*g+.814272968359295)+k*(-1.53496057440975E-5*k-1.32689043961446E-4*D+5.60833691242812E-4*g-.195152027534049)+D*(.00174418132927582*D-.00255243321439347*g+.116935020465145)+g*(-3.43531996510555E-4*g+.24165260232407);return z},_convertYcckToCmyk:function(z){for(var D,
r,k,g=0,m=z.length;g<m;g+=4)D=z[g],r=z[g+1],k=z[g+2],z[g]=434.456-D-1.402*k,z[g+1]=119.541-D+.344*r+.714*k,z[g+2]=481.816-D-1.772*r;return z},_convertCmykToRgb:function(z){for(var D,r,k,g,m=0,p=1/255,y=0,E=z.length;y<E;y+=4)D=z[y]*p,r=z[y+1]*p,k=z[y+2]*p,g=z[y+3]*p,z[m++]=255+D*(-4.387332384609988*D+54.48615194189176*r+18.82290502165302*k+212.25662451639585*g-285.2331026137004)+r*(1.7149763477362134*r-5.6096736904047315*k-17.873870861415444*g-5.497006427196366)+k*(-2.5217340131683033*k-21.248923337353073*
g+17.5119270841813)-g*(21.86122147463605*g+189.48180835922747),z[m++]=255+D*(8.841041422036149*D+60.118027045597366*r+6.871425592049007*k+31.159100130055922*g-79.2970844816548)+r*(-15.310361306967817*r+17.575251261109482*k+131.35250912493976*g-190.9453302588951)+k*(4.444339102852739*k+9.8632861493405*g-24.86741582555878)-g*(20.737325471181034*g+187.80453709719578),z[m++]=255+D*(.8842522430003296*D+8.078677503112928*r+30.89978309703729*k-.23883238689178934*g-14.183576799673286)+r*(10.49593273432072*
r+63.02378494754052*k+50.606957656360734*g-112.23884253719248)+k*(.03296041114873217*k+115.60384449646641*g-193.58209356861505)-g*(22.33816807309886*g+180.12613974708367);return z},getData:function(z,D,r){if(4<this.numComponents)throw new X("Unsupported color mode");z=this._getLinearizedBlockData(z,D);if(1===this.numComponents&&r){r=z.length;D=new Uint8ClampedArray(3*r);for(var k=0,g=0;g<r;g++){var m=z[g];D[k++]=m;D[k++]=m;D[k++]=m}return D}if(3===this.numComponents&&this._isColorConversionNeeded())return this._convertYccToRgb(z);
if(4===this.numComponents){if(this._isColorConversionNeeded())return r?this._convertYcckToRgb(z):this._convertYcckToCmyk(z);if(r)return this._convertCmykToRgb(z)}return z}};return A}()})});R.Jpg=n})},"esri/chunks/LercCodec":function(){define(["exports"],function(R){function n(M){L[0]=M;return L[0]}const L=new Float32Array(1),X=n(3.4028234663852886E38);var A=n(Math.max(-X,Math.min(-Infinity,X)));R.decode=function(M,N){N=N||{};var U=N.inputOffset||0;var W=N.encodedMaskData||null===N.encodedMaskData;
var I=new Uint8Array(M,U,10);I=String.fromCharCode.apply(null,I);if("CntZImage"!=I.trim())throw"Unexpected file identifier string: "+I;U+=10;var z=new DataView(M,U,24);var D=z.getInt32(0,!0);var r=z.getInt32(4,!0);var k=z.getUint32(8,!0);var g=z.getUint32(12,!0);var m=z.getFloat64(16,!0);U+=24;if(!W){z=new DataView(M,U,16);var p={};p.numBlocksY=z.getUint32(0,!0);p.numBlocksX=z.getUint32(4,!0);p.numBytes=z.getUint32(8,!0);p.maxValue=z.getFloat32(12,!0);U+=16;if(0<p.numBytes){W=new Uint8Array(Math.ceil(g*
k/8));z=new DataView(M,U,p.numBytes);var y=z.getInt16(0,!0);var E=2;var w=0;do{if(0<y)for(;y--;)W[w++]=z.getUint8(E++);else{var q=z.getUint8(E++);for(y=-y;y--;)W[w++]=q}y=z.getInt16(E,!0);E+=2}while(E<p.numBytes);if(-32768!==y||w<W.length)throw"Unexpected end of mask RLE encoding";p.bitset=W;U+=p.numBytes}else 0===(p.numBytes|p.numBlocksY|p.maxValue)&&(W=new Uint8Array(Math.ceil(g*k/8)),p.bitset=W)}z=new DataView(M,U,16);var t=W=q=w=E=y=void 0;y=z.getUint32(0,!0);E=z.getUint32(4,!0);w=z.getUint32(8,
!0);q=z.getFloat32(12,!0);U+=16;t=E;W=y;t+=0<g%t?1:0;var B=W+(0<k%W?1:0);W=Array(t*B);for(var J=1E9,G=0,l=0;l<B;l++)for(var h=0;h<t;h++){var x=0;z=new DataView(M,U,Math.min(10,M.byteLength-U));var c={};W[G++]=c;var a=z.getUint8(0);x++;c.encoding=a&63;if(3<c.encoding)throw"Invalid block encoding ("+c.encoding+")";if(2===c.encoding)U++,J=Math.min(J,0);else{if(0!==a&&2!==a){a>>=6;c.offsetType=a;if(2===a)c.offset=z.getInt8(1),x++;else if(1===a)c.offset=z.getInt16(1,!0),x+=2;else if(0===a)c.offset=z.getFloat32(1,
!0),x+=4;else throw"Invalid block offset type";J=Math.min(c.offset,J);if(1===c.encoding)if(a=z.getUint8(x),x++,c.bitsPerPixel=a&63,a>>=6,c.numValidPixelsType=a,2===a)c.numValidPixels=z.getUint8(x),x++;else if(1===a)c.numValidPixels=z.getUint16(x,!0),x+=2;else if(0===a)c.numValidPixels=z.getUint32(x,!0),x+=4;else throw"Invalid valid pixel count type";}U+=x;if(3!=c.encoding)if(0===c.encoding){z=(w-1)/4;if(z!==Math.floor(z))throw"uncompressed block has invalid length";x=new ArrayBuffer(4*z);a=new Uint8Array(x);
a.set(new Uint8Array(M,U,4*z));x=new Float32Array(x);for(a=0;a<x.length;a++)J=Math.min(J,x[a]);c.rawData=x;U+=4*z}else 1===c.encoding&&(z=Math.ceil(c.numValidPixels*c.bitsPerPixel/8),x=new ArrayBuffer(4*Math.ceil(z/4)),a=new Uint8Array(x),a.set(new Uint8Array(M,U,z)),c.stuffedData=new Uint32Array(x),U+=z)}}t=J;M=U;U=null!=N.noDataValue?n(Math.max(-X,Math.min(N.noDataValue,X))):A;B=N.encodedMaskData;a=N.returnMask;J=0;G=E;l=y;h=Math.floor(g/G);c=Math.floor(k/l);x=2*m;B=B||(p?p.bitset:null);var e;z=
new (N.pixelType||Float32Array)(g*k);a&&B&&(e=new Uint8Array(g*k));a=new Float32Array(h*c);for(var b,d,v=0;v<=l;v++){var C=v!==l?c:k%l;if(0!==C)for(var H=0;H<=G;H++){var F=H!==G?h:g%G;if(0!==F){var V=v*g*c+H*h,O=g-F,Q=W[J],K;if(2>Q.encoding){if(0===Q.encoding)var P=Q.rawData;else{b=K=P=void 0;d=Q.stuffedData;var Z=Q.bitsPerPixel,aa=Q.numValidPixels,ha=Q.offset,ea=x,f=a,u=q,T=(1<<Z)-1,S=0,ba=0,fa=Math.ceil((u-ha)/ea);d[d.length-1]<<=8*(4*d.length-Math.ceil(Z*aa/8));for(b=0;b<aa;b++)0===ba&&(P=d[S++],
ba=32),ba>=Z?(K=P>>>ba-Z&T,ba-=Z):(ba=Z-ba,K=(P&T)<<ba&T,P=d[S++],ba=32-ba,K+=P>>>ba),f[b]=K<fa?ha+K*ea:u;P=a}K=0}else var ia=2===Q.encoding?0:Q.offset;if(B)for(d=0;d<C;d++){if(V&7){var ka=B[V>>3];ka<<=V&7}for(b=0;b<F;b++)V&7||(ka=B[V>>3]),ka&128?(e&&(e[V]=1),z[V++]=2>Q.encoding?P[K++]:ia):(e&&(e[V]=0),z[V++]=U),ka<<=1;V+=O}else if(2>Q.encoding)for(d=0;d<C;d++){for(b=0;b<F;b++)z[V++]=P[K++];V+=O}else for(d=0;d<C;d++)if(z.fill)z.fill(ia,V,V+F),V+=F+O;else{for(b=0;b<F;b++)z[V++]=ia;V+=O}if(1===Q.encoding&&
K!==Q.numValidPixels)throw"Block and Mask do not match";J++}}}ia=e;e={width:g,height:k,pixelData:z,minValue:t,maxValue:q,noDataValue:U};ia&&(e.maskData=ia);N.returnEncodedMask&&p&&(e.encodedMaskData=p.bitset?p.bitset:null);if(N.returnFileInfo&&(e.fileInfo={fileIdentifierString:I,fileVersion:D,imageType:r,height:k,width:g,maxZError:m,eofOffset:M,mask:p?{numBlocksX:p.numBlocksX,numBlocksY:p.numBlocksY,numBytes:p.numBytes,maxValue:p.maxValue}:null,pixels:{numBlocksX:E,numBlocksY:y,numBytes:w,maxValue:q,
minValue:t,noDataValue:U}},N.computeUsedBitDepths)){N=e.fileInfo;p=E*y;I={};for(D=0;D<p;D++)r=W[D],0===r.encoding?I.float32=!0:1===r.encoding?I[r.bitsPerPixel]=!0:I[0]=!0;p=Object.keys(I);N.bitDepths=p}return e}})},"esri/layers/support/rasterFormats/Raw":function(){define(function(){const R=function(n){let L=1;switch(n){case Uint8Array:case Int8Array:L=1;break;case Uint16Array:case Int16Array:L=2;break;case Uint32Array:case Int32Array:case Float32Array:L=4;break;case Float64Array:L=8}return L};return function(){function n(){}
n.decode=function(L,X){var A=X.pixelType;const M=[],N=X.width*X.height;var U=Math.floor(L.byteLength/(X.width*X.height*R(X.pixelType)));const {bandIds:W,format:I}=X;X=W&&W.length||Math.floor(L.byteLength/(X.width*X.height*R(X.pixelType)));var z=L.byteLength-L.byteLength%(N*R(A));const D=new A(L,0,N*U);let r,k;let g,m;if("bip"===I)for(r=0;r<X;r++){g=new A(N);m=W?W[r]:r;for(k=0;k<N;k++)g[k]=D[k*U+m];M.push(g)}else if("bsq"===I)for(r=0;r<X;r++)m=W?W[r]:r,M.push(D.subarray(m*N,(m+1)*N));if(z<L.byteLength-
1)if(L=L.slice(z),8*L.byteLength<N)var p=null;else{L=new Uint8Array(L,0,Math.ceil(N/8));A=new Uint8Array(N);for(X=z=X=p=U=0;X<L.length-1;X++)for(p=L[X],z=7;0<=z;z--)A[U++]=p>>z&1;for(z=7;U<N-1;)p=L[L.length-1],A[U++]=p>>z&1,z--;p=A}return{pixels:M,mask:p}};return n}()})},"esri/layers/support/rasterFormats/utils":function(){define(["exports"],function(R){{var n=new ArrayBuffer(4);const L=new Uint8Array(n);(new Uint32Array(n))[0]=1;n=1===L[0]}R.isPlatformLittleEndian=n;Object.defineProperty(R,"__esModule",
{value:!0})})},"esri/layers/support/rasterFormats/TiffDecoder":function(){define("exports ../../../chunks/Zlib ../../../chunks/Jpg ../rasterDatasets/byteStreamUtils ./Lzw ./TiffTags ./utils".split(" "),function(R,n,L,X,A,M,N){function U(l,h){let x="unknown";3===l?x="f32":1===l?1===h?x="u1":2===h?x="u2":4===h?x="u4":8>=h?x="u8":16>=h?x="u16":32>=h&&(x="u32"):2===l&&(8>=h?x="s8":16>=h?x="s16":32>=h&&(x="s32"));return x}function W(l){let h=null;switch(l?l.toLowerCase():"f32"){case "u1":case "u2":case "u4":case "u8":h=
Uint8Array;break;case "u16":h=Uint16Array;break;case "u32":h=Uint32Array;break;case "s8":h=Int8Array;break;case "s16":h=Int16Array;break;case "s32":h=Int32Array;break;default:h=Float32Array}return h}function I(l,h){return{x:h[0]*l.x+h[1]*l.y+h[2],y:h[3]*l.x+h[4]*l.y+h[5]}}function z(l,h){return(l=l.get(h))&&l.values}function D(l,h){return(l=l.get(h))&&l.values[0]}function r(l,h,x,c=0,a=M.TIFF_TAGS,e=4){var b=8===e;const d=b?p(new DataView(l,x,8),0,h):(new DataView(l,x,2)).getUint16(0,h),v=4+2*e;var C=
b?8:2;b=C+d*v;if(x+b>l.byteLength)return{success:!1,ifd:null,nextIFD:null,requiredBufferSize:b};const H=x+b+4<=l.byteLength?y(new DataView(l,x+b,8===e?8:4),0,h,8===e):null;x+=C;C=new Map;let F,V,O,Q,K;for(let Z=0;Z<d;Z++){var P=new DataView(l,x+v*Z,v);F=P.getUint16(0,h);O=P.getUint16(2,h);V=M.getTagName(F,a);const aa=[];2===e?(Q=P.getUint16(4,h),K=P.getUint16(6,h)):4===e?(Q=P.getUint32(4,h),K=P.getUint32(8,h)):8===e&&(Q=y(P,4,h,!0),K=y(P,12,h,!0),aa.push(P.getUint32(12,h)),aa.push(P.getUint32(16,
h)));P={id:F,type:O,valueCount:Q,valueOffset:K,valueOffsets:aa,values:null};k(l,h,P,c,!1,e);C.set(V,P)}return{success:!0,ifd:C,nextIFD:H,requiredBufferSize:b}}function k(l,h,x,c=0,a=!1,e=4){if(x.values)return!0;var b=x.type,d=x.valueCount,v=x.valueOffset;let C=[];var H=t[b],F=8*H,V=d*H,O=d*t[b]*8,Q=8===e?64:32;e=x.valueOffsets;if(O>Q&&V>(a?l.byteLength:l?l.byteLength-v+c:0))return x.offlineOffsetSize=[v,V],x.values=null,!1;if(O<=Q)if(h||(32>=Q?v>>>=32-O:(l=null!=e&&e.length?e[0]:v>>>0,h=null!=e&&
e.length?e[1]:Math.round((v-l)/4294967296),32>=O?(v=l>>>32-O,e[0]=v):(v=l*2**(32-O)+(h>>>32-O),e[0]=l,e[1]=h>>>32-O))),1===d&&F===Q)C=[v];else if(64===Q)for(l=null!=e&&e.length?e[0]:v>>>0,v=null!=e&&e.length?e[1]:Math.round((v-l)/4294967296),h=l,H=32,l=1;l<=d;l++)V=32-F*l%32,H<F?(V=h<<V>>>32-H,O=v<<32-H>>>32-H,h=v,C.push(V+O*2**(F-H)),H-=32-(F-H)):(C.push(h<<V>>>32-F),H-=F),0===H&&(H=32,h=v);else for(l=1;l<=d;l++)C.push(v<<32-F*l>>>32-F);else for(v-=c,a&&(v=0),d=v;d<v+V;d+=H){switch(b){case 1:F=(new DataView(l,
d,1)).getUint8(0);break;case 2:F=(new DataView(l,d,1)).getUint8(0);break;case 3:F=(new DataView(l,d,2)).getUint16(0,h);break;case 4:F=(new DataView(l,d,4)).getUint32(0,h);break;case 5:F=(new DataView(l,d,4)).getUint32(0,h)/(new DataView(l,d+4,4)).getUint32(0,h);break;case 6:F=(new DataView(l,d,1)).getInt8(0);break;case 7:F=(new DataView(l,d,1)).getUint8(0);break;case 8:F=(new DataView(l,d,2)).getInt16(0,h);break;case 9:F=(new DataView(l,d,4)).getInt32(0,h);break;case 10:F=(new DataView(l,d,4)).getInt32(0,
h)/(new DataView(l,d+4,4)).getInt32(0,h);break;case 11:F=(new DataView(l,d,4)).getFloat32(0,h);break;case 12:F=(new DataView(l,d,8)).getFloat64(0,h);break;case 16:case 18:F=p(new DataView(l,d,8),0,h);break;case 17:e=new DataView(l,d,8);O=(F=h)?e.getInt32(0,F):e.getUint32(0,F);e=F?e.getUint32(4,F):e.getInt32(4,F);Q=0<=(F?O:e)?1:-1;F?O*=Q:e*=Q;F=Q*(F?4294967296*e+O:4294967296*O+e);break;default:F=null}C.push(F)}if(2===b){b="";v=C;C=[];for(l=0;l<v.length;l++)0===v[l]&&""!==b?(C.push(b),b=""):b+=String.fromCharCode(v[l]);
""===b&&0!==C.length||C.push(b)}x.values=C;return!0}function g(l){var h=l[0];const x=D(h,"TILEWIDTH"),c=D(h,"TILELENGTH"),a=D(h,"IMAGEWIDTH"),e=D(h,"IMAGELENGTH");var b=D(h,"BITSPERSAMPLE");const d=D(h,"SAMPLESPERPIXEL");var v=D(h,"SAMPLEFORMAT")||1;const C=U(v,b),H=z(h,"PLANARCONFIGURATION")?2===z(h,"PLANARCONFIGURATION")[0]:!1;var F=z(h,"GDAL_NODATA");let V;null!=F&&("string"===typeof F[0]?(V=F.map(fa=>parseFloat(fa)),V.some(fa=>isNaN(fa))&&(V=null)):"number"===typeof F[0]&&(V=F));var O=D(h,"COMPRESSION")||
1;switch(O){case 1:F="NONE";break;case 2:case 3:case 4:case 32771:F="CCITT";break;case 5:F="LZW";break;case 6:case 7:F="JPEG";break;case 32773:F="PACKBITS";break;case 8:case 32946:F="DEFLATE";break;case 34712:F="JPEG2000";break;default:F=String(O)}let Q=!0,K="";1!==O&&5!==O&&6!==O&&8!==O&&32946!==O&&(Q=!1,K+="unsupported tag compression "+O);3<v&&(Q=!1,K+="unsupported tag sampleFormat "+v);0!==b%8&&(Q=!1,K+="unsupported tag bitsPerSample "+b);b=D(h,"GEOASCIIPARAMS");if(b){var P=(P=b.split("|").filter(fa=>
-1<fa.indexOf("ESRI PE String \x3d "))[0])?P.replace("ESRI PE String \x3d ",""):"";P=0===P.indexOf("PROJCS")||0===P.indexOf("GEOGCS")?{wkid:null,wkt:P}:null}v=z(h,"GEOTIEPOINTS");b=z(h,"GEOPIXELSCALE");O=z(h,"GEOTRANSMATRIX");var Z=h.has("GEOKEYDIRECTORY")?h.get("GEOKEYDIRECTORY").data:null;h=!1;if(Z){h=2===D(Z,"GTRasterTypeGeoKey");var aa=D(Z,"GTModelTypeGeoKey");2===aa?(Z=D(Z,"GeographicTypeGeoKey"),1024<=Z&&32766>=Z&&(P={wkid:Z})):1===aa&&(Z=D(Z,"ProjectedCSTypeGeoKey"),1024<=Z&&32766>=Z&&(P={wkid:Z}))}let ha;
b&&v&&6<=v.length?(ha=[b[0],0,v[3]-v[0]*b[0],0,-Math.abs(b[1]),v[4]-v[1]*b[1]],h&&(ha[2]-=.5*ha[0]+.5*ha[1],ha[5]-=.5*ha[3]+.5*ha[4])):O&&16===O.length&&(ha=h?[O[0],O[1],O[3]-.5*O[0],O[4],O[5],O[7]-.5*O[5]]:[O[0],O[1],O[3],O[4],O[5],O[7]]);if(ha){var ea=[{x:0,y:e},{x:0,y:0},{x:a,y:e},{x:a,y:0}];O=v=Number.POSITIVE_INFINITY;aa=Z=Number.NEGATIVE_INFINITY;for(let fa=0;fa<ea.length;fa++)h=I(ea[fa],ha),v=h.x>v?v:h.x,Z=h.x<Z?Z:h.x,O=h.y>O?O:h.y,aa=h.y<aa?aa:h.y;ea={xmin:v,xmax:Z,ymin:O,ymax:aa,spatialReference:P}}P=
l.filter(fa=>1===D(fa,"NEWSUBFILETYPE"));let f,u,T,S;0<P.length&&(f=Math.round(Math.log(a/D(P[0],"IMAGEWIDTH"))/Math.LN2),u=Math.round(Math.log(a/D(P[P.length-1],"IMAGEWIDTH"))/Math.LN2),T=D(P[P.length-1],"TILEWIDTH"),S=D(P[P.length-1],"TILEHEIGHT"));T=0<u?T||x:null;S=0<u?S||c:null;let ba;x&&(ba=[{maxCol:Math.ceil(a/x)-1,maxRow:Math.ceil(e/c)-1,minRow:0,minCol:0}],P.forEach(fa=>{ba.push({maxCol:Math.ceil(D(fa,"IMAGEWIDTH")/D(fa,"TILEWIDTH"))-1,maxRow:Math.ceil(D(fa,"IMAGELENGTH")/D(fa,"TILELENGTH"))-
1,minRow:0,minCol:0})}));P=D(l[0],"GDAL_METADATA");P=G(P);K+=" "+q({width:a,height:e,tileWidth:x,tileHeight:c,planes:d,ifds:l});return{width:a,height:e,tileWidth:x,tileHeight:c,planes:d,isBSQ:H,pixelType:C,compression:F,noData:V,isSupported:Q,message:K,extent:ea,affine:b?null:ha,firstPyramidLevel:f,maximumPyramidLevel:u,pyramidBlockWidth:T,pyramidBlockHeight:S,tileBoundary:ba,metadata:P}}function m(l){const {littleEndian:h,isBigTiff:x,firstIFD:c}=E(l);var a=c;const e=[];do if(a=w(l,h,a,0,M.TIFF_TAGS,
x?8:4),a.success)e.push(a.ifd),a=a.nextIFD;else break;while(0<a);return{...g(e),littleEndian:h,isBigTiff:x,ifds:e}}function p(l,h,x){const c=l.getUint32(h,x);l=l.getUint32(h+4,x);return x?4294967296*l+c:4294967296*c+l}function y(l,h,x,c){return c?p(l,h,x):l.getUint32(h,x)}function E(l){var h=new DataView(l,0,16),x=h.getUint16(0,!1);l=null;if(18761===x)l=!0;else if(19789===x)l=!1;else throw"unexpected endianess byte";var c=h.getUint16(2,l);if(42!==c&&43!==c)throw"unexpected tiff identifier";x=4;if(c=
43===c){const a=h.getUint16(x,l);x+=2;if(8!==a)throw"unsupported bigtiff version";if(0!==h.getUint16(x,l))throw"unsupported bigtiff version";x+=2}h=y(h,x,l,c);return{littleEndian:l,isBigTiff:c,firstIFD:h}}function w(l,h,x,c=0,a=M.TIFF_TAGS,e=4){x=r(l,h,x,c,a,e);let b;const d=x.ifd;d&&(M.ifdTags.forEach((v,C)=>{d.has(C)&&(b=d.get(C),b.data=r(l,h,b.valueOffset-c,c,v).ifd)}),d.has("GEOKEYDIRECTORY")&&(b=d.get("GEOKEYDIRECTORY"),(a=b.values)&&4<a.length&&(a=a[0]+"."+a[1]+"."+a[2],b.data=r(l,h,b.valueOffset+
6-c,c,M.GEO_KEYS,2).ifd,b.data&&b.data.set("GEOTIFFVersion",{id:0,type:2,valueCount:1,valueOffset:null,values:[a]}))),d.has("XMP")&&(b=d.get("XMP"),a=b.values,"number"===typeof a[0]&&7===b.type&&(b.values=[X.bytesToUTF8(new Uint8Array(a))])));return x}function q(l){const {width:h,height:x,tileHeight:c,tileWidth:a}=l,e=l.planes,b=a?a*c:h*x;l=z(l.ifds[0],"BITSPERSAMPLE")[0];let d="";b*e>2**30/(8<l?l/8:1)&&(d=a?"tiled tiff exceeding 1 gigabits per tile is not supported":"scanline tiff exceeding 1 gigabits is not supported");
return d}const t=[0,1,1,2,4,8,1,1,2,4,8,4,8,-1,-1,-1,8,8,8],B=function(l,h,x,c,a){var e=N.isPlatformLittleEndian===h,b=D(x,"BITSPERSAMPLE"),d=D(x,"SAMPLEFORMAT")||1;b=U(d,b);d=D(x,"COMPRESSION")||1;x=W(b);if(1===d){var v=l.slice(c,c+a);var C=new Uint8Array(v)}else 8===d||32946===d?(C=new Uint8Array(l,c,a),C=new n.Zlib(C),l=C.getBytes(),v=new ArrayBuffer(l.length),C=new Uint8Array(v),C.set(l)):6===d?(C=new Uint8Array(l,c,a),v=new L.Jpg,v.parse(C),l=v.getData(v.width,v.height,!0),v=new ArrayBuffer(l.length),
C=new Uint8Array(v),C.set(l)):5===d&&(C=A.decode(l,c,a,h),v=C.buffer);if("u8"!==b&&"s8"!==b&&!e)switch(v=new ArrayBuffer(C.length),e=new Uint8Array(v),b){case "u16":case "s16":for(b=0;b<C.length;b+=2)e[b]=C[b+1],e[b+1]=C[b];break;case "u32":case "s32":case "f32":for(b=0;b<C.length;b+=4)e[b]=C[b+3],e[b+1]=C[b+2],e[b+2]=C[b+1],e[b+3]=C[b]}return new x(v)},J=function(l,h,x){if(!(l&&0<l.length&&h&&x))return null;let c,a,e;const b=l[0].length,d=l.length,v=new Uint8Array(b);for(let H=0;H<d;H++)if(c=l[H],
a=h[H],e=x[H],0===H)for(var C=0;C<b;C++)v[C]=c[C]<a||c[C]>e?0:1;else for(C=0;C<b;C++)v[C]&&(v[C]=c[C]<a||c[C]>e?0:1);return v},G=function(l){if(!l)return null;var h=l.match(/<Item(.*?)Item>/gi);if(!h||0===h.length)return null;l=new Map;var x;for(var c=0;c<h.length;c++){var a=h[c];var e=a.slice(6,a.indexOf("\x3e"));var b=a.indexOf("sample\x3d");-1<b&&(x=a.slice(b+8,a.indexOf('"',b+8)));b=a.indexOf("name\x3d");-1<b&&(e=a.slice(b+6,a.indexOf('"',b+6)));e&&(a=a.slice(a.indexOf("\x3e")+1,a.indexOf("\x3c/Item\x3e")).trim(),
null!=x?l.has(e)?l.get(e)[x]=a:l.set(e,[a]):l.set(e,a));x=null}h=l.get("STATISTICS_MINIMUM");e=l.get("STATISTICS_MAXIMUM");c=l.get("STATISTICS_MEAN");a=l.get("STATISTICS_STDDEV");x=null;if(h&&e)for(x=[],b=0;b<h.length;b++)x.push({min:parseFloat(h[b]),max:parseFloat(e[b]),avg:c&&parseFloat(c[b]),stddev:a&&parseFloat(a[b])});e=l.get("BandName");c=l.get("WavelengthMin");a=l.get("WavelengthMax");h=null;if(e)for(h=[],b=0;b<e.length;b++)h.push({BandName:e[b],WavelengthMin:c&&parseFloat(c[b]),WavelengthMax:a&&
parseFloat(a[b])});e=l.get("DataType");return{statistics:x,bandProperties:h,dataType:e,rawMetadata:l}};R.decode=function(l,h){h=h||m(l);const {ifds:x,noData:c}=h;if(0===x.length)throw"no valid image file directory";var a=q(h);if(a)throw a;var e=x[0];a=c?c[0]:null;if(h.tileWidth){var b=z(e,"TILEOFFSETS");if(void 0===b)e=null;else{var d=z(e,"TILEBYTECOUNTS"),v=h.tileWidth,C=h.tileHeight,{width:H,height:F,pixelType:V,isBSQ:O}=h,Q=h.planes,K=H*F,P=z(e,"BITSPERSAMPLE")[0],Z=W(V),aa=[];for(var ha=0;ha<
Q;ha++)aa.push(new Z(K));var ea,f;K=Math.ceil(H/v);if(0===P%8)for(P=0;P<b.length;P++){var u=Math.floor(P/K)*C;var T=P%K*v;ha=u*H+T;Z=B(l,h.littleEndian,e,b[P],d[P]);var S=0;var ba=ha;T=Math.min(v,H-T);var fa=Math.min(C,F-u);for(u=0;u<Q;u++){var ia=aa[u];if(O)for(ea=0;ea<fa;ea++)for(ba=ha+ea*H,S=v*C*u+ea*v,f=0;f<T;f++,ba++,S++)ia[ba]=Z[S];else for(ea=0;ea<fa;ea++)for(ba=ha+ea*H,S=ea*v*Q+u,f=0;f<T;f++,ba++,S+=Q)ia[ba]=Z[S]}}e={width:H,height:F,pixelType:V,pixels:aa}}}else if(b=h,ba=N.isPlatformLittleEndian===
b.littleEndian,S=z(e,"STRIPOFFSETS"),void 0===S)e=null;else{var {width:ka,height:ja,pixelType:ma}=b;h=b.planes;d=ka*ja;K=z(e,"BITSPERSAMPLE")[0];v=W(ma);C=new v(d*h);P=z(e,"STRIPBYTECOUNTS");Z=z(e,"ROWSPERSTRIP")[0];T=z(e,"COMPRESSION")?z(e,"COMPRESSION")[0]:1;ea=Z;if(0===K%8)for(e=0;e<S.length;e++){u=e*Z*ka*h;ea=(e+1)*Z>ja?ja-e*Z:Z;if("u8"===ma||"s8"===ma||ba)8===T||32946===T?(aa=new Uint8Array(l,S[e],P[e]),aa=new n.Zlib(aa),f=aa.getBytes(),ha=new ArrayBuffer(f.length),aa=new Uint8Array(ha),aa.set(f),
aa.length!==ea*ka*h*K/8&&console.log("strip byte counts is different than expected")):6===T?(aa=new Uint8Array(l,S[e],P[e]),ha=new L.Jpg,ha.parse(aa),ea=ha.getData(ha.width,ha.height,!0),ha=new ArrayBuffer(ea.length),aa=new Uint8Array(ha),aa.set(ea)):5===T?(aa=A.decode(l,S[e],P[e],b.littleEndian),ha=aa.buffer):1===T&&(P[e]!==ea*ka*h*K/8&&console.log("strip byte counts is different than expected"),ha=l.slice(S[e],S[e]+P[e]));else switch(6===T||8===T||32946===T?(aa=new Uint8Array(l,S[e],P[e]),aa=new n.Zlib(aa),
aa=aa.getBytes(),ha=new ArrayBuffer(aa.length),Q=new Uint8Array(ha),aa.length!==ea*ka*h*K/8&&console.log("strip byte counts is different than expected")):1===T&&(P[e]!==ea*ka*h*K/8&&console.log("strip byte counts is different than expected"),ha=new ArrayBuffer(P[e]),aa=new Uint8Array(l,S[e],P[e]),Q=new Uint8Array(ha)),ma){case "u16":case "s16":for(ea=0;ea<aa.length;ea+=2)Q[ea]=aa[ea+1],Q[ea+1]=aa[ea];break;case "u32":case "s32":case "f32":for(ea=0;ea<aa.length;ea+=4)Q[ea]=aa[ea+3],Q[ea+1]=aa[ea+2],
Q[ea+2]=aa[ea+1],Q[ea+3]=aa[ea]}ea=new v(ha);C.set(ea,u)}aa=[];if(1===h)aa.push(C);else for(e=0;e<h;e++){Q=new v(d);for(l=0;l<d;l++)Q[l]=C[l*h+e];aa.push(Q)}e={width:ka,height:ja,pixelType:ma,pixels:aa}}if(null!==a){e.mask=new Uint8Array(e.width*e.height);if(1E24<Math.abs(a))for(l=0;l<e.width*e.height;l++)e.mask[l]=1E-6>Math.abs((e.pixels[0][l]-a)/a)?0:1;else for(l=0;l<e.width*e.height;l++)e.mask[l]=e.pixels[0][l]===a?0:1;e.noDataValue=a}return e};R.decodeTileOrStrip=function(l,h){const {headerInfo:x,
ifd:c}=h;var a=B(l,x.littleEndian,c,h.offset||0,h.size||l.byteLength);const {pixelType:e,isBSQ:b,planes:d}=x;var v=W(e);l=a.length/d;const C=[];for(var H=0;H<d;H++){var F=new v(l);if(b)F=a.slice(l*H,l*(H+1));else for(var V=0;V<l;V++)F[V]=a[V*d+H];C.push(F)}a=D(c,"TILEWIDTH");v=D(c,"TILELENGTH");F=x.noData?x.noData[0]:null;H=(V=x.metadata?x.metadata.statistics:null)?V.map(Q=>Q.min):null;V=V?V.map(Q=>Q.max):null;let O;if(null!=F)if(O=new Uint8Array(l),1E24<Math.abs(F))for(h=0;h<l;h++)O[h]=1E-6>Math.abs((C[0][h]-
F)/F)?0:1;else for(h=0;h<l;h++)O[h]=C[0][h]===F?0:1;else H&&V&&h.applyMinMaxConstraint&&(O=J(C,H,V));return{pixelType:e,width:a,height:v,pixels:C,mask:O,noDataValue:F}};R.getImageInfo=g;R.parseFieldValues=k;R.parseHeader=m;R.parseIFD=w;R.parseSignature=E;Object.defineProperty(R,"__esModule",{value:!0})})},"esri/layers/support/rasterDatasets/byteStreamUtils":function(){define(["exports"],function(R){R.bytesToUTF8=function(n,L){let X=0,A="",M=0,N=0;const U=n.length;for(;X<U;)if(N=n[X++],M=N>>4,8>M?
M=1:15===M?(M=4,N=(N&7)<<18|(n[X++]&63)<<12|(n[X++]&63)<<6|n[X++]&63):14===M?(M=3,N=(N&15)<<12|(n[X++]&63)<<6|n[X++]&63):(M=2,N=(N&31)<<6|n[X++]&63),0!==N||L)A+=String.fromCharCode(N);return A};Object.defineProperty(R,"__esModule",{value:!0})})},"esri/layers/support/rasterFormats/Lzw":function(){define(["exports"],function(R){function n(M,N,U,W=!0){if(0!==N%4||0!==U%4){var I=new ArrayBuffer(4*Math.ceil(U/4));I=new Uint8Array(I);M=new Uint8Array(M,N,U);if(W)for(W=0;W<I.length;W+=4)I[W]=M[W+3],I[W+
1]=M[W+2],I[W+2]=M[W+1],I[W+3]=M[W];else I.set(M);return new Uint32Array(I.buffer)}if(W){W=new Uint8Array(M,N,U);I=new Uint8Array(W.length);for(M=0;M<I.length;M+=4)I[M]=W[M+3],I[M+1]=W[M+2],I[M+2]=W[M+1],I[M+3]=W[M];return new Uint32Array(I.buffer)}return new Uint32Array(M,N,U/4)}function L(){const M=[];for(let N=0;257>=N;N++)M[N]=[N];return M}function X(M,N){for(let U=0;U<N.length;U++)M.push(N[U])}const A=new Set;A.add(511);A.add(1023);A.add(2047);A.add(4095);A.add(8191);R.decode=function(M,N,U,
W=!0){M=n(M,N,U,W);N=9;W=L();let I=32,z=W.length,D=[],r=1,k=M[0],g=0;const m=M.length;U=8*(4*m-U);const p=[];for(;null!=k;){if(I>=N)I-=N,g=k>>>32-N,k<<=N;else{g=k>>>32-I;k=M[r++];var y=N-I;I=32-y;g=(g<<y)+(k>>>I);k<<=y}if(257===g)break;if(256===g)N=9,W=L(),z=W.length,D=[];else{y=W[g];if(null==y){if(g>W.length)throw"data integrity issue: code does not exist on code page";D.push(D[0]);W[z++]=D.slice();X(p,D)}else X(p,y),D.push(y[0]),1<D.length&&(W[z++]=D.slice()),D=y.slice();A.has(z)&&N++;0===I&&(k=
M[r++],I=32);if(r>m||r===m&&I<=U)break}}return new Uint8Array(p)};Object.defineProperty(R,"__esModule",{value:!0})})},"esri/layers/support/rasterFormats/TiffTags":function(){define(function(){const R=(()=>{const A=[];A[254]="NEWSUBFILETYPE";A[255]="SUBFILETYPE";A[256]="IMAGEWIDTH";A[257]="IMAGELENGTH";A[258]="BITSPERSAMPLE";A[259]="COMPRESSION";A[262]="PHOTOMETRICINTERPRETATION";A[263]="THRESHHOLDING";A[264]="CELLWIDTH";A[265]="CELLLENGTH";A[266]="FILLORDER";A[269]="DOCUMENTNAME";A[270]="IMAGEDESCRIPTION";
A[271]="MAKE";A[272]="MODEL";A[273]="STRIPOFFSETS";A[274]="ORIENTATION";A[277]="SAMPLESPERPIXEL";A[278]="ROWSPERSTRIP";A[279]="STRIPBYTECOUNTS";A[280]="MINSAMPLEVALUE";A[281]="MAXSAMPLEVALUE";A[282]="XRESOLUTION";A[283]="YRESOLUTION";A[284]="PLANARCONFIGURATION";A[285]="PAGENAME";A[286]="XPOSITION";A[287]="YPOSITION";A[288]="FREEOFFSETS";A[289]="FREEBYTECOUNTS";A[290]="GRAYRESPONSEUNIT";A[291]="GRAYRESPONSECURVE";A[292]="T4OPTIONS";A[293]="T6OPTIONS";A[296]="RESOLUTIONUNIT";A[297]="PAGENUMBER";A[300]=
"COLORRESPONSEUNIT";A[301]="TRANSFERFUNCTION";A[305]="SOFTWARE";A[306]="DATETIME";A[315]="ARTIST";A[316]="HOSTCOMPUTER";A[317]="PREDICTOR";A[318]="WHITEPOINT";A[319]="PRIMARYCHROMATICITIES";A[320]="COLORMAP";A[321]="HALFTONEHINTS";A[322]="TILEWIDTH";A[323]="TILELENGTH";A[324]="TILEOFFSETS";A[325]="TILEBYTECOUNTS";A[326]="BADFAXLINES";A[327]="CLEANFAXDATA";A[328]="CONSECUTIVEBADFAXLINES";A[330]="SUBIFD";A[332]="INKSET";A[333]="INKNAMES";A[334]="NUMBEROFINKS";A[336]="DOTRANGE";A[337]="TARGETPRINTER";
A[338]="EXTRASAMPLES";A[339]="SAMPLEFORMAT";A[340]="SMINSAMPLEVALUE";A[341]="SMAXSAMPLEVALUE";A[342]="TRANSFERRANGE";A[347]="JPEGTABLES";A[512]="JPEGPROC";A[513]="JPEGIFOFFSET";A[514]="JPEGIFBYTECOUNT";A[515]="JPEGRESTARTINTERVAL";A[517]="JPEGLOSSLESSPREDICTORS";A[518]="JPEGPOINTTRANSFORM";A[519]="JPEGQTABLES";A[520]="JPEGDCTABLES";A[521]="JPEGACTABLES";A[529]="YCBCRCOEFFICIENTS";A[530]="YCBCRSUBSAMPLING";A[531]="YCBCRPOSITIONING";A[532]="REFERENCEBLACKWHITE";A[700]="XMP";A[33550]="GEOPIXELSCALE";
A[33922]="GEOTIEPOINTS";A[33432]="COPYRIGHT";A[42112]="GDAL_METADATA";A[42113]="GDAL_NODATA";A[50844]="RPCCOEFFICIENT";A[34264]="GEOTRANSMATRIX";A[34735]="GEOKEYDIRECTORY";A[34736]="GEODOUBLEPARAMS";A[34737]="GEOASCIIPARAMS";A[34665]="EXIFIFD";A[34853]="GPSIFD";A[40965]="INTEROPERABILITYIFD";return A})(),n=(()=>{const A=[].concat(R);A[36864]="ExifVersion";A[40960]="FlashpixVersion";A[40961]="ColorSpace";A[42240]="Gamma";A[37121]="ComponentsConfiguration";A[37122]="CompressedBitsPerPixel";A[40962]=
"PixelXDimension";A[40963]="PixelYDimension";A[37500]="MakerNote";A[37510]="UserComment";A[40964]="RelatedSoundFile";A[36867]="DateTimeOriginal";A[36868]="DateTimeDigitized";A[36880]="OffsetTime";A[36881]="OffsetTimeOriginal";A[36882]="OffsetTimeDigitized";A[37520]="SubSecTime";A[37521]="SubSecTimeOriginal";A[37522]="SubSecTimeDigitized";A[37888]="Temperature";A[37889]="Humidity";A[37890]="Pressure";A[37891]="WaterDepth";A[37892]="Acceleration";A[37893]="CameraElevationAngle";A[42016]="ImageUniqueID";
A[42032]="CameraOwnerName";A[42033]="BodySerialNumber";A[42034]="LensSpecification";A[42035]="LensMake";A[42036]="LensModel";A[42037]="LensSerialNumber";A[33434]="ExposureTime";A[33437]="FNumber";A[34850]="ExposureProgram";A[34852]="SpectralSensitivity";A[34855]="PhotographicSensitivity";A[34856]="OECF";A[34864]="SensitivityType";A[34865]="StandardOutputSensitivity";A[34866]="RecommendedExposureIndex";A[34867]="ISOSpeed";A[34868]="ISOSpeedLatitudeyyy";A[34869]="ISOSpeedLatitudezzz";A[37377]="ShutterSpeedValue";
A[37378]="ApertureValue";A[37379]="BrightnessValue";A[37380]="ExposureBiasValue";A[37381]="MaxApertureValue";A[37382]="SubjectDistance";A[37383]="MeteringMode";A[37384]="LightSource";A[37385]="Flash";A[37386]="FocalLength";A[37396]="SubjectArea";A[41483]="FlashEnergy";A[41484]="SpatialFrequencyResponse";A[41486]="FocalPlaneXResolution";A[41487]="FocalPlaneYResolution";A[41488]="FocalPlaneResolutionUnit";A[41492]="SubjectLocation";A[41493]="ExposureIndex";A[41495]="SensingMethod";A[41728]="FileSource";
A[41729]="SceneType";A[41730]="CFAPattern";A[41985]="CustomRendered";A[41986]="ExposureMode";A[41987]="WhiteBalance";A[41988]="DigitalZoomRatio";A[41989]="FocalLengthIn35mmFilm";A[41990]="SceneCaptureType";A[41991]="GainControl";A[41992]="Contrast";A[41993]="Saturation";A[41994]="Sharpness";A[41995]="DeviceSettingDescription";A[41996]="SubjectDistanceRange";return A})(),L=(()=>{const A=[];A[1024]="GTModelTypeGeoKey";A[1025]="GTRasterTypeGeoKey";A[1026]="GTCitationGeoKey";A[2048]="GeographicTypeGeoKey";
A[2049]="GeogCitationGeoKey";A[2050]="GeogGeodeticDatumGeoKey";A[2051]="GeogPrimeMeridianGeoKey";A[2052]="GeogLinearUnitsGeoKey";A[2053]="GeogLinearUnitSizeGeoKey";A[2054]="GeogAngularUnitsGeoKey";A[2055]="GeogAngularUnitSizeGeoKey";A[2056]="GeogEllipsoidGeoKey";A[2057]="GeogSemiMajorAxisGeoKey";A[2058]="GeogSemiMinorAxisGeoKey";A[2059]="GeogInvFlatteningGeoKey";A[2061]="GeogPrimeMeridianLongGeoKey";A[2060]="GeogAzimuthUnitsGeoKey";A[3072]="ProjectedCSTypeGeoKey";A[3073]="PCSCitationGeoKey";A[3074]=
"ProjectionGeoKey";A[3075]="ProjCoordTransGeoKey";A[3076]="ProjLinearUnitsGeoKey";A[3077]="ProjLinearUnitSizeGeoKey";A[3078]="ProjStdParallel1GeoKey";A[3079]="ProjStdParallel2GeoKey";A[3080]="ProjNatOriginLongGeoKey";A[3081]="ProjNatOriginLatGeoKey";A[3082]="ProjFalseEastingGeoKey";A[3083]="ProjFalseNorthingGeoKey";A[3084]="ProjFalseOriginLongGeoKey";A[3085]="ProjFalseOriginLatGeoKey";A[3086]="ProjFalseOriginEastingGeoKey";A[3087]="ProjFalseOriginNorthingGeoKey";A[3088]="ProjCenterLongGeoKey";A[3090]=
"ProjCenterEastingGeoKey";A[3091]="ProjCenterNorthingGeoKey";A[3092]="ProjScaleAtNatOriginGeoKey";A[3093]="ProjScaleAtCenterGeoKey";A[3094]="ProjAzimuthAngleGeoKey";A[3095]="ProjStraightVertPoleLongGeoKey";A[4096]="VerticalCSTypeGeoKey";A[4097]="VerticalCitationGeoKey";A[4098]="VerticalDatumGeoKey";A[4099]="VerticalUnitsGeoKey";return A})(),X=new Map;X.set("EXIFIFD",n);X.set("GPSIFD","GPSVersionID GPSLatitudeRef GPSLatitude GPSLongitudeRef GPSLongitude GPSAltitudeRef GPSAltitude GPSTimeStamp GPSSatellites GPSStatus GPSMeasureMode GPSDOP GPSSpeedRef GPSSpeed GPSTrackRef GPSTrack GPSImgDirectionRef GPSImgDirection GPSMapDatum GPSDestLatitudeRef GPSDestLatitude GPSDestLongitudeRef GPSDestLongitude GPSDestBearingRef GPSDestBearing GPSDestDistanceRef GPSDestDistance GPSProcessingMethod GPSAreaInformation GPSDateStamp GPSDifferential GPSHPositioningError".split(" "));
return{TIFF_TAGS:R,ifdTags:X,GEO_KEYS:L,getTagName:function(A,M){M=(M||R)[A];void 0===M&&(M="unknown"+String(A));return M}}})},"esri/layers/support/rasterFunctions/rasterProjectionHelper":function(){define("exports ../../../core/Error ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils ../../../geometry/Point ../../../geometry/Extent ../../../geometry ../../../core/unitUtils ../../../geometry/projection".split(" "),function(R,n,L,X,A,M,N,U,W){function I(g,m,
p,y=null){if(g.spatialReference.equals(m))return g;const E=k(g.spatialReference,m);if(E&&!W.isLoaded())throw new n("rasterprojectionhelper-projectResolution","projection engine is not loaded");p=p.center;g=new M({xmin:p.x-g.x/2,xmax:p.x+g.x/2,ymin:p.y-g.y/2,ymax:p.y+g.y/2,spatialReference:g.spatialReference});m=E?W.project(g,m,y):X.project(g,m);return null==m?null:{x:m.xmax-m.xmin,y:m.ymax-m.ymin}}function z(g,m=.01){return U.getMetersPerUnitForSR(g)?m/U.getMetersPerUnitForSR(g):0}function D(g,m,
p=null,y=!0){const E=g.spatialReference;if(E.equals(m))return g;const w=k(E,m);if(w&&!W.isLoaded())throw new n("rasterprojectionhelper-projectResolution","projection engine is not loaded");if((p=w?W.project(g,m,p):X.project(g,m))&&y&&m.isGeographic){var q,t;const [B,J]=E.isWebMercator?L.getInfo(E).origin:null!=(q=null==(t=L.getInfo(E))?void 0:t.valid)?q:[];(m=z(E))&&null!=B&&null!=J&&(Math.abs(g.x-B)<m&&5E-4>Math.abs(180-p.x)?p.x-=360:Math.abs(g.x-J)<m&&5E-4>Math.abs(180+p.x)&&(p.x+=360))}return p}
function r(g,m,p=null,y=!0){var E,w,q,t;const B=g.spatialReference;if(B.equals(m))return g;var J=k(B,m);if(J&&!W.isLoaded())throw new n("rasterprojectionhelper-projectExtent","projection engine is not loaded");J=J?W.project(g,m,p):X.project(g,m);let [G,l]=null!=(E=null==(w=L.getInfo(B))?void 0:w.origin)?E:[];J&&y&&B.isWebMercator&&m.isGeographic&&null!=G&&null!=l&&(.001>Math.abs(g.xmin-G)&&1E3<Math.abs(l-g.xmax)&&5E-4>Math.abs(180-J.xmax)&&(J.xmin=-180,y=[],y.push(new A(g.xmax,g.ymin,B)),y.push(new A(g.xmax,
(g.ymin+g.ymax)/2,B)),y.push(new A(g.xmax,g.ymax,B)),y=y.map(h=>D(h,m,p)).filter(h=>!isNaN(null==h?void 0:h.x)).map(h=>h.x),J.xmax=Math.max.apply(null,y)),.001>Math.abs(g.xmax-l)&&1E3<Math.abs(G-g.xmin)&&5E-4>Math.abs(180+J.xmin)&&(J.xmax=180,y=[],y.push(new A(g.xmin,g.ymin,B)),y.push(new A(g.xmin,(g.ymin+g.ymax)/2,B)),y.push(new A(g.xmin,g.ymax,B)),g=y.map(h=>D(h,m,p)).filter(h=>!isNaN(null==h?void 0:h.x)).map(h=>h.x),J.xmin=Math.min.apply(null,g)));[G,l]=m.isWebMercator?L.getInfo(m).origin:null!=
(q=null==(t=L.getInfo(m))?void 0:t.valid)?q:[];(q=z(m))&&null!=G&&null!=l&&(Math.abs(J.xmin-G)<q&&(J.xmin=G),Math.abs(J.xmax-l)<q&&(J.xmax=l));return J}const k=function(g,m){const p=(g.isWGS84||g.isWebMercator)&&(m.isWGS84||m.isWebMercator);return!(g.equals(m)||p)};R.computeProjectedScales=function(g,m,p=512,y=!0){const {extent:E,spatialReference:w,pixelSize:q}=g,t=I(new A({x:q.x,y:q.y,spatialReference:w}),m,E);if(null==t)return{projectedPixelSize:null,scales:null,srcResolutions:null,isCustomTilingScheme:!1};
var B=(t.x+t.y)/2,J=U.getMetersPerUnitForSR(m);B=B*J*96*39.37;var G=m.isGeographic?512/p*2.958287637958547E8:512/p*5.91657527591555E8;p=!1;const l=r(E,m);y&&(m.isGeographic||m.isWebMercator)&&(p=0>l.xmin*l.xmax);m=B;if(p)m=G,g=1128.497176*J,J=I(new A({x:.29858214164761665,y:.29858214164761665,spatialReference:{wkid:3857}}),w,l),J.x*=m/g,J.y*=m/g;else{J={x:q.x,y:q.y};g=Math.ceil(Math.log(Math.min(g.width,g.height)/32)/Math.LN2);for(y=0;m<.5005*G&&y<g;)y++,m*=2,J.x*=2,J.y*=2;1.001>=Math.max(m,G)/Math.min(m,
G)&&(m=G)}g=[m];G=[{x:J.x,y:J.y}];for(B=Math.min(70.5310735,B)/1.001;m>=B;)m/=2,J.x/=2,J.y/=2,g.push(m),G.push({x:J.x,y:J.y});return{projectedPixelSize:t,scales:g,srcResolutions:G,isCustomTilingScheme:!p}};R.defaultGridSpacing=32;R.getDefaultDatumTransformationForDataset=function(g,m,p){if(!k(g.spatialReference,m))return null;if(!W.isLoaded())throw new n("rasterprojectionhelper-projectResolution","projection engine is not loaded");return p?W.getTransformation(m,g.spatialReference,g):W.getTransformation(g.spatialReference,
m,g)};R.getProjectionOffsetGrid=function(g,m,p,y=null,E=null,w=!1,q=[32,32]){var t,B;if(k(g.spatialReference,m.spatialReference)&&!W.isLoaded())throw new n("rasterprojectionhelper-projectResolution","projection engine is not loaded");if(!(g&&m&&p))return null;const {xmin:J,ymin:G,xmax:l,ymax:h}=g;var x=g.spatialReference,c=m.spatialReference;const [a,e]=null!=(t=null==(B=L.getInfo(x))?void 0:B.valid)?t:[];var b=q[0]*p.x,d=q[1]*p.y;p=Math.ceil((l-J)/b-.1)+1;t=Math.ceil((h-G)/d-.1)+1;B=[];g=!1;for(var v=
0;v<p;v++){var C=[];for(var H=0;H<t;H++){var F=new A({x:J+b*v,y:h-d*H,spatialReference:x});F=D(F,c,y);E&&(F=E.inverseTransform(F));C.push(F);0<v&&w&&F&&V[H]&&null!=a&&F.x<V[H].x&&(F.x+=e-a);F?(B.push((F.x-m.xmin)/(m.xmax-m.xmin)),B.push((m.ymax-F.y)/(m.ymax-m.ymin))):(B.push(NaN),B.push(NaN),g=!0)}var V=C}m=[Math.abs((B[0]+B[4]+B[4*p]+B[4*p+4])/4-B[2*t+2]),Math.abs((B[1]+B[5]+B[4*t+1]+B[4*t+5])/4-B[2*t+3])];y=new Float32Array((p-1)*(t-1)*12);E=new Float32Array([-0,-1,1,-1,1,-0,1,-0,-0]);w=new Float32Array([-1,
1,0,0,-1,1,1,0,0]);for(V=0;V<p-1;V++){for(x=0;x<t-1;x++){H=V*t*2+2*x;d=B[H];c=B[H+1];var O=B[H+2],Q=B[H+3];H+=2*t;v=B[H];b=B[H+1];C=B[H+2];H=B[H+3];F=0;let K=12*(x*(p-1)+V);for(let P=0;3>P;P++)y[K++]=E[F++]*d+E[F++]*O+E[F++]*C;F=0;for(O=0;3>O;O++)y[K++]=E[F++]*c+E[F++]*Q+E[F++]*H;F=0;for(Q=0;3>Q;Q++)y[K++]=w[F++]*d+w[F++]*v+w[F++]*C;F=0;for(d=0;3>d;d++)y[K++]=w[F++]*c+w[F++]*b+w[F++]*H}if(g)for(x=0;x<y.length;x++)isNaN(y[x])&&(y[x]=-1)}return{offsets:B,error:m,coefficients:y,spacing:q,size:[p-1,t-
1]}};R.load=async function(){if(W.isLoaded()||!W.isSupported())return null;await W.load()};R.projectExtent=r;R.projectPoint=D;R.projectResolution=I;R.snapPyramid=function(g,m,p){var y=Math.log(g.x/m.pixelSize.x)/Math.LN2;const E=Math.log(g.y/m.pixelSize.y)/Math.LN2;g=m.storageInfo.maximumPyramidLevel||0;p="down"===p?Math.floor(Math.min(y,E)):"up"===p?Math.ceil(Math.max(y,E)):Math.round((y+E)/2);y=!1;0>p?p=0:p>g&&(y=p>g+3,p=g);g=2**p;m=new A({x:g*m.nativePixelSize.x,y:g*m.nativePixelSize.y,spatialReference:m.spatialReference});
return{pyramidLevel:p,pyramidResolution:m,excessiveReading:y}};Object.defineProperty(R,"__esModule",{value:!0})})},"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/maybe ../core/Error ../core/promiseUtils ./support/spatialReferenceUtils ./support/Ellipsoid ./Point ./Extent ./Multipoint ./Polygon ./Polyline ../core/mathUtils ../chunks/vec3f64 ../chunks/vec3 ./projectionEllipsoid ../core/unitUtils ../chunks/mat4 ../chunks/pe ./support/aaBoundingRect ./support/geodesicConstants ./support/GeographicTransformation".split(" "),
function(R,n,L,X,A,M,N,U,W,I,z,D,r,k,g,m,p,y,E,w,q,t,B){function J(){return!!wa&&w.isLoaded()}function G(Y){X.isNone(Aa)&&(Aa=Promise.all([w.load(),(new Promise(function(da,ca){R(["../chunks/geometryEngineBase"],da,ca)})).then(function(da){return da.geometryEngineBase}),new Promise(function(da,ca){R(["./geometryAdapters/hydrated"],da,ca)})]));return Aa.then(([,da,{hydratedAdapter:ca}])=>{M.throwIfAborted(Y);za=ca;wa=da.default;wa._enableProjection(w.pe)})}function l(Y,da,ca,la,pa=null){if(X.isNone(ca)||
X.isNone(la))return da;if(x(ca,la,pa))return da.map(qa=>c(qa,ca,la));if(X.isNone(pa)){const qa=B.cacheKey(ca,la);void 0!==Ba[qa]?pa=Ba[qa]:(pa=h(ca,la,null),X.isNone(pa)&&(pa=new B),Ba[qa]=pa)}if(X.isNone(wa))throw new Ma;return wa._project(Y,da,ca,la,pa)}function h(Y,da,ca=null){if(X.isNone(wa))throw new Ma;if(X.isNone(Y)||X.isNone(da))return null;Y=wa._getTransformation(za,Y,da,ca,null==ca?void 0:ca.spatialReference);return null!==Y?B.fromGE(Y):null}function x(Y,da,ca){return ca?!1:N.equals(Y,da)?
!0:N.isValid(Y)&&N.isValid(da)&&!!ta(Y,da,Na)}function c(Y,da,ca){if(!Y)return Y;if("x"in Y){var la=new W;return a(Y,da,la,ca)?la:null}return"xmin"in Y?(la=new I,v(Y,da,la,ca)?la:null):"rings"in Y?(la=new D,d(Y,da,la,ca)?la:null):"paths"in Y?(la=new r,b(Y,da,la,ca)?la:null):"points"in Y?(la=new z,e(Y,da,la,ca)?la:null):null}function a(Y,da,ca,la,pa=0){Ca[0]=Y.x;Ca[1]=Y.y;const qa=Y.z;Ca[2]=void 0!==qa?qa:pa;if(!V(Ca,da,0,Ca,la,0,1))return!1;ca.x=Ca[0];ca.y=Ca[1];ca.spatialReference=la;void 0===qa?
(ca.z=void 0,ca.hasZ=!1):(ca.z=Ca[2],ca.hasZ=!0);void 0===Y.m?(ca.m=void 0,ca.hasM=!1):(ca.m=Y.m,ca.hasM=!0);return!0}function e(Y,da,ca,la,pa=0){const {points:qa,hasZ:xa,hasM:ya}=Y;Y=[];const Ja=qa.length,Ia=[];for(var Ha of qa)Ia.push(Ha[0],Ha[1],xa?Ha[2]:pa);if(!V(Ia,da,0,Ia,la,0,Ja))return!1;for(da=0;da<Ja;++da){pa=3*da;Ha=Ia[pa];const Oa=Ia[pa+1];xa&&ya?Y.push([Ha,Oa,Ia[pa+2],qa[da][3]]):xa?Y.push([Ha,Oa,Ia[pa+2]]):ya?Y.push([Ha,Oa,qa[da][2]]):Y.push([Ha,Oa])}ca.points=Y;ca.spatialReference=
la;ca.hasZ=xa;ca.hasM=ya;return!0}function b(Y,da,ca,la,pa=0){const {paths:qa,hasZ:xa,hasM:ya}=Y;Y=[];if(!O(qa,xa,ya,da,Y,la,pa))return!1;ca.paths=Y;ca.spatialReference=la;ca.hasZ=xa;ca.hasM=ya;return!0}function d(Y,da,ca,la,pa=0){const {rings:qa,hasZ:xa,hasM:ya}=Y;Y=[];if(!O(qa,xa,ya,da,Y,la,pa))return!1;ca.rings=Y;ca.spatialReference=la;ca.hasZ=xa;ca.hasM=ya;return!0}function v(Y,da,ca,la,pa=0){const {xmin:qa,ymin:xa,xmax:ya,ymax:Ja,hasZ:Ia,hasM:Ha}=Y;if(!C(qa,xa,Ia?Y.zmin:pa,da,Ca,la))return!1;
ca.xmin=Ca[0];ca.ymin=Ca[1];Ia&&(ca.zmin=Ca[2]);if(!C(ya,Ja,Ia?Y.zmax:pa,da,Ca,la))return!1;ca.xmax=Ca[0];ca.ymax=Ca[1];Ia&&(ca.zmax=Ca[2]);Ha&&(ca.mmin=Y.mmin,ca.mmax=Y.mmax);ca.spatialReference=la;return!0}function C(Y,da,ca,la,pa,qa){Da[0]=Y;Da[1]=da;Da[2]=ca;return V(Da,la,0,pa,qa,0,1)}function H(Y,da,ca,la){if(X.isNone(da)||X.isNone(la)||2>Y.length)return!1;2===Y.length&&(Da[0]=Y[0],Da[1]=Y[1],Da[2]=0,Y=Da);return V(Y,da,0,ca,la,0,1)}function F(Y,da,ca){X.isNone(da)?Y=!1:(da=K(da,La),da=Ka[da][6],
X.isNone(da)?Y=!1:(da(Y,0,Da,0),ca!==Da&&(ca[0]=Da[0],ca[1]=Da[1],2<ca.length&&(ca[2]=Da[2])),Y=!0));return Y}function V(Y,da,ca,la,pa,qa,xa=1){da=ta(da,pa,Na);if(X.isNone(da))return!1;if(da===P){if(Y===la&&ca===qa)return!0;xa=ca+3*xa;for(let ya=ca,Ja=qa;ya<xa;ya++,Ja++)la[Ja]=Y[ya];return!0}xa=ca+3*xa;for(let ya=ca,Ja=qa;ya<xa;ya+=3,Ja+=3)da(Y,ya,la,Ja);return!0}function O(Y,da,ca,la,pa,qa,xa=0){const ya=[];for(const Ja of Y)for(const Ia of Ja)ya.push(Ia[0],Ia[1],da?Ia[2]:xa);if(!V(ya,la,0,ya,qa,
0,ya.length/3))return!1;la=0;pa.length=0;for(const Ja of Y){Y=[];for(const Ia of Ja)da&&ca?Y.push([ya[la++],ya[la++],ya[la++],Ia[3]]):da?Y.push([ya[la++],ya[la++],ya[la++]]):(ca?Y.push([ya[la++],ya[la++],Ia[2]]):Y.push([ya[la++],ya[la++]]),la++);pa.push(Y)}return!0}function Q(Y,da,ca){const la=Math.sin(da);da=Math.cos(da);const pa=Math.sin(Y);Y=Math.cos(Y);ca[0]=-la;ca[4]=-pa*da;ca[8]=Y*da;ca[12]=0;ca[1]=da;ca[5]=-pa*la;ca[9]=Y*la;ca[13]=0;ca[2]=0;ca[6]=Y;ca[10]=pa;ca[14]=0;ca[3]=0;ca[7]=0;ca[11]=
0;ca[15]=1;return ca}function K(Y,da){if(da.spatialReference===Y)return da.spatialReferenceId;da.spatialReference=Y;"metersPerUnit"in da&&(da.metersPerUnit=y.getMetersPerUnitForSR(Y,1));return Y.wkt===p.SphericalECEFSpatialReference.wkt?da.spatialReferenceId=1:N.isWGS84(Y)?da.spatialReferenceId=2:N.isWebMercator(Y)?da.spatialReferenceId=3:Y.wkt===p.WGS84ECEFSpatialReference.wkt?da.spatialReferenceId=4:4490===Y.wkid?da.spatialReferenceId=5:Y.wkt===p.SphericalPCPFMars.wkt?da.spatialReferenceId=7:Y.wkt===
p.SphericalPCPFMoon.wkt?da.spatialReferenceId=9:N.isMars(Y)?da.spatialReferenceId=8:N.isMoon(Y)?da.spatialReferenceId=10:da.spatialReferenceId=0}function P(Y,da,ca,la){Y!==ca&&(ca[la++]=Y[da++],ca[la++]=Y[da++],ca[la]=Y[da])}function Z(Y,da,ca,la){ca[la++]=Ea*(Y[da++]/U.earth.radius);ca[la++]=Ea*(Math.PI/2-2*Math.atan(Math.exp(-1*Y[da++]/U.earth.radius)));ca[la]=Y[da]}function aa(Y,da,ca,la){Z(Y,da,ca,la);ba(ca,la,ca,la)}function ha(Y,da,ca,la){Z(Y,da,ca,la);oa(ca,la,ca,la)}function ea(Y,da,ca,la,
pa){var qa=.4999999*Math.PI;qa=k.clamp(Ga*Y[da+1],-qa,qa);qa=Math.sin(qa);ca[la++]=Ga*Y[da]*pa.radius;ca[la++]=pa.halfSemiMajorAxis*Math.log((1+qa)/(1-qa));ca[la]=Y[da+2]}function f(Y,da,ca,la){ea(Y,da,ca,la,U.earth)}function u(Y,da,ca,la,pa){pa+=Y[da+2];const qa=Ga*Y[da+1];Y=Ga*Y[da];da=Math.cos(qa);ca[la++]=Math.cos(Y)*da*pa;ca[la++]=Math.sin(Y)*da*pa;ca[la]=Math.sin(qa)*pa}function T(Y,da,ca,la){u(Y,da,ca,la,U.moon.radius)}function S(Y,da,ca,la){u(Y,da,ca,la,U.mars.radius)}function ba(Y,da,ca,
la){u(Y,da,ca,la,U.earth.radius)}function fa(Y,da,ca,la,pa){var qa=Y[da];const xa=Y[da+1];da=Y[da+2];Y=Math.sqrt(qa*qa+xa*xa+da*da);da=k.asinClamped(da/(0===Y?1:Y));qa=Math.atan2(xa,qa);ca[la++]=Ea*qa;ca[la++]=Ea*da;ca[la]=Y-pa}function ia(Y,da,ca,la){fa(Y,da,ca,la,U.moon.radius)}function ka(Y,da,ca,la){fa(Y,da,ca,la,U.mars.radius)}function ja(Y,da,ca,la){fa(Y,da,ca,la,U.earth.radius)}function ma(Y,da,ca,la){ja(Y,da,ca,la);f(ca,la,ca,la)}function na(Y,da,ca,la){ja(Y,da,ca,la);oa(ca,la,ca,la)}function oa(Y,
da,ca,la){{var pa=U.earth;const xa=Ga*Y[da];var qa=Ga*Y[da+1];Y=Y[da+2];da=Math.sin(qa);qa=Math.cos(qa);const ya=pa.radius/Math.sqrt(1-pa.eccentricitySquared*da*da);ca[la++]=(ya+Y)*qa*Math.cos(xa);ca[la++]=(ya+Y)*qa*Math.sin(xa);ca[la++]=(ya*(1-pa.eccentricitySquared)+Y)*da}}function ra(Y,da,ca,la){var pa=t.earthEllipsoidConstants,qa=Y[da],xa=Y[da+1];Y=Y[da+2];let ya;da=Math.abs(Y);var Ja=qa*qa+xa*xa;var Ia=Math.sqrt(Ja);var Ha=Ja+Y*Y;var Oa=Math.sqrt(Ha);qa=Math.atan2(xa,qa);var Sa=Y*Y/Ha;Ha=Ja/
Ha;xa=pa.a2/Oa;Ja=pa.a3-pa.a4/Oa;.3<Ha?(Sa=da/Oa*(1+Ha*(pa.a1+xa+Sa*Ja)/Oa),Oa=Math.asin(Sa),xa=Sa*Sa,Ha=Math.sqrt(1-xa)):(Ha=Ia/Oa*(1-Sa*(pa.a5-xa-Ha*Ja)/Oa),Oa=Math.acos(Ha),xa=1-Ha*Ha,Sa=Math.sqrt(xa));ya=1-U.earth.eccentricitySquared*xa;xa=U.earth.radius/Math.sqrt(ya);pa=pa.a6*xa;xa=Ia-xa*Ha;Ja=da-pa*Sa;da=Ha*xa+Sa*Ja;Ia=Ha*Ja-Sa*xa;pa=Ia/(pa/ya+da);Oa+=pa;0>Y&&(Oa=-Oa);ca[la++]=Ea*qa;ca[la++]=Ea*Oa;ca[la]=da+Ia*pa/2}function sa(Y,da,ca,la){ra(Y,da,ca,la);ba(ca,la,ca,la)}function ua(Y,da,ca,la){ra(Y,
da,ca,la);f(ca,la,ca,la)}function ta(Y,da,ca=Fa()){return X.isNone(Y)||X.isNone(da)?null:va(Y,da,ca).projector}function va(Y,da,ca){if(X.isNone(Y)||X.isNone(da)||ca.source.spatialReference===Y&&ca.dest.spatialReference===da)return ca;const la=K(Y,ca.source),pa=K(da,ca.dest);0===la&&0===pa?N.equals(Y,da)?ca.projector=P:ca.projector=null:ca.projector=Ka[la][pa];return ca}function Fa(){return{source:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:0,
metersPerUnit:1},projector:P}}let wa=null,za=null,Aa=null,Ba={},Ma=function(Y){function da(){return Y.call(this,"projection:not-loaded","projection engine not fully loaded yet, please call load()")||this}L._inheritsLoose(da,Y);return da}(A);const Ka={[2]:{[5]:null,[8]:null,[10]:null,[6]:P,[1]:ba,[7]:null,[9]:null,[0]:null,[3]:f,[2]:P,[4]:oa},[5]:{[5]:P,[8]:null,[10]:null,[6]:P,[1]:ba,[7]:null,[9]:null,[0]:null,[3]:null,[2]:null,[4]:oa},[8]:{[5]:null,[8]:P,[10]:null,[6]:null,[1]:null,[7]:S,[9]:null,
[0]:null,[3]:null,[2]:null,[4]:null},[10]:{[5]:null,[8]:null,[10]:P,[6]:null,[1]:null,[7]:null,[9]:T,[0]:null,[3]:null,[2]:null,[4]:null},[3]:{[5]:null,[8]:null,[10]:null,[6]:Z,[1]:aa,[7]:null,[9]:null,[0]:null,[3]:P,[2]:Z,[4]:ha},[4]:{[5]:ra,[8]:null,[10]:null,[6]:ra,[1]:sa,[7]:null,[9]:null,[0]:null,[3]:ua,[2]:ra,[4]:P},[1]:{[5]:ja,[8]:null,[10]:null,[6]:ja,[1]:P,[7]:null,[9]:null,[0]:null,[3]:ma,[2]:ja,[4]:na},[7]:{[5]:null,[8]:ka,[10]:null,[6]:null,[1]:null,[7]:P,[9]:null,[0]:null,[3]:null,[2]:null,
[4]:null},[9]:{[5]:null,[8]:null,[10]:ia,[6]:null,[1]:null,[7]:null,[9]:P,[0]:null,[3]:null,[2]:null,[4]:null},[0]:{[5]:null,[8]:null,[10]:null,[6]:null,[1]:null,[7]:null,[9]:null,[0]:P,[3]:null,[2]:null,[4]:null},[6]:{[5]:null,[8]:null,[10]:null,[6]:P,[1]:ba,[7]:null,[9]:null,[0]:null,[3]:null,[2]:P,[4]:oa}},La={spatialReference:null,spatialReferenceId:0},Pa={spatialReference:null,spatialReferenceId:0},Na=Fa(),Qa=Fa(),Ga=k.deg2rad(1),Ea=k.rad2deg(1),Da=g.create(),Ra=g.create(),Ta=g.create(),Ca=g.create(),
Ua=g.create();n.canProjectToWGS84ComparableLonLat=function(Y){if(X.isNone(Y))return!1;Y=K(Y,La);return!!Ka[Y][6]};n.canProjectWithoutEngine=x;n.computeLatLonToENURotation=Q;n.computeLinearTransformation=function(Y,da,ca,la){if(X.isNone(Y)||X.isNone(la))return!1;var pa=K(Y,La),qa=K(la,Pa);if(pa===qa&&1!==qa&&(0!==pa||N.equals(Y,la)))return E.identity(ca),E.translate(ca,ca,da),!0;if(1===qa||7===qa||9===qa){la=Y=0;if(1===qa){pa=Ka[pa][6];qa=Ka[6][qa];if(X.isNone(pa)||X.isNone(qa))return!1;pa(da,0,Ra,
0);qa(Ra,0,Ta,0);Y=Ga*Ra[0];la=Ga*Ra[1]}else if(7===qa||9===qa){qa=Ka[pa][qa];if(X.isNone(qa))return!1;qa(da,0,Ta,0);Y=Ga*da[0];la=Ga*da[1]}Q(la,Y,ca);ca[12]=Ta[0];ca[13]=Ta[1];ca[14]=Ta[2];return!0}if(3===qa&&(2===pa||1===pa)){qa=Ka[pa][6];if(X.isNone(qa))return!1;qa(da,0,Ra,0);da=Ga*Ra[1];f(Ra,0,Ta,0);E.identity(ca);E.translate(ca,ca,Ta);da=1/Math.cos(da);E.scale(ca,ca,[da,da,1]);return!0}return!1};n.getProjectorName=function(Y,da){switch(ta(Y,da,Na)){case P:return"copy3";case ba:return"wgs84ToSphericalECEF";
case f:return"wgs84ToWebMercator";case oa:return"wgs84ToWGS84ECEF";case Z:return"webMercatorToWGS84";case aa:return"webMercatorToSphericalECEF";case ha:return"webMercatorToWGS84ECEF";case ra:return"wgs84ECEFToWGS84";case sa:return"wgs84ECEFToSphericalECEF";case ua:return"wgs84ECEFToWebMercator";case ja:return"sphericalECEFToWGS84";case ma:return"sphericalECEFToWebMercator";case ka:return"sphericalMarsPCPFToMars2000";case ia:return"sphericalMoonPCPFToMoon2000";case na:return"sphericalECEFToWGS84ECEF";
case S:return"mars2000ToSphericalPCPF";case T:return"moon2000ToSphericalPCPF";default:return null}};n.getTransformation=h;n.getTransformations=function(Y,da,ca=null){if(X.isNone(wa))throw new Ma;Y=wa._getTransformationBySuitability(za,Y,da,ca,null==ca?void 0:ca.spatialReference);if(null!==Y){da=[];for(const la of Y)da.push(B.fromGE(la));return da}return[]};n.initializeProjection=async function(Y,da){if(!J())for(const {source:ca,dest:la,geographicTransformation:pa}of Y)if(!x(ca,la,pa))return G(da)};
n.isLoaded=J;n.isSupported=function(){return!0};n.load=G;n.localLinearScaleFactors=function(Y,da,ca,la){if(X.isNone(da)||X.isNone(la))return!1;const pa=K(da,La);var qa=K(la,Pa);if(pa===qa&&0!==pa||N.equals(da,la))return ca[0]=1,ca[1]=1,ca[2]=1,!0;if(1===pa){da=m.length(Y);Y=da/Math.sqrt(Y[0]*Y[0]+Y[1]*Y[1]);da/=U.earth.radius;if(3===qa)return ca[0]=Y*da,ca[1]=Y*da,ca[2]=1,!0;if(2===qa||5===qa)return qa=180/(U.earth.radius*Math.PI),ca[0]=qa*Y*da,ca[1]=qa*da,ca[2]=1,!0}return!1};n.lonLatToSphericalPCPF=
function(Y,da,ca,la,pa=0){la+=pa;pa=Math.cos(ca);Y[0]=Math.cos(da)*pa*la;Y[1]=Math.sin(da)*pa*la;Y[2]=Math.sin(ca)*la};n.lonLatToWebMercatorComparable=ea;n.project=function(Y,da,ca=null){return Array.isArray(Y)?0===Y.length?[]:l(za,Y,Y[0].spatialReference,da,ca):l(za,[Y],Y.spatialReference,da,ca)[0]};n.projectBoundingRect=function(Y,da,ca,la){if(null==Y)return!1;if(N.equals(da,la))return q.set(ca,Y),!0;Da[0]=Y[0];Da[1]=Y[1];Da[2]=0;if(!V(Da,da,0,Da,la,0,1))return!1;ca[0]=Da[0];ca[1]=Da[1];Da[0]=Y[2];
Da[1]=Y[3];Da[2]=0;if(!V(Da,da,0,Da,la,0,1))return!1;ca[2]=Da[0];ca[3]=Da[1];return!0};n.projectBoundingSphere=function(Y,da,ca,la){if(X.isNone(da)||X.isNone(la))return!1;da=va(da,la,Qa);if(da.projector===P)return ca[0]=Y[0],ca[1]=Y[1],ca[2]=Y[2],ca[3]=Y[3],!0;if(X.isNone(da.projector))return!1;const {source:pa,dest:qa}=da;if(3===qa.spatialReferenceId){da=Ka[pa.spatialReferenceId][2];if(X.isNone(da))return!1;da(Y,0,Ra,0);da=Math.abs(Ga*Ra[1])+Math.asin(Y[3]/(U.earth.radius+Y[2]));f(Ra,0,ca,0);ca[3]=
da>.9999*Math.PI?Number.MAX_VALUE:1/Math.cos(da)*Y[3];return!0}da.projector(Y,0,ca,0);ca[3]=Y[3]*pa.metersPerUnit/qa.metersPerUnit;return!0};n.projectBuffer=V;n.projectDirection=function(Y,da,ca,la,pa){m.copy(Ca,Y);m.add(Ua,Y,da);H(Ca,ca,Ca,pa);H(Ua,ca,Ua,pa);m.subtract(la,Ua,Ca);m.normalize(la,la)};n.projectExtent=function(Y,da,ca=da.spatialReference,la=0){return X.isNone(ca)?!1:v(Y,Y.spatialReference,da,ca,la)};n.projectMany=l;n.projectMultipoint=function(Y,da,ca=da.spatialReference,la=0){return X.isNone(ca)?
!1:e(Y,Y.spatialReference,da,ca,la)};n.projectPoint=function(Y,da,ca=da.spatialReference,la=0){return X.isNone(ca)?!1:a(Y,Y.spatialReference,da,ca,la)};n.projectPointToVector=function(Y,da,ca,la=0){Ca[0]=Y.x;Ca[1]=Y.y;const pa=Y.z;Ca[2]=void 0!==pa?pa:la;return V(Ca,Y.spatialReference,0,da,ca,0,1)};n.projectPointToWGS84ComparableLonLat=function(Y,da){Ca[0]=Y.x;Ca[1]=Y.y;const ca=Y.z;Ca[2]=void 0!==ca?ca:0;return F(Ca,Y.spatialReference,da)};n.projectPolygon=function(Y,da,ca=da.spatialReference,la=
0){return X.isNone(ca)?!1:d(Y,Y.spatialReference,da,ca,la)};n.projectPolyline=function(Y,da,ca=da.spatialReference,la=0){return X.isNone(ca)?!1:b(Y,Y.spatialReference,da,ca,la)};n.projectVectorToDehydratedPoint=function(Y,da,ca){return V(Y,da,0,Ca,ca.spatialReference,0,1)?(ca.x=Ca[0],ca.y=Ca[1],ca.z=Ca[2],ca):null};n.projectVectorToPoint=function(Y,da,ca){if(X.isNone(da)||X.isNone(ca))return null;const la=new W({spatialReference:ca});return V(Y,da,0,Ca,ca,0,1)?(la.x=Ca[0],la.y=Ca[1],la.z=Ca[2],la):
null};n.projectVectorToVector=H;n.projectVectorToWGS84ComparableLonLat=F;n.projectXYZToVector=C;n.sphericalPCPFtoLonLatElevation=fa;n.unload=function(){Aa=za=wa=null;Ba={}};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/chunks/mat4":function(){define(["exports","./vec3f64","./common"],function(R,n,L){function X(f,u){f[0]=u[0];f[1]=u[1];f[2]=u[2];f[3]=u[3];f[4]=u[4];f[5]=u[5];f[6]=u[6];f[7]=u[7];f[8]=u[8];f[9]=u[9];f[10]=u[10];f[11]=u[11];f[12]=u[12];f[13]=u[13];f[14]=u[14];f[15]=u[15];
return f}function A(f,u,T,S,ba,fa,ia,ka,ja,ma,na,oa,ra,sa,ua,ta,va){f[0]=u;f[1]=T;f[2]=S;f[3]=ba;f[4]=fa;f[5]=ia;f[6]=ka;f[7]=ja;f[8]=ma;f[9]=na;f[10]=oa;f[11]=ra;f[12]=sa;f[13]=ua;f[14]=ta;f[15]=va;return f}function M(f){f[0]=1;f[1]=0;f[2]=0;f[3]=0;f[4]=0;f[5]=1;f[6]=0;f[7]=0;f[8]=0;f[9]=0;f[10]=1;f[11]=0;f[12]=0;f[13]=0;f[14]=0;f[15]=1;return f}function N(f,u){if(f===u){const T=u[1],S=u[2],ba=u[3],fa=u[6],ia=u[7],ka=u[11];f[1]=u[4];f[2]=u[8];f[3]=u[12];f[4]=T;f[6]=u[9];f[7]=u[13];f[8]=S;f[9]=fa;
f[11]=u[14];f[12]=ba;f[13]=ia;f[14]=ka}else f[0]=u[0],f[1]=u[4],f[2]=u[8],f[3]=u[12],f[4]=u[1],f[5]=u[5],f[6]=u[9],f[7]=u[13],f[8]=u[2],f[9]=u[6],f[10]=u[10],f[11]=u[14],f[12]=u[3],f[13]=u[7],f[14]=u[11],f[15]=u[15];return f}function U(f,u){const T=u[0],S=u[1],ba=u[2],fa=u[3],ia=u[4],ka=u[5],ja=u[6],ma=u[7],na=u[8],oa=u[9],ra=u[10],sa=u[11],ua=u[12],ta=u[13],va=u[14];u=u[15];const Fa=T*ka-S*ia,wa=T*ja-ba*ia,za=T*ma-fa*ia,Aa=S*ja-ba*ka,Ba=S*ma-fa*ka,Ma=ba*ma-fa*ja,Ka=na*ta-oa*ua,La=na*va-ra*ua,Pa=
na*u-sa*ua,Na=oa*va-ra*ta,Qa=oa*u-sa*ta,Ga=ra*u-sa*va;let Ea=Fa*Ga-wa*Qa+za*Na+Aa*Pa-Ba*La+Ma*Ka;if(!Ea)return null;Ea=1/Ea;f[0]=(ka*Ga-ja*Qa+ma*Na)*Ea;f[1]=(ba*Qa-S*Ga-fa*Na)*Ea;f[2]=(ta*Ma-va*Ba+u*Aa)*Ea;f[3]=(ra*Ba-oa*Ma-sa*Aa)*Ea;f[4]=(ja*Pa-ia*Ga-ma*La)*Ea;f[5]=(T*Ga-ba*Pa+fa*La)*Ea;f[6]=(va*za-ua*Ma-u*wa)*Ea;f[7]=(na*Ma-ra*za+sa*wa)*Ea;f[8]=(ia*Qa-ka*Pa+ma*Ka)*Ea;f[9]=(S*Pa-T*Qa-fa*Ka)*Ea;f[10]=(ua*Ba-ta*za+u*Fa)*Ea;f[11]=(oa*za-na*Ba-sa*Fa)*Ea;f[12]=(ka*La-ia*Na-ja*Ka)*Ea;f[13]=(T*Na-S*La+
ba*Ka)*Ea;f[14]=(ta*wa-ua*Aa-va*Fa)*Ea;f[15]=(na*Aa-oa*wa+ra*Fa)*Ea;return f}function W(f,u){const T=u[0],S=u[1],ba=u[2],fa=u[3],ia=u[4],ka=u[5],ja=u[6],ma=u[7],na=u[8],oa=u[9],ra=u[10],sa=u[11],ua=u[12],ta=u[13],va=u[14];u=u[15];f[0]=ka*(ra*u-sa*va)-oa*(ja*u-ma*va)+ta*(ja*sa-ma*ra);f[1]=-(S*(ra*u-sa*va)-oa*(ba*u-fa*va)+ta*(ba*sa-fa*ra));f[2]=S*(ja*u-ma*va)-ka*(ba*u-fa*va)+ta*(ba*ma-fa*ja);f[3]=-(S*(ja*sa-ma*ra)-ka*(ba*sa-fa*ra)+oa*(ba*ma-fa*ja));f[4]=-(ia*(ra*u-sa*va)-na*(ja*u-ma*va)+ua*(ja*sa-ma*
ra));f[5]=T*(ra*u-sa*va)-na*(ba*u-fa*va)+ua*(ba*sa-fa*ra);f[6]=-(T*(ja*u-ma*va)-ia*(ba*u-fa*va)+ua*(ba*ma-fa*ja));f[7]=T*(ja*sa-ma*ra)-ia*(ba*sa-fa*ra)+na*(ba*ma-fa*ja);f[8]=ia*(oa*u-sa*ta)-na*(ka*u-ma*ta)+ua*(ka*sa-ma*oa);f[9]=-(T*(oa*u-sa*ta)-na*(S*u-fa*ta)+ua*(S*sa-fa*oa));f[10]=T*(ka*u-ma*ta)-ia*(S*u-fa*ta)+ua*(S*ma-fa*ka);f[11]=-(T*(ka*sa-ma*oa)-ia*(S*sa-fa*oa)+na*(S*ma-fa*ka));f[12]=-(ia*(oa*va-ra*ta)-na*(ka*va-ja*ta)+ua*(ka*ra-ja*oa));f[13]=T*(oa*va-ra*ta)-na*(S*va-ba*ta)+ua*(S*ra-ba*oa);f[14]=
-(T*(ka*va-ja*ta)-ia*(S*va-ba*ta)+ua*(S*ja-ba*ka));f[15]=T*(ka*ra-ja*oa)-ia*(S*ra-ba*oa)+na*(S*ja-ba*ka);return f}function I(f){const u=f[0],T=f[1],S=f[2],ba=f[3],fa=f[4],ia=f[5],ka=f[6],ja=f[7],ma=f[8],na=f[9],oa=f[10],ra=f[11],sa=f[12],ua=f[13],ta=f[14];f=f[15];return(u*ia-T*fa)*(oa*f-ra*ta)-(u*ka-S*fa)*(na*f-ra*ua)+(u*ja-ba*fa)*(na*ta-oa*ua)+(T*ka-S*ia)*(ma*f-ra*sa)-(T*ja-ba*ia)*(ma*ta-oa*sa)+(S*ja-ba*ka)*(ma*ua-na*sa)}function z(f,u,T){const S=u[0],ba=u[1],fa=u[2],ia=u[3],ka=u[4],ja=u[5],ma=u[6],
na=u[7],oa=u[8],ra=u[9],sa=u[10],ua=u[11],ta=u[12],va=u[13],Fa=u[14];u=u[15];let wa=T[0],za=T[1],Aa=T[2],Ba=T[3];f[0]=wa*S+za*ka+Aa*oa+Ba*ta;f[1]=wa*ba+za*ja+Aa*ra+Ba*va;f[2]=wa*fa+za*ma+Aa*sa+Ba*Fa;f[3]=wa*ia+za*na+Aa*ua+Ba*u;wa=T[4];za=T[5];Aa=T[6];Ba=T[7];f[4]=wa*S+za*ka+Aa*oa+Ba*ta;f[5]=wa*ba+za*ja+Aa*ra+Ba*va;f[6]=wa*fa+za*ma+Aa*sa+Ba*Fa;f[7]=wa*ia+za*na+Aa*ua+Ba*u;wa=T[8];za=T[9];Aa=T[10];Ba=T[11];f[8]=wa*S+za*ka+Aa*oa+Ba*ta;f[9]=wa*ba+za*ja+Aa*ra+Ba*va;f[10]=wa*fa+za*ma+Aa*sa+Ba*Fa;f[11]=wa*
ia+za*na+Aa*ua+Ba*u;wa=T[12];za=T[13];Aa=T[14];Ba=T[15];f[12]=wa*S+za*ka+Aa*oa+Ba*ta;f[13]=wa*ba+za*ja+Aa*ra+Ba*va;f[14]=wa*fa+za*ma+Aa*sa+Ba*Fa;f[15]=wa*ia+za*na+Aa*ua+Ba*u;return f}function D(f,u,T){const S=T[0],ba=T[1];T=T[2];let fa=void 0,ia=void 0,ka=void 0,ja=void 0,ma=void 0,na=void 0,oa=void 0,ra=void 0,sa=void 0,ua=void 0,ta=void 0,va=void 0;u===f?(f[12]=u[0]*S+u[4]*ba+u[8]*T+u[12],f[13]=u[1]*S+u[5]*ba+u[9]*T+u[13],f[14]=u[2]*S+u[6]*ba+u[10]*T+u[14],f[15]=u[3]*S+u[7]*ba+u[11]*T+u[15]):(fa=
u[0],ia=u[1],ka=u[2],ja=u[3],ma=u[4],na=u[5],oa=u[6],ra=u[7],sa=u[8],ua=u[9],ta=u[10],va=u[11],f[0]=fa,f[1]=ia,f[2]=ka,f[3]=ja,f[4]=ma,f[5]=na,f[6]=oa,f[7]=ra,f[8]=sa,f[9]=ua,f[10]=ta,f[11]=va,f[12]=fa*S+ma*ba+sa*T+u[12],f[13]=ia*S+na*ba+ua*T+u[13],f[14]=ka*S+oa*ba+ta*T+u[14],f[15]=ja*S+ra*ba+va*T+u[15]);return f}function r(f,u,T){const S=T[0],ba=T[1];T=T[2];f[0]=u[0]*S;f[1]=u[1]*S;f[2]=u[2]*S;f[3]=u[3]*S;f[4]=u[4]*ba;f[5]=u[5]*ba;f[6]=u[6]*ba;f[7]=u[7]*ba;f[8]=u[8]*T;f[9]=u[9]*T;f[10]=u[10]*T;f[11]=
u[11]*T;f[12]=u[12];f[13]=u[13];f[14]=u[14];f[15]=u[15];return f}function k(f,u,T,S){let ba=S[0],fa=S[1];S=S[2];let ia=Math.sqrt(ba*ba+fa*fa+S*S);var ka=void 0,ja=void 0;let ma=void 0,na=void 0,oa=void 0,ra=void 0,sa=void 0,ua=void 0,ta=void 0,va=void 0,Fa=void 0,wa=void 0,za=void 0,Aa=void 0,Ba=void 0,Ma=void 0,Ka=void 0,La=void 0,Pa=void 0,Na=void 0,Qa=void 0,Ga=void 0;ja=ka=void 0;if(ia<L.EPSILON)return null;ia=1/ia;ba*=ia;fa*=ia;S*=ia;ka=Math.sin(T);ja=Math.cos(T);ma=1-ja;na=u[0];oa=u[1];ra=u[2];
sa=u[3];ua=u[4];ta=u[5];va=u[6];Fa=u[7];wa=u[8];za=u[9];Aa=u[10];Ba=u[11];Ma=ba*ba*ma+ja;Ka=fa*ba*ma+S*ka;La=S*ba*ma-fa*ka;Pa=ba*fa*ma-S*ka;Na=fa*fa*ma+ja;Qa=S*fa*ma+ba*ka;Ga=ba*S*ma+fa*ka;ka=fa*S*ma-ba*ka;ja=S*S*ma+ja;f[0]=na*Ma+ua*Ka+wa*La;f[1]=oa*Ma+ta*Ka+za*La;f[2]=ra*Ma+va*Ka+Aa*La;f[3]=sa*Ma+Fa*Ka+Ba*La;f[4]=na*Pa+ua*Na+wa*Qa;f[5]=oa*Pa+ta*Na+za*Qa;f[6]=ra*Pa+va*Na+Aa*Qa;f[7]=sa*Pa+Fa*Na+Ba*Qa;f[8]=na*Ga+ua*ka+wa*ja;f[9]=oa*Ga+ta*ka+za*ja;f[10]=ra*Ga+va*ka+Aa*ja;f[11]=sa*Ga+Fa*ka+Ba*ja;u!==
f&&(f[12]=u[12],f[13]=u[13],f[14]=u[14],f[15]=u[15]);return f}function g(f,u,T){const S=Math.sin(T);T=Math.cos(T);const ba=u[4],fa=u[5],ia=u[6],ka=u[7],ja=u[8],ma=u[9],na=u[10],oa=u[11];u!==f&&(f[0]=u[0],f[1]=u[1],f[2]=u[2],f[3]=u[3],f[12]=u[12],f[13]=u[13],f[14]=u[14],f[15]=u[15]);f[4]=ba*T+ja*S;f[5]=fa*T+ma*S;f[6]=ia*T+na*S;f[7]=ka*T+oa*S;f[8]=ja*T-ba*S;f[9]=ma*T-fa*S;f[10]=na*T-ia*S;f[11]=oa*T-ka*S;return f}function m(f,u,T){const S=Math.sin(T);T=Math.cos(T);const ba=u[0],fa=u[1],ia=u[2],ka=u[3],
ja=u[8],ma=u[9],na=u[10],oa=u[11];u!==f&&(f[4]=u[4],f[5]=u[5],f[6]=u[6],f[7]=u[7],f[12]=u[12],f[13]=u[13],f[14]=u[14],f[15]=u[15]);f[0]=ba*T-ja*S;f[1]=fa*T-ma*S;f[2]=ia*T-na*S;f[3]=ka*T-oa*S;f[8]=ba*S+ja*T;f[9]=fa*S+ma*T;f[10]=ia*S+na*T;f[11]=ka*S+oa*T;return f}function p(f,u,T){const S=Math.sin(T);T=Math.cos(T);const ba=u[0],fa=u[1],ia=u[2],ka=u[3],ja=u[4],ma=u[5],na=u[6],oa=u[7];u!==f&&(f[8]=u[8],f[9]=u[9],f[10]=u[10],f[11]=u[11],f[12]=u[12],f[13]=u[13],f[14]=u[14],f[15]=u[15]);f[0]=ba*T+ja*S;f[1]=
fa*T+ma*S;f[2]=ia*T+na*S;f[3]=ka*T+oa*S;f[4]=ja*T-ba*S;f[5]=ma*T-fa*S;f[6]=na*T-ia*S;f[7]=oa*T-ka*S;return f}function y(f,u){f[0]=1;f[1]=0;f[2]=0;f[3]=0;f[4]=0;f[5]=1;f[6]=0;f[7]=0;f[8]=0;f[9]=0;f[10]=1;f[11]=0;f[12]=u[0];f[13]=u[1];f[14]=u[2];f[15]=1;return f}function E(f,u){f[0]=u[0];f[1]=0;f[2]=0;f[3]=0;f[4]=0;f[5]=u[1];f[6]=0;f[7]=0;f[8]=0;f[9]=0;f[10]=u[2];f[11]=0;f[12]=0;f[13]=0;f[14]=0;f[15]=1;return f}function w(f,u,T){let S=T[0],ba=T[1];T=T[2];let fa=Math.sqrt(S*S+ba*ba+T*T),ia=void 0,ka=
void 0,ja=void 0;if(fa<L.EPSILON)return null;fa=1/fa;S*=fa;ba*=fa;T*=fa;ia=Math.sin(u);ka=Math.cos(u);ja=1-ka;f[0]=S*S*ja+ka;f[1]=ba*S*ja+T*ia;f[2]=T*S*ja-ba*ia;f[3]=0;f[4]=S*ba*ja-T*ia;f[5]=ba*ba*ja+ka;f[6]=T*ba*ja+S*ia;f[7]=0;f[8]=S*T*ja+ba*ia;f[9]=ba*T*ja-S*ia;f[10]=T*T*ja+ka;f[11]=0;f[12]=0;f[13]=0;f[14]=0;f[15]=1;return f}function q(f,u){const T=Math.sin(u);u=Math.cos(u);f[0]=1;f[1]=0;f[2]=0;f[3]=0;f[4]=0;f[5]=u;f[6]=T;f[7]=0;f[8]=0;f[9]=-T;f[10]=u;f[11]=0;f[12]=0;f[13]=0;f[14]=0;f[15]=1;return f}
function t(f,u){const T=Math.sin(u);u=Math.cos(u);f[0]=u;f[1]=0;f[2]=-T;f[3]=0;f[4]=0;f[5]=1;f[6]=0;f[7]=0;f[8]=T;f[9]=0;f[10]=u;f[11]=0;f[12]=0;f[13]=0;f[14]=0;f[15]=1;return f}function B(f,u){const T=Math.sin(u);u=Math.cos(u);f[0]=u;f[1]=T;f[2]=0;f[3]=0;f[4]=-T;f[5]=u;f[6]=0;f[7]=0;f[8]=0;f[9]=0;f[10]=1;f[11]=0;f[12]=0;f[13]=0;f[14]=0;f[15]=1;return f}function J(f,u,T){var S=u[0],ba=u[1],fa=u[2],ia=u[3],ka=S+S,ja=ba+ba;const ma=fa+fa;u=S*ka;const na=S*ja;S*=ma;const oa=ba*ja;ba*=ma;fa*=ma;ka*=ia;
ja*=ia;ia*=ma;f[0]=1-(oa+fa);f[1]=na+ia;f[2]=S-ja;f[3]=0;f[4]=na-ia;f[5]=1-(u+fa);f[6]=ba+ka;f[7]=0;f[8]=S+ja;f[9]=ba-ka;f[10]=1-(u+oa);f[11]=0;f[12]=T[0];f[13]=T[1];f[14]=T[2];f[15]=1;return f}function G(f,u){const T=ea,S=-u[0],ba=-u[1],fa=-u[2],ia=u[3],ka=u[4],ja=u[5],ma=u[6],na=u[7],oa=S*S+ba*ba+fa*fa+ia*ia;0<oa?(T[0]=2*(ka*ia+na*S+ja*fa-ma*ba)/oa,T[1]=2*(ja*ia+na*ba+ma*S-ka*fa)/oa,T[2]=2*(ma*ia+na*fa+ka*ba-ja*S)/oa):(T[0]=2*(ka*ia+na*S+ja*fa-ma*ba),T[1]=2*(ja*ia+na*ba+ma*S-ka*fa),T[2]=2*(ma*ia+
na*fa+ka*ba-ja*S));J(f,u,T);return f}function l(f,u){f[0]=u[12];f[1]=u[13];f[2]=u[14];return f}function h(f,u){const T=u[0],S=u[1],ba=u[2],fa=u[4],ia=u[5],ka=u[6],ja=u[8],ma=u[9];u=u[10];f[0]=Math.sqrt(T*T+S*S+ba*ba);f[1]=Math.sqrt(fa*fa+ia*ia+ka*ka);f[2]=Math.sqrt(ja*ja+ma*ma+u*u);return f}function x(f,u){const T=u[0]+u[5]+u[10];let S=0;0<T?(S=2*Math.sqrt(T+1),f[3]=.25*S,f[0]=(u[6]-u[9])/S,f[1]=(u[8]-u[2])/S,f[2]=(u[1]-u[4])/S):u[0]>u[5]&&u[0]>u[10]?(S=2*Math.sqrt(1+u[0]-u[5]-u[10]),f[3]=(u[6]-u[9])/
S,f[0]=.25*S,f[1]=(u[1]+u[4])/S,f[2]=(u[8]+u[2])/S):u[5]>u[10]?(S=2*Math.sqrt(1+u[5]-u[0]-u[10]),f[3]=(u[8]-u[2])/S,f[0]=(u[1]+u[4])/S,f[1]=.25*S,f[2]=(u[6]+u[9])/S):(S=2*Math.sqrt(1+u[10]-u[0]-u[5]),f[3]=(u[1]-u[4])/S,f[0]=(u[8]+u[2])/S,f[1]=(u[6]+u[9])/S,f[2]=.25*S);return f}function c(f,u,T,S){var ba=u[0],fa=u[1],ia=u[2],ka=u[3],ja=ba+ba,ma=fa+fa,na=ia+ia;u=ba*ja;const oa=ba*ma;ba*=na;const ra=fa*ma;fa*=na;ia*=na;ja*=ka;ma*=ka;ka*=na;na=S[0];const sa=S[1];S=S[2];f[0]=(1-(ra+ia))*na;f[1]=(oa+ka)*
na;f[2]=(ba-ma)*na;f[3]=0;f[4]=(oa-ka)*sa;f[5]=(1-(u+ia))*sa;f[6]=(fa+ja)*sa;f[7]=0;f[8]=(ba+ma)*S;f[9]=(fa-ja)*S;f[10]=(1-(u+ra))*S;f[11]=0;f[12]=T[0];f[13]=T[1];f[14]=T[2];f[15]=1;return f}function a(f,u,T,S,ba){var fa=u[0],ia=u[1],ka=u[2],ja=u[3],ma=fa+fa,na=ia+ia,oa=ka+ka;u=fa*ma;var ra=fa*na,sa=fa*oa;fa=ia*na;ia*=oa;var ua=ka*oa;ka=ja*ma;na*=ja;const ta=ja*oa;var va=S[0],Fa=S[1];oa=S[2];S=ba[0];ja=ba[1];ba=ba[2];ma=(1-(fa+ua))*va;const wa=(ra+ta)*va;va*=sa-na;ra=(ra-ta)*Fa;ua=(1-(u+ua))*Fa;Fa*=
ia+ka;sa=(sa+na)*oa;ia=(ia-ka)*oa;u=(1-(u+fa))*oa;f[0]=ma;f[1]=wa;f[2]=va;f[3]=0;f[4]=ra;f[5]=ua;f[6]=Fa;f[7]=0;f[8]=sa;f[9]=ia;f[10]=u;f[11]=0;f[12]=T[0]+S-(ma*S+ra*ja+sa*ba);f[13]=T[1]+ja-(wa*S+ua*ja+ia*ba);f[14]=T[2]+ba-(va*S+Fa*ja+u*ba);f[15]=1;return f}function e(f,u){var T=u[0],S=u[1],ba=u[2];u=u[3];var fa=T+T,ia=S+S;const ka=ba+ba;T*=fa;const ja=S*fa;S*=ia;const ma=ba*fa,na=ba*ia;ba*=ka;fa*=u;ia*=u;u*=ka;f[0]=1-S-ba;f[1]=ja+u;f[2]=ma-ia;f[3]=0;f[4]=ja-u;f[5]=1-T-ba;f[6]=na+fa;f[7]=0;f[8]=ma+
ia;f[9]=na-fa;f[10]=1-T-S;f[11]=0;f[12]=0;f[13]=0;f[14]=0;f[15]=1;return f}function b(f,u,T,S,ba,fa,ia){const ka=1/(T-u),ja=1/(ba-S),ma=1/(fa-ia);f[0]=2*fa*ka;f[1]=0;f[2]=0;f[3]=0;f[4]=0;f[5]=2*fa*ja;f[6]=0;f[7]=0;f[8]=(T+u)*ka;f[9]=(ba+S)*ja;f[10]=(ia+fa)*ma;f[11]=-1;f[12]=0;f[13]=0;f[14]=ia*fa*2*ma;f[15]=0;return f}function d(f,u,T,S,ba){u=1/Math.tan(u/2);let fa=void 0;f[0]=u/T;f[1]=0;f[2]=0;f[3]=0;f[4]=0;f[5]=u;f[6]=0;f[7]=0;f[8]=0;f[9]=0;f[11]=-1;f[12]=0;f[13]=0;f[15]=0;null!=ba&&Infinity!==ba?
(fa=1/(S-ba),f[10]=(ba+S)*fa,f[14]=2*ba*S*fa):(f[10]=-1,f[14]=-2*S);return f}function v(f,u,T,S){const ba=Math.tan(u.upDegrees*Math.PI/180),fa=Math.tan(u.downDegrees*Math.PI/180),ia=Math.tan(u.leftDegrees*Math.PI/180);u=Math.tan(u.rightDegrees*Math.PI/180);const ka=2/(ia+u),ja=2/(ba+fa);f[0]=ka;f[1]=0;f[2]=0;f[3]=0;f[4]=0;f[5]=ja;f[6]=0;f[7]=0;f[8]=-((ia-u)*ka*.5);f[9]=(ba-fa)*ja*.5;f[10]=S/(T-S);f[11]=-1;f[12]=0;f[13]=0;f[14]=S*T/(T-S);f[15]=0;return f}function C(f,u,T,S,ba,fa,ia){const ka=1/(u-
T),ja=1/(S-ba),ma=1/(fa-ia);f[0]=-2*ka;f[1]=0;f[2]=0;f[3]=0;f[4]=0;f[5]=-2*ja;f[6]=0;f[7]=0;f[8]=0;f[9]=0;f[10]=2*ma;f[11]=0;f[12]=(u+T)*ka;f[13]=(ba+S)*ja;f[14]=(ia+fa)*ma;f[15]=1;return f}function H(f,u,T,S){let ba=void 0,fa=void 0;var ia=void 0,ka=void 0;let ja=void 0,ma=void 0;var na=void 0,oa=void 0;let ra=void 0,sa=void 0;const ua=u[0],ta=u[1];u=u[2];ia=S[0];ka=S[1];S=S[2];na=T[0];oa=T[1];T=T[2];if(Math.abs(ua-na)<L.EPSILON&&Math.abs(ta-oa)<L.EPSILON&&Math.abs(u-T)<L.EPSILON)return M(f);na=
ua-na;oa=ta-oa;ra=u-T;sa=1/Math.sqrt(na*na+oa*oa+ra*ra);na*=sa;oa*=sa;ra*=sa;ba=ka*ra-S*oa;fa=S*na-ia*ra;ia=ia*oa-ka*na;(sa=Math.sqrt(ba*ba+fa*fa+ia*ia))?(sa=1/sa,ba*=sa,fa*=sa,ia*=sa):ia=fa=ba=0;ka=oa*ia-ra*fa;ja=ra*ba-na*ia;ma=na*fa-oa*ba;(sa=Math.sqrt(ka*ka+ja*ja+ma*ma))?(sa=1/sa,ka*=sa,ja*=sa,ma*=sa):ma=ja=ka=0;f[0]=ba;f[1]=ka;f[2]=na;f[3]=0;f[4]=fa;f[5]=ja;f[6]=oa;f[7]=0;f[8]=ia;f[9]=ma;f[10]=ra;f[11]=0;f[12]=-(ba*ua+fa*ta+ia*u);f[13]=-(ka*ua+ja*ta+ma*u);f[14]=-(na*ua+oa*ta+ra*u);f[15]=1;return f}
function F(f,u,T,S){const ba=u[0],fa=u[1];u=u[2];var ia=S[0];const ka=S[1];var ja=S[2];S=ba-T[0];let ma=fa-T[1];T=u-T[2];let na=S*S+ma*ma+T*T;0<na&&(na=1/Math.sqrt(na),S*=na,ma*=na,T*=na);let oa=ka*T-ja*ma;ja=ja*S-ia*T;ia=ia*ma-ka*S;na=oa*oa+ja*ja+ia*ia;0<na&&(na=1/Math.sqrt(na),oa*=na,ja*=na,ia*=na);f[0]=oa;f[1]=ja;f[2]=ia;f[3]=0;f[4]=ma*ia-T*ja;f[5]=T*oa-S*ia;f[6]=S*ja-ma*oa;f[7]=0;f[8]=S;f[9]=ma;f[10]=T;f[11]=0;f[12]=ba;f[13]=fa;f[14]=u;f[15]=1;return f}function V(f){return"mat4("+f[0]+", "+f[1]+
", "+f[2]+", "+f[3]+", "+f[4]+", "+f[5]+", "+f[6]+", "+f[7]+", "+f[8]+", "+f[9]+", "+f[10]+", "+f[11]+", "+f[12]+", "+f[13]+", "+f[14]+", "+f[15]+")"}function O(f){return Math.sqrt(f[0]**2+f[1]**2+f[2]**2+f[3]**2+f[4]**2+f[5]**2+f[6]**2+f[7]**2+f[8]**2+f[9]**2+f[10]**2+f[11]**2+f[12]**2+f[13]**2+f[14]**2+f[15]**2)}function Q(f,u,T){f[0]=u[0]+T[0];f[1]=u[1]+T[1];f[2]=u[2]+T[2];f[3]=u[3]+T[3];f[4]=u[4]+T[4];f[5]=u[5]+T[5];f[6]=u[6]+T[6];f[7]=u[7]+T[7];f[8]=u[8]+T[8];f[9]=u[9]+T[9];f[10]=u[10]+T[10];
f[11]=u[11]+T[11];f[12]=u[12]+T[12];f[13]=u[13]+T[13];f[14]=u[14]+T[14];f[15]=u[15]+T[15];return f}function K(f,u,T){f[0]=u[0]-T[0];f[1]=u[1]-T[1];f[2]=u[2]-T[2];f[3]=u[3]-T[3];f[4]=u[4]-T[4];f[5]=u[5]-T[5];f[6]=u[6]-T[6];f[7]=u[7]-T[7];f[8]=u[8]-T[8];f[9]=u[9]-T[9];f[10]=u[10]-T[10];f[11]=u[11]-T[11];f[12]=u[12]-T[12];f[13]=u[13]-T[13];f[14]=u[14]-T[14];f[15]=u[15]-T[15];return f}function P(f,u,T){f[0]=u[0]*T;f[1]=u[1]*T;f[2]=u[2]*T;f[3]=u[3]*T;f[4]=u[4]*T;f[5]=u[5]*T;f[6]=u[6]*T;f[7]=u[7]*T;f[8]=
u[8]*T;f[9]=u[9]*T;f[10]=u[10]*T;f[11]=u[11]*T;f[12]=u[12]*T;f[13]=u[13]*T;f[14]=u[14]*T;f[15]=u[15]*T;return f}function Z(f,u,T,S){f[0]=u[0]+T[0]*S;f[1]=u[1]+T[1]*S;f[2]=u[2]+T[2]*S;f[3]=u[3]+T[3]*S;f[4]=u[4]+T[4]*S;f[5]=u[5]+T[5]*S;f[6]=u[6]+T[6]*S;f[7]=u[7]+T[7]*S;f[8]=u[8]+T[8]*S;f[9]=u[9]+T[9]*S;f[10]=u[10]+T[10]*S;f[11]=u[11]+T[11]*S;f[12]=u[12]+T[12]*S;f[13]=u[13]+T[13]*S;f[14]=u[14]+T[14]*S;f[15]=u[15]+T[15]*S;return f}function aa(f,u){return f[0]===u[0]&&f[1]===u[1]&&f[2]===u[2]&&f[3]===
u[3]&&f[4]===u[4]&&f[5]===u[5]&&f[6]===u[6]&&f[7]===u[7]&&f[8]===u[8]&&f[9]===u[9]&&f[10]===u[10]&&f[11]===u[11]&&f[12]===u[12]&&f[13]===u[13]&&f[14]===u[14]&&f[15]===u[15]}function ha(f,u){const T=f[0],S=f[1],ba=f[2],fa=f[3],ia=f[4],ka=f[5],ja=f[6],ma=f[7],na=f[8],oa=f[9],ra=f[10],sa=f[11],ua=f[12],ta=f[13],va=f[14];f=f[15];const Fa=u[0],wa=u[1],za=u[2],Aa=u[3],Ba=u[4],Ma=u[5],Ka=u[6],La=u[7],Pa=u[8],Na=u[9],Qa=u[10],Ga=u[11],Ea=u[12],Da=u[13],Ra=u[14];u=u[15];return Math.abs(T-Fa)<=L.EPSILON*Math.max(1,
Math.abs(T),Math.abs(Fa))&&Math.abs(S-wa)<=L.EPSILON*Math.max(1,Math.abs(S),Math.abs(wa))&&Math.abs(ba-za)<=L.EPSILON*Math.max(1,Math.abs(ba),Math.abs(za))&&Math.abs(fa-Aa)<=L.EPSILON*Math.max(1,Math.abs(fa),Math.abs(Aa))&&Math.abs(ia-Ba)<=L.EPSILON*Math.max(1,Math.abs(ia),Math.abs(Ba))&&Math.abs(ka-Ma)<=L.EPSILON*Math.max(1,Math.abs(ka),Math.abs(Ma))&&Math.abs(ja-Ka)<=L.EPSILON*Math.max(1,Math.abs(ja),Math.abs(Ka))&&Math.abs(ma-La)<=L.EPSILON*Math.max(1,Math.abs(ma),Math.abs(La))&&Math.abs(na-Pa)<=
L.EPSILON*Math.max(1,Math.abs(na),Math.abs(Pa))&&Math.abs(oa-Na)<=L.EPSILON*Math.max(1,Math.abs(oa),Math.abs(Na))&&Math.abs(ra-Qa)<=L.EPSILON*Math.max(1,Math.abs(ra),Math.abs(Qa))&&Math.abs(sa-Ga)<=L.EPSILON*Math.max(1,Math.abs(sa),Math.abs(Ga))&&Math.abs(ua-Ea)<=L.EPSILON*Math.max(1,Math.abs(ua),Math.abs(Ea))&&Math.abs(ta-Da)<=L.EPSILON*Math.max(1,Math.abs(ta),Math.abs(Da))&&Math.abs(va-Ra)<=L.EPSILON*Math.max(1,Math.abs(va),Math.abs(Ra))&&Math.abs(f-u)<=L.EPSILON*Math.max(1,Math.abs(f),Math.abs(u))}
const ea=n.create();n=Object.freeze({__proto__:null,copy:X,set:A,identity:M,transpose:N,invert:U,adjoint:W,determinant:I,multiply:z,translate:D,scale:r,rotate:k,rotateX:g,rotateY:m,rotateZ:p,fromTranslation:y,fromScaling:E,fromRotation:w,fromXRotation:q,fromYRotation:t,fromZRotation:B,fromRotationTranslation:J,fromQuat2:G,getTranslation:l,getScaling:h,getRotation:x,fromRotationTranslationScale:c,fromRotationTranslationScaleOrigin:a,fromQuat:e,frustum:b,perspective:d,perspectiveFromFieldOfView:v,ortho:C,
lookAt:H,targetTo:F,str:V,frob:O,add:Q,subtract:K,multiplyScalar:P,multiplyScalarAndAdd:Z,exactEquals:aa,equals:ha,mul:z,sub:K});R.add=Q;R.adjoint=W;R.copy=X;R.determinant=I;R.equals=ha;R.exactEquals=aa;R.frob=O;R.fromQuat=e;R.fromQuat2=G;R.fromRotation=w;R.fromRotationTranslation=J;R.fromRotationTranslationScale=c;R.fromRotationTranslationScaleOrigin=a;R.fromScaling=E;R.fromTranslation=y;R.fromXRotation=q;R.fromYRotation=t;R.fromZRotation=B;R.frustum=b;R.getRotation=x;R.getScaling=h;R.getTranslation=
l;R.identity=M;R.invert=U;R.lookAt=H;R.mat4=n;R.mul=z;R.multiply=z;R.multiplyScalar=P;R.multiplyScalarAndAdd=Z;R.ortho=C;R.perspective=d;R.perspectiveFromFieldOfView=v;R.rotate=k;R.rotateX=g;R.rotateY=m;R.rotateZ=p;R.scale=r;R.set=A;R.str=V;R.sub=K;R.subtract=K;R.targetTo=F;R.translate=D;R.transpose=N})},"esri/chunks/pe":function(){define(["require","exports","./_rollupPluginBabelHelpers","../core/has","../assets"],function(R,n,L,X,A){function M(){return!!n._pe}function N(){return!!X("esri-wasm")}
function U(){return k?k:k=(new Promise(function(m,p){R(["./pe-wasm"],m,p)})).then(function(m){return m.peWasm}).then(({default:m})=>m({locateFile:p=>A.getAssetUrl(`esri/geometry/support/${p}`)})).then(m=>{W(m)})}function W(m){function p(w,q,t){w[q]=t(w[q])}n._pe=m;n.PeDefs.init();n.PeGTlistExtended.init();n.PeNotationMgrs.init();n.PeNotationUtm.init();n.PePCSInfo.init();n.PeGCSExtent=function(w){function q(){return w.apply(this,arguments)||this}L._inheritsLoose(q,w);q.prototype.destroy=function(){n._pe.destroy(this)};
return q}(n._pe.PeGCSExtent);m=[n._pe.PeDatum,n._pe.PeGeogcs,n._pe.PeGeogtran,n._pe.PeObject,n._pe.PeParameter,n._pe.PePrimem,n._pe.PeProjcs,n._pe.PeSpheroid,n._pe.PeUnit];for(var y of m)p(y.prototype,"getName",w=>function(){return w.call(this,Array(n.PeDefs.PE_NAME_MAX))});for(const w of[n._pe.PeGeogtran,n._pe.PeProjcs])p(w.prototype,"getParameters",q=>function(){const t=Array(n.PeDefs.PE_PARM_MAX);let B=q.call(this);for(let J=0;J<t.length;J++){const G=n._pe.getValue(B,"*");t[J]=G?n._pe.wrapPointer(G,
n._pe.PeParameter):null;B+=Int32Array.BYTES_PER_ELEMENT}return t});p(n._pe.PeHorizon.prototype,"getCoord",w=>function(){const q=this.getSize();if(!q)return null;const t=[],B=w.call(this);r(t,q,B);return t});p(n._pe.PeGTlistExtendedEntry.prototype,"getEntries",w=>{const q=n._pe._pe_getPeGTlistExtendedGTsSize();return function(){let t=null;var B=w.call(this);if(!n._pe.compare(B,n._pe.NULL)){t=[B];const J=this.getSteps();if(1<J){B=n._pe.getPointer(B);for(let G=1;G<J;G++)t.push(n._pe.wrapPointer(B+q*
G,n._pe.PeGTlistExtendedGTs))}}return t}});const E=n._pe._pe_getPeHorizonSize();y=w=>function(){let q=this._cache;q||(this._cache=q=new Map);if(q.has(w))return q.get(w);let t=null;var B=w.call(this);if(!n._pe.compare(B,n._pe.NULL)){t=[B];const J=B.getNump();if(1<J){B=n._pe.getPointer(B);for(let G=1;G<J;G++)t.push(n._pe.wrapPointer(B+E*G,n._pe.PeHorizon))}}q.set(w,t);return t};p(n._pe.PeProjcs.prototype,"horizonGcsGenerate",y);p(n._pe.PeProjcs.prototype,"horizonPcsGenerate",y);n._pe.PeObject.prototype.toString=
function(w=n.PeDefs.PE_STR_OPTS_NONE){n._pe.ensureCache.prepare();const q=n._pe.getPointer(this),t=n._pe.ensureInt8(Array(n.PeDefs.PE_BUFFER_MAX));return n._pe.UTF8ToString(n._pe._pe_object_to_string_ext(q,w,t))}}function I(m){if(m){var p=n._pe.getClass(m);p&&(p=n._pe.getCache(p))&&(m=n._pe.getPointer(m))&&delete p[m]}}function z(m,p){const y=[];p=Array(p);for(let E=0;E<m;E++)y.push(n._pe.ensureInt8(p));return y}function D(m){let p;Array.isArray(m[0])?(p=[],m.forEach(y=>{p.push(y[0],y[1])})):p=m;
return p}function r(m,p,y,E=!1){if(E)for(E=0;E<2*p;E++)m[E]=n._pe.getValue(y+E*Float64Array.BYTES_PER_ELEMENT,"double");else{E=0===m.length;for(let w=0;w<p;w++)E&&(m[w]=Array(2)),m[w][0]=n._pe.getValue(y,"double"),m[w][1]=n._pe.getValue(y+Float64Array.BYTES_PER_ELEMENT,"double"),y+=2*Float64Array.BYTES_PER_ELEMENT}}let k;n._pe=null;(function(m){function p(w,q,t){n._pe.ensureCache.prepare();var B=D(t);const J=t===B;B=n._pe.ensureFloat64(B);(w=n._pe._pe_geog_to_proj(n._pe.getPointer(w),q,B))&&r(t,q,
B,J);return w}function y(w,q,t){return E(w,q,t,0)}function E(w,q,t,B){n._pe.ensureCache.prepare();var J=D(t);const G=t===J;J=n._pe.ensureFloat64(J);(w=n._pe._pe_proj_to_geog_center(n._pe.getPointer(w),q,J,B))&&r(t,q,J,G);return w}m.geogToProj=p;m.projGeog=function(w,q,t,B){switch(B){case n.PeDefs.PE_TRANSFORM_P_TO_G:return y(w,q,t);case n.PeDefs.PE_TRANSFORM_G_TO_P:return p(w,q,t)}return 0};m.projToGeog=y;m.projToGeogCenter=E})(n.PeCSTransformations||(n.PeCSTransformations={}));(function(m){m.init=
function(){m.PE_BUFFER_MAX=n._pe.PeDefs.prototype.PE_BUFFER_MAX;m.PE_NAME_MAX=n._pe.PeDefs.prototype.PE_NAME_MAX;m.PE_MGRS_MAX=n._pe.PeDefs.prototype.PE_MGRS_MAX;m.PE_USNG_MAX=n._pe.PeDefs.prototype.PE_USNG_MAX;m.PE_DD_MAX=n._pe.PeDefs.prototype.PE_DD_MAX;m.PE_DDM_MAX=n._pe.PeDefs.prototype.PE_DDM_MAX;m.PE_DMS_MAX=n._pe.PeDefs.prototype.PE_DMS_MAX;m.PE_UTM_MAX=n._pe.PeDefs.prototype.PE_UTM_MAX;m.PE_PARM_MAX=n._pe.PeDefs.prototype.PE_PARM_MAX;m.PE_TYPE_NONE=n._pe.PeDefs.prototype.PE_TYPE_NONE;m.PE_TYPE_GEOGCS=
n._pe.PeDefs.prototype.PE_TYPE_GEOGCS;m.PE_TYPE_PROJCS=n._pe.PeDefs.prototype.PE_TYPE_PROJCS;m.PE_TYPE_GEOGTRAN=n._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;m.PE_TYPE_COORDSYS=n._pe.PeDefs.prototype.PE_TYPE_COORDSYS;m.PE_TYPE_UNIT=n._pe.PeDefs.prototype.PE_TYPE_UNIT;m.PE_TYPE_LINUNIT=n._pe.PeDefs.prototype.PE_TYPE_LINUNIT;m.PE_STR_OPTS_NONE=n._pe.PeDefs.prototype.PE_STR_OPTS_NONE;m.PE_STR_AUTH_NONE=n._pe.PeDefs.prototype.PE_STR_AUTH_NONE;m.PE_STR_AUTH_TOP=n._pe.PeDefs.prototype.PE_STR_AUTH_TOP;m.PE_STR_NAME_CANON=
n._pe.PeDefs.prototype.PE_STR_NAME_CANON;m.PE_PARM_X0=n._pe.PeDefs.prototype.PE_PARM_X0;m.PE_PARM_ND=n._pe.PeDefs.prototype.PE_PARM_ND;m.PE_TRANSFORM_1_TO_2=n._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;m.PE_TRANSFORM_2_TO_1=n._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;m.PE_TRANSFORM_P_TO_G=n._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;m.PE_TRANSFORM_G_TO_P=n._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;m.PE_HORIZON_RECT=n._pe.PeDefs.prototype.PE_HORIZON_RECT;m.PE_HORIZON_POLY=n._pe.PeDefs.prototype.PE_HORIZON_POLY;
m.PE_HORIZON_LINE=n._pe.PeDefs.prototype.PE_HORIZON_LINE;m.PE_HORIZON_DELTA=n._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(n.PeDefs||(n.PeDefs={}));(function(m){function p(q,t){let B=null,J=y[q];J||(J={},y[q]=J);J.hasOwnProperty(String(t))?B=J[t]:(q=n._pe.PeFactory.prototype.factoryByType(q,t),n._pe.compare(q,n._pe.NULL)||(B=q,J[t]=B));return B=w(B)}const y={},E={},w=q=>{if(q){const t=q.getType();switch(t){case n.PeDefs.PE_TYPE_GEOGCS:q=n._pe.castObject(q,n._pe.PeGeogcs);break;case n.PeDefs.PE_TYPE_PROJCS:q=
n._pe.castObject(q,n._pe.PeProjcs);break;case n.PeDefs.PE_TYPE_GEOGTRAN:q=n._pe.castObject(q,n._pe.PeGeogtran);break;default:t&n.PeDefs.PE_TYPE_UNIT&&(q=n._pe.castObject(q,n._pe.PeUnit))}}return q};m.initialize=function(){n._pe.PeFactory.prototype.initialize(null)};m.coordsys=function(q){return p(n.PeDefs.PE_TYPE_COORDSYS,q)};m.factoryByType=p;m.fromString=function(q,t){let B=null,J=E[q];J||(J={},E[q]=J);J.hasOwnProperty(t)?B=J[t]:(q=n._pe.PeFactory.prototype.fromString(q,t),n._pe.compare(q,n._pe.NULL)||
(B=q,J[t]=B));return B=w(B)};m.geogcs=function(q){return p(n.PeDefs.PE_TYPE_GEOGCS,q)};m.geogtran=function(q){return p(n.PeDefs.PE_TYPE_GEOGTRAN,q)};m.getCode=function(q){return n._pe.PeFactory.prototype.getCode(q)};m.projcs=function(q){return p(n.PeDefs.PE_TYPE_PROJCS,q)};m.unit=function(q){return p(n.PeDefs.PE_TYPE_UNIT,q)}})(n.PeFactory||(n.PeFactory={}));n.PeGCSExtent=null;(function(m){let p;m.init=function(){m.PE_GTLIST_OPTS_COMMON=n._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;p=n._pe._pe_getPeGTlistExtendedEntrySize()};
m.getGTlist=function(y,E,w,q,t,B){let J=null;const G=new n._pe.PeInteger(B);try{const l=n._pe.PeGTlistExtended.prototype.getGTlist(y,E,w,q,t,G);if(B=G.val)if(J=[l],1<B){const h=n._pe.getPointer(l);for(y=1;y<B;y++)J.push(n._pe.wrapPointer(h+p*y,n._pe.PeGTlistExtendedEntry))}}finally{n._pe.destroy(G)}return J}})(n.PeGTlistExtended||(n.PeGTlistExtended={}));(function(m){m.destroy=function(p){if(p&&p.length){for(const y of p)I(y),y.getEntries().forEach(E=>{I(E);E=E.getGeogtran();I(E);E.getParameters().forEach(I);
[E.getGeogcs1(),E.getGeogcs2()].forEach(w=>{I(w);const q=w.getDatum();I(q);I(q.getSpheroid());I(w.getPrimem());I(w.getUnit())})});n._pe.PeGTlistExtendedEntry.prototype.Delete(p[0])}}})(n.PeGTlistExtendedEntry||(n.PeGTlistExtendedEntry={}));(function(m){m.geogToGeog=function(p,y,E,w,q){n._pe.ensureCache.prepare();var t=D(E);const B=E===t;t=n._pe.ensureFloat64(t);let J=0;w&&(J=n._pe.ensureFloat64(w));(p=n._pe._pe_geog_to_geog(n._pe.getPointer(p),y,t,J,q))&&r(E,y,t,B);return p}})(n.PeGTTransformations||
(n.PeGTTransformations={}));(function(m){const p=(E,w,q,t,B,J)=>{n._pe.ensureCache.prepare();switch(E){case "dd":var G=n._pe._pe_geog_to_dd;var l=n.PeDefs.PE_DD_MAX;break;case "ddm":G=n._pe._pe_geog_to_ddm;l=n.PeDefs.PE_DDM_MAX;break;case "dms":G=n._pe._pe_geog_to_dms,l=n.PeDefs.PE_DMS_MAX}E=0;w&&(E=n._pe.getPointer(w));w=D(t);w=n._pe.ensureFloat64(w);l=z(q,l);t=n._pe.ensureInt32(l);if(B=G(E,q,w,B,t))for(G=0;G<q;G++)J[G]=n._pe.UTF8ToString(l[G]);return B},y=(E,w,q,t,B)=>{n._pe.ensureCache.prepare();
switch(E){case "dd":var J=n._pe._pe_dd_to_geog;break;case "ddm":J=n._pe._pe_ddm_to_geog;break;case "dms":J=n._pe._pe_dms_to_geog}E=0;w&&(E=n._pe.getPointer(w));w=t.map(G=>n._pe.ensureString(G));t=n._pe.ensureInt32(w);w=n._pe.ensureFloat64(Array(2*q));(J=J(E,q,t,w))&&r(B,q,w);return J};m.geog_to_dms=function(E,w,q,t,B){return p("dms",E,w,q,t,B)};m.dms_to_geog=function(E,w,q,t){return y("dms",E,w,q,t)};m.geog_to_ddm=function(E,w,q,t,B){return p("ddm",E,w,q,t,B)};m.ddm_to_geog=function(E,w,q,t){return y("ddm",
E,w,q,t)};m.geog_to_dd=function(E,w,q,t,B){return p("dd",E,w,q,t,B)};m.dd_to_geog=function(E,w,q,t){return y("dd",E,w,q,t)}})(n.PeNotationDms||(n.PeNotationDms={}));(function(m){m.init=function(){m.PE_MGRS_STYLE_NEW=n._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;m.PE_MGRS_STYLE_OLD=n._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;m.PE_MGRS_STYLE_AUTO=n._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;m.PE_MGRS_180_ZONE_1_PLUS=n._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;m.PE_MGRS_ADD_SPACES=
n._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};m.geog_to_mgrs_extended=function(p,y,E,w,q,t,B){n._pe.ensureCache.prepare();let J=0;p&&(J=n._pe.getPointer(p));p=D(E);E=n._pe.ensureFloat64(p);p=z(y,n.PeDefs.PE_MGRS_MAX);const G=n._pe.ensureInt32(p);if(w=n._pe._pe_geog_to_mgrs_extended(J,y,E,w,q,t,G))for(q=0;q<y;q++)B[q]=n._pe.UTF8ToString(p[q]);return w};m.mgrs_to_geog_extended=function(p,y,E,w,q){n._pe.ensureCache.prepare();let t=0;p&&(t=n._pe.getPointer(p));p=E.map(B=>n._pe.ensureString(B));E=
n._pe.ensureInt32(p);p=n._pe.ensureFloat64(Array(2*y));(w=n._pe._pe_mgrs_to_geog_extended(t,y,E,w,p))&&r(q,y,p);return w}})(n.PeNotationMgrs||(n.PeNotationMgrs={}));(function(m){m.geog_to_usng=function(p,y,E,w,q,t,B){n._pe.ensureCache.prepare();let J=0;p&&(J=n._pe.getPointer(p));p=D(E);E=n._pe.ensureFloat64(p);p=z(y,n.PeDefs.PE_MGRS_MAX);const G=n._pe.ensureInt32(p);if(w=n._pe._pe_geog_to_usng(J,y,E,w,q,t,G))for(q=0;q<y;q++)B[q]=n._pe.UTF8ToString(p[q]);return w};m.usng_to_geog=function(p,y,E,w){n._pe.ensureCache.prepare();
var q=0;p&&(q=n._pe.getPointer(p));p=E.map(t=>n._pe.ensureString(t));E=n._pe.ensureInt32(p);p=n._pe.ensureFloat64(Array(2*y));(q=n._pe._pe_usng_to_geog(q,y,E,p))&&r(w,y,p);return q}})(n.PeNotationUsng||(n.PeNotationUsng={}));(function(m){m.init=function(){m.PE_UTM_OPTS_NONE=n._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;m.PE_UTM_OPTS_ADD_SPACES=n._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;m.PE_UTM_OPTS_NS=n._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};m.geog_to_utm=function(p,y,E,w,q){n._pe.ensureCache.prepare();
var t=0;p&&(t=n._pe.getPointer(p));p=D(E);E=n._pe.ensureFloat64(p);p=z(y,n.PeDefs.PE_UTM_MAX);const B=n._pe.ensureInt32(p);if(w=n._pe._pe_geog_to_utm(t,y,E,w,B))for(t=0;t<y;t++)q[t]=n._pe.UTF8ToString(p[t]);return w};m.utm_to_geog=function(p,y,E,w,q){n._pe.ensureCache.prepare();let t=0;p&&(t=n._pe.getPointer(p));p=E.map(B=>n._pe.ensureString(B));E=n._pe.ensureInt32(p);p=n._pe.ensureFloat64(Array(2*y));(w=n._pe._pe_utm_to_geog(t,y,E,w,p))&&r(q,y,p);return w}})(n.PeNotationUtm||(n.PeNotationUtm={}));
(function(m){const p=new Map;m.init=function(){m.PE_PCSINFO_OPTION_NONE=n._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;m.PE_PCSINFO_OPTION_DOMAIN=n._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;m.PE_POLE_OUTSIDE_BOUNDARY=n._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;m.PE_POLE_POINT=n._pe.PePCSInfo.prototype.PE_POLE_POINT};m.generate=function(y,E=m.PE_PCSINFO_OPTION_DOMAIN){let w,q;p.has(y)&&(q=p.get(y),q[E]&&(w=q[E]));w||(w=n._pe.PePCSInfo.prototype.generate(y,E),q||(q=[],p.set(y,q)),q[E]=
w);return w}})(n.PePCSInfo||(n.PePCSInfo={}));(function(m){m.version_string=function(){return n._pe.PeVersion.prototype.version_string()}})(n.PeVersion||(n.PeVersion={}));var g=Object.freeze({__proto__:null,get _pe(){return n._pe},isLoaded:M,isSupported:N,load:U,get PeCSTransformations(){return n.PeCSTransformations},get PeDefs(){return n.PeDefs},get PeFactory(){return n.PeFactory},get PeGCSExtent(){return n.PeGCSExtent},get PeGTlistExtended(){return n.PeGTlistExtended},get PeGTlistExtendedEntry(){return n.PeGTlistExtendedEntry},
get PeGTTransformations(){return n.PeGTTransformations},get PeNotationDms(){return n.PeNotationDms},get PeNotationMgrs(){return n.PeNotationMgrs},get PeNotationUsng(){return n.PeNotationUsng},get PeNotationUtm(){return n.PeNotationUtm},get PePCSInfo(){return n.PePCSInfo},get PeVersion(){return n.PeVersion},_init:W});n._init=W;n.isLoaded=M;n.isSupported=N;n.load=U;n.pe=g})},"esri/geometry/support/geodesicConstants":function(){define(["exports","./Ellipsoid"],function(R,n){const L=Math.PI/180;var X=
n.earth.radius;const A=n.earth.eccentricitySquared;X={a1:X*A,a2:X*A*X*A,a3:X*A*A/2,a4:X*A*X*A*2.5,a5:X*A+X*A*A/2,a6:1-A};n={4326:{a:n.earth.radius,f:n.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,f:0},104902:{a:6051800,f:0},104903:{a:n.moon.radius,f:n.moon.flattening},104904:{a:3393400,f:.005207166853303471},104905:{a:n.mars.radius,f:n.mars.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1E4,
f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},104914:{a:4E4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,f:3},104922:{a:18E3,f:0},104923:{a:14E3,f:0},104924:{a:49300,f:0},104925:{a:60268E3,f:.09796243445941462},104926:{a:16E3,f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,f:0},
104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,f:0},104938:{a:11E4,f:0},104939:{a:50100,f:0},104940:{a:764E3,f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},104945:{a:578900,f:0},104946:{a:33E3,f:0},104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,f:0},104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},104958:{a:788900,
f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},104961:{a:74E3,f:0},104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,f:0},104968:{a:1352600,f:0},104969:{a:1195E3,f:0},104970:{a:593E3,f:0},104971:{a:n.mars.radius,f:0},104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};R.WKT_SPHEROID_REGEX=/SPHEROID\[([^\]]+)]/i;R.earthEllipsoidConstants=X;R.spheroids=n;R.toRadians=L;Object.defineProperty(R,
"__esModule",{value:!0})})},"esri/geometry/support/GeographicTransformation":function(){define(["./GeographicTransformationStep"],function(R){return function(){function n(X){this.steps=[];this._cached_projection={};this._chain="";this._gtlistentry=null;if(X&&X.steps)for(const A of X.steps)A instanceof R?this.steps.push(A):this.steps.push(new R({wkid:A.wkid,wkt:A.wkt,isInverse:A.isInverse}))}n.cacheKey=function(X,A){return[void 0!==X.wkid&&null!==X.wkid?X.wkid.toString():"-1",void 0!==X.wkt&&null!==
X.wkt?X.wkt.toString():"",void 0!==A.wkid&&null!==A.wkid?A.wkid.toString():"-1",void 0!==A.wkt&&null!==A.wkt?A.wkt.toString():""].join()};n.fromGE=function(X){const A=new n;let M="";for(const N of X.steps)X=R.fromGE(N),A.steps.push(X),M+=X.uid.toString()+",";A._cached_projection={};A._gtlistentry=null;A._chain=M;return A};var L=n.prototype;L.getInverse=function(){const X=new n;X.steps=[];for(let A=this.steps.length-1;0<=A;A--)X.steps.push(this.steps[A].getInverse());return X};L.getGTListEntry=function(){let X=
"";for(const A of this.steps)X+=A.uid.toString()+",";X!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=X);return this._gtlistentry};L.assignCachedGe=function(X,A,M){this._cached_projection[n.cacheKey(X,A)]=M};L.getCachedGeTransformation=function(X,A){let M="";for(const N of this.steps)M+=N.uid.toString()+",";M!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=M);X=this._cached_projection[n.cacheKey(X,A)];return void 0===X?null:X};return n}()})},
"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(R){let n=0;return function(){function L(X=null){this.uid=n++;X?(this._wkt=void 0!==X.wkt?X.wkt:null,this._wkid=void 0!==X.wkid?X.wkid:-1,this._isInverse=void 0!==X.isInverse?!0===X.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}L.fromGE=function(X){const A=new L;A._wkt=X.wkt;A._wkid=X.wkid;A._isInverse=X.isInverse;return A};L.prototype.getInverse=function(){const X=
new L;X._wkt=this.wkt;X._wkid=this._wkid;X._isInverse=!this.isInverse;return X};R._createClass(L,[{key:"wkt",get:function(){return this._wkt},set:function(X){this._wkt=X;this.uid=n++}},{key:"wkid",get:function(){return this._wkid},set:function(X){this._wkid=X;this.uid=n++}},{key:"isInverse",get:function(){return this._isInverse},set:function(X){this._isInverse=X;this.uid=n++}}]);return L}()})},"esri/layers/support/rasterDatasets/RawBlockCache":function(){define("exports ../../../core/maybe ../../../geometry/Point ../../../geometry ./EphemeralBlockCache ../rasterFunctions/rasterProjectionHelper".split(" "),
function(R,n,L,X,A,M){function N(I,z){if(!U.has(I))return null;I=U.get(I);return null==I[z]?null:I[z]}const U=new Map,W=new A;R.decreaseRefCount=function(I,z,D){if(!U.has(I))return null==z?W.decreaseRefCount(I,D):0;const r=U.get(I);if(null==r[z])return W.decreaseRefCount(I,D);z=r[z].cache;if(z.has(D)){I=z.get(D);I.refCount--;if(0===I.refCount){z.delete(D);for(z=0;z<r.length;z++)r[z]&&r[z].cache.has(D)&&r[z].cache.delete(D);I.controller&&I.controller.abort()}return I.refCount}return 0};R.deleteBlock=
function(I,z,D){if(U.has(I)){var r=U.get(I);null==r[z]?W.deleteBlock(I,D):r[z].cache.delete(D)}else null==z&&W.deleteBlock(I,D)};R.deleteRaster=function(I){U.delete(I)};R.getBlock=function(I,z,D){if(!U.has(I))return null==z?W.getBlock(I,D):null;var r=U.get(I);if(null==r[z]){for(z=0;z<r.length;z++)if(r[z]&&r[z].cache.has(D))return D=r[z].cache.get(D),D.refCount++,D.block;return W.getBlock(I,D)}I=r[z].cache;if(I.has(D))return D=I.get(D),D.refCount++,D.block;for(let k=0;k<r.length;k++)if(k!==z&&r[k]&&
r[k]&&r[k].cache.has(D))return r=r[k].cache.get(D),r.refCount++,I.set(D,r),r.block;return null};R.getRasterId=function(I,z){return null==z?I:`${I}?sliceId=${z}`};R.putBlock=function(I,z,D,r,k=null){if(U.has(I)){var g=U.get(I);if(null==g[z])W.putBlock(I,D,r,k);else{var m={refCount:1,block:r,isResolved:!1,isRejected:!1,controller:k};r.then(()=>m.isResolved=!0).catch(()=>m.isRejected=!0);g[z].cache.set(D,m)}}else null==z&&W.putBlock(I,D,r,k)};R.register=function(I,z){z={extent:null,rasterInfo:z,cache:new Map};
if(U.has(I))return I=U.get(I),I.push(z),I.length-1;U.set(I,[z]);return 0};R.unregister=function(I,z){if(U.has(I)){const D=U.get(I);D[z]=null;D.some(r=>null!=r)||U.delete(I)}};R.update=function(I,z,D,r,k,g,m=null){I=N(I,z);z=I.extent;const {cache:p,rasterInfo:y}=I;if(!z||z.xmin!==D.xmin||z.xmax!==D.xmax||z.ymin!==D.ymin||z.ymax!==D.ymax){z=D.clone().normalize();var {spatialReference:E,transform:w}=y,q=new Set;for(let h=0;h<z.length;h++){var t=z[h];if(t.xmax-t.xmin<=r||t.ymax-t.ymin<=r)continue;var B=
M.projectExtent(t,E,m);n.isSome(w)&&(B=w.inverseTransform(B));var J=new L({x:r,y:r,spatialReference:t.spatialReference});if(null==k&&(k=M.projectResolution(J,E,t,m),!k))return;const {pyramidLevel:x,pyramidResolution:c,excessiveReading:a}=M.snapPyramid(k,y,g||"closest");if(a)return;({storageInfo:t}=y);var {origin:G}=t;J=Math.max(0,Math.floor((B.xmin-G.x)/c.x));G=Math.max(0,Math.floor((G.y-B.ymax)/c.y));const e=0<x?t.pyramidBlockWidth:t.blockWidth,b=0<x?t.pyramidBlockHeight:t.blockHeight;t=Math.max(0,
Math.floor(J/e)-1);var l=Math.max(0,Math.floor(G/b)-1);J=Math.floor((J+Math.ceil((B.xmax-B.xmin)/c.x-.1)-1)/e)+1;B=Math.floor((G+Math.ceil((B.ymax-B.ymin)/c.y-.1)-1)/b)+1;for(G=l;G<=B;G++)for(l=t;l<=J;l++)q.add(`${x}/${G}/${l}`)}p.forEach((h,x)=>{q.has(x)||(h=p.get(x),(null==h||h.isResolved||h.isRejected)&&p.delete(x))});I.extent={xmin:D.xmin,ymin:D.ymin,xmax:D.xmax,ymax:D.ymax}}};Object.defineProperty(R,"__esModule",{value:!0})})},"esri/layers/support/rasterDatasets/EphemeralBlockCache":function(){define(function(){return function(){function R(L=
15E3,X=5E3){this._timer=null;this._cachedBlocks=new Map;this._size=-1;this._duration=L;this._interval=Math.min(L,X)}var n=R.prototype;n.decreaseRefCount=function(L,X){L=L+"/"+X;X=this._cachedBlocks;if(X.has(L)){const A=X.get(L);A.refCount--;0>=A.refCount&&(X.delete(L),A.controller&&A.controller.abort());return A.refCount}return 0};n.getBlock=function(L,X){L=L+"/"+X;X=this._cachedBlocks;if(X.has(L)){const A=X.get(L);A.ts=Date.now();A.refCount++;X.delete(L);X.set(L,A);return A.block}return null};n.putBlock=
function(L,X,A,M=null){const N=this._cachedBlocks;L=L+"/"+X;N.has(L)?(A=N.get(L),A.ts=Date.now(),A.refCount++):N.set(L,{block:A,ts:Date.now(),refCount:1,controller:M});this.trim();this.updateTimer()};n.deleteBlock=function(L,X){const A=this._cachedBlocks;L=L+"/"+X;A.has(L)&&A.delete(L)};n.updateMaxSize=function(L){this._size=L;this.trim()};n.empty=function(){this._cachedBlocks.clear();this.clearTimer()};n.getCurrentSize=function(){return this._cachedBlocks.size};n.updateTimer=function(){if(null==
this._timer){var L=this._cachedBlocks;this._timer=setInterval(()=>{const X=Array.from(L),A=Date.now();for(let M=0;M<X.length;M++)if(X[M][1].ts<=A-this._duration)L.delete(X[M][0]);else break;0===L.size&&this.clearTimer()},this._interval)}};n.trim=function(){const L=this._cachedBlocks;if(!(-1===this._size||this._size>=L.size)){var X=Array.from(L);for(let A=0;A<X.length-this._size;A++)L.delete(X[A][0])}};n.clearTimer=function(){null!=this._timer&&(clearInterval(this._timer),this._timer=null)};return R}()})},
"esri/layers/support/rasterDatasets/DBFParser":function(){define(["../../../chunks/_rollupPluginBabelHelpers","./byteStreamUtils"],function(R,n){function L(X){var A=X.fields;X=X.records;const M=A.some(z=>"oid"===z.name.toLowerCase())?"OBJECTID":"OID";A=[{name:M,type:"esriFieldTypeOID",alias:"OID"}].concat(A.map(z=>({name:z.name,type:"esriFieldType"+z.typeName,alias:z.name})));const N=A.map(z=>z.name),U=[];let W=0,I=0;X.forEach(z=>{const D={};D[M]=W++;for(I=1;I<N.length;I++)D[N[I]]=z[I-1];U.push({attributes:D})});
return{displayFieldName:"",fields:A,features:U}}return function(){function X(){}X.parse=function(A){var M=new DataView(A),N=M.getUint8(0)&3;if(3!==N)return{header:{version:N},recordSet:null};const U=M.getUint32(4,!0);var W=M.getUint16(8,!0);const I=M.getUint16(10,!0);W={version:N,recordCount:U,headerByteCount:W,recordByteCount:I};let z=32;const D=[],r=[];if(3===N){for(;13!==M.getUint8(z);)N=String.fromCharCode(M.getUint8(z+11)).trim(),D.push({name:n.bytesToUTF8(new Uint8Array(A,z,11)),type:N,typeName:"String Date Double Boolean String Integer".split(" ")["CDFLMN".split("").indexOf(N)],
length:M.getUint8(z+16)}),z+=32;z+=1;if(0<D.length)for(;r.length<U&&A.byteLength-z>I;){const k=[];32===M.getUint8(z)?(z+=1,D.forEach(g=>{if("C"===g.type)k.push(n.bytesToUTF8(new Uint8Array(A,z,g.length)).trim());else if("N"===g.type)k.push(parseInt(String.fromCharCode.apply(null,new Uint8Array(A,z,g.length)).trim(),10));else if("F"===g.type)k.push(parseFloat(String.fromCharCode.apply(null,new Uint8Array(A,z,g.length)).trim()));else if("D"===g.type){const m=String.fromCharCode.apply(null,new Uint8Array(A,
z,g.length)).trim();k.push(new Date(parseInt(m.substring(0,4),10),parseInt(m.substring(4,6),10)-1,parseInt(m.substring(6,8),10)))}z+=g.length}),r.push(k)):z+=I}}M=L({fields:D,records:r});return{header:W,fields:D,records:r,recordSet:M}};R._createClass(X,null,[{key:"supportedVersions",get:function(){return[5]}}]);return X}()})},"esri/layers/support/rasterTransforms/utils":function(){define(["exports","./IdentityTransform","./PolynomialTransform"],function(R,n,L){const X={PolynomialXform:L,IdentityXform:n},
A=Object.keys(X);R.isTransformSupported=function(M){const N=null==M?void 0:M.type;return!M||A.includes(N)};R.readTransform=function(M){if(null==M||!M.type)return null;var N=X[null==M?void 0:M.type];return N?(N=new N,N.read(M),N):null};Object.defineProperty(R,"__esModule",{value:!0})})},"esri/layers/support/rasterTransforms/IdentityTransform":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../../core/JSONSupport".split(" "),
function(R,n,L,X,A,M,N,U,W,I,z,D){L=function(r){function k(){var m=r.apply(this,arguments)||this;m.type="identity";return m}R._inheritsLoose(k,r);var g=k.prototype;g.forwardTransform=function(m){return m};g.inverseTransform=function(m){return m};return k}(D.JSONSupport);n.__decorate([M.property({json:{write:!0}})],L.prototype,"spatialReference",void 0);n.__decorate([N.enumeration({IdentityXform:"identity"})],L.prototype,"type",void 0);return L=n.__decorate([U.subclass("esri.layers.support.rasterTransforms.IdentityTransform")],
L)})},"esri/layers/support/rasterTransforms/PolynomialTransform":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/reader ../../../core/accessorSupport/decorators/subclass ../../../core/accessorSupport/decorators/writer ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../../core/JSONSupport ../../../geometry/Point ../../../geometry/Extent ../../../geometry".split(" "),
function(R,n,L,X,A,M,N,U,W,I,z,D,r,k,g,m,p){function y(w,q,t){const {x:B,y:J}=q;if(2>t)return{x:w[0]+B*w[2]+J*w[4],y:w[1]+B*w[3]+J*w[5]};if(2===t){q=B*B;t=J*J;var G=B*J;return{x:w[0]+B*w[2]+J*w[4]+q*w[6]+G*w[8]+t*w[10],y:w[1]+B*w[3]+J*w[5]+q*w[7]+G*w[9]+t*w[11]}}q=B*B;t=J*J;G=B*J;const l=q*B,h=q*J,x=B*t,c=J*t;return{x:w[0]+B*w[2]+J*w[4]+q*w[6]+G*w[8]+t*w[10]+l*w[12]+h*w[14]+x*w[16]+c*w[18],y:w[1]+B*w[3]+J*w[5]+q*w[7]+G*w[9]+t*w[11]+l*w[13]+h*w[15]+x*w[17]+c*w[19]}}function E(w,q,t){const {xmin:B,
ymin:J,xmax:G,ymax:l,spatialReference:h}=q;q=[];if(2>t)q.push({x:B,y:l}),q.push({x:G,y:l}),q.push({x:B,y:J}),q.push({x:G,y:J});else{var x=10;for(var c=0;c<x;c++)q.push({x:B,y:J+(l-J)*c/(x-1)}),q.push({x:G,y:J+(l-J)*c/(x-1)});x=8;for(c=1;c<=x;c++)q.push({x:B+(G-B)*c/x,y:J}),q.push({x:B+(G-B)*c/x,y:l})}q=q.map(a=>y(w,a,t));x=q.map(a=>a.x);q=q.map(a=>a.y);return new m({xmin:Math.min.apply(null,x),xmax:Math.max.apply(null,x),ymin:Math.min.apply(null,q),ymax:Math.max.apply(null,q),spatialReference:h})}
L=function(w){function q(){var B=w.apply(this,arguments)||this;B.polynomialOrder=1;B.type="polynomial";return B}R._inheritsLoose(q,w);var t=q.prototype;t.readForwardCoefficients=function(B,J){const {coeffX:G,coeffY:l}=J;if(null==G||!G.length||null==l||!l.length||G.length!==l.length)return null;B=[];for(J=0;J<G.length;J++)B.push(G[J]),B.push(l[J]);return B};t.writeForwardCoefficients=function(B,J,G){G=[];const l=[];for(let h=0;h<(null==B?void 0:B.length);h++)0===h%2?G.push(B[h]):l.push(B[h]);J.coeffX=
G;J.coeffY=l};t.readInverseCoefficients=function(B,J){const {inverseCoeffX:G,inverseCoeffY:l}=J;if(null==G||!G.length||null==l||!l.length||G.length!==l.length)return null;B=[];for(J=0;J<G.length;J++)B.push(G[J]),B.push(l[J]);return B};t.writeInverseCoefficients=function(B,J,G){G=[];const l=[];for(let h=0;h<(null==B?void 0:B.length);h++)0===h%2?G.push(B[h]):l.push(B[h]);J.inverseCoeffX=G;J.inverseCoeffY=l};t.forwardTransform=function(B){if("point"===B.type){const J=y(this.forwardCoefficients,B,this.polynomialOrder);
return new g({x:J.x,y:J.y,spatialReference:B.spatialReference})}return E(this.forwardCoefficients,B,this.polynomialOrder)};t.inverseTransform=function(B){if("point"===B.type){const J=y(this.inverseCoefficients,B,this.polynomialOrder);return new g({x:J.x,y:J.y,spatialReference:B.spatialReference})}return E(this.inverseCoefficients,B,this.polynomialOrder)};R._createClass(q,[{key:"inverseCoefficients",get:function(){var B=this._get("inverseCoefficients"),J=this._get("forwardCoefficients");if(!B&&J&&
2>this.polynomialOrder){{const [G,l,h,x,c,a]=J;B=h*a-c*x;J=c*x-h*a;B=[(c*l-G*a)/B,(h*l-G*x)/J,a/B,x/J,-c/B,-h/J]}}return B},set:function(B){this._set("inverseCoefficients",B)}}]);return q}(k.JSONSupport);n.__decorate([M.property({json:{write:!0}})],L.prototype,"polynomialOrder",void 0);n.__decorate([M.property()],L.prototype,"forwardCoefficients",void 0);n.__decorate([U.reader("forwardCoefficients",["coeffX","coeffY"])],L.prototype,"readForwardCoefficients",null);n.__decorate([I.writer("forwardCoefficients")],
L.prototype,"writeForwardCoefficients",null);n.__decorate([M.property({json:{write:!0}})],L.prototype,"inverseCoefficients",null);n.__decorate([U.reader("inverseCoefficients",["inverseCoeffX","inverseCoeffY"])],L.prototype,"readInverseCoefficients",null);n.__decorate([I.writer("inverseCoefficients")],L.prototype,"writeInverseCoefficients",null);n.__decorate([M.property({json:{write:!0}})],L.prototype,"spatialReference",void 0);n.__decorate([N.enumeration({PolynomialXform:"polynomial"})],L.prototype,
"type",void 0);return L=n.__decorate([W.subclass("esri.layers.support.rasterTransforms.PolynomialTransform")],L)})},"esri/layers/support/rasterDatasets/ImageAuxRaster":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/maybe ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../core/Error ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../../core/promiseUtils ../../../geometry/SpatialReference ../../../geometry/Extent ../../../geometry ../rasterFormats/RasterCodec ../rasterFunctions/pixelUtils ./BaseRaster ../rasterTransforms/PolynomialTransform ./InMemoryRaster ./pamParser".split(" "),
function(R,n,L,X,A,M,N,U,W,I,z,D,r,k,g,m,p,y,E,w,q,t,B){L=function(J){function G(){return J.apply(this,arguments)||this}R._inheritsLoose(G,J);var l=G.prototype;l.open=async function(h){await this.init();var x=await this._fetchData(h);let {spatialReference:c,statistics:a,histograms:e,transform:b}=await this._fetchAuxiliaryData(h);(h=!c)&&(c=new g({wkid:3857}));null!=e&&e.length&&null==a&&(a=E.estimateStatisticsFromHistograms(e));const {width:d,height:v}=x;let C=new m({xmin:-.5,ymin:.5-v,xmax:d-.5,
ymax:.5,spatialReference:c});const H=b?b.forwardTransform(C):C;var F=!0;b&&(F=(F=b.forwardCoefficients)&&0===F[1]&&0===F[2])&&(b=null,C=H);x=new t({data:{extent:H,nativeExtent:C,transform:b,pixelBlock:x,statistics:a,histograms:e,keyProperties:{DateType:"Processed"},isPseudoSpatialReference:h}});await x.open();this._set("rasterInfo",x.rasterInfo);this._inMemoryRaster=x};l.fetchRawTile=function(h,x,c,a={}){return this._inMemoryRaster.fetchRawTile(h,x,c,a)};l._fetchData=async function(h){({data:h}=await this.request(this.url,
{responseType:"array-buffer",signal:null==h?void 0:h.signal}));const x=y.getFormat(h).toUpperCase();if("JPG"===x||"PNG"===x||"GIF"===x||"BMP"===x)this._set("datasetFormat",x);else throw new I("image-aux-raster:open","the data is not a supported format");return await this.decodePixelBlock(h,{format:"jpg",width:1,height:1,useCanvas:!0})};l._fetchAuxiliaryData=async function(h){var x,c;h=X.unwrap(null==h?void 0:h.signal);var a=null!=(x=this.ioConfig.skipExtensions)?x:[];x=-1<a.indexOf("aux.xml")?null:
this.request(this.url+".aux.xml",{responseType:"xml",signal:h});var e=this.datasetFormat;e="JPG"===e?"jgw":"PNG"===e?"pgw":"BMP"===e?"bpw":null;a=-1<a.indexOf(e)?null:this.request(this.url.slice(0,this.url.lastIndexOf("."))+"."+e,{responseType:"text",signal:h});a=await k.eachAlways([x,a]);if(null!=h&&h.aborted)throw k.createAbortError();h=B.parsePAMInfo(null==(c=a[0].value)?void 0:c.data);h.transform||(c=a[1].value?a[1].value.data.split("\n").slice(0,6).map(b=>Number(b)):null,h.transform=6===(null==
c?void 0:c.length)?new q({forwardCoefficients:[c[4],c[5],c[0],-c[1],c[2],-c[3]]}):null);return h};return G}(w);n.__decorate([N.property({type:String,json:{write:!0}})],L.prototype,"datasetFormat",void 0);return L=n.__decorate([W.subclass("esri.layers.support.rasterDatasets.ImageAuxRaster")],L)})},"esri/layers/support/rasterDatasets/InMemoryRaster":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/maybe ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../core/Error ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../../core/promiseUtils ../../../geometry/SpatialReference ../../../geometry/Extent ../../../geometry ../RasterInfo ../rasterFunctions/pixelUtils ./BaseRaster".split(" "),
function(R,n,L,X,A,M,N,U,W,I,z,D,r,k,g,m,p,y,E,w){L=function(q){function t(){var J=q.apply(this,arguments)||this;J.datasetFormat="MEMORY";return J}R._inheritsLoose(t,q);var B=t.prototype;B.open=async function(J){var G;await this.init();const {pixelBlock:l,statistics:h,histograms:x,name:c,keyProperties:a,nativeExtent:e,transform:b}=this.data,{width:d,height:v,pixelType:C}=l,H=this.data.extent||new m({xmin:-.5,ymin:.5,xmax:d-.5,ymax:v-.5,spatialReference:new g({wkid:3857})}),F=null!=(G=this.data.isPseudoSpatialReference)?
G:!this.data.extent;G=new y({width:d,height:v,pixelType:C,extent:H,nativeExtent:e,transform:b,pixelSize:{x:H.width/d,y:H.height/v},spatialReference:H.spatialReference,bandCount:3,keyProperties:a||{},statistics:h,isPseudoSpatialReference:F,histograms:x});this.createRemoteDatasetStorageInfo(G,512,512);this._set("rasterInfo",G);this.updateTileInfo();await this._buildInMemoryRaster(l,{width:512,height:512},J);this.datasetName=c;this.url="/InMemory/"+c};B.fetchRawTile=function(J,G,l,h){J=this._pixelBlockTiles.get(`${J}/${G}/${l}`);
return Promise.resolve(J)};B._buildInMemoryRaster=async function(J,G,l){var h=this.rasterInfo.storageInfo.maximumPyramidLevel;const x=this.rasterJobHandler?this.rasterJobHandler.split({pixelBlock:J,tileSize:G,maximumPyramidLevel:h},l):Promise.resolve(E.split(J,G,h));G=X.isSome(this.rasterInfo.statistics);h=X.isSome(this.rasterInfo.histograms);J=G&&h?Promise.resolve({statistics:null,histograms:null}):this.rasterJobHandler?this.rasterJobHandler.estimateStatisticsHistograms({pixelBlock:J},l):Promise.resolve(E.estimateStatisticsHistograms(J));
J=await k.eachAlways([x,J]);if(!J[0].value&&J[1].value)throw new I("inmemory-raster:open","failed to build in memory raster");this._pixelBlockTiles=J[0].value;if(!G){var c;this.rasterInfo.statistics=null==(c=J[1].value)?void 0:c.statistics}if(h){var a;this.rasterInfo.histograms=null==(a=J[1].value)?void 0:a.histograms}};return t}(w);n.__decorate([N.property({type:String,json:{write:!0}})],L.prototype,"datasetFormat",void 0);n.__decorate([N.property()],L.prototype,"data",void 0);return L=n.__decorate([W.subclass("esri.layers.support.rasterDatasets.InMemoryRaster")],
L)})},"esri/layers/support/rasterDatasets/pamParser":function(){define(["exports","../../../geometry/SpatialReference","../../../geometry","../rasterTransforms/PolynomialTransform","./xmlUtilities"],function(R,n,L,X,A){function M(I,z){if(!I||!z)return null;const D=[];for(let r=0;r<I.length;r++)D.push(I[r]),D.push(z[r]);return D}function N(I){var z,D=A.getElement(I,"GeodataXform");I=A.getElementNumericValue(D,"SpatialReference/WKID")||A.getElementValue(D,"SpatialReference/WKT");I=W(I);if("typens:PolynomialXform"!==
D.getAttribute("xsi:type"))return{spatialReference:I,transform:null};var r=null!=(z=A.getElementNumericValue(D,"PolynomialOrder"))?z:1,k=A.getElementNumericValues(D,"CoeffX/Double");const g=A.getElementNumericValues(D,"CoeffY/Double");z=A.getElementNumericValues(D,"InverseCoeffX/Double");D=A.getElementNumericValues(D,"InverseCoeffY/Double");k=M(k,g);D=M(z,D);r=new X({spatialReference:I,polynomialOrder:r,forwardCoefficients:k,inverseCoefficients:D});return{spatialReference:I,transform:r}}function U(I){var z;
const D=A.getElementNumericValue(I,"NoDataValue");var r=A.getElement(I,"Histograms/HistItem");const k=A.getElementNumericValue(r,"HistMin"),g=A.getElementNumericValue(r,"HistMax"),m=A.getElementNumericValue(r,"BucketCount");r=null==(z=A.getElementValue(r,"HistCounts"))?void 0:z.split("|").map(q=>Number(q));let p,y,E,w;A.getElements(I,"Metadata/MDI").forEach(q=>{var t;const B=Number(null!=(t=q.textContent)?t:q.nodeValue);switch(q.getAttribute("key").toUpperCase()){case "STATISTICS_MINIMUM":p=B;break;
case "STATISTICS_MAXIMUM":y=B;break;case "STATISTICS_MEAN":E=B;break;case "STATISTICS_STDDEV":w=B}});I=A.getElementNumericValue(I,"Metadata/SourceBandIndex");return{noDataValue:D,histogram:null!=r&&r.length&&null!=p&&null!=y?{min:k,max:g,size:m||r.length,counts:r}:null,sourceBandIndex:I,statistics:null!=p&&null!=y?{min:p,max:y,avg:E,stddev:w}:null}}function W(I){if(!I)return null;var z=Number(I);if(!isNaN(z)&&0!==z)return new n({wkid:z});I=String(I);if(!I.startsWith("GEOGCS")&&!I.startsWith("PROJCS"))return null;
z=I.replace(/\]/g,"[").replace(/"/g,"").split("[").map(D=>D.trim()).filter(D=>""!==D);z=z[z.length-1].split(",");return"EPSG"===z[0]&&I.endsWith('"]]')&&(z=Number(z[1]),!isNaN(z)&&0!==z)?new n({wkid:z}):new n({wkt:I})}R.parsePAMInfo=function(I){var z;if("pamdataset"!==(null==I?void 0:null==(z=I.documentElement.tagName)?void 0:z.toLowerCase()))return{};const D={spatialReference:null,transform:null,metadata:{},rasterBands:[],statistics:null,histograms:null};I.documentElement.childNodes.forEach(r=>{if(1===
r.nodeType)if(A.isSameTagIgnoreNS(r,"SRS"))D.spatialReference||(r=A.getElementValue(r),D.spatialReference=W(r));else if(A.isSameTagIgnoreNS(r,"Metadata"))if("xml:ESRI"===r.getAttribute("domain")){const {spatialReference:k,transform:g}=N(r);D.transform=g;D.spatialReference||(D.spatialReference=k)}else A.getElements(r,"MDI").forEach(k=>D.metadata[k.getAttribute("key")]=A.getElementValue(k));else A.isSameTagIgnoreNS(r,"PAMRasterBand")&&(r=U(r),null!=r.sourceBandIndex&&null==D.rasterBands[r.sourceBandIndex]?
D.rasterBands[r.sourceBandIndex]=r:D.rasterBands.push(r))});if(I=D.rasterBands)D.statistics=I[0].statistics?I.map(r=>r.statistics):null,D.histograms=I[0].histogram?I.map(r=>r.histogram):null;return D};R.parseSpatialReference=W;Object.defineProperty(R,"__esModule",{value:!0})})},"esri/layers/support/rasterDatasets/xmlUtilities":function(){define(["exports"],function(R){function n(M,N){if(!M||!N)return[];var U=N;-1<N.indexOf("/")?(U=N.slice(0,N.indexOf("/")),N=N.slice(N.indexOf("/")+1)):N="";const W=
[];if(N){M=n(M,U);for(U=0;U<M.length;U++)n(M[U],N).forEach(I=>W.push(I));return W}N=M.getElementsByTagNameNS("*",U);if(!N||0===N.length)return[];for(M=0;M<N.length;M++)W.push(N[M]||N.item[M]);return W}function L(M,N){if(!M||!N)return null;let U=N;-1<N.indexOf("/")?(U=N.slice(0,N.indexOf("/")),N=N.slice(N.indexOf("/")+1)):N="";M=n(M,U);return 0<M.length?N?L(M[0],N):M[0]:null}function X(M,N=null){if(M=N?L(M,N):M)if(M=M.textContent||M.nodeValue)return M.trim();return null}function A(M,N){M=n(M,N);N=
[];let U;for(let W=0;W<M.length;W++)if(U=M[W].textContent||M[W].nodeValue)U=U.trim(),""!==U&&N.push(U);return N}R.getElement=L;R.getElementNumericValue=function(M,N){M=X(M,N);return Number(M)};R.getElementNumericValues=function(M,N){return A(M,N).map(U=>Number(U))};R.getElementValue=X;R.getElementValues=A;R.getElements=n;R.getNodeNameIgnoreNS=function(M){return M.nodeName.slice(M.nodeName.lastIndexOf(":")+1)};R.getSpaceDelimitedNumericValues=function(M,N=null){M=X(M,N);return null==M?void 0:M.split(" ").map(U=>
Number(U))};R.isSameTagIgnoreNS=function(M,N){var U;M=null==M?void 0:null==(U=M.nodeName)?void 0:U.toLowerCase();N=N.toLowerCase();return M.slice(M.lastIndexOf(":")+1)===N};Object.defineProperty(R,"__esModule",{value:!0})})},"esri/layers/support/rasterDatasets/ImageServerRaster":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/maybe ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../core/Error ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../../geometry/SpatialReference ../../../geometry/Point ../../../geometry/Extent ../../../geometry ../../../tasks/support/FeatureSet ../TileInfo ../serviceTileInfoProperty ../TilemapCache ../RasterInfo ../rasterFunctions/pixelUtils ../RasterStorageInfo ./BaseRaster".split(" "),
function(R,n,L,X,A,M,N,U,W,I,z,D,r,k,g,m,p,y,E,w,q,t,B,J,G){L=function(l){function h(){var c=l.apply(this,arguments)||this;c._levelOffset=0;c._slices=null;c._tilemapCache=null;c.datasetFormat="RasterTileServer";return c}R._inheritsLoose(h,l);var x=h.prototype;x.open=async function(c){await this.init();c=c&&c.signal;var a=this.sourceJSON?{data:this.sourceJSON}:await this.request(this.url,{query:{f:"json"},signal:c});a.ssl&&(this.url=this.url.replace(/^http:/i,"https:"));const e=a.data;this.sourceJSON=
e;if(!e)throw new I("imageserverraster:open","cannot initialize tiled image service, missing service info");if(!e.tileInfo)throw new I("imageserverraster:open","use ImageryLayer to open non-tiled image services");this._fixScaleInServiceInfo();a="jpg jpeg png png8 png24 png32 mixed".split(" ");this.tileType=e.cacheType;null==this.tileType&&(-1<a.indexOf(e.tileInfo.format.toLowerCase())?this.tileType="Map":"lerc"===e.tileInfo.format.toLowerCase()?this.tileType="Elevation":this.tileType="Raster");this.datasetName=
e.name.slice(e.name.indexOf("/")+1);c=await this._fetchRasterInfo({signal:c});if(X.isSome(c)){a="Map"===this.tileType?w.readServiceTileInfo(e.tileInfo,e):E.fromJSON(e.tileInfo);const {extent:C,pixelSize:H}=c,F=.5/c.width*H.x;var b,d=a.lodAt(Math.max.apply(null,a.lods.map(Z=>Z.level)));"Map"!==this.tileType&&0!==e.maxScale&&("Raster"===this.tileType?(b=a.lods.filter(Z=>Z.resolution===H.x)[0])||(b=a.lods[a.lods.length-1]):(b=a.lods.filter(Z=>Math.abs(Z.scale-e.maxScale)<F)[0])||(b=a.lods.filter(Z=>
Z.scale>e.maxScale).sort((Z,aa)=>Z.scale>aa.scale?1:-1)[0]),H.x=H.y=b.resolution,c.width=Math.ceil((C.xmax-C.xmin)/H.x-.1),c.height=Math.ceil((C.ymax-C.ymin)/H.y-.1));b||(b=d);d=a.lodAt(Math.min.apply(null,a.lods.map(Z=>Z.level)));if("Map"===this.tileType)this._levelOffset=a.lods[0].level;else if(0!==e.minScale&&"Elevation"===this.tileType){var v=a.lods.filter(Z=>Math.abs(Z.scale-e.minScale)<F)[0];this._levelOffset=v.level-d.level}v||(v=d);const V=Math.max(H.x,H.y);if(Math.abs(H.x-H.y)>F||!a.lods.some(Z=>
Math.abs(Z.resolution-V)<F))H.x=H.y=b.resolution,c.width=Math.ceil((C.xmax-C.xmin)/H.x-.1),c.height=Math.ceil((C.ymax-C.ymin)/H.y-.1);b=b.level-v.level;const [O,Q]=a.size;v=a.origin;let {x:K,y:P}=H;d=[{minCol:Math.floor((C.xmin-v.x+.1*K)/O/K),maxCol:Math.floor((C.xmax-v.x-.1*K)/O/K),minRow:Math.floor((v.y-C.ymax+.1*P)/Q/P),maxRow:Math.floor((v.y-C.ymin-.1*P)/Q/P)}];if(0<b)for(let Z=0;Z<b;Z++)K*=2,P*=2,d.push({minCol:Math.floor((C.xmin-v.x+.1*K)/O/K),maxCol:Math.floor((C.xmax-v.x-.1*K)/O/K),minRow:Math.floor((v.y-
C.ymax+.1*P)/Q/K),maxRow:Math.floor((v.y-C.ymin-.1*P)/Q/K)});c.storageInfo=new J({blockWidth:a.size[0],blockHeight:a.size[1],pyramidBlockWidth:a.size[0],pyramidBlockHeight:a.size[1],compression:a.format,origin:a.origin,firstPyramidLevel:1,maximumPyramidLevel:b,tileInfo:a,blockBoundary:d});this._set("rasterInfo",c)}else throw new I("image-server-raster:open","cannot initialize image service");-1<e.capabilities.toLowerCase().indexOf("tilemap")&&(c={tileInfo:c.storageInfo.tileInfo,parsedUrl:z.urlToObject(this.url),
url:this.url,tileServers:[],type:"tile"},this._tilemapCache=new q.TilemapCache({layer:c}))};x.fetchRawTile=async function(c,a,e,b={}){const {storageInfo:d,extent:v,pixelSize:C}=this.rasterInfo;({data:b}=await this.request(`${this.url}/tile/${d.maximumPyramidLevel-c+this._levelOffset}/${a}/${e}`,{query:this._slices?{sliceId:b.sliceId||0}:null,responseType:"array-buffer",signal:b.signal}));if(!b)return null;b=await this.decodePixelBlock(b,{width:d.tileInfo.size[0],height:d.tileInfo.size[1],planes:null,
pixelType:null,isPoint:"Elevation"===this.tileType});const H=d.blockBoundary[c];if("jpg"!==d.compression||e>H.minCol&&e<H.maxCol&&a>H.minRow&&a<H.maxRow)return b;const {origin:F,blockWidth:V,blockHeight:O}=d;var Q=2**c,K=Math.round((v.xmin-F.x)/(C.x*Q))%V;c=Math.round((v.xmax-F.x)/(C.x*Q))%V;var P=Math.round((F.y-v.ymax)/(C.x*Q))%O;Q=Math.round((F.y-v.ymin)/(C.x*Q))%O;K=e===H.minCol?K:0;P=a===H.minRow?P:0;B.setValidBoundary(b,{x:K,y:P},{width:(e===H.maxCol?c:V)-K,height:(a===H.maxRow?Q:O)-P});return b};
x.getSliceIndex=function(c){if(null==c||!c.length||!this._slices)return null;for(let a=0;a<this._slices.length;a++){const e=this._slices[a].multidimensionalDefinition;if(e.length===c.length&&!e.some(b=>{var d=c.filter(C=>b.variableName===C.variableName&&C.dimensionName===b.dimensionName)[0];if(!d)return!0;const v=Array.isArray(b.values[0])?b.values[0][0]:b.values[0];d=Array.isArray(d.values[0])?d.values[0][0]:d.values[0];return v!==d}))return a}return null};x.fetchVariableStatisticsHistograms=async function(c,
a){var e=this.request(this.url+"/statistics",{query:{variable:c,f:"json"},signal:a}).then(b=>{var d;return null==(d=b.data)?void 0:d.statistics});c=this.request(this.url+"/histograms",{query:{variable:c,f:"json"},signal:a}).then(b=>{var d;return null==(d=b.data)?void 0:d.histograms});e=await Promise.all([e,c]);e[0]&&e[0].forEach(b=>{b.avg=b.mean;b.stddev=b.standardDeviation});return{statistics:e[0]||null,histograms:e[1]||null}};x.computeBestPyramidLevelForLocation=async function(c,a={}){if(!this._tilemapCache)return 0;
c=this.identifyPixelLocation(c,0,X.unwrap(a.datumTransformation));if(null===c)return null;let e=0;var {maximumPyramidLevel:b}=this.rasterInfo.storageInfo;b=b-e+this._levelOffset;const d=c.srcLocation;for(;0<=b;){try{if("available"===await this._tilemapCache.fetchAvailability(b,c.row,c.col,a))break}catch{}b--;e++;c=this.identifyPixelLocation(d,e,X.unwrap(a.datumTransformation));if(null===c)return null}return-1===b||null==c?null:e};x._fetchRasterInfo=async function(c){const a=this.sourceJSON,e=Math.ceil((a.extent.xmax-
a.extent.xmin)/a.pixelSizeX-.1),b=Math.ceil((a.extent.ymax-a.extent.ymin)/a.pixelSizeY-.1),d=k.fromJSON(a.spatialReference||a.extent.spatialReference);if("Map"===this.tileType)return new t({width:e,height:b,bandCount:3,extent:m.fromJSON(a.extent),spatialReference:d,pixelSize:new g({x:a.pixelSizeX,y:a.pixelSizeY,spatialReference:d}),pixelType:"u8",statistics:null,keyProperties:{DataType:"processed"}});const {slice:v,signal:C}=c;c=a.hasRasterAttributeTable?this.request(this.url+"/rasterAttributeTable",
{query:{slice:v,f:"json"},signal:C}).then(K=>y.fromJSON(K.data)).catch(()=>null):!1;const H=a.hasColormap?this.request(this.url+"/colormap",{query:{slice:v,f:"json"},signal:C}).then(K=>{var P;return null==(P=K.data)?void 0:P.colormap}):!1,F=a.hasHistograms?this.request(this.url+"/histograms",{query:{slice:v,f:"json"},signal:C}).then(K=>{var P;return null==(P=K.data)?void 0:P.histograms}):!1,V=this.request(this.url+"/keyProperties",{query:{f:"json"},signal:C}).then(K=>K.data).catch(()=>{}),O=a.hasMultidimensions?
this._fetchMultidimensionalInfo():!1,Q=a.hasMultidimensions?this.request(this.url+"/slices",{query:{f:"json"},signal:C}).then(K=>K.data&&K.data.slices).catch(()=>{}):!1;return Promise.all([c,H,F,V,O,Q]).then(K=>{let P=null;if(a.minValues&&a.minValues.length===a.bandCount){P=[];for(let Z=0;Z<a.minValues.length;Z++)P.push({min:a.minValues[Z],max:a.maxValues[Z],avg:a.meanValues[Z],stddev:a.stdvValues[Z]})}this._slices=K[5]||null;return new t({width:e,height:b,bandCount:a.bandCount,extent:m.fromJSON(a.extent),
spatialReference:d,pixelSize:new g({x:a.pixelSizeX,y:a.pixelSizeY,spatialReference:d}),pixelType:a.pixelType.toLowerCase(),statistics:P,attributeTable:K[0]||null,colormap:K[1]||null,histograms:K[2]||null,keyProperties:K[3]||{},multidimensionalInfo:K[4]||null})})};x._fetchMultidimensionalInfo=async function(c){var a;c=await this.request(this.url+"/multidimensionalInfo",{query:{f:"json"},signal:c}).then(e=>{var b;return null==(b=e.data)?void 0:b.multidimensionalInfo});null!=(a=c.variables)&&a.length&&
c.variables.forEach(e=>{var b;null!=(b=e.statistics)&&b.length&&e.statistics.forEach(d=>{d.avg=d.mean;d.stddev=d.standardDeviation})});return c};x._fixScaleInServiceInfo=function(){const {sourceJSON:c}=this;c.minScale&&0>c.minScale&&(c.minScale=0);c.maxScale&&0>c.maxScale&&(c.maxScale=0)};return h}(G);n.__decorate([N.property({type:String,json:{write:!0}})],L.prototype,"datasetFormat",void 0);n.__decorate([N.property()],L.prototype,"tileType",void 0);return L=n.__decorate([W.subclass("esri.layers.support.rasterDatasets.ImageServerRaster")],
L)})},"esri/layers/support/serviceTileInfoProperty":function(){define(["exports","./TileInfo"],function(R,n){function L(A,M,N,U){if(!A)return null;const {minScale:W,maxScale:I,minLOD:z,maxLOD:D}=M;if(null!=z&&null!=D)return U&&U.ignoreMinMaxLOD?n.fromJSON(A):n.fromJSON({...A,lods:A.lods.filter(({level:r})=>null!=r&&r>=z&&r<=D)});if(0!==W&&0!==I){const r=W?Math.round(1E4*W)/1E4:Infinity,k=I?Math.round(1E4*I)/1E4:-Infinity;return n.fromJSON({...A,lods:A.lods.filter(g=>{g=Math.round(1E4*g.scale)/1E4;
return g<=r&&g>=k})})}return n.fromJSON(A)}const X={type:n,json:{origins:{service:{read:{source:["tileInfo","minScale","maxScale","minLOD","maxLOD"],reader:L}}}}};R.readServiceTileInfo=L;R.serviceTileInfoProperty=X;Object.defineProperty(R,"__esModule",{value:!0})})},"esri/layers/support/TilemapCache":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/Error ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/PooledArray ../../core/promiseUtils ../../core/scheduling ../../core/Accessor ../../request ../../core/Handles ../../core/LRUCache ../../core/watchUtils ./Tilemap".split(" "),
function(R,n,L,X,A,M,N,U,W,I,z,D,r,k,g,m,p,y,E,w,q,t){var B;const J=A.getLogger("esri.layers.support.TilemapCache");R.TilemapCache=B=function(G){function l(x){x=G.call(this,x)||this;x._handles=new E;x._pendingTilemapRequests={};x._availableLevels={};x.levels=5;x.cacheByteSize=2097152;x.request=y;x._prefetchingEnabled=!0;return x}n._inheritsLoose(l,G);var h=l.prototype;h.initialize=function(){this._tilemapCache=new w(this.cacheByteSize);this._handles.add([this.watch(["layer.parsedUrl","layer.tileServers?"],
()=>this._initializeTilemapDefinition()),q.init(this,"layer.tileInfo.lods",x=>this._initializeAvailableLevels(x),!0)]);this._initializeTilemapDefinition()};h.destroy=function(){this._handles&&(this._handles.destroy(),this._handles=null)};h.castLevels=function(x){return 2>=x?(J.error("Minimum levels for Tilemap is 3, but got ",x),3):x};h.fetchTilemap=function(x,c,a,e){if(!this._availableLevels[x])return Promise.reject(new I("tilemap-cache:level-unavailable",`Level ${x} is unavailable in the service`));
const b=this._tmpTilemapDefinition;if(x=this._tilemapFromCache(x,c,a,b))return Promise.resolve(x);const d=e&&e.signal;e={...e,signal:null};return new Promise((v,C)=>{g.onAbort(d,()=>C(g.createAbortError()));const H=t.tilemapDefinitionId(b);let F=this._pendingTilemapRequests[H];if(!F){F=t.Tilemap.fromDefinition(b,e).then(O=>{this._tilemapCache.put(H,O,O.byteSize);return O});const V=()=>delete this._pendingTilemapRequests[H];this._pendingTilemapRequests[H]=F;F.then(V,V)}F.then(v,C)})};h.getAvailability=
function(x,c,a){return this._availableLevels[x]?(x=this._tilemapFromCache(x,c,a,this._tmpTilemapDefinition))?x.getAvailability(c,a):"unknown":"unavailable"};h.getAvailabilityUpsample=function(x,c,a,e){e.level=x;e.row=c;e.col=a;x=this.layer.tileInfo;for(x.updateTileInfo(e);;)if(c=this.getAvailability(e.level,e.row,e.col),"unavailable"===c){if(!x.upsampleTile(e))return"unavailable"}else return c};h.fetchAvailability=function(x,c,a,e){return this._availableLevels[x]?this.fetchTilemap(x,c,a,e).catch(b=>
b).then(b=>{if(b instanceof t.Tilemap)return b=b.getAvailability(c,a),"unavailable"===b?Promise.reject(new I("tile-map:tile-unavailable","Tile is not available",{level:x,row:c,col:a})):b;if(g.isAbortError(b))throw b;return"unknown"}):Promise.reject(new I("tilemap-cache:level-unavailable",`Level ${x} is unavailable in the service`))};h.fetchAvailabilityUpsample=function(x,c,a,e,b){e.level=x;e.row=c;e.col=a;const d=this.layer.tileInfo;d.updateTileInfo(e);const v=this.fetchAvailability(x,c,a,b).catch(C=>
{if(g.isAbortError(C))throw C;if(d.upsampleTile(e))return this.fetchAvailabilityUpsample(e.level,e.row,e.col,e);throw C;});this._fetchAvailabilityUpsamplePrefetch(e.id,x,c,a,b,v);return v};h._fetchAvailabilityUpsamplePrefetch=async function(x,c,a,e,b,d){if(this._prefetchingEnabled){var v=`prefetch-${x}`;if(!this._handles.has(v)){var C=g.createAbortController();d.then(()=>C.abort(),()=>C.abort());var H=!1;this._handles.add({remove(){H||(H=!0,C.abort())}},v);await m.waitTicks(10,C.signal).catch(()=>
{});H||(H=!0,this._handles.remove(v));if(!g.isAborted(C))for(x={id:x,level:c,row:a,col:e},b={...b,signal:C.signal},c=this.layer.tileInfo,a=0;B._prefetches.length<B._maxPrefetch&&c.upsampleTile(x);++a){const F=this.fetchAvailability(x.level,x.row,x.col,b);B._prefetches.push(F);e=()=>{B._prefetches.removeUnordered(F)};F.then(e,e)}}}};h._initializeTilemapDefinition=function(){if(this.layer.parsedUrl){var x=this.layer.parsedUrl,c=x.query;this._tilemapCache.clear();this._tmpTilemapDefinition={service:{url:x.path,
query:c?z.objectToQuery(c):null,tileServers:this.layer.tileServers,request:this.request,type:this.layer.type},width:this.size,height:this.size,level:0,row:0,col:0}}};h._tilemapFromCache=function(x,c,a,e){e.level=x;e.row=c-c%this.size;e.col=a-a%this.size;x=t.tilemapDefinitionId(e);return this._tilemapCache.get(x)};h._initializeAvailableLevels=function(x){this._availableLevels={};x&&x.forEach(c=>this._availableLevels[c.level]=!0)};n._createClass(l,[{key:"size",get:function(){return 1<<this.levels}},
{key:"test",get:function(){const x=this;return{get prefetchingEnabled(){return x._prefetchingEnabled},set prefetchingEnabled(c){x._prefetchingEnabled=c},hasTilemap(c,a,e){return!!x._tilemapFromCache(c,a,e,x._tmpTilemapDefinition)}}}}]);return l}(p);R.TilemapCache._maxPrefetch=4;R.TilemapCache._prefetches=new k({initialSize:B._maxPrefetch});L.__decorate([M.property({constructOnly:!0,type:Number})],R.TilemapCache.prototype,"levels",void 0);L.__decorate([N.cast("levels")],R.TilemapCache.prototype,"castLevels",
null);L.__decorate([M.property({readOnly:!0,type:Number})],R.TilemapCache.prototype,"size",null);L.__decorate([M.property({constructOnly:!0,type:Number})],R.TilemapCache.prototype,"cacheByteSize",void 0);L.__decorate([M.property({constructOnly:!0})],R.TilemapCache.prototype,"layer",void 0);L.__decorate([M.property({constructOnly:!0})],R.TilemapCache.prototype,"request",void 0);R.TilemapCache=B=L.__decorate([W.subclass("esri.layers.support.TilemapCache")],R.TilemapCache);Object.defineProperty(R,"__esModule",
{value:!0})})},"esri/layers/support/Tilemap":function(){define(["exports","../../core/lang","../../core/Error","../../core/arrayUtils","../../request"],function(R,n,L,X,A){function M(U){if("vector-tile"===U.service.type)var W=`${U.service.url}/tilemap/${U.level}/${U.row}/${U.col}/${U.width}/${U.height}`;else W=U.service.tileServers,W=`${W&&W.length?W[U.row%W.length]:U.service.url}/tilemap/${U.level}/${U.row}/${U.col}/${U.width}/${U.height}`;(U=U.service.query)&&(W=`${W}?${U}`);return W}let N=function(){function U(){this.location=
{left:0,top:0,width:0,height:0};this._allAvailability="unknown";this.byteSize=40}var W=U.prototype;W.getAvailability=function(I,z){if("unknown"!==this._allAvailability)return this._allAvailability;I=(I-this.location.top)*this.location.width+(z-this.location.left);z=I>>3;const D=this._tileAvailabilityBitSet;return 0>z||z>D.length?"unknown":D[z]&1<<I%8?"available":"unavailable"};W._updateFromData=function(I){let z=!0,D=!0;const r=new Uint8Array(Math.ceil(this.location.width*this.location.height/8));
let k=0;for(let g=0;g<I.length;g++){const m=g%8;I[g]?(D=!1,r[k]|=1<<m):z=!1;7===m&&++k}D?this._allAvailability="unavailable":z?this._allAvailability="available":(this._allAvailability="unknown",this._tileAvailabilityBitSet=r,this.byteSize+=r.length)};U.fromDefinition=function(I,z){const D=I.service.request||A,{row:r,col:k,width:g,height:m}=I,p={query:{f:"json"}};z=z?{...p,...z}:p;return D(M(I),z).then(y=>y.data).catch(y=>{if(y&&y.details&&422===y.details.httpStatus)return{location:{top:r,left:k,width:g,
height:m},valid:!0,data:X.constant(g*m,0)};throw y;}).then(y=>{if(y.location&&(y.location.top!==r||y.location.left!==k||y.location.width!==g||y.location.height!==m))throw new L("tilemap:location-mismatch","Tilemap response for different location than requested",{response:y,definition:{top:r,left:k,width:g,height:m}});return U.fromJSON(y)})};U.fromJSON=function(I){U.validateJSON(I);const z=new U;z.location=Object.freeze(n.clone(I.location));z._updateFromData(I.data);return Object.freeze(z)};U.validateJSON=
function(I){if(!I||!I.location)throw new L("tilemap:missing-location","Location missing from tilemap response");if(!1===I.valid)throw new L("tilemap:invalid","Tilemap response was marked as invalid");if(!I.data)throw new L("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(I.data))throw new L("tilemap:data-mismatch","Data must be an array of numbers");if(I.data.length!==I.location.width*I.location.height)throw new L("tilemap:data-mismatch","Number of data items does not match width/height of tilemap");
};return U}();R.Tilemap=N;R.default=N;R.tilemapDefinitionId=function(U){return`${U.level}/${U.row}/${U.col}/${U.width}/${U.height}`};R.tilemapDefinitionUrl=M;Object.defineProperty(R,"__esModule",{value:!0})})},"esri/layers/support/rasterDatasets/MRFRaster":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/maybe ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../core/Error ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../../geometry/SpatialReference ../../../geometry/Point ../../../geometry/Extent ../../../geometry ../PixelBlock ../RasterInfo ../rasterFormats/utils ../rasterFunctions/pixelUtils ../RasterStorageInfo ./BaseRaster ./xmlUtilities ./pamParser".split(" "),
function(R,n,L,X,A,M,N,U,W,I,z,D,r,k,g,m,p,y,E,w,q,t,B,J,G){const l=new Map;l.set("Int8","s8");l.set("UInt8","u8");l.set("Int16","s16");l.set("UInt16","u16");l.set("Int32","s32");l.set("UInt32","u32");l.set("Float32","f32");l.set("Float64","f32");l.set("Double64","f32");const h=new Map;h.set("lerc",".lrc");h.set("none",".til");h.set("deflate",".pzp");h.set("jpeg",".jzp");L=function(x){function c(){var e=x.apply(this,arguments)||this;e._files=null;e._storageIndex=null;e.datasetFormat="MRF";return e}
R._inheritsLoose(c,x);var a=c.prototype;a.open=async function(e){var b;await this.init();this.datasetName=this.url.slice(this.url.lastIndexOf("/")+1);var d=e?X.unwrap(e.signal):null,v=await this.request(this.url,{responseType:"xml",signal:d});const {rasterInfo:C,files:H}=this._parseHeader(v.data);if(-1===(null==(b=this.ioConfig.skipExtensions)?void 0:b.indexOf("aux.xml"))&&(e=await this._fetchAuxiliaryData(e),null!=e)){var F;C.statistics=null!=(F=e.statistics)?F:C.statistics;(C.histograms=e.histograms)&&
!X.isSome(C.statistics)&&(C.statistics=q.estimateStatisticsFromHistograms(e.histograms))}this._set("rasterInfo",C);this._files=H;d=await this.request(H.index,{responseType:"array-buffer",signal:d});this._storageIndex=this._parseIndex(d.data);d=0;F=-1;const {blockWidth:V,blockHeight:O,compression:Q}=this.rasterInfo.storageInfo;v=this.rasterInfo.storageInfo.pyramidScalingFactor;const {width:K,height:P,bandCount:Z}=this.rasterInfo,aa=[],ha="none"===Q?1:Z;for(;d<this._storageIndex.length;)F++,e=Math.ceil(K/
V/v**F),b=Math.ceil(P/O/v**F),d+=e*b*ha*4,aa.push({maxRow:b,maxCol:e,minCol:0,minRow:0});this.rasterInfo.storageInfo.blockBoundary=aa;0<F&&(this.rasterInfo.storageInfo.firstPyramidLevel=1,this.rasterInfo.storageInfo.maximumPyramidLevel=F);this.updateTileInfo()};a.fetchRawTile=async function(e,b,d,v={}){const {blockWidth:C,blockHeight:H,blockBoundary:F,compression:V}=this.rasterInfo.storageInfo;var O=F[e];if(!O||O.maxRow<b||O.maxCol<d||O.minRow>b||O.minCol>d)return null;const {bandCount:Q,pixelType:K}=
this.rasterInfo,{ranges:P,actualTileWidth:Z,actualTileHeight:aa}=this._getTileLocation(e,b,d);if(!P||0===P.length)return null;if(0===P[0].from&&0===P[0].to)return e=new Uint8Array(C*H),new y({width:C,height:H,pixels:null,mask:e,validPixelCount:0});({bandIds:d}=this.ioConfig);b="none"===V?1:Q;O=[];for(e=e=0;e<b;e++)(!d||-1<d.indexOf[e])&&O.push(this.request(this._files.data,{range:{from:P[e].from,to:P[e].to},responseType:"array-buffer",signal:v.signal}));v=await Promise.all(O);e=v.map(ha=>ha.data.byteLength).reduce((ha,
ea)=>ha+ea);d=new Uint8Array(e);for(e=O=0;e<b;e++)d.set(new Uint8Array(v[e].data),O),O+=v[e].data.byteLength;v=await this.decodePixelBlock(d.buffer,{width:C,height:H,format:"lerc"===this.rasterInfo.storageInfo.compression?"lerc":"bip",pixelType:K});d=b=0;if(Z!==C||aa!==H)if(O=v.mask)for(e=0;e<H;e++)for(d=e*C,b=e<aa?Z:0;b<C;b++)O[d+b]=0;else for(O=new Uint8Array(C*H),v.mask=O,e=0;e<aa;e++)for(d=e*C,b=0;b<Z;b++)O[d+b]=1;return v};a._parseIndex=function(e){if(0<e.byteLength%16)throw"invalid array buffer must be multiples of 16";
let b,d,v,C,H;if(w.isPlatformLittleEndian){b=new Uint8Array(e);v=new ArrayBuffer(e.byteLength);d=new Uint8Array(v);for(C=0;C<e.byteLength/4;C++)for(H=0;4>H;H++)d[4*C+H]=b[4*C+3-H];e=new Uint32Array(v)}else e=new Uint32Array(e);return e};a._getTileLocation=function(e,b,d){const {blockWidth:v,blockHeight:C,pyramidScalingFactor:H,compression:F}=this.rasterInfo.storageInfo,{width:V,height:O,bandCount:Q}=this.rasterInfo,K="none"===F?1:Q;let P,Z;var aa,ha=0;let ea=0;for(aa=0;aa<e;aa++)ea=H**aa,P=Math.ceil(V/
v/ea),Z=Math.ceil(O/C/ea),ha+=P*Z;ea=H**e;P=Math.ceil(V/v/ea);Z=Math.ceil(O/C/ea);ha=4*(ha+(b*P+d))*K;e=this._storageIndex.subarray(ha,ha+4*K);ha=aa=0;const f=[];for(let u=0;u<K;u++)aa=e[4*u]*2**32+e[4*u+1],ha=aa+e[4*u+2]*2**32+e[4*u+3],f.push({from:aa,to:ha});return{ranges:f,actualTileWidth:d<P-1?v:Math.ceil(V/ea)-v*(P-1),actualTileHeight:b<Z-1?C:Math.ceil(O/ea)-C*(Z-1)}};a._parseHeader=function(e){var b=J.getElement(e,"MRF_META/Raster");if(!b)throw new I("mrf:open","not a valid MRF format");var d=
J.getElement(b,"Size"),v=parseInt(d.getAttribute("x"),10),C=parseInt(d.getAttribute("y"),10);const H=parseInt(d.getAttribute("c"),10);d=(J.getElementValue(b,"Compression")||"none").toLowerCase();var F=["none","lerc"];if(!d||-1===F.indexOf(d))throw new I("mrf:open","currently does not support compression "+d);var V=J.getElementValue(b,"DataType")||"UInt8";F=l.get(V);if(null==F)throw new I("mrf:open","currently does not support pixel type "+V);var O=J.getElement(b,"PageSize");V=parseInt(O.getAttribute("x"),
10);O=parseInt(O.getAttribute("y"),10);b=J.getElement(b,"DataValues");let Q;b&&(b=b.getAttribute("NoData"),null!=b&&(Q=b.trim().split(" ").map(u=>parseFloat(u))));if(J.getElement(e,"MRF_META/CachedSource"))throw new I("mrf:open","currently does not support MRF referencing other data files");var K=J.getElement(e,"MRF_META/GeoTags"),P=J.getElement(K,"BoundingBox");if(null==P)throw new I("mrf:open","missing node MRF_META/GeoTags/BoundingBox");b=parseFloat(P.getAttribute("minx"));const Z=parseFloat(P.getAttribute("miny")),
aa=parseFloat(P.getAttribute("maxx")),ha=parseFloat(P.getAttribute("maxy"));var ea=J.getElementValue(K,"Projection")||"";K=J.getElementValue(e,"datafile");P=J.getElementValue(e,"IndexFile");let f;"LOCAL_CS[]"!==ea&&(ea.toLowerCase().startsWith("epsg:")?(ea=Number(ea.slice(5)),isNaN(ea)||0===ea||(f=new k({wkid:ea}))):f=G.parseSpatialReference(ea));ea=new m(b,Z,aa,ha);ea.spatialReference=f;e=J.getElement(e,"MRF_META/Rsets");e=parseInt(e&&e.getAttribute("scale")||"2",10);e=new t({origin:new g({x:ea.xmin,
y:ea.ymax,spatialReference:f}),blockWidth:V,blockHeight:O,pyramidBlockWidth:V,pyramidBlockHeight:O,compression:d,pyramidScalingFactor:e});V=new g({x:(aa-b)/v,y:(ha-Z)/C,spatialReference:f});v=new E({width:v,height:C,extent:ea,spatialReference:f,bandCount:H,pixelType:F,pixelSize:V,noDataValue:Q,storageInfo:e});C={mrf:this.url,index:P||this.url.replace(".mrf",".idx"),data:K||this.url.replace(".mrf",h.get(d))};return{rasterInfo:v,files:C}};a._fetchAuxiliaryData=async function(e){try{const {data:b}=await this.request(this.url+
".aux.xml",{responseType:"xml",signal:null==e?void 0:e.signal});return G.parsePAMInfo(b)}catch{return null}};return c}(B);n.__decorate([N.property()],L.prototype,"_files",void 0);n.__decorate([N.property()],L.prototype,"_storageIndex",void 0);n.__decorate([N.property({type:String,json:{write:!0}})],L.prototype,"datasetFormat",void 0);return L=n.__decorate([W.subclass("esri.layers.support.rasterIO.MRFRaster")],L)})},"esri/layers/support/rasterDatasets/TIFFRaster":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/maybe ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../core/Error ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../../geometry/Point ../../../geometry/Extent ../../../geometry ../RasterInfo ../rasterFormats/TiffTags ../rasterFormats/TiffDecoder ../rasterFunctions/pixelUtils ../RasterStorageInfo ./BaseRaster ../rasterTransforms/PolynomialTransform ./pamParser".split(" "),
function(R,n,L,X,A,M,N,U,W,I,z,D,r,k,g,m,p,y,E,w,q,t,B,J){const G=function(h,x){return(h=h.get(x))&&h.values},l=function(h,x){return(h=h.get(x))&&h.values[0]};L=function(h){function x(){var a=h.apply(this,arguments)||this;a._files=null;a._headerInfo=null;a._bufferSize=1048576;a.datasetFormat="TIFF";return a}R._inheritsLoose(x,h);var c=x.prototype;c.open=async function(a){var e;await this.init();var b=a?X.unwrap(a.signal):null,{data:d}=await this.request(this.url,{range:{from:0,to:this._bufferSize},
responseType:"array-buffer",signal:b});if(!d)throw new I("tiffraster:open","failed to open url "+this.url);this.datasetName=this.url.slice(this.url.lastIndexOf("/")+1);const {littleEndian:v,firstIFD:C,isBigTiff:H}=E.parseSignature(d),F=[];await this.readIFDs(F,d,v,C,0,H?8:4,b);b=E.getImageInfo(F);const {width:V,height:O,tileWidth:Q,tileHeight:K,planes:P,pixelType:Z,compression:aa,firstPyramidLevel:ha,maximumPyramidLevel:ea,pyramidBlockWidth:f,pyramidBlockHeight:u,tileBoundary:T,affine:S,metadata:ba}=
b,fa=g.fromJSON(b.extent);d=fa.spatialReference;var ia=fa?new k({x:fa.xmin,y:fa.ymax,spatialReference:d}):new k({x:0,y:0});const ka=new q({blockWidth:Q,blockHeight:K,pyramidBlockWidth:f,pyramidBlockHeight:u,compression:aa,origin:ia,firstPyramidLevel:ha,maximumPyramidLevel:ea,blockBoundary:T});ia=new k({x:(fa.xmax-fa.xmin)/V,y:(fa.ymax-fa.ymin)/O,spatialReference:d});ia=new p({width:V,height:O,bandCount:P,pixelType:Z,compression:aa,pixelSize:ia,storageInfo:ka,spatialReference:d,keyProperties:ba?{BandProperties:ba.bandProperties,
DataType:ba.dataType}:{},extent:fa,statistics:ba?ba.statistics:null});null!=S&&S.length&&(ia.nativeExtent=new g({xmin:-.5,ymin:.5-O,xmax:V-.5,ymax:.5,spatialReference:d}),ia.transform=new B({polynomialOrder:1,forwardCoefficients:[S[2]+S[0]/2,S[5]-S[3]/2,S[0],S[3],-S[1],-S[4]]}),ia.extent=ia.transform.forwardTransform(ia.nativeExtent),ia.pixelSize=new k({x:(fa.xmax-fa.xmin)/V,y:(fa.ymax-fa.ymin)/O,spatialReference:d}),ka.origin.x=-.5,ka.origin.y=.5);if(null==(e=this.ioConfig.skipExtensions)||!e.includes("aux.xml"))if(a=
await this._fetchAuxiliaryData(a),null!=a){var ja;ia.statistics=null!=(ja=a.statistics)?ja:ia.statistics;(ia.histograms=a.histograms)&&!X.isSome(ia.statistics)&&(ia.statistics=w.estimateStatisticsFromHistograms(a.histograms));a.transform&&!S&&(ia.transform=a.transform,ia.nativeExtent=ia.extent,ja=ia.transform.forwardTransform(ia.nativeExtent),ia.pixelSize=new k({x:(ja.xmax-ja.xmin)/V,y:(ja.ymax-ja.ymin)/O,spatialReference:d}),ia.extent=ja);ia.spatialReference||(ia.spatialReference=a.spatialReference)}this._set("rasterInfo",
ia);this._headerInfo={littleEndian:v,isBigTiff:H,ifds:F,...b};if(!this._headerInfo.isSupported)throw new I("tiffraster:open","this tiff is not supported: "+this._headerInfo.message);this.updateTileInfo()};c.fetchRawTile=async function(a,e,b,d={}){var v;if(null==(v=this._headerInfo)||!v.isSupported||this.isBlockOutside(a,e,b))return null;e=this.getTileLocation(a,e,b);if(!e)return null;const {range:C,actualTileWidth:H,actualTileHeight:F,ifd:V}=e;({data:d}=await this.request(this.url,{range:C,responseType:"array-buffer",
signal:d.signal}));const {blockWidth:O,blockHeight:Q}=this.getBlockWidthHeight(a);a=await this.decodePixelBlock(d,{format:"tiff",customOptions:{headerInfo:this._headerInfo,ifd:V,offset:0,size:0},width:O,height:Q,planes:null,pixelType:null});if(H!==O||F!==Q)if(v=a.mask)for(d=0;d<Q;d++)for(b=d*O,e=d<F?H:0;e<O;e++)v[b+e]=0;else for(v=new Uint8Array(O*Q),a.mask=v,d=0;d<F;d++)for(b=d*O,e=0;e<H;e++)v[b+e]=1;return a};c.readIFDs=async function(a,e,b,d,v,C=4,H){if(!d)return null;if(d>=e.byteLength||0>d)e=
(await this.request(this.url,{range:{from:d+v,to:d+v+this._bufferSize},responseType:"array-buffer",signal:H})).data,v=d+v,d=0;d=await this.readIFD(e,b,d,v,y.TIFF_TAGS,C,H);a.push(d.ifd);if(!d.nextIFD)return null;await this.readIFDs(a,e,b,d.nextIFD-v,v,C,H)};c.readIFD=async function(a,e,b,d,v=y.TIFF_TAGS,C=4,H){if(!a)return null;b=E.parseIFD(a,e,b,d,v,C);if(b.success){const F=[];b.ifd.forEach(V=>{V.values||F.push(V)});0<F.length&&(C=F.map(V=>V.offlineOffsetSize),v=Math.min.apply(null,C.map(V=>V[0])),
Math.min.apply(null,C.map(V=>V[0]+V[1]))-v<=this._bufferSize&&({data:C}=await this.request(this.url,{range:{from:v,to:v+this._bufferSize},responseType:"array-buffer",signal:H}),a=C,d=v,F.forEach(V=>E.parseFieldValues(a,e,V,d))));b.ifd.has("GEOKEYDIRECTORY")&&(v=b.ifd.get("GEOKEYDIRECTORY"),(C=v.values)&&4<C.length&&(C=C[0]+"."+C[1]+"."+C[2],H=await this.readIFD(a,e,v.valueOffset+6-d,d,y.GEO_KEYS,2,H),v.data=H.ifd,v.data&&v.data.set("GEOTIFFVersion",{id:0,type:2,valueCount:1,valueOffset:null,values:[C]})));
return b}if(b.requiredBufferSize&&b.requiredBufferSize!==a.byteLength)return a=(await this.request(this.url,{range:{from:d,to:d+b.requiredBufferSize+4},responseType:"array-buffer",signal:H})).data,a.byteLength<b.requiredBufferSize?null:this.readIFD(a,e,0,d,y.TIFF_TAGS,4,H)};c.getTileLocation=function(a,e,b){const {firstPyramidLevel:d,blockBoundary:v}=this.rasterInfo.storageInfo;var C=0===a?0:a-(d-1);a=this._headerInfo.ifds[C];if(!a)return null;var H=G(a,"TILEOFFSETS");if(void 0===H)return null;var F=
G(a,"TILEBYTECOUNTS");const {minRow:V,minCol:O,maxRow:Q,maxCol:K}=v[C];if(e>Q||b>K||e<V||b<O)return null;C=l(a,"IMAGEWIDTH");const P=l(a,"IMAGELENGTH"),Z=l(a,"TILEWIDTH"),aa=l(a,"TILELENGTH"),ha=e*(K+1)+b;H=H[ha];F=F[ha];return null==H||null==F?null:{range:{from:H,to:H+F-1},ifd:a,actualTileWidth:b===K?C%Z:Z,actualTileHeight:e===Q?P%aa:aa}};c._fetchAuxiliaryData=async function(a){try{const {data:e}=await this.request(this.url+".aux.xml",{responseType:"xml",signal:null==a?void 0:a.signal});return J.parsePAMInfo(e)}catch{return null}};
return x}(t);n.__decorate([N.property()],L.prototype,"_files",void 0);n.__decorate([N.property()],L.prototype,"_headerInfo",void 0);n.__decorate([N.property()],L.prototype,"_bufferSize",void 0);n.__decorate([N.property({type:String,json:{write:!0}})],L.prototype,"datasetFormat",void 0);return L=n.__decorate([W.subclass("esri.layers.support.rasterDatasets.TIFFRaster")],L)})},"*noref":1}});
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/maybe ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/Error ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../PopupTemplate ./Layer ../rasterRenderers ../core/MultiOriginJSONSupport ./support/commonProperties ./mixins/OperationalLayer ./support/Field ./mixins/BlendLayer ./mixins/PortalLayer ./mixins/RefreshableLayer ./mixins/ScaleRangeLayer ../support/popupUtils ./mixins/ImageryTileMixin ./support/rasterDatasets/RasterFactory".split(" "),function(R,
n,L,X,A,M,N,U,W,I,z,D,r,k,g,m,p,y,E,w,q,t,B,J,G,l,h,x,c){function a(){return{enabled:this.loaded?"RasterTileServer"===this.raster.datasetFormat&&"Raster"===this.raster.tileType:!0}}L=U.strict()({RSP_NearestNeighbor:"nearest",RSP_BilinearInterpolation:"bilinear",RSP_CubicConvolution:"cubic",RSP_Majority:"majority"});p=function(e){function b(...v){v=e.call(this,...v)||this;v.bandIds=null;v.interpolation=null;v.legendEnabled=!0;v.isReference=null;v.listMode="show";v.sourceJSON=null;v.version=null;v.title=
null;v.type="imagery-tile";v.operationalLayerType="ArcGISTiledImageServiceLayer";v.popupEnabled=!0;v.popupTemplate=null;return v}R._inheritsLoose(b,e);var d=b.prototype;d.normalizeCtorArgs=function(v,C){return"string"===typeof v?{url:v,...C}:v};d.load=function(v){const C=X.isSome(v)?v.signal:null;this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service"]},v).then(()=>this._openRaster(C),()=>this._openRaster(C)));return Promise.resolve(this)};d.readRenderer=function(v,C,H){v=y.read(C&&
C.layerDefinition&&C.layerDefinition.drawingInfo&&C.layerDefinition.drawingInfo.renderer,H)||void 0;if(null!=v)return v};d.createPopupTemplate=function(v){return h.createPopupTemplate(this,v)};d.write=function(v,C){const {raster:H}=this;if(this.loaded?"RasterTileServer"===H.datasetFormat&&("Raster"===H.tileType||"Map"===H.tileType):this.url&&/\/ImageServer(\/|\/?$)/i.test(this.url))return e.prototype.write.call(this,v,C);C&&C.messages&&C.messages.push(new D("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${`${C.origin}/${C.layerContainerType||
"operational-layers"}`}'`,{layer:this}));return null};d._openRaster=async function(v){this.raster?(this.raster.rasterInfo||await this.raster.open(),this.url=this.raster.url):this.raster=await c.open({url:this.url,sourceJSON:this.sourceJSON,ioConfig:this.ioConfig,signal:v});({rasterInfo:v}=this.raster);if(!v)throw new D("imagery-tile-layer:load","cannot load resources on "+this.url);this.sourceJSON=this.sourceJSON||this.raster.sourceJSON;null!=this.sourceJSON&&(this._set("version",this.sourceJSON.currentVersion),
this._set("copyright",this.sourceJSON.copyrightText));null==this.title&&(this.title=this.raster.datasetName);"Map"===this.raster.tileType&&(this.popupEnabled=!1);this._configDefaultSettings()};R._createClass(b,[{key:"defaultPopupTemplate",get:function(){return this.createPopupTemplate()}},{key:"fields",get:function(){var v,C;let H=[new t({name:"Raster.ServicePixelValue",alias:"Pixel Value",domain:null,editable:!1,length:50,type:"string"})];const F=null==(v=this.rasterInfo)?void 0:null==(C=v.attributeTable)?
void 0:C.fields;F&&(v=F.filter(V=>"oid"!==V.type&&"value"!==V.name.toLowerCase()).map(V=>{const O=V.clone();O.name="Raster."+V.name;return O}),H=H.concat(v));return H}},{key:"renderer",set:function(v){this._set("renderer",v);this.updateRenderer()}}]);return b}(B.BlendLayer(l.ScaleRangeLayer(G.RefreshableLayer(q.OperationalLayer(J.PortalLayer(x.ImageryTileMixin(E.MultiOriginJSONMixin(p))))))));n.__decorate([N.property({type:[M.Integer],json:{write:{overridePolicy:a}}})],p.prototype,"bandIds",void 0);
n.__decorate([N.property({json:{write:{overridePolicy:a}}}),W.enumeration(L)],p.prototype,"interpolation",void 0);n.__decorate([N.property({json:{write:!0}})],p.prototype,"multidimensionalDefinition",void 0);n.__decorate([N.property(w.legendEnabled)],p.prototype,"legendEnabled",void 0);n.__decorate([N.property({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],p.prototype,"isReference",void 0);n.__decorate([N.property({type:["show","hide"]})],p.prototype,"listMode",
void 0);n.__decorate([N.property()],p.prototype,"sourceJSON",void 0);n.__decorate([N.property({readOnly:!0})],p.prototype,"version",void 0);n.__decorate([N.property()],p.prototype,"title",void 0);n.__decorate([N.property({readOnly:!0,json:{read:!1}})],p.prototype,"type",void 0);n.__decorate([N.property({type:["ArcGISTiledImageServiceLayer"]})],p.prototype,"operationalLayerType",void 0);n.__decorate([N.property({type:Boolean,value:!0,json:{read:{source:"disablePopup",reader(e,b){return!b.disablePopup}},
write:{target:"disablePopup",overridePolicy:a,writer(e,b,d){b[d]=!e}}}})],p.prototype,"popupEnabled",void 0);n.__decorate([N.property({type:m,json:{read:{source:"popupInfo"},write:{target:"popupInfo",overridePolicy:a}}})],p.prototype,"popupTemplate",void 0);n.__decorate([N.property({readOnly:!0})],p.prototype,"defaultPopupTemplate",null);n.__decorate([N.property({readOnly:!0,type:[t]})],p.prototype,"fields",null);n.__decorate([N.property({types:y.rasterRendererTypes,json:{name:"layerDefinition.drawingInfo.renderer",
write:{overridePolicy:a},origins:{"web-scene":{types:y.websceneRasterRendererTypes,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy(e){return{enabled:e&&"vector-field"!==e.type}}}}}}})],p.prototype,"renderer",null);n.__decorate([I.reader("renderer")],p.prototype,"readRenderer",null);return p=n.__decorate([z.subclass("esri.layers.ImageryTileLayer")],p)});