// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.19/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/support/fieldUtils":function(){define("require exports ../../core/object ../../core/maybe ../../core/Error ./domains ../../support/arcadeOnDemand".split(" "),function(n,e,Z,M,p,K,h){function u(ha,y,S){if(ha)for(const ma of ha)(ha=(ha=Z.getDeepValue(ma,y))&&"function"!==typeof ha&&fa(S,ha))&&Z.setDeepValue(ma,ha.name,y)}function r(ha,y){if(!ha||!y)return[];I.clear();H(I,ha,y);return Array.from(I).sort()}function H(ha,y,S){if(S)if(y&&y.length)if(S.includes("*"))for(const {name:ma}of y)ha.add(ma);
else for(const ma of S)da(ha,y,ma);else if(S.includes("*"))ha.clear(),ha.add("*");else for(const ma of S)ha.add(ma)}function da(ha,y,S){y&&y.length?(y=fa(y,S))&&ha.add(y.name):"string"===typeof S&&ha.add(S)}function fa(ha,y){if("string"!==typeof y)return null;if(null!=ha){y=y.toLowerCase();for(const S of ha)if(S&&S.name.toLowerCase()===y)return S}return null}async function F(ha,y,S){if(S){var {arcadeUtils:ma}=await h.loadArcade();S=ma.extractFieldNames(S);for(const ya of S)da(ha,y,ya)}}function w(ha,
y){for(const S of ha)if(S&&S.valueType&&S.valueType===y)return S.name;return null}async function C(ha,y){if(y){var {fields:S}=y;if(y=Z.getDeepValue("elevationInfo.featureExpressionInfo",y))return y.collectRequiredFields(ha,S)}}async function d(ha,y,S){S.outStatistic.onStatisticValueExpression?F(ha,y,S.outStatistic.onStatisticValueExpression):ha.add(S.outStatistic.onStatisticField)}async function m(ha,y){const {labelingInfo:S,fields:ma}=y;S&&S.length&&await Promise.all(S.map(ya=>v(ha,ma,ya)))}async function v(ha,
y,S){if(S){var ma=S.getLabelExpression();S=S.where;"arcade"===ma.type?await F(ha,y,ma.expression):(ma=ma.expression.match(/{[^}]*}/g))&&ma.forEach(ya=>{da(ha,y,ya.slice(1,-1))});ma=/['"]+/g;S&&(S=S.split(" "),3===S.length&&da(ha,y,S[0].replace(ma,"")),7===S.length&&(da(ha,y,S[0].replace(ma,"")),da(ha,y,S[4].replace(ma,""))))}}function t(ha){return"number"===typeof ha&&!isNaN(ha)&&isFinite(ha)}function q(ha){return null===ha||t(ha)}function A(ha){return null===ha||T(ha)}function N(ha){return null!=
ha&&"string"===typeof ha}function aa(ha){return null===ha||N(ha)}function ja(){return!0}function U(ha,y){let S;switch(ha.type){case "date":case "integer":case "long":case "small-integer":case "esriFieldTypeDate":case "esriFieldTypeInteger":case "esriFieldTypeLong":case "esriFieldTypeSmallInteger":S=ha.nullable?A:T;break;case "double":case "single":case "esriFieldTypeSingle":case "esriFieldTypeDouble":S=ha.nullable?q:t;break;case "string":case "esriFieldTypeString":S=ha.nullable?aa:N;break;default:S=
ja}return 1===arguments.length?S:S(y)}function G(ha){return null!=ha&&ia.has(ha.type)}function D(ha,y){return ha.nullable&&null===y?null:G(ha)&&!J(ha.type,Number(y))?e.NumericRangeValidationError.OUT_OF_RANGE:U(ha,y)?ha.domain?K.validateDomainValue(ha.domain,y):null:e.TypeValidationError.INVALID_TYPE}function J(ha,y){return(ha="string"===typeof ha?O(ha):ha)?ha.isInteger?T(y)&&y>=ha.min&&y<=ha.max:y>=ha.min&&y<=ha.max:!1}function O(ha){switch(ha){case "esriFieldTypeSmallInteger":case "small-integer":return pa;
case "esriFieldTypeInteger":case "integer":return qa;case "esriFieldTypeSingle":case "single":return wa;case "esriFieldTypeDouble":case "double":return Ca}}function R(ha,y,S){if(!y||!y.attributes||!ha){if(M.isSome(S))for(var ma of ha)S.add(ma);return!0}y=y.attributes;ma=!1;for(const ya of ha)if(!(ya in y))if(ma=!0,M.isSome(S))S.add(ya);else break;return ma}const z="field field2 field3 normalizationField rotationInfo.field proportionalSymbolInfo.field proportionalSymbolInfo.normalizationField colorInfo.field colorInfo.normalizationField".split(" "),
l=["field","normalizationField"],I=new Set,T=(()=>"isInteger"in Number?Number.isInteger:ha=>"number"===typeof ha&&isFinite(ha)&&Math.floor(ha)===ha)(),L=["integer","small-integer","single","double"],ia=new Set([...L,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);(e.NumericRangeValidationError||(e.NumericRangeValidationError={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range";(e.TypeValidationError||(e.TypeValidationError={})).INVALID_TYPE=
"type-validation-error::invalid-type";const pa={min:-32768,max:32767,isInteger:!0},qa={min:-2147483648,max:2147483647,isInteger:!0},wa={min:-3.4E38,max:1.2E38,isInteger:!1},Ca={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};e.collectArcadeFieldNames=F;e.collectElevationFields=C;e.collectFeatureReductionFields=async function(ha,y,S){y&&S&&"cluster"===S.type&&S.fields&&await Promise.all(S.fields.map(ma=>d(ha,y.fields,ma)))};e.collectField=da;e.collectFields=H;e.collectFilterFields=async function(ha,
y,S){if(y&&(y.timeInfo&&M.isSome(S)&&S.timeExtent&&H(ha,y.fields,[y.timeInfo.startField,y.timeInfo.endField]),y.floorInfo&&H(ha,y.fields,[y.floorInfo.floorField]),M.isSome(S)&&M.isSome(S.where)&&S.where&&"1\x3d1"!==S.where)){S=(await new Promise(function(ma,ya){n(["../../core/sql/WhereClause"],ma,ya)})).WhereClause.create(S.where,y.fieldsIndex);if(!S.isStandardized)throw new p("fieldUtils:collectFilterFields","Where clause is not standardized");H(ha,y.fields,S.fieldNames)}};e.collectLabelingFields=
m;e.doubleRange=Ca;e.featureHasFields=function(ha,y){return!R(ha,y,null)};e.fixFields=r;e.fixRendererFields=function(ha,y){if(null!=ha&&null!=y)for(const S of Array.isArray(ha)?ha:[ha])if(u(z,S,y),"visualVariables"in S&&S.visualVariables)for(const ma of S.visualVariables)u(l,ma,y)};e.fixTimeInfoFields=function(ha,y){if(null!=ha&&null!=y)if("startField"in ha){var S=fa(y,ha.startField);y=fa(y,ha.endField);ha.startField=S&&S.name||null;ha.endField=y&&y.name||null}else S=fa(y,ha.startTimeField),y=fa(y,
ha.endTimeField),ha.startTimeField=S&&S.name||null,ha.endTimeField=y&&y.name||null};e.getDisplayFieldName=function({displayField:ha,fields:y}){if(ha)return ha;if(!y||!y.length)return null;if(!(ha=w(y,"name-or-title")||w(y,"unique-identifier")||w(y,"type-or-category")))a:{for(const S of y)if(S&&S.name&&(y=S.name.toLowerCase(),-1<y.indexOf("name")||-1<y.indexOf("title"))){ha=S.name;break a}ha=null}return ha};e.getElevationFields=async function(ha){if(!ha)return[];const y=new Set;await C(y,ha);return Array.from(y).sort()};
e.getExpressionFields=async function(ha,y){const S=new Set;for(const ma of y)await F(S,ha.fields,ma);return Array.from(S).sort()};e.getFeatureEditFields=function(ha){if(!ha)return[];const y="editFieldsInfo"in ha&&ha.editFieldsInfo;return y?r(ha.fields,[y&&y.creatorField,y&&y.creationDateField,y&&y.editorField,y&&y.editDateField]):[]};e.getFeatureGeometryFields=function(ha){if(!ha)return[];const y=ha.geometryFieldsInfo;return y?r(ha.fields,[y.shapeAreaField,y.shapeLengthField]):[]};e.getField=fa;e.getFieldDefaultValue=
function(ha){const y=ha.defaultValue;if(void 0!==y&&U(ha,y))return y;if(ha.nullable)return null};e.getFieldRange=function(ha){const y=K.getDomainRange(ha.domain);if(y)return y;if(G(ha))return O(ha.type)};e.getLabelingFields=async function(ha){if(!ha)return[];const y=new Set;await m(y,ha);return Array.from(y).sort()};e.getNumericTypeForValue=function(ha){if(!t(ha))return null;if(T(ha)){if(ha>=pa.min&&ha<=pa.max)return"esriFieldTypeSmallInteger";if(ha>=qa.min&&ha<=qa.max)return"esriFieldTypeInteger"}return ha>=
wa.min&&ha<=wa.max?"esriFieldTypeSingle":"esriFieldTypeDouble"};e.getTimeFields=async function(ha){if(!ha)return[];const y="timeInfo"in ha&&ha.timeInfo;return y?r(ha.fields,[ha.trackIdField,y.startField,y.endField]):[]};e.hasField=function(ha,y){if(!ha||!y||"string"!==typeof y)return!1;y=y.toLowerCase();for(const S of ha)if(S&&S.name.toLowerCase()===y)return!0;return!1};e.integerRange=qa;e.isDateField=function(ha){return null!=ha&&("date"===ha.type||"esriFieldTypeDate"===ha.type)};e.isNumberInRange=
J;e.isNumericField=G;e.isStringField=function(ha){return null!=ha&&("string"===ha.type||"esriFieldTypeString"===ha.type)};e.isValidFieldValue=function(ha,y){return null===D(ha,y)};e.isValueMatchingFieldType=U;e.numericTypes=L;e.packFields=function(ha,y,S=1){if(!y||!ha)return[];if(y.includes("*"))return["*"];y=r(ha,y);return y.length/ha.length>=S?["*"]:y};e.populateMissingFields=R;e.rendererFields=z;e.sanitizeNullFieldValue=function(ha){return null==ha||"number"===typeof ha&&isNaN(ha)?null:ha};e.singleRange=
wa;e.smallIntegerRange=pa;e.unpackFieldNames=function(ha,y){return M.isNone(y)||M.isNone(ha)?[]:y.includes("*")?ha.map(S=>S.name):y};e.validateFieldValue=D;e.validationErrorToString=function(ha,y,S){switch(ha){case K.DomainValidationError.INVALID_CODED_VALUE:return`Value ${S} is not in the coded domain - field: ${y.name}, domain: ${JSON.stringify(y.domain)}`;case K.DomainValidationError.VALUE_OUT_OF_RANGE:return`Value ${S} is out of the range of valid values - field: ${y.name}, domain: ${JSON.stringify(y.domain)}`;
case e.TypeValidationError.INVALID_TYPE:return`Value ${S} is not a valid value for the field type - field: ${y.name}, type: ${y.type}, nullable: ${y.nullable}`;case e.NumericRangeValidationError.OUT_OF_RANGE:{const {min:ma,max:ya}=O(y.type);return`Value ${S} is out of range for the number type - field: ${y.name}, type: ${y.type}, value range is ${ma} to ${ya}`}}};e.visualVariableFields=l;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/layers/support/domains":function(){define("exports ../../core/has ./Domain ./CodedValueDomain ./InheritedDomain ./RangeDomain".split(" "),
function(n,e,Z,M,p,K){function h(u,r){switch(u.type){case "range":{const H="range"in u?u.range[1]:u.maxValue;if(+r<("range"in u?u.range[0]:u.minValue)||+r>H)return n.DomainValidationError.VALUE_OUT_OF_RANGE;break}case "coded-value":case "codedValue":if(null==u.codedValues||u.codedValues.every(H=>null==H||H.code!==r))return n.DomainValidationError.INVALID_CODED_VALUE}return null}(function(u){u.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range";u.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(n.DomainValidationError||
(n.DomainValidationError={}));e={key:"type",base:Z,typeMap:{range:K,"coded-value":M,inherited:p}};n.DomainBase=Z;n.CodedValueDomain=M;n.InheritedDomain=p;n.RangeDomain=K;n.fromJSON=function(u){if(!u||!u.type)return null;switch(u.type){case "range":return K.fromJSON(u);case "codedValue":return M.fromJSON(u);case "inherited":return p.fromJSON(u)}return null};n.getDomainRange=function(u){if(u&&"range"===u.type)return{min:"range"in u?u.range[0]:u.minValue,max:"range"in u?u.range[1]:u.maxValue}};n.isValidDomainValue=
function(u,r){return null===h(u,r)};n.types=e;n.validateDomainValue=h;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/support/Domain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport".split(" "),
function(n,e,Z,M,p,K,h,u,r,H,da,fa,F){Z=new h.JSONMap({inherited:"inherited",codedValue:"coded-value",range:"range"});F=function(w){function C(d){d=w.call(this,d)||this;d.name=null;d.type=null;return d}n._inheritsLoose(C,w);return C}(F.JSONSupport);e.__decorate([K.property({type:String,json:{write:!0}})],F.prototype,"name",void 0);e.__decorate([u.enumeration(Z)],F.prototype,"type",void 0);return F=e.__decorate([r.subclass("esri.layers.support.Domain")],F)})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports",
"./property","../../jsonMap"],function(n,e,Z){n.enumeration=function(M,p={ignoreUnknown:!0}){M=M instanceof Z.JSONMap?M:new Z.JSONMap(M,p);M={type:null!=p&&p.ignoreUnknown?M.apiValues:String,readOnly:null==p?void 0:p.readOnly,json:{type:M.jsonValues,read:null!=p&&p.readOnly?!1:{reader:M.read},write:{writer:M.write}}};void 0!==(null==p?void 0:p.default)&&(M.json.default=p.default);return e.property(M)};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/support/CodedValueDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/lang ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ./CodedValue ./Domain".split(" "),
function(n,e,Z,M,p,K,h,u,r,H,da,fa,F,w){var C;Z=C=function(d){function m(t){t=d.call(this,t)||this;t.codedValues=null;t.type="coded-value";return t}n._inheritsLoose(m,d);var v=m.prototype;v.getName=function(t){let q=null;if(this.codedValues){const A=String(t);this.codedValues.some(N=>{String(N.code)===A&&(q=N.name);return!!q})}return q};v.clone=function(){return new C({codedValues:M.clone(this.codedValues),name:this.name})};return m}(w);e.__decorate([h.property({type:[F["default"]],json:{write:!0}})],
Z.prototype,"codedValues",void 0);e.__decorate([u.enumeration({codedValue:"coded-value"})],Z.prototype,"type",void 0);return Z=C=e.__decorate([r.subclass("esri.layers.support.CodedValueDomain")],Z)})},"esri/layers/support/CodedValue":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport".split(" "),
function(n,e,Z,M,p,K,h,u,r,H,da,fa,F){var w;n.CodedValue=w=function(C){function d(m){m=C.call(this,m)||this;m.name=null;m.code=null;return m}e._inheritsLoose(d,C);d.prototype.clone=function(){return new w({name:this.name,code:this.code})};return d}(F.JSONSupport);Z.__decorate([h.property({type:String,json:{write:!0}})],n.CodedValue.prototype,"name",void 0);Z.__decorate([h.property({type:[String,Number],json:{write:!0}})],n.CodedValue.prototype,"code",void 0);n.CodedValue=w=Z.__decorate([r.subclass("esri.layers.support.CodedValue")],
n.CodedValue);n.default=n.CodedValue;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/support/InheritedDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ./Domain".split(" "),
function(n,e,Z,M,p,K,h,u,r,H,da,fa){var F;Z=F=function(w){function C(d){d=w.call(this,d)||this;d.type="inherited";return d}n._inheritsLoose(C,w);C.prototype.clone=function(){return new F};return C}(fa);e.__decorate([h.enumeration({inherited:"inherited"})],Z.prototype,"type",void 0);return Z=F=e.__decorate([u.subclass("esri.layers.support.InheritedDomain")],Z)})},"esri/layers/support/RangeDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ./Domain".split(" "),
function(n,e,Z,M,p,K,h,u,r,H,da,fa){var F;Z=F=function(w){function C(d){d=w.call(this,d)||this;d.maxValue=null;d.minValue=null;d.type="range";return d}n._inheritsLoose(C,w);C.prototype.clone=function(){return new F({maxValue:this.maxValue,minValue:this.minValue,name:this.name})};return C}(fa);e.__decorate([K.property({type:Number,json:{type:[Number],read:{source:"range",reader(w,C){return C.range&&C.range[1]}},write:{enabled:!1,overridePolicy(){return{enabled:null!=this.maxValue&&null==this.minValue}},
target:"range",writer(w,C,d){C[d]=[this.minValue||0,w]}}}})],Z.prototype,"maxValue",void 0);e.__decorate([K.property({type:Number,json:{type:[Number],read:{source:"range",reader(w,C){return C.range&&C.range[0]}},write:{target:"range",writer(w,C,d){C[d]=[w,this.maxValue||0]}}}})],Z.prototype,"minValue",void 0);e.__decorate([h.enumeration({range:"range"})],Z.prototype,"type",void 0);return Z=F=e.__decorate([u.subclass("esri.layers.support.RangeDomain")],Z)})},"esri/support/arcadeOnDemand":function(){define(["require",
"exports","../core/maybe","../geometry/SpatialReference","../geometry"],function(n,e,Z,M,p){async function K(){h||(h=(async()=>{const r=await new Promise(function(H,da){n(["./arcadeUtils"],H,da)});await r.arcade.load();return{arcade:r.arcade,arcadeUtils:r,Dictionary:r.Dictionary,Feature:r.arcadeFeature}})());return h}let h;p=(r,H,da)=>u.create(r,H,da,null,["$feature","$view"]);let u=function(){function r(da,fa,F,w,C,d,m,v){this.script=da;this.evaluate=C;this.fields=m;this._syntaxTree=w;this._arcade=
fa;this._arcadeDictionary=F;this._arcadeFeature=d;this._spatialReference=v;this._referencesGeometry=fa.scriptTouchesGeometry(this._syntaxTree);this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}r.create=async function(da,fa,F,w,C,d){const {arcade:m,Feature:v,Dictionary:t}=await K(),q=M.fromJSON(fa);fa=m.parseScript(da,d);C=C.reduce((U,G)=>({...U,[G]:null}),{});let A=null;Z.isSome(w)&&(A=new t(w),A.immutable=!0,C.$config=null);w=m.scriptUsesGeometryEngine(fa)&&m.enableGeometrySupport();
d=m.scriptUsesFeatureSet(fa)&&m.enableFeatureSetSupport();const N=m.scriptIsAsync(fa)&&m.enableAsyncSupport();C={vars:C,spatialReference:q,useAsync:!!N};const aa=new t;aa.immutable=!1;aa.setField("scale",0);const ja=m.compileScript(fa,C);await Promise.all([w,d,N]);return new r(da,m,t,fa,U=>{"$view"in U&&U.$view&&(aa.setField("scale",U.$view.scale),U.$view=aa);A&&(U.$config=A);return ja({vars:U,spatialReference:q})},new v,F,q)};var H=r.prototype;H.repurposeFeature=function(da){da.geometry&&!da.geometry.spatialReference&&
(da.geometry.spatialReference=this._spatialReference);this._arcadeFeature.repurposeFromGraphicLikeObject(da.geometry,da.attributes,{fields:this.fields});return this._arcadeFeature};H.repurposeAdapter=function(da){this._arcadeFeature.repurposeFromAdapter(da,{fields:this.fields});return this._arcadeFeature};H.createDictionary=function(){return new this._arcadeDictionary};H.referencesMember=function(da){return this._arcade.referencesMember(this._syntaxTree,da)};H.referencesFunction=function(da){return this._arcade.referencesFunction(this._syntaxTree,
da)};H.referencesGeometry=function(){return this._referencesGeometry};H.referencesScale=function(){return this._referencesScale};H.extractFieldLiterals=function(da){return this._arcade.extractFieldLiterals(this._syntaxTree,da)};return r}();e.ArcadeExpression=u;e.createDictionaryExpression=(r,H,da,fa)=>u.create(r,H,da,fa,["$feature","$view"]);e.createLabelExpression=(r,H,da)=>u.create(r,H,da,null,["$feature"]);e.createRendererExpression=p;e.createVVExpression=p;e.default=u;e.loadArcade=K;Object.defineProperty(e,
"__esModule",{value:!0})})},"esri/request":function(){define("require ./core/global ./core/has ./core/lang ./config ./core/maybe ./core/Error ./core/urlUtils ./core/promiseUtils ./kernel ./support/apiKeyUtils ./support/requestUtils".split(" "),function(n,e,Z,M,p,K,h,u,r,H,da,fa){async function F(L,ia){var pa=u.isDataProtocol(L);const qa=u.isBlobProtocol(L);qa||pa||(L=u.normalize(L));const wa={url:L,requestOptions:{...K.unwrap(ia)}};let Ca=u.getInterceptor(L);if(Ca){L=await N(Ca,wa);if(null!=L)return{data:L,
getHeader:T,requestOptions:wa.requestOptions,url:wa.url};Ca.after||Ca.error||(Ca=null)}L=wa.url;ia=wa.requestOptions;if("image"===ia.responseType){if(Z("host-webworker")||Z("host-node"))throw d("request:invalid-parameters",Error("responseType 'image' is not supported in Web Workers or Node environment"),wa);}else if(pa)throw d("request:invalid-parameters",Error("Data URLs are not supported for responseType \x3d "+ia.responseType),wa);if("head"===ia.method){if(ia.body)throw d("request:invalid-parameters",
Error("body parameter cannot be set when method is 'head'"),wa);if(pa||qa)throw d("request:invalid-parameters",Error("data and blob URLs are not supported for method 'head'"),wa);}await m();if(J)return J.execute(L,ia);const ha=r.createAbortController();r.onAbort(ia,()=>ha.abort());pa=await U({controller:ha,credential:null,credentialToken:null,fetchOptions:null,hasToken:!1,interceptor:Ca,params:wa,redoRequest:!1,useIdentity:O.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1});Ca&&Ca.after&&Ca.after(pa);
return pa}function w(L){u.isBlobProtocol(L)||u.isDataProtocol(L)||(L=u.getOrigin(L))&&-1===F._corsServers.indexOf(L)&&F._corsServers.push(L)}function C(L){L=u.getOrigin(L);return!L||L.endsWith(".arcgis.com")||-1!==F._corsServers.indexOf(L)||u.isTrustedServer(L)}function d(L,ia,pa,qa){let wa="Error";const Ca={url:pa.url,requestOptions:pa.requestOptions,getHeader:T,ssl:!1};if(ia instanceof h)return ia.details?(ia.details=M.clone(ia.details),ia.details.url=pa.url,ia.details.requestOptions=pa.requestOptions):
ia.details=Ca,ia;if(ia){pa=qa&&(S=>qa.headers.get(S));const ha=qa&&qa.status,y=ia.message;y&&(wa=y);pa&&(Ca.getHeader=pa);Ca.httpStatus=(null!=ia.httpCode?ia.httpCode:ia.code)||ha||0;Ca.subCode=ia.subcode;Ca.messageCode=ia.messageCode;Ca.messages="string"===typeof ia.details?[ia.details]:ia.details}return r.isAbortError(ia)?r.createAbortError():new h(L,wa,Ca)}async function m(){Z("host-webworker")?J||(J=await new Promise(function(L,ia){n(["./core/workers/request"],L,ia)})):F._abortableFetch||(F._abortableFetch=
e.fetch.bind(e))}async function v(){H.id||await new Promise(function(L,ia){n(["./identity/IdentityManager"],function(pa){L(Object.freeze({__proto__:null,"default":pa}))},ia)})}async function t(L){const ia=L.params.url,pa=L.params.requestOptions,qa=L.controller.signal,wa=pa.body;let Ca=null,ha=null,y=null;R&&"HTMLFormElement"in e&&(wa instanceof FormData?Ca=wa:wa instanceof HTMLFormElement&&(ha=wa,Ca=new FormData(ha)));"string"===typeof wa&&(y=wa);L.fetchOptions={cache:pa.cacheBust&&!F._abortableFetch.polyfill?
"no-cache":"default",credentials:"same-origin",headers:pa.headers||{},method:"head"===pa.method?"HEAD":"GET",mode:"cors",redirect:"follow",signal:qa};if(Ca||y)L.fetchOptions.body=Ca||y;"anonymous"===pa.authMode&&(L.useIdentity=!1);L.hasToken=!!(/token=/i.test(ia)||pa.query&&pa.query.token||Ca&&Ca.get&&Ca.get("token")||ha&&ha.elements.token);!L.hasToken&&p.apiKey&&da.supportsApiKey(ia)&&(pa.query||(pa.query={}),pa.query.token=p.apiKey,L.hasToken=!0);if(L.useIdentity&&!L.hasToken&&!L.credentialToken&&
!q(ia)&&!r.isAborted(qa)){let S;"immediate"===pa.authMode?(await v(),S=await H.id.getCredential(ia,{signal:qa}),L.credential=S):"no-prompt"===pa.authMode?(await v(),S=await H.id.getCredential(ia,{prompt:!1,signal:qa}).catch(()=>{}),L.credential=S):H.id&&(S=H.id.findCredential(ia));S&&(L.credentialToken=S.token,L.useSSL=!!S.ssl)}}function q(L){return I.some(ia=>ia.test(L))}async function A(L){let ia=L.params.url;const pa=L.params.requestOptions,qa=L.fetchOptions,wa=u.isBlobProtocol(ia)||u.isDataProtocol(ia),
Ca=pa.responseType||"json",ha=wa?0:null!=pa.timeout?pa.timeout:O.timeout;var y=!1;if(!wa){L.useSSL&&(ia=u.toHTTPS(ia));pa.cacheBust&&"default"===qa.cache&&(ia=u.addQueryParameter(ia,"request.preventCache",Date.now()));var S={...pa.query};L.credentialToken&&(S.token=L.credentialToken);y=u.objectToQuery(S);Z("esri-url-encodes-apostrophe")&&(y=y.replace(/'/g,"%27"));const f=ia.length+1+y.length;y="delete"===pa.method||"post"===pa.method||"put"===pa.method||!!pa.body||f>O.maxUrlLength;const V=pa.useProxy||
!!u.getProxyRule(ia);if(V){const g=u.getProxyUrl(ia);var ma=g.path;!y&&ma.length+1+f>O.maxUrlLength&&(y=!0);g.query&&(S={...g.query,...S})}if("HEAD"===qa.method&&(y||V)){if(y){if(f>O.maxUrlLength)throw d("request:invalid-parameters",Error("URL exceeds maximum length"),L.params);throw d("request:invalid-parameters",Error("cannot use POST request when method is 'head'"),L.params);}if(V)throw d("request:invalid-parameters",Error("cannot use proxy when method is 'head'"),L.params);}y?(qa.method="delete"===
pa.method?"DELETE":"put"===pa.method?"PUT":"POST",pa.body?ia=u.addQueryParameters(ia,S):(qa.body=u.objectToQuery(S),qa.headers["Content-Type"]="application/x-www-form-urlencoded")):ia=u.addQueryParameters(ia,S);V&&(L.useProxy=!0,ia=`${ma}?${ia}`);S.token&&R&&qa.body instanceof FormData&&(ma=qa.body,ma.set?ma.set("token",S.token):ma.append("token",S.token));pa.hasOwnProperty("withCredentials")?L.withCredentials=pa.withCredentials:u.hasSameOrigin(ia,u.appUrl)||(u.isTrustedServer(ia)?L.withCredentials=
!0:H.id&&(S=H.id.findServerInfo(ia))&&S.webTierAuth&&(L.withCredentials=!0));L.withCredentials&&(qa.credentials="include")}S=0;let ya=!1;0<ha&&(S=setTimeout(()=>{ya=!0;L.controller.abort()},ha));let za,b;try{if("image"!==pa.responseType||"default"!==qa.cache||"GET"!==qa.method||y||aa(pa.headers)||!wa&&!L.useProxy&&O.proxyUrl&&!C(ia)){if(za=await F._abortableFetch(ia,qa),L.useProxy||w(ia),za.ok&&"HEAD"!==qa.method){switch(Ca){case "array-buffer":b=await za.arrayBuffer();break;case "blob":case "image":b=
await za.blob();break;default:b=await za.text()}S&&(clearTimeout(S),S=0);if("json"===Ca||"xml"===Ca||"document"===Ca)if(b)switch(Ca){case "json":b=JSON.parse(b);break;case "xml":b=ja(b,"application/xml");break;case "document":b=ja(b,"text/html")}else b=null;if(b){if("array-buffer"===Ca||"blob"===Ca){const f=za.headers.get("Content-Type");if(/application\/json|text\/plain/i.test(f)&&750>=b["blob"===Ca?"size":"byteLength"])try{const V=await (new Response(b)).json();V.error&&(b=V)}catch{}}"image"===
Ca&&b instanceof Blob&&(b=await D(URL.createObjectURL(b),L,!0))}}}else b=await D(ia,L)}catch(f){if("AbortError"===f.name){if(ya)throw Error("Timeout exceeded");throw r.createAbortError("Request canceled");}if(!za&&f instanceof TypeError&&O.proxyUrl&&!pa.body&&"delete"!==pa.method&&"head"!==pa.method&&"post"!==pa.method&&"put"!==pa.method&&!L.useProxy)L.redoRequest=!0,u.addProxyRule({proxyUrl:O.proxyUrl,urlPrefix:u.removeFile(u.urlToObject(ia).path)});else throw f;}finally{S&&clearTimeout(S)}return[za,
b]}async function N(L,ia){if(null!=L.responseData)return L.responseData;L.headers&&(ia.requestOptions.headers={...ia.requestOptions.headers,...L.headers});L.query&&(ia.requestOptions.query={...ia.requestOptions.query,...L.query});if(L.before){let pa,qa;try{qa=await L.before(ia)}catch(wa){pa=d("request:interceptor",wa,ia)}if(qa instanceof Error||qa instanceof h)pa=d("request:interceptor",qa,ia);if(pa)throw L.error&&L.error(pa),pa;return qa}}function aa(L){if(L)for(const ia of Object.getOwnPropertyNames(L))if(L[ia])return!0;
return!1}function ja(L,ia){let pa;try{pa=(new DOMParser).parseFromString(L,ia)}catch{}if(!pa||pa.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return pa}async function U(L){await t(L);let ia;try{do[ia,pa]=await A(L);while(!await G(L,ia,pa))}catch(Ca){var pa=d("request:server",Ca,L.params,ia);pa.details.ssl=L.useSSL;L.interceptor&&L.interceptor.error&&L.interceptor.error(pa);throw pa;}var qa=L.params.url;/\/sharing\/rest\/(accounts|portals)\/self/i.test(qa)&&!L.hasToken&&
!L.credentialToken&&pa&&pa.user&&pa.user.username&&!u.isTrustedServer(qa)&&(qa=u.getOrigin(qa,!0))&&O.trustedServers.push(qa);if((qa=L.credential)&&H.id){var wa=H.id.findServerInfo(qa.server);if(wa=wa&&wa.owningSystemUrl)wa=wa.replace(/\/?$/,"/sharing"),(qa=H.id.findCredential(wa,qa.userId))&&-1===H.id._getIdenticalSvcIdx(wa,qa)&&qa.resources.unshift(wa)}return{data:pa,getHeader:ia?Ca=>ia.headers.get(Ca):T,requestOptions:L.params.requestOptions,ssl:L.useSSL,url:L.params.url}}async function G(L,ia,
pa){if(L.redoRequest)return L.redoRequest=!1;if(!ia)return!0;if(!ia.ok)throw Error(`Unable to load ${ia.url} status: ${ia.status}`);let qa;pa&&pa.error&&(qa=Object.assign(Error(),pa.error));let wa,Ca,ha;qa&&(wa=Number(qa.code),Ca=qa.hasOwnProperty("subcode")?Number(qa.subcode):null,ha=(ha=qa.messageCode)&&ha.toUpperCase());ia=L.params.requestOptions.authMode;if(403===wa&&(4===Ca||qa.message&&-1<qa.message.toLowerCase().indexOf("ssl")&&-1===qa.message.toLowerCase().indexOf("permission"))){if(!L.useSSL)return L.useSSL=
!0,!1}else if(!L.hasToken&&L.useIdentity&&("no-prompt"!==ia||498===wa)&&-1!==z.indexOf(wa)&&!q(L.params.url)&&(403!==wa||-1===l.indexOf(ha)&&(null==Ca||2===Ca&&L.credentialToken))){await v();try{const y=await H.id.getCredential(L.params.url,{error:d("request:server",qa,L.params),prompt:"no-prompt"!==ia,signal:L.controller.signal,token:L.credentialToken});L.credential=y;L.credentialToken=y.token;L.useSSL=L.useSSL||y.ssl;return!1}catch(y){if("no-prompt"===ia)return L.credential=null,L.credentialToken=
null,!1;qa=y}}if(qa)throw qa;return!0}function D(L,ia,pa=!1){const qa=ia.controller.signal,wa=new Image;wa.crossOrigin=ia.withCredentials?"use-credentials":"anonymous";wa.alt="";wa.src=L;return fa.loadImageAsync(wa,L,pa,qa)}let J;const O=p.request,R="FormData"in e,z=[499,498,403,401],l=["COM_0056","COM_0057","SB_0008"],I=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],T=()=>null;F._abortableFetch=null;F._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"];
return F})},"esri/support/apiKeyUtils":function(){define(["exports","../core/urlUtils"],function(n,e){const Z=["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"];n.isApiKey=function(M){return M&&4<M.length&&M.startsWith("AAPK")};n.supportsApiKey=function(M){const p=e.getOrigin(M,!0);return p&&p.endsWith(".arcgis.com")&&!Z.includes(p)&&!M.endsWith("/sharing/rest/generateToken")};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/support/requestUtils":function(){define(["exports",
"../core/has","../core/maybe","../core/promiseUtils"],function(n,e,Z,M){function p(){try{return new DOMException("Aborted","AbortError")}catch{const K=Error();K.name="AbortError";return K}}n.loadImageAsync=function(K,h,u=!1,r){return new Promise((H,da)=>{if(M.isAborted(r))da(p());else{var fa=()=>{C();da(Error(`Unable to load ${h}`))},F=()=>{const d=K;C();H(d)},w=()=>{if(K){var d=K;C();d.src="";da(p())}},C=()=>{e("esri-image-decode")||(K.removeEventListener("error",fa),K.removeEventListener("load",
F));K=F=fa=null;Z.isSome(r)&&r.removeEventListener("abort",w);w=null;u&&URL.revokeObjectURL(h)};Z.isSome(r)&&r.addEventListener("abort",w);e("esri-image-decode")?K.decode().then(F,fa):(K.addEventListener("error",fa),K.addEventListener("load",F))}})};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/support/fieldType":function(){define(["exports","../../core/jsonMap"],function(n,e){e=new e.JSONMap({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",
esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"});n.kebabDict=e;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/graphics/featureConversionUtils":function(){define("exports ../../core/Logger ../../core/Error ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),
function(n,e,Z,M,p,K,h){function u(g,x){return g?x?4:3:x?3:2}function r(g,x,P,Q){if(g){if(P)return x&&Q?b:ya;if(x&&Q)return za}else if(x&&Q)return ya;return ma}function H({scale:g,translate:x},P){return Math.round((P-x[0])/g[0])}function da({scale:g,translate:x},P){return Math.round((x[1]-P)/g[1])}function fa({scale:g,translate:x},P){return P*g[0]+x[0]}function F({scale:g,translate:x},P){return x[1]-P*g[1]}function w(g){g=g.coords;return{x:g[0],y:g[1]}}function C(g,x){g.coords[0]=x.x;g.coords[1]=
x.y;return g}function d(g){g=g.coords;return{x:g[0],y:g[1],z:g[2]}}function m(g,x){g.coords[0]=x.x;g.coords[1]=x.y;g.coords[2]=x.z;return g}function v(g){g=g.coords;return{x:g[0],y:g[1],m:g[2]}}function t(g,x){g.coords[0]=x.x;g.coords[1]=x.y;g.coords[2]=x.m;return g}function q(g){g=g.coords;return{x:g[0],y:g[1],z:g[2],m:g[3]}}function A(g,x){g.coords[0]=x.x;g.coords[1]=x.y;g.coords[2]=x.z;g.coords[3]=x.m;return g}function N(g,x){return g&&x?A:g?m:x?t:C}function aa(g,x,P,Q,ba){P=N(P,Q);for(const W of x){const {geometry:ka,
attributes:la}=W;let na;ka&&(na=P(new h,ka));g.push(new p(na,la,null,la[ba]))}return g}function ja(g,x,P,Q){for(const ba of x){const {geometry:W,attributes:ka}=ba;let la;W&&(la=U(W,P,Q));g.push({attributes:ka,geometry:la})}return g}function U(g,x,P){if(!g)return null;const Q=u(x,P),ba=[];for(let W=0;W<g.coords.length;W+=Q){const ka=[];for(let la=0;la<Q;la++)ka.push(g.coords[W+la]);ba.push(ka)}return x?P?{points:ba,hasZ:x,hasM:P}:{points:ba,hasZ:x}:P?{points:ba,hasM:P}:{points:ba}}function G(g,x,P,
Q,ba){P=u(P,Q);for(const W of x){x=W.geometry;Q=W.attributes;let ka;x&&(ka=D(new h,x,P));g.push(new p(ka,Q,null,Q[ba]))}return g}function D(g,x,P=u(x.hasZ,x.hasM)){g.lengths[0]=x.points.length;const Q=g.coords;let ba=0;for(const W of x.points)for(x=0;x<P;x++)Q[ba++]=W[x];return g}function J(g,x,P){if(!g)return null;const Q=u(x,P),{coords:ba,lengths:W}=g;g=[];let ka=0;for(const la of W){const na=[];for(let ua=0;ua<la;ua++){const ta=[];for(let xa=0;xa<Q;xa++)ta.push(ba[ka++]);na.push(ta)}g.push(na)}return x?
P?{paths:g,hasZ:x,hasM:P}:{paths:g,hasZ:x}:P?{paths:g,hasM:P}:{paths:g}}function O(g,x,P,Q,ba){P=u(P,Q);for(const W of x){x=W.geometry;Q=W.attributes;let ka;x&&(ka=R(new h,x,P));g.push(new p(ka,Q,null,Q[ba]))}return g}function R(g,x,P=u(x.hasZ,x.hasM)){const {lengths:Q,coords:ba}=g;let W=0;for(const ka of x.paths){for(const la of ka)for(x=0;x<P;x++)ba[W++]=la[x];Q.push(ka.length)}return g}function z(g,x,P){if(!g)return null;const Q=u(x,P),{coords:ba,lengths:W}=g;g=[];let ka=0;for(const la of W){const na=
[];for(let ua=0;ua<la;ua++){const ta=[];for(let xa=0;xa<Q;xa++)ta.push(ba[ka++]);na.push(ta)}g.push(na)}return x?P?{rings:g,hasZ:x,hasM:P}:{rings:g,hasZ:x}:P?{rings:g,hasM:P}:{rings:g}}function l(g,x,P,Q,ba){for(const W of x){x=W.geometry;const ka=W.centroid,la=W.attributes;let na;x&&(na=I(new h,x,P,Q));ka?g.push(new p(na,la,C(new h,ka),la[ba])):g.push(new p(na,la,null,la[ba]))}return g}function I(g,x,P=x.hasZ,Q=x.hasM){T(g,x.rings,P,Q);return g}function T(g,x,P,Q){P=u(P,Q);const {lengths:ba,coords:W}=
g;Q=0;ba.length=W.length=0;for(const ka of x){for(const la of ka)for(x=0;x<P;x++)W[Q++]=la[x];ba.push(ka.length)}return g}function L(g,x,P,Q,ba,W){g.length=0;if(!P){for(const ka of x)g.push(new p(null,ka.attributes,null,ka.attributes[W]));return g}switch(P){case "esriGeometryPoint":return aa(g,x,Q,ba,W);case "esriGeometryMultipoint":return G(g,x,Q,ba,W);case "esriGeometryPolyline":return O(g,x,Q,ba,W);case "esriGeometryPolygon":return l(g,x,Q,ba,W);default:y.error("convertToFeatureSet:unknown-geometry",
new Z(`Unable to parse unknown geometry type '${P}'`)),g.length=0}return g}function ia(g,x,P,Q){g=g&&("coords"in g?g:g.geometry);if(!g)return null;switch(x){case "esriGeometryPoint":return x=w,P&&Q?x=q:P?x=d:Q&&(x=v),x(g);case "esriGeometryMultipoint":return U(g,P,Q);case "esriGeometryPolyline":return J(g,P,Q);case "esriGeometryPolygon":return z(g,P,Q);default:y.error("convertToGeometry:unknown-geometry",new Z(`Unable to parse unknown geometry type '${x}'`))}}function pa(g,x,P,Q,ba){g.length=0;switch(P){case "esriGeometryPoint":var W=
w;Q&&ba?W=q:Q?W=d:ba&&(W=v);for(var ka of x){const {geometry:la,attributes:na}=ka;Q=la?W(la):null;g.push({attributes:na,geometry:Q})}break;case "esriGeometryMultipoint":return ja(g,x,Q,ba);case "esriGeometryPolyline":for(const la of x){const {geometry:na,attributes:ua}=la;let ta;na&&(ta=J(na,Q,ba));g.push({attributes:ua,geometry:ta})}break;case "esriGeometryPolygon":for(W of x){const {geometry:la,attributes:na,centroid:ua}=W;let ta;la&&(ta=z(la,Q,ba));ua?(ka=w(ua),g.push({attributes:na,centroid:ka,
geometry:ta})):g.push({attributes:na,geometry:ta})}break;default:y.error("convertToFeatureSet:unknown-geometry",new Z(`Unable to parse unknown geometry type '${P}'`))}return g}function qa(g,x,P,Q,ba,W,ka=P,la=Q){g.lengths.length&&(g.lengths.length=0);g.coords.length&&(g.coords.length=0);if(!x||!x.coords.length)return null;ba=S[ba];const {coords:na,lengths:ua}=x;x=u(P,Q);const ta=u(P&&ka,Q&&la);P=r(P,Q,ka,la);if(!ua.length)return P(g.coords,na,0,0,H(W,na[0]),da(W,na[1])),g.lengths.length&&(g.lengths.length=
0),g.coords.length=x,g;let xa,Ba=0,Ea,Ka=0;for(const Ga of ua){if(Ga<ba)continue;let Ja=0;Ea=Ka;la=Q=H(W,na[Ba]);xa=ka=da(W,na[Ba+1]);P(g.coords,na,Ea,Ba,la,xa);Ja++;Ba+=x;Ea+=ta;for(let Ha=1;Ha<Ga;Ha++,Ba+=x)if(la=H(W,na[Ba]),xa=da(W,na[Ba+1]),la!==Q||xa!==ka)P(g.coords,na,Ea,Ba,la-Q,xa-ka),Ea+=ta,Ja++,Q=la,ka=xa;Ja>=ba&&(g.lengths.push(Ja),Ka=Ea)}g.coords.length=Ka;return g.coords.length?g:null}function wa(g,x,P,Q,ba,W,ka){let la=Q,na=0;for(let ta=W+P;ta<ka;ta+=P){{var ua=x[ta];const xa=x[ta+1],
Ba=x[ka],Ea=x[ka+1];let Ka=x[W],Ga=x[W+1],Ja=Ba-Ka,Ha=Ea-Ga;if(0!==Ja||0!==Ha){const Ia=((ua-Ka)*Ja+(xa-Ga)*Ha)/(Ja*Ja+Ha*Ha);1<Ia?(Ka=Ba,Ga=Ea):0<Ia&&(Ka+=Ja*Ia,Ga+=Ha*Ia)}Ja=ua-Ka;Ha=xa-Ga;ua=Ja*Ja+Ha*Ha}ua>la&&(na=ta,la=ua)}la>Q&&(na-W>P&&wa(g,x,P,Q,ba,W,na),ba(g,x,g.length,na,x[na],x[na+1]),ka-na>P&&wa(g,x,P,Q,ba,na,ka))}function Ca(g,x,P,Q,ba){const {coords:W,lengths:ka}=x,la=P?Q?b:ya:Q?ya:ma;P=u(P,Q);if(!W.length)return g!==x&&(g.lengths.length=0,g.coords.length=0),g;if(!ka.length)return la(g.coords,
W,0,0,fa(ba,W[0]),F(ba,W[1])),g!==x&&(g.lengths.length=0,g.coords.length=P),g;const [na,ua]=ba.scale;Q=0;for(let ta=0;ta<ka.length;ta++){const xa=ka[ta];g.lengths[ta]=xa;let Ba=fa(ba,W[Q]),Ea=F(ba,W[Q+1]);la(g.coords,W,Q,Q,Ba,Ea);Q+=P;for(let Ka=1;Ka<xa;Ka++,Q+=P)Ba+=W[Q]*na,Ea-=W[Q+1]*ua,la(g.coords,W,Q,Q,Ba,Ea)}g!==x&&(g.lengths.length=ka.length,g.coords.length=W.length);return g}function ha(g,x,P,Q){let ba=0,W=g[Q*x],ka=g[Q*(x+1)];for(let la=1;la<P;la++){const na=W+g[Q*(x+la)],ua=ka+g[Q*(x+la)+
1],ta=(na-W)*(ua+ka);W=na;ka=ua;ba+=ta}return.5*ba}const y=e.getLogger("esri.tasks.support.optimizedFeatureSet"),S={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},ma=(g,x,P,Q,ba,W)=>{g[P]=ba;g[P+1]=W},ya=(g,x,P,Q,ba,W)=>{g[P]=ba;g[P+1]=W;g[P+2]=x[Q+2]},za=(g,x,P,Q,ba,W)=>{g[P]=ba;g[P+1]=W;g[P+2]=x[Q+3]},b=(g,x,P,Q,ba,W)=>{g[P]=ba;g[P+1]=W;g[P+2]=x[Q+2];g[P+3]=x[Q+3]},f=[],V=[];n.convertFromFeature=function(g,x,P,Q,ba){f[0]=g;[g]=L(V,f,x,P,Q,ba);f.length=
V.length=0;return g};n.convertFromFeatureSet=function(g,x){const P=new K,{hasM:Q,hasZ:ba,features:W,objectIdFieldName:ka,spatialReference:la,geometryType:na,exceededTransferLimit:ua,transform:ta,fields:xa}=g;xa&&(P.fields=xa);P.geometryType=na;P.objectIdFieldName=ka||x;P.spatialReference=la;if(!P.objectIdFieldName)return y.error(new Z("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),P;W&&L(P.features,W,na,ba,Q,P.objectIdFieldName);ua&&(P.exceededTransferLimit=ua);Q&&
(P.hasM=Q);ba&&(P.hasZ=ba);ta&&(P.transform=ta);return P};n.convertFromFeatures=L;n.convertFromGeometry=function(g,x,P){if(!g)return null;const Q=new h;"hasZ"in g&&null==x&&(x=g.hasZ);"hasM"in g&&null==P&&(P=g.hasM);if(M.isPoint(g))return N(null!=x?x:null!=g.z,null!=P?P:null!=g.m)(Q,g);if(M.isPolygon(g))return I(Q,g,x,P);if(M.isPolyline(g))return R(Q,g,u(x,P));if(M.isMultipoint(g))return D(Q,g,u(x,P));y.error("convertFromGeometry:unknown-geometry",new Z(`Unable to parse unknown geometry type '${g}'`))};
n.convertFromGraphics=function(g,x,P,Q,ba,W){const ka=g.length;switch(P){case "esriGeometryPoint":aa(g,x,Q,ba,W);break;case "esriGeometryMultipoint":G(g,x,Q,ba,W);break;case "esriGeometryPolyline":O(g,x,Q,ba,W);break;case "esriGeometryPolygon":l(g,x,Q,ba,W);break;default:y.error("convertToFeatureSet:unknown-geometry",new Z(`Unable to parse unknown geometry type '${P}'`))}for(Q=0;Q<x.length;Q++)g[Q+ka].geometryType=P,g[Q+ka].insertAfter=x[Q].insertAfter,g[Q+ka].groupId=x[Q].groupId;return g};n.convertFromMultipoint=
D;n.convertFromMultipointFeatures=G;n.convertFromNestedArray=T;n.convertFromPoint=function(g,x,P=N(null!=x.z,null!=x.m)){return P(g,x)};n.convertFromPointFeatures=aa;n.convertFromPolygon=I;n.convertFromPolyline=R;n.convertFromPolylineFeatures=O;n.convertToFeature=function(g,x,P,Q){V[0]=g;pa(f,V,x,P,Q);g=f[0];f.length=V.length=0;return g};n.convertToFeatureSet=function(g){const {objectIdFieldName:x,spatialReference:P,transform:Q,fields:ba,hasM:W,hasZ:ka,features:la,geometryType:na,exceededTransferLimit:ua,
uniqueIdField:ta,queryGeometry:xa,queryGeometryType:Ba}=g;g=pa([],la,na,ka,W);const Ea=ia(xa,Ba,!1,!1);g={features:g,fields:ba,geometryType:na,objectIdFieldName:x,spatialReference:P,uniqueIdField:ta,queryGeometry:Ea};Q&&(g.transform=Q);ua&&(g.exceededTransferLimit=ua);W&&(g.hasM=W);ka&&(g.hasZ=ka);return g};n.convertToFeatures=pa;n.convertToGeometry=ia;n.convertToMultipoint=U;n.convertToMultipointFeatures=ja;n.convertToPoint=function(g,x,P){return g?x?P?q(g):d(g):P?v(g):w(g):null};n.convertToPolygon=
z;n.convertToPolyline=J;n.deltaDecodeGeometry=function(g,x){const P=g.clone(),Q=g.coords;g=g.lengths;let ba=0;for(let la=0;la<g.length;la++){const na=g[la];var W=Q[x*ba],ka=Q[x*ba+1];for(let ua=1;ua<na;ua++)W+=Q[x*(ba+ua)],ka+=Q[x*(ba+ua)+1],P.coords[x*(ba+ua)]=W,P.coords[x*(ba+ua)+1]=ka;ba+=na}return P};n.deltaEncodeGeometry=function(g,x){const P=g.clone(),Q=g.coords;g=g.lengths;let ba=0;for(let ka=0;ka<g.length;ka++){const la=g[ka];let na=Q[x*ba];var W=Q[x*ba+1];for(let ua=1;ua<la;ua++){const ta=
Q[x*(ba+ua)],xa=Q[x*(ba+ua)+1];W=xa-W;P.coords[x*(ba+ua)]=ta-na;P.coords[x*(ba+ua)+1]=W;na=ta;W=xa}ba+=la}return P};n.generalizeOptimizedGeometry=function(g,x,P,Q,ba,W,ka=P,la=Q){g.lengths.length&&(g.lengths.length=0);g.coords.length&&(g.coords.length=0);if(!x||!x.coords.length)return null;ba=S[ba];const {coords:na,lengths:ua}=x;x=u(P,Q);const ta=u(P&&ka,Q&&la);P=r(P,Q,ka,la);if(!ua.length)return P(g.coords,na,0,0,na[0],na[1]),g.lengths.length&&(g.lengths.length=0),g.coords.length=x,g;Q=0;W*=W;for(const xa of ua){if(xa<
ba){Q+=xa*x;continue}ka=g.coords.length/ta;la=Q;const Ba=Q+(xa-1)*x;P(g.coords,na,g.coords.length,la,na[la],na[la+1]);wa(g.coords,na,x,W,P,la,Ba);P(g.coords,na,g.coords.length,Ba,na[Ba],na[Ba+1]);la=g.coords.length/ta-ka;la>=ba?g.lengths.push(la):g.coords.length=ka*ta;Q+=xa*x}return g.coords.length?g:null};n.getBoundsOptimizedGeometry=function(g,x,P,Q){if(!x||!x.coords||!x.coords.length)return null;P=u(P,Q);let ba=Q=Number.POSITIVE_INFINITY,W=Number.NEGATIVE_INFINITY,ka=Number.NEGATIVE_INFINITY;if(x&&
x.coords){x=x.coords;for(let la=0;la<x.length;la+=P){const na=x[la],ua=x[la+1];Q=Math.min(Q,na);W=Math.max(W,na);ba=Math.min(ba,ua);ka=Math.max(ka,ua)}}g[0]=Q;g[1]=ba;g[2]=W;g[3]=ka;return g};n.getQuantizedArea=function(g,x){const {coords:P,lengths:Q}=g;let ba=g=0;for(let W=0;W<Q.length;W++)ba+=ha(P,g,Q[W],x),g+=W;return Math.abs(ba)};n.getQuantizedBoundsOptimizedGeometry=function(g,x,P,Q){P=u(P,Q);const {lengths:ba,coords:W}=x;Q=x=Number.POSITIVE_INFINITY;let ka=Number.NEGATIVE_INFINITY,la=Number.NEGATIVE_INFINITY,
na=0;for(const ua of ba){let ta=W[na],xa=W[na+1];x=Math.min(ta,x);Q=Math.min(xa,Q);ka=Math.max(ta,ka);la=Math.max(xa,la);na+=P;for(let Ba=1;Ba<ua;Ba++,na+=P){const Ea=W[na],Ka=W[na+1];ta+=Ea;xa+=Ka;0>Ea&&(x=Math.min(x,ta));0<Ea&&(ka=Math.max(ka,ta));0>Ka?Q=Math.min(Q,xa):0<Ka&&(la=Math.max(la,xa))}}g[0]=x;g[1]=Q;g[2]=ka;g[3]=la;return g};n.getSignedQuantizedRingArea=ha;n.quantizeOptimizedFeatureSet=function(g,x){const {geometryType:P,features:Q,hasM:ba,hasZ:W}=x;if(!g)return x;for(let ka=0;ka<Q.length;ka++){const la=
Q[ka],na=la.weakClone();na.geometry=new h;qa(na.geometry,la.geometry,ba,W,P,g);la.centroid&&(na.centroid=new h,qa(na.centroid,la.centroid,ba,W,"esriGeometryPoint",g));Q[ka]=na}x.transform=g;return x};n.quantizeOptimizedGeometry=qa;n.quantizeX=H;n.quantizeY=da;n.removeCollinearVectices=function(g,x,P,Q,ba){if(!x||!x.coords||!x.coords.length)return null;P=S[P];const {coords:W,lengths:ka}=x;x=r(Q,ba,Q,ba);Q=u(Q,ba);let la=ba=0,na=0,ua=0;for(const Ba of ka){la=ua;x(g.coords,W,la,ba,W[ba],W[ba+1]);ba+=
Q;var ta=W[ba];let Ea=W[ba+1],Ka=ta,Ga=Ea;var xa=Ea/ta;la+=Q;x(g.coords,W,la,ba,Ka,Ga);ba+=Q;for(let Ja=2;Ja<Ba;Ja++){ta=W[ba];Ea=W[ba+1];const Ha=Ea/ta,Ia=xa===Ha||!isFinite(xa)&&!isFinite(Ha);xa=Ia&&isFinite(Ha)?0<=xa&&0<=Ha||0>=xa&&0>=Ha:0<=Ga&&0<=Ea||0>=Ga&&0>=Ea;Ia&&xa?(Ka+=ta,Ga+=Ea):(Ka=ta,Ga=Ea,la+=Q);x(g.coords,W,la,ba,Ka,Ga);ba+=Q;xa=Ha}la+=Q;ta=(la-ua)/Q;ta>=P&&(g.lengths[na]=ta,ua=la,na++)}g.coords.length>ua&&(g.coords.length=ua);g.lengths.length>na&&(g.lengths.length=na);return g.coords.length&&
g.lengths.length?g:null};n.removeZMValues=function(g,x,P,Q,ba,W){const ka=u(P,Q);P=r(P,Q,ba,W);Q=x.coords;g.coords.length=0;g.lengths.length=0;g.lengths.push(...x.lengths);for(x=0;x<Q.length;x+=ka)P(g.coords,Q,g.coords.length,x,Q[x],Q[x+1]);return g};n.unquantizeOptimizedFeatureSet=function(g){const {transform:x,features:P,hasM:Q,hasZ:ba}=g;if(!x)return g;for(const W of P)W.geometry&&Ca(W.geometry,W.geometry,Q,ba,x),W.centroid&&Ca(W.centroid,W.centroid,Q,ba,x);g.transform=null;return g};n.unquantizeOptimizedGeometry=
Ca;n.unquantizeX=fa;n.unquantizeY=F;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/graphics/OptimizedFeature":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(n){return function(){function e(Z=null,M={},p,K){this.geohashY=this.geohashX=this.displayId=0;this.geometry=Z;M&&(this.attributes=M);p&&(this.centroid=p);null!=K&&(this.objectId=K)}e.prototype.weakClone=function(){const Z=new e(this.geometry,this.attributes,this.centroid,this.objectId);Z.displayId=this.displayId;
Z.geohashX=this.geohashX;Z.geohashY=this.geohashY;return Z};n._createClass(e,[{key:"hasGeometry",get:function(){return!(!this.geometry||!this.geometry.coords||!this.geometry.coords.length)}}]);return e}()})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(function(){return function(){function n(){this.spatialReference=this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=null;this.hasM=this.hasZ=!1;this.features=[];this.fields=[];
this.transform=null;this.exceededTransferLimit=!1;this.queryGeometry=this.queryGeometryType=this.uniqueIdField=null}n.prototype.weakClone=function(){const e=new n;e.objectIdFieldName=this.objectIdFieldName;e.globalIdFieldName=this.globalIdFieldName;e.geohashFieldName=this.geohashFieldName;e.geometryProperties=this.geometryProperties;e.geometryType=this.geometryType;e.spatialReference=this.spatialReference;e.hasZ=this.hasZ;e.hasM=this.hasM;e.features=this.features;e.fields=this.fields;e.transform=
this.transform;e.exceededTransferLimit=this.exceededTransferLimit;e.uniqueIdField=this.uniqueIdField;e.queryGeometry=this.queryGeometry;e.queryGeometryType=this.queryGeometryType;return e};return n}()})},"esri/layers/graphics/OptimizedGeometry":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(n){return function(){function e(M=[],p=[],K=!1){this.lengths=null!=M?M:[];this.coords=null!=p?p:[];this.hasIndeterminateRingOrder=K}var Z=e.prototype;Z.forEachVertex=function(M){let p=0;
this.lengths.length||M(this.coords[0],this.coords[1]);for(let K=0;K<this.lengths.length;K++){const h=this.lengths[K];for(let u=0;u<h;u++)M(this.coords[2*(u+p)],this.coords[2*(u+p)+1]);p+=h}};Z.clone=function(){return new e(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)};n._createClass(e,[{key:"isPoint",get:function(){return 0===this.lengths.length}}]);return e}()})},"esri/layers/support/FieldsIndex":function(){define(function(){return function(){function n(Z){this.fields=
Z;this._fieldsMap=new Map;this._dateFieldsSet=new Set;this.dateFields=[];if(Z){var M=[];for(const p of Z)if(Z=p&&p.name){const K=Z.toLowerCase().trim();this._fieldsMap.set(Z,p);this._fieldsMap.set(K,p);M.push(K);if("date"===p.type||"esriFieldTypeDate"===p.type)this.dateFields.push(p),this._dateFieldsSet.add(p)}M.sort();this.uid=M.join(",")}}var e=n.prototype;e.destroy=function(){this._fieldsMap.clear()};e.has=function(Z){return null!=this.get(Z)};e.get=function(Z){return null!=Z?this._fieldsMap.get(Z)||
this._fieldsMap.get(Z.toLowerCase().trim()):void 0};e.isDateField=function(Z){return this._dateFieldsSet.has(this.get(Z))};e.normalizeFieldName=function(Z){if(Z=this.get(Z))return Z.name};return n}()})},"esri/layers/graphics/sources/geojson/geojson":function(){define(["exports","../../../../core/Error","../../OptimizedFeature","../../OptimizedGeometry"],function(n,e,Z,M){function p(t){const q=[];t.forEach(A=>q.push(A));return q}function*K(t){switch(t.type){case "Feature":yield t;break;case "FeatureCollection":for(const q of t.features)q&&
(yield q)}}function*h(t){if(!t)return null;switch(t.type){case "Point":yield t.coordinates;break;case "LineString":case "MultiPoint":yield*t.coordinates;break;case "MultiLineString":case "Polygon":for(const q of t.coordinates)yield*q;break;case "MultiPolygon":for(const q of t.coordinates)for(const A of q)yield*A}}function*u(t,q={}){const {geometryType:A,objectIdFieldName:N}=q;for(;;){const {value:aa,done:ja}=t.next();if(ja)break;const {geometry:U,properties:G,id:D}=aa;if(U&&v[U.type]!==A)continue;
const J=G||{};N&&null!=D&&!J[N]&&(J[N]=D);yield new Z(U?fa(new M,U,q):null,J)}}function r(t){for(;;){const {value:q,done:A}=t.next();if(A)return!1;if(2<q.length)return!0}}function H(t){let q=0;for(let A=0;A<t.length;A++){const N=t[A],aa=t[(A+1)%t.length];q+=N[0]*aa[1]-aa[0]*N[1]}return 0>=q}function da(t){const q=t[0],A=t[t.length-1];q[0]===A[0]&&q[1]===A[1]&&q[2]===A[2]||t.push(q);return t}function fa(t,q,A){switch(q.type){case "LineString":return C(t,q.coordinates,A),t;case "MultiLineString":for(const aa of q.coordinates)C(t,
aa,A);return t;case "MultiPoint":return C(t,q.coordinates,A),t;case "MultiPolygon":for(var N of q.coordinates)for(F(t,N[0],A),q=1;q<N.length;q++)w(t,N[q],A);return t;case "Point":return m(t,q.coordinates,A),t;case "Polygon":N=q.coordinates;F(t,N[0],A);for(q=1;q<N.length;q++)w(t,N[q],A);return t}}function F(t,q,A){q=da(q);H(q)?C(t,q,A):d(t,q,A)}function w(t,q,A){q=da(q);H(q)?d(t,q,A):C(t,q,A)}function C(t,q,A){for(const N of q)m(t,N,A);t.lengths.push(q.length)}function d(t,q,A){for(let N=q.length-
1;0<=N;N--)m(t,q[N],A);t.lengths.push(q.length)}function m(t,q,A){const [N,aa,ja]=q;t.coords.push(N,aa);A.hasZ&&t.coords.push(ja||0)}const v={LineString:"esriGeometryPolyline",MultiLineString:"esriGeometryPolyline",MultiPoint:"esriGeometryMultipoint",Point:"esriGeometryPoint",Polygon:"esriGeometryPolygon",MultiPolygon:"esriGeometryPolygon"};n.createOptimizedFeatures=function(t,q){a:for(t=u(K(t),q),q=[];;){const {value:A,done:N}=t.next();if(N){t=q;break a}q.push(A)}return t};n.inferLayerProperties=
function(t,q={}){const A=K(t);t=[];const N=new Set,aa=new Set;var ja=!1;let U=Number.NEGATIVE_INFINITY,G=null,D=!1,J=void 0;({geometryType:q=null}=q);for(var O=!1;;){const {value:l,done:I}=A.next();if(I){var R=G&&1===G.length&&G[0]||null;if(R)for(const pa of t)pa.name===R&&(pa.type="esriFieldTypeOID");return{fields:t,geometryType:q,hasZ:ja,maxObjectId:Math.max(0,U),objectIdFieldName:R,objectIdFieldType:J,unknownFields:p(aa)}}const {geometry:T,properties:L,id:ia}=l;if(T&&(q||(q=v[T.type]),v[T.type]!==
q))continue;ja||(ja=h(T),ja=r(ja));!D&&(D=null!=ia)&&(J=typeof ia,"number"===J&&(G=Object.keys(L).filter(pa=>L[pa]===ia)));D&&"number"===J&&null!=ia&&(U=Math.max(U,ia),1<G.length?G=G.filter(pa=>L[pa]===ia):1===G.length&&(G=L[G[0]]===ia?G:[]));if(!O&&L)for(R in O=!0,L)if(!N.has(R)){var z=L[R];if(null==z)O=!1,aa.add(R);else{a:switch(typeof z){case "string":z="esriFieldTypeString";break a;case "number":z="esriFieldTypeDouble";break a;default:z="unknown"}"unknown"===z?aa.add(R):(aa.delete(R),N.add(R),
t.push({name:R,alias:R,type:z}))}}}};n.validateGeoJSON=function(t){if(!t)throw new e("geojson-layer:empty","GeoJSON data is empty");if("Feature"!==t.type&&"FeatureCollection"!==t.type)throw new e("geojson-layer:unsupported-geojson-object","missing or not supported GeoJSON object type",{data:t});({crs:t}=t);if(t){var q="string"===typeof t?t:"name"===t.type?t.properties.name:null,A=/.*(CRS84H?|4326)$/i;if(!q||!A.test(q))throw new e("geojson-layer:unsupported-crs","unsupported GeoJSON 'crs' member",
{crs:t});}};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/graphics/sources/support/clientSideDefaults":function(){define(["exports","../../../../core/has","../../../../core/lang","../../../../symbols/support/defaultsJSON"],function(n,e,Z,M){n.createDefaultAttributesFunction=function(p,K){if(e("csp-restrictions"))return()=>({[K]:null,...p});try{let h=`this.${K} = null;`;for(const r in p){const H=r.indexOf(".")?`["${r}"]`:`.${r}`;h+=`this${H} = ${JSON.stringify(p[r])};`}const u=new Function(h);
return()=>new u}catch(h){return()=>({[K]:null,...p})}};n.createDefaultTemplate=function(p={}){return[{name:"New Feature",description:"",prototype:{attributes:Z.clone(p)}}]};n.createDrawingInfo=function(p){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===p||"esriGeometryMultipoint"===p?M.defaultPointSymbolJSON:"esriGeometryPolyline"===p?M.defaultPolylineSymbolJSON:M.defaultPolygonSymbolJSON}}};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/support/defaultsJSON":function(){define(["exports"],
function(n){const e=[252,146,31,255],Z={type:"esriSMS",style:"esriSMSCircle",size:6,color:e,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},M={type:"esriSLS",style:"esriSLSSolid",width:.75,color:e};n.defaultColor=e;n.defaultOutlineColor=[153,153,153,255];n.defaultPointSymbolJSON=Z;n.defaultPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}};n.defaultPolylineSymbolJSON=
M;n.defaultTextSymbolJSON={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0};n.errorPointSymbolJSON={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5};n.errorPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null};n.errorPolylineSymbolJSON={type:"esriSLS",style:"esriSLSSolid",
color:[0,0,0,255],width:1.5};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/graphics/data/projectionSupport":function(){define(["exports","../../../geometry/support/spatialReferenceUtils","../../../geometry/support/webMercatorUtils","../../../geometry/projection","../../../geometry/geometryAdapters/json"],function(n,e,Z,M,p){function K(F,w){if(!w)return null;if("x"in w){var C={x:0,y:0};[C.x,C.y]=F(w.x,w.y,r);null!=w.z&&(C.z=w.z);null!=w.m&&(C.m=w.m);return C}if("xmin"in w)return C=
{xmin:0,ymin:0,xmax:0,ymax:0},[C.xmin,C.ymin]=F(w.xmin,w.ymin,r),[C.xmax,C.ymax]=F(w.xmax,w.ymax,r),w.hasZ&&(C.zmin=w.zmin,C.zmax=w.zmax,C.hasZ=!0),w.hasM&&(C.mmin=w.mmin,C.mmax=w.mmax,C.hasM=!0),C;if("rings"in w)return{rings:h(w.rings,F),hasM:w.hasM,hasZ:w.hasZ};if("paths"in w)return{paths:h(w.paths,F),hasM:w.hasM,hasZ:w.hasZ};if("points"in w)return{points:u(w.points,F),hasM:w.hasM,hasZ:w.hasZ}}function h(F,w){const C=[];for(const d of F)C.push(u(d,w));return C}function u(F,w){const C=[];for(const d of F)F=
w(d[0],d[1],[0,0]),C.push(F),2<d.length&&F.push(d[2]),3<d.length&&F.push(d[3]);return C}const r=[0,0],H=K.bind(null,Z.lngLatToXY),da=K.bind(null,Z.xyToLngLat),fa=new (function(){function F(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}var w=F.prototype;w.push=async function(C,d,m){C&&C.length&&d&&m&&e.equals(d,m);const v={geometries:C,inSpatialReference:d,outSpatialReference:m,resolve:null};this._jobs.push(v);return new Promise(t=>{v.resolve=t;null===this._timer&&(this._timer=
setTimeout(this._process,10))})};w._process=function(){this._timer=null;const C=this._jobs.shift();if(C){var {geometries:d,inSpatialReference:m,outSpatialReference:v,resolve:t}=C;Z.canProject(m,v)?e.isWebMercator(v)?t(d.map(H)):t(d.map(da)):t(M.projectMany(p.jsonAdapter,d,m,v,null));0<this._jobs.length&&(this._timer=setTimeout(this._process,10))}};return F}());n.checkProjectionSupport=async function(F,w){w&&(F=Array.isArray(F)?F.map(C=>{var d;return null==(d=C.geometry)?void 0:d.spatialReference}):
[F],await M.initializeProjection(F.map(C=>({source:C,dest:w}))))};n.project=function(F,w,C){if(!F)return F;C||(C=w,w=F.spatialReference);return e.isValid(w)&&e.isValid(C)&&!e.equals(w,C)?Z.canProject(w,C)?e.isWebMercator(C)?H(F):da(F):M.projectMany(p.jsonAdapter,[F],w,C,null)[0]:F};n.projectMany=async function(F,w,C){return fa.push(F,w,C)};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/maybe ../core/Error ../core/promiseUtils ./support/spatialReferenceUtils ./support/Ellipsoid ./Point ./Extent ./Multipoint ./Polygon ./Polyline ../core/mathUtils ../chunks/vec3f64 ../chunks/vec3 ./projectionEllipsoid ../core/unitUtils ../chunks/mat4 ../chunks/pe ./support/aaBoundingRect ./support/geodesicConstants ./support/GeographicTransformation".split(" "),
function(n,e,Z,M,p,K,h,u,r,H,da,fa,F,w,C,d,m,v,t,q,A,N,aa){function ja(){return!!Ga&&q.isLoaded()}function U(Y){M.isNone(Ha)&&(Ha=Promise.all([q.load(),(new Promise(function(ea,ca){n(["../chunks/geometryEngineBase"],ea,ca)})).then(function(ea){return ea.geometryEngineBase}),new Promise(function(ea,ca){n(["./geometryAdapters/hydrated"],ea,ca)})]));return Ha.then(([,ea,{hydratedAdapter:ca}])=>{K.throwIfAborted(Y);Ja=ca;Ga=ea.default;Ga._enableProjection(q.pe)})}function G(Y,ea,ca,oa,Aa=null){if(M.isNone(ca)||
M.isNone(oa))return ea;if(J(ca,oa,Aa))return ea.map(Da=>O(Da,ca,oa));if(M.isNone(Aa)){const Da=aa.cacheKey(ca,oa);void 0!==Ia[Da]?Aa=Ia[Da]:(Aa=D(ca,oa,null),M.isNone(Aa)&&(Aa=new aa),Ia[Da]=Aa)}if(M.isNone(Ga))throw new Sa;return Ga._project(Y,ea,ca,oa,Aa)}function D(Y,ea,ca=null){if(M.isNone(Ga))throw new Sa;if(M.isNone(Y)||M.isNone(ea))return null;Y=Ga._getTransformation(Ja,Y,ea,ca,null==ca?void 0:ca.spatialReference);return null!==Y?aa.fromGE(Y):null}function J(Y,ea,ca){return ca?!1:h.equals(Y,
ea)?!0:h.isValid(Y)&&h.isValid(ea)&&!!Ba(Y,ea,cb)}function O(Y,ea,ca){if(!Y)return Y;if("x"in Y){var oa=new r;return R(Y,ea,oa,ca)?oa:null}return"xmin"in Y?(oa=new H,T(Y,ea,oa,ca)?oa:null):"rings"in Y?(oa=new fa,I(Y,ea,oa,ca)?oa:null):"paths"in Y?(oa=new F,l(Y,ea,oa,ca)?oa:null):"points"in Y?(oa=new da,z(Y,ea,oa,ca)?oa:null):null}function R(Y,ea,ca,oa,Aa=0){Qa[0]=Y.x;Qa[1]=Y.y;const Da=Y.z;Qa[2]=void 0!==Da?Da:Aa;if(!qa(Qa,ea,0,Qa,oa,0,1))return!1;ca.x=Qa[0];ca.y=Qa[1];ca.spatialReference=oa;void 0===
Da?(ca.z=void 0,ca.hasZ=!1):(ca.z=Qa[2],ca.hasZ=!0);void 0===Y.m?(ca.m=void 0,ca.hasM=!1):(ca.m=Y.m,ca.hasM=!0);return!0}function z(Y,ea,ca,oa,Aa=0){const {points:Da,hasZ:Na,hasM:Oa}=Y;Y=[];const ab=Da.length,Za=[];for(var $a of Da)Za.push($a[0],$a[1],Na?$a[2]:Aa);if(!qa(Za,ea,0,Za,oa,0,ab))return!1;for(ea=0;ea<ab;++ea){Aa=3*ea;$a=Za[Aa];const gb=Za[Aa+1];Na&&Oa?Y.push([$a,gb,Za[Aa+2],Da[ea][3]]):Na?Y.push([$a,gb,Za[Aa+2]]):Oa?Y.push([$a,gb,Da[ea][2]]):Y.push([$a,gb])}ca.points=Y;ca.spatialReference=
oa;ca.hasZ=Na;ca.hasM=Oa;return!0}function l(Y,ea,ca,oa,Aa=0){const {paths:Da,hasZ:Na,hasM:Oa}=Y;Y=[];if(!wa(Da,Na,Oa,ea,Y,oa,Aa))return!1;ca.paths=Y;ca.spatialReference=oa;ca.hasZ=Na;ca.hasM=Oa;return!0}function I(Y,ea,ca,oa,Aa=0){const {rings:Da,hasZ:Na,hasM:Oa}=Y;Y=[];if(!wa(Da,Na,Oa,ea,Y,oa,Aa))return!1;ca.rings=Y;ca.spatialReference=oa;ca.hasZ=Na;ca.hasM=Oa;return!0}function T(Y,ea,ca,oa,Aa=0){const {xmin:Da,ymin:Na,xmax:Oa,ymax:ab,hasZ:Za,hasM:$a}=Y;if(!L(Da,Na,Za?Y.zmin:Aa,ea,Qa,oa))return!1;
ca.xmin=Qa[0];ca.ymin=Qa[1];Za&&(ca.zmin=Qa[2]);if(!L(Oa,ab,Za?Y.zmax:Aa,ea,Qa,oa))return!1;ca.xmax=Qa[0];ca.ymax=Qa[1];Za&&(ca.zmax=Qa[2]);$a&&(ca.mmin=Y.mmin,ca.mmax=Y.mmax);ca.spatialReference=oa;return!0}function L(Y,ea,ca,oa,Aa,Da){Ta[0]=Y;Ta[1]=ea;Ta[2]=ca;return qa(Ta,oa,0,Aa,Da,0,1)}function ia(Y,ea,ca,oa){if(M.isNone(ea)||M.isNone(oa)||2>Y.length)return!1;2===Y.length&&(Ta[0]=Y[0],Ta[1]=Y[1],Ta[2]=0,Y=Ta);return qa(Y,ea,0,ca,oa,0,1)}function pa(Y,ea,ca){M.isNone(ea)?Y=!1:(ea=ha(ea,fb),ea=
ra[ea][6],M.isNone(ea)?Y=!1:(ea(Y,0,Ta,0),ca!==Ta&&(ca[0]=Ta[0],ca[1]=Ta[1],2<ca.length&&(ca[2]=Ta[2])),Y=!0));return Y}function qa(Y,ea,ca,oa,Aa,Da,Na=1){ea=Ba(ea,Aa,cb);if(M.isNone(ea))return!1;if(ea===y){if(Y===oa&&ca===Da)return!0;Na=ca+3*Na;for(let Oa=ca,ab=Da;Oa<Na;Oa++,ab++)oa[ab]=Y[Oa];return!0}Na=ca+3*Na;for(let Oa=ca,ab=Da;Oa<Na;Oa+=3,ab+=3)ea(Y,Oa,oa,ab);return!0}function wa(Y,ea,ca,oa,Aa,Da,Na=0){const Oa=[];for(const ab of Y)for(const Za of ab)Oa.push(Za[0],Za[1],ea?Za[2]:Na);if(!qa(Oa,
oa,0,Oa,Da,0,Oa.length/3))return!1;oa=0;Aa.length=0;for(const ab of Y){Y=[];for(const Za of ab)ea&&ca?Y.push([Oa[oa++],Oa[oa++],Oa[oa++],Za[3]]):ea?Y.push([Oa[oa++],Oa[oa++],Oa[oa++]]):(ca?Y.push([Oa[oa++],Oa[oa++],Za[2]]):Y.push([Oa[oa++],Oa[oa++]]),oa++);Aa.push(Y)}return!0}function Ca(Y,ea,ca){const oa=Math.sin(ea);ea=Math.cos(ea);const Aa=Math.sin(Y);Y=Math.cos(Y);ca[0]=-oa;ca[4]=-Aa*ea;ca[8]=Y*ea;ca[12]=0;ca[1]=ea;ca[5]=-Aa*oa;ca[9]=Y*oa;ca[13]=0;ca[2]=0;ca[6]=Y;ca[10]=Aa;ca[14]=0;ca[3]=0;ca[7]=
0;ca[11]=0;ca[15]=1;return ca}function ha(Y,ea){if(ea.spatialReference===Y)return ea.spatialReferenceId;ea.spatialReference=Y;"metersPerUnit"in ea&&(ea.metersPerUnit=v.getMetersPerUnitForSR(Y,1));return Y.wkt===m.SphericalECEFSpatialReference.wkt?ea.spatialReferenceId=1:h.isWGS84(Y)?ea.spatialReferenceId=2:h.isWebMercator(Y)?ea.spatialReferenceId=3:Y.wkt===m.WGS84ECEFSpatialReference.wkt?ea.spatialReferenceId=4:4490===Y.wkid?ea.spatialReferenceId=5:Y.wkt===m.SphericalPCPFMars.wkt?ea.spatialReferenceId=
7:Y.wkt===m.SphericalPCPFMoon.wkt?ea.spatialReferenceId=9:h.isMars(Y)?ea.spatialReferenceId=8:h.isMoon(Y)?ea.spatialReferenceId=10:ea.spatialReferenceId=0}function y(Y,ea,ca,oa){Y!==ca&&(ca[oa++]=Y[ea++],ca[oa++]=Y[ea++],ca[oa]=Y[ea])}function S(Y,ea,ca,oa){ca[oa++]=Ua*(Y[ea++]/u.earth.radius);ca[oa++]=Ua*(Math.PI/2-2*Math.atan(Math.exp(-1*Y[ea++]/u.earth.radius)));ca[oa]=Y[ea]}function ma(Y,ea,ca,oa){S(Y,ea,ca,oa);x(ca,oa,ca,oa)}function ya(Y,ea,ca,oa){S(Y,ea,ca,oa);na(ca,oa,ca,oa)}function za(Y,
ea,ca,oa,Aa){var Da=.4999999*Math.PI;Da=w.clamp(Va*Y[ea+1],-Da,Da);Da=Math.sin(Da);ca[oa++]=Va*Y[ea]*Aa.radius;ca[oa++]=Aa.halfSemiMajorAxis*Math.log((1+Da)/(1-Da));ca[oa]=Y[ea+2]}function b(Y,ea,ca,oa){za(Y,ea,ca,oa,u.earth)}function f(Y,ea,ca,oa,Aa){Aa+=Y[ea+2];const Da=Va*Y[ea+1];Y=Va*Y[ea];ea=Math.cos(Da);ca[oa++]=Math.cos(Y)*ea*Aa;ca[oa++]=Math.sin(Y)*ea*Aa;ca[oa]=Math.sin(Da)*Aa}function V(Y,ea,ca,oa){f(Y,ea,ca,oa,u.moon.radius)}function g(Y,ea,ca,oa){f(Y,ea,ca,oa,u.mars.radius)}function x(Y,
ea,ca,oa){f(Y,ea,ca,oa,u.earth.radius)}function P(Y,ea,ca,oa,Aa){var Da=Y[ea];const Na=Y[ea+1];ea=Y[ea+2];Y=Math.sqrt(Da*Da+Na*Na+ea*ea);ea=w.asinClamped(ea/(0===Y?1:Y));Da=Math.atan2(Na,Da);ca[oa++]=Ua*Da;ca[oa++]=Ua*ea;ca[oa]=Y-Aa}function Q(Y,ea,ca,oa){P(Y,ea,ca,oa,u.moon.radius)}function ba(Y,ea,ca,oa){P(Y,ea,ca,oa,u.mars.radius)}function W(Y,ea,ca,oa){P(Y,ea,ca,oa,u.earth.radius)}function ka(Y,ea,ca,oa){W(Y,ea,ca,oa);b(ca,oa,ca,oa)}function la(Y,ea,ca,oa){W(Y,ea,ca,oa);na(ca,oa,ca,oa)}function na(Y,
ea,ca,oa){{var Aa=u.earth;const Na=Va*Y[ea];var Da=Va*Y[ea+1];Y=Y[ea+2];ea=Math.sin(Da);Da=Math.cos(Da);const Oa=Aa.radius/Math.sqrt(1-Aa.eccentricitySquared*ea*ea);ca[oa++]=(Oa+Y)*Da*Math.cos(Na);ca[oa++]=(Oa+Y)*Da*Math.sin(Na);ca[oa++]=(Oa*(1-Aa.eccentricitySquared)+Y)*ea}}function ua(Y,ea,ca,oa){var Aa=N.earthEllipsoidConstants,Da=Y[ea],Na=Y[ea+1];Y=Y[ea+2];let Oa;ea=Math.abs(Y);var ab=Da*Da+Na*Na;var Za=Math.sqrt(ab);var $a=ab+Y*Y;var gb=Math.sqrt($a);Da=Math.atan2(Na,Da);var kb=Y*Y/$a;$a=ab/
$a;Na=Aa.a2/gb;ab=Aa.a3-Aa.a4/gb;.3<$a?(kb=ea/gb*(1+$a*(Aa.a1+Na+kb*ab)/gb),gb=Math.asin(kb),Na=kb*kb,$a=Math.sqrt(1-Na)):($a=Za/gb*(1-kb*(Aa.a5-Na-$a*ab)/gb),gb=Math.acos($a),Na=1-$a*$a,kb=Math.sqrt(Na));Oa=1-u.earth.eccentricitySquared*Na;Na=u.earth.radius/Math.sqrt(Oa);Aa=Aa.a6*Na;Na=Za-Na*$a;ab=ea-Aa*kb;ea=$a*Na+kb*ab;Za=$a*ab-kb*Na;Aa=Za/(Aa/Oa+ea);gb+=Aa;0>Y&&(gb=-gb);ca[oa++]=Ua*Da;ca[oa++]=Ua*gb;ca[oa]=ea+Za*Aa/2}function ta(Y,ea,ca,oa){ua(Y,ea,ca,oa);x(ca,oa,ca,oa)}function xa(Y,ea,ca,oa){ua(Y,
ea,ca,oa);b(ca,oa,ca,oa)}function Ba(Y,ea,ca=Ka()){return M.isNone(Y)||M.isNone(ea)?null:Ea(Y,ea,ca).projector}function Ea(Y,ea,ca){if(M.isNone(Y)||M.isNone(ea)||ca.source.spatialReference===Y&&ca.dest.spatialReference===ea)return ca;const oa=ha(Y,ca.source),Aa=ha(ea,ca.dest);0===oa&&0===Aa?h.equals(Y,ea)?ca.projector=y:ca.projector=null:ca.projector=ra[oa][Aa];return ca}function Ka(){return{source:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:0,
metersPerUnit:1},projector:y}}let Ga=null,Ja=null,Ha=null,Ia={},Sa=function(Y){function ea(){return Y.call(this,"projection:not-loaded","projection engine not fully loaded yet, please call load()")||this}Z._inheritsLoose(ea,Y);return ea}(p);const ra={[2]:{[5]:null,[8]:null,[10]:null,[6]:y,[1]:x,[7]:null,[9]:null,[0]:null,[3]:b,[2]:y,[4]:na},[5]:{[5]:y,[8]:null,[10]:null,[6]:y,[1]:x,[7]:null,[9]:null,[0]:null,[3]:null,[2]:null,[4]:na},[8]:{[5]:null,[8]:y,[10]:null,[6]:null,[1]:null,[7]:g,[9]:null,
[0]:null,[3]:null,[2]:null,[4]:null},[10]:{[5]:null,[8]:null,[10]:y,[6]:null,[1]:null,[7]:null,[9]:V,[0]:null,[3]:null,[2]:null,[4]:null},[3]:{[5]:null,[8]:null,[10]:null,[6]:S,[1]:ma,[7]:null,[9]:null,[0]:null,[3]:y,[2]:S,[4]:ya},[4]:{[5]:ua,[8]:null,[10]:null,[6]:ua,[1]:ta,[7]:null,[9]:null,[0]:null,[3]:xa,[2]:ua,[4]:y},[1]:{[5]:W,[8]:null,[10]:null,[6]:W,[1]:y,[7]:null,[9]:null,[0]:null,[3]:ka,[2]:W,[4]:la},[7]:{[5]:null,[8]:ba,[10]:null,[6]:null,[1]:null,[7]:y,[9]:null,[0]:null,[3]:null,[2]:null,
[4]:null},[9]:{[5]:null,[8]:null,[10]:Q,[6]:null,[1]:null,[7]:null,[9]:y,[0]:null,[3]:null,[2]:null,[4]:null},[0]:{[5]:null,[8]:null,[10]:null,[6]:null,[1]:null,[7]:null,[9]:null,[0]:y,[3]:null,[2]:null,[4]:null},[6]:{[5]:null,[8]:null,[10]:null,[6]:y,[1]:x,[7]:null,[9]:null,[0]:null,[3]:null,[2]:y,[4]:na}},fb={spatialReference:null,spatialReferenceId:0},hb={spatialReference:null,spatialReferenceId:0},cb=Ka(),a=Ka(),Va=w.deg2rad(1),Ua=w.rad2deg(1),Ta=C.create(),jb=C.create(),rb=C.create(),Qa=C.create(),
xb=C.create();e.canProjectToWGS84ComparableLonLat=function(Y){if(M.isNone(Y))return!1;Y=ha(Y,fb);return!!ra[Y][6]};e.canProjectWithoutEngine=J;e.computeLatLonToENURotation=Ca;e.computeLinearTransformation=function(Y,ea,ca,oa){if(M.isNone(Y)||M.isNone(oa))return!1;var Aa=ha(Y,fb),Da=ha(oa,hb);if(Aa===Da&&1!==Da&&(0!==Aa||h.equals(Y,oa)))return t.identity(ca),t.translate(ca,ca,ea),!0;if(1===Da||7===Da||9===Da){oa=Y=0;if(1===Da){Aa=ra[Aa][6];Da=ra[6][Da];if(M.isNone(Aa)||M.isNone(Da))return!1;Aa(ea,
0,jb,0);Da(jb,0,rb,0);Y=Va*jb[0];oa=Va*jb[1]}else if(7===Da||9===Da){Da=ra[Aa][Da];if(M.isNone(Da))return!1;Da(ea,0,rb,0);Y=Va*ea[0];oa=Va*ea[1]}Ca(oa,Y,ca);ca[12]=rb[0];ca[13]=rb[1];ca[14]=rb[2];return!0}if(3===Da&&(2===Aa||1===Aa)){Da=ra[Aa][6];if(M.isNone(Da))return!1;Da(ea,0,jb,0);ea=Va*jb[1];b(jb,0,rb,0);t.identity(ca);t.translate(ca,ca,rb);ea=1/Math.cos(ea);t.scale(ca,ca,[ea,ea,1]);return!0}return!1};e.getProjectorName=function(Y,ea){switch(Ba(Y,ea,cb)){case y:return"copy3";case x:return"wgs84ToSphericalECEF";
case b:return"wgs84ToWebMercator";case na:return"wgs84ToWGS84ECEF";case S:return"webMercatorToWGS84";case ma:return"webMercatorToSphericalECEF";case ya:return"webMercatorToWGS84ECEF";case ua:return"wgs84ECEFToWGS84";case ta:return"wgs84ECEFToSphericalECEF";case xa:return"wgs84ECEFToWebMercator";case W:return"sphericalECEFToWGS84";case ka:return"sphericalECEFToWebMercator";case ba:return"sphericalMarsPCPFToMars2000";case Q:return"sphericalMoonPCPFToMoon2000";case la:return"sphericalECEFToWGS84ECEF";
case g:return"mars2000ToSphericalPCPF";case V:return"moon2000ToSphericalPCPF";default:return null}};e.getTransformation=D;e.getTransformations=function(Y,ea,ca=null){if(M.isNone(Ga))throw new Sa;Y=Ga._getTransformationBySuitability(Ja,Y,ea,ca,null==ca?void 0:ca.spatialReference);if(null!==Y){ea=[];for(const oa of Y)ea.push(aa.fromGE(oa));return ea}return[]};e.initializeProjection=async function(Y,ea){if(!ja())for(const {source:ca,dest:oa,geographicTransformation:Aa}of Y)if(!J(ca,oa,Aa))return U(ea)};
e.isLoaded=ja;e.isSupported=function(){return!0};e.load=U;e.localLinearScaleFactors=function(Y,ea,ca,oa){if(M.isNone(ea)||M.isNone(oa))return!1;const Aa=ha(ea,fb);var Da=ha(oa,hb);if(Aa===Da&&0!==Aa||h.equals(ea,oa))return ca[0]=1,ca[1]=1,ca[2]=1,!0;if(1===Aa){ea=d.length(Y);Y=ea/Math.sqrt(Y[0]*Y[0]+Y[1]*Y[1]);ea/=u.earth.radius;if(3===Da)return ca[0]=Y*ea,ca[1]=Y*ea,ca[2]=1,!0;if(2===Da||5===Da)return Da=180/(u.earth.radius*Math.PI),ca[0]=Da*Y*ea,ca[1]=Da*ea,ca[2]=1,!0}return!1};e.lonLatToSphericalPCPF=
function(Y,ea,ca,oa,Aa=0){oa+=Aa;Aa=Math.cos(ca);Y[0]=Math.cos(ea)*Aa*oa;Y[1]=Math.sin(ea)*Aa*oa;Y[2]=Math.sin(ca)*oa};e.lonLatToWebMercatorComparable=za;e.project=function(Y,ea,ca=null){return Array.isArray(Y)?0===Y.length?[]:G(Ja,Y,Y[0].spatialReference,ea,ca):G(Ja,[Y],Y.spatialReference,ea,ca)[0]};e.projectBoundingRect=function(Y,ea,ca,oa){if(null==Y)return!1;if(h.equals(ea,oa))return A.set(ca,Y),!0;Ta[0]=Y[0];Ta[1]=Y[1];Ta[2]=0;if(!qa(Ta,ea,0,Ta,oa,0,1))return!1;ca[0]=Ta[0];ca[1]=Ta[1];Ta[0]=
Y[2];Ta[1]=Y[3];Ta[2]=0;if(!qa(Ta,ea,0,Ta,oa,0,1))return!1;ca[2]=Ta[0];ca[3]=Ta[1];return!0};e.projectBoundingSphere=function(Y,ea,ca,oa){if(M.isNone(ea)||M.isNone(oa))return!1;ea=Ea(ea,oa,a);if(ea.projector===y)return ca[0]=Y[0],ca[1]=Y[1],ca[2]=Y[2],ca[3]=Y[3],!0;if(M.isNone(ea.projector))return!1;const {source:Aa,dest:Da}=ea;if(3===Da.spatialReferenceId){ea=ra[Aa.spatialReferenceId][2];if(M.isNone(ea))return!1;ea(Y,0,jb,0);ea=Math.abs(Va*jb[1])+Math.asin(Y[3]/(u.earth.radius+Y[2]));b(jb,0,ca,0);
ca[3]=ea>.9999*Math.PI?Number.MAX_VALUE:1/Math.cos(ea)*Y[3];return!0}ea.projector(Y,0,ca,0);ca[3]=Y[3]*Aa.metersPerUnit/Da.metersPerUnit;return!0};e.projectBuffer=qa;e.projectDirection=function(Y,ea,ca,oa,Aa){d.copy(Qa,Y);d.add(xb,Y,ea);ia(Qa,ca,Qa,Aa);ia(xb,ca,xb,Aa);d.subtract(oa,xb,Qa);d.normalize(oa,oa)};e.projectExtent=function(Y,ea,ca=ea.spatialReference,oa=0){return M.isNone(ca)?!1:T(Y,Y.spatialReference,ea,ca,oa)};e.projectMany=G;e.projectMultipoint=function(Y,ea,ca=ea.spatialReference,oa=
0){return M.isNone(ca)?!1:z(Y,Y.spatialReference,ea,ca,oa)};e.projectPoint=function(Y,ea,ca=ea.spatialReference,oa=0){return M.isNone(ca)?!1:R(Y,Y.spatialReference,ea,ca,oa)};e.projectPointToVector=function(Y,ea,ca,oa=0){Qa[0]=Y.x;Qa[1]=Y.y;const Aa=Y.z;Qa[2]=void 0!==Aa?Aa:oa;return qa(Qa,Y.spatialReference,0,ea,ca,0,1)};e.projectPointToWGS84ComparableLonLat=function(Y,ea){Qa[0]=Y.x;Qa[1]=Y.y;const ca=Y.z;Qa[2]=void 0!==ca?ca:0;return pa(Qa,Y.spatialReference,ea)};e.projectPolygon=function(Y,ea,
ca=ea.spatialReference,oa=0){return M.isNone(ca)?!1:I(Y,Y.spatialReference,ea,ca,oa)};e.projectPolyline=function(Y,ea,ca=ea.spatialReference,oa=0){return M.isNone(ca)?!1:l(Y,Y.spatialReference,ea,ca,oa)};e.projectVectorToDehydratedPoint=function(Y,ea,ca){return qa(Y,ea,0,Qa,ca.spatialReference,0,1)?(ca.x=Qa[0],ca.y=Qa[1],ca.z=Qa[2],ca):null};e.projectVectorToPoint=function(Y,ea,ca){if(M.isNone(ea)||M.isNone(ca))return null;const oa=new r({spatialReference:ca});return qa(Y,ea,0,Qa,ca,0,1)?(oa.x=Qa[0],
oa.y=Qa[1],oa.z=Qa[2],oa):null};e.projectVectorToVector=ia;e.projectVectorToWGS84ComparableLonLat=pa;e.projectXYZToVector=L;e.sphericalPCPFtoLonLatElevation=P;e.unload=function(){Ha=Ja=Ga=null;Ia={}};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/chunks/vec3f64":function(){define(["exports"],function(n){function e(){return[0,0,0]}function Z(v){return[v[0],v[1],v[2]]}function M(v,t,q){return[v,t,q]}function p(v){const t=e(),q=Math.min(3,v.length);for(let A=0;A<q;++A)t[A]=v[A];return t}function K(v,
t){return new Float64Array(v,t,3)}function h(){return e()}function u(){return[1,1,1]}function r(){return[1,0,0]}function H(){return[0,1,0]}function da(){return[0,0,1]}const fa=e(),F=u(),w=r(),C=H(),d=da();var m=Object.freeze({__proto__:null,create:e,clone:Z,fromValues:M,fromArray:p,createView:K,zeros:h,ones:u,unitX:r,unitY:H,unitZ:da,ZEROS:fa,ONES:F,UNIT_X:w,UNIT_Y:C,UNIT_Z:d});n.ONES=F;n.UNIT_X=w;n.UNIT_Y=C;n.UNIT_Z=d;n.ZEROS=fa;n.clone=Z;n.create=e;n.createView=K;n.fromArray=p;n.fromValues=M;n.ones=
u;n.unitX=r;n.unitY=H;n.unitZ=da;n.vec3f64=m;n.zeros=h})},"esri/chunks/vec3":function(){define(["exports","./vec3f64","./common"],function(n,e,Z){function M(y){const S=y[0],ma=y[1];y=y[2];return Math.sqrt(S*S+ma*ma+y*y)}function p(y,S){y[0]=S[0];y[1]=S[1];y[2]=S[2];return y}function K(y,S,ma,ya){y[0]=S;y[1]=ma;y[2]=ya;return y}function h(y,S,ma){y[0]=S[0]+ma[0];y[1]=S[1]+ma[1];y[2]=S[2]+ma[2];return y}function u(y,S,ma){y[0]=S[0]-ma[0];y[1]=S[1]-ma[1];y[2]=S[2]-ma[2];return y}function r(y,S,ma){y[0]=
S[0]*ma[0];y[1]=S[1]*ma[1];y[2]=S[2]*ma[2];return y}function H(y,S,ma){y[0]=S[0]/ma[0];y[1]=S[1]/ma[1];y[2]=S[2]/ma[2];return y}function da(y,S){y[0]=Math.ceil(S[0]);y[1]=Math.ceil(S[1]);y[2]=Math.ceil(S[2]);return y}function fa(y,S){y[0]=Math.floor(S[0]);y[1]=Math.floor(S[1]);y[2]=Math.floor(S[2]);return y}function F(y,S,ma){y[0]=Math.min(S[0],ma[0]);y[1]=Math.min(S[1],ma[1]);y[2]=Math.min(S[2],ma[2]);return y}function w(y,S,ma){y[0]=Math.max(S[0],ma[0]);y[1]=Math.max(S[1],ma[1]);y[2]=Math.max(S[2],
ma[2]);return y}function C(y,S){y[0]=Math.round(S[0]);y[1]=Math.round(S[1]);y[2]=Math.round(S[2]);return y}function d(y,S,ma){y[0]=S[0]*ma;y[1]=S[1]*ma;y[2]=S[2]*ma;return y}function m(y,S,ma,ya){y[0]=S[0]+ma[0]*ya;y[1]=S[1]+ma[1]*ya;y[2]=S[2]+ma[2]*ya;return y}function v(y,S){const ma=S[0]-y[0],ya=S[1]-y[1];y=S[2]-y[2];return Math.sqrt(ma*ma+ya*ya+y*y)}function t(y,S){const ma=S[0]-y[0],ya=S[1]-y[1];y=S[2]-y[2];return ma*ma+ya*ya+y*y}function q(y){const S=y[0],ma=y[1];y=y[2];return S*S+ma*ma+y*y}
function A(y,S){y[0]=-S[0];y[1]=-S[1];y[2]=-S[2];return y}function N(y,S){y[0]=1/S[0];y[1]=1/S[1];y[2]=1/S[2];return y}function aa(y,S){var ma=S[0];const ya=S[1],za=S[2];ma=ma*ma+ya*ya+za*za;0<ma&&(ma=1/Math.sqrt(ma),y[0]=S[0]*ma,y[1]=S[1]*ma,y[2]=S[2]*ma);return y}function ja(y,S){return y[0]*S[0]+y[1]*S[1]+y[2]*S[2]}function U(y,S,ma){const ya=S[0],za=S[1];S=S[2];const b=ma[0],f=ma[1];ma=ma[2];y[0]=za*ma-S*f;y[1]=S*b-ya*ma;y[2]=ya*f-za*b;return y}function G(y,S,ma,ya){const za=S[0],b=S[1];S=S[2];
y[0]=za+ya*(ma[0]-za);y[1]=b+ya*(ma[1]-b);y[2]=S+ya*(ma[2]-S);return y}function D(y,S,ma,ya,za,b){const f=b*b,V=f*(2*b-3)+1,g=f*(b-2)+b,x=f*(b-1);b=f*(3-2*b);y[0]=S[0]*V+ma[0]*g+ya[0]*x+za[0]*b;y[1]=S[1]*V+ma[1]*g+ya[1]*x+za[1]*b;y[2]=S[2]*V+ma[2]*g+ya[2]*x+za[2]*b;return y}function J(y,S,ma,ya,za,b){var f=1-b,V=f*f;const g=b*b,x=V*f;V*=3*b;f*=3*g;b*=g;y[0]=S[0]*x+ma[0]*V+ya[0]*f+za[0]*b;y[1]=S[1]*x+ma[1]*V+ya[1]*f+za[1]*b;y[2]=S[2]*x+ma[2]*V+ya[2]*f+za[2]*b;return y}function O(y,S){S=S||1;const ma=
2*Z.RANDOM()*Math.PI,ya=2*Z.RANDOM()-1,za=Math.sqrt(1-ya*ya)*S;y[0]=Math.cos(ma)*za;y[1]=Math.sin(ma)*za;y[2]=ya*S;return y}function R(y,S,ma){const ya=S[0],za=S[1];S=S[2];y[0]=ma[0]*ya+ma[4]*za+ma[8]*S+ma[12];y[1]=ma[1]*ya+ma[5]*za+ma[9]*S+ma[13];y[2]=ma[2]*ya+ma[6]*za+ma[10]*S+ma[14];return y}function z(y,S,ma){const ya=S[0],za=S[1];S=S[2];y[0]=ya*ma[0]+za*ma[3]+S*ma[6];y[1]=ya*ma[1]+za*ma[4]+S*ma[7];y[2]=ya*ma[2]+za*ma[5]+S*ma[8];return y}function l(y,S,ma){const ya=ma[0],za=ma[1],b=ma[2],f=S[0],
V=S[1];S=S[2];let g=za*S-b*V,x=b*f-ya*S,P=ya*V-za*f;ma=2*ma[3];y[0]=f+g*ma+2*(za*P-b*x);y[1]=V+x*ma+2*(b*g-ya*P);y[2]=S+P*ma+2*(ya*x-za*g);return y}function I(y,S,ma,ya){const za=[],b=[];za[0]=S[0]-ma[0];za[1]=S[1]-ma[1];za[2]=S[2]-ma[2];b[0]=za[0];b[1]=za[1]*Math.cos(ya)-za[2]*Math.sin(ya);b[2]=za[1]*Math.sin(ya)+za[2]*Math.cos(ya);y[0]=b[0]+ma[0];y[1]=b[1]+ma[1];y[2]=b[2]+ma[2];return y}function T(y,S,ma,ya){const za=[],b=[];za[0]=S[0]-ma[0];za[1]=S[1]-ma[1];za[2]=S[2]-ma[2];b[0]=za[2]*Math.sin(ya)+
za[0]*Math.cos(ya);b[1]=za[1];b[2]=za[2]*Math.cos(ya)-za[0]*Math.sin(ya);y[0]=b[0]+ma[0];y[1]=b[1]+ma[1];y[2]=b[2]+ma[2];return y}function L(y,S,ma,ya){const za=[],b=[];za[0]=S[0]-ma[0];za[1]=S[1]-ma[1];za[2]=S[2]-ma[2];b[0]=za[0]*Math.cos(ya)-za[1]*Math.sin(ya);b[1]=za[0]*Math.sin(ya)+za[1]*Math.cos(ya);b[2]=za[2];y[0]=b[0]+ma[0];y[1]=b[1]+ma[1];y[2]=b[2]+ma[2];return y}function ia(y,S){p(Ca,y);p(ha,S);aa(Ca,Ca);aa(ha,ha);y=ja(Ca,ha);return 1<y?0:-1>y?Math.PI:Math.acos(y)}function pa(y){return"vec3("+
y[0]+", "+y[1]+", "+y[2]+")"}function qa(y,S){return y[0]===S[0]&&y[1]===S[1]&&y[2]===S[2]}function wa(y,S){const ma=y[0],ya=y[1];y=y[2];const za=S[0],b=S[1];S=S[2];return Math.abs(ma-za)<=Z.EPSILON*Math.max(1,Math.abs(ma),Math.abs(za))&&Math.abs(ya-b)<=Z.EPSILON*Math.max(1,Math.abs(ya),Math.abs(b))&&Math.abs(y-S)<=Z.EPSILON*Math.max(1,Math.abs(y),Math.abs(S))}const Ca=e.create(),ha=e.create();e=Object.freeze({__proto__:null,length:M,copy:p,set:K,add:h,subtract:u,multiply:r,divide:H,ceil:da,floor:fa,
min:F,max:w,round:C,scale:d,scaleAndAdd:m,distance:v,squaredDistance:t,squaredLength:q,negate:A,inverse:N,normalize:aa,dot:ja,cross:U,lerp:G,hermite:D,bezier:J,random:O,transformMat4:R,transformMat3:z,transformQuat:l,rotateX:I,rotateY:T,rotateZ:L,angle:ia,str:pa,exactEquals:qa,equals:wa,sub:u,mul:r,div:H,dist:v,sqrDist:t,len:M,sqrLen:q});n.add=h;n.angle=ia;n.bezier=J;n.ceil=da;n.copy=p;n.cross=U;n.dist=v;n.distance=v;n.div=H;n.divide=H;n.dot=ja;n.equals=wa;n.exactEquals=qa;n.floor=fa;n.hermite=D;
n.inverse=N;n.len=M;n.length=M;n.lerp=G;n.max=w;n.min=F;n.mul=r;n.multiply=r;n.negate=A;n.normalize=aa;n.random=O;n.rotateX=I;n.rotateY=T;n.rotateZ=L;n.round=C;n.scale=d;n.scaleAndAdd=m;n.set=K;n.sqrDist=t;n.sqrLen=q;n.squaredDistance=t;n.squaredLength=q;n.str=pa;n.sub=u;n.subtract=u;n.transformMat3=z;n.transformMat4=R;n.transformQuat=l;n.vec3=e})},"esri/chunks/common":function(){define(["exports"],function(n){function e(r){return r*K}function Z(r){return r*h}function M(r,H){return Math.abs(r-H)<=
1E-6*Math.max(1,Math.abs(r),Math.abs(H))}const p=Math.random,K=Math.PI/180,h=180/Math.PI;var u=Object.freeze({__proto__:null,EPSILON:1E-6,RANDOM:p,toRadian:e,toDegree:Z,equals:M});n.EPSILON=1E-6;n.RANDOM=p;n.common=u;n.equals=M;n.toDegree=Z;n.toRadian=e})},"esri/geometry/projectionEllipsoid":function(){define(["exports","./support/spatialReferenceUtils","./SpatialReference","./support/Ellipsoid"],function(n,e,Z,M){function p(H){return new Z({wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${H.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`})}const K=p(M.earth),h=p(M.mars),u=p(M.moon),r=new Z({wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${M.earth.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`});n.SphericalECEFSpatialReference=K;n.SphericalPCPFMars=h;n.SphericalPCPFMoon=u;n.WGS84ECEFSpatialReference=r;n.createSphericalPCPF=p;n.getReferenceEllipsoid=function(H){return H&&(e.isMars(H)||H===h)?M.mars:H&&(e.isMoon(H)||H===u)?M.moon:M.earth};n.getReferenceEllipsoidFromWKID=function(H){return e.isWKIDFromMars(H)?M.mars:e.isWKIDFromMoon(H)?M.moon:M.earth};n.getSphericalPCPF=function(H){return H&&(e.isMars(H)||H===h)?h:H&&(e.isMoon(H)||H===u)?u:K};n.getSphericalPCPFForEllipsoid=function(H){return H&&
H===M.mars?h:H&&H===M.moon?u:K};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/core/unitUtils":function(){define("exports ./has ./jsonMap ../geometry/support/WKIDUnitConversion ../geometry/support/spatialReferenceUtils ../geometry/SpatialReference ../geometry/support/Ellipsoid ../geometry/projectionEllipsoid".split(" "),function(n,e,Z,M,p,K,h,u){function r(z){if(z=J[z])return z;throw Error("unknown measure");}function H(z){return D[z].baseUnit}function da(z,l=null){l=l||r(z);return D[l].baseUnit===
z}function fa(z,l,I){if(l===I)return z;const T=r(l);if(T!==r(I))throw Error("incompatible units");z=da(l,T)?z:z*D[T].units[l].inBaseUnits;return da(I,T)?z:z/D[T].units[I].inBaseUnits}function F(z,l){return 3E3>fa(z,l,"meters")?"meters":"kilometers"}function w(z,l){return 1E5>fa(z,l,"meters")?"meters":"kilometers"}function C(z,l){return 1E3>fa(z,l,"feet")?"feet":"miles"}function d(z,l){return 1E5>fa(z,l,"feet")?"feet":"miles"}function m(z){return G.fromJSON(z.toLowerCase())||null}function v(z,l=h.earth.metersPerDegree){return t(z,
!0)||l}function t(z,l=!1){let I,T,L=null;null!=z&&("object"===typeof z?(I=z.wkid,T=z.wkt):"number"===typeof z?I=z:"string"===typeof z&&(T=z));if(I){if(p.isWKIDFromMars(I))return h.mars.metersPerDegree;if(p.isWKIDFromMoon(I))return h.moon.metersPerDegree;L=aa.values[aa[I]];!L&&l&&U.has(I)&&(L=A)}else T&&(-1!==T.search(/^PROJCS/i)?(z=N.exec(T))&&z[1]&&(L=parseFloat(z[1].split(",")[1])):-1!==T.search(/^GEOCCS/i)&&(z=ja.exec(T))&&z[1]&&(L=parseFloat(z[1].split(",")[1])));return L}function q(z){let l,
I,T=null;null!=z&&("object"===typeof z?(l=z.wkid,I=z.wkt):"number"===typeof z?l=z:"string"===typeof z&&(I=z));l?T=aa.units[aa[l]]:I&&-1!==I.search(/^PROJCS/i)&&(z=N.exec(I))&&z[1]&&(T=(z=/[\\"\\']{1}([^\\"\\']+)/.exec(z[1]))&&z[1]);return T?m(T):null}const A=h.earth.radius*Math.PI/200,N=/UNIT\[([^\]]+)\]\]$/i,aa=M,ja=/UNIT\[([^\]]+)\]/i,U=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),G=Z.strict()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",
yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"});e={millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},
kilometers:{inBaseUnits:1E3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}};M={"square-millimeters":{inBaseUnits:1E-6},"square-centimeters":{inBaseUnits:1E-4},"square-decimeters":{inBaseUnits:.1*.1},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:1E6},"square-inches":{inBaseUnits:6.4516E-4},"square-feet":{inBaseUnits:.09290304},"square-yards":{inBaseUnits:.83612736},
"square-miles":{inBaseUnits:2589988.110336},"square-us-feet":{inBaseUnits:(z=>z*z)(1200/3937)},acres:{inBaseUnits:4046.8564224},ares:{inBaseUnits:100},hectares:{inBaseUnits:1E4}};const D={length:{baseUnit:"meters",units:e},area:{baseUnit:"square-meters",units:M},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1E3*1E-9},"cubic-centimeters":{inBaseUnits:.001},"cubic-decimeters":{inBaseUnits:1},"cubic-meters":{inBaseUnits:1E3},"cubic-kilometers":{inBaseUnits:1E12},
"cubic-inches":{inBaseUnits:.016387064},"cubic-feet":{inBaseUnits:.09290304*304.8},"cubic-yards":{inBaseUnits:764.554857984},"cubic-miles":{inBaseUnits:4.16818182544058E12}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},J=function(){const z={};for(const l in D)for(const I in D[l].units)z[I]=l;return z}(),O={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",
esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},R={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"};e=Z.strict()(O);
M=Z.strict()(R);Z=Z.strict()({...O,...R});n.areaUnitsJSONMap=e;n.baseUnitForMeasure=H;n.baseUnitForUnit=function(z){return H(r(z))};n.convertUnit=fa;n.getDefaultUnitSystem=function(z){if(!z)return null;switch(q(z)){case "feet":case "us-feet":case "clarke-feet":case "clarke-yards":case "clarke-links":case "sears-yards":case "sears-feet":case "sears-chains":case "benoit-1895-b-chains":case "indian-yards":case "indian-1937-yards":case "gold-coast-feet":case "sears-1922-truncated-chains":return"imperial";
case "50-kilometers":case "150-kilometers":case "meters":return"metric"}return null};n.getMetersPerUnit=t;n.getMetersPerUnitForSR=v;n.getMetersPerVerticalUnitForSR=function(z){if(z&&"object"===typeof z&&!p.isEarth(z))return 1;z=v(z);return 1E5<z?1:z};n.getUnitString=q;n.getVerticalUnitStringForSR=function(z){const l=v(z),I=z instanceof K?u.getReferenceEllipsoid(z).metersPerDegree:1E5;return l>=I?"meters":q(z)};n.inchesPerMeter=39.37;n.isBaseUnit=da;n.isMeasurementSystem=function(z){return"imperial"===
z||"metric"===z};n.lengthToDegrees=function(z,l,I){return fa(z,l,"meters")/(I*Math.PI/180)};n.lengthUnitsJSONMap=M;n.measureForUnit=r;n.measurementAreaUnits="metric imperial square-inches square-feet square-yards square-miles square-us-feet square-meters square-kilometers acres ares hectares".split(" ");n.measurementLengthUnits="metric imperial inches feet yards miles nautical-miles us-feet meters kilometers".split(" ");n.preferredImperialAreaUnit=function(z,l){return 1E6>fa(z,l,"square-feet")?"square-feet":
"square-miles"};n.preferredImperialLengthUnit=C;n.preferredImperialVerticalLengthUnit=d;n.preferredLengthUnit=function(z,l,I){switch(I){case "metric":return F(z,l);case "imperial":return C(z,l);default:return I}};n.preferredMetricAreaUnit=function(z,l){return 3E6>fa(z,l,"square-meters")?"square-meters":"square-kilometers"};n.preferredMetricLengthUnit=F;n.preferredMetricVerticalLengthUnit=w;n.preferredVerticalLengthUnit=function(z,l,I){switch(I){case "metric":return w(z,l);case "imperial":return d(z,
l);default:return I}};n.unitFromRESTJSON=m;n.unitToRESTJSON=function(z){return G.toJSON(z)||null};n.unitsJSONMap=Z;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/chunks/mat4":function(){define(["exports","./vec3f64","./common"],function(n,e,Z){function M(b,f){b[0]=f[0];b[1]=f[1];b[2]=f[2];b[3]=f[3];b[4]=f[4];b[5]=f[5];b[6]=f[6];b[7]=f[7];b[8]=f[8];b[9]=f[9];b[10]=f[10];b[11]=f[11];b[12]=f[12];b[13]=f[13];b[14]=f[14];b[15]=f[15];return b}function p(b,f,V,g,x,P,Q,ba,W,ka,la,na,ua,ta,xa,Ba,
Ea){b[0]=f;b[1]=V;b[2]=g;b[3]=x;b[4]=P;b[5]=Q;b[6]=ba;b[7]=W;b[8]=ka;b[9]=la;b[10]=na;b[11]=ua;b[12]=ta;b[13]=xa;b[14]=Ba;b[15]=Ea;return b}function K(b){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function h(b,f){if(b===f){const V=f[1],g=f[2],x=f[3],P=f[6],Q=f[7],ba=f[11];b[1]=f[4];b[2]=f[8];b[3]=f[12];b[4]=V;b[6]=f[9];b[7]=f[13];b[8]=g;b[9]=P;b[11]=f[14];b[12]=x;b[13]=Q;b[14]=ba}else b[0]=f[0],b[1]=f[4],b[2]=f[8],
b[3]=f[12],b[4]=f[1],b[5]=f[5],b[6]=f[9],b[7]=f[13],b[8]=f[2],b[9]=f[6],b[10]=f[10],b[11]=f[14],b[12]=f[3],b[13]=f[7],b[14]=f[11],b[15]=f[15];return b}function u(b,f){const V=f[0],g=f[1],x=f[2],P=f[3],Q=f[4],ba=f[5],W=f[6],ka=f[7],la=f[8],na=f[9],ua=f[10],ta=f[11],xa=f[12],Ba=f[13],Ea=f[14];f=f[15];const Ka=V*ba-g*Q,Ga=V*W-x*Q,Ja=V*ka-P*Q,Ha=g*W-x*ba,Ia=g*ka-P*ba,Sa=x*ka-P*W,ra=la*Ba-na*xa,fb=la*Ea-ua*xa,hb=la*f-ta*xa,cb=na*Ea-ua*Ba,a=na*f-ta*Ba,Va=ua*f-ta*Ea;let Ua=Ka*Va-Ga*a+Ja*cb+Ha*hb-Ia*fb+Sa*
ra;if(!Ua)return null;Ua=1/Ua;b[0]=(ba*Va-W*a+ka*cb)*Ua;b[1]=(x*a-g*Va-P*cb)*Ua;b[2]=(Ba*Sa-Ea*Ia+f*Ha)*Ua;b[3]=(ua*Ia-na*Sa-ta*Ha)*Ua;b[4]=(W*hb-Q*Va-ka*fb)*Ua;b[5]=(V*Va-x*hb+P*fb)*Ua;b[6]=(Ea*Ja-xa*Sa-f*Ga)*Ua;b[7]=(la*Sa-ua*Ja+ta*Ga)*Ua;b[8]=(Q*a-ba*hb+ka*ra)*Ua;b[9]=(g*hb-V*a-P*ra)*Ua;b[10]=(xa*Ia-Ba*Ja+f*Ka)*Ua;b[11]=(na*Ja-la*Ia-ta*Ka)*Ua;b[12]=(ba*fb-Q*cb-W*ra)*Ua;b[13]=(V*cb-g*fb+x*ra)*Ua;b[14]=(Ba*Ga-xa*Ha-Ea*Ka)*Ua;b[15]=(la*Ha-na*Ga+ua*Ka)*Ua;return b}function r(b,f){const V=f[0],g=f[1],
x=f[2],P=f[3],Q=f[4],ba=f[5],W=f[6],ka=f[7],la=f[8],na=f[9],ua=f[10],ta=f[11],xa=f[12],Ba=f[13],Ea=f[14];f=f[15];b[0]=ba*(ua*f-ta*Ea)-na*(W*f-ka*Ea)+Ba*(W*ta-ka*ua);b[1]=-(g*(ua*f-ta*Ea)-na*(x*f-P*Ea)+Ba*(x*ta-P*ua));b[2]=g*(W*f-ka*Ea)-ba*(x*f-P*Ea)+Ba*(x*ka-P*W);b[3]=-(g*(W*ta-ka*ua)-ba*(x*ta-P*ua)+na*(x*ka-P*W));b[4]=-(Q*(ua*f-ta*Ea)-la*(W*f-ka*Ea)+xa*(W*ta-ka*ua));b[5]=V*(ua*f-ta*Ea)-la*(x*f-P*Ea)+xa*(x*ta-P*ua);b[6]=-(V*(W*f-ka*Ea)-Q*(x*f-P*Ea)+xa*(x*ka-P*W));b[7]=V*(W*ta-ka*ua)-Q*(x*ta-P*ua)+
la*(x*ka-P*W);b[8]=Q*(na*f-ta*Ba)-la*(ba*f-ka*Ba)+xa*(ba*ta-ka*na);b[9]=-(V*(na*f-ta*Ba)-la*(g*f-P*Ba)+xa*(g*ta-P*na));b[10]=V*(ba*f-ka*Ba)-Q*(g*f-P*Ba)+xa*(g*ka-P*ba);b[11]=-(V*(ba*ta-ka*na)-Q*(g*ta-P*na)+la*(g*ka-P*ba));b[12]=-(Q*(na*Ea-ua*Ba)-la*(ba*Ea-W*Ba)+xa*(ba*ua-W*na));b[13]=V*(na*Ea-ua*Ba)-la*(g*Ea-x*Ba)+xa*(g*ua-x*na);b[14]=-(V*(ba*Ea-W*Ba)-Q*(g*Ea-x*Ba)+xa*(g*W-x*ba));b[15]=V*(ba*ua-W*na)-Q*(g*ua-x*na)+la*(g*W-x*ba);return b}function H(b){const f=b[0],V=b[1],g=b[2],x=b[3],P=b[4],Q=b[5],
ba=b[6],W=b[7],ka=b[8],la=b[9],na=b[10],ua=b[11],ta=b[12],xa=b[13],Ba=b[14];b=b[15];return(f*Q-V*P)*(na*b-ua*Ba)-(f*ba-g*P)*(la*b-ua*xa)+(f*W-x*P)*(la*Ba-na*xa)+(V*ba-g*Q)*(ka*b-ua*ta)-(V*W-x*Q)*(ka*Ba-na*ta)+(g*W-x*ba)*(ka*xa-la*ta)}function da(b,f,V){const g=f[0],x=f[1],P=f[2],Q=f[3],ba=f[4],W=f[5],ka=f[6],la=f[7],na=f[8],ua=f[9],ta=f[10],xa=f[11],Ba=f[12],Ea=f[13],Ka=f[14];f=f[15];let Ga=V[0],Ja=V[1],Ha=V[2],Ia=V[3];b[0]=Ga*g+Ja*ba+Ha*na+Ia*Ba;b[1]=Ga*x+Ja*W+Ha*ua+Ia*Ea;b[2]=Ga*P+Ja*ka+Ha*ta+Ia*
Ka;b[3]=Ga*Q+Ja*la+Ha*xa+Ia*f;Ga=V[4];Ja=V[5];Ha=V[6];Ia=V[7];b[4]=Ga*g+Ja*ba+Ha*na+Ia*Ba;b[5]=Ga*x+Ja*W+Ha*ua+Ia*Ea;b[6]=Ga*P+Ja*ka+Ha*ta+Ia*Ka;b[7]=Ga*Q+Ja*la+Ha*xa+Ia*f;Ga=V[8];Ja=V[9];Ha=V[10];Ia=V[11];b[8]=Ga*g+Ja*ba+Ha*na+Ia*Ba;b[9]=Ga*x+Ja*W+Ha*ua+Ia*Ea;b[10]=Ga*P+Ja*ka+Ha*ta+Ia*Ka;b[11]=Ga*Q+Ja*la+Ha*xa+Ia*f;Ga=V[12];Ja=V[13];Ha=V[14];Ia=V[15];b[12]=Ga*g+Ja*ba+Ha*na+Ia*Ba;b[13]=Ga*x+Ja*W+Ha*ua+Ia*Ea;b[14]=Ga*P+Ja*ka+Ha*ta+Ia*Ka;b[15]=Ga*Q+Ja*la+Ha*xa+Ia*f;return b}function fa(b,f,V){const g=
V[0],x=V[1];V=V[2];let P=void 0,Q=void 0,ba=void 0,W=void 0,ka=void 0,la=void 0,na=void 0,ua=void 0,ta=void 0,xa=void 0,Ba=void 0,Ea=void 0;f===b?(b[12]=f[0]*g+f[4]*x+f[8]*V+f[12],b[13]=f[1]*g+f[5]*x+f[9]*V+f[13],b[14]=f[2]*g+f[6]*x+f[10]*V+f[14],b[15]=f[3]*g+f[7]*x+f[11]*V+f[15]):(P=f[0],Q=f[1],ba=f[2],W=f[3],ka=f[4],la=f[5],na=f[6],ua=f[7],ta=f[8],xa=f[9],Ba=f[10],Ea=f[11],b[0]=P,b[1]=Q,b[2]=ba,b[3]=W,b[4]=ka,b[5]=la,b[6]=na,b[7]=ua,b[8]=ta,b[9]=xa,b[10]=Ba,b[11]=Ea,b[12]=P*g+ka*x+ta*V+f[12],b[13]=
Q*g+la*x+xa*V+f[13],b[14]=ba*g+na*x+Ba*V+f[14],b[15]=W*g+ua*x+Ea*V+f[15]);return b}function F(b,f,V){const g=V[0],x=V[1];V=V[2];b[0]=f[0]*g;b[1]=f[1]*g;b[2]=f[2]*g;b[3]=f[3]*g;b[4]=f[4]*x;b[5]=f[5]*x;b[6]=f[6]*x;b[7]=f[7]*x;b[8]=f[8]*V;b[9]=f[9]*V;b[10]=f[10]*V;b[11]=f[11]*V;b[12]=f[12];b[13]=f[13];b[14]=f[14];b[15]=f[15];return b}function w(b,f,V,g){let x=g[0],P=g[1];g=g[2];let Q=Math.sqrt(x*x+P*P+g*g);var ba=void 0,W=void 0;let ka=void 0,la=void 0,na=void 0,ua=void 0,ta=void 0,xa=void 0,Ba=void 0,
Ea=void 0,Ka=void 0,Ga=void 0,Ja=void 0,Ha=void 0,Ia=void 0,Sa=void 0,ra=void 0,fb=void 0,hb=void 0,cb=void 0,a=void 0,Va=void 0;W=ba=void 0;if(Q<Z.EPSILON)return null;Q=1/Q;x*=Q;P*=Q;g*=Q;ba=Math.sin(V);W=Math.cos(V);ka=1-W;la=f[0];na=f[1];ua=f[2];ta=f[3];xa=f[4];Ba=f[5];Ea=f[6];Ka=f[7];Ga=f[8];Ja=f[9];Ha=f[10];Ia=f[11];Sa=x*x*ka+W;ra=P*x*ka+g*ba;fb=g*x*ka-P*ba;hb=x*P*ka-g*ba;cb=P*P*ka+W;a=g*P*ka+x*ba;Va=x*g*ka+P*ba;ba=P*g*ka-x*ba;W=g*g*ka+W;b[0]=la*Sa+xa*ra+Ga*fb;b[1]=na*Sa+Ba*ra+Ja*fb;b[2]=ua*
Sa+Ea*ra+Ha*fb;b[3]=ta*Sa+Ka*ra+Ia*fb;b[4]=la*hb+xa*cb+Ga*a;b[5]=na*hb+Ba*cb+Ja*a;b[6]=ua*hb+Ea*cb+Ha*a;b[7]=ta*hb+Ka*cb+Ia*a;b[8]=la*Va+xa*ba+Ga*W;b[9]=na*Va+Ba*ba+Ja*W;b[10]=ua*Va+Ea*ba+Ha*W;b[11]=ta*Va+Ka*ba+Ia*W;f!==b&&(b[12]=f[12],b[13]=f[13],b[14]=f[14],b[15]=f[15]);return b}function C(b,f,V){const g=Math.sin(V);V=Math.cos(V);const x=f[4],P=f[5],Q=f[6],ba=f[7],W=f[8],ka=f[9],la=f[10],na=f[11];f!==b&&(b[0]=f[0],b[1]=f[1],b[2]=f[2],b[3]=f[3],b[12]=f[12],b[13]=f[13],b[14]=f[14],b[15]=f[15]);b[4]=
x*V+W*g;b[5]=P*V+ka*g;b[6]=Q*V+la*g;b[7]=ba*V+na*g;b[8]=W*V-x*g;b[9]=ka*V-P*g;b[10]=la*V-Q*g;b[11]=na*V-ba*g;return b}function d(b,f,V){const g=Math.sin(V);V=Math.cos(V);const x=f[0],P=f[1],Q=f[2],ba=f[3],W=f[8],ka=f[9],la=f[10],na=f[11];f!==b&&(b[4]=f[4],b[5]=f[5],b[6]=f[6],b[7]=f[7],b[12]=f[12],b[13]=f[13],b[14]=f[14],b[15]=f[15]);b[0]=x*V-W*g;b[1]=P*V-ka*g;b[2]=Q*V-la*g;b[3]=ba*V-na*g;b[8]=x*g+W*V;b[9]=P*g+ka*V;b[10]=Q*g+la*V;b[11]=ba*g+na*V;return b}function m(b,f,V){const g=Math.sin(V);V=Math.cos(V);
const x=f[0],P=f[1],Q=f[2],ba=f[3],W=f[4],ka=f[5],la=f[6],na=f[7];f!==b&&(b[8]=f[8],b[9]=f[9],b[10]=f[10],b[11]=f[11],b[12]=f[12],b[13]=f[13],b[14]=f[14],b[15]=f[15]);b[0]=x*V+W*g;b[1]=P*V+ka*g;b[2]=Q*V+la*g;b[3]=ba*V+na*g;b[4]=W*V-x*g;b[5]=ka*V-P*g;b[6]=la*V-Q*g;b[7]=na*V-ba*g;return b}function v(b,f){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=f[0];b[13]=f[1];b[14]=f[2];b[15]=1;return b}function t(b,f){b[0]=f[0];b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=f[1];
b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=f[2];b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function q(b,f,V){let g=V[0],x=V[1];V=V[2];let P=Math.sqrt(g*g+x*x+V*V),Q=void 0,ba=void 0,W=void 0;if(P<Z.EPSILON)return null;P=1/P;g*=P;x*=P;V*=P;Q=Math.sin(f);ba=Math.cos(f);W=1-ba;b[0]=g*g*W+ba;b[1]=x*g*W+V*Q;b[2]=V*g*W-x*Q;b[3]=0;b[4]=g*x*W-V*Q;b[5]=x*x*W+ba;b[6]=V*x*W+g*Q;b[7]=0;b[8]=g*V*W+x*Q;b[9]=x*V*W-g*Q;b[10]=V*V*W+ba;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function A(b,f){const V=Math.sin(f);
f=Math.cos(f);b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=f;b[6]=V;b[7]=0;b[8]=0;b[9]=-V;b[10]=f;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function N(b,f){const V=Math.sin(f);f=Math.cos(f);b[0]=f;b[1]=0;b[2]=-V;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=V;b[9]=0;b[10]=f;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function aa(b,f){const V=Math.sin(f);f=Math.cos(f);b[0]=f;b[1]=V;b[2]=0;b[3]=0;b[4]=-V;b[5]=f;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function ja(b,
f,V){var g=f[0],x=f[1],P=f[2],Q=f[3],ba=g+g,W=x+x;const ka=P+P;f=g*ba;const la=g*W;g*=ka;const na=x*W;x*=ka;P*=ka;ba*=Q;W*=Q;Q*=ka;b[0]=1-(na+P);b[1]=la+Q;b[2]=g-W;b[3]=0;b[4]=la-Q;b[5]=1-(f+P);b[6]=x+ba;b[7]=0;b[8]=g+W;b[9]=x-ba;b[10]=1-(f+na);b[11]=0;b[12]=V[0];b[13]=V[1];b[14]=V[2];b[15]=1;return b}function U(b,f){const V=za,g=-f[0],x=-f[1],P=-f[2],Q=f[3],ba=f[4],W=f[5],ka=f[6],la=f[7],na=g*g+x*x+P*P+Q*Q;0<na?(V[0]=2*(ba*Q+la*g+W*P-ka*x)/na,V[1]=2*(W*Q+la*x+ka*g-ba*P)/na,V[2]=2*(ka*Q+la*P+ba*x-
W*g)/na):(V[0]=2*(ba*Q+la*g+W*P-ka*x),V[1]=2*(W*Q+la*x+ka*g-ba*P),V[2]=2*(ka*Q+la*P+ba*x-W*g));ja(b,f,V);return b}function G(b,f){b[0]=f[12];b[1]=f[13];b[2]=f[14];return b}function D(b,f){const V=f[0],g=f[1],x=f[2],P=f[4],Q=f[5],ba=f[6],W=f[8],ka=f[9];f=f[10];b[0]=Math.sqrt(V*V+g*g+x*x);b[1]=Math.sqrt(P*P+Q*Q+ba*ba);b[2]=Math.sqrt(W*W+ka*ka+f*f);return b}function J(b,f){const V=f[0]+f[5]+f[10];let g=0;0<V?(g=2*Math.sqrt(V+1),b[3]=.25*g,b[0]=(f[6]-f[9])/g,b[1]=(f[8]-f[2])/g,b[2]=(f[1]-f[4])/g):f[0]>
f[5]&&f[0]>f[10]?(g=2*Math.sqrt(1+f[0]-f[5]-f[10]),b[3]=(f[6]-f[9])/g,b[0]=.25*g,b[1]=(f[1]+f[4])/g,b[2]=(f[8]+f[2])/g):f[5]>f[10]?(g=2*Math.sqrt(1+f[5]-f[0]-f[10]),b[3]=(f[8]-f[2])/g,b[0]=(f[1]+f[4])/g,b[1]=.25*g,b[2]=(f[6]+f[9])/g):(g=2*Math.sqrt(1+f[10]-f[0]-f[5]),b[3]=(f[1]-f[4])/g,b[0]=(f[8]+f[2])/g,b[1]=(f[6]+f[9])/g,b[2]=.25*g);return b}function O(b,f,V,g){var x=f[0],P=f[1],Q=f[2],ba=f[3],W=x+x,ka=P+P,la=Q+Q;f=x*W;const na=x*ka;x*=la;const ua=P*ka;P*=la;Q*=la;W*=ba;ka*=ba;ba*=la;la=g[0];const ta=
g[1];g=g[2];b[0]=(1-(ua+Q))*la;b[1]=(na+ba)*la;b[2]=(x-ka)*la;b[3]=0;b[4]=(na-ba)*ta;b[5]=(1-(f+Q))*ta;b[6]=(P+W)*ta;b[7]=0;b[8]=(x+ka)*g;b[9]=(P-W)*g;b[10]=(1-(f+ua))*g;b[11]=0;b[12]=V[0];b[13]=V[1];b[14]=V[2];b[15]=1;return b}function R(b,f,V,g,x){var P=f[0],Q=f[1],ba=f[2],W=f[3],ka=P+P,la=Q+Q,na=ba+ba;f=P*ka;var ua=P*la,ta=P*na;P=Q*la;Q*=na;var xa=ba*na;ba=W*ka;la*=W;const Ba=W*na;var Ea=g[0],Ka=g[1];na=g[2];g=x[0];W=x[1];x=x[2];ka=(1-(P+xa))*Ea;const Ga=(ua+Ba)*Ea;Ea*=ta-la;ua=(ua-Ba)*Ka;xa=(1-
(f+xa))*Ka;Ka*=Q+ba;ta=(ta+la)*na;Q=(Q-ba)*na;f=(1-(f+P))*na;b[0]=ka;b[1]=Ga;b[2]=Ea;b[3]=0;b[4]=ua;b[5]=xa;b[6]=Ka;b[7]=0;b[8]=ta;b[9]=Q;b[10]=f;b[11]=0;b[12]=V[0]+g-(ka*g+ua*W+ta*x);b[13]=V[1]+W-(Ga*g+xa*W+Q*x);b[14]=V[2]+x-(Ea*g+Ka*W+f*x);b[15]=1;return b}function z(b,f){var V=f[0],g=f[1],x=f[2];f=f[3];var P=V+V,Q=g+g;const ba=x+x;V*=P;const W=g*P;g*=Q;const ka=x*P,la=x*Q;x*=ba;P*=f;Q*=f;f*=ba;b[0]=1-g-x;b[1]=W+f;b[2]=ka-Q;b[3]=0;b[4]=W-f;b[5]=1-V-x;b[6]=la+P;b[7]=0;b[8]=ka+Q;b[9]=la-P;b[10]=1-
V-g;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function l(b,f,V,g,x,P,Q){const ba=1/(V-f),W=1/(x-g),ka=1/(P-Q);b[0]=2*P*ba;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=2*P*W;b[6]=0;b[7]=0;b[8]=(V+f)*ba;b[9]=(x+g)*W;b[10]=(Q+P)*ka;b[11]=-1;b[12]=0;b[13]=0;b[14]=Q*P*2*ka;b[15]=0;return b}function I(b,f,V,g,x){f=1/Math.tan(f/2);let P=void 0;b[0]=f/V;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=f;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[11]=-1;b[12]=0;b[13]=0;b[15]=0;null!=x&&Infinity!==x?(P=1/(g-x),b[10]=(x+g)*P,b[14]=2*x*g*P):
(b[10]=-1,b[14]=-2*g);return b}function T(b,f,V,g){const x=Math.tan(f.upDegrees*Math.PI/180),P=Math.tan(f.downDegrees*Math.PI/180),Q=Math.tan(f.leftDegrees*Math.PI/180);f=Math.tan(f.rightDegrees*Math.PI/180);const ba=2/(Q+f),W=2/(x+P);b[0]=ba;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=W;b[6]=0;b[7]=0;b[8]=-((Q-f)*ba*.5);b[9]=(x-P)*W*.5;b[10]=g/(V-g);b[11]=-1;b[12]=0;b[13]=0;b[14]=g*V/(V-g);b[15]=0;return b}function L(b,f,V,g,x,P,Q){const ba=1/(f-V),W=1/(g-x),ka=1/(P-Q);b[0]=-2*ba;b[1]=0;b[2]=0;b[3]=0;b[4]=
0;b[5]=-2*W;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=2*ka;b[11]=0;b[12]=(f+V)*ba;b[13]=(x+g)*W;b[14]=(Q+P)*ka;b[15]=1;return b}function ia(b,f,V,g){let x=void 0,P=void 0;var Q=void 0,ba=void 0;let W=void 0,ka=void 0;var la=void 0,na=void 0;let ua=void 0,ta=void 0;const xa=f[0],Ba=f[1];f=f[2];Q=g[0];ba=g[1];g=g[2];la=V[0];na=V[1];V=V[2];if(Math.abs(xa-la)<Z.EPSILON&&Math.abs(Ba-na)<Z.EPSILON&&Math.abs(f-V)<Z.EPSILON)return K(b);la=xa-la;na=Ba-na;ua=f-V;ta=1/Math.sqrt(la*la+na*na+ua*ua);la*=ta;na*=ta;ua*=
ta;x=ba*ua-g*na;P=g*la-Q*ua;Q=Q*na-ba*la;(ta=Math.sqrt(x*x+P*P+Q*Q))?(ta=1/ta,x*=ta,P*=ta,Q*=ta):Q=P=x=0;ba=na*Q-ua*P;W=ua*x-la*Q;ka=la*P-na*x;(ta=Math.sqrt(ba*ba+W*W+ka*ka))?(ta=1/ta,ba*=ta,W*=ta,ka*=ta):ka=W=ba=0;b[0]=x;b[1]=ba;b[2]=la;b[3]=0;b[4]=P;b[5]=W;b[6]=na;b[7]=0;b[8]=Q;b[9]=ka;b[10]=ua;b[11]=0;b[12]=-(x*xa+P*Ba+Q*f);b[13]=-(ba*xa+W*Ba+ka*f);b[14]=-(la*xa+na*Ba+ua*f);b[15]=1;return b}function pa(b,f,V,g){const x=f[0],P=f[1];f=f[2];var Q=g[0];const ba=g[1];var W=g[2];g=x-V[0];let ka=P-V[1];
V=f-V[2];let la=g*g+ka*ka+V*V;0<la&&(la=1/Math.sqrt(la),g*=la,ka*=la,V*=la);let na=ba*V-W*ka;W=W*g-Q*V;Q=Q*ka-ba*g;la=na*na+W*W+Q*Q;0<la&&(la=1/Math.sqrt(la),na*=la,W*=la,Q*=la);b[0]=na;b[1]=W;b[2]=Q;b[3]=0;b[4]=ka*Q-V*W;b[5]=V*na-g*Q;b[6]=g*W-ka*na;b[7]=0;b[8]=g;b[9]=ka;b[10]=V;b[11]=0;b[12]=x;b[13]=P;b[14]=f;b[15]=1;return b}function qa(b){return"mat4("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+", "+b[4]+", "+b[5]+", "+b[6]+", "+b[7]+", "+b[8]+", "+b[9]+", "+b[10]+", "+b[11]+", "+b[12]+", "+b[13]+", "+
b[14]+", "+b[15]+")"}function wa(b){return Math.sqrt(b[0]**2+b[1]**2+b[2]**2+b[3]**2+b[4]**2+b[5]**2+b[6]**2+b[7]**2+b[8]**2+b[9]**2+b[10]**2+b[11]**2+b[12]**2+b[13]**2+b[14]**2+b[15]**2)}function Ca(b,f,V){b[0]=f[0]+V[0];b[1]=f[1]+V[1];b[2]=f[2]+V[2];b[3]=f[3]+V[3];b[4]=f[4]+V[4];b[5]=f[5]+V[5];b[6]=f[6]+V[6];b[7]=f[7]+V[7];b[8]=f[8]+V[8];b[9]=f[9]+V[9];b[10]=f[10]+V[10];b[11]=f[11]+V[11];b[12]=f[12]+V[12];b[13]=f[13]+V[13];b[14]=f[14]+V[14];b[15]=f[15]+V[15];return b}function ha(b,f,V){b[0]=f[0]-
V[0];b[1]=f[1]-V[1];b[2]=f[2]-V[2];b[3]=f[3]-V[3];b[4]=f[4]-V[4];b[5]=f[5]-V[5];b[6]=f[6]-V[6];b[7]=f[7]-V[7];b[8]=f[8]-V[8];b[9]=f[9]-V[9];b[10]=f[10]-V[10];b[11]=f[11]-V[11];b[12]=f[12]-V[12];b[13]=f[13]-V[13];b[14]=f[14]-V[14];b[15]=f[15]-V[15];return b}function y(b,f,V){b[0]=f[0]*V;b[1]=f[1]*V;b[2]=f[2]*V;b[3]=f[3]*V;b[4]=f[4]*V;b[5]=f[5]*V;b[6]=f[6]*V;b[7]=f[7]*V;b[8]=f[8]*V;b[9]=f[9]*V;b[10]=f[10]*V;b[11]=f[11]*V;b[12]=f[12]*V;b[13]=f[13]*V;b[14]=f[14]*V;b[15]=f[15]*V;return b}function S(b,
f,V,g){b[0]=f[0]+V[0]*g;b[1]=f[1]+V[1]*g;b[2]=f[2]+V[2]*g;b[3]=f[3]+V[3]*g;b[4]=f[4]+V[4]*g;b[5]=f[5]+V[5]*g;b[6]=f[6]+V[6]*g;b[7]=f[7]+V[7]*g;b[8]=f[8]+V[8]*g;b[9]=f[9]+V[9]*g;b[10]=f[10]+V[10]*g;b[11]=f[11]+V[11]*g;b[12]=f[12]+V[12]*g;b[13]=f[13]+V[13]*g;b[14]=f[14]+V[14]*g;b[15]=f[15]+V[15]*g;return b}function ma(b,f){return b[0]===f[0]&&b[1]===f[1]&&b[2]===f[2]&&b[3]===f[3]&&b[4]===f[4]&&b[5]===f[5]&&b[6]===f[6]&&b[7]===f[7]&&b[8]===f[8]&&b[9]===f[9]&&b[10]===f[10]&&b[11]===f[11]&&b[12]===f[12]&&
b[13]===f[13]&&b[14]===f[14]&&b[15]===f[15]}function ya(b,f){const V=b[0],g=b[1],x=b[2],P=b[3],Q=b[4],ba=b[5],W=b[6],ka=b[7],la=b[8],na=b[9],ua=b[10],ta=b[11],xa=b[12],Ba=b[13],Ea=b[14];b=b[15];const Ka=f[0],Ga=f[1],Ja=f[2],Ha=f[3],Ia=f[4],Sa=f[5],ra=f[6],fb=f[7],hb=f[8],cb=f[9],a=f[10],Va=f[11],Ua=f[12],Ta=f[13],jb=f[14];f=f[15];return Math.abs(V-Ka)<=Z.EPSILON*Math.max(1,Math.abs(V),Math.abs(Ka))&&Math.abs(g-Ga)<=Z.EPSILON*Math.max(1,Math.abs(g),Math.abs(Ga))&&Math.abs(x-Ja)<=Z.EPSILON*Math.max(1,
Math.abs(x),Math.abs(Ja))&&Math.abs(P-Ha)<=Z.EPSILON*Math.max(1,Math.abs(P),Math.abs(Ha))&&Math.abs(Q-Ia)<=Z.EPSILON*Math.max(1,Math.abs(Q),Math.abs(Ia))&&Math.abs(ba-Sa)<=Z.EPSILON*Math.max(1,Math.abs(ba),Math.abs(Sa))&&Math.abs(W-ra)<=Z.EPSILON*Math.max(1,Math.abs(W),Math.abs(ra))&&Math.abs(ka-fb)<=Z.EPSILON*Math.max(1,Math.abs(ka),Math.abs(fb))&&Math.abs(la-hb)<=Z.EPSILON*Math.max(1,Math.abs(la),Math.abs(hb))&&Math.abs(na-cb)<=Z.EPSILON*Math.max(1,Math.abs(na),Math.abs(cb))&&Math.abs(ua-a)<=Z.EPSILON*
Math.max(1,Math.abs(ua),Math.abs(a))&&Math.abs(ta-Va)<=Z.EPSILON*Math.max(1,Math.abs(ta),Math.abs(Va))&&Math.abs(xa-Ua)<=Z.EPSILON*Math.max(1,Math.abs(xa),Math.abs(Ua))&&Math.abs(Ba-Ta)<=Z.EPSILON*Math.max(1,Math.abs(Ba),Math.abs(Ta))&&Math.abs(Ea-jb)<=Z.EPSILON*Math.max(1,Math.abs(Ea),Math.abs(jb))&&Math.abs(b-f)<=Z.EPSILON*Math.max(1,Math.abs(b),Math.abs(f))}const za=e.create();e=Object.freeze({__proto__:null,copy:M,set:p,identity:K,transpose:h,invert:u,adjoint:r,determinant:H,multiply:da,translate:fa,
scale:F,rotate:w,rotateX:C,rotateY:d,rotateZ:m,fromTranslation:v,fromScaling:t,fromRotation:q,fromXRotation:A,fromYRotation:N,fromZRotation:aa,fromRotationTranslation:ja,fromQuat2:U,getTranslation:G,getScaling:D,getRotation:J,fromRotationTranslationScale:O,fromRotationTranslationScaleOrigin:R,fromQuat:z,frustum:l,perspective:I,perspectiveFromFieldOfView:T,ortho:L,lookAt:ia,targetTo:pa,str:qa,frob:wa,add:Ca,subtract:ha,multiplyScalar:y,multiplyScalarAndAdd:S,exactEquals:ma,equals:ya,mul:da,sub:ha});
n.add=Ca;n.adjoint=r;n.copy=M;n.determinant=H;n.equals=ya;n.exactEquals=ma;n.frob=wa;n.fromQuat=z;n.fromQuat2=U;n.fromRotation=q;n.fromRotationTranslation=ja;n.fromRotationTranslationScale=O;n.fromRotationTranslationScaleOrigin=R;n.fromScaling=t;n.fromTranslation=v;n.fromXRotation=A;n.fromYRotation=N;n.fromZRotation=aa;n.frustum=l;n.getRotation=J;n.getScaling=D;n.getTranslation=G;n.identity=K;n.invert=u;n.lookAt=ia;n.mat4=e;n.mul=da;n.multiply=da;n.multiplyScalar=y;n.multiplyScalarAndAdd=S;n.ortho=
L;n.perspective=I;n.perspectiveFromFieldOfView=T;n.rotate=w;n.rotateX=C;n.rotateY=d;n.rotateZ=m;n.scale=F;n.set=p;n.str=qa;n.sub=ha;n.subtract=ha;n.targetTo=pa;n.translate=fa;n.transpose=h})},"esri/chunks/pe":function(){define(["require","exports","./_rollupPluginBabelHelpers","../core/has","../assets"],function(n,e,Z,M,p){function K(){return!!e._pe}function h(){return!!M("esri-wasm")}function u(){return w?w:w=(new Promise(function(d,m){n(["./pe-wasm"],d,m)})).then(function(d){return d.peWasm}).then(({default:d})=>
d({locateFile:m=>p.getAssetUrl(`esri/geometry/support/${m}`)})).then(d=>{r(d)})}function r(d){function m(q,A,N){q[A]=N(q[A])}e._pe=d;e.PeDefs.init();e.PeGTlistExtended.init();e.PeNotationMgrs.init();e.PeNotationUtm.init();e.PePCSInfo.init();e.PeGCSExtent=function(q){function A(){return q.apply(this,arguments)||this}Z._inheritsLoose(A,q);A.prototype.destroy=function(){e._pe.destroy(this)};return A}(e._pe.PeGCSExtent);d=[e._pe.PeDatum,e._pe.PeGeogcs,e._pe.PeGeogtran,e._pe.PeObject,e._pe.PeParameter,
e._pe.PePrimem,e._pe.PeProjcs,e._pe.PeSpheroid,e._pe.PeUnit];for(var v of d)m(v.prototype,"getName",q=>function(){return q.call(this,Array(e.PeDefs.PE_NAME_MAX))});for(const q of[e._pe.PeGeogtran,e._pe.PeProjcs])m(q.prototype,"getParameters",A=>function(){const N=Array(e.PeDefs.PE_PARM_MAX);let aa=A.call(this);for(let ja=0;ja<N.length;ja++){const U=e._pe.getValue(aa,"*");N[ja]=U?e._pe.wrapPointer(U,e._pe.PeParameter):null;aa+=Int32Array.BYTES_PER_ELEMENT}return N});m(e._pe.PeHorizon.prototype,"getCoord",
q=>function(){const A=this.getSize();if(!A)return null;const N=[],aa=q.call(this);F(N,A,aa);return N});m(e._pe.PeGTlistExtendedEntry.prototype,"getEntries",q=>{const A=e._pe._pe_getPeGTlistExtendedGTsSize();return function(){let N=null;var aa=q.call(this);if(!e._pe.compare(aa,e._pe.NULL)){N=[aa];const ja=this.getSteps();if(1<ja){aa=e._pe.getPointer(aa);for(let U=1;U<ja;U++)N.push(e._pe.wrapPointer(aa+A*U,e._pe.PeGTlistExtendedGTs))}}return N}});const t=e._pe._pe_getPeHorizonSize();v=q=>function(){let A=
this._cache;A||(this._cache=A=new Map);if(A.has(q))return A.get(q);let N=null;var aa=q.call(this);if(!e._pe.compare(aa,e._pe.NULL)){N=[aa];const ja=aa.getNump();if(1<ja){aa=e._pe.getPointer(aa);for(let U=1;U<ja;U++)N.push(e._pe.wrapPointer(aa+t*U,e._pe.PeHorizon))}}A.set(q,N);return N};m(e._pe.PeProjcs.prototype,"horizonGcsGenerate",v);m(e._pe.PeProjcs.prototype,"horizonPcsGenerate",v);e._pe.PeObject.prototype.toString=function(q=e.PeDefs.PE_STR_OPTS_NONE){e._pe.ensureCache.prepare();const A=e._pe.getPointer(this),
N=e._pe.ensureInt8(Array(e.PeDefs.PE_BUFFER_MAX));return e._pe.UTF8ToString(e._pe._pe_object_to_string_ext(A,q,N))}}function H(d){if(d){var m=e._pe.getClass(d);m&&(m=e._pe.getCache(m))&&(d=e._pe.getPointer(d))&&delete m[d]}}function da(d,m){const v=[];m=Array(m);for(let t=0;t<d;t++)v.push(e._pe.ensureInt8(m));return v}function fa(d){let m;Array.isArray(d[0])?(m=[],d.forEach(v=>{m.push(v[0],v[1])})):m=d;return m}function F(d,m,v,t=!1){if(t)for(t=0;t<2*m;t++)d[t]=e._pe.getValue(v+t*Float64Array.BYTES_PER_ELEMENT,
"double");else{t=0===d.length;for(let q=0;q<m;q++)t&&(d[q]=Array(2)),d[q][0]=e._pe.getValue(v,"double"),d[q][1]=e._pe.getValue(v+Float64Array.BYTES_PER_ELEMENT,"double"),v+=2*Float64Array.BYTES_PER_ELEMENT}}let w;e._pe=null;(function(d){function m(q,A,N){e._pe.ensureCache.prepare();var aa=fa(N);const ja=N===aa;aa=e._pe.ensureFloat64(aa);(q=e._pe._pe_geog_to_proj(e._pe.getPointer(q),A,aa))&&F(N,A,aa,ja);return q}function v(q,A,N){return t(q,A,N,0)}function t(q,A,N,aa){e._pe.ensureCache.prepare();var ja=
fa(N);const U=N===ja;ja=e._pe.ensureFloat64(ja);(q=e._pe._pe_proj_to_geog_center(e._pe.getPointer(q),A,ja,aa))&&F(N,A,ja,U);return q}d.geogToProj=m;d.projGeog=function(q,A,N,aa){switch(aa){case e.PeDefs.PE_TRANSFORM_P_TO_G:return v(q,A,N);case e.PeDefs.PE_TRANSFORM_G_TO_P:return m(q,A,N)}return 0};d.projToGeog=v;d.projToGeogCenter=t})(e.PeCSTransformations||(e.PeCSTransformations={}));(function(d){d.init=function(){d.PE_BUFFER_MAX=e._pe.PeDefs.prototype.PE_BUFFER_MAX;d.PE_NAME_MAX=e._pe.PeDefs.prototype.PE_NAME_MAX;
d.PE_MGRS_MAX=e._pe.PeDefs.prototype.PE_MGRS_MAX;d.PE_USNG_MAX=e._pe.PeDefs.prototype.PE_USNG_MAX;d.PE_DD_MAX=e._pe.PeDefs.prototype.PE_DD_MAX;d.PE_DDM_MAX=e._pe.PeDefs.prototype.PE_DDM_MAX;d.PE_DMS_MAX=e._pe.PeDefs.prototype.PE_DMS_MAX;d.PE_UTM_MAX=e._pe.PeDefs.prototype.PE_UTM_MAX;d.PE_PARM_MAX=e._pe.PeDefs.prototype.PE_PARM_MAX;d.PE_TYPE_NONE=e._pe.PeDefs.prototype.PE_TYPE_NONE;d.PE_TYPE_GEOGCS=e._pe.PeDefs.prototype.PE_TYPE_GEOGCS;d.PE_TYPE_PROJCS=e._pe.PeDefs.prototype.PE_TYPE_PROJCS;d.PE_TYPE_GEOGTRAN=
e._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;d.PE_TYPE_COORDSYS=e._pe.PeDefs.prototype.PE_TYPE_COORDSYS;d.PE_TYPE_UNIT=e._pe.PeDefs.prototype.PE_TYPE_UNIT;d.PE_TYPE_LINUNIT=e._pe.PeDefs.prototype.PE_TYPE_LINUNIT;d.PE_STR_OPTS_NONE=e._pe.PeDefs.prototype.PE_STR_OPTS_NONE;d.PE_STR_AUTH_NONE=e._pe.PeDefs.prototype.PE_STR_AUTH_NONE;d.PE_STR_AUTH_TOP=e._pe.PeDefs.prototype.PE_STR_AUTH_TOP;d.PE_STR_NAME_CANON=e._pe.PeDefs.prototype.PE_STR_NAME_CANON;d.PE_PARM_X0=e._pe.PeDefs.prototype.PE_PARM_X0;d.PE_PARM_ND=
e._pe.PeDefs.prototype.PE_PARM_ND;d.PE_TRANSFORM_1_TO_2=e._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;d.PE_TRANSFORM_2_TO_1=e._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;d.PE_TRANSFORM_P_TO_G=e._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;d.PE_TRANSFORM_G_TO_P=e._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;d.PE_HORIZON_RECT=e._pe.PeDefs.prototype.PE_HORIZON_RECT;d.PE_HORIZON_POLY=e._pe.PeDefs.prototype.PE_HORIZON_POLY;d.PE_HORIZON_LINE=e._pe.PeDefs.prototype.PE_HORIZON_LINE;d.PE_HORIZON_DELTA=e._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(e.PeDefs||
(e.PeDefs={}));(function(d){function m(A,N){let aa=null,ja=v[A];ja||(ja={},v[A]=ja);ja.hasOwnProperty(String(N))?aa=ja[N]:(A=e._pe.PeFactory.prototype.factoryByType(A,N),e._pe.compare(A,e._pe.NULL)||(aa=A,ja[N]=aa));return aa=q(aa)}const v={},t={},q=A=>{if(A){const N=A.getType();switch(N){case e.PeDefs.PE_TYPE_GEOGCS:A=e._pe.castObject(A,e._pe.PeGeogcs);break;case e.PeDefs.PE_TYPE_PROJCS:A=e._pe.castObject(A,e._pe.PeProjcs);break;case e.PeDefs.PE_TYPE_GEOGTRAN:A=e._pe.castObject(A,e._pe.PeGeogtran);
break;default:N&e.PeDefs.PE_TYPE_UNIT&&(A=e._pe.castObject(A,e._pe.PeUnit))}}return A};d.initialize=function(){e._pe.PeFactory.prototype.initialize(null)};d.coordsys=function(A){return m(e.PeDefs.PE_TYPE_COORDSYS,A)};d.factoryByType=m;d.fromString=function(A,N){let aa=null,ja=t[A];ja||(ja={},t[A]=ja);ja.hasOwnProperty(N)?aa=ja[N]:(A=e._pe.PeFactory.prototype.fromString(A,N),e._pe.compare(A,e._pe.NULL)||(aa=A,ja[N]=aa));return aa=q(aa)};d.geogcs=function(A){return m(e.PeDefs.PE_TYPE_GEOGCS,A)};d.geogtran=
function(A){return m(e.PeDefs.PE_TYPE_GEOGTRAN,A)};d.getCode=function(A){return e._pe.PeFactory.prototype.getCode(A)};d.projcs=function(A){return m(e.PeDefs.PE_TYPE_PROJCS,A)};d.unit=function(A){return m(e.PeDefs.PE_TYPE_UNIT,A)}})(e.PeFactory||(e.PeFactory={}));e.PeGCSExtent=null;(function(d){let m;d.init=function(){d.PE_GTLIST_OPTS_COMMON=e._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;m=e._pe._pe_getPeGTlistExtendedEntrySize()};d.getGTlist=function(v,t,q,A,N,aa){let ja=null;const U=new e._pe.PeInteger(aa);
try{const G=e._pe.PeGTlistExtended.prototype.getGTlist(v,t,q,A,N,U);if(aa=U.val)if(ja=[G],1<aa){const D=e._pe.getPointer(G);for(v=1;v<aa;v++)ja.push(e._pe.wrapPointer(D+m*v,e._pe.PeGTlistExtendedEntry))}}finally{e._pe.destroy(U)}return ja}})(e.PeGTlistExtended||(e.PeGTlistExtended={}));(function(d){d.destroy=function(m){if(m&&m.length){for(const v of m)H(v),v.getEntries().forEach(t=>{H(t);t=t.getGeogtran();H(t);t.getParameters().forEach(H);[t.getGeogcs1(),t.getGeogcs2()].forEach(q=>{H(q);const A=
q.getDatum();H(A);H(A.getSpheroid());H(q.getPrimem());H(q.getUnit())})});e._pe.PeGTlistExtendedEntry.prototype.Delete(m[0])}}})(e.PeGTlistExtendedEntry||(e.PeGTlistExtendedEntry={}));(function(d){d.geogToGeog=function(m,v,t,q,A){e._pe.ensureCache.prepare();var N=fa(t);const aa=t===N;N=e._pe.ensureFloat64(N);let ja=0;q&&(ja=e._pe.ensureFloat64(q));(m=e._pe._pe_geog_to_geog(e._pe.getPointer(m),v,N,ja,A))&&F(t,v,N,aa);return m}})(e.PeGTTransformations||(e.PeGTTransformations={}));(function(d){const m=
(t,q,A,N,aa,ja)=>{e._pe.ensureCache.prepare();switch(t){case "dd":var U=e._pe._pe_geog_to_dd;var G=e.PeDefs.PE_DD_MAX;break;case "ddm":U=e._pe._pe_geog_to_ddm;G=e.PeDefs.PE_DDM_MAX;break;case "dms":U=e._pe._pe_geog_to_dms,G=e.PeDefs.PE_DMS_MAX}t=0;q&&(t=e._pe.getPointer(q));q=fa(N);q=e._pe.ensureFloat64(q);G=da(A,G);N=e._pe.ensureInt32(G);if(aa=U(t,A,q,aa,N))for(U=0;U<A;U++)ja[U]=e._pe.UTF8ToString(G[U]);return aa},v=(t,q,A,N,aa)=>{e._pe.ensureCache.prepare();switch(t){case "dd":var ja=e._pe._pe_dd_to_geog;
break;case "ddm":ja=e._pe._pe_ddm_to_geog;break;case "dms":ja=e._pe._pe_dms_to_geog}t=0;q&&(t=e._pe.getPointer(q));q=N.map(U=>e._pe.ensureString(U));N=e._pe.ensureInt32(q);q=e._pe.ensureFloat64(Array(2*A));(ja=ja(t,A,N,q))&&F(aa,A,q);return ja};d.geog_to_dms=function(t,q,A,N,aa){return m("dms",t,q,A,N,aa)};d.dms_to_geog=function(t,q,A,N){return v("dms",t,q,A,N)};d.geog_to_ddm=function(t,q,A,N,aa){return m("ddm",t,q,A,N,aa)};d.ddm_to_geog=function(t,q,A,N){return v("ddm",t,q,A,N)};d.geog_to_dd=function(t,
q,A,N,aa){return m("dd",t,q,A,N,aa)};d.dd_to_geog=function(t,q,A,N){return v("dd",t,q,A,N)}})(e.PeNotationDms||(e.PeNotationDms={}));(function(d){d.init=function(){d.PE_MGRS_STYLE_NEW=e._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;d.PE_MGRS_STYLE_OLD=e._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;d.PE_MGRS_STYLE_AUTO=e._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;d.PE_MGRS_180_ZONE_1_PLUS=e._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;d.PE_MGRS_ADD_SPACES=e._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};
d.geog_to_mgrs_extended=function(m,v,t,q,A,N,aa){e._pe.ensureCache.prepare();let ja=0;m&&(ja=e._pe.getPointer(m));m=fa(t);t=e._pe.ensureFloat64(m);m=da(v,e.PeDefs.PE_MGRS_MAX);const U=e._pe.ensureInt32(m);if(q=e._pe._pe_geog_to_mgrs_extended(ja,v,t,q,A,N,U))for(A=0;A<v;A++)aa[A]=e._pe.UTF8ToString(m[A]);return q};d.mgrs_to_geog_extended=function(m,v,t,q,A){e._pe.ensureCache.prepare();let N=0;m&&(N=e._pe.getPointer(m));m=t.map(aa=>e._pe.ensureString(aa));t=e._pe.ensureInt32(m);m=e._pe.ensureFloat64(Array(2*
v));(q=e._pe._pe_mgrs_to_geog_extended(N,v,t,q,m))&&F(A,v,m);return q}})(e.PeNotationMgrs||(e.PeNotationMgrs={}));(function(d){d.geog_to_usng=function(m,v,t,q,A,N,aa){e._pe.ensureCache.prepare();let ja=0;m&&(ja=e._pe.getPointer(m));m=fa(t);t=e._pe.ensureFloat64(m);m=da(v,e.PeDefs.PE_MGRS_MAX);const U=e._pe.ensureInt32(m);if(q=e._pe._pe_geog_to_usng(ja,v,t,q,A,N,U))for(A=0;A<v;A++)aa[A]=e._pe.UTF8ToString(m[A]);return q};d.usng_to_geog=function(m,v,t,q){e._pe.ensureCache.prepare();var A=0;m&&(A=e._pe.getPointer(m));
m=t.map(N=>e._pe.ensureString(N));t=e._pe.ensureInt32(m);m=e._pe.ensureFloat64(Array(2*v));(A=e._pe._pe_usng_to_geog(A,v,t,m))&&F(q,v,m);return A}})(e.PeNotationUsng||(e.PeNotationUsng={}));(function(d){d.init=function(){d.PE_UTM_OPTS_NONE=e._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;d.PE_UTM_OPTS_ADD_SPACES=e._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;d.PE_UTM_OPTS_NS=e._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};d.geog_to_utm=function(m,v,t,q,A){e._pe.ensureCache.prepare();var N=0;m&&
(N=e._pe.getPointer(m));m=fa(t);t=e._pe.ensureFloat64(m);m=da(v,e.PeDefs.PE_UTM_MAX);const aa=e._pe.ensureInt32(m);if(q=e._pe._pe_geog_to_utm(N,v,t,q,aa))for(N=0;N<v;N++)A[N]=e._pe.UTF8ToString(m[N]);return q};d.utm_to_geog=function(m,v,t,q,A){e._pe.ensureCache.prepare();let N=0;m&&(N=e._pe.getPointer(m));m=t.map(aa=>e._pe.ensureString(aa));t=e._pe.ensureInt32(m);m=e._pe.ensureFloat64(Array(2*v));(q=e._pe._pe_utm_to_geog(N,v,t,q,m))&&F(A,v,m);return q}})(e.PeNotationUtm||(e.PeNotationUtm={}));(function(d){const m=
new Map;d.init=function(){d.PE_PCSINFO_OPTION_NONE=e._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;d.PE_PCSINFO_OPTION_DOMAIN=e._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;d.PE_POLE_OUTSIDE_BOUNDARY=e._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;d.PE_POLE_POINT=e._pe.PePCSInfo.prototype.PE_POLE_POINT};d.generate=function(v,t=d.PE_PCSINFO_OPTION_DOMAIN){let q,A;m.has(v)&&(A=m.get(v),A[t]&&(q=A[t]));q||(q=e._pe.PePCSInfo.prototype.generate(v,t),A||(A=[],m.set(v,A)),A[t]=q);return q}})(e.PePCSInfo||
(e.PePCSInfo={}));(function(d){d.version_string=function(){return e._pe.PeVersion.prototype.version_string()}})(e.PeVersion||(e.PeVersion={}));var C=Object.freeze({__proto__:null,get _pe(){return e._pe},isLoaded:K,isSupported:h,load:u,get PeCSTransformations(){return e.PeCSTransformations},get PeDefs(){return e.PeDefs},get PeFactory(){return e.PeFactory},get PeGCSExtent(){return e.PeGCSExtent},get PeGTlistExtended(){return e.PeGTlistExtended},get PeGTlistExtendedEntry(){return e.PeGTlistExtendedEntry},
get PeGTTransformations(){return e.PeGTTransformations},get PeNotationDms(){return e.PeNotationDms},get PeNotationMgrs(){return e.PeNotationMgrs},get PeNotationUsng(){return e.PeNotationUsng},get PeNotationUtm(){return e.PeNotationUtm},get PePCSInfo(){return e.PePCSInfo},get PeVersion(){return e.PeVersion},_init:r});e._init=r;e.isLoaded=K;e.isSupported=h;e.load=u;e.pe=C})},"esri/assets":function(){define("exports ./config ./core/Logger ./core/Error ./core/urlUtils ./request".split(" "),function(n,
e,Z,M,p,K){function h(r){if(!e.assetsPath)throw u.errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new M("assets:path-not-set","config.assetsPath is not set");return p.join(e.assetsPath,r)}const u=Z.getLogger("esri.assets");n.fetchAsset=function(r,H){return K(h(r),H)};n.getAssetUrl=h;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/geometry/support/aaBoundingRect":function(){define(["exports","../../core/has","../../core/maybe",
"../Extent"],function(n,e,Z,M){function p(w=F){return[w[0],w[1],w[2],w[3]]}function K(w){return w[0]>=w[2]?0:w[2]-w[0]}function h(w){return w[1]>=w[3]?0:w[3]-w[1]}function u(w,C,d){return C>=w[0]&&d>=w[1]&&C<=w[2]&&d<=w[3]}function r(w,C){w[0]=C[0];w[1]=C[1];w[2]=C[2];w[3]=C[3];return w}function H(w){return 4===w.length}function da(w,C,d){return w<C?C:w>d?d:w}const fa=[Infinity,Infinity,-Infinity,-Infinity],F=[0,0,0,0];n.NEGATIVE_INFINITY=fa;n.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];
n.UNIT=[0,0,1,1];n.ZERO=F;n.allFinite=function(w){for(let C=0;4>C;C++)if(!isFinite(w[C]))return!1;return!0};n.area=function(w){return K(w)*h(w)};n.center=function(w,C=[0,0]){C[0]=(w[0]+w[2])/2;C[1]=(w[1]+w[3])/2;return C};n.clone=function(w){return[w[0],w[1],w[2],w[3]]};n.contains=function(w,C){return C[0]>=w[0]&&C[2]<=w[2]&&C[1]>=w[1]&&C[3]<=w[3]};n.containsPoint=function(w,C){return u(w,C[0],C[1])};n.containsPointObject=function(w,C){return u(w,C.x,C.y)};n.containsPointWithMargin=function(w,C,d){return C[0]>=
w[0]-d&&C[1]>=w[1]-d&&C[0]<=w[2]+d&&C[1]<=w[3]+d};n.containsXY=u;n.create=p;n.diameter=function(w){const C=K(w);w=h(w);return Math.sqrt(C*C+w*w)};n.distance=function(w,C){const d=(w[1]+w[3])/2,m=Math.max(Math.abs(C[0]-(w[0]+w[2])/2)-K(w)/2,0);w=Math.max(Math.abs(C[1]-d)-h(w)/2,0);return Math.sqrt(m*m+w*w)};n.empty=function(w){return w?r(w,fa):p(fa)};n.equals=function(w,C,d){if(Z.isNone(w)||Z.isNone(C))return w===C;if(!H(w)||!H(C))return!1;if(d)for(let m=0;m<w.length;m++){if(!d(w[m],C[m]))return!1}else for(d=
0;d<w.length;d++)if(w[d]!==C[d])return!1;return!0};n.expand=function(w,C,d=w){if("length"in C)if(H(C))d[0]=Math.min(w[0],C[0]),d[1]=Math.min(w[1],C[1]),d[2]=Math.max(w[2],C[2]),d[3]=Math.max(w[3],C[3]);else{if(2===C.length||3===C.length)d[0]=Math.min(w[0],C[0]),d[1]=Math.min(w[1],C[1]),d[2]=Math.max(w[2],C[0]),d[3]=Math.max(w[3],C[1])}else switch(C.type){case "extent":d[0]=Math.min(w[0],C.xmin);d[1]=Math.min(w[1],C.ymin);d[2]=Math.max(w[2],C.xmax);d[3]=Math.max(w[3],C.ymax);break;case "point":d[0]=
Math.min(w[0],C.x),d[1]=Math.min(w[1],C.y),d[2]=Math.max(w[2],C.x),d[3]=Math.max(w[3],C.y)}return d};n.expandPointInPlace=function(w,C){C[0]<w[0]&&(w[0]=C[0]);C[0]>w[2]&&(w[2]=C[0]);C[1]<w[1]&&(w[1]=C[1]);C[1]>w[3]&&(w[3]=C[1])};n.expandWithNestedArray=function(w,C,d=w){const m=C.length;let v=w[0],t=w[1],q=w[2];w=w[3];for(let A=0;A<m;A++){const N=C[A];v=Math.min(v,N[0]);t=Math.min(t,N[1]);q=Math.max(q,N[0]);w=Math.max(w,N[1])}d[0]=v;d[1]=t;d[2]=q;d[3]=w;return d};n.fromExtent=function(w,C=p()){C[0]=
w.xmin;C[1]=w.ymin;C[2]=w.xmax;C[3]=w.ymax;return C};n.fromValues=function(w,C,d,m,v=p()){v[0]=w;v[1]=C;v[2]=d;v[3]=m;return v};n.height=h;n.intersection=function(w,C,d=w){const m=C[0],v=C[1],t=C[2];C=C[3];d[0]=da(w[0],m,t);d[1]=da(w[1],v,C);d[2]=da(w[2],m,t);d[3]=da(w[3],v,C);return d};n.intersects=function(w,C){return Math.max(C[0],w[0])<=Math.min(C[2],w[2])&&Math.max(C[1],w[1])<=Math.min(C[3],w[3])};n.is=H;n.isPoint=function(w){return(0===K(w)||!isFinite(w[0]))&&(0===h(w)||!isFinite(w[1]))};n.offset=
function(w,C,d,m=w){m[0]=w[0]+C;m[1]=w[1]+d;m[2]=w[2]+C;m[3]=w[3]+d;return m};n.pad=function(w,C,d=w){d[0]=w[0]-C;d[1]=w[1]-C;d[2]=w[2]+C;d[3]=w[3]+C;return d};n.set=r;n.setMax=function(w,C,d=w){d[2]=C[0];d[3]=C[1];d!==w&&(d[0]=w[0],d[1]=w[1]);return w};n.setMin=function(w,C,d=w){d[0]=C[0];d[1]=C[1];d!==w&&(d[2]=w[2],d[3]=w[3]);return d};n.size=function(w,C){C[0]=w[2]-w[0];C[1]=w[3]-w[1]};n.toExtent=function(w,C){return new M({xmin:w[0],ymin:w[1],xmax:w[2],ymax:w[3],spatialReference:C})};n.width=
K;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/geometry/support/geodesicConstants":function(){define(["exports","./Ellipsoid"],function(n,e){const Z=Math.PI/180;var M=e.earth.radius;const p=e.earth.eccentricitySquared;M={a1:M*p,a2:M*p*M*p,a3:M*p*p/2,a4:M*p*M*p*2.5,a5:M*p+M*p*p/2,a6:1-p};e={4326:{a:e.earth.radius,f:e.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,f:0},104902:{a:6051800,f:0},104903:{a:e.moon.radius,f:e.moon.flattening},104904:{a:3393400,f:.005207166853303471},
104905:{a:e.mars.radius,f:e.mars.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1E4,f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},104914:{a:4E4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,f:3},104922:{a:18E3,f:0},104923:{a:14E3,f:0},104924:{a:49300,f:0},104925:{a:60268E3,f:.09796243445941462},104926:{a:16E3,
f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,f:0},104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,f:0},104938:{a:11E4,f:0},104939:{a:50100,f:0},104940:{a:764E3,f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},104945:{a:578900,f:0},104946:{a:33E3,f:0},104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,f:0},
104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},104961:{a:74E3,f:0},104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,f:0},104968:{a:1352600,f:0},104969:{a:1195E3,f:0},104970:{a:593E3,f:0},104971:{a:e.mars.radius,f:0},
104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};n.WKT_SPHEROID_REGEX=/SPHEROID\[([^\]]+)]/i;n.earthEllipsoidConstants=M;n.spheroids=e;n.toRadians=Z;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/geometry/support/GeographicTransformation":function(){define(["./GeographicTransformationStep"],function(n){return function(){function e(M){this.steps=[];this._cached_projection={};this._chain="";this._gtlistentry=null;if(M&&M.steps)for(const p of M.steps)p instanceof n?this.steps.push(p):
this.steps.push(new n({wkid:p.wkid,wkt:p.wkt,isInverse:p.isInverse}))}e.cacheKey=function(M,p){return[void 0!==M.wkid&&null!==M.wkid?M.wkid.toString():"-1",void 0!==M.wkt&&null!==M.wkt?M.wkt.toString():"",void 0!==p.wkid&&null!==p.wkid?p.wkid.toString():"-1",void 0!==p.wkt&&null!==p.wkt?p.wkt.toString():""].join()};e.fromGE=function(M){const p=new e;let K="";for(const h of M.steps)M=n.fromGE(h),p.steps.push(M),K+=M.uid.toString()+",";p._cached_projection={};p._gtlistentry=null;p._chain=K;return p};
var Z=e.prototype;Z.getInverse=function(){const M=new e;M.steps=[];for(let p=this.steps.length-1;0<=p;p--)M.steps.push(this.steps[p].getInverse());return M};Z.getGTListEntry=function(){let M="";for(const p of this.steps)M+=p.uid.toString()+",";M!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=M);return this._gtlistentry};Z.assignCachedGe=function(M,p,K){this._cached_projection[e.cacheKey(M,p)]=K};Z.getCachedGeTransformation=function(M,p){let K="";for(const h of this.steps)K+=
h.uid.toString()+",";K!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=K);M=this._cached_projection[e.cacheKey(M,p)];return void 0===M?null:M};return e}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(n){let e=0;return function(){function Z(M=null){this.uid=e++;M?(this._wkt=void 0!==M.wkt?M.wkt:null,this._wkid=void 0!==M.wkid?M.wkid:-1,this._isInverse=void 0!==M.isInverse?!0===M.isInverse:
!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}Z.fromGE=function(M){const p=new Z;p._wkt=M.wkt;p._wkid=M.wkid;p._isInverse=M.isInverse;return p};Z.prototype.getInverse=function(){const M=new Z;M._wkt=this.wkt;M._wkid=this._wkid;M._isInverse=!this.isInverse;return M};n._createClass(Z,[{key:"wkt",get:function(){return this._wkt},set:function(M){this._wkt=M;this.uid=e++}},{key:"wkid",get:function(){return this._wkid},set:function(M){this._wkid=M;this.uid=e++}},{key:"isInverse",get:function(){return this._isInverse},
set:function(M){this._isInverse=M;this.uid=e++}}]);return Z}()})},"esri/geometry/geometryAdapters/json":function(){define(["exports"],function(n){let e=function(h,u,r){this.x=h;this.y=u;this.spatialReference=r;this.m=this.z=void 0},Z=function(h,u,r,H){this.rings=h;this.spatialReference=u;this.hasM=this.hasZ=void 0;r&&(this.hasZ=r);H&&(this.hasM=H)},M=function(h,u,r,H){this.paths=h;this.spatialReference=u;this.hasM=this.hasZ=void 0;r&&(this.hasZ=r);H&&(this.hasM=H)},p=function(h,u,r,H){this.points=
h;this.spatialReference=u;this.hasM=this.hasZ=void 0;r&&(this.hasZ=r);H&&(this.hasM=H)},K=function(h,u,r,H,da){this.xmin=h;this.ymin=u;this.xmax=r;this.ymax=H;this.spatialReference=da;this.mmax=this.mmin=this.zmax=this.zmin=void 0};n.jsonAdapter={convertToGEGeometry:function(h,u){return null==u?null:h.convertJSONToGeometry(u)},exportPoint:function(h,u,r){r=new e(h.getPointX(u),h.getPointY(u),r);const H=h.hasZ(u),da=h.hasM(u);H&&(r.z=h.getPointZ(u));da&&(r.m=h.getPointM(u));return r},exportPolygon:function(h,
u,r){return new Z(h.exportPaths(u),r,h.hasZ(u),h.hasM(u))},exportPolyline:function(h,u,r){return new M(h.exportPaths(u),r,h.hasZ(u),h.hasM(u))},exportMultipoint:function(h,u,r){return new p(h.exportPoints(u),r,h.hasZ(u),h.hasM(u))},exportExtent:function(h,u,r){var H=h.hasZ(u);const da=h.hasM(u);r=new K(h.getXMin(u),h.getYMin(u),h.getXMax(u),h.getYMax(u),r);H&&(H=h.getZExtent(u),r.zmin=H.vmin,r.zmax=H.vmax);da&&(h=h.getMExtent(u),r.mmin=h.vmin,r.mmax=h.vmax);return r}};Object.defineProperty(n,"__esModule",
{value:!0})})},"esri/layers/graphics/data/FeatureStore":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../core/Logger ../../../core/Error ../../../core/Evented ../../../geometry/support/aaBoundingRect ../featureConversionUtils ../../../geometry/support/aaBoundingBox ./BoundsStore ./optimizedFeatureQueryEngineAdapter".split(" "),function(n,e,Z,M,p,K,h,u,r,H){return function(){function da(F){this.geometryInfo=F;this._boundsStore=new r.BoundsStore;this._featuresById=
new Map;this._markedIds=new Set;this.events=new p;this.featureAdapter=H.optimizedFeatureQueryEngineAdapter}var fa=da.prototype;fa.add=function(F){this._add(F);this._emitChanged()};fa.addMany=function(F){for(const w of F)this._add(w);this._emitChanged()};fa.clear=function(){this._featuresById.clear();this._boundsStore.clear();this._emitChanged()};fa.removeById=function(F){F=this._featuresById.get(F);if(!F)return null;this._remove(F);this._emitChanged();return F};fa.removeManyById=function(F){this._boundsStore.invalidateIndex();
for(const w of F)(F=this._featuresById.get(w))&&this._remove(F);this._emitChanged()};fa.forEachBounds=function(F,w,C){for(const d of F)(F=this._boundsStore.get(d.objectId))&&w(u.fromRect(C,F))};fa.getFeature=function(F){return this._featuresById.get(F)};fa.has=function(F){return this._featuresById.has(F)};fa.forEach=function(F){this._featuresById.forEach(w=>F(w))};fa.forEachInBounds=function(F,w){this._boundsStore.forEachInBounds(F,C=>{w(this._featuresById.get(C))})};fa.startMarkingUsedFeatures=function(){this._boundsStore.invalidateIndex();
this._markedIds.clear()};fa.sweep=function(){let F=!1;this._featuresById.forEach((w,C)=>{this._markedIds.has(C)||(F=!0,this._remove(w))});this._markedIds.clear();F&&this._emitChanged()};fa._emitChanged=function(){this.events.emit("changed",void 0)};fa._add=function(F){if(F){var w=F.objectId;if(null==w)Z.getLogger("esri.layers.graphics.data.FeatureStore").error(new M("featurestore:invalid-feature","feature id is missing",{feature:F}));else{var C=this._featuresById.get(w);this._markedIds.add(w);if(C){F.displayId=
C.displayId;var d=this._boundsStore.get(w);this._boundsStore.delete(w)}else if(e.isSome(this.onFeatureAdd))this.onFeatureAdd(F);F.geometry&&F.geometry.coords&&F.geometry.coords.length?(d=h.getBoundsOptimizedGeometry(d||K.create(),F.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),this._boundsStore.set(w,d)):this._boundsStore.set(w,null);this._featuresById.set(w,F)}}};fa._remove=function(F){if(e.isSome(this.onFeatureRemove))this.onFeatureRemove(F);this._markedIds.delete(F.objectId);this._boundsStore.delete(F.objectId);
this._featuresById.delete(F.objectId);return F};n._createClass(da,[{key:"geometryType",get:function(){return this.geometryInfo.geometryType}},{key:"hasM",get:function(){return this.geometryInfo.hasM}},{key:"hasZ",get:function(){return this.geometryInfo.hasZ}},{key:"numFeatures",get:function(){return this._featuresById.size}},{key:"fullBounds",get:function(){if(!this.numFeatures)return null;const F=K.create(K.NEGATIVE_INFINITY);this._featuresById.forEach(w=>{if(w=this._boundsStore.get(w.objectId))F[0]=
Math.min(w[0],F[0]),F[1]=Math.min(w[1],F[1]),F[2]=Math.max(w[2],F[2]),F[3]=Math.max(w[3],F[3])});return F}},{key:"storeStatistics",get:function(){let F=0;this._featuresById.forEach(w=>{w.geometry&&w.geometry.coords&&(F+=w.geometry.coords.length)});return{featureCount:this._featuresById.size,vertexCount:F/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}}]);return da}()})},"esri/core/Evented":function(){define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","./handleUtils","./accessorSupport/decorators/subclass",
"./Accessor"],function(n,e,Z,M,p){let K=function(){function h(){this._emitter=new h.EventEmitter(this)}var u=h.prototype;u.emit=function(r,H){return this._emitter.emit(r,H)};u.on=function(r,H){return this._emitter.on(r,H)};u.once=function(r,H){return this._emitter.once(r,H)};u.hasEventListener=function(r){return this._emitter.hasEventListener(r)};return h}();(function(h){let u=function(){function H(fa=null){this.target=fa;this._listenersMap=null}var da=H.prototype;da.clear=function(){this._listenersMap&&
this._listenersMap.clear()};da.emit=function(fa,F){fa=this._listenersMap&&this._listenersMap.get(fa);if(!fa)return!1;const w=this.target||this;[...fa].forEach(C=>{C.call(w,F)});return 0<fa.length};da.on=function(fa,F){if(Array.isArray(fa)){var w=fa.map(C=>this.on(C,F));return Z.handlesGroup(w)}if(-1<fa.indexOf(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||(this._listenersMap=new Map);w=this._listenersMap.get(fa)||[];w.push(F);
this._listenersMap.set(fa,w);return{remove:()=>{const C=this._listenersMap&&this._listenersMap.get(fa)||[],d=C.indexOf(F);0<=d&&C.splice(d,1)}}};da.once=function(fa,F){const w=this.on(fa,C=>{w.remove();F.call(null,C)});return w};da.hasEventListener=function(fa){fa=this._listenersMap&&this._listenersMap.get(fa);return null!=fa&&0<fa.length};return H}();h.EventEmitter=u;h.EventedMixin=H=>{H=function(da){function fa(){var w=da.apply(this,arguments)||this;w._emitter=new u;return w}n._inheritsLoose(fa,
da);var F=fa.prototype;F.destroy=function(){this._emitter.clear()};F.emit=function(w,C){return this._emitter.emit(w,C)};F.on=function(w,C){return this._emitter.on(w,C)};F.once=function(w,C){return this._emitter.once(w,C)};F.hasEventListener=function(w){return this._emitter.hasEventListener(w)};return fa}(H);return H=e.__decorate([M.subclass("esri.core.Evented")],H)};let r=function(H){function da(){var F=H.apply(this,arguments)||this;F._emitter=new K.EventEmitter(n._assertThisInitialized(F));return F}
n._inheritsLoose(da,H);var fa=da.prototype;fa.emit=function(F,w){return this._emitter.emit(F,w)};fa.on=function(F,w){return this._emitter.on(F,w)};fa.once=function(F,w){return this._emitter.once(F,w)};fa.hasEventListener=function(F){return this._emitter.hasEventListener(F)};return da}(p);r=e.__decorate([M.subclass("esri.core.Evented")],r);h.EventedAccessor=r})(K||(K={}));return K})},"esri/geometry/support/aaBoundingBox":function(){define(["exports","../../core/maybe","../Extent","./aaBoundingRect"],
function(n,e,Z,M){function p(d=w){return[d[0],d[1],d[2],d[3],d[4],d[5]]}function K(d,m,v,t,q,A,N=p()){N[0]=d;N[1]=m;N[2]=v;N[3]=t;N[4]=q;N[5]=A;return N}function h(d){return d[0]>=d[3]?0:d[3]-d[0]}function u(d){return d[1]>=d[4]?0:d[4]-d[1]}function r(d){return d[2]>=d[5]?0:d[5]-d[2]}function H(d,m){return Math.max(m[0],d[0])<=Math.min(m[3],d[3])&&Math.max(m[1],d[1])<=Math.min(m[4],d[4])&&Math.max(m[2],d[2])<=Math.min(m[5],d[5])}function da(d,m){d[0]=m[0];d[1]=m[1];d[2]=m[2];d[3]=m[3];d[4]=m[4];d[5]=
m[5];return d}function fa(d){return 6===d.length}const F=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity],w=[0,0,0,0,0,0],C=p();n.NEGATIVE_INFINITY=F;n.POSITIVE_INFINITY=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];n.ZERO=w;n.allFinite=function(d){for(let m=0;6>m;m++)if(!isFinite(d[m]))return!1;return!0};n.center=function(d,m=[0,0,0]){m[0]=d[0]+h(d)/2;m[1]=d[1]+u(d)/2;m[2]=d[2]+r(d)/2;return m};n.contains=function(d,m){return m[0]>=d[0]&&m[1]>=d[1]&&m[2]>=d[2]&&m[3]<=d[3]&&
m[4]<=d[4]&&m[5]<=d[5]};n.containsPoint=function(d,m){return m[0]>=d[0]&&m[1]>=d[1]&&m[2]>=d[2]&&m[0]<=d[3]&&m[1]<=d[4]&&m[2]<=d[5]};n.containsPointWithMargin=function(d,m,v){return m[0]>=d[0]-v&&m[1]>=d[1]-v&&m[2]>=d[2]-v&&m[0]<=d[3]+v&&m[1]<=d[4]+v&&m[2]<=d[5]+v};n.create=p;n.depth=u;n.diameter=function(d){const m=h(d),v=r(d);d=u(d);return Math.sqrt(m*m+v*v+d*d)};n.empty=function(d){return d?da(d,F):p(F)};n.equals=function(d,m,v){if(e.isNone(d)||e.isNone(m))return d===m;if(!fa(d)||!fa(m))return!1;
if(v)for(let t=0;t<d.length;t++){if(!v(d[t],m[t]))return!1}else for(v=0;v<d.length;v++)if(d[v]!==m[v])return!1;return!0};n.expandWithAABB=function(d,m){d[0]=Math.min(d[0],m[0]);d[1]=Math.min(d[1],m[1]);d[2]=Math.min(d[2],m[2]);d[3]=Math.max(d[3],m[3]);d[4]=Math.max(d[4],m[4]);d[5]=Math.max(d[5],m[5])};n.expandWithBuffer=function(d,m,v=0,t=m.length/3){let q=d[0],A=d[1],N=d[2],aa=d[3],ja=d[4],U=d[5];for(let G=0;G<t;G++)q=Math.min(q,m[v+3*G]),A=Math.min(A,m[v+3*G+1]),N=Math.min(N,m[v+3*G+2]),aa=Math.max(aa,
m[v+3*G]),ja=Math.max(ja,m[v+3*G+1]),U=Math.max(U,m[v+3*G+2]);d[0]=q;d[1]=A;d[2]=N;d[3]=aa;d[4]=ja;d[5]=U};n.expandWithNestedArray=function(d,m,v){const t=m.length;let q=d[0],A=d[1],N=d[2],aa=d[3],ja=d[4],U=d[5];if(v)for(v=0;v<t;v++){var G=m[v];q=Math.min(q,G[0]);A=Math.min(A,G[1]);N=Math.min(N,G[2]);aa=Math.max(aa,G[0]);ja=Math.max(ja,G[1]);U=Math.max(U,G[2])}else for(v=0;v<t;v++)G=m[v],q=Math.min(q,G[0]),A=Math.min(A,G[1]),aa=Math.max(aa,G[0]),ja=Math.max(ja,G[1]);d[0]=q;d[1]=A;d[2]=N;d[3]=aa;d[4]=
ja;d[5]=U};n.expandWithOffset=function(d,m,v,t){d[0]=Math.min(d[0],d[0]+m);d[3]=Math.max(d[3],d[3]+m);d[1]=Math.min(d[1],d[1]+v);d[4]=Math.max(d[4],d[4]+v);d[2]=Math.min(d[2],d[2]+t);d[5]=Math.max(d[5],d[5]+t)};n.expandWithRect=function(d,m){d[0]=Math.min(d[0],m[0]);d[1]=Math.min(d[1],m[1]);d[3]=Math.max(d[3],m[2]);d[4]=Math.max(d[4],m[3])};n.expandWithVec3=function(d,m){d[0]=Math.min(d[0],m[0]);d[1]=Math.min(d[1],m[1]);d[2]=Math.min(d[2],m[2]);d[3]=Math.max(d[3],m[0]);d[4]=Math.max(d[4],m[1]);d[5]=
Math.max(d[5],m[2])};n.fromExtent=function(d,m=p()){m[0]=d.xmin;m[1]=d.ymin;m[2]=d.zmin;m[3]=d.xmax;m[4]=d.ymax;m[5]=d.zmax;return m};n.fromMinMax=function(d,m,v=p()){v[0]=d[0];v[1]=d[1];v[2]=d[2];v[3]=m[0];v[4]=m[1];v[5]=m[2];return v};n.fromRect=function(d,m){d[0]=m[0];d[1]=m[1];d[2]=Number.NEGATIVE_INFINITY;d[3]=m[2];d[4]=m[3];d[5]=Number.POSITIVE_INFINITY;return d};n.fromValues=K;n.getMax=function(d,m){m[0]=d[3];m[1]=d[4];m[2]=d[5];return m};n.getMin=function(d,m){m[0]=d[0];m[1]=d[1];m[2]=d[2];
return m};n.height=r;n.intersects=H;n.intersectsClippingArea=function(d,m){return e.isNone(m)?!0:H(d,m)};n.is=fa;n.isPoint=function(d){return 0===h(d)&&0===u(d)&&0===r(d)};n.maximumDimension=function(d){return Math.max(h(d),r(d),u(d))};n.offset=function(d,m,v,t,q=d){q[0]=d[0]+m;q[1]=d[1]+v;q[2]=d[2]+t;q[3]=d[3]+m;q[4]=d[4]+v;q[5]=d[5]+t;return q};n.scale=function(d,m,v=d){const t=d[0]+h(d)/2,q=d[1]+u(d)/2,A=d[2]+r(d)/2;v[0]=t+(d[0]-t)*m;v[1]=q+(d[1]-q)*m;v[2]=A+(d[2]-A)*m;v[3]=t+(d[3]-t)*m;v[4]=q+
(d[4]-q)*m;v[5]=A+(d[5]-A)*m;return v};n.set=da;n.setMax=function(d,m,v=d){v[3]=m[0];v[4]=m[1];v[5]=m[2];v!==d&&(v[0]=d[0],v[1]=d[1],v[2]=d[2]);return d};n.setMin=function(d,m,v=d){v[0]=m[0];v[1]=m[1];v[2]=m[2];v!==d&&(v[3]=d[3],v[4]=d[4],v[5]=d[5]);return v};n.size=function(d,m=[0,0,0]){m[0]=h(d);m[1]=u(d);m[2]=r(d);return m};n.toExtent=function(d,m){return isFinite(d[2])||isFinite(d[5])?new Z({xmin:d[0],xmax:d[3],ymin:d[1],ymax:d[4],zmin:d[2],zmax:d[5],spatialReference:m}):new Z({xmin:d[0],xmax:d[3],
ymin:d[1],ymax:d[4],spatialReference:m})};n.toRect=function(d,m){m||(m=M.create());m[0]=d[0];m[1]=d[1];m[2]=d[3];m[3]=d[4];return m};n.width=h;n.wrap=function(d,m,v,t,q,A){return K(d,m,v,t,q,A,C)};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/graphics/data/BoundsStore":function(){define(["exports","../../../core/has","../../../core/libs/rbush/PooledRBush"],function(n,e,Z){function M(h,u,r){p.minX=u[0];p.minY=u[1];p.maxX=u[2];p.maxY=u[3];h.search(p,r)}const p={minX:0,minY:0,maxX:0,
maxY:0};let K=function(){function h(){this._indexInvalid=!1;this._boundsToLoad=[];this._boundsById=new Map;this._idByBounds=new Map;this._index=new Z.PooledRBush(9,e("csp-restrictions")?r=>({minX:r[0],minY:r[1],maxX:r[2],maxY:r[3]}):["[0]","[1]","[2]","[3]"]);this._loadIndex=()=>{if(this._indexInvalid){const r=Array(this._idByBounds.size);let H=0;this._idByBounds.forEach((da,fa)=>{r[H++]=fa});this._indexInvalid=!1;this._index.clear();this._index.load(r)}else this._boundsToLoad.length&&(this._index.load(this._boundsToLoad.filter(r=>
this._idByBounds.has(r))),this._boundsToLoad.length=0)}}var u=h.prototype;u.clear=function(){this._indexInvalid=!1;this._boundsToLoad.length=0;this._boundsById.clear();this._idByBounds.clear();this._index.clear()};u.delete=function(r){const H=this._boundsById.get(r);this._boundsById.delete(r);H&&(this._idByBounds.delete(H),this._indexInvalid||this._index.remove(H))};u.forEachInBounds=function(r,H){this._loadIndex();M(this._index,r,da=>H(this._idByBounds.get(da)))};u.get=function(r){return this._boundsById.get(r)};
u.has=function(r){return this._boundsById.has(r)};u.invalidateIndex=function(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)};u.set=function(r,H){if(!this._indexInvalid){const da=this._boundsById.get(r);da&&(this._index.remove(da),this._idByBounds.delete(da))}this._boundsById.set(r,H);H&&(this._idByBounds.set(H,r),this._indexInvalid||(this._boundsToLoad.push(H),5E4<this._boundsToLoad.length&&this._loadIndex()))};return h}();n.BoundsStore=K;Object.defineProperty(n,"__esModule",
{value:!0})})},"esri/core/libs/rbush/PooledRBush":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../maybe ../../arrayUtils ../../PooledArray ../../../chunks/quickselect".split(" "),function(n,e,Z,M,p,K){function h(U,G){u(U,0,U.children.length,G,U)}function u(U,G,D,J,O){O||(O=new aa([]));O.minX=Infinity;O.minY=Infinity;O.maxX=-Infinity;O.maxY=-Infinity;for(let R=G,z;R<D;R++)z=U.children[R],r(O,U.leaf?J(z):z);return O}function r(U,G){U.minX=Math.min(U.minX,G.minX);U.minY=Math.min(U.minY,
G.minY);U.maxX=Math.max(U.maxX,G.maxX);U.maxY=Math.max(U.maxY,G.maxY)}function H(U,G){return U.minX-G.minX}function da(U,G){return U.minY-G.minY}function fa(U){return(U.maxX-U.minX)*(U.maxY-U.minY)}function F(U){return U.maxX-U.minX+(U.maxY-U.minY)}function w(U,G){return U.minX<=G.minX&&U.minY<=G.minY&&G.maxX<=U.maxX&&G.maxY<=U.maxY}function C(U,G){return G.minX<=U.maxX&&G.minY<=U.maxY&&G.maxX>=U.minX&&G.maxY>=U.minY}function d(U,G,D,J,O){for(G=[G,D];G.length;){D=Z.assumeNonNull(G.pop());const R=
Z.assumeNonNull(G.pop());if(D-R<=J)continue;const z=R+Math.ceil((D-R)/J/2)*J;K.quickselect(U,z,R,D,O);G.push(R,z,z,D)}}let m=function(){function U(D=9,J){this.compareMinX=H;this.compareMinY=da;this.toBBox=function(O){return O};this._maxEntries=Math.max(4,D||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));J&&("function"===typeof J?this.toBBox=J:this._initFormat(J));this.clear()}var G=U.prototype;G.destroy=function(){this.clear();v.prune();t.prune();q.prune();A.prune()};G.all=function(D){this._all(this.data,
D)};G.search=function(D,J){let O=this.data;const R=this.toBBox;if(C(D,O))for(v.clear();O;){for(let z=0,l=O.children.length;z<l;z++){const I=O.children[z],T=O.leaf?R(I):I;C(D,T)&&(O.leaf?J(I):w(D,T)?this._all(I,J):v.push(I))}O=v.pop()}};G.collides=function(D){let J=this.data;const O=this.toBBox;if(!C(D,J))return!1;for(v.clear();J;){for(let R=0,z=J.children.length;R<z;R++){const l=J.children[R],I=J.leaf?O(l):l;if(C(D,I)){if(J.leaf||w(D,I))return!0;v.push(l)}}J=v.pop()}return!1};G.load=function(D){if(!D.length)return this;
if(D.length<this._minEntries){for(let J=0,O=D.length;J<O;J++)this.insert(D[J]);return this}D=this._build(D.slice(0,D.length),0,D.length-1,0);if(this.data.children.length)if(this.data.height===D.height)this._splitRoot(this.data,D);else{if(this.data.height<D.height){const J=this.data;this.data=D;D=J}this._insert(D,this.data.height-D.height-1,!0)}else this.data=D;return this};G.insert=function(D){D&&this._insert(D,this.data.height-1);return this};G.clear=function(){this.data=new aa([]);return this};
G.remove=function(D){if(!D)return this;let J=this.data,O=null,R=0,z=!1,l;const I=this.toBBox(D);q.clear();for(A.clear();J||0<q.length;){if(!J){var T;J=Z.assumeNonNull(q.pop());O=q.data[q.length-1];R=null!=(T=A.pop())?T:0;z=!0}if(J.leaf&&(l=M.indexOf(J.children,D,J.children.length,J.indexHint),-1!==l)){J.children.splice(l,1);q.push(J);this._condense(q);break}z||J.leaf||!w(J,I)?O?(R++,J=O.children[R],z=!1):J=null:(q.push(J),A.push(R),R=0,O=J,J=J.children[0])}return this};G.toJSON=function(){return this.data};
G.fromJSON=function(D){this.data=D;return this};G._all=function(D,J){for(t.clear();D;){var O;if(!0===D.leaf)for(const R of D.children)J(R);else t.pushArray(D.children);D=null!=(O=t.pop())?O:null}};G._build=function(D,J,O,R){var z=O-J+1,l=this._maxEntries;if(z<=l)return D=new aa(D.slice(J,O+1)),h(D,this.toBBox),D;R||(R=Math.ceil(Math.log(z)/Math.log(l)),l=Math.ceil(z/l**(R-1)));const I=new ja([]);I.height=R;z=Math.ceil(z/l);l=z*Math.ceil(Math.sqrt(l));for(d(D,J,O,l,this.compareMinX);J<=O;J+=l){const T=
Math.min(J+l-1,O);d(D,J,T,z,this.compareMinY);for(let L=J;L<=T;L+=z)I.children.push(this._build(D,L,Math.min(L+z-1,T),R-1))}h(I,this.toBBox);return I};G._chooseSubtree=function(D,J,O,R){for(;;){R.push(J);if(!0===J.leaf||R.length-1===O)break;let z=Infinity,l=Infinity,I=void 0;for(let T=0,L=J.children.length;T<L;T++){const ia=J.children[T],pa=fa(ia),qa=(Math.max(ia.maxX,D.maxX)-Math.min(ia.minX,D.minX))*(Math.max(ia.maxY,D.maxY)-Math.min(ia.minY,D.minY))-pa;qa<l?(l=qa,z=pa<z?pa:z,I=ia):qa===l&&pa<z&&
(z=pa,I=ia)}J=I||J.children[0]}return J};G._insert=function(D,J,O){var R=this.toBBox;O=O?D:R(D);q.clear();R=this._chooseSubtree(O,this.data,J,q);R.children.push(D);for(r(R,O);0<=J;)if(q.data[J].children.length>this._maxEntries)this._split(q,J),J--;else break;this._adjustParentBBoxes(O,q,J)};G._split=function(D,J){const O=D.data[J];var R=O.children.length;const z=this._minEntries;this._chooseSplitAxis(O,z,R);(R=this._chooseSplitIndex(O,z,R))?(R=O.children.splice(R,O.children.length-R),R=O.leaf?new aa(R):
new ja(R),R.height=O.height,h(O,this.toBBox),h(R,this.toBBox),J?D.data[J-1].children.push(R):this._splitRoot(O,R)):console.log("  Error: assertion failed at PooledRBush._split: no valid split index")};G._splitRoot=function(D,J){this.data=new ja([D,J]);this.data.height=D.height+1;h(this.data,this.toBBox)};G._chooseSplitIndex=function(D,J,O){let R,z,l=void 0;R=z=Infinity;for(let T=J;T<=O-J;T++){var I=u(D,0,T,this.toBBox);const L=u(D,T,O,this.toBBox),ia=Math.max(0,Math.min(I.maxX,L.maxX)-Math.max(I.minX,
L.minX))*Math.max(0,Math.min(I.maxY,L.maxY)-Math.max(I.minY,L.minY));I=fa(I)+fa(L);ia<R?(R=ia,l=T,z=I<z?I:z):ia===R&&I<z&&(z=I,l=T)}return l};G._chooseSplitAxis=function(D,J,O){const R=D.leaf?this.compareMinX:H,z=D.leaf?this.compareMinY:da,l=this._allDistMargin(D,J,O,R);J=this._allDistMargin(D,J,O,z);l<J&&D.children.sort(R)};G._allDistMargin=function(D,J,O,R){D.children.sort(R);R=this.toBBox;var z=u(D,0,J,R);const l=u(D,O-J,O,R);let I=F(z)+F(l);for(let T=J;T<O-J;T++){const L=D.children[T];r(z,D.leaf?
R(L):L);I+=F(z)}for(O=O-J-1;O>=J;O--)z=D.children[O],r(l,D.leaf?R(z):z),I+=F(l);return I};G._adjustParentBBoxes=function(D,J,O){for(;0<=O;O--)r(J.data[O],D)};G._condense=function(D){for(let J=D.length-1;0<=J;J--){const O=D.data[J];if(0===O.children.length)if(0<J){const R=D.data[J-1],z=R.children;z.splice(M.indexOf(z,O,z.length,R.indexHint),1)}else this.clear();else h(O,this.toBBox)}};G._initFormat=function(D){const J=["return a"," - b",";"];this.compareMinX=new Function("a","b",J.join(D[0]));this.compareMinY=
new Function("a","b",J.join(D[1]));this.toBBox=new Function("a","return {minX: a"+D[0]+", minY: a"+D[1]+", maxX: a"+D[2]+", maxY: a"+D[3]+"};")};return U}();const v=new p,t=new p,q=new p,A=new p({deallocator:void 0});p=function(){this.minY=this.minX=Infinity;this.maxY=this.maxX=-Infinity};let N=function(U){function G(){var D=U.apply(this,arguments)||this;D.height=1;D.indexHint=new M.PositionHint;return D}e._inheritsLoose(G,U);return G}(p),aa=function(U){function G(D){var J=U.call(this)||this;J.children=
D;J.leaf=!0;return J}e._inheritsLoose(G,U);return G}(N),ja=function(U){function G(D){var J=U.call(this)||this;J.children=D;J.leaf=!1;return J}e._inheritsLoose(G,U);return G}(N);n.BBox=p;n.PooledRBush=m;n.default=m;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/chunks/quickselect":function(){define(["exports","./_commonjsHelpers"],function(n,e){e=e.createCommonjsModule(function(Z){(function(M){M=M();void 0!==M&&(Z.exports=M)})(function(){function M(h,u,r,H,da){for(;H>r;){if(600<H-r){var fa=
H-r+1,F=u-r+1,w=Math.log(fa),C=.5*Math.exp(2*w/3);w=.5*Math.sqrt(w*C*(fa-C)/fa)*(0>F-fa/2?-1:1);M(h,u,Math.max(r,Math.floor(u-F*C/fa+w)),Math.min(H,Math.floor(u+(fa-F)*C/fa+w)),da)}fa=h[u];F=r;C=H;p(h,r,u);for(0<da(h[H],fa)&&p(h,r,H);F<C;){p(h,F,C);F++;for(C--;0>da(h[F],fa);)F++;for(;0<da(h[C],fa);)C--}0===da(h[r],fa)?p(h,r,C):(C++,p(h,C,H));C<=u&&(r=C+1);u<=C&&(H=C-1)}}function p(h,u,r){var H=h[u];h[u]=h[r];h[r]=H}function K(h,u){return h<u?-1:h>u?1:0}return function(h,u,r,H,da){M(h,u,r||0,H||h.length-
1,da||K)}})});n.quickselect=e})},"esri/layers/graphics/data/optimizedFeatureQueryEngineAdapter":function(){define(["exports","../OptimizedFeature","../OptimizedGeometry","../centroid"],function(n,e,Z,M){const p={getObjectId(K){return K.objectId},getAttributes(K){return K.attributes},getAttribute(K,h){return K.attributes[h]},cloneWithGeometry(K,h){return new e(h,K.attributes,null,K.objectId)},getGeometry(K){return K.geometry},getCentroid(K,h){K.centroid||(K.centroid=M.getCentroidOptimizedGeometry(new Z,
K.geometry,h.hasZ,h.hasM));return K.centroid}};n.default=p;n.optimizedFeatureQueryEngineAdapter=p;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/graphics/centroid":function(){define(["exports"],function(n){function e(M,p,K,h,u,r,H=1){r=u?r?4:3:r?3:2;let da=K,fa=K+r,F=0,w=0,C=K=0,d=0;for(let m=0,v=h-1;m<v;m++,da+=r,fa+=r){h=p[da];const t=p[da+1],q=p[da+2],A=p[fa],N=p[fa+1],aa=p[fa+2];let ja=h*N-A*t;C+=ja;F+=(h+A)*ja;w+=(t+N)*ja;u&&(ja=h*aa-A*q,K+=(q+aa)*ja,d+=ja);h<M[0]&&(M[0]=h);
h>M[1]&&(M[1]=h);t<M[2]&&(M[2]=t);t>M[3]&&(M[3]=t);u&&(q<M[4]&&(M[4]=q),q>M[5]&&(M[5]=q))}0<C*H&&(C*=-1);0<d*H&&(d*=-1);if(!C)return null;M=[F,w,.5*C];u&&(M[3]=K,M[4]=.5*d);return M}function Z(M,p,K,h,u){u=h?u?4:3:u?3:2;let r=p,H=p+u,da=0,fa=0,F=0,w=0;for(let v=0,t=K-1;v<t;v++,r+=u,H+=u){var C=M[r];const q=M[r+1],A=M[r+2],N=M[H],aa=M[H+1],ja=M[H+2];if(h){{var d=N-C;var m=aa-q;const U=ja-A;d=Math.sqrt(d*d+m*m+U*U)}}else d=N-C,m=aa-q,d=Math.sqrt(d*d+m*m);d&&(da+=d,h?(C=[C+.5*(N-C),q+.5*(aa-q),A+.5*
(ja-A)],fa+=d*C[0],F+=d*C[1],w+=d*C[2]):(C=[C+.5*(N-C),q+.5*(aa-q)],fa+=d*C[0],F+=d*C[1]))}return 0<da?h?[fa/da,F/da,w/da]:[fa/da,F/da]:0<K?h?[M[p],M[p+1],M[p+2]]:[M[p],M[p+1]]:null}n.getCentroidOptimizedGeometry=function(M,p,K,h,u){if(!p||!p.lengths.length)return null;const r="upperLeft"===(null==u?void 0:u.originPosition)?-1:1;M.lengths.length&&(M.lengths.length=0);M.coords.length&&(M.coords.length=0);u=M.coords;const H=[],da=K?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,
Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:fa,coords:F}=p,w=K?h?4:3:h?3:2;let C=0;for(var d of fa){const m=e(da,F,C,d,K,h,r);m&&H.push(m);C+=d*w}H.sort((m,v)=>{let t=r*m[2]-r*v[2];0===t&&K&&(t=m[4]-v[4]);return t});H.length&&(d=6*H[0][2],u[0]=H[0][0]/d,u[1]=H[0][1]/d,K&&(d=6*H[0][4],u[2]=0!==d?H[0][3]/d:0),u[0]<da[0]||u[0]>da[1]||u[1]<da[2]||u[1]>da[3]||K&&
(u[2]<da[4]||u[2]>da[5]))&&(u.length=0);if(!u.length)if(p=p.lengths[0]?Z(F,0,fa[0],K,h):null)u[0]=p[0],u[1]=p[1],K&&2<p.length&&(u[2]=p[2]);else return null;return M};n.lineCentroid=Z;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/graphics/data/QueryEngine":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/lang ../../../core/maybe ../../../core/Error ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/boundsUtils ../../../geometry/support/jsonUtils ../../../core/unitUtils ../../../geometry/support/normalizeUtils ../../../core/MemCache ../../../geometry/support/aaBoundingRect ../../support/PromiseQueue ../../support/FieldsIndex ./QueryEngineCapabilities ../../../geometry/support/aaBoundingBox ./projectionSupport ./attributeSupport ./utils ./spatialQuerySupport ./timeSupport ./QueryEngineResult".split(" "),
function(n,e,Z,M,p,K,h,u,r,H,da,fa,F,w,C,d,m,v,t,q,A,N){function aa(R){return R.every(z=>"exceedslimit"!==z.statisticType)}const ja=new Set,U=new da.MemCacheStorage(2E6);let G=0,D=function(){function R(l){this.capabilities={query:C.queryCapabilities};this.geometryType=l.geometryType;this.hasM=l.hasM;this.hasZ=l.hasZ;this.objectIdField=l.objectIdField;this.spatialReference=l.spatialReference;this.definitionExpression=l.definitionExpression;this.featureStore=l.featureStore;this.aggregateAdapter=l.aggregateAdapter;
this._changeHandle=this.featureStore.events.on("changed",()=>this.clearCache());this.timeInfo=l.timeInfo;l.cacheSpatialQueries&&(this._geometryQueryCache=new da.MemCache(G++ +"$$",U));this.fieldsIndex=new w(l.fields);l.scheduler&&l.task&&(this._frameQueue=new F,this._frameTask=l.scheduler.registerTask(l.task,I=>this._update(I),()=>0<this._frameQueue.length))}var z=R.prototype;z.destroy=function(){this._frameTask&&(this._frameTask.remove(),this._frameTask=null,this._frameQueue.cancelAll(),this._frameQueue=
null);this.clearCache();this._geometryQueryCache&&this._geometryQueryCache.destroy();this._changeHandle&&(this._changeHandle.remove(),this._changeHandle=null);this.fieldsIndex.destroy()};z.clearCache=function(){this._geometryQueryCache&&this._geometryQueryCache.clear();this._timeExtent=this._allItems=null};z.executeQuery=async function(l={},I){let T=Z.clone(l),L;try{T=await this._schedule(()=>t.normalizeQuery(T,this.definitionExpression,this.spatialReference),I),T=await this._reschedule(()=>this._checkQuerySupport(T),
I),L=await this._reschedule(()=>this._executeGeometryQuery(T,I),I),L=await this._reschedule(()=>L.executeAggregateIdsQuery(T),I),L=await this._reschedule(()=>L.executeObjectIdsQuery(T),I),L=await this._reschedule(()=>L.executeTimeQuery(T),I),L=await this._reschedule(()=>L.executeAttributesQuery(T),I)}catch(ia){if(ia!==t.QUERY_ENGINE_EMPTY_RESULT)throw ia;L=new N([],null,this)}return L.createQueryResponse(T)};z.executeQueryForCount=async function(l={},I){let T=Z.clone(l),L;T.returnGeometry=!1;T.returnCentroid=
!1;T.outSR=null;try{T=await this._schedule(()=>t.normalizeQuery(T,this.definitionExpression,this.spatialReference),I),T=await this._reschedule(()=>this._checkQuerySupport(T),I),L=await this._reschedule(()=>this._executeGeometryQuery(T,I),I),L=await this._reschedule(()=>L.executeAggregateIdsQuery(T),I),L=await this._reschedule(()=>L.executeObjectIdsQuery(T),I),L=await this._reschedule(()=>L.executeTimeQuery(T),I),L=await this._reschedule(()=>L.executeAttributesQuery(T),I)}catch(ia){if(ia!==t.QUERY_ENGINE_EMPTY_RESULT)throw ia;
return 0}return L.createQueryResponseForCount(T)};z.executeQueryForExtent=async function(l={},I){let T=Z.clone(l),L;l=T.outSR;try{T=await this._schedule(()=>t.normalizeQuery(T,this.definitionExpression,this.spatialReference),I);T=await this._reschedule(()=>this._checkQuerySupport(T),I);T.returnGeometry=!0;T.returnCentroid=!1;T.outSR=null;L=await this._reschedule(()=>this._executeGeometryQuery(T,I),I);L=await this._reschedule(()=>L.executeAggregateIdsQuery(T),I);L=await this._reschedule(()=>L.executeObjectIdsQuery(T),
I);L=await this._reschedule(()=>L.executeTimeQuery(T),I);L=await this._reschedule(()=>L.executeAttributesQuery(T),I);const ia=L.size;if(!ia)return{count:ia,extent:null};d.set(O,d.NEGATIVE_INFINITY);this.featureStore.forEachBounds(L.items,wa=>d.expandWithAABB(O,wa),J);const pa={xmin:O[0],ymin:O[1],xmax:O[3],ymax:O[4],spatialReference:t.cleanFromGeometryEngine(this.spatialReference)};this.hasZ&&isFinite(O[2])&&isFinite(O[5])&&(pa.zmin=O[2],pa.zmax=O[5]);const qa=m.project(pa,L.spatialReference,l);qa.spatialReference=
t.cleanFromGeometryEngine(l||this.spatialReference);if(0===qa.xmax-qa.xmin){const wa=r.getMetersPerUnitForSR(qa.spatialReference);qa.xmin-=wa;qa.xmax+=wa}if(0===qa.ymax-qa.ymin){const wa=r.getMetersPerUnitForSR(qa.spatialReference);qa.ymin-=wa;qa.ymax+=wa}if(this.hasZ&&null!=qa.zmin&&null!=qa.zmax&&0===qa.zmax-qa.zmin){const wa=r.getMetersPerUnitForSR(qa.spatialReference);qa.zmin-=wa;qa.zmax+=wa}return{count:ia,extent:qa}}catch(ia){if(ia===t.QUERY_ENGINE_EMPTY_RESULT)return{count:0,extent:null};throw ia;
}};z.executeQueryForIds=async function(l={},I){return this.executeQueryForIdSet(l,I).then(T=>Array.from(T))};z.executeQueryForIdSet=async function(l={},I){let T=Z.clone(l),L;T.returnGeometry=!1;T.returnCentroid=!1;T.outSR=null;try{T=await this._schedule(()=>t.normalizeQuery(T,this.definitionExpression,this.spatialReference),I);T=await this._reschedule(()=>this._checkQuerySupport(T),I);L=await this._reschedule(()=>this._executeGeometryQuery(T,I),I);L=await this._reschedule(()=>L.executeAggregateIdsQuery(T),
I);L=await this._reschedule(()=>L.executeObjectIdsQuery(T),I);L=await this._reschedule(()=>L.executeTimeQuery(T),I);L=await this._reschedule(()=>L.executeAttributesQuery(T),I);const ia=L.items,pa=new Set;await this._reschedule(()=>{for(const qa of ia)pa.add(L.featureAdapter.getObjectId(qa))},I);return pa}catch(ia){if(ia===t.QUERY_ENGINE_EMPTY_RESULT)return new Set;throw ia;}};z.executeQueryForSnapping=async function(l,I){const {point:T,distance:L,types:ia}=l;if(0===ia)return{candidates:[]};const pa=
await this._reschedule(()=>this._checkQuerySupport(l.query),I),qa=!K.equals(T.spatialReference,this.spatialReference);qa&&await m.checkProjectionSupport(T.spatialReference,this.spatialReference);var wa="number"===typeof L?L:L.x,Ca="number"===typeof L?L:L.y;wa={xmin:T.x-wa,xmax:T.x+wa,ymin:T.y-Ca,ymax:T.y+Ca,spatialReference:T.spatialReference};wa=qa?m.project(wa,this.spatialReference):wa;if(!wa)return{candidates:[]};Ca=(await H.normalizeCentralMeridian(u.fromJSON(T),null,{signal:I}))[0];const ha=
(await H.normalizeCentralMeridian(u.fromJSON(wa),null,{signal:I}))[0];if(M.isNone(Ca)||M.isNone(ha))return{candidates:[]};let y=new N(this._searchFeatures(this._getQueryBBoxes(ha.toJSON())),null,this);y=await this._reschedule(()=>y.executeObjectIdsQuery(pa),I);y=await this._reschedule(()=>y.executeTimeQuery(pa),I);y=await this._reschedule(()=>y.executeAttributesQuery(pa),I);I=Ca.toJSON();I=qa?m.project(I,this.spatialReference):I;return y.createSnappingResponse({...l,point:I,distance:qa?Math.max(wa.xmax-
wa.xmin,wa.ymax-wa.ymin)/2:L},T.spatialReference)};z.executeQueryForLatestObservations=async function(l={},I){if(!this.timeInfo||!this.timeInfo.trackIdField)throw new p("feature-store:unsupported-query","Missing timeInfo or timeInfo.trackIdField",{query:l,timeInfo:this.timeInfo});let T=Z.clone(l),L;try{T=await this._schedule(()=>t.normalizeQuery(T,this.definitionExpression,this.spatialReference),I),T=await this._reschedule(()=>this._checkQuerySupport(T),I),L=await this._reschedule(()=>this._executeGeometryQuery(T,
I),I),L=await this._reschedule(()=>L.executeAggregateIdsQuery(T),I),L=await this._reschedule(()=>L.executeObjectIdsQuery(T),I),L=await this._reschedule(()=>L.executeTimeQuery(T),I),L=await this._reschedule(()=>L.executeAttributesQuery(T),I),L=await this._reschedule(()=>L.filterLatest(),I)}catch(ia){if(ia!==t.QUERY_ENGINE_EMPTY_RESULT)throw ia;L=new N([],null,this)}return L.createQueryResponse(T)};z._schedule=async function(l,I){return this._frameQueue?this._frameQueue.push(l,I):l()};z._reschedule=
async function(l,I){return this._frameQueue?this._frameQueue.unshift(l,I):l()};z._update=function(l){for(this._budget=l;!l.done&&this._frameQueue&&this._frameQueue.process();)l.madeProgress();this._budget=null};z._getAll=function(){if(!this._allItems){const l=[];this.featureStore.forEach(I=>l.push(I));this._allItems=new N(l,null,this)}return this._allItems};z._executeGeometryQuery=async function(l,I){const {geometry:T,outSR:L,spatialRel:ia,returnGeometry:pa,returnCentroid:qa}=l,wa=pa||qa,Ca=K.isValid(L)&&
!K.equals(this.spatialReference,L),ha=this._geometryQueryCache?Ca&&wa?JSON.stringify({geometry:T,spatialRelationship:ia,outSpatialReference:L}):JSON.stringify({geometry:T,spatialRelationship:ia}):null;if(ha){var y=this._geometryQueryCache.get(ha);if(!M.isUndefined(y))return y}y=async za=>{if(Ca&&wa)return za=await za.project(L),ha&&this._geometryQueryCache.put(ha,za,za.size||1),za;ha&&this._geometryQueryCache.put(ha,za,za.size||1);return za};if(!T)return y(this._getAll());const S=this.featureAdapter;
if("esriSpatialRelDisjoint"===ia){l=this._searchFeatures(this._getQueryBBoxes(T));if(!l.length)return y(this._getAll());let za,b;const f=new Set;for(var ma of l)f.add(S.getObjectId(ma));await this._reschedule(()=>{let V=0;za=Array(f.size);this.featureStore.forEach(g=>za[V++]=g);b=f},I);l=await this._reschedule(async()=>{const V=await q.getSpatialQueryOperator(ia,T,this.geometryType,this.hasZ,this.hasM);return new N(await this._runSpatialFilter(za,g=>!b.has(S.getObjectId(g))||V(S.getGeometry(g)),I),
T,this)},I);return y(l)}ma=this._searchFeatures(this._getQueryBBoxes(T));if(!ma.length)return y=new N([],T,this),ha&&this._geometryQueryCache.put(ha,y,y.size||1),y;if(this._canExecuteSoloPass(T,l))return y(new N(ma,T,this));const ya=await q.getSpatialQueryOperator(ia,T,this.geometryType,this.hasZ,this.hasM);l=await this._runSpatialFilter(ma,za=>ya(S.getGeometry(za)),I);return y(new N(l,T,this))};z._runSpatialFilter=async function(l,I,T){if(!I)return l;if(!this._budget)return l.filter(qa=>I(qa));let L=
0;const ia=[],pa=async()=>{for(;L<l.length;){const qa=l[L];I(qa)&&ia.push(qa);this._budget.done&&await this._reschedule(()=>pa(),T);++L}};return this._reschedule(()=>pa(),T).then(()=>ia)};z._canExecuteSoloPass=function(l,I){const {geometryType:T}=this;({spatialRel:I}=I);return q.canQueryWithRBush(l)&&("esriSpatialRelEnvelopeIntersects"===I||"esriGeometryPoint"===T&&("esriSpatialRelIntersects"===I||"esriSpatialRelContains"===I||"esriSpatialRelWithin"===I))};z._getQueryBBoxes=function(l){if(q.canQueryWithRBush(l)){if(u.isExtent(l))return[fa.fromValues(l.xmin,
l.ymin,l.xmax,l.ymax)];if(u.isPolygon(l))return l.rings.map(I=>fa.fromValues(Math.min(I[0][0],I[2][0]),Math.min(I[0][1],I[2][1]),Math.max(I[0][0],I[2][0]),Math.max(I[0][1],I[2][1])))}return[h.getBoundsXY(fa.create(),l)]};z._searchFeatures=function(l){for(const L of l)this.featureStore.forEachInBounds(L,ia=>{ja.add(ia)});const I=Array(ja.size);let T=0;ja.forEach(L=>I[T++]=L);ja.clear();return I};z._checkQuerySupport=async function(l){if(0>l.distance||null!=l.geometryPrecision||l.multipatchOption||
l.pixelSize||l.relationParam||l.text)throw new p("feature-store:unsupported-query","Unsupported query options",{query:l});return Promise.all([this._checkAttributesQuerySupport(l),this._checkStatisticsQuerySupport(l),q.checkSpatialQuerySupport(l,this.geometryType,this.spatialReference),m.checkProjectionSupport(this.spatialReference,l.outSR)]).then(()=>l)};z._checkAttributesQuerySupport=function(l){const {outFields:I,orderByFields:T,returnDistinctValues:L,outStatistics:ia}=l,pa=ia?ia.map(qa=>qa.outStatisticFieldName&&
qa.outStatisticFieldName.toLowerCase()):[];if(T&&0<T.length){const qa=T.map(wa=>{const Ca=wa.toLowerCase();return-1<Ca.indexOf(" asc")?Ca.split(" asc")[0]:-1<Ca.indexOf(" desc")?Ca.split(" desc")[0]:wa}).filter(wa=>-1===pa.indexOf(wa));v.validateFields(this.fieldsIndex,qa,"orderByFields contains missing fields")}if(I&&0<I.length)v.validateFields(this.fieldsIndex,I,"outFields contains missing fields");else if(L)throw new p("feature-store:unsupported-query","outFields should be specified for returnDistinctValues",
{query:l});v.validateWhere(this.fieldsIndex,l.where)};z._checkStatisticsQuerySupport=async function(l){const {outStatistics:I,groupByFieldsForStatistics:T,having:L}=l;var ia=T&&T.length,pa=I&&I.length;if(L){if(!ia||!pa)throw new p("feature-store:unsupported-query","outStatistics and groupByFieldsForStatistics should be specified with having",{query:l});v.validateHaving(this.fieldsIndex,L,I)}if(pa&&aa(I)){pa=I.map(qa=>qa.onStatisticField);v.validateFields(this.fieldsIndex,pa,"onStatisticFields contains missing fields");
ia&&v.validateFields(this.fieldsIndex,T,"groupByFieldsForStatistics contains missing fields");for(const qa of I){const {onStatisticField:wa,statisticType:Ca}=qa;if(("percentile_disc"===Ca||"percentile_cont"===Ca)&&"statisticParameters"in qa){if({statisticParameters:ia}=qa,!ia)throw new p("feature-store:unsupported-query","statisticParamters should be set for percentile type",{definition:qa,query:l});}else if("count"!==Ca&&wa&&v.hasInvalidFieldType(wa,this.fieldsIndex))throw new p("feature-store:unsupported-query",
"outStatistics contains non-numeric fields",{definition:qa,query:l});}}};e._createClass(R,[{key:"featureAdapter",get:function(){return this.featureStore.featureAdapter}},{key:"fullExtent",get:function(){const l=this.featureStore.fullBounds;return l?{xmin:l[0],ymin:l[1],xmax:l[2],ymax:l[3],spatialReference:t.cleanFromGeometryEngine(this.spatialReference)}:null}},{key:"timeExtent",get:function(){return this.timeInfo?this._timeExtent?this._timeExtent:this._timeExtent=A.getTimeExtent(this.timeInfo,this.featureStore):
null}}]);return R}();const J=d.create(),O=d.create();n.Feature=function(R,z=null,l,I,T){this.attributes=R;this.geometry=l;this.centroid=I;this.filterFlags=T;this.groupId=-1;this.displayId=z};n.default=D;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/geometry/support/normalizeUtils":function(){define("exports ../../config ../../core/maybe ../../core/Logger ../../core/Error ./spatialReferenceUtils ./webMercatorUtils ../Polygon ../Polyline ./normalizeUtilsCommon ../../tasks/geometry/cut ../../tasks/geometry/simplify".split(" "),
function(n,e,Z,M,p,K,h,u,r,H,da,fa){function F(q){const A=[];let N=0,aa=0;for(let ja=0;ja<q.length;ja++){const U=q[ja];let G=null;for(let D=0;D<U.length;D++)G=U[D],A.push(G),0===D?aa=N=G[0]:(N=Math.min(N,G[0]),aa=Math.max(aa,G[0]));G&&A.push([(N+aa)/2,0])}return A}function w(q,A){if(!(q instanceof r||q instanceof u))throw t.error("straightLineDensify: the input geometry is neither polyline nor polygon"),new p("straightLineDensify: the input geometry is neither polyline nor polygon");var N=H.getGeometryParts(q);
const aa=[];for(const U of N){N=[];aa.push(N);N.push([U[0][0],U[0][1]]);for(let G=0;G<U.length-1;G++){const D=U[G][0],J=U[G][1],O=U[G+1][0],R=U[G+1][1];var ja=Math.sqrt((O-D)*(O-D)+(R-J)*(R-J));const z=(R-J)/ja,l=(O-D)/ja,I=ja/A;if(1<I){for(let T=1;T<=I-1;T++){const L=T*A;N.push([l*L+D,z*L+J])}ja=(ja+Math.floor(I-1)*A)/2;N.push([l*ja+D,z*ja+J])}N.push([O,R])}}return"polygon"===q.type?new u({rings:aa,spatialReference:q.spatialReference}):new r({paths:aa,spatialReference:q.spatialReference})}function C(q,
A,N){A&&(q=w(q,1E6),q=h.webMercatorToGeographic(q,!0));N&&(q=H.updatePolyGeometry(q,N));return q}function d(q,A,N){if(Array.isArray(q)){var aa=q[0];aa>A?(N=H.offsetMagnitude(aa,A),q[0]=aa+-2*N*A):aa<N&&(A=H.offsetMagnitude(aa,N),q[0]=aa+-2*A*N)}else aa=q.x,aa>A?(N=H.offsetMagnitude(aa,A),q=q.clone().offset(-2*N*A,0)):aa<N&&(A=H.offsetMagnitude(aa,N),q=q.clone().offset(-2*A*N,0));return q}function m(q,A){let N=-1;for(let aa=0;aa<A.cutIndexes.length;aa++){const ja=A.cutIndexes[aa],U=A.geometries[aa],
G=H.getGeometryParts(U);for(let D=0;D<G.length;D++){const J=G[D];J.some(O=>{if(180>O[0])return!0;O=0;for(var R=0;R<J.length;R++){var z=J[R][0];O=z>O?z:O}O=Number(O.toFixed(9));O=-360*H.offsetMagnitude(O,180);for(R=0;R<J.length;R++)z=U.getPoint(D,R),U.setPoint(D,R,z.clone().offset(O,0));return!0})}if(ja===N)if("polygon"===q[0].type)for(const D of H.getGeometryParts(U))q[ja]=q[ja].addRing(D);else{if("polyline"===q[0].type)for(const D of H.getGeometryParts(U))q[ja]=q[ja].addPath(D)}else N=ja,q[ja]=U}return q}
async function v(q,A,N){if(!Array.isArray(q))return v([q],A);var aa=A?A.url:e.geometryServiceUrl;let ja,U,G;let D=0;var J=[];A=[];for(var O of q)if(Z.isNone(O))A.push(O);else{if(!R){var R=O.spatialReference;var z=K.getInfo(R);var l=(ja=R.isWebMercator)?102100:4326;U=H.cutParams[l].maxX;G=H.cutParams[l].minX;var I=H.cutParams[l].plus180Line;l=H.cutParams[l].minus180Line}if(z)if("mesh"===O.type)A.push(O);else if("point"===O.type)A.push(d(O.clone(),U,G));else if("multipoint"===O.type){var T=O.clone();
T.points=T.points.map(L=>d(L,U,G));A.push(T)}else if("extent"===O.type)T=O.clone()._normalize(!1,!1,z),A.push(T.rings?new u(T):T);else if(O.extent){T=O.extent;const L=2*H.offsetMagnitude(T.xmin,G)*U;let ia=0===L?O.clone():H.updatePolyGeometry(O.clone(),L);T.offset(L,0);T.intersects(I)&&T.xmax!==U?(D=T.xmax>D?T.xmax:D,ia=C(ia,ja),J.push(ia),A.push("cut")):T.intersects(l)&&T.xmin!==G?(D=2*T.xmax*U>D?2*T.xmax*U:D,ia=C(ia,ja,360),J.push(ia),A.push("cut")):A.push(ia)}else A.push(O.clone());else A.push(O)}R=
H.offsetMagnitude(D,U);z=-90;I=R;for(O=new r;0<R;)l=-180+360*R,O.addPath([[l,z],[l,-1*z]]),z*=-1,R--;if(0<J.length&&0<I){R=await da.cut(aa,J,O,N);R=m(J,R);z=[];J=[];for(I=0;I<A.length;I++)O=A[I],"cut"!==O?J.push(O):(O=R.shift(),l=q[I],Z.isSome(l)&&"polygon"===l.type&&l.rings&&1<l.rings.length&&O.rings.length>=l.rings.length?(z.push(O),J.push("simplify")):J.push(ja?h.geographicToWebMercator(O):O));if(!z.length)return J;A=await fa.simplify(aa,z,N);q=[];for(N=0;N<J.length;N++)aa=J[N],"simplify"!==aa?
q.push(aa):q.push(ja?h.geographicToWebMercator(A.shift()):A.shift());return q}q=[];for(N=0;N<A.length;N++)aa=A[N],"cut"!==aa?q.push(aa):(aa=J.shift(),q.push(!0===ja?h.geographicToWebMercator(aa):aa));return Promise.resolve(q)}const t=M.getLogger("esri.geometry.support.normalizeUtils");n.getDenormalizedExtent=function(q){if(!q)return null;const A=q.extent;if(!A)return null;var N=q.spatialReference&&K.getInfo(q.spatialReference);if(!N)return A;const [aa,ja]=N.valid;({width:N}=A);let {xmin:U,xmax:G}=
A;[U,G]=[G,U];if("extent"===q.type||0===N||N<=ja||N>2*ja||U<aa||G>ja)return A;let D;switch(q.type){case "polygon":if(1<q.rings.length)D=F(q.rings);else return A;break;case "polyline":if(1<q.paths.length)D=F(q.paths);else return A;break;case "multipoint":D=q.points}q=A.clone();for(let J=0;J<D.length;J++){let O=D[J][0];0>O?(O+=ja,G=Math.max(O,G)):(O-=ja,U=Math.min(O,U))}q.xmin=U;q.xmax=G;return q.width<N?(q.xmin-=ja,q.xmax-=ja,q):A};n.normalizeCentralMeridian=v;n.normalizeMapX=function(q,A){if(A=K.getInfo(A)){const [N,
aa]=A.valid;A=aa-N;if(q<N)for(;q<N;)q+=A;if(q>aa)for(;q>aa;)q-=A}return q};n.straightLineDensify=w;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/geometry/support/normalizeUtilsCommon":function(){define(["exports","../SpatialReference","../Polyline","./jsonUtils"],function(n,e,Z,M){function p(h){return M.isPolygon(h)?h.rings:h.paths}const K={102100:{maxX:2.0037508342788905E7,minX:-2.0037508342788905E7,plus180Line:new Z({paths:[[[2.0037508342788905E7,-2.0037508342788905E7],[2.0037508342788905E7,
2.0037508342788905E7]]],spatialReference:e.WebMercator}),minus180Line:new Z({paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:e.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new Z({paths:[[[180,-180],[180,180]]],spatialReference:e.WGS84}),minus180Line:new Z({paths:[[[-180,-180],[-180,180]]],spatialReference:e.WGS84})}};n.cutParams=K;n.getGeometryParts=p;n.getSpatialReferenceMinMaxX=function(h){h=(null==h?0:h.isWebMercator)?
102100:4326;return[K[h].minX,K[h].maxX]};n.offsetMagnitude=function(h,u){return Math.ceil((h-u)/(2*u))};n.updatePolyGeometry=function(h,u){const r=p(h);for(const H of r)for(const da of H)da[0]+=u;return h};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/tasks/geometry/cut":function(){define(["exports","../../core/urlUtils","../../geometry/support/jsonUtils","../../geometry","../../request"],function(n,e,Z,M,p){n.cut=async function(K,h,u,r){K="string"===typeof K?e.urlToObject(K):K;const H=
h[0].spatialReference;h={...r,query:{...K.query,f:"json",sr:JSON.stringify(H),target:JSON.stringify({geometryType:Z.getJsonType(h[0]),geometries:h}),cutter:JSON.stringify(u)}};h=await p(K.path+"/cut",h);const {cutIndexes:da,geometries:fa=[]}=h.data;return{cutIndexes:da,geometries:fa.map(F=>{F=Z.fromJSON(F);F.spatialReference=H;return F})}};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/tasks/geometry/simplify":function(){define(["exports","../../core/urlUtils","../../geometry/support/jsonUtils",
"../../request"],function(n,e,Z,M){function p(h){return{geometryType:Z.getJsonType(h[0]),geometries:h.map(u=>u.toJSON())}}function K(h,u,r){const H=Z.getGeometryType(u);return h.map(da=>{da=H.fromJSON(da);da.spatialReference=r;return da})}n.simplify=async function(h,u,r){const H="string"===typeof h?e.urlToObject(h):h;h=u[0].spatialReference;const da=Z.getJsonType(u[0]);u={...r,query:{...H.query,f:"json",sr:h.wkid?h.wkid:JSON.stringify(h),geometries:JSON.stringify(p(u))}};u=await M(H.path+"/simplify",
u);return K(u.data,da,h)};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/core/MemCache":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","./PooledArray"],function(n,e,Z){let M=function(){function K(u,r,H){this._namespace=u;this._storage=r;this._removeFunc=!1;this._miss=this._hit=0;this._storage.register(this);this._namespace+=":";H&&(this._storage.registerRemoveFunc(this._namespace,H),this._removeFunc=!0)}var h=K.prototype;h.destroy=function(){this._storage.clear(this._namespace);
this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace);this._storage.deregister(this);this._storage=null};h.resetHitRate=function(){this._hit=this._miss=0};h.put=function(u,r,H,da=0){this._storage.put(this._namespace+u,r,H,da)};h.get=function(u){u=this._storage.get(this._namespace+u);void 0===u?++this._miss:++this._hit;return u};h.pop=function(u){u=this._storage.pop(this._namespace+u);void 0===u?++this._miss:++this._hit;return u};h.updateSize=function(u,r,H){this._storage.updateSize(this._namespace+
u,r,H)};h.clear=function(){this._storage.clear(this._namespace)};h.clearAll=function(){this._storage.clearAll()};h.getStats=function(){return this._storage.getStats()};h.resetStats=function(){this._storage.resetStats()};e._createClass(K,[{key:"namespace",get:function(){return this._namespace.slice(0,-1)}},{key:"hitRate",get:function(){return this._hit/(this._hit+this._miss)}},{key:"size",get:function(){return this._storage.size}},{key:"maxSize",get:function(){return this._storage.maxSize}}]);return K}(),
p=function(){function K(u=10485760){this._maxSize=u;this._db=new Map;this._miss=this._hit=this._size=0;this._removeFuncs=new Z;this._users=new Z}var h=K.prototype;h.destroy=function(){this.clearAll();this._removeFuncs.clear();this._users.clear();this._db=null};h.register=function(u){this._users.push(u)};h.deregister=function(u){this._users.removeUnordered(u)};h.registerRemoveFunc=function(u,r){this._removeFuncs.push([u,r])};h.deregisterRemoveFunc=function(u){this._removeFuncs.filterInPlace(r=>r[0]!==
u)};h.put=function(u,r,H,da){const fa=this._db.get(u);fa&&(this._size-=fa.size,this._db.delete(u),fa.entry!==r&&this._notifyRemoved(u,fa.entry));H>this._maxSize?this._notifyRemoved(u,r):void 0===r?console.warn("Refusing to cache undefined entry "):!H||0>H?console.warn("Refusing to cache entry with invalid size "+H):(da=1+Math.max(da,-3)- -3,this._db.set(u,{entry:r,size:H,lifetime:da,lives:da}),this._size+=H,this._checkSizeLimit())};h.updateSize=function(u,r,H){const da=this._db.get(u);da&&da.entry===
r&&(this._size-=da.size,H>this._maxSize?(this._db.delete(u),this._notifyRemoved(u,r)):(da.size=H,this._size+=H,this._checkSizeLimit()))};h.pop=function(u){const r=this._db.get(u);if(r)return this._size-=r.size,this._db.delete(u),++this._hit,r.entry;++this._miss};h.get=function(u){const r=this._db.get(u);if(void 0===r)++this._miss;else return this._db.delete(u),r.lives=r.lifetime,this._db.set(u,r),++this._hit,r.entry};h.getStats=function(){const u={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/
1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},r={},H=[];this._db.forEach((F,w)=>{const C=F.lifetime;H[C]=(H[C]||0)+F.size;this._users.forAll(d=>{d=d.namespace;w.startsWith(d)&&(r[d]=(r[d]||0)+F.size)})});const da={};this._users.forAll(F=>{const w=F.namespace;!isNaN(F.hitRate)&&0<F.hitRate?(r[w]=r[w]||0,da[w]=Math.round(100*F.hitRate)+"%"):da[w]="0%"});var fa=Object.keys(r);fa.forEach(F=>r[F]=r[F]/this._size*100);fa.sort((F,w)=>r[w]-r[F]);fa.forEach(F=>
u[F]=Math.round(r[F])+"% / "+da[F]);for(fa=H.length-1;0<=fa;--fa){const F=H[fa];F&&(u["Priority "+(fa+-3-1)]=Math.round(F/this.size*100)+"%")}return u};h.resetStats=function(){this._hit=this._miss=0;this._users.forAll(u=>u.resetHitRate())};h.clear=function(u){this._db.forEach((r,H)=>{H.startsWith(u)&&(this._size-=r.size,this._db.delete(H),this._notifyRemoved(H,r.entry))})};h.clearAll=function(){this._db.forEach((u,r)=>this._notifyRemoved(r,u.entry));this._size=0;this._db.clear()};h._getHitRate=function(){return this._hit/
(this._hit+this._miss)};h._notifyRemoved=function(u,r){this._removeFuncs.forAll(H=>{if(u.startsWith(H[0]))H[1](r)})};h._checkSizeLimit=function(){if(!(this._size<=this._maxSize))for(const [u,r]of this._db)if(this._db.delete(u),1>=r.lives?(this._size-=r.size,this._notifyRemoved(u,r.entry)):(--r.lives,this._db.set(u,r)),this._size<=.9*this.maxSize)break};e._createClass(K,[{key:"size",get:function(){return this._size}},{key:"maxSize",get:function(){return this._maxSize},set:function(u){this._maxSize=
Math.max(u,0);this._checkSizeLimit()}}]);return K}();n.MIN_PRIORITY=-3;n.MemCache=M;n.MemCacheStorage=p;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/graphics/data/QueryEngineCapabilities":function(){define(["exports"],function(n){n.queryCapabilities={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,
supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/graphics/data/attributeSupport":function(){define(["exports",
"../../../core/Error","../../../core/sql/WhereClauseCache"],function(n,e,Z){function M(r,H){return r?h.get(r,H):null}function p(r,H,da,fa=!0){const F=[];for(const w of H)if("*"!==w&&!r.has(w))if(fa){H=K(w);try{const C=M(H,r);if(!C)throw new e("feature-store:unsupported-query","invalid SQL expression",{where:H});if(!C.isStandardized)throw new e("feature-store:unsupported-query","expression is not standard",{clause:C});p(r,C.fieldNames,"expression contains missing fields")}catch(C){if((H=C&&C.details)&&
(H.clause||H.where))throw C;H&&H.missingFields?F.push(...H.missingFields):F.push(w)}}else F.push(w);if(F.length)throw new e("feature-store:unsupported-query",da,{missingFields:F});}function K(r){return r.split(" as ")[0]}const h=new Z.WhereClauseCache(50,500),u=new Set("esriFieldTypeOID esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong esriFieldTypeDate".split(" "));n.getAliasFromFieldName=function(r){return r.split(" as ")[1]};n.getExpressionFromFieldName=
K;n.getWhereClause=M;n.hasInvalidFieldType=function(r,H){return(r=H.get(r))?!u.has(r.type):!1};n.validateFields=p;n.validateHaving=function(r,H,da){if(!H)return!0;const fa=h.get(H,r);if(!fa)throw new e("feature-store:unsupported-query","invalid SQL expression",{having:H});if(!fa.isAggregate)throw new e("feature-store:unsupported-query","having does not contain a valid aggregate function",{having:H});p(r,fa.fieldNames,"having contains missing fields");if(!fa.getExpressions().every(F=>{const {aggregateType:w,
field:C}=F,d=r.has(C)&&r.get(C).name;return da.some(m=>{const {onStatisticField:v,statisticType:t}=m;return(r.has(v)&&r.get(v).name)===d&&t.toLowerCase().trim()===w})}))throw new e("feature-store:unsupported-query","expressions in having should also exist in outStatistics",{having:H});return!0};n.validateWhere=function(r,H){if(!H)return!0;const da=h.get(H,r);if(!da)throw new e("feature-store:unsupported-query","invalid SQL expression",{where:H});if(!da.isStandardized)throw new e("feature-store:unsupported-query",
"where clause is not standard",{where:H});p(r,da.fieldNames,"where clause contains missing fields");return!0};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/core/sql/WhereClauseCache":function(){define(["exports","../ItemCache","./WhereClause"],function(n,e,Z){let M=function(){function p(K,h){this._cache=new e(K);this._invalidCache=new e(h)}p.prototype.get=function(K,h){const u=`${h.uid}:${K}`,r=this._cache.get(u);if(r)return r;if(void 0!==this._invalidCache.get(u))return null;try{const H=
Z.WhereClause.create(K,h);this._cache.put(u,H);return H}catch{return this._invalidCache.put(u,null),null}};return p}();n.WhereClauseCache=M;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/core/ItemCache":function(){define(["./MemCache"],function(n){return function(){function e(M,p){this._storage=new n.MemCacheStorage;this._storage.maxSize=M;p&&this._storage.registerRemoveFunc("",p)}var Z=e.prototype;Z.put=function(M,p){this._storage.put(M,p,1,1)};Z.pop=function(M){return this._storage.pop(M)};
Z.get=function(M){return this._storage.get(M)};Z.clear=function(){this._storage.clearAll()};Z.destroy=function(){this._storage.destroy()};return e}()})},"esri/core/sql/WhereClause":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../has ./AggregateFunctions ./StandardizedFunctions ./WhereGrammar".split(" "),function(n,e,Z,M,p,K){function h(R,z){R+="";return R.length>=z?R:Array(z-R.length+1).join("0")+R}function u(R,z,l="0",I="0",T="0",L="0",ia="",pa="0",qa="0"){return"+"===ia||"-"===
ia?(R=`${h(parseInt(R,10),4)}-${h(parseInt(z,10),2)}-${h(parseInt(l,10),2)}`,z="",10>parseFloat(L)&&(z="0"),I=`${h(parseInt(I,10),2)}:${h(parseInt(T,10),2)}:${z+parseFloat(L).toString()}`,ia=`${ia}${h(parseInt(pa,10),2)}:${h(parseInt(qa,10),2)}`,new Date(R+"T"+I+ia)):new Date(parseInt(R,10),parseInt(z,10)-1,parseInt(l,10),parseInt(I,10),parseInt(T,10),parseFloat(L))}function r(R){let z=aa.exec(R);if(null!==z){const [,l,I,T,L,ia,pa]=z;return u(l,I,T,L,ia,pa)}z=ja.exec(R);if(null!==z){const [,l,I,T,
L,ia,pa,qa,wa,Ca]=z;return u(l,I,T,L,ia,pa,qa,wa,Ca)}z=U.exec(R);if(null!==z){const [,l,I,T,L,ia,pa,qa,wa]=z;return u(l,I,T,L,ia,"0",pa,qa,wa)}z=G.exec(R);if(null!==z){const [,l,I,T,L,ia]=z;return u(l,I,T,L,ia)}z=N.exec(R);if(null!==z){const [,l,I,T]=z;return u(l,I,T)}throw Error("SQL Invalid Timestamp");}function H(R){R=N.exec(R);if(null===R)throw Error("SQL Invalid Date");const [,z,l,I]=R;return new Date(parseInt(z,10),parseInt(l,10)-1,parseInt(I,10))}function da(R){return Array.isArray(R)?R:[R]}
function fa(R){return null!==R?!0!==R:null}function F(R,z){return null!=R&&null!=z?!0===R&&!0===z:!1===R||!1===z?!1:null}function w(R,z){return null!=R&&null!=z?!0===R||!0===z:!0===R||!0===z?!0:null}function C(R,z){if(null==R)return null;let l=!1;for(const I of z)if(null==I)l=null;else if(R===I){l=!0;break}return l}function d(R,z,l){if(null==R)return null;let I="",T=0;for(let L=0;L<z.length;L++){const ia=z.charAt(L);switch(T){case 0:ia===l?T=1:I=0<="-[]/{}()*+?.\\^$|".indexOf(ia)?I+("\\"+ia):"%"===
ia?I+".*":"_"===ia?I+".":I+ia;break;case 1:I=0<="-[]/{}()*+?.\\^$|".indexOf(ia)?I+("\\"+ia):I+ia,T=0}}return(new RegExp("^"+I+"$")).test(R)}function m(R){return R instanceof Date?R.valueOf():R}function v(R,z,l){if(null==z||null==l)return null;z=m(z);l=m(l);switch(R){case "\x3c\x3e":return z!==l;case "\x3d":return z===l;case "\x3e":return z>l;case "\x3c":return z<l;case "\x3e\x3d":return z>=l;case "\x3c\x3d":return z<=l}}function t(R){const z=[],l={};for(const I of R)R=I.toLowerCase(),void 0===l[R]&&
(z.push(I),l[R]=1);return z}function q(R,z,l){if(z instanceof p.SqlInterval)if(l instanceof Date)switch(R){case "+":return new Date(z.valueInMilliseconds()+l.getTime());case "-":return z.valueInMilliseconds()-l.getTime();case "*":return z.valueInMilliseconds()*l.getTime();case "/":return z.valueInMilliseconds()/l.getTime()}else if(l instanceof p.SqlInterval)switch(R){case "+":return p.SqlInterval.createFromMilliseconds(z.valueInMilliseconds()+l.valueInMilliseconds());case "-":return p.SqlInterval.createFromMilliseconds(z.valueInMilliseconds()-
l.valueInMilliseconds());case "*":return z.valueInMilliseconds()*l.valueInMilliseconds();case "/":return z.valueInMilliseconds()/l.valueInMilliseconds()}else z=z.valueInMilliseconds();else if(l instanceof p.SqlInterval)if(z instanceof Date)switch(R){case "+":return new Date(l.valueInMilliseconds()+z.getTime());case "-":return new Date(z.getTime()-l.valueInMilliseconds());case "*":return z.getTime()*l.valueInMilliseconds();case "/":return z.getTime()/l.valueInMilliseconds()}else l=l.valueInMilliseconds();
else if(z instanceof Date&&"number"===typeof l)switch(l*=864E5,z=z.getTime(),R){case "+":return new Date(z+l);case "-":return new Date(z-l);case "*":return new Date(z*l);case "/":return new Date(z/l)}else if(l instanceof Date&&"number"===typeof z)switch(z*=864E5,l=l.getTime(),R){case "+":return new Date(z+l);case "-":return new Date(z-l);case "*":return new Date(z*l);case "/":return new Date(z/l)}switch(R){case "+":return z+l;case "-":return z-l;case "*":return z*l;case "/":return z/l}}function A(R,
z,l,I){R=I.getAttribute(R,z);return null!=R&&1===l[z]?new Date(R):R}const N=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,aa=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,ja=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,U=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,G=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/;let D=function(){function R(){}R.makeBool=function(z){return!0===z};R.featureValue=
function(z,l,I,T){return A(z,l,I,T)};R.equalsNull=function(z){return null===z};R.applyLike=function(z,l,I){return d(z,l,I)};R.ensureArray=function(z){return da(z)};R.applyIn=function(z,l){return C(z,l)};R.currentDate=function(){const z=new Date;z.setHours(0,0,0,0);return z};R.makeSqlInterval=function(z,l,I){return p.SqlInterval.createFromValueAndQualifer(z,l,I)};R.convertInterval=function(z){return z instanceof p.SqlInterval?z.valueInMilliseconds():z};R.currentTimestamp=function(){return new Date};
R.compare=function(z,l,I){return v(z,l,I)};R.calculate=function(z,l,I){return q(z,l,I)};R.makeComparable=function(z){return m(z)};R.evaluateFunction=function(z,l){return p.evaluateFunction(z,l)};R.lookup=function(z,l){z=l[z];return void 0===z?null:z};R.between=function(z,l){return null==z||null==l[0]||null==l[1]?null:z>=l[0]&&z<=l[1]};R.notbetween=function(z,l){return null==z||null==l[0]||null==l[1]?null:z<l[0]||z>l[1]};R.ternaryNot=function(z){return fa(z)};R.ternaryAnd=function(z,l){return F(z,
l)};R.ternaryOr=function(z,l){return w(z,l)};return R}(),J=function(){function R(l,I){this.fieldsIndex=I;this.datefields={};this.parameters={};this.parseTree=K.WhereGrammar.parse(l);const {isStandardized:T,isAggregate:L,referencedFieldNames:ia}=this.extractExpressionInfo(I);this.referencedFieldNames=ia;this.isStandardized=T;this.isAggregate=L}R.create=function(l,I){return new R(l,I)};var z=R.prototype;z.testSet=function(l,I=O){const T={};for(const L of this.fieldNames)T[L]=l.map(ia=>I.getAttribute(ia,
L));return!!this.evaluateNode(this.parseTree,{attributes:T},O)};z.calculateValue=function(l,I=O){l=this.evaluateNode(this.parseTree,l,I);return l instanceof p.SqlInterval?l.valueInMilliseconds()/864E5:l};z.calculateValueCompiled=function(l,I=O){if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(l,this.parameters,I,this.datefields);if(Z("csp-restrictions"))return this.calculateValue(l,I);this.compileMe();return this.parseTree._compiledVersion(l,this.parameters,I,this.datefields)};
z.testFeature=function(l,I=O){return!!this.evaluateNode(this.parseTree,l,I)};z.testFeatureCompiled=function(l,I=O){if(null!=this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(l,this.parameters,I,this.datefields);if(Z("csp-restrictions"))return this.testFeature(l,I);this.compileMe();return!!this.parseTree._compiledVersion(l,this.parameters,I,this.datefields)};z.getFunctions=function(){const l=[];this.visitAll(this.parseTree,I=>{"function"===I.type&&l.push(I.name.toLowerCase())});
return t(l)};z.getExpressions=function(){const l=new Map;this.visitAll(this.parseTree,I=>{if("function"===I.type){const T=I.name.toLowerCase();I=I.args.value[0];if("column_ref"===I.type){I=I.column;const L=`${T}-${I}`;l.has(L)||l.set(L,{aggregateType:T,field:I})}}});return[...l.values()]};z.getVariables=function(){const l=[];this.visitAll(this.parseTree,I=>{"param"===I.type&&l.push(I.value.toLowerCase())});return t(l)};z.compileMe=function(){const l="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+
")";this.parseTree._compiledVersion=(new Function("feature","lookups","attributeAdapter","datefields",l)).bind(D)};z.extractExpressionInfo=function(l){const I=[];let T=!0,L=!0;this.visitAll(this.parseTree,ia=>{switch(ia.type){case "column_ref":{const pa=l.get(ia.column),qa=pa&&pa.name;!pa||"date"!==pa.type&&"esriFieldTypeDate"!==pa.type||(this.datefields[pa.name]=1);void 0!==qa?(I.push(qa),ia.column=qa):I.push(ia.column);break}case "function":{const {name:pa,args:qa}=ia;ia=qa.value.length;T&&(T=p.isStandardized(pa,
ia));L&&(L=M.isAggregate(pa,ia))}}});return{referencedFieldNames:t(I),isStandardized:T,isAggregate:L}};z.visitAll=function(l,I){if(null!=l)switch(I(l),l.type){case "when_clause":this.visitAll(l.operand,I);this.visitAll(l.value,I);break;case "case_expression":for(const T of l.clauses)this.visitAll(T,I);"simple"===l.format&&this.visitAll(l.operand,I);null!==l.else&&this.visitAll(l.else,I);break;case "expr_list":for(const T of l.value)this.visitAll(T,I);break;case "unary_expr":this.visitAll(l.expr,I);
break;case "binary_expr":this.visitAll(l.left,I);this.visitAll(l.right,I);break;case "function":this.visitAll(l.args,I)}};z.evaluateNodeToJavaScript=function(l){switch(l.type){case "interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(l.value)+", "+JSON.stringify(l.qualifier)+","+JSON.stringify(l.op)+")";case "case_expression":var I="";if("simple"===l.format){var T="this.makeComparable("+this.evaluateNodeToJavaScript(l.operand)+")";I="( ";for(let L=0;L<l.clauses.length;L++)I+=" ("+
T+" \x3d\x3d\x3d this.makeComparable("+this.evaluateNodeToJavaScript(l.clauses[L].operand)+")) ? ("+this.evaluateNodeToJavaScript(l.clauses[L].value)+") : "}else for(I="( ",T=0;T<l.clauses.length;T++)I+=" this.makeBool("+this.evaluateNodeToJavaScript(l.clauses[T].operand)+")\x3d\x3d\x3dtrue ? ("+this.evaluateNodeToJavaScript(l.clauses[T].value)+") : ";I=null!==l.else?I+this.evaluateNodeToJavaScript(l.else):I+"null";return I+=" )";case "param":return"this.lookup("+JSON.stringify(l.value.toLowerCase())+
",lookups)";case "expr_list":I="[";for(T of l.value)"["!==I&&(I+=","),I+=this.evaluateNodeToJavaScript(T);return I+="]";case "unary_expr":return"this.ternaryNot("+this.evaluateNodeToJavaScript(l.expr)+")";case "binary_expr":switch(l.operator){case "AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(l.left)+","+this.evaluateNodeToJavaScript(l.right)+" )";case "OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(l.left)+","+this.evaluateNodeToJavaScript(l.right)+" )";case "IS":if("null"!==
l.right.type)throw Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(l.left)+")";case "ISNOT":if("null"!==l.right.type)throw Error("Unsupported RHS for IS");return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(l.left)+")))";case "IN":return"this.applyIn("+this.evaluateNodeToJavaScript(l.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(l.right)+"))";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(l.left)+",this.ensureArray("+
this.evaluateNodeToJavaScript(l.right)+")))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(l.left)+","+this.evaluateNodeToJavaScript(l.right)+")";case "NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(l.left)+","+this.evaluateNodeToJavaScript(l.right)+")";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(l.left)+","+this.evaluateNodeToJavaScript(l.right)+","+JSON.stringify(l.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+
this.evaluateNodeToJavaScript(l.left)+","+this.evaluateNodeToJavaScript(l.right)+","+JSON.stringify(l.escape)+"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+JSON.stringify(l.operator)+","+this.evaluateNodeToJavaScript(l.left)+","+this.evaluateNodeToJavaScript(l.right)+")";case "*":case "-":case "+":case "/":return"this.calculate("+JSON.stringify(l.operator)+","+this.evaluateNodeToJavaScript(l.left)+","+this.evaluateNodeToJavaScript(l.right)+
")"}throw Error("Not Supported Operator "+l.operator);case "null":case "bool":case "string":case "number":return JSON.stringify(l.value);case "date":return"(new Date("+H(l.value).getTime().toString()+"))";case "timestamp":return"(new Date("+r(l.value).getTime().toString()+"))";case "current_time":return"date"===l.mode?"this.currentDate()":"this.currentTimestamp()";case "column_ref":return"this.featureValue(feature,"+JSON.stringify(l.column)+",datefields,attributeAdapter)";case "function":return"this.evaluateFunction("+
JSON.stringify(l.name)+","+this.evaluateNodeToJavaScript(l.args)+")"}throw Error("Unsupported sql syntax "+l.type);};z.evaluateNode=function(l,I,T){switch(l.type){case "interval":return I=this.evaluateNode(l.value,I,T),p.SqlInterval.createFromValueAndQualifer(I,l.qualifier,l.op);case "case_expression":if("simple"===l.format){var L=m(this.evaluateNode(l.operand,I,T));for(var ia=0;ia<l.clauses.length;ia++)if(L===m(this.evaluateNode(l.clauses[ia].operand,I,T)))return this.evaluateNode(l.clauses[ia].value,
I,T)}else for(L=0;L<l.clauses.length;L++)if(!0===this.evaluateNode(l.clauses[L].operand,I,T))return this.evaluateNode(l.clauses[L].value,I,T);return null!==l.else?this.evaluateNode(l.else,I,T):null;case "param":return this.parameters[l.value.toLowerCase()];case "expr_list":L=[];for(ia of l.value)L.push(this.evaluateNode(ia,I,T));return L;case "unary_expr":return fa(this.evaluateNode(l.expr,I,T));case "binary_expr":switch(l.operator){case "AND":return F(this.evaluateNode(l.left,I,T),this.evaluateNode(l.right,
I,T));case "OR":return w(this.evaluateNode(l.left,I,T),this.evaluateNode(l.right,I,T));case "IS":if("null"!==l.right.type)throw Error("Unsupported RHS for IS");return null===this.evaluateNode(l.left,I,T);case "ISNOT":if("null"!==l.right.type)throw Error("Unsupported RHS for IS");return null!==this.evaluateNode(l.left,I,T);case "IN":return L=da(this.evaluateNode(l.right,I,T)),C(this.evaluateNode(l.left,I,T),L);case "NOT IN":return L=da(this.evaluateNode(l.right,I,T)),fa(C(this.evaluateNode(l.left,
I,T),L));case "BETWEEN":return L=this.evaluateNode(l.left,I,T),l=this.evaluateNode(l.right,I,T),null==L||null==l[0]||null==l[1]?null:L>=m(l[0])&&L<=m(l[1]);case "NOTBETWEEN":return L=this.evaluateNode(l.left,I,T),l=this.evaluateNode(l.right,I,T),null==L||null==l[0]||null==l[1]?null:L<m(l[0])||L>m(l[1]);case "LIKE":return d(this.evaluateNode(l.left,I,T),this.evaluateNode(l.right,I,T),l.escape);case "NOT LIKE":return fa(d(this.evaluateNode(l.left,I,T),this.evaluateNode(l.right,I,T),l.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return v(l.operator,
this.evaluateNode(l.left,I,T),this.evaluateNode(l.right,I,T));case "-":case "+":case "*":case "/":return q(l.operator,this.evaluateNode(l.left,I,T),this.evaluateNode(l.right,I,T))}case "null":case "bool":case "string":case "number":return l.value;case "date":return H(l.value);case "timestamp":return r(l.value);case "current_time":return I=new Date,"date"===l.mode&&I.setHours(0,0,0,0),I;case "column_ref":return A(I,l.column,this.datefields,T);case "function":return I=this.evaluateNode(l.args,I,T),
this.isAggregate?M.aggregateFunction(l.name,I):p.evaluateFunction(l.name,I)}throw Error("Unsupported sql syntax "+l.type);};e._createClass(R,[{key:"fieldNames",get:function(){return this.referencedFieldNames}}]);return R}();const O={getAttribute(R,z){return(R&&"object"===typeof R.attributes?R.attributes:R)[z]}};n.WhereClause=J;n.defaultAttributeAdapter=O;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/core/sql/AggregateFunctions":function(){define(["exports"],function(n){function e(p){let K=
0;for(let h=0;h<p.length;h++)K+=p[h];return K/p.length}function Z(p){const K=e(p),h=p.length;let u=0;for(const r of p)u+=(r-K)**2;return 1<h?u/(h-1):0}const M={min:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.min.apply(Math,p[0])},max:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.max.apply(Math,p[0])},avg:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:e(p[0])},sum:{minParams:1,maxParams:1,evaluate:p=>{if(null==p[0])p=null;else{{p=p[0];let K=0;for(let h=0;h<p.length;h++)K+=
p[h];p=K}}return p}},stddev:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.sqrt(Z(p[0]))},count:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:p[0].length},var:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Z(p[0])}};n.aggregateFunction=function(p,K){const h=M[p.toLowerCase()];if(null==h)throw Error("Function Not Recognised");if(K.length<h.minParams||K.length>h.maxParams)throw Error(`Invalid Parameter count for call to ${p.toUpperCase()}`);return h.evaluate(K)};n.isAggregate=
function(p,K){p=M[p.toLowerCase()];return null!=p&&K>=p.minParams&&K<=p.maxParams};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/core/sql/StandardizedFunctions":function(){define(["exports","../string"],function(n,e){let Z=function(){function p(){this.op="+";this.minute=this.year=this.month=this.hour=this.second=this.day=0}p.fixDefaults=function(K){if(null!==K.precision||null!==K.secondary)throw Error("Primary and Secondary SqlInterval qualifiers not supported");};p.createFromMilliseconds=
function(K){const h=new p;h.second=K/1E3;return h};p.createFromValueAndQualifer=function(K,h,u){let r=null;const H=new p;H.op="-"===u?"-":"+";if("interval-period"===h.type){p.fixDefaults(h);if("year"===h.period||"month"===h.period)throw Error("Year-Month Intervals not supported");if(/^[0-9]{1,}$/.test(K))H[h.period]=parseFloat(K);else throw Error("Illegal Interval");}else{p.fixDefaults(h.start);p.fixDefaults(h.end);if("year"===h.start.period||"month"===h.start.period)throw Error("Year-Month Intervals not supported");
if("year"===h.end.period||"month"===h.end.period)throw Error("Year-Month Intervals not supported");switch(h.start.period){case "day":switch(h.end.period){case "hour":r=/^[0-9]{1,} [0-9]{1,}$/;if(r.test(K))H[h.start.period]=parseFloat(K.split(" ")[0]),H[h.end.period]=parseFloat(K.split(" ")[1]);else throw Error("Illegal Interval");break;case "minute":r=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$/;if(r.test(K))H[h.start.period]=parseFloat(K.split(" ")[0]),K=K.split(" ")[1].split(":"),H.hour=parseFloat(K[0]),
H.minute=parseFloat(K[1]);else throw Error("Illegal Interval");break;case "second":r=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(r.test(K))H[h.start.period]=parseFloat(K.split(" ")[0]),K=K.split(" ")[1].split(":"),H.hour=parseFloat(K[0]),H.minute=parseFloat(K[1]),H.second=parseFloat(K[2]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;case "hour":switch(h.end.period){case "minute":r=/^[0-9]{1,}:[0-9]{1,}$/;if(r.test(K))H.hour=parseFloat(K.split(":")[0]),
H.minute=parseFloat(K.split(":")[1]);else throw Error("Illegal Interval");break;case "second":r=/^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(r.test(K))K=K.split(":"),H.hour=parseFloat(K[0]),H.minute=parseFloat(K[1]),H.second=parseFloat(K[2]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;case "minute":switch(h.end.period){case "second":r=/^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(r.test(K))K=K.split(":"),H.minute=parseFloat(K[0]),H.second=parseFloat(K[1]);
else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;default:throw"Invalid Interval.";}}return H};p.prototype.valueInMilliseconds=function(){return("-"===this.op?-1:1)*(1E3*this.second+6E4*this.minute+36E5*this.hour+864E5*this.day+365/12*this.month*864E5+31536E6*this.year)};return p}();const M={extract:{minParams:2,maxParams:2,evaluate:([p,K])=>{if(null==K)return null;if(K instanceof Date)switch(p.toUpperCase()){case "SECOND":return K.getSeconds();case "MINUTE":return K.getMinutes();
case "HOUR":return K.getHours();case "DAY":return K.getDate();case "MONTH":return K.getMonth()+1;case "YEAR":return K.getFullYear()}throw Error("Invalid Parameter for call to EXTRACT");}},substring:{minParams:2,maxParams:3,evaluate:p=>{if(2===p.length){const [K,h]=p;return null==K||null==h?null:K.toString().substring(h-1)}if(3===p.length){const [K,h,u]=p;return null==K||null==h||null==u?null:0>=u?"":K.toString().substring(h-1,h+u-1)}}},position:{minParams:2,maxParams:2,evaluate:([p,K])=>null==p||
null==K?null:K.indexOf(p)+1},trim:{minParams:2,maxParams:3,evaluate:p=>{var K=3===p.length,h=K?p[1]:" ";K=K?p[2]:p[1];if(null==h||null==K)return null;h=`(${e.escapeRegExpString(h)})`;switch(p[0]){case "BOTH":return K.replace(new RegExp(`^${h}*|${h}*$`,"g"),"");case "LEADING":return K.replace(new RegExp(`^${h}*`,"g"),"");case "TRAILING":return K.replace(new RegExp(`${h}*$`,"g"),"")}throw Error("Invalid Parameter for call to TRIM");}},abs:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.abs(p[0])},
ceiling:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.ceil(p[0])},floor:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.floor(p[0])},log:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.log(p[0])},log10:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.log(p[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.sin(p[0])},cos:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.cos(p[0])},tan:{minParams:1,maxParams:1,evaluate:p=>
null==p[0]?null:Math.tan(p[0])},asin:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.asin(p[0])},acos:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.acos(p[0])},atan:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.atan(p[0])},sign:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:0<p[0]?1:0>p[1]?-1:0},power:{minParams:2,maxParams:2,evaluate:p=>null==p[0]||null==p[1]?null:p[0]**p[1]},mod:{minParams:2,maxParams:2,evaluate:p=>null==p[0]||null==p[1]?null:p[0]%p[1]},round:{minParams:1,
maxParams:2,evaluate:p=>{const K=p[0];p=2===p.length?10**p[1]:1;return null==K?null:Math.round(K*p)/p}},truncate:{minParams:1,maxParams:2,evaluate:p=>null==p[0]?null:1===p.length?parseInt(p[0].toFixed(0),10):parseFloat(p[0].toFixed(p[1]))},char_length:{minParams:1,maxParams:1,evaluate:p=>"string"===typeof p[0]||p[0]instanceof String?p[0].length:0},concat:{minParams:1,maxParams:Infinity,evaluate:p=>{let K="";for(let h=0;h<p.length;h++){if(null==p[h])return null;K+=p[h].toString()}return K}},lower:{minParams:1,
maxParams:1,evaluate:p=>null==p[0]?null:p[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:p[0].toString().toUpperCase()}};n.SqlInterval=Z;n.evaluateFunction=function(p,K){const h=M[p.toLowerCase()];if(null==h)throw Error("Function Not Recognised");if(K.length<h.minParams||K.length>h.maxParams)throw Error(`Invalid Parameter count for call to ${p.toUpperCase()}`);return h.evaluate(K)};n.isStandardized=function(p,K){p=M[p.toLowerCase()];return null!=p&&K>=p.minParams&&
K<=p.maxParams};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/core/sql/WhereGrammar":function(){define(["exports","../../chunks/_commonjsHelpers"],function(n,e){var Z=e.createCommonjsModule(function(p){(function(K,h){p.exports&&(p.exports=h())})(e.commonjsGlobal,function(){function K(h,u,r,H){this.message=h;this.expected=u;this.found=r;this.location=H;this.name="SyntaxError";"function"===typeof Error.captureStackTrace&&Error.captureStackTrace(this,K)}(function(h,u){function r(){this.constructor=
h}r.prototype=u.prototype;h.prototype=new r})(K,Error);K.buildMessage=function(h,u){function r(F){return F.charCodeAt(0).toString(16).toUpperCase()}function H(F){return F.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(w){return"\\x0"+r(w)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(w){return"\\x"+r(w)})}function da(F){return F.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,
"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(w){return"\\x0"+r(w)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(w){return"\\x"+r(w)})}var fa={literal:function(F){return'"'+H(F.text)+'"'},"class":function(F){var w="",C;for(C=0;C<F.parts.length;C++)w+=F.parts[C]instanceof Array?da(F.parts[C][0])+"-"+da(F.parts[C][1]):da(F.parts[C]);return"["+(F.inverted?"^":"")+w+"]"},any:function(F){return"any character"},end:function(F){return"end of input"},
other:function(F){return F.description}};return"Expected "+function(F){var w=Array(F.length),C;for(C=0;C<F.length;C++){var d=C;var m=F[C];m=fa[m.type](m);w[d]=m}w.sort();if(0<w.length){for(F=C=1;C<w.length;C++)w[C-1]!==w[C]&&(w[F]=w[C],F++);w.length=F}switch(w.length){case 1:return w[0];case 2:return w[0]+" or "+w[1];default:return w.slice(0,-1).join(", ")+", or "+w[w.length-1]}}(h)+" but "+(u?'"'+H(u)+'"':"end of input")+" found."};return{SyntaxError:K,parse:function(h,u){function r(k,E){return{type:"literal",
text:k,ignoreCase:E}}function H(k,E,B){return{type:"class",parts:k,inverted:E,ignoreCase:B}}function da(k){var E=Zb[k],B;if(!E){for(B=k-1;!Zb[B];)B--;E=Zb[B];for(E={line:E.line,column:E.column};B<k;)10===h.charCodeAt(B)?(E.line++,E.column=1):E.column++,B++;Zb[k]=E}return E}function fa(k,E){var B=da(k),X=da(E);return{start:{offset:k,line:B.line,column:B.column},end:{offset:E,line:X.line,column:X.column}}}function F(k){c<sb||(c>sb&&(sb=c,oc=[]),oc.push(k))}function w(){var k=c;var E=ra();if(E!==a)if(E=
d(),E!==a){var B=ra();B!==a?k=E:(c=k,k=a)}else c=k,k=a;else c=k,k=a;return k}function C(){var k=c;var E=d();if(E!==a){var B=[];var X=c;var va=ra();if(va!==a){var Fa=Ha();if(Fa!==a){var La=ra();if(La!==a){var Pa=d();Pa!==a?X=va=[va,Fa,La,Pa]:(c=X,X=a)}else c=X,X=a}else c=X,X=a}else c=X,X=a;for(;X!==a;)B.push(X),X=c,va=ra(),va!==a?(Fa=Ha(),Fa!==a?(La=ra(),La!==a?(Pa=d(),Pa!==a?X=va=[va,Fa,La,Pa]:(c=X,X=a)):(c=X,X=a)):(c=X,X=a)):(c=X,X=a);if(B!==a){k={type:"expr_list"};E=[E];for(X=0;X<B.length;X++)E.push(B[X][3]);
k.value=E}else c=k,k=a}else c=k,k=a;return k}function d(){var k=c;var E=m();if(E!==a){var B=[];var X=c;var va=ra();if(va!==a){var Fa=P();if(Fa!==a){var La=ra();if(La!==a){var Pa=m();Pa!==a?X=va=[va,Fa,La,Pa]:(c=X,X=a)}else c=X,X=a}else c=X,X=a}else c=X,X=a;for(;X!==a;)B.push(X),X=c,va=ra(),va!==a?(Fa=P(),Fa!==a?(La=ra(),La!==a?(Pa=m(),Pa!==a?X=va=[va,Fa,La,Pa]:(c=X,X=a)):(c=X,X=a)):(c=X,X=a)):(c=X,X=a);B!==a?k=E=cb(E,B):(c=k,k=a)}else c=k,k=a;return k}function m(){var k=c;var E=v();if(E!==a){var B=
[];var X=c;var va=ra();if(va!==a){var Fa=x();if(Fa!==a){var La=ra();if(La!==a){var Pa=v();Pa!==a?X=va=[va,Fa,La,Pa]:(c=X,X=a)}else c=X,X=a}else c=X,X=a}else c=X,X=a;for(;X!==a;)B.push(X),X=c,va=ra(),va!==a?(Fa=x(),Fa!==a?(La=ra(),La!==a?(Pa=v(),Pa!==a?X=va=[va,Fa,La,Pa]:(c=X,X=a)):(c=X,X=a)):(c=X,X=a)):(c=X,X=a);B!==a?k=E=cb(E,B):(c=k,k=a)}else c=k,k=a;return k}function v(){var k=c;var E=g();if(E===a){E=c;if(33===h.charCodeAt(c)){var B=Ta;c++}else B=a,0===sa&&F(jb);if(B!==a){var X=c;sa++;if(61===
h.charCodeAt(c)){var va=rb;c++}else va=a,0===sa&&F(Qa);sa--;va===a?X=void 0:(c=X,X=a);X!==a?E=B=[B,X]:(c=E,E=a)}else c=E,E=a}E!==a?(B=ra(),B!==a?(X=v(),X!==a?k=E={type:"unary_expr",operator:"NOT",expr:X}:(c=k,k=a)):(c=k,k=a)):(c=k,k=a);if(k===a)if(k=c,E=N(),E!==a)if(B=ra(),B!==a){B=[];X=c;va=ra();if(va!==a){var Fa=t();if(Fa!==a){var La=ra();if(La!==a){var Pa=N();Pa!==a?X=va=[va,Fa,La,Pa]:(c=X,X=a)}else c=X,X=a}else c=X,X=a}else c=X,X=a;if(X!==a)for(;X!==a;)B.push(X),X=c,va=ra(),va!==a?(Fa=t(),Fa!==
a?(La=ra(),La!==a?(Pa=N(),Pa!==a?X=va=[va,Fa,La,Pa]:(c=X,X=a)):(c=X,X=a)):(c=X,X=a)):(c=X,X=a);else B=a;B!==a&&(B={type:"arithmetic",tail:B});B===a&&(B=c,X=A(),X!==a?(va=ra(),va!==a?(va=Ia(),va!==a?(va=ra(),va!==a?(va=C(),va!==a?(Fa=ra(),Fa!==a?(Fa=Sa(),Fa!==a?B=X={op:X,right:va}:(c=B,B=a)):(c=B,B=a)):(c=B,B=a)):(c=B,B=a)):(c=B,B=a)):(c=B,B=a)):(c=B,B=a),B===a&&(B=c,X=A(),X!==a?(va=ra(),va!==a?(va=Ia(),va!==a?(va=ra(),va!==a?(va=Sa(),va!==a?B=X={op:X,right:{type:"expr_list",value:[]}}:(c=B,B=a)):
(c=B,B=a)):(c=B,B=a)):(c=B,B=a)):(c=B,B=a),B===a&&(B=c,X=A(),X!==a?(va=ra(),va!==a?(va=z(),va!==a?B=X={op:X,right:va}:(c=B,B=a)):(c=B,B=a)):(c=B,B=a))),B===a&&(B=c,va=g(),va!==a?(X=ra(),X!==a?(X=Q(),X!==a?(Fa=ra(),Fa!==a?(Fa=N(),Fa!==a?(La=ra(),La!==a?(La=x(),La!==a?(va=ra(),va!==a?(va=N(),va!==a?B=va={op:"NOT"+X,right:{type:"expr_list",value:[Fa,va]}}:(c=B,B=a)):(c=B,B=a)):(c=B,B=a)):(c=B,B=a)):(c=B,B=a)):(c=B,B=a)):(c=B,B=a)):(c=B,B=a)):(c=B,B=a),B===a&&(B=c,va=Q(),va!==a?(X=ra(),X!==a?(X=N(),X!==
a?(Fa=ra(),Fa!==a?(Fa=x(),Fa!==a?(La=ra(),La!==a?(La=N(),La!==a?B=va={op:va,right:{type:"expr_list",value:[X,La]}}:(c=B,B=a)):(c=B,B=a)):(c=B,B=a)):(c=B,B=a)):(c=B,B=a)):(c=B,B=a)):(c=B,B=a)),B===a&&(B=c,X=f(),X!==a?(va=ra(),va!==a?(va=g(),va!==a?(va=ra(),va!==a?(va=N(),va!==a?B=X={op:X+"NOT",right:va}:(c=B,B=a)):(c=B,B=a)):(c=B,B=a)):(c=B,B=a)):(c=B,B=a),B===a&&(B=c,X=f(),X!==a?(va=ra(),va!==a?(va=N(),va!==a?B=X={op:X,right:va}:(c=B,B=a)):(c=B,B=a)):(c=B,B=a)),B===a&&(B=c,X=q(),X!==a?(va=ra(),va!==
a?(va=pa(),va!==a?(Fa=ra(),Fa!==a?(Fa=c,h.substr(c,6).toLowerCase()===ud?(La=h.substr(c,6),c+=6):(La=a,0===sa&&F(vd)),La!==a?(La=c,sa++,Pa=O(),sa--,Pa===a?La=void 0:(c=La,La=a),La!==a?Fa="ESCAPE":(c=Fa,Fa=a)):(c=Fa,Fa=a),Fa!==a?(Fa=ra(),Fa!==a?(Fa=qa(),Fa!==a?B=X={op:X,right:va,escape:Fa.value}:(c=B,B=a)):(c=B,B=a)):(c=B,B=a)):(c=B,B=a)):(c=B,B=a)):(c=B,B=a)):(c=B,B=a),B===a&&(B=c,X=q(),X!==a?(va=ra(),va!==a?(va=pa(),va!==a?B=X={op:X,right:va,escape:""}:(c=B,B=a)):(c=B,B=a)):(c=B,B=a))))));B===a&&
(B=null);B!==a?(k=E,E=B,""==E||void 0==E||null==E?E=k:(B=null,E=B="arithmetic"==E.type?cb(k,E.tail):hb(E.op,k,E.right,E.escape)),k=E):(c=k,k=a)}else c=k,k=a;else c=k,k=a;return k}function t(){if(h.substr(c,2)===xb){var k=xb;c+=2}else k=a,0===sa&&F(Y);k===a&&(62===h.charCodeAt(c)?(k=ea,c++):(k=a,0===sa&&F(ca)),k===a&&(h.substr(c,2)===oa?(k=oa,c+=2):(k=a,0===sa&&F(Aa)),k===a&&(h.substr(c,2)===Da?(k=Da,c+=2):(k=a,0===sa&&F(Na)),k===a&&(60===h.charCodeAt(c)?(k=Oa,c++):(k=a,0===sa&&F(ab)),k===a&&(61===
h.charCodeAt(c)?(k=rb,c++):(k=a,0===sa&&F(Qa)),k===a&&(h.substr(c,2)===Za?(k=Za,c+=2):(k=a,0===sa&&F($a))))))));return k}function q(){var k=k=c;var E=g();if(E!==a){var B=ra();if(B!==a){var X=V();X!==a?k=E=[E,B,X]:(c=k,k=a)}else c=k,k=a}else c=k,k=a;k!==a&&(k=k[0]+" "+k[2]);k===a&&(k=V());return k}function A(){var k=k=c;var E=g();if(E!==a){var B=ra();if(B!==a){var X=b();X!==a?k=E=[E,B,X]:(c=k,k=a)}else c=k,k=a}else c=k,k=a;k!==a&&(k=k[0]+" "+k[2]);k===a&&(k=b());return k}function N(){var k=c;var E=
ja();if(E!==a){var B=[];var X=c;var va=ra();if(va!==a){var Fa=aa();if(Fa!==a){var La=ra();if(La!==a){var Pa=ja();Pa!==a?X=va=[va,Fa,La,Pa]:(c=X,X=a)}else c=X,X=a}else c=X,X=a}else c=X,X=a;for(;X!==a;)B.push(X),X=c,va=ra(),va!==a?(Fa=aa(),Fa!==a?(La=ra(),La!==a?(Pa=ja(),Pa!==a?X=va=[va,Fa,La,Pa]:(c=X,X=a)):(c=X,X=a)):(c=X,X=a)):(c=X,X=a);B!==a?k=E=cb(E,B):(c=k,k=a)}else c=k,k=a;return k}function aa(){if(43===h.charCodeAt(c)){var k=gb;c++}else k=a,0===sa&&F(kb);k===a&&(45===h.charCodeAt(c)?(k=pc,c++):
(k=a,0===sa&&F(qc)));return k}function ja(){var k=c;var E=G();if(E!==a){var B=[];var X=c;var va=ra();if(va!==a){var Fa=U();if(Fa!==a){var La=ra();if(La!==a){var Pa=G();Pa!==a?X=va=[va,Fa,La,Pa]:(c=X,X=a)}else c=X,X=a}else c=X,X=a}else c=X,X=a;for(;X!==a;)B.push(X),X=c,va=ra(),va!==a?(Fa=U(),Fa!==a?(La=ra(),La!==a?(Pa=G(),Pa!==a?X=va=[va,Fa,La,Pa]:(c=X,X=a)):(c=X,X=a)):(c=X,X=a)):(c=X,X=a);B!==a?k=E=cb(E,B):(c=k,k=a)}else c=k,k=a;return k}function U(){if(42===h.charCodeAt(c)){var k=wd;c++}else k=a,
0===sa&&F(xd);k===a&&(47===h.charCodeAt(c)?(k=yd,c++):(k=a,0===sa&&F(zd)));return k}function G(){var k=qa();if(k===a){var E=c;var B=c;var X=y();if(X!==a){var va=S();if(va!==a){var Fa=ma();Fa!==a?B=X=parseFloat(X+va+Fa):(c=B,B=a)}else c=B,B=a}else c=B,B=a;B===a&&(B=c,X=y(),X!==a?(va=S(),va!==a?B=X=parseFloat(X+va):(c=B,B=a)):(c=B,B=a),B===a&&(B=c,X=y(),X!==a?(va=ma(),va!==a?B=X=parseFloat(X+va):(c=B,B=a)):(c=B,B=a),B===a&&(B=c,X=y(),X!==a&&(X=parseFloat(X)),B=X)));var La=B;if(La!==a){var Pa=c;sa++;
var Ad=J();sa--;Ad===a?Pa=void 0:(c=Pa,Pa=a);Pa!==a?E=La={type:"number",value:La}:(c=E,E=a)}else c=E,E=a;k=E;if(k===a){var Lb=c;var Bb=c;if(h.substr(c,4).toLowerCase()===Bd){var $b=h.substr(c,4);c+=4}else $b=a,0===sa&&F(Cd);if($b!==a){var Mb=c;sa++;var Dd=O();sa--;Dd===a?Mb=void 0:(c=Mb,Mb=a);Mb!==a?Bb=$b=[$b,Mb]:(c=Bb,Bb=a)}else c=Bb,Bb=a;var yb=Bb;yb!==a&&(yb={type:"bool",value:!0});Lb=yb;if(Lb===a){Lb=c;var Cb=c;if(h.substr(c,5).toLowerCase()===Ed){var ac=h.substr(c,5);c+=5}else ac=a,0===sa&&F(Fd);
if(ac!==a){var Nb=c;sa++;var Gd=O();sa--;Gd===a?Nb=void 0:(c=Nb,Nb=a);Nb!==a?Cb=ac=[ac,Nb]:(c=Cb,Cb=a)}else c=Cb,Cb=a;yb=Cb;yb!==a&&(yb={type:"bool",value:!1});Lb=yb}k=Lb;if(k===a){var Db=c;if(h.substr(c,4).toLowerCase()===Hd){var bc=h.substr(c,4);c+=4}else bc=a,0===sa&&F(Id);if(bc!==a){var Ob=c;sa++;var Jd=O();sa--;Jd===a?Ob=void 0:(c=Ob,Ob=a);Ob!==a?Db=bc=[bc,Ob]:(c=Db,Db=a)}else c=Db,Db=a;var rc=Db;rc!==a&&(rc={type:"null",value:null});k=rc;if(k===a){var vb=c;var Eb=c;if(h.substr(c,4).toLowerCase()===
Kd){var sc=h.substr(c,4);c+=4}else sc=a,0===sa&&F(Ld);if(sc!==a){var cc=c;sa++;var Md=O();sa--;Md===a?cc=void 0:(c=cc,cc=a);cc!==a?Eb=sc="DATE":(c=Eb,Eb=a)}else c=Eb,Eb=a;var Rc=Eb;if(Rc!==a){var Nd=ra();if(Nd!==a){var Sc=pa();Sc!==a?vb=Rc={type:"date",value:Sc.value}:(c=vb,vb=a)}else c=vb,vb=a}else c=vb,vb=a;k=vb;if(k===a){var wb=c;var Fb=c;if(h.substr(c,9).toLowerCase()===Od){var tc=h.substr(c,9);c+=9}else tc=a,0===sa&&F(Pd);if(tc!==a){var dc=c;sa++;var Qd=O();sa--;Qd===a?dc=void 0:(c=dc,dc=a);
dc!==a?Fb=tc="TIMESTAMP":(c=Fb,Fb=a)}else c=Fb,Fb=a;var Tc=Fb;if(Tc!==a){var Rd=ra();if(Rd!==a){var Uc=pa();Uc!==a?wb=Tc={type:"timestamp",value:Uc.value}:(c=wb,wb=a)}else c=wb,wb=a}else c=wb,wb=a;k=wb;if(k===a){var Xa=c;var Pb=ka();if(Pb!==a){var uc=ra();if(uc!==a){if(45===h.charCodeAt(c)){var tb=pc;c++}else tb=a,0===sa&&F(qc);tb===a&&(43===h.charCodeAt(c)?(tb=gb,c++):(tb=a,0===sa&&F(kb)));if(tb!==a){var vc=ra();if(vc!==a){var Qb=pa();if(Qb!==a){var Sd=ra();if(Sd!==a){var Vc=I();Vc!==a?Xa=Pb={type:"interval",
value:Qb,qualifier:Vc,op:tb}:(c=Xa,Xa=a)}else c=Xa,Xa=a}else c=Xa,Xa=a}else c=Xa,Xa=a}else c=Xa,Xa=a}else c=Xa,Xa=a}else c=Xa,Xa=a;Xa===a&&(Xa=c,Pb=ka(),Pb!==a?(uc=ra(),uc!==a?(tb=pa(),tb!==a?(vc=ra(),vc!==a?(Qb=I(),Qb!==a?Xa=Pb={type:"interval",value:tb,qualifier:Qb,op:""}:(c=Xa,Xa=a)):(c=Xa,Xa=a)):(c=Xa,Xa=a)):(c=Xa,Xa=a)):(c=Xa,Xa=a));k=Xa}}}}}}var Wa=k;if(Wa===a){var db=c;var Gb=c;if(h.substr(c,7).toLowerCase()===Td){var wc=h.substr(c,7);c+=7}else wc=a,0===sa&&F(Ud);if(wc!==a){var ec=c;sa++;var Vd=
O();sa--;Vd===a?ec=void 0:(c=ec,ec=a);ec!==a?Gb=wc="EXTRACT":(c=Gb,Gb=a)}else c=Gb,Gb=a;var Wc=Gb;if(Wc!==a){var Wd=ra();if(Wd!==a){var Xd=Ia();if(Xd!==a){var Yd=ra();if(Yd!==a){var ob=la();ob===a&&(ob=na(),ob===a&&(ob=ua(),ob===a&&(ob=ta(),ob===a&&(ob=xa(),ob===a&&(ob=Ba())))));var Xc=ob;if(Xc!==a){var Zd=ra();if(Zd!==a){var $d=ba();if($d!==a){var ae=ra();if(ae!==a){var Yc=d();if(Yc!==a){var be=ra();if(be!==a){var ce=Sa();ce!==a?db=Wc={type:"function",name:"extract",args:{type:"expr_list",value:[{type:"string",
value:Xc},Yc]}}:(c=db,db=a)}else c=db,db=a}else c=db,db=a}else c=db,db=a}else c=db,db=a}else c=db,db=a}else c=db,db=a}else c=db,db=a}else c=db,db=a}else c=db,db=a}else c=db,db=a;Wa=db;if(Wa===a){var bb=c;var Hb=c;if(h.substr(c,9).toLowerCase()===de){var xc=h.substr(c,9);c+=9}else xc=a,0===sa&&F(ee);if(xc!==a){var fc=c;sa++;var fe=O();sa--;fe===a?fc=void 0:(c=fc,fc=a);fc!==a?Hb=xc="SUBSTRING":(c=Hb,Hb=a)}else c=Hb,Hb=a;var Zc=Hb;if(Zc!==a){var ge=ra();if(ge!==a){var he=Ia();if(he!==a){var ie=ra();
if(ie!==a){var yc=d();if(yc!==a){var je=ra();if(je!==a){var ke=ba();if(ke!==a){var le=ra();if(le!==a){var zc=d();if(zc!==a){var me=ra();if(me!==a){var lb=c;var Ib=c;if(h.substr(c,3).toLowerCase()===ne){var Ac=h.substr(c,3);c+=3}else Ac=a,0===sa&&F(oe);if(Ac!==a){var gc=c;sa++;var pe=O();sa--;pe===a?gc=void 0:(c=gc,gc=a);gc!==a?Ib=Ac="FOR":(c=Ib,Ib=a)}else c=Ib,Ib=a;var Rb=Ib;if(Rb!==a){var $c=ra();if($c!==a){var ad=d();if(ad!==a){var bd=ra();bd!==a?lb=Rb=[Rb,$c,ad,bd]:(c=lb,lb=a)}else c=lb,lb=a}else c=
lb,lb=a}else c=lb,lb=a;lb===a&&(lb=null);lb!==a?(Rb=Sa(),Rb!==a?bb=Zc={type:"function",name:"substring",args:{type:"expr_list",value:lb?[yc,zc,lb[2]]:[yc,zc]}}:(c=bb,bb=a)):(c=bb,bb=a)}else c=bb,bb=a}else c=bb,bb=a}else c=bb,bb=a}else c=bb,bb=a}else c=bb,bb=a}else c=bb,bb=a}else c=bb,bb=a}else c=bb,bb=a}else c=bb,bb=a}else c=bb,bb=a;Wa=bb;if(Wa===a){var Ma=c;var Sb=W();if(Sb!==a){var Bc=ra();if(Bc!==a){var Cc=Ia();if(Cc!==a){var Dc=ra();if(Dc!==a){var pb=l();pb===a&&(pb=null);if(pb!==a){var Ec=ra();
if(Ec!==a){var Tb=d();if(Tb!==a){var Fc=ra();if(Fc!==a){var Gc=ba();if(Gc!==a){var qe=ra();if(qe!==a){var cd=d();if(cd!==a){var re=ra();if(re!==a){var se=Sa();se!==a?Ma=Sb={type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==pb?"BOTH":pb},Tb,cd]}}:(c=Ma,Ma=a)}else c=Ma,Ma=a}else c=Ma,Ma=a}else c=Ma,Ma=a}else c=Ma,Ma=a}else c=Ma,Ma=a}else c=Ma,Ma=a}else c=Ma,Ma=a}else c=Ma,Ma=a}else c=Ma,Ma=a}else c=Ma,Ma=a}else c=Ma,Ma=a}else c=Ma,Ma=a;Ma===a&&(Ma=c,Sb=W(),Sb!==a?
(Bc=ra(),Bc!==a?(Cc=Ia(),Cc!==a?(Dc=ra(),Dc!==a?(pb=l(),pb===a&&(pb=null),pb!==a?(Ec=ra(),Ec!==a?(Tb=d(),Tb!==a?(Fc=ra(),Fc!==a?(Gc=Sa(),Gc!==a?Ma=Sb={type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==pb?"BOTH":pb},Tb]}}:(c=Ma,Ma=a)):(c=Ma,Ma=a)):(c=Ma,Ma=a)):(c=Ma,Ma=a)):(c=Ma,Ma=a)):(c=Ma,Ma=a)):(c=Ma,Ma=a)):(c=Ma,Ma=a)):(c=Ma,Ma=a));Wa=Ma;if(Wa===a){var eb=c;var Jb=c;if(h.substr(c,8).toLowerCase()===te){var Hc=h.substr(c,8);c+=8}else Hc=a,0===sa&&F(ue);if(Hc!==
a){var hc=c;sa++;var ve=O();sa--;ve===a?hc=void 0:(c=hc,hc=a);hc!==a?Jb=Hc="POSITION":(c=Jb,Jb=a)}else c=Jb,Jb=a;var dd=Jb;if(dd!==a){var we=ra();if(we!==a){var xe=Ia();if(xe!==a){var ye=ra();if(ye!==a){var ed=d();if(ed!==a){var ze=ra();if(ze!==a){var Ae=b();if(Ae!==a){var Be=ra();if(Be!==a){var fd=d();if(fd!==a){var Ce=ra();if(Ce!==a){var De=Sa();De!==a?eb=dd={type:"function",name:"position",args:{type:"expr_list",value:[ed,fd]}}:(c=eb,eb=a)}else c=eb,eb=a}else c=eb,eb=a}else c=eb,eb=a}else c=eb,
eb=a}else c=eb,eb=a}else c=eb,eb=a}else c=eb,eb=a}else c=eb,eb=a}else c=eb,eb=a}else c=eb,eb=a;Wa=eb;if(Wa===a){var ib=c;var Ub;var qb=c;qb=Ub=D();if(qb===a)if(qb=c,96===h.charCodeAt(c)?(Ub=gd,c++):(Ub=a,0===sa&&F(hd)),Ub!==a){var ic=[];if(id.test(h.charAt(c))){var ub=h.charAt(c);c++}else ub=a,0===sa&&F(jd);if(ub!==a)for(;ub!==a;)ic.push(ub),id.test(h.charAt(c))?(ub=h.charAt(c),c++):(ub=a,0===sa&&F(jd));else ic=a;ic!==a?(96===h.charCodeAt(c)?(ub=gd,c++):(ub=a,0===sa&&F(hd)),ub!==a?qb=Ub=ic.join(""):
(c=qb,qb=a)):(c=qb,qb=a)}else c=qb,qb=a;var Ic=qb;if(Ic!==a){var Ee=ra();if(Ee!==a){var Fe=Ia();if(Fe!==a){var Ge=ra();if(Ge!==a){var Vb=C();Vb===a&&(Vb=null);if(Vb!==a){var He=ra();if(He!==a){var Ie=Sa();Ie!==a?ib=Ic={type:"function",name:Ic,args:Vb?Vb:{type:"expr_list",value:[]}}:(c=ib,ib=a)}else c=ib,ib=a}else c=ib,ib=a}else c=ib,ib=a}else c=ib,ib=a}else c=ib,ib=a}else c=ib,ib=a;Wa=ib;if(Wa===a){var mb;var Ra=c;var Wb=Ea();if(Wb!==a){var Jc=ra();if(Jc!==a){var Xb=d();if(Xb!==a){var Kc=ra();if(Kc!==
a){var zb=[];for(mb=Ca();mb!==a;)zb.push(mb),mb=Ca();if(zb!==a)if(mb=ra(),mb!==a){var jc=Ka();jc!==a?Ra=Wb={type:"case_expression",format:"simple",operand:Xb,clauses:zb,else:null}:(c=Ra,Ra=a)}else c=Ra,Ra=a;else c=Ra,Ra=a}else c=Ra,Ra=a}else c=Ra,Ra=a}else c=Ra,Ra=a}else c=Ra,Ra=a;if(Ra===a)if(Ra=c,Wb=Ea(),Wb!==a)if(Jc=ra(),Jc!==a)if(Xb=d(),Xb!==a)if(Kc=ra(),Kc!==a){zb=[];for(mb=Ca();mb!==a;)zb.push(mb),mb=Ca();if(zb!==a)if(mb=ra(),mb!==a)if(jc=ha(),jc!==a){var Je=ra();if(Je!==a){var Ke=Ka();Ke!==
a?Ra=Wb={type:"case_expression",format:"simple",operand:Xb,clauses:zb,else:jc.value}:(c=Ra,Ra=a)}else c=Ra,Ra=a}else c=Ra,Ra=a;else c=Ra,Ra=a;else c=Ra,Ra=a}else c=Ra,Ra=a;else c=Ra,Ra=a;else c=Ra,Ra=a;else c=Ra,Ra=a;var Lc=Ra;if(Lc===a){var nb;var Ya=c;var Yb=Ea();if(Yb!==a){var Mc=ra();if(Mc!==a){var Ab=[];for(nb=wa();nb!==a;)Ab.push(nb),nb=wa();if(Ab!==a)if(nb=ra(),nb!==a){var kc=Ka();kc!==a?Ya=Yb={type:"case_expression",format:"searched",clauses:Ab,else:null}:(c=Ya,Ya=a)}else c=Ya,Ya=a;else c=
Ya,Ya=a}else c=Ya,Ya=a}else c=Ya,Ya=a;if(Ya===a)if(Ya=c,Yb=Ea(),Yb!==a)if(Mc=ra(),Mc!==a){Ab=[];for(nb=wa();nb!==a;)Ab.push(nb),nb=wa();if(Ab!==a)if(nb=ra(),nb!==a)if(kc=ha(),kc!==a){var Le=ra();if(Le!==a){var Me=Ka();Me!==a?Ya=Yb={type:"case_expression",format:"searched",clauses:Ab,else:kc.value}:(c=Ya,Ya=a)}else c=Ya,Ya=a}else c=Ya,Ya=a;else c=Ya,Ya=a;else c=Ya,Ya=a}else c=Ya,Ya=a;else c=Ya,Ya=a;Lc=Ya}Wa=Lc;if(Wa===a){var lc;var Kb=c;var kd=J();if(kd!==a){var Nc=[];for(lc=R();lc!==a;)Nc.push(lc),
lc=R();Nc!==a?Kb=kd+=Nc.join(""):(c=Kb,Kb=a)}else c=Kb,Kb=a;var mc=Kb;if(mc!==a){var Oc=mc;mc=/^CURRENT_DATE$/i.test(Oc)?{type:"current_time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(Oc)?{type:"current_time",mode:"timestamp"}:{type:"column_ref",table:"",column:Oc}}Wa=mc;if(Wa===a&&(Wa=z(),Wa===a)){Wa=c;var ld=Ia();if(ld!==a){var Ne=ra();if(Ne!==a){var Pc=d();if(Pc!==a){var Oe=ra();if(Oe!==a){var Pe=Sa();Pe!==a?(Pc.paren=!0,Wa=ld=Pc):(c=Wa,Wa=a)}else c=Wa,Wa=a}else c=Wa,Wa=a}else c=Wa,Wa=a}else c=
Wa,Wa=a}}}}}}}}return Wa}function D(){var k;var E=c;var B=J();if(B!==a){var X=[];for(k=O();k!==a;)X.push(k),k=O();X!==a?E=B+=X.join(""):(c=E,E=a)}else c=E,E=a;return E}function J(){if(Qe.test(h.charAt(c))){var k=h.charAt(c);c++}else k=a,0===sa&&F(Re);return k}function O(){if(Se.test(h.charAt(c))){var k=h.charAt(c);c++}else k=a,0===sa&&F(Te);return k}function R(){if(Ue.test(h.charAt(c))){var k=h.charAt(c);c++}else k=a,0===sa&&F(Ve);return k}function z(){var k=c;if(64===h.charCodeAt(c)){var E=We;c++}else E=
a,0===sa&&F(Xe);if(E!==a){var B=D();B!==a?k=E=[E,B]:(c=k,k=a)}else c=k,k=a;k!==a&&(k={type:"param",value:k[1]});return k}function l(){var k=c;if(h.substr(c,7).toLowerCase()===Ye){var E=h.substr(c,7);c+=7}else E=a,0===sa&&F(Ze);if(E!==a){E=c;sa++;var B=O();sa--;B===a?E=void 0:(c=E,E=a);E!==a?k="LEADING":(c=k,k=a)}else c=k,k=a;k===a&&(k=c,h.substr(c,8).toLowerCase()===$e?(E=h.substr(c,8),c+=8):(E=a,0===sa&&F(af)),E!==a?(E=c,sa++,B=O(),sa--,B===a?E=void 0:(c=E,E=a),E!==a?k="TRAILING":(c=k,k=a)):(c=k,
k=a),k===a&&(k=c,h.substr(c,4).toLowerCase()===bf?(E=h.substr(c,4),c+=4):(E=a,0===sa&&F(cf)),E!==a?(E=c,sa++,B=O(),sa--,B===a?E=void 0:(c=E,E=a),E!==a?k="BOTH":(c=k,k=a)):(c=k,k=a)));return k}function I(){var k=c;var E=c;var B=T();if(B!==a){var X=ra();if(X!==a)if(X=Ia(),X!==a)if(X=ra(),X!==a)if(X=ia(),X!==a){var va=ra();va!==a?(va=Sa(),va!==a?E=B={type:"interval-period",period:B.value,precision:X,secondary:null}:(c=E,E=a)):(c=E,E=a)}else c=E,E=a;else c=E,E=a;else c=E,E=a;else c=E,E=a}else c=E,E=a;
E===a&&(E=c,B=T(),B!==a&&(B=md(B)),E=B);if(E!==a)if(B=ra(),B!==a)if(B=c,h.substr(c,2).toLowerCase()===df?(X=h.substr(c,2),c+=2):(X=a,0===sa&&F(ef)),X!==a?(X=c,sa++,va=O(),sa--,va===a?X=void 0:(c=X,X=a),X!==a?B="TO":(c=B,B=a)):(c=B,B=a),B!==a)if(B=ra(),B!==a){B=c;X=T();X!==a&&(X={type:"interval-period",period:X.value,precision:null,secondary:null});B=X;if(B===a){B=c;X=Ba();if(X!==a)if(X=ra(),X!==a)if(X=Ia(),X!==a)if(X=ra(),X!==a)if(X=ia(),X!==a)if(va=ra(),va!==a)if(va=Ha(),va!==a)if(va=ra(),va!==a)if(va=
L(),va!==a){var Fa=ra();Fa!==a?(Fa=Sa(),Fa!==a?B=X=nd(X,va):(c=B,B=a)):(c=B,B=a)}else c=B,B=a;else c=B,B=a;else c=B,B=a;else c=B,B=a;else c=B,B=a;else c=B,B=a;else c=B,B=a;else c=B,B=a;else c=B,B=a;B===a&&(B=c,X=Ba(),X!==a?(X=ra(),X!==a?(X=Ia(),X!==a?(X=ra(),X!==a?(X=ia(),X!==a?(va=ra(),va!==a?(va=Sa(),va!==a?B=X={type:"interval-period",period:"second",precision:X,secondary:null}:(c=B,B=a)):(c=B,B=a)):(c=B,B=a)):(c=B,B=a)):(c=B,B=a)):(c=B,B=a)):(c=B,B=a),B===a&&(B=c,X=Ba(),X!==a&&(X={type:"interval-period",
period:"second",precision:null,secondary:null}),B=X))}B!==a?k=E={type:"interval-qualifier",start:E,end:B}:(c=k,k=a)}else c=k,k=a;else c=k,k=a;else c=k,k=a;else c=k,k=a;k===a&&(k=c,B=T(),B!==a?(E=ra(),E!==a?(E=Ia(),E!==a?(E=ra(),E!==a?(E=L(),E!==a?(X=ra(),X!==a?(X=Sa(),X!==a?k=B={type:"interval-period",period:B.value,precision:E,secondary:null}:(c=k,k=a)):(c=k,k=a)):(c=k,k=a)):(c=k,k=a)):(c=k,k=a)):(c=k,k=a)):(c=k,k=a),k===a&&(k=c,B=T(),B!==a&&(B=md(B)),k=B,k===a&&(k=c,B=Ba(),B!==a?(E=ra(),E!==a?(E=
Ia(),E!==a?(E=ra(),E!==a?(E=ia(),E!==a?(X=ra(),X!==a?(X=Ha(),X!==a?(B=ra(),B!==a?(B=L(),B!==a?(X=ra(),X!==a?(X=Sa(),X!==a?k=B=nd(E,B):(c=k,k=a)):(c=k,k=a)):(c=k,k=a)):(c=k,k=a)):(c=k,k=a)):(c=k,k=a)):(c=k,k=a)):(c=k,k=a)):(c=k,k=a)):(c=k,k=a)):(c=k,k=a),k===a&&(k=c,B=Ba(),B!==a?(E=ra(),E!==a?(E=Ia(),E!==a?(E=ra(),E!==a?(E=L(),E!==a?(X=ra(),X!==a?(X=Sa(),X!==a?k=B={type:"interval-period",period:"second",precision:E,secondary:null}:(c=k,k=a)):(c=k,k=a)):(c=k,k=a)):(c=k,k=a)):(c=k,k=a)):(c=k,k=a)):(c=
k,k=a),k===a&&(k=c,B=Ba(),B!==a&&(B={type:"interval-period",period:"second",precision:null,secondary:null}),k=B)))));return k}function T(){var k=c;k=ua();k!==a&&(k={type:"string",value:"day"});k===a&&(k=c,k=ta(),k!==a&&(k={type:"string",value:"hour"}),k===a&&(k=c,k=xa(),k!==a&&(k={type:"string",value:"minute"}),k===a&&(k=c,k=na(),k!==a&&(k={type:"string",value:"month"}),k===a&&(k=c,k=la(),k!==a&&(k={type:"string",value:"year"})))));return k}function L(){var k=ya();k!==a&&(k=parseFloat(k));return k}
function ia(){var k=ya();k!==a&&(k=parseFloat(k));return k}function pa(){var k=qa();k===a&&(k=z());return k}function qa(){var k=c;if(39===h.charCodeAt(c)){var E=od;c++}else E=a,0===sa&&F(pd);E===a&&(h.substr(c,2)===qd?(E=qd,c+=2):(E=a,0===sa&&F(ff)));if(E!==a){E=[];var B=c;h.substr(c,2)===nc?(B=nc,c+=2):(B=a,0===sa&&F(rd));B!==a&&(B="'");B===a&&(sd.test(h.charAt(c))?(B=h.charAt(c),c++):(B=a,0===sa&&F(td)));for(;B!==a;)E.push(B),B=c,h.substr(c,2)===nc?(B=nc,c+=2):(B=a,0===sa&&F(rd)),B!==a&&(B="'"),
B===a&&(sd.test(h.charAt(c))?(B=h.charAt(c),c++):(B=a,0===sa&&F(td)));E!==a?(39===h.charCodeAt(c)?(B=od,c++):(B=a,0===sa&&F(pd)),B!==a?k=E={type:"string",value:E.join("")}:(c=k,k=a)):(c=k,k=a)}else c=k,k=a;return k}function wa(){var k=c;var E=Ga();if(E!==a)if(E=ra(),E!==a)if(E=d(),E!==a){var B=ra();B!==a?(B=Ja(),B!==a?(B=ra(),B!==a?(B=d(),B!==a?k=E={type:"when_clause",operand:E,value:B}:(c=k,k=a)):(c=k,k=a)):(c=k,k=a)):(c=k,k=a)}else c=k,k=a;else c=k,k=a;else c=k,k=a;return k}function Ca(){var k=
c;var E=Ga();if(E!==a)if(E=ra(),E!==a)if(E=d(),E!==a){var B=ra();B!==a?(B=Ja(),B!==a?(B=ra(),B!==a?(B=d(),B!==a?k=E={type:"when_clause",operand:E,value:B}:(c=k,k=a)):(c=k,k=a)):(c=k,k=a)):(c=k,k=a)}else c=k,k=a;else c=k,k=a;else c=k,k=a;return k}function ha(){var k=c;var E=c;if(h.substr(c,4).toLowerCase()===gf){var B=h.substr(c,4);c+=4}else B=a,0===sa&&F(hf);if(B!==a){B=c;sa++;var X=O();sa--;X===a?B=void 0:(c=B,B=a);B!==a?E="ELSE":(c=E,E=a)}else c=E,E=a;E!==a?(E=ra(),E!==a?(E=d(),E!==a?k={type:"else_clause",
value:E}:(c=k,k=a)):(c=k,k=a)):(c=k,k=a);return k}function y(){var k=ya();if(k===a){k=c;if(45===h.charCodeAt(c)){var E=pc;c++}else E=a,0===sa&&F(qc);E===a&&(43===h.charCodeAt(c)?(E=gb,c++):(E=a,0===sa&&F(kb)));if(E!==a){var B=ya();B!==a?k=E=E[0]+B:(c=k,k=a)}else c=k,k=a}return k}function S(){var k=c;if(46===h.charCodeAt(c)){var E=jf;c++}else E=a,0===sa&&F(kf);E!==a?(E=ya(),E===a&&(E=null),E!==a?k="."+(null!=E?E:""):(c=k,k=a)):(c=k,k=a);return k}function ma(){var k;var E=k=c;if(lf.test(h.charAt(c))){var B=
h.charAt(c);c++}else B=a,0===sa&&F(mf);B!==a?(nf.test(h.charAt(c))?(B=h.charAt(c),c++):(B=a,0===sa&&F(of)),B===a&&(B=null),B!==a?E="e"+(null===B?"":B):(c=E,E=a)):(c=E,E=a);E!==a?(B=ya(),B!==a?k=E+B:(c=k,k=a)):(c=k,k=a);return k}function ya(){var k=[];var E=za();if(E!==a)for(;E!==a;)k.push(E),E=za();else k=a;k!==a&&(k=k.join(""));return k}function za(){if(pf.test(h.charAt(c))){var k=h.charAt(c);c++}else k=a,0===sa&&F(qf);return k}function b(){var k=c;if(h.substr(c,2).toLowerCase()===rf){var E=h.substr(c,
2);c+=2}else E=a,0===sa&&F(sf);if(E!==a){E=c;sa++;var B=O();sa--;B===a?E=void 0:(c=E,E=a);E!==a?k="IN":(c=k,k=a)}else c=k,k=a;return k}function f(){var k=c;if(h.substr(c,2).toLowerCase()===tf){var E=h.substr(c,2);c+=2}else E=a,0===sa&&F(uf);if(E!==a){E=c;sa++;var B=O();sa--;B===a?E=void 0:(c=E,E=a);E!==a?k="IS":(c=k,k=a)}else c=k,k=a;return k}function V(){var k=c;if(h.substr(c,4).toLowerCase()===vf){var E=h.substr(c,4);c+=4}else E=a,0===sa&&F(wf);if(E!==a){E=c;sa++;var B=O();sa--;B===a?E=void 0:(c=
E,E=a);E!==a?k="LIKE":(c=k,k=a)}else c=k,k=a;return k}function g(){var k=c;if(h.substr(c,3).toLowerCase()===xf){var E=h.substr(c,3);c+=3}else E=a,0===sa&&F(yf);if(E!==a){E=c;sa++;var B=O();sa--;B===a?E=void 0:(c=E,E=a);E!==a?k="NOT":(c=k,k=a)}else c=k,k=a;return k}function x(){var k=c;if(h.substr(c,3).toLowerCase()===zf){var E=h.substr(c,3);c+=3}else E=a,0===sa&&F(Af);if(E!==a){E=c;sa++;var B=O();sa--;B===a?E=void 0:(c=E,E=a);E!==a?k="AND":(c=k,k=a)}else c=k,k=a;return k}function P(){var k=c;if(h.substr(c,
2).toLowerCase()===Bf){var E=h.substr(c,2);c+=2}else E=a,0===sa&&F(Cf);if(E!==a){E=c;sa++;var B=O();sa--;B===a?E=void 0:(c=E,E=a);E!==a?k="OR":(c=k,k=a)}else c=k,k=a;return k}function Q(){var k=c;if(h.substr(c,7).toLowerCase()===Df){var E=h.substr(c,7);c+=7}else E=a,0===sa&&F(Ef);if(E!==a){E=c;sa++;var B=O();sa--;B===a?E=void 0:(c=E,E=a);E!==a?k="BETWEEN":(c=k,k=a)}else c=k,k=a;return k}function ba(){var k=c;if(h.substr(c,4).toLowerCase()===Ff){var E=h.substr(c,4);c+=4}else E=a,0===sa&&F(Gf);if(E!==
a){E=c;sa++;var B=O();sa--;B===a?E=void 0:(c=E,E=a);E!==a?k="FROM":(c=k,k=a)}else c=k,k=a;return k}function W(){var k=c;if(h.substr(c,4).toLowerCase()===Hf){var E=h.substr(c,4);c+=4}else E=a,0===sa&&F(If);if(E!==a){E=c;sa++;var B=O();sa--;B===a?E=void 0:(c=E,E=a);E!==a?k="TRIM":(c=k,k=a)}else c=k,k=a;return k}function ka(){var k=c;if(h.substr(c,8).toLowerCase()===Jf){var E=h.substr(c,8);c+=8}else E=a,0===sa&&F(Kf);if(E!==a){E=c;sa++;var B=O();sa--;B===a?E=void 0:(c=E,E=a);E!==a?k="INTERVAL":(c=k,
k=a)}else c=k,k=a;return k}function la(){var k=c;if(h.substr(c,4).toLowerCase()===Lf){var E=h.substr(c,4);c+=4}else E=a,0===sa&&F(Mf);if(E!==a){E=c;sa++;var B=O();sa--;B===a?E=void 0:(c=E,E=a);E!==a?k="YEAR":(c=k,k=a)}else c=k,k=a;return k}function na(){var k=c;if(h.substr(c,5).toLowerCase()===Nf){var E=h.substr(c,5);c+=5}else E=a,0===sa&&F(Of);if(E!==a){E=c;sa++;var B=O();sa--;B===a?E=void 0:(c=E,E=a);E!==a?k="MONTH":(c=k,k=a)}else c=k,k=a;return k}function ua(){var k=c;if(h.substr(c,3).toLowerCase()===
Pf){var E=h.substr(c,3);c+=3}else E=a,0===sa&&F(Qf);if(E!==a){E=c;sa++;var B=O();sa--;B===a?E=void 0:(c=E,E=a);E!==a?k="DAY":(c=k,k=a)}else c=k,k=a;return k}function ta(){var k=c;if(h.substr(c,4).toLowerCase()===Rf){var E=h.substr(c,4);c+=4}else E=a,0===sa&&F(Sf);if(E!==a){E=c;sa++;var B=O();sa--;B===a?E=void 0:(c=E,E=a);E!==a?k="HOUR":(c=k,k=a)}else c=k,k=a;return k}function xa(){var k=c;if(h.substr(c,6).toLowerCase()===Tf){var E=h.substr(c,6);c+=6}else E=a,0===sa&&F(Uf);if(E!==a){E=c;sa++;var B=
O();sa--;B===a?E=void 0:(c=E,E=a);E!==a?k="MINUTE":(c=k,k=a)}else c=k,k=a;return k}function Ba(){var k=c;if(h.substr(c,6).toLowerCase()===Vf){var E=h.substr(c,6);c+=6}else E=a,0===sa&&F(Wf);if(E!==a){E=c;sa++;var B=O();sa--;B===a?E=void 0:(c=E,E=a);E!==a?k="SECOND":(c=k,k=a)}else c=k,k=a;return k}function Ea(){var k=c;if(h.substr(c,4).toLowerCase()===Xf){var E=h.substr(c,4);c+=4}else E=a,0===sa&&F(Yf);if(E!==a){E=c;sa++;var B=O();sa--;B===a?E=void 0:(c=E,E=a);E!==a?k="CASE":(c=k,k=a)}else c=k,k=a;
return k}function Ka(){var k=c;if(h.substr(c,3).toLowerCase()===Zf){var E=h.substr(c,3);c+=3}else E=a,0===sa&&F($f);if(E!==a){E=c;sa++;var B=O();sa--;B===a?E=void 0:(c=E,E=a);E!==a?k="END":(c=k,k=a)}else c=k,k=a;return k}function Ga(){var k=c;if(h.substr(c,4).toLowerCase()===ag){var E=h.substr(c,4);c+=4}else E=a,0===sa&&F(bg);if(E!==a){E=c;sa++;var B=O();sa--;B===a?E=void 0:(c=E,E=a);E!==a?k="WHEN":(c=k,k=a)}else c=k,k=a;return k}function Ja(){var k=c;if(h.substr(c,4).toLowerCase()===cg){var E=h.substr(c,
4);c+=4}else E=a,0===sa&&F(dg);if(E!==a){E=c;sa++;var B=O();sa--;B===a?E=void 0:(c=E,E=a);E!==a?k="THEN":(c=k,k=a)}else c=k,k=a;return k}function Ha(){if(44===h.charCodeAt(c)){var k=eg;c++}else k=a,0===sa&&F(fg);return k}function Ia(){if(40===h.charCodeAt(c)){var k=gg;c++}else k=a,0===sa&&F(hg);return k}function Sa(){if(41===h.charCodeAt(c)){var k=ig;c++}else k=a,0===sa&&F(jg);return k}function ra(){var k;var E=[];for(k=fb();k!==a;)E.push(k),k=fb();return E}function fb(){if(kg.test(h.charAt(c))){var k=
h.charAt(c);c++}else k=a,0===sa&&F(lg);return k}function hb(k,E,B,X){k={type:"binary_expr",operator:k,left:E,right:B};void 0!==X&&(k.escape=X);return k}function cb(k,E){for(var B=0;B<E.length;B++)k=hb(E[B][1],k,E[B][3]);return k}u=void 0!==u?u:{};var a={},Va={start:w},Ua=w,Ta="!",jb=r("!",!1),rb="\x3d",Qa=r("\x3d",!1),xb="\x3e\x3d",Y=r("\x3e\x3d",!1),ea="\x3e",ca=r("\x3e",!1),oa="\x3c\x3d",Aa=r("\x3c\x3d",!1),Da="\x3c\x3e",Na=r("\x3c\x3e",!1),Oa="\x3c",ab=r("\x3c",!1),Za="!\x3d",$a=r("!\x3d",!1),
gb="+",kb=r("+",!1),pc="-",qc=r("-",!1),wd="*",xd=r("*",!1),yd="/",zd=r("/",!1),Qe=/^[A-Za-z_\x80-\uFFFF]/,Re=H([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),Se=/^[A-Za-z0-9_]/,Te=H([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),Ue=/^[A-Za-z0-9_.\x80-\uFFFF]/,Ve=H([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],!1,!1),We="@",Xe=r("@",!1),md=function(k){return{type:"interval-period",period:k.value,precision:null,secondary:null}},nd=function(k,E){return{type:"interval-period",period:"second",
precision:k,secondary:E}},od="'",pd=r("'",!1),qd="N'",ff=r("N'",!1),nc="''",rd=r("''",!1),sd=/^[^']/,td=H(["'"],!0,!1),jf=".",kf=r(".",!1),pf=/^[0-9]/,qf=H([["0","9"]],!1,!1),lf=/^[eE]/,mf=H(["e","E"],!1,!1),nf=/^[+\-]/,of=H(["+","-"],!1,!1),Hd="null",Id=r("NULL",!0),Bd="true",Cd=r("TRUE",!0),Ed="false",Fd=r("FALSE",!0),rf="in",sf=r("IN",!0),tf="is",uf=r("IS",!0),vf="like",wf=r("LIKE",!0),ud="escape",vd=r("ESCAPE",!0),xf="not",yf=r("NOT",!0),zf="and",Af=r("AND",!0),Bf="or",Cf=r("OR",!0),Df="between",
Ef=r("BETWEEN",!0),Ff="from",Gf=r("FROM",!0),ne="for",oe=r("FOR",!0),de="substring",ee=r("SUBSTRING",!0),Td="extract",Ud=r("EXTRACT",!0),Hf="trim",If=r("TRIM",!0),te="position",ue=r("POSITION",!0),Od="timestamp",Pd=r("TIMESTAMP",!0),Kd="date",Ld=r("DATE",!0),Ye="leading",Ze=r("LEADING",!0),$e="trailing",af=r("TRAILING",!0),bf="both",cf=r("BOTH",!0),df="to",ef=r("TO",!0),Jf="interval",Kf=r("INTERVAL",!0),Lf="year",Mf=r("YEAR",!0),Nf="month",Of=r("MONTH",!0),Pf="day",Qf=r("DAY",!0),Rf="hour",Sf=r("HOUR",
!0),Tf="minute",Uf=r("MINUTE",!0),Vf="second",Wf=r("SECOND",!0),Xf="case",Yf=r("CASE",!0),Zf="end",$f=r("END",!0),ag="when",bg=r("WHEN",!0),cg="then",dg=r("THEN",!0),gf="else",hf=r("ELSE",!0),eg=",",fg=r(",",!1),gg="(",hg=r("(",!1),ig=")",jg=r(")",!1),kg=/^[ \t\n\r]/,lg=H([" ","\t","\n","\r"],!1,!1),gd="`",hd=r("`",!1),id=/^[^`]/,jd=H(["`"],!0,!1),c=0,Zb=[{line:1,column:1}],sb=0,oc=[],sa=0;if("startRule"in u){if(!(u.startRule in Va))throw Error("Can't start parsing from rule \""+u.startRule+'".');
Ua=Va[u.startRule]}var Qc=Ua();if(Qc!==a&&c===h.length)return Qc;Qc!==a&&c<h.length&&F({type:"end"});throw function(k,E,B){return new K(K.buildMessage(k,E),k,E,B)}(oc,sb<h.length?h.charAt(sb):null,sb<h.length?fa(sb,sb+1):fa(sb,sb));}}})});let M=function(){function p(){}p.parse=function(K){return Z.parse(K)};return p}();n.WhereGrammar=M;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/graphics/data/utils":function(){define("require exports ../../../core/maybe ../../../core/jsonMap ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/extentUtils ../../../geometry/support/jsonUtils ../../../core/unitUtils ../../../geometry/support/normalizeUtils ../OptimizedGeometry ../featureConversionUtils ../centroid ./projectionSupport".split(" "),
function(n,e,Z,M,p,K,h,u,r,H,da,fa,F){function w(U,G,D,J=U.hasZ,O=U.hasM){const R=U.hasZ&&J,z=U.hasM&&O;return D?(U=da.quantizeOptimizedGeometry(N,G,U.hasZ,U.hasM,"esriGeometryPoint",D,J,O),da.convertToPoint(U,R,z)):da.convertToPoint(G,R,z)}async function C(U,G,D){if(!U)return null;var {where:J}=U;U.where=J=J&&J.trim();if(!J||/^1 *= *1$/.test(J)||G&&G===J)U.where=null;if(!U.geometry)return U;G=await d(U);U.distance=0;U.units=null;"esriSpatialRelEnvelopeIntersects"===U.spatialRel&&({spatialReference:J}=
U.geometry,G=K.getGeometryExtent(G),G.spatialReference=J);U.geometry=G;await F.checkProjectionSupport(G.spatialReference,D);G=(await r.normalizeCentralMeridian(h.fromJSON(G)))[0];if(Z.isNone(G))throw t;G=G.toJSON();G=await F.project(G,G.spatialReference,D);if(!G)throw t;G.spatialReference=D;U.geometry=G;return U}async function d(U){const {geometry:G,distance:D,units:J}=U;if(null==D||"vertexAttributes"in G)return G;var O=G.spatialReference;U=J?v.fromJSON(J):u.getUnitString(O);O=O&&(p.isGeographic(O)||
p.isWebMercator(O))?G:await F.checkProjectionSupport(O,p.WGS84).then(()=>F.project(G,p.WGS84));return(await m())(O.spatialReference,O,D,U)}async function m(){return(await new Promise(function(U,G){n(["../../../geometry/geometryEngineJSON"],U,G)})).geodesicBuffer}const v=new M.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),t=Object.freeze({}),
q=new H,A=new H,N=new H,aa={esriGeometryPoint:da.convertToPoint,esriGeometryPolyline:da.convertToPolyline,esriGeometryPolygon:da.convertToPolygon,esriGeometryMultipoint:da.convertToMultipoint},ja=(U,G)=>"_geVersion"!==U?G:void 0;e.QUERY_ENGINE_EMPTY_RESULT=t;e.cleanFromGeometryEngine=function(U){return U&&"_geVersion"in U?JSON.parse(JSON.stringify(U,ja)):U};e.getCentroid=function(U,G,D){if("esriGeometryPolygon"!==U.geometryType||!G||!G.centroid&&!G.geometry)return null;G.centroid||(G.centroid=fa.getCentroidOptimizedGeometry(new H,
G.geometry,U.hasZ,U.hasM));return w(U,G.centroid,D)};e.getGeometry=function(U,G,D,J,O,R,z=G,l=D){const I=G&&z,T=D&&l;J=J?"coords"in J?J:J.geometry:null;if(!J)return null;if(O)return G=da.generalizeOptimizedGeometry(A,J,G,D,U,O,z,l),R&&(G=da.quantizeOptimizedGeometry(N,G,I,T,U,R)),aa[U](G,I,T);if(R)return R=da.quantizeOptimizedGeometry(N,J,G,D,U,R,z,l),aa[U](R,I,T);da.removeZMValues(q,J,G,D,z,l);return aa[U](q,I,T)};e.normalizeFilter=async function(U,G,D){return C(U,G,D)};e.normalizeQuery=async function(U,
G,D){const {outFields:J,orderByFields:O,groupByFieldsForStatistics:R,outStatistics:z}=U;if(J)for(var l=0;l<J.length;l++)J[l]=J[l].trim();if(O)for(l=0;l<O.length;l++)O[l]=O[l].trim();if(R)for(l=0;l<R.length;l++)R[l]=R[l].trim();if(z)for(l=0;l<z.length;l++)z[l].onStatisticField&&(z[l].onStatisticField=z[l].onStatisticField.trim());U.geometry&&!U.outSR&&(U.outSR=U.geometry.spatialReference);return C(U,G,D)};e.normalizeQueryLike=C;e.transformCentroid=w;Object.defineProperty(e,"__esModule",{value:!0})})},
"esri/layers/graphics/data/spatialQuerySupport":function(){define("require exports ../../../core/Error ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/contains ../../../geometry/support/intersects ../../../geometry/support/jsonUtils ../OptimizedGeometry ../featureConversionUtils ../contains ./projectionSupport ./utils".split(" "),function(n,e,Z,M,p,K,h,u,r,H,da,fa){function F(){return new Promise(function(v,t){n(["../../../geometry/geometryEngineJSON"],v,t)})}const w={esriSpatialRelIntersects:"intersects",
esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null};var C={esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,
esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},d={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},m={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1};e.canQueryWithRBush=function(v){if(h.isExtent(v))return!0;if(h.isPolygon(v)){for(const t of v.rings)if(5!==t.length||t[0][0]!==t[1][0]||t[0][0]!==t[4][0]||t[2][0]!==t[3][0]||t[0][1]!==t[3][1]||t[0][1]!==
t[4][1]||t[1][1]!==t[2][1])return!1;return!0}return!1};e.checkSpatialQuerySupport=async function(v,t,q){const {spatialRel:A,geometry:N}=v;if(N){if(!0!==C[A])throw new Z("feature-store:unsupported-query","Unsupported query spatial relationship",{query:v});if(M.isValid(N.spatialReference)&&M.isValid(q)){if(!0!==d[h.getJsonType(N)])throw new Z("feature-store:unsupported-query","Unsupported query geometry type",{query:v});if(!0!==m[t])throw new Z("feature-store:unsupported-query","Unsupported layer geometry type",
{query:v});if(v.outSR)return da.checkProjectionSupport(v.geometry&&v.geometry.spatialReference,v.outSR)}}};e.getSpatialQueryOperator=function(v,t,q,A,N){if(h.isPolygon(t)&&"esriGeometryPoint"===q&&("esriSpatialRelIntersects"===v||"esriSpatialRelContains"===v)){const aa=r.convertFromPolygon(new u,t,!1,!1);return Promise.resolve(ja=>H.polygonContainsPoint(aa,!1,!1,ja))}if(h.isPolygon(t)&&"esriGeometryMultipoint"===q){const aa=r.convertFromPolygon(new u,t,!1,!1);if("esriSpatialRelContains"===v)return Promise.resolve(ja=>
H.polygonContainsMultipoint(aa,!1,!1,ja,A,N))}if(h.isExtent(t)&&"esriGeometryPoint"===q&&("esriSpatialRelIntersects"===v||"esriSpatialRelContains"===v))return Promise.resolve(aa=>p.extentContainsPoint(t,fa.getGeometry(q,A,N,aa)));if(h.isExtent(t)&&"esriGeometryMultipoint"===q&&"esriSpatialRelContains"===v)return Promise.resolve(aa=>p.extentContainsMultipoint(t,fa.getGeometry(q,A,N,aa)));if(h.isExtent(t)&&"esriSpatialRelIntersects"===v){const aa=K.getExtentIntersector(q);return Promise.resolve(ja=>
aa(t,fa.getGeometry(q,A,N,ja)))}return F().then(aa=>{const ja=aa[w[v]].bind(null,t.spatialReference,t);return U=>ja(fa.getGeometry(q,A,N,U))})};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/layers/graphics/contains":function(){define(["exports"],function(n){function e(Z,M,p,K,h){if(!Z)return!1;M=M?p?4:3:p?3:2;const {coords:u,lengths:r}=Z;p=!1;Z=0;for(const da of r){var H=Z;for(let fa=Z,F=Z+da*M;fa<F;fa+=M){H=fa+M;H===F&&(H=Z);const w=u[fa],C=u[fa+1],d=u[H];H=u[H+1];(C<h&&H>=h||H<h&&C>=
h)&&w+(h-C)/(H-C)*(d-w)<K&&(p=!p)}Z+=da*M}return p}n.polygonContainsCoords=e;n.polygonContainsMultipoint=function(Z,M,p,K,h,u){h=h?u?4:3:u?3:2;const {coords:r,lengths:H}=K;if(!H)return!1;for(let da=0,fa=0;da<H.length;da++,fa+=h)if(!e(Z,M,p,r[fa],r[fa+1]))return!1;return!0};n.polygonContainsPoint=function(Z,M,p,K){return e(Z,M,p,K.coords[0],K.coords[1])};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/graphics/data/timeSupport":function(){define(["exports"],function(n){function e(p,
K,h,u,r){if(null!=u&&null!=r)return H=>{const da=p.getAttribute(H,K);H=p.getAttribute(H,h);return(null==da||da<=r)&&(null==H||H>=u)};if(null!=u)return H=>{H=p.getAttribute(H,h);return null==H||H>=u};if(null!=r)return H=>{H=p.getAttribute(H,K);return null==H||H<=r}}function Z(p,K,h,u){if(null!=h&&null!=u&&h===u)return r=>p.getAttribute(r,K)===h;if(null!=h&&null!=u)return r=>{r=p.getAttribute(r,K);return r>=h&&r<=u};if(null!=h)return r=>p.getAttribute(r,K)>=h;if(null!=u)return r=>p.getAttribute(r,K)<=
u}function M(){return()=>!1}n.getTimeExtent=function(p,K){if(!p)return null;const h=K.featureAdapter,{startTimeField:u,endTimeField:r}=p;let H=Number.POSITIVE_INFINITY,da=Number.NEGATIVE_INFINITY;if(u&&r)K.forEach(fa=>{const F=h.getAttribute(fa,u);fa=h.getAttribute(fa,r);null==F||isNaN(F)||(H=Math.min(H,F));null==fa||isNaN(fa)||(da=Math.max(da,fa))});else{const fa=u||r;K.forEach(F=>{F=h.getAttribute(F,fa);null==F||isNaN(F)||(H=Math.min(H,F),da=Math.max(da,F))})}return{start:H,end:da}};n.getTimeOperator=
function(p,K,h){if(!K||!p)return null;const {startTimeField:u,endTimeField:r}=p;if(!u&&!r)return null;const {start:H,end:da}=K;return null===H&&null===da?null:void 0===H&&void 0===da?M():u&&r?e(h,u,r,H,da):Z(h,u||r,H,da)};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/graphics/data/QueryEngineResult":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ../../../geometry/support/quantizationUtils ./projectionSupport ./attributeSupport ./AttributesBuilder ./utils ./timeSupport".split(" "),
function(n,e,Z,M,p,K,h,u,r,H){function da(C){return C.substr(24,12)+C.substr(19,4)+C.substr(16,2)+C.substr(14,2)+C.substr(11,2)+C.substr(9,2)+C.substr(6,2)+C.substr(4,2)+C.substr(2,2)+C.substr(0,2)}function fa(C,d,m,v){if(m&&"esriFieldTypeDate"===m.type){const t=(new Date(C)).getTime(),q=(new Date(d)).getTime();if(!isNaN(t)&&!isNaN(q))return v?q-t:t-q}return"number"===typeof C&&"number"===typeof d?v?d-C:C-d:"string"===typeof C&&"string"===typeof d?(C=C.toUpperCase(),d=d.toUpperCase(),!m||"esriFieldTypeGUID"!==
m.type&&"esriFieldTypeGlobalID"!==m.type?v=(v?C>d:C<d)?-1:(v?C<d:C>d)?1:0:(m=da(C),d=da(d),v=(v?m>d:m<d)?-1:(v?m<d:m>d)?1:0),v):v?1:-1}function F(C,d,m,v,t,q){t-=m;q-=v;C=Math.min(1,Math.max(0,((C-m)*t+(d-v)*q)/(t*t+q*q)));return{x:m+t*C,y:v+q*C}}function w(C,d){return C?d?4:3:d?3:2}return function(){function C(m,v,t){this.items=m;this.queryGeometry=v;this.definitionExpression=t.definitionExpression;this.geometryType=t.geometryType;this.hasM=t.hasM;this.hasZ=t.hasZ;this.objectIdField=t.objectIdField;
this.spatialReference=t.spatialReference;this.fieldsIndex=t.fieldsIndex;this.timeInfo=t.timeInfo;this.featureAdapter=t.featureAdapter;this.aggregateAdapter=t.aggregateAdapter}var d=C.prototype;d.createQueryResponseForCount=function(m){const v=new u(m,this.featureAdapter,this.fieldsIndex);if(!m.outStatistics)return v.countDistinctValues(this.items);const {groupByFieldsForStatistics:t,having:q}=m;if(null==t||!t.length)return 1;const A=new Map,N=new Map,aa=new Set;m=m.outStatistics;for(const U of m){({statisticType:m}=
U);m="exceedslimit"!==m?U.onStatisticField:void 0;if(!N.has(m)){var ja=[];for(const G of t){const D=this._getAttributeValues(v,G,A);ja.push(D)}N.set(m,this._calculateUniqueValues(ja))}m=N.get(m);for(const G in m){const {data:D,items:J}=m[G];ja=D.join(",");q&&!v.validateItems(J,q)||aa.add(ja)}}return aa.size};d.createQueryResponse=function(m){let v;v=m.outStatistics?m.outStatistics.some(t=>"exceedslimit"===t.statisticType)?this._createExceedsLimitQueryResponse(m):this._createStatisticsQueryResponse(m):
this._createFeatureQueryResponse(m);m.returnQueryGeometry&&(Z.isValid(m.outSR)&&!Z.equals(this.queryGeometry.spatialReference,m.outSR)?v.queryGeometry=r.cleanFromGeometryEngine({spatialReference:m.outSR,...K.project(this.queryGeometry,this.queryGeometry.spatialReference,m.outSR)}):v.queryGeometry=r.cleanFromGeometryEngine({spatialReference:m.outSR,...this.queryGeometry}));return v};d.createSnappingResponse=function(m,v){const t=this.featureAdapter,q=w(this.hasZ,this.hasM),{x:A,y:N}=m.point,aa="number"===
typeof m.distance?m.distance:m.distance.x,ja="number"===typeof m.distance?m.distance:m.distance.y,U={candidates:[]},G="esriGeometryPolygon"===this.geometryType;v=this.getPointCreator(m.point,this.spatialReference,v);for(const T of this.items){var D=t.getGeometry(T);if(!D)continue;const {coords:L,lengths:ia}=D;if(m.types&1){D=0;for(var J=0;J<ia.length;J++){var O=ia[J];for(var R=0;R<O;R++,D+=q){var z=L[D],l=L[D+1];if(R!==O-1){const pa=L[D+q],qa=L[D+q+1],{x:wa,y:Ca}=F(A,N,z,l,pa,qa);var I=(A-wa)/aa;
const ha=(N-Ca)/ja;I=I*I+ha*ha;1>=I&&U.candidates.push({type:"edge",objectId:t.getObjectId(T),distance:Math.sqrt(I),target:v(wa,Ca),start:v(z,l),end:v(pa,qa)})}}}}if(m.types&2)for(D=G?L.length-q:L.length,J=0;J<D;J+=q)O=L[J],R=L[J+1],z=(A-O)/aa,l=(N-R)/ja,z=z*z+l*l,1>=z&&U.candidates.push({type:"vertex",objectId:t.getObjectId(T),distance:Math.sqrt(z),target:v(O,R)})}U.candidates.sort((T,L)=>T.distance-L.distance);return U};d.getPointCreator=function(m,v,t){const q=e.isSome(t)&&!Z.equals(v,t)?A=>K.project(A,
v,t):A=>A;return null!=m.z&&null!=m.m?(A,N)=>q({x:A,y:N,z:m.z,m:m.m}):null!=m.z?(A,N)=>q({x:A,y:N,z:m.z}):null!=m.m?(A,N)=>q({x:A,y:N,m:m.m}):(A,N)=>q({x:A,y:N})};d.executeAttributesQuery=function(m){var v=h.getWhereClause(m.where,this.fieldsIndex);if(!v)return Promise.resolve(this);if(v.isStandardized){let t=0;const q=[];for(const A of this.items)v.testFeature(A,this.featureAdapter)&&(q[t++]=A);v=new C(q,this.queryGeometry,this);v.definitionExpression=m.where;return Promise.resolve(v)}return Promise.reject(new TypeError("Where clause is not standardized"))};
d.executeAggregateIdsQuery=function(m){if(!m.aggregateIds||!m.aggregateIds.length||e.isNone(this.aggregateAdapter))return Promise.resolve(this);const v=new Set;for(const q of m.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(q).forEach(A=>v.add(A));const t=this.featureAdapter.getObjectId;return Promise.resolve(new C(this.items.filter(q=>v.has(t(q))),this.queryGeometry,this))};d.executeObjectIdsQuery=function(m){if(!m.objectIds||!m.objectIds.length)return Promise.resolve(this);const v=new Set(m.objectIds),
t=this.featureAdapter.getObjectId;return Promise.resolve(new C(this.items.filter(q=>v.has(t(q))),this.queryGeometry,this))};d.executeTimeQuery=function(m){m=H.getTimeOperator(this.timeInfo,m.timeExtent,this.featureAdapter);if(!e.isSome(m))return Promise.resolve(this);m=this.items.filter(m);return Promise.resolve(new C(m,this.queryGeometry,this))};d.filterLatest=function(){const {trackIdField:m,startTimeField:v,endTimeField:t}=this.timeInfo;var q=t||v;const A=new Map,N=this.featureAdapter.getAttribute;
for(const aa of this.items){const ja=N(aa,m),U=N(aa,q),G=A.get(ja);(!G||U>N(G,q))&&A.set(ja,aa)}q=Array.from(A.values());return Promise.resolve(new C(q,this.queryGeometry,this))};d.project=async function(m){if(!m||Z.equals(this.spatialReference,m))return this;const v=this.featureAdapter,t=(await K.projectMany(this.items.map(q=>r.getGeometry(this.geometryType,this.hasZ,this.hasM,v.getGeometry(q))),this.spatialReference,m)).map((q,A)=>v.cloneWithGeometry(this.items[A],M.convertFromGeometry(q,this.hasZ,
this.hasM)));return new C(t,this.queryGeometry,{definitionExpression:this.definitionExpression,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,objectIdField:this.objectIdField,spatialReference:m,fieldsIndex:this.fieldsIndex,timeInfo:this.timeInfo,featureAdapter:this.featureAdapter})};d._sortFeatures=function(m,v,t){if(1<m.length&&v&&v.length)for(const q of v.reverse()){v=q.split(" ");const A=v[0],N=this.fieldsIndex.get(A),aa=v[1]&&"desc"===v[1].toLowerCase();m.sort((ja,U)=>{ja=t(ja,A,
N);U=t(U,A,N);return fa(ja,U,N,aa)})}};d._createFeatureQueryResponse=function(m){const v=this.items,{geometryType:t,hasM:q,hasZ:A,objectIdField:N,spatialReference:aa}=this,{outFields:ja,outSR:U,quantizationParameters:G,resultRecordCount:D,resultOffset:J,returnZ:O,returnM:R}=m,z=null!=D?v.length>(J||0)+D:!1,l=ja&&(-1<ja.indexOf("*")?[...this.fieldsIndex.fields]:ja.map(I=>this.fieldsIndex.get(I)));return{exceededTransferLimit:z,features:this._createFeatures(m,v),fields:l,geometryType:t,hasM:q&&R,hasZ:A&&
O,objectIdFieldName:N,spatialReference:r.cleanFromGeometryEngine(U?U:aa),transform:G&&p.toQuantizationTransform(G)||null}};d._createFeatures=function(m,v){const t=new u(m,this.featureAdapter,this.fieldsIndex),{hasM:q,hasZ:A}=this,{orderByFields:N,quantizationParameters:aa,returnGeometry:ja,returnCentroid:U,maxAllowableOffset:G,resultOffset:D,resultRecordCount:J,returnZ:O=!1,returnM:R=!1}=m,z=A&&O,l=q&&R;m=[];var I=0;v=[...v];this._sortFeatures(v,N,(ia,pa,qa)=>t.getFieldValue(ia,pa,qa));if(ja||U){var T=
p.toQuantizationTransform(aa);if(ja&&!U)for(var L of v)m[I++]={attributes:t.getAttributes(L),geometry:r.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(L),G,T,z,l)};else if(!ja&&U)for(const ia of v)m[I++]={attributes:t.getAttributes(ia),centroid:r.transformCentroid(this,this.featureAdapter.getCentroid(ia,this),T)};else for(const ia of v)m[I++]={attributes:t.getAttributes(ia),centroid:r.transformCentroid(this,this.featureAdapter.getCentroid(ia,this),T),geometry:r.getGeometry(this.geometryType,
this.hasZ,this.hasM,this.featureAdapter.getGeometry(ia),G,T,z,l)}}else for(T of v)(L=t.getAttributes(T))&&(m[I++]={attributes:L});I=D||0;null!=J&&(m=m.slice(I,Math.min(m.length,I+J)));return m};d._createExceedsLimitQueryResponse=function(m){var v=!1;let t=Number.POSITIVE_INFINITY,q=Number.POSITIVE_INFINITY;v=Number.POSITIVE_INFINITY;for(const A of m.outStatistics)if("exceedslimit"===A.statisticType){t=null!=A.maxPointCount?A.maxPointCount:Number.POSITIVE_INFINITY;q=null!=A.maxRecordCount?A.maxRecordCount:
Number.POSITIVE_INFINITY;v=null!=A.maxVertexCount?A.maxVertexCount:Number.POSITIVE_INFINITY;break}if("esriGeometryPoint"===this.geometryType)v=this.items.length>t;else if(this.items.length>q)v=!0;else{m=this.hasZ?this.hasM?4:3:this.hasM?3:2;const A=this.featureAdapter;v=this.items.reduce((N,aa)=>{aa=A.getGeometry(aa);return N+(aa&&aa.coords.length||0)},0)/m>v}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],
features:[{attributes:{exceedslimit:Number(v)}}]}};d._createStatisticsQueryResponse=function(m){var v={attributes:{}};const t=[],q=new Map,A=new Map,N=new Map,aa=new Map,ja=new u(m,this.featureAdapter,this.fieldsIndex);var U=m.outStatistics;const {groupByFieldsForStatistics:G,having:D,orderByFields:J}=m;m=G&&G.length;const O=!!m,R=O&&G[0],z=O&&!this.fieldsIndex.get(R);for(const ia of U){const {outStatisticFieldName:pa,statisticType:qa}=ia;U=ia;var l="exceedslimit"!==qa?ia.onStatisticField:void 0;
const wa="percentile_disc"===qa||"percentile_cont"===qa,Ca=O&&1===m&&(l===R||z)&&"count"===qa;if(O){if(!N.has(l)){var I=[];for(const ha of G){var T=this._getAttributeValues(ja,ha,q);I.push(T)}N.set(l,this._calculateUniqueValues(I,ja.returnDistinctValues))}I=N.get(l);for(const ha in I){const {count:y,data:S,items:ma,itemPositions:ya}=I[ha];T=S.join(",");if(!D||ja.validateItems(ma,D)){const za=aa.get(T)||{attributes:{}};var L=null;if(Ca)L=y;else{const b=this._getAttributeValues(ja,l,q);L=ya.map(f=>
b[f]);L=wa&&"statisticParameters"in U?this._getPercentileValue(U,L):this._getStatisticValue(U,L)}za.attributes[pa]=L;G.forEach((b,f)=>za.attributes[this.fieldsIndex.get(b)?b:`EXPR_${f+1}`]=S[f]);aa.set(T,za)}}}else l=this._getAttributeValues(ja,l,q),v.attributes[pa]=wa&&"statisticParameters"in U?this._getPercentileValue(U,l):this._getStatisticValue(U,l,A);t.push({name:pa,alias:pa,type:"esriFieldTypeDouble"})}v=O?Array.from(aa.values()):[v];this._sortFeatures(v,J,(ia,pa)=>ia.attributes[pa]);return{fields:t,
features:v}};d._getStatisticValue=function(m,v,t){const {onStatisticField:q,statisticType:A}=m;m=t&&t.has(q)?t.get(q):this._calculateStatistics(v);t&&t.set(q,m);return m["var"===A?"variance":A]};d._getPercentileValue=function(m,v){const {onStatisticField:t,statisticParameters:q,statisticType:A}=m,{value:N,orderBy:aa}=q,ja="desc"===aa,U=this.fieldsIndex.get(t);m=[...v].filter(G=>null!=G).sort((G,D)=>fa(G,D,U,ja));return this._calculatePercentile(m,N,"percentile_disc"===A)};d._getAttributeValues=function(m,
v,t){if(t.has(v))return t.get(v);const q=this.fieldsIndex.get(v),A=this.items.map(N=>m.getFieldValue(N,v,q));t.set(v,A);return A};d._calculateStatistics=function(m){let v=Number.POSITIVE_INFINITY,t=Number.NEGATIVE_INFINITY,q=null,A=null,N=null,aa=null;const ja=[];let U=0;for(const G of m)"string"===typeof G?U++:null==G||isNaN(G)||(q+=G,v=Math.min(v,G),t=Math.max(t,G),ja.push(G),U++);if(U){A=q/U;m=0;for(const G of ja)m+=(G-A)**2;aa=1<U?m/(U-1):0;N=Math.sqrt(aa)}else t=v=null;return{avg:A,count:U,max:t,
min:v,stddev:N,sum:q,variance:aa}};d._calculateUniqueValues=function(m,v){const t={},q=this.items,A=q.length;for(let N=0;N<A;N++){const aa=q[N],ja=[];for(const G of m)ja.push(G[N]);const U=ja.join(",");v?null==t[U]&&(t[U]={count:1,data:ja,items:[aa],itemPositions:[N]}):null==t[U]?t[U]={count:1,data:ja,items:[aa],itemPositions:[N]}:(t[U].count++,t[U].items.push(aa),t[U].itemPositions.push(N))}return t};d._calculatePercentile=function(m,v,t){if(0===m.length)return null;if(0>=v)return m[0];if(1<=v)return m[m.length-
1];var q=(m.length-1)*v,A=Math.floor(q);v=A+1;q%=1;A=m[A];const N=m[v];return v>=m.length||t||"string"===typeof A||"string"===typeof N?A:A*(1-q)+N*q};n._createClass(C,[{key:"size",get:function(){return this.items.length}}]);return C}()})},"esri/geometry/support/quantizationUtils":function(){define(["exports","./jsonUtils"],function(n,e){function Z({scale:G,translate:D},J){return Math.round((J-D[0])/G[0])}function M({scale:G,translate:D},J){return Math.round((D[1]-J)/G[1])}function p(G,D,J){const O=
[];let R,z,l,I;for(let T=0;T<J.length;T++){const L=J[T];if(0<T){if(l=Z(G,L[0]),I=M(G,L[1]),l!==R||I!==z)O.push(D(L,l-R,I-z)),R=l,z=I}else R=Z(G,L[0]),z=M(G,L[1]),O.push(D(L,R,z))}return 0<O.length?O:null}function K(G,D,J,O){return p(G,J?O?U:ja:O?ja:aa,D)}function h(G,D,J,O){const R=[];J=J?O?U:ja:O?ja:aa;for(O=0;O<D.length;O++){const z=p(G,J,D[O]);z&&3<=z.length&&R.push(z)}return R.length?R:null}function u(G,D,J,O){const R=[];J=J?O?U:ja:O?ja:aa;for(O=0;O<D.length;O++){const z=p(G,J,D[O]);z&&2<=z.length&&
R.push(z)}return R.length?R:null}function r({scale:G,translate:D},J){return J*G[0]+D[0]}function H({scale:G,translate:D},J){return D[1]-J*G[1]}function da(G,D,J){const O=Array(J.length);if(!J.length)return O;const [R,z]=G.scale;let l=r(G,J[0][0]);G=H(G,J[0][1]);O[0]=D(J[0],l,G);for(let I=1;I<J.length;I++){const T=J[I];l+=T[0]*R;G-=T[1]*z;O[I]=D(T,l,G)}return O}function fa(G,D,J){const O=Array(J.length);for(let R=0;R<J.length;R++)O[R]=da(G,D,J[R]);return O}function F(G,D,J,O){return da(G,J?O?U:ja:
O?ja:aa,D)}function w(G,D,J,O){return fa(G,J?O?U:ja:O?ja:aa,D)}function C(G,D,J,O){return fa(G,J?O?U:ja:O?ja:aa,D)}function d(G,D,J){let [O,R]=J[0],z=Math.min(O,D[0]),l=Math.min(R,D[1]),I=Math.max(O,D[2]);D=Math.max(R,D[3]);for(let T=1;T<J.length;T++){const [L,ia]=J[T];O+=L;R+=ia;0>L&&(z=Math.min(z,O));0<L&&(I=Math.max(I,O));0>ia?l=Math.min(l,R):0<ia&&(D=Math.max(D,R))}G[0]=z;G[1]=l;G[2]=I;G[3]=D;return G}function m(G,D){if(!D.length)return null;G[0]=G[1]=Number.POSITIVE_INFINITY;G[2]=G[3]=Number.NEGATIVE_INFINITY;
for(let J=0;J<D.length;J++)d(G,G,D[J]);return G}function v(G,D,J,O,R){D.xmin=Z(G,J.xmin);D.ymin=M(G,J.ymin);D.xmax=Z(G,J.xmax);D.ymax=M(G,J.ymax);D!==J&&(O&&(D.zmin=J.zmin,D.zmax=J.zmax),R&&(D.mmin=J.mmin,D.mmax=J.mmax));return D}function t(G,D,J,O,R){D.points=K(G,J.points,O,R);return D}function q(G,D,J,O,R){D.x=Z(G,J.x);D.y=M(G,J.y);D!==J&&(O&&(D.z=J.z),R&&(D.m=J.m));return D}function A(G,D,J,O,R){G=h(G,J.rings,O,R);if(!G)return null;D.rings=G;return D}function N(G,D,J,O,R){G=u(G,J.paths,O,R);if(!G)return null;
D.paths=G;return D}const aa=(G,D,J)=>[D,J],ja=(G,D,J)=>[D,J,G[2]],U=(G,D,J)=>[D,J,G[2],G[3]];n.equals=function(G,D){if(G===D||null==G&&null==D)return!0;if(null==G||null==D)return!1;let J,O,R,z;G&&"upperLeft"===G.originPosition?(J=G.translate[0],O=G.translate[1],G=G.scale[0]):(J=G.extent.xmin,O=G.extent.ymax,G=G.tolerance);D&&"upperLeft"===D.originPosition?(R=D.translate[0],z=D.translate[1],D=D.scale[0]):(R=D.extent.xmin,z=D.extent.ymax,D=D.tolerance);return J===R&&O===z&&G===D};n.getQuantizedBoundsCoordsArray=
d;n.getQuantizedBoundsCoordsArrayArray=m;n.getQuantizedBoundsPaths=function(G){return m([0,0,0,0],G)};n.getQuantizedBoundsPoints=function(G){const D=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return d(D,D,G)};n.getQuantizedBoundsRings=function(G){return m([0,0,0,0],G)};n.quantizeBounds=function(G,D,J){D[0]=Z(G,J[0]);D[3]=M(G,J[1]);D[2]=Z(G,J[2]);D[1]=M(G,J[3]);return D};n.quantizeExtent=v;n.quantizeGeometry=function(G,D){return G&&D?e.isPoint(D)?
q(G,{},D,!1,!1):e.isPolyline(D)?N(G,{},D,!1,!1):e.isPolygon(D)?A(G,{},D,!1,!1):e.isMultipoint(D)?t(G,{},D,!1,!1):e.isExtent(D)?v(G,{},D,!1,!1):null:null};n.quantizeMultipoint=t;n.quantizePaths=u;n.quantizePoint=q;n.quantizePoints=K;n.quantizePolygon=A;n.quantizePolyline=N;n.quantizeRings=h;n.quantizeX=Z;n.quantizeY=M;n.toQuantizationTransform=function(G){return G?{originPosition:"upper-left"===G.originPosition?"upperLeft":"lower-left"===G.originPosition?"lowerLeft":G.originPosition,scale:G.tolerance?
[G.tolerance,G.tolerance]:[1,1],translate:G.extent?[G.extent.xmin,G.extent.ymax]:[0,0]}:null};n.unquantizeBounds=function(G,D,J){return J?(D[0]=r(G,J[0]),D[1]=H(G,J[3]),D[2]=r(G,J[2]),D[3]=H(G,J[1]),D):[r(G,D[0]),H(G,D[3]),r(G,D[2]),H(G,D[1])]};n.unquantizeCoordsArray=da;n.unquantizeCoordsArrayArray=fa;n.unquantizeExtent=function(G,D,J,O,R){D.xmin=r(G,J.xmin);D.ymin=H(G,J.ymin);D.xmax=r(G,J.xmax);D.ymax=H(G,J.ymax);D!==J&&(O&&(D.zmin=J.zmin,D.zmax=J.zmax),R&&(D.mmin=J.mmin,D.mmax=J.mmax));return D};
n.unquantizeMultipoint=function(G,D,J,O,R){D.points=F(G,J.points,O,R);return D};n.unquantizePaths=w;n.unquantizePoint=function(G,D,J,O,R){D.x=r(G,J.x);D.y=H(G,J.y);D!==J&&(O&&(D.z=J.z),R&&(D.m=J.m));return D};n.unquantizePoints=F;n.unquantizePolygon=function(G,D,J,O,R){D.rings=C(G,J.rings,O,R);return D};n.unquantizePolyline=function(G,D,J,O,R){D.paths=w(G,J.paths,O,R);return D};n.unquantizeRings=C;n.unquantizeX=r;n.unquantizeY=H;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/graphics/data/AttributesBuilder":function(){define(["../../../core/maybe",
"./attributeSupport"],function(n,e){return function(){function Z(p,K,h){this._fieldDataCache=new Map;this._returnDistinctMap=new Map;this.returnDistinctValues=p.returnDistinctValues;this.fieldsIndex=h;this.featureAdapter=K;if((K=p.outFields)&&-1===K.indexOf("*")){this.outFields=K;p=0;for(const r of K){var u=e.getExpressionFromFieldName(r);u=(K=this.fieldsIndex.get(u))?null:e.getWhereClause(u,h);K=K?K.name:e.getAliasFromFieldName(r)||`FIELD_EXP_${p++}`;this._fieldDataCache.set(r,{alias:K,clause:u})}}}
var M=Z.prototype;M.countDistinctValues=function(p){if(!this.returnDistinctValues)return p.length;p.forEach(K=>this.getAttributes(K));return this._returnDistinctMap.size};M.getAttributes=function(p){p=this._processAttributesForOutFields(p);return this._processAttributesForDistinctValues(p)};M.getFieldValue=function(p,K,h){const u=h?h.name:K;let r=null;this._fieldDataCache.has(u)?r=this._fieldDataCache.get(u).clause:h||(r=e.getWhereClause(K,this.fieldsIndex),this._fieldDataCache.set(u,{alias:u,clause:r}));
return h?this.featureAdapter.getAttribute(p,u):r.calculateValue(p,this.featureAdapter)};M.validateItem=function(p,K){this._fieldDataCache.has(K)||this._fieldDataCache.set(K,{alias:K,clause:e.getWhereClause(K,this.fieldsIndex)});return this._fieldDataCache.get(K).clause.testFeature(p,this.featureAdapter)};M.validateItems=function(p,K){this._fieldDataCache.has(K)||this._fieldDataCache.set(K,{alias:K,clause:e.getWhereClause(K,this.fieldsIndex)});return this._fieldDataCache.get(K).clause.testSet(p,this.featureAdapter)};
M._processAttributesForOutFields=function(p){const K=this.outFields;if(!K||!K.length)return this.featureAdapter.getAttributes(p);const h={};for(const u of K){const {alias:r,clause:H}=this._fieldDataCache.get(u);h[r]=H?H.calculateValue(p,this.featureAdapter):this.featureAdapter.getAttribute(p,r)}return h};M._processAttributesForDistinctValues=function(p){if(n.isNone(p)||!this.returnDistinctValues)return p;var K=this.outFields,h=[];if(K)for(const r of K){var {alias:u}=this._fieldDataCache.get(r);h.push(p[u])}else for(u in p)h.push(p[u]);
K=`${(K||["*"]).join(",")}=${h.join(",")}`;h=this._returnDistinctMap.get(K)||0;this._returnDistinctMap.set(K,++h);return 1<h?null:p};return Z}()})},"esri/layers/graphics/sources/support/sourceUtils":function(){define(["require","exports","../../../../geometry/support/spatialReferenceUtils","../../../support/fieldUtils"],function(n,e,Z,M){function p(fa){return new u(fa)}async function K(){return da?da:da=await new Promise(function(fa,F){n(["../../../../geometry/geometryEngineJSON"],fa,F)})}let h=function(){this.description=
this.code=null},u=function(fa){this.error=new h;this.objectId=this.globalId=null;this.success=!1;this.uniqueId=null;this.error.description=fa},r=function(fa){this.globalId=null;this.success=!0;this.objectId=this.uniqueId=fa};const H=new Set;let da;e.createFeatureEditErrorResult=p;e.createFeatureEditSuccessResult=function(fa){return new r(fa)};e.loadGeometryEngine=K;e.loadGeometryEngineForSimplify=async function(fa,F){!Z.isValid(fa)||"esriGeometryPolygon"!==F&&"esriGeometryPolyline"!==F||await K()};
e.mixAttributes=function(fa,F,w,C,d=!1,m){H.clear();for(const A in C){const N=fa.get(A);if(N){var v=C[A];{var t=N;var q=v;let aa=q;"string"===typeof q&&M.isNumericField(t)?aa=parseFloat(q):null!=q&&M.isStringField(t)&&"string"!==typeof q&&(aa=String(q));t=M.sanitizeNullFieldValue(aa)}t!==v&&m&&m.push({name:"invalid-value-type",message:"attribute value was converted to match the field type",details:{field:N,originalValue:v,sanitizedValue:t}});H.add(N.name);if(N&&(d||N.editable)){if(v=M.validateFieldValue(N,
t))return p(M.validationErrorToString(v,N,t));w[N.name]=t}}}for(const A of F)if(!H.has(A.name))return p(`missing required field "${A.name}"`);return null};e.simplify=function(fa,F){if(!fa||!Z.isValid(F))return fa;if("rings"in fa||"paths"in fa){if(!da)throw new TypeError("geometry engine not loaded");return da.simplify(F,fa)}return fa};Object.defineProperty(e,"__esModule",{value:!0})})},"*noref":1}});
define("../../../../core/Error ../../../../geometry/support/spatialReferenceUtils ../../../../geometry/support/jsonUtils ../../../support/fieldUtils ../../../../request ../../../support/fieldType ../../featureConversionUtils ../../../support/FieldsIndex ./geojson ../support/clientSideDefaults ../../data/projectionSupport ../../data/FeatureStore ../../data/QueryEngine ../support/sourceUtils".split(" "),function(n,e,Z,M,p,K,h,u,r,H,da,fa,F,w){const C={hasAttachments:!1,capabilities:"query, editing, create, delete, update",
useStandardizedQueries:!0,supportsCoordinatesQuantization:!0,supportsReturningQueryGeometry:!0,advancedQueryCapabilities:{supportsQueryAttachments:!1,supportsStatistics:!0,supportsPercentileStatistics:!0,supportsReturningGeometryCentroid:!0,supportsQueryWithDistance:!0,supportsDistinct:!0,supportsReturningQueryExtent:!0,supportsReturningGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQueryWithResultType:!1,supportsSqlExpression:!0,supportsDisjointSpatialRel:!0}};
return function(){function d(){this._queryEngine=null}var m=d.prototype;m.destroy=function(){this._queryEngine&&this._queryEngine&&this._queryEngine.destroy();this._queryEngine=this._requiredFields=this._fieldsIndex=this._createDefaultAttributes=null};m.load=async function(v){var t=[];await this._checkProjection(v.spatialReference);var q=null;v.url&&(q=(await p(v.url,{responseType:"json"})).data,await r.validateGeoJSON(q));const A=r.inferLayerProperties(q,{geometryType:v.geometryType}),N=v.fields||
A.fields||[],aa=null!=v.hasZ?v.hasZ:A.hasZ,ja=A.geometryType,U=v.objectIdField||("number"===A.objectIdFieldType?A.objectIdFieldName:"OBJECTID")||"OBJECTID",G=v.spatialReference||e.WGS84;v=v.timeInfo;if(!ja)throw new n("geojson-layer:missing-property","geometryType not set and couldn't be inferred from the provided features");"string"===A.objectIdFieldType&&t.push({name:"geojson-layer:unsupported-id-type",message:"Feature ids are of type string and can't be honored."});N===A.fields&&0<A.unknownFields.length&&
t.push({name:"geojson-layer:unknown-field-types",message:"Some fields types couldn't be inferred from the features and were dropped",details:{unknownFields:A.unknownFields}});if(U){let O=null;N.some(R=>R.name===U?(O=R,!0):!1)?(O.type="esriFieldTypeOID",O.editable=!1,O.nullable=!1):N.unshift({alias:U,name:U,type:"esriFieldTypeOID",editable:!1,nullable:!1})}for(var D of N){null==D.name&&(D.name=D.alias);null==D.alias&&(D.alias=D.name);if(!D.name)throw new n("geojson-layer:invalid-field-name","field name is missing",
{field:D});D.name===U&&(D.type="esriFieldTypeOID");if(-1===K.kebabDict.jsonValues.indexOf(D.type))throw new n("geojson-layer:invalid-field-type",`invalid type for field "${D.name}"`,{field:D});}D={};this._requiredFields=[];for(var J of N)if("esriFieldTypeOID"!==J.type&&"esriFieldTypeGlobalID"!==J.type){J.editable=null==J.editable?!0:!!J.editable;J.nullable=null==J.nullable?!0:!!J.nullable;const O=M.getFieldDefaultValue(J);J.nullable||void 0!==O?D[J.name]=O:this._requiredFields.push(J)}this._fieldsIndex=
new u(N);v&&(v.startTimeField&&((J=this._fieldsIndex.get(v.startTimeField))?(v.startTimeField=J.name,J.type="esriFieldTypeDate"):v.startTimeField=null),v.endTimeField&&((J=this._fieldsIndex.get(v.endTimeField))?(v.endTimeField=J.name,J.type="esriFieldTypeDate"):v.endTimeField=null),v.trackIdField&&((J=this._fieldsIndex.get(v.trackIdField))?v.trackIdField=J.name:(v.trackIdField=null,t.push({name:"geojson-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:v}}))),
v.startTimeField||v.endTimeField||(t.push({name:"geojson-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing",details:{timeInfo:v}}),v=null));t={warnings:t,featureErrors:[],layerDefinition:{...C,drawingInfo:H.createDrawingInfo(ja),templates:H.createDefaultTemplate(D),extent:null,geometryType:ja,objectIdField:U,fields:N,hasZ:!!aa,timeInfo:v}};this._queryEngine=new F["default"]({fields:N,geometryType:ja,hasM:!1,hasZ:aa,objectIdField:U,spatialReference:G,timeInfo:v,featureStore:new fa({geometryType:ja,
hasM:!1,hasZ:aa}),cacheSpatialQueries:!0});this._createDefaultAttributes=H.createDefaultAttributesFunction(D,U);this._nextObjectId=A.maxObjectId+1;q=r.createOptimizedFeatures(q,{geometryType:ja,hasZ:aa,objectIdFieldName:"number"===A.objectIdFieldType?U:null});if(!e.equals(G,e.WGS84))for(const O of q)O.geometry&&(O.geometry=h.convertFromGeometry(da.project(h.convertToGeometry(O.geometry,ja,aa,!1),e.WGS84,G)));this._loadInitialFeatures(t,q);return t};m.applyEdits=async function(v){const {spatialReference:t,
geometryType:q}=this._queryEngine;await Promise.all([w.loadGeometryEngineForSimplify(t,q),da.checkProjectionSupport(v.adds,t),da.checkProjectionSupport(v.updates,t)]);return this._applyEdits(v)};m.queryFeatures=function(v={},t={}){return this._queryEngine.executeQuery(v,t.signal)};m.queryFeatureCount=function(v={},t={}){return this._queryEngine.executeQueryForCount(v,t.signal)};m.queryObjectIds=function(v={},t={}){return this._queryEngine.executeQueryForIds(v,t.signal)};m.queryExtent=function(v={},
t={}){return this._queryEngine.executeQueryForExtent(v,t.signal)};m.querySnapping=function(v,t={}){return this._queryEngine.executeQueryForSnapping(v,t.signal)};m._loadInitialFeatures=function(v,t){const {featureStore:q,objectIdField:A}=this._queryEngine,N=[];for(const aa of t){t=this._createDefaultAttributes();const ja=w.mixAttributes(this._fieldsIndex,this._requiredFields,t,aa.attributes,!0,v.warnings);ja?v.featureErrors.push(ja):(this._assignObjectId(t,aa.attributes,!0),aa.attributes=t,aa.objectId=
t[A],N.push(aa))}q.addMany(N);v.layerDefinition.extent=this._queryEngine.fullExtent;if(v.layerDefinition.timeInfo){const {start:aa,end:ja}=this._queryEngine.timeExtent;v.layerDefinition.timeInfo.timeExtent=[aa,ja]}return v};m._applyEdits=function(v){const {adds:t,updates:q,deletes:A}=v;v={addResults:[],deleteResults:[],updateResults:[],uidToObjectId:{}};t&&t.length&&this._applyAddEdits(v,t);q&&q.length&&this._applyUpdateEdits(v,q);if(A&&A.length){for(const N of A)v.deleteResults.push(w.createFeatureEditSuccessResult(N));
this._queryEngine.featureStore.removeManyById(A)}return{fullExtent:this._queryEngine.fullExtent,timeExtent:this._queryEngine.timeExtent,featureEditResults:v}};m._applyAddEdits=function(v,t){const {addResults:q}=v,{geometryType:A,hasM:N,hasZ:aa,objectIdField:ja,spatialReference:U,featureStore:G}=this._queryEngine,D=[];for(const J of t){if(J.geometry&&A!==Z.getJsonType(J.geometry)){q.push(w.createFeatureEditErrorResult("Incorrect geometry type."));continue}t=this._createDefaultAttributes();const O=
w.mixAttributes(this._fieldsIndex,this._requiredFields,t,J.attributes);O?q.push(O):(this._assignObjectId(t,J.attributes),J.attributes=t,null!=J.uid&&(v.uidToObjectId[J.uid]=J.attributes[ja]),J.geometry&&(J.geometry=da.project(w.simplify(J.geometry,U),J.geometry.spatialReference,U)),D.push(J),q.push(w.createFeatureEditSuccessResult(J.attributes[ja])))}G.addMany(h.convertFromFeatures([],D,A,aa,N,ja))};m._applyUpdateEdits=function({updateResults:v},t){const {geometryType:q,hasM:A,hasZ:N,objectIdField:aa,
spatialReference:ja,featureStore:U}=this._queryEngine;for(const G of t){const {attributes:D,geometry:J}=G;t=D&&D[aa];if(null==t){v.push(w.createFeatureEditErrorResult(`Identifier field ${aa} missing`));continue}if(!U.has(t)){v.push(w.createFeatureEditErrorResult(`Feature with object id ${t} missing`));continue}const O=h.convertToFeature(U.getFeature(t),q,N,A);if(J){if(q!==Z.getJsonType(J)){v.push(w.createFeatureEditErrorResult("Incorrect geometry type."));continue}O.geometry=da.project(w.simplify(J,
ja),J.spatialReference,ja)}if(D){const R=w.mixAttributes(this._fieldsIndex,this._requiredFields,O.attributes,D);if(R){v.push(R);continue}}U.add(h.convertFromFeature(O,q,N,A,aa));v.push(w.createFeatureEditSuccessResult(t))}};m._assignObjectId=function(v,t,q=!1){const A=this._queryEngine.objectIdField;q?isFinite(t[A])?v[A]=t[A]:v[A]=this._nextObjectId++:v[A]=this._nextObjectId++};m._checkProjection=async function(v){try{await da.checkProjectionSupport(e.WGS84,v)}catch{throw new n("geojson-layer","Projection not supported");
}};return d}()});