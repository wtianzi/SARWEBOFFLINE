// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.19/esri/copyright.txt for details.
//>>built
require({cache:{"esri/request":function(){define("require ./core/global ./core/has ./core/lang ./config ./core/maybe ./core/Error ./core/urlUtils ./core/promiseUtils ./kernel ./support/apiKeyUtils ./support/requestUtils".split(" "),function(n,m,da,O,p,I,k,y,u,D,fa,R){async function v(z,V){var oa=y.isDataProtocol(z);const ma=y.isBlobProtocol(z);ma||oa||(z=y.normalize(z));const va={url:z,requestOptions:{...I.unwrap(V)}};let za=y.getInterceptor(z);if(za){z=await T(za,va);if(null!=z)return{data:z,getHeader:H,
requestOptions:va.requestOptions,url:va.url};za.after||za.error||(za=null)}z=va.url;V=va.requestOptions;if("image"===V.responseType){if(da("host-webworker")||da("host-node"))throw d("request:invalid-parameters",Error("responseType 'image' is not supported in Web Workers or Node environment"),va);}else if(oa)throw d("request:invalid-parameters",Error("Data URLs are not supported for responseType \x3d "+V.responseType),va);if("head"===V.method){if(V.body)throw d("request:invalid-parameters",Error("body parameter cannot be set when method is 'head'"),
va);if(oa||ma)throw d("request:invalid-parameters",Error("data and blob URLs are not supported for method 'head'"),va);}await l();if(M)return M.execute(z,V);const Da=u.createAbortController();u.onAbort(V,()=>Da.abort());oa=await Z({controller:Da,credential:null,credentialToken:null,fetchOptions:null,hasToken:!1,interceptor:za,params:va,redoRequest:!1,useIdentity:Q.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1});za&&za.after&&za.after(oa);return oa}function r(z){y.isBlobProtocol(z)||y.isDataProtocol(z)||
(z=y.getOrigin(z))&&-1===v._corsServers.indexOf(z)&&v._corsServers.push(z)}function t(z){z=y.getOrigin(z);return!z||z.endsWith(".arcgis.com")||-1!==v._corsServers.indexOf(z)||y.isTrustedServer(z)}function d(z,V,oa,ma){let va="Error";const za={url:oa.url,requestOptions:oa.requestOptions,getHeader:H,ssl:!1};if(V instanceof k)return V.details?(V.details=O.clone(V.details),V.details.url=oa.url,V.details.requestOptions=oa.requestOptions):V.details=za,V;if(V){oa=ma&&(ia=>ma.headers.get(ia));const Da=ma&&
ma.status,Y=V.message;Y&&(va=Y);oa&&(za.getHeader=oa);za.httpStatus=(null!=V.httpCode?V.httpCode:V.code)||Da||0;za.subCode=V.subcode;za.messageCode=V.messageCode;za.messages="string"===typeof V.details?[V.details]:V.details}return u.isAbortError(V)?u.createAbortError():new k(z,va,za)}async function l(){da("host-webworker")?M||(M=await new Promise(function(z,V){n(["./core/workers/request"],z,V)})):v._abortableFetch||(v._abortableFetch=m.fetch.bind(m))}async function E(){D.id||await new Promise(function(z,
V){n(["./identity/IdentityManager"],function(oa){z(Object.freeze({__proto__:null,"default":oa}))},V)})}async function K(z){const V=z.params.url,oa=z.params.requestOptions,ma=z.controller.signal,va=oa.body;let za=null,Da=null,Y=null;S&&"HTMLFormElement"in m&&(va instanceof FormData?za=va:va instanceof HTMLFormElement&&(Da=va,za=new FormData(Da)));"string"===typeof va&&(Y=va);z.fetchOptions={cache:oa.cacheBust&&!v._abortableFetch.polyfill?"no-cache":"default",credentials:"same-origin",headers:oa.headers||
{},method:"head"===oa.method?"HEAD":"GET",mode:"cors",redirect:"follow",signal:ma};if(za||Y)z.fetchOptions.body=za||Y;"anonymous"===oa.authMode&&(z.useIdentity=!1);z.hasToken=!!(/token=/i.test(V)||oa.query&&oa.query.token||za&&za.get&&za.get("token")||Da&&Da.elements.token);!z.hasToken&&p.apiKey&&fa.supportsApiKey(V)&&(oa.query||(oa.query={}),oa.query.token=p.apiKey,z.hasToken=!0);if(z.useIdentity&&!z.hasToken&&!z.credentialToken&&!C(V)&&!u.isAborted(ma)){let ia;"immediate"===oa.authMode?(await E(),
ia=await D.id.getCredential(V,{signal:ma}),z.credential=ia):"no-prompt"===oa.authMode?(await E(),ia=await D.id.getCredential(V,{prompt:!1,signal:ma}).catch(()=>{}),z.credential=ia):D.id&&(ia=D.id.findCredential(V));ia&&(z.credentialToken=ia.token,z.useSSL=!!ia.ssl)}}function C(z){return q.some(V=>V.test(z))}async function J(z){let V=z.params.url;const oa=z.params.requestOptions,ma=z.fetchOptions,va=y.isBlobProtocol(V)||y.isDataProtocol(V),za=oa.responseType||"json",Da=va?0:null!=oa.timeout?oa.timeout:
Q.timeout;var Y=!1;if(!va){z.useSSL&&(V=y.toHTTPS(V));oa.cacheBust&&"default"===ma.cache&&(V=y.addQueryParameter(V,"request.preventCache",Date.now()));var ia={...oa.query};z.credentialToken&&(ia.token=z.credentialToken);Y=y.objectToQuery(ia);da("esri-url-encodes-apostrophe")&&(Y=Y.replace(/'/g,"%27"));const e=V.length+1+Y.length;Y="delete"===oa.method||"post"===oa.method||"put"===oa.method||!!oa.body||e>Q.maxUrlLength;const P=oa.useProxy||!!y.getProxyRule(V);if(P){const f=y.getProxyUrl(V);var pa=
f.path;!Y&&pa.length+1+e>Q.maxUrlLength&&(Y=!0);f.query&&(ia={...f.query,...ia})}if("HEAD"===ma.method&&(Y||P)){if(Y){if(e>Q.maxUrlLength)throw d("request:invalid-parameters",Error("URL exceeds maximum length"),z.params);throw d("request:invalid-parameters",Error("cannot use POST request when method is 'head'"),z.params);}if(P)throw d("request:invalid-parameters",Error("cannot use proxy when method is 'head'"),z.params);}Y?(ma.method="delete"===oa.method?"DELETE":"put"===oa.method?"PUT":"POST",oa.body?
V=y.addQueryParameters(V,ia):(ma.body=y.objectToQuery(ia),ma.headers["Content-Type"]="application/x-www-form-urlencoded")):V=y.addQueryParameters(V,ia);P&&(z.useProxy=!0,V=`${pa}?${V}`);ia.token&&S&&ma.body instanceof FormData&&(pa=ma.body,pa.set?pa.set("token",ia.token):pa.append("token",ia.token));oa.hasOwnProperty("withCredentials")?z.withCredentials=oa.withCredentials:y.hasSameOrigin(V,y.appUrl)||(y.isTrustedServer(V)?z.withCredentials=!0:D.id&&(ia=D.id.findServerInfo(V))&&ia.webTierAuth&&(z.withCredentials=
!0));z.withCredentials&&(ma.credentials="include")}ia=0;let Aa=!1;0<Da&&(ia=setTimeout(()=>{Aa=!0;z.controller.abort()},Da));let wa,b;try{if("image"!==oa.responseType||"default"!==ma.cache||"GET"!==ma.method||Y||ea(oa.headers)||!va&&!z.useProxy&&Q.proxyUrl&&!t(V)){if(wa=await v._abortableFetch(V,ma),z.useProxy||r(V),wa.ok&&"HEAD"!==ma.method){switch(za){case "array-buffer":b=await wa.arrayBuffer();break;case "blob":case "image":b=await wa.blob();break;default:b=await wa.text()}ia&&(clearTimeout(ia),
ia=0);if("json"===za||"xml"===za||"document"===za)if(b)switch(za){case "json":b=JSON.parse(b);break;case "xml":b=ka(b,"application/xml");break;case "document":b=ka(b,"text/html")}else b=null;if(b){if("array-buffer"===za||"blob"===za){const e=wa.headers.get("Content-Type");if(/application\/json|text\/plain/i.test(e)&&750>=b["blob"===za?"size":"byteLength"])try{const P=await (new Response(b)).json();P.error&&(b=P)}catch{}}"image"===za&&b instanceof Blob&&(b=await G(URL.createObjectURL(b),z,!0))}}}else b=
await G(V,z)}catch(e){if("AbortError"===e.name){if(Aa)throw Error("Timeout exceeded");throw u.createAbortError("Request canceled");}if(!wa&&e instanceof TypeError&&Q.proxyUrl&&!oa.body&&"delete"!==oa.method&&"head"!==oa.method&&"post"!==oa.method&&"put"!==oa.method&&!z.useProxy)z.redoRequest=!0,y.addProxyRule({proxyUrl:Q.proxyUrl,urlPrefix:y.removeFile(y.urlToObject(V).path)});else throw e;}finally{ia&&clearTimeout(ia)}return[wa,b]}async function T(z,V){if(null!=z.responseData)return z.responseData;
z.headers&&(V.requestOptions.headers={...V.requestOptions.headers,...z.headers});z.query&&(V.requestOptions.query={...V.requestOptions.query,...z.query});if(z.before){let oa,ma;try{ma=await z.before(V)}catch(va){oa=d("request:interceptor",va,V)}if(ma instanceof Error||ma instanceof k)oa=d("request:interceptor",ma,V);if(oa)throw z.error&&z.error(oa),oa;return ma}}function ea(z){if(z)for(const V of Object.getOwnPropertyNames(z))if(z[V])return!0;return!1}function ka(z,V){let oa;try{oa=(new DOMParser).parseFromString(z,
V)}catch{}if(!oa||oa.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return oa}async function Z(z){await K(z);let V;try{do[V,oa]=await J(z);while(!await F(z,V,oa))}catch(za){var oa=d("request:server",za,z.params,V);oa.details.ssl=z.useSSL;z.interceptor&&z.interceptor.error&&z.interceptor.error(oa);throw oa;}var ma=z.params.url;/\/sharing\/rest\/(accounts|portals)\/self/i.test(ma)&&!z.hasToken&&!z.credentialToken&&oa&&oa.user&&oa.user.username&&!y.isTrustedServer(ma)&&
(ma=y.getOrigin(ma,!0))&&Q.trustedServers.push(ma);if((ma=z.credential)&&D.id){var va=D.id.findServerInfo(ma.server);if(va=va&&va.owningSystemUrl)va=va.replace(/\/?$/,"/sharing"),(ma=D.id.findCredential(va,ma.userId))&&-1===D.id._getIdenticalSvcIdx(va,ma)&&ma.resources.unshift(va)}return{data:oa,getHeader:V?za=>V.headers.get(za):H,requestOptions:z.params.requestOptions,ssl:z.useSSL,url:z.params.url}}async function F(z,V,oa){if(z.redoRequest)return z.redoRequest=!1;if(!V)return!0;if(!V.ok)throw Error(`Unable to load ${V.url} status: ${V.status}`);
let ma;oa&&oa.error&&(ma=Object.assign(Error(),oa.error));let va,za,Da;ma&&(va=Number(ma.code),za=ma.hasOwnProperty("subcode")?Number(ma.subcode):null,Da=(Da=ma.messageCode)&&Da.toUpperCase());V=z.params.requestOptions.authMode;if(403===va&&(4===za||ma.message&&-1<ma.message.toLowerCase().indexOf("ssl")&&-1===ma.message.toLowerCase().indexOf("permission"))){if(!z.useSSL)return z.useSSL=!0,!1}else if(!z.hasToken&&z.useIdentity&&("no-prompt"!==V||498===va)&&-1!==w.indexOf(va)&&!C(z.params.url)&&(403!==
va||-1===h.indexOf(Da)&&(null==za||2===za&&z.credentialToken))){await E();try{const Y=await D.id.getCredential(z.params.url,{error:d("request:server",ma,z.params),prompt:"no-prompt"!==V,signal:z.controller.signal,token:z.credentialToken});z.credential=Y;z.credentialToken=Y.token;z.useSSL=z.useSSL||Y.ssl;return!1}catch(Y){if("no-prompt"===V)return z.credential=null,z.credentialToken=null,!1;ma=Y}}if(ma)throw ma;return!0}function G(z,V,oa=!1){const ma=V.controller.signal,va=new Image;va.crossOrigin=
V.withCredentials?"use-credentials":"anonymous";va.alt="";va.src=z;return R.loadImageAsync(va,z,oa,ma)}let M;const Q=p.request,S="FormData"in m,w=[499,498,403,401],h=["COM_0056","COM_0057","SB_0008"],q=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],H=()=>null;v._abortableFetch=null;v._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"];return v})},"esri/support/apiKeyUtils":function(){define(["exports","../core/urlUtils"],function(n,m){const da=
["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"];n.isApiKey=function(O){return O&&4<O.length&&O.startsWith("AAPK")};n.supportsApiKey=function(O){const p=m.getOrigin(O,!0);return p&&p.endsWith(".arcgis.com")&&!da.includes(p)&&!O.endsWith("/sharing/rest/generateToken")};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/support/requestUtils":function(){define(["exports","../core/has","../core/maybe","../core/promiseUtils"],function(n,m,da,O){function p(){try{return new DOMException("Aborted",
"AbortError")}catch{const I=Error();I.name="AbortError";return I}}n.loadImageAsync=function(I,k,y=!1,u){return new Promise((D,fa)=>{if(O.isAborted(u))fa(p());else{var R=()=>{t();fa(Error(`Unable to load ${k}`))},v=()=>{const d=I;t();D(d)},r=()=>{if(I){var d=I;t();d.src="";fa(p())}},t=()=>{m("esri-image-decode")||(I.removeEventListener("error",R),I.removeEventListener("load",v));I=v=R=null;da.isSome(u)&&u.removeEventListener("abort",r);r=null;y&&URL.revokeObjectURL(k)};da.isSome(u)&&u.addEventListener("abort",
r);m("esri-image-decode")?I.decode().then(v,R):(I.addEventListener("error",R),I.addEventListener("load",v))}})};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/maybe ../core/Error ../core/promiseUtils ./support/spatialReferenceUtils ./support/Ellipsoid ./Point ./Extent ./Multipoint ./Polygon ./Polyline ../core/mathUtils ../chunks/vec3f64 ../chunks/vec3 ./projectionEllipsoid ../core/unitUtils ../chunks/mat4 ../chunks/pe ./support/aaBoundingRect ./support/geodesicConstants ./support/GeographicTransformation".split(" "),
function(n,m,da,O,p,I,k,y,u,D,fa,R,v,r,t,d,l,E,K,C,J,T,ea){function ka(){return!!Ga&&C.isLoaded()}function Z(X){O.isNone(Ha)&&(Ha=Promise.all([C.load(),(new Promise(function(ca,ba){n(["../chunks/geometryEngineBase"],ca,ba)})).then(function(ca){return ca.geometryEngineBase}),new Promise(function(ca,ba){n(["./geometryAdapters/hydrated"],ca,ba)})]));return Ha.then(([,ca,{hydratedAdapter:ba}])=>{I.throwIfAborted(X);Ja=ba;Ga=ca.default;Ga._enableProjection(C.pe)})}function F(X,ca,ba,na,ya=null){if(O.isNone(ba)||
O.isNone(na))return ca;if(M(ba,na,ya))return ca.map(Ca=>Q(Ca,ba,na));if(O.isNone(ya)){const Ca=ea.cacheKey(ba,na);void 0!==Ia[Ca]?ya=Ia[Ca]:(ya=G(ba,na,null),O.isNone(ya)&&(ya=new ea),Ia[Ca]=ya)}if(O.isNone(Ga))throw new Sa;return Ga._project(X,ca,ba,na,ya)}function G(X,ca,ba=null){if(O.isNone(Ga))throw new Sa;if(O.isNone(X)||O.isNone(ca))return null;X=Ga._getTransformation(Ja,X,ca,ba,null==ba?void 0:ba.spatialReference);return null!==X?ea.fromGE(X):null}function M(X,ca,ba){return ba?!1:k.equals(X,
ca)?!0:k.isValid(X)&&k.isValid(ca)&&!!Ba(X,ca,cb)}function Q(X,ca,ba){if(!X)return X;if("x"in X){var na=new u;return S(X,ca,na,ba)?na:null}return"xmin"in X?(na=new D,H(X,ca,na,ba)?na:null):"rings"in X?(na=new R,q(X,ca,na,ba)?na:null):"paths"in X?(na=new v,h(X,ca,na,ba)?na:null):"points"in X?(na=new fa,w(X,ca,na,ba)?na:null):null}function S(X,ca,ba,na,ya=0){Qa[0]=X.x;Qa[1]=X.y;const Ca=X.z;Qa[2]=void 0!==Ca?Ca:ya;if(!ma(Qa,ca,0,Qa,na,0,1))return!1;ba.x=Qa[0];ba.y=Qa[1];ba.spatialReference=na;void 0===
Ca?(ba.z=void 0,ba.hasZ=!1):(ba.z=Qa[2],ba.hasZ=!0);void 0===X.m?(ba.m=void 0,ba.hasM=!1):(ba.m=X.m,ba.hasM=!0);return!0}function w(X,ca,ba,na,ya=0){const {points:Ca,hasZ:Na,hasM:Oa}=X;X=[];const ab=Ca.length,Za=[];for(var $a of Ca)Za.push($a[0],$a[1],Na?$a[2]:ya);if(!ma(Za,ca,0,Za,na,0,ab))return!1;for(ca=0;ca<ab;++ca){ya=3*ca;$a=Za[ya];const gb=Za[ya+1];Na&&Oa?X.push([$a,gb,Za[ya+2],Ca[ca][3]]):Na?X.push([$a,gb,Za[ya+2]]):Oa?X.push([$a,gb,Ca[ca][2]]):X.push([$a,gb])}ba.points=X;ba.spatialReference=
na;ba.hasZ=Na;ba.hasM=Oa;return!0}function h(X,ca,ba,na,ya=0){const {paths:Ca,hasZ:Na,hasM:Oa}=X;X=[];if(!va(Ca,Na,Oa,ca,X,na,ya))return!1;ba.paths=X;ba.spatialReference=na;ba.hasZ=Na;ba.hasM=Oa;return!0}function q(X,ca,ba,na,ya=0){const {rings:Ca,hasZ:Na,hasM:Oa}=X;X=[];if(!va(Ca,Na,Oa,ca,X,na,ya))return!1;ba.rings=X;ba.spatialReference=na;ba.hasZ=Na;ba.hasM=Oa;return!0}function H(X,ca,ba,na,ya=0){const {xmin:Ca,ymin:Na,xmax:Oa,ymax:ab,hasZ:Za,hasM:$a}=X;if(!z(Ca,Na,Za?X.zmin:ya,ca,Qa,na))return!1;
ba.xmin=Qa[0];ba.ymin=Qa[1];Za&&(ba.zmin=Qa[2]);if(!z(Oa,ab,Za?X.zmax:ya,ca,Qa,na))return!1;ba.xmax=Qa[0];ba.ymax=Qa[1];Za&&(ba.zmax=Qa[2]);$a&&(ba.mmin=X.mmin,ba.mmax=X.mmax);ba.spatialReference=na;return!0}function z(X,ca,ba,na,ya,Ca){Ta[0]=X;Ta[1]=ca;Ta[2]=ba;return ma(Ta,na,0,ya,Ca,0,1)}function V(X,ca,ba,na){if(O.isNone(ca)||O.isNone(na)||2>X.length)return!1;2===X.length&&(Ta[0]=X[0],Ta[1]=X[1],Ta[2]=0,X=Ta);return ma(X,ca,0,ba,na,0,1)}function oa(X,ca,ba){O.isNone(ca)?X=!1:(ca=Da(ca,fb),ca=
qa[ca][6],O.isNone(ca)?X=!1:(ca(X,0,Ta,0),ba!==Ta&&(ba[0]=Ta[0],ba[1]=Ta[1],2<ba.length&&(ba[2]=Ta[2])),X=!0));return X}function ma(X,ca,ba,na,ya,Ca,Na=1){ca=Ba(ca,ya,cb);if(O.isNone(ca))return!1;if(ca===Y){if(X===na&&ba===Ca)return!0;Na=ba+3*Na;for(let Oa=ba,ab=Ca;Oa<Na;Oa++,ab++)na[ab]=X[Oa];return!0}Na=ba+3*Na;for(let Oa=ba,ab=Ca;Oa<Na;Oa+=3,ab+=3)ca(X,Oa,na,ab);return!0}function va(X,ca,ba,na,ya,Ca,Na=0){const Oa=[];for(const ab of X)for(const Za of ab)Oa.push(Za[0],Za[1],ca?Za[2]:Na);if(!ma(Oa,
na,0,Oa,Ca,0,Oa.length/3))return!1;na=0;ya.length=0;for(const ab of X){X=[];for(const Za of ab)ca&&ba?X.push([Oa[na++],Oa[na++],Oa[na++],Za[3]]):ca?X.push([Oa[na++],Oa[na++],Oa[na++]]):(ba?X.push([Oa[na++],Oa[na++],Za[2]]):X.push([Oa[na++],Oa[na++]]),na++);ya.push(X)}return!0}function za(X,ca,ba){const na=Math.sin(ca);ca=Math.cos(ca);const ya=Math.sin(X);X=Math.cos(X);ba[0]=-na;ba[4]=-ya*ca;ba[8]=X*ca;ba[12]=0;ba[1]=ca;ba[5]=-ya*na;ba[9]=X*na;ba[13]=0;ba[2]=0;ba[6]=X;ba[10]=ya;ba[14]=0;ba[3]=0;ba[7]=
0;ba[11]=0;ba[15]=1;return ba}function Da(X,ca){if(ca.spatialReference===X)return ca.spatialReferenceId;ca.spatialReference=X;"metersPerUnit"in ca&&(ca.metersPerUnit=E.getMetersPerUnitForSR(X,1));return X.wkt===l.SphericalECEFSpatialReference.wkt?ca.spatialReferenceId=1:k.isWGS84(X)?ca.spatialReferenceId=2:k.isWebMercator(X)?ca.spatialReferenceId=3:X.wkt===l.WGS84ECEFSpatialReference.wkt?ca.spatialReferenceId=4:4490===X.wkid?ca.spatialReferenceId=5:X.wkt===l.SphericalPCPFMars.wkt?ca.spatialReferenceId=
7:X.wkt===l.SphericalPCPFMoon.wkt?ca.spatialReferenceId=9:k.isMars(X)?ca.spatialReferenceId=8:k.isMoon(X)?ca.spatialReferenceId=10:ca.spatialReferenceId=0}function Y(X,ca,ba,na){X!==ba&&(ba[na++]=X[ca++],ba[na++]=X[ca++],ba[na]=X[ca])}function ia(X,ca,ba,na){ba[na++]=Ua*(X[ca++]/y.earth.radius);ba[na++]=Ua*(Math.PI/2-2*Math.atan(Math.exp(-1*X[ca++]/y.earth.radius)));ba[na]=X[ca]}function pa(X,ca,ba,na){ia(X,ca,ba,na);x(ba,na,ba,na)}function Aa(X,ca,ba,na){ia(X,ca,ba,na);la(ba,na,ba,na)}function wa(X,
ca,ba,na,ya){var Ca=.4999999*Math.PI;Ca=r.clamp(Va*X[ca+1],-Ca,Ca);Ca=Math.sin(Ca);ba[na++]=Va*X[ca]*ya.radius;ba[na++]=ya.halfSemiMajorAxis*Math.log((1+Ca)/(1-Ca));ba[na]=X[ca+2]}function b(X,ca,ba,na){wa(X,ca,ba,na,y.earth)}function e(X,ca,ba,na,ya){ya+=X[ca+2];const Ca=Va*X[ca+1];X=Va*X[ca];ca=Math.cos(Ca);ba[na++]=Math.cos(X)*ca*ya;ba[na++]=Math.sin(X)*ca*ya;ba[na]=Math.sin(Ca)*ya}function P(X,ca,ba,na){e(X,ca,ba,na,y.moon.radius)}function f(X,ca,ba,na){e(X,ca,ba,na,y.mars.radius)}function x(X,
ca,ba,na){e(X,ca,ba,na,y.earth.radius)}function L(X,ca,ba,na,ya){var Ca=X[ca];const Na=X[ca+1];ca=X[ca+2];X=Math.sqrt(Ca*Ca+Na*Na+ca*ca);ca=r.asinClamped(ca/(0===X?1:X));Ca=Math.atan2(Na,Ca);ba[na++]=Ua*Ca;ba[na++]=Ua*ca;ba[na]=X-ya}function N(X,ca,ba,na){L(X,ca,ba,na,y.moon.radius)}function aa(X,ca,ba,na){L(X,ca,ba,na,y.mars.radius)}function U(X,ca,ba,na){L(X,ca,ba,na,y.earth.radius)}function ha(X,ca,ba,na){U(X,ca,ba,na);b(ba,na,ba,na)}function ja(X,ca,ba,na){U(X,ca,ba,na);la(ba,na,ba,na)}function la(X,
ca,ba,na){{var ya=y.earth;const Na=Va*X[ca];var Ca=Va*X[ca+1];X=X[ca+2];ca=Math.sin(Ca);Ca=Math.cos(Ca);const Oa=ya.radius/Math.sqrt(1-ya.eccentricitySquared*ca*ca);ba[na++]=(Oa+X)*Ca*Math.cos(Na);ba[na++]=(Oa+X)*Ca*Math.sin(Na);ba[na++]=(Oa*(1-ya.eccentricitySquared)+X)*ca}}function ta(X,ca,ba,na){var ya=T.earthEllipsoidConstants,Ca=X[ca],Na=X[ca+1];X=X[ca+2];let Oa;ca=Math.abs(X);var ab=Ca*Ca+Na*Na;var Za=Math.sqrt(ab);var $a=ab+X*X;var gb=Math.sqrt($a);Ca=Math.atan2(Na,Ca);var kb=X*X/$a;$a=ab/
$a;Na=ya.a2/gb;ab=ya.a3-ya.a4/gb;.3<$a?(kb=ca/gb*(1+$a*(ya.a1+Na+kb*ab)/gb),gb=Math.asin(kb),Na=kb*kb,$a=Math.sqrt(1-Na)):($a=Za/gb*(1-kb*(ya.a5-Na-$a*ab)/gb),gb=Math.acos($a),Na=1-$a*$a,kb=Math.sqrt(Na));Oa=1-y.earth.eccentricitySquared*Na;Na=y.earth.radius/Math.sqrt(Oa);ya=ya.a6*Na;Na=Za-Na*$a;ab=ca-ya*kb;ca=$a*Na+kb*ab;Za=$a*ab-kb*Na;ya=Za/(ya/Oa+ca);gb+=ya;0>X&&(gb=-gb);ba[na++]=Ua*Ca;ba[na++]=Ua*gb;ba[na]=ca+Za*ya/2}function sa(X,ca,ba,na){ta(X,ca,ba,na);x(ba,na,ba,na)}function xa(X,ca,ba,na){ta(X,
ca,ba,na);b(ba,na,ba,na)}function Ba(X,ca,ba=Ka()){return O.isNone(X)||O.isNone(ca)?null:Ea(X,ca,ba).projector}function Ea(X,ca,ba){if(O.isNone(X)||O.isNone(ca)||ba.source.spatialReference===X&&ba.dest.spatialReference===ca)return ba;const na=Da(X,ba.source),ya=Da(ca,ba.dest);0===na&&0===ya?k.equals(X,ca)?ba.projector=Y:ba.projector=null:ba.projector=qa[na][ya];return ba}function Ka(){return{source:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:0,
metersPerUnit:1},projector:Y}}let Ga=null,Ja=null,Ha=null,Ia={},Sa=function(X){function ca(){return X.call(this,"projection:not-loaded","projection engine not fully loaded yet, please call load()")||this}da._inheritsLoose(ca,X);return ca}(p);const qa={[2]:{[5]:null,[8]:null,[10]:null,[6]:Y,[1]:x,[7]:null,[9]:null,[0]:null,[3]:b,[2]:Y,[4]:la},[5]:{[5]:Y,[8]:null,[10]:null,[6]:Y,[1]:x,[7]:null,[9]:null,[0]:null,[3]:null,[2]:null,[4]:la},[8]:{[5]:null,[8]:Y,[10]:null,[6]:null,[1]:null,[7]:f,[9]:null,
[0]:null,[3]:null,[2]:null,[4]:null},[10]:{[5]:null,[8]:null,[10]:Y,[6]:null,[1]:null,[7]:null,[9]:P,[0]:null,[3]:null,[2]:null,[4]:null},[3]:{[5]:null,[8]:null,[10]:null,[6]:ia,[1]:pa,[7]:null,[9]:null,[0]:null,[3]:Y,[2]:ia,[4]:Aa},[4]:{[5]:ta,[8]:null,[10]:null,[6]:ta,[1]:sa,[7]:null,[9]:null,[0]:null,[3]:xa,[2]:ta,[4]:Y},[1]:{[5]:U,[8]:null,[10]:null,[6]:U,[1]:Y,[7]:null,[9]:null,[0]:null,[3]:ha,[2]:U,[4]:ja},[7]:{[5]:null,[8]:aa,[10]:null,[6]:null,[1]:null,[7]:Y,[9]:null,[0]:null,[3]:null,[2]:null,
[4]:null},[9]:{[5]:null,[8]:null,[10]:N,[6]:null,[1]:null,[7]:null,[9]:Y,[0]:null,[3]:null,[2]:null,[4]:null},[0]:{[5]:null,[8]:null,[10]:null,[6]:null,[1]:null,[7]:null,[9]:null,[0]:Y,[3]:null,[2]:null,[4]:null},[6]:{[5]:null,[8]:null,[10]:null,[6]:Y,[1]:x,[7]:null,[9]:null,[0]:null,[3]:null,[2]:Y,[4]:la}},fb={spatialReference:null,spatialReferenceId:0},hb={spatialReference:null,spatialReferenceId:0},cb=Ka(),a=Ka(),Va=r.deg2rad(1),Ua=r.rad2deg(1),Ta=t.create(),jb=t.create(),rb=t.create(),Qa=t.create(),
xb=t.create();m.canProjectToWGS84ComparableLonLat=function(X){if(O.isNone(X))return!1;X=Da(X,fb);return!!qa[X][6]};m.canProjectWithoutEngine=M;m.computeLatLonToENURotation=za;m.computeLinearTransformation=function(X,ca,ba,na){if(O.isNone(X)||O.isNone(na))return!1;var ya=Da(X,fb),Ca=Da(na,hb);if(ya===Ca&&1!==Ca&&(0!==ya||k.equals(X,na)))return K.identity(ba),K.translate(ba,ba,ca),!0;if(1===Ca||7===Ca||9===Ca){na=X=0;if(1===Ca){ya=qa[ya][6];Ca=qa[6][Ca];if(O.isNone(ya)||O.isNone(Ca))return!1;ya(ca,
0,jb,0);Ca(jb,0,rb,0);X=Va*jb[0];na=Va*jb[1]}else if(7===Ca||9===Ca){Ca=qa[ya][Ca];if(O.isNone(Ca))return!1;Ca(ca,0,rb,0);X=Va*ca[0];na=Va*ca[1]}za(na,X,ba);ba[12]=rb[0];ba[13]=rb[1];ba[14]=rb[2];return!0}if(3===Ca&&(2===ya||1===ya)){Ca=qa[ya][6];if(O.isNone(Ca))return!1;Ca(ca,0,jb,0);ca=Va*jb[1];b(jb,0,rb,0);K.identity(ba);K.translate(ba,ba,rb);ca=1/Math.cos(ca);K.scale(ba,ba,[ca,ca,1]);return!0}return!1};m.getProjectorName=function(X,ca){switch(Ba(X,ca,cb)){case Y:return"copy3";case x:return"wgs84ToSphericalECEF";
case b:return"wgs84ToWebMercator";case la:return"wgs84ToWGS84ECEF";case ia:return"webMercatorToWGS84";case pa:return"webMercatorToSphericalECEF";case Aa:return"webMercatorToWGS84ECEF";case ta:return"wgs84ECEFToWGS84";case sa:return"wgs84ECEFToSphericalECEF";case xa:return"wgs84ECEFToWebMercator";case U:return"sphericalECEFToWGS84";case ha:return"sphericalECEFToWebMercator";case aa:return"sphericalMarsPCPFToMars2000";case N:return"sphericalMoonPCPFToMoon2000";case ja:return"sphericalECEFToWGS84ECEF";
case f:return"mars2000ToSphericalPCPF";case P:return"moon2000ToSphericalPCPF";default:return null}};m.getTransformation=G;m.getTransformations=function(X,ca,ba=null){if(O.isNone(Ga))throw new Sa;X=Ga._getTransformationBySuitability(Ja,X,ca,ba,null==ba?void 0:ba.spatialReference);if(null!==X){ca=[];for(const na of X)ca.push(ea.fromGE(na));return ca}return[]};m.initializeProjection=async function(X,ca){if(!ka())for(const {source:ba,dest:na,geographicTransformation:ya}of X)if(!M(ba,na,ya))return Z(ca)};
m.isLoaded=ka;m.isSupported=function(){return!0};m.load=Z;m.localLinearScaleFactors=function(X,ca,ba,na){if(O.isNone(ca)||O.isNone(na))return!1;const ya=Da(ca,fb);var Ca=Da(na,hb);if(ya===Ca&&0!==ya||k.equals(ca,na))return ba[0]=1,ba[1]=1,ba[2]=1,!0;if(1===ya){ca=d.length(X);X=ca/Math.sqrt(X[0]*X[0]+X[1]*X[1]);ca/=y.earth.radius;if(3===Ca)return ba[0]=X*ca,ba[1]=X*ca,ba[2]=1,!0;if(2===Ca||5===Ca)return Ca=180/(y.earth.radius*Math.PI),ba[0]=Ca*X*ca,ba[1]=Ca*ca,ba[2]=1,!0}return!1};m.lonLatToSphericalPCPF=
function(X,ca,ba,na,ya=0){na+=ya;ya=Math.cos(ba);X[0]=Math.cos(ca)*ya*na;X[1]=Math.sin(ca)*ya*na;X[2]=Math.sin(ba)*na};m.lonLatToWebMercatorComparable=wa;m.project=function(X,ca,ba=null){return Array.isArray(X)?0===X.length?[]:F(Ja,X,X[0].spatialReference,ca,ba):F(Ja,[X],X.spatialReference,ca,ba)[0]};m.projectBoundingRect=function(X,ca,ba,na){if(null==X)return!1;if(k.equals(ca,na))return J.set(ba,X),!0;Ta[0]=X[0];Ta[1]=X[1];Ta[2]=0;if(!ma(Ta,ca,0,Ta,na,0,1))return!1;ba[0]=Ta[0];ba[1]=Ta[1];Ta[0]=
X[2];Ta[1]=X[3];Ta[2]=0;if(!ma(Ta,ca,0,Ta,na,0,1))return!1;ba[2]=Ta[0];ba[3]=Ta[1];return!0};m.projectBoundingSphere=function(X,ca,ba,na){if(O.isNone(ca)||O.isNone(na))return!1;ca=Ea(ca,na,a);if(ca.projector===Y)return ba[0]=X[0],ba[1]=X[1],ba[2]=X[2],ba[3]=X[3],!0;if(O.isNone(ca.projector))return!1;const {source:ya,dest:Ca}=ca;if(3===Ca.spatialReferenceId){ca=qa[ya.spatialReferenceId][2];if(O.isNone(ca))return!1;ca(X,0,jb,0);ca=Math.abs(Va*jb[1])+Math.asin(X[3]/(y.earth.radius+X[2]));b(jb,0,ba,0);
ba[3]=ca>.9999*Math.PI?Number.MAX_VALUE:1/Math.cos(ca)*X[3];return!0}ca.projector(X,0,ba,0);ba[3]=X[3]*ya.metersPerUnit/Ca.metersPerUnit;return!0};m.projectBuffer=ma;m.projectDirection=function(X,ca,ba,na,ya){d.copy(Qa,X);d.add(xb,X,ca);V(Qa,ba,Qa,ya);V(xb,ba,xb,ya);d.subtract(na,xb,Qa);d.normalize(na,na)};m.projectExtent=function(X,ca,ba=ca.spatialReference,na=0){return O.isNone(ba)?!1:H(X,X.spatialReference,ca,ba,na)};m.projectMany=F;m.projectMultipoint=function(X,ca,ba=ca.spatialReference,na=0){return O.isNone(ba)?
!1:w(X,X.spatialReference,ca,ba,na)};m.projectPoint=function(X,ca,ba=ca.spatialReference,na=0){return O.isNone(ba)?!1:S(X,X.spatialReference,ca,ba,na)};m.projectPointToVector=function(X,ca,ba,na=0){Qa[0]=X.x;Qa[1]=X.y;const ya=X.z;Qa[2]=void 0!==ya?ya:na;return ma(Qa,X.spatialReference,0,ca,ba,0,1)};m.projectPointToWGS84ComparableLonLat=function(X,ca){Qa[0]=X.x;Qa[1]=X.y;const ba=X.z;Qa[2]=void 0!==ba?ba:0;return oa(Qa,X.spatialReference,ca)};m.projectPolygon=function(X,ca,ba=ca.spatialReference,
na=0){return O.isNone(ba)?!1:q(X,X.spatialReference,ca,ba,na)};m.projectPolyline=function(X,ca,ba=ca.spatialReference,na=0){return O.isNone(ba)?!1:h(X,X.spatialReference,ca,ba,na)};m.projectVectorToDehydratedPoint=function(X,ca,ba){return ma(X,ca,0,Qa,ba.spatialReference,0,1)?(ba.x=Qa[0],ba.y=Qa[1],ba.z=Qa[2],ba):null};m.projectVectorToPoint=function(X,ca,ba){if(O.isNone(ca)||O.isNone(ba))return null;const na=new u({spatialReference:ba});return ma(X,ca,0,Qa,ba,0,1)?(na.x=Qa[0],na.y=Qa[1],na.z=Qa[2],
na):null};m.projectVectorToVector=V;m.projectVectorToWGS84ComparableLonLat=oa;m.projectXYZToVector=z;m.sphericalPCPFtoLonLatElevation=L;m.unload=function(){Ha=Ja=Ga=null;Ia={}};Object.defineProperty(m,"__esModule",{value:!0})})},"esri/chunks/vec3f64":function(){define(["exports"],function(n){function m(){return[0,0,0]}function da(E){return[E[0],E[1],E[2]]}function O(E,K,C){return[E,K,C]}function p(E){const K=m(),C=Math.min(3,E.length);for(let J=0;J<C;++J)K[J]=E[J];return K}function I(E,K){return new Float64Array(E,
K,3)}function k(){return m()}function y(){return[1,1,1]}function u(){return[1,0,0]}function D(){return[0,1,0]}function fa(){return[0,0,1]}const R=m(),v=y(),r=u(),t=D(),d=fa();var l=Object.freeze({__proto__:null,create:m,clone:da,fromValues:O,fromArray:p,createView:I,zeros:k,ones:y,unitX:u,unitY:D,unitZ:fa,ZEROS:R,ONES:v,UNIT_X:r,UNIT_Y:t,UNIT_Z:d});n.ONES=v;n.UNIT_X=r;n.UNIT_Y=t;n.UNIT_Z=d;n.ZEROS=R;n.clone=da;n.create=m;n.createView=I;n.fromArray=p;n.fromValues=O;n.ones=y;n.unitX=u;n.unitY=D;n.unitZ=
fa;n.vec3f64=l;n.zeros=k})},"esri/chunks/vec3":function(){define(["exports","./vec3f64","./common"],function(n,m,da){function O(Y){const ia=Y[0],pa=Y[1];Y=Y[2];return Math.sqrt(ia*ia+pa*pa+Y*Y)}function p(Y,ia){Y[0]=ia[0];Y[1]=ia[1];Y[2]=ia[2];return Y}function I(Y,ia,pa,Aa){Y[0]=ia;Y[1]=pa;Y[2]=Aa;return Y}function k(Y,ia,pa){Y[0]=ia[0]+pa[0];Y[1]=ia[1]+pa[1];Y[2]=ia[2]+pa[2];return Y}function y(Y,ia,pa){Y[0]=ia[0]-pa[0];Y[1]=ia[1]-pa[1];Y[2]=ia[2]-pa[2];return Y}function u(Y,ia,pa){Y[0]=ia[0]*pa[0];
Y[1]=ia[1]*pa[1];Y[2]=ia[2]*pa[2];return Y}function D(Y,ia,pa){Y[0]=ia[0]/pa[0];Y[1]=ia[1]/pa[1];Y[2]=ia[2]/pa[2];return Y}function fa(Y,ia){Y[0]=Math.ceil(ia[0]);Y[1]=Math.ceil(ia[1]);Y[2]=Math.ceil(ia[2]);return Y}function R(Y,ia){Y[0]=Math.floor(ia[0]);Y[1]=Math.floor(ia[1]);Y[2]=Math.floor(ia[2]);return Y}function v(Y,ia,pa){Y[0]=Math.min(ia[0],pa[0]);Y[1]=Math.min(ia[1],pa[1]);Y[2]=Math.min(ia[2],pa[2]);return Y}function r(Y,ia,pa){Y[0]=Math.max(ia[0],pa[0]);Y[1]=Math.max(ia[1],pa[1]);Y[2]=Math.max(ia[2],
pa[2]);return Y}function t(Y,ia){Y[0]=Math.round(ia[0]);Y[1]=Math.round(ia[1]);Y[2]=Math.round(ia[2]);return Y}function d(Y,ia,pa){Y[0]=ia[0]*pa;Y[1]=ia[1]*pa;Y[2]=ia[2]*pa;return Y}function l(Y,ia,pa,Aa){Y[0]=ia[0]+pa[0]*Aa;Y[1]=ia[1]+pa[1]*Aa;Y[2]=ia[2]+pa[2]*Aa;return Y}function E(Y,ia){const pa=ia[0]-Y[0],Aa=ia[1]-Y[1];Y=ia[2]-Y[2];return Math.sqrt(pa*pa+Aa*Aa+Y*Y)}function K(Y,ia){const pa=ia[0]-Y[0],Aa=ia[1]-Y[1];Y=ia[2]-Y[2];return pa*pa+Aa*Aa+Y*Y}function C(Y){const ia=Y[0],pa=Y[1];Y=Y[2];
return ia*ia+pa*pa+Y*Y}function J(Y,ia){Y[0]=-ia[0];Y[1]=-ia[1];Y[2]=-ia[2];return Y}function T(Y,ia){Y[0]=1/ia[0];Y[1]=1/ia[1];Y[2]=1/ia[2];return Y}function ea(Y,ia){var pa=ia[0];const Aa=ia[1],wa=ia[2];pa=pa*pa+Aa*Aa+wa*wa;0<pa&&(pa=1/Math.sqrt(pa),Y[0]=ia[0]*pa,Y[1]=ia[1]*pa,Y[2]=ia[2]*pa);return Y}function ka(Y,ia){return Y[0]*ia[0]+Y[1]*ia[1]+Y[2]*ia[2]}function Z(Y,ia,pa){const Aa=ia[0],wa=ia[1];ia=ia[2];const b=pa[0],e=pa[1];pa=pa[2];Y[0]=wa*pa-ia*e;Y[1]=ia*b-Aa*pa;Y[2]=Aa*e-wa*b;return Y}
function F(Y,ia,pa,Aa){const wa=ia[0],b=ia[1];ia=ia[2];Y[0]=wa+Aa*(pa[0]-wa);Y[1]=b+Aa*(pa[1]-b);Y[2]=ia+Aa*(pa[2]-ia);return Y}function G(Y,ia,pa,Aa,wa,b){const e=b*b,P=e*(2*b-3)+1,f=e*(b-2)+b,x=e*(b-1);b=e*(3-2*b);Y[0]=ia[0]*P+pa[0]*f+Aa[0]*x+wa[0]*b;Y[1]=ia[1]*P+pa[1]*f+Aa[1]*x+wa[1]*b;Y[2]=ia[2]*P+pa[2]*f+Aa[2]*x+wa[2]*b;return Y}function M(Y,ia,pa,Aa,wa,b){var e=1-b,P=e*e;const f=b*b,x=P*e;P*=3*b;e*=3*f;b*=f;Y[0]=ia[0]*x+pa[0]*P+Aa[0]*e+wa[0]*b;Y[1]=ia[1]*x+pa[1]*P+Aa[1]*e+wa[1]*b;Y[2]=ia[2]*
x+pa[2]*P+Aa[2]*e+wa[2]*b;return Y}function Q(Y,ia){ia=ia||1;const pa=2*da.RANDOM()*Math.PI,Aa=2*da.RANDOM()-1,wa=Math.sqrt(1-Aa*Aa)*ia;Y[0]=Math.cos(pa)*wa;Y[1]=Math.sin(pa)*wa;Y[2]=Aa*ia;return Y}function S(Y,ia,pa){const Aa=ia[0],wa=ia[1];ia=ia[2];Y[0]=pa[0]*Aa+pa[4]*wa+pa[8]*ia+pa[12];Y[1]=pa[1]*Aa+pa[5]*wa+pa[9]*ia+pa[13];Y[2]=pa[2]*Aa+pa[6]*wa+pa[10]*ia+pa[14];return Y}function w(Y,ia,pa){const Aa=ia[0],wa=ia[1];ia=ia[2];Y[0]=Aa*pa[0]+wa*pa[3]+ia*pa[6];Y[1]=Aa*pa[1]+wa*pa[4]+ia*pa[7];Y[2]=Aa*
pa[2]+wa*pa[5]+ia*pa[8];return Y}function h(Y,ia,pa){const Aa=pa[0],wa=pa[1],b=pa[2],e=ia[0],P=ia[1];ia=ia[2];let f=wa*ia-b*P,x=b*e-Aa*ia,L=Aa*P-wa*e;pa=2*pa[3];Y[0]=e+f*pa+2*(wa*L-b*x);Y[1]=P+x*pa+2*(b*f-Aa*L);Y[2]=ia+L*pa+2*(Aa*x-wa*f);return Y}function q(Y,ia,pa,Aa){const wa=[],b=[];wa[0]=ia[0]-pa[0];wa[1]=ia[1]-pa[1];wa[2]=ia[2]-pa[2];b[0]=wa[0];b[1]=wa[1]*Math.cos(Aa)-wa[2]*Math.sin(Aa);b[2]=wa[1]*Math.sin(Aa)+wa[2]*Math.cos(Aa);Y[0]=b[0]+pa[0];Y[1]=b[1]+pa[1];Y[2]=b[2]+pa[2];return Y}function H(Y,
ia,pa,Aa){const wa=[],b=[];wa[0]=ia[0]-pa[0];wa[1]=ia[1]-pa[1];wa[2]=ia[2]-pa[2];b[0]=wa[2]*Math.sin(Aa)+wa[0]*Math.cos(Aa);b[1]=wa[1];b[2]=wa[2]*Math.cos(Aa)-wa[0]*Math.sin(Aa);Y[0]=b[0]+pa[0];Y[1]=b[1]+pa[1];Y[2]=b[2]+pa[2];return Y}function z(Y,ia,pa,Aa){const wa=[],b=[];wa[0]=ia[0]-pa[0];wa[1]=ia[1]-pa[1];wa[2]=ia[2]-pa[2];b[0]=wa[0]*Math.cos(Aa)-wa[1]*Math.sin(Aa);b[1]=wa[0]*Math.sin(Aa)+wa[1]*Math.cos(Aa);b[2]=wa[2];Y[0]=b[0]+pa[0];Y[1]=b[1]+pa[1];Y[2]=b[2]+pa[2];return Y}function V(Y,ia){p(za,
Y);p(Da,ia);ea(za,za);ea(Da,Da);Y=ka(za,Da);return 1<Y?0:-1>Y?Math.PI:Math.acos(Y)}function oa(Y){return"vec3("+Y[0]+", "+Y[1]+", "+Y[2]+")"}function ma(Y,ia){return Y[0]===ia[0]&&Y[1]===ia[1]&&Y[2]===ia[2]}function va(Y,ia){const pa=Y[0],Aa=Y[1];Y=Y[2];const wa=ia[0],b=ia[1];ia=ia[2];return Math.abs(pa-wa)<=da.EPSILON*Math.max(1,Math.abs(pa),Math.abs(wa))&&Math.abs(Aa-b)<=da.EPSILON*Math.max(1,Math.abs(Aa),Math.abs(b))&&Math.abs(Y-ia)<=da.EPSILON*Math.max(1,Math.abs(Y),Math.abs(ia))}const za=m.create(),
Da=m.create();m=Object.freeze({__proto__:null,length:O,copy:p,set:I,add:k,subtract:y,multiply:u,divide:D,ceil:fa,floor:R,min:v,max:r,round:t,scale:d,scaleAndAdd:l,distance:E,squaredDistance:K,squaredLength:C,negate:J,inverse:T,normalize:ea,dot:ka,cross:Z,lerp:F,hermite:G,bezier:M,random:Q,transformMat4:S,transformMat3:w,transformQuat:h,rotateX:q,rotateY:H,rotateZ:z,angle:V,str:oa,exactEquals:ma,equals:va,sub:y,mul:u,div:D,dist:E,sqrDist:K,len:O,sqrLen:C});n.add=k;n.angle=V;n.bezier=M;n.ceil=fa;n.copy=
p;n.cross=Z;n.dist=E;n.distance=E;n.div=D;n.divide=D;n.dot=ka;n.equals=va;n.exactEquals=ma;n.floor=R;n.hermite=G;n.inverse=T;n.len=O;n.length=O;n.lerp=F;n.max=r;n.min=v;n.mul=u;n.multiply=u;n.negate=J;n.normalize=ea;n.random=Q;n.rotateX=q;n.rotateY=H;n.rotateZ=z;n.round=t;n.scale=d;n.scaleAndAdd=l;n.set=I;n.sqrDist=K;n.sqrLen=C;n.squaredDistance=K;n.squaredLength=C;n.str=oa;n.sub=y;n.subtract=y;n.transformMat3=w;n.transformMat4=S;n.transformQuat=h;n.vec3=m})},"esri/chunks/common":function(){define(["exports"],
function(n){function m(u){return u*I}function da(u){return u*k}function O(u,D){return Math.abs(u-D)<=1E-6*Math.max(1,Math.abs(u),Math.abs(D))}const p=Math.random,I=Math.PI/180,k=180/Math.PI;var y=Object.freeze({__proto__:null,EPSILON:1E-6,RANDOM:p,toRadian:m,toDegree:da,equals:O});n.EPSILON=1E-6;n.RANDOM=p;n.common=y;n.equals=O;n.toDegree=da;n.toRadian=m})},"esri/geometry/projectionEllipsoid":function(){define(["exports","./support/spatialReferenceUtils","./SpatialReference","./support/Ellipsoid"],
function(n,m,da,O){function p(D){return new da({wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${D.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`})}const I=p(O.earth),k=p(O.mars),y=p(O.moon),u=new da({wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${O.earth.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`});n.SphericalECEFSpatialReference=I;n.SphericalPCPFMars=k;n.SphericalPCPFMoon=y;n.WGS84ECEFSpatialReference=u;n.createSphericalPCPF=p;n.getReferenceEllipsoid=function(D){return D&&(m.isMars(D)||D===k)?O.mars:D&&(m.isMoon(D)||D===y)?O.moon:O.earth};n.getReferenceEllipsoidFromWKID=function(D){return m.isWKIDFromMars(D)?O.mars:m.isWKIDFromMoon(D)?O.moon:O.earth};n.getSphericalPCPF=function(D){return D&&(m.isMars(D)||D===k)?k:D&&(m.isMoon(D)||D===y)?y:I};n.getSphericalPCPFForEllipsoid=function(D){return D&&
D===O.mars?k:D&&D===O.moon?y:I};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/core/unitUtils":function(){define("exports ./has ./jsonMap ../geometry/support/WKIDUnitConversion ../geometry/support/spatialReferenceUtils ../geometry/SpatialReference ../geometry/support/Ellipsoid ../geometry/projectionEllipsoid".split(" "),function(n,m,da,O,p,I,k,y){function u(w){if(w=M[w])return w;throw Error("unknown measure");}function D(w){return G[w].baseUnit}function fa(w,h=null){h=h||u(w);return G[h].baseUnit===
w}function R(w,h,q){if(h===q)return w;const H=u(h);if(H!==u(q))throw Error("incompatible units");w=fa(h,H)?w:w*G[H].units[h].inBaseUnits;return fa(q,H)?w:w/G[H].units[q].inBaseUnits}function v(w,h){return 3E3>R(w,h,"meters")?"meters":"kilometers"}function r(w,h){return 1E5>R(w,h,"meters")?"meters":"kilometers"}function t(w,h){return 1E3>R(w,h,"feet")?"feet":"miles"}function d(w,h){return 1E5>R(w,h,"feet")?"feet":"miles"}function l(w){return F.fromJSON(w.toLowerCase())||null}function E(w,h=k.earth.metersPerDegree){return K(w,
!0)||h}function K(w,h=!1){let q,H,z=null;null!=w&&("object"===typeof w?(q=w.wkid,H=w.wkt):"number"===typeof w?q=w:"string"===typeof w&&(H=w));if(q){if(p.isWKIDFromMars(q))return k.mars.metersPerDegree;if(p.isWKIDFromMoon(q))return k.moon.metersPerDegree;z=ea.values[ea[q]];!z&&h&&Z.has(q)&&(z=J)}else H&&(-1!==H.search(/^PROJCS/i)?(w=T.exec(H))&&w[1]&&(z=parseFloat(w[1].split(",")[1])):-1!==H.search(/^GEOCCS/i)&&(w=ka.exec(H))&&w[1]&&(z=parseFloat(w[1].split(",")[1])));return z}function C(w){let h,
q,H=null;null!=w&&("object"===typeof w?(h=w.wkid,q=w.wkt):"number"===typeof w?h=w:"string"===typeof w&&(q=w));h?H=ea.units[ea[h]]:q&&-1!==q.search(/^PROJCS/i)&&(w=T.exec(q))&&w[1]&&(H=(w=/[\\"\\']{1}([^\\"\\']+)/.exec(w[1]))&&w[1]);return H?l(H):null}const J=k.earth.radius*Math.PI/200,T=/UNIT\[([^\]]+)\]\]$/i,ea=O,ka=/UNIT\[([^\]]+)\]/i,Z=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),F=da.strict()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",
yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"});m={millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},
kilometers:{inBaseUnits:1E3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}};O={"square-millimeters":{inBaseUnits:1E-6},"square-centimeters":{inBaseUnits:1E-4},"square-decimeters":{inBaseUnits:.1*.1},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:1E6},"square-inches":{inBaseUnits:6.4516E-4},"square-feet":{inBaseUnits:.09290304},"square-yards":{inBaseUnits:.83612736},
"square-miles":{inBaseUnits:2589988.110336},"square-us-feet":{inBaseUnits:(w=>w*w)(1200/3937)},acres:{inBaseUnits:4046.8564224},ares:{inBaseUnits:100},hectares:{inBaseUnits:1E4}};const G={length:{baseUnit:"meters",units:m},area:{baseUnit:"square-meters",units:O},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1E3*1E-9},"cubic-centimeters":{inBaseUnits:.001},"cubic-decimeters":{inBaseUnits:1},"cubic-meters":{inBaseUnits:1E3},"cubic-kilometers":{inBaseUnits:1E12},
"cubic-inches":{inBaseUnits:.016387064},"cubic-feet":{inBaseUnits:.09290304*304.8},"cubic-yards":{inBaseUnits:764.554857984},"cubic-miles":{inBaseUnits:4.16818182544058E12}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},M=function(){const w={};for(const h in G)for(const q in G[h].units)w[q]=h;return w}(),Q={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",
esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},S={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"};m=da.strict()(Q);
O=da.strict()(S);da=da.strict()({...Q,...S});n.areaUnitsJSONMap=m;n.baseUnitForMeasure=D;n.baseUnitForUnit=function(w){return D(u(w))};n.convertUnit=R;n.getDefaultUnitSystem=function(w){if(!w)return null;switch(C(w)){case "feet":case "us-feet":case "clarke-feet":case "clarke-yards":case "clarke-links":case "sears-yards":case "sears-feet":case "sears-chains":case "benoit-1895-b-chains":case "indian-yards":case "indian-1937-yards":case "gold-coast-feet":case "sears-1922-truncated-chains":return"imperial";
case "50-kilometers":case "150-kilometers":case "meters":return"metric"}return null};n.getMetersPerUnit=K;n.getMetersPerUnitForSR=E;n.getMetersPerVerticalUnitForSR=function(w){if(w&&"object"===typeof w&&!p.isEarth(w))return 1;w=E(w);return 1E5<w?1:w};n.getUnitString=C;n.getVerticalUnitStringForSR=function(w){const h=E(w),q=w instanceof I?y.getReferenceEllipsoid(w).metersPerDegree:1E5;return h>=q?"meters":C(w)};n.inchesPerMeter=39.37;n.isBaseUnit=fa;n.isMeasurementSystem=function(w){return"imperial"===
w||"metric"===w};n.lengthToDegrees=function(w,h,q){return R(w,h,"meters")/(q*Math.PI/180)};n.lengthUnitsJSONMap=O;n.measureForUnit=u;n.measurementAreaUnits="metric imperial square-inches square-feet square-yards square-miles square-us-feet square-meters square-kilometers acres ares hectares".split(" ");n.measurementLengthUnits="metric imperial inches feet yards miles nautical-miles us-feet meters kilometers".split(" ");n.preferredImperialAreaUnit=function(w,h){return 1E6>R(w,h,"square-feet")?"square-feet":
"square-miles"};n.preferredImperialLengthUnit=t;n.preferredImperialVerticalLengthUnit=d;n.preferredLengthUnit=function(w,h,q){switch(q){case "metric":return v(w,h);case "imperial":return t(w,h);default:return q}};n.preferredMetricAreaUnit=function(w,h){return 3E6>R(w,h,"square-meters")?"square-meters":"square-kilometers"};n.preferredMetricLengthUnit=v;n.preferredMetricVerticalLengthUnit=r;n.preferredVerticalLengthUnit=function(w,h,q){switch(q){case "metric":return r(w,h);case "imperial":return d(w,
h);default:return q}};n.unitFromRESTJSON=l;n.unitToRESTJSON=function(w){return F.toJSON(w)||null};n.unitsJSONMap=da;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/chunks/mat4":function(){define(["exports","./vec3f64","./common"],function(n,m,da){function O(b,e){b[0]=e[0];b[1]=e[1];b[2]=e[2];b[3]=e[3];b[4]=e[4];b[5]=e[5];b[6]=e[6];b[7]=e[7];b[8]=e[8];b[9]=e[9];b[10]=e[10];b[11]=e[11];b[12]=e[12];b[13]=e[13];b[14]=e[14];b[15]=e[15];return b}function p(b,e,P,f,x,L,N,aa,U,ha,ja,la,ta,sa,xa,
Ba,Ea){b[0]=e;b[1]=P;b[2]=f;b[3]=x;b[4]=L;b[5]=N;b[6]=aa;b[7]=U;b[8]=ha;b[9]=ja;b[10]=la;b[11]=ta;b[12]=sa;b[13]=xa;b[14]=Ba;b[15]=Ea;return b}function I(b){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function k(b,e){if(b===e){const P=e[1],f=e[2],x=e[3],L=e[6],N=e[7],aa=e[11];b[1]=e[4];b[2]=e[8];b[3]=e[12];b[4]=P;b[6]=e[9];b[7]=e[13];b[8]=f;b[9]=L;b[11]=e[14];b[12]=x;b[13]=N;b[14]=aa}else b[0]=e[0],b[1]=e[4],b[2]=e[8],
b[3]=e[12],b[4]=e[1],b[5]=e[5],b[6]=e[9],b[7]=e[13],b[8]=e[2],b[9]=e[6],b[10]=e[10],b[11]=e[14],b[12]=e[3],b[13]=e[7],b[14]=e[11],b[15]=e[15];return b}function y(b,e){const P=e[0],f=e[1],x=e[2],L=e[3],N=e[4],aa=e[5],U=e[6],ha=e[7],ja=e[8],la=e[9],ta=e[10],sa=e[11],xa=e[12],Ba=e[13],Ea=e[14];e=e[15];const Ka=P*aa-f*N,Ga=P*U-x*N,Ja=P*ha-L*N,Ha=f*U-x*aa,Ia=f*ha-L*aa,Sa=x*ha-L*U,qa=ja*Ba-la*xa,fb=ja*Ea-ta*xa,hb=ja*e-sa*xa,cb=la*Ea-ta*Ba,a=la*e-sa*Ba,Va=ta*e-sa*Ea;let Ua=Ka*Va-Ga*a+Ja*cb+Ha*hb-Ia*fb+Sa*
qa;if(!Ua)return null;Ua=1/Ua;b[0]=(aa*Va-U*a+ha*cb)*Ua;b[1]=(x*a-f*Va-L*cb)*Ua;b[2]=(Ba*Sa-Ea*Ia+e*Ha)*Ua;b[3]=(ta*Ia-la*Sa-sa*Ha)*Ua;b[4]=(U*hb-N*Va-ha*fb)*Ua;b[5]=(P*Va-x*hb+L*fb)*Ua;b[6]=(Ea*Ja-xa*Sa-e*Ga)*Ua;b[7]=(ja*Sa-ta*Ja+sa*Ga)*Ua;b[8]=(N*a-aa*hb+ha*qa)*Ua;b[9]=(f*hb-P*a-L*qa)*Ua;b[10]=(xa*Ia-Ba*Ja+e*Ka)*Ua;b[11]=(la*Ja-ja*Ia-sa*Ka)*Ua;b[12]=(aa*fb-N*cb-U*qa)*Ua;b[13]=(P*cb-f*fb+x*qa)*Ua;b[14]=(Ba*Ga-xa*Ha-Ea*Ka)*Ua;b[15]=(ja*Ha-la*Ga+ta*Ka)*Ua;return b}function u(b,e){const P=e[0],f=e[1],
x=e[2],L=e[3],N=e[4],aa=e[5],U=e[6],ha=e[7],ja=e[8],la=e[9],ta=e[10],sa=e[11],xa=e[12],Ba=e[13],Ea=e[14];e=e[15];b[0]=aa*(ta*e-sa*Ea)-la*(U*e-ha*Ea)+Ba*(U*sa-ha*ta);b[1]=-(f*(ta*e-sa*Ea)-la*(x*e-L*Ea)+Ba*(x*sa-L*ta));b[2]=f*(U*e-ha*Ea)-aa*(x*e-L*Ea)+Ba*(x*ha-L*U);b[3]=-(f*(U*sa-ha*ta)-aa*(x*sa-L*ta)+la*(x*ha-L*U));b[4]=-(N*(ta*e-sa*Ea)-ja*(U*e-ha*Ea)+xa*(U*sa-ha*ta));b[5]=P*(ta*e-sa*Ea)-ja*(x*e-L*Ea)+xa*(x*sa-L*ta);b[6]=-(P*(U*e-ha*Ea)-N*(x*e-L*Ea)+xa*(x*ha-L*U));b[7]=P*(U*sa-ha*ta)-N*(x*sa-L*ta)+
ja*(x*ha-L*U);b[8]=N*(la*e-sa*Ba)-ja*(aa*e-ha*Ba)+xa*(aa*sa-ha*la);b[9]=-(P*(la*e-sa*Ba)-ja*(f*e-L*Ba)+xa*(f*sa-L*la));b[10]=P*(aa*e-ha*Ba)-N*(f*e-L*Ba)+xa*(f*ha-L*aa);b[11]=-(P*(aa*sa-ha*la)-N*(f*sa-L*la)+ja*(f*ha-L*aa));b[12]=-(N*(la*Ea-ta*Ba)-ja*(aa*Ea-U*Ba)+xa*(aa*ta-U*la));b[13]=P*(la*Ea-ta*Ba)-ja*(f*Ea-x*Ba)+xa*(f*ta-x*la);b[14]=-(P*(aa*Ea-U*Ba)-N*(f*Ea-x*Ba)+xa*(f*U-x*aa));b[15]=P*(aa*ta-U*la)-N*(f*ta-x*la)+ja*(f*U-x*aa);return b}function D(b){const e=b[0],P=b[1],f=b[2],x=b[3],L=b[4],N=b[5],
aa=b[6],U=b[7],ha=b[8],ja=b[9],la=b[10],ta=b[11],sa=b[12],xa=b[13],Ba=b[14];b=b[15];return(e*N-P*L)*(la*b-ta*Ba)-(e*aa-f*L)*(ja*b-ta*xa)+(e*U-x*L)*(ja*Ba-la*xa)+(P*aa-f*N)*(ha*b-ta*sa)-(P*U-x*N)*(ha*Ba-la*sa)+(f*U-x*aa)*(ha*xa-ja*sa)}function fa(b,e,P){const f=e[0],x=e[1],L=e[2],N=e[3],aa=e[4],U=e[5],ha=e[6],ja=e[7],la=e[8],ta=e[9],sa=e[10],xa=e[11],Ba=e[12],Ea=e[13],Ka=e[14];e=e[15];let Ga=P[0],Ja=P[1],Ha=P[2],Ia=P[3];b[0]=Ga*f+Ja*aa+Ha*la+Ia*Ba;b[1]=Ga*x+Ja*U+Ha*ta+Ia*Ea;b[2]=Ga*L+Ja*ha+Ha*sa+Ia*
Ka;b[3]=Ga*N+Ja*ja+Ha*xa+Ia*e;Ga=P[4];Ja=P[5];Ha=P[6];Ia=P[7];b[4]=Ga*f+Ja*aa+Ha*la+Ia*Ba;b[5]=Ga*x+Ja*U+Ha*ta+Ia*Ea;b[6]=Ga*L+Ja*ha+Ha*sa+Ia*Ka;b[7]=Ga*N+Ja*ja+Ha*xa+Ia*e;Ga=P[8];Ja=P[9];Ha=P[10];Ia=P[11];b[8]=Ga*f+Ja*aa+Ha*la+Ia*Ba;b[9]=Ga*x+Ja*U+Ha*ta+Ia*Ea;b[10]=Ga*L+Ja*ha+Ha*sa+Ia*Ka;b[11]=Ga*N+Ja*ja+Ha*xa+Ia*e;Ga=P[12];Ja=P[13];Ha=P[14];Ia=P[15];b[12]=Ga*f+Ja*aa+Ha*la+Ia*Ba;b[13]=Ga*x+Ja*U+Ha*ta+Ia*Ea;b[14]=Ga*L+Ja*ha+Ha*sa+Ia*Ka;b[15]=Ga*N+Ja*ja+Ha*xa+Ia*e;return b}function R(b,e,P){const f=
P[0],x=P[1];P=P[2];let L=void 0,N=void 0,aa=void 0,U=void 0,ha=void 0,ja=void 0,la=void 0,ta=void 0,sa=void 0,xa=void 0,Ba=void 0,Ea=void 0;e===b?(b[12]=e[0]*f+e[4]*x+e[8]*P+e[12],b[13]=e[1]*f+e[5]*x+e[9]*P+e[13],b[14]=e[2]*f+e[6]*x+e[10]*P+e[14],b[15]=e[3]*f+e[7]*x+e[11]*P+e[15]):(L=e[0],N=e[1],aa=e[2],U=e[3],ha=e[4],ja=e[5],la=e[6],ta=e[7],sa=e[8],xa=e[9],Ba=e[10],Ea=e[11],b[0]=L,b[1]=N,b[2]=aa,b[3]=U,b[4]=ha,b[5]=ja,b[6]=la,b[7]=ta,b[8]=sa,b[9]=xa,b[10]=Ba,b[11]=Ea,b[12]=L*f+ha*x+sa*P+e[12],b[13]=
N*f+ja*x+xa*P+e[13],b[14]=aa*f+la*x+Ba*P+e[14],b[15]=U*f+ta*x+Ea*P+e[15]);return b}function v(b,e,P){const f=P[0],x=P[1];P=P[2];b[0]=e[0]*f;b[1]=e[1]*f;b[2]=e[2]*f;b[3]=e[3]*f;b[4]=e[4]*x;b[5]=e[5]*x;b[6]=e[6]*x;b[7]=e[7]*x;b[8]=e[8]*P;b[9]=e[9]*P;b[10]=e[10]*P;b[11]=e[11]*P;b[12]=e[12];b[13]=e[13];b[14]=e[14];b[15]=e[15];return b}function r(b,e,P,f){let x=f[0],L=f[1];f=f[2];let N=Math.sqrt(x*x+L*L+f*f);var aa=void 0,U=void 0;let ha=void 0,ja=void 0,la=void 0,ta=void 0,sa=void 0,xa=void 0,Ba=void 0,
Ea=void 0,Ka=void 0,Ga=void 0,Ja=void 0,Ha=void 0,Ia=void 0,Sa=void 0,qa=void 0,fb=void 0,hb=void 0,cb=void 0,a=void 0,Va=void 0;U=aa=void 0;if(N<da.EPSILON)return null;N=1/N;x*=N;L*=N;f*=N;aa=Math.sin(P);U=Math.cos(P);ha=1-U;ja=e[0];la=e[1];ta=e[2];sa=e[3];xa=e[4];Ba=e[5];Ea=e[6];Ka=e[7];Ga=e[8];Ja=e[9];Ha=e[10];Ia=e[11];Sa=x*x*ha+U;qa=L*x*ha+f*aa;fb=f*x*ha-L*aa;hb=x*L*ha-f*aa;cb=L*L*ha+U;a=f*L*ha+x*aa;Va=x*f*ha+L*aa;aa=L*f*ha-x*aa;U=f*f*ha+U;b[0]=ja*Sa+xa*qa+Ga*fb;b[1]=la*Sa+Ba*qa+Ja*fb;b[2]=ta*
Sa+Ea*qa+Ha*fb;b[3]=sa*Sa+Ka*qa+Ia*fb;b[4]=ja*hb+xa*cb+Ga*a;b[5]=la*hb+Ba*cb+Ja*a;b[6]=ta*hb+Ea*cb+Ha*a;b[7]=sa*hb+Ka*cb+Ia*a;b[8]=ja*Va+xa*aa+Ga*U;b[9]=la*Va+Ba*aa+Ja*U;b[10]=ta*Va+Ea*aa+Ha*U;b[11]=sa*Va+Ka*aa+Ia*U;e!==b&&(b[12]=e[12],b[13]=e[13],b[14]=e[14],b[15]=e[15]);return b}function t(b,e,P){const f=Math.sin(P);P=Math.cos(P);const x=e[4],L=e[5],N=e[6],aa=e[7],U=e[8],ha=e[9],ja=e[10],la=e[11];e!==b&&(b[0]=e[0],b[1]=e[1],b[2]=e[2],b[3]=e[3],b[12]=e[12],b[13]=e[13],b[14]=e[14],b[15]=e[15]);b[4]=
x*P+U*f;b[5]=L*P+ha*f;b[6]=N*P+ja*f;b[7]=aa*P+la*f;b[8]=U*P-x*f;b[9]=ha*P-L*f;b[10]=ja*P-N*f;b[11]=la*P-aa*f;return b}function d(b,e,P){const f=Math.sin(P);P=Math.cos(P);const x=e[0],L=e[1],N=e[2],aa=e[3],U=e[8],ha=e[9],ja=e[10],la=e[11];e!==b&&(b[4]=e[4],b[5]=e[5],b[6]=e[6],b[7]=e[7],b[12]=e[12],b[13]=e[13],b[14]=e[14],b[15]=e[15]);b[0]=x*P-U*f;b[1]=L*P-ha*f;b[2]=N*P-ja*f;b[3]=aa*P-la*f;b[8]=x*f+U*P;b[9]=L*f+ha*P;b[10]=N*f+ja*P;b[11]=aa*f+la*P;return b}function l(b,e,P){const f=Math.sin(P);P=Math.cos(P);
const x=e[0],L=e[1],N=e[2],aa=e[3],U=e[4],ha=e[5],ja=e[6],la=e[7];e!==b&&(b[8]=e[8],b[9]=e[9],b[10]=e[10],b[11]=e[11],b[12]=e[12],b[13]=e[13],b[14]=e[14],b[15]=e[15]);b[0]=x*P+U*f;b[1]=L*P+ha*f;b[2]=N*P+ja*f;b[3]=aa*P+la*f;b[4]=U*P-x*f;b[5]=ha*P-L*f;b[6]=ja*P-N*f;b[7]=la*P-aa*f;return b}function E(b,e){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=e[0];b[13]=e[1];b[14]=e[2];b[15]=1;return b}function K(b,e){b[0]=e[0];b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=e[1];
b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=e[2];b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function C(b,e,P){let f=P[0],x=P[1];P=P[2];let L=Math.sqrt(f*f+x*x+P*P),N=void 0,aa=void 0,U=void 0;if(L<da.EPSILON)return null;L=1/L;f*=L;x*=L;P*=L;N=Math.sin(e);aa=Math.cos(e);U=1-aa;b[0]=f*f*U+aa;b[1]=x*f*U+P*N;b[2]=P*f*U-x*N;b[3]=0;b[4]=f*x*U-P*N;b[5]=x*x*U+aa;b[6]=P*x*U+f*N;b[7]=0;b[8]=f*P*U+x*N;b[9]=x*P*U-f*N;b[10]=P*P*U+aa;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function J(b,e){const P=Math.sin(e);
e=Math.cos(e);b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=e;b[6]=P;b[7]=0;b[8]=0;b[9]=-P;b[10]=e;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function T(b,e){const P=Math.sin(e);e=Math.cos(e);b[0]=e;b[1]=0;b[2]=-P;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=P;b[9]=0;b[10]=e;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function ea(b,e){const P=Math.sin(e);e=Math.cos(e);b[0]=e;b[1]=P;b[2]=0;b[3]=0;b[4]=-P;b[5]=e;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function ka(b,
e,P){var f=e[0],x=e[1],L=e[2],N=e[3],aa=f+f,U=x+x;const ha=L+L;e=f*aa;const ja=f*U;f*=ha;const la=x*U;x*=ha;L*=ha;aa*=N;U*=N;N*=ha;b[0]=1-(la+L);b[1]=ja+N;b[2]=f-U;b[3]=0;b[4]=ja-N;b[5]=1-(e+L);b[6]=x+aa;b[7]=0;b[8]=f+U;b[9]=x-aa;b[10]=1-(e+la);b[11]=0;b[12]=P[0];b[13]=P[1];b[14]=P[2];b[15]=1;return b}function Z(b,e){const P=wa,f=-e[0],x=-e[1],L=-e[2],N=e[3],aa=e[4],U=e[5],ha=e[6],ja=e[7],la=f*f+x*x+L*L+N*N;0<la?(P[0]=2*(aa*N+ja*f+U*L-ha*x)/la,P[1]=2*(U*N+ja*x+ha*f-aa*L)/la,P[2]=2*(ha*N+ja*L+aa*x-
U*f)/la):(P[0]=2*(aa*N+ja*f+U*L-ha*x),P[1]=2*(U*N+ja*x+ha*f-aa*L),P[2]=2*(ha*N+ja*L+aa*x-U*f));ka(b,e,P);return b}function F(b,e){b[0]=e[12];b[1]=e[13];b[2]=e[14];return b}function G(b,e){const P=e[0],f=e[1],x=e[2],L=e[4],N=e[5],aa=e[6],U=e[8],ha=e[9];e=e[10];b[0]=Math.sqrt(P*P+f*f+x*x);b[1]=Math.sqrt(L*L+N*N+aa*aa);b[2]=Math.sqrt(U*U+ha*ha+e*e);return b}function M(b,e){const P=e[0]+e[5]+e[10];let f=0;0<P?(f=2*Math.sqrt(P+1),b[3]=.25*f,b[0]=(e[6]-e[9])/f,b[1]=(e[8]-e[2])/f,b[2]=(e[1]-e[4])/f):e[0]>
e[5]&&e[0]>e[10]?(f=2*Math.sqrt(1+e[0]-e[5]-e[10]),b[3]=(e[6]-e[9])/f,b[0]=.25*f,b[1]=(e[1]+e[4])/f,b[2]=(e[8]+e[2])/f):e[5]>e[10]?(f=2*Math.sqrt(1+e[5]-e[0]-e[10]),b[3]=(e[8]-e[2])/f,b[0]=(e[1]+e[4])/f,b[1]=.25*f,b[2]=(e[6]+e[9])/f):(f=2*Math.sqrt(1+e[10]-e[0]-e[5]),b[3]=(e[1]-e[4])/f,b[0]=(e[8]+e[2])/f,b[1]=(e[6]+e[9])/f,b[2]=.25*f);return b}function Q(b,e,P,f){var x=e[0],L=e[1],N=e[2],aa=e[3],U=x+x,ha=L+L,ja=N+N;e=x*U;const la=x*ha;x*=ja;const ta=L*ha;L*=ja;N*=ja;U*=aa;ha*=aa;aa*=ja;ja=f[0];const sa=
f[1];f=f[2];b[0]=(1-(ta+N))*ja;b[1]=(la+aa)*ja;b[2]=(x-ha)*ja;b[3]=0;b[4]=(la-aa)*sa;b[5]=(1-(e+N))*sa;b[6]=(L+U)*sa;b[7]=0;b[8]=(x+ha)*f;b[9]=(L-U)*f;b[10]=(1-(e+ta))*f;b[11]=0;b[12]=P[0];b[13]=P[1];b[14]=P[2];b[15]=1;return b}function S(b,e,P,f,x){var L=e[0],N=e[1],aa=e[2],U=e[3],ha=L+L,ja=N+N,la=aa+aa;e=L*ha;var ta=L*ja,sa=L*la;L=N*ja;N*=la;var xa=aa*la;aa=U*ha;ja*=U;const Ba=U*la;var Ea=f[0],Ka=f[1];la=f[2];f=x[0];U=x[1];x=x[2];ha=(1-(L+xa))*Ea;const Ga=(ta+Ba)*Ea;Ea*=sa-ja;ta=(ta-Ba)*Ka;xa=(1-
(e+xa))*Ka;Ka*=N+aa;sa=(sa+ja)*la;N=(N-aa)*la;e=(1-(e+L))*la;b[0]=ha;b[1]=Ga;b[2]=Ea;b[3]=0;b[4]=ta;b[5]=xa;b[6]=Ka;b[7]=0;b[8]=sa;b[9]=N;b[10]=e;b[11]=0;b[12]=P[0]+f-(ha*f+ta*U+sa*x);b[13]=P[1]+U-(Ga*f+xa*U+N*x);b[14]=P[2]+x-(Ea*f+Ka*U+e*x);b[15]=1;return b}function w(b,e){var P=e[0],f=e[1],x=e[2];e=e[3];var L=P+P,N=f+f;const aa=x+x;P*=L;const U=f*L;f*=N;const ha=x*L,ja=x*N;x*=aa;L*=e;N*=e;e*=aa;b[0]=1-f-x;b[1]=U+e;b[2]=ha-N;b[3]=0;b[4]=U-e;b[5]=1-P-x;b[6]=ja+L;b[7]=0;b[8]=ha+N;b[9]=ja-L;b[10]=1-
P-f;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function h(b,e,P,f,x,L,N){const aa=1/(P-e),U=1/(x-f),ha=1/(L-N);b[0]=2*L*aa;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=2*L*U;b[6]=0;b[7]=0;b[8]=(P+e)*aa;b[9]=(x+f)*U;b[10]=(N+L)*ha;b[11]=-1;b[12]=0;b[13]=0;b[14]=N*L*2*ha;b[15]=0;return b}function q(b,e,P,f,x){e=1/Math.tan(e/2);let L=void 0;b[0]=e/P;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=e;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[11]=-1;b[12]=0;b[13]=0;b[15]=0;null!=x&&Infinity!==x?(L=1/(f-x),b[10]=(x+f)*L,b[14]=2*x*f*L):
(b[10]=-1,b[14]=-2*f);return b}function H(b,e,P,f){const x=Math.tan(e.upDegrees*Math.PI/180),L=Math.tan(e.downDegrees*Math.PI/180),N=Math.tan(e.leftDegrees*Math.PI/180);e=Math.tan(e.rightDegrees*Math.PI/180);const aa=2/(N+e),U=2/(x+L);b[0]=aa;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=U;b[6]=0;b[7]=0;b[8]=-((N-e)*aa*.5);b[9]=(x-L)*U*.5;b[10]=f/(P-f);b[11]=-1;b[12]=0;b[13]=0;b[14]=f*P/(P-f);b[15]=0;return b}function z(b,e,P,f,x,L,N){const aa=1/(e-P),U=1/(f-x),ha=1/(L-N);b[0]=-2*aa;b[1]=0;b[2]=0;b[3]=0;b[4]=
0;b[5]=-2*U;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=2*ha;b[11]=0;b[12]=(e+P)*aa;b[13]=(x+f)*U;b[14]=(N+L)*ha;b[15]=1;return b}function V(b,e,P,f){let x=void 0,L=void 0;var N=void 0,aa=void 0;let U=void 0,ha=void 0;var ja=void 0,la=void 0;let ta=void 0,sa=void 0;const xa=e[0],Ba=e[1];e=e[2];N=f[0];aa=f[1];f=f[2];ja=P[0];la=P[1];P=P[2];if(Math.abs(xa-ja)<da.EPSILON&&Math.abs(Ba-la)<da.EPSILON&&Math.abs(e-P)<da.EPSILON)return I(b);ja=xa-ja;la=Ba-la;ta=e-P;sa=1/Math.sqrt(ja*ja+la*la+ta*ta);ja*=sa;la*=sa;ta*=
sa;x=aa*ta-f*la;L=f*ja-N*ta;N=N*la-aa*ja;(sa=Math.sqrt(x*x+L*L+N*N))?(sa=1/sa,x*=sa,L*=sa,N*=sa):N=L=x=0;aa=la*N-ta*L;U=ta*x-ja*N;ha=ja*L-la*x;(sa=Math.sqrt(aa*aa+U*U+ha*ha))?(sa=1/sa,aa*=sa,U*=sa,ha*=sa):ha=U=aa=0;b[0]=x;b[1]=aa;b[2]=ja;b[3]=0;b[4]=L;b[5]=U;b[6]=la;b[7]=0;b[8]=N;b[9]=ha;b[10]=ta;b[11]=0;b[12]=-(x*xa+L*Ba+N*e);b[13]=-(aa*xa+U*Ba+ha*e);b[14]=-(ja*xa+la*Ba+ta*e);b[15]=1;return b}function oa(b,e,P,f){const x=e[0],L=e[1];e=e[2];var N=f[0];const aa=f[1];var U=f[2];f=x-P[0];let ha=L-P[1];
P=e-P[2];let ja=f*f+ha*ha+P*P;0<ja&&(ja=1/Math.sqrt(ja),f*=ja,ha*=ja,P*=ja);let la=aa*P-U*ha;U=U*f-N*P;N=N*ha-aa*f;ja=la*la+U*U+N*N;0<ja&&(ja=1/Math.sqrt(ja),la*=ja,U*=ja,N*=ja);b[0]=la;b[1]=U;b[2]=N;b[3]=0;b[4]=ha*N-P*U;b[5]=P*la-f*N;b[6]=f*U-ha*la;b[7]=0;b[8]=f;b[9]=ha;b[10]=P;b[11]=0;b[12]=x;b[13]=L;b[14]=e;b[15]=1;return b}function ma(b){return"mat4("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+", "+b[4]+", "+b[5]+", "+b[6]+", "+b[7]+", "+b[8]+", "+b[9]+", "+b[10]+", "+b[11]+", "+b[12]+", "+b[13]+", "+
b[14]+", "+b[15]+")"}function va(b){return Math.sqrt(b[0]**2+b[1]**2+b[2]**2+b[3]**2+b[4]**2+b[5]**2+b[6]**2+b[7]**2+b[8]**2+b[9]**2+b[10]**2+b[11]**2+b[12]**2+b[13]**2+b[14]**2+b[15]**2)}function za(b,e,P){b[0]=e[0]+P[0];b[1]=e[1]+P[1];b[2]=e[2]+P[2];b[3]=e[3]+P[3];b[4]=e[4]+P[4];b[5]=e[5]+P[5];b[6]=e[6]+P[6];b[7]=e[7]+P[7];b[8]=e[8]+P[8];b[9]=e[9]+P[9];b[10]=e[10]+P[10];b[11]=e[11]+P[11];b[12]=e[12]+P[12];b[13]=e[13]+P[13];b[14]=e[14]+P[14];b[15]=e[15]+P[15];return b}function Da(b,e,P){b[0]=e[0]-
P[0];b[1]=e[1]-P[1];b[2]=e[2]-P[2];b[3]=e[3]-P[3];b[4]=e[4]-P[4];b[5]=e[5]-P[5];b[6]=e[6]-P[6];b[7]=e[7]-P[7];b[8]=e[8]-P[8];b[9]=e[9]-P[9];b[10]=e[10]-P[10];b[11]=e[11]-P[11];b[12]=e[12]-P[12];b[13]=e[13]-P[13];b[14]=e[14]-P[14];b[15]=e[15]-P[15];return b}function Y(b,e,P){b[0]=e[0]*P;b[1]=e[1]*P;b[2]=e[2]*P;b[3]=e[3]*P;b[4]=e[4]*P;b[5]=e[5]*P;b[6]=e[6]*P;b[7]=e[7]*P;b[8]=e[8]*P;b[9]=e[9]*P;b[10]=e[10]*P;b[11]=e[11]*P;b[12]=e[12]*P;b[13]=e[13]*P;b[14]=e[14]*P;b[15]=e[15]*P;return b}function ia(b,
e,P,f){b[0]=e[0]+P[0]*f;b[1]=e[1]+P[1]*f;b[2]=e[2]+P[2]*f;b[3]=e[3]+P[3]*f;b[4]=e[4]+P[4]*f;b[5]=e[5]+P[5]*f;b[6]=e[6]+P[6]*f;b[7]=e[7]+P[7]*f;b[8]=e[8]+P[8]*f;b[9]=e[9]+P[9]*f;b[10]=e[10]+P[10]*f;b[11]=e[11]+P[11]*f;b[12]=e[12]+P[12]*f;b[13]=e[13]+P[13]*f;b[14]=e[14]+P[14]*f;b[15]=e[15]+P[15]*f;return b}function pa(b,e){return b[0]===e[0]&&b[1]===e[1]&&b[2]===e[2]&&b[3]===e[3]&&b[4]===e[4]&&b[5]===e[5]&&b[6]===e[6]&&b[7]===e[7]&&b[8]===e[8]&&b[9]===e[9]&&b[10]===e[10]&&b[11]===e[11]&&b[12]===e[12]&&
b[13]===e[13]&&b[14]===e[14]&&b[15]===e[15]}function Aa(b,e){const P=b[0],f=b[1],x=b[2],L=b[3],N=b[4],aa=b[5],U=b[6],ha=b[7],ja=b[8],la=b[9],ta=b[10],sa=b[11],xa=b[12],Ba=b[13],Ea=b[14];b=b[15];const Ka=e[0],Ga=e[1],Ja=e[2],Ha=e[3],Ia=e[4],Sa=e[5],qa=e[6],fb=e[7],hb=e[8],cb=e[9],a=e[10],Va=e[11],Ua=e[12],Ta=e[13],jb=e[14];e=e[15];return Math.abs(P-Ka)<=da.EPSILON*Math.max(1,Math.abs(P),Math.abs(Ka))&&Math.abs(f-Ga)<=da.EPSILON*Math.max(1,Math.abs(f),Math.abs(Ga))&&Math.abs(x-Ja)<=da.EPSILON*Math.max(1,
Math.abs(x),Math.abs(Ja))&&Math.abs(L-Ha)<=da.EPSILON*Math.max(1,Math.abs(L),Math.abs(Ha))&&Math.abs(N-Ia)<=da.EPSILON*Math.max(1,Math.abs(N),Math.abs(Ia))&&Math.abs(aa-Sa)<=da.EPSILON*Math.max(1,Math.abs(aa),Math.abs(Sa))&&Math.abs(U-qa)<=da.EPSILON*Math.max(1,Math.abs(U),Math.abs(qa))&&Math.abs(ha-fb)<=da.EPSILON*Math.max(1,Math.abs(ha),Math.abs(fb))&&Math.abs(ja-hb)<=da.EPSILON*Math.max(1,Math.abs(ja),Math.abs(hb))&&Math.abs(la-cb)<=da.EPSILON*Math.max(1,Math.abs(la),Math.abs(cb))&&Math.abs(ta-
a)<=da.EPSILON*Math.max(1,Math.abs(ta),Math.abs(a))&&Math.abs(sa-Va)<=da.EPSILON*Math.max(1,Math.abs(sa),Math.abs(Va))&&Math.abs(xa-Ua)<=da.EPSILON*Math.max(1,Math.abs(xa),Math.abs(Ua))&&Math.abs(Ba-Ta)<=da.EPSILON*Math.max(1,Math.abs(Ba),Math.abs(Ta))&&Math.abs(Ea-jb)<=da.EPSILON*Math.max(1,Math.abs(Ea),Math.abs(jb))&&Math.abs(b-e)<=da.EPSILON*Math.max(1,Math.abs(b),Math.abs(e))}const wa=m.create();m=Object.freeze({__proto__:null,copy:O,set:p,identity:I,transpose:k,invert:y,adjoint:u,determinant:D,
multiply:fa,translate:R,scale:v,rotate:r,rotateX:t,rotateY:d,rotateZ:l,fromTranslation:E,fromScaling:K,fromRotation:C,fromXRotation:J,fromYRotation:T,fromZRotation:ea,fromRotationTranslation:ka,fromQuat2:Z,getTranslation:F,getScaling:G,getRotation:M,fromRotationTranslationScale:Q,fromRotationTranslationScaleOrigin:S,fromQuat:w,frustum:h,perspective:q,perspectiveFromFieldOfView:H,ortho:z,lookAt:V,targetTo:oa,str:ma,frob:va,add:za,subtract:Da,multiplyScalar:Y,multiplyScalarAndAdd:ia,exactEquals:pa,
equals:Aa,mul:fa,sub:Da});n.add=za;n.adjoint=u;n.copy=O;n.determinant=D;n.equals=Aa;n.exactEquals=pa;n.frob=va;n.fromQuat=w;n.fromQuat2=Z;n.fromRotation=C;n.fromRotationTranslation=ka;n.fromRotationTranslationScale=Q;n.fromRotationTranslationScaleOrigin=S;n.fromScaling=K;n.fromTranslation=E;n.fromXRotation=J;n.fromYRotation=T;n.fromZRotation=ea;n.frustum=h;n.getRotation=M;n.getScaling=G;n.getTranslation=F;n.identity=I;n.invert=y;n.lookAt=V;n.mat4=m;n.mul=fa;n.multiply=fa;n.multiplyScalar=Y;n.multiplyScalarAndAdd=
ia;n.ortho=z;n.perspective=q;n.perspectiveFromFieldOfView=H;n.rotate=r;n.rotateX=t;n.rotateY=d;n.rotateZ=l;n.scale=v;n.set=p;n.str=ma;n.sub=Da;n.subtract=Da;n.targetTo=oa;n.translate=R;n.transpose=k})},"esri/chunks/pe":function(){define(["require","exports","./_rollupPluginBabelHelpers","../core/has","../assets"],function(n,m,da,O,p){function I(){return!!m._pe}function k(){return!!O("esri-wasm")}function y(){return r?r:r=(new Promise(function(d,l){n(["./pe-wasm"],d,l)})).then(function(d){return d.peWasm}).then(({default:d})=>
d({locateFile:l=>p.getAssetUrl(`esri/geometry/support/${l}`)})).then(d=>{u(d)})}function u(d){function l(C,J,T){C[J]=T(C[J])}m._pe=d;m.PeDefs.init();m.PeGTlistExtended.init();m.PeNotationMgrs.init();m.PeNotationUtm.init();m.PePCSInfo.init();m.PeGCSExtent=function(C){function J(){return C.apply(this,arguments)||this}da._inheritsLoose(J,C);J.prototype.destroy=function(){m._pe.destroy(this)};return J}(m._pe.PeGCSExtent);d=[m._pe.PeDatum,m._pe.PeGeogcs,m._pe.PeGeogtran,m._pe.PeObject,m._pe.PeParameter,
m._pe.PePrimem,m._pe.PeProjcs,m._pe.PeSpheroid,m._pe.PeUnit];for(var E of d)l(E.prototype,"getName",C=>function(){return C.call(this,Array(m.PeDefs.PE_NAME_MAX))});for(const C of[m._pe.PeGeogtran,m._pe.PeProjcs])l(C.prototype,"getParameters",J=>function(){const T=Array(m.PeDefs.PE_PARM_MAX);let ea=J.call(this);for(let ka=0;ka<T.length;ka++){const Z=m._pe.getValue(ea,"*");T[ka]=Z?m._pe.wrapPointer(Z,m._pe.PeParameter):null;ea+=Int32Array.BYTES_PER_ELEMENT}return T});l(m._pe.PeHorizon.prototype,"getCoord",
C=>function(){const J=this.getSize();if(!J)return null;const T=[],ea=C.call(this);v(T,J,ea);return T});l(m._pe.PeGTlistExtendedEntry.prototype,"getEntries",C=>{const J=m._pe._pe_getPeGTlistExtendedGTsSize();return function(){let T=null;var ea=C.call(this);if(!m._pe.compare(ea,m._pe.NULL)){T=[ea];const ka=this.getSteps();if(1<ka){ea=m._pe.getPointer(ea);for(let Z=1;Z<ka;Z++)T.push(m._pe.wrapPointer(ea+J*Z,m._pe.PeGTlistExtendedGTs))}}return T}});const K=m._pe._pe_getPeHorizonSize();E=C=>function(){let J=
this._cache;J||(this._cache=J=new Map);if(J.has(C))return J.get(C);let T=null;var ea=C.call(this);if(!m._pe.compare(ea,m._pe.NULL)){T=[ea];const ka=ea.getNump();if(1<ka){ea=m._pe.getPointer(ea);for(let Z=1;Z<ka;Z++)T.push(m._pe.wrapPointer(ea+K*Z,m._pe.PeHorizon))}}J.set(C,T);return T};l(m._pe.PeProjcs.prototype,"horizonGcsGenerate",E);l(m._pe.PeProjcs.prototype,"horizonPcsGenerate",E);m._pe.PeObject.prototype.toString=function(C=m.PeDefs.PE_STR_OPTS_NONE){m._pe.ensureCache.prepare();const J=m._pe.getPointer(this),
T=m._pe.ensureInt8(Array(m.PeDefs.PE_BUFFER_MAX));return m._pe.UTF8ToString(m._pe._pe_object_to_string_ext(J,C,T))}}function D(d){if(d){var l=m._pe.getClass(d);l&&(l=m._pe.getCache(l))&&(d=m._pe.getPointer(d))&&delete l[d]}}function fa(d,l){const E=[];l=Array(l);for(let K=0;K<d;K++)E.push(m._pe.ensureInt8(l));return E}function R(d){let l;Array.isArray(d[0])?(l=[],d.forEach(E=>{l.push(E[0],E[1])})):l=d;return l}function v(d,l,E,K=!1){if(K)for(K=0;K<2*l;K++)d[K]=m._pe.getValue(E+K*Float64Array.BYTES_PER_ELEMENT,
"double");else{K=0===d.length;for(let C=0;C<l;C++)K&&(d[C]=Array(2)),d[C][0]=m._pe.getValue(E,"double"),d[C][1]=m._pe.getValue(E+Float64Array.BYTES_PER_ELEMENT,"double"),E+=2*Float64Array.BYTES_PER_ELEMENT}}let r;m._pe=null;(function(d){function l(C,J,T){m._pe.ensureCache.prepare();var ea=R(T);const ka=T===ea;ea=m._pe.ensureFloat64(ea);(C=m._pe._pe_geog_to_proj(m._pe.getPointer(C),J,ea))&&v(T,J,ea,ka);return C}function E(C,J,T){return K(C,J,T,0)}function K(C,J,T,ea){m._pe.ensureCache.prepare();var ka=
R(T);const Z=T===ka;ka=m._pe.ensureFloat64(ka);(C=m._pe._pe_proj_to_geog_center(m._pe.getPointer(C),J,ka,ea))&&v(T,J,ka,Z);return C}d.geogToProj=l;d.projGeog=function(C,J,T,ea){switch(ea){case m.PeDefs.PE_TRANSFORM_P_TO_G:return E(C,J,T);case m.PeDefs.PE_TRANSFORM_G_TO_P:return l(C,J,T)}return 0};d.projToGeog=E;d.projToGeogCenter=K})(m.PeCSTransformations||(m.PeCSTransformations={}));(function(d){d.init=function(){d.PE_BUFFER_MAX=m._pe.PeDefs.prototype.PE_BUFFER_MAX;d.PE_NAME_MAX=m._pe.PeDefs.prototype.PE_NAME_MAX;
d.PE_MGRS_MAX=m._pe.PeDefs.prototype.PE_MGRS_MAX;d.PE_USNG_MAX=m._pe.PeDefs.prototype.PE_USNG_MAX;d.PE_DD_MAX=m._pe.PeDefs.prototype.PE_DD_MAX;d.PE_DDM_MAX=m._pe.PeDefs.prototype.PE_DDM_MAX;d.PE_DMS_MAX=m._pe.PeDefs.prototype.PE_DMS_MAX;d.PE_UTM_MAX=m._pe.PeDefs.prototype.PE_UTM_MAX;d.PE_PARM_MAX=m._pe.PeDefs.prototype.PE_PARM_MAX;d.PE_TYPE_NONE=m._pe.PeDefs.prototype.PE_TYPE_NONE;d.PE_TYPE_GEOGCS=m._pe.PeDefs.prototype.PE_TYPE_GEOGCS;d.PE_TYPE_PROJCS=m._pe.PeDefs.prototype.PE_TYPE_PROJCS;d.PE_TYPE_GEOGTRAN=
m._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;d.PE_TYPE_COORDSYS=m._pe.PeDefs.prototype.PE_TYPE_COORDSYS;d.PE_TYPE_UNIT=m._pe.PeDefs.prototype.PE_TYPE_UNIT;d.PE_TYPE_LINUNIT=m._pe.PeDefs.prototype.PE_TYPE_LINUNIT;d.PE_STR_OPTS_NONE=m._pe.PeDefs.prototype.PE_STR_OPTS_NONE;d.PE_STR_AUTH_NONE=m._pe.PeDefs.prototype.PE_STR_AUTH_NONE;d.PE_STR_AUTH_TOP=m._pe.PeDefs.prototype.PE_STR_AUTH_TOP;d.PE_STR_NAME_CANON=m._pe.PeDefs.prototype.PE_STR_NAME_CANON;d.PE_PARM_X0=m._pe.PeDefs.prototype.PE_PARM_X0;d.PE_PARM_ND=
m._pe.PeDefs.prototype.PE_PARM_ND;d.PE_TRANSFORM_1_TO_2=m._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;d.PE_TRANSFORM_2_TO_1=m._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;d.PE_TRANSFORM_P_TO_G=m._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;d.PE_TRANSFORM_G_TO_P=m._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;d.PE_HORIZON_RECT=m._pe.PeDefs.prototype.PE_HORIZON_RECT;d.PE_HORIZON_POLY=m._pe.PeDefs.prototype.PE_HORIZON_POLY;d.PE_HORIZON_LINE=m._pe.PeDefs.prototype.PE_HORIZON_LINE;d.PE_HORIZON_DELTA=m._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(m.PeDefs||
(m.PeDefs={}));(function(d){function l(J,T){let ea=null,ka=E[J];ka||(ka={},E[J]=ka);ka.hasOwnProperty(String(T))?ea=ka[T]:(J=m._pe.PeFactory.prototype.factoryByType(J,T),m._pe.compare(J,m._pe.NULL)||(ea=J,ka[T]=ea));return ea=C(ea)}const E={},K={},C=J=>{if(J){const T=J.getType();switch(T){case m.PeDefs.PE_TYPE_GEOGCS:J=m._pe.castObject(J,m._pe.PeGeogcs);break;case m.PeDefs.PE_TYPE_PROJCS:J=m._pe.castObject(J,m._pe.PeProjcs);break;case m.PeDefs.PE_TYPE_GEOGTRAN:J=m._pe.castObject(J,m._pe.PeGeogtran);
break;default:T&m.PeDefs.PE_TYPE_UNIT&&(J=m._pe.castObject(J,m._pe.PeUnit))}}return J};d.initialize=function(){m._pe.PeFactory.prototype.initialize(null)};d.coordsys=function(J){return l(m.PeDefs.PE_TYPE_COORDSYS,J)};d.factoryByType=l;d.fromString=function(J,T){let ea=null,ka=K[J];ka||(ka={},K[J]=ka);ka.hasOwnProperty(T)?ea=ka[T]:(J=m._pe.PeFactory.prototype.fromString(J,T),m._pe.compare(J,m._pe.NULL)||(ea=J,ka[T]=ea));return ea=C(ea)};d.geogcs=function(J){return l(m.PeDefs.PE_TYPE_GEOGCS,J)};d.geogtran=
function(J){return l(m.PeDefs.PE_TYPE_GEOGTRAN,J)};d.getCode=function(J){return m._pe.PeFactory.prototype.getCode(J)};d.projcs=function(J){return l(m.PeDefs.PE_TYPE_PROJCS,J)};d.unit=function(J){return l(m.PeDefs.PE_TYPE_UNIT,J)}})(m.PeFactory||(m.PeFactory={}));m.PeGCSExtent=null;(function(d){let l;d.init=function(){d.PE_GTLIST_OPTS_COMMON=m._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;l=m._pe._pe_getPeGTlistExtendedEntrySize()};d.getGTlist=function(E,K,C,J,T,ea){let ka=null;const Z=new m._pe.PeInteger(ea);
try{const F=m._pe.PeGTlistExtended.prototype.getGTlist(E,K,C,J,T,Z);if(ea=Z.val)if(ka=[F],1<ea){const G=m._pe.getPointer(F);for(E=1;E<ea;E++)ka.push(m._pe.wrapPointer(G+l*E,m._pe.PeGTlistExtendedEntry))}}finally{m._pe.destroy(Z)}return ka}})(m.PeGTlistExtended||(m.PeGTlistExtended={}));(function(d){d.destroy=function(l){if(l&&l.length){for(const E of l)D(E),E.getEntries().forEach(K=>{D(K);K=K.getGeogtran();D(K);K.getParameters().forEach(D);[K.getGeogcs1(),K.getGeogcs2()].forEach(C=>{D(C);const J=
C.getDatum();D(J);D(J.getSpheroid());D(C.getPrimem());D(C.getUnit())})});m._pe.PeGTlistExtendedEntry.prototype.Delete(l[0])}}})(m.PeGTlistExtendedEntry||(m.PeGTlistExtendedEntry={}));(function(d){d.geogToGeog=function(l,E,K,C,J){m._pe.ensureCache.prepare();var T=R(K);const ea=K===T;T=m._pe.ensureFloat64(T);let ka=0;C&&(ka=m._pe.ensureFloat64(C));(l=m._pe._pe_geog_to_geog(m._pe.getPointer(l),E,T,ka,J))&&v(K,E,T,ea);return l}})(m.PeGTTransformations||(m.PeGTTransformations={}));(function(d){const l=
(K,C,J,T,ea,ka)=>{m._pe.ensureCache.prepare();switch(K){case "dd":var Z=m._pe._pe_geog_to_dd;var F=m.PeDefs.PE_DD_MAX;break;case "ddm":Z=m._pe._pe_geog_to_ddm;F=m.PeDefs.PE_DDM_MAX;break;case "dms":Z=m._pe._pe_geog_to_dms,F=m.PeDefs.PE_DMS_MAX}K=0;C&&(K=m._pe.getPointer(C));C=R(T);C=m._pe.ensureFloat64(C);F=fa(J,F);T=m._pe.ensureInt32(F);if(ea=Z(K,J,C,ea,T))for(Z=0;Z<J;Z++)ka[Z]=m._pe.UTF8ToString(F[Z]);return ea},E=(K,C,J,T,ea)=>{m._pe.ensureCache.prepare();switch(K){case "dd":var ka=m._pe._pe_dd_to_geog;
break;case "ddm":ka=m._pe._pe_ddm_to_geog;break;case "dms":ka=m._pe._pe_dms_to_geog}K=0;C&&(K=m._pe.getPointer(C));C=T.map(Z=>m._pe.ensureString(Z));T=m._pe.ensureInt32(C);C=m._pe.ensureFloat64(Array(2*J));(ka=ka(K,J,T,C))&&v(ea,J,C);return ka};d.geog_to_dms=function(K,C,J,T,ea){return l("dms",K,C,J,T,ea)};d.dms_to_geog=function(K,C,J,T){return E("dms",K,C,J,T)};d.geog_to_ddm=function(K,C,J,T,ea){return l("ddm",K,C,J,T,ea)};d.ddm_to_geog=function(K,C,J,T){return E("ddm",K,C,J,T)};d.geog_to_dd=function(K,
C,J,T,ea){return l("dd",K,C,J,T,ea)};d.dd_to_geog=function(K,C,J,T){return E("dd",K,C,J,T)}})(m.PeNotationDms||(m.PeNotationDms={}));(function(d){d.init=function(){d.PE_MGRS_STYLE_NEW=m._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;d.PE_MGRS_STYLE_OLD=m._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;d.PE_MGRS_STYLE_AUTO=m._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;d.PE_MGRS_180_ZONE_1_PLUS=m._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;d.PE_MGRS_ADD_SPACES=m._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};
d.geog_to_mgrs_extended=function(l,E,K,C,J,T,ea){m._pe.ensureCache.prepare();let ka=0;l&&(ka=m._pe.getPointer(l));l=R(K);K=m._pe.ensureFloat64(l);l=fa(E,m.PeDefs.PE_MGRS_MAX);const Z=m._pe.ensureInt32(l);if(C=m._pe._pe_geog_to_mgrs_extended(ka,E,K,C,J,T,Z))for(J=0;J<E;J++)ea[J]=m._pe.UTF8ToString(l[J]);return C};d.mgrs_to_geog_extended=function(l,E,K,C,J){m._pe.ensureCache.prepare();let T=0;l&&(T=m._pe.getPointer(l));l=K.map(ea=>m._pe.ensureString(ea));K=m._pe.ensureInt32(l);l=m._pe.ensureFloat64(Array(2*
E));(C=m._pe._pe_mgrs_to_geog_extended(T,E,K,C,l))&&v(J,E,l);return C}})(m.PeNotationMgrs||(m.PeNotationMgrs={}));(function(d){d.geog_to_usng=function(l,E,K,C,J,T,ea){m._pe.ensureCache.prepare();let ka=0;l&&(ka=m._pe.getPointer(l));l=R(K);K=m._pe.ensureFloat64(l);l=fa(E,m.PeDefs.PE_MGRS_MAX);const Z=m._pe.ensureInt32(l);if(C=m._pe._pe_geog_to_usng(ka,E,K,C,J,T,Z))for(J=0;J<E;J++)ea[J]=m._pe.UTF8ToString(l[J]);return C};d.usng_to_geog=function(l,E,K,C){m._pe.ensureCache.prepare();var J=0;l&&(J=m._pe.getPointer(l));
l=K.map(T=>m._pe.ensureString(T));K=m._pe.ensureInt32(l);l=m._pe.ensureFloat64(Array(2*E));(J=m._pe._pe_usng_to_geog(J,E,K,l))&&v(C,E,l);return J}})(m.PeNotationUsng||(m.PeNotationUsng={}));(function(d){d.init=function(){d.PE_UTM_OPTS_NONE=m._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;d.PE_UTM_OPTS_ADD_SPACES=m._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;d.PE_UTM_OPTS_NS=m._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};d.geog_to_utm=function(l,E,K,C,J){m._pe.ensureCache.prepare();var T=0;l&&
(T=m._pe.getPointer(l));l=R(K);K=m._pe.ensureFloat64(l);l=fa(E,m.PeDefs.PE_UTM_MAX);const ea=m._pe.ensureInt32(l);if(C=m._pe._pe_geog_to_utm(T,E,K,C,ea))for(T=0;T<E;T++)J[T]=m._pe.UTF8ToString(l[T]);return C};d.utm_to_geog=function(l,E,K,C,J){m._pe.ensureCache.prepare();let T=0;l&&(T=m._pe.getPointer(l));l=K.map(ea=>m._pe.ensureString(ea));K=m._pe.ensureInt32(l);l=m._pe.ensureFloat64(Array(2*E));(C=m._pe._pe_utm_to_geog(T,E,K,C,l))&&v(J,E,l);return C}})(m.PeNotationUtm||(m.PeNotationUtm={}));(function(d){const l=
new Map;d.init=function(){d.PE_PCSINFO_OPTION_NONE=m._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;d.PE_PCSINFO_OPTION_DOMAIN=m._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;d.PE_POLE_OUTSIDE_BOUNDARY=m._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;d.PE_POLE_POINT=m._pe.PePCSInfo.prototype.PE_POLE_POINT};d.generate=function(E,K=d.PE_PCSINFO_OPTION_DOMAIN){let C,J;l.has(E)&&(J=l.get(E),J[K]&&(C=J[K]));C||(C=m._pe.PePCSInfo.prototype.generate(E,K),J||(J=[],l.set(E,J)),J[K]=C);return C}})(m.PePCSInfo||
(m.PePCSInfo={}));(function(d){d.version_string=function(){return m._pe.PeVersion.prototype.version_string()}})(m.PeVersion||(m.PeVersion={}));var t=Object.freeze({__proto__:null,get _pe(){return m._pe},isLoaded:I,isSupported:k,load:y,get PeCSTransformations(){return m.PeCSTransformations},get PeDefs(){return m.PeDefs},get PeFactory(){return m.PeFactory},get PeGCSExtent(){return m.PeGCSExtent},get PeGTlistExtended(){return m.PeGTlistExtended},get PeGTlistExtendedEntry(){return m.PeGTlistExtendedEntry},
get PeGTTransformations(){return m.PeGTTransformations},get PeNotationDms(){return m.PeNotationDms},get PeNotationMgrs(){return m.PeNotationMgrs},get PeNotationUsng(){return m.PeNotationUsng},get PeNotationUtm(){return m.PeNotationUtm},get PePCSInfo(){return m.PePCSInfo},get PeVersion(){return m.PeVersion},_init:u});m._init=u;m.isLoaded=I;m.isSupported=k;m.load=y;m.pe=t})},"esri/assets":function(){define("exports ./config ./core/Logger ./core/Error ./core/urlUtils ./request".split(" "),function(n,
m,da,O,p,I){function k(u){if(!m.assetsPath)throw y.errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new O("assets:path-not-set","config.assetsPath is not set");return p.join(m.assetsPath,u)}const y=da.getLogger("esri.assets");n.fetchAsset=function(u,D){return I(k(u),D)};n.getAssetUrl=k;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/geometry/support/aaBoundingRect":function(){define(["exports","../../core/has","../../core/maybe",
"../Extent"],function(n,m,da,O){function p(r=v){return[r[0],r[1],r[2],r[3]]}function I(r){return r[0]>=r[2]?0:r[2]-r[0]}function k(r){return r[1]>=r[3]?0:r[3]-r[1]}function y(r,t,d){return t>=r[0]&&d>=r[1]&&t<=r[2]&&d<=r[3]}function u(r,t){r[0]=t[0];r[1]=t[1];r[2]=t[2];r[3]=t[3];return r}function D(r){return 4===r.length}function fa(r,t,d){return r<t?t:r>d?d:r}const R=[Infinity,Infinity,-Infinity,-Infinity],v=[0,0,0,0];n.NEGATIVE_INFINITY=R;n.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];
n.UNIT=[0,0,1,1];n.ZERO=v;n.allFinite=function(r){for(let t=0;4>t;t++)if(!isFinite(r[t]))return!1;return!0};n.area=function(r){return I(r)*k(r)};n.center=function(r,t=[0,0]){t[0]=(r[0]+r[2])/2;t[1]=(r[1]+r[3])/2;return t};n.clone=function(r){return[r[0],r[1],r[2],r[3]]};n.contains=function(r,t){return t[0]>=r[0]&&t[2]<=r[2]&&t[1]>=r[1]&&t[3]<=r[3]};n.containsPoint=function(r,t){return y(r,t[0],t[1])};n.containsPointObject=function(r,t){return y(r,t.x,t.y)};n.containsPointWithMargin=function(r,t,d){return t[0]>=
r[0]-d&&t[1]>=r[1]-d&&t[0]<=r[2]+d&&t[1]<=r[3]+d};n.containsXY=y;n.create=p;n.diameter=function(r){const t=I(r);r=k(r);return Math.sqrt(t*t+r*r)};n.distance=function(r,t){const d=(r[1]+r[3])/2,l=Math.max(Math.abs(t[0]-(r[0]+r[2])/2)-I(r)/2,0);r=Math.max(Math.abs(t[1]-d)-k(r)/2,0);return Math.sqrt(l*l+r*r)};n.empty=function(r){return r?u(r,R):p(R)};n.equals=function(r,t,d){if(da.isNone(r)||da.isNone(t))return r===t;if(!D(r)||!D(t))return!1;if(d)for(let l=0;l<r.length;l++){if(!d(r[l],t[l]))return!1}else for(d=
0;d<r.length;d++)if(r[d]!==t[d])return!1;return!0};n.expand=function(r,t,d=r){if("length"in t)if(D(t))d[0]=Math.min(r[0],t[0]),d[1]=Math.min(r[1],t[1]),d[2]=Math.max(r[2],t[2]),d[3]=Math.max(r[3],t[3]);else{if(2===t.length||3===t.length)d[0]=Math.min(r[0],t[0]),d[1]=Math.min(r[1],t[1]),d[2]=Math.max(r[2],t[0]),d[3]=Math.max(r[3],t[1])}else switch(t.type){case "extent":d[0]=Math.min(r[0],t.xmin);d[1]=Math.min(r[1],t.ymin);d[2]=Math.max(r[2],t.xmax);d[3]=Math.max(r[3],t.ymax);break;case "point":d[0]=
Math.min(r[0],t.x),d[1]=Math.min(r[1],t.y),d[2]=Math.max(r[2],t.x),d[3]=Math.max(r[3],t.y)}return d};n.expandPointInPlace=function(r,t){t[0]<r[0]&&(r[0]=t[0]);t[0]>r[2]&&(r[2]=t[0]);t[1]<r[1]&&(r[1]=t[1]);t[1]>r[3]&&(r[3]=t[1])};n.expandWithNestedArray=function(r,t,d=r){const l=t.length;let E=r[0],K=r[1],C=r[2];r=r[3];for(let J=0;J<l;J++){const T=t[J];E=Math.min(E,T[0]);K=Math.min(K,T[1]);C=Math.max(C,T[0]);r=Math.max(r,T[1])}d[0]=E;d[1]=K;d[2]=C;d[3]=r;return d};n.fromExtent=function(r,t=p()){t[0]=
r.xmin;t[1]=r.ymin;t[2]=r.xmax;t[3]=r.ymax;return t};n.fromValues=function(r,t,d,l,E=p()){E[0]=r;E[1]=t;E[2]=d;E[3]=l;return E};n.height=k;n.intersection=function(r,t,d=r){const l=t[0],E=t[1],K=t[2];t=t[3];d[0]=fa(r[0],l,K);d[1]=fa(r[1],E,t);d[2]=fa(r[2],l,K);d[3]=fa(r[3],E,t);return d};n.intersects=function(r,t){return Math.max(t[0],r[0])<=Math.min(t[2],r[2])&&Math.max(t[1],r[1])<=Math.min(t[3],r[3])};n.is=D;n.isPoint=function(r){return(0===I(r)||!isFinite(r[0]))&&(0===k(r)||!isFinite(r[1]))};n.offset=
function(r,t,d,l=r){l[0]=r[0]+t;l[1]=r[1]+d;l[2]=r[2]+t;l[3]=r[3]+d;return l};n.pad=function(r,t,d=r){d[0]=r[0]-t;d[1]=r[1]-t;d[2]=r[2]+t;d[3]=r[3]+t;return d};n.set=u;n.setMax=function(r,t,d=r){d[2]=t[0];d[3]=t[1];d!==r&&(d[0]=r[0],d[1]=r[1]);return r};n.setMin=function(r,t,d=r){d[0]=t[0];d[1]=t[1];d!==r&&(d[2]=r[2],d[3]=r[3]);return d};n.size=function(r,t){t[0]=r[2]-r[0];t[1]=r[3]-r[1]};n.toExtent=function(r,t){return new O({xmin:r[0],ymin:r[1],xmax:r[2],ymax:r[3],spatialReference:t})};n.width=
I;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/geometry/support/geodesicConstants":function(){define(["exports","./Ellipsoid"],function(n,m){const da=Math.PI/180;var O=m.earth.radius;const p=m.earth.eccentricitySquared;O={a1:O*p,a2:O*p*O*p,a3:O*p*p/2,a4:O*p*O*p*2.5,a5:O*p+O*p*p/2,a6:1-p};m={4326:{a:m.earth.radius,f:m.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,f:0},104902:{a:6051800,f:0},104903:{a:m.moon.radius,f:m.moon.flattening},104904:{a:3393400,f:.005207166853303471},
104905:{a:m.mars.radius,f:m.mars.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1E4,f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},104914:{a:4E4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,f:3},104922:{a:18E3,f:0},104923:{a:14E3,f:0},104924:{a:49300,f:0},104925:{a:60268E3,f:.09796243445941462},104926:{a:16E3,
f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,f:0},104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,f:0},104938:{a:11E4,f:0},104939:{a:50100,f:0},104940:{a:764E3,f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},104945:{a:578900,f:0},104946:{a:33E3,f:0},104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,f:0},
104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},104961:{a:74E3,f:0},104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,f:0},104968:{a:1352600,f:0},104969:{a:1195E3,f:0},104970:{a:593E3,f:0},104971:{a:m.mars.radius,f:0},
104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};n.WKT_SPHEROID_REGEX=/SPHEROID\[([^\]]+)]/i;n.earthEllipsoidConstants=O;n.spheroids=m;n.toRadians=da;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/geometry/support/GeographicTransformation":function(){define(["./GeographicTransformationStep"],function(n){return function(){function m(O){this.steps=[];this._cached_projection={};this._chain="";this._gtlistentry=null;if(O&&O.steps)for(const p of O.steps)p instanceof n?this.steps.push(p):
this.steps.push(new n({wkid:p.wkid,wkt:p.wkt,isInverse:p.isInverse}))}m.cacheKey=function(O,p){return[void 0!==O.wkid&&null!==O.wkid?O.wkid.toString():"-1",void 0!==O.wkt&&null!==O.wkt?O.wkt.toString():"",void 0!==p.wkid&&null!==p.wkid?p.wkid.toString():"-1",void 0!==p.wkt&&null!==p.wkt?p.wkt.toString():""].join()};m.fromGE=function(O){const p=new m;let I="";for(const k of O.steps)O=n.fromGE(k),p.steps.push(O),I+=O.uid.toString()+",";p._cached_projection={};p._gtlistentry=null;p._chain=I;return p};
var da=m.prototype;da.getInverse=function(){const O=new m;O.steps=[];for(let p=this.steps.length-1;0<=p;p--)O.steps.push(this.steps[p].getInverse());return O};da.getGTListEntry=function(){let O="";for(const p of this.steps)O+=p.uid.toString()+",";O!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=O);return this._gtlistentry};da.assignCachedGe=function(O,p,I){this._cached_projection[m.cacheKey(O,p)]=I};da.getCachedGeTransformation=function(O,p){let I="";for(const k of this.steps)I+=
k.uid.toString()+",";I!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=I);O=this._cached_projection[m.cacheKey(O,p)];return void 0===O?null:O};return m}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(n){let m=0;return function(){function da(O=null){this.uid=m++;O?(this._wkt=void 0!==O.wkt?O.wkt:null,this._wkid=void 0!==O.wkid?O.wkid:-1,this._isInverse=void 0!==O.isInverse?!0===O.isInverse:
!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}da.fromGE=function(O){const p=new da;p._wkt=O.wkt;p._wkid=O.wkid;p._isInverse=O.isInverse;return p};da.prototype.getInverse=function(){const O=new da;O._wkt=this.wkt;O._wkid=this._wkid;O._isInverse=!this.isInverse;return O};n._createClass(da,[{key:"wkt",get:function(){return this._wkt},set:function(O){this._wkt=O;this.uid=m++}},{key:"wkid",get:function(){return this._wkid},set:function(O){this._wkid=O;this.uid=m++}},{key:"isInverse",get:function(){return this._isInverse},
set:function(O){this._isInverse=O;this.uid=m++}}]);return da}()})},"esri/core/number":function(){define(["exports","./string","../intl/locale"],function(n,m,da){function O(R){R||(R=da.getLocale());let v=R in u;if(!v){const l=R.split("-");1<l.length&&l[0]in u&&(R=l[0],v=!0);v||(R="en")}const [r,t,d="#,##0.###"]=u[R];return{decimal:r,group:t,pattern:d}}function p(R,v,r){r=r||{};!0===r.places&&(r.places=0);Infinity===r.places&&(r.places=6);v=v.split(".");var t="string"===typeof r.places&&r.places.indexOf(","),
d=r.places;t?d=r.places.substring(t+1):0<=d||(d=(v[1]||[]).length);0>r.round||(R=Number(R.toFixed(Number(d))));R=String(Math.abs(R)).split(".");const l=R[1]||"";v[1]||r.places?(t&&(r.places=r.places.substring(0,t)),t=void 0!==r.places?r.places:v[1]&&v[1].lastIndexOf("0")+1,t>l.length&&(R[1]=l.padEnd(Number(t),"0")),d<l.length&&(R[1]=l.substr(0,Number(d)))):R[1]&&R.pop();d=v[0].replace(",","");t=d.indexOf("0");-1!==t&&(t=d.length-t,t>R[0].length&&(R[0]=R[0].padStart(t,"0")),-1===d.indexOf("#")&&(R[0]=
R[0].substr(R[0].length-t)));d=v[0].lastIndexOf(",");let E,K;-1!==d&&(E=v[0].length-d-1,v=v[0].substr(0,d),d=v.lastIndexOf(","),-1!==d&&(K=v.length-d-1));v=[];for(d=R[0];d;)t=d.length-E,v.push(0<t?d.substr(t):d),d=0<t?d.slice(0,t):"",K&&(E=K,K=void 0);R[0]=v.reverse().join(r.group||",");return R.join(r.decimal||".")}function I(R){R=R||{};var v=O(R.locale);const r=R.pattern||v.pattern,t=v.group,d=v.decimal;let l=1;if(-1!==r.indexOf("%"))l/=100;else if(-1!==r.indexOf("\u2030"))l/=1E3;else if(-1!==r.indexOf("\u00a4"))throw Error("currency notation not supported");
v=r.split(";");1===v.length&&v.push("-"+v[0]);return{regexp:fa(v,function(E){E="(?:"+m.escapeRegExpString(E,".")+")";return E.replace(D,function(K){const C={signed:!1,separator:R.strict?t:[t,""],fractional:R.fractional,decimal:d,exponent:!1};K=K.split(".");let J=R.places;1===K.length&&1!==l&&(K[1]="###");1===K.length||0===J?C.fractional=!1:(void 0===J&&(J=R.pattern?K[1].lastIndexOf("0")+1:Infinity),J&&null==R.fractional&&(C.fractional=!0),!R.places&&J<K[1].length&&(J+=","+K[1].length),C.places=J);
K=K[0].split(",");1<K.length&&(C.groupSize=K.pop().length,1<K.length&&(C.groupSize2=K.pop().length));return"("+k(C)+")"})},!0).replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:t,decimal:d,factor:l}}function k(R){R=R||{};"places"in R||(R.places=Infinity);"string"!==typeof R.decimal&&(R.decimal=".");"fractional"in R&&!/^0/.test(String(R.places))||(R.fractional=[!0,!1]);"exponent"in R||(R.exponent=[!0,!1]);"eSigned"in R||(R.eSigned=[!0,!1]);var v=y(R);const r=fa(R.fractional,function(d){let l="";d&&0!==R.places&&
(l="\\"+R.decimal,l=Infinity===R.places?"(?:"+l+"\\d+)?":l+("\\d{"+R.places+"}"));return l},!0),t=fa(R.exponent,function(d){return d?"([eE]"+y({signed:R.eSigned})+")":""});v+=r;r&&(v="(?:(?:"+v+")|(?:"+r+"))");return v+t}function y(R){R=R||{};"signed"in R||(R.signed=[!0,!1]);"separator"in R?"groupSize"in R||(R.groupSize=3):R.separator="";const v=fa(R.signed,function(t){return t?"[-+]":""},!0),r=fa(R.separator,function(t){if(!t)return"(?:\\d+)";t=m.escapeRegExpString(t);" "===t?t="\\s":"\u00a0"===
t&&(t="\\s\\xa0");const d=R.groupSize,l=R.groupSize2;return l?(t="(?:0|[1-9]\\d{0,"+(l-1)+"}(?:["+t+"]\\d{"+l+"})*["+t+"]\\d{"+d+"})",0<d-l?"(?:"+t+"|(?:0|[1-9]\\d{0,"+(d-1)+"}))":t):"(?:0|[1-9]\\d{0,"+(d-1)+"}(?:["+t+"]\\d{"+d+"})*)"},!0);return v+r}const u={ar:[".",","],bs:[",","."],ca:[",","."],cs:[",","\u00a0"],da:[",","."],de:[",","."],"de-ch":[".","\u2019"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",","\u00a0"],fi:[",","\u00a0"],fr:[",","\u202f"],"fr-ch":[",",
"\u202f"],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[",","\u00a0"],id:[",","."],it:[",","."],"it-ch":[".","\u2019"],ja:[".",","],ko:[".",","],lt:[",","\u00a0"],lv:[",","\u00a0"],mk:[",","."],nb:[",","\u00a0"],nl:[",","."],pl:[",","\u00a0"],pt:[",","."],"pt-pt":[",","\u00a0"],ro:[",","."],ru:[",","\u00a0"],sk:[",","\u00a0"],sl:[",","."],sr:[",","."],sv:[",","\u00a0"],th:[".",","],tr:[",","."],uk:[",","\u00a0"],vi:[",","."],zh:[".",","]},D=/[#0,]*[#0](?:\.0*#*)?/,fa=function(R,v,r){if(!(R instanceof
Array))return v(R);const t=[];for(let d=0;d<R.length;d++)t.push(v(R[d]));R=t.join("|");return"("+(r?"?:":"")+R+")"};n._parseInfo=I;n.format=function(R,v){v={...v};var r=O(v.locale);v.customs=r;var t=v.pattern||r.pattern;if(isNaN(R)||Infinity===Math.abs(R))return null;{v=v||{};r=v.customs.group;const l=v.customs.decimal;t=t.split(";");var d=t[0];t=t[0>R?1:0]||"-"+d;if(-1!==t.indexOf("%"))R*=100;else if(-1!==t.indexOf("\u2030"))R*=1E3;else{if(-1!==t.indexOf("\u00a4"))throw Error("currency notation not supported");
if(-1!==t.indexOf("E"))throw Error("exponential notation not supported");}const E=D;d=d.match(E);if(!d)throw Error("unable to find a number expression in pattern: "+t);!1===v.fractional&&(v.places=0);R=t.replace(E,p(R,d[0],{decimal:l,group:r,places:v.places,round:v.round}))}return R};n.getCustoms=O;n.parse=function(R,v){v=I(v);R=(new RegExp("^"+v.regexp+"$")).exec(R);if(!R)return NaN;let r=R[1];if(!R[1]){if(!R[2])return NaN;r=R[2];v.factor*=-1}r=r.replace(new RegExp("["+v.group+"\\s\\xa0]","g"),"").replace(v.decimal,
".");return Number(r)*v.factor};n.regexp=function(R){return I(R).regexp};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/intl/locale":function(){define(["exports","../core/global"],function(n,m){function da(){var t,d;return null!=(t=null!=fa?fa:null==(d=m.navigator)?void 0:d.language)?t:"en"}function O(){void 0===D&&(D=da());return D}function p(){var t;const d=null!=(t=u)?t:da();D!==d&&(D=d,[...r].forEach(l=>{l.call(null,d)}),[...v].forEach(l=>{l.call(null,d)}))}var I,k,y;let u=void 0,D=
void 0;const fa=null!=(I=null==(k=m.esriConfig)?void 0:k.locale)?I:null==(y=m.dojoConfig)?void 0:y.locale,R={he:!0,ar:!0},v=[],r=[];null==m.addEventListener?void 0:m.addEventListener("languagechange",p);n.beforeLocaleChange=function(t){r.push(t);return{remove(){v.splice(r.indexOf(t),1)}}};n.getDefaultLocale=da;n.getLocale=O;n.onLocaleChange=function(t){v.push(t);return{remove(){v.splice(v.indexOf(t),1)}}};n.prefersRTL=function(t=O()){t=/^([a-zA-Z]{2,3})(?:[_\-]\w+)*$/.exec(t);t=null==t?void 0:t[1].toLowerCase();
return void 0!==t&&(R[t]||!1)};n.setLocale=function(t){u=t?t:void 0;p()};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/graphics/OptimizedFeature":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(n){return function(){function m(da=null,O={},p,I){this.geohashY=this.geohashX=this.displayId=0;this.geometry=da;O&&(this.attributes=O);p&&(this.centroid=p);null!=I&&(this.objectId=I)}m.prototype.weakClone=function(){const da=new m(this.geometry,this.attributes,this.centroid,
this.objectId);da.displayId=this.displayId;da.geohashX=this.geohashX;da.geohashY=this.geohashY;return da};n._createClass(m,[{key:"hasGeometry",get:function(){return!(!this.geometry||!this.geometry.coords||!this.geometry.coords.length)}}]);return m}()})},"esri/layers/graphics/OptimizedGeometry":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(n){return function(){function m(O=[],p=[],I=!1){this.lengths=null!=O?O:[];this.coords=null!=p?p:[];this.hasIndeterminateRingOrder=I}var da=
m.prototype;da.forEachVertex=function(O){let p=0;this.lengths.length||O(this.coords[0],this.coords[1]);for(let I=0;I<this.lengths.length;I++){const k=this.lengths[I];for(let y=0;y<k;y++)O(this.coords[2*(y+p)],this.coords[2*(y+p)+1]);p+=k}};da.clone=function(){return new m(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)};n._createClass(m,[{key:"isPoint",get:function(){return 0===this.lengths.length}}]);return m}()})},"esri/layers/support/FieldsIndex":function(){define(function(){return function(){function n(da){this.fields=
da;this._fieldsMap=new Map;this._dateFieldsSet=new Set;this.dateFields=[];if(da){var O=[];for(const p of da)if(da=p&&p.name){const I=da.toLowerCase().trim();this._fieldsMap.set(da,p);this._fieldsMap.set(I,p);O.push(I);if("date"===p.type||"esriFieldTypeDate"===p.type)this.dateFields.push(p),this._dateFieldsSet.add(p)}O.sort();this.uid=O.join(",")}}var m=n.prototype;m.destroy=function(){this._fieldsMap.clear()};m.has=function(da){return null!=this.get(da)};m.get=function(da){return null!=da?this._fieldsMap.get(da)||
this._fieldsMap.get(da.toLowerCase().trim()):void 0};m.isDateField=function(da){return this._dateFieldsSet.has(this.get(da))};m.normalizeFieldName=function(da){if(da=this.get(da))return da.name};return n}()})},"esri/geometry/geometryAdapters/json":function(){define(["exports"],function(n){let m=function(k,y,u){this.x=k;this.y=y;this.spatialReference=u;this.m=this.z=void 0},da=function(k,y,u,D){this.rings=k;this.spatialReference=y;this.hasM=this.hasZ=void 0;u&&(this.hasZ=u);D&&(this.hasM=D)},O=function(k,
y,u,D){this.paths=k;this.spatialReference=y;this.hasM=this.hasZ=void 0;u&&(this.hasZ=u);D&&(this.hasM=D)},p=function(k,y,u,D){this.points=k;this.spatialReference=y;this.hasM=this.hasZ=void 0;u&&(this.hasZ=u);D&&(this.hasM=D)},I=function(k,y,u,D,fa){this.xmin=k;this.ymin=y;this.xmax=u;this.ymax=D;this.spatialReference=fa;this.mmax=this.mmin=this.zmax=this.zmin=void 0};n.jsonAdapter={convertToGEGeometry:function(k,y){return null==y?null:k.convertJSONToGeometry(y)},exportPoint:function(k,y,u){u=new m(k.getPointX(y),
k.getPointY(y),u);const D=k.hasZ(y),fa=k.hasM(y);D&&(u.z=k.getPointZ(y));fa&&(u.m=k.getPointM(y));return u},exportPolygon:function(k,y,u){return new da(k.exportPaths(y),u,k.hasZ(y),k.hasM(y))},exportPolyline:function(k,y,u){return new O(k.exportPaths(y),u,k.hasZ(y),k.hasM(y))},exportMultipoint:function(k,y,u){return new p(k.exportPoints(y),u,k.hasZ(y),k.hasM(y))},exportExtent:function(k,y,u){var D=k.hasZ(y);const fa=k.hasM(y);u=new I(k.getXMin(y),k.getYMin(y),k.getXMax(y),k.getYMax(y),u);D&&(D=k.getZExtent(y),
u.zmin=D.vmin,u.zmax=D.vmax);fa&&(k=k.getMExtent(y),u.mmin=k.vmin,u.mmax=k.vmax);return u}};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/graphics/sources/support/clientSideDefaults":function(){define(["exports","../../../../core/has","../../../../core/lang","../../../../symbols/support/defaultsJSON"],function(n,m,da,O){n.createDefaultAttributesFunction=function(p,I){if(m("csp-restrictions"))return()=>({[I]:null,...p});try{let k=`this.${I} = null;`;for(const u in p){const D=u.indexOf(".")?
`["${u}"]`:`.${u}`;k+=`this${D} = ${JSON.stringify(p[u])};`}const y=new Function(k);return()=>new y}catch(k){return()=>({[I]:null,...p})}};n.createDefaultTemplate=function(p={}){return[{name:"New Feature",description:"",prototype:{attributes:da.clone(p)}}]};n.createDrawingInfo=function(p){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===p||"esriGeometryMultipoint"===p?O.defaultPointSymbolJSON:"esriGeometryPolyline"===p?O.defaultPolylineSymbolJSON:O.defaultPolygonSymbolJSON}}};Object.defineProperty(n,
"__esModule",{value:!0})})},"esri/symbols/support/defaultsJSON":function(){define(["exports"],function(n){const m=[252,146,31,255],da={type:"esriSMS",style:"esriSMSCircle",size:6,color:m,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},O={type:"esriSLS",style:"esriSLSSolid",width:.75,color:m};n.defaultColor=m;n.defaultOutlineColor=[153,153,153,255];n.defaultPointSymbolJSON=da;n.defaultPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",
style:"esriSLSSolid",width:.75,color:[255,255,255,191]}};n.defaultPolylineSymbolJSON=O;n.defaultTextSymbolJSON={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0};n.errorPointSymbolJSON={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5};n.errorPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[0,0,
0,255],outline:null};n.errorPolylineSymbolJSON={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/graphics/data/projectionSupport":function(){define(["exports","../../../geometry/support/spatialReferenceUtils","../../../geometry/support/webMercatorUtils","../../../geometry/projection","../../../geometry/geometryAdapters/json"],function(n,m,da,O,p){function I(v,r){if(!r)return null;if("x"in r){var t={x:0,y:0};[t.x,t.y]=
v(r.x,r.y,u);null!=r.z&&(t.z=r.z);null!=r.m&&(t.m=r.m);return t}if("xmin"in r)return t={xmin:0,ymin:0,xmax:0,ymax:0},[t.xmin,t.ymin]=v(r.xmin,r.ymin,u),[t.xmax,t.ymax]=v(r.xmax,r.ymax,u),r.hasZ&&(t.zmin=r.zmin,t.zmax=r.zmax,t.hasZ=!0),r.hasM&&(t.mmin=r.mmin,t.mmax=r.mmax,t.hasM=!0),t;if("rings"in r)return{rings:k(r.rings,v),hasM:r.hasM,hasZ:r.hasZ};if("paths"in r)return{paths:k(r.paths,v),hasM:r.hasM,hasZ:r.hasZ};if("points"in r)return{points:y(r.points,v),hasM:r.hasM,hasZ:r.hasZ}}function k(v,r){const t=
[];for(const d of v)t.push(y(d,r));return t}function y(v,r){const t=[];for(const d of v)v=r(d[0],d[1],[0,0]),t.push(v),2<d.length&&v.push(d[2]),3<d.length&&v.push(d[3]);return t}const u=[0,0],D=I.bind(null,da.lngLatToXY),fa=I.bind(null,da.xyToLngLat),R=new (function(){function v(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}var r=v.prototype;r.push=async function(t,d,l){t&&t.length&&d&&l&&m.equals(d,l);const E={geometries:t,inSpatialReference:d,outSpatialReference:l,resolve:null};
this._jobs.push(E);return new Promise(K=>{E.resolve=K;null===this._timer&&(this._timer=setTimeout(this._process,10))})};r._process=function(){this._timer=null;const t=this._jobs.shift();if(t){var {geometries:d,inSpatialReference:l,outSpatialReference:E,resolve:K}=t;da.canProject(l,E)?m.isWebMercator(E)?K(d.map(D)):K(d.map(fa)):K(O.projectMany(p.jsonAdapter,d,l,E,null));0<this._jobs.length&&(this._timer=setTimeout(this._process,10))}};return v}());n.checkProjectionSupport=async function(v,r){r&&(v=
Array.isArray(v)?v.map(t=>{var d;return null==(d=t.geometry)?void 0:d.spatialReference}):[v],await O.initializeProjection(v.map(t=>({source:t,dest:r}))))};n.project=function(v,r,t){if(!v)return v;t||(t=r,r=v.spatialReference);return m.isValid(r)&&m.isValid(t)&&!m.equals(r,t)?da.canProject(r,t)?m.isWebMercator(t)?D(v):fa(v):O.projectMany(p.jsonAdapter,[v],r,t,null)[0]:v};n.projectMany=async function(v,r,t){return R.push(v,r,t)};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/graphics/data/FeatureStore":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../core/Logger ../../../core/Error ../../../core/Evented ../../../geometry/support/aaBoundingRect ../featureConversionUtils ../../../geometry/support/aaBoundingBox ./BoundsStore ./optimizedFeatureQueryEngineAdapter".split(" "),
function(n,m,da,O,p,I,k,y,u,D){return function(){function fa(v){this.geometryInfo=v;this._boundsStore=new u.BoundsStore;this._featuresById=new Map;this._markedIds=new Set;this.events=new p;this.featureAdapter=D.optimizedFeatureQueryEngineAdapter}var R=fa.prototype;R.add=function(v){this._add(v);this._emitChanged()};R.addMany=function(v){for(const r of v)this._add(r);this._emitChanged()};R.clear=function(){this._featuresById.clear();this._boundsStore.clear();this._emitChanged()};R.removeById=function(v){v=
this._featuresById.get(v);if(!v)return null;this._remove(v);this._emitChanged();return v};R.removeManyById=function(v){this._boundsStore.invalidateIndex();for(const r of v)(v=this._featuresById.get(r))&&this._remove(v);this._emitChanged()};R.forEachBounds=function(v,r,t){for(const d of v)(v=this._boundsStore.get(d.objectId))&&r(y.fromRect(t,v))};R.getFeature=function(v){return this._featuresById.get(v)};R.has=function(v){return this._featuresById.has(v)};R.forEach=function(v){this._featuresById.forEach(r=>
v(r))};R.forEachInBounds=function(v,r){this._boundsStore.forEachInBounds(v,t=>{r(this._featuresById.get(t))})};R.startMarkingUsedFeatures=function(){this._boundsStore.invalidateIndex();this._markedIds.clear()};R.sweep=function(){let v=!1;this._featuresById.forEach((r,t)=>{this._markedIds.has(t)||(v=!0,this._remove(r))});this._markedIds.clear();v&&this._emitChanged()};R._emitChanged=function(){this.events.emit("changed",void 0)};R._add=function(v){if(v){var r=v.objectId;if(null==r)da.getLogger("esri.layers.graphics.data.FeatureStore").error(new O("featurestore:invalid-feature",
"feature id is missing",{feature:v}));else{var t=this._featuresById.get(r);this._markedIds.add(r);if(t){v.displayId=t.displayId;var d=this._boundsStore.get(r);this._boundsStore.delete(r)}else if(m.isSome(this.onFeatureAdd))this.onFeatureAdd(v);v.geometry&&v.geometry.coords&&v.geometry.coords.length?(d=k.getBoundsOptimizedGeometry(d||I.create(),v.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),this._boundsStore.set(r,d)):this._boundsStore.set(r,null);this._featuresById.set(r,v)}}};R._remove=
function(v){if(m.isSome(this.onFeatureRemove))this.onFeatureRemove(v);this._markedIds.delete(v.objectId);this._boundsStore.delete(v.objectId);this._featuresById.delete(v.objectId);return v};n._createClass(fa,[{key:"geometryType",get:function(){return this.geometryInfo.geometryType}},{key:"hasM",get:function(){return this.geometryInfo.hasM}},{key:"hasZ",get:function(){return this.geometryInfo.hasZ}},{key:"numFeatures",get:function(){return this._featuresById.size}},{key:"fullBounds",get:function(){if(!this.numFeatures)return null;
const v=I.create(I.NEGATIVE_INFINITY);this._featuresById.forEach(r=>{if(r=this._boundsStore.get(r.objectId))v[0]=Math.min(r[0],v[0]),v[1]=Math.min(r[1],v[1]),v[2]=Math.max(r[2],v[2]),v[3]=Math.max(r[3],v[3])});return v}},{key:"storeStatistics",get:function(){let v=0;this._featuresById.forEach(r=>{r.geometry&&r.geometry.coords&&(v+=r.geometry.coords.length)});return{featureCount:this._featuresById.size,vertexCount:v/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}}]);return fa}()})},"esri/core/Evented":function(){define(["../chunks/_rollupPluginBabelHelpers",
"../chunks/tslib.es6","./handleUtils","./accessorSupport/decorators/subclass","./Accessor"],function(n,m,da,O,p){let I=function(){function k(){this._emitter=new k.EventEmitter(this)}var y=k.prototype;y.emit=function(u,D){return this._emitter.emit(u,D)};y.on=function(u,D){return this._emitter.on(u,D)};y.once=function(u,D){return this._emitter.once(u,D)};y.hasEventListener=function(u){return this._emitter.hasEventListener(u)};return k}();(function(k){let y=function(){function D(R=null){this.target=
R;this._listenersMap=null}var fa=D.prototype;fa.clear=function(){this._listenersMap&&this._listenersMap.clear()};fa.emit=function(R,v){R=this._listenersMap&&this._listenersMap.get(R);if(!R)return!1;const r=this.target||this;[...R].forEach(t=>{t.call(r,v)});return 0<R.length};fa.on=function(R,v){if(Array.isArray(R)){var r=R.map(t=>this.on(t,v));return da.handlesGroup(r)}if(-1<R.indexOf(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||
(this._listenersMap=new Map);r=this._listenersMap.get(R)||[];r.push(v);this._listenersMap.set(R,r);return{remove:()=>{const t=this._listenersMap&&this._listenersMap.get(R)||[],d=t.indexOf(v);0<=d&&t.splice(d,1)}}};fa.once=function(R,v){const r=this.on(R,t=>{r.remove();v.call(null,t)});return r};fa.hasEventListener=function(R){R=this._listenersMap&&this._listenersMap.get(R);return null!=R&&0<R.length};return D}();k.EventEmitter=y;k.EventedMixin=D=>{D=function(fa){function R(){var r=fa.apply(this,arguments)||
this;r._emitter=new y;return r}n._inheritsLoose(R,fa);var v=R.prototype;v.destroy=function(){this._emitter.clear()};v.emit=function(r,t){return this._emitter.emit(r,t)};v.on=function(r,t){return this._emitter.on(r,t)};v.once=function(r,t){return this._emitter.once(r,t)};v.hasEventListener=function(r){return this._emitter.hasEventListener(r)};return R}(D);return D=m.__decorate([O.subclass("esri.core.Evented")],D)};let u=function(D){function fa(){var v=D.apply(this,arguments)||this;v._emitter=new I.EventEmitter(n._assertThisInitialized(v));
return v}n._inheritsLoose(fa,D);var R=fa.prototype;R.emit=function(v,r){return this._emitter.emit(v,r)};R.on=function(v,r){return this._emitter.on(v,r)};R.once=function(v,r){return this._emitter.once(v,r)};R.hasEventListener=function(v){return this._emitter.hasEventListener(v)};return fa}(p);u=m.__decorate([O.subclass("esri.core.Evented")],u);k.EventedAccessor=u})(I||(I={}));return I})},"esri/layers/graphics/featureConversionUtils":function(){define("exports ../../core/Logger ../../core/Error ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),
function(n,m,da,O,p,I,k){function y(f,x){return f?x?4:3:x?3:2}function u(f,x,L,N){if(f){if(L)return x&&N?b:Aa;if(x&&N)return wa}else if(x&&N)return Aa;return pa}function D({scale:f,translate:x},L){return Math.round((L-x[0])/f[0])}function fa({scale:f,translate:x},L){return Math.round((x[1]-L)/f[1])}function R({scale:f,translate:x},L){return L*f[0]+x[0]}function v({scale:f,translate:x},L){return x[1]-L*f[1]}function r(f){f=f.coords;return{x:f[0],y:f[1]}}function t(f,x){f.coords[0]=x.x;f.coords[1]=
x.y;return f}function d(f){f=f.coords;return{x:f[0],y:f[1],z:f[2]}}function l(f,x){f.coords[0]=x.x;f.coords[1]=x.y;f.coords[2]=x.z;return f}function E(f){f=f.coords;return{x:f[0],y:f[1],m:f[2]}}function K(f,x){f.coords[0]=x.x;f.coords[1]=x.y;f.coords[2]=x.m;return f}function C(f){f=f.coords;return{x:f[0],y:f[1],z:f[2],m:f[3]}}function J(f,x){f.coords[0]=x.x;f.coords[1]=x.y;f.coords[2]=x.z;f.coords[3]=x.m;return f}function T(f,x){return f&&x?J:f?l:x?K:t}function ea(f,x,L,N,aa){L=T(L,N);for(const U of x){const {geometry:ha,
attributes:ja}=U;let la;ha&&(la=L(new k,ha));f.push(new p(la,ja,null,ja[aa]))}return f}function ka(f,x,L,N){for(const aa of x){const {geometry:U,attributes:ha}=aa;let ja;U&&(ja=Z(U,L,N));f.push({attributes:ha,geometry:ja})}return f}function Z(f,x,L){if(!f)return null;const N=y(x,L),aa=[];for(let U=0;U<f.coords.length;U+=N){const ha=[];for(let ja=0;ja<N;ja++)ha.push(f.coords[U+ja]);aa.push(ha)}return x?L?{points:aa,hasZ:x,hasM:L}:{points:aa,hasZ:x}:L?{points:aa,hasM:L}:{points:aa}}function F(f,x,L,
N,aa){L=y(L,N);for(const U of x){x=U.geometry;N=U.attributes;let ha;x&&(ha=G(new k,x,L));f.push(new p(ha,N,null,N[aa]))}return f}function G(f,x,L=y(x.hasZ,x.hasM)){f.lengths[0]=x.points.length;const N=f.coords;let aa=0;for(const U of x.points)for(x=0;x<L;x++)N[aa++]=U[x];return f}function M(f,x,L){if(!f)return null;const N=y(x,L),{coords:aa,lengths:U}=f;f=[];let ha=0;for(const ja of U){const la=[];for(let ta=0;ta<ja;ta++){const sa=[];for(let xa=0;xa<N;xa++)sa.push(aa[ha++]);la.push(sa)}f.push(la)}return x?
L?{paths:f,hasZ:x,hasM:L}:{paths:f,hasZ:x}:L?{paths:f,hasM:L}:{paths:f}}function Q(f,x,L,N,aa){L=y(L,N);for(const U of x){x=U.geometry;N=U.attributes;let ha;x&&(ha=S(new k,x,L));f.push(new p(ha,N,null,N[aa]))}return f}function S(f,x,L=y(x.hasZ,x.hasM)){const {lengths:N,coords:aa}=f;let U=0;for(const ha of x.paths){for(const ja of ha)for(x=0;x<L;x++)aa[U++]=ja[x];N.push(ha.length)}return f}function w(f,x,L){if(!f)return null;const N=y(x,L),{coords:aa,lengths:U}=f;f=[];let ha=0;for(const ja of U){const la=
[];for(let ta=0;ta<ja;ta++){const sa=[];for(let xa=0;xa<N;xa++)sa.push(aa[ha++]);la.push(sa)}f.push(la)}return x?L?{rings:f,hasZ:x,hasM:L}:{rings:f,hasZ:x}:L?{rings:f,hasM:L}:{rings:f}}function h(f,x,L,N,aa){for(const U of x){x=U.geometry;const ha=U.centroid,ja=U.attributes;let la;x&&(la=q(new k,x,L,N));ha?f.push(new p(la,ja,t(new k,ha),ja[aa])):f.push(new p(la,ja,null,ja[aa]))}return f}function q(f,x,L=x.hasZ,N=x.hasM){H(f,x.rings,L,N);return f}function H(f,x,L,N){L=y(L,N);const {lengths:aa,coords:U}=
f;N=0;aa.length=U.length=0;for(const ha of x){for(const ja of ha)for(x=0;x<L;x++)U[N++]=ja[x];aa.push(ha.length)}return f}function z(f,x,L,N,aa,U){f.length=0;if(!L){for(const ha of x)f.push(new p(null,ha.attributes,null,ha.attributes[U]));return f}switch(L){case "esriGeometryPoint":return ea(f,x,N,aa,U);case "esriGeometryMultipoint":return F(f,x,N,aa,U);case "esriGeometryPolyline":return Q(f,x,N,aa,U);case "esriGeometryPolygon":return h(f,x,N,aa,U);default:Y.error("convertToFeatureSet:unknown-geometry",
new da(`Unable to parse unknown geometry type '${L}'`)),f.length=0}return f}function V(f,x,L,N){f=f&&("coords"in f?f:f.geometry);if(!f)return null;switch(x){case "esriGeometryPoint":return x=r,L&&N?x=C:L?x=d:N&&(x=E),x(f);case "esriGeometryMultipoint":return Z(f,L,N);case "esriGeometryPolyline":return M(f,L,N);case "esriGeometryPolygon":return w(f,L,N);default:Y.error("convertToGeometry:unknown-geometry",new da(`Unable to parse unknown geometry type '${x}'`))}}function oa(f,x,L,N,aa){f.length=0;switch(L){case "esriGeometryPoint":var U=
r;N&&aa?U=C:N?U=d:aa&&(U=E);for(var ha of x){const {geometry:ja,attributes:la}=ha;N=ja?U(ja):null;f.push({attributes:la,geometry:N})}break;case "esriGeometryMultipoint":return ka(f,x,N,aa);case "esriGeometryPolyline":for(const ja of x){const {geometry:la,attributes:ta}=ja;let sa;la&&(sa=M(la,N,aa));f.push({attributes:ta,geometry:sa})}break;case "esriGeometryPolygon":for(U of x){const {geometry:ja,attributes:la,centroid:ta}=U;let sa;ja&&(sa=w(ja,N,aa));ta?(ha=r(ta),f.push({attributes:la,centroid:ha,
geometry:sa})):f.push({attributes:la,geometry:sa})}break;default:Y.error("convertToFeatureSet:unknown-geometry",new da(`Unable to parse unknown geometry type '${L}'`))}return f}function ma(f,x,L,N,aa,U,ha=L,ja=N){f.lengths.length&&(f.lengths.length=0);f.coords.length&&(f.coords.length=0);if(!x||!x.coords.length)return null;aa=ia[aa];const {coords:la,lengths:ta}=x;x=y(L,N);const sa=y(L&&ha,N&&ja);L=u(L,N,ha,ja);if(!ta.length)return L(f.coords,la,0,0,D(U,la[0]),fa(U,la[1])),f.lengths.length&&(f.lengths.length=
0),f.coords.length=x,f;let xa,Ba=0,Ea,Ka=0;for(const Ga of ta){if(Ga<aa)continue;let Ja=0;Ea=Ka;ja=N=D(U,la[Ba]);xa=ha=fa(U,la[Ba+1]);L(f.coords,la,Ea,Ba,ja,xa);Ja++;Ba+=x;Ea+=sa;for(let Ha=1;Ha<Ga;Ha++,Ba+=x)if(ja=D(U,la[Ba]),xa=fa(U,la[Ba+1]),ja!==N||xa!==ha)L(f.coords,la,Ea,Ba,ja-N,xa-ha),Ea+=sa,Ja++,N=ja,ha=xa;Ja>=aa&&(f.lengths.push(Ja),Ka=Ea)}f.coords.length=Ka;return f.coords.length?f:null}function va(f,x,L,N,aa,U,ha){let ja=N,la=0;for(let sa=U+L;sa<ha;sa+=L){{var ta=x[sa];const xa=x[sa+1],
Ba=x[ha],Ea=x[ha+1];let Ka=x[U],Ga=x[U+1],Ja=Ba-Ka,Ha=Ea-Ga;if(0!==Ja||0!==Ha){const Ia=((ta-Ka)*Ja+(xa-Ga)*Ha)/(Ja*Ja+Ha*Ha);1<Ia?(Ka=Ba,Ga=Ea):0<Ia&&(Ka+=Ja*Ia,Ga+=Ha*Ia)}Ja=ta-Ka;Ha=xa-Ga;ta=Ja*Ja+Ha*Ha}ta>ja&&(la=sa,ja=ta)}ja>N&&(la-U>L&&va(f,x,L,N,aa,U,la),aa(f,x,f.length,la,x[la],x[la+1]),ha-la>L&&va(f,x,L,N,aa,la,ha))}function za(f,x,L,N,aa){const {coords:U,lengths:ha}=x,ja=L?N?b:Aa:N?Aa:pa;L=y(L,N);if(!U.length)return f!==x&&(f.lengths.length=0,f.coords.length=0),f;if(!ha.length)return ja(f.coords,
U,0,0,R(aa,U[0]),v(aa,U[1])),f!==x&&(f.lengths.length=0,f.coords.length=L),f;const [la,ta]=aa.scale;N=0;for(let sa=0;sa<ha.length;sa++){const xa=ha[sa];f.lengths[sa]=xa;let Ba=R(aa,U[N]),Ea=v(aa,U[N+1]);ja(f.coords,U,N,N,Ba,Ea);N+=L;for(let Ka=1;Ka<xa;Ka++,N+=L)Ba+=U[N]*la,Ea-=U[N+1]*ta,ja(f.coords,U,N,N,Ba,Ea)}f!==x&&(f.lengths.length=ha.length,f.coords.length=U.length);return f}function Da(f,x,L,N){let aa=0,U=f[N*x],ha=f[N*(x+1)];for(let ja=1;ja<L;ja++){const la=U+f[N*(x+ja)],ta=ha+f[N*(x+ja)+1],
sa=(la-U)*(ta+ha);U=la;ha=ta;aa+=sa}return.5*aa}const Y=m.getLogger("esri.tasks.support.optimizedFeatureSet"),ia={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},pa=(f,x,L,N,aa,U)=>{f[L]=aa;f[L+1]=U},Aa=(f,x,L,N,aa,U)=>{f[L]=aa;f[L+1]=U;f[L+2]=x[N+2]},wa=(f,x,L,N,aa,U)=>{f[L]=aa;f[L+1]=U;f[L+2]=x[N+3]},b=(f,x,L,N,aa,U)=>{f[L]=aa;f[L+1]=U;f[L+2]=x[N+2];f[L+3]=x[N+3]},e=[],P=[];n.convertFromFeature=function(f,x,L,N,aa){e[0]=f;[f]=z(P,e,x,L,N,aa);e.length=P.length=
0;return f};n.convertFromFeatureSet=function(f,x){const L=new I,{hasM:N,hasZ:aa,features:U,objectIdFieldName:ha,spatialReference:ja,geometryType:la,exceededTransferLimit:ta,transform:sa,fields:xa}=f;xa&&(L.fields=xa);L.geometryType=la;L.objectIdFieldName=ha||x;L.spatialReference=ja;if(!L.objectIdFieldName)return Y.error(new da("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),L;U&&z(L.features,U,la,aa,N,L.objectIdFieldName);ta&&(L.exceededTransferLimit=ta);N&&(L.hasM=
N);aa&&(L.hasZ=aa);sa&&(L.transform=sa);return L};n.convertFromFeatures=z;n.convertFromGeometry=function(f,x,L){if(!f)return null;const N=new k;"hasZ"in f&&null==x&&(x=f.hasZ);"hasM"in f&&null==L&&(L=f.hasM);if(O.isPoint(f))return T(null!=x?x:null!=f.z,null!=L?L:null!=f.m)(N,f);if(O.isPolygon(f))return q(N,f,x,L);if(O.isPolyline(f))return S(N,f,y(x,L));if(O.isMultipoint(f))return G(N,f,y(x,L));Y.error("convertFromGeometry:unknown-geometry",new da(`Unable to parse unknown geometry type '${f}'`))};
n.convertFromGraphics=function(f,x,L,N,aa,U){const ha=f.length;switch(L){case "esriGeometryPoint":ea(f,x,N,aa,U);break;case "esriGeometryMultipoint":F(f,x,N,aa,U);break;case "esriGeometryPolyline":Q(f,x,N,aa,U);break;case "esriGeometryPolygon":h(f,x,N,aa,U);break;default:Y.error("convertToFeatureSet:unknown-geometry",new da(`Unable to parse unknown geometry type '${L}'`))}for(N=0;N<x.length;N++)f[N+ha].geometryType=L,f[N+ha].insertAfter=x[N].insertAfter,f[N+ha].groupId=x[N].groupId;return f};n.convertFromMultipoint=
G;n.convertFromMultipointFeatures=F;n.convertFromNestedArray=H;n.convertFromPoint=function(f,x,L=T(null!=x.z,null!=x.m)){return L(f,x)};n.convertFromPointFeatures=ea;n.convertFromPolygon=q;n.convertFromPolyline=S;n.convertFromPolylineFeatures=Q;n.convertToFeature=function(f,x,L,N){P[0]=f;oa(e,P,x,L,N);f=e[0];e.length=P.length=0;return f};n.convertToFeatureSet=function(f){const {objectIdFieldName:x,spatialReference:L,transform:N,fields:aa,hasM:U,hasZ:ha,features:ja,geometryType:la,exceededTransferLimit:ta,
uniqueIdField:sa,queryGeometry:xa,queryGeometryType:Ba}=f;f=oa([],ja,la,ha,U);const Ea=V(xa,Ba,!1,!1);f={features:f,fields:aa,geometryType:la,objectIdFieldName:x,spatialReference:L,uniqueIdField:sa,queryGeometry:Ea};N&&(f.transform=N);ta&&(f.exceededTransferLimit=ta);U&&(f.hasM=U);ha&&(f.hasZ=ha);return f};n.convertToFeatures=oa;n.convertToGeometry=V;n.convertToMultipoint=Z;n.convertToMultipointFeatures=ka;n.convertToPoint=function(f,x,L){return f?x?L?C(f):d(f):L?E(f):r(f):null};n.convertToPolygon=
w;n.convertToPolyline=M;n.deltaDecodeGeometry=function(f,x){const L=f.clone(),N=f.coords;f=f.lengths;let aa=0;for(let ja=0;ja<f.length;ja++){const la=f[ja];var U=N[x*aa],ha=N[x*aa+1];for(let ta=1;ta<la;ta++)U+=N[x*(aa+ta)],ha+=N[x*(aa+ta)+1],L.coords[x*(aa+ta)]=U,L.coords[x*(aa+ta)+1]=ha;aa+=la}return L};n.deltaEncodeGeometry=function(f,x){const L=f.clone(),N=f.coords;f=f.lengths;let aa=0;for(let ha=0;ha<f.length;ha++){const ja=f[ha];let la=N[x*aa];var U=N[x*aa+1];for(let ta=1;ta<ja;ta++){const sa=
N[x*(aa+ta)],xa=N[x*(aa+ta)+1];U=xa-U;L.coords[x*(aa+ta)]=sa-la;L.coords[x*(aa+ta)+1]=U;la=sa;U=xa}aa+=ja}return L};n.generalizeOptimizedGeometry=function(f,x,L,N,aa,U,ha=L,ja=N){f.lengths.length&&(f.lengths.length=0);f.coords.length&&(f.coords.length=0);if(!x||!x.coords.length)return null;aa=ia[aa];const {coords:la,lengths:ta}=x;x=y(L,N);const sa=y(L&&ha,N&&ja);L=u(L,N,ha,ja);if(!ta.length)return L(f.coords,la,0,0,la[0],la[1]),f.lengths.length&&(f.lengths.length=0),f.coords.length=x,f;N=0;U*=U;for(const xa of ta){if(xa<
aa){N+=xa*x;continue}ha=f.coords.length/sa;ja=N;const Ba=N+(xa-1)*x;L(f.coords,la,f.coords.length,ja,la[ja],la[ja+1]);va(f.coords,la,x,U,L,ja,Ba);L(f.coords,la,f.coords.length,Ba,la[Ba],la[Ba+1]);ja=f.coords.length/sa-ha;ja>=aa?f.lengths.push(ja):f.coords.length=ha*sa;N+=xa*x}return f.coords.length?f:null};n.getBoundsOptimizedGeometry=function(f,x,L,N){if(!x||!x.coords||!x.coords.length)return null;L=y(L,N);let aa=N=Number.POSITIVE_INFINITY,U=Number.NEGATIVE_INFINITY,ha=Number.NEGATIVE_INFINITY;if(x&&
x.coords){x=x.coords;for(let ja=0;ja<x.length;ja+=L){const la=x[ja],ta=x[ja+1];N=Math.min(N,la);U=Math.max(U,la);aa=Math.min(aa,ta);ha=Math.max(ha,ta)}}f[0]=N;f[1]=aa;f[2]=U;f[3]=ha;return f};n.getQuantizedArea=function(f,x){const {coords:L,lengths:N}=f;let aa=f=0;for(let U=0;U<N.length;U++)aa+=Da(L,f,N[U],x),f+=U;return Math.abs(aa)};n.getQuantizedBoundsOptimizedGeometry=function(f,x,L,N){L=y(L,N);const {lengths:aa,coords:U}=x;N=x=Number.POSITIVE_INFINITY;let ha=Number.NEGATIVE_INFINITY,ja=Number.NEGATIVE_INFINITY,
la=0;for(const ta of aa){let sa=U[la],xa=U[la+1];x=Math.min(sa,x);N=Math.min(xa,N);ha=Math.max(sa,ha);ja=Math.max(xa,ja);la+=L;for(let Ba=1;Ba<ta;Ba++,la+=L){const Ea=U[la],Ka=U[la+1];sa+=Ea;xa+=Ka;0>Ea&&(x=Math.min(x,sa));0<Ea&&(ha=Math.max(ha,sa));0>Ka?N=Math.min(N,xa):0<Ka&&(ja=Math.max(ja,xa))}}f[0]=x;f[1]=N;f[2]=ha;f[3]=ja;return f};n.getSignedQuantizedRingArea=Da;n.quantizeOptimizedFeatureSet=function(f,x){const {geometryType:L,features:N,hasM:aa,hasZ:U}=x;if(!f)return x;for(let ha=0;ha<N.length;ha++){const ja=
N[ha],la=ja.weakClone();la.geometry=new k;ma(la.geometry,ja.geometry,aa,U,L,f);ja.centroid&&(la.centroid=new k,ma(la.centroid,ja.centroid,aa,U,"esriGeometryPoint",f));N[ha]=la}x.transform=f;return x};n.quantizeOptimizedGeometry=ma;n.quantizeX=D;n.quantizeY=fa;n.removeCollinearVectices=function(f,x,L,N,aa){if(!x||!x.coords||!x.coords.length)return null;L=ia[L];const {coords:U,lengths:ha}=x;x=u(N,aa,N,aa);N=y(N,aa);let ja=aa=0,la=0,ta=0;for(const Ba of ha){ja=ta;x(f.coords,U,ja,aa,U[aa],U[aa+1]);aa+=
N;var sa=U[aa];let Ea=U[aa+1],Ka=sa,Ga=Ea;var xa=Ea/sa;ja+=N;x(f.coords,U,ja,aa,Ka,Ga);aa+=N;for(let Ja=2;Ja<Ba;Ja++){sa=U[aa];Ea=U[aa+1];const Ha=Ea/sa,Ia=xa===Ha||!isFinite(xa)&&!isFinite(Ha);xa=Ia&&isFinite(Ha)?0<=xa&&0<=Ha||0>=xa&&0>=Ha:0<=Ga&&0<=Ea||0>=Ga&&0>=Ea;Ia&&xa?(Ka+=sa,Ga+=Ea):(Ka=sa,Ga=Ea,ja+=N);x(f.coords,U,ja,aa,Ka,Ga);aa+=N;xa=Ha}ja+=N;sa=(ja-ta)/N;sa>=L&&(f.lengths[la]=sa,ta=ja,la++)}f.coords.length>ta&&(f.coords.length=ta);f.lengths.length>la&&(f.lengths.length=la);return f.coords.length&&
f.lengths.length?f:null};n.removeZMValues=function(f,x,L,N,aa,U){const ha=y(L,N);L=u(L,N,aa,U);N=x.coords;f.coords.length=0;f.lengths.length=0;f.lengths.push(...x.lengths);for(x=0;x<N.length;x+=ha)L(f.coords,N,f.coords.length,x,N[x],N[x+1]);return f};n.unquantizeOptimizedFeatureSet=function(f){const {transform:x,features:L,hasM:N,hasZ:aa}=f;if(!x)return f;for(const U of L)U.geometry&&za(U.geometry,U.geometry,N,aa,x),U.centroid&&za(U.centroid,U.centroid,N,aa,x);f.transform=null;return f};n.unquantizeOptimizedGeometry=
za;n.unquantizeX=R;n.unquantizeY=v;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(function(){return function(){function n(){this.spatialReference=this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=null;this.hasM=this.hasZ=!1;this.features=[];this.fields=[];this.transform=null;this.exceededTransferLimit=!1;this.queryGeometry=this.queryGeometryType=this.uniqueIdField=null}n.prototype.weakClone=
function(){const m=new n;m.objectIdFieldName=this.objectIdFieldName;m.globalIdFieldName=this.globalIdFieldName;m.geohashFieldName=this.geohashFieldName;m.geometryProperties=this.geometryProperties;m.geometryType=this.geometryType;m.spatialReference=this.spatialReference;m.hasZ=this.hasZ;m.hasM=this.hasM;m.features=this.features;m.fields=this.fields;m.transform=this.transform;m.exceededTransferLimit=this.exceededTransferLimit;m.uniqueIdField=this.uniqueIdField;m.queryGeometry=this.queryGeometry;m.queryGeometryType=
this.queryGeometryType;return m};return n}()})},"esri/geometry/support/aaBoundingBox":function(){define(["exports","../../core/maybe","../Extent","./aaBoundingRect"],function(n,m,da,O){function p(d=r){return[d[0],d[1],d[2],d[3],d[4],d[5]]}function I(d,l,E,K,C,J,T=p()){T[0]=d;T[1]=l;T[2]=E;T[3]=K;T[4]=C;T[5]=J;return T}function k(d){return d[0]>=d[3]?0:d[3]-d[0]}function y(d){return d[1]>=d[4]?0:d[4]-d[1]}function u(d){return d[2]>=d[5]?0:d[5]-d[2]}function D(d,l){return Math.max(l[0],d[0])<=Math.min(l[3],
d[3])&&Math.max(l[1],d[1])<=Math.min(l[4],d[4])&&Math.max(l[2],d[2])<=Math.min(l[5],d[5])}function fa(d,l){d[0]=l[0];d[1]=l[1];d[2]=l[2];d[3]=l[3];d[4]=l[4];d[5]=l[5];return d}function R(d){return 6===d.length}const v=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity],r=[0,0,0,0,0,0],t=p();n.NEGATIVE_INFINITY=v;n.POSITIVE_INFINITY=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];n.ZERO=r;n.allFinite=function(d){for(let l=0;6>l;l++)if(!isFinite(d[l]))return!1;return!0};n.center=function(d,
l=[0,0,0]){l[0]=d[0]+k(d)/2;l[1]=d[1]+y(d)/2;l[2]=d[2]+u(d)/2;return l};n.contains=function(d,l){return l[0]>=d[0]&&l[1]>=d[1]&&l[2]>=d[2]&&l[3]<=d[3]&&l[4]<=d[4]&&l[5]<=d[5]};n.containsPoint=function(d,l){return l[0]>=d[0]&&l[1]>=d[1]&&l[2]>=d[2]&&l[0]<=d[3]&&l[1]<=d[4]&&l[2]<=d[5]};n.containsPointWithMargin=function(d,l,E){return l[0]>=d[0]-E&&l[1]>=d[1]-E&&l[2]>=d[2]-E&&l[0]<=d[3]+E&&l[1]<=d[4]+E&&l[2]<=d[5]+E};n.create=p;n.depth=y;n.diameter=function(d){const l=k(d),E=u(d);d=y(d);return Math.sqrt(l*
l+E*E+d*d)};n.empty=function(d){return d?fa(d,v):p(v)};n.equals=function(d,l,E){if(m.isNone(d)||m.isNone(l))return d===l;if(!R(d)||!R(l))return!1;if(E)for(let K=0;K<d.length;K++){if(!E(d[K],l[K]))return!1}else for(E=0;E<d.length;E++)if(d[E]!==l[E])return!1;return!0};n.expandWithAABB=function(d,l){d[0]=Math.min(d[0],l[0]);d[1]=Math.min(d[1],l[1]);d[2]=Math.min(d[2],l[2]);d[3]=Math.max(d[3],l[3]);d[4]=Math.max(d[4],l[4]);d[5]=Math.max(d[5],l[5])};n.expandWithBuffer=function(d,l,E=0,K=l.length/3){let C=
d[0],J=d[1],T=d[2],ea=d[3],ka=d[4],Z=d[5];for(let F=0;F<K;F++)C=Math.min(C,l[E+3*F]),J=Math.min(J,l[E+3*F+1]),T=Math.min(T,l[E+3*F+2]),ea=Math.max(ea,l[E+3*F]),ka=Math.max(ka,l[E+3*F+1]),Z=Math.max(Z,l[E+3*F+2]);d[0]=C;d[1]=J;d[2]=T;d[3]=ea;d[4]=ka;d[5]=Z};n.expandWithNestedArray=function(d,l,E){const K=l.length;let C=d[0],J=d[1],T=d[2],ea=d[3],ka=d[4],Z=d[5];if(E)for(E=0;E<K;E++){var F=l[E];C=Math.min(C,F[0]);J=Math.min(J,F[1]);T=Math.min(T,F[2]);ea=Math.max(ea,F[0]);ka=Math.max(ka,F[1]);Z=Math.max(Z,
F[2])}else for(E=0;E<K;E++)F=l[E],C=Math.min(C,F[0]),J=Math.min(J,F[1]),ea=Math.max(ea,F[0]),ka=Math.max(ka,F[1]);d[0]=C;d[1]=J;d[2]=T;d[3]=ea;d[4]=ka;d[5]=Z};n.expandWithOffset=function(d,l,E,K){d[0]=Math.min(d[0],d[0]+l);d[3]=Math.max(d[3],d[3]+l);d[1]=Math.min(d[1],d[1]+E);d[4]=Math.max(d[4],d[4]+E);d[2]=Math.min(d[2],d[2]+K);d[5]=Math.max(d[5],d[5]+K)};n.expandWithRect=function(d,l){d[0]=Math.min(d[0],l[0]);d[1]=Math.min(d[1],l[1]);d[3]=Math.max(d[3],l[2]);d[4]=Math.max(d[4],l[3])};n.expandWithVec3=
function(d,l){d[0]=Math.min(d[0],l[0]);d[1]=Math.min(d[1],l[1]);d[2]=Math.min(d[2],l[2]);d[3]=Math.max(d[3],l[0]);d[4]=Math.max(d[4],l[1]);d[5]=Math.max(d[5],l[2])};n.fromExtent=function(d,l=p()){l[0]=d.xmin;l[1]=d.ymin;l[2]=d.zmin;l[3]=d.xmax;l[4]=d.ymax;l[5]=d.zmax;return l};n.fromMinMax=function(d,l,E=p()){E[0]=d[0];E[1]=d[1];E[2]=d[2];E[3]=l[0];E[4]=l[1];E[5]=l[2];return E};n.fromRect=function(d,l){d[0]=l[0];d[1]=l[1];d[2]=Number.NEGATIVE_INFINITY;d[3]=l[2];d[4]=l[3];d[5]=Number.POSITIVE_INFINITY;
return d};n.fromValues=I;n.getMax=function(d,l){l[0]=d[3];l[1]=d[4];l[2]=d[5];return l};n.getMin=function(d,l){l[0]=d[0];l[1]=d[1];l[2]=d[2];return l};n.height=u;n.intersects=D;n.intersectsClippingArea=function(d,l){return m.isNone(l)?!0:D(d,l)};n.is=R;n.isPoint=function(d){return 0===k(d)&&0===y(d)&&0===u(d)};n.maximumDimension=function(d){return Math.max(k(d),u(d),y(d))};n.offset=function(d,l,E,K,C=d){C[0]=d[0]+l;C[1]=d[1]+E;C[2]=d[2]+K;C[3]=d[3]+l;C[4]=d[4]+E;C[5]=d[5]+K;return C};n.scale=function(d,
l,E=d){const K=d[0]+k(d)/2,C=d[1]+y(d)/2,J=d[2]+u(d)/2;E[0]=K+(d[0]-K)*l;E[1]=C+(d[1]-C)*l;E[2]=J+(d[2]-J)*l;E[3]=K+(d[3]-K)*l;E[4]=C+(d[4]-C)*l;E[5]=J+(d[5]-J)*l;return E};n.set=fa;n.setMax=function(d,l,E=d){E[3]=l[0];E[4]=l[1];E[5]=l[2];E!==d&&(E[0]=d[0],E[1]=d[1],E[2]=d[2]);return d};n.setMin=function(d,l,E=d){E[0]=l[0];E[1]=l[1];E[2]=l[2];E!==d&&(E[3]=d[3],E[4]=d[4],E[5]=d[5]);return E};n.size=function(d,l=[0,0,0]){l[0]=k(d);l[1]=y(d);l[2]=u(d);return l};n.toExtent=function(d,l){return isFinite(d[2])||
isFinite(d[5])?new da({xmin:d[0],xmax:d[3],ymin:d[1],ymax:d[4],zmin:d[2],zmax:d[5],spatialReference:l}):new da({xmin:d[0],xmax:d[3],ymin:d[1],ymax:d[4],spatialReference:l})};n.toRect=function(d,l){l||(l=O.create());l[0]=d[0];l[1]=d[1];l[2]=d[3];l[3]=d[4];return l};n.width=k;n.wrap=function(d,l,E,K,C,J){return I(d,l,E,K,C,J,t)};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/graphics/data/BoundsStore":function(){define(["exports","../../../core/has","../../../core/libs/rbush/PooledRBush"],
function(n,m,da){function O(k,y,u){p.minX=y[0];p.minY=y[1];p.maxX=y[2];p.maxY=y[3];k.search(p,u)}const p={minX:0,minY:0,maxX:0,maxY:0};let I=function(){function k(){this._indexInvalid=!1;this._boundsToLoad=[];this._boundsById=new Map;this._idByBounds=new Map;this._index=new da.PooledRBush(9,m("csp-restrictions")?u=>({minX:u[0],minY:u[1],maxX:u[2],maxY:u[3]}):["[0]","[1]","[2]","[3]"]);this._loadIndex=()=>{if(this._indexInvalid){const u=Array(this._idByBounds.size);let D=0;this._idByBounds.forEach((fa,
R)=>{u[D++]=R});this._indexInvalid=!1;this._index.clear();this._index.load(u)}else this._boundsToLoad.length&&(this._index.load(this._boundsToLoad.filter(u=>this._idByBounds.has(u))),this._boundsToLoad.length=0)}}var y=k.prototype;y.clear=function(){this._indexInvalid=!1;this._boundsToLoad.length=0;this._boundsById.clear();this._idByBounds.clear();this._index.clear()};y.delete=function(u){const D=this._boundsById.get(u);this._boundsById.delete(u);D&&(this._idByBounds.delete(D),this._indexInvalid||
this._index.remove(D))};y.forEachInBounds=function(u,D){this._loadIndex();O(this._index,u,fa=>D(this._idByBounds.get(fa)))};y.get=function(u){return this._boundsById.get(u)};y.has=function(u){return this._boundsById.has(u)};y.invalidateIndex=function(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)};y.set=function(u,D){if(!this._indexInvalid){const fa=this._boundsById.get(u);fa&&(this._index.remove(fa),this._idByBounds.delete(fa))}this._boundsById.set(u,D);D&&(this._idByBounds.set(D,
u),this._indexInvalid||(this._boundsToLoad.push(D),5E4<this._boundsToLoad.length&&this._loadIndex()))};return k}();n.BoundsStore=I;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/core/libs/rbush/PooledRBush":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../maybe ../../arrayUtils ../../PooledArray ../../../chunks/quickselect".split(" "),function(n,m,da,O,p,I){function k(Z,F){y(Z,0,Z.children.length,F,Z)}function y(Z,F,G,M,Q){Q||(Q=new ea([]));Q.minX=Infinity;Q.minY=
Infinity;Q.maxX=-Infinity;Q.maxY=-Infinity;for(let S=F,w;S<G;S++)w=Z.children[S],u(Q,Z.leaf?M(w):w);return Q}function u(Z,F){Z.minX=Math.min(Z.minX,F.minX);Z.minY=Math.min(Z.minY,F.minY);Z.maxX=Math.max(Z.maxX,F.maxX);Z.maxY=Math.max(Z.maxY,F.maxY)}function D(Z,F){return Z.minX-F.minX}function fa(Z,F){return Z.minY-F.minY}function R(Z){return(Z.maxX-Z.minX)*(Z.maxY-Z.minY)}function v(Z){return Z.maxX-Z.minX+(Z.maxY-Z.minY)}function r(Z,F){return Z.minX<=F.minX&&Z.minY<=F.minY&&F.maxX<=Z.maxX&&F.maxY<=
Z.maxY}function t(Z,F){return F.minX<=Z.maxX&&F.minY<=Z.maxY&&F.maxX>=Z.minX&&F.maxY>=Z.minY}function d(Z,F,G,M,Q){for(F=[F,G];F.length;){G=da.assumeNonNull(F.pop());const S=da.assumeNonNull(F.pop());if(G-S<=M)continue;const w=S+Math.ceil((G-S)/M/2)*M;I.quickselect(Z,w,S,G,Q);F.push(S,w,w,G)}}let l=function(){function Z(G=9,M){this.compareMinX=D;this.compareMinY=fa;this.toBBox=function(Q){return Q};this._maxEntries=Math.max(4,G||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));M&&("function"===
typeof M?this.toBBox=M:this._initFormat(M));this.clear()}var F=Z.prototype;F.destroy=function(){this.clear();E.prune();K.prune();C.prune();J.prune()};F.all=function(G){this._all(this.data,G)};F.search=function(G,M){let Q=this.data;const S=this.toBBox;if(t(G,Q))for(E.clear();Q;){for(let w=0,h=Q.children.length;w<h;w++){const q=Q.children[w],H=Q.leaf?S(q):q;t(G,H)&&(Q.leaf?M(q):r(G,H)?this._all(q,M):E.push(q))}Q=E.pop()}};F.collides=function(G){let M=this.data;const Q=this.toBBox;if(!t(G,M))return!1;
for(E.clear();M;){for(let S=0,w=M.children.length;S<w;S++){const h=M.children[S],q=M.leaf?Q(h):h;if(t(G,q)){if(M.leaf||r(G,q))return!0;E.push(h)}}M=E.pop()}return!1};F.load=function(G){if(!G.length)return this;if(G.length<this._minEntries){for(let M=0,Q=G.length;M<Q;M++)this.insert(G[M]);return this}G=this._build(G.slice(0,G.length),0,G.length-1,0);if(this.data.children.length)if(this.data.height===G.height)this._splitRoot(this.data,G);else{if(this.data.height<G.height){const M=this.data;this.data=
G;G=M}this._insert(G,this.data.height-G.height-1,!0)}else this.data=G;return this};F.insert=function(G){G&&this._insert(G,this.data.height-1);return this};F.clear=function(){this.data=new ea([]);return this};F.remove=function(G){if(!G)return this;let M=this.data,Q=null,S=0,w=!1,h;const q=this.toBBox(G);C.clear();for(J.clear();M||0<C.length;){if(!M){var H;M=da.assumeNonNull(C.pop());Q=C.data[C.length-1];S=null!=(H=J.pop())?H:0;w=!0}if(M.leaf&&(h=O.indexOf(M.children,G,M.children.length,M.indexHint),
-1!==h)){M.children.splice(h,1);C.push(M);this._condense(C);break}w||M.leaf||!r(M,q)?Q?(S++,M=Q.children[S],w=!1):M=null:(C.push(M),J.push(S),S=0,Q=M,M=M.children[0])}return this};F.toJSON=function(){return this.data};F.fromJSON=function(G){this.data=G;return this};F._all=function(G,M){for(K.clear();G;){var Q;if(!0===G.leaf)for(const S of G.children)M(S);else K.pushArray(G.children);G=null!=(Q=K.pop())?Q:null}};F._build=function(G,M,Q,S){var w=Q-M+1,h=this._maxEntries;if(w<=h)return G=new ea(G.slice(M,
Q+1)),k(G,this.toBBox),G;S||(S=Math.ceil(Math.log(w)/Math.log(h)),h=Math.ceil(w/h**(S-1)));const q=new ka([]);q.height=S;w=Math.ceil(w/h);h=w*Math.ceil(Math.sqrt(h));for(d(G,M,Q,h,this.compareMinX);M<=Q;M+=h){const H=Math.min(M+h-1,Q);d(G,M,H,w,this.compareMinY);for(let z=M;z<=H;z+=w)q.children.push(this._build(G,z,Math.min(z+w-1,H),S-1))}k(q,this.toBBox);return q};F._chooseSubtree=function(G,M,Q,S){for(;;){S.push(M);if(!0===M.leaf||S.length-1===Q)break;let w=Infinity,h=Infinity,q=void 0;for(let H=
0,z=M.children.length;H<z;H++){const V=M.children[H],oa=R(V),ma=(Math.max(V.maxX,G.maxX)-Math.min(V.minX,G.minX))*(Math.max(V.maxY,G.maxY)-Math.min(V.minY,G.minY))-oa;ma<h?(h=ma,w=oa<w?oa:w,q=V):ma===h&&oa<w&&(w=oa,q=V)}M=q||M.children[0]}return M};F._insert=function(G,M,Q){var S=this.toBBox;Q=Q?G:S(G);C.clear();S=this._chooseSubtree(Q,this.data,M,C);S.children.push(G);for(u(S,Q);0<=M;)if(C.data[M].children.length>this._maxEntries)this._split(C,M),M--;else break;this._adjustParentBBoxes(Q,C,M)};F._split=
function(G,M){const Q=G.data[M];var S=Q.children.length;const w=this._minEntries;this._chooseSplitAxis(Q,w,S);(S=this._chooseSplitIndex(Q,w,S))?(S=Q.children.splice(S,Q.children.length-S),S=Q.leaf?new ea(S):new ka(S),S.height=Q.height,k(Q,this.toBBox),k(S,this.toBBox),M?G.data[M-1].children.push(S):this._splitRoot(Q,S)):console.log("  Error: assertion failed at PooledRBush._split: no valid split index")};F._splitRoot=function(G,M){this.data=new ka([G,M]);this.data.height=G.height+1;k(this.data,this.toBBox)};
F._chooseSplitIndex=function(G,M,Q){let S,w,h=void 0;S=w=Infinity;for(let H=M;H<=Q-M;H++){var q=y(G,0,H,this.toBBox);const z=y(G,H,Q,this.toBBox),V=Math.max(0,Math.min(q.maxX,z.maxX)-Math.max(q.minX,z.minX))*Math.max(0,Math.min(q.maxY,z.maxY)-Math.max(q.minY,z.minY));q=R(q)+R(z);V<S?(S=V,h=H,w=q<w?q:w):V===S&&q<w&&(w=q,h=H)}return h};F._chooseSplitAxis=function(G,M,Q){const S=G.leaf?this.compareMinX:D,w=G.leaf?this.compareMinY:fa,h=this._allDistMargin(G,M,Q,S);M=this._allDistMargin(G,M,Q,w);h<M&&
G.children.sort(S)};F._allDistMargin=function(G,M,Q,S){G.children.sort(S);S=this.toBBox;var w=y(G,0,M,S);const h=y(G,Q-M,Q,S);let q=v(w)+v(h);for(let H=M;H<Q-M;H++){const z=G.children[H];u(w,G.leaf?S(z):z);q+=v(w)}for(Q=Q-M-1;Q>=M;Q--)w=G.children[Q],u(h,G.leaf?S(w):w),q+=v(h);return q};F._adjustParentBBoxes=function(G,M,Q){for(;0<=Q;Q--)u(M.data[Q],G)};F._condense=function(G){for(let M=G.length-1;0<=M;M--){const Q=G.data[M];if(0===Q.children.length)if(0<M){const S=G.data[M-1],w=S.children;w.splice(O.indexOf(w,
Q,w.length,S.indexHint),1)}else this.clear();else k(Q,this.toBBox)}};F._initFormat=function(G){const M=["return a"," - b",";"];this.compareMinX=new Function("a","b",M.join(G[0]));this.compareMinY=new Function("a","b",M.join(G[1]));this.toBBox=new Function("a","return {minX: a"+G[0]+", minY: a"+G[1]+", maxX: a"+G[2]+", maxY: a"+G[3]+"};")};return Z}();const E=new p,K=new p,C=new p,J=new p({deallocator:void 0});p=function(){this.minY=this.minX=Infinity;this.maxY=this.maxX=-Infinity};let T=function(Z){function F(){var G=
Z.apply(this,arguments)||this;G.height=1;G.indexHint=new O.PositionHint;return G}m._inheritsLoose(F,Z);return F}(p),ea=function(Z){function F(G){var M=Z.call(this)||this;M.children=G;M.leaf=!0;return M}m._inheritsLoose(F,Z);return F}(T),ka=function(Z){function F(G){var M=Z.call(this)||this;M.children=G;M.leaf=!1;return M}m._inheritsLoose(F,Z);return F}(T);n.BBox=p;n.PooledRBush=l;n.default=l;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/chunks/quickselect":function(){define(["exports",
"./_commonjsHelpers"],function(n,m){m=m.createCommonjsModule(function(da){(function(O){O=O();void 0!==O&&(da.exports=O)})(function(){function O(k,y,u,D,fa){for(;D>u;){if(600<D-u){var R=D-u+1,v=y-u+1,r=Math.log(R),t=.5*Math.exp(2*r/3);r=.5*Math.sqrt(r*t*(R-t)/R)*(0>v-R/2?-1:1);O(k,y,Math.max(u,Math.floor(y-v*t/R+r)),Math.min(D,Math.floor(y+(R-v)*t/R+r)),fa)}R=k[y];v=u;t=D;p(k,u,y);for(0<fa(k[D],R)&&p(k,u,D);v<t;){p(k,v,t);v++;for(t--;0>fa(k[v],R);)v++;for(;0<fa(k[t],R);)t--}0===fa(k[u],R)?p(k,u,t):
(t++,p(k,t,D));t<=y&&(u=t+1);y<=t&&(D=t-1)}}function p(k,y,u){var D=k[y];k[y]=k[u];k[u]=D}function I(k,y){return k<y?-1:k>y?1:0}return function(k,y,u,D,fa){O(k,y,u||0,D||k.length-1,fa||I)}})});n.quickselect=m})},"esri/layers/graphics/data/optimizedFeatureQueryEngineAdapter":function(){define(["exports","../OptimizedFeature","../OptimizedGeometry","../centroid"],function(n,m,da,O){const p={getObjectId(I){return I.objectId},getAttributes(I){return I.attributes},getAttribute(I,k){return I.attributes[k]},
cloneWithGeometry(I,k){return new m(k,I.attributes,null,I.objectId)},getGeometry(I){return I.geometry},getCentroid(I,k){I.centroid||(I.centroid=O.getCentroidOptimizedGeometry(new da,I.geometry,k.hasZ,k.hasM));return I.centroid}};n.default=p;n.optimizedFeatureQueryEngineAdapter=p;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/graphics/centroid":function(){define(["exports"],function(n){function m(O,p,I,k,y,u,D=1){u=y?u?4:3:u?3:2;let fa=I,R=I+u,v=0,r=0,t=I=0,d=0;for(let l=0,E=k-1;l<
E;l++,fa+=u,R+=u){k=p[fa];const K=p[fa+1],C=p[fa+2],J=p[R],T=p[R+1],ea=p[R+2];let ka=k*T-J*K;t+=ka;v+=(k+J)*ka;r+=(K+T)*ka;y&&(ka=k*ea-J*C,I+=(C+ea)*ka,d+=ka);k<O[0]&&(O[0]=k);k>O[1]&&(O[1]=k);K<O[2]&&(O[2]=K);K>O[3]&&(O[3]=K);y&&(C<O[4]&&(O[4]=C),C>O[5]&&(O[5]=C))}0<t*D&&(t*=-1);0<d*D&&(d*=-1);if(!t)return null;O=[v,r,.5*t];y&&(O[3]=I,O[4]=.5*d);return O}function da(O,p,I,k,y){y=k?y?4:3:y?3:2;let u=p,D=p+y,fa=0,R=0,v=0,r=0;for(let E=0,K=I-1;E<K;E++,u+=y,D+=y){var t=O[u];const C=O[u+1],J=O[u+2],T=
O[D],ea=O[D+1],ka=O[D+2];if(k){{var d=T-t;var l=ea-C;const Z=ka-J;d=Math.sqrt(d*d+l*l+Z*Z)}}else d=T-t,l=ea-C,d=Math.sqrt(d*d+l*l);d&&(fa+=d,k?(t=[t+.5*(T-t),C+.5*(ea-C),J+.5*(ka-J)],R+=d*t[0],v+=d*t[1],r+=d*t[2]):(t=[t+.5*(T-t),C+.5*(ea-C)],R+=d*t[0],v+=d*t[1]))}return 0<fa?k?[R/fa,v/fa,r/fa]:[R/fa,v/fa]:0<I?k?[O[p],O[p+1],O[p+2]]:[O[p],O[p+1]]:null}n.getCentroidOptimizedGeometry=function(O,p,I,k,y){if(!p||!p.lengths.length)return null;const u="upperLeft"===(null==y?void 0:y.originPosition)?-1:1;
O.lengths.length&&(O.lengths.length=0);O.coords.length&&(O.coords.length=0);y=O.coords;const D=[],fa=I?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:R,coords:v}=p,r=I?k?4:3:k?3:2;let t=0;for(var d of R){const l=m(fa,v,t,d,I,k,u);l&&D.push(l);t+=d*r}D.sort((l,E)=>{let K=u*l[2]-u*E[2];
0===K&&I&&(K=l[4]-E[4]);return K});D.length&&(d=6*D[0][2],y[0]=D[0][0]/d,y[1]=D[0][1]/d,I&&(d=6*D[0][4],y[2]=0!==d?D[0][3]/d:0),y[0]<fa[0]||y[0]>fa[1]||y[1]<fa[2]||y[1]>fa[3]||I&&(y[2]<fa[4]||y[2]>fa[5]))&&(y.length=0);if(!y.length)if(p=p.lengths[0]?da(v,0,R[0],I,k):null)y[0]=p[0],y[1]=p[1],I&&2<p.length&&(y[2]=p[2]);else return null;return O};n.lineCentroid=da;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/graphics/data/QueryEngine":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/lang ../../../core/maybe ../../../core/Error ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/boundsUtils ../../../geometry/support/jsonUtils ../../../core/unitUtils ../../../geometry/support/normalizeUtils ../../../core/MemCache ../../../geometry/support/aaBoundingRect ../../support/PromiseQueue ../../support/FieldsIndex ./QueryEngineCapabilities ../../../geometry/support/aaBoundingBox ./projectionSupport ./attributeSupport ./utils ./spatialQuerySupport ./timeSupport ./QueryEngineResult".split(" "),
function(n,m,da,O,p,I,k,y,u,D,fa,R,v,r,t,d,l,E,K,C,J,T){function ea(S){return S.every(w=>"exceedslimit"!==w.statisticType)}const ka=new Set,Z=new fa.MemCacheStorage(2E6);let F=0,G=function(){function S(h){this.capabilities={query:t.queryCapabilities};this.geometryType=h.geometryType;this.hasM=h.hasM;this.hasZ=h.hasZ;this.objectIdField=h.objectIdField;this.spatialReference=h.spatialReference;this.definitionExpression=h.definitionExpression;this.featureStore=h.featureStore;this.aggregateAdapter=h.aggregateAdapter;
this._changeHandle=this.featureStore.events.on("changed",()=>this.clearCache());this.timeInfo=h.timeInfo;h.cacheSpatialQueries&&(this._geometryQueryCache=new fa.MemCache(F++ +"$$",Z));this.fieldsIndex=new r(h.fields);h.scheduler&&h.task&&(this._frameQueue=new v,this._frameTask=h.scheduler.registerTask(h.task,q=>this._update(q),()=>0<this._frameQueue.length))}var w=S.prototype;w.destroy=function(){this._frameTask&&(this._frameTask.remove(),this._frameTask=null,this._frameQueue.cancelAll(),this._frameQueue=
null);this.clearCache();this._geometryQueryCache&&this._geometryQueryCache.destroy();this._changeHandle&&(this._changeHandle.remove(),this._changeHandle=null);this.fieldsIndex.destroy()};w.clearCache=function(){this._geometryQueryCache&&this._geometryQueryCache.clear();this._timeExtent=this._allItems=null};w.executeQuery=async function(h={},q){let H=da.clone(h),z;try{H=await this._schedule(()=>K.normalizeQuery(H,this.definitionExpression,this.spatialReference),q),H=await this._reschedule(()=>this._checkQuerySupport(H),
q),z=await this._reschedule(()=>this._executeGeometryQuery(H,q),q),z=await this._reschedule(()=>z.executeAggregateIdsQuery(H),q),z=await this._reschedule(()=>z.executeObjectIdsQuery(H),q),z=await this._reschedule(()=>z.executeTimeQuery(H),q),z=await this._reschedule(()=>z.executeAttributesQuery(H),q)}catch(V){if(V!==K.QUERY_ENGINE_EMPTY_RESULT)throw V;z=new T([],null,this)}return z.createQueryResponse(H)};w.executeQueryForCount=async function(h={},q){let H=da.clone(h),z;H.returnGeometry=!1;H.returnCentroid=
!1;H.outSR=null;try{H=await this._schedule(()=>K.normalizeQuery(H,this.definitionExpression,this.spatialReference),q),H=await this._reschedule(()=>this._checkQuerySupport(H),q),z=await this._reschedule(()=>this._executeGeometryQuery(H,q),q),z=await this._reschedule(()=>z.executeAggregateIdsQuery(H),q),z=await this._reschedule(()=>z.executeObjectIdsQuery(H),q),z=await this._reschedule(()=>z.executeTimeQuery(H),q),z=await this._reschedule(()=>z.executeAttributesQuery(H),q)}catch(V){if(V!==K.QUERY_ENGINE_EMPTY_RESULT)throw V;
return 0}return z.createQueryResponseForCount(H)};w.executeQueryForExtent=async function(h={},q){let H=da.clone(h),z;h=H.outSR;try{H=await this._schedule(()=>K.normalizeQuery(H,this.definitionExpression,this.spatialReference),q);H=await this._reschedule(()=>this._checkQuerySupport(H),q);H.returnGeometry=!0;H.returnCentroid=!1;H.outSR=null;z=await this._reschedule(()=>this._executeGeometryQuery(H,q),q);z=await this._reschedule(()=>z.executeAggregateIdsQuery(H),q);z=await this._reschedule(()=>z.executeObjectIdsQuery(H),
q);z=await this._reschedule(()=>z.executeTimeQuery(H),q);z=await this._reschedule(()=>z.executeAttributesQuery(H),q);const V=z.size;if(!V)return{count:V,extent:null};d.set(Q,d.NEGATIVE_INFINITY);this.featureStore.forEachBounds(z.items,va=>d.expandWithAABB(Q,va),M);const oa={xmin:Q[0],ymin:Q[1],xmax:Q[3],ymax:Q[4],spatialReference:K.cleanFromGeometryEngine(this.spatialReference)};this.hasZ&&isFinite(Q[2])&&isFinite(Q[5])&&(oa.zmin=Q[2],oa.zmax=Q[5]);const ma=l.project(oa,z.spatialReference,h);ma.spatialReference=
K.cleanFromGeometryEngine(h||this.spatialReference);if(0===ma.xmax-ma.xmin){const va=u.getMetersPerUnitForSR(ma.spatialReference);ma.xmin-=va;ma.xmax+=va}if(0===ma.ymax-ma.ymin){const va=u.getMetersPerUnitForSR(ma.spatialReference);ma.ymin-=va;ma.ymax+=va}if(this.hasZ&&null!=ma.zmin&&null!=ma.zmax&&0===ma.zmax-ma.zmin){const va=u.getMetersPerUnitForSR(ma.spatialReference);ma.zmin-=va;ma.zmax+=va}return{count:V,extent:ma}}catch(V){if(V===K.QUERY_ENGINE_EMPTY_RESULT)return{count:0,extent:null};throw V;
}};w.executeQueryForIds=async function(h={},q){return this.executeQueryForIdSet(h,q).then(H=>Array.from(H))};w.executeQueryForIdSet=async function(h={},q){let H=da.clone(h),z;H.returnGeometry=!1;H.returnCentroid=!1;H.outSR=null;try{H=await this._schedule(()=>K.normalizeQuery(H,this.definitionExpression,this.spatialReference),q);H=await this._reschedule(()=>this._checkQuerySupport(H),q);z=await this._reschedule(()=>this._executeGeometryQuery(H,q),q);z=await this._reschedule(()=>z.executeAggregateIdsQuery(H),
q);z=await this._reschedule(()=>z.executeObjectIdsQuery(H),q);z=await this._reschedule(()=>z.executeTimeQuery(H),q);z=await this._reschedule(()=>z.executeAttributesQuery(H),q);const V=z.items,oa=new Set;await this._reschedule(()=>{for(const ma of V)oa.add(z.featureAdapter.getObjectId(ma))},q);return oa}catch(V){if(V===K.QUERY_ENGINE_EMPTY_RESULT)return new Set;throw V;}};w.executeQueryForSnapping=async function(h,q){const {point:H,distance:z,types:V}=h;if(0===V)return{candidates:[]};const oa=await this._reschedule(()=>
this._checkQuerySupport(h.query),q),ma=!I.equals(H.spatialReference,this.spatialReference);ma&&await l.checkProjectionSupport(H.spatialReference,this.spatialReference);var va="number"===typeof z?z:z.x,za="number"===typeof z?z:z.y;va={xmin:H.x-va,xmax:H.x+va,ymin:H.y-za,ymax:H.y+za,spatialReference:H.spatialReference};va=ma?l.project(va,this.spatialReference):va;if(!va)return{candidates:[]};za=(await D.normalizeCentralMeridian(y.fromJSON(H),null,{signal:q}))[0];const Da=(await D.normalizeCentralMeridian(y.fromJSON(va),
null,{signal:q}))[0];if(O.isNone(za)||O.isNone(Da))return{candidates:[]};let Y=new T(this._searchFeatures(this._getQueryBBoxes(Da.toJSON())),null,this);Y=await this._reschedule(()=>Y.executeObjectIdsQuery(oa),q);Y=await this._reschedule(()=>Y.executeTimeQuery(oa),q);Y=await this._reschedule(()=>Y.executeAttributesQuery(oa),q);q=za.toJSON();q=ma?l.project(q,this.spatialReference):q;return Y.createSnappingResponse({...h,point:q,distance:ma?Math.max(va.xmax-va.xmin,va.ymax-va.ymin)/2:z},H.spatialReference)};
w.executeQueryForLatestObservations=async function(h={},q){if(!this.timeInfo||!this.timeInfo.trackIdField)throw new p("feature-store:unsupported-query","Missing timeInfo or timeInfo.trackIdField",{query:h,timeInfo:this.timeInfo});let H=da.clone(h),z;try{H=await this._schedule(()=>K.normalizeQuery(H,this.definitionExpression,this.spatialReference),q),H=await this._reschedule(()=>this._checkQuerySupport(H),q),z=await this._reschedule(()=>this._executeGeometryQuery(H,q),q),z=await this._reschedule(()=>
z.executeAggregateIdsQuery(H),q),z=await this._reschedule(()=>z.executeObjectIdsQuery(H),q),z=await this._reschedule(()=>z.executeTimeQuery(H),q),z=await this._reschedule(()=>z.executeAttributesQuery(H),q),z=await this._reschedule(()=>z.filterLatest(),q)}catch(V){if(V!==K.QUERY_ENGINE_EMPTY_RESULT)throw V;z=new T([],null,this)}return z.createQueryResponse(H)};w._schedule=async function(h,q){return this._frameQueue?this._frameQueue.push(h,q):h()};w._reschedule=async function(h,q){return this._frameQueue?
this._frameQueue.unshift(h,q):h()};w._update=function(h){for(this._budget=h;!h.done&&this._frameQueue&&this._frameQueue.process();)h.madeProgress();this._budget=null};w._getAll=function(){if(!this._allItems){const h=[];this.featureStore.forEach(q=>h.push(q));this._allItems=new T(h,null,this)}return this._allItems};w._executeGeometryQuery=async function(h,q){const {geometry:H,outSR:z,spatialRel:V,returnGeometry:oa,returnCentroid:ma}=h,va=oa||ma,za=I.isValid(z)&&!I.equals(this.spatialReference,z),Da=
this._geometryQueryCache?za&&va?JSON.stringify({geometry:H,spatialRelationship:V,outSpatialReference:z}):JSON.stringify({geometry:H,spatialRelationship:V}):null;if(Da){var Y=this._geometryQueryCache.get(Da);if(!O.isUndefined(Y))return Y}Y=async wa=>{if(za&&va)return wa=await wa.project(z),Da&&this._geometryQueryCache.put(Da,wa,wa.size||1),wa;Da&&this._geometryQueryCache.put(Da,wa,wa.size||1);return wa};if(!H)return Y(this._getAll());const ia=this.featureAdapter;if("esriSpatialRelDisjoint"===V){h=
this._searchFeatures(this._getQueryBBoxes(H));if(!h.length)return Y(this._getAll());let wa,b;const e=new Set;for(var pa of h)e.add(ia.getObjectId(pa));await this._reschedule(()=>{let P=0;wa=Array(e.size);this.featureStore.forEach(f=>wa[P++]=f);b=e},q);h=await this._reschedule(async()=>{const P=await C.getSpatialQueryOperator(V,H,this.geometryType,this.hasZ,this.hasM);return new T(await this._runSpatialFilter(wa,f=>!b.has(ia.getObjectId(f))||P(ia.getGeometry(f)),q),H,this)},q);return Y(h)}pa=this._searchFeatures(this._getQueryBBoxes(H));
if(!pa.length)return Y=new T([],H,this),Da&&this._geometryQueryCache.put(Da,Y,Y.size||1),Y;if(this._canExecuteSoloPass(H,h))return Y(new T(pa,H,this));const Aa=await C.getSpatialQueryOperator(V,H,this.geometryType,this.hasZ,this.hasM);h=await this._runSpatialFilter(pa,wa=>Aa(ia.getGeometry(wa)),q);return Y(new T(h,H,this))};w._runSpatialFilter=async function(h,q,H){if(!q)return h;if(!this._budget)return h.filter(ma=>q(ma));let z=0;const V=[],oa=async()=>{for(;z<h.length;){const ma=h[z];q(ma)&&V.push(ma);
this._budget.done&&await this._reschedule(()=>oa(),H);++z}};return this._reschedule(()=>oa(),H).then(()=>V)};w._canExecuteSoloPass=function(h,q){const {geometryType:H}=this;({spatialRel:q}=q);return C.canQueryWithRBush(h)&&("esriSpatialRelEnvelopeIntersects"===q||"esriGeometryPoint"===H&&("esriSpatialRelIntersects"===q||"esriSpatialRelContains"===q||"esriSpatialRelWithin"===q))};w._getQueryBBoxes=function(h){if(C.canQueryWithRBush(h)){if(y.isExtent(h))return[R.fromValues(h.xmin,h.ymin,h.xmax,h.ymax)];
if(y.isPolygon(h))return h.rings.map(q=>R.fromValues(Math.min(q[0][0],q[2][0]),Math.min(q[0][1],q[2][1]),Math.max(q[0][0],q[2][0]),Math.max(q[0][1],q[2][1])))}return[k.getBoundsXY(R.create(),h)]};w._searchFeatures=function(h){for(const z of h)this.featureStore.forEachInBounds(z,V=>{ka.add(V)});const q=Array(ka.size);let H=0;ka.forEach(z=>q[H++]=z);ka.clear();return q};w._checkQuerySupport=async function(h){if(0>h.distance||null!=h.geometryPrecision||h.multipatchOption||h.pixelSize||h.relationParam||
h.text)throw new p("feature-store:unsupported-query","Unsupported query options",{query:h});return Promise.all([this._checkAttributesQuerySupport(h),this._checkStatisticsQuerySupport(h),C.checkSpatialQuerySupport(h,this.geometryType,this.spatialReference),l.checkProjectionSupport(this.spatialReference,h.outSR)]).then(()=>h)};w._checkAttributesQuerySupport=function(h){const {outFields:q,orderByFields:H,returnDistinctValues:z,outStatistics:V}=h,oa=V?V.map(ma=>ma.outStatisticFieldName&&ma.outStatisticFieldName.toLowerCase()):
[];if(H&&0<H.length){const ma=H.map(va=>{const za=va.toLowerCase();return-1<za.indexOf(" asc")?za.split(" asc")[0]:-1<za.indexOf(" desc")?za.split(" desc")[0]:va}).filter(va=>-1===oa.indexOf(va));E.validateFields(this.fieldsIndex,ma,"orderByFields contains missing fields")}if(q&&0<q.length)E.validateFields(this.fieldsIndex,q,"outFields contains missing fields");else if(z)throw new p("feature-store:unsupported-query","outFields should be specified for returnDistinctValues",{query:h});E.validateWhere(this.fieldsIndex,
h.where)};w._checkStatisticsQuerySupport=async function(h){const {outStatistics:q,groupByFieldsForStatistics:H,having:z}=h;var V=H&&H.length,oa=q&&q.length;if(z){if(!V||!oa)throw new p("feature-store:unsupported-query","outStatistics and groupByFieldsForStatistics should be specified with having",{query:h});E.validateHaving(this.fieldsIndex,z,q)}if(oa&&ea(q)){oa=q.map(ma=>ma.onStatisticField);E.validateFields(this.fieldsIndex,oa,"onStatisticFields contains missing fields");V&&E.validateFields(this.fieldsIndex,
H,"groupByFieldsForStatistics contains missing fields");for(const ma of q){const {onStatisticField:va,statisticType:za}=ma;if(("percentile_disc"===za||"percentile_cont"===za)&&"statisticParameters"in ma){if({statisticParameters:V}=ma,!V)throw new p("feature-store:unsupported-query","statisticParamters should be set for percentile type",{definition:ma,query:h});}else if("count"!==za&&va&&E.hasInvalidFieldType(va,this.fieldsIndex))throw new p("feature-store:unsupported-query","outStatistics contains non-numeric fields",
{definition:ma,query:h});}}};m._createClass(S,[{key:"featureAdapter",get:function(){return this.featureStore.featureAdapter}},{key:"fullExtent",get:function(){const h=this.featureStore.fullBounds;return h?{xmin:h[0],ymin:h[1],xmax:h[2],ymax:h[3],spatialReference:K.cleanFromGeometryEngine(this.spatialReference)}:null}},{key:"timeExtent",get:function(){return this.timeInfo?this._timeExtent?this._timeExtent:this._timeExtent=J.getTimeExtent(this.timeInfo,this.featureStore):null}}]);return S}();const M=
d.create(),Q=d.create();n.Feature=function(S,w=null,h,q,H){this.attributes=S;this.geometry=h;this.centroid=q;this.filterFlags=H;this.groupId=-1;this.displayId=w};n.default=G;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/geometry/support/normalizeUtils":function(){define("exports ../../config ../../core/maybe ../../core/Logger ../../core/Error ./spatialReferenceUtils ./webMercatorUtils ../Polygon ../Polyline ./normalizeUtilsCommon ../../tasks/geometry/cut ../../tasks/geometry/simplify".split(" "),
function(n,m,da,O,p,I,k,y,u,D,fa,R){function v(C){const J=[];let T=0,ea=0;for(let ka=0;ka<C.length;ka++){const Z=C[ka];let F=null;for(let G=0;G<Z.length;G++)F=Z[G],J.push(F),0===G?ea=T=F[0]:(T=Math.min(T,F[0]),ea=Math.max(ea,F[0]));F&&J.push([(T+ea)/2,0])}return J}function r(C,J){if(!(C instanceof u||C instanceof y))throw K.error("straightLineDensify: the input geometry is neither polyline nor polygon"),new p("straightLineDensify: the input geometry is neither polyline nor polygon");var T=D.getGeometryParts(C);
const ea=[];for(const Z of T){T=[];ea.push(T);T.push([Z[0][0],Z[0][1]]);for(let F=0;F<Z.length-1;F++){const G=Z[F][0],M=Z[F][1],Q=Z[F+1][0],S=Z[F+1][1];var ka=Math.sqrt((Q-G)*(Q-G)+(S-M)*(S-M));const w=(S-M)/ka,h=(Q-G)/ka,q=ka/J;if(1<q){for(let H=1;H<=q-1;H++){const z=H*J;T.push([h*z+G,w*z+M])}ka=(ka+Math.floor(q-1)*J)/2;T.push([h*ka+G,w*ka+M])}T.push([Q,S])}}return"polygon"===C.type?new y({rings:ea,spatialReference:C.spatialReference}):new u({paths:ea,spatialReference:C.spatialReference})}function t(C,
J,T){J&&(C=r(C,1E6),C=k.webMercatorToGeographic(C,!0));T&&(C=D.updatePolyGeometry(C,T));return C}function d(C,J,T){if(Array.isArray(C)){var ea=C[0];ea>J?(T=D.offsetMagnitude(ea,J),C[0]=ea+-2*T*J):ea<T&&(J=D.offsetMagnitude(ea,T),C[0]=ea+-2*J*T)}else ea=C.x,ea>J?(T=D.offsetMagnitude(ea,J),C=C.clone().offset(-2*T*J,0)):ea<T&&(J=D.offsetMagnitude(ea,T),C=C.clone().offset(-2*J*T,0));return C}function l(C,J){let T=-1;for(let ea=0;ea<J.cutIndexes.length;ea++){const ka=J.cutIndexes[ea],Z=J.geometries[ea],
F=D.getGeometryParts(Z);for(let G=0;G<F.length;G++){const M=F[G];M.some(Q=>{if(180>Q[0])return!0;Q=0;for(var S=0;S<M.length;S++){var w=M[S][0];Q=w>Q?w:Q}Q=Number(Q.toFixed(9));Q=-360*D.offsetMagnitude(Q,180);for(S=0;S<M.length;S++)w=Z.getPoint(G,S),Z.setPoint(G,S,w.clone().offset(Q,0));return!0})}if(ka===T)if("polygon"===C[0].type)for(const G of D.getGeometryParts(Z))C[ka]=C[ka].addRing(G);else{if("polyline"===C[0].type)for(const G of D.getGeometryParts(Z))C[ka]=C[ka].addPath(G)}else T=ka,C[ka]=Z}return C}
async function E(C,J,T){if(!Array.isArray(C))return E([C],J);var ea=J?J.url:m.geometryServiceUrl;let ka,Z,F;let G=0;var M=[];J=[];for(var Q of C)if(da.isNone(Q))J.push(Q);else{if(!S){var S=Q.spatialReference;var w=I.getInfo(S);var h=(ka=S.isWebMercator)?102100:4326;Z=D.cutParams[h].maxX;F=D.cutParams[h].minX;var q=D.cutParams[h].plus180Line;h=D.cutParams[h].minus180Line}if(w)if("mesh"===Q.type)J.push(Q);else if("point"===Q.type)J.push(d(Q.clone(),Z,F));else if("multipoint"===Q.type){var H=Q.clone();
H.points=H.points.map(z=>d(z,Z,F));J.push(H)}else if("extent"===Q.type)H=Q.clone()._normalize(!1,!1,w),J.push(H.rings?new y(H):H);else if(Q.extent){H=Q.extent;const z=2*D.offsetMagnitude(H.xmin,F)*Z;let V=0===z?Q.clone():D.updatePolyGeometry(Q.clone(),z);H.offset(z,0);H.intersects(q)&&H.xmax!==Z?(G=H.xmax>G?H.xmax:G,V=t(V,ka),M.push(V),J.push("cut")):H.intersects(h)&&H.xmin!==F?(G=2*H.xmax*Z>G?2*H.xmax*Z:G,V=t(V,ka,360),M.push(V),J.push("cut")):J.push(V)}else J.push(Q.clone());else J.push(Q)}S=D.offsetMagnitude(G,
Z);w=-90;q=S;for(Q=new u;0<S;)h=-180+360*S,Q.addPath([[h,w],[h,-1*w]]),w*=-1,S--;if(0<M.length&&0<q){S=await fa.cut(ea,M,Q,T);S=l(M,S);w=[];M=[];for(q=0;q<J.length;q++)Q=J[q],"cut"!==Q?M.push(Q):(Q=S.shift(),h=C[q],da.isSome(h)&&"polygon"===h.type&&h.rings&&1<h.rings.length&&Q.rings.length>=h.rings.length?(w.push(Q),M.push("simplify")):M.push(ka?k.geographicToWebMercator(Q):Q));if(!w.length)return M;J=await R.simplify(ea,w,T);C=[];for(T=0;T<M.length;T++)ea=M[T],"simplify"!==ea?C.push(ea):C.push(ka?
k.geographicToWebMercator(J.shift()):J.shift());return C}C=[];for(T=0;T<J.length;T++)ea=J[T],"cut"!==ea?C.push(ea):(ea=M.shift(),C.push(!0===ka?k.geographicToWebMercator(ea):ea));return Promise.resolve(C)}const K=O.getLogger("esri.geometry.support.normalizeUtils");n.getDenormalizedExtent=function(C){if(!C)return null;const J=C.extent;if(!J)return null;var T=C.spatialReference&&I.getInfo(C.spatialReference);if(!T)return J;const [ea,ka]=T.valid;({width:T}=J);let {xmin:Z,xmax:F}=J;[Z,F]=[F,Z];if("extent"===
C.type||0===T||T<=ka||T>2*ka||Z<ea||F>ka)return J;let G;switch(C.type){case "polygon":if(1<C.rings.length)G=v(C.rings);else return J;break;case "polyline":if(1<C.paths.length)G=v(C.paths);else return J;break;case "multipoint":G=C.points}C=J.clone();for(let M=0;M<G.length;M++){let Q=G[M][0];0>Q?(Q+=ka,F=Math.max(Q,F)):(Q-=ka,Z=Math.min(Q,Z))}C.xmin=Z;C.xmax=F;return C.width<T?(C.xmin-=ka,C.xmax-=ka,C):J};n.normalizeCentralMeridian=E;n.normalizeMapX=function(C,J){if(J=I.getInfo(J)){const [T,ea]=J.valid;
J=ea-T;if(C<T)for(;C<T;)C+=J;if(C>ea)for(;C>ea;)C-=J}return C};n.straightLineDensify=r;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/geometry/support/normalizeUtilsCommon":function(){define(["exports","../SpatialReference","../Polyline","./jsonUtils"],function(n,m,da,O){function p(k){return O.isPolygon(k)?k.rings:k.paths}const I={102100:{maxX:2.0037508342788905E7,minX:-2.0037508342788905E7,plus180Line:new da({paths:[[[2.0037508342788905E7,-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],
spatialReference:m.WebMercator}),minus180Line:new da({paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:m.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new da({paths:[[[180,-180],[180,180]]],spatialReference:m.WGS84}),minus180Line:new da({paths:[[[-180,-180],[-180,180]]],spatialReference:m.WGS84})}};n.cutParams=I;n.getGeometryParts=p;n.getSpatialReferenceMinMaxX=function(k){k=(null==k?0:k.isWebMercator)?102100:4326;return[I[k].minX,
I[k].maxX]};n.offsetMagnitude=function(k,y){return Math.ceil((k-y)/(2*y))};n.updatePolyGeometry=function(k,y){const u=p(k);for(const D of u)for(const fa of D)fa[0]+=y;return k};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/tasks/geometry/cut":function(){define(["exports","../../core/urlUtils","../../geometry/support/jsonUtils","../../geometry","../../request"],function(n,m,da,O,p){n.cut=async function(I,k,y,u){I="string"===typeof I?m.urlToObject(I):I;const D=k[0].spatialReference;k={...u,
query:{...I.query,f:"json",sr:JSON.stringify(D),target:JSON.stringify({geometryType:da.getJsonType(k[0]),geometries:k}),cutter:JSON.stringify(y)}};k=await p(I.path+"/cut",k);const {cutIndexes:fa,geometries:R=[]}=k.data;return{cutIndexes:fa,geometries:R.map(v=>{v=da.fromJSON(v);v.spatialReference=D;return v})}};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/tasks/geometry/simplify":function(){define(["exports","../../core/urlUtils","../../geometry/support/jsonUtils","../../request"],function(n,
m,da,O){function p(k){return{geometryType:da.getJsonType(k[0]),geometries:k.map(y=>y.toJSON())}}function I(k,y,u){const D=da.getGeometryType(y);return k.map(fa=>{fa=D.fromJSON(fa);fa.spatialReference=u;return fa})}n.simplify=async function(k,y,u){const D="string"===typeof k?m.urlToObject(k):k;k=y[0].spatialReference;const fa=da.getJsonType(y[0]);y={...u,query:{...D.query,f:"json",sr:k.wkid?k.wkid:JSON.stringify(k),geometries:JSON.stringify(p(y))}};y=await O(D.path+"/simplify",y);return I(y.data,fa,
k)};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/core/MemCache":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","./PooledArray"],function(n,m,da){let O=function(){function I(y,u,D){this._namespace=y;this._storage=u;this._removeFunc=!1;this._miss=this._hit=0;this._storage.register(this);this._namespace+=":";D&&(this._storage.registerRemoveFunc(this._namespace,D),this._removeFunc=!0)}var k=I.prototype;k.destroy=function(){this._storage.clear(this._namespace);this._removeFunc&&
this._storage.deregisterRemoveFunc(this._namespace);this._storage.deregister(this);this._storage=null};k.resetHitRate=function(){this._hit=this._miss=0};k.put=function(y,u,D,fa=0){this._storage.put(this._namespace+y,u,D,fa)};k.get=function(y){y=this._storage.get(this._namespace+y);void 0===y?++this._miss:++this._hit;return y};k.pop=function(y){y=this._storage.pop(this._namespace+y);void 0===y?++this._miss:++this._hit;return y};k.updateSize=function(y,u,D){this._storage.updateSize(this._namespace+
y,u,D)};k.clear=function(){this._storage.clear(this._namespace)};k.clearAll=function(){this._storage.clearAll()};k.getStats=function(){return this._storage.getStats()};k.resetStats=function(){this._storage.resetStats()};m._createClass(I,[{key:"namespace",get:function(){return this._namespace.slice(0,-1)}},{key:"hitRate",get:function(){return this._hit/(this._hit+this._miss)}},{key:"size",get:function(){return this._storage.size}},{key:"maxSize",get:function(){return this._storage.maxSize}}]);return I}(),
p=function(){function I(y=10485760){this._maxSize=y;this._db=new Map;this._miss=this._hit=this._size=0;this._removeFuncs=new da;this._users=new da}var k=I.prototype;k.destroy=function(){this.clearAll();this._removeFuncs.clear();this._users.clear();this._db=null};k.register=function(y){this._users.push(y)};k.deregister=function(y){this._users.removeUnordered(y)};k.registerRemoveFunc=function(y,u){this._removeFuncs.push([y,u])};k.deregisterRemoveFunc=function(y){this._removeFuncs.filterInPlace(u=>u[0]!==
y)};k.put=function(y,u,D,fa){const R=this._db.get(y);R&&(this._size-=R.size,this._db.delete(y),R.entry!==u&&this._notifyRemoved(y,R.entry));D>this._maxSize?this._notifyRemoved(y,u):void 0===u?console.warn("Refusing to cache undefined entry "):!D||0>D?console.warn("Refusing to cache entry with invalid size "+D):(fa=1+Math.max(fa,-3)- -3,this._db.set(y,{entry:u,size:D,lifetime:fa,lives:fa}),this._size+=D,this._checkSizeLimit())};k.updateSize=function(y,u,D){const fa=this._db.get(y);fa&&fa.entry===u&&
(this._size-=fa.size,D>this._maxSize?(this._db.delete(y),this._notifyRemoved(y,u)):(fa.size=D,this._size+=D,this._checkSizeLimit()))};k.pop=function(y){const u=this._db.get(y);if(u)return this._size-=u.size,this._db.delete(y),++this._hit,u.entry;++this._miss};k.get=function(y){const u=this._db.get(y);if(void 0===u)++this._miss;else return this._db.delete(y),u.lives=u.lifetime,this._db.set(y,u),++this._hit,u.entry};k.getStats=function(){const y={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/
1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},u={},D=[];this._db.forEach((v,r)=>{const t=v.lifetime;D[t]=(D[t]||0)+v.size;this._users.forAll(d=>{d=d.namespace;r.startsWith(d)&&(u[d]=(u[d]||0)+v.size)})});const fa={};this._users.forAll(v=>{const r=v.namespace;!isNaN(v.hitRate)&&0<v.hitRate?(u[r]=u[r]||0,fa[r]=Math.round(100*v.hitRate)+"%"):fa[r]="0%"});var R=Object.keys(u);R.forEach(v=>u[v]=u[v]/this._size*100);R.sort((v,r)=>u[r]-u[v]);R.forEach(v=>
y[v]=Math.round(u[v])+"% / "+fa[v]);for(R=D.length-1;0<=R;--R){const v=D[R];v&&(y["Priority "+(R+-3-1)]=Math.round(v/this.size*100)+"%")}return y};k.resetStats=function(){this._hit=this._miss=0;this._users.forAll(y=>y.resetHitRate())};k.clear=function(y){this._db.forEach((u,D)=>{D.startsWith(y)&&(this._size-=u.size,this._db.delete(D),this._notifyRemoved(D,u.entry))})};k.clearAll=function(){this._db.forEach((y,u)=>this._notifyRemoved(u,y.entry));this._size=0;this._db.clear()};k._getHitRate=function(){return this._hit/
(this._hit+this._miss)};k._notifyRemoved=function(y,u){this._removeFuncs.forAll(D=>{if(y.startsWith(D[0]))D[1](u)})};k._checkSizeLimit=function(){if(!(this._size<=this._maxSize))for(const [y,u]of this._db)if(this._db.delete(y),1>=u.lives?(this._size-=u.size,this._notifyRemoved(y,u.entry)):(--u.lives,this._db.set(y,u)),this._size<=.9*this.maxSize)break};m._createClass(I,[{key:"size",get:function(){return this._size}},{key:"maxSize",get:function(){return this._maxSize},set:function(y){this._maxSize=
Math.max(y,0);this._checkSizeLimit()}}]);return I}();n.MIN_PRIORITY=-3;n.MemCache=O;n.MemCacheStorage=p;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/graphics/data/QueryEngineCapabilities":function(){define(["exports"],function(n){n.queryCapabilities={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,
supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/graphics/data/attributeSupport":function(){define(["exports",
"../../../core/Error","../../../core/sql/WhereClauseCache"],function(n,m,da){function O(u,D){return u?k.get(u,D):null}function p(u,D,fa,R=!0){const v=[];for(const r of D)if("*"!==r&&!u.has(r))if(R){D=I(r);try{const t=O(D,u);if(!t)throw new m("feature-store:unsupported-query","invalid SQL expression",{where:D});if(!t.isStandardized)throw new m("feature-store:unsupported-query","expression is not standard",{clause:t});p(u,t.fieldNames,"expression contains missing fields")}catch(t){if((D=t&&t.details)&&
(D.clause||D.where))throw t;D&&D.missingFields?v.push(...D.missingFields):v.push(r)}}else v.push(r);if(v.length)throw new m("feature-store:unsupported-query",fa,{missingFields:v});}function I(u){return u.split(" as ")[0]}const k=new da.WhereClauseCache(50,500),y=new Set("esriFieldTypeOID esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong esriFieldTypeDate".split(" "));n.getAliasFromFieldName=function(u){return u.split(" as ")[1]};n.getExpressionFromFieldName=
I;n.getWhereClause=O;n.hasInvalidFieldType=function(u,D){return(u=D.get(u))?!y.has(u.type):!1};n.validateFields=p;n.validateHaving=function(u,D,fa){if(!D)return!0;const R=k.get(D,u);if(!R)throw new m("feature-store:unsupported-query","invalid SQL expression",{having:D});if(!R.isAggregate)throw new m("feature-store:unsupported-query","having does not contain a valid aggregate function",{having:D});p(u,R.fieldNames,"having contains missing fields");if(!R.getExpressions().every(v=>{const {aggregateType:r,
field:t}=v,d=u.has(t)&&u.get(t).name;return fa.some(l=>{const {onStatisticField:E,statisticType:K}=l;return(u.has(E)&&u.get(E).name)===d&&K.toLowerCase().trim()===r})}))throw new m("feature-store:unsupported-query","expressions in having should also exist in outStatistics",{having:D});return!0};n.validateWhere=function(u,D){if(!D)return!0;const fa=k.get(D,u);if(!fa)throw new m("feature-store:unsupported-query","invalid SQL expression",{where:D});if(!fa.isStandardized)throw new m("feature-store:unsupported-query",
"where clause is not standard",{where:D});p(u,fa.fieldNames,"where clause contains missing fields");return!0};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/core/sql/WhereClauseCache":function(){define(["exports","../ItemCache","./WhereClause"],function(n,m,da){let O=function(){function p(I,k){this._cache=new m(I);this._invalidCache=new m(k)}p.prototype.get=function(I,k){const y=`${k.uid}:${I}`,u=this._cache.get(y);if(u)return u;if(void 0!==this._invalidCache.get(y))return null;try{const D=
da.WhereClause.create(I,k);this._cache.put(y,D);return D}catch{return this._invalidCache.put(y,null),null}};return p}();n.WhereClauseCache=O;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/core/ItemCache":function(){define(["./MemCache"],function(n){return function(){function m(O,p){this._storage=new n.MemCacheStorage;this._storage.maxSize=O;p&&this._storage.registerRemoveFunc("",p)}var da=m.prototype;da.put=function(O,p){this._storage.put(O,p,1,1)};da.pop=function(O){return this._storage.pop(O)};
da.get=function(O){return this._storage.get(O)};da.clear=function(){this._storage.clearAll()};da.destroy=function(){this._storage.destroy()};return m}()})},"esri/core/sql/WhereClause":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../has ./AggregateFunctions ./StandardizedFunctions ./WhereGrammar".split(" "),function(n,m,da,O,p,I){function k(S,w){S+="";return S.length>=w?S:Array(w-S.length+1).join("0")+S}function y(S,w,h="0",q="0",H="0",z="0",V="",oa="0",ma="0"){return"+"===V||
"-"===V?(S=`${k(parseInt(S,10),4)}-${k(parseInt(w,10),2)}-${k(parseInt(h,10),2)}`,w="",10>parseFloat(z)&&(w="0"),q=`${k(parseInt(q,10),2)}:${k(parseInt(H,10),2)}:${w+parseFloat(z).toString()}`,V=`${V}${k(parseInt(oa,10),2)}:${k(parseInt(ma,10),2)}`,new Date(S+"T"+q+V)):new Date(parseInt(S,10),parseInt(w,10)-1,parseInt(h,10),parseInt(q,10),parseInt(H,10),parseFloat(z))}function u(S){let w=ea.exec(S);if(null!==w){const [,h,q,H,z,V,oa]=w;return y(h,q,H,z,V,oa)}w=ka.exec(S);if(null!==w){const [,h,q,H,
z,V,oa,ma,va,za]=w;return y(h,q,H,z,V,oa,ma,va,za)}w=Z.exec(S);if(null!==w){const [,h,q,H,z,V,oa,ma,va]=w;return y(h,q,H,z,V,"0",oa,ma,va)}w=F.exec(S);if(null!==w){const [,h,q,H,z,V]=w;return y(h,q,H,z,V)}w=T.exec(S);if(null!==w){const [,h,q,H]=w;return y(h,q,H)}throw Error("SQL Invalid Timestamp");}function D(S){S=T.exec(S);if(null===S)throw Error("SQL Invalid Date");const [,w,h,q]=S;return new Date(parseInt(w,10),parseInt(h,10)-1,parseInt(q,10))}function fa(S){return Array.isArray(S)?S:[S]}function R(S){return null!==
S?!0!==S:null}function v(S,w){return null!=S&&null!=w?!0===S&&!0===w:!1===S||!1===w?!1:null}function r(S,w){return null!=S&&null!=w?!0===S||!0===w:!0===S||!0===w?!0:null}function t(S,w){if(null==S)return null;let h=!1;for(const q of w)if(null==q)h=null;else if(S===q){h=!0;break}return h}function d(S,w,h){if(null==S)return null;let q="",H=0;for(let z=0;z<w.length;z++){const V=w.charAt(z);switch(H){case 0:V===h?H=1:q=0<="-[]/{}()*+?.\\^$|".indexOf(V)?q+("\\"+V):"%"===V?q+".*":"_"===V?q+".":q+V;break;
case 1:q=0<="-[]/{}()*+?.\\^$|".indexOf(V)?q+("\\"+V):q+V,H=0}}return(new RegExp("^"+q+"$")).test(S)}function l(S){return S instanceof Date?S.valueOf():S}function E(S,w,h){if(null==w||null==h)return null;w=l(w);h=l(h);switch(S){case "\x3c\x3e":return w!==h;case "\x3d":return w===h;case "\x3e":return w>h;case "\x3c":return w<h;case "\x3e\x3d":return w>=h;case "\x3c\x3d":return w<=h}}function K(S){const w=[],h={};for(const q of S)S=q.toLowerCase(),void 0===h[S]&&(w.push(q),h[S]=1);return w}function C(S,
w,h){if(w instanceof p.SqlInterval)if(h instanceof Date)switch(S){case "+":return new Date(w.valueInMilliseconds()+h.getTime());case "-":return w.valueInMilliseconds()-h.getTime();case "*":return w.valueInMilliseconds()*h.getTime();case "/":return w.valueInMilliseconds()/h.getTime()}else if(h instanceof p.SqlInterval)switch(S){case "+":return p.SqlInterval.createFromMilliseconds(w.valueInMilliseconds()+h.valueInMilliseconds());case "-":return p.SqlInterval.createFromMilliseconds(w.valueInMilliseconds()-
h.valueInMilliseconds());case "*":return w.valueInMilliseconds()*h.valueInMilliseconds();case "/":return w.valueInMilliseconds()/h.valueInMilliseconds()}else w=w.valueInMilliseconds();else if(h instanceof p.SqlInterval)if(w instanceof Date)switch(S){case "+":return new Date(h.valueInMilliseconds()+w.getTime());case "-":return new Date(w.getTime()-h.valueInMilliseconds());case "*":return w.getTime()*h.valueInMilliseconds();case "/":return w.getTime()/h.valueInMilliseconds()}else h=h.valueInMilliseconds();
else if(w instanceof Date&&"number"===typeof h)switch(h*=864E5,w=w.getTime(),S){case "+":return new Date(w+h);case "-":return new Date(w-h);case "*":return new Date(w*h);case "/":return new Date(w/h)}else if(h instanceof Date&&"number"===typeof w)switch(w*=864E5,h=h.getTime(),S){case "+":return new Date(w+h);case "-":return new Date(w-h);case "*":return new Date(w*h);case "/":return new Date(w/h)}switch(S){case "+":return w+h;case "-":return w-h;case "*":return w*h;case "/":return w/h}}function J(S,
w,h,q){S=q.getAttribute(S,w);return null!=S&&1===h[w]?new Date(S):S}const T=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,ea=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,ka=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,Z=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,F=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/;let G=function(){function S(){}S.makeBool=function(w){return!0===w};S.featureValue=
function(w,h,q,H){return J(w,h,q,H)};S.equalsNull=function(w){return null===w};S.applyLike=function(w,h,q){return d(w,h,q)};S.ensureArray=function(w){return fa(w)};S.applyIn=function(w,h){return t(w,h)};S.currentDate=function(){const w=new Date;w.setHours(0,0,0,0);return w};S.makeSqlInterval=function(w,h,q){return p.SqlInterval.createFromValueAndQualifer(w,h,q)};S.convertInterval=function(w){return w instanceof p.SqlInterval?w.valueInMilliseconds():w};S.currentTimestamp=function(){return new Date};
S.compare=function(w,h,q){return E(w,h,q)};S.calculate=function(w,h,q){return C(w,h,q)};S.makeComparable=function(w){return l(w)};S.evaluateFunction=function(w,h){return p.evaluateFunction(w,h)};S.lookup=function(w,h){w=h[w];return void 0===w?null:w};S.between=function(w,h){return null==w||null==h[0]||null==h[1]?null:w>=h[0]&&w<=h[1]};S.notbetween=function(w,h){return null==w||null==h[0]||null==h[1]?null:w<h[0]||w>h[1]};S.ternaryNot=function(w){return R(w)};S.ternaryAnd=function(w,h){return v(w,h)};
S.ternaryOr=function(w,h){return r(w,h)};return S}(),M=function(){function S(h,q){this.fieldsIndex=q;this.datefields={};this.parameters={};this.parseTree=I.WhereGrammar.parse(h);const {isStandardized:H,isAggregate:z,referencedFieldNames:V}=this.extractExpressionInfo(q);this.referencedFieldNames=V;this.isStandardized=H;this.isAggregate=z}S.create=function(h,q){return new S(h,q)};var w=S.prototype;w.testSet=function(h,q=Q){const H={};for(const z of this.fieldNames)H[z]=h.map(V=>q.getAttribute(V,z));
return!!this.evaluateNode(this.parseTree,{attributes:H},Q)};w.calculateValue=function(h,q=Q){h=this.evaluateNode(this.parseTree,h,q);return h instanceof p.SqlInterval?h.valueInMilliseconds()/864E5:h};w.calculateValueCompiled=function(h,q=Q){if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(h,this.parameters,q,this.datefields);if(da("csp-restrictions"))return this.calculateValue(h,q);this.compileMe();return this.parseTree._compiledVersion(h,this.parameters,q,this.datefields)};
w.testFeature=function(h,q=Q){return!!this.evaluateNode(this.parseTree,h,q)};w.testFeatureCompiled=function(h,q=Q){if(null!=this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(h,this.parameters,q,this.datefields);if(da("csp-restrictions"))return this.testFeature(h,q);this.compileMe();return!!this.parseTree._compiledVersion(h,this.parameters,q,this.datefields)};w.getFunctions=function(){const h=[];this.visitAll(this.parseTree,q=>{"function"===q.type&&h.push(q.name.toLowerCase())});
return K(h)};w.getExpressions=function(){const h=new Map;this.visitAll(this.parseTree,q=>{if("function"===q.type){const H=q.name.toLowerCase();q=q.args.value[0];if("column_ref"===q.type){q=q.column;const z=`${H}-${q}`;h.has(z)||h.set(z,{aggregateType:H,field:q})}}});return[...h.values()]};w.getVariables=function(){const h=[];this.visitAll(this.parseTree,q=>{"param"===q.type&&h.push(q.value.toLowerCase())});return K(h)};w.compileMe=function(){const h="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+
")";this.parseTree._compiledVersion=(new Function("feature","lookups","attributeAdapter","datefields",h)).bind(G)};w.extractExpressionInfo=function(h){const q=[];let H=!0,z=!0;this.visitAll(this.parseTree,V=>{switch(V.type){case "column_ref":{const oa=h.get(V.column),ma=oa&&oa.name;!oa||"date"!==oa.type&&"esriFieldTypeDate"!==oa.type||(this.datefields[oa.name]=1);void 0!==ma?(q.push(ma),V.column=ma):q.push(V.column);break}case "function":{const {name:oa,args:ma}=V;V=ma.value.length;H&&(H=p.isStandardized(oa,
V));z&&(z=O.isAggregate(oa,V))}}});return{referencedFieldNames:K(q),isStandardized:H,isAggregate:z}};w.visitAll=function(h,q){if(null!=h)switch(q(h),h.type){case "when_clause":this.visitAll(h.operand,q);this.visitAll(h.value,q);break;case "case_expression":for(const H of h.clauses)this.visitAll(H,q);"simple"===h.format&&this.visitAll(h.operand,q);null!==h.else&&this.visitAll(h.else,q);break;case "expr_list":for(const H of h.value)this.visitAll(H,q);break;case "unary_expr":this.visitAll(h.expr,q);
break;case "binary_expr":this.visitAll(h.left,q);this.visitAll(h.right,q);break;case "function":this.visitAll(h.args,q)}};w.evaluateNodeToJavaScript=function(h){switch(h.type){case "interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(h.value)+", "+JSON.stringify(h.qualifier)+","+JSON.stringify(h.op)+")";case "case_expression":var q="";if("simple"===h.format){var H="this.makeComparable("+this.evaluateNodeToJavaScript(h.operand)+")";q="( ";for(let z=0;z<h.clauses.length;z++)q+=" ("+
H+" \x3d\x3d\x3d this.makeComparable("+this.evaluateNodeToJavaScript(h.clauses[z].operand)+")) ? ("+this.evaluateNodeToJavaScript(h.clauses[z].value)+") : "}else for(q="( ",H=0;H<h.clauses.length;H++)q+=" this.makeBool("+this.evaluateNodeToJavaScript(h.clauses[H].operand)+")\x3d\x3d\x3dtrue ? ("+this.evaluateNodeToJavaScript(h.clauses[H].value)+") : ";q=null!==h.else?q+this.evaluateNodeToJavaScript(h.else):q+"null";return q+=" )";case "param":return"this.lookup("+JSON.stringify(h.value.toLowerCase())+
",lookups)";case "expr_list":q="[";for(H of h.value)"["!==q&&(q+=","),q+=this.evaluateNodeToJavaScript(H);return q+="]";case "unary_expr":return"this.ternaryNot("+this.evaluateNodeToJavaScript(h.expr)+")";case "binary_expr":switch(h.operator){case "AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(h.left)+","+this.evaluateNodeToJavaScript(h.right)+" )";case "OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(h.left)+","+this.evaluateNodeToJavaScript(h.right)+" )";case "IS":if("null"!==
h.right.type)throw Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(h.left)+")";case "ISNOT":if("null"!==h.right.type)throw Error("Unsupported RHS for IS");return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(h.left)+")))";case "IN":return"this.applyIn("+this.evaluateNodeToJavaScript(h.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(h.right)+"))";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(h.left)+",this.ensureArray("+
this.evaluateNodeToJavaScript(h.right)+")))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(h.left)+","+this.evaluateNodeToJavaScript(h.right)+")";case "NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(h.left)+","+this.evaluateNodeToJavaScript(h.right)+")";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(h.left)+","+this.evaluateNodeToJavaScript(h.right)+","+JSON.stringify(h.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+
this.evaluateNodeToJavaScript(h.left)+","+this.evaluateNodeToJavaScript(h.right)+","+JSON.stringify(h.escape)+"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+JSON.stringify(h.operator)+","+this.evaluateNodeToJavaScript(h.left)+","+this.evaluateNodeToJavaScript(h.right)+")";case "*":case "-":case "+":case "/":return"this.calculate("+JSON.stringify(h.operator)+","+this.evaluateNodeToJavaScript(h.left)+","+this.evaluateNodeToJavaScript(h.right)+
")"}throw Error("Not Supported Operator "+h.operator);case "null":case "bool":case "string":case "number":return JSON.stringify(h.value);case "date":return"(new Date("+D(h.value).getTime().toString()+"))";case "timestamp":return"(new Date("+u(h.value).getTime().toString()+"))";case "current_time":return"date"===h.mode?"this.currentDate()":"this.currentTimestamp()";case "column_ref":return"this.featureValue(feature,"+JSON.stringify(h.column)+",datefields,attributeAdapter)";case "function":return"this.evaluateFunction("+
JSON.stringify(h.name)+","+this.evaluateNodeToJavaScript(h.args)+")"}throw Error("Unsupported sql syntax "+h.type);};w.evaluateNode=function(h,q,H){switch(h.type){case "interval":return q=this.evaluateNode(h.value,q,H),p.SqlInterval.createFromValueAndQualifer(q,h.qualifier,h.op);case "case_expression":if("simple"===h.format){var z=l(this.evaluateNode(h.operand,q,H));for(var V=0;V<h.clauses.length;V++)if(z===l(this.evaluateNode(h.clauses[V].operand,q,H)))return this.evaluateNode(h.clauses[V].value,
q,H)}else for(z=0;z<h.clauses.length;z++)if(!0===this.evaluateNode(h.clauses[z].operand,q,H))return this.evaluateNode(h.clauses[z].value,q,H);return null!==h.else?this.evaluateNode(h.else,q,H):null;case "param":return this.parameters[h.value.toLowerCase()];case "expr_list":z=[];for(V of h.value)z.push(this.evaluateNode(V,q,H));return z;case "unary_expr":return R(this.evaluateNode(h.expr,q,H));case "binary_expr":switch(h.operator){case "AND":return v(this.evaluateNode(h.left,q,H),this.evaluateNode(h.right,
q,H));case "OR":return r(this.evaluateNode(h.left,q,H),this.evaluateNode(h.right,q,H));case "IS":if("null"!==h.right.type)throw Error("Unsupported RHS for IS");return null===this.evaluateNode(h.left,q,H);case "ISNOT":if("null"!==h.right.type)throw Error("Unsupported RHS for IS");return null!==this.evaluateNode(h.left,q,H);case "IN":return z=fa(this.evaluateNode(h.right,q,H)),t(this.evaluateNode(h.left,q,H),z);case "NOT IN":return z=fa(this.evaluateNode(h.right,q,H)),R(t(this.evaluateNode(h.left,q,
H),z));case "BETWEEN":return z=this.evaluateNode(h.left,q,H),h=this.evaluateNode(h.right,q,H),null==z||null==h[0]||null==h[1]?null:z>=l(h[0])&&z<=l(h[1]);case "NOTBETWEEN":return z=this.evaluateNode(h.left,q,H),h=this.evaluateNode(h.right,q,H),null==z||null==h[0]||null==h[1]?null:z<l(h[0])||z>l(h[1]);case "LIKE":return d(this.evaluateNode(h.left,q,H),this.evaluateNode(h.right,q,H),h.escape);case "NOT LIKE":return R(d(this.evaluateNode(h.left,q,H),this.evaluateNode(h.right,q,H),h.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return E(h.operator,
this.evaluateNode(h.left,q,H),this.evaluateNode(h.right,q,H));case "-":case "+":case "*":case "/":return C(h.operator,this.evaluateNode(h.left,q,H),this.evaluateNode(h.right,q,H))}case "null":case "bool":case "string":case "number":return h.value;case "date":return D(h.value);case "timestamp":return u(h.value);case "current_time":return q=new Date,"date"===h.mode&&q.setHours(0,0,0,0),q;case "column_ref":return J(q,h.column,this.datefields,H);case "function":return q=this.evaluateNode(h.args,q,H),
this.isAggregate?O.aggregateFunction(h.name,q):p.evaluateFunction(h.name,q)}throw Error("Unsupported sql syntax "+h.type);};m._createClass(S,[{key:"fieldNames",get:function(){return this.referencedFieldNames}}]);return S}();const Q={getAttribute(S,w){return(S&&"object"===typeof S.attributes?S.attributes:S)[w]}};n.WhereClause=M;n.defaultAttributeAdapter=Q;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/core/sql/AggregateFunctions":function(){define(["exports"],function(n){function m(p){let I=
0;for(let k=0;k<p.length;k++)I+=p[k];return I/p.length}function da(p){const I=m(p),k=p.length;let y=0;for(const u of p)y+=(u-I)**2;return 1<k?y/(k-1):0}const O={min:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.min.apply(Math,p[0])},max:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.max.apply(Math,p[0])},avg:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:m(p[0])},sum:{minParams:1,maxParams:1,evaluate:p=>{if(null==p[0])p=null;else{{p=p[0];let I=0;for(let k=0;k<p.length;k++)I+=
p[k];p=I}}return p}},stddev:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.sqrt(da(p[0]))},count:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:p[0].length},var:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:da(p[0])}};n.aggregateFunction=function(p,I){const k=O[p.toLowerCase()];if(null==k)throw Error("Function Not Recognised");if(I.length<k.minParams||I.length>k.maxParams)throw Error(`Invalid Parameter count for call to ${p.toUpperCase()}`);return k.evaluate(I)};n.isAggregate=
function(p,I){p=O[p.toLowerCase()];return null!=p&&I>=p.minParams&&I<=p.maxParams};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/core/sql/StandardizedFunctions":function(){define(["exports","../string"],function(n,m){let da=function(){function p(){this.op="+";this.minute=this.year=this.month=this.hour=this.second=this.day=0}p.fixDefaults=function(I){if(null!==I.precision||null!==I.secondary)throw Error("Primary and Secondary SqlInterval qualifiers not supported");};p.createFromMilliseconds=
function(I){const k=new p;k.second=I/1E3;return k};p.createFromValueAndQualifer=function(I,k,y){let u=null;const D=new p;D.op="-"===y?"-":"+";if("interval-period"===k.type){p.fixDefaults(k);if("year"===k.period||"month"===k.period)throw Error("Year-Month Intervals not supported");if(/^[0-9]{1,}$/.test(I))D[k.period]=parseFloat(I);else throw Error("Illegal Interval");}else{p.fixDefaults(k.start);p.fixDefaults(k.end);if("year"===k.start.period||"month"===k.start.period)throw Error("Year-Month Intervals not supported");
if("year"===k.end.period||"month"===k.end.period)throw Error("Year-Month Intervals not supported");switch(k.start.period){case "day":switch(k.end.period){case "hour":u=/^[0-9]{1,} [0-9]{1,}$/;if(u.test(I))D[k.start.period]=parseFloat(I.split(" ")[0]),D[k.end.period]=parseFloat(I.split(" ")[1]);else throw Error("Illegal Interval");break;case "minute":u=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$/;if(u.test(I))D[k.start.period]=parseFloat(I.split(" ")[0]),I=I.split(" ")[1].split(":"),D.hour=parseFloat(I[0]),
D.minute=parseFloat(I[1]);else throw Error("Illegal Interval");break;case "second":u=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(u.test(I))D[k.start.period]=parseFloat(I.split(" ")[0]),I=I.split(" ")[1].split(":"),D.hour=parseFloat(I[0]),D.minute=parseFloat(I[1]),D.second=parseFloat(I[2]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;case "hour":switch(k.end.period){case "minute":u=/^[0-9]{1,}:[0-9]{1,}$/;if(u.test(I))D.hour=parseFloat(I.split(":")[0]),
D.minute=parseFloat(I.split(":")[1]);else throw Error("Illegal Interval");break;case "second":u=/^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(u.test(I))I=I.split(":"),D.hour=parseFloat(I[0]),D.minute=parseFloat(I[1]),D.second=parseFloat(I[2]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;case "minute":switch(k.end.period){case "second":u=/^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(u.test(I))I=I.split(":"),D.minute=parseFloat(I[0]),D.second=parseFloat(I[1]);
else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;default:throw"Invalid Interval.";}}return D};p.prototype.valueInMilliseconds=function(){return("-"===this.op?-1:1)*(1E3*this.second+6E4*this.minute+36E5*this.hour+864E5*this.day+365/12*this.month*864E5+31536E6*this.year)};return p}();const O={extract:{minParams:2,maxParams:2,evaluate:([p,I])=>{if(null==I)return null;if(I instanceof Date)switch(p.toUpperCase()){case "SECOND":return I.getSeconds();case "MINUTE":return I.getMinutes();
case "HOUR":return I.getHours();case "DAY":return I.getDate();case "MONTH":return I.getMonth()+1;case "YEAR":return I.getFullYear()}throw Error("Invalid Parameter for call to EXTRACT");}},substring:{minParams:2,maxParams:3,evaluate:p=>{if(2===p.length){const [I,k]=p;return null==I||null==k?null:I.toString().substring(k-1)}if(3===p.length){const [I,k,y]=p;return null==I||null==k||null==y?null:0>=y?"":I.toString().substring(k-1,k+y-1)}}},position:{minParams:2,maxParams:2,evaluate:([p,I])=>null==p||
null==I?null:I.indexOf(p)+1},trim:{minParams:2,maxParams:3,evaluate:p=>{var I=3===p.length,k=I?p[1]:" ";I=I?p[2]:p[1];if(null==k||null==I)return null;k=`(${m.escapeRegExpString(k)})`;switch(p[0]){case "BOTH":return I.replace(new RegExp(`^${k}*|${k}*$`,"g"),"");case "LEADING":return I.replace(new RegExp(`^${k}*`,"g"),"");case "TRAILING":return I.replace(new RegExp(`${k}*$`,"g"),"")}throw Error("Invalid Parameter for call to TRIM");}},abs:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.abs(p[0])},
ceiling:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.ceil(p[0])},floor:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.floor(p[0])},log:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.log(p[0])},log10:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.log(p[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.sin(p[0])},cos:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.cos(p[0])},tan:{minParams:1,maxParams:1,evaluate:p=>
null==p[0]?null:Math.tan(p[0])},asin:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.asin(p[0])},acos:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.acos(p[0])},atan:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.atan(p[0])},sign:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:0<p[0]?1:0>p[1]?-1:0},power:{minParams:2,maxParams:2,evaluate:p=>null==p[0]||null==p[1]?null:p[0]**p[1]},mod:{minParams:2,maxParams:2,evaluate:p=>null==p[0]||null==p[1]?null:p[0]%p[1]},round:{minParams:1,
maxParams:2,evaluate:p=>{const I=p[0];p=2===p.length?10**p[1]:1;return null==I?null:Math.round(I*p)/p}},truncate:{minParams:1,maxParams:2,evaluate:p=>null==p[0]?null:1===p.length?parseInt(p[0].toFixed(0),10):parseFloat(p[0].toFixed(p[1]))},char_length:{minParams:1,maxParams:1,evaluate:p=>"string"===typeof p[0]||p[0]instanceof String?p[0].length:0},concat:{minParams:1,maxParams:Infinity,evaluate:p=>{let I="";for(let k=0;k<p.length;k++){if(null==p[k])return null;I+=p[k].toString()}return I}},lower:{minParams:1,
maxParams:1,evaluate:p=>null==p[0]?null:p[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:p[0].toString().toUpperCase()}};n.SqlInterval=da;n.evaluateFunction=function(p,I){const k=O[p.toLowerCase()];if(null==k)throw Error("Function Not Recognised");if(I.length<k.minParams||I.length>k.maxParams)throw Error(`Invalid Parameter count for call to ${p.toUpperCase()}`);return k.evaluate(I)};n.isStandardized=function(p,I){p=O[p.toLowerCase()];return null!=p&&I>=p.minParams&&
I<=p.maxParams};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/core/sql/WhereGrammar":function(){define(["exports","../../chunks/_commonjsHelpers"],function(n,m){var da=m.createCommonjsModule(function(p){(function(I,k){p.exports&&(p.exports=k())})(m.commonjsGlobal,function(){function I(k,y,u,D){this.message=k;this.expected=y;this.found=u;this.location=D;this.name="SyntaxError";"function"===typeof Error.captureStackTrace&&Error.captureStackTrace(this,I)}(function(k,y){function u(){this.constructor=
k}u.prototype=y.prototype;k.prototype=new u})(I,Error);I.buildMessage=function(k,y){function u(v){return v.charCodeAt(0).toString(16).toUpperCase()}function D(v){return v.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(r){return"\\x0"+u(r)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(r){return"\\x"+u(r)})}function fa(v){return v.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,
"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(r){return"\\x0"+u(r)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(r){return"\\x"+u(r)})}var R={literal:function(v){return'"'+D(v.text)+'"'},"class":function(v){var r="",t;for(t=0;t<v.parts.length;t++)r+=v.parts[t]instanceof Array?fa(v.parts[t][0])+"-"+fa(v.parts[t][1]):fa(v.parts[t]);return"["+(v.inverted?"^":"")+r+"]"},any:function(v){return"any character"},end:function(v){return"end of input"},
other:function(v){return v.description}};return"Expected "+function(v){var r=Array(v.length),t;for(t=0;t<v.length;t++){var d=t;var l=v[t];l=R[l.type](l);r[d]=l}r.sort();if(0<r.length){for(v=t=1;t<r.length;t++)r[t-1]!==r[t]&&(r[v]=r[t],v++);r.length=v}switch(r.length){case 1:return r[0];case 2:return r[0]+" or "+r[1];default:return r.slice(0,-1).join(", ")+", or "+r[r.length-1]}}(k)+" but "+(y?'"'+D(y)+'"':"end of input")+" found."};return{SyntaxError:I,parse:function(k,y){function u(g,B){return{type:"literal",
text:g,ignoreCase:B}}function D(g,B,A){return{type:"class",parts:g,inverted:B,ignoreCase:A}}function fa(g){var B=Zb[g],A;if(!B){for(A=g-1;!Zb[A];)A--;B=Zb[A];for(B={line:B.line,column:B.column};A<g;)10===k.charCodeAt(A)?(B.line++,B.column=1):B.column++,A++;Zb[g]=B}return B}function R(g,B){var A=fa(g),W=fa(B);return{start:{offset:g,line:A.line,column:A.column},end:{offset:B,line:W.line,column:W.column}}}function v(g){c<sb||(c>sb&&(sb=c,oc=[]),oc.push(g))}function r(){var g=c;var B=qa();if(B!==a)if(B=
d(),B!==a){var A=qa();A!==a?g=B:(c=g,g=a)}else c=g,g=a;else c=g,g=a;return g}function t(){var g=c;var B=d();if(B!==a){var A=[];var W=c;var ua=qa();if(ua!==a){var Fa=Ha();if(Fa!==a){var La=qa();if(La!==a){var Pa=d();Pa!==a?W=ua=[ua,Fa,La,Pa]:(c=W,W=a)}else c=W,W=a}else c=W,W=a}else c=W,W=a;for(;W!==a;)A.push(W),W=c,ua=qa(),ua!==a?(Fa=Ha(),Fa!==a?(La=qa(),La!==a?(Pa=d(),Pa!==a?W=ua=[ua,Fa,La,Pa]:(c=W,W=a)):(c=W,W=a)):(c=W,W=a)):(c=W,W=a);if(A!==a){g={type:"expr_list"};B=[B];for(W=0;W<A.length;W++)B.push(A[W][3]);
g.value=B}else c=g,g=a}else c=g,g=a;return g}function d(){var g=c;var B=l();if(B!==a){var A=[];var W=c;var ua=qa();if(ua!==a){var Fa=L();if(Fa!==a){var La=qa();if(La!==a){var Pa=l();Pa!==a?W=ua=[ua,Fa,La,Pa]:(c=W,W=a)}else c=W,W=a}else c=W,W=a}else c=W,W=a;for(;W!==a;)A.push(W),W=c,ua=qa(),ua!==a?(Fa=L(),Fa!==a?(La=qa(),La!==a?(Pa=l(),Pa!==a?W=ua=[ua,Fa,La,Pa]:(c=W,W=a)):(c=W,W=a)):(c=W,W=a)):(c=W,W=a);A!==a?g=B=cb(B,A):(c=g,g=a)}else c=g,g=a;return g}function l(){var g=c;var B=E();if(B!==a){var A=
[];var W=c;var ua=qa();if(ua!==a){var Fa=x();if(Fa!==a){var La=qa();if(La!==a){var Pa=E();Pa!==a?W=ua=[ua,Fa,La,Pa]:(c=W,W=a)}else c=W,W=a}else c=W,W=a}else c=W,W=a;for(;W!==a;)A.push(W),W=c,ua=qa(),ua!==a?(Fa=x(),Fa!==a?(La=qa(),La!==a?(Pa=E(),Pa!==a?W=ua=[ua,Fa,La,Pa]:(c=W,W=a)):(c=W,W=a)):(c=W,W=a)):(c=W,W=a);A!==a?g=B=cb(B,A):(c=g,g=a)}else c=g,g=a;return g}function E(){var g=c;var B=f();if(B===a){B=c;if(33===k.charCodeAt(c)){var A=Ta;c++}else A=a,0===ra&&v(jb);if(A!==a){var W=c;ra++;if(61===
k.charCodeAt(c)){var ua=rb;c++}else ua=a,0===ra&&v(Qa);ra--;ua===a?W=void 0:(c=W,W=a);W!==a?B=A=[A,W]:(c=B,B=a)}else c=B,B=a}B!==a?(A=qa(),A!==a?(W=E(),W!==a?g=B={type:"unary_expr",operator:"NOT",expr:W}:(c=g,g=a)):(c=g,g=a)):(c=g,g=a);if(g===a)if(g=c,B=T(),B!==a)if(A=qa(),A!==a){A=[];W=c;ua=qa();if(ua!==a){var Fa=K();if(Fa!==a){var La=qa();if(La!==a){var Pa=T();Pa!==a?W=ua=[ua,Fa,La,Pa]:(c=W,W=a)}else c=W,W=a}else c=W,W=a}else c=W,W=a;if(W!==a)for(;W!==a;)A.push(W),W=c,ua=qa(),ua!==a?(Fa=K(),Fa!==
a?(La=qa(),La!==a?(Pa=T(),Pa!==a?W=ua=[ua,Fa,La,Pa]:(c=W,W=a)):(c=W,W=a)):(c=W,W=a)):(c=W,W=a);else A=a;A!==a&&(A={type:"arithmetic",tail:A});A===a&&(A=c,W=J(),W!==a?(ua=qa(),ua!==a?(ua=Ia(),ua!==a?(ua=qa(),ua!==a?(ua=t(),ua!==a?(Fa=qa(),Fa!==a?(Fa=Sa(),Fa!==a?A=W={op:W,right:ua}:(c=A,A=a)):(c=A,A=a)):(c=A,A=a)):(c=A,A=a)):(c=A,A=a)):(c=A,A=a)):(c=A,A=a),A===a&&(A=c,W=J(),W!==a?(ua=qa(),ua!==a?(ua=Ia(),ua!==a?(ua=qa(),ua!==a?(ua=Sa(),ua!==a?A=W={op:W,right:{type:"expr_list",value:[]}}:(c=A,A=a)):
(c=A,A=a)):(c=A,A=a)):(c=A,A=a)):(c=A,A=a),A===a&&(A=c,W=J(),W!==a?(ua=qa(),ua!==a?(ua=w(),ua!==a?A=W={op:W,right:ua}:(c=A,A=a)):(c=A,A=a)):(c=A,A=a))),A===a&&(A=c,ua=f(),ua!==a?(W=qa(),W!==a?(W=N(),W!==a?(Fa=qa(),Fa!==a?(Fa=T(),Fa!==a?(La=qa(),La!==a?(La=x(),La!==a?(ua=qa(),ua!==a?(ua=T(),ua!==a?A=ua={op:"NOT"+W,right:{type:"expr_list",value:[Fa,ua]}}:(c=A,A=a)):(c=A,A=a)):(c=A,A=a)):(c=A,A=a)):(c=A,A=a)):(c=A,A=a)):(c=A,A=a)):(c=A,A=a)):(c=A,A=a),A===a&&(A=c,ua=N(),ua!==a?(W=qa(),W!==a?(W=T(),W!==
a?(Fa=qa(),Fa!==a?(Fa=x(),Fa!==a?(La=qa(),La!==a?(La=T(),La!==a?A=ua={op:ua,right:{type:"expr_list",value:[W,La]}}:(c=A,A=a)):(c=A,A=a)):(c=A,A=a)):(c=A,A=a)):(c=A,A=a)):(c=A,A=a)):(c=A,A=a)),A===a&&(A=c,W=e(),W!==a?(ua=qa(),ua!==a?(ua=f(),ua!==a?(ua=qa(),ua!==a?(ua=T(),ua!==a?A=W={op:W+"NOT",right:ua}:(c=A,A=a)):(c=A,A=a)):(c=A,A=a)):(c=A,A=a)):(c=A,A=a),A===a&&(A=c,W=e(),W!==a?(ua=qa(),ua!==a?(ua=T(),ua!==a?A=W={op:W,right:ua}:(c=A,A=a)):(c=A,A=a)):(c=A,A=a)),A===a&&(A=c,W=C(),W!==a?(ua=qa(),ua!==
a?(ua=oa(),ua!==a?(Fa=qa(),Fa!==a?(Fa=c,k.substr(c,6).toLowerCase()===ud?(La=k.substr(c,6),c+=6):(La=a,0===ra&&v(vd)),La!==a?(La=c,ra++,Pa=Q(),ra--,Pa===a?La=void 0:(c=La,La=a),La!==a?Fa="ESCAPE":(c=Fa,Fa=a)):(c=Fa,Fa=a),Fa!==a?(Fa=qa(),Fa!==a?(Fa=ma(),Fa!==a?A=W={op:W,right:ua,escape:Fa.value}:(c=A,A=a)):(c=A,A=a)):(c=A,A=a)):(c=A,A=a)):(c=A,A=a)):(c=A,A=a)):(c=A,A=a),A===a&&(A=c,W=C(),W!==a?(ua=qa(),ua!==a?(ua=oa(),ua!==a?A=W={op:W,right:ua,escape:""}:(c=A,A=a)):(c=A,A=a)):(c=A,A=a))))));A===a&&
(A=null);A!==a?(g=B,B=A,""==B||void 0==B||null==B?B=g:(A=null,B=A="arithmetic"==B.type?cb(g,B.tail):hb(B.op,g,B.right,B.escape)),g=B):(c=g,g=a)}else c=g,g=a;else c=g,g=a;return g}function K(){if(k.substr(c,2)===xb){var g=xb;c+=2}else g=a,0===ra&&v(X);g===a&&(62===k.charCodeAt(c)?(g=ca,c++):(g=a,0===ra&&v(ba)),g===a&&(k.substr(c,2)===na?(g=na,c+=2):(g=a,0===ra&&v(ya)),g===a&&(k.substr(c,2)===Ca?(g=Ca,c+=2):(g=a,0===ra&&v(Na)),g===a&&(60===k.charCodeAt(c)?(g=Oa,c++):(g=a,0===ra&&v(ab)),g===a&&(61===
k.charCodeAt(c)?(g=rb,c++):(g=a,0===ra&&v(Qa)),g===a&&(k.substr(c,2)===Za?(g=Za,c+=2):(g=a,0===ra&&v($a))))))));return g}function C(){var g=g=c;var B=f();if(B!==a){var A=qa();if(A!==a){var W=P();W!==a?g=B=[B,A,W]:(c=g,g=a)}else c=g,g=a}else c=g,g=a;g!==a&&(g=g[0]+" "+g[2]);g===a&&(g=P());return g}function J(){var g=g=c;var B=f();if(B!==a){var A=qa();if(A!==a){var W=b();W!==a?g=B=[B,A,W]:(c=g,g=a)}else c=g,g=a}else c=g,g=a;g!==a&&(g=g[0]+" "+g[2]);g===a&&(g=b());return g}function T(){var g=c;var B=
ka();if(B!==a){var A=[];var W=c;var ua=qa();if(ua!==a){var Fa=ea();if(Fa!==a){var La=qa();if(La!==a){var Pa=ka();Pa!==a?W=ua=[ua,Fa,La,Pa]:(c=W,W=a)}else c=W,W=a}else c=W,W=a}else c=W,W=a;for(;W!==a;)A.push(W),W=c,ua=qa(),ua!==a?(Fa=ea(),Fa!==a?(La=qa(),La!==a?(Pa=ka(),Pa!==a?W=ua=[ua,Fa,La,Pa]:(c=W,W=a)):(c=W,W=a)):(c=W,W=a)):(c=W,W=a);A!==a?g=B=cb(B,A):(c=g,g=a)}else c=g,g=a;return g}function ea(){if(43===k.charCodeAt(c)){var g=gb;c++}else g=a,0===ra&&v(kb);g===a&&(45===k.charCodeAt(c)?(g=pc,c++):
(g=a,0===ra&&v(qc)));return g}function ka(){var g=c;var B=F();if(B!==a){var A=[];var W=c;var ua=qa();if(ua!==a){var Fa=Z();if(Fa!==a){var La=qa();if(La!==a){var Pa=F();Pa!==a?W=ua=[ua,Fa,La,Pa]:(c=W,W=a)}else c=W,W=a}else c=W,W=a}else c=W,W=a;for(;W!==a;)A.push(W),W=c,ua=qa(),ua!==a?(Fa=Z(),Fa!==a?(La=qa(),La!==a?(Pa=F(),Pa!==a?W=ua=[ua,Fa,La,Pa]:(c=W,W=a)):(c=W,W=a)):(c=W,W=a)):(c=W,W=a);A!==a?g=B=cb(B,A):(c=g,g=a)}else c=g,g=a;return g}function Z(){if(42===k.charCodeAt(c)){var g=wd;c++}else g=a,
0===ra&&v(xd);g===a&&(47===k.charCodeAt(c)?(g=yd,c++):(g=a,0===ra&&v(zd)));return g}function F(){var g=ma();if(g===a){var B=c;var A=c;var W=Y();if(W!==a){var ua=ia();if(ua!==a){var Fa=pa();Fa!==a?A=W=parseFloat(W+ua+Fa):(c=A,A=a)}else c=A,A=a}else c=A,A=a;A===a&&(A=c,W=Y(),W!==a?(ua=ia(),ua!==a?A=W=parseFloat(W+ua):(c=A,A=a)):(c=A,A=a),A===a&&(A=c,W=Y(),W!==a?(ua=pa(),ua!==a?A=W=parseFloat(W+ua):(c=A,A=a)):(c=A,A=a),A===a&&(A=c,W=Y(),W!==a&&(W=parseFloat(W)),A=W)));var La=A;if(La!==a){var Pa=c;ra++;
var Ad=M();ra--;Ad===a?Pa=void 0:(c=Pa,Pa=a);Pa!==a?B=La={type:"number",value:La}:(c=B,B=a)}else c=B,B=a;g=B;if(g===a){var Lb=c;var Bb=c;if(k.substr(c,4).toLowerCase()===Bd){var $b=k.substr(c,4);c+=4}else $b=a,0===ra&&v(Cd);if($b!==a){var Mb=c;ra++;var Dd=Q();ra--;Dd===a?Mb=void 0:(c=Mb,Mb=a);Mb!==a?Bb=$b=[$b,Mb]:(c=Bb,Bb=a)}else c=Bb,Bb=a;var yb=Bb;yb!==a&&(yb={type:"bool",value:!0});Lb=yb;if(Lb===a){Lb=c;var Cb=c;if(k.substr(c,5).toLowerCase()===Ed){var ac=k.substr(c,5);c+=5}else ac=a,0===ra&&v(Fd);
if(ac!==a){var Nb=c;ra++;var Gd=Q();ra--;Gd===a?Nb=void 0:(c=Nb,Nb=a);Nb!==a?Cb=ac=[ac,Nb]:(c=Cb,Cb=a)}else c=Cb,Cb=a;yb=Cb;yb!==a&&(yb={type:"bool",value:!1});Lb=yb}g=Lb;if(g===a){var Db=c;if(k.substr(c,4).toLowerCase()===Hd){var bc=k.substr(c,4);c+=4}else bc=a,0===ra&&v(Id);if(bc!==a){var Ob=c;ra++;var Jd=Q();ra--;Jd===a?Ob=void 0:(c=Ob,Ob=a);Ob!==a?Db=bc=[bc,Ob]:(c=Db,Db=a)}else c=Db,Db=a;var rc=Db;rc!==a&&(rc={type:"null",value:null});g=rc;if(g===a){var vb=c;var Eb=c;if(k.substr(c,4).toLowerCase()===
Kd){var sc=k.substr(c,4);c+=4}else sc=a,0===ra&&v(Ld);if(sc!==a){var cc=c;ra++;var Md=Q();ra--;Md===a?cc=void 0:(c=cc,cc=a);cc!==a?Eb=sc="DATE":(c=Eb,Eb=a)}else c=Eb,Eb=a;var Rc=Eb;if(Rc!==a){var Nd=qa();if(Nd!==a){var Sc=oa();Sc!==a?vb=Rc={type:"date",value:Sc.value}:(c=vb,vb=a)}else c=vb,vb=a}else c=vb,vb=a;g=vb;if(g===a){var wb=c;var Fb=c;if(k.substr(c,9).toLowerCase()===Od){var tc=k.substr(c,9);c+=9}else tc=a,0===ra&&v(Pd);if(tc!==a){var dc=c;ra++;var Qd=Q();ra--;Qd===a?dc=void 0:(c=dc,dc=a);
dc!==a?Fb=tc="TIMESTAMP":(c=Fb,Fb=a)}else c=Fb,Fb=a;var Tc=Fb;if(Tc!==a){var Rd=qa();if(Rd!==a){var Uc=oa();Uc!==a?wb=Tc={type:"timestamp",value:Uc.value}:(c=wb,wb=a)}else c=wb,wb=a}else c=wb,wb=a;g=wb;if(g===a){var Xa=c;var Pb=ha();if(Pb!==a){var uc=qa();if(uc!==a){if(45===k.charCodeAt(c)){var tb=pc;c++}else tb=a,0===ra&&v(qc);tb===a&&(43===k.charCodeAt(c)?(tb=gb,c++):(tb=a,0===ra&&v(kb)));if(tb!==a){var vc=qa();if(vc!==a){var Qb=oa();if(Qb!==a){var Sd=qa();if(Sd!==a){var Vc=q();Vc!==a?Xa=Pb={type:"interval",
value:Qb,qualifier:Vc,op:tb}:(c=Xa,Xa=a)}else c=Xa,Xa=a}else c=Xa,Xa=a}else c=Xa,Xa=a}else c=Xa,Xa=a}else c=Xa,Xa=a}else c=Xa,Xa=a;Xa===a&&(Xa=c,Pb=ha(),Pb!==a?(uc=qa(),uc!==a?(tb=oa(),tb!==a?(vc=qa(),vc!==a?(Qb=q(),Qb!==a?Xa=Pb={type:"interval",value:tb,qualifier:Qb,op:""}:(c=Xa,Xa=a)):(c=Xa,Xa=a)):(c=Xa,Xa=a)):(c=Xa,Xa=a)):(c=Xa,Xa=a));g=Xa}}}}}}var Wa=g;if(Wa===a){var db=c;var Gb=c;if(k.substr(c,7).toLowerCase()===Td){var wc=k.substr(c,7);c+=7}else wc=a,0===ra&&v(Ud);if(wc!==a){var ec=c;ra++;var Vd=
Q();ra--;Vd===a?ec=void 0:(c=ec,ec=a);ec!==a?Gb=wc="EXTRACT":(c=Gb,Gb=a)}else c=Gb,Gb=a;var Wc=Gb;if(Wc!==a){var Wd=qa();if(Wd!==a){var Xd=Ia();if(Xd!==a){var Yd=qa();if(Yd!==a){var ob=ja();ob===a&&(ob=la(),ob===a&&(ob=ta(),ob===a&&(ob=sa(),ob===a&&(ob=xa(),ob===a&&(ob=Ba())))));var Xc=ob;if(Xc!==a){var Zd=qa();if(Zd!==a){var $d=aa();if($d!==a){var ae=qa();if(ae!==a){var Yc=d();if(Yc!==a){var be=qa();if(be!==a){var ce=Sa();ce!==a?db=Wc={type:"function",name:"extract",args:{type:"expr_list",value:[{type:"string",
value:Xc},Yc]}}:(c=db,db=a)}else c=db,db=a}else c=db,db=a}else c=db,db=a}else c=db,db=a}else c=db,db=a}else c=db,db=a}else c=db,db=a}else c=db,db=a}else c=db,db=a}else c=db,db=a;Wa=db;if(Wa===a){var bb=c;var Hb=c;if(k.substr(c,9).toLowerCase()===de){var xc=k.substr(c,9);c+=9}else xc=a,0===ra&&v(ee);if(xc!==a){var fc=c;ra++;var fe=Q();ra--;fe===a?fc=void 0:(c=fc,fc=a);fc!==a?Hb=xc="SUBSTRING":(c=Hb,Hb=a)}else c=Hb,Hb=a;var Zc=Hb;if(Zc!==a){var ge=qa();if(ge!==a){var he=Ia();if(he!==a){var ie=qa();
if(ie!==a){var yc=d();if(yc!==a){var je=qa();if(je!==a){var ke=aa();if(ke!==a){var le=qa();if(le!==a){var zc=d();if(zc!==a){var me=qa();if(me!==a){var lb=c;var Ib=c;if(k.substr(c,3).toLowerCase()===ne){var Ac=k.substr(c,3);c+=3}else Ac=a,0===ra&&v(oe);if(Ac!==a){var gc=c;ra++;var pe=Q();ra--;pe===a?gc=void 0:(c=gc,gc=a);gc!==a?Ib=Ac="FOR":(c=Ib,Ib=a)}else c=Ib,Ib=a;var Rb=Ib;if(Rb!==a){var $c=qa();if($c!==a){var ad=d();if(ad!==a){var bd=qa();bd!==a?lb=Rb=[Rb,$c,ad,bd]:(c=lb,lb=a)}else c=lb,lb=a}else c=
lb,lb=a}else c=lb,lb=a;lb===a&&(lb=null);lb!==a?(Rb=Sa(),Rb!==a?bb=Zc={type:"function",name:"substring",args:{type:"expr_list",value:lb?[yc,zc,lb[2]]:[yc,zc]}}:(c=bb,bb=a)):(c=bb,bb=a)}else c=bb,bb=a}else c=bb,bb=a}else c=bb,bb=a}else c=bb,bb=a}else c=bb,bb=a}else c=bb,bb=a}else c=bb,bb=a}else c=bb,bb=a}else c=bb,bb=a}else c=bb,bb=a;Wa=bb;if(Wa===a){var Ma=c;var Sb=U();if(Sb!==a){var Bc=qa();if(Bc!==a){var Cc=Ia();if(Cc!==a){var Dc=qa();if(Dc!==a){var pb=h();pb===a&&(pb=null);if(pb!==a){var Ec=qa();
if(Ec!==a){var Tb=d();if(Tb!==a){var Fc=qa();if(Fc!==a){var Gc=aa();if(Gc!==a){var qe=qa();if(qe!==a){var cd=d();if(cd!==a){var re=qa();if(re!==a){var se=Sa();se!==a?Ma=Sb={type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==pb?"BOTH":pb},Tb,cd]}}:(c=Ma,Ma=a)}else c=Ma,Ma=a}else c=Ma,Ma=a}else c=Ma,Ma=a}else c=Ma,Ma=a}else c=Ma,Ma=a}else c=Ma,Ma=a}else c=Ma,Ma=a}else c=Ma,Ma=a}else c=Ma,Ma=a}else c=Ma,Ma=a}else c=Ma,Ma=a}else c=Ma,Ma=a;Ma===a&&(Ma=c,Sb=U(),Sb!==a?
(Bc=qa(),Bc!==a?(Cc=Ia(),Cc!==a?(Dc=qa(),Dc!==a?(pb=h(),pb===a&&(pb=null),pb!==a?(Ec=qa(),Ec!==a?(Tb=d(),Tb!==a?(Fc=qa(),Fc!==a?(Gc=Sa(),Gc!==a?Ma=Sb={type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==pb?"BOTH":pb},Tb]}}:(c=Ma,Ma=a)):(c=Ma,Ma=a)):(c=Ma,Ma=a)):(c=Ma,Ma=a)):(c=Ma,Ma=a)):(c=Ma,Ma=a)):(c=Ma,Ma=a)):(c=Ma,Ma=a)):(c=Ma,Ma=a));Wa=Ma;if(Wa===a){var eb=c;var Jb=c;if(k.substr(c,8).toLowerCase()===te){var Hc=k.substr(c,8);c+=8}else Hc=a,0===ra&&v(ue);if(Hc!==
a){var hc=c;ra++;var ve=Q();ra--;ve===a?hc=void 0:(c=hc,hc=a);hc!==a?Jb=Hc="POSITION":(c=Jb,Jb=a)}else c=Jb,Jb=a;var dd=Jb;if(dd!==a){var we=qa();if(we!==a){var xe=Ia();if(xe!==a){var ye=qa();if(ye!==a){var ed=d();if(ed!==a){var ze=qa();if(ze!==a){var Ae=b();if(Ae!==a){var Be=qa();if(Be!==a){var fd=d();if(fd!==a){var Ce=qa();if(Ce!==a){var De=Sa();De!==a?eb=dd={type:"function",name:"position",args:{type:"expr_list",value:[ed,fd]}}:(c=eb,eb=a)}else c=eb,eb=a}else c=eb,eb=a}else c=eb,eb=a}else c=eb,
eb=a}else c=eb,eb=a}else c=eb,eb=a}else c=eb,eb=a}else c=eb,eb=a}else c=eb,eb=a}else c=eb,eb=a;Wa=eb;if(Wa===a){var ib=c;var Ub;var qb=c;qb=Ub=G();if(qb===a)if(qb=c,96===k.charCodeAt(c)?(Ub=gd,c++):(Ub=a,0===ra&&v(hd)),Ub!==a){var ic=[];if(id.test(k.charAt(c))){var ub=k.charAt(c);c++}else ub=a,0===ra&&v(jd);if(ub!==a)for(;ub!==a;)ic.push(ub),id.test(k.charAt(c))?(ub=k.charAt(c),c++):(ub=a,0===ra&&v(jd));else ic=a;ic!==a?(96===k.charCodeAt(c)?(ub=gd,c++):(ub=a,0===ra&&v(hd)),ub!==a?qb=Ub=ic.join(""):
(c=qb,qb=a)):(c=qb,qb=a)}else c=qb,qb=a;var Ic=qb;if(Ic!==a){var Ee=qa();if(Ee!==a){var Fe=Ia();if(Fe!==a){var Ge=qa();if(Ge!==a){var Vb=t();Vb===a&&(Vb=null);if(Vb!==a){var He=qa();if(He!==a){var Ie=Sa();Ie!==a?ib=Ic={type:"function",name:Ic,args:Vb?Vb:{type:"expr_list",value:[]}}:(c=ib,ib=a)}else c=ib,ib=a}else c=ib,ib=a}else c=ib,ib=a}else c=ib,ib=a}else c=ib,ib=a}else c=ib,ib=a;Wa=ib;if(Wa===a){var mb;var Ra=c;var Wb=Ea();if(Wb!==a){var Jc=qa();if(Jc!==a){var Xb=d();if(Xb!==a){var Kc=qa();if(Kc!==
a){var zb=[];for(mb=za();mb!==a;)zb.push(mb),mb=za();if(zb!==a)if(mb=qa(),mb!==a){var jc=Ka();jc!==a?Ra=Wb={type:"case_expression",format:"simple",operand:Xb,clauses:zb,else:null}:(c=Ra,Ra=a)}else c=Ra,Ra=a;else c=Ra,Ra=a}else c=Ra,Ra=a}else c=Ra,Ra=a}else c=Ra,Ra=a}else c=Ra,Ra=a;if(Ra===a)if(Ra=c,Wb=Ea(),Wb!==a)if(Jc=qa(),Jc!==a)if(Xb=d(),Xb!==a)if(Kc=qa(),Kc!==a){zb=[];for(mb=za();mb!==a;)zb.push(mb),mb=za();if(zb!==a)if(mb=qa(),mb!==a)if(jc=Da(),jc!==a){var Je=qa();if(Je!==a){var Ke=Ka();Ke!==
a?Ra=Wb={type:"case_expression",format:"simple",operand:Xb,clauses:zb,else:jc.value}:(c=Ra,Ra=a)}else c=Ra,Ra=a}else c=Ra,Ra=a;else c=Ra,Ra=a;else c=Ra,Ra=a}else c=Ra,Ra=a;else c=Ra,Ra=a;else c=Ra,Ra=a;else c=Ra,Ra=a;var Lc=Ra;if(Lc===a){var nb;var Ya=c;var Yb=Ea();if(Yb!==a){var Mc=qa();if(Mc!==a){var Ab=[];for(nb=va();nb!==a;)Ab.push(nb),nb=va();if(Ab!==a)if(nb=qa(),nb!==a){var kc=Ka();kc!==a?Ya=Yb={type:"case_expression",format:"searched",clauses:Ab,else:null}:(c=Ya,Ya=a)}else c=Ya,Ya=a;else c=
Ya,Ya=a}else c=Ya,Ya=a}else c=Ya,Ya=a;if(Ya===a)if(Ya=c,Yb=Ea(),Yb!==a)if(Mc=qa(),Mc!==a){Ab=[];for(nb=va();nb!==a;)Ab.push(nb),nb=va();if(Ab!==a)if(nb=qa(),nb!==a)if(kc=Da(),kc!==a){var Le=qa();if(Le!==a){var Me=Ka();Me!==a?Ya=Yb={type:"case_expression",format:"searched",clauses:Ab,else:kc.value}:(c=Ya,Ya=a)}else c=Ya,Ya=a}else c=Ya,Ya=a;else c=Ya,Ya=a;else c=Ya,Ya=a}else c=Ya,Ya=a;else c=Ya,Ya=a;Lc=Ya}Wa=Lc;if(Wa===a){var lc;var Kb=c;var kd=M();if(kd!==a){var Nc=[];for(lc=S();lc!==a;)Nc.push(lc),
lc=S();Nc!==a?Kb=kd+=Nc.join(""):(c=Kb,Kb=a)}else c=Kb,Kb=a;var mc=Kb;if(mc!==a){var Oc=mc;mc=/^CURRENT_DATE$/i.test(Oc)?{type:"current_time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(Oc)?{type:"current_time",mode:"timestamp"}:{type:"column_ref",table:"",column:Oc}}Wa=mc;if(Wa===a&&(Wa=w(),Wa===a)){Wa=c;var ld=Ia();if(ld!==a){var Ne=qa();if(Ne!==a){var Pc=d();if(Pc!==a){var Oe=qa();if(Oe!==a){var Pe=Sa();Pe!==a?(Pc.paren=!0,Wa=ld=Pc):(c=Wa,Wa=a)}else c=Wa,Wa=a}else c=Wa,Wa=a}else c=Wa,Wa=a}else c=
Wa,Wa=a}}}}}}}}return Wa}function G(){var g;var B=c;var A=M();if(A!==a){var W=[];for(g=Q();g!==a;)W.push(g),g=Q();W!==a?B=A+=W.join(""):(c=B,B=a)}else c=B,B=a;return B}function M(){if(Qe.test(k.charAt(c))){var g=k.charAt(c);c++}else g=a,0===ra&&v(Re);return g}function Q(){if(Se.test(k.charAt(c))){var g=k.charAt(c);c++}else g=a,0===ra&&v(Te);return g}function S(){if(Ue.test(k.charAt(c))){var g=k.charAt(c);c++}else g=a,0===ra&&v(Ve);return g}function w(){var g=c;if(64===k.charCodeAt(c)){var B=We;c++}else B=
a,0===ra&&v(Xe);if(B!==a){var A=G();A!==a?g=B=[B,A]:(c=g,g=a)}else c=g,g=a;g!==a&&(g={type:"param",value:g[1]});return g}function h(){var g=c;if(k.substr(c,7).toLowerCase()===Ye){var B=k.substr(c,7);c+=7}else B=a,0===ra&&v(Ze);if(B!==a){B=c;ra++;var A=Q();ra--;A===a?B=void 0:(c=B,B=a);B!==a?g="LEADING":(c=g,g=a)}else c=g,g=a;g===a&&(g=c,k.substr(c,8).toLowerCase()===$e?(B=k.substr(c,8),c+=8):(B=a,0===ra&&v(af)),B!==a?(B=c,ra++,A=Q(),ra--,A===a?B=void 0:(c=B,B=a),B!==a?g="TRAILING":(c=g,g=a)):(c=g,
g=a),g===a&&(g=c,k.substr(c,4).toLowerCase()===bf?(B=k.substr(c,4),c+=4):(B=a,0===ra&&v(cf)),B!==a?(B=c,ra++,A=Q(),ra--,A===a?B=void 0:(c=B,B=a),B!==a?g="BOTH":(c=g,g=a)):(c=g,g=a)));return g}function q(){var g=c;var B=c;var A=H();if(A!==a){var W=qa();if(W!==a)if(W=Ia(),W!==a)if(W=qa(),W!==a)if(W=V(),W!==a){var ua=qa();ua!==a?(ua=Sa(),ua!==a?B=A={type:"interval-period",period:A.value,precision:W,secondary:null}:(c=B,B=a)):(c=B,B=a)}else c=B,B=a;else c=B,B=a;else c=B,B=a;else c=B,B=a}else c=B,B=a;
B===a&&(B=c,A=H(),A!==a&&(A=md(A)),B=A);if(B!==a)if(A=qa(),A!==a)if(A=c,k.substr(c,2).toLowerCase()===df?(W=k.substr(c,2),c+=2):(W=a,0===ra&&v(ef)),W!==a?(W=c,ra++,ua=Q(),ra--,ua===a?W=void 0:(c=W,W=a),W!==a?A="TO":(c=A,A=a)):(c=A,A=a),A!==a)if(A=qa(),A!==a){A=c;W=H();W!==a&&(W={type:"interval-period",period:W.value,precision:null,secondary:null});A=W;if(A===a){A=c;W=Ba();if(W!==a)if(W=qa(),W!==a)if(W=Ia(),W!==a)if(W=qa(),W!==a)if(W=V(),W!==a)if(ua=qa(),ua!==a)if(ua=Ha(),ua!==a)if(ua=qa(),ua!==a)if(ua=
z(),ua!==a){var Fa=qa();Fa!==a?(Fa=Sa(),Fa!==a?A=W=nd(W,ua):(c=A,A=a)):(c=A,A=a)}else c=A,A=a;else c=A,A=a;else c=A,A=a;else c=A,A=a;else c=A,A=a;else c=A,A=a;else c=A,A=a;else c=A,A=a;else c=A,A=a;A===a&&(A=c,W=Ba(),W!==a?(W=qa(),W!==a?(W=Ia(),W!==a?(W=qa(),W!==a?(W=V(),W!==a?(ua=qa(),ua!==a?(ua=Sa(),ua!==a?A=W={type:"interval-period",period:"second",precision:W,secondary:null}:(c=A,A=a)):(c=A,A=a)):(c=A,A=a)):(c=A,A=a)):(c=A,A=a)):(c=A,A=a)):(c=A,A=a),A===a&&(A=c,W=Ba(),W!==a&&(W={type:"interval-period",
period:"second",precision:null,secondary:null}),A=W))}A!==a?g=B={type:"interval-qualifier",start:B,end:A}:(c=g,g=a)}else c=g,g=a;else c=g,g=a;else c=g,g=a;else c=g,g=a;g===a&&(g=c,A=H(),A!==a?(B=qa(),B!==a?(B=Ia(),B!==a?(B=qa(),B!==a?(B=z(),B!==a?(W=qa(),W!==a?(W=Sa(),W!==a?g=A={type:"interval-period",period:A.value,precision:B,secondary:null}:(c=g,g=a)):(c=g,g=a)):(c=g,g=a)):(c=g,g=a)):(c=g,g=a)):(c=g,g=a)):(c=g,g=a),g===a&&(g=c,A=H(),A!==a&&(A=md(A)),g=A,g===a&&(g=c,A=Ba(),A!==a?(B=qa(),B!==a?(B=
Ia(),B!==a?(B=qa(),B!==a?(B=V(),B!==a?(W=qa(),W!==a?(W=Ha(),W!==a?(A=qa(),A!==a?(A=z(),A!==a?(W=qa(),W!==a?(W=Sa(),W!==a?g=A=nd(B,A):(c=g,g=a)):(c=g,g=a)):(c=g,g=a)):(c=g,g=a)):(c=g,g=a)):(c=g,g=a)):(c=g,g=a)):(c=g,g=a)):(c=g,g=a)):(c=g,g=a)):(c=g,g=a),g===a&&(g=c,A=Ba(),A!==a?(B=qa(),B!==a?(B=Ia(),B!==a?(B=qa(),B!==a?(B=z(),B!==a?(W=qa(),W!==a?(W=Sa(),W!==a?g=A={type:"interval-period",period:"second",precision:B,secondary:null}:(c=g,g=a)):(c=g,g=a)):(c=g,g=a)):(c=g,g=a)):(c=g,g=a)):(c=g,g=a)):(c=
g,g=a),g===a&&(g=c,A=Ba(),A!==a&&(A={type:"interval-period",period:"second",precision:null,secondary:null}),g=A)))));return g}function H(){var g=c;g=ta();g!==a&&(g={type:"string",value:"day"});g===a&&(g=c,g=sa(),g!==a&&(g={type:"string",value:"hour"}),g===a&&(g=c,g=xa(),g!==a&&(g={type:"string",value:"minute"}),g===a&&(g=c,g=la(),g!==a&&(g={type:"string",value:"month"}),g===a&&(g=c,g=ja(),g!==a&&(g={type:"string",value:"year"})))));return g}function z(){var g=Aa();g!==a&&(g=parseFloat(g));return g}
function V(){var g=Aa();g!==a&&(g=parseFloat(g));return g}function oa(){var g=ma();g===a&&(g=w());return g}function ma(){var g=c;if(39===k.charCodeAt(c)){var B=od;c++}else B=a,0===ra&&v(pd);B===a&&(k.substr(c,2)===qd?(B=qd,c+=2):(B=a,0===ra&&v(ff)));if(B!==a){B=[];var A=c;k.substr(c,2)===nc?(A=nc,c+=2):(A=a,0===ra&&v(rd));A!==a&&(A="'");A===a&&(sd.test(k.charAt(c))?(A=k.charAt(c),c++):(A=a,0===ra&&v(td)));for(;A!==a;)B.push(A),A=c,k.substr(c,2)===nc?(A=nc,c+=2):(A=a,0===ra&&v(rd)),A!==a&&(A="'"),
A===a&&(sd.test(k.charAt(c))?(A=k.charAt(c),c++):(A=a,0===ra&&v(td)));B!==a?(39===k.charCodeAt(c)?(A=od,c++):(A=a,0===ra&&v(pd)),A!==a?g=B={type:"string",value:B.join("")}:(c=g,g=a)):(c=g,g=a)}else c=g,g=a;return g}function va(){var g=c;var B=Ga();if(B!==a)if(B=qa(),B!==a)if(B=d(),B!==a){var A=qa();A!==a?(A=Ja(),A!==a?(A=qa(),A!==a?(A=d(),A!==a?g=B={type:"when_clause",operand:B,value:A}:(c=g,g=a)):(c=g,g=a)):(c=g,g=a)):(c=g,g=a)}else c=g,g=a;else c=g,g=a;else c=g,g=a;return g}function za(){var g=
c;var B=Ga();if(B!==a)if(B=qa(),B!==a)if(B=d(),B!==a){var A=qa();A!==a?(A=Ja(),A!==a?(A=qa(),A!==a?(A=d(),A!==a?g=B={type:"when_clause",operand:B,value:A}:(c=g,g=a)):(c=g,g=a)):(c=g,g=a)):(c=g,g=a)}else c=g,g=a;else c=g,g=a;else c=g,g=a;return g}function Da(){var g=c;var B=c;if(k.substr(c,4).toLowerCase()===gf){var A=k.substr(c,4);c+=4}else A=a,0===ra&&v(hf);if(A!==a){A=c;ra++;var W=Q();ra--;W===a?A=void 0:(c=A,A=a);A!==a?B="ELSE":(c=B,B=a)}else c=B,B=a;B!==a?(B=qa(),B!==a?(B=d(),B!==a?g={type:"else_clause",
value:B}:(c=g,g=a)):(c=g,g=a)):(c=g,g=a);return g}function Y(){var g=Aa();if(g===a){g=c;if(45===k.charCodeAt(c)){var B=pc;c++}else B=a,0===ra&&v(qc);B===a&&(43===k.charCodeAt(c)?(B=gb,c++):(B=a,0===ra&&v(kb)));if(B!==a){var A=Aa();A!==a?g=B=B[0]+A:(c=g,g=a)}else c=g,g=a}return g}function ia(){var g=c;if(46===k.charCodeAt(c)){var B=jf;c++}else B=a,0===ra&&v(kf);B!==a?(B=Aa(),B===a&&(B=null),B!==a?g="."+(null!=B?B:""):(c=g,g=a)):(c=g,g=a);return g}function pa(){var g;var B=g=c;if(lf.test(k.charAt(c))){var A=
k.charAt(c);c++}else A=a,0===ra&&v(mf);A!==a?(nf.test(k.charAt(c))?(A=k.charAt(c),c++):(A=a,0===ra&&v(of)),A===a&&(A=null),A!==a?B="e"+(null===A?"":A):(c=B,B=a)):(c=B,B=a);B!==a?(A=Aa(),A!==a?g=B+A:(c=g,g=a)):(c=g,g=a);return g}function Aa(){var g=[];var B=wa();if(B!==a)for(;B!==a;)g.push(B),B=wa();else g=a;g!==a&&(g=g.join(""));return g}function wa(){if(pf.test(k.charAt(c))){var g=k.charAt(c);c++}else g=a,0===ra&&v(qf);return g}function b(){var g=c;if(k.substr(c,2).toLowerCase()===rf){var B=k.substr(c,
2);c+=2}else B=a,0===ra&&v(sf);if(B!==a){B=c;ra++;var A=Q();ra--;A===a?B=void 0:(c=B,B=a);B!==a?g="IN":(c=g,g=a)}else c=g,g=a;return g}function e(){var g=c;if(k.substr(c,2).toLowerCase()===tf){var B=k.substr(c,2);c+=2}else B=a,0===ra&&v(uf);if(B!==a){B=c;ra++;var A=Q();ra--;A===a?B=void 0:(c=B,B=a);B!==a?g="IS":(c=g,g=a)}else c=g,g=a;return g}function P(){var g=c;if(k.substr(c,4).toLowerCase()===vf){var B=k.substr(c,4);c+=4}else B=a,0===ra&&v(wf);if(B!==a){B=c;ra++;var A=Q();ra--;A===a?B=void 0:(c=
B,B=a);B!==a?g="LIKE":(c=g,g=a)}else c=g,g=a;return g}function f(){var g=c;if(k.substr(c,3).toLowerCase()===xf){var B=k.substr(c,3);c+=3}else B=a,0===ra&&v(yf);if(B!==a){B=c;ra++;var A=Q();ra--;A===a?B=void 0:(c=B,B=a);B!==a?g="NOT":(c=g,g=a)}else c=g,g=a;return g}function x(){var g=c;if(k.substr(c,3).toLowerCase()===zf){var B=k.substr(c,3);c+=3}else B=a,0===ra&&v(Af);if(B!==a){B=c;ra++;var A=Q();ra--;A===a?B=void 0:(c=B,B=a);B!==a?g="AND":(c=g,g=a)}else c=g,g=a;return g}function L(){var g=c;if(k.substr(c,
2).toLowerCase()===Bf){var B=k.substr(c,2);c+=2}else B=a,0===ra&&v(Cf);if(B!==a){B=c;ra++;var A=Q();ra--;A===a?B=void 0:(c=B,B=a);B!==a?g="OR":(c=g,g=a)}else c=g,g=a;return g}function N(){var g=c;if(k.substr(c,7).toLowerCase()===Df){var B=k.substr(c,7);c+=7}else B=a,0===ra&&v(Ef);if(B!==a){B=c;ra++;var A=Q();ra--;A===a?B=void 0:(c=B,B=a);B!==a?g="BETWEEN":(c=g,g=a)}else c=g,g=a;return g}function aa(){var g=c;if(k.substr(c,4).toLowerCase()===Ff){var B=k.substr(c,4);c+=4}else B=a,0===ra&&v(Gf);if(B!==
a){B=c;ra++;var A=Q();ra--;A===a?B=void 0:(c=B,B=a);B!==a?g="FROM":(c=g,g=a)}else c=g,g=a;return g}function U(){var g=c;if(k.substr(c,4).toLowerCase()===Hf){var B=k.substr(c,4);c+=4}else B=a,0===ra&&v(If);if(B!==a){B=c;ra++;var A=Q();ra--;A===a?B=void 0:(c=B,B=a);B!==a?g="TRIM":(c=g,g=a)}else c=g,g=a;return g}function ha(){var g=c;if(k.substr(c,8).toLowerCase()===Jf){var B=k.substr(c,8);c+=8}else B=a,0===ra&&v(Kf);if(B!==a){B=c;ra++;var A=Q();ra--;A===a?B=void 0:(c=B,B=a);B!==a?g="INTERVAL":(c=g,
g=a)}else c=g,g=a;return g}function ja(){var g=c;if(k.substr(c,4).toLowerCase()===Lf){var B=k.substr(c,4);c+=4}else B=a,0===ra&&v(Mf);if(B!==a){B=c;ra++;var A=Q();ra--;A===a?B=void 0:(c=B,B=a);B!==a?g="YEAR":(c=g,g=a)}else c=g,g=a;return g}function la(){var g=c;if(k.substr(c,5).toLowerCase()===Nf){var B=k.substr(c,5);c+=5}else B=a,0===ra&&v(Of);if(B!==a){B=c;ra++;var A=Q();ra--;A===a?B=void 0:(c=B,B=a);B!==a?g="MONTH":(c=g,g=a)}else c=g,g=a;return g}function ta(){var g=c;if(k.substr(c,3).toLowerCase()===
Pf){var B=k.substr(c,3);c+=3}else B=a,0===ra&&v(Qf);if(B!==a){B=c;ra++;var A=Q();ra--;A===a?B=void 0:(c=B,B=a);B!==a?g="DAY":(c=g,g=a)}else c=g,g=a;return g}function sa(){var g=c;if(k.substr(c,4).toLowerCase()===Rf){var B=k.substr(c,4);c+=4}else B=a,0===ra&&v(Sf);if(B!==a){B=c;ra++;var A=Q();ra--;A===a?B=void 0:(c=B,B=a);B!==a?g="HOUR":(c=g,g=a)}else c=g,g=a;return g}function xa(){var g=c;if(k.substr(c,6).toLowerCase()===Tf){var B=k.substr(c,6);c+=6}else B=a,0===ra&&v(Uf);if(B!==a){B=c;ra++;var A=
Q();ra--;A===a?B=void 0:(c=B,B=a);B!==a?g="MINUTE":(c=g,g=a)}else c=g,g=a;return g}function Ba(){var g=c;if(k.substr(c,6).toLowerCase()===Vf){var B=k.substr(c,6);c+=6}else B=a,0===ra&&v(Wf);if(B!==a){B=c;ra++;var A=Q();ra--;A===a?B=void 0:(c=B,B=a);B!==a?g="SECOND":(c=g,g=a)}else c=g,g=a;return g}function Ea(){var g=c;if(k.substr(c,4).toLowerCase()===Xf){var B=k.substr(c,4);c+=4}else B=a,0===ra&&v(Yf);if(B!==a){B=c;ra++;var A=Q();ra--;A===a?B=void 0:(c=B,B=a);B!==a?g="CASE":(c=g,g=a)}else c=g,g=a;
return g}function Ka(){var g=c;if(k.substr(c,3).toLowerCase()===Zf){var B=k.substr(c,3);c+=3}else B=a,0===ra&&v($f);if(B!==a){B=c;ra++;var A=Q();ra--;A===a?B=void 0:(c=B,B=a);B!==a?g="END":(c=g,g=a)}else c=g,g=a;return g}function Ga(){var g=c;if(k.substr(c,4).toLowerCase()===ag){var B=k.substr(c,4);c+=4}else B=a,0===ra&&v(bg);if(B!==a){B=c;ra++;var A=Q();ra--;A===a?B=void 0:(c=B,B=a);B!==a?g="WHEN":(c=g,g=a)}else c=g,g=a;return g}function Ja(){var g=c;if(k.substr(c,4).toLowerCase()===cg){var B=k.substr(c,
4);c+=4}else B=a,0===ra&&v(dg);if(B!==a){B=c;ra++;var A=Q();ra--;A===a?B=void 0:(c=B,B=a);B!==a?g="THEN":(c=g,g=a)}else c=g,g=a;return g}function Ha(){if(44===k.charCodeAt(c)){var g=eg;c++}else g=a,0===ra&&v(fg);return g}function Ia(){if(40===k.charCodeAt(c)){var g=gg;c++}else g=a,0===ra&&v(hg);return g}function Sa(){if(41===k.charCodeAt(c)){var g=ig;c++}else g=a,0===ra&&v(jg);return g}function qa(){var g;var B=[];for(g=fb();g!==a;)B.push(g),g=fb();return B}function fb(){if(kg.test(k.charAt(c))){var g=
k.charAt(c);c++}else g=a,0===ra&&v(lg);return g}function hb(g,B,A,W){g={type:"binary_expr",operator:g,left:B,right:A};void 0!==W&&(g.escape=W);return g}function cb(g,B){for(var A=0;A<B.length;A++)g=hb(B[A][1],g,B[A][3]);return g}y=void 0!==y?y:{};var a={},Va={start:r},Ua=r,Ta="!",jb=u("!",!1),rb="\x3d",Qa=u("\x3d",!1),xb="\x3e\x3d",X=u("\x3e\x3d",!1),ca="\x3e",ba=u("\x3e",!1),na="\x3c\x3d",ya=u("\x3c\x3d",!1),Ca="\x3c\x3e",Na=u("\x3c\x3e",!1),Oa="\x3c",ab=u("\x3c",!1),Za="!\x3d",$a=u("!\x3d",!1),
gb="+",kb=u("+",!1),pc="-",qc=u("-",!1),wd="*",xd=u("*",!1),yd="/",zd=u("/",!1),Qe=/^[A-Za-z_\x80-\uFFFF]/,Re=D([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),Se=/^[A-Za-z0-9_]/,Te=D([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),Ue=/^[A-Za-z0-9_.\x80-\uFFFF]/,Ve=D([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],!1,!1),We="@",Xe=u("@",!1),md=function(g){return{type:"interval-period",period:g.value,precision:null,secondary:null}},nd=function(g,B){return{type:"interval-period",period:"second",
precision:g,secondary:B}},od="'",pd=u("'",!1),qd="N'",ff=u("N'",!1),nc="''",rd=u("''",!1),sd=/^[^']/,td=D(["'"],!0,!1),jf=".",kf=u(".",!1),pf=/^[0-9]/,qf=D([["0","9"]],!1,!1),lf=/^[eE]/,mf=D(["e","E"],!1,!1),nf=/^[+\-]/,of=D(["+","-"],!1,!1),Hd="null",Id=u("NULL",!0),Bd="true",Cd=u("TRUE",!0),Ed="false",Fd=u("FALSE",!0),rf="in",sf=u("IN",!0),tf="is",uf=u("IS",!0),vf="like",wf=u("LIKE",!0),ud="escape",vd=u("ESCAPE",!0),xf="not",yf=u("NOT",!0),zf="and",Af=u("AND",!0),Bf="or",Cf=u("OR",!0),Df="between",
Ef=u("BETWEEN",!0),Ff="from",Gf=u("FROM",!0),ne="for",oe=u("FOR",!0),de="substring",ee=u("SUBSTRING",!0),Td="extract",Ud=u("EXTRACT",!0),Hf="trim",If=u("TRIM",!0),te="position",ue=u("POSITION",!0),Od="timestamp",Pd=u("TIMESTAMP",!0),Kd="date",Ld=u("DATE",!0),Ye="leading",Ze=u("LEADING",!0),$e="trailing",af=u("TRAILING",!0),bf="both",cf=u("BOTH",!0),df="to",ef=u("TO",!0),Jf="interval",Kf=u("INTERVAL",!0),Lf="year",Mf=u("YEAR",!0),Nf="month",Of=u("MONTH",!0),Pf="day",Qf=u("DAY",!0),Rf="hour",Sf=u("HOUR",
!0),Tf="minute",Uf=u("MINUTE",!0),Vf="second",Wf=u("SECOND",!0),Xf="case",Yf=u("CASE",!0),Zf="end",$f=u("END",!0),ag="when",bg=u("WHEN",!0),cg="then",dg=u("THEN",!0),gf="else",hf=u("ELSE",!0),eg=",",fg=u(",",!1),gg="(",hg=u("(",!1),ig=")",jg=u(")",!1),kg=/^[ \t\n\r]/,lg=D([" ","\t","\n","\r"],!1,!1),gd="`",hd=u("`",!1),id=/^[^`]/,jd=D(["`"],!0,!1),c=0,Zb=[{line:1,column:1}],sb=0,oc=[],ra=0;if("startRule"in y){if(!(y.startRule in Va))throw Error("Can't start parsing from rule \""+y.startRule+'".');
Ua=Va[y.startRule]}var Qc=Ua();if(Qc!==a&&c===k.length)return Qc;Qc!==a&&c<k.length&&v({type:"end"});throw function(g,B,A){return new I(I.buildMessage(g,B),g,B,A)}(oc,sb<k.length?k.charAt(sb):null,sb<k.length?R(sb,sb+1):R(sb,sb));}}})});let O=function(){function p(){}p.parse=function(I){return da.parse(I)};return p}();n.WhereGrammar=O;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/graphics/data/utils":function(){define("require exports ../../../core/maybe ../../../core/jsonMap ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/extentUtils ../../../geometry/support/jsonUtils ../../../core/unitUtils ../../../geometry/support/normalizeUtils ../OptimizedGeometry ../featureConversionUtils ../centroid ./projectionSupport".split(" "),
function(n,m,da,O,p,I,k,y,u,D,fa,R,v){function r(Z,F,G,M=Z.hasZ,Q=Z.hasM){const S=Z.hasZ&&M,w=Z.hasM&&Q;return G?(Z=fa.quantizeOptimizedGeometry(T,F,Z.hasZ,Z.hasM,"esriGeometryPoint",G,M,Q),fa.convertToPoint(Z,S,w)):fa.convertToPoint(F,S,w)}async function t(Z,F,G){if(!Z)return null;var {where:M}=Z;Z.where=M=M&&M.trim();if(!M||/^1 *= *1$/.test(M)||F&&F===M)Z.where=null;if(!Z.geometry)return Z;F=await d(Z);Z.distance=0;Z.units=null;"esriSpatialRelEnvelopeIntersects"===Z.spatialRel&&({spatialReference:M}=
Z.geometry,F=I.getGeometryExtent(F),F.spatialReference=M);Z.geometry=F;await v.checkProjectionSupport(F.spatialReference,G);F=(await u.normalizeCentralMeridian(k.fromJSON(F)))[0];if(da.isNone(F))throw K;F=F.toJSON();F=await v.project(F,F.spatialReference,G);if(!F)throw K;F.spatialReference=G;Z.geometry=F;return Z}async function d(Z){const {geometry:F,distance:G,units:M}=Z;if(null==G||"vertexAttributes"in F)return F;var Q=F.spatialReference;Z=M?E.fromJSON(M):y.getUnitString(Q);Q=Q&&(p.isGeographic(Q)||
p.isWebMercator(Q))?F:await v.checkProjectionSupport(Q,p.WGS84).then(()=>v.project(F,p.WGS84));return(await l())(Q.spatialReference,Q,G,Z)}async function l(){return(await new Promise(function(Z,F){n(["../../../geometry/geometryEngineJSON"],Z,F)})).geodesicBuffer}const E=new O.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),K=Object.freeze({}),
C=new D,J=new D,T=new D,ea={esriGeometryPoint:fa.convertToPoint,esriGeometryPolyline:fa.convertToPolyline,esriGeometryPolygon:fa.convertToPolygon,esriGeometryMultipoint:fa.convertToMultipoint},ka=(Z,F)=>"_geVersion"!==Z?F:void 0;m.QUERY_ENGINE_EMPTY_RESULT=K;m.cleanFromGeometryEngine=function(Z){return Z&&"_geVersion"in Z?JSON.parse(JSON.stringify(Z,ka)):Z};m.getCentroid=function(Z,F,G){if("esriGeometryPolygon"!==Z.geometryType||!F||!F.centroid&&!F.geometry)return null;F.centroid||(F.centroid=R.getCentroidOptimizedGeometry(new D,
F.geometry,Z.hasZ,Z.hasM));return r(Z,F.centroid,G)};m.getGeometry=function(Z,F,G,M,Q,S,w=F,h=G){const q=F&&w,H=G&&h;M=M?"coords"in M?M:M.geometry:null;if(!M)return null;if(Q)return F=fa.generalizeOptimizedGeometry(J,M,F,G,Z,Q,w,h),S&&(F=fa.quantizeOptimizedGeometry(T,F,q,H,Z,S)),ea[Z](F,q,H);if(S)return S=fa.quantizeOptimizedGeometry(T,M,F,G,Z,S,w,h),ea[Z](S,q,H);fa.removeZMValues(C,M,F,G,w,h);return ea[Z](C,q,H)};m.normalizeFilter=async function(Z,F,G){return t(Z,F,G)};m.normalizeQuery=async function(Z,
F,G){const {outFields:M,orderByFields:Q,groupByFieldsForStatistics:S,outStatistics:w}=Z;if(M)for(var h=0;h<M.length;h++)M[h]=M[h].trim();if(Q)for(h=0;h<Q.length;h++)Q[h]=Q[h].trim();if(S)for(h=0;h<S.length;h++)S[h]=S[h].trim();if(w)for(h=0;h<w.length;h++)w[h].onStatisticField&&(w[h].onStatisticField=w[h].onStatisticField.trim());Z.geometry&&!Z.outSR&&(Z.outSR=Z.geometry.spatialReference);return t(Z,F,G)};m.normalizeQueryLike=t;m.transformCentroid=r;Object.defineProperty(m,"__esModule",{value:!0})})},
"esri/layers/graphics/data/spatialQuerySupport":function(){define("require exports ../../../core/Error ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/contains ../../../geometry/support/intersects ../../../geometry/support/jsonUtils ../OptimizedGeometry ../featureConversionUtils ../contains ./projectionSupport ./utils".split(" "),function(n,m,da,O,p,I,k,y,u,D,fa,R){function v(){return new Promise(function(E,K){n(["../../../geometry/geometryEngineJSON"],E,K)})}const r={esriSpatialRelIntersects:"intersects",
esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null};var t={esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,
esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},d={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},l={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1};m.canQueryWithRBush=function(E){if(k.isExtent(E))return!0;if(k.isPolygon(E)){for(const K of E.rings)if(5!==K.length||K[0][0]!==K[1][0]||K[0][0]!==K[4][0]||K[2][0]!==K[3][0]||K[0][1]!==K[3][1]||K[0][1]!==
K[4][1]||K[1][1]!==K[2][1])return!1;return!0}return!1};m.checkSpatialQuerySupport=async function(E,K,C){const {spatialRel:J,geometry:T}=E;if(T){if(!0!==t[J])throw new da("feature-store:unsupported-query","Unsupported query spatial relationship",{query:E});if(O.isValid(T.spatialReference)&&O.isValid(C)){if(!0!==d[k.getJsonType(T)])throw new da("feature-store:unsupported-query","Unsupported query geometry type",{query:E});if(!0!==l[K])throw new da("feature-store:unsupported-query","Unsupported layer geometry type",
{query:E});if(E.outSR)return fa.checkProjectionSupport(E.geometry&&E.geometry.spatialReference,E.outSR)}}};m.getSpatialQueryOperator=function(E,K,C,J,T){if(k.isPolygon(K)&&"esriGeometryPoint"===C&&("esriSpatialRelIntersects"===E||"esriSpatialRelContains"===E)){const ea=u.convertFromPolygon(new y,K,!1,!1);return Promise.resolve(ka=>D.polygonContainsPoint(ea,!1,!1,ka))}if(k.isPolygon(K)&&"esriGeometryMultipoint"===C){const ea=u.convertFromPolygon(new y,K,!1,!1);if("esriSpatialRelContains"===E)return Promise.resolve(ka=>
D.polygonContainsMultipoint(ea,!1,!1,ka,J,T))}if(k.isExtent(K)&&"esriGeometryPoint"===C&&("esriSpatialRelIntersects"===E||"esriSpatialRelContains"===E))return Promise.resolve(ea=>p.extentContainsPoint(K,R.getGeometry(C,J,T,ea)));if(k.isExtent(K)&&"esriGeometryMultipoint"===C&&"esriSpatialRelContains"===E)return Promise.resolve(ea=>p.extentContainsMultipoint(K,R.getGeometry(C,J,T,ea)));if(k.isExtent(K)&&"esriSpatialRelIntersects"===E){const ea=I.getExtentIntersector(C);return Promise.resolve(ka=>ea(K,
R.getGeometry(C,J,T,ka)))}return v().then(ea=>{const ka=ea[r[E]].bind(null,K.spatialReference,K);return Z=>ka(R.getGeometry(C,J,T,Z))})};Object.defineProperty(m,"__esModule",{value:!0})})},"esri/layers/graphics/contains":function(){define(["exports"],function(n){function m(da,O,p,I,k){if(!da)return!1;O=O?p?4:3:p?3:2;const {coords:y,lengths:u}=da;p=!1;da=0;for(const fa of u){var D=da;for(let R=da,v=da+fa*O;R<v;R+=O){D=R+O;D===v&&(D=da);const r=y[R],t=y[R+1],d=y[D];D=y[D+1];(t<k&&D>=k||D<k&&t>=k)&&
r+(k-t)/(D-t)*(d-r)<I&&(p=!p)}da+=fa*O}return p}n.polygonContainsCoords=m;n.polygonContainsMultipoint=function(da,O,p,I,k,y){k=k?y?4:3:y?3:2;const {coords:u,lengths:D}=I;if(!D)return!1;for(let fa=0,R=0;fa<D.length;fa++,R+=k)if(!m(da,O,p,u[R],u[R+1]))return!1;return!0};n.polygonContainsPoint=function(da,O,p,I){return m(da,O,p,I.coords[0],I.coords[1])};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/graphics/data/timeSupport":function(){define(["exports"],function(n){function m(p,I,
k,y,u){if(null!=y&&null!=u)return D=>{const fa=p.getAttribute(D,I);D=p.getAttribute(D,k);return(null==fa||fa<=u)&&(null==D||D>=y)};if(null!=y)return D=>{D=p.getAttribute(D,k);return null==D||D>=y};if(null!=u)return D=>{D=p.getAttribute(D,I);return null==D||D<=u}}function da(p,I,k,y){if(null!=k&&null!=y&&k===y)return u=>p.getAttribute(u,I)===k;if(null!=k&&null!=y)return u=>{u=p.getAttribute(u,I);return u>=k&&u<=y};if(null!=k)return u=>p.getAttribute(u,I)>=k;if(null!=y)return u=>p.getAttribute(u,I)<=
y}function O(){return()=>!1}n.getTimeExtent=function(p,I){if(!p)return null;const k=I.featureAdapter,{startTimeField:y,endTimeField:u}=p;let D=Number.POSITIVE_INFINITY,fa=Number.NEGATIVE_INFINITY;if(y&&u)I.forEach(R=>{const v=k.getAttribute(R,y);R=k.getAttribute(R,u);null==v||isNaN(v)||(D=Math.min(D,v));null==R||isNaN(R)||(fa=Math.max(fa,R))});else{const R=y||u;I.forEach(v=>{v=k.getAttribute(v,R);null==v||isNaN(v)||(D=Math.min(D,v),fa=Math.max(fa,v))})}return{start:D,end:fa}};n.getTimeOperator=function(p,
I,k){if(!I||!p)return null;const {startTimeField:y,endTimeField:u}=p;if(!y&&!u)return null;const {start:D,end:fa}=I;return null===D&&null===fa?null:void 0===D&&void 0===fa?O():y&&u?m(k,y,u,D,fa):da(k,y||u,D,fa)};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/graphics/data/QueryEngineResult":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ../../../geometry/support/quantizationUtils ./projectionSupport ./attributeSupport ./AttributesBuilder ./utils ./timeSupport".split(" "),
function(n,m,da,O,p,I,k,y,u,D){function fa(t){return t.substr(24,12)+t.substr(19,4)+t.substr(16,2)+t.substr(14,2)+t.substr(11,2)+t.substr(9,2)+t.substr(6,2)+t.substr(4,2)+t.substr(2,2)+t.substr(0,2)}function R(t,d,l,E){if(l&&"esriFieldTypeDate"===l.type){const K=(new Date(t)).getTime(),C=(new Date(d)).getTime();if(!isNaN(K)&&!isNaN(C))return E?C-K:K-C}return"number"===typeof t&&"number"===typeof d?E?d-t:t-d:"string"===typeof t&&"string"===typeof d?(t=t.toUpperCase(),d=d.toUpperCase(),!l||"esriFieldTypeGUID"!==
l.type&&"esriFieldTypeGlobalID"!==l.type?E=(E?t>d:t<d)?-1:(E?t<d:t>d)?1:0:(l=fa(t),d=fa(d),E=(E?l>d:l<d)?-1:(E?l<d:l>d)?1:0),E):E?1:-1}function v(t,d,l,E,K,C){K-=l;C-=E;t=Math.min(1,Math.max(0,((t-l)*K+(d-E)*C)/(K*K+C*C)));return{x:l+K*t,y:E+C*t}}function r(t,d){return t?d?4:3:d?3:2}return function(){function t(l,E,K){this.items=l;this.queryGeometry=E;this.definitionExpression=K.definitionExpression;this.geometryType=K.geometryType;this.hasM=K.hasM;this.hasZ=K.hasZ;this.objectIdField=K.objectIdField;
this.spatialReference=K.spatialReference;this.fieldsIndex=K.fieldsIndex;this.timeInfo=K.timeInfo;this.featureAdapter=K.featureAdapter;this.aggregateAdapter=K.aggregateAdapter}var d=t.prototype;d.createQueryResponseForCount=function(l){const E=new y(l,this.featureAdapter,this.fieldsIndex);if(!l.outStatistics)return E.countDistinctValues(this.items);const {groupByFieldsForStatistics:K,having:C}=l;if(null==K||!K.length)return 1;const J=new Map,T=new Map,ea=new Set;l=l.outStatistics;for(const Z of l){({statisticType:l}=
Z);l="exceedslimit"!==l?Z.onStatisticField:void 0;if(!T.has(l)){var ka=[];for(const F of K){const G=this._getAttributeValues(E,F,J);ka.push(G)}T.set(l,this._calculateUniqueValues(ka))}l=T.get(l);for(const F in l){const {data:G,items:M}=l[F];ka=G.join(",");C&&!E.validateItems(M,C)||ea.add(ka)}}return ea.size};d.createQueryResponse=function(l){let E;E=l.outStatistics?l.outStatistics.some(K=>"exceedslimit"===K.statisticType)?this._createExceedsLimitQueryResponse(l):this._createStatisticsQueryResponse(l):
this._createFeatureQueryResponse(l);l.returnQueryGeometry&&(da.isValid(l.outSR)&&!da.equals(this.queryGeometry.spatialReference,l.outSR)?E.queryGeometry=u.cleanFromGeometryEngine({spatialReference:l.outSR,...I.project(this.queryGeometry,this.queryGeometry.spatialReference,l.outSR)}):E.queryGeometry=u.cleanFromGeometryEngine({spatialReference:l.outSR,...this.queryGeometry}));return E};d.createSnappingResponse=function(l,E){const K=this.featureAdapter,C=r(this.hasZ,this.hasM),{x:J,y:T}=l.point,ea="number"===
typeof l.distance?l.distance:l.distance.x,ka="number"===typeof l.distance?l.distance:l.distance.y,Z={candidates:[]},F="esriGeometryPolygon"===this.geometryType;E=this.getPointCreator(l.point,this.spatialReference,E);for(const H of this.items){var G=K.getGeometry(H);if(!G)continue;const {coords:z,lengths:V}=G;if(l.types&1){G=0;for(var M=0;M<V.length;M++){var Q=V[M];for(var S=0;S<Q;S++,G+=C){var w=z[G],h=z[G+1];if(S!==Q-1){const oa=z[G+C],ma=z[G+C+1],{x:va,y:za}=v(J,T,w,h,oa,ma);var q=(J-va)/ea;const Da=
(T-za)/ka;q=q*q+Da*Da;1>=q&&Z.candidates.push({type:"edge",objectId:K.getObjectId(H),distance:Math.sqrt(q),target:E(va,za),start:E(w,h),end:E(oa,ma)})}}}}if(l.types&2)for(G=F?z.length-C:z.length,M=0;M<G;M+=C)Q=z[M],S=z[M+1],w=(J-Q)/ea,h=(T-S)/ka,w=w*w+h*h,1>=w&&Z.candidates.push({type:"vertex",objectId:K.getObjectId(H),distance:Math.sqrt(w),target:E(Q,S)})}Z.candidates.sort((H,z)=>H.distance-z.distance);return Z};d.getPointCreator=function(l,E,K){const C=m.isSome(K)&&!da.equals(E,K)?J=>I.project(J,
E,K):J=>J;return null!=l.z&&null!=l.m?(J,T)=>C({x:J,y:T,z:l.z,m:l.m}):null!=l.z?(J,T)=>C({x:J,y:T,z:l.z}):null!=l.m?(J,T)=>C({x:J,y:T,m:l.m}):(J,T)=>C({x:J,y:T})};d.executeAttributesQuery=function(l){var E=k.getWhereClause(l.where,this.fieldsIndex);if(!E)return Promise.resolve(this);if(E.isStandardized){let K=0;const C=[];for(const J of this.items)E.testFeature(J,this.featureAdapter)&&(C[K++]=J);E=new t(C,this.queryGeometry,this);E.definitionExpression=l.where;return Promise.resolve(E)}return Promise.reject(new TypeError("Where clause is not standardized"))};
d.executeAggregateIdsQuery=function(l){if(!l.aggregateIds||!l.aggregateIds.length||m.isNone(this.aggregateAdapter))return Promise.resolve(this);const E=new Set;for(const C of l.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(C).forEach(J=>E.add(J));const K=this.featureAdapter.getObjectId;return Promise.resolve(new t(this.items.filter(C=>E.has(K(C))),this.queryGeometry,this))};d.executeObjectIdsQuery=function(l){if(!l.objectIds||!l.objectIds.length)return Promise.resolve(this);const E=new Set(l.objectIds),
K=this.featureAdapter.getObjectId;return Promise.resolve(new t(this.items.filter(C=>E.has(K(C))),this.queryGeometry,this))};d.executeTimeQuery=function(l){l=D.getTimeOperator(this.timeInfo,l.timeExtent,this.featureAdapter);if(!m.isSome(l))return Promise.resolve(this);l=this.items.filter(l);return Promise.resolve(new t(l,this.queryGeometry,this))};d.filterLatest=function(){const {trackIdField:l,startTimeField:E,endTimeField:K}=this.timeInfo;var C=K||E;const J=new Map,T=this.featureAdapter.getAttribute;
for(const ea of this.items){const ka=T(ea,l),Z=T(ea,C),F=J.get(ka);(!F||Z>T(F,C))&&J.set(ka,ea)}C=Array.from(J.values());return Promise.resolve(new t(C,this.queryGeometry,this))};d.project=async function(l){if(!l||da.equals(this.spatialReference,l))return this;const E=this.featureAdapter,K=(await I.projectMany(this.items.map(C=>u.getGeometry(this.geometryType,this.hasZ,this.hasM,E.getGeometry(C))),this.spatialReference,l)).map((C,J)=>E.cloneWithGeometry(this.items[J],O.convertFromGeometry(C,this.hasZ,
this.hasM)));return new t(K,this.queryGeometry,{definitionExpression:this.definitionExpression,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,objectIdField:this.objectIdField,spatialReference:l,fieldsIndex:this.fieldsIndex,timeInfo:this.timeInfo,featureAdapter:this.featureAdapter})};d._sortFeatures=function(l,E,K){if(1<l.length&&E&&E.length)for(const C of E.reverse()){E=C.split(" ");const J=E[0],T=this.fieldsIndex.get(J),ea=E[1]&&"desc"===E[1].toLowerCase();l.sort((ka,Z)=>{ka=K(ka,J,
T);Z=K(Z,J,T);return R(ka,Z,T,ea)})}};d._createFeatureQueryResponse=function(l){const E=this.items,{geometryType:K,hasM:C,hasZ:J,objectIdField:T,spatialReference:ea}=this,{outFields:ka,outSR:Z,quantizationParameters:F,resultRecordCount:G,resultOffset:M,returnZ:Q,returnM:S}=l,w=null!=G?E.length>(M||0)+G:!1,h=ka&&(-1<ka.indexOf("*")?[...this.fieldsIndex.fields]:ka.map(q=>this.fieldsIndex.get(q)));return{exceededTransferLimit:w,features:this._createFeatures(l,E),fields:h,geometryType:K,hasM:C&&S,hasZ:J&&
Q,objectIdFieldName:T,spatialReference:u.cleanFromGeometryEngine(Z?Z:ea),transform:F&&p.toQuantizationTransform(F)||null}};d._createFeatures=function(l,E){const K=new y(l,this.featureAdapter,this.fieldsIndex),{hasM:C,hasZ:J}=this,{orderByFields:T,quantizationParameters:ea,returnGeometry:ka,returnCentroid:Z,maxAllowableOffset:F,resultOffset:G,resultRecordCount:M,returnZ:Q=!1,returnM:S=!1}=l,w=J&&Q,h=C&&S;l=[];var q=0;E=[...E];this._sortFeatures(E,T,(V,oa,ma)=>K.getFieldValue(V,oa,ma));if(ka||Z){var H=
p.toQuantizationTransform(ea);if(ka&&!Z)for(var z of E)l[q++]={attributes:K.getAttributes(z),geometry:u.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(z),F,H,w,h)};else if(!ka&&Z)for(const V of E)l[q++]={attributes:K.getAttributes(V),centroid:u.transformCentroid(this,this.featureAdapter.getCentroid(V,this),H)};else for(const V of E)l[q++]={attributes:K.getAttributes(V),centroid:u.transformCentroid(this,this.featureAdapter.getCentroid(V,this),H),geometry:u.getGeometry(this.geometryType,
this.hasZ,this.hasM,this.featureAdapter.getGeometry(V),F,H,w,h)}}else for(H of E)(z=K.getAttributes(H))&&(l[q++]={attributes:z});q=G||0;null!=M&&(l=l.slice(q,Math.min(l.length,q+M)));return l};d._createExceedsLimitQueryResponse=function(l){var E=!1;let K=Number.POSITIVE_INFINITY,C=Number.POSITIVE_INFINITY;E=Number.POSITIVE_INFINITY;for(const J of l.outStatistics)if("exceedslimit"===J.statisticType){K=null!=J.maxPointCount?J.maxPointCount:Number.POSITIVE_INFINITY;C=null!=J.maxRecordCount?J.maxRecordCount:
Number.POSITIVE_INFINITY;E=null!=J.maxVertexCount?J.maxVertexCount:Number.POSITIVE_INFINITY;break}if("esriGeometryPoint"===this.geometryType)E=this.items.length>K;else if(this.items.length>C)E=!0;else{l=this.hasZ?this.hasM?4:3:this.hasM?3:2;const J=this.featureAdapter;E=this.items.reduce((T,ea)=>{ea=J.getGeometry(ea);return T+(ea&&ea.coords.length||0)},0)/l>E}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],
features:[{attributes:{exceedslimit:Number(E)}}]}};d._createStatisticsQueryResponse=function(l){var E={attributes:{}};const K=[],C=new Map,J=new Map,T=new Map,ea=new Map,ka=new y(l,this.featureAdapter,this.fieldsIndex);var Z=l.outStatistics;const {groupByFieldsForStatistics:F,having:G,orderByFields:M}=l;l=F&&F.length;const Q=!!l,S=Q&&F[0],w=Q&&!this.fieldsIndex.get(S);for(const V of Z){const {outStatisticFieldName:oa,statisticType:ma}=V;Z=V;var h="exceedslimit"!==ma?V.onStatisticField:void 0;const va=
"percentile_disc"===ma||"percentile_cont"===ma,za=Q&&1===l&&(h===S||w)&&"count"===ma;if(Q){if(!T.has(h)){var q=[];for(const Da of F){var H=this._getAttributeValues(ka,Da,C);q.push(H)}T.set(h,this._calculateUniqueValues(q,ka.returnDistinctValues))}q=T.get(h);for(const Da in q){const {count:Y,data:ia,items:pa,itemPositions:Aa}=q[Da];H=ia.join(",");if(!G||ka.validateItems(pa,G)){const wa=ea.get(H)||{attributes:{}};var z=null;if(za)z=Y;else{const b=this._getAttributeValues(ka,h,C);z=Aa.map(e=>b[e]);z=
va&&"statisticParameters"in Z?this._getPercentileValue(Z,z):this._getStatisticValue(Z,z)}wa.attributes[oa]=z;F.forEach((b,e)=>wa.attributes[this.fieldsIndex.get(b)?b:`EXPR_${e+1}`]=ia[e]);ea.set(H,wa)}}}else h=this._getAttributeValues(ka,h,C),E.attributes[oa]=va&&"statisticParameters"in Z?this._getPercentileValue(Z,h):this._getStatisticValue(Z,h,J);K.push({name:oa,alias:oa,type:"esriFieldTypeDouble"})}E=Q?Array.from(ea.values()):[E];this._sortFeatures(E,M,(V,oa)=>V.attributes[oa]);return{fields:K,
features:E}};d._getStatisticValue=function(l,E,K){const {onStatisticField:C,statisticType:J}=l;l=K&&K.has(C)?K.get(C):this._calculateStatistics(E);K&&K.set(C,l);return l["var"===J?"variance":J]};d._getPercentileValue=function(l,E){const {onStatisticField:K,statisticParameters:C,statisticType:J}=l,{value:T,orderBy:ea}=C,ka="desc"===ea,Z=this.fieldsIndex.get(K);l=[...E].filter(F=>null!=F).sort((F,G)=>R(F,G,Z,ka));return this._calculatePercentile(l,T,"percentile_disc"===J)};d._getAttributeValues=function(l,
E,K){if(K.has(E))return K.get(E);const C=this.fieldsIndex.get(E),J=this.items.map(T=>l.getFieldValue(T,E,C));K.set(E,J);return J};d._calculateStatistics=function(l){let E=Number.POSITIVE_INFINITY,K=Number.NEGATIVE_INFINITY,C=null,J=null,T=null,ea=null;const ka=[];let Z=0;for(const F of l)"string"===typeof F?Z++:null==F||isNaN(F)||(C+=F,E=Math.min(E,F),K=Math.max(K,F),ka.push(F),Z++);if(Z){J=C/Z;l=0;for(const F of ka)l+=(F-J)**2;ea=1<Z?l/(Z-1):0;T=Math.sqrt(ea)}else K=E=null;return{avg:J,count:Z,max:K,
min:E,stddev:T,sum:C,variance:ea}};d._calculateUniqueValues=function(l,E){const K={},C=this.items,J=C.length;for(let T=0;T<J;T++){const ea=C[T],ka=[];for(const F of l)ka.push(F[T]);const Z=ka.join(",");E?null==K[Z]&&(K[Z]={count:1,data:ka,items:[ea],itemPositions:[T]}):null==K[Z]?K[Z]={count:1,data:ka,items:[ea],itemPositions:[T]}:(K[Z].count++,K[Z].items.push(ea),K[Z].itemPositions.push(T))}return K};d._calculatePercentile=function(l,E,K){if(0===l.length)return null;if(0>=E)return l[0];if(1<=E)return l[l.length-
1];var C=(l.length-1)*E,J=Math.floor(C);E=J+1;C%=1;J=l[J];const T=l[E];return E>=l.length||K||"string"===typeof J||"string"===typeof T?J:J*(1-C)+T*C};n._createClass(t,[{key:"size",get:function(){return this.items.length}}]);return t}()})},"esri/geometry/support/quantizationUtils":function(){define(["exports","./jsonUtils"],function(n,m){function da({scale:F,translate:G},M){return Math.round((M-G[0])/F[0])}function O({scale:F,translate:G},M){return Math.round((G[1]-M)/F[1])}function p(F,G,M){const Q=
[];let S,w,h,q;for(let H=0;H<M.length;H++){const z=M[H];if(0<H){if(h=da(F,z[0]),q=O(F,z[1]),h!==S||q!==w)Q.push(G(z,h-S,q-w)),S=h,w=q}else S=da(F,z[0]),w=O(F,z[1]),Q.push(G(z,S,w))}return 0<Q.length?Q:null}function I(F,G,M,Q){return p(F,M?Q?Z:ka:Q?ka:ea,G)}function k(F,G,M,Q){const S=[];M=M?Q?Z:ka:Q?ka:ea;for(Q=0;Q<G.length;Q++){const w=p(F,M,G[Q]);w&&3<=w.length&&S.push(w)}return S.length?S:null}function y(F,G,M,Q){const S=[];M=M?Q?Z:ka:Q?ka:ea;for(Q=0;Q<G.length;Q++){const w=p(F,M,G[Q]);w&&2<=w.length&&
S.push(w)}return S.length?S:null}function u({scale:F,translate:G},M){return M*F[0]+G[0]}function D({scale:F,translate:G},M){return G[1]-M*F[1]}function fa(F,G,M){const Q=Array(M.length);if(!M.length)return Q;const [S,w]=F.scale;let h=u(F,M[0][0]);F=D(F,M[0][1]);Q[0]=G(M[0],h,F);for(let q=1;q<M.length;q++){const H=M[q];h+=H[0]*S;F-=H[1]*w;Q[q]=G(H,h,F)}return Q}function R(F,G,M){const Q=Array(M.length);for(let S=0;S<M.length;S++)Q[S]=fa(F,G,M[S]);return Q}function v(F,G,M,Q){return fa(F,M?Q?Z:ka:Q?
ka:ea,G)}function r(F,G,M,Q){return R(F,M?Q?Z:ka:Q?ka:ea,G)}function t(F,G,M,Q){return R(F,M?Q?Z:ka:Q?ka:ea,G)}function d(F,G,M){let [Q,S]=M[0],w=Math.min(Q,G[0]),h=Math.min(S,G[1]),q=Math.max(Q,G[2]);G=Math.max(S,G[3]);for(let H=1;H<M.length;H++){const [z,V]=M[H];Q+=z;S+=V;0>z&&(w=Math.min(w,Q));0<z&&(q=Math.max(q,Q));0>V?h=Math.min(h,S):0<V&&(G=Math.max(G,S))}F[0]=w;F[1]=h;F[2]=q;F[3]=G;return F}function l(F,G){if(!G.length)return null;F[0]=F[1]=Number.POSITIVE_INFINITY;F[2]=F[3]=Number.NEGATIVE_INFINITY;
for(let M=0;M<G.length;M++)d(F,F,G[M]);return F}function E(F,G,M,Q,S){G.xmin=da(F,M.xmin);G.ymin=O(F,M.ymin);G.xmax=da(F,M.xmax);G.ymax=O(F,M.ymax);G!==M&&(Q&&(G.zmin=M.zmin,G.zmax=M.zmax),S&&(G.mmin=M.mmin,G.mmax=M.mmax));return G}function K(F,G,M,Q,S){G.points=I(F,M.points,Q,S);return G}function C(F,G,M,Q,S){G.x=da(F,M.x);G.y=O(F,M.y);G!==M&&(Q&&(G.z=M.z),S&&(G.m=M.m));return G}function J(F,G,M,Q,S){F=k(F,M.rings,Q,S);if(!F)return null;G.rings=F;return G}function T(F,G,M,Q,S){F=y(F,M.paths,Q,S);
if(!F)return null;G.paths=F;return G}const ea=(F,G,M)=>[G,M],ka=(F,G,M)=>[G,M,F[2]],Z=(F,G,M)=>[G,M,F[2],F[3]];n.equals=function(F,G){if(F===G||null==F&&null==G)return!0;if(null==F||null==G)return!1;let M,Q,S,w;F&&"upperLeft"===F.originPosition?(M=F.translate[0],Q=F.translate[1],F=F.scale[0]):(M=F.extent.xmin,Q=F.extent.ymax,F=F.tolerance);G&&"upperLeft"===G.originPosition?(S=G.translate[0],w=G.translate[1],G=G.scale[0]):(S=G.extent.xmin,w=G.extent.ymax,G=G.tolerance);return M===S&&Q===w&&F===G};
n.getQuantizedBoundsCoordsArray=d;n.getQuantizedBoundsCoordsArrayArray=l;n.getQuantizedBoundsPaths=function(F){return l([0,0,0,0],F)};n.getQuantizedBoundsPoints=function(F){const G=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return d(G,G,F)};n.getQuantizedBoundsRings=function(F){return l([0,0,0,0],F)};n.quantizeBounds=function(F,G,M){G[0]=da(F,M[0]);G[3]=O(F,M[1]);G[2]=da(F,M[2]);G[1]=O(F,M[3]);return G};n.quantizeExtent=E;n.quantizeGeometry=
function(F,G){return F&&G?m.isPoint(G)?C(F,{},G,!1,!1):m.isPolyline(G)?T(F,{},G,!1,!1):m.isPolygon(G)?J(F,{},G,!1,!1):m.isMultipoint(G)?K(F,{},G,!1,!1):m.isExtent(G)?E(F,{},G,!1,!1):null:null};n.quantizeMultipoint=K;n.quantizePaths=y;n.quantizePoint=C;n.quantizePoints=I;n.quantizePolygon=J;n.quantizePolyline=T;n.quantizeRings=k;n.quantizeX=da;n.quantizeY=O;n.toQuantizationTransform=function(F){return F?{originPosition:"upper-left"===F.originPosition?"upperLeft":"lower-left"===F.originPosition?"lowerLeft":
F.originPosition,scale:F.tolerance?[F.tolerance,F.tolerance]:[1,1],translate:F.extent?[F.extent.xmin,F.extent.ymax]:[0,0]}:null};n.unquantizeBounds=function(F,G,M){return M?(G[0]=u(F,M[0]),G[1]=D(F,M[3]),G[2]=u(F,M[2]),G[3]=D(F,M[1]),G):[u(F,G[0]),D(F,G[3]),u(F,G[2]),D(F,G[1])]};n.unquantizeCoordsArray=fa;n.unquantizeCoordsArrayArray=R;n.unquantizeExtent=function(F,G,M,Q,S){G.xmin=u(F,M.xmin);G.ymin=D(F,M.ymin);G.xmax=u(F,M.xmax);G.ymax=D(F,M.ymax);G!==M&&(Q&&(G.zmin=M.zmin,G.zmax=M.zmax),S&&(G.mmin=
M.mmin,G.mmax=M.mmax));return G};n.unquantizeMultipoint=function(F,G,M,Q,S){G.points=v(F,M.points,Q,S);return G};n.unquantizePaths=r;n.unquantizePoint=function(F,G,M,Q,S){G.x=u(F,M.x);G.y=D(F,M.y);G!==M&&(Q&&(G.z=M.z),S&&(G.m=M.m));return G};n.unquantizePoints=v;n.unquantizePolygon=function(F,G,M,Q,S){G.rings=t(F,M.rings,Q,S);return G};n.unquantizePolyline=function(F,G,M,Q,S){G.paths=r(F,M.paths,Q,S);return G};n.unquantizeRings=t;n.unquantizeX=u;n.unquantizeY=D;Object.defineProperty(n,"__esModule",
{value:!0})})},"esri/layers/graphics/data/AttributesBuilder":function(){define(["../../../core/maybe","./attributeSupport"],function(n,m){return function(){function da(p,I,k){this._fieldDataCache=new Map;this._returnDistinctMap=new Map;this.returnDistinctValues=p.returnDistinctValues;this.fieldsIndex=k;this.featureAdapter=I;if((I=p.outFields)&&-1===I.indexOf("*")){this.outFields=I;p=0;for(const u of I){var y=m.getExpressionFromFieldName(u);y=(I=this.fieldsIndex.get(y))?null:m.getWhereClause(y,k);
I=I?I.name:m.getAliasFromFieldName(u)||`FIELD_EXP_${p++}`;this._fieldDataCache.set(u,{alias:I,clause:y})}}}var O=da.prototype;O.countDistinctValues=function(p){if(!this.returnDistinctValues)return p.length;p.forEach(I=>this.getAttributes(I));return this._returnDistinctMap.size};O.getAttributes=function(p){p=this._processAttributesForOutFields(p);return this._processAttributesForDistinctValues(p)};O.getFieldValue=function(p,I,k){const y=k?k.name:I;let u=null;this._fieldDataCache.has(y)?u=this._fieldDataCache.get(y).clause:
k||(u=m.getWhereClause(I,this.fieldsIndex),this._fieldDataCache.set(y,{alias:y,clause:u}));return k?this.featureAdapter.getAttribute(p,y):u.calculateValue(p,this.featureAdapter)};O.validateItem=function(p,I){this._fieldDataCache.has(I)||this._fieldDataCache.set(I,{alias:I,clause:m.getWhereClause(I,this.fieldsIndex)});return this._fieldDataCache.get(I).clause.testFeature(p,this.featureAdapter)};O.validateItems=function(p,I){this._fieldDataCache.has(I)||this._fieldDataCache.set(I,{alias:I,clause:m.getWhereClause(I,
this.fieldsIndex)});return this._fieldDataCache.get(I).clause.testSet(p,this.featureAdapter)};O._processAttributesForOutFields=function(p){const I=this.outFields;if(!I||!I.length)return this.featureAdapter.getAttributes(p);const k={};for(const y of I){const {alias:u,clause:D}=this._fieldDataCache.get(y);k[u]=D?D.calculateValue(p,this.featureAdapter):this.featureAdapter.getAttribute(p,u)}return k};O._processAttributesForDistinctValues=function(p){if(n.isNone(p)||!this.returnDistinctValues)return p;
var I=this.outFields,k=[];if(I)for(const u of I){var {alias:y}=this._fieldDataCache.get(u);k.push(p[y])}else for(y in p)k.push(p[y]);I=`${(I||["*"]).join(",")}=${k.join(",")}`;k=this._returnDistinctMap.get(I)||0;this._returnDistinctMap.set(I,++k);return 1<k?null:p};return da}()})},"esri/layers/graphics/sources/csv/csv":function(){define(["exports"],function(n){function*m(k,y,u){let D=0;for(;D<=k.length;){var fa=k.indexOf(y,D);fa=k.substring(D,-1<fa?fa:void 0);D+=fa.length+1;if(!u||fa.trim())yield fa}}
function da(k,y){return m(k,y,!1)}const O=/^\s*"([\S\s]*)"\s*$/,p=/""/g,I=[","," ",";","|","\t"];n.inferDelimiter=function(k){k=k.trim();let y=0,u="";for(const D of I){const fa=k.split(D).length;fa>y&&(y=fa,u=D)}return""===u?null:u};n.parseRows=function*(k,y,u){var D="";let fa="";var R=0,v=[];a:for(;;){const {value:E,done:K}=k.next();if(K)break;var r=da(E,u);b:for(;;){const {value:C,done:J}=r.next();if(J)break b;D+=fa+C;fa="";var t=void 0;var d=C;var l=0;for(t=d.indexOf('"',0);0<=t;)l++,t=d.indexOf('"',
t+1);d=l;R+=d;if(0===R%2){if(0<R)if(D=O.exec(D))v.push(D[1].replace(p,'"'));else{v=[];D="";R=0;continue a}else v.push(D);D="";R=0}else fa=u}if(0===R){r=y;d={};t=r.length;for(l=0;l<t;l++)d[r[l]]=v[l];v=d;yield v;v=[]}else fa="\n"}};n.readRowParts=da;n.readRows=function(k){const y=k.includes("\r\n")?"\r\n":"\n";return m(k,y,!0)};Object.defineProperty(n,"__esModule",{value:!0})})},"*noref":1}});
define("exports ../../../../core/has ../../../../core/Error ../../../../core/urlUtils ../../../../geometry/support/spatialReferenceUtils ../../../../geometry/SpatialReference ../../../../geometry/support/webMercatorUtils ../../../../geometry ../../../../request ../../../../geometry/projection ../../../../core/number ../../OptimizedFeature ../../OptimizedGeometry ../../../support/FieldsIndex ../../../../geometry/geometryAdapters/json ./clientSideDefaults ../../data/projectionSupport ../../data/FeatureStore ../../data/QueryEngine ../csv/csv".split(" "),function(n,
m,da,O,p,I,k,y,u,D,fa,R,v,r,t,d,l,E,K,C){const J=d.createDrawingInfo("esriGeometryPoint"),T=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeLong"],ea="lat latitude latitude83 latdecdeg lat_dd y ycenter point-y".split(" "),ka="lon lng long longitude longitude83 longdecdeg long_dd x xcenter point-x".split(" "),Z=/^((jan(uary)?)|(feb(ruary)?)|(mar(ch)?)|(apr(il)?)|(may)|(jun(e)?)|(jul(y)?)|(aug(ust)?)|(sep(tember)?)|(oct(ober)?)|(nov(ember)?)|(dec(ember)?)|(am)|(pm)|(gmt)|(utc))$/i,
F=["csv"],G=[0,0];let M=function(w,h){this.x=w;this.y=h};const Q=function(){const w=fa._parseInfo(),h=new RegExp("^"+w.regexp+"$"),q=new RegExp("["+w.group+"\\s\\xa0]","g"),H=w.factor;return function(z){z=h.exec(z);w.factor=H;if(!z)return NaN;let V=z[1];if(!z[1]){if(!z[2])return NaN;V=z[2];w.factor*=-1}V=V.replace(q,"").replace(w.decimal,".");return+V*w.factor}}(),S=(()=>"isInteger"in Number?Number.isInteger:w=>"number"===typeof w&&isFinite(w)&&Math.floor(w)===w)();y=function(){function w(){this._queryEngine=
this._fieldsIndex=null}var h=w.prototype;h.destroy=function(){this._queryEngine&&this._queryEngine&&this._queryEngine.destroy();this._fieldsIndex=this._queryEngine=null};h.load=async function(q,H={}){[H]=await Promise.all([this._fetch(q.url,H),this._checkProjection(H&&q.parsing&&q.parsing.spatialReference)]);q=this._parse(H,q);this._queryEngine=this._createQueryEngine(H,q);q.layerDefinition.extent=this._queryEngine.fullExtent;if(q.layerDefinition.timeInfo){const {start:z,end:V}=this._queryEngine.timeExtent;
q.layerDefinition.timeInfo.timeExtent=[z,V]}return q};h.applyEdits=async function(){throw new da("csv-source:editing-not-supported","applyEdits() is not supported on CSVLayer");};h.queryFeatures=function(q={},H={}){return this._queryEngine.executeQuery(q,H.signal)};h.queryFeatureCount=function(q={},H={}){return this._queryEngine.executeQueryForCount(q,H.signal)};h.queryObjectIds=function(q={},H={}){return this._queryEngine.executeQueryForIds(q,H.signal)};h.queryExtent=function(q={},H={}){return this._queryEngine.executeQueryForExtent(q,
H.signal)};h.querySnapping=function(q,H={}){return this._queryEngine.executeQueryForSnapping(q,H.signal)};h._fetch=async function(q,H){if(!q)throw new da("csv-source:invalid-source","url not defined");q=O.urlToObject(q);return(await u(q.path,{query:q.query,responseType:"text",signal:H.signal})).data};h._parse=function(q,H){var z=H.parsing||{};const V={columnDelimiter:z.columnDelimiter,layerDefinition:null,locationInfo:{latitudeFieldName:z.latitudeField,longitudeFieldName:z.longitudeField}};var oa=
C.readRows(q),{value:ma}=oa.next();if(!ma)throw new da("csv","CSV is empty",{csv:q});ma=ma.trim();if(!z.columnDelimiter){q=C.inferDelimiter(ma);if(!q)throw new da("csv-source:invalid-delimiter","Unable to detect the delimiter from CSV");V.columnDelimiter=q}ma=ma.split(V.columnDelimiter);const va=V.layerDefinition={name:O.getFilename(H.url,F)||"csv",drawingInfo:J,geometryType:"esriGeometryPoint",objectIdField:null,fields:[],timeInfo:z.timeInfo,extent:{xmin:Number.POSITIVE_INFINITY,ymin:Number.POSITIVE_INFINITY,
xmax:Number.NEGATIVE_INFINITY,ymax:Number.NEGATIVE_INFINITY,spatialReference:z.spatialReference||{wkid:102100}}};if(!z.latitudeField||!z.longitudeField){H=this._inferLocationInfo(ma);if(!z.longitudeField&&!H.longitudeFieldName||!z.latitudeField&&!H.latitudeFieldName)throw new da("csv","Unable to identify latitudeField and/or longitudeField from CSV");V.locationInfo={longitudeFieldName:z.longitudeField||H.longitudeFieldName,latitudeFieldName:z.latitudeField||H.latitudeFieldName}}oa=this._inferFields(oa,
V.columnDelimiter,ma,V.locationInfo);if(z.fields&&z.fields.length){H=new Map;for(var za of z.fields)H.set(za.name.toLowerCase(),za);for(var Da of oa)if(z=H.get(Da.name.toLowerCase()))za=Da.name,Object.assign(Da,z),Da.name=za}va.fields=oa;va.fields.some(Y=>"esriFieldTypeOID"===Y.type?(va.objectIdField=Y.name,!0):!1)||(Da={name:"__OBJECTID",alias:"__OBJECTID",type:"esriFieldTypeOID",editable:!1,nullable:!1},va.objectIdField=Da.name,va.fields.unshift(Da));this._fieldsIndex=new r(va.fields);va.timeInfo&&
(Da=va.timeInfo,Da.startTimeField&&((z=this._fieldsIndex.get(Da.startTimeField))?(Da.startTimeField=z.name,z.type="esriFieldTypeDate"):Da.startTimeField=null),Da.endTimeField&&((z=this._fieldsIndex.get(Da.endTimeField))?(Da.endTimeField=z.name,z.type="esriFieldTypeDate"):Da.endTimeField=null),Da.trackIdField&&(z=this._fieldsIndex.get(Da.trackIdField),Da.trackIdField=z?z.name:null),Da.startTimeField||Da.endTimeField||(va.timeInfo=null));return V};h._inferLocationInfo=function(q){let H=null,z=null;
const V=oa=>q.find(ma=>ma.toLowerCase()===oa);ka.some(oa=>{H=V(oa);return!!H});ea.some(oa=>{z=V(oa);return!!z});return{longitudeFieldName:H,latitudeFieldName:z}};h._inferFields=function(q,H,z,V){const oa=[];H=C.parseRows(q,z,H);q=[];a:for(;10>q.length;){const {value:ma,done:va}=H.next();if(va)break a;q.push(ma)}for(const ma of z)if(ma===V.longitudeFieldName||ma===V.latitudeFieldName)oa.push({name:ma,type:"esriFieldTypeDouble",alias:ma});else{z=q.map(va=>va[ma]);z=this._inferFieldType(z);H={name:ma,
type:null,alias:ma};switch(z){case "integer":H.type="esriFieldTypeInteger";break;case "double":H.type="esriFieldTypeDouble";break;case "date":H.type="esriFieldTypeDate";H.length=36;break;default:H.type="esriFieldTypeString",H.length=255}oa.push(H)}return oa};h._inferFieldType=function(q){if(!q.length)return"string";const H=/[^+-.,0-9]/;return q.map(z=>{var V=!1;if(""!==z){if(H.test(z))V=!0;else{V=Q(z);if(!isNaN(V))return/[.,]/.test(z)||!S(V)||214783647<V||-214783648>V?"double":"integer";if(-1===z.indexOf("E"))V=
!0;else if(V=Number(z),isNaN(V))if(-1===z.indexOf(","))V=!0;else if(z=z.replace(",","."),V=Number(z),isNaN(V))V=!0;else return"double";else return"double"}return V&&!/^[-]?\d*[.,]?\d*$/.test(z)&&this._isValidDate(new Date(z),z)?"date":"string"}}).reduce((z,V)=>{if(void 0===z||z===V)return V;if("string"===z||"string"===V)return"string";if("double"===z||"double"===V)return"double"})};h._isValidDate=function(q,H){if(!q||"[object Date]"!==Object.prototype.toString.call(q)||isNaN(q.getTime()))return!1;
q=!0;if(m("chrome")&&/\d+\W*$/.test(H)&&(H=H.match(/[a-zA-Z]{2,}/))){q=!1;let z=0;for(;!q&&z<=H.length;)q=!Z.test(H[z]),z++;q=!q}return q};h._createQueryEngine=function(q,H){const {latitudeFieldName:z,longitudeFieldName:V}=H.locationInfo,{objectIdField:oa,fields:ma,extent:va,timeInfo:za}=H.layerDefinition;let Da=[];const Y=[];var ia=new Set,pa=new Set,Aa=[];for(const {name:P,type:f}of ma)"esriFieldTypeDate"===f?ia.add(P):-1<T.indexOf(f)&&pa.add(P),P!==oa&&Aa.push(P);var wa=0;q=C.readRows(q);q.next();
Aa=C.parseRows(q,Aa,H.columnDelimiter);a:for(;;){const {value:P,done:f}=Aa.next();if(f)break a;q=this._parseCoordinateValue(P[z]);const x=this._parseCoordinateValue(P[V]);if(null!=x&&null!=q&&!isNaN(q)&&!isNaN(x)){P[z]=q;P[V]=x;for(var b in P)if(b!==z&&b!==V)if(ia.has(b)){var e=new Date(P[b]);P[b]=this._isValidDate(e,P[b])?e.getTime():null}else pa.has(b)&&(e=Q(P[b]),isNaN(e)?P[b]=null:P[b]=e);P[oa]=wa;wa++;Da.push(new M(x,q));Y.push(P)}}if(!p.equals({wkid:4326},va.spatialReference))if(p.isWebMercator(va.spatialReference))for(const P of Da)[P.x,
P.y]=k.lngLatToXY(P.x,P.y,G);else Da=D.projectMany(t.jsonAdapter,Da,I.WGS84,va.spatialReference,null);ia=new E({geometryType:"esriGeometryPoint",hasM:!1,hasZ:!1});H=new K["default"]({fields:H.layerDefinition.fields,geometryType:"esriGeometryPoint",hasM:!1,hasZ:!1,timeInfo:za,objectIdField:oa,spatialReference:va.spatialReference||{wkid:4326},cacheSpatialQueries:!0,featureStore:ia});pa=[];for(wa=0;wa<Da.length;wa++){const {x:P,y:f}=Da[wa];b=Y[wa];b[oa]=wa+1;pa.push(new R(new v([],[P,f]),b,null,b[oa]))}ia.addMany(pa);
return H};h._parseCoordinateValue=function(q){if(null==q||""===q)return null;let H=Q(q);if(isNaN(H)||181<Math.abs(H))H=parseFloat(q);return H};h._checkProjection=async function(q){try{await l.checkProjectionSupport(p.WGS84,q)}catch{throw new da("csv-layer","Projection not supported");}};return w}();n.csvLatitudeFieldNames=ea;n.csvLongitudeFieldNames=ka;n.default=y;Object.defineProperty(n,"__esModule",{value:!0})});