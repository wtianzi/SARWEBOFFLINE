// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.19/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/support/fieldUtils":function(){define("require exports ../../core/object ../../core/maybe ../../core/Error ./domains ../../support/arcadeOnDemand".split(" "),function(n,e,Z,K,p,I,l){function r(ea,x,T){if(ea)for(const ma of ea)(ea=(ea=Z.getDeepValue(ma,x))&&"function"!==typeof ea&&fa(T,ea))&&Z.setDeepValue(ma,ea.name,x)}function q(ea,x){if(!ea||!x)return[];z.clear();E(z,ea,x);return Array.from(z).sort()}function E(ea,x,T){if(T)if(x&&x.length)if(T.includes("*"))for(const {name:ma}of x)ea.add(ma);
else for(const ma of T)ha(ea,x,ma);else if(T.includes("*"))ea.clear(),ea.add("*");else for(const ma of T)ea.add(ma)}function ha(ea,x,T){x&&x.length?(x=fa(x,T))&&ea.add(x.name):"string"===typeof T&&ea.add(T)}function fa(ea,x){if("string"!==typeof x)return null;if(null!=ea){x=x.toLowerCase();for(const T of ea)if(T&&T.name.toLowerCase()===x)return T}return null}async function A(ea,x,T){if(T){var {arcadeUtils:ma}=await l.loadArcade();T=ma.extractFieldNames(T);for(const ya of T)ha(ea,x,ya)}}function u(ea,
x){for(const T of ea)if(T&&T.valueType&&T.valueType===x)return T.name;return null}async function B(ea,x){if(x){var {fields:T}=x;if(x=Z.getDeepValue("elevationInfo.featureExpressionInfo",x))return x.collectRequiredFields(ea,T)}}async function d(ea,x,T){T.outStatistic.onStatisticValueExpression?A(ea,x,T.outStatistic.onStatisticValueExpression):ea.add(T.outStatistic.onStatisticField)}async function m(ea,x){const {labelingInfo:T,fields:ma}=x;T&&T.length&&await Promise.all(T.map(ya=>H(ea,ma,ya)))}async function H(ea,
x,T){if(T){var ma=T.getLabelExpression();T=T.where;"arcade"===ma.type?await A(ea,x,ma.expression):(ma=ma.expression.match(/{[^}]*}/g))&&ma.forEach(ya=>{ha(ea,x,ya.slice(1,-1))});ma=/['"]+/g;T&&(T=T.split(" "),3===T.length&&ha(ea,x,T[0].replace(ma,"")),7===T.length&&(ha(ea,x,T[0].replace(ma,"")),ha(ea,x,T[4].replace(ma,""))))}}function M(ea){return"number"===typeof ea&&!isNaN(ea)&&isFinite(ea)}function D(ea){return null===ea||M(ea)}function v(ea){return null===ea||R(ea)}function L(ea){return null!=
ea&&"string"===typeof ea}function aa(ea){return null===ea||L(ea)}function ia(){return!0}function U(ea,x){let T;switch(ea.type){case "date":case "integer":case "long":case "small-integer":case "esriFieldTypeDate":case "esriFieldTypeInteger":case "esriFieldTypeLong":case "esriFieldTypeSmallInteger":T=ea.nullable?v:R;break;case "double":case "single":case "esriFieldTypeSingle":case "esriFieldTypeDouble":T=ea.nullable?D:M;break;case "string":case "esriFieldTypeString":T=ea.nullable?aa:L;break;default:T=
ia}return 1===arguments.length?T:T(x)}function F(ea){return null!=ea&&ja.has(ea.type)}function G(ea,x){return ea.nullable&&null===x?null:F(ea)&&!N(ea.type,Number(x))?e.NumericRangeValidationError.OUT_OF_RANGE:U(ea,x)?ea.domain?I.validateDomainValue(ea.domain,x):null:e.TypeValidationError.INVALID_TYPE}function N(ea,x){return(ea="string"===typeof ea?Q(ea):ea)?ea.isInteger?R(x)&&x>=ea.min&&x<=ea.max:x>=ea.min&&x<=ea.max:!1}function Q(ea){switch(ea){case "esriFieldTypeSmallInteger":case "small-integer":return qa;
case "esriFieldTypeInteger":case "integer":return pa;case "esriFieldTypeSingle":case "single":return wa;case "esriFieldTypeDouble":case "double":return Ca}}function P(ea,x,T){if(!x||!x.attributes||!ea){if(K.isSome(T))for(var ma of ea)T.add(ma);return!0}x=x.attributes;ma=!1;for(const ya of ea)if(!(ya in x))if(ma=!0,K.isSome(T))T.add(ya);else break;return ma}const t="field field2 field3 normalizationField rotationInfo.field proportionalSymbolInfo.field proportionalSymbolInfo.normalizationField colorInfo.field colorInfo.normalizationField".split(" "),
h=["field","normalizationField"],z=new Set,R=(()=>"isInteger"in Number?Number.isInteger:ea=>"number"===typeof ea&&isFinite(ea)&&Math.floor(ea)===ea)(),J=["integer","small-integer","single","double"],ja=new Set([...J,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);(e.NumericRangeValidationError||(e.NumericRangeValidationError={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range";(e.TypeValidationError||(e.TypeValidationError={})).INVALID_TYPE=
"type-validation-error::invalid-type";const qa={min:-32768,max:32767,isInteger:!0},pa={min:-2147483648,max:2147483647,isInteger:!0},wa={min:-3.4E38,max:1.2E38,isInteger:!1},Ca={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};e.collectArcadeFieldNames=A;e.collectElevationFields=B;e.collectFeatureReductionFields=async function(ea,x,T){x&&T&&"cluster"===T.type&&T.fields&&await Promise.all(T.fields.map(ma=>d(ea,x.fields,ma)))};e.collectField=ha;e.collectFields=E;e.collectFilterFields=async function(ea,
x,T){if(x&&(x.timeInfo&&K.isSome(T)&&T.timeExtent&&E(ea,x.fields,[x.timeInfo.startField,x.timeInfo.endField]),x.floorInfo&&E(ea,x.fields,[x.floorInfo.floorField]),K.isSome(T)&&K.isSome(T.where)&&T.where&&"1\x3d1"!==T.where)){T=(await new Promise(function(ma,ya){n(["../../core/sql/WhereClause"],ma,ya)})).WhereClause.create(T.where,x.fieldsIndex);if(!T.isStandardized)throw new p("fieldUtils:collectFilterFields","Where clause is not standardized");E(ea,x.fields,T.fieldNames)}};e.collectLabelingFields=
m;e.doubleRange=Ca;e.featureHasFields=function(ea,x){return!P(ea,x,null)};e.fixFields=q;e.fixRendererFields=function(ea,x){if(null!=ea&&null!=x)for(const T of Array.isArray(ea)?ea:[ea])if(r(t,T,x),"visualVariables"in T&&T.visualVariables)for(const ma of T.visualVariables)r(h,ma,x)};e.fixTimeInfoFields=function(ea,x){if(null!=ea&&null!=x)if("startField"in ea){var T=fa(x,ea.startField);x=fa(x,ea.endField);ea.startField=T&&T.name||null;ea.endField=x&&x.name||null}else T=fa(x,ea.startTimeField),x=fa(x,
ea.endTimeField),ea.startTimeField=T&&T.name||null,ea.endTimeField=x&&x.name||null};e.getDisplayFieldName=function({displayField:ea,fields:x}){if(ea)return ea;if(!x||!x.length)return null;if(!(ea=u(x,"name-or-title")||u(x,"unique-identifier")||u(x,"type-or-category")))a:{for(const T of x)if(T&&T.name&&(x=T.name.toLowerCase(),-1<x.indexOf("name")||-1<x.indexOf("title"))){ea=T.name;break a}ea=null}return ea};e.getElevationFields=async function(ea){if(!ea)return[];const x=new Set;await B(x,ea);return Array.from(x).sort()};
e.getExpressionFields=async function(ea,x){const T=new Set;for(const ma of x)await A(T,ea.fields,ma);return Array.from(T).sort()};e.getFeatureEditFields=function(ea){if(!ea)return[];const x="editFieldsInfo"in ea&&ea.editFieldsInfo;return x?q(ea.fields,[x&&x.creatorField,x&&x.creationDateField,x&&x.editorField,x&&x.editDateField]):[]};e.getFeatureGeometryFields=function(ea){if(!ea)return[];const x=ea.geometryFieldsInfo;return x?q(ea.fields,[x.shapeAreaField,x.shapeLengthField]):[]};e.getField=fa;e.getFieldDefaultValue=
function(ea){const x=ea.defaultValue;if(void 0!==x&&U(ea,x))return x;if(ea.nullable)return null};e.getFieldRange=function(ea){const x=I.getDomainRange(ea.domain);if(x)return x;if(F(ea))return Q(ea.type)};e.getLabelingFields=async function(ea){if(!ea)return[];const x=new Set;await m(x,ea);return Array.from(x).sort()};e.getNumericTypeForValue=function(ea){if(!M(ea))return null;if(R(ea)){if(ea>=qa.min&&ea<=qa.max)return"esriFieldTypeSmallInteger";if(ea>=pa.min&&ea<=pa.max)return"esriFieldTypeInteger"}return ea>=
wa.min&&ea<=wa.max?"esriFieldTypeSingle":"esriFieldTypeDouble"};e.getTimeFields=async function(ea){if(!ea)return[];const x="timeInfo"in ea&&ea.timeInfo;return x?q(ea.fields,[ea.trackIdField,x.startField,x.endField]):[]};e.hasField=function(ea,x){if(!ea||!x||"string"!==typeof x)return!1;x=x.toLowerCase();for(const T of ea)if(T&&T.name.toLowerCase()===x)return!0;return!1};e.integerRange=pa;e.isDateField=function(ea){return null!=ea&&("date"===ea.type||"esriFieldTypeDate"===ea.type)};e.isNumberInRange=
N;e.isNumericField=F;e.isStringField=function(ea){return null!=ea&&("string"===ea.type||"esriFieldTypeString"===ea.type)};e.isValidFieldValue=function(ea,x){return null===G(ea,x)};e.isValueMatchingFieldType=U;e.numericTypes=J;e.packFields=function(ea,x,T=1){if(!x||!ea)return[];if(x.includes("*"))return["*"];x=q(ea,x);return x.length/ea.length>=T?["*"]:x};e.populateMissingFields=P;e.rendererFields=t;e.sanitizeNullFieldValue=function(ea){return null==ea||"number"===typeof ea&&isNaN(ea)?null:ea};e.singleRange=
wa;e.smallIntegerRange=qa;e.unpackFieldNames=function(ea,x){return K.isNone(x)||K.isNone(ea)?[]:x.includes("*")?ea.map(T=>T.name):x};e.validateFieldValue=G;e.validationErrorToString=function(ea,x,T){switch(ea){case I.DomainValidationError.INVALID_CODED_VALUE:return`Value ${T} is not in the coded domain - field: ${x.name}, domain: ${JSON.stringify(x.domain)}`;case I.DomainValidationError.VALUE_OUT_OF_RANGE:return`Value ${T} is out of the range of valid values - field: ${x.name}, domain: ${JSON.stringify(x.domain)}`;
case e.TypeValidationError.INVALID_TYPE:return`Value ${T} is not a valid value for the field type - field: ${x.name}, type: ${x.type}, nullable: ${x.nullable}`;case e.NumericRangeValidationError.OUT_OF_RANGE:{const {min:ma,max:ya}=Q(x.type);return`Value ${T} is out of range for the number type - field: ${x.name}, type: ${x.type}, value range is ${ma} to ${ya}`}}};e.visualVariableFields=h;Object.defineProperty(e,"__esModule",{value:!0})})},"esri/layers/support/domains":function(){define("exports ../../core/has ./Domain ./CodedValueDomain ./InheritedDomain ./RangeDomain".split(" "),
function(n,e,Z,K,p,I){function l(r,q){switch(r.type){case "range":{const E="range"in r?r.range[1]:r.maxValue;if(+q<("range"in r?r.range[0]:r.minValue)||+q>E)return n.DomainValidationError.VALUE_OUT_OF_RANGE;break}case "coded-value":case "codedValue":if(null==r.codedValues||r.codedValues.every(E=>null==E||E.code!==q))return n.DomainValidationError.INVALID_CODED_VALUE}return null}(function(r){r.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range";r.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(n.DomainValidationError||
(n.DomainValidationError={}));e={key:"type",base:Z,typeMap:{range:I,"coded-value":K,inherited:p}};n.DomainBase=Z;n.CodedValueDomain=K;n.InheritedDomain=p;n.RangeDomain=I;n.fromJSON=function(r){if(!r||!r.type)return null;switch(r.type){case "range":return I.fromJSON(r);case "codedValue":return K.fromJSON(r);case "inherited":return p.fromJSON(r)}return null};n.getDomainRange=function(r){if(r&&"range"===r.type)return{min:"range"in r?r.range[0]:r.minValue,max:"range"in r?r.range[1]:r.maxValue}};n.isValidDomainValue=
function(r,q){return null===l(r,q)};n.types=e;n.validateDomainValue=l;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/support/Domain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport".split(" "),
function(n,e,Z,K,p,I,l,r,q,E,ha,fa,A){Z=new l.JSONMap({inherited:"inherited",codedValue:"coded-value",range:"range"});A=function(u){function B(d){d=u.call(this,d)||this;d.name=null;d.type=null;return d}n._inheritsLoose(B,u);return B}(A.JSONSupport);e.__decorate([I.property({type:String,json:{write:!0}})],A.prototype,"name",void 0);e.__decorate([r.enumeration(Z)],A.prototype,"type",void 0);return A=e.__decorate([q.subclass("esri.layers.support.Domain")],A)})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports",
"./property","../../jsonMap"],function(n,e,Z){n.enumeration=function(K,p={ignoreUnknown:!0}){K=K instanceof Z.JSONMap?K:new Z.JSONMap(K,p);K={type:null!=p&&p.ignoreUnknown?K.apiValues:String,readOnly:null==p?void 0:p.readOnly,json:{type:K.jsonValues,read:null!=p&&p.readOnly?!1:{reader:K.read},write:{writer:K.write}}};void 0!==(null==p?void 0:p.default)&&(K.json.default=p.default);return e.property(K)};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/support/CodedValueDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/lang ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ./CodedValue ./Domain".split(" "),
function(n,e,Z,K,p,I,l,r,q,E,ha,fa,A,u){var B;Z=B=function(d){function m(M){M=d.call(this,M)||this;M.codedValues=null;M.type="coded-value";return M}n._inheritsLoose(m,d);var H=m.prototype;H.getName=function(M){let D=null;if(this.codedValues){const v=String(M);this.codedValues.some(L=>{String(L.code)===v&&(D=L.name);return!!D})}return D};H.clone=function(){return new B({codedValues:K.clone(this.codedValues),name:this.name})};return m}(u);e.__decorate([l.property({type:[A["default"]],json:{write:!0}})],
Z.prototype,"codedValues",void 0);e.__decorate([r.enumeration({codedValue:"coded-value"})],Z.prototype,"type",void 0);return Z=B=e.__decorate([q.subclass("esri.layers.support.CodedValueDomain")],Z)})},"esri/layers/support/CodedValue":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport".split(" "),
function(n,e,Z,K,p,I,l,r,q,E,ha,fa,A){var u;n.CodedValue=u=function(B){function d(m){m=B.call(this,m)||this;m.name=null;m.code=null;return m}e._inheritsLoose(d,B);d.prototype.clone=function(){return new u({name:this.name,code:this.code})};return d}(A.JSONSupport);Z.__decorate([l.property({type:String,json:{write:!0}})],n.CodedValue.prototype,"name",void 0);Z.__decorate([l.property({type:[String,Number],json:{write:!0}})],n.CodedValue.prototype,"code",void 0);n.CodedValue=u=Z.__decorate([q.subclass("esri.layers.support.CodedValue")],
n.CodedValue);n.default=n.CodedValue;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/support/InheritedDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ./Domain".split(" "),
function(n,e,Z,K,p,I,l,r,q,E,ha,fa){var A;Z=A=function(u){function B(d){d=u.call(this,d)||this;d.type="inherited";return d}n._inheritsLoose(B,u);B.prototype.clone=function(){return new A};return B}(fa);e.__decorate([l.enumeration({inherited:"inherited"})],Z.prototype,"type",void 0);return Z=A=e.__decorate([r.subclass("esri.layers.support.InheritedDomain")],Z)})},"esri/layers/support/RangeDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ./Domain".split(" "),
function(n,e,Z,K,p,I,l,r,q,E,ha,fa){var A;Z=A=function(u){function B(d){d=u.call(this,d)||this;d.maxValue=null;d.minValue=null;d.type="range";return d}n._inheritsLoose(B,u);B.prototype.clone=function(){return new A({maxValue:this.maxValue,minValue:this.minValue,name:this.name})};return B}(fa);e.__decorate([I.property({type:Number,json:{type:[Number],read:{source:"range",reader(u,B){return B.range&&B.range[1]}},write:{enabled:!1,overridePolicy(){return{enabled:null!=this.maxValue&&null==this.minValue}},
target:"range",writer(u,B,d){B[d]=[this.minValue||0,u]}}}})],Z.prototype,"maxValue",void 0);e.__decorate([I.property({type:Number,json:{type:[Number],read:{source:"range",reader(u,B){return B.range&&B.range[0]}},write:{target:"range",writer(u,B,d){B[d]=[u,this.maxValue||0]}}}})],Z.prototype,"minValue",void 0);e.__decorate([l.enumeration({range:"range"})],Z.prototype,"type",void 0);return Z=A=e.__decorate([r.subclass("esri.layers.support.RangeDomain")],Z)})},"esri/support/arcadeOnDemand":function(){define(["require",
"exports","../core/maybe","../geometry/SpatialReference","../geometry"],function(n,e,Z,K,p){async function I(){l||(l=(async()=>{const q=await new Promise(function(E,ha){n(["./arcadeUtils"],E,ha)});await q.arcade.load();return{arcade:q.arcade,arcadeUtils:q,Dictionary:q.Dictionary,Feature:q.arcadeFeature}})());return l}let l;p=(q,E,ha)=>r.create(q,E,ha,null,["$feature","$view"]);let r=function(){function q(ha,fa,A,u,B,d,m,H){this.script=ha;this.evaluate=B;this.fields=m;this._syntaxTree=u;this._arcade=
fa;this._arcadeDictionary=A;this._arcadeFeature=d;this._spatialReference=H;this._referencesGeometry=fa.scriptTouchesGeometry(this._syntaxTree);this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}q.create=async function(ha,fa,A,u,B,d){const {arcade:m,Feature:H,Dictionary:M}=await I(),D=K.fromJSON(fa);fa=m.parseScript(ha,d);B=B.reduce((U,F)=>({...U,[F]:null}),{});let v=null;Z.isSome(u)&&(v=new M(u),v.immutable=!0,B.$config=null);u=m.scriptUsesGeometryEngine(fa)&&m.enableGeometrySupport();
d=m.scriptUsesFeatureSet(fa)&&m.enableFeatureSetSupport();const L=m.scriptIsAsync(fa)&&m.enableAsyncSupport();B={vars:B,spatialReference:D,useAsync:!!L};const aa=new M;aa.immutable=!1;aa.setField("scale",0);const ia=m.compileScript(fa,B);await Promise.all([u,d,L]);return new q(ha,m,M,fa,U=>{"$view"in U&&U.$view&&(aa.setField("scale",U.$view.scale),U.$view=aa);v&&(U.$config=v);return ia({vars:U,spatialReference:D})},new H,A,D)};var E=q.prototype;E.repurposeFeature=function(ha){ha.geometry&&!ha.geometry.spatialReference&&
(ha.geometry.spatialReference=this._spatialReference);this._arcadeFeature.repurposeFromGraphicLikeObject(ha.geometry,ha.attributes,{fields:this.fields});return this._arcadeFeature};E.repurposeAdapter=function(ha){this._arcadeFeature.repurposeFromAdapter(ha,{fields:this.fields});return this._arcadeFeature};E.createDictionary=function(){return new this._arcadeDictionary};E.referencesMember=function(ha){return this._arcade.referencesMember(this._syntaxTree,ha)};E.referencesFunction=function(ha){return this._arcade.referencesFunction(this._syntaxTree,
ha)};E.referencesGeometry=function(){return this._referencesGeometry};E.referencesScale=function(){return this._referencesScale};E.extractFieldLiterals=function(ha){return this._arcade.extractFieldLiterals(this._syntaxTree,ha)};return q}();e.ArcadeExpression=r;e.createDictionaryExpression=(q,E,ha,fa)=>r.create(q,E,ha,fa,["$feature","$view"]);e.createLabelExpression=(q,E,ha)=>r.create(q,E,ha,null,["$feature"]);e.createRendererExpression=p;e.createVVExpression=p;e.default=r;e.loadArcade=I;Object.defineProperty(e,
"__esModule",{value:!0})})},"esri/layers/support/fieldType":function(){define(["exports","../../core/jsonMap"],function(n,e){e=new e.JSONMap({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",
esriFieldTypeXML:"xml"});n.kebabDict=e;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/graphics/featureConversionUtils":function(){define("exports ../../core/Logger ../../core/Error ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),function(n,e,Z,K,p,I,l){function r(g,w){return g?w?4:3:w?3:2}function q(g,w,O,S){if(g){if(O)return w&&S?b:ya;if(w&&S)return za}else if(w&&S)return ya;return ma}function E({scale:g,translate:w},O){return Math.round((O-
w[0])/g[0])}function ha({scale:g,translate:w},O){return Math.round((w[1]-O)/g[1])}function fa({scale:g,translate:w},O){return O*g[0]+w[0]}function A({scale:g,translate:w},O){return w[1]-O*g[1]}function u(g){g=g.coords;return{x:g[0],y:g[1]}}function B(g,w){g.coords[0]=w.x;g.coords[1]=w.y;return g}function d(g){g=g.coords;return{x:g[0],y:g[1],z:g[2]}}function m(g,w){g.coords[0]=w.x;g.coords[1]=w.y;g.coords[2]=w.z;return g}function H(g){g=g.coords;return{x:g[0],y:g[1],m:g[2]}}function M(g,w){g.coords[0]=
w.x;g.coords[1]=w.y;g.coords[2]=w.m;return g}function D(g){g=g.coords;return{x:g[0],y:g[1],z:g[2],m:g[3]}}function v(g,w){g.coords[0]=w.x;g.coords[1]=w.y;g.coords[2]=w.z;g.coords[3]=w.m;return g}function L(g,w){return g&&w?v:g?m:w?M:B}function aa(g,w,O,S,ba){O=L(O,S);for(const W of w){const {geometry:ka,attributes:la}=W;let na;ka&&(na=O(new l,ka));g.push(new p(na,la,null,la[ba]))}return g}function ia(g,w,O,S){for(const ba of w){const {geometry:W,attributes:ka}=ba;let la;W&&(la=U(W,O,S));g.push({attributes:ka,
geometry:la})}return g}function U(g,w,O){if(!g)return null;const S=r(w,O),ba=[];for(let W=0;W<g.coords.length;W+=S){const ka=[];for(let la=0;la<S;la++)ka.push(g.coords[W+la]);ba.push(ka)}return w?O?{points:ba,hasZ:w,hasM:O}:{points:ba,hasZ:w}:O?{points:ba,hasM:O}:{points:ba}}function F(g,w,O,S,ba){O=r(O,S);for(const W of w){w=W.geometry;S=W.attributes;let ka;w&&(ka=G(new l,w,O));g.push(new p(ka,S,null,S[ba]))}return g}function G(g,w,O=r(w.hasZ,w.hasM)){g.lengths[0]=w.points.length;const S=g.coords;
let ba=0;for(const W of w.points)for(w=0;w<O;w++)S[ba++]=W[w];return g}function N(g,w,O){if(!g)return null;const S=r(w,O),{coords:ba,lengths:W}=g;g=[];let ka=0;for(const la of W){const na=[];for(let ua=0;ua<la;ua++){const ta=[];for(let xa=0;xa<S;xa++)ta.push(ba[ka++]);na.push(ta)}g.push(na)}return w?O?{paths:g,hasZ:w,hasM:O}:{paths:g,hasZ:w}:O?{paths:g,hasM:O}:{paths:g}}function Q(g,w,O,S,ba){O=r(O,S);for(const W of w){w=W.geometry;S=W.attributes;let ka;w&&(ka=P(new l,w,O));g.push(new p(ka,S,null,
S[ba]))}return g}function P(g,w,O=r(w.hasZ,w.hasM)){const {lengths:S,coords:ba}=g;let W=0;for(const ka of w.paths){for(const la of ka)for(w=0;w<O;w++)ba[W++]=la[w];S.push(ka.length)}return g}function t(g,w,O){if(!g)return null;const S=r(w,O),{coords:ba,lengths:W}=g;g=[];let ka=0;for(const la of W){const na=[];for(let ua=0;ua<la;ua++){const ta=[];for(let xa=0;xa<S;xa++)ta.push(ba[ka++]);na.push(ta)}g.push(na)}return w?O?{rings:g,hasZ:w,hasM:O}:{rings:g,hasZ:w}:O?{rings:g,hasM:O}:{rings:g}}function h(g,
w,O,S,ba){for(const W of w){w=W.geometry;const ka=W.centroid,la=W.attributes;let na;w&&(na=z(new l,w,O,S));ka?g.push(new p(na,la,B(new l,ka),la[ba])):g.push(new p(na,la,null,la[ba]))}return g}function z(g,w,O=w.hasZ,S=w.hasM){R(g,w.rings,O,S);return g}function R(g,w,O,S){O=r(O,S);const {lengths:ba,coords:W}=g;S=0;ba.length=W.length=0;for(const ka of w){for(const la of ka)for(w=0;w<O;w++)W[S++]=la[w];ba.push(ka.length)}return g}function J(g,w,O,S,ba,W){g.length=0;if(!O){for(const ka of w)g.push(new p(null,
ka.attributes,null,ka.attributes[W]));return g}switch(O){case "esriGeometryPoint":return aa(g,w,S,ba,W);case "esriGeometryMultipoint":return F(g,w,S,ba,W);case "esriGeometryPolyline":return Q(g,w,S,ba,W);case "esriGeometryPolygon":return h(g,w,S,ba,W);default:x.error("convertToFeatureSet:unknown-geometry",new Z(`Unable to parse unknown geometry type '${O}'`)),g.length=0}return g}function ja(g,w,O,S){g=g&&("coords"in g?g:g.geometry);if(!g)return null;switch(w){case "esriGeometryPoint":return w=u,O&&
S?w=D:O?w=d:S&&(w=H),w(g);case "esriGeometryMultipoint":return U(g,O,S);case "esriGeometryPolyline":return N(g,O,S);case "esriGeometryPolygon":return t(g,O,S);default:x.error("convertToGeometry:unknown-geometry",new Z(`Unable to parse unknown geometry type '${w}'`))}}function qa(g,w,O,S,ba){g.length=0;switch(O){case "esriGeometryPoint":var W=u;S&&ba?W=D:S?W=d:ba&&(W=H);for(var ka of w){const {geometry:la,attributes:na}=ka;S=la?W(la):null;g.push({attributes:na,geometry:S})}break;case "esriGeometryMultipoint":return ia(g,
w,S,ba);case "esriGeometryPolyline":for(const la of w){const {geometry:na,attributes:ua}=la;let ta;na&&(ta=N(na,S,ba));g.push({attributes:ua,geometry:ta})}break;case "esriGeometryPolygon":for(W of w){const {geometry:la,attributes:na,centroid:ua}=W;let ta;la&&(ta=t(la,S,ba));ua?(ka=u(ua),g.push({attributes:na,centroid:ka,geometry:ta})):g.push({attributes:na,geometry:ta})}break;default:x.error("convertToFeatureSet:unknown-geometry",new Z(`Unable to parse unknown geometry type '${O}'`))}return g}function pa(g,
w,O,S,ba,W,ka=O,la=S){g.lengths.length&&(g.lengths.length=0);g.coords.length&&(g.coords.length=0);if(!w||!w.coords.length)return null;ba=T[ba];const {coords:na,lengths:ua}=w;w=r(O,S);const ta=r(O&&ka,S&&la);O=q(O,S,ka,la);if(!ua.length)return O(g.coords,na,0,0,E(W,na[0]),ha(W,na[1])),g.lengths.length&&(g.lengths.length=0),g.coords.length=w,g;let xa,Ba=0,Ea,Ka=0;for(const Ga of ua){if(Ga<ba)continue;let Ja=0;Ea=Ka;la=S=E(W,na[Ba]);xa=ka=ha(W,na[Ba+1]);O(g.coords,na,Ea,Ba,la,xa);Ja++;Ba+=w;Ea+=ta;for(let Ha=
1;Ha<Ga;Ha++,Ba+=w)if(la=E(W,na[Ba]),xa=ha(W,na[Ba+1]),la!==S||xa!==ka)O(g.coords,na,Ea,Ba,la-S,xa-ka),Ea+=ta,Ja++,S=la,ka=xa;Ja>=ba&&(g.lengths.push(Ja),Ka=Ea)}g.coords.length=Ka;return g.coords.length?g:null}function wa(g,w,O,S,ba,W,ka){let la=S,na=0;for(let ta=W+O;ta<ka;ta+=O){{var ua=w[ta];const xa=w[ta+1],Ba=w[ka],Ea=w[ka+1];let Ka=w[W],Ga=w[W+1],Ja=Ba-Ka,Ha=Ea-Ga;if(0!==Ja||0!==Ha){const Ia=((ua-Ka)*Ja+(xa-Ga)*Ha)/(Ja*Ja+Ha*Ha);1<Ia?(Ka=Ba,Ga=Ea):0<Ia&&(Ka+=Ja*Ia,Ga+=Ha*Ia)}Ja=ua-Ka;Ha=xa-Ga;
ua=Ja*Ja+Ha*Ha}ua>la&&(na=ta,la=ua)}la>S&&(na-W>O&&wa(g,w,O,S,ba,W,na),ba(g,w,g.length,na,w[na],w[na+1]),ka-na>O&&wa(g,w,O,S,ba,na,ka))}function Ca(g,w,O,S,ba){const {coords:W,lengths:ka}=w,la=O?S?b:ya:S?ya:ma;O=r(O,S);if(!W.length)return g!==w&&(g.lengths.length=0,g.coords.length=0),g;if(!ka.length)return la(g.coords,W,0,0,fa(ba,W[0]),A(ba,W[1])),g!==w&&(g.lengths.length=0,g.coords.length=O),g;const [na,ua]=ba.scale;S=0;for(let ta=0;ta<ka.length;ta++){const xa=ka[ta];g.lengths[ta]=xa;let Ba=fa(ba,
W[S]),Ea=A(ba,W[S+1]);la(g.coords,W,S,S,Ba,Ea);S+=O;for(let Ka=1;Ka<xa;Ka++,S+=O)Ba+=W[S]*na,Ea-=W[S+1]*ua,la(g.coords,W,S,S,Ba,Ea)}g!==w&&(g.lengths.length=ka.length,g.coords.length=W.length);return g}function ea(g,w,O,S){let ba=0,W=g[S*w],ka=g[S*(w+1)];for(let la=1;la<O;la++){const na=W+g[S*(w+la)],ua=ka+g[S*(w+la)+1],ta=(na-W)*(ua+ka);W=na;ka=ua;ba+=ta}return.5*ba}const x=e.getLogger("esri.tasks.support.optimizedFeatureSet"),T={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},
ma=(g,w,O,S,ba,W)=>{g[O]=ba;g[O+1]=W},ya=(g,w,O,S,ba,W)=>{g[O]=ba;g[O+1]=W;g[O+2]=w[S+2]},za=(g,w,O,S,ba,W)=>{g[O]=ba;g[O+1]=W;g[O+2]=w[S+3]},b=(g,w,O,S,ba,W)=>{g[O]=ba;g[O+1]=W;g[O+2]=w[S+2];g[O+3]=w[S+3]},f=[],V=[];n.convertFromFeature=function(g,w,O,S,ba){f[0]=g;[g]=J(V,f,w,O,S,ba);f.length=V.length=0;return g};n.convertFromFeatureSet=function(g,w){const O=new I,{hasM:S,hasZ:ba,features:W,objectIdFieldName:ka,spatialReference:la,geometryType:na,exceededTransferLimit:ua,transform:ta,fields:xa}=
g;xa&&(O.fields=xa);O.geometryType=na;O.objectIdFieldName=ka||w;O.spatialReference=la;if(!O.objectIdFieldName)return x.error(new Z("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),O;W&&J(O.features,W,na,ba,S,O.objectIdFieldName);ua&&(O.exceededTransferLimit=ua);S&&(O.hasM=S);ba&&(O.hasZ=ba);ta&&(O.transform=ta);return O};n.convertFromFeatures=J;n.convertFromGeometry=function(g,w,O){if(!g)return null;const S=new l;"hasZ"in g&&null==w&&(w=g.hasZ);"hasM"in g&&null==O&&
(O=g.hasM);if(K.isPoint(g))return L(null!=w?w:null!=g.z,null!=O?O:null!=g.m)(S,g);if(K.isPolygon(g))return z(S,g,w,O);if(K.isPolyline(g))return P(S,g,r(w,O));if(K.isMultipoint(g))return G(S,g,r(w,O));x.error("convertFromGeometry:unknown-geometry",new Z(`Unable to parse unknown geometry type '${g}'`))};n.convertFromGraphics=function(g,w,O,S,ba,W){const ka=g.length;switch(O){case "esriGeometryPoint":aa(g,w,S,ba,W);break;case "esriGeometryMultipoint":F(g,w,S,ba,W);break;case "esriGeometryPolyline":Q(g,
w,S,ba,W);break;case "esriGeometryPolygon":h(g,w,S,ba,W);break;default:x.error("convertToFeatureSet:unknown-geometry",new Z(`Unable to parse unknown geometry type '${O}'`))}for(S=0;S<w.length;S++)g[S+ka].geometryType=O,g[S+ka].insertAfter=w[S].insertAfter,g[S+ka].groupId=w[S].groupId;return g};n.convertFromMultipoint=G;n.convertFromMultipointFeatures=F;n.convertFromNestedArray=R;n.convertFromPoint=function(g,w,O=L(null!=w.z,null!=w.m)){return O(g,w)};n.convertFromPointFeatures=aa;n.convertFromPolygon=
z;n.convertFromPolyline=P;n.convertFromPolylineFeatures=Q;n.convertToFeature=function(g,w,O,S){V[0]=g;qa(f,V,w,O,S);g=f[0];f.length=V.length=0;return g};n.convertToFeatureSet=function(g){const {objectIdFieldName:w,spatialReference:O,transform:S,fields:ba,hasM:W,hasZ:ka,features:la,geometryType:na,exceededTransferLimit:ua,uniqueIdField:ta,queryGeometry:xa,queryGeometryType:Ba}=g;g=qa([],la,na,ka,W);const Ea=ja(xa,Ba,!1,!1);g={features:g,fields:ba,geometryType:na,objectIdFieldName:w,spatialReference:O,
uniqueIdField:ta,queryGeometry:Ea};S&&(g.transform=S);ua&&(g.exceededTransferLimit=ua);W&&(g.hasM=W);ka&&(g.hasZ=ka);return g};n.convertToFeatures=qa;n.convertToGeometry=ja;n.convertToMultipoint=U;n.convertToMultipointFeatures=ia;n.convertToPoint=function(g,w,O){return g?w?O?D(g):d(g):O?H(g):u(g):null};n.convertToPolygon=t;n.convertToPolyline=N;n.deltaDecodeGeometry=function(g,w){const O=g.clone(),S=g.coords;g=g.lengths;let ba=0;for(let la=0;la<g.length;la++){const na=g[la];var W=S[w*ba],ka=S[w*ba+
1];for(let ua=1;ua<na;ua++)W+=S[w*(ba+ua)],ka+=S[w*(ba+ua)+1],O.coords[w*(ba+ua)]=W,O.coords[w*(ba+ua)+1]=ka;ba+=na}return O};n.deltaEncodeGeometry=function(g,w){const O=g.clone(),S=g.coords;g=g.lengths;let ba=0;for(let ka=0;ka<g.length;ka++){const la=g[ka];let na=S[w*ba];var W=S[w*ba+1];for(let ua=1;ua<la;ua++){const ta=S[w*(ba+ua)],xa=S[w*(ba+ua)+1];W=xa-W;O.coords[w*(ba+ua)]=ta-na;O.coords[w*(ba+ua)+1]=W;na=ta;W=xa}ba+=la}return O};n.generalizeOptimizedGeometry=function(g,w,O,S,ba,W,ka=O,la=S){g.lengths.length&&
(g.lengths.length=0);g.coords.length&&(g.coords.length=0);if(!w||!w.coords.length)return null;ba=T[ba];const {coords:na,lengths:ua}=w;w=r(O,S);const ta=r(O&&ka,S&&la);O=q(O,S,ka,la);if(!ua.length)return O(g.coords,na,0,0,na[0],na[1]),g.lengths.length&&(g.lengths.length=0),g.coords.length=w,g;S=0;W*=W;for(const xa of ua){if(xa<ba){S+=xa*w;continue}ka=g.coords.length/ta;la=S;const Ba=S+(xa-1)*w;O(g.coords,na,g.coords.length,la,na[la],na[la+1]);wa(g.coords,na,w,W,O,la,Ba);O(g.coords,na,g.coords.length,
Ba,na[Ba],na[Ba+1]);la=g.coords.length/ta-ka;la>=ba?g.lengths.push(la):g.coords.length=ka*ta;S+=xa*w}return g.coords.length?g:null};n.getBoundsOptimizedGeometry=function(g,w,O,S){if(!w||!w.coords||!w.coords.length)return null;O=r(O,S);let ba=S=Number.POSITIVE_INFINITY,W=Number.NEGATIVE_INFINITY,ka=Number.NEGATIVE_INFINITY;if(w&&w.coords){w=w.coords;for(let la=0;la<w.length;la+=O){const na=w[la],ua=w[la+1];S=Math.min(S,na);W=Math.max(W,na);ba=Math.min(ba,ua);ka=Math.max(ka,ua)}}g[0]=S;g[1]=ba;g[2]=
W;g[3]=ka;return g};n.getQuantizedArea=function(g,w){const {coords:O,lengths:S}=g;let ba=g=0;for(let W=0;W<S.length;W++)ba+=ea(O,g,S[W],w),g+=W;return Math.abs(ba)};n.getQuantizedBoundsOptimizedGeometry=function(g,w,O,S){O=r(O,S);const {lengths:ba,coords:W}=w;S=w=Number.POSITIVE_INFINITY;let ka=Number.NEGATIVE_INFINITY,la=Number.NEGATIVE_INFINITY,na=0;for(const ua of ba){let ta=W[na],xa=W[na+1];w=Math.min(ta,w);S=Math.min(xa,S);ka=Math.max(ta,ka);la=Math.max(xa,la);na+=O;for(let Ba=1;Ba<ua;Ba++,na+=
O){const Ea=W[na],Ka=W[na+1];ta+=Ea;xa+=Ka;0>Ea&&(w=Math.min(w,ta));0<Ea&&(ka=Math.max(ka,ta));0>Ka?S=Math.min(S,xa):0<Ka&&(la=Math.max(la,xa))}}g[0]=w;g[1]=S;g[2]=ka;g[3]=la;return g};n.getSignedQuantizedRingArea=ea;n.quantizeOptimizedFeatureSet=function(g,w){const {geometryType:O,features:S,hasM:ba,hasZ:W}=w;if(!g)return w;for(let ka=0;ka<S.length;ka++){const la=S[ka],na=la.weakClone();na.geometry=new l;pa(na.geometry,la.geometry,ba,W,O,g);la.centroid&&(na.centroid=new l,pa(na.centroid,la.centroid,
ba,W,"esriGeometryPoint",g));S[ka]=na}w.transform=g;return w};n.quantizeOptimizedGeometry=pa;n.quantizeX=E;n.quantizeY=ha;n.removeCollinearVectices=function(g,w,O,S,ba){if(!w||!w.coords||!w.coords.length)return null;O=T[O];const {coords:W,lengths:ka}=w;w=q(S,ba,S,ba);S=r(S,ba);let la=ba=0,na=0,ua=0;for(const Ba of ka){la=ua;w(g.coords,W,la,ba,W[ba],W[ba+1]);ba+=S;var ta=W[ba];let Ea=W[ba+1],Ka=ta,Ga=Ea;var xa=Ea/ta;la+=S;w(g.coords,W,la,ba,Ka,Ga);ba+=S;for(let Ja=2;Ja<Ba;Ja++){ta=W[ba];Ea=W[ba+1];
const Ha=Ea/ta,Ia=xa===Ha||!isFinite(xa)&&!isFinite(Ha);xa=Ia&&isFinite(Ha)?0<=xa&&0<=Ha||0>=xa&&0>=Ha:0<=Ga&&0<=Ea||0>=Ga&&0>=Ea;Ia&&xa?(Ka+=ta,Ga+=Ea):(Ka=ta,Ga=Ea,la+=S);w(g.coords,W,la,ba,Ka,Ga);ba+=S;xa=Ha}la+=S;ta=(la-ua)/S;ta>=O&&(g.lengths[na]=ta,ua=la,na++)}g.coords.length>ua&&(g.coords.length=ua);g.lengths.length>na&&(g.lengths.length=na);return g.coords.length&&g.lengths.length?g:null};n.removeZMValues=function(g,w,O,S,ba,W){const ka=r(O,S);O=q(O,S,ba,W);S=w.coords;g.coords.length=0;g.lengths.length=
0;g.lengths.push(...w.lengths);for(w=0;w<S.length;w+=ka)O(g.coords,S,g.coords.length,w,S[w],S[w+1]);return g};n.unquantizeOptimizedFeatureSet=function(g){const {transform:w,features:O,hasM:S,hasZ:ba}=g;if(!w)return g;for(const W of O)W.geometry&&Ca(W.geometry,W.geometry,S,ba,w),W.centroid&&Ca(W.centroid,W.centroid,S,ba,w);g.transform=null;return g};n.unquantizeOptimizedGeometry=Ca;n.unquantizeX=fa;n.unquantizeY=A;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/graphics/OptimizedFeature":function(){define(["../../chunks/_rollupPluginBabelHelpers"],
function(n){return function(){function e(Z=null,K={},p,I){this.geohashY=this.geohashX=this.displayId=0;this.geometry=Z;K&&(this.attributes=K);p&&(this.centroid=p);null!=I&&(this.objectId=I)}e.prototype.weakClone=function(){const Z=new e(this.geometry,this.attributes,this.centroid,this.objectId);Z.displayId=this.displayId;Z.geohashX=this.geohashX;Z.geohashY=this.geohashY;return Z};n._createClass(e,[{key:"hasGeometry",get:function(){return!(!this.geometry||!this.geometry.coords||!this.geometry.coords.length)}}]);
return e}()})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(function(){return function(){function n(){this.spatialReference=this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=null;this.hasM=this.hasZ=!1;this.features=[];this.fields=[];this.transform=null;this.exceededTransferLimit=!1;this.queryGeometry=this.queryGeometryType=this.uniqueIdField=null}n.prototype.weakClone=function(){const e=new n;e.objectIdFieldName=this.objectIdFieldName;
e.globalIdFieldName=this.globalIdFieldName;e.geohashFieldName=this.geohashFieldName;e.geometryProperties=this.geometryProperties;e.geometryType=this.geometryType;e.spatialReference=this.spatialReference;e.hasZ=this.hasZ;e.hasM=this.hasM;e.features=this.features;e.fields=this.fields;e.transform=this.transform;e.exceededTransferLimit=this.exceededTransferLimit;e.uniqueIdField=this.uniqueIdField;e.queryGeometry=this.queryGeometry;e.queryGeometryType=this.queryGeometryType;return e};return n}()})},"esri/layers/graphics/OptimizedGeometry":function(){define(["../../chunks/_rollupPluginBabelHelpers"],
function(n){return function(){function e(K=[],p=[],I=!1){this.lengths=null!=K?K:[];this.coords=null!=p?p:[];this.hasIndeterminateRingOrder=I}var Z=e.prototype;Z.forEachVertex=function(K){let p=0;this.lengths.length||K(this.coords[0],this.coords[1]);for(let I=0;I<this.lengths.length;I++){const l=this.lengths[I];for(let r=0;r<l;r++)K(this.coords[2*(r+p)],this.coords[2*(r+p)+1]);p+=l}};Z.clone=function(){return new e(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)};n._createClass(e,
[{key:"isPoint",get:function(){return 0===this.lengths.length}}]);return e}()})},"esri/layers/support/FieldsIndex":function(){define(function(){return function(){function n(Z){this.fields=Z;this._fieldsMap=new Map;this._dateFieldsSet=new Set;this.dateFields=[];if(Z){var K=[];for(const p of Z)if(Z=p&&p.name){const I=Z.toLowerCase().trim();this._fieldsMap.set(Z,p);this._fieldsMap.set(I,p);K.push(I);if("date"===p.type||"esriFieldTypeDate"===p.type)this.dateFields.push(p),this._dateFieldsSet.add(p)}K.sort();
this.uid=K.join(",")}}var e=n.prototype;e.destroy=function(){this._fieldsMap.clear()};e.has=function(Z){return null!=this.get(Z)};e.get=function(Z){return null!=Z?this._fieldsMap.get(Z)||this._fieldsMap.get(Z.toLowerCase().trim()):void 0};e.isDateField=function(Z){return this._dateFieldsSet.has(this.get(Z))};e.normalizeFieldName=function(Z){if(Z=this.get(Z))return Z.name};return n}()})},"esri/layers/graphics/objectIdUtils":function(){define(["exports"],function(n){n.findLastObjectIdFromFeatures=function(e,
Z){let K=0;for(const I of Z){var p;Z=null==(p=I.attributes)?void 0:p[e];"number"===typeof Z&&isFinite(Z)&&(K=Math.max(K,Z))}return K};n.initialObjectId=1;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/graphics/sources/support/clientSideDefaults":function(){define(["exports","../../../../core/has","../../../../core/lang","../../../../symbols/support/defaultsJSON"],function(n,e,Z,K){n.createDefaultAttributesFunction=function(p,I){if(e("csp-restrictions"))return()=>({[I]:null,...p});
try{let l=`this.${I} = null;`;for(const q in p){const E=q.indexOf(".")?`["${q}"]`:`.${q}`;l+=`this${E} = ${JSON.stringify(p[q])};`}const r=new Function(l);return()=>new r}catch(l){return()=>({[I]:null,...p})}};n.createDefaultTemplate=function(p={}){return[{name:"New Feature",description:"",prototype:{attributes:Z.clone(p)}}]};n.createDrawingInfo=function(p){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===p||"esriGeometryMultipoint"===p?K.defaultPointSymbolJSON:"esriGeometryPolyline"===
p?K.defaultPolylineSymbolJSON:K.defaultPolygonSymbolJSON}}};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/symbols/support/defaultsJSON":function(){define(["exports"],function(n){const e=[252,146,31,255],Z={type:"esriSMS",style:"esriSMSCircle",size:6,color:e,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},K={type:"esriSLS",style:"esriSLSSolid",width:.75,color:e};n.defaultColor=e;n.defaultOutlineColor=[153,153,153,255];n.defaultPointSymbolJSON=Z;n.defaultPolygonSymbolJSON=
{type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}};n.defaultPolylineSymbolJSON=K;n.defaultTextSymbolJSON={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0};n.errorPointSymbolJSON={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,
size:10.5};n.errorPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null};n.errorPolylineSymbolJSON={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/graphics/data/projectionSupport":function(){define(["exports","../../../geometry/support/spatialReferenceUtils","../../../geometry/support/webMercatorUtils","../../../geometry/projection","../../../geometry/geometryAdapters/json"],function(n,
e,Z,K,p){function I(A,u){if(!u)return null;if("x"in u){var B={x:0,y:0};[B.x,B.y]=A(u.x,u.y,q);null!=u.z&&(B.z=u.z);null!=u.m&&(B.m=u.m);return B}if("xmin"in u)return B={xmin:0,ymin:0,xmax:0,ymax:0},[B.xmin,B.ymin]=A(u.xmin,u.ymin,q),[B.xmax,B.ymax]=A(u.xmax,u.ymax,q),u.hasZ&&(B.zmin=u.zmin,B.zmax=u.zmax,B.hasZ=!0),u.hasM&&(B.mmin=u.mmin,B.mmax=u.mmax,B.hasM=!0),B;if("rings"in u)return{rings:l(u.rings,A),hasM:u.hasM,hasZ:u.hasZ};if("paths"in u)return{paths:l(u.paths,A),hasM:u.hasM,hasZ:u.hasZ};if("points"in
u)return{points:r(u.points,A),hasM:u.hasM,hasZ:u.hasZ}}function l(A,u){const B=[];for(const d of A)B.push(r(d,u));return B}function r(A,u){const B=[];for(const d of A)A=u(d[0],d[1],[0,0]),B.push(A),2<d.length&&A.push(d[2]),3<d.length&&A.push(d[3]);return B}const q=[0,0],E=I.bind(null,Z.lngLatToXY),ha=I.bind(null,Z.xyToLngLat),fa=new (function(){function A(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}var u=A.prototype;u.push=async function(B,d,m){B&&B.length&&d&&m&&e.equals(d,
m);const H={geometries:B,inSpatialReference:d,outSpatialReference:m,resolve:null};this._jobs.push(H);return new Promise(M=>{H.resolve=M;null===this._timer&&(this._timer=setTimeout(this._process,10))})};u._process=function(){this._timer=null;const B=this._jobs.shift();if(B){var {geometries:d,inSpatialReference:m,outSpatialReference:H,resolve:M}=B;Z.canProject(m,H)?e.isWebMercator(H)?M(d.map(E)):M(d.map(ha)):M(K.projectMany(p.jsonAdapter,d,m,H,null));0<this._jobs.length&&(this._timer=setTimeout(this._process,
10))}};return A}());n.checkProjectionSupport=async function(A,u){u&&(A=Array.isArray(A)?A.map(B=>{var d;return null==(d=B.geometry)?void 0:d.spatialReference}):[A],await K.initializeProjection(A.map(B=>({source:B,dest:u}))))};n.project=function(A,u,B){if(!A)return A;B||(B=u,u=A.spatialReference);return e.isValid(u)&&e.isValid(B)&&!e.equals(u,B)?Z.canProject(u,B)?e.isWebMercator(B)?E(A):ha(A):K.projectMany(p.jsonAdapter,[A],u,B,null)[0]:A};n.projectMany=async function(A,u,B){return fa.push(A,u,B)};
Object.defineProperty(n,"__esModule",{value:!0})})},"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/maybe ../core/Error ../core/promiseUtils ./support/spatialReferenceUtils ./support/Ellipsoid ./Point ./Extent ./Multipoint ./Polygon ./Polyline ../core/mathUtils ../chunks/vec3f64 ../chunks/vec3 ./projectionEllipsoid ../core/unitUtils ../chunks/mat4 ../chunks/pe ./support/aaBoundingRect ./support/geodesicConstants ./support/GeographicTransformation".split(" "),
function(n,e,Z,K,p,I,l,r,q,E,ha,fa,A,u,B,d,m,H,M,D,v,L,aa){function ia(){return!!Ga&&D.isLoaded()}function U(Y){K.isNone(Ha)&&(Ha=Promise.all([D.load(),(new Promise(function(da,ca){n(["../chunks/geometryEngineBase"],da,ca)})).then(function(da){return da.geometryEngineBase}),new Promise(function(da,ca){n(["./geometryAdapters/hydrated"],da,ca)})]));return Ha.then(([,da,{hydratedAdapter:ca}])=>{I.throwIfAborted(Y);Ja=ca;Ga=da.default;Ga._enableProjection(D.pe)})}function F(Y,da,ca,oa,Aa=null){if(K.isNone(ca)||
K.isNone(oa))return da;if(N(ca,oa,Aa))return da.map(Da=>Q(Da,ca,oa));if(K.isNone(Aa)){const Da=aa.cacheKey(ca,oa);void 0!==Ia[Da]?Aa=Ia[Da]:(Aa=G(ca,oa,null),K.isNone(Aa)&&(Aa=new aa),Ia[Da]=Aa)}if(K.isNone(Ga))throw new Sa;return Ga._project(Y,da,ca,oa,Aa)}function G(Y,da,ca=null){if(K.isNone(Ga))throw new Sa;if(K.isNone(Y)||K.isNone(da))return null;Y=Ga._getTransformation(Ja,Y,da,ca,null==ca?void 0:ca.spatialReference);return null!==Y?aa.fromGE(Y):null}function N(Y,da,ca){return ca?!1:l.equals(Y,
da)?!0:l.isValid(Y)&&l.isValid(da)&&!!Ba(Y,da,cb)}function Q(Y,da,ca){if(!Y)return Y;if("x"in Y){var oa=new q;return P(Y,da,oa,ca)?oa:null}return"xmin"in Y?(oa=new E,R(Y,da,oa,ca)?oa:null):"rings"in Y?(oa=new fa,z(Y,da,oa,ca)?oa:null):"paths"in Y?(oa=new A,h(Y,da,oa,ca)?oa:null):"points"in Y?(oa=new ha,t(Y,da,oa,ca)?oa:null):null}function P(Y,da,ca,oa,Aa=0){Qa[0]=Y.x;Qa[1]=Y.y;const Da=Y.z;Qa[2]=void 0!==Da?Da:Aa;if(!pa(Qa,da,0,Qa,oa,0,1))return!1;ca.x=Qa[0];ca.y=Qa[1];ca.spatialReference=oa;void 0===
Da?(ca.z=void 0,ca.hasZ=!1):(ca.z=Qa[2],ca.hasZ=!0);void 0===Y.m?(ca.m=void 0,ca.hasM=!1):(ca.m=Y.m,ca.hasM=!0);return!0}function t(Y,da,ca,oa,Aa=0){const {points:Da,hasZ:Na,hasM:Oa}=Y;Y=[];const ab=Da.length,Za=[];for(var $a of Da)Za.push($a[0],$a[1],Na?$a[2]:Aa);if(!pa(Za,da,0,Za,oa,0,ab))return!1;for(da=0;da<ab;++da){Aa=3*da;$a=Za[Aa];const gb=Za[Aa+1];Na&&Oa?Y.push([$a,gb,Za[Aa+2],Da[da][3]]):Na?Y.push([$a,gb,Za[Aa+2]]):Oa?Y.push([$a,gb,Da[da][2]]):Y.push([$a,gb])}ca.points=Y;ca.spatialReference=
oa;ca.hasZ=Na;ca.hasM=Oa;return!0}function h(Y,da,ca,oa,Aa=0){const {paths:Da,hasZ:Na,hasM:Oa}=Y;Y=[];if(!wa(Da,Na,Oa,da,Y,oa,Aa))return!1;ca.paths=Y;ca.spatialReference=oa;ca.hasZ=Na;ca.hasM=Oa;return!0}function z(Y,da,ca,oa,Aa=0){const {rings:Da,hasZ:Na,hasM:Oa}=Y;Y=[];if(!wa(Da,Na,Oa,da,Y,oa,Aa))return!1;ca.rings=Y;ca.spatialReference=oa;ca.hasZ=Na;ca.hasM=Oa;return!0}function R(Y,da,ca,oa,Aa=0){const {xmin:Da,ymin:Na,xmax:Oa,ymax:ab,hasZ:Za,hasM:$a}=Y;if(!J(Da,Na,Za?Y.zmin:Aa,da,Qa,oa))return!1;
ca.xmin=Qa[0];ca.ymin=Qa[1];Za&&(ca.zmin=Qa[2]);if(!J(Oa,ab,Za?Y.zmax:Aa,da,Qa,oa))return!1;ca.xmax=Qa[0];ca.ymax=Qa[1];Za&&(ca.zmax=Qa[2]);$a&&(ca.mmin=Y.mmin,ca.mmax=Y.mmax);ca.spatialReference=oa;return!0}function J(Y,da,ca,oa,Aa,Da){Ta[0]=Y;Ta[1]=da;Ta[2]=ca;return pa(Ta,oa,0,Aa,Da,0,1)}function ja(Y,da,ca,oa){if(K.isNone(da)||K.isNone(oa)||2>Y.length)return!1;2===Y.length&&(Ta[0]=Y[0],Ta[1]=Y[1],Ta[2]=0,Y=Ta);return pa(Y,da,0,ca,oa,0,1)}function qa(Y,da,ca){K.isNone(da)?Y=!1:(da=ea(da,fb),da=
ra[da][6],K.isNone(da)?Y=!1:(da(Y,0,Ta,0),ca!==Ta&&(ca[0]=Ta[0],ca[1]=Ta[1],2<ca.length&&(ca[2]=Ta[2])),Y=!0));return Y}function pa(Y,da,ca,oa,Aa,Da,Na=1){da=Ba(da,Aa,cb);if(K.isNone(da))return!1;if(da===x){if(Y===oa&&ca===Da)return!0;Na=ca+3*Na;for(let Oa=ca,ab=Da;Oa<Na;Oa++,ab++)oa[ab]=Y[Oa];return!0}Na=ca+3*Na;for(let Oa=ca,ab=Da;Oa<Na;Oa+=3,ab+=3)da(Y,Oa,oa,ab);return!0}function wa(Y,da,ca,oa,Aa,Da,Na=0){const Oa=[];for(const ab of Y)for(const Za of ab)Oa.push(Za[0],Za[1],da?Za[2]:Na);if(!pa(Oa,
oa,0,Oa,Da,0,Oa.length/3))return!1;oa=0;Aa.length=0;for(const ab of Y){Y=[];for(const Za of ab)da&&ca?Y.push([Oa[oa++],Oa[oa++],Oa[oa++],Za[3]]):da?Y.push([Oa[oa++],Oa[oa++],Oa[oa++]]):(ca?Y.push([Oa[oa++],Oa[oa++],Za[2]]):Y.push([Oa[oa++],Oa[oa++]]),oa++);Aa.push(Y)}return!0}function Ca(Y,da,ca){const oa=Math.sin(da);da=Math.cos(da);const Aa=Math.sin(Y);Y=Math.cos(Y);ca[0]=-oa;ca[4]=-Aa*da;ca[8]=Y*da;ca[12]=0;ca[1]=da;ca[5]=-Aa*oa;ca[9]=Y*oa;ca[13]=0;ca[2]=0;ca[6]=Y;ca[10]=Aa;ca[14]=0;ca[3]=0;ca[7]=
0;ca[11]=0;ca[15]=1;return ca}function ea(Y,da){if(da.spatialReference===Y)return da.spatialReferenceId;da.spatialReference=Y;"metersPerUnit"in da&&(da.metersPerUnit=H.getMetersPerUnitForSR(Y,1));return Y.wkt===m.SphericalECEFSpatialReference.wkt?da.spatialReferenceId=1:l.isWGS84(Y)?da.spatialReferenceId=2:l.isWebMercator(Y)?da.spatialReferenceId=3:Y.wkt===m.WGS84ECEFSpatialReference.wkt?da.spatialReferenceId=4:4490===Y.wkid?da.spatialReferenceId=5:Y.wkt===m.SphericalPCPFMars.wkt?da.spatialReferenceId=
7:Y.wkt===m.SphericalPCPFMoon.wkt?da.spatialReferenceId=9:l.isMars(Y)?da.spatialReferenceId=8:l.isMoon(Y)?da.spatialReferenceId=10:da.spatialReferenceId=0}function x(Y,da,ca,oa){Y!==ca&&(ca[oa++]=Y[da++],ca[oa++]=Y[da++],ca[oa]=Y[da])}function T(Y,da,ca,oa){ca[oa++]=Ua*(Y[da++]/r.earth.radius);ca[oa++]=Ua*(Math.PI/2-2*Math.atan(Math.exp(-1*Y[da++]/r.earth.radius)));ca[oa]=Y[da]}function ma(Y,da,ca,oa){T(Y,da,ca,oa);w(ca,oa,ca,oa)}function ya(Y,da,ca,oa){T(Y,da,ca,oa);na(ca,oa,ca,oa)}function za(Y,
da,ca,oa,Aa){var Da=.4999999*Math.PI;Da=u.clamp(Va*Y[da+1],-Da,Da);Da=Math.sin(Da);ca[oa++]=Va*Y[da]*Aa.radius;ca[oa++]=Aa.halfSemiMajorAxis*Math.log((1+Da)/(1-Da));ca[oa]=Y[da+2]}function b(Y,da,ca,oa){za(Y,da,ca,oa,r.earth)}function f(Y,da,ca,oa,Aa){Aa+=Y[da+2];const Da=Va*Y[da+1];Y=Va*Y[da];da=Math.cos(Da);ca[oa++]=Math.cos(Y)*da*Aa;ca[oa++]=Math.sin(Y)*da*Aa;ca[oa]=Math.sin(Da)*Aa}function V(Y,da,ca,oa){f(Y,da,ca,oa,r.moon.radius)}function g(Y,da,ca,oa){f(Y,da,ca,oa,r.mars.radius)}function w(Y,
da,ca,oa){f(Y,da,ca,oa,r.earth.radius)}function O(Y,da,ca,oa,Aa){var Da=Y[da];const Na=Y[da+1];da=Y[da+2];Y=Math.sqrt(Da*Da+Na*Na+da*da);da=u.asinClamped(da/(0===Y?1:Y));Da=Math.atan2(Na,Da);ca[oa++]=Ua*Da;ca[oa++]=Ua*da;ca[oa]=Y-Aa}function S(Y,da,ca,oa){O(Y,da,ca,oa,r.moon.radius)}function ba(Y,da,ca,oa){O(Y,da,ca,oa,r.mars.radius)}function W(Y,da,ca,oa){O(Y,da,ca,oa,r.earth.radius)}function ka(Y,da,ca,oa){W(Y,da,ca,oa);b(ca,oa,ca,oa)}function la(Y,da,ca,oa){W(Y,da,ca,oa);na(ca,oa,ca,oa)}function na(Y,
da,ca,oa){{var Aa=r.earth;const Na=Va*Y[da];var Da=Va*Y[da+1];Y=Y[da+2];da=Math.sin(Da);Da=Math.cos(Da);const Oa=Aa.radius/Math.sqrt(1-Aa.eccentricitySquared*da*da);ca[oa++]=(Oa+Y)*Da*Math.cos(Na);ca[oa++]=(Oa+Y)*Da*Math.sin(Na);ca[oa++]=(Oa*(1-Aa.eccentricitySquared)+Y)*da}}function ua(Y,da,ca,oa){var Aa=L.earthEllipsoidConstants,Da=Y[da],Na=Y[da+1];Y=Y[da+2];let Oa;da=Math.abs(Y);var ab=Da*Da+Na*Na;var Za=Math.sqrt(ab);var $a=ab+Y*Y;var gb=Math.sqrt($a);Da=Math.atan2(Na,Da);var kb=Y*Y/$a;$a=ab/
$a;Na=Aa.a2/gb;ab=Aa.a3-Aa.a4/gb;.3<$a?(kb=da/gb*(1+$a*(Aa.a1+Na+kb*ab)/gb),gb=Math.asin(kb),Na=kb*kb,$a=Math.sqrt(1-Na)):($a=Za/gb*(1-kb*(Aa.a5-Na-$a*ab)/gb),gb=Math.acos($a),Na=1-$a*$a,kb=Math.sqrt(Na));Oa=1-r.earth.eccentricitySquared*Na;Na=r.earth.radius/Math.sqrt(Oa);Aa=Aa.a6*Na;Na=Za-Na*$a;ab=da-Aa*kb;da=$a*Na+kb*ab;Za=$a*ab-kb*Na;Aa=Za/(Aa/Oa+da);gb+=Aa;0>Y&&(gb=-gb);ca[oa++]=Ua*Da;ca[oa++]=Ua*gb;ca[oa]=da+Za*Aa/2}function ta(Y,da,ca,oa){ua(Y,da,ca,oa);w(ca,oa,ca,oa)}function xa(Y,da,ca,oa){ua(Y,
da,ca,oa);b(ca,oa,ca,oa)}function Ba(Y,da,ca=Ka()){return K.isNone(Y)||K.isNone(da)?null:Ea(Y,da,ca).projector}function Ea(Y,da,ca){if(K.isNone(Y)||K.isNone(da)||ca.source.spatialReference===Y&&ca.dest.spatialReference===da)return ca;const oa=ea(Y,ca.source),Aa=ea(da,ca.dest);0===oa&&0===Aa?l.equals(Y,da)?ca.projector=x:ca.projector=null:ca.projector=ra[oa][Aa];return ca}function Ka(){return{source:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:0,
metersPerUnit:1},projector:x}}let Ga=null,Ja=null,Ha=null,Ia={},Sa=function(Y){function da(){return Y.call(this,"projection:not-loaded","projection engine not fully loaded yet, please call load()")||this}Z._inheritsLoose(da,Y);return da}(p);const ra={[2]:{[5]:null,[8]:null,[10]:null,[6]:x,[1]:w,[7]:null,[9]:null,[0]:null,[3]:b,[2]:x,[4]:na},[5]:{[5]:x,[8]:null,[10]:null,[6]:x,[1]:w,[7]:null,[9]:null,[0]:null,[3]:null,[2]:null,[4]:na},[8]:{[5]:null,[8]:x,[10]:null,[6]:null,[1]:null,[7]:g,[9]:null,
[0]:null,[3]:null,[2]:null,[4]:null},[10]:{[5]:null,[8]:null,[10]:x,[6]:null,[1]:null,[7]:null,[9]:V,[0]:null,[3]:null,[2]:null,[4]:null},[3]:{[5]:null,[8]:null,[10]:null,[6]:T,[1]:ma,[7]:null,[9]:null,[0]:null,[3]:x,[2]:T,[4]:ya},[4]:{[5]:ua,[8]:null,[10]:null,[6]:ua,[1]:ta,[7]:null,[9]:null,[0]:null,[3]:xa,[2]:ua,[4]:x},[1]:{[5]:W,[8]:null,[10]:null,[6]:W,[1]:x,[7]:null,[9]:null,[0]:null,[3]:ka,[2]:W,[4]:la},[7]:{[5]:null,[8]:ba,[10]:null,[6]:null,[1]:null,[7]:x,[9]:null,[0]:null,[3]:null,[2]:null,
[4]:null},[9]:{[5]:null,[8]:null,[10]:S,[6]:null,[1]:null,[7]:null,[9]:x,[0]:null,[3]:null,[2]:null,[4]:null},[0]:{[5]:null,[8]:null,[10]:null,[6]:null,[1]:null,[7]:null,[9]:null,[0]:x,[3]:null,[2]:null,[4]:null},[6]:{[5]:null,[8]:null,[10]:null,[6]:x,[1]:w,[7]:null,[9]:null,[0]:null,[3]:null,[2]:x,[4]:na}},fb={spatialReference:null,spatialReferenceId:0},hb={spatialReference:null,spatialReferenceId:0},cb=Ka(),a=Ka(),Va=u.deg2rad(1),Ua=u.rad2deg(1),Ta=B.create(),jb=B.create(),rb=B.create(),Qa=B.create(),
xb=B.create();e.canProjectToWGS84ComparableLonLat=function(Y){if(K.isNone(Y))return!1;Y=ea(Y,fb);return!!ra[Y][6]};e.canProjectWithoutEngine=N;e.computeLatLonToENURotation=Ca;e.computeLinearTransformation=function(Y,da,ca,oa){if(K.isNone(Y)||K.isNone(oa))return!1;var Aa=ea(Y,fb),Da=ea(oa,hb);if(Aa===Da&&1!==Da&&(0!==Aa||l.equals(Y,oa)))return M.identity(ca),M.translate(ca,ca,da),!0;if(1===Da||7===Da||9===Da){oa=Y=0;if(1===Da){Aa=ra[Aa][6];Da=ra[6][Da];if(K.isNone(Aa)||K.isNone(Da))return!1;Aa(da,
0,jb,0);Da(jb,0,rb,0);Y=Va*jb[0];oa=Va*jb[1]}else if(7===Da||9===Da){Da=ra[Aa][Da];if(K.isNone(Da))return!1;Da(da,0,rb,0);Y=Va*da[0];oa=Va*da[1]}Ca(oa,Y,ca);ca[12]=rb[0];ca[13]=rb[1];ca[14]=rb[2];return!0}if(3===Da&&(2===Aa||1===Aa)){Da=ra[Aa][6];if(K.isNone(Da))return!1;Da(da,0,jb,0);da=Va*jb[1];b(jb,0,rb,0);M.identity(ca);M.translate(ca,ca,rb);da=1/Math.cos(da);M.scale(ca,ca,[da,da,1]);return!0}return!1};e.getProjectorName=function(Y,da){switch(Ba(Y,da,cb)){case x:return"copy3";case w:return"wgs84ToSphericalECEF";
case b:return"wgs84ToWebMercator";case na:return"wgs84ToWGS84ECEF";case T:return"webMercatorToWGS84";case ma:return"webMercatorToSphericalECEF";case ya:return"webMercatorToWGS84ECEF";case ua:return"wgs84ECEFToWGS84";case ta:return"wgs84ECEFToSphericalECEF";case xa:return"wgs84ECEFToWebMercator";case W:return"sphericalECEFToWGS84";case ka:return"sphericalECEFToWebMercator";case ba:return"sphericalMarsPCPFToMars2000";case S:return"sphericalMoonPCPFToMoon2000";case la:return"sphericalECEFToWGS84ECEF";
case g:return"mars2000ToSphericalPCPF";case V:return"moon2000ToSphericalPCPF";default:return null}};e.getTransformation=G;e.getTransformations=function(Y,da,ca=null){if(K.isNone(Ga))throw new Sa;Y=Ga._getTransformationBySuitability(Ja,Y,da,ca,null==ca?void 0:ca.spatialReference);if(null!==Y){da=[];for(const oa of Y)da.push(aa.fromGE(oa));return da}return[]};e.initializeProjection=async function(Y,da){if(!ia())for(const {source:ca,dest:oa,geographicTransformation:Aa}of Y)if(!N(ca,oa,Aa))return U(da)};
e.isLoaded=ia;e.isSupported=function(){return!0};e.load=U;e.localLinearScaleFactors=function(Y,da,ca,oa){if(K.isNone(da)||K.isNone(oa))return!1;const Aa=ea(da,fb);var Da=ea(oa,hb);if(Aa===Da&&0!==Aa||l.equals(da,oa))return ca[0]=1,ca[1]=1,ca[2]=1,!0;if(1===Aa){da=d.length(Y);Y=da/Math.sqrt(Y[0]*Y[0]+Y[1]*Y[1]);da/=r.earth.radius;if(3===Da)return ca[0]=Y*da,ca[1]=Y*da,ca[2]=1,!0;if(2===Da||5===Da)return Da=180/(r.earth.radius*Math.PI),ca[0]=Da*Y*da,ca[1]=Da*da,ca[2]=1,!0}return!1};e.lonLatToSphericalPCPF=
function(Y,da,ca,oa,Aa=0){oa+=Aa;Aa=Math.cos(ca);Y[0]=Math.cos(da)*Aa*oa;Y[1]=Math.sin(da)*Aa*oa;Y[2]=Math.sin(ca)*oa};e.lonLatToWebMercatorComparable=za;e.project=function(Y,da,ca=null){return Array.isArray(Y)?0===Y.length?[]:F(Ja,Y,Y[0].spatialReference,da,ca):F(Ja,[Y],Y.spatialReference,da,ca)[0]};e.projectBoundingRect=function(Y,da,ca,oa){if(null==Y)return!1;if(l.equals(da,oa))return v.set(ca,Y),!0;Ta[0]=Y[0];Ta[1]=Y[1];Ta[2]=0;if(!pa(Ta,da,0,Ta,oa,0,1))return!1;ca[0]=Ta[0];ca[1]=Ta[1];Ta[0]=
Y[2];Ta[1]=Y[3];Ta[2]=0;if(!pa(Ta,da,0,Ta,oa,0,1))return!1;ca[2]=Ta[0];ca[3]=Ta[1];return!0};e.projectBoundingSphere=function(Y,da,ca,oa){if(K.isNone(da)||K.isNone(oa))return!1;da=Ea(da,oa,a);if(da.projector===x)return ca[0]=Y[0],ca[1]=Y[1],ca[2]=Y[2],ca[3]=Y[3],!0;if(K.isNone(da.projector))return!1;const {source:Aa,dest:Da}=da;if(3===Da.spatialReferenceId){da=ra[Aa.spatialReferenceId][2];if(K.isNone(da))return!1;da(Y,0,jb,0);da=Math.abs(Va*jb[1])+Math.asin(Y[3]/(r.earth.radius+Y[2]));b(jb,0,ca,0);
ca[3]=da>.9999*Math.PI?Number.MAX_VALUE:1/Math.cos(da)*Y[3];return!0}da.projector(Y,0,ca,0);ca[3]=Y[3]*Aa.metersPerUnit/Da.metersPerUnit;return!0};e.projectBuffer=pa;e.projectDirection=function(Y,da,ca,oa,Aa){d.copy(Qa,Y);d.add(xb,Y,da);ja(Qa,ca,Qa,Aa);ja(xb,ca,xb,Aa);d.subtract(oa,xb,Qa);d.normalize(oa,oa)};e.projectExtent=function(Y,da,ca=da.spatialReference,oa=0){return K.isNone(ca)?!1:R(Y,Y.spatialReference,da,ca,oa)};e.projectMany=F;e.projectMultipoint=function(Y,da,ca=da.spatialReference,oa=
0){return K.isNone(ca)?!1:t(Y,Y.spatialReference,da,ca,oa)};e.projectPoint=function(Y,da,ca=da.spatialReference,oa=0){return K.isNone(ca)?!1:P(Y,Y.spatialReference,da,ca,oa)};e.projectPointToVector=function(Y,da,ca,oa=0){Qa[0]=Y.x;Qa[1]=Y.y;const Aa=Y.z;Qa[2]=void 0!==Aa?Aa:oa;return pa(Qa,Y.spatialReference,0,da,ca,0,1)};e.projectPointToWGS84ComparableLonLat=function(Y,da){Qa[0]=Y.x;Qa[1]=Y.y;const ca=Y.z;Qa[2]=void 0!==ca?ca:0;return qa(Qa,Y.spatialReference,da)};e.projectPolygon=function(Y,da,
ca=da.spatialReference,oa=0){return K.isNone(ca)?!1:z(Y,Y.spatialReference,da,ca,oa)};e.projectPolyline=function(Y,da,ca=da.spatialReference,oa=0){return K.isNone(ca)?!1:h(Y,Y.spatialReference,da,ca,oa)};e.projectVectorToDehydratedPoint=function(Y,da,ca){return pa(Y,da,0,Qa,ca.spatialReference,0,1)?(ca.x=Qa[0],ca.y=Qa[1],ca.z=Qa[2],ca):null};e.projectVectorToPoint=function(Y,da,ca){if(K.isNone(da)||K.isNone(ca))return null;const oa=new q({spatialReference:ca});return pa(Y,da,0,Qa,ca,0,1)?(oa.x=Qa[0],
oa.y=Qa[1],oa.z=Qa[2],oa):null};e.projectVectorToVector=ja;e.projectVectorToWGS84ComparableLonLat=qa;e.projectXYZToVector=J;e.sphericalPCPFtoLonLatElevation=O;e.unload=function(){Ha=Ja=Ga=null;Ia={}};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/chunks/vec3f64":function(){define(["exports"],function(n){function e(){return[0,0,0]}function Z(H){return[H[0],H[1],H[2]]}function K(H,M,D){return[H,M,D]}function p(H){const M=e(),D=Math.min(3,H.length);for(let v=0;v<D;++v)M[v]=H[v];return M}function I(H,
M){return new Float64Array(H,M,3)}function l(){return e()}function r(){return[1,1,1]}function q(){return[1,0,0]}function E(){return[0,1,0]}function ha(){return[0,0,1]}const fa=e(),A=r(),u=q(),B=E(),d=ha();var m=Object.freeze({__proto__:null,create:e,clone:Z,fromValues:K,fromArray:p,createView:I,zeros:l,ones:r,unitX:q,unitY:E,unitZ:ha,ZEROS:fa,ONES:A,UNIT_X:u,UNIT_Y:B,UNIT_Z:d});n.ONES=A;n.UNIT_X=u;n.UNIT_Y=B;n.UNIT_Z=d;n.ZEROS=fa;n.clone=Z;n.create=e;n.createView=I;n.fromArray=p;n.fromValues=K;n.ones=
r;n.unitX=q;n.unitY=E;n.unitZ=ha;n.vec3f64=m;n.zeros=l})},"esri/chunks/vec3":function(){define(["exports","./vec3f64","./common"],function(n,e,Z){function K(x){const T=x[0],ma=x[1];x=x[2];return Math.sqrt(T*T+ma*ma+x*x)}function p(x,T){x[0]=T[0];x[1]=T[1];x[2]=T[2];return x}function I(x,T,ma,ya){x[0]=T;x[1]=ma;x[2]=ya;return x}function l(x,T,ma){x[0]=T[0]+ma[0];x[1]=T[1]+ma[1];x[2]=T[2]+ma[2];return x}function r(x,T,ma){x[0]=T[0]-ma[0];x[1]=T[1]-ma[1];x[2]=T[2]-ma[2];return x}function q(x,T,ma){x[0]=
T[0]*ma[0];x[1]=T[1]*ma[1];x[2]=T[2]*ma[2];return x}function E(x,T,ma){x[0]=T[0]/ma[0];x[1]=T[1]/ma[1];x[2]=T[2]/ma[2];return x}function ha(x,T){x[0]=Math.ceil(T[0]);x[1]=Math.ceil(T[1]);x[2]=Math.ceil(T[2]);return x}function fa(x,T){x[0]=Math.floor(T[0]);x[1]=Math.floor(T[1]);x[2]=Math.floor(T[2]);return x}function A(x,T,ma){x[0]=Math.min(T[0],ma[0]);x[1]=Math.min(T[1],ma[1]);x[2]=Math.min(T[2],ma[2]);return x}function u(x,T,ma){x[0]=Math.max(T[0],ma[0]);x[1]=Math.max(T[1],ma[1]);x[2]=Math.max(T[2],
ma[2]);return x}function B(x,T){x[0]=Math.round(T[0]);x[1]=Math.round(T[1]);x[2]=Math.round(T[2]);return x}function d(x,T,ma){x[0]=T[0]*ma;x[1]=T[1]*ma;x[2]=T[2]*ma;return x}function m(x,T,ma,ya){x[0]=T[0]+ma[0]*ya;x[1]=T[1]+ma[1]*ya;x[2]=T[2]+ma[2]*ya;return x}function H(x,T){const ma=T[0]-x[0],ya=T[1]-x[1];x=T[2]-x[2];return Math.sqrt(ma*ma+ya*ya+x*x)}function M(x,T){const ma=T[0]-x[0],ya=T[1]-x[1];x=T[2]-x[2];return ma*ma+ya*ya+x*x}function D(x){const T=x[0],ma=x[1];x=x[2];return T*T+ma*ma+x*x}
function v(x,T){x[0]=-T[0];x[1]=-T[1];x[2]=-T[2];return x}function L(x,T){x[0]=1/T[0];x[1]=1/T[1];x[2]=1/T[2];return x}function aa(x,T){var ma=T[0];const ya=T[1],za=T[2];ma=ma*ma+ya*ya+za*za;0<ma&&(ma=1/Math.sqrt(ma),x[0]=T[0]*ma,x[1]=T[1]*ma,x[2]=T[2]*ma);return x}function ia(x,T){return x[0]*T[0]+x[1]*T[1]+x[2]*T[2]}function U(x,T,ma){const ya=T[0],za=T[1];T=T[2];const b=ma[0],f=ma[1];ma=ma[2];x[0]=za*ma-T*f;x[1]=T*b-ya*ma;x[2]=ya*f-za*b;return x}function F(x,T,ma,ya){const za=T[0],b=T[1];T=T[2];
x[0]=za+ya*(ma[0]-za);x[1]=b+ya*(ma[1]-b);x[2]=T+ya*(ma[2]-T);return x}function G(x,T,ma,ya,za,b){const f=b*b,V=f*(2*b-3)+1,g=f*(b-2)+b,w=f*(b-1);b=f*(3-2*b);x[0]=T[0]*V+ma[0]*g+ya[0]*w+za[0]*b;x[1]=T[1]*V+ma[1]*g+ya[1]*w+za[1]*b;x[2]=T[2]*V+ma[2]*g+ya[2]*w+za[2]*b;return x}function N(x,T,ma,ya,za,b){var f=1-b,V=f*f;const g=b*b,w=V*f;V*=3*b;f*=3*g;b*=g;x[0]=T[0]*w+ma[0]*V+ya[0]*f+za[0]*b;x[1]=T[1]*w+ma[1]*V+ya[1]*f+za[1]*b;x[2]=T[2]*w+ma[2]*V+ya[2]*f+za[2]*b;return x}function Q(x,T){T=T||1;const ma=
2*Z.RANDOM()*Math.PI,ya=2*Z.RANDOM()-1,za=Math.sqrt(1-ya*ya)*T;x[0]=Math.cos(ma)*za;x[1]=Math.sin(ma)*za;x[2]=ya*T;return x}function P(x,T,ma){const ya=T[0],za=T[1];T=T[2];x[0]=ma[0]*ya+ma[4]*za+ma[8]*T+ma[12];x[1]=ma[1]*ya+ma[5]*za+ma[9]*T+ma[13];x[2]=ma[2]*ya+ma[6]*za+ma[10]*T+ma[14];return x}function t(x,T,ma){const ya=T[0],za=T[1];T=T[2];x[0]=ya*ma[0]+za*ma[3]+T*ma[6];x[1]=ya*ma[1]+za*ma[4]+T*ma[7];x[2]=ya*ma[2]+za*ma[5]+T*ma[8];return x}function h(x,T,ma){const ya=ma[0],za=ma[1],b=ma[2],f=T[0],
V=T[1];T=T[2];let g=za*T-b*V,w=b*f-ya*T,O=ya*V-za*f;ma=2*ma[3];x[0]=f+g*ma+2*(za*O-b*w);x[1]=V+w*ma+2*(b*g-ya*O);x[2]=T+O*ma+2*(ya*w-za*g);return x}function z(x,T,ma,ya){const za=[],b=[];za[0]=T[0]-ma[0];za[1]=T[1]-ma[1];za[2]=T[2]-ma[2];b[0]=za[0];b[1]=za[1]*Math.cos(ya)-za[2]*Math.sin(ya);b[2]=za[1]*Math.sin(ya)+za[2]*Math.cos(ya);x[0]=b[0]+ma[0];x[1]=b[1]+ma[1];x[2]=b[2]+ma[2];return x}function R(x,T,ma,ya){const za=[],b=[];za[0]=T[0]-ma[0];za[1]=T[1]-ma[1];za[2]=T[2]-ma[2];b[0]=za[2]*Math.sin(ya)+
za[0]*Math.cos(ya);b[1]=za[1];b[2]=za[2]*Math.cos(ya)-za[0]*Math.sin(ya);x[0]=b[0]+ma[0];x[1]=b[1]+ma[1];x[2]=b[2]+ma[2];return x}function J(x,T,ma,ya){const za=[],b=[];za[0]=T[0]-ma[0];za[1]=T[1]-ma[1];za[2]=T[2]-ma[2];b[0]=za[0]*Math.cos(ya)-za[1]*Math.sin(ya);b[1]=za[0]*Math.sin(ya)+za[1]*Math.cos(ya);b[2]=za[2];x[0]=b[0]+ma[0];x[1]=b[1]+ma[1];x[2]=b[2]+ma[2];return x}function ja(x,T){p(Ca,x);p(ea,T);aa(Ca,Ca);aa(ea,ea);x=ia(Ca,ea);return 1<x?0:-1>x?Math.PI:Math.acos(x)}function qa(x){return"vec3("+
x[0]+", "+x[1]+", "+x[2]+")"}function pa(x,T){return x[0]===T[0]&&x[1]===T[1]&&x[2]===T[2]}function wa(x,T){const ma=x[0],ya=x[1];x=x[2];const za=T[0],b=T[1];T=T[2];return Math.abs(ma-za)<=Z.EPSILON*Math.max(1,Math.abs(ma),Math.abs(za))&&Math.abs(ya-b)<=Z.EPSILON*Math.max(1,Math.abs(ya),Math.abs(b))&&Math.abs(x-T)<=Z.EPSILON*Math.max(1,Math.abs(x),Math.abs(T))}const Ca=e.create(),ea=e.create();e=Object.freeze({__proto__:null,length:K,copy:p,set:I,add:l,subtract:r,multiply:q,divide:E,ceil:ha,floor:fa,
min:A,max:u,round:B,scale:d,scaleAndAdd:m,distance:H,squaredDistance:M,squaredLength:D,negate:v,inverse:L,normalize:aa,dot:ia,cross:U,lerp:F,hermite:G,bezier:N,random:Q,transformMat4:P,transformMat3:t,transformQuat:h,rotateX:z,rotateY:R,rotateZ:J,angle:ja,str:qa,exactEquals:pa,equals:wa,sub:r,mul:q,div:E,dist:H,sqrDist:M,len:K,sqrLen:D});n.add=l;n.angle=ja;n.bezier=N;n.ceil=ha;n.copy=p;n.cross=U;n.dist=H;n.distance=H;n.div=E;n.divide=E;n.dot=ia;n.equals=wa;n.exactEquals=pa;n.floor=fa;n.hermite=G;
n.inverse=L;n.len=K;n.length=K;n.lerp=F;n.max=u;n.min=A;n.mul=q;n.multiply=q;n.negate=v;n.normalize=aa;n.random=Q;n.rotateX=z;n.rotateY=R;n.rotateZ=J;n.round=B;n.scale=d;n.scaleAndAdd=m;n.set=I;n.sqrDist=M;n.sqrLen=D;n.squaredDistance=M;n.squaredLength=D;n.str=qa;n.sub=r;n.subtract=r;n.transformMat3=t;n.transformMat4=P;n.transformQuat=h;n.vec3=e})},"esri/chunks/common":function(){define(["exports"],function(n){function e(q){return q*I}function Z(q){return q*l}function K(q,E){return Math.abs(q-E)<=
1E-6*Math.max(1,Math.abs(q),Math.abs(E))}const p=Math.random,I=Math.PI/180,l=180/Math.PI;var r=Object.freeze({__proto__:null,EPSILON:1E-6,RANDOM:p,toRadian:e,toDegree:Z,equals:K});n.EPSILON=1E-6;n.RANDOM=p;n.common=r;n.equals=K;n.toDegree=Z;n.toRadian=e})},"esri/geometry/projectionEllipsoid":function(){define(["exports","./support/spatialReferenceUtils","./SpatialReference","./support/Ellipsoid"],function(n,e,Z,K){function p(E){return new Z({wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${E.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`})}const I=p(K.earth),l=p(K.mars),r=p(K.moon),q=new Z({wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${K.earth.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`});n.SphericalECEFSpatialReference=I;n.SphericalPCPFMars=l;n.SphericalPCPFMoon=r;n.WGS84ECEFSpatialReference=q;n.createSphericalPCPF=p;n.getReferenceEllipsoid=function(E){return E&&(e.isMars(E)||E===l)?K.mars:E&&(e.isMoon(E)||E===r)?K.moon:K.earth};n.getReferenceEllipsoidFromWKID=function(E){return e.isWKIDFromMars(E)?K.mars:e.isWKIDFromMoon(E)?K.moon:K.earth};n.getSphericalPCPF=function(E){return E&&(e.isMars(E)||E===l)?l:E&&(e.isMoon(E)||E===r)?r:I};n.getSphericalPCPFForEllipsoid=function(E){return E&&
E===K.mars?l:E&&E===K.moon?r:I};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/core/unitUtils":function(){define("exports ./has ./jsonMap ../geometry/support/WKIDUnitConversion ../geometry/support/spatialReferenceUtils ../geometry/SpatialReference ../geometry/support/Ellipsoid ../geometry/projectionEllipsoid".split(" "),function(n,e,Z,K,p,I,l,r){function q(t){if(t=N[t])return t;throw Error("unknown measure");}function E(t){return G[t].baseUnit}function ha(t,h=null){h=h||q(t);return G[h].baseUnit===
t}function fa(t,h,z){if(h===z)return t;const R=q(h);if(R!==q(z))throw Error("incompatible units");t=ha(h,R)?t:t*G[R].units[h].inBaseUnits;return ha(z,R)?t:t/G[R].units[z].inBaseUnits}function A(t,h){return 3E3>fa(t,h,"meters")?"meters":"kilometers"}function u(t,h){return 1E5>fa(t,h,"meters")?"meters":"kilometers"}function B(t,h){return 1E3>fa(t,h,"feet")?"feet":"miles"}function d(t,h){return 1E5>fa(t,h,"feet")?"feet":"miles"}function m(t){return F.fromJSON(t.toLowerCase())||null}function H(t,h=l.earth.metersPerDegree){return M(t,
!0)||h}function M(t,h=!1){let z,R,J=null;null!=t&&("object"===typeof t?(z=t.wkid,R=t.wkt):"number"===typeof t?z=t:"string"===typeof t&&(R=t));if(z){if(p.isWKIDFromMars(z))return l.mars.metersPerDegree;if(p.isWKIDFromMoon(z))return l.moon.metersPerDegree;J=aa.values[aa[z]];!J&&h&&U.has(z)&&(J=v)}else R&&(-1!==R.search(/^PROJCS/i)?(t=L.exec(R))&&t[1]&&(J=parseFloat(t[1].split(",")[1])):-1!==R.search(/^GEOCCS/i)&&(t=ia.exec(R))&&t[1]&&(J=parseFloat(t[1].split(",")[1])));return J}function D(t){let h,
z,R=null;null!=t&&("object"===typeof t?(h=t.wkid,z=t.wkt):"number"===typeof t?h=t:"string"===typeof t&&(z=t));h?R=aa.units[aa[h]]:z&&-1!==z.search(/^PROJCS/i)&&(t=L.exec(z))&&t[1]&&(R=(t=/[\\"\\']{1}([^\\"\\']+)/.exec(t[1]))&&t[1]);return R?m(R):null}const v=l.earth.radius*Math.PI/200,L=/UNIT\[([^\]]+)\]\]$/i,aa=K,ia=/UNIT\[([^\]]+)\]/i,U=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),F=Z.strict()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",
yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"});e={millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},
kilometers:{inBaseUnits:1E3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}};K={"square-millimeters":{inBaseUnits:1E-6},"square-centimeters":{inBaseUnits:1E-4},"square-decimeters":{inBaseUnits:.1*.1},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:1E6},"square-inches":{inBaseUnits:6.4516E-4},"square-feet":{inBaseUnits:.09290304},"square-yards":{inBaseUnits:.83612736},
"square-miles":{inBaseUnits:2589988.110336},"square-us-feet":{inBaseUnits:(t=>t*t)(1200/3937)},acres:{inBaseUnits:4046.8564224},ares:{inBaseUnits:100},hectares:{inBaseUnits:1E4}};const G={length:{baseUnit:"meters",units:e},area:{baseUnit:"square-meters",units:K},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1E3*1E-9},"cubic-centimeters":{inBaseUnits:.001},"cubic-decimeters":{inBaseUnits:1},"cubic-meters":{inBaseUnits:1E3},"cubic-kilometers":{inBaseUnits:1E12},
"cubic-inches":{inBaseUnits:.016387064},"cubic-feet":{inBaseUnits:.09290304*304.8},"cubic-yards":{inBaseUnits:764.554857984},"cubic-miles":{inBaseUnits:4.16818182544058E12}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},N=function(){const t={};for(const h in G)for(const z in G[h].units)t[z]=h;return t}(),Q={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",
esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},P={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"};e=Z.strict()(Q);
K=Z.strict()(P);Z=Z.strict()({...Q,...P});n.areaUnitsJSONMap=e;n.baseUnitForMeasure=E;n.baseUnitForUnit=function(t){return E(q(t))};n.convertUnit=fa;n.getDefaultUnitSystem=function(t){if(!t)return null;switch(D(t)){case "feet":case "us-feet":case "clarke-feet":case "clarke-yards":case "clarke-links":case "sears-yards":case "sears-feet":case "sears-chains":case "benoit-1895-b-chains":case "indian-yards":case "indian-1937-yards":case "gold-coast-feet":case "sears-1922-truncated-chains":return"imperial";
case "50-kilometers":case "150-kilometers":case "meters":return"metric"}return null};n.getMetersPerUnit=M;n.getMetersPerUnitForSR=H;n.getMetersPerVerticalUnitForSR=function(t){if(t&&"object"===typeof t&&!p.isEarth(t))return 1;t=H(t);return 1E5<t?1:t};n.getUnitString=D;n.getVerticalUnitStringForSR=function(t){const h=H(t),z=t instanceof I?r.getReferenceEllipsoid(t).metersPerDegree:1E5;return h>=z?"meters":D(t)};n.inchesPerMeter=39.37;n.isBaseUnit=ha;n.isMeasurementSystem=function(t){return"imperial"===
t||"metric"===t};n.lengthToDegrees=function(t,h,z){return fa(t,h,"meters")/(z*Math.PI/180)};n.lengthUnitsJSONMap=K;n.measureForUnit=q;n.measurementAreaUnits="metric imperial square-inches square-feet square-yards square-miles square-us-feet square-meters square-kilometers acres ares hectares".split(" ");n.measurementLengthUnits="metric imperial inches feet yards miles nautical-miles us-feet meters kilometers".split(" ");n.preferredImperialAreaUnit=function(t,h){return 1E6>fa(t,h,"square-feet")?"square-feet":
"square-miles"};n.preferredImperialLengthUnit=B;n.preferredImperialVerticalLengthUnit=d;n.preferredLengthUnit=function(t,h,z){switch(z){case "metric":return A(t,h);case "imperial":return B(t,h);default:return z}};n.preferredMetricAreaUnit=function(t,h){return 3E6>fa(t,h,"square-meters")?"square-meters":"square-kilometers"};n.preferredMetricLengthUnit=A;n.preferredMetricVerticalLengthUnit=u;n.preferredVerticalLengthUnit=function(t,h,z){switch(z){case "metric":return u(t,h);case "imperial":return d(t,
h);default:return z}};n.unitFromRESTJSON=m;n.unitToRESTJSON=function(t){return F.toJSON(t)||null};n.unitsJSONMap=Z;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/chunks/mat4":function(){define(["exports","./vec3f64","./common"],function(n,e,Z){function K(b,f){b[0]=f[0];b[1]=f[1];b[2]=f[2];b[3]=f[3];b[4]=f[4];b[5]=f[5];b[6]=f[6];b[7]=f[7];b[8]=f[8];b[9]=f[9];b[10]=f[10];b[11]=f[11];b[12]=f[12];b[13]=f[13];b[14]=f[14];b[15]=f[15];return b}function p(b,f,V,g,w,O,S,ba,W,ka,la,na,ua,ta,xa,Ba,
Ea){b[0]=f;b[1]=V;b[2]=g;b[3]=w;b[4]=O;b[5]=S;b[6]=ba;b[7]=W;b[8]=ka;b[9]=la;b[10]=na;b[11]=ua;b[12]=ta;b[13]=xa;b[14]=Ba;b[15]=Ea;return b}function I(b){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function l(b,f){if(b===f){const V=f[1],g=f[2],w=f[3],O=f[6],S=f[7],ba=f[11];b[1]=f[4];b[2]=f[8];b[3]=f[12];b[4]=V;b[6]=f[9];b[7]=f[13];b[8]=g;b[9]=O;b[11]=f[14];b[12]=w;b[13]=S;b[14]=ba}else b[0]=f[0],b[1]=f[4],b[2]=f[8],
b[3]=f[12],b[4]=f[1],b[5]=f[5],b[6]=f[9],b[7]=f[13],b[8]=f[2],b[9]=f[6],b[10]=f[10],b[11]=f[14],b[12]=f[3],b[13]=f[7],b[14]=f[11],b[15]=f[15];return b}function r(b,f){const V=f[0],g=f[1],w=f[2],O=f[3],S=f[4],ba=f[5],W=f[6],ka=f[7],la=f[8],na=f[9],ua=f[10],ta=f[11],xa=f[12],Ba=f[13],Ea=f[14];f=f[15];const Ka=V*ba-g*S,Ga=V*W-w*S,Ja=V*ka-O*S,Ha=g*W-w*ba,Ia=g*ka-O*ba,Sa=w*ka-O*W,ra=la*Ba-na*xa,fb=la*Ea-ua*xa,hb=la*f-ta*xa,cb=na*Ea-ua*Ba,a=na*f-ta*Ba,Va=ua*f-ta*Ea;let Ua=Ka*Va-Ga*a+Ja*cb+Ha*hb-Ia*fb+Sa*
ra;if(!Ua)return null;Ua=1/Ua;b[0]=(ba*Va-W*a+ka*cb)*Ua;b[1]=(w*a-g*Va-O*cb)*Ua;b[2]=(Ba*Sa-Ea*Ia+f*Ha)*Ua;b[3]=(ua*Ia-na*Sa-ta*Ha)*Ua;b[4]=(W*hb-S*Va-ka*fb)*Ua;b[5]=(V*Va-w*hb+O*fb)*Ua;b[6]=(Ea*Ja-xa*Sa-f*Ga)*Ua;b[7]=(la*Sa-ua*Ja+ta*Ga)*Ua;b[8]=(S*a-ba*hb+ka*ra)*Ua;b[9]=(g*hb-V*a-O*ra)*Ua;b[10]=(xa*Ia-Ba*Ja+f*Ka)*Ua;b[11]=(na*Ja-la*Ia-ta*Ka)*Ua;b[12]=(ba*fb-S*cb-W*ra)*Ua;b[13]=(V*cb-g*fb+w*ra)*Ua;b[14]=(Ba*Ga-xa*Ha-Ea*Ka)*Ua;b[15]=(la*Ha-na*Ga+ua*Ka)*Ua;return b}function q(b,f){const V=f[0],g=f[1],
w=f[2],O=f[3],S=f[4],ba=f[5],W=f[6],ka=f[7],la=f[8],na=f[9],ua=f[10],ta=f[11],xa=f[12],Ba=f[13],Ea=f[14];f=f[15];b[0]=ba*(ua*f-ta*Ea)-na*(W*f-ka*Ea)+Ba*(W*ta-ka*ua);b[1]=-(g*(ua*f-ta*Ea)-na*(w*f-O*Ea)+Ba*(w*ta-O*ua));b[2]=g*(W*f-ka*Ea)-ba*(w*f-O*Ea)+Ba*(w*ka-O*W);b[3]=-(g*(W*ta-ka*ua)-ba*(w*ta-O*ua)+na*(w*ka-O*W));b[4]=-(S*(ua*f-ta*Ea)-la*(W*f-ka*Ea)+xa*(W*ta-ka*ua));b[5]=V*(ua*f-ta*Ea)-la*(w*f-O*Ea)+xa*(w*ta-O*ua);b[6]=-(V*(W*f-ka*Ea)-S*(w*f-O*Ea)+xa*(w*ka-O*W));b[7]=V*(W*ta-ka*ua)-S*(w*ta-O*ua)+
la*(w*ka-O*W);b[8]=S*(na*f-ta*Ba)-la*(ba*f-ka*Ba)+xa*(ba*ta-ka*na);b[9]=-(V*(na*f-ta*Ba)-la*(g*f-O*Ba)+xa*(g*ta-O*na));b[10]=V*(ba*f-ka*Ba)-S*(g*f-O*Ba)+xa*(g*ka-O*ba);b[11]=-(V*(ba*ta-ka*na)-S*(g*ta-O*na)+la*(g*ka-O*ba));b[12]=-(S*(na*Ea-ua*Ba)-la*(ba*Ea-W*Ba)+xa*(ba*ua-W*na));b[13]=V*(na*Ea-ua*Ba)-la*(g*Ea-w*Ba)+xa*(g*ua-w*na);b[14]=-(V*(ba*Ea-W*Ba)-S*(g*Ea-w*Ba)+xa*(g*W-w*ba));b[15]=V*(ba*ua-W*na)-S*(g*ua-w*na)+la*(g*W-w*ba);return b}function E(b){const f=b[0],V=b[1],g=b[2],w=b[3],O=b[4],S=b[5],
ba=b[6],W=b[7],ka=b[8],la=b[9],na=b[10],ua=b[11],ta=b[12],xa=b[13],Ba=b[14];b=b[15];return(f*S-V*O)*(na*b-ua*Ba)-(f*ba-g*O)*(la*b-ua*xa)+(f*W-w*O)*(la*Ba-na*xa)+(V*ba-g*S)*(ka*b-ua*ta)-(V*W-w*S)*(ka*Ba-na*ta)+(g*W-w*ba)*(ka*xa-la*ta)}function ha(b,f,V){const g=f[0],w=f[1],O=f[2],S=f[3],ba=f[4],W=f[5],ka=f[6],la=f[7],na=f[8],ua=f[9],ta=f[10],xa=f[11],Ba=f[12],Ea=f[13],Ka=f[14];f=f[15];let Ga=V[0],Ja=V[1],Ha=V[2],Ia=V[3];b[0]=Ga*g+Ja*ba+Ha*na+Ia*Ba;b[1]=Ga*w+Ja*W+Ha*ua+Ia*Ea;b[2]=Ga*O+Ja*ka+Ha*ta+Ia*
Ka;b[3]=Ga*S+Ja*la+Ha*xa+Ia*f;Ga=V[4];Ja=V[5];Ha=V[6];Ia=V[7];b[4]=Ga*g+Ja*ba+Ha*na+Ia*Ba;b[5]=Ga*w+Ja*W+Ha*ua+Ia*Ea;b[6]=Ga*O+Ja*ka+Ha*ta+Ia*Ka;b[7]=Ga*S+Ja*la+Ha*xa+Ia*f;Ga=V[8];Ja=V[9];Ha=V[10];Ia=V[11];b[8]=Ga*g+Ja*ba+Ha*na+Ia*Ba;b[9]=Ga*w+Ja*W+Ha*ua+Ia*Ea;b[10]=Ga*O+Ja*ka+Ha*ta+Ia*Ka;b[11]=Ga*S+Ja*la+Ha*xa+Ia*f;Ga=V[12];Ja=V[13];Ha=V[14];Ia=V[15];b[12]=Ga*g+Ja*ba+Ha*na+Ia*Ba;b[13]=Ga*w+Ja*W+Ha*ua+Ia*Ea;b[14]=Ga*O+Ja*ka+Ha*ta+Ia*Ka;b[15]=Ga*S+Ja*la+Ha*xa+Ia*f;return b}function fa(b,f,V){const g=
V[0],w=V[1];V=V[2];let O=void 0,S=void 0,ba=void 0,W=void 0,ka=void 0,la=void 0,na=void 0,ua=void 0,ta=void 0,xa=void 0,Ba=void 0,Ea=void 0;f===b?(b[12]=f[0]*g+f[4]*w+f[8]*V+f[12],b[13]=f[1]*g+f[5]*w+f[9]*V+f[13],b[14]=f[2]*g+f[6]*w+f[10]*V+f[14],b[15]=f[3]*g+f[7]*w+f[11]*V+f[15]):(O=f[0],S=f[1],ba=f[2],W=f[3],ka=f[4],la=f[5],na=f[6],ua=f[7],ta=f[8],xa=f[9],Ba=f[10],Ea=f[11],b[0]=O,b[1]=S,b[2]=ba,b[3]=W,b[4]=ka,b[5]=la,b[6]=na,b[7]=ua,b[8]=ta,b[9]=xa,b[10]=Ba,b[11]=Ea,b[12]=O*g+ka*w+ta*V+f[12],b[13]=
S*g+la*w+xa*V+f[13],b[14]=ba*g+na*w+Ba*V+f[14],b[15]=W*g+ua*w+Ea*V+f[15]);return b}function A(b,f,V){const g=V[0],w=V[1];V=V[2];b[0]=f[0]*g;b[1]=f[1]*g;b[2]=f[2]*g;b[3]=f[3]*g;b[4]=f[4]*w;b[5]=f[5]*w;b[6]=f[6]*w;b[7]=f[7]*w;b[8]=f[8]*V;b[9]=f[9]*V;b[10]=f[10]*V;b[11]=f[11]*V;b[12]=f[12];b[13]=f[13];b[14]=f[14];b[15]=f[15];return b}function u(b,f,V,g){let w=g[0],O=g[1];g=g[2];let S=Math.sqrt(w*w+O*O+g*g);var ba=void 0,W=void 0;let ka=void 0,la=void 0,na=void 0,ua=void 0,ta=void 0,xa=void 0,Ba=void 0,
Ea=void 0,Ka=void 0,Ga=void 0,Ja=void 0,Ha=void 0,Ia=void 0,Sa=void 0,ra=void 0,fb=void 0,hb=void 0,cb=void 0,a=void 0,Va=void 0;W=ba=void 0;if(S<Z.EPSILON)return null;S=1/S;w*=S;O*=S;g*=S;ba=Math.sin(V);W=Math.cos(V);ka=1-W;la=f[0];na=f[1];ua=f[2];ta=f[3];xa=f[4];Ba=f[5];Ea=f[6];Ka=f[7];Ga=f[8];Ja=f[9];Ha=f[10];Ia=f[11];Sa=w*w*ka+W;ra=O*w*ka+g*ba;fb=g*w*ka-O*ba;hb=w*O*ka-g*ba;cb=O*O*ka+W;a=g*O*ka+w*ba;Va=w*g*ka+O*ba;ba=O*g*ka-w*ba;W=g*g*ka+W;b[0]=la*Sa+xa*ra+Ga*fb;b[1]=na*Sa+Ba*ra+Ja*fb;b[2]=ua*
Sa+Ea*ra+Ha*fb;b[3]=ta*Sa+Ka*ra+Ia*fb;b[4]=la*hb+xa*cb+Ga*a;b[5]=na*hb+Ba*cb+Ja*a;b[6]=ua*hb+Ea*cb+Ha*a;b[7]=ta*hb+Ka*cb+Ia*a;b[8]=la*Va+xa*ba+Ga*W;b[9]=na*Va+Ba*ba+Ja*W;b[10]=ua*Va+Ea*ba+Ha*W;b[11]=ta*Va+Ka*ba+Ia*W;f!==b&&(b[12]=f[12],b[13]=f[13],b[14]=f[14],b[15]=f[15]);return b}function B(b,f,V){const g=Math.sin(V);V=Math.cos(V);const w=f[4],O=f[5],S=f[6],ba=f[7],W=f[8],ka=f[9],la=f[10],na=f[11];f!==b&&(b[0]=f[0],b[1]=f[1],b[2]=f[2],b[3]=f[3],b[12]=f[12],b[13]=f[13],b[14]=f[14],b[15]=f[15]);b[4]=
w*V+W*g;b[5]=O*V+ka*g;b[6]=S*V+la*g;b[7]=ba*V+na*g;b[8]=W*V-w*g;b[9]=ka*V-O*g;b[10]=la*V-S*g;b[11]=na*V-ba*g;return b}function d(b,f,V){const g=Math.sin(V);V=Math.cos(V);const w=f[0],O=f[1],S=f[2],ba=f[3],W=f[8],ka=f[9],la=f[10],na=f[11];f!==b&&(b[4]=f[4],b[5]=f[5],b[6]=f[6],b[7]=f[7],b[12]=f[12],b[13]=f[13],b[14]=f[14],b[15]=f[15]);b[0]=w*V-W*g;b[1]=O*V-ka*g;b[2]=S*V-la*g;b[3]=ba*V-na*g;b[8]=w*g+W*V;b[9]=O*g+ka*V;b[10]=S*g+la*V;b[11]=ba*g+na*V;return b}function m(b,f,V){const g=Math.sin(V);V=Math.cos(V);
const w=f[0],O=f[1],S=f[2],ba=f[3],W=f[4],ka=f[5],la=f[6],na=f[7];f!==b&&(b[8]=f[8],b[9]=f[9],b[10]=f[10],b[11]=f[11],b[12]=f[12],b[13]=f[13],b[14]=f[14],b[15]=f[15]);b[0]=w*V+W*g;b[1]=O*V+ka*g;b[2]=S*V+la*g;b[3]=ba*V+na*g;b[4]=W*V-w*g;b[5]=ka*V-O*g;b[6]=la*V-S*g;b[7]=na*V-ba*g;return b}function H(b,f){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=f[0];b[13]=f[1];b[14]=f[2];b[15]=1;return b}function M(b,f){b[0]=f[0];b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=f[1];
b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=f[2];b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function D(b,f,V){let g=V[0],w=V[1];V=V[2];let O=Math.sqrt(g*g+w*w+V*V),S=void 0,ba=void 0,W=void 0;if(O<Z.EPSILON)return null;O=1/O;g*=O;w*=O;V*=O;S=Math.sin(f);ba=Math.cos(f);W=1-ba;b[0]=g*g*W+ba;b[1]=w*g*W+V*S;b[2]=V*g*W-w*S;b[3]=0;b[4]=g*w*W-V*S;b[5]=w*w*W+ba;b[6]=V*w*W+g*S;b[7]=0;b[8]=g*V*W+w*S;b[9]=w*V*W-g*S;b[10]=V*V*W+ba;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function v(b,f){const V=Math.sin(f);
f=Math.cos(f);b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=f;b[6]=V;b[7]=0;b[8]=0;b[9]=-V;b[10]=f;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function L(b,f){const V=Math.sin(f);f=Math.cos(f);b[0]=f;b[1]=0;b[2]=-V;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=V;b[9]=0;b[10]=f;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function aa(b,f){const V=Math.sin(f);f=Math.cos(f);b[0]=f;b[1]=V;b[2]=0;b[3]=0;b[4]=-V;b[5]=f;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function ia(b,
f,V){var g=f[0],w=f[1],O=f[2],S=f[3],ba=g+g,W=w+w;const ka=O+O;f=g*ba;const la=g*W;g*=ka;const na=w*W;w*=ka;O*=ka;ba*=S;W*=S;S*=ka;b[0]=1-(na+O);b[1]=la+S;b[2]=g-W;b[3]=0;b[4]=la-S;b[5]=1-(f+O);b[6]=w+ba;b[7]=0;b[8]=g+W;b[9]=w-ba;b[10]=1-(f+na);b[11]=0;b[12]=V[0];b[13]=V[1];b[14]=V[2];b[15]=1;return b}function U(b,f){const V=za,g=-f[0],w=-f[1],O=-f[2],S=f[3],ba=f[4],W=f[5],ka=f[6],la=f[7],na=g*g+w*w+O*O+S*S;0<na?(V[0]=2*(ba*S+la*g+W*O-ka*w)/na,V[1]=2*(W*S+la*w+ka*g-ba*O)/na,V[2]=2*(ka*S+la*O+ba*w-
W*g)/na):(V[0]=2*(ba*S+la*g+W*O-ka*w),V[1]=2*(W*S+la*w+ka*g-ba*O),V[2]=2*(ka*S+la*O+ba*w-W*g));ia(b,f,V);return b}function F(b,f){b[0]=f[12];b[1]=f[13];b[2]=f[14];return b}function G(b,f){const V=f[0],g=f[1],w=f[2],O=f[4],S=f[5],ba=f[6],W=f[8],ka=f[9];f=f[10];b[0]=Math.sqrt(V*V+g*g+w*w);b[1]=Math.sqrt(O*O+S*S+ba*ba);b[2]=Math.sqrt(W*W+ka*ka+f*f);return b}function N(b,f){const V=f[0]+f[5]+f[10];let g=0;0<V?(g=2*Math.sqrt(V+1),b[3]=.25*g,b[0]=(f[6]-f[9])/g,b[1]=(f[8]-f[2])/g,b[2]=(f[1]-f[4])/g):f[0]>
f[5]&&f[0]>f[10]?(g=2*Math.sqrt(1+f[0]-f[5]-f[10]),b[3]=(f[6]-f[9])/g,b[0]=.25*g,b[1]=(f[1]+f[4])/g,b[2]=(f[8]+f[2])/g):f[5]>f[10]?(g=2*Math.sqrt(1+f[5]-f[0]-f[10]),b[3]=(f[8]-f[2])/g,b[0]=(f[1]+f[4])/g,b[1]=.25*g,b[2]=(f[6]+f[9])/g):(g=2*Math.sqrt(1+f[10]-f[0]-f[5]),b[3]=(f[1]-f[4])/g,b[0]=(f[8]+f[2])/g,b[1]=(f[6]+f[9])/g,b[2]=.25*g);return b}function Q(b,f,V,g){var w=f[0],O=f[1],S=f[2],ba=f[3],W=w+w,ka=O+O,la=S+S;f=w*W;const na=w*ka;w*=la;const ua=O*ka;O*=la;S*=la;W*=ba;ka*=ba;ba*=la;la=g[0];const ta=
g[1];g=g[2];b[0]=(1-(ua+S))*la;b[1]=(na+ba)*la;b[2]=(w-ka)*la;b[3]=0;b[4]=(na-ba)*ta;b[5]=(1-(f+S))*ta;b[6]=(O+W)*ta;b[7]=0;b[8]=(w+ka)*g;b[9]=(O-W)*g;b[10]=(1-(f+ua))*g;b[11]=0;b[12]=V[0];b[13]=V[1];b[14]=V[2];b[15]=1;return b}function P(b,f,V,g,w){var O=f[0],S=f[1],ba=f[2],W=f[3],ka=O+O,la=S+S,na=ba+ba;f=O*ka;var ua=O*la,ta=O*na;O=S*la;S*=na;var xa=ba*na;ba=W*ka;la*=W;const Ba=W*na;var Ea=g[0],Ka=g[1];na=g[2];g=w[0];W=w[1];w=w[2];ka=(1-(O+xa))*Ea;const Ga=(ua+Ba)*Ea;Ea*=ta-la;ua=(ua-Ba)*Ka;xa=(1-
(f+xa))*Ka;Ka*=S+ba;ta=(ta+la)*na;S=(S-ba)*na;f=(1-(f+O))*na;b[0]=ka;b[1]=Ga;b[2]=Ea;b[3]=0;b[4]=ua;b[5]=xa;b[6]=Ka;b[7]=0;b[8]=ta;b[9]=S;b[10]=f;b[11]=0;b[12]=V[0]+g-(ka*g+ua*W+ta*w);b[13]=V[1]+W-(Ga*g+xa*W+S*w);b[14]=V[2]+w-(Ea*g+Ka*W+f*w);b[15]=1;return b}function t(b,f){var V=f[0],g=f[1],w=f[2];f=f[3];var O=V+V,S=g+g;const ba=w+w;V*=O;const W=g*O;g*=S;const ka=w*O,la=w*S;w*=ba;O*=f;S*=f;f*=ba;b[0]=1-g-w;b[1]=W+f;b[2]=ka-S;b[3]=0;b[4]=W-f;b[5]=1-V-w;b[6]=la+O;b[7]=0;b[8]=ka+S;b[9]=la-O;b[10]=1-
V-g;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b}function h(b,f,V,g,w,O,S){const ba=1/(V-f),W=1/(w-g),ka=1/(O-S);b[0]=2*O*ba;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=2*O*W;b[6]=0;b[7]=0;b[8]=(V+f)*ba;b[9]=(w+g)*W;b[10]=(S+O)*ka;b[11]=-1;b[12]=0;b[13]=0;b[14]=S*O*2*ka;b[15]=0;return b}function z(b,f,V,g,w){f=1/Math.tan(f/2);let O=void 0;b[0]=f/V;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=f;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[11]=-1;b[12]=0;b[13]=0;b[15]=0;null!=w&&Infinity!==w?(O=1/(g-w),b[10]=(w+g)*O,b[14]=2*w*g*O):
(b[10]=-1,b[14]=-2*g);return b}function R(b,f,V,g){const w=Math.tan(f.upDegrees*Math.PI/180),O=Math.tan(f.downDegrees*Math.PI/180),S=Math.tan(f.leftDegrees*Math.PI/180);f=Math.tan(f.rightDegrees*Math.PI/180);const ba=2/(S+f),W=2/(w+O);b[0]=ba;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=W;b[6]=0;b[7]=0;b[8]=-((S-f)*ba*.5);b[9]=(w-O)*W*.5;b[10]=g/(V-g);b[11]=-1;b[12]=0;b[13]=0;b[14]=g*V/(V-g);b[15]=0;return b}function J(b,f,V,g,w,O,S){const ba=1/(f-V),W=1/(g-w),ka=1/(O-S);b[0]=-2*ba;b[1]=0;b[2]=0;b[3]=0;b[4]=
0;b[5]=-2*W;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=2*ka;b[11]=0;b[12]=(f+V)*ba;b[13]=(w+g)*W;b[14]=(S+O)*ka;b[15]=1;return b}function ja(b,f,V,g){let w=void 0,O=void 0;var S=void 0,ba=void 0;let W=void 0,ka=void 0;var la=void 0,na=void 0;let ua=void 0,ta=void 0;const xa=f[0],Ba=f[1];f=f[2];S=g[0];ba=g[1];g=g[2];la=V[0];na=V[1];V=V[2];if(Math.abs(xa-la)<Z.EPSILON&&Math.abs(Ba-na)<Z.EPSILON&&Math.abs(f-V)<Z.EPSILON)return I(b);la=xa-la;na=Ba-na;ua=f-V;ta=1/Math.sqrt(la*la+na*na+ua*ua);la*=ta;na*=ta;ua*=
ta;w=ba*ua-g*na;O=g*la-S*ua;S=S*na-ba*la;(ta=Math.sqrt(w*w+O*O+S*S))?(ta=1/ta,w*=ta,O*=ta,S*=ta):S=O=w=0;ba=na*S-ua*O;W=ua*w-la*S;ka=la*O-na*w;(ta=Math.sqrt(ba*ba+W*W+ka*ka))?(ta=1/ta,ba*=ta,W*=ta,ka*=ta):ka=W=ba=0;b[0]=w;b[1]=ba;b[2]=la;b[3]=0;b[4]=O;b[5]=W;b[6]=na;b[7]=0;b[8]=S;b[9]=ka;b[10]=ua;b[11]=0;b[12]=-(w*xa+O*Ba+S*f);b[13]=-(ba*xa+W*Ba+ka*f);b[14]=-(la*xa+na*Ba+ua*f);b[15]=1;return b}function qa(b,f,V,g){const w=f[0],O=f[1];f=f[2];var S=g[0];const ba=g[1];var W=g[2];g=w-V[0];let ka=O-V[1];
V=f-V[2];let la=g*g+ka*ka+V*V;0<la&&(la=1/Math.sqrt(la),g*=la,ka*=la,V*=la);let na=ba*V-W*ka;W=W*g-S*V;S=S*ka-ba*g;la=na*na+W*W+S*S;0<la&&(la=1/Math.sqrt(la),na*=la,W*=la,S*=la);b[0]=na;b[1]=W;b[2]=S;b[3]=0;b[4]=ka*S-V*W;b[5]=V*na-g*S;b[6]=g*W-ka*na;b[7]=0;b[8]=g;b[9]=ka;b[10]=V;b[11]=0;b[12]=w;b[13]=O;b[14]=f;b[15]=1;return b}function pa(b){return"mat4("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+", "+b[4]+", "+b[5]+", "+b[6]+", "+b[7]+", "+b[8]+", "+b[9]+", "+b[10]+", "+b[11]+", "+b[12]+", "+b[13]+", "+
b[14]+", "+b[15]+")"}function wa(b){return Math.sqrt(b[0]**2+b[1]**2+b[2]**2+b[3]**2+b[4]**2+b[5]**2+b[6]**2+b[7]**2+b[8]**2+b[9]**2+b[10]**2+b[11]**2+b[12]**2+b[13]**2+b[14]**2+b[15]**2)}function Ca(b,f,V){b[0]=f[0]+V[0];b[1]=f[1]+V[1];b[2]=f[2]+V[2];b[3]=f[3]+V[3];b[4]=f[4]+V[4];b[5]=f[5]+V[5];b[6]=f[6]+V[6];b[7]=f[7]+V[7];b[8]=f[8]+V[8];b[9]=f[9]+V[9];b[10]=f[10]+V[10];b[11]=f[11]+V[11];b[12]=f[12]+V[12];b[13]=f[13]+V[13];b[14]=f[14]+V[14];b[15]=f[15]+V[15];return b}function ea(b,f,V){b[0]=f[0]-
V[0];b[1]=f[1]-V[1];b[2]=f[2]-V[2];b[3]=f[3]-V[3];b[4]=f[4]-V[4];b[5]=f[5]-V[5];b[6]=f[6]-V[6];b[7]=f[7]-V[7];b[8]=f[8]-V[8];b[9]=f[9]-V[9];b[10]=f[10]-V[10];b[11]=f[11]-V[11];b[12]=f[12]-V[12];b[13]=f[13]-V[13];b[14]=f[14]-V[14];b[15]=f[15]-V[15];return b}function x(b,f,V){b[0]=f[0]*V;b[1]=f[1]*V;b[2]=f[2]*V;b[3]=f[3]*V;b[4]=f[4]*V;b[5]=f[5]*V;b[6]=f[6]*V;b[7]=f[7]*V;b[8]=f[8]*V;b[9]=f[9]*V;b[10]=f[10]*V;b[11]=f[11]*V;b[12]=f[12]*V;b[13]=f[13]*V;b[14]=f[14]*V;b[15]=f[15]*V;return b}function T(b,
f,V,g){b[0]=f[0]+V[0]*g;b[1]=f[1]+V[1]*g;b[2]=f[2]+V[2]*g;b[3]=f[3]+V[3]*g;b[4]=f[4]+V[4]*g;b[5]=f[5]+V[5]*g;b[6]=f[6]+V[6]*g;b[7]=f[7]+V[7]*g;b[8]=f[8]+V[8]*g;b[9]=f[9]+V[9]*g;b[10]=f[10]+V[10]*g;b[11]=f[11]+V[11]*g;b[12]=f[12]+V[12]*g;b[13]=f[13]+V[13]*g;b[14]=f[14]+V[14]*g;b[15]=f[15]+V[15]*g;return b}function ma(b,f){return b[0]===f[0]&&b[1]===f[1]&&b[2]===f[2]&&b[3]===f[3]&&b[4]===f[4]&&b[5]===f[5]&&b[6]===f[6]&&b[7]===f[7]&&b[8]===f[8]&&b[9]===f[9]&&b[10]===f[10]&&b[11]===f[11]&&b[12]===f[12]&&
b[13]===f[13]&&b[14]===f[14]&&b[15]===f[15]}function ya(b,f){const V=b[0],g=b[1],w=b[2],O=b[3],S=b[4],ba=b[5],W=b[6],ka=b[7],la=b[8],na=b[9],ua=b[10],ta=b[11],xa=b[12],Ba=b[13],Ea=b[14];b=b[15];const Ka=f[0],Ga=f[1],Ja=f[2],Ha=f[3],Ia=f[4],Sa=f[5],ra=f[6],fb=f[7],hb=f[8],cb=f[9],a=f[10],Va=f[11],Ua=f[12],Ta=f[13],jb=f[14];f=f[15];return Math.abs(V-Ka)<=Z.EPSILON*Math.max(1,Math.abs(V),Math.abs(Ka))&&Math.abs(g-Ga)<=Z.EPSILON*Math.max(1,Math.abs(g),Math.abs(Ga))&&Math.abs(w-Ja)<=Z.EPSILON*Math.max(1,
Math.abs(w),Math.abs(Ja))&&Math.abs(O-Ha)<=Z.EPSILON*Math.max(1,Math.abs(O),Math.abs(Ha))&&Math.abs(S-Ia)<=Z.EPSILON*Math.max(1,Math.abs(S),Math.abs(Ia))&&Math.abs(ba-Sa)<=Z.EPSILON*Math.max(1,Math.abs(ba),Math.abs(Sa))&&Math.abs(W-ra)<=Z.EPSILON*Math.max(1,Math.abs(W),Math.abs(ra))&&Math.abs(ka-fb)<=Z.EPSILON*Math.max(1,Math.abs(ka),Math.abs(fb))&&Math.abs(la-hb)<=Z.EPSILON*Math.max(1,Math.abs(la),Math.abs(hb))&&Math.abs(na-cb)<=Z.EPSILON*Math.max(1,Math.abs(na),Math.abs(cb))&&Math.abs(ua-a)<=Z.EPSILON*
Math.max(1,Math.abs(ua),Math.abs(a))&&Math.abs(ta-Va)<=Z.EPSILON*Math.max(1,Math.abs(ta),Math.abs(Va))&&Math.abs(xa-Ua)<=Z.EPSILON*Math.max(1,Math.abs(xa),Math.abs(Ua))&&Math.abs(Ba-Ta)<=Z.EPSILON*Math.max(1,Math.abs(Ba),Math.abs(Ta))&&Math.abs(Ea-jb)<=Z.EPSILON*Math.max(1,Math.abs(Ea),Math.abs(jb))&&Math.abs(b-f)<=Z.EPSILON*Math.max(1,Math.abs(b),Math.abs(f))}const za=e.create();e=Object.freeze({__proto__:null,copy:K,set:p,identity:I,transpose:l,invert:r,adjoint:q,determinant:E,multiply:ha,translate:fa,
scale:A,rotate:u,rotateX:B,rotateY:d,rotateZ:m,fromTranslation:H,fromScaling:M,fromRotation:D,fromXRotation:v,fromYRotation:L,fromZRotation:aa,fromRotationTranslation:ia,fromQuat2:U,getTranslation:F,getScaling:G,getRotation:N,fromRotationTranslationScale:Q,fromRotationTranslationScaleOrigin:P,fromQuat:t,frustum:h,perspective:z,perspectiveFromFieldOfView:R,ortho:J,lookAt:ja,targetTo:qa,str:pa,frob:wa,add:Ca,subtract:ea,multiplyScalar:x,multiplyScalarAndAdd:T,exactEquals:ma,equals:ya,mul:ha,sub:ea});
n.add=Ca;n.adjoint=q;n.copy=K;n.determinant=E;n.equals=ya;n.exactEquals=ma;n.frob=wa;n.fromQuat=t;n.fromQuat2=U;n.fromRotation=D;n.fromRotationTranslation=ia;n.fromRotationTranslationScale=Q;n.fromRotationTranslationScaleOrigin=P;n.fromScaling=M;n.fromTranslation=H;n.fromXRotation=v;n.fromYRotation=L;n.fromZRotation=aa;n.frustum=h;n.getRotation=N;n.getScaling=G;n.getTranslation=F;n.identity=I;n.invert=r;n.lookAt=ja;n.mat4=e;n.mul=ha;n.multiply=ha;n.multiplyScalar=x;n.multiplyScalarAndAdd=T;n.ortho=
J;n.perspective=z;n.perspectiveFromFieldOfView=R;n.rotate=u;n.rotateX=B;n.rotateY=d;n.rotateZ=m;n.scale=A;n.set=p;n.str=pa;n.sub=ea;n.subtract=ea;n.targetTo=qa;n.translate=fa;n.transpose=l})},"esri/chunks/pe":function(){define(["require","exports","./_rollupPluginBabelHelpers","../core/has","../assets"],function(n,e,Z,K,p){function I(){return!!e._pe}function l(){return!!K("esri-wasm")}function r(){return u?u:u=(new Promise(function(d,m){n(["./pe-wasm"],d,m)})).then(function(d){return d.peWasm}).then(({default:d})=>
d({locateFile:m=>p.getAssetUrl(`esri/geometry/support/${m}`)})).then(d=>{q(d)})}function q(d){function m(D,v,L){D[v]=L(D[v])}e._pe=d;e.PeDefs.init();e.PeGTlistExtended.init();e.PeNotationMgrs.init();e.PeNotationUtm.init();e.PePCSInfo.init();e.PeGCSExtent=function(D){function v(){return D.apply(this,arguments)||this}Z._inheritsLoose(v,D);v.prototype.destroy=function(){e._pe.destroy(this)};return v}(e._pe.PeGCSExtent);d=[e._pe.PeDatum,e._pe.PeGeogcs,e._pe.PeGeogtran,e._pe.PeObject,e._pe.PeParameter,
e._pe.PePrimem,e._pe.PeProjcs,e._pe.PeSpheroid,e._pe.PeUnit];for(var H of d)m(H.prototype,"getName",D=>function(){return D.call(this,Array(e.PeDefs.PE_NAME_MAX))});for(const D of[e._pe.PeGeogtran,e._pe.PeProjcs])m(D.prototype,"getParameters",v=>function(){const L=Array(e.PeDefs.PE_PARM_MAX);let aa=v.call(this);for(let ia=0;ia<L.length;ia++){const U=e._pe.getValue(aa,"*");L[ia]=U?e._pe.wrapPointer(U,e._pe.PeParameter):null;aa+=Int32Array.BYTES_PER_ELEMENT}return L});m(e._pe.PeHorizon.prototype,"getCoord",
D=>function(){const v=this.getSize();if(!v)return null;const L=[],aa=D.call(this);A(L,v,aa);return L});m(e._pe.PeGTlistExtendedEntry.prototype,"getEntries",D=>{const v=e._pe._pe_getPeGTlistExtendedGTsSize();return function(){let L=null;var aa=D.call(this);if(!e._pe.compare(aa,e._pe.NULL)){L=[aa];const ia=this.getSteps();if(1<ia){aa=e._pe.getPointer(aa);for(let U=1;U<ia;U++)L.push(e._pe.wrapPointer(aa+v*U,e._pe.PeGTlistExtendedGTs))}}return L}});const M=e._pe._pe_getPeHorizonSize();H=D=>function(){let v=
this._cache;v||(this._cache=v=new Map);if(v.has(D))return v.get(D);let L=null;var aa=D.call(this);if(!e._pe.compare(aa,e._pe.NULL)){L=[aa];const ia=aa.getNump();if(1<ia){aa=e._pe.getPointer(aa);for(let U=1;U<ia;U++)L.push(e._pe.wrapPointer(aa+M*U,e._pe.PeHorizon))}}v.set(D,L);return L};m(e._pe.PeProjcs.prototype,"horizonGcsGenerate",H);m(e._pe.PeProjcs.prototype,"horizonPcsGenerate",H);e._pe.PeObject.prototype.toString=function(D=e.PeDefs.PE_STR_OPTS_NONE){e._pe.ensureCache.prepare();const v=e._pe.getPointer(this),
L=e._pe.ensureInt8(Array(e.PeDefs.PE_BUFFER_MAX));return e._pe.UTF8ToString(e._pe._pe_object_to_string_ext(v,D,L))}}function E(d){if(d){var m=e._pe.getClass(d);m&&(m=e._pe.getCache(m))&&(d=e._pe.getPointer(d))&&delete m[d]}}function ha(d,m){const H=[];m=Array(m);for(let M=0;M<d;M++)H.push(e._pe.ensureInt8(m));return H}function fa(d){let m;Array.isArray(d[0])?(m=[],d.forEach(H=>{m.push(H[0],H[1])})):m=d;return m}function A(d,m,H,M=!1){if(M)for(M=0;M<2*m;M++)d[M]=e._pe.getValue(H+M*Float64Array.BYTES_PER_ELEMENT,
"double");else{M=0===d.length;for(let D=0;D<m;D++)M&&(d[D]=Array(2)),d[D][0]=e._pe.getValue(H,"double"),d[D][1]=e._pe.getValue(H+Float64Array.BYTES_PER_ELEMENT,"double"),H+=2*Float64Array.BYTES_PER_ELEMENT}}let u;e._pe=null;(function(d){function m(D,v,L){e._pe.ensureCache.prepare();var aa=fa(L);const ia=L===aa;aa=e._pe.ensureFloat64(aa);(D=e._pe._pe_geog_to_proj(e._pe.getPointer(D),v,aa))&&A(L,v,aa,ia);return D}function H(D,v,L){return M(D,v,L,0)}function M(D,v,L,aa){e._pe.ensureCache.prepare();var ia=
fa(L);const U=L===ia;ia=e._pe.ensureFloat64(ia);(D=e._pe._pe_proj_to_geog_center(e._pe.getPointer(D),v,ia,aa))&&A(L,v,ia,U);return D}d.geogToProj=m;d.projGeog=function(D,v,L,aa){switch(aa){case e.PeDefs.PE_TRANSFORM_P_TO_G:return H(D,v,L);case e.PeDefs.PE_TRANSFORM_G_TO_P:return m(D,v,L)}return 0};d.projToGeog=H;d.projToGeogCenter=M})(e.PeCSTransformations||(e.PeCSTransformations={}));(function(d){d.init=function(){d.PE_BUFFER_MAX=e._pe.PeDefs.prototype.PE_BUFFER_MAX;d.PE_NAME_MAX=e._pe.PeDefs.prototype.PE_NAME_MAX;
d.PE_MGRS_MAX=e._pe.PeDefs.prototype.PE_MGRS_MAX;d.PE_USNG_MAX=e._pe.PeDefs.prototype.PE_USNG_MAX;d.PE_DD_MAX=e._pe.PeDefs.prototype.PE_DD_MAX;d.PE_DDM_MAX=e._pe.PeDefs.prototype.PE_DDM_MAX;d.PE_DMS_MAX=e._pe.PeDefs.prototype.PE_DMS_MAX;d.PE_UTM_MAX=e._pe.PeDefs.prototype.PE_UTM_MAX;d.PE_PARM_MAX=e._pe.PeDefs.prototype.PE_PARM_MAX;d.PE_TYPE_NONE=e._pe.PeDefs.prototype.PE_TYPE_NONE;d.PE_TYPE_GEOGCS=e._pe.PeDefs.prototype.PE_TYPE_GEOGCS;d.PE_TYPE_PROJCS=e._pe.PeDefs.prototype.PE_TYPE_PROJCS;d.PE_TYPE_GEOGTRAN=
e._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;d.PE_TYPE_COORDSYS=e._pe.PeDefs.prototype.PE_TYPE_COORDSYS;d.PE_TYPE_UNIT=e._pe.PeDefs.prototype.PE_TYPE_UNIT;d.PE_TYPE_LINUNIT=e._pe.PeDefs.prototype.PE_TYPE_LINUNIT;d.PE_STR_OPTS_NONE=e._pe.PeDefs.prototype.PE_STR_OPTS_NONE;d.PE_STR_AUTH_NONE=e._pe.PeDefs.prototype.PE_STR_AUTH_NONE;d.PE_STR_AUTH_TOP=e._pe.PeDefs.prototype.PE_STR_AUTH_TOP;d.PE_STR_NAME_CANON=e._pe.PeDefs.prototype.PE_STR_NAME_CANON;d.PE_PARM_X0=e._pe.PeDefs.prototype.PE_PARM_X0;d.PE_PARM_ND=
e._pe.PeDefs.prototype.PE_PARM_ND;d.PE_TRANSFORM_1_TO_2=e._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;d.PE_TRANSFORM_2_TO_1=e._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;d.PE_TRANSFORM_P_TO_G=e._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;d.PE_TRANSFORM_G_TO_P=e._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;d.PE_HORIZON_RECT=e._pe.PeDefs.prototype.PE_HORIZON_RECT;d.PE_HORIZON_POLY=e._pe.PeDefs.prototype.PE_HORIZON_POLY;d.PE_HORIZON_LINE=e._pe.PeDefs.prototype.PE_HORIZON_LINE;d.PE_HORIZON_DELTA=e._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(e.PeDefs||
(e.PeDefs={}));(function(d){function m(v,L){let aa=null,ia=H[v];ia||(ia={},H[v]=ia);ia.hasOwnProperty(String(L))?aa=ia[L]:(v=e._pe.PeFactory.prototype.factoryByType(v,L),e._pe.compare(v,e._pe.NULL)||(aa=v,ia[L]=aa));return aa=D(aa)}const H={},M={},D=v=>{if(v){const L=v.getType();switch(L){case e.PeDefs.PE_TYPE_GEOGCS:v=e._pe.castObject(v,e._pe.PeGeogcs);break;case e.PeDefs.PE_TYPE_PROJCS:v=e._pe.castObject(v,e._pe.PeProjcs);break;case e.PeDefs.PE_TYPE_GEOGTRAN:v=e._pe.castObject(v,e._pe.PeGeogtran);
break;default:L&e.PeDefs.PE_TYPE_UNIT&&(v=e._pe.castObject(v,e._pe.PeUnit))}}return v};d.initialize=function(){e._pe.PeFactory.prototype.initialize(null)};d.coordsys=function(v){return m(e.PeDefs.PE_TYPE_COORDSYS,v)};d.factoryByType=m;d.fromString=function(v,L){let aa=null,ia=M[v];ia||(ia={},M[v]=ia);ia.hasOwnProperty(L)?aa=ia[L]:(v=e._pe.PeFactory.prototype.fromString(v,L),e._pe.compare(v,e._pe.NULL)||(aa=v,ia[L]=aa));return aa=D(aa)};d.geogcs=function(v){return m(e.PeDefs.PE_TYPE_GEOGCS,v)};d.geogtran=
function(v){return m(e.PeDefs.PE_TYPE_GEOGTRAN,v)};d.getCode=function(v){return e._pe.PeFactory.prototype.getCode(v)};d.projcs=function(v){return m(e.PeDefs.PE_TYPE_PROJCS,v)};d.unit=function(v){return m(e.PeDefs.PE_TYPE_UNIT,v)}})(e.PeFactory||(e.PeFactory={}));e.PeGCSExtent=null;(function(d){let m;d.init=function(){d.PE_GTLIST_OPTS_COMMON=e._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;m=e._pe._pe_getPeGTlistExtendedEntrySize()};d.getGTlist=function(H,M,D,v,L,aa){let ia=null;const U=new e._pe.PeInteger(aa);
try{const F=e._pe.PeGTlistExtended.prototype.getGTlist(H,M,D,v,L,U);if(aa=U.val)if(ia=[F],1<aa){const G=e._pe.getPointer(F);for(H=1;H<aa;H++)ia.push(e._pe.wrapPointer(G+m*H,e._pe.PeGTlistExtendedEntry))}}finally{e._pe.destroy(U)}return ia}})(e.PeGTlistExtended||(e.PeGTlistExtended={}));(function(d){d.destroy=function(m){if(m&&m.length){for(const H of m)E(H),H.getEntries().forEach(M=>{E(M);M=M.getGeogtran();E(M);M.getParameters().forEach(E);[M.getGeogcs1(),M.getGeogcs2()].forEach(D=>{E(D);const v=
D.getDatum();E(v);E(v.getSpheroid());E(D.getPrimem());E(D.getUnit())})});e._pe.PeGTlistExtendedEntry.prototype.Delete(m[0])}}})(e.PeGTlistExtendedEntry||(e.PeGTlistExtendedEntry={}));(function(d){d.geogToGeog=function(m,H,M,D,v){e._pe.ensureCache.prepare();var L=fa(M);const aa=M===L;L=e._pe.ensureFloat64(L);let ia=0;D&&(ia=e._pe.ensureFloat64(D));(m=e._pe._pe_geog_to_geog(e._pe.getPointer(m),H,L,ia,v))&&A(M,H,L,aa);return m}})(e.PeGTTransformations||(e.PeGTTransformations={}));(function(d){const m=
(M,D,v,L,aa,ia)=>{e._pe.ensureCache.prepare();switch(M){case "dd":var U=e._pe._pe_geog_to_dd;var F=e.PeDefs.PE_DD_MAX;break;case "ddm":U=e._pe._pe_geog_to_ddm;F=e.PeDefs.PE_DDM_MAX;break;case "dms":U=e._pe._pe_geog_to_dms,F=e.PeDefs.PE_DMS_MAX}M=0;D&&(M=e._pe.getPointer(D));D=fa(L);D=e._pe.ensureFloat64(D);F=ha(v,F);L=e._pe.ensureInt32(F);if(aa=U(M,v,D,aa,L))for(U=0;U<v;U++)ia[U]=e._pe.UTF8ToString(F[U]);return aa},H=(M,D,v,L,aa)=>{e._pe.ensureCache.prepare();switch(M){case "dd":var ia=e._pe._pe_dd_to_geog;
break;case "ddm":ia=e._pe._pe_ddm_to_geog;break;case "dms":ia=e._pe._pe_dms_to_geog}M=0;D&&(M=e._pe.getPointer(D));D=L.map(U=>e._pe.ensureString(U));L=e._pe.ensureInt32(D);D=e._pe.ensureFloat64(Array(2*v));(ia=ia(M,v,L,D))&&A(aa,v,D);return ia};d.geog_to_dms=function(M,D,v,L,aa){return m("dms",M,D,v,L,aa)};d.dms_to_geog=function(M,D,v,L){return H("dms",M,D,v,L)};d.geog_to_ddm=function(M,D,v,L,aa){return m("ddm",M,D,v,L,aa)};d.ddm_to_geog=function(M,D,v,L){return H("ddm",M,D,v,L)};d.geog_to_dd=function(M,
D,v,L,aa){return m("dd",M,D,v,L,aa)};d.dd_to_geog=function(M,D,v,L){return H("dd",M,D,v,L)}})(e.PeNotationDms||(e.PeNotationDms={}));(function(d){d.init=function(){d.PE_MGRS_STYLE_NEW=e._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;d.PE_MGRS_STYLE_OLD=e._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;d.PE_MGRS_STYLE_AUTO=e._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;d.PE_MGRS_180_ZONE_1_PLUS=e._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;d.PE_MGRS_ADD_SPACES=e._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};
d.geog_to_mgrs_extended=function(m,H,M,D,v,L,aa){e._pe.ensureCache.prepare();let ia=0;m&&(ia=e._pe.getPointer(m));m=fa(M);M=e._pe.ensureFloat64(m);m=ha(H,e.PeDefs.PE_MGRS_MAX);const U=e._pe.ensureInt32(m);if(D=e._pe._pe_geog_to_mgrs_extended(ia,H,M,D,v,L,U))for(v=0;v<H;v++)aa[v]=e._pe.UTF8ToString(m[v]);return D};d.mgrs_to_geog_extended=function(m,H,M,D,v){e._pe.ensureCache.prepare();let L=0;m&&(L=e._pe.getPointer(m));m=M.map(aa=>e._pe.ensureString(aa));M=e._pe.ensureInt32(m);m=e._pe.ensureFloat64(Array(2*
H));(D=e._pe._pe_mgrs_to_geog_extended(L,H,M,D,m))&&A(v,H,m);return D}})(e.PeNotationMgrs||(e.PeNotationMgrs={}));(function(d){d.geog_to_usng=function(m,H,M,D,v,L,aa){e._pe.ensureCache.prepare();let ia=0;m&&(ia=e._pe.getPointer(m));m=fa(M);M=e._pe.ensureFloat64(m);m=ha(H,e.PeDefs.PE_MGRS_MAX);const U=e._pe.ensureInt32(m);if(D=e._pe._pe_geog_to_usng(ia,H,M,D,v,L,U))for(v=0;v<H;v++)aa[v]=e._pe.UTF8ToString(m[v]);return D};d.usng_to_geog=function(m,H,M,D){e._pe.ensureCache.prepare();var v=0;m&&(v=e._pe.getPointer(m));
m=M.map(L=>e._pe.ensureString(L));M=e._pe.ensureInt32(m);m=e._pe.ensureFloat64(Array(2*H));(v=e._pe._pe_usng_to_geog(v,H,M,m))&&A(D,H,m);return v}})(e.PeNotationUsng||(e.PeNotationUsng={}));(function(d){d.init=function(){d.PE_UTM_OPTS_NONE=e._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;d.PE_UTM_OPTS_ADD_SPACES=e._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;d.PE_UTM_OPTS_NS=e._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};d.geog_to_utm=function(m,H,M,D,v){e._pe.ensureCache.prepare();var L=0;m&&
(L=e._pe.getPointer(m));m=fa(M);M=e._pe.ensureFloat64(m);m=ha(H,e.PeDefs.PE_UTM_MAX);const aa=e._pe.ensureInt32(m);if(D=e._pe._pe_geog_to_utm(L,H,M,D,aa))for(L=0;L<H;L++)v[L]=e._pe.UTF8ToString(m[L]);return D};d.utm_to_geog=function(m,H,M,D,v){e._pe.ensureCache.prepare();let L=0;m&&(L=e._pe.getPointer(m));m=M.map(aa=>e._pe.ensureString(aa));M=e._pe.ensureInt32(m);m=e._pe.ensureFloat64(Array(2*H));(D=e._pe._pe_utm_to_geog(L,H,M,D,m))&&A(v,H,m);return D}})(e.PeNotationUtm||(e.PeNotationUtm={}));(function(d){const m=
new Map;d.init=function(){d.PE_PCSINFO_OPTION_NONE=e._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;d.PE_PCSINFO_OPTION_DOMAIN=e._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;d.PE_POLE_OUTSIDE_BOUNDARY=e._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;d.PE_POLE_POINT=e._pe.PePCSInfo.prototype.PE_POLE_POINT};d.generate=function(H,M=d.PE_PCSINFO_OPTION_DOMAIN){let D,v;m.has(H)&&(v=m.get(H),v[M]&&(D=v[M]));D||(D=e._pe.PePCSInfo.prototype.generate(H,M),v||(v=[],m.set(H,v)),v[M]=D);return D}})(e.PePCSInfo||
(e.PePCSInfo={}));(function(d){d.version_string=function(){return e._pe.PeVersion.prototype.version_string()}})(e.PeVersion||(e.PeVersion={}));var B=Object.freeze({__proto__:null,get _pe(){return e._pe},isLoaded:I,isSupported:l,load:r,get PeCSTransformations(){return e.PeCSTransformations},get PeDefs(){return e.PeDefs},get PeFactory(){return e.PeFactory},get PeGCSExtent(){return e.PeGCSExtent},get PeGTlistExtended(){return e.PeGTlistExtended},get PeGTlistExtendedEntry(){return e.PeGTlistExtendedEntry},
get PeGTTransformations(){return e.PeGTTransformations},get PeNotationDms(){return e.PeNotationDms},get PeNotationMgrs(){return e.PeNotationMgrs},get PeNotationUsng(){return e.PeNotationUsng},get PeNotationUtm(){return e.PeNotationUtm},get PePCSInfo(){return e.PePCSInfo},get PeVersion(){return e.PeVersion},_init:q});e._init=q;e.isLoaded=I;e.isSupported=l;e.load=r;e.pe=B})},"esri/assets":function(){define("exports ./config ./core/Logger ./core/Error ./core/urlUtils ./request".split(" "),function(n,
e,Z,K,p,I){function l(q){if(!e.assetsPath)throw r.errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new K("assets:path-not-set","config.assetsPath is not set");return p.join(e.assetsPath,q)}const r=Z.getLogger("esri.assets");n.fetchAsset=function(q,E){return I(l(q),E)};n.getAssetUrl=l;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/request":function(){define("require ./core/global ./core/has ./core/lang ./config ./core/maybe ./core/Error ./core/urlUtils ./core/promiseUtils ./kernel ./support/apiKeyUtils ./support/requestUtils".split(" "),
function(n,e,Z,K,p,I,l,r,q,E,ha,fa){async function A(J,ja){var qa=r.isDataProtocol(J);const pa=r.isBlobProtocol(J);pa||qa||(J=r.normalize(J));const wa={url:J,requestOptions:{...I.unwrap(ja)}};let Ca=r.getInterceptor(J);if(Ca){J=await L(Ca,wa);if(null!=J)return{data:J,getHeader:R,requestOptions:wa.requestOptions,url:wa.url};Ca.after||Ca.error||(Ca=null)}J=wa.url;ja=wa.requestOptions;if("image"===ja.responseType){if(Z("host-webworker")||Z("host-node"))throw d("request:invalid-parameters",Error("responseType 'image' is not supported in Web Workers or Node environment"),
wa);}else if(qa)throw d("request:invalid-parameters",Error("Data URLs are not supported for responseType \x3d "+ja.responseType),wa);if("head"===ja.method){if(ja.body)throw d("request:invalid-parameters",Error("body parameter cannot be set when method is 'head'"),wa);if(qa||pa)throw d("request:invalid-parameters",Error("data and blob URLs are not supported for method 'head'"),wa);}await m();if(N)return N.execute(J,ja);const ea=q.createAbortController();q.onAbort(ja,()=>ea.abort());qa=await U({controller:ea,
credential:null,credentialToken:null,fetchOptions:null,hasToken:!1,interceptor:Ca,params:wa,redoRequest:!1,useIdentity:Q.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1});Ca&&Ca.after&&Ca.after(qa);return qa}function u(J){r.isBlobProtocol(J)||r.isDataProtocol(J)||(J=r.getOrigin(J))&&-1===A._corsServers.indexOf(J)&&A._corsServers.push(J)}function B(J){J=r.getOrigin(J);return!J||J.endsWith(".arcgis.com")||-1!==A._corsServers.indexOf(J)||r.isTrustedServer(J)}function d(J,ja,qa,pa){let wa="Error";
const Ca={url:qa.url,requestOptions:qa.requestOptions,getHeader:R,ssl:!1};if(ja instanceof l)return ja.details?(ja.details=K.clone(ja.details),ja.details.url=qa.url,ja.details.requestOptions=qa.requestOptions):ja.details=Ca,ja;if(ja){qa=pa&&(T=>pa.headers.get(T));const ea=pa&&pa.status,x=ja.message;x&&(wa=x);qa&&(Ca.getHeader=qa);Ca.httpStatus=(null!=ja.httpCode?ja.httpCode:ja.code)||ea||0;Ca.subCode=ja.subcode;Ca.messageCode=ja.messageCode;Ca.messages="string"===typeof ja.details?[ja.details]:ja.details}return q.isAbortError(ja)?
q.createAbortError():new l(J,wa,Ca)}async function m(){Z("host-webworker")?N||(N=await new Promise(function(J,ja){n(["./core/workers/request"],J,ja)})):A._abortableFetch||(A._abortableFetch=e.fetch.bind(e))}async function H(){E.id||await new Promise(function(J,ja){n(["./identity/IdentityManager"],function(qa){J(Object.freeze({__proto__:null,"default":qa}))},ja)})}async function M(J){const ja=J.params.url,qa=J.params.requestOptions,pa=J.controller.signal,wa=qa.body;let Ca=null,ea=null,x=null;P&&"HTMLFormElement"in
e&&(wa instanceof FormData?Ca=wa:wa instanceof HTMLFormElement&&(ea=wa,Ca=new FormData(ea)));"string"===typeof wa&&(x=wa);J.fetchOptions={cache:qa.cacheBust&&!A._abortableFetch.polyfill?"no-cache":"default",credentials:"same-origin",headers:qa.headers||{},method:"head"===qa.method?"HEAD":"GET",mode:"cors",redirect:"follow",signal:pa};if(Ca||x)J.fetchOptions.body=Ca||x;"anonymous"===qa.authMode&&(J.useIdentity=!1);J.hasToken=!!(/token=/i.test(ja)||qa.query&&qa.query.token||Ca&&Ca.get&&Ca.get("token")||
ea&&ea.elements.token);!J.hasToken&&p.apiKey&&ha.supportsApiKey(ja)&&(qa.query||(qa.query={}),qa.query.token=p.apiKey,J.hasToken=!0);if(J.useIdentity&&!J.hasToken&&!J.credentialToken&&!D(ja)&&!q.isAborted(pa)){let T;"immediate"===qa.authMode?(await H(),T=await E.id.getCredential(ja,{signal:pa}),J.credential=T):"no-prompt"===qa.authMode?(await H(),T=await E.id.getCredential(ja,{prompt:!1,signal:pa}).catch(()=>{}),J.credential=T):E.id&&(T=E.id.findCredential(ja));T&&(J.credentialToken=T.token,J.useSSL=
!!T.ssl)}}function D(J){return z.some(ja=>ja.test(J))}async function v(J){let ja=J.params.url;const qa=J.params.requestOptions,pa=J.fetchOptions,wa=r.isBlobProtocol(ja)||r.isDataProtocol(ja),Ca=qa.responseType||"json",ea=wa?0:null!=qa.timeout?qa.timeout:Q.timeout;var x=!1;if(!wa){J.useSSL&&(ja=r.toHTTPS(ja));qa.cacheBust&&"default"===pa.cache&&(ja=r.addQueryParameter(ja,"request.preventCache",Date.now()));var T={...qa.query};J.credentialToken&&(T.token=J.credentialToken);x=r.objectToQuery(T);Z("esri-url-encodes-apostrophe")&&
(x=x.replace(/'/g,"%27"));const f=ja.length+1+x.length;x="delete"===qa.method||"post"===qa.method||"put"===qa.method||!!qa.body||f>Q.maxUrlLength;const V=qa.useProxy||!!r.getProxyRule(ja);if(V){const g=r.getProxyUrl(ja);var ma=g.path;!x&&ma.length+1+f>Q.maxUrlLength&&(x=!0);g.query&&(T={...g.query,...T})}if("HEAD"===pa.method&&(x||V)){if(x){if(f>Q.maxUrlLength)throw d("request:invalid-parameters",Error("URL exceeds maximum length"),J.params);throw d("request:invalid-parameters",Error("cannot use POST request when method is 'head'"),
J.params);}if(V)throw d("request:invalid-parameters",Error("cannot use proxy when method is 'head'"),J.params);}x?(pa.method="delete"===qa.method?"DELETE":"put"===qa.method?"PUT":"POST",qa.body?ja=r.addQueryParameters(ja,T):(pa.body=r.objectToQuery(T),pa.headers["Content-Type"]="application/x-www-form-urlencoded")):ja=r.addQueryParameters(ja,T);V&&(J.useProxy=!0,ja=`${ma}?${ja}`);T.token&&P&&pa.body instanceof FormData&&(ma=pa.body,ma.set?ma.set("token",T.token):ma.append("token",T.token));qa.hasOwnProperty("withCredentials")?
J.withCredentials=qa.withCredentials:r.hasSameOrigin(ja,r.appUrl)||(r.isTrustedServer(ja)?J.withCredentials=!0:E.id&&(T=E.id.findServerInfo(ja))&&T.webTierAuth&&(J.withCredentials=!0));J.withCredentials&&(pa.credentials="include")}T=0;let ya=!1;0<ea&&(T=setTimeout(()=>{ya=!0;J.controller.abort()},ea));let za,b;try{if("image"!==qa.responseType||"default"!==pa.cache||"GET"!==pa.method||x||aa(qa.headers)||!wa&&!J.useProxy&&Q.proxyUrl&&!B(ja)){if(za=await A._abortableFetch(ja,pa),J.useProxy||u(ja),za.ok&&
"HEAD"!==pa.method){switch(Ca){case "array-buffer":b=await za.arrayBuffer();break;case "blob":case "image":b=await za.blob();break;default:b=await za.text()}T&&(clearTimeout(T),T=0);if("json"===Ca||"xml"===Ca||"document"===Ca)if(b)switch(Ca){case "json":b=JSON.parse(b);break;case "xml":b=ia(b,"application/xml");break;case "document":b=ia(b,"text/html")}else b=null;if(b){if("array-buffer"===Ca||"blob"===Ca){const f=za.headers.get("Content-Type");if(/application\/json|text\/plain/i.test(f)&&750>=b["blob"===
Ca?"size":"byteLength"])try{const V=await (new Response(b)).json();V.error&&(b=V)}catch{}}"image"===Ca&&b instanceof Blob&&(b=await G(URL.createObjectURL(b),J,!0))}}}else b=await G(ja,J)}catch(f){if("AbortError"===f.name){if(ya)throw Error("Timeout exceeded");throw q.createAbortError("Request canceled");}if(!za&&f instanceof TypeError&&Q.proxyUrl&&!qa.body&&"delete"!==qa.method&&"head"!==qa.method&&"post"!==qa.method&&"put"!==qa.method&&!J.useProxy)J.redoRequest=!0,r.addProxyRule({proxyUrl:Q.proxyUrl,
urlPrefix:r.removeFile(r.urlToObject(ja).path)});else throw f;}finally{T&&clearTimeout(T)}return[za,b]}async function L(J,ja){if(null!=J.responseData)return J.responseData;J.headers&&(ja.requestOptions.headers={...ja.requestOptions.headers,...J.headers});J.query&&(ja.requestOptions.query={...ja.requestOptions.query,...J.query});if(J.before){let qa,pa;try{pa=await J.before(ja)}catch(wa){qa=d("request:interceptor",wa,ja)}if(pa instanceof Error||pa instanceof l)qa=d("request:interceptor",pa,ja);if(qa)throw J.error&&
J.error(qa),qa;return pa}}function aa(J){if(J)for(const ja of Object.getOwnPropertyNames(J))if(J[ja])return!0;return!1}function ia(J,ja){let qa;try{qa=(new DOMParser).parseFromString(J,ja)}catch{}if(!qa||qa.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return qa}async function U(J){await M(J);let ja;try{do[ja,qa]=await v(J);while(!await F(J,ja,qa))}catch(Ca){var qa=d("request:server",Ca,J.params,ja);qa.details.ssl=J.useSSL;J.interceptor&&J.interceptor.error&&
J.interceptor.error(qa);throw qa;}var pa=J.params.url;/\/sharing\/rest\/(accounts|portals)\/self/i.test(pa)&&!J.hasToken&&!J.credentialToken&&qa&&qa.user&&qa.user.username&&!r.isTrustedServer(pa)&&(pa=r.getOrigin(pa,!0))&&Q.trustedServers.push(pa);if((pa=J.credential)&&E.id){var wa=E.id.findServerInfo(pa.server);if(wa=wa&&wa.owningSystemUrl)wa=wa.replace(/\/?$/,"/sharing"),(pa=E.id.findCredential(wa,pa.userId))&&-1===E.id._getIdenticalSvcIdx(wa,pa)&&pa.resources.unshift(wa)}return{data:qa,getHeader:ja?
Ca=>ja.headers.get(Ca):R,requestOptions:J.params.requestOptions,ssl:J.useSSL,url:J.params.url}}async function F(J,ja,qa){if(J.redoRequest)return J.redoRequest=!1;if(!ja)return!0;if(!ja.ok)throw Error(`Unable to load ${ja.url} status: ${ja.status}`);let pa;qa&&qa.error&&(pa=Object.assign(Error(),qa.error));let wa,Ca,ea;pa&&(wa=Number(pa.code),Ca=pa.hasOwnProperty("subcode")?Number(pa.subcode):null,ea=(ea=pa.messageCode)&&ea.toUpperCase());ja=J.params.requestOptions.authMode;if(403===wa&&(4===Ca||pa.message&&
-1<pa.message.toLowerCase().indexOf("ssl")&&-1===pa.message.toLowerCase().indexOf("permission"))){if(!J.useSSL)return J.useSSL=!0,!1}else if(!J.hasToken&&J.useIdentity&&("no-prompt"!==ja||498===wa)&&-1!==t.indexOf(wa)&&!D(J.params.url)&&(403!==wa||-1===h.indexOf(ea)&&(null==Ca||2===Ca&&J.credentialToken))){await H();try{const x=await E.id.getCredential(J.params.url,{error:d("request:server",pa,J.params),prompt:"no-prompt"!==ja,signal:J.controller.signal,token:J.credentialToken});J.credential=x;J.credentialToken=
x.token;J.useSSL=J.useSSL||x.ssl;return!1}catch(x){if("no-prompt"===ja)return J.credential=null,J.credentialToken=null,!1;pa=x}}if(pa)throw pa;return!0}function G(J,ja,qa=!1){const pa=ja.controller.signal,wa=new Image;wa.crossOrigin=ja.withCredentials?"use-credentials":"anonymous";wa.alt="";wa.src=J;return fa.loadImageAsync(wa,J,qa,pa)}let N;const Q=p.request,P="FormData"in e,t=[499,498,403,401],h=["COM_0056","COM_0057","SB_0008"],z=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],
R=()=>null;A._abortableFetch=null;A._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"];return A})},"esri/support/apiKeyUtils":function(){define(["exports","../core/urlUtils"],function(n,e){const Z=["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"];n.isApiKey=function(K){return K&&4<K.length&&K.startsWith("AAPK")};n.supportsApiKey=function(K){const p=e.getOrigin(K,!0);return p&&p.endsWith(".arcgis.com")&&!Z.includes(p)&&
!K.endsWith("/sharing/rest/generateToken")};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/support/requestUtils":function(){define(["exports","../core/has","../core/maybe","../core/promiseUtils"],function(n,e,Z,K){function p(){try{return new DOMException("Aborted","AbortError")}catch{const I=Error();I.name="AbortError";return I}}n.loadImageAsync=function(I,l,r=!1,q){return new Promise((E,ha)=>{if(K.isAborted(q))ha(p());else{var fa=()=>{B();ha(Error(`Unable to load ${l}`))},A=()=>{const d=
I;B();E(d)},u=()=>{if(I){var d=I;B();d.src="";ha(p())}},B=()=>{e("esri-image-decode")||(I.removeEventListener("error",fa),I.removeEventListener("load",A));I=A=fa=null;Z.isSome(q)&&q.removeEventListener("abort",u);u=null;r&&URL.revokeObjectURL(l)};Z.isSome(q)&&q.addEventListener("abort",u);e("esri-image-decode")?I.decode().then(A,fa):(I.addEventListener("error",fa),I.addEventListener("load",A))}})};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/geometry/support/aaBoundingRect":function(){define(["exports",
"../../core/has","../../core/maybe","../Extent"],function(n,e,Z,K){function p(u=A){return[u[0],u[1],u[2],u[3]]}function I(u){return u[0]>=u[2]?0:u[2]-u[0]}function l(u){return u[1]>=u[3]?0:u[3]-u[1]}function r(u,B,d){return B>=u[0]&&d>=u[1]&&B<=u[2]&&d<=u[3]}function q(u,B){u[0]=B[0];u[1]=B[1];u[2]=B[2];u[3]=B[3];return u}function E(u){return 4===u.length}function ha(u,B,d){return u<B?B:u>d?d:u}const fa=[Infinity,Infinity,-Infinity,-Infinity],A=[0,0,0,0];n.NEGATIVE_INFINITY=fa;n.POSITIVE_INFINITY=
[-Infinity,-Infinity,Infinity,Infinity];n.UNIT=[0,0,1,1];n.ZERO=A;n.allFinite=function(u){for(let B=0;4>B;B++)if(!isFinite(u[B]))return!1;return!0};n.area=function(u){return I(u)*l(u)};n.center=function(u,B=[0,0]){B[0]=(u[0]+u[2])/2;B[1]=(u[1]+u[3])/2;return B};n.clone=function(u){return[u[0],u[1],u[2],u[3]]};n.contains=function(u,B){return B[0]>=u[0]&&B[2]<=u[2]&&B[1]>=u[1]&&B[3]<=u[3]};n.containsPoint=function(u,B){return r(u,B[0],B[1])};n.containsPointObject=function(u,B){return r(u,B.x,B.y)};
n.containsPointWithMargin=function(u,B,d){return B[0]>=u[0]-d&&B[1]>=u[1]-d&&B[0]<=u[2]+d&&B[1]<=u[3]+d};n.containsXY=r;n.create=p;n.diameter=function(u){const B=I(u);u=l(u);return Math.sqrt(B*B+u*u)};n.distance=function(u,B){const d=(u[1]+u[3])/2,m=Math.max(Math.abs(B[0]-(u[0]+u[2])/2)-I(u)/2,0);u=Math.max(Math.abs(B[1]-d)-l(u)/2,0);return Math.sqrt(m*m+u*u)};n.empty=function(u){return u?q(u,fa):p(fa)};n.equals=function(u,B,d){if(Z.isNone(u)||Z.isNone(B))return u===B;if(!E(u)||!E(B))return!1;if(d)for(let m=
0;m<u.length;m++){if(!d(u[m],B[m]))return!1}else for(d=0;d<u.length;d++)if(u[d]!==B[d])return!1;return!0};n.expand=function(u,B,d=u){if("length"in B)if(E(B))d[0]=Math.min(u[0],B[0]),d[1]=Math.min(u[1],B[1]),d[2]=Math.max(u[2],B[2]),d[3]=Math.max(u[3],B[3]);else{if(2===B.length||3===B.length)d[0]=Math.min(u[0],B[0]),d[1]=Math.min(u[1],B[1]),d[2]=Math.max(u[2],B[0]),d[3]=Math.max(u[3],B[1])}else switch(B.type){case "extent":d[0]=Math.min(u[0],B.xmin);d[1]=Math.min(u[1],B.ymin);d[2]=Math.max(u[2],B.xmax);
d[3]=Math.max(u[3],B.ymax);break;case "point":d[0]=Math.min(u[0],B.x),d[1]=Math.min(u[1],B.y),d[2]=Math.max(u[2],B.x),d[3]=Math.max(u[3],B.y)}return d};n.expandPointInPlace=function(u,B){B[0]<u[0]&&(u[0]=B[0]);B[0]>u[2]&&(u[2]=B[0]);B[1]<u[1]&&(u[1]=B[1]);B[1]>u[3]&&(u[3]=B[1])};n.expandWithNestedArray=function(u,B,d=u){const m=B.length;let H=u[0],M=u[1],D=u[2];u=u[3];for(let v=0;v<m;v++){const L=B[v];H=Math.min(H,L[0]);M=Math.min(M,L[1]);D=Math.max(D,L[0]);u=Math.max(u,L[1])}d[0]=H;d[1]=M;d[2]=D;
d[3]=u;return d};n.fromExtent=function(u,B=p()){B[0]=u.xmin;B[1]=u.ymin;B[2]=u.xmax;B[3]=u.ymax;return B};n.fromValues=function(u,B,d,m,H=p()){H[0]=u;H[1]=B;H[2]=d;H[3]=m;return H};n.height=l;n.intersection=function(u,B,d=u){const m=B[0],H=B[1],M=B[2];B=B[3];d[0]=ha(u[0],m,M);d[1]=ha(u[1],H,B);d[2]=ha(u[2],m,M);d[3]=ha(u[3],H,B);return d};n.intersects=function(u,B){return Math.max(B[0],u[0])<=Math.min(B[2],u[2])&&Math.max(B[1],u[1])<=Math.min(B[3],u[3])};n.is=E;n.isPoint=function(u){return(0===I(u)||
!isFinite(u[0]))&&(0===l(u)||!isFinite(u[1]))};n.offset=function(u,B,d,m=u){m[0]=u[0]+B;m[1]=u[1]+d;m[2]=u[2]+B;m[3]=u[3]+d;return m};n.pad=function(u,B,d=u){d[0]=u[0]-B;d[1]=u[1]-B;d[2]=u[2]+B;d[3]=u[3]+B;return d};n.set=q;n.setMax=function(u,B,d=u){d[2]=B[0];d[3]=B[1];d!==u&&(d[0]=u[0],d[1]=u[1]);return u};n.setMin=function(u,B,d=u){d[0]=B[0];d[1]=B[1];d!==u&&(d[2]=u[2],d[3]=u[3]);return d};n.size=function(u,B){B[0]=u[2]-u[0];B[1]=u[3]-u[1]};n.toExtent=function(u,B){return new K({xmin:u[0],ymin:u[1],
xmax:u[2],ymax:u[3],spatialReference:B})};n.width=I;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/geometry/support/geodesicConstants":function(){define(["exports","./Ellipsoid"],function(n,e){const Z=Math.PI/180;var K=e.earth.radius;const p=e.earth.eccentricitySquared;K={a1:K*p,a2:K*p*K*p,a3:K*p*p/2,a4:K*p*K*p*2.5,a5:K*p+K*p*p/2,a6:1-p};e={4326:{a:e.earth.radius,f:e.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,f:0},104902:{a:6051800,f:0},104903:{a:e.moon.radius,f:e.moon.flattening},
104904:{a:3393400,f:.005207166853303471},104905:{a:e.mars.radius,f:e.mars.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1E4,f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},104914:{a:4E4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,f:3},104922:{a:18E3,f:0},104923:{a:14E3,f:0},104924:{a:49300,f:0},104925:{a:60268E3,
f:.09796243445941462},104926:{a:16E3,f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,f:0},104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,f:0},104938:{a:11E4,f:0},104939:{a:50100,f:0},104940:{a:764E3,f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},104945:{a:578900,f:0},104946:{a:33E3,f:0},104947:{a:21E3,f:0},104948:{a:13E3,
f:0},104949:{a:31E3,f:0},104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},104961:{a:74E3,f:0},104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,f:0},104968:{a:1352600,f:0},104969:{a:1195E3,f:0},104970:{a:593E3,f:0},104971:{a:e.mars.radius,
f:0},104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};n.WKT_SPHEROID_REGEX=/SPHEROID\[([^\]]+)]/i;n.earthEllipsoidConstants=K;n.spheroids=e;n.toRadians=Z;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/geometry/support/GeographicTransformation":function(){define(["./GeographicTransformationStep"],function(n){return function(){function e(K){this.steps=[];this._cached_projection={};this._chain="";this._gtlistentry=null;if(K&&K.steps)for(const p of K.steps)p instanceof n?this.steps.push(p):
this.steps.push(new n({wkid:p.wkid,wkt:p.wkt,isInverse:p.isInverse}))}e.cacheKey=function(K,p){return[void 0!==K.wkid&&null!==K.wkid?K.wkid.toString():"-1",void 0!==K.wkt&&null!==K.wkt?K.wkt.toString():"",void 0!==p.wkid&&null!==p.wkid?p.wkid.toString():"-1",void 0!==p.wkt&&null!==p.wkt?p.wkt.toString():""].join()};e.fromGE=function(K){const p=new e;let I="";for(const l of K.steps)K=n.fromGE(l),p.steps.push(K),I+=K.uid.toString()+",";p._cached_projection={};p._gtlistentry=null;p._chain=I;return p};
var Z=e.prototype;Z.getInverse=function(){const K=new e;K.steps=[];for(let p=this.steps.length-1;0<=p;p--)K.steps.push(this.steps[p].getInverse());return K};Z.getGTListEntry=function(){let K="";for(const p of this.steps)K+=p.uid.toString()+",";K!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=K);return this._gtlistentry};Z.assignCachedGe=function(K,p,I){this._cached_projection[e.cacheKey(K,p)]=I};Z.getCachedGeTransformation=function(K,p){let I="";for(const l of this.steps)I+=
l.uid.toString()+",";I!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=I);K=this._cached_projection[e.cacheKey(K,p)];return void 0===K?null:K};return e}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(n){let e=0;return function(){function Z(K=null){this.uid=e++;K?(this._wkt=void 0!==K.wkt?K.wkt:null,this._wkid=void 0!==K.wkid?K.wkid:-1,this._isInverse=void 0!==K.isInverse?!0===K.isInverse:
!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}Z.fromGE=function(K){const p=new Z;p._wkt=K.wkt;p._wkid=K.wkid;p._isInverse=K.isInverse;return p};Z.prototype.getInverse=function(){const K=new Z;K._wkt=this.wkt;K._wkid=this._wkid;K._isInverse=!this.isInverse;return K};n._createClass(Z,[{key:"wkt",get:function(){return this._wkt},set:function(K){this._wkt=K;this.uid=e++}},{key:"wkid",get:function(){return this._wkid},set:function(K){this._wkid=K;this.uid=e++}},{key:"isInverse",get:function(){return this._isInverse},
set:function(K){this._isInverse=K;this.uid=e++}}]);return Z}()})},"esri/geometry/geometryAdapters/json":function(){define(["exports"],function(n){let e=function(l,r,q){this.x=l;this.y=r;this.spatialReference=q;this.m=this.z=void 0},Z=function(l,r,q,E){this.rings=l;this.spatialReference=r;this.hasM=this.hasZ=void 0;q&&(this.hasZ=q);E&&(this.hasM=E)},K=function(l,r,q,E){this.paths=l;this.spatialReference=r;this.hasM=this.hasZ=void 0;q&&(this.hasZ=q);E&&(this.hasM=E)},p=function(l,r,q,E){this.points=
l;this.spatialReference=r;this.hasM=this.hasZ=void 0;q&&(this.hasZ=q);E&&(this.hasM=E)},I=function(l,r,q,E,ha){this.xmin=l;this.ymin=r;this.xmax=q;this.ymax=E;this.spatialReference=ha;this.mmax=this.mmin=this.zmax=this.zmin=void 0};n.jsonAdapter={convertToGEGeometry:function(l,r){return null==r?null:l.convertJSONToGeometry(r)},exportPoint:function(l,r,q){q=new e(l.getPointX(r),l.getPointY(r),q);const E=l.hasZ(r),ha=l.hasM(r);E&&(q.z=l.getPointZ(r));ha&&(q.m=l.getPointM(r));return q},exportPolygon:function(l,
r,q){return new Z(l.exportPaths(r),q,l.hasZ(r),l.hasM(r))},exportPolyline:function(l,r,q){return new K(l.exportPaths(r),q,l.hasZ(r),l.hasM(r))},exportMultipoint:function(l,r,q){return new p(l.exportPoints(r),q,l.hasZ(r),l.hasM(r))},exportExtent:function(l,r,q){var E=l.hasZ(r);const ha=l.hasM(r);q=new I(l.getXMin(r),l.getYMin(r),l.getXMax(r),l.getYMax(r),q);E&&(E=l.getZExtent(r),q.zmin=E.vmin,q.zmax=E.vmax);ha&&(l=l.getMExtent(r),q.mmin=l.vmin,q.mmax=l.vmax);return q}};Object.defineProperty(n,"__esModule",
{value:!0})})},"esri/layers/graphics/data/FeatureStore":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../core/Logger ../../../core/Error ../../../core/Evented ../../../geometry/support/aaBoundingRect ../featureConversionUtils ../../../geometry/support/aaBoundingBox ./BoundsStore ./optimizedFeatureQueryEngineAdapter".split(" "),function(n,e,Z,K,p,I,l,r,q,E){return function(){function ha(A){this.geometryInfo=A;this._boundsStore=new q.BoundsStore;this._featuresById=
new Map;this._markedIds=new Set;this.events=new p;this.featureAdapter=E.optimizedFeatureQueryEngineAdapter}var fa=ha.prototype;fa.add=function(A){this._add(A);this._emitChanged()};fa.addMany=function(A){for(const u of A)this._add(u);this._emitChanged()};fa.clear=function(){this._featuresById.clear();this._boundsStore.clear();this._emitChanged()};fa.removeById=function(A){A=this._featuresById.get(A);if(!A)return null;this._remove(A);this._emitChanged();return A};fa.removeManyById=function(A){this._boundsStore.invalidateIndex();
for(const u of A)(A=this._featuresById.get(u))&&this._remove(A);this._emitChanged()};fa.forEachBounds=function(A,u,B){for(const d of A)(A=this._boundsStore.get(d.objectId))&&u(r.fromRect(B,A))};fa.getFeature=function(A){return this._featuresById.get(A)};fa.has=function(A){return this._featuresById.has(A)};fa.forEach=function(A){this._featuresById.forEach(u=>A(u))};fa.forEachInBounds=function(A,u){this._boundsStore.forEachInBounds(A,B=>{u(this._featuresById.get(B))})};fa.startMarkingUsedFeatures=function(){this._boundsStore.invalidateIndex();
this._markedIds.clear()};fa.sweep=function(){let A=!1;this._featuresById.forEach((u,B)=>{this._markedIds.has(B)||(A=!0,this._remove(u))});this._markedIds.clear();A&&this._emitChanged()};fa._emitChanged=function(){this.events.emit("changed",void 0)};fa._add=function(A){if(A){var u=A.objectId;if(null==u)Z.getLogger("esri.layers.graphics.data.FeatureStore").error(new K("featurestore:invalid-feature","feature id is missing",{feature:A}));else{var B=this._featuresById.get(u);this._markedIds.add(u);if(B){A.displayId=
B.displayId;var d=this._boundsStore.get(u);this._boundsStore.delete(u)}else if(e.isSome(this.onFeatureAdd))this.onFeatureAdd(A);A.geometry&&A.geometry.coords&&A.geometry.coords.length?(d=l.getBoundsOptimizedGeometry(d||I.create(),A.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),this._boundsStore.set(u,d)):this._boundsStore.set(u,null);this._featuresById.set(u,A)}}};fa._remove=function(A){if(e.isSome(this.onFeatureRemove))this.onFeatureRemove(A);this._markedIds.delete(A.objectId);this._boundsStore.delete(A.objectId);
this._featuresById.delete(A.objectId);return A};n._createClass(ha,[{key:"geometryType",get:function(){return this.geometryInfo.geometryType}},{key:"hasM",get:function(){return this.geometryInfo.hasM}},{key:"hasZ",get:function(){return this.geometryInfo.hasZ}},{key:"numFeatures",get:function(){return this._featuresById.size}},{key:"fullBounds",get:function(){if(!this.numFeatures)return null;const A=I.create(I.NEGATIVE_INFINITY);this._featuresById.forEach(u=>{if(u=this._boundsStore.get(u.objectId))A[0]=
Math.min(u[0],A[0]),A[1]=Math.min(u[1],A[1]),A[2]=Math.max(u[2],A[2]),A[3]=Math.max(u[3],A[3])});return A}},{key:"storeStatistics",get:function(){let A=0;this._featuresById.forEach(u=>{u.geometry&&u.geometry.coords&&(A+=u.geometry.coords.length)});return{featureCount:this._featuresById.size,vertexCount:A/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}}]);return ha}()})},"esri/core/Evented":function(){define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","./handleUtils","./accessorSupport/decorators/subclass",
"./Accessor"],function(n,e,Z,K,p){let I=function(){function l(){this._emitter=new l.EventEmitter(this)}var r=l.prototype;r.emit=function(q,E){return this._emitter.emit(q,E)};r.on=function(q,E){return this._emitter.on(q,E)};r.once=function(q,E){return this._emitter.once(q,E)};r.hasEventListener=function(q){return this._emitter.hasEventListener(q)};return l}();(function(l){let r=function(){function E(fa=null){this.target=fa;this._listenersMap=null}var ha=E.prototype;ha.clear=function(){this._listenersMap&&
this._listenersMap.clear()};ha.emit=function(fa,A){fa=this._listenersMap&&this._listenersMap.get(fa);if(!fa)return!1;const u=this.target||this;[...fa].forEach(B=>{B.call(u,A)});return 0<fa.length};ha.on=function(fa,A){if(Array.isArray(fa)){var u=fa.map(B=>this.on(B,A));return Z.handlesGroup(u)}if(-1<fa.indexOf(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||(this._listenersMap=new Map);u=this._listenersMap.get(fa)||[];u.push(A);
this._listenersMap.set(fa,u);return{remove:()=>{const B=this._listenersMap&&this._listenersMap.get(fa)||[],d=B.indexOf(A);0<=d&&B.splice(d,1)}}};ha.once=function(fa,A){const u=this.on(fa,B=>{u.remove();A.call(null,B)});return u};ha.hasEventListener=function(fa){fa=this._listenersMap&&this._listenersMap.get(fa);return null!=fa&&0<fa.length};return E}();l.EventEmitter=r;l.EventedMixin=E=>{E=function(ha){function fa(){var u=ha.apply(this,arguments)||this;u._emitter=new r;return u}n._inheritsLoose(fa,
ha);var A=fa.prototype;A.destroy=function(){this._emitter.clear()};A.emit=function(u,B){return this._emitter.emit(u,B)};A.on=function(u,B){return this._emitter.on(u,B)};A.once=function(u,B){return this._emitter.once(u,B)};A.hasEventListener=function(u){return this._emitter.hasEventListener(u)};return fa}(E);return E=e.__decorate([K.subclass("esri.core.Evented")],E)};let q=function(E){function ha(){var A=E.apply(this,arguments)||this;A._emitter=new I.EventEmitter(n._assertThisInitialized(A));return A}
n._inheritsLoose(ha,E);var fa=ha.prototype;fa.emit=function(A,u){return this._emitter.emit(A,u)};fa.on=function(A,u){return this._emitter.on(A,u)};fa.once=function(A,u){return this._emitter.once(A,u)};fa.hasEventListener=function(A){return this._emitter.hasEventListener(A)};return ha}(p);q=e.__decorate([K.subclass("esri.core.Evented")],q);l.EventedAccessor=q})(I||(I={}));return I})},"esri/geometry/support/aaBoundingBox":function(){define(["exports","../../core/maybe","../Extent","./aaBoundingRect"],
function(n,e,Z,K){function p(d=u){return[d[0],d[1],d[2],d[3],d[4],d[5]]}function I(d,m,H,M,D,v,L=p()){L[0]=d;L[1]=m;L[2]=H;L[3]=M;L[4]=D;L[5]=v;return L}function l(d){return d[0]>=d[3]?0:d[3]-d[0]}function r(d){return d[1]>=d[4]?0:d[4]-d[1]}function q(d){return d[2]>=d[5]?0:d[5]-d[2]}function E(d,m){return Math.max(m[0],d[0])<=Math.min(m[3],d[3])&&Math.max(m[1],d[1])<=Math.min(m[4],d[4])&&Math.max(m[2],d[2])<=Math.min(m[5],d[5])}function ha(d,m){d[0]=m[0];d[1]=m[1];d[2]=m[2];d[3]=m[3];d[4]=m[4];d[5]=
m[5];return d}function fa(d){return 6===d.length}const A=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity],u=[0,0,0,0,0,0],B=p();n.NEGATIVE_INFINITY=A;n.POSITIVE_INFINITY=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];n.ZERO=u;n.allFinite=function(d){for(let m=0;6>m;m++)if(!isFinite(d[m]))return!1;return!0};n.center=function(d,m=[0,0,0]){m[0]=d[0]+l(d)/2;m[1]=d[1]+r(d)/2;m[2]=d[2]+q(d)/2;return m};n.contains=function(d,m){return m[0]>=d[0]&&m[1]>=d[1]&&m[2]>=d[2]&&m[3]<=d[3]&&
m[4]<=d[4]&&m[5]<=d[5]};n.containsPoint=function(d,m){return m[0]>=d[0]&&m[1]>=d[1]&&m[2]>=d[2]&&m[0]<=d[3]&&m[1]<=d[4]&&m[2]<=d[5]};n.containsPointWithMargin=function(d,m,H){return m[0]>=d[0]-H&&m[1]>=d[1]-H&&m[2]>=d[2]-H&&m[0]<=d[3]+H&&m[1]<=d[4]+H&&m[2]<=d[5]+H};n.create=p;n.depth=r;n.diameter=function(d){const m=l(d),H=q(d);d=r(d);return Math.sqrt(m*m+H*H+d*d)};n.empty=function(d){return d?ha(d,A):p(A)};n.equals=function(d,m,H){if(e.isNone(d)||e.isNone(m))return d===m;if(!fa(d)||!fa(m))return!1;
if(H)for(let M=0;M<d.length;M++){if(!H(d[M],m[M]))return!1}else for(H=0;H<d.length;H++)if(d[H]!==m[H])return!1;return!0};n.expandWithAABB=function(d,m){d[0]=Math.min(d[0],m[0]);d[1]=Math.min(d[1],m[1]);d[2]=Math.min(d[2],m[2]);d[3]=Math.max(d[3],m[3]);d[4]=Math.max(d[4],m[4]);d[5]=Math.max(d[5],m[5])};n.expandWithBuffer=function(d,m,H=0,M=m.length/3){let D=d[0],v=d[1],L=d[2],aa=d[3],ia=d[4],U=d[5];for(let F=0;F<M;F++)D=Math.min(D,m[H+3*F]),v=Math.min(v,m[H+3*F+1]),L=Math.min(L,m[H+3*F+2]),aa=Math.max(aa,
m[H+3*F]),ia=Math.max(ia,m[H+3*F+1]),U=Math.max(U,m[H+3*F+2]);d[0]=D;d[1]=v;d[2]=L;d[3]=aa;d[4]=ia;d[5]=U};n.expandWithNestedArray=function(d,m,H){const M=m.length;let D=d[0],v=d[1],L=d[2],aa=d[3],ia=d[4],U=d[5];if(H)for(H=0;H<M;H++){var F=m[H];D=Math.min(D,F[0]);v=Math.min(v,F[1]);L=Math.min(L,F[2]);aa=Math.max(aa,F[0]);ia=Math.max(ia,F[1]);U=Math.max(U,F[2])}else for(H=0;H<M;H++)F=m[H],D=Math.min(D,F[0]),v=Math.min(v,F[1]),aa=Math.max(aa,F[0]),ia=Math.max(ia,F[1]);d[0]=D;d[1]=v;d[2]=L;d[3]=aa;d[4]=
ia;d[5]=U};n.expandWithOffset=function(d,m,H,M){d[0]=Math.min(d[0],d[0]+m);d[3]=Math.max(d[3],d[3]+m);d[1]=Math.min(d[1],d[1]+H);d[4]=Math.max(d[4],d[4]+H);d[2]=Math.min(d[2],d[2]+M);d[5]=Math.max(d[5],d[5]+M)};n.expandWithRect=function(d,m){d[0]=Math.min(d[0],m[0]);d[1]=Math.min(d[1],m[1]);d[3]=Math.max(d[3],m[2]);d[4]=Math.max(d[4],m[3])};n.expandWithVec3=function(d,m){d[0]=Math.min(d[0],m[0]);d[1]=Math.min(d[1],m[1]);d[2]=Math.min(d[2],m[2]);d[3]=Math.max(d[3],m[0]);d[4]=Math.max(d[4],m[1]);d[5]=
Math.max(d[5],m[2])};n.fromExtent=function(d,m=p()){m[0]=d.xmin;m[1]=d.ymin;m[2]=d.zmin;m[3]=d.xmax;m[4]=d.ymax;m[5]=d.zmax;return m};n.fromMinMax=function(d,m,H=p()){H[0]=d[0];H[1]=d[1];H[2]=d[2];H[3]=m[0];H[4]=m[1];H[5]=m[2];return H};n.fromRect=function(d,m){d[0]=m[0];d[1]=m[1];d[2]=Number.NEGATIVE_INFINITY;d[3]=m[2];d[4]=m[3];d[5]=Number.POSITIVE_INFINITY;return d};n.fromValues=I;n.getMax=function(d,m){m[0]=d[3];m[1]=d[4];m[2]=d[5];return m};n.getMin=function(d,m){m[0]=d[0];m[1]=d[1];m[2]=d[2];
return m};n.height=q;n.intersects=E;n.intersectsClippingArea=function(d,m){return e.isNone(m)?!0:E(d,m)};n.is=fa;n.isPoint=function(d){return 0===l(d)&&0===r(d)&&0===q(d)};n.maximumDimension=function(d){return Math.max(l(d),q(d),r(d))};n.offset=function(d,m,H,M,D=d){D[0]=d[0]+m;D[1]=d[1]+H;D[2]=d[2]+M;D[3]=d[3]+m;D[4]=d[4]+H;D[5]=d[5]+M;return D};n.scale=function(d,m,H=d){const M=d[0]+l(d)/2,D=d[1]+r(d)/2,v=d[2]+q(d)/2;H[0]=M+(d[0]-M)*m;H[1]=D+(d[1]-D)*m;H[2]=v+(d[2]-v)*m;H[3]=M+(d[3]-M)*m;H[4]=D+
(d[4]-D)*m;H[5]=v+(d[5]-v)*m;return H};n.set=ha;n.setMax=function(d,m,H=d){H[3]=m[0];H[4]=m[1];H[5]=m[2];H!==d&&(H[0]=d[0],H[1]=d[1],H[2]=d[2]);return d};n.setMin=function(d,m,H=d){H[0]=m[0];H[1]=m[1];H[2]=m[2];H!==d&&(H[3]=d[3],H[4]=d[4],H[5]=d[5]);return H};n.size=function(d,m=[0,0,0]){m[0]=l(d);m[1]=r(d);m[2]=q(d);return m};n.toExtent=function(d,m){return isFinite(d[2])||isFinite(d[5])?new Z({xmin:d[0],xmax:d[3],ymin:d[1],ymax:d[4],zmin:d[2],zmax:d[5],spatialReference:m}):new Z({xmin:d[0],xmax:d[3],
ymin:d[1],ymax:d[4],spatialReference:m})};n.toRect=function(d,m){m||(m=K.create());m[0]=d[0];m[1]=d[1];m[2]=d[3];m[3]=d[4];return m};n.width=l;n.wrap=function(d,m,H,M,D,v){return I(d,m,H,M,D,v,B)};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/graphics/data/BoundsStore":function(){define(["exports","../../../core/has","../../../core/libs/rbush/PooledRBush"],function(n,e,Z){function K(l,r,q){p.minX=r[0];p.minY=r[1];p.maxX=r[2];p.maxY=r[3];l.search(p,q)}const p={minX:0,minY:0,maxX:0,
maxY:0};let I=function(){function l(){this._indexInvalid=!1;this._boundsToLoad=[];this._boundsById=new Map;this._idByBounds=new Map;this._index=new Z.PooledRBush(9,e("csp-restrictions")?q=>({minX:q[0],minY:q[1],maxX:q[2],maxY:q[3]}):["[0]","[1]","[2]","[3]"]);this._loadIndex=()=>{if(this._indexInvalid){const q=Array(this._idByBounds.size);let E=0;this._idByBounds.forEach((ha,fa)=>{q[E++]=fa});this._indexInvalid=!1;this._index.clear();this._index.load(q)}else this._boundsToLoad.length&&(this._index.load(this._boundsToLoad.filter(q=>
this._idByBounds.has(q))),this._boundsToLoad.length=0)}}var r=l.prototype;r.clear=function(){this._indexInvalid=!1;this._boundsToLoad.length=0;this._boundsById.clear();this._idByBounds.clear();this._index.clear()};r.delete=function(q){const E=this._boundsById.get(q);this._boundsById.delete(q);E&&(this._idByBounds.delete(E),this._indexInvalid||this._index.remove(E))};r.forEachInBounds=function(q,E){this._loadIndex();K(this._index,q,ha=>E(this._idByBounds.get(ha)))};r.get=function(q){return this._boundsById.get(q)};
r.has=function(q){return this._boundsById.has(q)};r.invalidateIndex=function(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)};r.set=function(q,E){if(!this._indexInvalid){const ha=this._boundsById.get(q);ha&&(this._index.remove(ha),this._idByBounds.delete(ha))}this._boundsById.set(q,E);E&&(this._idByBounds.set(E,q),this._indexInvalid||(this._boundsToLoad.push(E),5E4<this._boundsToLoad.length&&this._loadIndex()))};return l}();n.BoundsStore=I;Object.defineProperty(n,"__esModule",
{value:!0})})},"esri/core/libs/rbush/PooledRBush":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../maybe ../../arrayUtils ../../PooledArray ../../../chunks/quickselect".split(" "),function(n,e,Z,K,p,I){function l(U,F){r(U,0,U.children.length,F,U)}function r(U,F,G,N,Q){Q||(Q=new aa([]));Q.minX=Infinity;Q.minY=Infinity;Q.maxX=-Infinity;Q.maxY=-Infinity;for(let P=F,t;P<G;P++)t=U.children[P],q(Q,U.leaf?N(t):t);return Q}function q(U,F){U.minX=Math.min(U.minX,F.minX);U.minY=Math.min(U.minY,
F.minY);U.maxX=Math.max(U.maxX,F.maxX);U.maxY=Math.max(U.maxY,F.maxY)}function E(U,F){return U.minX-F.minX}function ha(U,F){return U.minY-F.minY}function fa(U){return(U.maxX-U.minX)*(U.maxY-U.minY)}function A(U){return U.maxX-U.minX+(U.maxY-U.minY)}function u(U,F){return U.minX<=F.minX&&U.minY<=F.minY&&F.maxX<=U.maxX&&F.maxY<=U.maxY}function B(U,F){return F.minX<=U.maxX&&F.minY<=U.maxY&&F.maxX>=U.minX&&F.maxY>=U.minY}function d(U,F,G,N,Q){for(F=[F,G];F.length;){G=Z.assumeNonNull(F.pop());const P=
Z.assumeNonNull(F.pop());if(G-P<=N)continue;const t=P+Math.ceil((G-P)/N/2)*N;I.quickselect(U,t,P,G,Q);F.push(P,t,t,G)}}let m=function(){function U(G=9,N){this.compareMinX=E;this.compareMinY=ha;this.toBBox=function(Q){return Q};this._maxEntries=Math.max(4,G||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));N&&("function"===typeof N?this.toBBox=N:this._initFormat(N));this.clear()}var F=U.prototype;F.destroy=function(){this.clear();H.prune();M.prune();D.prune();v.prune()};F.all=function(G){this._all(this.data,
G)};F.search=function(G,N){let Q=this.data;const P=this.toBBox;if(B(G,Q))for(H.clear();Q;){for(let t=0,h=Q.children.length;t<h;t++){const z=Q.children[t],R=Q.leaf?P(z):z;B(G,R)&&(Q.leaf?N(z):u(G,R)?this._all(z,N):H.push(z))}Q=H.pop()}};F.collides=function(G){let N=this.data;const Q=this.toBBox;if(!B(G,N))return!1;for(H.clear();N;){for(let P=0,t=N.children.length;P<t;P++){const h=N.children[P],z=N.leaf?Q(h):h;if(B(G,z)){if(N.leaf||u(G,z))return!0;H.push(h)}}N=H.pop()}return!1};F.load=function(G){if(!G.length)return this;
if(G.length<this._minEntries){for(let N=0,Q=G.length;N<Q;N++)this.insert(G[N]);return this}G=this._build(G.slice(0,G.length),0,G.length-1,0);if(this.data.children.length)if(this.data.height===G.height)this._splitRoot(this.data,G);else{if(this.data.height<G.height){const N=this.data;this.data=G;G=N}this._insert(G,this.data.height-G.height-1,!0)}else this.data=G;return this};F.insert=function(G){G&&this._insert(G,this.data.height-1);return this};F.clear=function(){this.data=new aa([]);return this};
F.remove=function(G){if(!G)return this;let N=this.data,Q=null,P=0,t=!1,h;const z=this.toBBox(G);D.clear();for(v.clear();N||0<D.length;){if(!N){var R;N=Z.assumeNonNull(D.pop());Q=D.data[D.length-1];P=null!=(R=v.pop())?R:0;t=!0}if(N.leaf&&(h=K.indexOf(N.children,G,N.children.length,N.indexHint),-1!==h)){N.children.splice(h,1);D.push(N);this._condense(D);break}t||N.leaf||!u(N,z)?Q?(P++,N=Q.children[P],t=!1):N=null:(D.push(N),v.push(P),P=0,Q=N,N=N.children[0])}return this};F.toJSON=function(){return this.data};
F.fromJSON=function(G){this.data=G;return this};F._all=function(G,N){for(M.clear();G;){var Q;if(!0===G.leaf)for(const P of G.children)N(P);else M.pushArray(G.children);G=null!=(Q=M.pop())?Q:null}};F._build=function(G,N,Q,P){var t=Q-N+1,h=this._maxEntries;if(t<=h)return G=new aa(G.slice(N,Q+1)),l(G,this.toBBox),G;P||(P=Math.ceil(Math.log(t)/Math.log(h)),h=Math.ceil(t/h**(P-1)));const z=new ia([]);z.height=P;t=Math.ceil(t/h);h=t*Math.ceil(Math.sqrt(h));for(d(G,N,Q,h,this.compareMinX);N<=Q;N+=h){const R=
Math.min(N+h-1,Q);d(G,N,R,t,this.compareMinY);for(let J=N;J<=R;J+=t)z.children.push(this._build(G,J,Math.min(J+t-1,R),P-1))}l(z,this.toBBox);return z};F._chooseSubtree=function(G,N,Q,P){for(;;){P.push(N);if(!0===N.leaf||P.length-1===Q)break;let t=Infinity,h=Infinity,z=void 0;for(let R=0,J=N.children.length;R<J;R++){const ja=N.children[R],qa=fa(ja),pa=(Math.max(ja.maxX,G.maxX)-Math.min(ja.minX,G.minX))*(Math.max(ja.maxY,G.maxY)-Math.min(ja.minY,G.minY))-qa;pa<h?(h=pa,t=qa<t?qa:t,z=ja):pa===h&&qa<t&&
(t=qa,z=ja)}N=z||N.children[0]}return N};F._insert=function(G,N,Q){var P=this.toBBox;Q=Q?G:P(G);D.clear();P=this._chooseSubtree(Q,this.data,N,D);P.children.push(G);for(q(P,Q);0<=N;)if(D.data[N].children.length>this._maxEntries)this._split(D,N),N--;else break;this._adjustParentBBoxes(Q,D,N)};F._split=function(G,N){const Q=G.data[N];var P=Q.children.length;const t=this._minEntries;this._chooseSplitAxis(Q,t,P);(P=this._chooseSplitIndex(Q,t,P))?(P=Q.children.splice(P,Q.children.length-P),P=Q.leaf?new aa(P):
new ia(P),P.height=Q.height,l(Q,this.toBBox),l(P,this.toBBox),N?G.data[N-1].children.push(P):this._splitRoot(Q,P)):console.log("  Error: assertion failed at PooledRBush._split: no valid split index")};F._splitRoot=function(G,N){this.data=new ia([G,N]);this.data.height=G.height+1;l(this.data,this.toBBox)};F._chooseSplitIndex=function(G,N,Q){let P,t,h=void 0;P=t=Infinity;for(let R=N;R<=Q-N;R++){var z=r(G,0,R,this.toBBox);const J=r(G,R,Q,this.toBBox),ja=Math.max(0,Math.min(z.maxX,J.maxX)-Math.max(z.minX,
J.minX))*Math.max(0,Math.min(z.maxY,J.maxY)-Math.max(z.minY,J.minY));z=fa(z)+fa(J);ja<P?(P=ja,h=R,t=z<t?z:t):ja===P&&z<t&&(t=z,h=R)}return h};F._chooseSplitAxis=function(G,N,Q){const P=G.leaf?this.compareMinX:E,t=G.leaf?this.compareMinY:ha,h=this._allDistMargin(G,N,Q,P);N=this._allDistMargin(G,N,Q,t);h<N&&G.children.sort(P)};F._allDistMargin=function(G,N,Q,P){G.children.sort(P);P=this.toBBox;var t=r(G,0,N,P);const h=r(G,Q-N,Q,P);let z=A(t)+A(h);for(let R=N;R<Q-N;R++){const J=G.children[R];q(t,G.leaf?
P(J):J);z+=A(t)}for(Q=Q-N-1;Q>=N;Q--)t=G.children[Q],q(h,G.leaf?P(t):t),z+=A(h);return z};F._adjustParentBBoxes=function(G,N,Q){for(;0<=Q;Q--)q(N.data[Q],G)};F._condense=function(G){for(let N=G.length-1;0<=N;N--){const Q=G.data[N];if(0===Q.children.length)if(0<N){const P=G.data[N-1],t=P.children;t.splice(K.indexOf(t,Q,t.length,P.indexHint),1)}else this.clear();else l(Q,this.toBBox)}};F._initFormat=function(G){const N=["return a"," - b",";"];this.compareMinX=new Function("a","b",N.join(G[0]));this.compareMinY=
new Function("a","b",N.join(G[1]));this.toBBox=new Function("a","return {minX: a"+G[0]+", minY: a"+G[1]+", maxX: a"+G[2]+", maxY: a"+G[3]+"};")};return U}();const H=new p,M=new p,D=new p,v=new p({deallocator:void 0});p=function(){this.minY=this.minX=Infinity;this.maxY=this.maxX=-Infinity};let L=function(U){function F(){var G=U.apply(this,arguments)||this;G.height=1;G.indexHint=new K.PositionHint;return G}e._inheritsLoose(F,U);return F}(p),aa=function(U){function F(G){var N=U.call(this)||this;N.children=
G;N.leaf=!0;return N}e._inheritsLoose(F,U);return F}(L),ia=function(U){function F(G){var N=U.call(this)||this;N.children=G;N.leaf=!1;return N}e._inheritsLoose(F,U);return F}(L);n.BBox=p;n.PooledRBush=m;n.default=m;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/chunks/quickselect":function(){define(["exports","./_commonjsHelpers"],function(n,e){e=e.createCommonjsModule(function(Z){(function(K){K=K();void 0!==K&&(Z.exports=K)})(function(){function K(l,r,q,E,ha){for(;E>q;){if(600<E-q){var fa=
E-q+1,A=r-q+1,u=Math.log(fa),B=.5*Math.exp(2*u/3);u=.5*Math.sqrt(u*B*(fa-B)/fa)*(0>A-fa/2?-1:1);K(l,r,Math.max(q,Math.floor(r-A*B/fa+u)),Math.min(E,Math.floor(r+(fa-A)*B/fa+u)),ha)}fa=l[r];A=q;B=E;p(l,q,r);for(0<ha(l[E],fa)&&p(l,q,E);A<B;){p(l,A,B);A++;for(B--;0>ha(l[A],fa);)A++;for(;0<ha(l[B],fa);)B--}0===ha(l[q],fa)?p(l,q,B):(B++,p(l,B,E));B<=r&&(q=B+1);r<=B&&(E=B-1)}}function p(l,r,q){var E=l[r];l[r]=l[q];l[q]=E}function I(l,r){return l<r?-1:l>r?1:0}return function(l,r,q,E,ha){K(l,r,q||0,E||l.length-
1,ha||I)}})});n.quickselect=e})},"esri/layers/graphics/data/optimizedFeatureQueryEngineAdapter":function(){define(["exports","../OptimizedFeature","../OptimizedGeometry","../centroid"],function(n,e,Z,K){const p={getObjectId(I){return I.objectId},getAttributes(I){return I.attributes},getAttribute(I,l){return I.attributes[l]},cloneWithGeometry(I,l){return new e(l,I.attributes,null,I.objectId)},getGeometry(I){return I.geometry},getCentroid(I,l){I.centroid||(I.centroid=K.getCentroidOptimizedGeometry(new Z,
I.geometry,l.hasZ,l.hasM));return I.centroid}};n.default=p;n.optimizedFeatureQueryEngineAdapter=p;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/graphics/centroid":function(){define(["exports"],function(n){function e(K,p,I,l,r,q,E=1){q=r?q?4:3:q?3:2;let ha=I,fa=I+q,A=0,u=0,B=I=0,d=0;for(let m=0,H=l-1;m<H;m++,ha+=q,fa+=q){l=p[ha];const M=p[ha+1],D=p[ha+2],v=p[fa],L=p[fa+1],aa=p[fa+2];let ia=l*L-v*M;B+=ia;A+=(l+v)*ia;u+=(M+L)*ia;r&&(ia=l*aa-v*D,I+=(D+aa)*ia,d+=ia);l<K[0]&&(K[0]=l);
l>K[1]&&(K[1]=l);M<K[2]&&(K[2]=M);M>K[3]&&(K[3]=M);r&&(D<K[4]&&(K[4]=D),D>K[5]&&(K[5]=D))}0<B*E&&(B*=-1);0<d*E&&(d*=-1);if(!B)return null;K=[A,u,.5*B];r&&(K[3]=I,K[4]=.5*d);return K}function Z(K,p,I,l,r){r=l?r?4:3:r?3:2;let q=p,E=p+r,ha=0,fa=0,A=0,u=0;for(let H=0,M=I-1;H<M;H++,q+=r,E+=r){var B=K[q];const D=K[q+1],v=K[q+2],L=K[E],aa=K[E+1],ia=K[E+2];if(l){{var d=L-B;var m=aa-D;const U=ia-v;d=Math.sqrt(d*d+m*m+U*U)}}else d=L-B,m=aa-D,d=Math.sqrt(d*d+m*m);d&&(ha+=d,l?(B=[B+.5*(L-B),D+.5*(aa-D),v+.5*
(ia-v)],fa+=d*B[0],A+=d*B[1],u+=d*B[2]):(B=[B+.5*(L-B),D+.5*(aa-D)],fa+=d*B[0],A+=d*B[1]))}return 0<ha?l?[fa/ha,A/ha,u/ha]:[fa/ha,A/ha]:0<I?l?[K[p],K[p+1],K[p+2]]:[K[p],K[p+1]]:null}n.getCentroidOptimizedGeometry=function(K,p,I,l,r){if(!p||!p.lengths.length)return null;const q="upperLeft"===(null==r?void 0:r.originPosition)?-1:1;K.lengths.length&&(K.lengths.length=0);K.coords.length&&(K.coords.length=0);r=K.coords;const E=[],ha=I?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,
Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:fa,coords:A}=p,u=I?l?4:3:l?3:2;let B=0;for(var d of fa){const m=e(ha,A,B,d,I,l,q);m&&E.push(m);B+=d*u}E.sort((m,H)=>{let M=q*m[2]-q*H[2];0===M&&I&&(M=m[4]-H[4]);return M});E.length&&(d=6*E[0][2],r[0]=E[0][0]/d,r[1]=E[0][1]/d,I&&(d=6*E[0][4],r[2]=0!==d?E[0][3]/d:0),r[0]<ha[0]||r[0]>ha[1]||r[1]<ha[2]||r[1]>ha[3]||I&&
(r[2]<ha[4]||r[2]>ha[5]))&&(r.length=0);if(!r.length)if(p=p.lengths[0]?Z(A,0,fa[0],I,l):null)r[0]=p[0],r[1]=p[1],I&&2<p.length&&(r[2]=p[2]);else return null;return K};n.lineCentroid=Z;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/graphics/data/QueryEngine":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/lang ../../../core/maybe ../../../core/Error ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/boundsUtils ../../../geometry/support/jsonUtils ../../../core/unitUtils ../../../geometry/support/normalizeUtils ../../../core/MemCache ../../../geometry/support/aaBoundingRect ../../support/PromiseQueue ../../support/FieldsIndex ./QueryEngineCapabilities ../../../geometry/support/aaBoundingBox ./projectionSupport ./attributeSupport ./utils ./spatialQuerySupport ./timeSupport ./QueryEngineResult".split(" "),
function(n,e,Z,K,p,I,l,r,q,E,ha,fa,A,u,B,d,m,H,M,D,v,L){function aa(P){return P.every(t=>"exceedslimit"!==t.statisticType)}const ia=new Set,U=new ha.MemCacheStorage(2E6);let F=0,G=function(){function P(h){this.capabilities={query:B.queryCapabilities};this.geometryType=h.geometryType;this.hasM=h.hasM;this.hasZ=h.hasZ;this.objectIdField=h.objectIdField;this.spatialReference=h.spatialReference;this.definitionExpression=h.definitionExpression;this.featureStore=h.featureStore;this.aggregateAdapter=h.aggregateAdapter;
this._changeHandle=this.featureStore.events.on("changed",()=>this.clearCache());this.timeInfo=h.timeInfo;h.cacheSpatialQueries&&(this._geometryQueryCache=new ha.MemCache(F++ +"$$",U));this.fieldsIndex=new u(h.fields);h.scheduler&&h.task&&(this._frameQueue=new A,this._frameTask=h.scheduler.registerTask(h.task,z=>this._update(z),()=>0<this._frameQueue.length))}var t=P.prototype;t.destroy=function(){this._frameTask&&(this._frameTask.remove(),this._frameTask=null,this._frameQueue.cancelAll(),this._frameQueue=
null);this.clearCache();this._geometryQueryCache&&this._geometryQueryCache.destroy();this._changeHandle&&(this._changeHandle.remove(),this._changeHandle=null);this.fieldsIndex.destroy()};t.clearCache=function(){this._geometryQueryCache&&this._geometryQueryCache.clear();this._timeExtent=this._allItems=null};t.executeQuery=async function(h={},z){let R=Z.clone(h),J;try{R=await this._schedule(()=>M.normalizeQuery(R,this.definitionExpression,this.spatialReference),z),R=await this._reschedule(()=>this._checkQuerySupport(R),
z),J=await this._reschedule(()=>this._executeGeometryQuery(R,z),z),J=await this._reschedule(()=>J.executeAggregateIdsQuery(R),z),J=await this._reschedule(()=>J.executeObjectIdsQuery(R),z),J=await this._reschedule(()=>J.executeTimeQuery(R),z),J=await this._reschedule(()=>J.executeAttributesQuery(R),z)}catch(ja){if(ja!==M.QUERY_ENGINE_EMPTY_RESULT)throw ja;J=new L([],null,this)}return J.createQueryResponse(R)};t.executeQueryForCount=async function(h={},z){let R=Z.clone(h),J;R.returnGeometry=!1;R.returnCentroid=
!1;R.outSR=null;try{R=await this._schedule(()=>M.normalizeQuery(R,this.definitionExpression,this.spatialReference),z),R=await this._reschedule(()=>this._checkQuerySupport(R),z),J=await this._reschedule(()=>this._executeGeometryQuery(R,z),z),J=await this._reschedule(()=>J.executeAggregateIdsQuery(R),z),J=await this._reschedule(()=>J.executeObjectIdsQuery(R),z),J=await this._reschedule(()=>J.executeTimeQuery(R),z),J=await this._reschedule(()=>J.executeAttributesQuery(R),z)}catch(ja){if(ja!==M.QUERY_ENGINE_EMPTY_RESULT)throw ja;
return 0}return J.createQueryResponseForCount(R)};t.executeQueryForExtent=async function(h={},z){let R=Z.clone(h),J;h=R.outSR;try{R=await this._schedule(()=>M.normalizeQuery(R,this.definitionExpression,this.spatialReference),z);R=await this._reschedule(()=>this._checkQuerySupport(R),z);R.returnGeometry=!0;R.returnCentroid=!1;R.outSR=null;J=await this._reschedule(()=>this._executeGeometryQuery(R,z),z);J=await this._reschedule(()=>J.executeAggregateIdsQuery(R),z);J=await this._reschedule(()=>J.executeObjectIdsQuery(R),
z);J=await this._reschedule(()=>J.executeTimeQuery(R),z);J=await this._reschedule(()=>J.executeAttributesQuery(R),z);const ja=J.size;if(!ja)return{count:ja,extent:null};d.set(Q,d.NEGATIVE_INFINITY);this.featureStore.forEachBounds(J.items,wa=>d.expandWithAABB(Q,wa),N);const qa={xmin:Q[0],ymin:Q[1],xmax:Q[3],ymax:Q[4],spatialReference:M.cleanFromGeometryEngine(this.spatialReference)};this.hasZ&&isFinite(Q[2])&&isFinite(Q[5])&&(qa.zmin=Q[2],qa.zmax=Q[5]);const pa=m.project(qa,J.spatialReference,h);pa.spatialReference=
M.cleanFromGeometryEngine(h||this.spatialReference);if(0===pa.xmax-pa.xmin){const wa=q.getMetersPerUnitForSR(pa.spatialReference);pa.xmin-=wa;pa.xmax+=wa}if(0===pa.ymax-pa.ymin){const wa=q.getMetersPerUnitForSR(pa.spatialReference);pa.ymin-=wa;pa.ymax+=wa}if(this.hasZ&&null!=pa.zmin&&null!=pa.zmax&&0===pa.zmax-pa.zmin){const wa=q.getMetersPerUnitForSR(pa.spatialReference);pa.zmin-=wa;pa.zmax+=wa}return{count:ja,extent:pa}}catch(ja){if(ja===M.QUERY_ENGINE_EMPTY_RESULT)return{count:0,extent:null};throw ja;
}};t.executeQueryForIds=async function(h={},z){return this.executeQueryForIdSet(h,z).then(R=>Array.from(R))};t.executeQueryForIdSet=async function(h={},z){let R=Z.clone(h),J;R.returnGeometry=!1;R.returnCentroid=!1;R.outSR=null;try{R=await this._schedule(()=>M.normalizeQuery(R,this.definitionExpression,this.spatialReference),z);R=await this._reschedule(()=>this._checkQuerySupport(R),z);J=await this._reschedule(()=>this._executeGeometryQuery(R,z),z);J=await this._reschedule(()=>J.executeAggregateIdsQuery(R),
z);J=await this._reschedule(()=>J.executeObjectIdsQuery(R),z);J=await this._reschedule(()=>J.executeTimeQuery(R),z);J=await this._reschedule(()=>J.executeAttributesQuery(R),z);const ja=J.items,qa=new Set;await this._reschedule(()=>{for(const pa of ja)qa.add(J.featureAdapter.getObjectId(pa))},z);return qa}catch(ja){if(ja===M.QUERY_ENGINE_EMPTY_RESULT)return new Set;throw ja;}};t.executeQueryForSnapping=async function(h,z){const {point:R,distance:J,types:ja}=h;if(0===ja)return{candidates:[]};const qa=
await this._reschedule(()=>this._checkQuerySupport(h.query),z),pa=!I.equals(R.spatialReference,this.spatialReference);pa&&await m.checkProjectionSupport(R.spatialReference,this.spatialReference);var wa="number"===typeof J?J:J.x,Ca="number"===typeof J?J:J.y;wa={xmin:R.x-wa,xmax:R.x+wa,ymin:R.y-Ca,ymax:R.y+Ca,spatialReference:R.spatialReference};wa=pa?m.project(wa,this.spatialReference):wa;if(!wa)return{candidates:[]};Ca=(await E.normalizeCentralMeridian(r.fromJSON(R),null,{signal:z}))[0];const ea=
(await E.normalizeCentralMeridian(r.fromJSON(wa),null,{signal:z}))[0];if(K.isNone(Ca)||K.isNone(ea))return{candidates:[]};let x=new L(this._searchFeatures(this._getQueryBBoxes(ea.toJSON())),null,this);x=await this._reschedule(()=>x.executeObjectIdsQuery(qa),z);x=await this._reschedule(()=>x.executeTimeQuery(qa),z);x=await this._reschedule(()=>x.executeAttributesQuery(qa),z);z=Ca.toJSON();z=pa?m.project(z,this.spatialReference):z;return x.createSnappingResponse({...h,point:z,distance:pa?Math.max(wa.xmax-
wa.xmin,wa.ymax-wa.ymin)/2:J},R.spatialReference)};t.executeQueryForLatestObservations=async function(h={},z){if(!this.timeInfo||!this.timeInfo.trackIdField)throw new p("feature-store:unsupported-query","Missing timeInfo or timeInfo.trackIdField",{query:h,timeInfo:this.timeInfo});let R=Z.clone(h),J;try{R=await this._schedule(()=>M.normalizeQuery(R,this.definitionExpression,this.spatialReference),z),R=await this._reschedule(()=>this._checkQuerySupport(R),z),J=await this._reschedule(()=>this._executeGeometryQuery(R,
z),z),J=await this._reschedule(()=>J.executeAggregateIdsQuery(R),z),J=await this._reschedule(()=>J.executeObjectIdsQuery(R),z),J=await this._reschedule(()=>J.executeTimeQuery(R),z),J=await this._reschedule(()=>J.executeAttributesQuery(R),z),J=await this._reschedule(()=>J.filterLatest(),z)}catch(ja){if(ja!==M.QUERY_ENGINE_EMPTY_RESULT)throw ja;J=new L([],null,this)}return J.createQueryResponse(R)};t._schedule=async function(h,z){return this._frameQueue?this._frameQueue.push(h,z):h()};t._reschedule=
async function(h,z){return this._frameQueue?this._frameQueue.unshift(h,z):h()};t._update=function(h){for(this._budget=h;!h.done&&this._frameQueue&&this._frameQueue.process();)h.madeProgress();this._budget=null};t._getAll=function(){if(!this._allItems){const h=[];this.featureStore.forEach(z=>h.push(z));this._allItems=new L(h,null,this)}return this._allItems};t._executeGeometryQuery=async function(h,z){const {geometry:R,outSR:J,spatialRel:ja,returnGeometry:qa,returnCentroid:pa}=h,wa=qa||pa,Ca=I.isValid(J)&&
!I.equals(this.spatialReference,J),ea=this._geometryQueryCache?Ca&&wa?JSON.stringify({geometry:R,spatialRelationship:ja,outSpatialReference:J}):JSON.stringify({geometry:R,spatialRelationship:ja}):null;if(ea){var x=this._geometryQueryCache.get(ea);if(!K.isUndefined(x))return x}x=async za=>{if(Ca&&wa)return za=await za.project(J),ea&&this._geometryQueryCache.put(ea,za,za.size||1),za;ea&&this._geometryQueryCache.put(ea,za,za.size||1);return za};if(!R)return x(this._getAll());const T=this.featureAdapter;
if("esriSpatialRelDisjoint"===ja){h=this._searchFeatures(this._getQueryBBoxes(R));if(!h.length)return x(this._getAll());let za,b;const f=new Set;for(var ma of h)f.add(T.getObjectId(ma));await this._reschedule(()=>{let V=0;za=Array(f.size);this.featureStore.forEach(g=>za[V++]=g);b=f},z);h=await this._reschedule(async()=>{const V=await D.getSpatialQueryOperator(ja,R,this.geometryType,this.hasZ,this.hasM);return new L(await this._runSpatialFilter(za,g=>!b.has(T.getObjectId(g))||V(T.getGeometry(g)),z),
R,this)},z);return x(h)}ma=this._searchFeatures(this._getQueryBBoxes(R));if(!ma.length)return x=new L([],R,this),ea&&this._geometryQueryCache.put(ea,x,x.size||1),x;if(this._canExecuteSoloPass(R,h))return x(new L(ma,R,this));const ya=await D.getSpatialQueryOperator(ja,R,this.geometryType,this.hasZ,this.hasM);h=await this._runSpatialFilter(ma,za=>ya(T.getGeometry(za)),z);return x(new L(h,R,this))};t._runSpatialFilter=async function(h,z,R){if(!z)return h;if(!this._budget)return h.filter(pa=>z(pa));let J=
0;const ja=[],qa=async()=>{for(;J<h.length;){const pa=h[J];z(pa)&&ja.push(pa);this._budget.done&&await this._reschedule(()=>qa(),R);++J}};return this._reschedule(()=>qa(),R).then(()=>ja)};t._canExecuteSoloPass=function(h,z){const {geometryType:R}=this;({spatialRel:z}=z);return D.canQueryWithRBush(h)&&("esriSpatialRelEnvelopeIntersects"===z||"esriGeometryPoint"===R&&("esriSpatialRelIntersects"===z||"esriSpatialRelContains"===z||"esriSpatialRelWithin"===z))};t._getQueryBBoxes=function(h){if(D.canQueryWithRBush(h)){if(r.isExtent(h))return[fa.fromValues(h.xmin,
h.ymin,h.xmax,h.ymax)];if(r.isPolygon(h))return h.rings.map(z=>fa.fromValues(Math.min(z[0][0],z[2][0]),Math.min(z[0][1],z[2][1]),Math.max(z[0][0],z[2][0]),Math.max(z[0][1],z[2][1])))}return[l.getBoundsXY(fa.create(),h)]};t._searchFeatures=function(h){for(const J of h)this.featureStore.forEachInBounds(J,ja=>{ia.add(ja)});const z=Array(ia.size);let R=0;ia.forEach(J=>z[R++]=J);ia.clear();return z};t._checkQuerySupport=async function(h){if(0>h.distance||null!=h.geometryPrecision||h.multipatchOption||
h.pixelSize||h.relationParam||h.text)throw new p("feature-store:unsupported-query","Unsupported query options",{query:h});return Promise.all([this._checkAttributesQuerySupport(h),this._checkStatisticsQuerySupport(h),D.checkSpatialQuerySupport(h,this.geometryType,this.spatialReference),m.checkProjectionSupport(this.spatialReference,h.outSR)]).then(()=>h)};t._checkAttributesQuerySupport=function(h){const {outFields:z,orderByFields:R,returnDistinctValues:J,outStatistics:ja}=h,qa=ja?ja.map(pa=>pa.outStatisticFieldName&&
pa.outStatisticFieldName.toLowerCase()):[];if(R&&0<R.length){const pa=R.map(wa=>{const Ca=wa.toLowerCase();return-1<Ca.indexOf(" asc")?Ca.split(" asc")[0]:-1<Ca.indexOf(" desc")?Ca.split(" desc")[0]:wa}).filter(wa=>-1===qa.indexOf(wa));H.validateFields(this.fieldsIndex,pa,"orderByFields contains missing fields")}if(z&&0<z.length)H.validateFields(this.fieldsIndex,z,"outFields contains missing fields");else if(J)throw new p("feature-store:unsupported-query","outFields should be specified for returnDistinctValues",
{query:h});H.validateWhere(this.fieldsIndex,h.where)};t._checkStatisticsQuerySupport=async function(h){const {outStatistics:z,groupByFieldsForStatistics:R,having:J}=h;var ja=R&&R.length,qa=z&&z.length;if(J){if(!ja||!qa)throw new p("feature-store:unsupported-query","outStatistics and groupByFieldsForStatistics should be specified with having",{query:h});H.validateHaving(this.fieldsIndex,J,z)}if(qa&&aa(z)){qa=z.map(pa=>pa.onStatisticField);H.validateFields(this.fieldsIndex,qa,"onStatisticFields contains missing fields");
ja&&H.validateFields(this.fieldsIndex,R,"groupByFieldsForStatistics contains missing fields");for(const pa of z){const {onStatisticField:wa,statisticType:Ca}=pa;if(("percentile_disc"===Ca||"percentile_cont"===Ca)&&"statisticParameters"in pa){if({statisticParameters:ja}=pa,!ja)throw new p("feature-store:unsupported-query","statisticParamters should be set for percentile type",{definition:pa,query:h});}else if("count"!==Ca&&wa&&H.hasInvalidFieldType(wa,this.fieldsIndex))throw new p("feature-store:unsupported-query",
"outStatistics contains non-numeric fields",{definition:pa,query:h});}}};e._createClass(P,[{key:"featureAdapter",get:function(){return this.featureStore.featureAdapter}},{key:"fullExtent",get:function(){const h=this.featureStore.fullBounds;return h?{xmin:h[0],ymin:h[1],xmax:h[2],ymax:h[3],spatialReference:M.cleanFromGeometryEngine(this.spatialReference)}:null}},{key:"timeExtent",get:function(){return this.timeInfo?this._timeExtent?this._timeExtent:this._timeExtent=v.getTimeExtent(this.timeInfo,this.featureStore):
null}}]);return P}();const N=d.create(),Q=d.create();n.Feature=function(P,t=null,h,z,R){this.attributes=P;this.geometry=h;this.centroid=z;this.filterFlags=R;this.groupId=-1;this.displayId=t};n.default=G;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/geometry/support/normalizeUtils":function(){define("exports ../../config ../../core/maybe ../../core/Logger ../../core/Error ./spatialReferenceUtils ./webMercatorUtils ../Polygon ../Polyline ./normalizeUtilsCommon ../../tasks/geometry/cut ../../tasks/geometry/simplify".split(" "),
function(n,e,Z,K,p,I,l,r,q,E,ha,fa){function A(D){const v=[];let L=0,aa=0;for(let ia=0;ia<D.length;ia++){const U=D[ia];let F=null;for(let G=0;G<U.length;G++)F=U[G],v.push(F),0===G?aa=L=F[0]:(L=Math.min(L,F[0]),aa=Math.max(aa,F[0]));F&&v.push([(L+aa)/2,0])}return v}function u(D,v){if(!(D instanceof q||D instanceof r))throw M.error("straightLineDensify: the input geometry is neither polyline nor polygon"),new p("straightLineDensify: the input geometry is neither polyline nor polygon");var L=E.getGeometryParts(D);
const aa=[];for(const U of L){L=[];aa.push(L);L.push([U[0][0],U[0][1]]);for(let F=0;F<U.length-1;F++){const G=U[F][0],N=U[F][1],Q=U[F+1][0],P=U[F+1][1];var ia=Math.sqrt((Q-G)*(Q-G)+(P-N)*(P-N));const t=(P-N)/ia,h=(Q-G)/ia,z=ia/v;if(1<z){for(let R=1;R<=z-1;R++){const J=R*v;L.push([h*J+G,t*J+N])}ia=(ia+Math.floor(z-1)*v)/2;L.push([h*ia+G,t*ia+N])}L.push([Q,P])}}return"polygon"===D.type?new r({rings:aa,spatialReference:D.spatialReference}):new q({paths:aa,spatialReference:D.spatialReference})}function B(D,
v,L){v&&(D=u(D,1E6),D=l.webMercatorToGeographic(D,!0));L&&(D=E.updatePolyGeometry(D,L));return D}function d(D,v,L){if(Array.isArray(D)){var aa=D[0];aa>v?(L=E.offsetMagnitude(aa,v),D[0]=aa+-2*L*v):aa<L&&(v=E.offsetMagnitude(aa,L),D[0]=aa+-2*v*L)}else aa=D.x,aa>v?(L=E.offsetMagnitude(aa,v),D=D.clone().offset(-2*L*v,0)):aa<L&&(v=E.offsetMagnitude(aa,L),D=D.clone().offset(-2*v*L,0));return D}function m(D,v){let L=-1;for(let aa=0;aa<v.cutIndexes.length;aa++){const ia=v.cutIndexes[aa],U=v.geometries[aa],
F=E.getGeometryParts(U);for(let G=0;G<F.length;G++){const N=F[G];N.some(Q=>{if(180>Q[0])return!0;Q=0;for(var P=0;P<N.length;P++){var t=N[P][0];Q=t>Q?t:Q}Q=Number(Q.toFixed(9));Q=-360*E.offsetMagnitude(Q,180);for(P=0;P<N.length;P++)t=U.getPoint(G,P),U.setPoint(G,P,t.clone().offset(Q,0));return!0})}if(ia===L)if("polygon"===D[0].type)for(const G of E.getGeometryParts(U))D[ia]=D[ia].addRing(G);else{if("polyline"===D[0].type)for(const G of E.getGeometryParts(U))D[ia]=D[ia].addPath(G)}else L=ia,D[ia]=U}return D}
async function H(D,v,L){if(!Array.isArray(D))return H([D],v);var aa=v?v.url:e.geometryServiceUrl;let ia,U,F;let G=0;var N=[];v=[];for(var Q of D)if(Z.isNone(Q))v.push(Q);else{if(!P){var P=Q.spatialReference;var t=I.getInfo(P);var h=(ia=P.isWebMercator)?102100:4326;U=E.cutParams[h].maxX;F=E.cutParams[h].minX;var z=E.cutParams[h].plus180Line;h=E.cutParams[h].minus180Line}if(t)if("mesh"===Q.type)v.push(Q);else if("point"===Q.type)v.push(d(Q.clone(),U,F));else if("multipoint"===Q.type){var R=Q.clone();
R.points=R.points.map(J=>d(J,U,F));v.push(R)}else if("extent"===Q.type)R=Q.clone()._normalize(!1,!1,t),v.push(R.rings?new r(R):R);else if(Q.extent){R=Q.extent;const J=2*E.offsetMagnitude(R.xmin,F)*U;let ja=0===J?Q.clone():E.updatePolyGeometry(Q.clone(),J);R.offset(J,0);R.intersects(z)&&R.xmax!==U?(G=R.xmax>G?R.xmax:G,ja=B(ja,ia),N.push(ja),v.push("cut")):R.intersects(h)&&R.xmin!==F?(G=2*R.xmax*U>G?2*R.xmax*U:G,ja=B(ja,ia,360),N.push(ja),v.push("cut")):v.push(ja)}else v.push(Q.clone());else v.push(Q)}P=
E.offsetMagnitude(G,U);t=-90;z=P;for(Q=new q;0<P;)h=-180+360*P,Q.addPath([[h,t],[h,-1*t]]),t*=-1,P--;if(0<N.length&&0<z){P=await ha.cut(aa,N,Q,L);P=m(N,P);t=[];N=[];for(z=0;z<v.length;z++)Q=v[z],"cut"!==Q?N.push(Q):(Q=P.shift(),h=D[z],Z.isSome(h)&&"polygon"===h.type&&h.rings&&1<h.rings.length&&Q.rings.length>=h.rings.length?(t.push(Q),N.push("simplify")):N.push(ia?l.geographicToWebMercator(Q):Q));if(!t.length)return N;v=await fa.simplify(aa,t,L);D=[];for(L=0;L<N.length;L++)aa=N[L],"simplify"!==aa?
D.push(aa):D.push(ia?l.geographicToWebMercator(v.shift()):v.shift());return D}D=[];for(L=0;L<v.length;L++)aa=v[L],"cut"!==aa?D.push(aa):(aa=N.shift(),D.push(!0===ia?l.geographicToWebMercator(aa):aa));return Promise.resolve(D)}const M=K.getLogger("esri.geometry.support.normalizeUtils");n.getDenormalizedExtent=function(D){if(!D)return null;const v=D.extent;if(!v)return null;var L=D.spatialReference&&I.getInfo(D.spatialReference);if(!L)return v;const [aa,ia]=L.valid;({width:L}=v);let {xmin:U,xmax:F}=
v;[U,F]=[F,U];if("extent"===D.type||0===L||L<=ia||L>2*ia||U<aa||F>ia)return v;let G;switch(D.type){case "polygon":if(1<D.rings.length)G=A(D.rings);else return v;break;case "polyline":if(1<D.paths.length)G=A(D.paths);else return v;break;case "multipoint":G=D.points}D=v.clone();for(let N=0;N<G.length;N++){let Q=G[N][0];0>Q?(Q+=ia,F=Math.max(Q,F)):(Q-=ia,U=Math.min(Q,U))}D.xmin=U;D.xmax=F;return D.width<L?(D.xmin-=ia,D.xmax-=ia,D):v};n.normalizeCentralMeridian=H;n.normalizeMapX=function(D,v){if(v=I.getInfo(v)){const [L,
aa]=v.valid;v=aa-L;if(D<L)for(;D<L;)D+=v;if(D>aa)for(;D>aa;)D-=v}return D};n.straightLineDensify=u;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/geometry/support/normalizeUtilsCommon":function(){define(["exports","../SpatialReference","../Polyline","./jsonUtils"],function(n,e,Z,K){function p(l){return K.isPolygon(l)?l.rings:l.paths}const I={102100:{maxX:2.0037508342788905E7,minX:-2.0037508342788905E7,plus180Line:new Z({paths:[[[2.0037508342788905E7,-2.0037508342788905E7],[2.0037508342788905E7,
2.0037508342788905E7]]],spatialReference:e.WebMercator}),minus180Line:new Z({paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:e.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new Z({paths:[[[180,-180],[180,180]]],spatialReference:e.WGS84}),minus180Line:new Z({paths:[[[-180,-180],[-180,180]]],spatialReference:e.WGS84})}};n.cutParams=I;n.getGeometryParts=p;n.getSpatialReferenceMinMaxX=function(l){l=(null==l?0:l.isWebMercator)?
102100:4326;return[I[l].minX,I[l].maxX]};n.offsetMagnitude=function(l,r){return Math.ceil((l-r)/(2*r))};n.updatePolyGeometry=function(l,r){const q=p(l);for(const E of q)for(const ha of E)ha[0]+=r;return l};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/tasks/geometry/cut":function(){define(["exports","../../core/urlUtils","../../geometry/support/jsonUtils","../../geometry","../../request"],function(n,e,Z,K,p){n.cut=async function(I,l,r,q){I="string"===typeof I?e.urlToObject(I):I;const E=
l[0].spatialReference;l={...q,query:{...I.query,f:"json",sr:JSON.stringify(E),target:JSON.stringify({geometryType:Z.getJsonType(l[0]),geometries:l}),cutter:JSON.stringify(r)}};l=await p(I.path+"/cut",l);const {cutIndexes:ha,geometries:fa=[]}=l.data;return{cutIndexes:ha,geometries:fa.map(A=>{A=Z.fromJSON(A);A.spatialReference=E;return A})}};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/tasks/geometry/simplify":function(){define(["exports","../../core/urlUtils","../../geometry/support/jsonUtils",
"../../request"],function(n,e,Z,K){function p(l){return{geometryType:Z.getJsonType(l[0]),geometries:l.map(r=>r.toJSON())}}function I(l,r,q){const E=Z.getGeometryType(r);return l.map(ha=>{ha=E.fromJSON(ha);ha.spatialReference=q;return ha})}n.simplify=async function(l,r,q){const E="string"===typeof l?e.urlToObject(l):l;l=r[0].spatialReference;const ha=Z.getJsonType(r[0]);r={...q,query:{...E.query,f:"json",sr:l.wkid?l.wkid:JSON.stringify(l),geometries:JSON.stringify(p(r))}};r=await K(E.path+"/simplify",
r);return I(r.data,ha,l)};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/core/MemCache":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","./PooledArray"],function(n,e,Z){let K=function(){function I(r,q,E){this._namespace=r;this._storage=q;this._removeFunc=!1;this._miss=this._hit=0;this._storage.register(this);this._namespace+=":";E&&(this._storage.registerRemoveFunc(this._namespace,E),this._removeFunc=!0)}var l=I.prototype;l.destroy=function(){this._storage.clear(this._namespace);
this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace);this._storage.deregister(this);this._storage=null};l.resetHitRate=function(){this._hit=this._miss=0};l.put=function(r,q,E,ha=0){this._storage.put(this._namespace+r,q,E,ha)};l.get=function(r){r=this._storage.get(this._namespace+r);void 0===r?++this._miss:++this._hit;return r};l.pop=function(r){r=this._storage.pop(this._namespace+r);void 0===r?++this._miss:++this._hit;return r};l.updateSize=function(r,q,E){this._storage.updateSize(this._namespace+
r,q,E)};l.clear=function(){this._storage.clear(this._namespace)};l.clearAll=function(){this._storage.clearAll()};l.getStats=function(){return this._storage.getStats()};l.resetStats=function(){this._storage.resetStats()};e._createClass(I,[{key:"namespace",get:function(){return this._namespace.slice(0,-1)}},{key:"hitRate",get:function(){return this._hit/(this._hit+this._miss)}},{key:"size",get:function(){return this._storage.size}},{key:"maxSize",get:function(){return this._storage.maxSize}}]);return I}(),
p=function(){function I(r=10485760){this._maxSize=r;this._db=new Map;this._miss=this._hit=this._size=0;this._removeFuncs=new Z;this._users=new Z}var l=I.prototype;l.destroy=function(){this.clearAll();this._removeFuncs.clear();this._users.clear();this._db=null};l.register=function(r){this._users.push(r)};l.deregister=function(r){this._users.removeUnordered(r)};l.registerRemoveFunc=function(r,q){this._removeFuncs.push([r,q])};l.deregisterRemoveFunc=function(r){this._removeFuncs.filterInPlace(q=>q[0]!==
r)};l.put=function(r,q,E,ha){const fa=this._db.get(r);fa&&(this._size-=fa.size,this._db.delete(r),fa.entry!==q&&this._notifyRemoved(r,fa.entry));E>this._maxSize?this._notifyRemoved(r,q):void 0===q?console.warn("Refusing to cache undefined entry "):!E||0>E?console.warn("Refusing to cache entry with invalid size "+E):(ha=1+Math.max(ha,-3)- -3,this._db.set(r,{entry:q,size:E,lifetime:ha,lives:ha}),this._size+=E,this._checkSizeLimit())};l.updateSize=function(r,q,E){const ha=this._db.get(r);ha&&ha.entry===
q&&(this._size-=ha.size,E>this._maxSize?(this._db.delete(r),this._notifyRemoved(r,q)):(ha.size=E,this._size+=E,this._checkSizeLimit()))};l.pop=function(r){const q=this._db.get(r);if(q)return this._size-=q.size,this._db.delete(r),++this._hit,q.entry;++this._miss};l.get=function(r){const q=this._db.get(r);if(void 0===q)++this._miss;else return this._db.delete(r),q.lives=q.lifetime,this._db.set(r,q),++this._hit,q.entry};l.getStats=function(){const r={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/
1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},q={},E=[];this._db.forEach((A,u)=>{const B=A.lifetime;E[B]=(E[B]||0)+A.size;this._users.forAll(d=>{d=d.namespace;u.startsWith(d)&&(q[d]=(q[d]||0)+A.size)})});const ha={};this._users.forAll(A=>{const u=A.namespace;!isNaN(A.hitRate)&&0<A.hitRate?(q[u]=q[u]||0,ha[u]=Math.round(100*A.hitRate)+"%"):ha[u]="0%"});var fa=Object.keys(q);fa.forEach(A=>q[A]=q[A]/this._size*100);fa.sort((A,u)=>q[u]-q[A]);fa.forEach(A=>
r[A]=Math.round(q[A])+"% / "+ha[A]);for(fa=E.length-1;0<=fa;--fa){const A=E[fa];A&&(r["Priority "+(fa+-3-1)]=Math.round(A/this.size*100)+"%")}return r};l.resetStats=function(){this._hit=this._miss=0;this._users.forAll(r=>r.resetHitRate())};l.clear=function(r){this._db.forEach((q,E)=>{E.startsWith(r)&&(this._size-=q.size,this._db.delete(E),this._notifyRemoved(E,q.entry))})};l.clearAll=function(){this._db.forEach((r,q)=>this._notifyRemoved(q,r.entry));this._size=0;this._db.clear()};l._getHitRate=function(){return this._hit/
(this._hit+this._miss)};l._notifyRemoved=function(r,q){this._removeFuncs.forAll(E=>{if(r.startsWith(E[0]))E[1](q)})};l._checkSizeLimit=function(){if(!(this._size<=this._maxSize))for(const [r,q]of this._db)if(this._db.delete(r),1>=q.lives?(this._size-=q.size,this._notifyRemoved(r,q.entry)):(--q.lives,this._db.set(r,q)),this._size<=.9*this.maxSize)break};e._createClass(I,[{key:"size",get:function(){return this._size}},{key:"maxSize",get:function(){return this._maxSize},set:function(r){this._maxSize=
Math.max(r,0);this._checkSizeLimit()}}]);return I}();n.MIN_PRIORITY=-3;n.MemCache=K;n.MemCacheStorage=p;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/graphics/data/QueryEngineCapabilities":function(){define(["exports"],function(n){n.queryCapabilities={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,
supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/graphics/data/attributeSupport":function(){define(["exports",
"../../../core/Error","../../../core/sql/WhereClauseCache"],function(n,e,Z){function K(q,E){return q?l.get(q,E):null}function p(q,E,ha,fa=!0){const A=[];for(const u of E)if("*"!==u&&!q.has(u))if(fa){E=I(u);try{const B=K(E,q);if(!B)throw new e("feature-store:unsupported-query","invalid SQL expression",{where:E});if(!B.isStandardized)throw new e("feature-store:unsupported-query","expression is not standard",{clause:B});p(q,B.fieldNames,"expression contains missing fields")}catch(B){if((E=B&&B.details)&&
(E.clause||E.where))throw B;E&&E.missingFields?A.push(...E.missingFields):A.push(u)}}else A.push(u);if(A.length)throw new e("feature-store:unsupported-query",ha,{missingFields:A});}function I(q){return q.split(" as ")[0]}const l=new Z.WhereClauseCache(50,500),r=new Set("esriFieldTypeOID esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong esriFieldTypeDate".split(" "));n.getAliasFromFieldName=function(q){return q.split(" as ")[1]};n.getExpressionFromFieldName=
I;n.getWhereClause=K;n.hasInvalidFieldType=function(q,E){return(q=E.get(q))?!r.has(q.type):!1};n.validateFields=p;n.validateHaving=function(q,E,ha){if(!E)return!0;const fa=l.get(E,q);if(!fa)throw new e("feature-store:unsupported-query","invalid SQL expression",{having:E});if(!fa.isAggregate)throw new e("feature-store:unsupported-query","having does not contain a valid aggregate function",{having:E});p(q,fa.fieldNames,"having contains missing fields");if(!fa.getExpressions().every(A=>{const {aggregateType:u,
field:B}=A,d=q.has(B)&&q.get(B).name;return ha.some(m=>{const {onStatisticField:H,statisticType:M}=m;return(q.has(H)&&q.get(H).name)===d&&M.toLowerCase().trim()===u})}))throw new e("feature-store:unsupported-query","expressions in having should also exist in outStatistics",{having:E});return!0};n.validateWhere=function(q,E){if(!E)return!0;const ha=l.get(E,q);if(!ha)throw new e("feature-store:unsupported-query","invalid SQL expression",{where:E});if(!ha.isStandardized)throw new e("feature-store:unsupported-query",
"where clause is not standard",{where:E});p(q,ha.fieldNames,"where clause contains missing fields");return!0};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/core/sql/WhereClauseCache":function(){define(["exports","../ItemCache","./WhereClause"],function(n,e,Z){let K=function(){function p(I,l){this._cache=new e(I);this._invalidCache=new e(l)}p.prototype.get=function(I,l){const r=`${l.uid}:${I}`,q=this._cache.get(r);if(q)return q;if(void 0!==this._invalidCache.get(r))return null;try{const E=
Z.WhereClause.create(I,l);this._cache.put(r,E);return E}catch{return this._invalidCache.put(r,null),null}};return p}();n.WhereClauseCache=K;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/core/ItemCache":function(){define(["./MemCache"],function(n){return function(){function e(K,p){this._storage=new n.MemCacheStorage;this._storage.maxSize=K;p&&this._storage.registerRemoveFunc("",p)}var Z=e.prototype;Z.put=function(K,p){this._storage.put(K,p,1,1)};Z.pop=function(K){return this._storage.pop(K)};
Z.get=function(K){return this._storage.get(K)};Z.clear=function(){this._storage.clearAll()};Z.destroy=function(){this._storage.destroy()};return e}()})},"esri/core/sql/WhereClause":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../has ./AggregateFunctions ./StandardizedFunctions ./WhereGrammar".split(" "),function(n,e,Z,K,p,I){function l(P,t){P+="";return P.length>=t?P:Array(t-P.length+1).join("0")+P}function r(P,t,h="0",z="0",R="0",J="0",ja="",qa="0",pa="0"){return"+"===ja||"-"===
ja?(P=`${l(parseInt(P,10),4)}-${l(parseInt(t,10),2)}-${l(parseInt(h,10),2)}`,t="",10>parseFloat(J)&&(t="0"),z=`${l(parseInt(z,10),2)}:${l(parseInt(R,10),2)}:${t+parseFloat(J).toString()}`,ja=`${ja}${l(parseInt(qa,10),2)}:${l(parseInt(pa,10),2)}`,new Date(P+"T"+z+ja)):new Date(parseInt(P,10),parseInt(t,10)-1,parseInt(h,10),parseInt(z,10),parseInt(R,10),parseFloat(J))}function q(P){let t=aa.exec(P);if(null!==t){const [,h,z,R,J,ja,qa]=t;return r(h,z,R,J,ja,qa)}t=ia.exec(P);if(null!==t){const [,h,z,R,
J,ja,qa,pa,wa,Ca]=t;return r(h,z,R,J,ja,qa,pa,wa,Ca)}t=U.exec(P);if(null!==t){const [,h,z,R,J,ja,qa,pa,wa]=t;return r(h,z,R,J,ja,"0",qa,pa,wa)}t=F.exec(P);if(null!==t){const [,h,z,R,J,ja]=t;return r(h,z,R,J,ja)}t=L.exec(P);if(null!==t){const [,h,z,R]=t;return r(h,z,R)}throw Error("SQL Invalid Timestamp");}function E(P){P=L.exec(P);if(null===P)throw Error("SQL Invalid Date");const [,t,h,z]=P;return new Date(parseInt(t,10),parseInt(h,10)-1,parseInt(z,10))}function ha(P){return Array.isArray(P)?P:[P]}
function fa(P){return null!==P?!0!==P:null}function A(P,t){return null!=P&&null!=t?!0===P&&!0===t:!1===P||!1===t?!1:null}function u(P,t){return null!=P&&null!=t?!0===P||!0===t:!0===P||!0===t?!0:null}function B(P,t){if(null==P)return null;let h=!1;for(const z of t)if(null==z)h=null;else if(P===z){h=!0;break}return h}function d(P,t,h){if(null==P)return null;let z="",R=0;for(let J=0;J<t.length;J++){const ja=t.charAt(J);switch(R){case 0:ja===h?R=1:z=0<="-[]/{}()*+?.\\^$|".indexOf(ja)?z+("\\"+ja):"%"===
ja?z+".*":"_"===ja?z+".":z+ja;break;case 1:z=0<="-[]/{}()*+?.\\^$|".indexOf(ja)?z+("\\"+ja):z+ja,R=0}}return(new RegExp("^"+z+"$")).test(P)}function m(P){return P instanceof Date?P.valueOf():P}function H(P,t,h){if(null==t||null==h)return null;t=m(t);h=m(h);switch(P){case "\x3c\x3e":return t!==h;case "\x3d":return t===h;case "\x3e":return t>h;case "\x3c":return t<h;case "\x3e\x3d":return t>=h;case "\x3c\x3d":return t<=h}}function M(P){const t=[],h={};for(const z of P)P=z.toLowerCase(),void 0===h[P]&&
(t.push(z),h[P]=1);return t}function D(P,t,h){if(t instanceof p.SqlInterval)if(h instanceof Date)switch(P){case "+":return new Date(t.valueInMilliseconds()+h.getTime());case "-":return t.valueInMilliseconds()-h.getTime();case "*":return t.valueInMilliseconds()*h.getTime();case "/":return t.valueInMilliseconds()/h.getTime()}else if(h instanceof p.SqlInterval)switch(P){case "+":return p.SqlInterval.createFromMilliseconds(t.valueInMilliseconds()+h.valueInMilliseconds());case "-":return p.SqlInterval.createFromMilliseconds(t.valueInMilliseconds()-
h.valueInMilliseconds());case "*":return t.valueInMilliseconds()*h.valueInMilliseconds();case "/":return t.valueInMilliseconds()/h.valueInMilliseconds()}else t=t.valueInMilliseconds();else if(h instanceof p.SqlInterval)if(t instanceof Date)switch(P){case "+":return new Date(h.valueInMilliseconds()+t.getTime());case "-":return new Date(t.getTime()-h.valueInMilliseconds());case "*":return t.getTime()*h.valueInMilliseconds();case "/":return t.getTime()/h.valueInMilliseconds()}else h=h.valueInMilliseconds();
else if(t instanceof Date&&"number"===typeof h)switch(h*=864E5,t=t.getTime(),P){case "+":return new Date(t+h);case "-":return new Date(t-h);case "*":return new Date(t*h);case "/":return new Date(t/h)}else if(h instanceof Date&&"number"===typeof t)switch(t*=864E5,h=h.getTime(),P){case "+":return new Date(t+h);case "-":return new Date(t-h);case "*":return new Date(t*h);case "/":return new Date(t/h)}switch(P){case "+":return t+h;case "-":return t-h;case "*":return t*h;case "/":return t/h}}function v(P,
t,h,z){P=z.getAttribute(P,t);return null!=P&&1===h[t]?new Date(P):P}const L=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,aa=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,ia=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,U=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,F=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/;let G=function(){function P(){}P.makeBool=function(t){return!0===t};P.featureValue=
function(t,h,z,R){return v(t,h,z,R)};P.equalsNull=function(t){return null===t};P.applyLike=function(t,h,z){return d(t,h,z)};P.ensureArray=function(t){return ha(t)};P.applyIn=function(t,h){return B(t,h)};P.currentDate=function(){const t=new Date;t.setHours(0,0,0,0);return t};P.makeSqlInterval=function(t,h,z){return p.SqlInterval.createFromValueAndQualifer(t,h,z)};P.convertInterval=function(t){return t instanceof p.SqlInterval?t.valueInMilliseconds():t};P.currentTimestamp=function(){return new Date};
P.compare=function(t,h,z){return H(t,h,z)};P.calculate=function(t,h,z){return D(t,h,z)};P.makeComparable=function(t){return m(t)};P.evaluateFunction=function(t,h){return p.evaluateFunction(t,h)};P.lookup=function(t,h){t=h[t];return void 0===t?null:t};P.between=function(t,h){return null==t||null==h[0]||null==h[1]?null:t>=h[0]&&t<=h[1]};P.notbetween=function(t,h){return null==t||null==h[0]||null==h[1]?null:t<h[0]||t>h[1]};P.ternaryNot=function(t){return fa(t)};P.ternaryAnd=function(t,h){return A(t,
h)};P.ternaryOr=function(t,h){return u(t,h)};return P}(),N=function(){function P(h,z){this.fieldsIndex=z;this.datefields={};this.parameters={};this.parseTree=I.WhereGrammar.parse(h);const {isStandardized:R,isAggregate:J,referencedFieldNames:ja}=this.extractExpressionInfo(z);this.referencedFieldNames=ja;this.isStandardized=R;this.isAggregate=J}P.create=function(h,z){return new P(h,z)};var t=P.prototype;t.testSet=function(h,z=Q){const R={};for(const J of this.fieldNames)R[J]=h.map(ja=>z.getAttribute(ja,
J));return!!this.evaluateNode(this.parseTree,{attributes:R},Q)};t.calculateValue=function(h,z=Q){h=this.evaluateNode(this.parseTree,h,z);return h instanceof p.SqlInterval?h.valueInMilliseconds()/864E5:h};t.calculateValueCompiled=function(h,z=Q){if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(h,this.parameters,z,this.datefields);if(Z("csp-restrictions"))return this.calculateValue(h,z);this.compileMe();return this.parseTree._compiledVersion(h,this.parameters,z,this.datefields)};
t.testFeature=function(h,z=Q){return!!this.evaluateNode(this.parseTree,h,z)};t.testFeatureCompiled=function(h,z=Q){if(null!=this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(h,this.parameters,z,this.datefields);if(Z("csp-restrictions"))return this.testFeature(h,z);this.compileMe();return!!this.parseTree._compiledVersion(h,this.parameters,z,this.datefields)};t.getFunctions=function(){const h=[];this.visitAll(this.parseTree,z=>{"function"===z.type&&h.push(z.name.toLowerCase())});
return M(h)};t.getExpressions=function(){const h=new Map;this.visitAll(this.parseTree,z=>{if("function"===z.type){const R=z.name.toLowerCase();z=z.args.value[0];if("column_ref"===z.type){z=z.column;const J=`${R}-${z}`;h.has(J)||h.set(J,{aggregateType:R,field:z})}}});return[...h.values()]};t.getVariables=function(){const h=[];this.visitAll(this.parseTree,z=>{"param"===z.type&&h.push(z.value.toLowerCase())});return M(h)};t.compileMe=function(){const h="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+
")";this.parseTree._compiledVersion=(new Function("feature","lookups","attributeAdapter","datefields",h)).bind(G)};t.extractExpressionInfo=function(h){const z=[];let R=!0,J=!0;this.visitAll(this.parseTree,ja=>{switch(ja.type){case "column_ref":{const qa=h.get(ja.column),pa=qa&&qa.name;!qa||"date"!==qa.type&&"esriFieldTypeDate"!==qa.type||(this.datefields[qa.name]=1);void 0!==pa?(z.push(pa),ja.column=pa):z.push(ja.column);break}case "function":{const {name:qa,args:pa}=ja;ja=pa.value.length;R&&(R=p.isStandardized(qa,
ja));J&&(J=K.isAggregate(qa,ja))}}});return{referencedFieldNames:M(z),isStandardized:R,isAggregate:J}};t.visitAll=function(h,z){if(null!=h)switch(z(h),h.type){case "when_clause":this.visitAll(h.operand,z);this.visitAll(h.value,z);break;case "case_expression":for(const R of h.clauses)this.visitAll(R,z);"simple"===h.format&&this.visitAll(h.operand,z);null!==h.else&&this.visitAll(h.else,z);break;case "expr_list":for(const R of h.value)this.visitAll(R,z);break;case "unary_expr":this.visitAll(h.expr,z);
break;case "binary_expr":this.visitAll(h.left,z);this.visitAll(h.right,z);break;case "function":this.visitAll(h.args,z)}};t.evaluateNodeToJavaScript=function(h){switch(h.type){case "interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(h.value)+", "+JSON.stringify(h.qualifier)+","+JSON.stringify(h.op)+")";case "case_expression":var z="";if("simple"===h.format){var R="this.makeComparable("+this.evaluateNodeToJavaScript(h.operand)+")";z="( ";for(let J=0;J<h.clauses.length;J++)z+=" ("+
R+" \x3d\x3d\x3d this.makeComparable("+this.evaluateNodeToJavaScript(h.clauses[J].operand)+")) ? ("+this.evaluateNodeToJavaScript(h.clauses[J].value)+") : "}else for(z="( ",R=0;R<h.clauses.length;R++)z+=" this.makeBool("+this.evaluateNodeToJavaScript(h.clauses[R].operand)+")\x3d\x3d\x3dtrue ? ("+this.evaluateNodeToJavaScript(h.clauses[R].value)+") : ";z=null!==h.else?z+this.evaluateNodeToJavaScript(h.else):z+"null";return z+=" )";case "param":return"this.lookup("+JSON.stringify(h.value.toLowerCase())+
",lookups)";case "expr_list":z="[";for(R of h.value)"["!==z&&(z+=","),z+=this.evaluateNodeToJavaScript(R);return z+="]";case "unary_expr":return"this.ternaryNot("+this.evaluateNodeToJavaScript(h.expr)+")";case "binary_expr":switch(h.operator){case "AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(h.left)+","+this.evaluateNodeToJavaScript(h.right)+" )";case "OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(h.left)+","+this.evaluateNodeToJavaScript(h.right)+" )";case "IS":if("null"!==
h.right.type)throw Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(h.left)+")";case "ISNOT":if("null"!==h.right.type)throw Error("Unsupported RHS for IS");return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(h.left)+")))";case "IN":return"this.applyIn("+this.evaluateNodeToJavaScript(h.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(h.right)+"))";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(h.left)+",this.ensureArray("+
this.evaluateNodeToJavaScript(h.right)+")))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(h.left)+","+this.evaluateNodeToJavaScript(h.right)+")";case "NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(h.left)+","+this.evaluateNodeToJavaScript(h.right)+")";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(h.left)+","+this.evaluateNodeToJavaScript(h.right)+","+JSON.stringify(h.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+
this.evaluateNodeToJavaScript(h.left)+","+this.evaluateNodeToJavaScript(h.right)+","+JSON.stringify(h.escape)+"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+JSON.stringify(h.operator)+","+this.evaluateNodeToJavaScript(h.left)+","+this.evaluateNodeToJavaScript(h.right)+")";case "*":case "-":case "+":case "/":return"this.calculate("+JSON.stringify(h.operator)+","+this.evaluateNodeToJavaScript(h.left)+","+this.evaluateNodeToJavaScript(h.right)+
")"}throw Error("Not Supported Operator "+h.operator);case "null":case "bool":case "string":case "number":return JSON.stringify(h.value);case "date":return"(new Date("+E(h.value).getTime().toString()+"))";case "timestamp":return"(new Date("+q(h.value).getTime().toString()+"))";case "current_time":return"date"===h.mode?"this.currentDate()":"this.currentTimestamp()";case "column_ref":return"this.featureValue(feature,"+JSON.stringify(h.column)+",datefields,attributeAdapter)";case "function":return"this.evaluateFunction("+
JSON.stringify(h.name)+","+this.evaluateNodeToJavaScript(h.args)+")"}throw Error("Unsupported sql syntax "+h.type);};t.evaluateNode=function(h,z,R){switch(h.type){case "interval":return z=this.evaluateNode(h.value,z,R),p.SqlInterval.createFromValueAndQualifer(z,h.qualifier,h.op);case "case_expression":if("simple"===h.format){var J=m(this.evaluateNode(h.operand,z,R));for(var ja=0;ja<h.clauses.length;ja++)if(J===m(this.evaluateNode(h.clauses[ja].operand,z,R)))return this.evaluateNode(h.clauses[ja].value,
z,R)}else for(J=0;J<h.clauses.length;J++)if(!0===this.evaluateNode(h.clauses[J].operand,z,R))return this.evaluateNode(h.clauses[J].value,z,R);return null!==h.else?this.evaluateNode(h.else,z,R):null;case "param":return this.parameters[h.value.toLowerCase()];case "expr_list":J=[];for(ja of h.value)J.push(this.evaluateNode(ja,z,R));return J;case "unary_expr":return fa(this.evaluateNode(h.expr,z,R));case "binary_expr":switch(h.operator){case "AND":return A(this.evaluateNode(h.left,z,R),this.evaluateNode(h.right,
z,R));case "OR":return u(this.evaluateNode(h.left,z,R),this.evaluateNode(h.right,z,R));case "IS":if("null"!==h.right.type)throw Error("Unsupported RHS for IS");return null===this.evaluateNode(h.left,z,R);case "ISNOT":if("null"!==h.right.type)throw Error("Unsupported RHS for IS");return null!==this.evaluateNode(h.left,z,R);case "IN":return J=ha(this.evaluateNode(h.right,z,R)),B(this.evaluateNode(h.left,z,R),J);case "NOT IN":return J=ha(this.evaluateNode(h.right,z,R)),fa(B(this.evaluateNode(h.left,
z,R),J));case "BETWEEN":return J=this.evaluateNode(h.left,z,R),h=this.evaluateNode(h.right,z,R),null==J||null==h[0]||null==h[1]?null:J>=m(h[0])&&J<=m(h[1]);case "NOTBETWEEN":return J=this.evaluateNode(h.left,z,R),h=this.evaluateNode(h.right,z,R),null==J||null==h[0]||null==h[1]?null:J<m(h[0])||J>m(h[1]);case "LIKE":return d(this.evaluateNode(h.left,z,R),this.evaluateNode(h.right,z,R),h.escape);case "NOT LIKE":return fa(d(this.evaluateNode(h.left,z,R),this.evaluateNode(h.right,z,R),h.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return H(h.operator,
this.evaluateNode(h.left,z,R),this.evaluateNode(h.right,z,R));case "-":case "+":case "*":case "/":return D(h.operator,this.evaluateNode(h.left,z,R),this.evaluateNode(h.right,z,R))}case "null":case "bool":case "string":case "number":return h.value;case "date":return E(h.value);case "timestamp":return q(h.value);case "current_time":return z=new Date,"date"===h.mode&&z.setHours(0,0,0,0),z;case "column_ref":return v(z,h.column,this.datefields,R);case "function":return z=this.evaluateNode(h.args,z,R),
this.isAggregate?K.aggregateFunction(h.name,z):p.evaluateFunction(h.name,z)}throw Error("Unsupported sql syntax "+h.type);};e._createClass(P,[{key:"fieldNames",get:function(){return this.referencedFieldNames}}]);return P}();const Q={getAttribute(P,t){return(P&&"object"===typeof P.attributes?P.attributes:P)[t]}};n.WhereClause=N;n.defaultAttributeAdapter=Q;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/core/sql/AggregateFunctions":function(){define(["exports"],function(n){function e(p){let I=
0;for(let l=0;l<p.length;l++)I+=p[l];return I/p.length}function Z(p){const I=e(p),l=p.length;let r=0;for(const q of p)r+=(q-I)**2;return 1<l?r/(l-1):0}const K={min:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.min.apply(Math,p[0])},max:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.max.apply(Math,p[0])},avg:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:e(p[0])},sum:{minParams:1,maxParams:1,evaluate:p=>{if(null==p[0])p=null;else{{p=p[0];let I=0;for(let l=0;l<p.length;l++)I+=
p[l];p=I}}return p}},stddev:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.sqrt(Z(p[0]))},count:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:p[0].length},var:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Z(p[0])}};n.aggregateFunction=function(p,I){const l=K[p.toLowerCase()];if(null==l)throw Error("Function Not Recognised");if(I.length<l.minParams||I.length>l.maxParams)throw Error(`Invalid Parameter count for call to ${p.toUpperCase()}`);return l.evaluate(I)};n.isAggregate=
function(p,I){p=K[p.toLowerCase()];return null!=p&&I>=p.minParams&&I<=p.maxParams};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/core/sql/StandardizedFunctions":function(){define(["exports","../string"],function(n,e){let Z=function(){function p(){this.op="+";this.minute=this.year=this.month=this.hour=this.second=this.day=0}p.fixDefaults=function(I){if(null!==I.precision||null!==I.secondary)throw Error("Primary and Secondary SqlInterval qualifiers not supported");};p.createFromMilliseconds=
function(I){const l=new p;l.second=I/1E3;return l};p.createFromValueAndQualifer=function(I,l,r){let q=null;const E=new p;E.op="-"===r?"-":"+";if("interval-period"===l.type){p.fixDefaults(l);if("year"===l.period||"month"===l.period)throw Error("Year-Month Intervals not supported");if(/^[0-9]{1,}$/.test(I))E[l.period]=parseFloat(I);else throw Error("Illegal Interval");}else{p.fixDefaults(l.start);p.fixDefaults(l.end);if("year"===l.start.period||"month"===l.start.period)throw Error("Year-Month Intervals not supported");
if("year"===l.end.period||"month"===l.end.period)throw Error("Year-Month Intervals not supported");switch(l.start.period){case "day":switch(l.end.period){case "hour":q=/^[0-9]{1,} [0-9]{1,}$/;if(q.test(I))E[l.start.period]=parseFloat(I.split(" ")[0]),E[l.end.period]=parseFloat(I.split(" ")[1]);else throw Error("Illegal Interval");break;case "minute":q=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$/;if(q.test(I))E[l.start.period]=parseFloat(I.split(" ")[0]),I=I.split(" ")[1].split(":"),E.hour=parseFloat(I[0]),
E.minute=parseFloat(I[1]);else throw Error("Illegal Interval");break;case "second":q=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(q.test(I))E[l.start.period]=parseFloat(I.split(" ")[0]),I=I.split(" ")[1].split(":"),E.hour=parseFloat(I[0]),E.minute=parseFloat(I[1]),E.second=parseFloat(I[2]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;case "hour":switch(l.end.period){case "minute":q=/^[0-9]{1,}:[0-9]{1,}$/;if(q.test(I))E.hour=parseFloat(I.split(":")[0]),
E.minute=parseFloat(I.split(":")[1]);else throw Error("Illegal Interval");break;case "second":q=/^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(q.test(I))I=I.split(":"),E.hour=parseFloat(I[0]),E.minute=parseFloat(I[1]),E.second=parseFloat(I[2]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;case "minute":switch(l.end.period){case "second":q=/^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(q.test(I))I=I.split(":"),E.minute=parseFloat(I[0]),E.second=parseFloat(I[1]);
else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;default:throw"Invalid Interval.";}}return E};p.prototype.valueInMilliseconds=function(){return("-"===this.op?-1:1)*(1E3*this.second+6E4*this.minute+36E5*this.hour+864E5*this.day+365/12*this.month*864E5+31536E6*this.year)};return p}();const K={extract:{minParams:2,maxParams:2,evaluate:([p,I])=>{if(null==I)return null;if(I instanceof Date)switch(p.toUpperCase()){case "SECOND":return I.getSeconds();case "MINUTE":return I.getMinutes();
case "HOUR":return I.getHours();case "DAY":return I.getDate();case "MONTH":return I.getMonth()+1;case "YEAR":return I.getFullYear()}throw Error("Invalid Parameter for call to EXTRACT");}},substring:{minParams:2,maxParams:3,evaluate:p=>{if(2===p.length){const [I,l]=p;return null==I||null==l?null:I.toString().substring(l-1)}if(3===p.length){const [I,l,r]=p;return null==I||null==l||null==r?null:0>=r?"":I.toString().substring(l-1,l+r-1)}}},position:{minParams:2,maxParams:2,evaluate:([p,I])=>null==p||
null==I?null:I.indexOf(p)+1},trim:{minParams:2,maxParams:3,evaluate:p=>{var I=3===p.length,l=I?p[1]:" ";I=I?p[2]:p[1];if(null==l||null==I)return null;l=`(${e.escapeRegExpString(l)})`;switch(p[0]){case "BOTH":return I.replace(new RegExp(`^${l}*|${l}*$`,"g"),"");case "LEADING":return I.replace(new RegExp(`^${l}*`,"g"),"");case "TRAILING":return I.replace(new RegExp(`${l}*$`,"g"),"")}throw Error("Invalid Parameter for call to TRIM");}},abs:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.abs(p[0])},
ceiling:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.ceil(p[0])},floor:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.floor(p[0])},log:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.log(p[0])},log10:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.log(p[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.sin(p[0])},cos:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.cos(p[0])},tan:{minParams:1,maxParams:1,evaluate:p=>
null==p[0]?null:Math.tan(p[0])},asin:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.asin(p[0])},acos:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.acos(p[0])},atan:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:Math.atan(p[0])},sign:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:0<p[0]?1:0>p[1]?-1:0},power:{minParams:2,maxParams:2,evaluate:p=>null==p[0]||null==p[1]?null:p[0]**p[1]},mod:{minParams:2,maxParams:2,evaluate:p=>null==p[0]||null==p[1]?null:p[0]%p[1]},round:{minParams:1,
maxParams:2,evaluate:p=>{const I=p[0];p=2===p.length?10**p[1]:1;return null==I?null:Math.round(I*p)/p}},truncate:{minParams:1,maxParams:2,evaluate:p=>null==p[0]?null:1===p.length?parseInt(p[0].toFixed(0),10):parseFloat(p[0].toFixed(p[1]))},char_length:{minParams:1,maxParams:1,evaluate:p=>"string"===typeof p[0]||p[0]instanceof String?p[0].length:0},concat:{minParams:1,maxParams:Infinity,evaluate:p=>{let I="";for(let l=0;l<p.length;l++){if(null==p[l])return null;I+=p[l].toString()}return I}},lower:{minParams:1,
maxParams:1,evaluate:p=>null==p[0]?null:p[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:p=>null==p[0]?null:p[0].toString().toUpperCase()}};n.SqlInterval=Z;n.evaluateFunction=function(p,I){const l=K[p.toLowerCase()];if(null==l)throw Error("Function Not Recognised");if(I.length<l.minParams||I.length>l.maxParams)throw Error(`Invalid Parameter count for call to ${p.toUpperCase()}`);return l.evaluate(I)};n.isStandardized=function(p,I){p=K[p.toLowerCase()];return null!=p&&I>=p.minParams&&
I<=p.maxParams};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/core/sql/WhereGrammar":function(){define(["exports","../../chunks/_commonjsHelpers"],function(n,e){var Z=e.createCommonjsModule(function(p){(function(I,l){p.exports&&(p.exports=l())})(e.commonjsGlobal,function(){function I(l,r,q,E){this.message=l;this.expected=r;this.found=q;this.location=E;this.name="SyntaxError";"function"===typeof Error.captureStackTrace&&Error.captureStackTrace(this,I)}(function(l,r){function q(){this.constructor=
l}q.prototype=r.prototype;l.prototype=new q})(I,Error);I.buildMessage=function(l,r){function q(A){return A.charCodeAt(0).toString(16).toUpperCase()}function E(A){return A.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(u){return"\\x0"+q(u)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(u){return"\\x"+q(u)})}function ha(A){return A.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,
"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(u){return"\\x0"+q(u)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(u){return"\\x"+q(u)})}var fa={literal:function(A){return'"'+E(A.text)+'"'},"class":function(A){var u="",B;for(B=0;B<A.parts.length;B++)u+=A.parts[B]instanceof Array?ha(A.parts[B][0])+"-"+ha(A.parts[B][1]):ha(A.parts[B]);return"["+(A.inverted?"^":"")+u+"]"},any:function(A){return"any character"},end:function(A){return"end of input"},
other:function(A){return A.description}};return"Expected "+function(A){var u=Array(A.length),B;for(B=0;B<A.length;B++){var d=B;var m=A[B];m=fa[m.type](m);u[d]=m}u.sort();if(0<u.length){for(A=B=1;B<u.length;B++)u[B-1]!==u[B]&&(u[A]=u[B],A++);u.length=A}switch(u.length){case 1:return u[0];case 2:return u[0]+" or "+u[1];default:return u.slice(0,-1).join(", ")+", or "+u[u.length-1]}}(l)+" but "+(r?'"'+E(r)+'"':"end of input")+" found."};return{SyntaxError:I,parse:function(l,r){function q(k,C){return{type:"literal",
text:k,ignoreCase:C}}function E(k,C,y){return{type:"class",parts:k,inverted:C,ignoreCase:y}}function ha(k){var C=Zb[k],y;if(!C){for(y=k-1;!Zb[y];)y--;C=Zb[y];for(C={line:C.line,column:C.column};y<k;)10===l.charCodeAt(y)?(C.line++,C.column=1):C.column++,y++;Zb[k]=C}return C}function fa(k,C){var y=ha(k),X=ha(C);return{start:{offset:k,line:y.line,column:y.column},end:{offset:C,line:X.line,column:X.column}}}function A(k){c<sb||(c>sb&&(sb=c,oc=[]),oc.push(k))}function u(){var k=c;var C=ra();if(C!==a)if(C=
d(),C!==a){var y=ra();y!==a?k=C:(c=k,k=a)}else c=k,k=a;else c=k,k=a;return k}function B(){var k=c;var C=d();if(C!==a){var y=[];var X=c;var va=ra();if(va!==a){var Fa=Ha();if(Fa!==a){var La=ra();if(La!==a){var Pa=d();Pa!==a?X=va=[va,Fa,La,Pa]:(c=X,X=a)}else c=X,X=a}else c=X,X=a}else c=X,X=a;for(;X!==a;)y.push(X),X=c,va=ra(),va!==a?(Fa=Ha(),Fa!==a?(La=ra(),La!==a?(Pa=d(),Pa!==a?X=va=[va,Fa,La,Pa]:(c=X,X=a)):(c=X,X=a)):(c=X,X=a)):(c=X,X=a);if(y!==a){k={type:"expr_list"};C=[C];for(X=0;X<y.length;X++)C.push(y[X][3]);
k.value=C}else c=k,k=a}else c=k,k=a;return k}function d(){var k=c;var C=m();if(C!==a){var y=[];var X=c;var va=ra();if(va!==a){var Fa=O();if(Fa!==a){var La=ra();if(La!==a){var Pa=m();Pa!==a?X=va=[va,Fa,La,Pa]:(c=X,X=a)}else c=X,X=a}else c=X,X=a}else c=X,X=a;for(;X!==a;)y.push(X),X=c,va=ra(),va!==a?(Fa=O(),Fa!==a?(La=ra(),La!==a?(Pa=m(),Pa!==a?X=va=[va,Fa,La,Pa]:(c=X,X=a)):(c=X,X=a)):(c=X,X=a)):(c=X,X=a);y!==a?k=C=cb(C,y):(c=k,k=a)}else c=k,k=a;return k}function m(){var k=c;var C=H();if(C!==a){var y=
[];var X=c;var va=ra();if(va!==a){var Fa=w();if(Fa!==a){var La=ra();if(La!==a){var Pa=H();Pa!==a?X=va=[va,Fa,La,Pa]:(c=X,X=a)}else c=X,X=a}else c=X,X=a}else c=X,X=a;for(;X!==a;)y.push(X),X=c,va=ra(),va!==a?(Fa=w(),Fa!==a?(La=ra(),La!==a?(Pa=H(),Pa!==a?X=va=[va,Fa,La,Pa]:(c=X,X=a)):(c=X,X=a)):(c=X,X=a)):(c=X,X=a);y!==a?k=C=cb(C,y):(c=k,k=a)}else c=k,k=a;return k}function H(){var k=c;var C=g();if(C===a){C=c;if(33===l.charCodeAt(c)){var y=Ta;c++}else y=a,0===sa&&A(jb);if(y!==a){var X=c;sa++;if(61===
l.charCodeAt(c)){var va=rb;c++}else va=a,0===sa&&A(Qa);sa--;va===a?X=void 0:(c=X,X=a);X!==a?C=y=[y,X]:(c=C,C=a)}else c=C,C=a}C!==a?(y=ra(),y!==a?(X=H(),X!==a?k=C={type:"unary_expr",operator:"NOT",expr:X}:(c=k,k=a)):(c=k,k=a)):(c=k,k=a);if(k===a)if(k=c,C=L(),C!==a)if(y=ra(),y!==a){y=[];X=c;va=ra();if(va!==a){var Fa=M();if(Fa!==a){var La=ra();if(La!==a){var Pa=L();Pa!==a?X=va=[va,Fa,La,Pa]:(c=X,X=a)}else c=X,X=a}else c=X,X=a}else c=X,X=a;if(X!==a)for(;X!==a;)y.push(X),X=c,va=ra(),va!==a?(Fa=M(),Fa!==
a?(La=ra(),La!==a?(Pa=L(),Pa!==a?X=va=[va,Fa,La,Pa]:(c=X,X=a)):(c=X,X=a)):(c=X,X=a)):(c=X,X=a);else y=a;y!==a&&(y={type:"arithmetic",tail:y});y===a&&(y=c,X=v(),X!==a?(va=ra(),va!==a?(va=Ia(),va!==a?(va=ra(),va!==a?(va=B(),va!==a?(Fa=ra(),Fa!==a?(Fa=Sa(),Fa!==a?y=X={op:X,right:va}:(c=y,y=a)):(c=y,y=a)):(c=y,y=a)):(c=y,y=a)):(c=y,y=a)):(c=y,y=a)):(c=y,y=a),y===a&&(y=c,X=v(),X!==a?(va=ra(),va!==a?(va=Ia(),va!==a?(va=ra(),va!==a?(va=Sa(),va!==a?y=X={op:X,right:{type:"expr_list",value:[]}}:(c=y,y=a)):
(c=y,y=a)):(c=y,y=a)):(c=y,y=a)):(c=y,y=a),y===a&&(y=c,X=v(),X!==a?(va=ra(),va!==a?(va=t(),va!==a?y=X={op:X,right:va}:(c=y,y=a)):(c=y,y=a)):(c=y,y=a))),y===a&&(y=c,va=g(),va!==a?(X=ra(),X!==a?(X=S(),X!==a?(Fa=ra(),Fa!==a?(Fa=L(),Fa!==a?(La=ra(),La!==a?(La=w(),La!==a?(va=ra(),va!==a?(va=L(),va!==a?y=va={op:"NOT"+X,right:{type:"expr_list",value:[Fa,va]}}:(c=y,y=a)):(c=y,y=a)):(c=y,y=a)):(c=y,y=a)):(c=y,y=a)):(c=y,y=a)):(c=y,y=a)):(c=y,y=a)):(c=y,y=a),y===a&&(y=c,va=S(),va!==a?(X=ra(),X!==a?(X=L(),X!==
a?(Fa=ra(),Fa!==a?(Fa=w(),Fa!==a?(La=ra(),La!==a?(La=L(),La!==a?y=va={op:va,right:{type:"expr_list",value:[X,La]}}:(c=y,y=a)):(c=y,y=a)):(c=y,y=a)):(c=y,y=a)):(c=y,y=a)):(c=y,y=a)):(c=y,y=a)),y===a&&(y=c,X=f(),X!==a?(va=ra(),va!==a?(va=g(),va!==a?(va=ra(),va!==a?(va=L(),va!==a?y=X={op:X+"NOT",right:va}:(c=y,y=a)):(c=y,y=a)):(c=y,y=a)):(c=y,y=a)):(c=y,y=a),y===a&&(y=c,X=f(),X!==a?(va=ra(),va!==a?(va=L(),va!==a?y=X={op:X,right:va}:(c=y,y=a)):(c=y,y=a)):(c=y,y=a)),y===a&&(y=c,X=D(),X!==a?(va=ra(),va!==
a?(va=qa(),va!==a?(Fa=ra(),Fa!==a?(Fa=c,l.substr(c,6).toLowerCase()===ud?(La=l.substr(c,6),c+=6):(La=a,0===sa&&A(vd)),La!==a?(La=c,sa++,Pa=Q(),sa--,Pa===a?La=void 0:(c=La,La=a),La!==a?Fa="ESCAPE":(c=Fa,Fa=a)):(c=Fa,Fa=a),Fa!==a?(Fa=ra(),Fa!==a?(Fa=pa(),Fa!==a?y=X={op:X,right:va,escape:Fa.value}:(c=y,y=a)):(c=y,y=a)):(c=y,y=a)):(c=y,y=a)):(c=y,y=a)):(c=y,y=a)):(c=y,y=a),y===a&&(y=c,X=D(),X!==a?(va=ra(),va!==a?(va=qa(),va!==a?y=X={op:X,right:va,escape:""}:(c=y,y=a)):(c=y,y=a)):(c=y,y=a))))));y===a&&
(y=null);y!==a?(k=C,C=y,""==C||void 0==C||null==C?C=k:(y=null,C=y="arithmetic"==C.type?cb(k,C.tail):hb(C.op,k,C.right,C.escape)),k=C):(c=k,k=a)}else c=k,k=a;else c=k,k=a;return k}function M(){if(l.substr(c,2)===xb){var k=xb;c+=2}else k=a,0===sa&&A(Y);k===a&&(62===l.charCodeAt(c)?(k=da,c++):(k=a,0===sa&&A(ca)),k===a&&(l.substr(c,2)===oa?(k=oa,c+=2):(k=a,0===sa&&A(Aa)),k===a&&(l.substr(c,2)===Da?(k=Da,c+=2):(k=a,0===sa&&A(Na)),k===a&&(60===l.charCodeAt(c)?(k=Oa,c++):(k=a,0===sa&&A(ab)),k===a&&(61===
l.charCodeAt(c)?(k=rb,c++):(k=a,0===sa&&A(Qa)),k===a&&(l.substr(c,2)===Za?(k=Za,c+=2):(k=a,0===sa&&A($a))))))));return k}function D(){var k=k=c;var C=g();if(C!==a){var y=ra();if(y!==a){var X=V();X!==a?k=C=[C,y,X]:(c=k,k=a)}else c=k,k=a}else c=k,k=a;k!==a&&(k=k[0]+" "+k[2]);k===a&&(k=V());return k}function v(){var k=k=c;var C=g();if(C!==a){var y=ra();if(y!==a){var X=b();X!==a?k=C=[C,y,X]:(c=k,k=a)}else c=k,k=a}else c=k,k=a;k!==a&&(k=k[0]+" "+k[2]);k===a&&(k=b());return k}function L(){var k=c;var C=
ia();if(C!==a){var y=[];var X=c;var va=ra();if(va!==a){var Fa=aa();if(Fa!==a){var La=ra();if(La!==a){var Pa=ia();Pa!==a?X=va=[va,Fa,La,Pa]:(c=X,X=a)}else c=X,X=a}else c=X,X=a}else c=X,X=a;for(;X!==a;)y.push(X),X=c,va=ra(),va!==a?(Fa=aa(),Fa!==a?(La=ra(),La!==a?(Pa=ia(),Pa!==a?X=va=[va,Fa,La,Pa]:(c=X,X=a)):(c=X,X=a)):(c=X,X=a)):(c=X,X=a);y!==a?k=C=cb(C,y):(c=k,k=a)}else c=k,k=a;return k}function aa(){if(43===l.charCodeAt(c)){var k=gb;c++}else k=a,0===sa&&A(kb);k===a&&(45===l.charCodeAt(c)?(k=pc,c++):
(k=a,0===sa&&A(qc)));return k}function ia(){var k=c;var C=F();if(C!==a){var y=[];var X=c;var va=ra();if(va!==a){var Fa=U();if(Fa!==a){var La=ra();if(La!==a){var Pa=F();Pa!==a?X=va=[va,Fa,La,Pa]:(c=X,X=a)}else c=X,X=a}else c=X,X=a}else c=X,X=a;for(;X!==a;)y.push(X),X=c,va=ra(),va!==a?(Fa=U(),Fa!==a?(La=ra(),La!==a?(Pa=F(),Pa!==a?X=va=[va,Fa,La,Pa]:(c=X,X=a)):(c=X,X=a)):(c=X,X=a)):(c=X,X=a);y!==a?k=C=cb(C,y):(c=k,k=a)}else c=k,k=a;return k}function U(){if(42===l.charCodeAt(c)){var k=wd;c++}else k=a,
0===sa&&A(xd);k===a&&(47===l.charCodeAt(c)?(k=yd,c++):(k=a,0===sa&&A(zd)));return k}function F(){var k=pa();if(k===a){var C=c;var y=c;var X=x();if(X!==a){var va=T();if(va!==a){var Fa=ma();Fa!==a?y=X=parseFloat(X+va+Fa):(c=y,y=a)}else c=y,y=a}else c=y,y=a;y===a&&(y=c,X=x(),X!==a?(va=T(),va!==a?y=X=parseFloat(X+va):(c=y,y=a)):(c=y,y=a),y===a&&(y=c,X=x(),X!==a?(va=ma(),va!==a?y=X=parseFloat(X+va):(c=y,y=a)):(c=y,y=a),y===a&&(y=c,X=x(),X!==a&&(X=parseFloat(X)),y=X)));var La=y;if(La!==a){var Pa=c;sa++;
var Ad=N();sa--;Ad===a?Pa=void 0:(c=Pa,Pa=a);Pa!==a?C=La={type:"number",value:La}:(c=C,C=a)}else c=C,C=a;k=C;if(k===a){var Lb=c;var Bb=c;if(l.substr(c,4).toLowerCase()===Bd){var $b=l.substr(c,4);c+=4}else $b=a,0===sa&&A(Cd);if($b!==a){var Mb=c;sa++;var Dd=Q();sa--;Dd===a?Mb=void 0:(c=Mb,Mb=a);Mb!==a?Bb=$b=[$b,Mb]:(c=Bb,Bb=a)}else c=Bb,Bb=a;var yb=Bb;yb!==a&&(yb={type:"bool",value:!0});Lb=yb;if(Lb===a){Lb=c;var Cb=c;if(l.substr(c,5).toLowerCase()===Ed){var ac=l.substr(c,5);c+=5}else ac=a,0===sa&&A(Fd);
if(ac!==a){var Nb=c;sa++;var Gd=Q();sa--;Gd===a?Nb=void 0:(c=Nb,Nb=a);Nb!==a?Cb=ac=[ac,Nb]:(c=Cb,Cb=a)}else c=Cb,Cb=a;yb=Cb;yb!==a&&(yb={type:"bool",value:!1});Lb=yb}k=Lb;if(k===a){var Db=c;if(l.substr(c,4).toLowerCase()===Hd){var bc=l.substr(c,4);c+=4}else bc=a,0===sa&&A(Id);if(bc!==a){var Ob=c;sa++;var Jd=Q();sa--;Jd===a?Ob=void 0:(c=Ob,Ob=a);Ob!==a?Db=bc=[bc,Ob]:(c=Db,Db=a)}else c=Db,Db=a;var rc=Db;rc!==a&&(rc={type:"null",value:null});k=rc;if(k===a){var vb=c;var Eb=c;if(l.substr(c,4).toLowerCase()===
Kd){var sc=l.substr(c,4);c+=4}else sc=a,0===sa&&A(Ld);if(sc!==a){var cc=c;sa++;var Md=Q();sa--;Md===a?cc=void 0:(c=cc,cc=a);cc!==a?Eb=sc="DATE":(c=Eb,Eb=a)}else c=Eb,Eb=a;var Rc=Eb;if(Rc!==a){var Nd=ra();if(Nd!==a){var Sc=qa();Sc!==a?vb=Rc={type:"date",value:Sc.value}:(c=vb,vb=a)}else c=vb,vb=a}else c=vb,vb=a;k=vb;if(k===a){var wb=c;var Fb=c;if(l.substr(c,9).toLowerCase()===Od){var tc=l.substr(c,9);c+=9}else tc=a,0===sa&&A(Pd);if(tc!==a){var dc=c;sa++;var Qd=Q();sa--;Qd===a?dc=void 0:(c=dc,dc=a);
dc!==a?Fb=tc="TIMESTAMP":(c=Fb,Fb=a)}else c=Fb,Fb=a;var Tc=Fb;if(Tc!==a){var Rd=ra();if(Rd!==a){var Uc=qa();Uc!==a?wb=Tc={type:"timestamp",value:Uc.value}:(c=wb,wb=a)}else c=wb,wb=a}else c=wb,wb=a;k=wb;if(k===a){var Xa=c;var Pb=ka();if(Pb!==a){var uc=ra();if(uc!==a){if(45===l.charCodeAt(c)){var tb=pc;c++}else tb=a,0===sa&&A(qc);tb===a&&(43===l.charCodeAt(c)?(tb=gb,c++):(tb=a,0===sa&&A(kb)));if(tb!==a){var vc=ra();if(vc!==a){var Qb=qa();if(Qb!==a){var Sd=ra();if(Sd!==a){var Vc=z();Vc!==a?Xa=Pb={type:"interval",
value:Qb,qualifier:Vc,op:tb}:(c=Xa,Xa=a)}else c=Xa,Xa=a}else c=Xa,Xa=a}else c=Xa,Xa=a}else c=Xa,Xa=a}else c=Xa,Xa=a}else c=Xa,Xa=a;Xa===a&&(Xa=c,Pb=ka(),Pb!==a?(uc=ra(),uc!==a?(tb=qa(),tb!==a?(vc=ra(),vc!==a?(Qb=z(),Qb!==a?Xa=Pb={type:"interval",value:tb,qualifier:Qb,op:""}:(c=Xa,Xa=a)):(c=Xa,Xa=a)):(c=Xa,Xa=a)):(c=Xa,Xa=a)):(c=Xa,Xa=a));k=Xa}}}}}}var Wa=k;if(Wa===a){var db=c;var Gb=c;if(l.substr(c,7).toLowerCase()===Td){var wc=l.substr(c,7);c+=7}else wc=a,0===sa&&A(Ud);if(wc!==a){var ec=c;sa++;var Vd=
Q();sa--;Vd===a?ec=void 0:(c=ec,ec=a);ec!==a?Gb=wc="EXTRACT":(c=Gb,Gb=a)}else c=Gb,Gb=a;var Wc=Gb;if(Wc!==a){var Wd=ra();if(Wd!==a){var Xd=Ia();if(Xd!==a){var Yd=ra();if(Yd!==a){var ob=la();ob===a&&(ob=na(),ob===a&&(ob=ua(),ob===a&&(ob=ta(),ob===a&&(ob=xa(),ob===a&&(ob=Ba())))));var Xc=ob;if(Xc!==a){var Zd=ra();if(Zd!==a){var $d=ba();if($d!==a){var ae=ra();if(ae!==a){var Yc=d();if(Yc!==a){var be=ra();if(be!==a){var ce=Sa();ce!==a?db=Wc={type:"function",name:"extract",args:{type:"expr_list",value:[{type:"string",
value:Xc},Yc]}}:(c=db,db=a)}else c=db,db=a}else c=db,db=a}else c=db,db=a}else c=db,db=a}else c=db,db=a}else c=db,db=a}else c=db,db=a}else c=db,db=a}else c=db,db=a}else c=db,db=a;Wa=db;if(Wa===a){var bb=c;var Hb=c;if(l.substr(c,9).toLowerCase()===de){var xc=l.substr(c,9);c+=9}else xc=a,0===sa&&A(ee);if(xc!==a){var fc=c;sa++;var fe=Q();sa--;fe===a?fc=void 0:(c=fc,fc=a);fc!==a?Hb=xc="SUBSTRING":(c=Hb,Hb=a)}else c=Hb,Hb=a;var Zc=Hb;if(Zc!==a){var ge=ra();if(ge!==a){var he=Ia();if(he!==a){var ie=ra();
if(ie!==a){var yc=d();if(yc!==a){var je=ra();if(je!==a){var ke=ba();if(ke!==a){var le=ra();if(le!==a){var zc=d();if(zc!==a){var me=ra();if(me!==a){var lb=c;var Ib=c;if(l.substr(c,3).toLowerCase()===ne){var Ac=l.substr(c,3);c+=3}else Ac=a,0===sa&&A(oe);if(Ac!==a){var gc=c;sa++;var pe=Q();sa--;pe===a?gc=void 0:(c=gc,gc=a);gc!==a?Ib=Ac="FOR":(c=Ib,Ib=a)}else c=Ib,Ib=a;var Rb=Ib;if(Rb!==a){var $c=ra();if($c!==a){var ad=d();if(ad!==a){var bd=ra();bd!==a?lb=Rb=[Rb,$c,ad,bd]:(c=lb,lb=a)}else c=lb,lb=a}else c=
lb,lb=a}else c=lb,lb=a;lb===a&&(lb=null);lb!==a?(Rb=Sa(),Rb!==a?bb=Zc={type:"function",name:"substring",args:{type:"expr_list",value:lb?[yc,zc,lb[2]]:[yc,zc]}}:(c=bb,bb=a)):(c=bb,bb=a)}else c=bb,bb=a}else c=bb,bb=a}else c=bb,bb=a}else c=bb,bb=a}else c=bb,bb=a}else c=bb,bb=a}else c=bb,bb=a}else c=bb,bb=a}else c=bb,bb=a}else c=bb,bb=a;Wa=bb;if(Wa===a){var Ma=c;var Sb=W();if(Sb!==a){var Bc=ra();if(Bc!==a){var Cc=Ia();if(Cc!==a){var Dc=ra();if(Dc!==a){var pb=h();pb===a&&(pb=null);if(pb!==a){var Ec=ra();
if(Ec!==a){var Tb=d();if(Tb!==a){var Fc=ra();if(Fc!==a){var Gc=ba();if(Gc!==a){var qe=ra();if(qe!==a){var cd=d();if(cd!==a){var re=ra();if(re!==a){var se=Sa();se!==a?Ma=Sb={type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==pb?"BOTH":pb},Tb,cd]}}:(c=Ma,Ma=a)}else c=Ma,Ma=a}else c=Ma,Ma=a}else c=Ma,Ma=a}else c=Ma,Ma=a}else c=Ma,Ma=a}else c=Ma,Ma=a}else c=Ma,Ma=a}else c=Ma,Ma=a}else c=Ma,Ma=a}else c=Ma,Ma=a}else c=Ma,Ma=a}else c=Ma,Ma=a;Ma===a&&(Ma=c,Sb=W(),Sb!==a?
(Bc=ra(),Bc!==a?(Cc=Ia(),Cc!==a?(Dc=ra(),Dc!==a?(pb=h(),pb===a&&(pb=null),pb!==a?(Ec=ra(),Ec!==a?(Tb=d(),Tb!==a?(Fc=ra(),Fc!==a?(Gc=Sa(),Gc!==a?Ma=Sb={type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==pb?"BOTH":pb},Tb]}}:(c=Ma,Ma=a)):(c=Ma,Ma=a)):(c=Ma,Ma=a)):(c=Ma,Ma=a)):(c=Ma,Ma=a)):(c=Ma,Ma=a)):(c=Ma,Ma=a)):(c=Ma,Ma=a)):(c=Ma,Ma=a));Wa=Ma;if(Wa===a){var eb=c;var Jb=c;if(l.substr(c,8).toLowerCase()===te){var Hc=l.substr(c,8);c+=8}else Hc=a,0===sa&&A(ue);if(Hc!==
a){var hc=c;sa++;var ve=Q();sa--;ve===a?hc=void 0:(c=hc,hc=a);hc!==a?Jb=Hc="POSITION":(c=Jb,Jb=a)}else c=Jb,Jb=a;var dd=Jb;if(dd!==a){var we=ra();if(we!==a){var xe=Ia();if(xe!==a){var ye=ra();if(ye!==a){var ed=d();if(ed!==a){var ze=ra();if(ze!==a){var Ae=b();if(Ae!==a){var Be=ra();if(Be!==a){var fd=d();if(fd!==a){var Ce=ra();if(Ce!==a){var De=Sa();De!==a?eb=dd={type:"function",name:"position",args:{type:"expr_list",value:[ed,fd]}}:(c=eb,eb=a)}else c=eb,eb=a}else c=eb,eb=a}else c=eb,eb=a}else c=eb,
eb=a}else c=eb,eb=a}else c=eb,eb=a}else c=eb,eb=a}else c=eb,eb=a}else c=eb,eb=a}else c=eb,eb=a;Wa=eb;if(Wa===a){var ib=c;var Ub;var qb=c;qb=Ub=G();if(qb===a)if(qb=c,96===l.charCodeAt(c)?(Ub=gd,c++):(Ub=a,0===sa&&A(hd)),Ub!==a){var ic=[];if(id.test(l.charAt(c))){var ub=l.charAt(c);c++}else ub=a,0===sa&&A(jd);if(ub!==a)for(;ub!==a;)ic.push(ub),id.test(l.charAt(c))?(ub=l.charAt(c),c++):(ub=a,0===sa&&A(jd));else ic=a;ic!==a?(96===l.charCodeAt(c)?(ub=gd,c++):(ub=a,0===sa&&A(hd)),ub!==a?qb=Ub=ic.join(""):
(c=qb,qb=a)):(c=qb,qb=a)}else c=qb,qb=a;var Ic=qb;if(Ic!==a){var Ee=ra();if(Ee!==a){var Fe=Ia();if(Fe!==a){var Ge=ra();if(Ge!==a){var Vb=B();Vb===a&&(Vb=null);if(Vb!==a){var He=ra();if(He!==a){var Ie=Sa();Ie!==a?ib=Ic={type:"function",name:Ic,args:Vb?Vb:{type:"expr_list",value:[]}}:(c=ib,ib=a)}else c=ib,ib=a}else c=ib,ib=a}else c=ib,ib=a}else c=ib,ib=a}else c=ib,ib=a}else c=ib,ib=a;Wa=ib;if(Wa===a){var mb;var Ra=c;var Wb=Ea();if(Wb!==a){var Jc=ra();if(Jc!==a){var Xb=d();if(Xb!==a){var Kc=ra();if(Kc!==
a){var zb=[];for(mb=Ca();mb!==a;)zb.push(mb),mb=Ca();if(zb!==a)if(mb=ra(),mb!==a){var jc=Ka();jc!==a?Ra=Wb={type:"case_expression",format:"simple",operand:Xb,clauses:zb,else:null}:(c=Ra,Ra=a)}else c=Ra,Ra=a;else c=Ra,Ra=a}else c=Ra,Ra=a}else c=Ra,Ra=a}else c=Ra,Ra=a}else c=Ra,Ra=a;if(Ra===a)if(Ra=c,Wb=Ea(),Wb!==a)if(Jc=ra(),Jc!==a)if(Xb=d(),Xb!==a)if(Kc=ra(),Kc!==a){zb=[];for(mb=Ca();mb!==a;)zb.push(mb),mb=Ca();if(zb!==a)if(mb=ra(),mb!==a)if(jc=ea(),jc!==a){var Je=ra();if(Je!==a){var Ke=Ka();Ke!==
a?Ra=Wb={type:"case_expression",format:"simple",operand:Xb,clauses:zb,else:jc.value}:(c=Ra,Ra=a)}else c=Ra,Ra=a}else c=Ra,Ra=a;else c=Ra,Ra=a;else c=Ra,Ra=a}else c=Ra,Ra=a;else c=Ra,Ra=a;else c=Ra,Ra=a;else c=Ra,Ra=a;var Lc=Ra;if(Lc===a){var nb;var Ya=c;var Yb=Ea();if(Yb!==a){var Mc=ra();if(Mc!==a){var Ab=[];for(nb=wa();nb!==a;)Ab.push(nb),nb=wa();if(Ab!==a)if(nb=ra(),nb!==a){var kc=Ka();kc!==a?Ya=Yb={type:"case_expression",format:"searched",clauses:Ab,else:null}:(c=Ya,Ya=a)}else c=Ya,Ya=a;else c=
Ya,Ya=a}else c=Ya,Ya=a}else c=Ya,Ya=a;if(Ya===a)if(Ya=c,Yb=Ea(),Yb!==a)if(Mc=ra(),Mc!==a){Ab=[];for(nb=wa();nb!==a;)Ab.push(nb),nb=wa();if(Ab!==a)if(nb=ra(),nb!==a)if(kc=ea(),kc!==a){var Le=ra();if(Le!==a){var Me=Ka();Me!==a?Ya=Yb={type:"case_expression",format:"searched",clauses:Ab,else:kc.value}:(c=Ya,Ya=a)}else c=Ya,Ya=a}else c=Ya,Ya=a;else c=Ya,Ya=a;else c=Ya,Ya=a}else c=Ya,Ya=a;else c=Ya,Ya=a;Lc=Ya}Wa=Lc;if(Wa===a){var lc;var Kb=c;var kd=N();if(kd!==a){var Nc=[];for(lc=P();lc!==a;)Nc.push(lc),
lc=P();Nc!==a?Kb=kd+=Nc.join(""):(c=Kb,Kb=a)}else c=Kb,Kb=a;var mc=Kb;if(mc!==a){var Oc=mc;mc=/^CURRENT_DATE$/i.test(Oc)?{type:"current_time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(Oc)?{type:"current_time",mode:"timestamp"}:{type:"column_ref",table:"",column:Oc}}Wa=mc;if(Wa===a&&(Wa=t(),Wa===a)){Wa=c;var ld=Ia();if(ld!==a){var Ne=ra();if(Ne!==a){var Pc=d();if(Pc!==a){var Oe=ra();if(Oe!==a){var Pe=Sa();Pe!==a?(Pc.paren=!0,Wa=ld=Pc):(c=Wa,Wa=a)}else c=Wa,Wa=a}else c=Wa,Wa=a}else c=Wa,Wa=a}else c=
Wa,Wa=a}}}}}}}}return Wa}function G(){var k;var C=c;var y=N();if(y!==a){var X=[];for(k=Q();k!==a;)X.push(k),k=Q();X!==a?C=y+=X.join(""):(c=C,C=a)}else c=C,C=a;return C}function N(){if(Qe.test(l.charAt(c))){var k=l.charAt(c);c++}else k=a,0===sa&&A(Re);return k}function Q(){if(Se.test(l.charAt(c))){var k=l.charAt(c);c++}else k=a,0===sa&&A(Te);return k}function P(){if(Ue.test(l.charAt(c))){var k=l.charAt(c);c++}else k=a,0===sa&&A(Ve);return k}function t(){var k=c;if(64===l.charCodeAt(c)){var C=We;c++}else C=
a,0===sa&&A(Xe);if(C!==a){var y=G();y!==a?k=C=[C,y]:(c=k,k=a)}else c=k,k=a;k!==a&&(k={type:"param",value:k[1]});return k}function h(){var k=c;if(l.substr(c,7).toLowerCase()===Ye){var C=l.substr(c,7);c+=7}else C=a,0===sa&&A(Ze);if(C!==a){C=c;sa++;var y=Q();sa--;y===a?C=void 0:(c=C,C=a);C!==a?k="LEADING":(c=k,k=a)}else c=k,k=a;k===a&&(k=c,l.substr(c,8).toLowerCase()===$e?(C=l.substr(c,8),c+=8):(C=a,0===sa&&A(af)),C!==a?(C=c,sa++,y=Q(),sa--,y===a?C=void 0:(c=C,C=a),C!==a?k="TRAILING":(c=k,k=a)):(c=k,
k=a),k===a&&(k=c,l.substr(c,4).toLowerCase()===bf?(C=l.substr(c,4),c+=4):(C=a,0===sa&&A(cf)),C!==a?(C=c,sa++,y=Q(),sa--,y===a?C=void 0:(c=C,C=a),C!==a?k="BOTH":(c=k,k=a)):(c=k,k=a)));return k}function z(){var k=c;var C=c;var y=R();if(y!==a){var X=ra();if(X!==a)if(X=Ia(),X!==a)if(X=ra(),X!==a)if(X=ja(),X!==a){var va=ra();va!==a?(va=Sa(),va!==a?C=y={type:"interval-period",period:y.value,precision:X,secondary:null}:(c=C,C=a)):(c=C,C=a)}else c=C,C=a;else c=C,C=a;else c=C,C=a;else c=C,C=a}else c=C,C=a;
C===a&&(C=c,y=R(),y!==a&&(y=md(y)),C=y);if(C!==a)if(y=ra(),y!==a)if(y=c,l.substr(c,2).toLowerCase()===df?(X=l.substr(c,2),c+=2):(X=a,0===sa&&A(ef)),X!==a?(X=c,sa++,va=Q(),sa--,va===a?X=void 0:(c=X,X=a),X!==a?y="TO":(c=y,y=a)):(c=y,y=a),y!==a)if(y=ra(),y!==a){y=c;X=R();X!==a&&(X={type:"interval-period",period:X.value,precision:null,secondary:null});y=X;if(y===a){y=c;X=Ba();if(X!==a)if(X=ra(),X!==a)if(X=Ia(),X!==a)if(X=ra(),X!==a)if(X=ja(),X!==a)if(va=ra(),va!==a)if(va=Ha(),va!==a)if(va=ra(),va!==a)if(va=
J(),va!==a){var Fa=ra();Fa!==a?(Fa=Sa(),Fa!==a?y=X=nd(X,va):(c=y,y=a)):(c=y,y=a)}else c=y,y=a;else c=y,y=a;else c=y,y=a;else c=y,y=a;else c=y,y=a;else c=y,y=a;else c=y,y=a;else c=y,y=a;else c=y,y=a;y===a&&(y=c,X=Ba(),X!==a?(X=ra(),X!==a?(X=Ia(),X!==a?(X=ra(),X!==a?(X=ja(),X!==a?(va=ra(),va!==a?(va=Sa(),va!==a?y=X={type:"interval-period",period:"second",precision:X,secondary:null}:(c=y,y=a)):(c=y,y=a)):(c=y,y=a)):(c=y,y=a)):(c=y,y=a)):(c=y,y=a)):(c=y,y=a),y===a&&(y=c,X=Ba(),X!==a&&(X={type:"interval-period",
period:"second",precision:null,secondary:null}),y=X))}y!==a?k=C={type:"interval-qualifier",start:C,end:y}:(c=k,k=a)}else c=k,k=a;else c=k,k=a;else c=k,k=a;else c=k,k=a;k===a&&(k=c,y=R(),y!==a?(C=ra(),C!==a?(C=Ia(),C!==a?(C=ra(),C!==a?(C=J(),C!==a?(X=ra(),X!==a?(X=Sa(),X!==a?k=y={type:"interval-period",period:y.value,precision:C,secondary:null}:(c=k,k=a)):(c=k,k=a)):(c=k,k=a)):(c=k,k=a)):(c=k,k=a)):(c=k,k=a)):(c=k,k=a),k===a&&(k=c,y=R(),y!==a&&(y=md(y)),k=y,k===a&&(k=c,y=Ba(),y!==a?(C=ra(),C!==a?(C=
Ia(),C!==a?(C=ra(),C!==a?(C=ja(),C!==a?(X=ra(),X!==a?(X=Ha(),X!==a?(y=ra(),y!==a?(y=J(),y!==a?(X=ra(),X!==a?(X=Sa(),X!==a?k=y=nd(C,y):(c=k,k=a)):(c=k,k=a)):(c=k,k=a)):(c=k,k=a)):(c=k,k=a)):(c=k,k=a)):(c=k,k=a)):(c=k,k=a)):(c=k,k=a)):(c=k,k=a)):(c=k,k=a),k===a&&(k=c,y=Ba(),y!==a?(C=ra(),C!==a?(C=Ia(),C!==a?(C=ra(),C!==a?(C=J(),C!==a?(X=ra(),X!==a?(X=Sa(),X!==a?k=y={type:"interval-period",period:"second",precision:C,secondary:null}:(c=k,k=a)):(c=k,k=a)):(c=k,k=a)):(c=k,k=a)):(c=k,k=a)):(c=k,k=a)):(c=
k,k=a),k===a&&(k=c,y=Ba(),y!==a&&(y={type:"interval-period",period:"second",precision:null,secondary:null}),k=y)))));return k}function R(){var k=c;k=ua();k!==a&&(k={type:"string",value:"day"});k===a&&(k=c,k=ta(),k!==a&&(k={type:"string",value:"hour"}),k===a&&(k=c,k=xa(),k!==a&&(k={type:"string",value:"minute"}),k===a&&(k=c,k=na(),k!==a&&(k={type:"string",value:"month"}),k===a&&(k=c,k=la(),k!==a&&(k={type:"string",value:"year"})))));return k}function J(){var k=ya();k!==a&&(k=parseFloat(k));return k}
function ja(){var k=ya();k!==a&&(k=parseFloat(k));return k}function qa(){var k=pa();k===a&&(k=t());return k}function pa(){var k=c;if(39===l.charCodeAt(c)){var C=od;c++}else C=a,0===sa&&A(pd);C===a&&(l.substr(c,2)===qd?(C=qd,c+=2):(C=a,0===sa&&A(ff)));if(C!==a){C=[];var y=c;l.substr(c,2)===nc?(y=nc,c+=2):(y=a,0===sa&&A(rd));y!==a&&(y="'");y===a&&(sd.test(l.charAt(c))?(y=l.charAt(c),c++):(y=a,0===sa&&A(td)));for(;y!==a;)C.push(y),y=c,l.substr(c,2)===nc?(y=nc,c+=2):(y=a,0===sa&&A(rd)),y!==a&&(y="'"),
y===a&&(sd.test(l.charAt(c))?(y=l.charAt(c),c++):(y=a,0===sa&&A(td)));C!==a?(39===l.charCodeAt(c)?(y=od,c++):(y=a,0===sa&&A(pd)),y!==a?k=C={type:"string",value:C.join("")}:(c=k,k=a)):(c=k,k=a)}else c=k,k=a;return k}function wa(){var k=c;var C=Ga();if(C!==a)if(C=ra(),C!==a)if(C=d(),C!==a){var y=ra();y!==a?(y=Ja(),y!==a?(y=ra(),y!==a?(y=d(),y!==a?k=C={type:"when_clause",operand:C,value:y}:(c=k,k=a)):(c=k,k=a)):(c=k,k=a)):(c=k,k=a)}else c=k,k=a;else c=k,k=a;else c=k,k=a;return k}function Ca(){var k=
c;var C=Ga();if(C!==a)if(C=ra(),C!==a)if(C=d(),C!==a){var y=ra();y!==a?(y=Ja(),y!==a?(y=ra(),y!==a?(y=d(),y!==a?k=C={type:"when_clause",operand:C,value:y}:(c=k,k=a)):(c=k,k=a)):(c=k,k=a)):(c=k,k=a)}else c=k,k=a;else c=k,k=a;else c=k,k=a;return k}function ea(){var k=c;var C=c;if(l.substr(c,4).toLowerCase()===gf){var y=l.substr(c,4);c+=4}else y=a,0===sa&&A(hf);if(y!==a){y=c;sa++;var X=Q();sa--;X===a?y=void 0:(c=y,y=a);y!==a?C="ELSE":(c=C,C=a)}else c=C,C=a;C!==a?(C=ra(),C!==a?(C=d(),C!==a?k={type:"else_clause",
value:C}:(c=k,k=a)):(c=k,k=a)):(c=k,k=a);return k}function x(){var k=ya();if(k===a){k=c;if(45===l.charCodeAt(c)){var C=pc;c++}else C=a,0===sa&&A(qc);C===a&&(43===l.charCodeAt(c)?(C=gb,c++):(C=a,0===sa&&A(kb)));if(C!==a){var y=ya();y!==a?k=C=C[0]+y:(c=k,k=a)}else c=k,k=a}return k}function T(){var k=c;if(46===l.charCodeAt(c)){var C=jf;c++}else C=a,0===sa&&A(kf);C!==a?(C=ya(),C===a&&(C=null),C!==a?k="."+(null!=C?C:""):(c=k,k=a)):(c=k,k=a);return k}function ma(){var k;var C=k=c;if(lf.test(l.charAt(c))){var y=
l.charAt(c);c++}else y=a,0===sa&&A(mf);y!==a?(nf.test(l.charAt(c))?(y=l.charAt(c),c++):(y=a,0===sa&&A(of)),y===a&&(y=null),y!==a?C="e"+(null===y?"":y):(c=C,C=a)):(c=C,C=a);C!==a?(y=ya(),y!==a?k=C+y:(c=k,k=a)):(c=k,k=a);return k}function ya(){var k=[];var C=za();if(C!==a)for(;C!==a;)k.push(C),C=za();else k=a;k!==a&&(k=k.join(""));return k}function za(){if(pf.test(l.charAt(c))){var k=l.charAt(c);c++}else k=a,0===sa&&A(qf);return k}function b(){var k=c;if(l.substr(c,2).toLowerCase()===rf){var C=l.substr(c,
2);c+=2}else C=a,0===sa&&A(sf);if(C!==a){C=c;sa++;var y=Q();sa--;y===a?C=void 0:(c=C,C=a);C!==a?k="IN":(c=k,k=a)}else c=k,k=a;return k}function f(){var k=c;if(l.substr(c,2).toLowerCase()===tf){var C=l.substr(c,2);c+=2}else C=a,0===sa&&A(uf);if(C!==a){C=c;sa++;var y=Q();sa--;y===a?C=void 0:(c=C,C=a);C!==a?k="IS":(c=k,k=a)}else c=k,k=a;return k}function V(){var k=c;if(l.substr(c,4).toLowerCase()===vf){var C=l.substr(c,4);c+=4}else C=a,0===sa&&A(wf);if(C!==a){C=c;sa++;var y=Q();sa--;y===a?C=void 0:(c=
C,C=a);C!==a?k="LIKE":(c=k,k=a)}else c=k,k=a;return k}function g(){var k=c;if(l.substr(c,3).toLowerCase()===xf){var C=l.substr(c,3);c+=3}else C=a,0===sa&&A(yf);if(C!==a){C=c;sa++;var y=Q();sa--;y===a?C=void 0:(c=C,C=a);C!==a?k="NOT":(c=k,k=a)}else c=k,k=a;return k}function w(){var k=c;if(l.substr(c,3).toLowerCase()===zf){var C=l.substr(c,3);c+=3}else C=a,0===sa&&A(Af);if(C!==a){C=c;sa++;var y=Q();sa--;y===a?C=void 0:(c=C,C=a);C!==a?k="AND":(c=k,k=a)}else c=k,k=a;return k}function O(){var k=c;if(l.substr(c,
2).toLowerCase()===Bf){var C=l.substr(c,2);c+=2}else C=a,0===sa&&A(Cf);if(C!==a){C=c;sa++;var y=Q();sa--;y===a?C=void 0:(c=C,C=a);C!==a?k="OR":(c=k,k=a)}else c=k,k=a;return k}function S(){var k=c;if(l.substr(c,7).toLowerCase()===Df){var C=l.substr(c,7);c+=7}else C=a,0===sa&&A(Ef);if(C!==a){C=c;sa++;var y=Q();sa--;y===a?C=void 0:(c=C,C=a);C!==a?k="BETWEEN":(c=k,k=a)}else c=k,k=a;return k}function ba(){var k=c;if(l.substr(c,4).toLowerCase()===Ff){var C=l.substr(c,4);c+=4}else C=a,0===sa&&A(Gf);if(C!==
a){C=c;sa++;var y=Q();sa--;y===a?C=void 0:(c=C,C=a);C!==a?k="FROM":(c=k,k=a)}else c=k,k=a;return k}function W(){var k=c;if(l.substr(c,4).toLowerCase()===Hf){var C=l.substr(c,4);c+=4}else C=a,0===sa&&A(If);if(C!==a){C=c;sa++;var y=Q();sa--;y===a?C=void 0:(c=C,C=a);C!==a?k="TRIM":(c=k,k=a)}else c=k,k=a;return k}function ka(){var k=c;if(l.substr(c,8).toLowerCase()===Jf){var C=l.substr(c,8);c+=8}else C=a,0===sa&&A(Kf);if(C!==a){C=c;sa++;var y=Q();sa--;y===a?C=void 0:(c=C,C=a);C!==a?k="INTERVAL":(c=k,
k=a)}else c=k,k=a;return k}function la(){var k=c;if(l.substr(c,4).toLowerCase()===Lf){var C=l.substr(c,4);c+=4}else C=a,0===sa&&A(Mf);if(C!==a){C=c;sa++;var y=Q();sa--;y===a?C=void 0:(c=C,C=a);C!==a?k="YEAR":(c=k,k=a)}else c=k,k=a;return k}function na(){var k=c;if(l.substr(c,5).toLowerCase()===Nf){var C=l.substr(c,5);c+=5}else C=a,0===sa&&A(Of);if(C!==a){C=c;sa++;var y=Q();sa--;y===a?C=void 0:(c=C,C=a);C!==a?k="MONTH":(c=k,k=a)}else c=k,k=a;return k}function ua(){var k=c;if(l.substr(c,3).toLowerCase()===
Pf){var C=l.substr(c,3);c+=3}else C=a,0===sa&&A(Qf);if(C!==a){C=c;sa++;var y=Q();sa--;y===a?C=void 0:(c=C,C=a);C!==a?k="DAY":(c=k,k=a)}else c=k,k=a;return k}function ta(){var k=c;if(l.substr(c,4).toLowerCase()===Rf){var C=l.substr(c,4);c+=4}else C=a,0===sa&&A(Sf);if(C!==a){C=c;sa++;var y=Q();sa--;y===a?C=void 0:(c=C,C=a);C!==a?k="HOUR":(c=k,k=a)}else c=k,k=a;return k}function xa(){var k=c;if(l.substr(c,6).toLowerCase()===Tf){var C=l.substr(c,6);c+=6}else C=a,0===sa&&A(Uf);if(C!==a){C=c;sa++;var y=
Q();sa--;y===a?C=void 0:(c=C,C=a);C!==a?k="MINUTE":(c=k,k=a)}else c=k,k=a;return k}function Ba(){var k=c;if(l.substr(c,6).toLowerCase()===Vf){var C=l.substr(c,6);c+=6}else C=a,0===sa&&A(Wf);if(C!==a){C=c;sa++;var y=Q();sa--;y===a?C=void 0:(c=C,C=a);C!==a?k="SECOND":(c=k,k=a)}else c=k,k=a;return k}function Ea(){var k=c;if(l.substr(c,4).toLowerCase()===Xf){var C=l.substr(c,4);c+=4}else C=a,0===sa&&A(Yf);if(C!==a){C=c;sa++;var y=Q();sa--;y===a?C=void 0:(c=C,C=a);C!==a?k="CASE":(c=k,k=a)}else c=k,k=a;
return k}function Ka(){var k=c;if(l.substr(c,3).toLowerCase()===Zf){var C=l.substr(c,3);c+=3}else C=a,0===sa&&A($f);if(C!==a){C=c;sa++;var y=Q();sa--;y===a?C=void 0:(c=C,C=a);C!==a?k="END":(c=k,k=a)}else c=k,k=a;return k}function Ga(){var k=c;if(l.substr(c,4).toLowerCase()===ag){var C=l.substr(c,4);c+=4}else C=a,0===sa&&A(bg);if(C!==a){C=c;sa++;var y=Q();sa--;y===a?C=void 0:(c=C,C=a);C!==a?k="WHEN":(c=k,k=a)}else c=k,k=a;return k}function Ja(){var k=c;if(l.substr(c,4).toLowerCase()===cg){var C=l.substr(c,
4);c+=4}else C=a,0===sa&&A(dg);if(C!==a){C=c;sa++;var y=Q();sa--;y===a?C=void 0:(c=C,C=a);C!==a?k="THEN":(c=k,k=a)}else c=k,k=a;return k}function Ha(){if(44===l.charCodeAt(c)){var k=eg;c++}else k=a,0===sa&&A(fg);return k}function Ia(){if(40===l.charCodeAt(c)){var k=gg;c++}else k=a,0===sa&&A(hg);return k}function Sa(){if(41===l.charCodeAt(c)){var k=ig;c++}else k=a,0===sa&&A(jg);return k}function ra(){var k;var C=[];for(k=fb();k!==a;)C.push(k),k=fb();return C}function fb(){if(kg.test(l.charAt(c))){var k=
l.charAt(c);c++}else k=a,0===sa&&A(lg);return k}function hb(k,C,y,X){k={type:"binary_expr",operator:k,left:C,right:y};void 0!==X&&(k.escape=X);return k}function cb(k,C){for(var y=0;y<C.length;y++)k=hb(C[y][1],k,C[y][3]);return k}r=void 0!==r?r:{};var a={},Va={start:u},Ua=u,Ta="!",jb=q("!",!1),rb="\x3d",Qa=q("\x3d",!1),xb="\x3e\x3d",Y=q("\x3e\x3d",!1),da="\x3e",ca=q("\x3e",!1),oa="\x3c\x3d",Aa=q("\x3c\x3d",!1),Da="\x3c\x3e",Na=q("\x3c\x3e",!1),Oa="\x3c",ab=q("\x3c",!1),Za="!\x3d",$a=q("!\x3d",!1),
gb="+",kb=q("+",!1),pc="-",qc=q("-",!1),wd="*",xd=q("*",!1),yd="/",zd=q("/",!1),Qe=/^[A-Za-z_\x80-\uFFFF]/,Re=E([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),Se=/^[A-Za-z0-9_]/,Te=E([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),Ue=/^[A-Za-z0-9_.\x80-\uFFFF]/,Ve=E([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],!1,!1),We="@",Xe=q("@",!1),md=function(k){return{type:"interval-period",period:k.value,precision:null,secondary:null}},nd=function(k,C){return{type:"interval-period",period:"second",
precision:k,secondary:C}},od="'",pd=q("'",!1),qd="N'",ff=q("N'",!1),nc="''",rd=q("''",!1),sd=/^[^']/,td=E(["'"],!0,!1),jf=".",kf=q(".",!1),pf=/^[0-9]/,qf=E([["0","9"]],!1,!1),lf=/^[eE]/,mf=E(["e","E"],!1,!1),nf=/^[+\-]/,of=E(["+","-"],!1,!1),Hd="null",Id=q("NULL",!0),Bd="true",Cd=q("TRUE",!0),Ed="false",Fd=q("FALSE",!0),rf="in",sf=q("IN",!0),tf="is",uf=q("IS",!0),vf="like",wf=q("LIKE",!0),ud="escape",vd=q("ESCAPE",!0),xf="not",yf=q("NOT",!0),zf="and",Af=q("AND",!0),Bf="or",Cf=q("OR",!0),Df="between",
Ef=q("BETWEEN",!0),Ff="from",Gf=q("FROM",!0),ne="for",oe=q("FOR",!0),de="substring",ee=q("SUBSTRING",!0),Td="extract",Ud=q("EXTRACT",!0),Hf="trim",If=q("TRIM",!0),te="position",ue=q("POSITION",!0),Od="timestamp",Pd=q("TIMESTAMP",!0),Kd="date",Ld=q("DATE",!0),Ye="leading",Ze=q("LEADING",!0),$e="trailing",af=q("TRAILING",!0),bf="both",cf=q("BOTH",!0),df="to",ef=q("TO",!0),Jf="interval",Kf=q("INTERVAL",!0),Lf="year",Mf=q("YEAR",!0),Nf="month",Of=q("MONTH",!0),Pf="day",Qf=q("DAY",!0),Rf="hour",Sf=q("HOUR",
!0),Tf="minute",Uf=q("MINUTE",!0),Vf="second",Wf=q("SECOND",!0),Xf="case",Yf=q("CASE",!0),Zf="end",$f=q("END",!0),ag="when",bg=q("WHEN",!0),cg="then",dg=q("THEN",!0),gf="else",hf=q("ELSE",!0),eg=",",fg=q(",",!1),gg="(",hg=q("(",!1),ig=")",jg=q(")",!1),kg=/^[ \t\n\r]/,lg=E([" ","\t","\n","\r"],!1,!1),gd="`",hd=q("`",!1),id=/^[^`]/,jd=E(["`"],!0,!1),c=0,Zb=[{line:1,column:1}],sb=0,oc=[],sa=0;if("startRule"in r){if(!(r.startRule in Va))throw Error("Can't start parsing from rule \""+r.startRule+'".');
Ua=Va[r.startRule]}var Qc=Ua();if(Qc!==a&&c===l.length)return Qc;Qc!==a&&c<l.length&&A({type:"end"});throw function(k,C,y){return new I(I.buildMessage(k,C),k,C,y)}(oc,sb<l.length?l.charAt(sb):null,sb<l.length?fa(sb,sb+1):fa(sb,sb));}}})});let K=function(){function p(){}p.parse=function(I){return Z.parse(I)};return p}();n.WhereGrammar=K;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/graphics/data/utils":function(){define("require exports ../../../core/maybe ../../../core/jsonMap ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/extentUtils ../../../geometry/support/jsonUtils ../../../core/unitUtils ../../../geometry/support/normalizeUtils ../OptimizedGeometry ../featureConversionUtils ../centroid ./projectionSupport".split(" "),
function(n,e,Z,K,p,I,l,r,q,E,ha,fa,A){function u(U,F,G,N=U.hasZ,Q=U.hasM){const P=U.hasZ&&N,t=U.hasM&&Q;return G?(U=ha.quantizeOptimizedGeometry(L,F,U.hasZ,U.hasM,"esriGeometryPoint",G,N,Q),ha.convertToPoint(U,P,t)):ha.convertToPoint(F,P,t)}async function B(U,F,G){if(!U)return null;var {where:N}=U;U.where=N=N&&N.trim();if(!N||/^1 *= *1$/.test(N)||F&&F===N)U.where=null;if(!U.geometry)return U;F=await d(U);U.distance=0;U.units=null;"esriSpatialRelEnvelopeIntersects"===U.spatialRel&&({spatialReference:N}=
U.geometry,F=I.getGeometryExtent(F),F.spatialReference=N);U.geometry=F;await A.checkProjectionSupport(F.spatialReference,G);F=(await q.normalizeCentralMeridian(l.fromJSON(F)))[0];if(Z.isNone(F))throw M;F=F.toJSON();F=await A.project(F,F.spatialReference,G);if(!F)throw M;F.spatialReference=G;U.geometry=F;return U}async function d(U){const {geometry:F,distance:G,units:N}=U;if(null==G||"vertexAttributes"in F)return F;var Q=F.spatialReference;U=N?H.fromJSON(N):r.getUnitString(Q);Q=Q&&(p.isGeographic(Q)||
p.isWebMercator(Q))?F:await A.checkProjectionSupport(Q,p.WGS84).then(()=>A.project(F,p.WGS84));return(await m())(Q.spatialReference,Q,G,U)}async function m(){return(await new Promise(function(U,F){n(["../../../geometry/geometryEngineJSON"],U,F)})).geodesicBuffer}const H=new K.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),M=Object.freeze({}),
D=new E,v=new E,L=new E,aa={esriGeometryPoint:ha.convertToPoint,esriGeometryPolyline:ha.convertToPolyline,esriGeometryPolygon:ha.convertToPolygon,esriGeometryMultipoint:ha.convertToMultipoint},ia=(U,F)=>"_geVersion"!==U?F:void 0;e.QUERY_ENGINE_EMPTY_RESULT=M;e.cleanFromGeometryEngine=function(U){return U&&"_geVersion"in U?JSON.parse(JSON.stringify(U,ia)):U};e.getCentroid=function(U,F,G){if("esriGeometryPolygon"!==U.geometryType||!F||!F.centroid&&!F.geometry)return null;F.centroid||(F.centroid=fa.getCentroidOptimizedGeometry(new E,
F.geometry,U.hasZ,U.hasM));return u(U,F.centroid,G)};e.getGeometry=function(U,F,G,N,Q,P,t=F,h=G){const z=F&&t,R=G&&h;N=N?"coords"in N?N:N.geometry:null;if(!N)return null;if(Q)return F=ha.generalizeOptimizedGeometry(v,N,F,G,U,Q,t,h),P&&(F=ha.quantizeOptimizedGeometry(L,F,z,R,U,P)),aa[U](F,z,R);if(P)return P=ha.quantizeOptimizedGeometry(L,N,F,G,U,P,t,h),aa[U](P,z,R);ha.removeZMValues(D,N,F,G,t,h);return aa[U](D,z,R)};e.normalizeFilter=async function(U,F,G){return B(U,F,G)};e.normalizeQuery=async function(U,
F,G){const {outFields:N,orderByFields:Q,groupByFieldsForStatistics:P,outStatistics:t}=U;if(N)for(var h=0;h<N.length;h++)N[h]=N[h].trim();if(Q)for(h=0;h<Q.length;h++)Q[h]=Q[h].trim();if(P)for(h=0;h<P.length;h++)P[h]=P[h].trim();if(t)for(h=0;h<t.length;h++)t[h].onStatisticField&&(t[h].onStatisticField=t[h].onStatisticField.trim());U.geometry&&!U.outSR&&(U.outSR=U.geometry.spatialReference);return B(U,F,G)};e.normalizeQueryLike=B;e.transformCentroid=u;Object.defineProperty(e,"__esModule",{value:!0})})},
"esri/layers/graphics/data/spatialQuerySupport":function(){define("require exports ../../../core/Error ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/contains ../../../geometry/support/intersects ../../../geometry/support/jsonUtils ../OptimizedGeometry ../featureConversionUtils ../contains ./projectionSupport ./utils".split(" "),function(n,e,Z,K,p,I,l,r,q,E,ha,fa){function A(){return new Promise(function(H,M){n(["../../../geometry/geometryEngineJSON"],H,M)})}const u={esriSpatialRelIntersects:"intersects",
esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null};var B={esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,
esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},d={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},m={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1};e.canQueryWithRBush=function(H){if(l.isExtent(H))return!0;if(l.isPolygon(H)){for(const M of H.rings)if(5!==M.length||M[0][0]!==M[1][0]||M[0][0]!==M[4][0]||M[2][0]!==M[3][0]||M[0][1]!==M[3][1]||M[0][1]!==
M[4][1]||M[1][1]!==M[2][1])return!1;return!0}return!1};e.checkSpatialQuerySupport=async function(H,M,D){const {spatialRel:v,geometry:L}=H;if(L){if(!0!==B[v])throw new Z("feature-store:unsupported-query","Unsupported query spatial relationship",{query:H});if(K.isValid(L.spatialReference)&&K.isValid(D)){if(!0!==d[l.getJsonType(L)])throw new Z("feature-store:unsupported-query","Unsupported query geometry type",{query:H});if(!0!==m[M])throw new Z("feature-store:unsupported-query","Unsupported layer geometry type",
{query:H});if(H.outSR)return ha.checkProjectionSupport(H.geometry&&H.geometry.spatialReference,H.outSR)}}};e.getSpatialQueryOperator=function(H,M,D,v,L){if(l.isPolygon(M)&&"esriGeometryPoint"===D&&("esriSpatialRelIntersects"===H||"esriSpatialRelContains"===H)){const aa=q.convertFromPolygon(new r,M,!1,!1);return Promise.resolve(ia=>E.polygonContainsPoint(aa,!1,!1,ia))}if(l.isPolygon(M)&&"esriGeometryMultipoint"===D){const aa=q.convertFromPolygon(new r,M,!1,!1);if("esriSpatialRelContains"===H)return Promise.resolve(ia=>
E.polygonContainsMultipoint(aa,!1,!1,ia,v,L))}if(l.isExtent(M)&&"esriGeometryPoint"===D&&("esriSpatialRelIntersects"===H||"esriSpatialRelContains"===H))return Promise.resolve(aa=>p.extentContainsPoint(M,fa.getGeometry(D,v,L,aa)));if(l.isExtent(M)&&"esriGeometryMultipoint"===D&&"esriSpatialRelContains"===H)return Promise.resolve(aa=>p.extentContainsMultipoint(M,fa.getGeometry(D,v,L,aa)));if(l.isExtent(M)&&"esriSpatialRelIntersects"===H){const aa=I.getExtentIntersector(D);return Promise.resolve(ia=>
aa(M,fa.getGeometry(D,v,L,ia)))}return A().then(aa=>{const ia=aa[u[H]].bind(null,M.spatialReference,M);return U=>ia(fa.getGeometry(D,v,L,U))})};Object.defineProperty(e,"__esModule",{value:!0})})},"esri/layers/graphics/contains":function(){define(["exports"],function(n){function e(Z,K,p,I,l){if(!Z)return!1;K=K?p?4:3:p?3:2;const {coords:r,lengths:q}=Z;p=!1;Z=0;for(const ha of q){var E=Z;for(let fa=Z,A=Z+ha*K;fa<A;fa+=K){E=fa+K;E===A&&(E=Z);const u=r[fa],B=r[fa+1],d=r[E];E=r[E+1];(B<l&&E>=l||E<l&&B>=
l)&&u+(l-B)/(E-B)*(d-u)<I&&(p=!p)}Z+=ha*K}return p}n.polygonContainsCoords=e;n.polygonContainsMultipoint=function(Z,K,p,I,l,r){l=l?r?4:3:r?3:2;const {coords:q,lengths:E}=I;if(!E)return!1;for(let ha=0,fa=0;ha<E.length;ha++,fa+=l)if(!e(Z,K,p,q[fa],q[fa+1]))return!1;return!0};n.polygonContainsPoint=function(Z,K,p,I){return e(Z,K,p,I.coords[0],I.coords[1])};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/graphics/data/timeSupport":function(){define(["exports"],function(n){function e(p,
I,l,r,q){if(null!=r&&null!=q)return E=>{const ha=p.getAttribute(E,I);E=p.getAttribute(E,l);return(null==ha||ha<=q)&&(null==E||E>=r)};if(null!=r)return E=>{E=p.getAttribute(E,l);return null==E||E>=r};if(null!=q)return E=>{E=p.getAttribute(E,I);return null==E||E<=q}}function Z(p,I,l,r){if(null!=l&&null!=r&&l===r)return q=>p.getAttribute(q,I)===l;if(null!=l&&null!=r)return q=>{q=p.getAttribute(q,I);return q>=l&&q<=r};if(null!=l)return q=>p.getAttribute(q,I)>=l;if(null!=r)return q=>p.getAttribute(q,I)<=
r}function K(){return()=>!1}n.getTimeExtent=function(p,I){if(!p)return null;const l=I.featureAdapter,{startTimeField:r,endTimeField:q}=p;let E=Number.POSITIVE_INFINITY,ha=Number.NEGATIVE_INFINITY;if(r&&q)I.forEach(fa=>{const A=l.getAttribute(fa,r);fa=l.getAttribute(fa,q);null==A||isNaN(A)||(E=Math.min(E,A));null==fa||isNaN(fa)||(ha=Math.max(ha,fa))});else{const fa=r||q;I.forEach(A=>{A=l.getAttribute(A,fa);null==A||isNaN(A)||(E=Math.min(E,A),ha=Math.max(ha,A))})}return{start:E,end:ha}};n.getTimeOperator=
function(p,I,l){if(!I||!p)return null;const {startTimeField:r,endTimeField:q}=p;if(!r&&!q)return null;const {start:E,end:ha}=I;return null===E&&null===ha?null:void 0===E&&void 0===ha?K():r&&q?e(l,r,q,E,ha):Z(l,r||q,E,ha)};Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/graphics/data/QueryEngineResult":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ../../../geometry/support/quantizationUtils ./projectionSupport ./attributeSupport ./AttributesBuilder ./utils ./timeSupport".split(" "),
function(n,e,Z,K,p,I,l,r,q,E){function ha(B){return B.substr(24,12)+B.substr(19,4)+B.substr(16,2)+B.substr(14,2)+B.substr(11,2)+B.substr(9,2)+B.substr(6,2)+B.substr(4,2)+B.substr(2,2)+B.substr(0,2)}function fa(B,d,m,H){if(m&&"esriFieldTypeDate"===m.type){const M=(new Date(B)).getTime(),D=(new Date(d)).getTime();if(!isNaN(M)&&!isNaN(D))return H?D-M:M-D}return"number"===typeof B&&"number"===typeof d?H?d-B:B-d:"string"===typeof B&&"string"===typeof d?(B=B.toUpperCase(),d=d.toUpperCase(),!m||"esriFieldTypeGUID"!==
m.type&&"esriFieldTypeGlobalID"!==m.type?H=(H?B>d:B<d)?-1:(H?B<d:B>d)?1:0:(m=ha(B),d=ha(d),H=(H?m>d:m<d)?-1:(H?m<d:m>d)?1:0),H):H?1:-1}function A(B,d,m,H,M,D){M-=m;D-=H;B=Math.min(1,Math.max(0,((B-m)*M+(d-H)*D)/(M*M+D*D)));return{x:m+M*B,y:H+D*B}}function u(B,d){return B?d?4:3:d?3:2}return function(){function B(m,H,M){this.items=m;this.queryGeometry=H;this.definitionExpression=M.definitionExpression;this.geometryType=M.geometryType;this.hasM=M.hasM;this.hasZ=M.hasZ;this.objectIdField=M.objectIdField;
this.spatialReference=M.spatialReference;this.fieldsIndex=M.fieldsIndex;this.timeInfo=M.timeInfo;this.featureAdapter=M.featureAdapter;this.aggregateAdapter=M.aggregateAdapter}var d=B.prototype;d.createQueryResponseForCount=function(m){const H=new r(m,this.featureAdapter,this.fieldsIndex);if(!m.outStatistics)return H.countDistinctValues(this.items);const {groupByFieldsForStatistics:M,having:D}=m;if(null==M||!M.length)return 1;const v=new Map,L=new Map,aa=new Set;m=m.outStatistics;for(const U of m){({statisticType:m}=
U);m="exceedslimit"!==m?U.onStatisticField:void 0;if(!L.has(m)){var ia=[];for(const F of M){const G=this._getAttributeValues(H,F,v);ia.push(G)}L.set(m,this._calculateUniqueValues(ia))}m=L.get(m);for(const F in m){const {data:G,items:N}=m[F];ia=G.join(",");D&&!H.validateItems(N,D)||aa.add(ia)}}return aa.size};d.createQueryResponse=function(m){let H;H=m.outStatistics?m.outStatistics.some(M=>"exceedslimit"===M.statisticType)?this._createExceedsLimitQueryResponse(m):this._createStatisticsQueryResponse(m):
this._createFeatureQueryResponse(m);m.returnQueryGeometry&&(Z.isValid(m.outSR)&&!Z.equals(this.queryGeometry.spatialReference,m.outSR)?H.queryGeometry=q.cleanFromGeometryEngine({spatialReference:m.outSR,...I.project(this.queryGeometry,this.queryGeometry.spatialReference,m.outSR)}):H.queryGeometry=q.cleanFromGeometryEngine({spatialReference:m.outSR,...this.queryGeometry}));return H};d.createSnappingResponse=function(m,H){const M=this.featureAdapter,D=u(this.hasZ,this.hasM),{x:v,y:L}=m.point,aa="number"===
typeof m.distance?m.distance:m.distance.x,ia="number"===typeof m.distance?m.distance:m.distance.y,U={candidates:[]},F="esriGeometryPolygon"===this.geometryType;H=this.getPointCreator(m.point,this.spatialReference,H);for(const R of this.items){var G=M.getGeometry(R);if(!G)continue;const {coords:J,lengths:ja}=G;if(m.types&1){G=0;for(var N=0;N<ja.length;N++){var Q=ja[N];for(var P=0;P<Q;P++,G+=D){var t=J[G],h=J[G+1];if(P!==Q-1){const qa=J[G+D],pa=J[G+D+1],{x:wa,y:Ca}=A(v,L,t,h,qa,pa);var z=(v-wa)/aa;
const ea=(L-Ca)/ia;z=z*z+ea*ea;1>=z&&U.candidates.push({type:"edge",objectId:M.getObjectId(R),distance:Math.sqrt(z),target:H(wa,Ca),start:H(t,h),end:H(qa,pa)})}}}}if(m.types&2)for(G=F?J.length-D:J.length,N=0;N<G;N+=D)Q=J[N],P=J[N+1],t=(v-Q)/aa,h=(L-P)/ia,t=t*t+h*h,1>=t&&U.candidates.push({type:"vertex",objectId:M.getObjectId(R),distance:Math.sqrt(t),target:H(Q,P)})}U.candidates.sort((R,J)=>R.distance-J.distance);return U};d.getPointCreator=function(m,H,M){const D=e.isSome(M)&&!Z.equals(H,M)?v=>I.project(v,
H,M):v=>v;return null!=m.z&&null!=m.m?(v,L)=>D({x:v,y:L,z:m.z,m:m.m}):null!=m.z?(v,L)=>D({x:v,y:L,z:m.z}):null!=m.m?(v,L)=>D({x:v,y:L,m:m.m}):(v,L)=>D({x:v,y:L})};d.executeAttributesQuery=function(m){var H=l.getWhereClause(m.where,this.fieldsIndex);if(!H)return Promise.resolve(this);if(H.isStandardized){let M=0;const D=[];for(const v of this.items)H.testFeature(v,this.featureAdapter)&&(D[M++]=v);H=new B(D,this.queryGeometry,this);H.definitionExpression=m.where;return Promise.resolve(H)}return Promise.reject(new TypeError("Where clause is not standardized"))};
d.executeAggregateIdsQuery=function(m){if(!m.aggregateIds||!m.aggregateIds.length||e.isNone(this.aggregateAdapter))return Promise.resolve(this);const H=new Set;for(const D of m.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(D).forEach(v=>H.add(v));const M=this.featureAdapter.getObjectId;return Promise.resolve(new B(this.items.filter(D=>H.has(M(D))),this.queryGeometry,this))};d.executeObjectIdsQuery=function(m){if(!m.objectIds||!m.objectIds.length)return Promise.resolve(this);const H=new Set(m.objectIds),
M=this.featureAdapter.getObjectId;return Promise.resolve(new B(this.items.filter(D=>H.has(M(D))),this.queryGeometry,this))};d.executeTimeQuery=function(m){m=E.getTimeOperator(this.timeInfo,m.timeExtent,this.featureAdapter);if(!e.isSome(m))return Promise.resolve(this);m=this.items.filter(m);return Promise.resolve(new B(m,this.queryGeometry,this))};d.filterLatest=function(){const {trackIdField:m,startTimeField:H,endTimeField:M}=this.timeInfo;var D=M||H;const v=new Map,L=this.featureAdapter.getAttribute;
for(const aa of this.items){const ia=L(aa,m),U=L(aa,D),F=v.get(ia);(!F||U>L(F,D))&&v.set(ia,aa)}D=Array.from(v.values());return Promise.resolve(new B(D,this.queryGeometry,this))};d.project=async function(m){if(!m||Z.equals(this.spatialReference,m))return this;const H=this.featureAdapter,M=(await I.projectMany(this.items.map(D=>q.getGeometry(this.geometryType,this.hasZ,this.hasM,H.getGeometry(D))),this.spatialReference,m)).map((D,v)=>H.cloneWithGeometry(this.items[v],K.convertFromGeometry(D,this.hasZ,
this.hasM)));return new B(M,this.queryGeometry,{definitionExpression:this.definitionExpression,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,objectIdField:this.objectIdField,spatialReference:m,fieldsIndex:this.fieldsIndex,timeInfo:this.timeInfo,featureAdapter:this.featureAdapter})};d._sortFeatures=function(m,H,M){if(1<m.length&&H&&H.length)for(const D of H.reverse()){H=D.split(" ");const v=H[0],L=this.fieldsIndex.get(v),aa=H[1]&&"desc"===H[1].toLowerCase();m.sort((ia,U)=>{ia=M(ia,v,
L);U=M(U,v,L);return fa(ia,U,L,aa)})}};d._createFeatureQueryResponse=function(m){const H=this.items,{geometryType:M,hasM:D,hasZ:v,objectIdField:L,spatialReference:aa}=this,{outFields:ia,outSR:U,quantizationParameters:F,resultRecordCount:G,resultOffset:N,returnZ:Q,returnM:P}=m,t=null!=G?H.length>(N||0)+G:!1,h=ia&&(-1<ia.indexOf("*")?[...this.fieldsIndex.fields]:ia.map(z=>this.fieldsIndex.get(z)));return{exceededTransferLimit:t,features:this._createFeatures(m,H),fields:h,geometryType:M,hasM:D&&P,hasZ:v&&
Q,objectIdFieldName:L,spatialReference:q.cleanFromGeometryEngine(U?U:aa),transform:F&&p.toQuantizationTransform(F)||null}};d._createFeatures=function(m,H){const M=new r(m,this.featureAdapter,this.fieldsIndex),{hasM:D,hasZ:v}=this,{orderByFields:L,quantizationParameters:aa,returnGeometry:ia,returnCentroid:U,maxAllowableOffset:F,resultOffset:G,resultRecordCount:N,returnZ:Q=!1,returnM:P=!1}=m,t=v&&Q,h=D&&P;m=[];var z=0;H=[...H];this._sortFeatures(H,L,(ja,qa,pa)=>M.getFieldValue(ja,qa,pa));if(ia||U){var R=
p.toQuantizationTransform(aa);if(ia&&!U)for(var J of H)m[z++]={attributes:M.getAttributes(J),geometry:q.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(J),F,R,t,h)};else if(!ia&&U)for(const ja of H)m[z++]={attributes:M.getAttributes(ja),centroid:q.transformCentroid(this,this.featureAdapter.getCentroid(ja,this),R)};else for(const ja of H)m[z++]={attributes:M.getAttributes(ja),centroid:q.transformCentroid(this,this.featureAdapter.getCentroid(ja,this),R),geometry:q.getGeometry(this.geometryType,
this.hasZ,this.hasM,this.featureAdapter.getGeometry(ja),F,R,t,h)}}else for(R of H)(J=M.getAttributes(R))&&(m[z++]={attributes:J});z=G||0;null!=N&&(m=m.slice(z,Math.min(m.length,z+N)));return m};d._createExceedsLimitQueryResponse=function(m){var H=!1;let M=Number.POSITIVE_INFINITY,D=Number.POSITIVE_INFINITY;H=Number.POSITIVE_INFINITY;for(const v of m.outStatistics)if("exceedslimit"===v.statisticType){M=null!=v.maxPointCount?v.maxPointCount:Number.POSITIVE_INFINITY;D=null!=v.maxRecordCount?v.maxRecordCount:
Number.POSITIVE_INFINITY;H=null!=v.maxVertexCount?v.maxVertexCount:Number.POSITIVE_INFINITY;break}if("esriGeometryPoint"===this.geometryType)H=this.items.length>M;else if(this.items.length>D)H=!0;else{m=this.hasZ?this.hasM?4:3:this.hasM?3:2;const v=this.featureAdapter;H=this.items.reduce((L,aa)=>{aa=v.getGeometry(aa);return L+(aa&&aa.coords.length||0)},0)/m>H}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],
features:[{attributes:{exceedslimit:Number(H)}}]}};d._createStatisticsQueryResponse=function(m){var H={attributes:{}};const M=[],D=new Map,v=new Map,L=new Map,aa=new Map,ia=new r(m,this.featureAdapter,this.fieldsIndex);var U=m.outStatistics;const {groupByFieldsForStatistics:F,having:G,orderByFields:N}=m;m=F&&F.length;const Q=!!m,P=Q&&F[0],t=Q&&!this.fieldsIndex.get(P);for(const ja of U){const {outStatisticFieldName:qa,statisticType:pa}=ja;U=ja;var h="exceedslimit"!==pa?ja.onStatisticField:void 0;
const wa="percentile_disc"===pa||"percentile_cont"===pa,Ca=Q&&1===m&&(h===P||t)&&"count"===pa;if(Q){if(!L.has(h)){var z=[];for(const ea of F){var R=this._getAttributeValues(ia,ea,D);z.push(R)}L.set(h,this._calculateUniqueValues(z,ia.returnDistinctValues))}z=L.get(h);for(const ea in z){const {count:x,data:T,items:ma,itemPositions:ya}=z[ea];R=T.join(",");if(!G||ia.validateItems(ma,G)){const za=aa.get(R)||{attributes:{}};var J=null;if(Ca)J=x;else{const b=this._getAttributeValues(ia,h,D);J=ya.map(f=>
b[f]);J=wa&&"statisticParameters"in U?this._getPercentileValue(U,J):this._getStatisticValue(U,J)}za.attributes[qa]=J;F.forEach((b,f)=>za.attributes[this.fieldsIndex.get(b)?b:`EXPR_${f+1}`]=T[f]);aa.set(R,za)}}}else h=this._getAttributeValues(ia,h,D),H.attributes[qa]=wa&&"statisticParameters"in U?this._getPercentileValue(U,h):this._getStatisticValue(U,h,v);M.push({name:qa,alias:qa,type:"esriFieldTypeDouble"})}H=Q?Array.from(aa.values()):[H];this._sortFeatures(H,N,(ja,qa)=>ja.attributes[qa]);return{fields:M,
features:H}};d._getStatisticValue=function(m,H,M){const {onStatisticField:D,statisticType:v}=m;m=M&&M.has(D)?M.get(D):this._calculateStatistics(H);M&&M.set(D,m);return m["var"===v?"variance":v]};d._getPercentileValue=function(m,H){const {onStatisticField:M,statisticParameters:D,statisticType:v}=m,{value:L,orderBy:aa}=D,ia="desc"===aa,U=this.fieldsIndex.get(M);m=[...H].filter(F=>null!=F).sort((F,G)=>fa(F,G,U,ia));return this._calculatePercentile(m,L,"percentile_disc"===v)};d._getAttributeValues=function(m,
H,M){if(M.has(H))return M.get(H);const D=this.fieldsIndex.get(H),v=this.items.map(L=>m.getFieldValue(L,H,D));M.set(H,v);return v};d._calculateStatistics=function(m){let H=Number.POSITIVE_INFINITY,M=Number.NEGATIVE_INFINITY,D=null,v=null,L=null,aa=null;const ia=[];let U=0;for(const F of m)"string"===typeof F?U++:null==F||isNaN(F)||(D+=F,H=Math.min(H,F),M=Math.max(M,F),ia.push(F),U++);if(U){v=D/U;m=0;for(const F of ia)m+=(F-v)**2;aa=1<U?m/(U-1):0;L=Math.sqrt(aa)}else M=H=null;return{avg:v,count:U,max:M,
min:H,stddev:L,sum:D,variance:aa}};d._calculateUniqueValues=function(m,H){const M={},D=this.items,v=D.length;for(let L=0;L<v;L++){const aa=D[L],ia=[];for(const F of m)ia.push(F[L]);const U=ia.join(",");H?null==M[U]&&(M[U]={count:1,data:ia,items:[aa],itemPositions:[L]}):null==M[U]?M[U]={count:1,data:ia,items:[aa],itemPositions:[L]}:(M[U].count++,M[U].items.push(aa),M[U].itemPositions.push(L))}return M};d._calculatePercentile=function(m,H,M){if(0===m.length)return null;if(0>=H)return m[0];if(1<=H)return m[m.length-
1];var D=(m.length-1)*H,v=Math.floor(D);H=v+1;D%=1;v=m[v];const L=m[H];return H>=m.length||M||"string"===typeof v||"string"===typeof L?v:v*(1-D)+L*D};n._createClass(B,[{key:"size",get:function(){return this.items.length}}]);return B}()})},"esri/geometry/support/quantizationUtils":function(){define(["exports","./jsonUtils"],function(n,e){function Z({scale:F,translate:G},N){return Math.round((N-G[0])/F[0])}function K({scale:F,translate:G},N){return Math.round((G[1]-N)/F[1])}function p(F,G,N){const Q=
[];let P,t,h,z;for(let R=0;R<N.length;R++){const J=N[R];if(0<R){if(h=Z(F,J[0]),z=K(F,J[1]),h!==P||z!==t)Q.push(G(J,h-P,z-t)),P=h,t=z}else P=Z(F,J[0]),t=K(F,J[1]),Q.push(G(J,P,t))}return 0<Q.length?Q:null}function I(F,G,N,Q){return p(F,N?Q?U:ia:Q?ia:aa,G)}function l(F,G,N,Q){const P=[];N=N?Q?U:ia:Q?ia:aa;for(Q=0;Q<G.length;Q++){const t=p(F,N,G[Q]);t&&3<=t.length&&P.push(t)}return P.length?P:null}function r(F,G,N,Q){const P=[];N=N?Q?U:ia:Q?ia:aa;for(Q=0;Q<G.length;Q++){const t=p(F,N,G[Q]);t&&2<=t.length&&
P.push(t)}return P.length?P:null}function q({scale:F,translate:G},N){return N*F[0]+G[0]}function E({scale:F,translate:G},N){return G[1]-N*F[1]}function ha(F,G,N){const Q=Array(N.length);if(!N.length)return Q;const [P,t]=F.scale;let h=q(F,N[0][0]);F=E(F,N[0][1]);Q[0]=G(N[0],h,F);for(let z=1;z<N.length;z++){const R=N[z];h+=R[0]*P;F-=R[1]*t;Q[z]=G(R,h,F)}return Q}function fa(F,G,N){const Q=Array(N.length);for(let P=0;P<N.length;P++)Q[P]=ha(F,G,N[P]);return Q}function A(F,G,N,Q){return ha(F,N?Q?U:ia:
Q?ia:aa,G)}function u(F,G,N,Q){return fa(F,N?Q?U:ia:Q?ia:aa,G)}function B(F,G,N,Q){return fa(F,N?Q?U:ia:Q?ia:aa,G)}function d(F,G,N){let [Q,P]=N[0],t=Math.min(Q,G[0]),h=Math.min(P,G[1]),z=Math.max(Q,G[2]);G=Math.max(P,G[3]);for(let R=1;R<N.length;R++){const [J,ja]=N[R];Q+=J;P+=ja;0>J&&(t=Math.min(t,Q));0<J&&(z=Math.max(z,Q));0>ja?h=Math.min(h,P):0<ja&&(G=Math.max(G,P))}F[0]=t;F[1]=h;F[2]=z;F[3]=G;return F}function m(F,G){if(!G.length)return null;F[0]=F[1]=Number.POSITIVE_INFINITY;F[2]=F[3]=Number.NEGATIVE_INFINITY;
for(let N=0;N<G.length;N++)d(F,F,G[N]);return F}function H(F,G,N,Q,P){G.xmin=Z(F,N.xmin);G.ymin=K(F,N.ymin);G.xmax=Z(F,N.xmax);G.ymax=K(F,N.ymax);G!==N&&(Q&&(G.zmin=N.zmin,G.zmax=N.zmax),P&&(G.mmin=N.mmin,G.mmax=N.mmax));return G}function M(F,G,N,Q,P){G.points=I(F,N.points,Q,P);return G}function D(F,G,N,Q,P){G.x=Z(F,N.x);G.y=K(F,N.y);G!==N&&(Q&&(G.z=N.z),P&&(G.m=N.m));return G}function v(F,G,N,Q,P){F=l(F,N.rings,Q,P);if(!F)return null;G.rings=F;return G}function L(F,G,N,Q,P){F=r(F,N.paths,Q,P);if(!F)return null;
G.paths=F;return G}const aa=(F,G,N)=>[G,N],ia=(F,G,N)=>[G,N,F[2]],U=(F,G,N)=>[G,N,F[2],F[3]];n.equals=function(F,G){if(F===G||null==F&&null==G)return!0;if(null==F||null==G)return!1;let N,Q,P,t;F&&"upperLeft"===F.originPosition?(N=F.translate[0],Q=F.translate[1],F=F.scale[0]):(N=F.extent.xmin,Q=F.extent.ymax,F=F.tolerance);G&&"upperLeft"===G.originPosition?(P=G.translate[0],t=G.translate[1],G=G.scale[0]):(P=G.extent.xmin,t=G.extent.ymax,G=G.tolerance);return N===P&&Q===t&&F===G};n.getQuantizedBoundsCoordsArray=
d;n.getQuantizedBoundsCoordsArrayArray=m;n.getQuantizedBoundsPaths=function(F){return m([0,0,0,0],F)};n.getQuantizedBoundsPoints=function(F){const G=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return d(G,G,F)};n.getQuantizedBoundsRings=function(F){return m([0,0,0,0],F)};n.quantizeBounds=function(F,G,N){G[0]=Z(F,N[0]);G[3]=K(F,N[1]);G[2]=Z(F,N[2]);G[1]=K(F,N[3]);return G};n.quantizeExtent=H;n.quantizeGeometry=function(F,G){return F&&G?e.isPoint(G)?
D(F,{},G,!1,!1):e.isPolyline(G)?L(F,{},G,!1,!1):e.isPolygon(G)?v(F,{},G,!1,!1):e.isMultipoint(G)?M(F,{},G,!1,!1):e.isExtent(G)?H(F,{},G,!1,!1):null:null};n.quantizeMultipoint=M;n.quantizePaths=r;n.quantizePoint=D;n.quantizePoints=I;n.quantizePolygon=v;n.quantizePolyline=L;n.quantizeRings=l;n.quantizeX=Z;n.quantizeY=K;n.toQuantizationTransform=function(F){return F?{originPosition:"upper-left"===F.originPosition?"upperLeft":"lower-left"===F.originPosition?"lowerLeft":F.originPosition,scale:F.tolerance?
[F.tolerance,F.tolerance]:[1,1],translate:F.extent?[F.extent.xmin,F.extent.ymax]:[0,0]}:null};n.unquantizeBounds=function(F,G,N){return N?(G[0]=q(F,N[0]),G[1]=E(F,N[3]),G[2]=q(F,N[2]),G[3]=E(F,N[1]),G):[q(F,G[0]),E(F,G[3]),q(F,G[2]),E(F,G[1])]};n.unquantizeCoordsArray=ha;n.unquantizeCoordsArrayArray=fa;n.unquantizeExtent=function(F,G,N,Q,P){G.xmin=q(F,N.xmin);G.ymin=E(F,N.ymin);G.xmax=q(F,N.xmax);G.ymax=E(F,N.ymax);G!==N&&(Q&&(G.zmin=N.zmin,G.zmax=N.zmax),P&&(G.mmin=N.mmin,G.mmax=N.mmax));return G};
n.unquantizeMultipoint=function(F,G,N,Q,P){G.points=A(F,N.points,Q,P);return G};n.unquantizePaths=u;n.unquantizePoint=function(F,G,N,Q,P){G.x=q(F,N.x);G.y=E(F,N.y);G!==N&&(Q&&(G.z=N.z),P&&(G.m=N.m));return G};n.unquantizePoints=A;n.unquantizePolygon=function(F,G,N,Q,P){G.rings=B(F,N.rings,Q,P);return G};n.unquantizePolyline=function(F,G,N,Q,P){G.paths=u(F,N.paths,Q,P);return G};n.unquantizeRings=B;n.unquantizeX=q;n.unquantizeY=E;Object.defineProperty(n,"__esModule",{value:!0})})},"esri/layers/graphics/data/AttributesBuilder":function(){define(["../../../core/maybe",
"./attributeSupport"],function(n,e){return function(){function Z(p,I,l){this._fieldDataCache=new Map;this._returnDistinctMap=new Map;this.returnDistinctValues=p.returnDistinctValues;this.fieldsIndex=l;this.featureAdapter=I;if((I=p.outFields)&&-1===I.indexOf("*")){this.outFields=I;p=0;for(const q of I){var r=e.getExpressionFromFieldName(q);r=(I=this.fieldsIndex.get(r))?null:e.getWhereClause(r,l);I=I?I.name:e.getAliasFromFieldName(q)||`FIELD_EXP_${p++}`;this._fieldDataCache.set(q,{alias:I,clause:r})}}}
var K=Z.prototype;K.countDistinctValues=function(p){if(!this.returnDistinctValues)return p.length;p.forEach(I=>this.getAttributes(I));return this._returnDistinctMap.size};K.getAttributes=function(p){p=this._processAttributesForOutFields(p);return this._processAttributesForDistinctValues(p)};K.getFieldValue=function(p,I,l){const r=l?l.name:I;let q=null;this._fieldDataCache.has(r)?q=this._fieldDataCache.get(r).clause:l||(q=e.getWhereClause(I,this.fieldsIndex),this._fieldDataCache.set(r,{alias:r,clause:q}));
return l?this.featureAdapter.getAttribute(p,r):q.calculateValue(p,this.featureAdapter)};K.validateItem=function(p,I){this._fieldDataCache.has(I)||this._fieldDataCache.set(I,{alias:I,clause:e.getWhereClause(I,this.fieldsIndex)});return this._fieldDataCache.get(I).clause.testFeature(p,this.featureAdapter)};K.validateItems=function(p,I){this._fieldDataCache.has(I)||this._fieldDataCache.set(I,{alias:I,clause:e.getWhereClause(I,this.fieldsIndex)});return this._fieldDataCache.get(I).clause.testSet(p,this.featureAdapter)};
K._processAttributesForOutFields=function(p){const I=this.outFields;if(!I||!I.length)return this.featureAdapter.getAttributes(p);const l={};for(const r of I){const {alias:q,clause:E}=this._fieldDataCache.get(r);l[q]=E?E.calculateValue(p,this.featureAdapter):this.featureAdapter.getAttribute(p,q)}return l};K._processAttributesForDistinctValues=function(p){if(n.isNone(p)||!this.returnDistinctValues)return p;var I=this.outFields,l=[];if(I)for(const q of I){var {alias:r}=this._fieldDataCache.get(q);l.push(p[r])}else for(r in p)l.push(p[r]);
I=`${(I||["*"]).join(",")}=${l.join(",")}`;l=this._returnDistinctMap.get(I)||0;this._returnDistinctMap.set(I,++l);return 1<l?null:p};return Z}()})},"esri/layers/graphics/sources/support/sourceUtils":function(){define(["require","exports","../../../../geometry/support/spatialReferenceUtils","../../../support/fieldUtils"],function(n,e,Z,K){function p(fa){return new r(fa)}async function I(){return ha?ha:ha=await new Promise(function(fa,A){n(["../../../../geometry/geometryEngineJSON"],fa,A)})}let l=function(){this.description=
this.code=null},r=function(fa){this.error=new l;this.objectId=this.globalId=null;this.success=!1;this.uniqueId=null;this.error.description=fa},q=function(fa){this.globalId=null;this.success=!0;this.objectId=this.uniqueId=fa};const E=new Set;let ha;e.createFeatureEditErrorResult=p;e.createFeatureEditSuccessResult=function(fa){return new q(fa)};e.loadGeometryEngine=I;e.loadGeometryEngineForSimplify=async function(fa,A){!Z.isValid(fa)||"esriGeometryPolygon"!==A&&"esriGeometryPolyline"!==A||await I()};
e.mixAttributes=function(fa,A,u,B,d=!1,m){E.clear();for(const v in B){const L=fa.get(v);if(L){var H=B[v];{var M=L;var D=H;let aa=D;"string"===typeof D&&K.isNumericField(M)?aa=parseFloat(D):null!=D&&K.isStringField(M)&&"string"!==typeof D&&(aa=String(D));M=K.sanitizeNullFieldValue(aa)}M!==H&&m&&m.push({name:"invalid-value-type",message:"attribute value was converted to match the field type",details:{field:L,originalValue:H,sanitizedValue:M}});E.add(L.name);if(L&&(d||L.editable)){if(H=K.validateFieldValue(L,
M))return p(K.validationErrorToString(H,L,M));u[L.name]=M}}}for(const v of A)if(!E.has(v.name))return p(`missing required field "${v.name}"`);return null};e.simplify=function(fa,A){if(!fa||!Z.isValid(A))return fa;if("rings"in fa||"paths"in fa){if(!ha)throw new TypeError("geometry engine not loaded");return ha.simplify(A,fa)}return fa};Object.defineProperty(e,"__esModule",{value:!0})})},"*noref":1}});
define("../../../../core/Error ../../../../geometry/support/spatialReferenceUtils ../../../../geometry/support/jsonUtils ../../../support/fieldUtils ../../../support/fieldType ../../featureConversionUtils ../../../support/FieldsIndex ../../objectIdUtils ./clientSideDefaults ../../data/projectionSupport ../../data/FeatureStore ../../data/QueryEngine ./sourceUtils".split(" "),function(n,e,Z,K,p,I,l,r,q,E,ha,fa,A){function u(M){return Z.isPoint(M)?null!=M.z:!!M.hasZ}function B(M){return Z.isPoint(M)?
null!=M.m:!!M.hasM}const d=e.WGS84,m={xmin:-180,ymin:-90,xmax:180,ymax:90,spatialReference:e.WGS84},H={hasAttachments:!1,capabilities:"query, editing, create, delete, update",useStandardizedQueries:!0,supportsCoordinatesQuantization:!0,supportsReturningQueryGeometry:!0,advancedQueryCapabilities:{supportsQueryAttachments:!1,supportsStatistics:!0,supportsPercentileStatistics:!0,supportsReturningGeometryCentroid:!0,supportsQueryWithDistance:!0,supportsDistinct:!0,supportsReturningQueryExtent:!0,supportsReturningGeometryProperties:!1,
supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQueryWithResultType:!1,supportsSqlExpression:!0,supportsDisjointSpatialRel:!0}};return function(){function M(){this._nextObjectId=this._queryEngine=null}var D=M.prototype;D.destroy=function(){this._queryEngine&&this._queryEngine&&this._queryEngine.destroy();this._queryEngine=this._requiredFields=this._fieldsIndex=this._createDefaultAttributes=null};D.load=async function(v){var L=[];const {features:aa}=v;var ia=this._inferLayerProperties(aa,
v.fields);const U=v.fields||[],F=null!=v.hasM?v.hasM:ia.hasM,G=null!=v.hasZ?v.hasZ:ia.hasZ;var N=!v.spatialReference&&!ia.spatialReference;const Q=N?d:v.spatialReference||ia.spatialReference,P=N?m:null,t=v.geometryType||ia.geometryType;let h=v.objectIdField||ia.objectIdField;v=v.timeInfo;if(t&&(N&&L.push({name:"feature-layer:spatial-reference-not-found",message:"Spatial reference not provided or found in features. Defaults to WGS84"}),!t))throw new n("feature-layer:missing-property","geometryType not set and couldn't be inferred from the provided features");
if(!h)throw new n("feature-layer:missing-property","objectIdField not set and couldn't be found in the provided fields");ia.objectIdField&&h!==ia.objectIdField&&(L.push({name:"feature-layer:duplicated-oid-field",message:`Provided objectIdField "${h}" doesn't match the field name "${ia.objectIdField}", found in the provided fields`}),h=ia.objectIdField);if(h&&!ia.objectIdField){let R=null;U.some(J=>J.name===h?(R=J,!0):!1)?(R.type="esriFieldTypeOID",R.editable=!1,R.nullable=!1):U.unshift({alias:h,name:h,
type:"esriFieldTypeOID",editable:!1,nullable:!1})}for(const R of U){null==R.name&&(R.name=R.alias);null==R.alias&&(R.alias=R.name);if(!R.name)throw new n("feature-layer:invalid-field-name","field name is missing",{field:R});R.name===h&&(R.type="esriFieldTypeOID");if(-1===p.kebabDict.jsonValues.indexOf(R.type))throw new n("feature-layer:invalid-field-type",`invalid type for field "${R.name}"`,{field:R});}ia={};this._requiredFields=[];for(var z of U)"esriFieldTypeOID"!==z.type&&"esriFieldTypeGlobalID"!==
z.type&&(z.editable=null==z.editable?!0:!!z.editable,z.nullable=null==z.nullable?!0:!!z.nullable,N=K.getFieldDefaultValue(z),z.nullable||void 0!==N?ia[z.name]=N:this._requiredFields.push(z));this._fieldsIndex=new l(U);this._createDefaultAttributes=q.createDefaultAttributesFunction(ia,h);v&&(v.startTimeField&&((z=this._fieldsIndex.get(v.startTimeField))?(v.startTimeField=z.name,z.type="esriFieldTypeDate"):v.startTimeField=null),v.endTimeField&&((z=this._fieldsIndex.get(v.endTimeField))?(v.endTimeField=
z.name,z.type="esriFieldTypeDate"):v.endTimeField=null),v.trackIdField&&((z=this._fieldsIndex.get(v.trackIdField))?v.trackIdField=z.name:(v.trackIdField=null,L.push({name:"feature-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:v}}))),v.startTimeField||v.endTimeField||(L.push({name:"feature-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing or invalid",details:{timeInfo:v}}),v=null));L={warnings:L,featureErrors:[],layerDefinition:{...H,
drawingInfo:q.createDrawingInfo(t),templates:q.createDefaultTemplate(ia),extent:P,geometryType:t,objectIdField:h,fields:U,hasZ:!!G,hasM:!!F,timeInfo:v},assignedObjectIds:{}};this._queryEngine=new fa["default"]({fields:U,geometryType:t,hasM:F,hasZ:G,objectIdField:h,spatialReference:Q,featureStore:new ha({geometryType:t,hasM:F,hasZ:G}),timeInfo:v,cacheSpatialQueries:!0});if(!aa||!aa.length)return this._nextObjectId=r.initialObjectId,L;this._nextObjectId=r.findLastObjectIdFromFeatures(h,aa)+1;await E.checkProjectionSupport(aa,
Q);return this._loadInitialFeatures(L,aa)};D.applyEdits=async function(v){const {spatialReference:L,geometryType:aa}=this._queryEngine;await Promise.all([A.loadGeometryEngineForSimplify(L,aa),E.checkProjectionSupport(v.adds,L),E.checkProjectionSupport(v.updates,L)]);return this._applyEdits(v)};D.queryFeatures=function(v,L={}){return this._queryEngine.executeQuery(v,L.signal)};D.queryFeatureCount=function(v,L={}){return this._queryEngine.executeQueryForCount(v,L.signal)};D.queryObjectIds=function(v,
L={}){return this._queryEngine.executeQueryForIds(v,L.signal)};D.queryExtent=function(v,L={}){return this._queryEngine.executeQueryForExtent(v,L.signal)};D.querySnapping=function(v,L={}){return this._queryEngine.executeQueryForSnapping(v,L.signal)};D._inferLayerProperties=function(v,L){let aa=void 0,ia=void 0,U=null,F=null,G=null;for(const N of v)if(v=N.geometry)if(U||(U=Z.getJsonType(v)),F||(F=v.spatialReference),null==aa&&(aa=u(v)),null==ia&&(ia=B(v)),U&&F&&null!=aa&&null!=ia)break;if(L&&L.length){let N=
null;L.some(Q=>{const P="esriFieldTypeOID"===Q.type,t=!Q.type&&Q.name&&"objectid"===Q.name.toLowerCase();N=Q;return P||t})&&(G=N.name)}return{geometryType:U,spatialReference:F,objectIdField:G,hasM:ia,hasZ:aa}};D._loadInitialFeatures=function(v,L){const {geometryType:aa,hasM:ia,hasZ:U,objectIdField:F,spatialReference:G,featureStore:N}=this._queryEngine,Q=[];for(const P of L){null!=P.uid&&(v.assignedObjectIds[P.uid]=-1);if(P.geometry&&aa!==Z.getJsonType(P.geometry)){v.featureErrors.push(A.createFeatureEditErrorResult("Incorrect geometry type."));
continue}L=this._createDefaultAttributes();const t=A.mixAttributes(this._fieldsIndex,this._requiredFields,L,P.attributes,!0,v.warnings);t?v.featureErrors.push(t):(this._assignObjectId(L,P.attributes,!0),P.attributes=L,null!=P.uid&&(v.assignedObjectIds[P.uid]=P.attributes[F]),P.geometry&&(P.geometry=E.project(P.geometry,P.geometry.spatialReference,G)),Q.push(P))}N.addMany(I.convertFromFeatures([],Q,aa,U,ia,F));v.layerDefinition.extent=this._queryEngine.fullExtent;if(v.layerDefinition.timeInfo){const {start:P,
end:t}=this._queryEngine.timeExtent;v.layerDefinition.timeInfo.timeExtent=[P,t]}return v};D._applyEdits=function(v){const {adds:L,updates:aa,deletes:ia}=v;v={addResults:[],deleteResults:[],updateResults:[],uidToObjectId:{}};L&&L.length&&this._applyAddEdits(v,L);aa&&aa.length&&this._applyUpdateEdits(v,aa);if(ia&&ia.length){for(const U of ia)v.deleteResults.push(A.createFeatureEditSuccessResult(U));this._queryEngine.featureStore.removeManyById(ia)}return{fullExtent:this._queryEngine.fullExtent,featureEditResults:v}};
D._applyAddEdits=function(v,L){const {addResults:aa}=v,{geometryType:ia,hasM:U,hasZ:F,objectIdField:G,spatialReference:N,featureStore:Q}=this._queryEngine,P=[];for(const t of L){if(t.geometry&&ia!==Z.getJsonType(t.geometry)){aa.push(A.createFeatureEditErrorResult("Incorrect geometry type."));continue}L=this._createDefaultAttributes();const h=A.mixAttributes(this._fieldsIndex,this._requiredFields,L,t.attributes);h?aa.push(h):(this._assignObjectId(L,t.attributes),t.attributes=L,null!=t.uid&&(v.uidToObjectId[t.uid]=
t.attributes[G]),t.geometry&&(t.geometry=E.project(A.simplify(t.geometry,N),t.geometry.spatialReference,N)),P.push(t),aa.push(A.createFeatureEditSuccessResult(t.attributes[G])))}Q.addMany(I.convertFromFeatures([],P,ia,F,U,G))};D._applyUpdateEdits=function({updateResults:v},L){const {geometryType:aa,hasM:ia,hasZ:U,objectIdField:F,spatialReference:G,featureStore:N}=this._queryEngine;for(const Q of L){const {attributes:P,geometry:t}=Q;L=P&&P[F];if(null==L){v.push(A.createFeatureEditErrorResult(`Identifier field ${F} missing`));
continue}if(!N.has(L)){v.push(A.createFeatureEditErrorResult(`Feature with object id ${L} missing`));continue}const h=I.convertToFeature(N.getFeature(L),aa,U,ia);if(t){if(aa!==Z.getJsonType(t)){v.push(A.createFeatureEditErrorResult("Incorrect geometry type."));continue}h.geometry=E.project(A.simplify(t,G),t.spatialReference,G)}if(P){const z=A.mixAttributes(this._fieldsIndex,this._requiredFields,h.attributes,P);if(z){v.push(z);continue}}N.add(I.convertFromFeature(h,aa,U,ia,F));v.push(A.createFeatureEditSuccessResult(L))}};
D._assignObjectId=function(v,L,aa=!1){const ia=this._queryEngine.objectIdField;aa?L&&isFinite(L[ia])?v[ia]=L[ia]:v[ia]=this._nextObjectId++:v[ia]=this._nextObjectId++};return M}()});