// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.19/esri/copyright.txt for details.
//>>built
/*
 MIT
*/
require({cache:{"esri/widgets/LayerList/support/layerListUtils":function(){define(["exports"],function(aa){function A(r){if(r)return null!=r.listMode?r.listMode:void 0}function w(r){if(r)return null!=r.minScale?r.minScale:void 0}function t(r){if(r)return null!=r.maxScale?r.maxScale:void 0}function T(r){if(r&&r.listMode!==J.hideChildren&&"wmts"!==r.type)return"group"===r.type?"layers":"sublayers"}function Y(r,H){r&&r.sort((X,ea)=>{X=H.indexOf(X.uid);ea=H.indexOf(ea.uid);return X>ea?-1:X<ea?1:0})}const J=
{hide:"hide",hideChildren:"hide-children"};aa.canDisplayLayer=function(r){return A(r)!==J.hide};aa.canSortSublayers=function(r){r=r&&(r.get("layer.layer")||r.layer);if(!r)return!1;r=r.get("capabilities.exportMap.supportsSublayersChanges");return"boolean"===typeof r?r:!0};aa.findLayerListMode=A;aa.findLayerMaxScale=t;aa.findLayerMinScale=w;aa.findLayerVisibilityMode=function(r){if(!r)return"inherited";var H=r.get("layer.capabilities.exportMap.supportsSublayerVisibility");if("boolean"===typeof H)return H?
"independent":"inherited";H=r.get("capabilities.exportMap.supportsSublayerVisibility");return"boolean"===typeof H?H?"independent":"inherited":null!=r.visibilityMode?r.visibilityMode:"independent"};aa.findSelectedItem=function(r,H){var X;const ea=null==(X=r.layer)?void 0:X.uid;return ea&&H.find(D=>{var Q;return(null==(Q=D.layer)?void 0:Q.uid)===ea})};aa.getItemLayers=function(r){return(r=null==r?void 0:r.layer)&&"group"===r.type?r.layers:null};aa.getNormalizedChildLayerProperty=T;aa.isLayerOutsideScaleRange=
function(r,H){if(!r||isNaN(H))return!1;var X=w(r);r=t(r);X=!isNaN(X)&&0<X&&H>X;H=!isNaN(r)&&0<r&&H<r;return X||H};aa.sortChildLayersToIds=function(r,H){if(r=null==r?void 0:r.layer){var X=T(r);X&&(r=r.get(X),Y(r,H))}};aa.sortLayersToIds=Y;Object.defineProperty(aa,"__esModule",{value:!0})})},"esri/widgets/LayerList/ListItem":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/aliasOf ../../core/accessorSupport/decorators/cast ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/Accessor ../../core/Collection ../../core/Identifiable ../../support/actions/ActionBase ../../support/actions/ActionButton ../../support/actions/ActionToggle ../../core/watchUtils ../../core/HandleOwner ../../layers/support/Sublayer ../../support/actions/ActionSlider ./ListItemPanel ./support/layerListUtils".split(" "),
function(aa,A,w,t,T,Y,J,r,H,X,ea,D,Q,na,ba,R,ta,Da,ka,ca,U,g,y,E){var Z;w=na.ofType({key:"type",defaultKeyValue:"button",base:R,typeMap:{button:ta,toggle:Da,slider:g}});const la=na.ofType(w);Q=Z=function(oa){function wa(n){n=oa.call(this,n)||this;n.actionsSections=new la;n.actionsOpen=!1;n.children=new (na.ofType(Z));n.childrenSortable=!0;n.error=null;n.layer=null;n.layerView=null;n.open=!1;n.panel=null;n.parent=null;n.sortable=!0;n.view=null;n.visible=null;return n}aa._inheritsLoose(wa,oa);var V=
wa.prototype;V.initialize=function(){this.handles.add([ka.init(this,"layer",n=>this._watchLayerProperties(n)),ka.init(this,"view",n=>this._updateChildren(n)),ka.init(this,"panel",n=>this._setListItemOnPanel(n)),ka.init(this,["layer","view"],()=>this._getLayerView())])};V.destroy=function(){this.view=null};V.castPanel=function(n){this.get("panel.open")&&!n.hasOwnProperty("open")&&(n.open=!0);return n?new y(n):null};V.clone=function(){return new Z({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,
children:this.children.clone(),layer:this.layer,open:this.open,panel:this.panel,title:this.title,view:this.view,visible:this.visible})};V._setListItemOnPanel=function(n){n&&(n.listItem=this)};V._updateChildren=function(n){const qa=this.children;qa&&qa.forEach(pa=>pa.view=n)};V._addChildren=function(n){this.handles.remove("child-list-mode");this.children.removeAll();if(n){n.forEach(pa=>{this.handles.add(ka.watch(pa,"listMode",()=>this._addChildren(n)),"child-list-mode")});var qa=[];n.filter(pa=>"hide"!==
E.findLayerListMode(pa)).forEach(pa=>{E.canDisplayLayer(pa)&&(pa=new Z({layer:pa,parent:this,view:this.view}),qa.unshift(pa))});this.children.addMany(qa)}};V._watchSublayerChanges=function(n){n&&this.handles.add(n.on("change",()=>{this._addChildren(n)}),"layer")};V._initializeChildLayers=function(n){this._addChildren(n);this._watchSublayerChanges(n)};V._watchLayerProperties=function(n){if(this.handles&&(this.handles.remove("layer"),this.handles.remove("child-list-mode"),n))if(this.handles.add(ka.watch(n,
"listMode",()=>this._watchLayerProperties(n)),"layer"),"hide-children"===E.findLayerListMode(n))this.children.removeAll();else{var qa=E.getNormalizedChildLayerProperty(n);qa&&this.handles.add(ka.init(n,qa,()=>{n.hasOwnProperty(qa)&&this._initializeChildLayers(n[qa])}),"layer")}};V._getLayerView=async function(){const {layer:n,view:qa}=this;if(n&&qa)try{const pa=await qa.whenLayerView(n);pa.layer===this.layer&&this._set("layerView",pa)}catch{}};V._isLayerUpdating=function(n){return n instanceof U?
!1:n&&"loading"===n.loadStatus};aa._createClass(wa,[{key:"title",get:function(){const n=this.get("layer.layer");return(!n||n&&this.get("layer.layer.loaded"))&&this.get("layer.title")||this.get("layer.attributes.title")||""},set:function(n){void 0===n?this._clearOverride("title"):this._override("title",n)}},{key:"updating",get:function(){const n=this.layerView;return n?n.updating:this._isLayerUpdating(this.layer)}},{key:"visibleAtCurrentScale",get:function(){return!E.isLayerOutsideScaleRange(this.layer,
this.get("view.scale"))}},{key:"visibilityMode",get:function(){return E.findLayerVisibilityMode(this.layer)}}]);return wa}(ba.IdentifiableMixin(ca.HandleOwnerMixin(Q)));A.__decorate([T.property({type:la})],Q.prototype,"actionsSections",void 0);A.__decorate([T.property()],Q.prototype,"actionsOpen",void 0);A.__decorate([T.property({type:na})],Q.prototype,"children",void 0);A.__decorate([T.property()],Q.prototype,"childrenSortable",void 0);A.__decorate([Y.aliasOf("layer.loadError?")],Q.prototype,"error",
void 0);A.__decorate([T.property()],Q.prototype,"layer",void 0);A.__decorate([T.property({readOnly:!0})],Q.prototype,"layerView",void 0);A.__decorate([T.property()],Q.prototype,"open",void 0);A.__decorate([T.property({type:y})],Q.prototype,"panel",void 0);A.__decorate([J.cast("panel")],Q.prototype,"castPanel",null);A.__decorate([T.property()],Q.prototype,"parent",void 0);A.__decorate([T.property()],Q.prototype,"sortable",void 0);A.__decorate([T.property()],Q.prototype,"title",null);A.__decorate([T.property({readOnly:!0})],
Q.prototype,"updating",null);A.__decorate([T.property({value:null})],Q.prototype,"view",void 0);A.__decorate([Y.aliasOf("layer.visible")],Q.prototype,"visible",void 0);A.__decorate([T.property({readOnly:!0})],Q.prototype,"visibleAtCurrentScale",null);A.__decorate([T.property({readOnly:!0})],Q.prototype,"visibilityMode",null);return Q=Z=A.__decorate([H.subclass("esri.widgets.LayerList.ListItem")],Q)})},"esri/layers/support/Sublayer":function(){define("require ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/lang ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/utils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/jsonMap ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/Error ../../core/urlUtils ../../core/uuid ../../core/accessorSupport/PropertyOrigin ../../portal/support/resourceExtension ../../geometry/Extent ../../geometry ../../core/Collection ./fieldUtils ../../core/Identifiable ../../PopupTemplate ../../request ../../core/Loadable ../../symbols ../../renderers/Renderer ../../renderers/ClassBreaksRenderer ../../renderers/UniqueValueRenderer ../../renderers/DictionaryRenderer ../../renderers/DotDensityRenderer ../../renderers/HeatmapRenderer ../../renderers/SimpleRenderer ../../renderers/support/types ../../renderers/support/jsonUtils ../../core/MultiOriginJSONSupport ./Field ./FieldsIndex ./LabelClass ./FeatureType ./source/MapLayerSource ./source/DataLayerSource ../../support/popupUtils ../../tasks/support/Query ../../core/HandleOwner".split(" "),
function(aa,A,w,t,T,Y,J,r,H,X,ea,D,Q,na,ba,R,ta,Da,ka,ca,U,g,y,E,Z,la,oa,wa,V,n,qa,pa,Pa,Ka,K,d,k,l,u,z,F,L,S,fa,ua,za,Wa){function La(N){return N&&"esriSMS"===N.type}function $a(N,I,C){var f;return{ignoreOrigin:!0,enabled:C?"map-image"===(null==(f=C.layer)?void 0:f.type)&&(C.writeSublayerStructure||this.originIdOf(I)>=Da.nameToId(C.origin)):!1}}function Qa(N,I,C){var f;return{enabled:C?"tile"===(null==(f=C.layer)?void 0:f.type)&&this._isOverridden(I):!1}}function ha(N,I,C){return{ignoreOrigin:!0,
enabled:C&&C.writeSublayerStructure||!1}}function Fa(N,I,C){return{ignoreOrigin:!0,enabled:C?C.writeSublayerStructure||this.originIdOf(I)>=Da.nameToId(C.origin):!1}}var Ra;const Ma=Y.getLogger("esri.layers.support.Sublayer");let Aa=0;const x=new Set;x.add("layer");x.add("parent");x.add("loaded");x.add("loadStatus");x.add("loadError");x.add("loadWarnings");t=Ra=function(N){function I(f){f=N.call(this,f)||this;f.capabilities=void 0;f.fields=null;f.fullExtent=null;f.globalIdField=null;f.legendEnabled=
!0;f.objectIdField=null;f.popupEnabled=!0;f.popupTemplate=null;f.sourceJSON=null;f.title=null;f.typeIdField=null;f.types=null;return f}A._inheritsLoose(I,N);var C=I.prototype;C.load=async function(f){this.addResolvingPromise((async()=>{var q;if(!this.layer&&!this.url)throw new ba("sublayer:missing-layer","Sublayer can't be loaded without being part of a layer",{sublayer:this});let v=null;if(!this.layer||2<this.originIdOf("url")||"data-layer"===(null==(q=this.source)?void 0:q.type))v=(await la(this.url,
{responseType:"json",query:{f:"json"},...f})).data;else{var O;q=this.id;"map-layer"===(null==(O=this.source)?void 0:O.type)&&(q=this.source.mapLayerId);v=await this.layer.fetchSublayerInfo(q,f)}v&&(this.sourceJSON=v,this.read({layerDefinition:v},{origin:"service"}))})());return this};C.readCapabilities=function(f,q){q=q.layerDefinition||q;f=(f=q.capabilities||f)?f.toLowerCase().split(",").map(v=>v.trim()):[];return{exportMap:{supportsModification:!!q.canModifyLayer},operations:{supportsQuery:-1!==
f.indexOf("query")}}};C.readGlobalIdFieldFromService=function(f,q){q=q.layerDefinition||q;if(q.globalIdField)return q.globalIdField;if(q.fields)for(const v of q.fields)if("esriFieldTypeGlobalID"===v.type)return v.name};C.writeLabelingInfo=function(f,q,v,O){f&&f.length&&(q.layerDefinition={drawingInfo:{labelingInfo:f.map(da=>da.write({},O))}})};C.readMinScale=function(f,q){return q.minScale||q.layerDefinition&&q.layerDefinition.minScale||0};C.readMaxScale=function(f,q){return q.maxScale||q.layerDefinition&&
q.layerDefinition.maxScale||0};C.readObjectIdFieldFromService=function(f,q){q=q.layerDefinition||q;if(q.objectIdField)return q.objectIdField;if(q.fields)for(const v of q.fields)if("esriFieldTypeOID"===v.type)return v.name};C.readOpacity=function(f,q){f=q.layerDefinition;return 1-.01*(null!=f.transparency?f.transparency:f.drawingInfo.transparency)};C.writeOpacity=function(f,q,v,O){q.layerDefinition={drawingInfo:{transparency:100-100*f}}};C.writeParent=function(f,q){q.parentLayerId=this.parent&&this.parent!==
this.layer?J.ensureInteger(this.parent.id):-1};C.castSublayers=function(f){return J.ensureType(g.ofType(Ra),f)};C.writeSublayers=function(f,q,v){this.get("sublayers.length")&&(q[v]=this.sublayers.map(O=>O.id).toArray().reverse())};C.readTypeIdField=function(f,q){q=q.layerDefinition||q;if(f=q.typeIdField)if(q=y.getField(q.fields,f))return q.name;return null};C.writeVisible=function(f,q,v,O){q[v]=this.getAtOrigin("defaultVisibility","service")||f};C.clone=function(){const {store:f}=r.getProperties(this),
q=new Ra;r.getProperties(q).store=f.clone(x);this.commitProperty("url");q._lastParsedUrl=this._lastParsedUrl;return q};C.createPopupTemplate=function(f){return ua.createPopupTemplate(this,f)};C.createQuery=function(){return new za({returnGeometry:!0,where:this.definitionExpression||"1\x3d1"})};C.createFeatureLayer=async function(){var f,q;if(this.hasOwnProperty("sublayers"))return null;const v=null==(f=this.layer)?void 0:f.parsedUrl;f=new (await new Promise(function(O,da){aa(["../FeatureLayer"],function(ma){O(Object.freeze({__proto__:null,
"default":ma}))},da)})).default({url:v.path});v&&this.source&&("map-layer"===this.source.type?f.layerId=this.source.mapLayerId:f.dynamicDataSource=this.source);null!=this.layer.refreshInterval&&(f.refreshInterval=this.layer.refreshInterval);this.definitionExpression&&(f.definitionExpression=this.definitionExpression);2<this.originIdOf("labelingInfo")&&(f.labelingInfo=T.clone(this.labelingInfo));0<this.originIdOf("labelsVisible")&&(f.labelsVisible=this.labelsVisible);0<this.originIdOf("legendEnabled")&&
(f.legendEnabled=this.legendEnabled);0<this.originIdOf("visible")&&(f.visible=this.visible);0<this.originIdOf("minScale")&&(f.minScale=this.minScale);0<this.originIdOf("maxScale")&&(f.maxScale=this.maxScale);0<this.originIdOf("opacity")&&(f.opacity=this.opacity);0<this.originIdOf("popupTemplate")&&(f.popupTemplate=T.clone(this.popupTemplate));2<this.originIdOf("renderer")&&(f.renderer=T.clone(this.renderer));"data-layer"===(null==(q=this.source)?void 0:q.type)&&(f.dynamicDataSource=this.source.clone());
0<this.originIdOf("title")&&(f.title=this.title);"map-image"===this.layer.type&&0<this.layer.originIdOf("customParameters")&&(f.customParameters=this.layer.customParameters);"tile"===this.layer.type&&0<this.layer.originIdOf("customParameters")&&(f.customParameters=this.layer.customParameters);return f};C.getFeatureType=function(f){const {typeIdField:q,types:v}=this;if(!q||!f)return null;const O=f.attributes?f.attributes[q]:void 0;if(null==O)return null;let da=null;v.some(ma=>{const {id:Ga}=ma;if(null==
Ga)return!1;Ga.toString()===O.toString()&&(da=ma);return!!da});return da};C.getFieldDomain=function(f,q){return(q=this.getFeatureType(q&&q.feature))&&(q=q.domains&&q.domains[f])&&"inherited"!==q.type?q:this._getLayerDomain(f)};C.queryFeatures=function(f=this.createQuery(),q){return this.load().then(()=>{if(!this.get("capabilities.operations.supportsQuery"))throw new ba("Sublayer.queryFeatures","this layer doesn't support queries.");return Promise.all([new Promise(function(v,O){aa(["../../rest/query/operations/query"],
v,O)}),new Promise(function(v,O){aa(["../../tasks/support/FeatureSet"],function(da){v(Object.freeze({__proto__:null,"default":da}))},O)})])}).then(([{executeQuery:v},{default:O}])=>v(this.url,za.from(f),this.layer?this.layer.spatialReference:null,{...q,query:{...this.layer.customParameters}}).then(da=>O.fromJSON(da.data))).then(v=>{v&&v.features&&v.features.forEach(O=>{O.sourceLayer=this});return v})};C.toExportImageJSON=function(){var f;const q={id:this.id,source:(null==(f=this.source)?void 0:f.toJSON())||
{mapLayerId:this.id,type:"mapLayer"}};this.definitionExpression&&(q.definitionExpression=this.definitionExpression);const v=["renderer","labelingInfo","opacity","labelsVisible"].reduce((O,da)=>{O[da]=this.originIdOf(da);return O},{});Object.keys(v).some(O=>2<v[O])&&(f=q.drawingInfo={},2<v.renderer&&(f.renderer=this.renderer?this.renderer.toJSON():null),2<v.labelsVisible&&(f.showLabels=this.labelsVisible),this.labelsVisible&&2<v.labelingInfo&&(f.labelingInfo=this.labelingInfo?this.labelingInfo.map(O=>
O.write({},{origin:"service",layer:this.layer})):null,f.showLabels=!0),2<v.opacity&&(f.transparency=100-100*this.opacity),this._assignDefaultSymbolColors(f.renderer));return q};C._assignDefaultSymbolColors=function(f){this._forEachSimpleMarkerSymbols(f,q=>{q.color||"esriSMSX"!==q.style&&"esriSMSCross"!==q.style||(q.color=q.outline&&q.outline.color?q.outline.color:[0,0,0,0])})};C._forEachSimpleMarkerSymbols=function(f,q){if(f){const v="uniqueValueInfos"in f?f.uniqueValueInfos:"classBreakInfos"in f?
f.classBreakInfos:[];for(const O of v)La(O.symbol)&&q(O.symbol);"symbol"in f&&La(f.symbol)&&q(f.symbol);"defaultSymbol"in f&&La(f.defaultSymbol)&&q(f.defaultSymbol)}};C._setAndNotifyLayer=function(f,q){const v=this.layer,O=this._get(f);let da,ma;switch(f){case "definitionExpression":da="supportsSublayerDefinitionExpression";case "minScale":case "maxScale":case "visible":da="supportsSublayerVisibility";break;case "labelingInfo":case "labelsVisible":case "opacity":case "renderer":case "source":da="supportsDynamicLayers",
ma="supportsModification"}const Ga=r.getProperties(this).getDefaultOrigin();if("service"!==Ga){if(da&&!1===this.get(`layer.capabilities.exportMap.${da}`)){this._logLockedError(f,`capability not available 'layer.capabilities.exportMap.${da}'`);return}if(ma&&!1===this.get(`capabilities.exportMap.${ma}`)){this._logLockedError(f,`capability not available 'capabilities.exportMap.${ma}'`);return}}"source"===f&&"not-loaded"!==this.loadStatus?this._logLockedError(f,"'source' can't be changed after calling sublayer.load()"):
(this._set(f,q),"service"!==Ga&&O!==q&&v&&v.emit&&v.emit("sublayer-update",{propertyName:f,target:this}))};C._handleSublayersChange=function(f,q){q&&(q.forEach(v=>{v.parent=null;v.layer=null}),this.handles.removeAll());f&&(f.forEach(v=>{v.parent=this;v.layer=this.layer}),this.handles.add([f.on("after-add",({item:v})=>{v.parent=this;v.layer=this.layer}),f.on("after-remove",({item:v})=>{v.parent=null;v.layer=null}),f.on("before-changes",v=>{const O=this.get("layer.capabilities.exportMap.supportsSublayersChanges");
null==O||O||(Ma.error(new ba("sublayer:sublayers-non-modifiable","Sublayer can't be added, moved, or removed from the layer's sublayers",{sublayer:this,layer:this.layer})),v.preventDefault())})]))};C._logLockedError=function(f,q){Ma.error(new ba("sublayer:locked",`Property '${f}' can't be changed on Sublayer from the layer '${this.layer.id}'`,{reason:q,sublayer:this,layer:this.layer}))};C._getLayerDomain=function(f){return(f=this.fieldsIndex.get(f))?f.domain:null};A._createClass(I,[{key:"definitionExpression",
set:function(f){this._setAndNotifyLayer("definitionExpression",f)}},{key:"fieldsIndex",get:function(){return new z(this.fields||[])}},{key:"id",get:function(){const f=this._get("id");return null==f?Aa++:f},set:function(f){this._get("id")!==f&&(!1===this.get("layer.capabilities.exportMap.supportsDynamicLayers")?this._logLockedError("id","capability not available 'layer.capabilities.exportMap.supportsDynamicLayers'"):this._set("id",f))}},{key:"labelingInfo",set:function(f){this._setAndNotifyLayer("labelingInfo",
f)}},{key:"labelsVisible",set:function(f){this._setAndNotifyLayer("labelsVisible",f)}},{key:"layer",set:function(f){this._set("layer",f);this.sublayers&&this.sublayers.forEach(q=>q.layer=f)}},{key:"listMode",set:function(f){this._set("listMode",f)}},{key:"minScale",set:function(f){this._setAndNotifyLayer("minScale",f)}},{key:"maxScale",set:function(f){this._setAndNotifyLayer("maxScale",f)}},{key:"opacity",set:function(f){this._setAndNotifyLayer("opacity",f)}},{key:"defaultPopupTemplate",get:function(){return this.createPopupTemplate()}},
{key:"renderer",set:function(f){if(f)for(const q of f.getSymbols())if(wa.isSymbol3D(q)){Ma.warn("Sublayer renderer should use 2D symbols");break}this._setAndNotifyLayer("renderer",f)}},{key:"source",get:function(){return this._get("source")||new S.MapLayerSource({mapLayerId:this.id})},set:function(f){this._setAndNotifyLayer("source",f)}},{key:"sublayers",set:function(f){this._handleSublayersChange(f,this._get("sublayers"));this._set("sublayers",f)}},{key:"url",get:function(){var f,q;const v=null!=
(f=null==(q=this.layer)?void 0:q.parsedUrl)?f:this._lastParsedUrl;f=this.source;if(!v)return null;this._lastParsedUrl=v;if("map-layer"===(null==f?void 0:f.type))return`${v.path}/${f.mapLayerId}`;f={layer:JSON.stringify({source:this.source})};return`${v.path}/dynamicLayer?${R.objectToQuery(f)}`},set:function(f){f?this._override("url",f):this._clearOverride("url")}},{key:"visible",set:function(f){this._setAndNotifyLayer("visible",f)}}]);return I}(Wa.HandleOwnerMixin(l.MultiOriginJSONMixin(E.IdentifiableMixin(oa))));
t.test={isMapImageLayerOverridePolicy:N=>N===ha||N===$a,isTileImageLayerOverridePolicy:N=>N===Qa};w.__decorate([H.property({readOnly:!0})],t.prototype,"capabilities",void 0);w.__decorate([D.reader("service","capabilities",["layerDefinition.canModifyLayer","layerDefinition.capabilities"])],t.prototype,"readCapabilities",null);w.__decorate([H.property({type:String,value:null,json:{read:{source:"layerDefinition.definitionExpression"},write:{target:"layerDefinition.definitionExpression",overridePolicy:$a}}})],
t.prototype,"definitionExpression",null);w.__decorate([H.property({type:[u],json:{origins:{service:{read:{source:"layerDefinition.fields"}}}}})],t.prototype,"fields",void 0);w.__decorate([H.property({readOnly:!0})],t.prototype,"fieldsIndex",null);w.__decorate([H.property({type:ca,json:{read:{source:"layerDefinition.extent"}}})],t.prototype,"fullExtent",void 0);w.__decorate([H.property({type:String})],t.prototype,"globalIdField",void 0);w.__decorate([D.reader("service","globalIdField",["layerDefinition.globalIdField",
"layerDefinition.fields"])],t.prototype,"readGlobalIdFieldFromService",null);w.__decorate([H.property({type:J.Integer,json:{write:{ignoreOrigin:!0}}})],t.prototype,"id",null);w.__decorate([H.property({value:null,type:[F],json:{read:{source:"layerDefinition.drawingInfo.labelingInfo"},write:{target:"layerDefinition.drawingInfo.labelingInfo",overridePolicy:ha}}})],t.prototype,"labelingInfo",null);w.__decorate([na.writer("labelingInfo")],t.prototype,"writeLabelingInfo",null);w.__decorate([H.property({type:Boolean,
value:!0,json:{read:{source:"layerDefinition.drawingInfo.showLabels"},write:{target:"layerDefinition.drawingInfo.showLabels",overridePolicy:ha}}})],t.prototype,"labelsVisible",null);w.__decorate([H.property({value:null})],t.prototype,"layer",null);w.__decorate([H.property({type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend",overridePolicy:Fa}}})],t.prototype,"legendEnabled",void 0);w.__decorate([H.property({type:["show","hide","hide-children"],
value:"show",json:{read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],t.prototype,"listMode",null);w.__decorate([H.property({type:Number,value:0,json:{write:{overridePolicy:ha}}})],t.prototype,"minScale",null);w.__decorate([D.reader("minScale",["minScale","layerDefinition.minScale"])],t.prototype,"readMinScale",null);w.__decorate([H.property({type:Number,value:0,json:{write:{overridePolicy:ha}}})],t.prototype,"maxScale",null);w.__decorate([D.reader("maxScale",["maxScale","layerDefinition.maxScale"])],
t.prototype,"readMaxScale",null);w.__decorate([H.property({type:String})],t.prototype,"objectIdField",void 0);w.__decorate([D.reader("service","objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],t.prototype,"readObjectIdFieldFromService",null);w.__decorate([H.property({type:Number,value:1,json:{write:{target:"layerDefinition.drawingInfo.transparency",overridePolicy:ha}}})],t.prototype,"opacity",null);w.__decorate([D.reader("opacity",["layerDefinition.drawingInfo.transparency",
"layerDefinition.transparency"])],t.prototype,"readOpacity",null);w.__decorate([na.writer("opacity")],t.prototype,"writeOpacity",null);w.__decorate([H.property({json:{type:J.Integer,write:{target:"parentLayerId",allowNull:!0,overridePolicy:ha}}})],t.prototype,"parent",void 0);w.__decorate([na.writer("parent")],t.prototype,"writeParent",null);w.__decorate([H.property({type:Boolean,value:!0,json:{read:{source:"disablePopup",reader(N,I){return!I.disablePopup}},write:{target:"disablePopup",overridePolicy:Fa,
writer(N,I,C){I[C]=!N}}}})],t.prototype,"popupEnabled",void 0);w.__decorate([H.property({type:Z,json:{read:{source:"popupInfo"},write:{target:"popupInfo",overridePolicy:Fa}}})],t.prototype,"popupTemplate",void 0);w.__decorate([H.property({readOnly:!0})],t.prototype,"defaultPopupTemplate",null);w.__decorate([H.property({types:d.rendererTypes,value:null,json:{name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:ha},origins:{"web-scene":{types:d.webSceneRendererTypes,name:"layerDefinition.drawingInfo.renderer",
write:{overridePolicy:ha}}}}})],t.prototype,"renderer",null);w.__decorate([H.property({types:{key:"type",base:null,typeMap:{"data-layer":fa.DataLayerSource,"map-layer":S.MapLayerSource}},cast(N){if(N){if("mapLayerId"in N)return J.ensureClass(S.MapLayerSource,N);if("dataSource"in N)return J.ensureClass(fa.DataLayerSource,N)}return N},json:{name:"layerDefinition.source",write:{overridePolicy:ha}}})],t.prototype,"source",null);w.__decorate([H.property()],t.prototype,"sourceJSON",void 0);w.__decorate([H.property({value:null,
json:{type:[J.Integer],write:{target:"subLayerIds",allowNull:!0,overridePolicy:ha}}})],t.prototype,"sublayers",null);w.__decorate([X.cast("sublayers")],t.prototype,"castSublayers",null);w.__decorate([na.writer("sublayers")],t.prototype,"writeSublayers",null);w.__decorate([H.property({type:String,json:{read:{source:"name"},write:{target:"name",allowNull:!0,overridePolicy:Fa}}})],t.prototype,"title",void 0);w.__decorate([H.property({type:String})],t.prototype,"typeIdField",void 0);w.__decorate([D.reader("typeIdField",
["layerDefinition.typeIdField"])],t.prototype,"readTypeIdField",null);w.__decorate([H.property({type:[L],json:{origins:{service:{read:{source:"layerDefinition.types"}}}}})],t.prototype,"types",void 0);w.__decorate([H.property({type:String,json:{read:{source:"layerUrl"},write:{target:"layerUrl",overridePolicy:Qa}}})],t.prototype,"url",null);w.__decorate([H.property({type:Boolean,value:!0,json:{read:{source:"defaultVisibility"},write:{target:"defaultVisibility",overridePolicy:ha}}})],t.prototype,"visible",
null);w.__decorate([na.writer("visible")],t.prototype,"writeVisible",null);return t=Ra=w.__decorate([Q.subclass("esri.layers.support.Sublayer")],t)})},"esri/support/actions/ActionSlider":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ./ActionBase".split(" "),
function(aa,A,w,t,T,Y,J,r,H,X,ea,D){var Q;w=Q=function(na){function ba(R){R=na.call(this,R)||this;R.displayValueEnabled=!1;R.max=1;R.min=0;R.step=.1;R.type="slider";R.value=null;return R}aa._inheritsLoose(ba,na);ba.prototype.clone=function(){return new Q({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,displayValueEnabled:this.displayValueEnabled,max:this.max,min:this.min,step:this.step,value:this.value})};
return ba}(D);A.__decorate([Y.property()],w.prototype,"displayValueEnabled",void 0);A.__decorate([Y.property()],w.prototype,"max",void 0);A.__decorate([Y.property()],w.prototype,"min",void 0);A.__decorate([Y.property()],w.prototype,"step",void 0);A.__decorate([Y.property()],w.prototype,"value",void 0);return w=Q=A.__decorate([r.subclass("esri.support.Action.ActionSlider")],w)})},"esri/widgets/LayerList/ListItemPanel":function(){define("require ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/Identifiable ../../core/Handles ../../core/watchUtils ../../chunks/index ../support/widget ../Widget".split(" "),
function(aa,A,w,t,T,Y,J,r,H,X,ea,D,Q,na,ba,R,ta,Da){t=function(ka){function ca(g,y){g=ka.call(this,g,y)||this;g._legend=null;g._handles=new na;g.content=null;g.image=null;g.listItem=null;g.open=!1;g.visible=!0;return g}A._inheritsLoose(ca,ka);var U=ca.prototype;U.initialize=function(){this.own([ba.init(this,"content",g=>this._createLegend(g))])};U.destroy=function(){const {_legend:g}=this;g&&g.destroy();this._legend=null};U.render=function(){return R.jsx("div",{class:"esri-layer-list-panel"},this._renderContents())};
U._renderContent=function(g){const {_legend:y,listItem:E}=this;return g?"legend"===g?E&&E.view&&E.layer&&y?R.jsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--legend"),key:y},y.render()):null:"string"===typeof g?R.jsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--string"),key:g,innerHTML:g}):ta.isWidget(g)?R.jsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--widget"),
key:g},g.render()):g instanceof HTMLElement?R.jsx("div",{class:this.classes("esri-layer-list-panel__content","esri-layer-list-panel__content--html-element"),key:g,bind:g,afterCreate:this._attachToNode}):null:null};U._renderContents=function(){const {content:g}=this;return Array.isArray(g)?g.map(y=>this._renderContent(y)):this._renderContent(g)};U._getLegendOptions=function(g){if(g){var {layer:y,view:E}=g;if(y&&E)return{view:E,layerInfos:[{layer:y,title:""}]}}};U._createLegend=function(g){this._hasLegend(g)&&
!this._legend&&(new Promise(function(y,E){aa(["../Legend"],function(Z){y(Object.freeze({__proto__:null,"default":Z}))},E)})).then(({default:y})=>{const {_handles:E,listItem:Z}=this,la=new y(this._getLegendOptions(Z));this._legend=la;this.notifyChange("className");this.notifyChange("title");y=ba.init(this,["listItem.view","listItem.layer"],()=>this._updateLegend(la));E.add(y,"legends");this.scheduleRender()})};U._hasLegend=function(g){return"legend"===g?!0:Array.isArray(g)?g.some(y=>"legend"===y):
!1};U._attachToNode=function(g){g.appendChild(this)};U._updateLegend=function(g){const {listItem:y}=this;if(y){var {layer:E,view:Z}=y;g.view=Z;g.layerInfos=[{layer:E,title:null}];this.scheduleRender()}};U._getWidget=function(g){return"legend"===g?this._legend:ta.isWidget(g)?g:null};U._getFirstWidget=function(){const {content:g}=this;if(Array.isArray(g)){let y=null;g.some(E=>{(E=this._getWidget(E))&&(y=E);return!!E});return y}return this._getWidget(g)};A._createClass(ca,[{key:"className",get:function(){const {image:g}=
this,y=this._getFirstWidget();return this._get("className")||!g&&y?y.iconClass:""},set:function(g){void 0===g?this._clearOverride("className"):this._override("className",g)}},{key:"title",get:function(){const g=this._getFirstWidget();return this._get("title")||g?g.label:""},set:function(g){void 0===g?this._clearOverride("title"):this._override("title",g)}}]);return ca}(Q.IdentifiableMixin(Da));w.__decorate([J.property()],t.prototype,"className",null);w.__decorate([J.property()],t.prototype,"content",
void 0);w.__decorate([J.property()],t.prototype,"image",void 0);w.__decorate([J.property()],t.prototype,"listItem",void 0);w.__decorate([J.property()],t.prototype,"title",null);w.__decorate([J.property()],t.prototype,"open",void 0);w.__decorate([J.property()],t.prototype,"visible",void 0);return t=w.__decorate([H.subclass("esri.widgets.LayerList.ListItemPanel")],t)})},"esri/chunks/sortable.esm":function(){define(["exports"],function(aa){function A(a){A="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?
function(b){return typeof b}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b};return A(a)}function w(){w=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],e;for(e in c)Object.prototype.hasOwnProperty.call(c,e)&&(a[e]=c[e])}return a};return w.apply(this,arguments)}function t(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{},e=Object.keys(c);"function"===typeof Object.getOwnPropertySymbols&&
(e=e.concat(Object.getOwnPropertySymbols(c).filter(function(h){return Object.getOwnPropertyDescriptor(c,h).enumerable})));e.forEach(function(h){var m=c[h];h in a?Object.defineProperty(a,h,{value:m,enumerable:!0,configurable:!0,writable:!0}):a[h]=m})}return a}function T(a,b){if(null==a)return{};if(null==a)var c={};else{c={};var e=Object.keys(a),h;for(h=0;h<e.length;h++){var m=e[h];0<=b.indexOf(m)||(c[m]=a[m])}}if(Object.getOwnPropertySymbols)for(h=Object.getOwnPropertySymbols(a),m=0;m<h.length;m++)e=
h[m],0<=b.indexOf(e)||Object.prototype.propertyIsEnumerable.call(a,e)&&(c[e]=a[e]);return c}function Y(a){if("undefined"!==typeof window&&window.navigator)return!!navigator.userAgent.match(a)}function J(a,b,c){a.addEventListener(b,c,!L&&La)}function r(a,b,c){a.removeEventListener(b,c,!L&&La)}function H(a,b){if(b){"\x3e"===b[0]&&(b=b.substring(1));if(a)try{if(a.matches)return a.matches(b);if(a.msMatchesSelector)return a.msMatchesSelector(b);if(a.webkitMatchesSelector)return a.webkitMatchesSelector(b)}catch(c){}return!1}}
function X(a,b,c,e){if(a){c=c||document;do{if(null!=b&&("\x3e"===b[0]?a.parentNode===c&&H(a,b):H(a,b))||e&&a===c)return a;if(a===c)break}while(a=a.host&&a!==document&&a.host.nodeType?a.host:a.parentNode)}return null}function ea(a,b,c){if(a&&b)if(a.classList)a.classList[c?"add":"remove"](b);else{var e=(" "+a.className+" ").replace($a," ").replace(" "+b+" "," ");a.className=(e+(c?" "+b:"")).replace($a," ")}}function D(a,b,c){var e=a&&a.style;if(e){if(void 0===c)return document.defaultView&&document.defaultView.getComputedStyle?
c=document.defaultView.getComputedStyle(a,""):a.currentStyle&&(c=a.currentStyle),void 0===b?c:c[b];b in e||-1!==b.indexOf("webkit")||(b="-webkit-"+b);e[b]=c+("string"===typeof c?"":"px")}}function Q(a,b){var c="";if("string"===typeof a)c=a;else{do{var e=D(a,"transform");e&&"none"!==e&&(c=e+" "+c)}while(!b&&(a=a.parentNode))}return(a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix)&&new a(c)}function na(a,b,c){if(a){a=a.getElementsByTagName(b);b=0;var e=a.length;if(c)for(;b<
e;b++)c(a[b],b);return a}return[]}function ba(){var a=document.scrollingElement;return a?a:document.documentElement}function R(a,b,c,e,h){if(a.getBoundingClientRect||a===window){if(a!==window&&a.parentNode&&a!==ba()){var m=a.getBoundingClientRect();var p=m.top;var B=m.left;var G=m.bottom;var M=m.right;var P=m.height;var W=m.width}else B=p=0,G=window.innerHeight,M=window.innerWidth,P=window.innerHeight,W=window.innerWidth;if((b||c)&&a!==window&&(h=h||a.parentNode,!L)){do if(h&&h.getBoundingClientRect&&
("none"!==D(h,"transform")||c&&"static"!==D(h,"position"))){G=h.getBoundingClientRect();p-=G.top+parseInt(D(h,"border-top-width"));B-=G.left+parseInt(D(h,"border-left-width"));G=p+m.height;M=B+m.width;break}while(h=h.parentNode)}e&&a!==window&&(e=(a=Q(h||a))&&a.a,h=a&&a.d,a&&(p/=h,B/=e,W/=e,P/=h,G=p+P,M=B+W));return{top:p,left:B,bottom:G,right:M,width:W,height:P}}}function ta(a,b,c){var e=y(a,!0);for(a=R(a)[b];e;){b=R(e)[c];var h=void 0;h="top"===c||"left"===c?a>=b:a<=b;if(!h)return e;if(e===ba())break;
e=y(e,!1)}return!1}function Da(a,b,c){for(var e=0,h=0,m=a.children;h<m.length;){if("none"!==m[h].style.display&&m[h]!==n.ghost&&m[h]!==n.dragged&&X(m[h],c.draggable,a,!1)){if(e===b)return m[h];e++}h++}return null}function ka(a,b){for(a=a.lastElementChild;a&&(a===n.ghost||"none"===D(a,"display")||b&&!H(a,b));)a=a.previousElementSibling;return a||null}function ca(a,b){var c=0;if(!a||!a.parentNode)return-1;for(;a=a.previousElementSibling;)"TEMPLATE"===a.nodeName.toUpperCase()||a===n.clone||b&&!H(a,b)||
c++;return c}function U(a){var b=0,c=0,e=ba();if(a){do{var h=Q(a),m=h.d;b+=a.scrollLeft*h.a;c+=a.scrollTop*m}while(a!==e&&(a=a.parentNode))}return[b,c]}function g(a,b){for(var c in a)if(a.hasOwnProperty(c))for(var e in b)if(b.hasOwnProperty(e)&&b[e]===a[c][e])return Number(c);return-1}function y(a,b){if(!a||!a.getBoundingClientRect)return ba();var c=!1;do if(a.clientWidth<a.scrollWidth||a.clientHeight<a.scrollHeight){var e=D(a);if(a.clientWidth<a.scrollWidth&&("auto"==e.overflowX||"scroll"==e.overflowX)||
a.clientHeight<a.scrollHeight&&("auto"==e.overflowY||"scroll"==e.overflowY)){if(!a.getBoundingClientRect||a===document.body)break;if(c||b)return a;c=!0}}while(a=a.parentNode);return ba()}function E(a,b){return Math.round(a.top)===Math.round(b.top)&&Math.round(a.left)===Math.round(b.left)&&Math.round(a.height)===Math.round(b.height)&&Math.round(a.width)===Math.round(b.width)}function Z(a,b){return function(){if(!Qa){var c=arguments;1===c.length?a.call(this,c[0]):a.apply(this,c);Qa=setTimeout(function(){Qa=
void 0},b)}}}function la(a,b,c){a.scrollLeft+=b;a.scrollTop+=c}function oa(a){var b=window.Polymer,c=window.jQuery||window.Zepto;return b&&b.dom?b.dom(a).cloneNode(!0):c?c(a).clone(!0)[0]:a.cloneNode(!0)}function wa(){var a=[],b;return{captureAnimationState:function(){a=[];this.options.animation&&[].slice.call(this.el.children).forEach(function(c){if("none"!==D(c,"display")&&c!==n.ghost){a.push({target:c,rect:R(c)});var e=t({},a[a.length-1].rect);if(c.thisAnimationDuration){var h=Q(c,!0);h&&(e.top-=
h.f,e.left-=h.e)}c.fromRect=e}})},addAnimationState:function(c){a.push(c)},removeAnimationState:function(c){a.splice(g(a,{target:c}),1)},animateAll:function(c){var e=this;if(this.options.animation){var h=!1,m=0;a.forEach(function(p){var B=0,G=p.target,M=G.fromRect,P=R(G),W=G.prevFromRect,va=G.prevToRect;p=p.rect;var ra=Q(G,!0);ra&&(P.top-=ra.f,P.left-=ra.e);G.toRect=P;G.thisAnimationDuration&&E(W,P)&&!E(M,P)&&(p.top-P.top)/(p.left-P.left)===(M.top-P.top)/(M.left-P.left)&&(B=Math.sqrt(Math.pow(W.top-
p.top,2)+Math.pow(W.left-p.left,2))/Math.sqrt(Math.pow(W.top-va.top,2)+Math.pow(W.left-va.left,2))*e.options.animation);E(P,M)||(G.prevFromRect=M,G.prevToRect=P,B||(B=e.options.animation),e.animate(G,p,P,B));B&&(h=!0,m=Math.max(m,B),clearTimeout(G.animationResetTimer),G.animationResetTimer=setTimeout(function(){G.animationTime=0;G.prevFromRect=null;G.fromRect=null;G.prevToRect=null;G.thisAnimationDuration=null},B),G.thisAnimationDuration=B)});clearTimeout(b);h?b=setTimeout(function(){"function"===
typeof c&&c()},m):"function"===typeof c&&c();a=[]}else clearTimeout(b),"function"===typeof c&&c()},animate:function(c,e,h,m){if(m){D(c,"transition","");D(c,"transform","");var p=Q(this.el),B=(e.left-h.left)/(p&&p.a||1);e=(e.top-h.top)/(p&&p.d||1);c.animatingX=!!B;c.animatingY=!!e;D(c,"transform","translate3d("+B+"px,"+e+"px,0)");this.forRepaintDummy=c.offsetWidth;D(c,"transition","transform "+m+"ms"+(this.options.easing?" "+this.options.easing:""));D(c,"transform","translate3d(0,0,0)");"number"===
typeof c.animated&&clearTimeout(c.animated);c.animated=setTimeout(function(){D(c,"transition","");D(c,"transform","");c.animated=!1;c.animatingX=!1;c.animatingY=!1},m)}}}}function V(a){var b=t({putSortable:xa,cloneEl:v,targetEl:x,rootEl:C,oldIndex:da,oldDraggableIndex:Ga,newIndex:ma,newDraggableIndex:Sa},a);a=b.sortable;var c=b.rootEl,e=b.name,h=b.targetEl,m=b.cloneEl,p=b.toEl,B=b.fromEl,G=b.oldIndex,M=b.newIndex,P=b.oldDraggableIndex,W=b.newDraggableIndex,va=b.originalEvent,ra=b.putSortable,Ba=b.extraEventProperties;
if(a=a||c&&c[ha]){var ia=a.options,Ea="on"+e.charAt(0).toUpperCase()+e.substr(1);!window.CustomEvent||L||S?(b=document.createEvent("Event"),b.initEvent(e,!0,!0)):b=new CustomEvent(e,{bubbles:!0,cancelable:!0});b.to=p||c;b.from=B||c;b.item=h||c;b.clone=m;b.oldIndex=G;b.newIndex=M;b.oldDraggableIndex=P;b.newDraggableIndex=W;b.originalEvent=va;b.pullMode=ra?ra.lastPutMode:void 0;e=t({},Ba,Ma.getEventProperties(e,a));for(var Ia in e)b[Ia]=e[Ia];c&&c.dispatchEvent(b);ia[Ea]&&ia[Ea].call(a,b)}}function n(a,
b){if(!a||!a.nodeType||1!==a.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(a));this.el=a;this.options=b=w({},b);a[ha]=this;var c={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(a.nodeName)?"\x3eli":"\x3e*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return yb(a,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",
filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(m,p){m.setData("Text",p.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==n.supportPointer&&"PointerEvent"in window&&!ua,emptyInsertThreshold:5};Ma.initializePlugins(this,
a,c);for(var e in c)e in b||(b[e]=c[e]);zb(b);for(var h in this)"_"===h.charAt(0)&&"function"===typeof this[h]&&(this[h]=this[h].bind(this));if(this.nativeDraggable=b.forceFallback?!1:Ib)this.options.touchStartThreshold=1;b.supportPointer?J(a,"pointerdown",this._onTapStart):(J(a,"mousedown",this._onTapStart),J(a,"touchstart",this._onTapStart));this.nativeDraggable&&(J(a,"dragover",this),J(a,"dragenter",this));gb.push(this.el);b.store&&b.store.get&&this.sort(b.store.get(this)||[]);w(this,wa())}function qa(a,
b,c,e,h,m,p,B){var G=a[ha],M=G.options.onMove,P;if(!window.CustomEvent||L||S){var W=document.createEvent("Event");W.initEvent("move",!0,!0)}else W=new CustomEvent("move",{bubbles:!0,cancelable:!0});W.to=b;W.from=a;W.dragged=c;W.draggedRect=e;W.related=h||b;W.relatedRect=m||R(b);W.willInsertAfter=B;W.originalEvent=p;a.dispatchEvent(W);M&&(P=M.call(G,W,p));return P}function pa(a){a.draggable=!1}function Pa(){pb=!1}function Ka(a,b,c){c=R(ka(c.el,c.options.draggable));return b?a.clientX>c.right+10||a.clientX<=
c.right&&a.clientY>c.bottom&&a.clientX>=c.left:a.clientX>c.right&&a.clientY>c.top||a.clientX<=c.right&&a.clientY>c.bottom+10}function K(a,b,c,e,h,m,p,B){a=e?a.clientY:a.clientX;var G=e?c.height:c.width,M=e?c.top:c.left;c=e?c.bottom:c.right;e=!1;if(!p)if(B&&hb<G*h)if(!ab&&(1===bb?a>M+G*m/2:a<c-G*m/2)&&(ab=!0),ab)e=!0;else{if(1===bb?a<M+hb:a>c-hb)return-bb}else if(a>M+G*(1-h)/2&&a<c-G*(1-h)/2)return b=ca(x)<ca(b)?1:-1,b;if(e||p)if(a<M+G*m/2||a>c-G*m/2)return a>M+G/2?1:-1;return 0}function d(a){a=a.tagName+
a.className+a.src+a.href+a.textContent;for(var b=a.length,c=0;b--;)c+=a.charCodeAt(b);return c.toString(36)}function k(a){ib.length=0;a=a.getElementsByTagName("input");for(var b=a.length;b--;){var c=a[b];c.checked&&ib.push(c)}}function l(a){return setTimeout(a,0)}function u(){sa.forEach(function(a){clearInterval(a.pid)});sa=[]}function z(){}function F(){}var L=Y(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),S=Y(/Edge/i),fa=Y(/firefox/i),ua=Y(/safari/i)&&!Y(/chrome/i)&&!Y(/android/i),za=
Y(/iP(ad|od|hone)/i),Wa=Y(/chrome/i)&&Y(/android/i),La={capture:!1,passive:!1},$a=/\s+/g,Qa,ha="Sortable"+(new Date).getTime(),Fa=[],Ra={initializeByDefault:!0},Ma={mount:function(a){for(var b in Ra)!Ra.hasOwnProperty(b)||b in a||(a[b]=Ra[b]);Fa.forEach(function(c){if(c.pluginName===a.pluginName)throw"Sortable: Cannot mount plugin ".concat(a.pluginName," more than once");});Fa.push(a)},pluginEvent:function(a,b,c){var e=this;this.eventCanceled=!1;c.cancel=function(){e.eventCanceled=!0};var h=a+"Global";
Fa.forEach(function(m){if(b[m.pluginName]){if(b[m.pluginName][h])b[m.pluginName][h](t({sortable:b},c));if(b.options[m.pluginName]&&b[m.pluginName][a])b[m.pluginName][a](t({sortable:b},c))}})},initializePlugins:function(a,b,c,e){Fa.forEach(function(m){var p=m.pluginName;if(a.options[p]||m.initializeByDefault)m=new m(a,b,a.options),m.sortable=a,m.options=a.options,a[p]=m,w(c,m.defaults)});for(var h in a.options)a.options.hasOwnProperty(h)&&(e=this.modifyOption(a,h,a.options[h]),"undefined"!==typeof e&&
(a.options[h]=e))},getEventProperties:function(a,b){var c={};Fa.forEach(function(e){"function"===typeof e.eventProperties&&w(c,e.eventProperties.call(b[e.pluginName],a))});return c},modifyOption:function(a,b,c){var e;Fa.forEach(function(h){a[h.pluginName]&&h.optionListeners&&"function"===typeof h.optionListeners[b]&&(e=h.optionListeners[b].call(a[h.pluginName],c))});return e}},Aa=function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},e=c.evt;c=T(c,["evt"]);Ma.pluginEvent.bind(n)(a,
b,t({dragEl:x,parentEl:N,ghostEl:I,rootEl:C,nextEl:f,lastDownEl:q,cloneEl:v,cloneHidden:O,dragStarted:cb,putSortable:xa,activeSortable:n.active,originalEvent:e,oldIndex:da,oldDraggableIndex:Ga,newIndex:ma,newDraggableIndex:Sa,hideGhostForTarget:Ab,unhideGhostForTarget:Bb,cloneNowHidden:function(){O=!0},cloneNowShown:function(){O=!1},dispatchSortableEvent:function(h){V({sortable:b,name:h,originalEvent:e})}},c))},x,N,I,C,f,q,v,O,da,ma,Ga,Sa,jb,xa,Xa=!1,kb=!1,gb=[],Ua,Ha,qb,rb,Cb,Db,cb,Ya,bb,ab=!1,lb=
!1,hb,Ca,sb=[],pb=!1,ib=[],mb="undefined"!==typeof document,Eb=S||L?"cssFloat":"float",Ib=mb&&!Wa&&!za&&"draggable"in document.createElement("div"),Fb=function(){if(mb){if(L)return!1;var a=document.createElement("x");a.style.cssText="pointer-events:auto";return"auto"===a.style.pointerEvents}}(),yb=function(a,b){var c=D(a),e=parseInt(c.width)-parseInt(c.paddingLeft)-parseInt(c.paddingRight)-parseInt(c.borderLeftWidth)-parseInt(c.borderRightWidth),h=Da(a,0,b);a=Da(a,1,b);var m=h&&D(h);b=a&&D(a);var p=
m&&parseInt(m.marginLeft)+parseInt(m.marginRight)+R(h).width,B=b&&parseInt(b.marginLeft)+parseInt(b.marginRight)+R(a).width;return"flex"===c.display?"column"===c.flexDirection||"column-reverse"===c.flexDirection?"vertical":"horizontal":"grid"===c.display?1>=c.gridTemplateColumns.split(" ").length?"vertical":"horizontal":h&&m["float"]&&"none"!==m["float"]?(c="left"===m["float"]?"left":"right",!a||"both"!==b.clear&&b.clear!==c?"horizontal":"vertical"):h&&("block"===m.display||"flex"===m.display||"table"===
m.display||"grid"===m.display||p>=e&&"none"===c[Eb]||a&&"none"===c[Eb]&&p+B>e)?"vertical":"horizontal"},Jb=function(a,b,c){var e=c?a.left:a.top,h=c?a.right:a.bottom;a=c?a.width:a.height;var m=c?b.left:b.top,p=c?b.right:b.bottom;b=c?b.width:b.height;return e===m||h===p||e+a/2===m+b/2},Kb=function(a,b){var c;gb.some(function(e){if(!ka(e)){var h=R(e),m=e[ha].options.emptyInsertThreshold,p=a>=h.left-m&&a<=h.right+m;h=b>=h.top-m&&b<=h.bottom+m;if(m&&p&&h)return c=e}});return c},zb=function(a){function b(h,
m){return function(p,B,G,M){var P=p.options.group.name&&B.options.group.name&&p.options.group.name===B.options.group.name;if(null==h&&(m||P))return!0;if(null==h||!1===h)return!1;if(m&&"clone"===h)return h;if("function"===typeof h)return b(h(p,B,G,M),m)(p,B,G,M);p=(m?p:B).options.group.name;return!0===h||"string"===typeof h&&h===p||h.join&&-1<h.indexOf(p)}}var c={},e=a.group;e&&"object"==A(e)||(e={name:e});c.name=e.name;c.checkPull=b(e.pull,!0);c.checkPut=b(e.put);c.revertClone=e.revertClone;a.group=
c},Ab=function(){!Fb&&I&&D(I,"display","none")},Bb=function(){!Fb&&I&&D(I,"display","")};mb&&document.addEventListener("click",function(a){if(kb)return a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.stopImmediatePropagation&&a.stopImmediatePropagation(),kb=!1},!0);var Va=function(a){if(x){a=a.touches?a.touches[0]:a;var b=Kb(a.clientX,a.clientY);if(b){var c={},e;for(e in a)a.hasOwnProperty(e)&&(c[e]=a[e]);c.target=c.rootEl=b;c.preventDefault=void 0;c.stopPropagation=void 0;b[ha]._onDragOver(c)}}},
Lb=function(a){x&&x.parentNode[ha]._isOutsideThisEl(a.target)};n.prototype={constructor:n,_isOutsideThisEl:function(a){this.el.contains(a)||a===this.el||(Ya=null)},_getDirection:function(a,b){return"function"===typeof this.options.direction?this.options.direction.call(this,a,b,x):this.options.direction},_onTapStart:function(a){if(a.cancelable){var b=this,c=this.el,e=this.options,h=e.preventOnFilter,m=a.type,p=a.touches&&a.touches[0]||a.pointerType&&"touch"===a.pointerType&&a,B=(p||a).target,G=a.target.shadowRoot&&
(a.path&&a.path[0]||a.composedPath&&a.composedPath()[0])||B,M=e.filter;k(c);if(!(x||/mousedown|pointerdown/.test(m)&&0!==a.button||e.disabled||G.isContentEditable||!this.nativeDraggable&&ua&&B&&"SELECT"===B.tagName.toUpperCase()||(B=X(B,e.draggable,c,!1),B&&B.animated||q===B))){da=ca(B);Ga=ca(B,e.draggable);if("function"===typeof M){if(M.call(this,a,B,this)){V({sortable:b,rootEl:G,name:"filter",targetEl:B,toEl:c,fromEl:c});Aa("filter",b,{evt:a});h&&a.cancelable&&a.preventDefault();return}}else if(M&&
(M=M.split(",").some(function(P){if(P=X(G,P.trim(),c,!1))return V({sortable:b,rootEl:P,name:"filter",targetEl:B,fromEl:c,toEl:c}),Aa("filter",b,{evt:a}),!0}))){h&&a.cancelable&&a.preventDefault();return}e.handle&&!X(G,e.handle,c,!1)||this._prepareDragStart(a,p,B)}}},_prepareDragStart:function(a,b,c){var e=this,h=e.el,m=e.options,p=h.ownerDocument;if(c&&!x&&c.parentNode===h){var B=R(c);C=h;x=c;N=x.parentNode;f=x.nextSibling;q=c;jb=m.group;n.dragged=x;Ua={target:x,clientX:(b||a).clientX,clientY:(b||
a).clientY};Cb=Ua.clientX-B.left;Db=Ua.clientY-B.top;this._lastX=(b||a).clientX;this._lastY=(b||a).clientY;x.style["will-change"]="all";c=function(){Aa("delayEnded",e,{evt:a});n.eventCanceled?e._onDrop():(e._disableDelayedDragEvents(),!fa&&e.nativeDraggable&&(x.draggable=!0),e._triggerDragStart(a,b),V({sortable:e,name:"choose",originalEvent:a}),ea(x,m.chosenClass,!0))};m.ignore.split(",").forEach(function(G){na(x,G.trim(),pa)});J(p,"dragover",Va);J(p,"mousemove",Va);J(p,"touchmove",Va);J(p,"mouseup",
e._onDrop);J(p,"touchend",e._onDrop);J(p,"touchcancel",e._onDrop);fa&&this.nativeDraggable&&(this.options.touchStartThreshold=4,x.draggable=!0);Aa("delayStart",this,{evt:a});!m.delay||m.delayOnTouchOnly&&!b||this.nativeDraggable&&(S||L)?c():n.eventCanceled?this._onDrop():(J(p,"mouseup",e._disableDelayedDrag),J(p,"touchend",e._disableDelayedDrag),J(p,"touchcancel",e._disableDelayedDrag),J(p,"mousemove",e._delayedDragTouchMoveHandler),J(p,"touchmove",e._delayedDragTouchMoveHandler),m.supportPointer&&
J(p,"pointermove",e._delayedDragTouchMoveHandler),e._dragStartTimer=setTimeout(c,m.delay))}},_delayedDragTouchMoveHandler:function(a){a=a.touches?a.touches[0]:a;Math.max(Math.abs(a.clientX-this._lastX),Math.abs(a.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){x&&pa(x);clearTimeout(this._dragStartTimer);this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var a=
this.el.ownerDocument;r(a,"mouseup",this._disableDelayedDrag);r(a,"touchend",this._disableDelayedDrag);r(a,"touchcancel",this._disableDelayedDrag);r(a,"mousemove",this._delayedDragTouchMoveHandler);r(a,"touchmove",this._delayedDragTouchMoveHandler);r(a,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(a,b){b=b||"touch"==a.pointerType&&a;!this.nativeDraggable||b?this.options.supportPointer?J(document,"pointermove",this._onTouchMove):b?J(document,"touchmove",this._onTouchMove):
J(document,"mousemove",this._onTouchMove):(J(x,"dragend",this),J(C,"dragstart",this._onDragStart));try{document.selection?l(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(c){}},_dragStarted:function(a,b){Xa=!1;if(C&&x){Aa("dragStarted",this,{evt:b});this.nativeDraggable&&J(document,"dragover",Lb);var c=this.options;!a&&ea(x,c.dragClass,!1);ea(x,c.ghostClass,!0);n.active=this;a&&this._appendGhost();V({sortable:this,name:"start",originalEvent:b})}else this._nulling()},
_emulateDragOver:function(){if(Ha){this._lastX=Ha.clientX;this._lastY=Ha.clientY;Ab();for(var a=document.elementFromPoint(Ha.clientX,Ha.clientY),b=a;a&&a.shadowRoot;){a=a.shadowRoot.elementFromPoint(Ha.clientX,Ha.clientY);if(a===b)break;b=a}x.parentNode[ha]._isOutsideThisEl(a);if(b){do{if(b[ha]){var c=void 0;if((c=b[ha]._onDragOver({clientX:Ha.clientX,clientY:Ha.clientY,target:a,rootEl:b}))&&!this.options.dragoverBubble)break}a=b}while(b=b.parentNode)}Bb()}},_onTouchMove:function(a){if(Ua){var b=
this.options,c=b.fallbackTolerance,e=b.fallbackOffset;b=a.touches?a.touches[0]:a;var h=I&&Q(I,!0),m=I&&h&&h.a,p=I&&h&&h.d,B=za&&Ca&&U(Ca);m=(b.clientX-Ua.clientX+e.x)/(m||1)+(B?B[0]-sb[0]:0)/(m||1);e=(b.clientY-Ua.clientY+e.y)/(p||1)+(B?B[1]-sb[1]:0)/(p||1);if(!n.active&&!Xa){if(c&&Math.max(Math.abs(b.clientX-this._lastX),Math.abs(b.clientY-this._lastY))<c)return;this._onDragStart(a,!0)}I&&(h?(h.e+=m-(qb||0),h.f+=e-(rb||0)):h={a:1,b:0,c:0,d:1,e:m,f:e},c="matrix(".concat(h.a,",").concat(h.b,",").concat(h.c,
",").concat(h.d,",").concat(h.e,",").concat(h.f,")"),D(I,"webkitTransform",c),D(I,"mozTransform",c),D(I,"msTransform",c),D(I,"transform",c),qb=m,rb=e,Ha=b);a.cancelable&&a.preventDefault()}},_appendGhost:function(){if(!I){var a=this.options.fallbackOnBody?document.body:C,b=R(x,!0,za,!0,a),c=this.options;if(za){for(Ca=a;"static"===D(Ca,"position")&&"none"===D(Ca,"transform")&&Ca!==document;)Ca=Ca.parentNode;Ca!==document.body&&Ca!==document.documentElement?(Ca===document&&(Ca=ba()),b.top+=Ca.scrollTop,
b.left+=Ca.scrollLeft):Ca=ba();sb=U(Ca)}I=x.cloneNode(!0);ea(I,c.ghostClass,!1);ea(I,c.fallbackClass,!0);ea(I,c.dragClass,!0);D(I,"transition","");D(I,"transform","");D(I,"box-sizing","border-box");D(I,"margin",0);D(I,"top",b.top);D(I,"left",b.left);D(I,"width",b.width);D(I,"height",b.height);D(I,"opacity","0.8");D(I,"position",za?"absolute":"fixed");D(I,"zIndex","100000");D(I,"pointerEvents","none");n.ghost=I;a.appendChild(I);D(I,"transform-origin",Cb/parseInt(I.style.width)*100+"% "+Db/parseInt(I.style.height)*
100+"%")}},_onDragStart:function(a,b){var c=this,e=a.dataTransfer,h=c.options;Aa("dragStart",this,{evt:a});n.eventCanceled?this._onDrop():(Aa("setupClone",this),n.eventCanceled||(v=oa(x),v.draggable=!1,v.style["will-change"]="",this._hideClone(),ea(v,this.options.chosenClass,!1),n.clone=v),c.cloneId=l(function(){Aa("clone",c);n.eventCanceled||(c.options.removeCloneOnHide||C.insertBefore(v,x),c._hideClone(),V({sortable:c,name:"clone"}))}),!b&&ea(x,h.dragClass,!0),b?(kb=!0,c._loopId=setInterval(c._emulateDragOver,
50)):(r(document,"mouseup",c._onDrop),r(document,"touchend",c._onDrop),r(document,"touchcancel",c._onDrop),e&&(e.effectAllowed="move",h.setData&&h.setData.call(c,e,x)),J(document,"drop",c),D(x,"transform","translateZ(0)")),Xa=!0,c._dragStartId=l(c._dragStarted.bind(c,b,a)),J(document,"selectstart",c),cb=!0,ua&&D(document.body,"user-select","none"))},_onDragOver:function(a){function b(Ta,nb){Aa(Ta,ia,t({evt:a,isOwner:va,axis:Ia?"vertical":"horizontal",revert:G,dragRect:Na,targetRect:B,canSort:ra,fromSortable:Ba,
target:p,completed:e,onMove:function(Gb,Mb){return qa(C,m,x,Na,Gb,R(Gb),a,Mb)},changed:h},nb))}function c(){b("dragOverAnimationCapture");ia.captureAnimationState();ia!==Ba&&Ba.captureAnimationState()}function e(Ta){b("dragOverCompleted",{insertion:Ta});Ta&&(va?W._hideClone():W._showClone(ia),ia!==Ba&&(ea(x,xa?xa.options.ghostClass:W.options.ghostClass,!1),ea(x,M.ghostClass,!0)),xa!==ia&&ia!==n.active?xa=ia:ia===n.active&&xa&&(xa=null),Ba===ia&&(ia._ignoreWhileAnimating=p),ia.animateAll(function(){b("dragOverAnimationComplete");
ia._ignoreWhileAnimating=null}),ia!==Ba&&(Ba.animateAll(),Ba._ignoreWhileAnimating=null));if(p===x&&!x.animated||p===m&&!p.animated)Ya=null;M.dragoverBubble||a.rootEl||p===document||(x.parentNode[ha]._isOutsideThisEl(a.target),!Ta&&Va(a));!M.dragoverBubble&&a.stopPropagation&&a.stopPropagation();return Ea=!0}function h(){ma=ca(x);Sa=ca(x,M.draggable);V({sortable:ia,name:"change",toEl:m,newIndex:ma,newDraggableIndex:Sa,originalEvent:a})}var m=this.el,p=a.target,B,G,M=this.options,P=M.group,W=n.active,
va=jb===P,ra=M.sort,Ba=xa||W,ia=this,Ea=!1;if(!pb){void 0!==a.preventDefault&&a.cancelable&&a.preventDefault();p=X(p,M.draggable,m,!0);b("dragOver");if(n.eventCanceled)return Ea;if(x.contains(a.target)||p.animated&&p.animatingX&&p.animatingY||ia._ignoreWhileAnimating===p)return e(!1);kb=!1;if(W&&!M.disabled&&(va?ra||(G=!C.contains(x)):xa===this||(this.lastPutMode=jb.checkPull(this,W,x,a))&&P.checkPut(this,W,x,a))){var Ia="vertical"===this._getDirection(a,p);var Na=R(x);b("dragOverValid");if(n.eventCanceled)return Ea;
if(G)return N=C,c(),this._hideClone(),b("revert"),n.eventCanceled||(f?C.insertBefore(x,f):C.appendChild(x)),e(!0);P=ka(m,M.draggable);if(!P||Ka(a,Ia,this)&&!P.animated){if(P===x)return e(!1);P&&m===a.target&&(p=P);p&&(B=R(p));if(!1!==qa(C,m,x,Na,p,B,a,!!p))return c(),m.appendChild(x),N=m,h(),e(!0)}else if(p.parentNode===m){B=R(p);var ya=0;ya=x.parentNode!==m;var ja=!Jb(x.animated&&x.toRect||Na,p.animated&&p.toRect||B,Ia);P=Ia?"top":"left";var Oa=ta(p,"top","top")||ta(x,"top","top"),db=Oa?Oa.scrollTop:
void 0;if(Ya!==p){var eb=B[P];ab=!1;lb=!ja&&M.invertSwap||ya}ya=K(a,p,B,Ia,ja?1:M.swapThreshold,null==M.invertedSwapThreshold?M.swapThreshold:M.invertedSwapThreshold,lb,Ya===p);if(0!==ya){ja=ca(x);do{ja-=ya;var Ja=N.children[ja]}while(Ja&&("none"===D(Ja,"display")||Ja===I))}if(0===ya||Ja===p)return e(!1);Ya=p;bb=ya;Ja=p.nextElementSibling;ja=!1;ja=1===ya;ya=qa(C,m,x,Na,p,B,a,ja);if(!1!==ya){if(1===ya||-1===ya)ja=1===ya;pb=!0;setTimeout(Pa,30);c();ja&&!Ja?m.appendChild(x):p.parentNode.insertBefore(x,
ja?Ja:p);Oa&&la(Oa,0,db-Oa.scrollTop);N=x.parentNode;void 0===eb||lb||(hb=Math.abs(eb-R(p)[P]));h();return e(!0)}}if(m.contains(x))return e(!1)}return!1}},_ignoreWhileAnimating:null,_offMoveEvents:function(){r(document,"mousemove",this._onTouchMove);r(document,"touchmove",this._onTouchMove);r(document,"pointermove",this._onTouchMove);r(document,"dragover",Va);r(document,"mousemove",Va);r(document,"touchmove",Va)},_offUpEvents:function(){var a=this.el.ownerDocument;r(a,"mouseup",this._onDrop);r(a,
"touchend",this._onDrop);r(a,"pointerup",this._onDrop);r(a,"touchcancel",this._onDrop);r(document,"selectstart",this)},_onDrop:function(a){var b=this.el,c=this.options;ma=ca(x);Sa=ca(x,c.draggable);Aa("drop",this,{evt:a});N=x&&x.parentNode;ma=ca(x);Sa=ca(x,c.draggable);if(!n.eventCanceled&&(ab=lb=Xa=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),clearTimeout(this.cloneId),clearTimeout(this._dragStartId),this.nativeDraggable&&(r(document,"drop",this),r(b,"dragstart",this._onDragStart)),
this._offMoveEvents(),this._offUpEvents(),ua&&D(document.body,"user-select",""),D(x,"transform",""),a&&(cb&&(a.cancelable&&a.preventDefault(),!c.dropBubble&&a.stopPropagation()),I&&I.parentNode&&I.parentNode.removeChild(I),(C===N||xa&&"clone"!==xa.lastPutMode)&&v&&v.parentNode&&v.parentNode.removeChild(v),x&&(this.nativeDraggable&&r(x,"dragend",this),pa(x),x.style["will-change"]="",cb&&!Xa&&ea(x,xa?xa.options.ghostClass:this.options.ghostClass,!1),ea(x,this.options.chosenClass,!1),V({sortable:this,
name:"unchoose",toEl:N,newIndex:null,newDraggableIndex:null,originalEvent:a}),C!==N?(0<=ma&&(V({rootEl:N,name:"add",toEl:N,fromEl:C,originalEvent:a}),V({sortable:this,name:"remove",toEl:N,originalEvent:a}),V({rootEl:N,name:"sort",toEl:N,fromEl:C,originalEvent:a}),V({sortable:this,name:"sort",toEl:N,originalEvent:a})),xa&&xa.save()):ma!==da&&0<=ma&&(V({sortable:this,name:"update",toEl:N,originalEvent:a}),V({sortable:this,name:"sort",toEl:N,originalEvent:a})),n.active)))){if(null==ma||-1===ma)ma=da,
Sa=Ga;V({sortable:this,name:"end",toEl:N,originalEvent:a});this.save()}this._nulling()},_nulling:function(){Aa("nulling",this);C=x=N=I=f=v=q=O=Ua=Ha=cb=ma=Sa=da=Ga=Ya=bb=xa=jb=n.dragged=n.ghost=n.clone=n.active=null;ib.forEach(function(a){a.checked=!0});ib.length=qb=rb=0},handleEvent:function(a){switch(a.type){case "drop":case "dragend":this._onDrop(a);break;case "dragenter":case "dragover":x&&(this._onDragOver(a),a.dataTransfer&&(a.dataTransfer.dropEffect="move"),a.cancelable&&a.preventDefault());
break;case "selectstart":a.preventDefault()}},toArray:function(){for(var a=[],b,c=this.el.children,e=0,h=c.length,m=this.options;e<h;e++)b=c[e],X(b,m.draggable,this.el,!1)&&a.push(b.getAttribute(m.dataIdAttr)||d(b));return a},sort:function(a,b){var c={},e=this.el;this.toArray().forEach(function(h,m){m=e.children[m];X(m,this.options.draggable,e,!1)&&(c[h]=m)},this);b&&this.captureAnimationState();a.forEach(function(h){c[h]&&(e.removeChild(c[h]),e.appendChild(c[h]))});b&&this.animateAll()},save:function(){var a=
this.options.store;a&&a.set&&a.set(this)},closest:function(a,b){return X(a,b||this.options.draggable,this.el,!1)},option:function(a,b){var c=this.options;if(void 0===b)return c[a];var e=Ma.modifyOption(this,a,b);c[a]="undefined"!==typeof e?e:b;"group"===a&&zb(c)},destroy:function(){Aa("destroy",this);var a=this.el;a[ha]=null;r(a,"mousedown",this._onTapStart);r(a,"touchstart",this._onTapStart);r(a,"pointerdown",this._onTapStart);this.nativeDraggable&&(r(a,"dragover",this),r(a,"dragenter",this));Array.prototype.forEach.call(a.querySelectorAll("[draggable]"),
function(b){b.removeAttribute("draggable")});this._onDrop();this._disableDelayedDragEvents();gb.splice(gb.indexOf(this.el),1);this.el=a=null},_hideClone:function(){O||(Aa("hideClone",this),n.eventCanceled||(D(v,"display","none"),this.options.removeCloneOnHide&&v.parentNode&&v.parentNode.removeChild(v),O=!0))},_showClone:function(a){"clone"!==a.lastPutMode?this._hideClone():O&&(Aa("showClone",this),n.eventCanceled||(x.parentNode!=C||this.options.group.revertClone?f?C.insertBefore(v,f):C.appendChild(v):
C.insertBefore(v,x),this.options.group.revertClone&&this.animate(x,v),D(v,"display",""),O=!1))}};mb&&J(document,"touchmove",function(a){(n.active||Xa)&&a.cancelable&&a.preventDefault()});n.utils={on:J,off:r,css:D,find:na,is:function(a,b){return!!X(a,b,a,!1)},extend:function(a,b){if(a&&b)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},throttle:Z,closest:X,toggleClass:ea,clone:oa,index:ca,nextTick:l,cancelNextTick:function(a){return clearTimeout(a)},detectDirection:yb,getChild:Da};n.get=function(a){return a[ha]};
n.mount=function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];b[0].constructor===Array&&(b=b[0]);b.forEach(function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(n.utils=t({},n.utils,e.utils));Ma.mount(e)})};n.create=function(a,b){return new n(a,b)};n.version="1.13.0";var sa=[],fb,tb,ub=!1,vb,wb,ob,Za,xb=Z(function(a,b,c,e){if(b.scroll){var h=(a.touches?a.touches[0]:a).clientX,
m=(a.touches?a.touches[0]:a).clientY,p=b.scrollSensitivity,B=b.scrollSpeed,G=ba(),M=!1;if(tb!==c){tb=c;u();fb=b.scroll;var P=b.scrollFn;!0===fb&&(fb=y(c,!0))}c=0;var W=fb;do{var va=W,ra=R(va),Ba=ra.top,ia=ra.bottom,Ea=ra.left,Ia=ra.right,Na=ra.width;ra=ra.height;var ya=void 0,ja=void 0,Oa=va.scrollWidth,db=va.scrollHeight;ja=D(va);var eb=va.scrollLeft,Ja=va.scrollTop;va===G?(ya=Na<Oa&&("auto"===ja.overflowX||"scroll"===ja.overflowX||"visible"===ja.overflowX),ja=ra<db&&("auto"===ja.overflowY||"scroll"===
ja.overflowY||"visible"===ja.overflowY)):(ya=Na<Oa&&("auto"===ja.overflowX||"scroll"===ja.overflowX),ja=ra<db&&("auto"===ja.overflowY||"scroll"===ja.overflowY));Ea=ya&&(Math.abs(Ia-h)<=p&&eb+Na<Oa)-(Math.abs(Ea-h)<=p&&!!eb);Ba=ja&&(Math.abs(ia-m)<=p&&Ja+ra<db)-(Math.abs(Ba-m)<=p&&!!Ja);if(!sa[c])for(ia=0;ia<=c;ia++)sa[ia]||(sa[ia]={});if(sa[c].vx!=Ea||sa[c].vy!=Ba||sa[c].el!==va)if(sa[c].el=va,sa[c].vx=Ea,sa[c].vy=Ba,clearInterval(sa[c].pid),0!=Ea||0!=Ba)M=!0,sa[c].pid=setInterval(function(){e&&0===
this.layer&&n.active._onTouchMove(ob);var Ta=sa[this.layer].vy?sa[this.layer].vy*B:0,nb=sa[this.layer].vx?sa[this.layer].vx*B:0;"function"===typeof P&&"continue"!==P.call(n.dragged.parentNode[ha],nb,Ta,a,ob,sa[this.layer].el)||la(sa[this.layer].el,nb,Ta)}.bind({layer:c}),24);c++}while(b.bubbleScroll&&W!==G&&(W=y(W,!1)));ub=M}},30),Hb=function(a){var b=a.originalEvent,c=a.putSortable,e=a.dragEl,h=a.activeSortable,m=a.dispatchSortableEvent,p=a.hideGhostForTarget;a=a.unhideGhostForTarget;b&&(h=c||h,
p(),b=b.changedTouches&&b.changedTouches.length?b.changedTouches[0]:b,b=document.elementFromPoint(b.clientX,b.clientY),a(),h&&!h.el.contains(b)&&(m("spill"),this.onSpill({dragEl:e,putSortable:c})))};z.prototype={startIndex:null,dragStart:function(a){this.startIndex=a.oldDraggableIndex},onSpill:function(a){var b=a.dragEl;a=a.putSortable;this.sortable.captureAnimationState();a&&a.captureAnimationState();var c=Da(this.sortable.el,this.startIndex,this.options);c?this.sortable.el.insertBefore(b,c):this.sortable.el.appendChild(b);
this.sortable.animateAll();a&&a.animateAll()},drop:Hb};w(z,{pluginName:"revertOnSpill"});F.prototype={onSpill:function(a){var b=a.dragEl;a=a.putSortable||this.sortable;a.captureAnimationState();b.parentNode&&b.parentNode.removeChild(b);a.animateAll()},drop:Hb};w(F,{pluginName:"removeOnSpill"});n.mount(new function(){function a(){this.defaults={scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var b in this)"_"===b.charAt(0)&&"function"===typeof this[b]&&(this[b]=this[b].bind(this))}
a.prototype={dragStarted:function(b){b=b.originalEvent;this.sortable.nativeDraggable?J(document,"dragover",this._handleAutoScroll):this.options.supportPointer?J(document,"pointermove",this._handleFallbackAutoScroll):b.touches?J(document,"touchmove",this._handleFallbackAutoScroll):J(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(b){b=b.originalEvent;this.options.dragOverBubble||b.rootEl||this._handleAutoScroll(b)},drop:function(){this.sortable.nativeDraggable?r(document,
"dragover",this._handleAutoScroll):(r(document,"pointermove",this._handleFallbackAutoScroll),r(document,"touchmove",this._handleFallbackAutoScroll),r(document,"mousemove",this._handleFallbackAutoScroll));clearInterval(Za);u();clearTimeout(Qa);Qa=void 0},nulling:function(){ob=tb=fb=ub=Za=vb=wb=null;sa.length=0},_handleFallbackAutoScroll:function(b){this._handleAutoScroll(b,!0)},_handleAutoScroll:function(b,c){var e=this,h=(b.touches?b.touches[0]:b).clientX,m=(b.touches?b.touches[0]:b).clientY,p=document.elementFromPoint(h,
m);ob=b;if(c||S||L||ua){xb(b,this.options,p,c);var B=y(p,!0);!ub||Za&&h===vb&&m===wb||(Za&&clearInterval(Za),Za=setInterval(function(){var G=y(document.elementFromPoint(h,m),!0);G!==B&&(B=G,u());xb(b,e.options,G,c)},10),vb=h,wb=m)}else this.options.bubbleScroll&&y(p,!0)!==ba()?xb(b,this.options,y(p,!1),!1):u()}};return w(a,{pluginName:"scroll",initializeByDefault:!0})});n.mount(F,z);aa.Sortable=n})},"esri/widgets/LayerList/LayerListViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/Evented ../../core/Collection ../../core/Handles ../../core/watchUtils ./support/layerListUtils ./ListItem".split(" "),
function(aa,A,w,t,T,Y,J,r,H,X,ea,D,Q,na,ba,R,ta){const Da=Q.ofType(ta);w=function(ka){function ca(g){g=ka.call(this,g)||this;g._handles=new na;g.listItemCreatedFunction=null;g.operationalItems=new Da;g.view=null;return g}aa._inheritsLoose(ca,ka);var U=ca.prototype;U.initialize=function(){this._handles.add(ba.init(this,["view","view.ready"],()=>this._viewHandles()),"view")};U.destroy=function(){this._handles.destroy();this.view=this._handles=null;this.operationalItems.removeAll()};U.triggerAction=
function(g,y){g&&!g.disabled&&this.emit("trigger-action",{action:g,item:y})};U.moveListItem=function(g,y,E,Z){var la,oa;const wa=null==g?void 0:g.layer;if(wa){var V=null==(la=this.view)?void 0:null==(oa=la.map)?void 0:oa.layers;la=y?R.getItemLayers(y):V;V=E?R.getItemLayers(E):V;la&&V&&({operationalItems:oa}=this,y=(null==y?void 0:y.children)||oa,oa=(null==E?void 0:E.children)||oa,Z=V.length-Z,g.parent=E||null,y.includes(g)&&y.remove(g),la.includes(wa)&&la.remove(wa),oa.includes(g)||oa.add(g,Z),V.includes(wa)||
V.add(wa,Z))}};U._createLayerViewHandles=function(g){const {_handles:y}=this;y.remove("layer-views");this._compileList();g&&y.add(g.on("change",()=>this._compileList()),"layer-views")};U._createMapLayerHandles=function(g){const {_handles:y}=this;y.remove("map-layers");this._compileList();g&&y.add(g.on("change",()=>this._compileList()),"map-layers")};U._watchItemProperties=function(g){this._handles.add([g.children.on("change",()=>{this._modifyListItemChildren(g.children)})],`children-change-${g.uid}`)};
U._modifyListItemChildren=function(g){g.forEach(y=>this._modifyListItem(y))};U._modifyListItem=function(g){"function"===typeof this.listItemCreatedFunction&&this.listItemCreatedFunction.call(null,{item:g});this._modifyListItemChildren(g.children)};U._createListItem=function(g){const {view:y}=this;g=new ta({layer:g,view:y});this._watchItemProperties(g);return g};U._removeAllItems=function(){const {_handles:g,operationalItems:y}=this;y.forEach(E=>{g.remove(`children-change-${E.uid}`)});y.removeAll()};
U._getViewableLayers=function(g){if(g)return g.filter(y=>"hide"!==R.findLayerListMode(y))};U._watchLayersListMode=function(g){const {_handles:y}=this;y.remove("layer-list-mode");g&&g.forEach(E=>{y.add(ba.watch(E,"listMode",()=>this._compileList()),"layer-list-mode")})};U._compileList=function(){var g=this.get("view.map.layers");this._watchLayersListMode(g);(g=this._getViewableLayers(g))&&g.length?(this._createNewItems(g),this._modifyOrRemoveItems(g),this._sortItems(g)):this._removeAllItems()};U._createNewItems=
function(g){const {operationalItems:y}=this;g.forEach(E=>{y.find(Z=>Z.layer===E)||y.add(this._createListItem(E))})};U._modifyOrRemoveItems=function(g){const {_handles:y,operationalItems:E}=this,Z=[];E.forEach(la=>{la&&g&&g.find(oa=>la.layer===oa)?this._modifyListItem(la):(y.remove(`children-change-${la.uid}`),Z.push(la))});E.removeMany(Z)};U._sortItems=function(g){const {operationalItems:y}=this;y.sort((E,Z)=>{E=g.indexOf(E.layer);Z=g.indexOf(Z.layer);return E>Z?-1:E<Z?1:0})};U._viewHandles=function(){const {_handles:g,
view:y}=this;g.remove(["map-layers","layer-views","view-layers"]);this._compileList();y&&y.ready&&g.add([ba.init(this,"view.map.allLayers",E=>this._createMapLayerHandles(E)),ba.init(this,"view.allLayerViews",E=>this._createLayerViewHandles(E)),ba.init(this,"listItemCreatedFunction",()=>this._compileList())],"view-layers")};aa._createClass(ca,[{key:"state",get:function(){const g=this.get("view");return this.get("view.ready")?"ready":g?"loading":"disabled"}}]);return ca}(D.EventedAccessor);A.__decorate([Y.property()],
w.prototype,"listItemCreatedFunction",void 0);A.__decorate([Y.property({type:Da})],w.prototype,"operationalItems",void 0);A.__decorate([Y.property({readOnly:!0})],w.prototype,"state",null);A.__decorate([Y.property()],w.prototype,"view",void 0);return w=A.__decorate([r.subclass("esri.widgets.LayerList.LayerListViewModel")],w)})},"*noref":1}});
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/aliasOf ../core/accessorSupport/decorators/cast ../core/deprecate ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/events ../core/Collection ../core/Handles ../core/watchUtils ./support/widgetUtils ./support/decorators/accessibleHandler ./support/decorators/messageBundle ./support/decorators/vmEvent ../chunks/index ./Widget ./LayerList/support/layerListUtils ./LayerList/ListItem ../chunks/sortable.esm ./LayerList/LayerListViewModel".split(" "),function(aa,
A,w,t,T,Y,J,r,H,X,ea,D,Q,na,ba,R,ta,Da,ka,ca,U,g,y,E,Z,la,oa){function wa(Pa){const {actionsOpen:Ka,children:K}=Pa;Ka&&(Pa.actionsOpen=!1);K.forEach(d=>wa(d))}const V=ba.ofType(Z),n={exclusive:"exclusive",inherited:"inherited",independent:"independent"},qa=t.getLogger("esri.widgets.LayerList"),pa={statusIndicators:!0};t=function(Pa){function Ka(d,k){var l=Pa.call(this,d,k)||this;l._handles=new R;l._sortableNodes=new Map;l._sortableMap=new Map;l._focusSortUid=null;l._newUI=w("esri-layerlist-new-ui");
l.visibleItems=null;l.iconClass="esri-icon-layers";l.label=void 0;l.listItemCreatedFunction=null;l.messages=null;l.messagesCommon=null;l.multipleSelectionEnabled=!1;l.operationalItems=null;l.selectionEnabled=!1;l.selectedItems=new V;l.view=null;l.viewModel=new oa;l.visibleElements={...pa};l._onSortableSort=({to:u,from:z,item:F,newIndex:L})=>{z&&u&&(z===u?l._sortLayers(l._sortableMap.get(z.dataset.group)):l._moveLayerFromChildList({to:u,from:z,item:F,newIndex:L}))};l._sortableCanPut=(u,z,F)=>{var L,
S;const fa=u.el.dataset.group;z=z.el.dataset.group;u=u.el["data-item"];F=F["data-item"];F=null==F?void 0:null==(L=F.layer)?void 0:L.type;L=null==u?void 0:null==(S=u.layer)?void 0:S.type;return fa&&z&&F&&!("group"===L&&"group"===F)};l._sortableCanPull=(u,z,F)=>{var L;u=u.el.dataset.group;z=z.el.dataset.group;F=F["data-item"];F=null==F?void 0:null==(L=F.layer)?void 0:L.type;return u&&z&&!!F};l._onSortableEnd=({oldIndex:u,from:z,to:F,item:L})=>{z!==F&&z.insertBefore(L,z.children[u])};return l}aa._inheritsLoose(Ka,
Pa);var K=Ka.prototype;K.initialize=function(){const d=this.operationalItems;this._setVisibleItems(d);this.own(ta.on(this,"operationalItems","change",()=>this._itemsChanged(d)),ta.init(this,"selectionEnabled",()=>this._toggleAllSorting()))};K.destroy=function(){this._destroySortables();this._handles.destroy();this._handles=null};K.castVisibleElements=function(d){return{...pa,...d}};K.triggerAction=function(d,k){this.viewModel.triggerAction(d,k)};K.render=function(){var d;const {visibleItems:k,_newUI:l}=
this,u=null==(d=this.viewModel)?void 0:d.state;return g.jsx("div",{class:this.classes("esri-layer-list esri-widget esri-widget--panel",{["esri-layer-list--new-ui"]:l,["esri-hidden"]:"loading"===u,["esri-disabled"]:"disabled"===u})},null!=k&&k.length?this.renderItems():this.renderNoItems())};K.renderNoItems=function(){return g.jsx("div",{class:"esri-layer-list__no-items"},this.messages.noItemsToDisplay)};K.renderItems=function(){const {visibleItems:d,selectionEnabled:k,messages:l}=this;return g.jsx("ul",
{"aria-label":l.widgetLabel,role:k?"listbox":void 0,afterCreate:this._sortNodeCreated,afterUpdate:this._sortNodeCreated,afterRemoved:this._sortNodeRemoved,"data-group":"root",bind:this,class:this.classes("esri-layer-list__list","esri-layer-list__list--root","esri-layer-list__list--independent")},null==d?void 0:d.map(u=>this.renderItem(u,null)).toArray())};K.renderActionsMenuIcon=function(d,k){var {messages:l}=this;l=d.actionsOpen?l.closeActions:l.openActions;return g.jsx("div",{key:"actions-menu-toggle",
"data-item":d,bind:this,onclick:this._toggleActionsOpen,onkeydown:this._toggleActionsOpen,class:this.classes("esri-layer-list__item-actions-menu-item",{["esri-layer-list__item-actions-menu-item--active"]:d.actionsOpen}),tabindex:"0",role:"button","aria-controls":k,"aria-label":l,title:l},g.jsx("span",{"aria-hidden":"true",class:"esri-icon-handle-horizontal"}))};K.renderActionsMenu=function(d,k,l,u){var {panel:z}=d;z=z&&z.visible?this.renderPanelButton(z):null;const F=(k=1===l&&this._getSingleActionButton(k))?
this.renderAction({item:d,action:k,singleAction:!0}):null;return(d=!k&&l?this.renderActionsMenuIcon(d,u):null)||z||k?g.jsx("div",{key:"actions-menu",class:"esri-layer-list__item-actions-menu"},z,F,d):null};K.renderChildList=function(d,k){var l;const {selectionEnabled:u}=this,{visibilityMode:z,children:F}=d;var L=!!d.error;L=!!F.length&&!L;const S=!L&&u&&"group"===(null==(l=d.layer)?void 0:l.type),{exclusive:fa,inherited:ua}=n;l={["esri-layer-list__list--exclusive"]:z===fa,["esri-layer-list__list--inherited"]:z===
ua,["esri-layer-list__list--independent"]:z!==ua&&z!==fa};return L||S?g.jsx("ul",{bind:this,key:"list-items",id:k,"data-group":d.uid,"data-item":d,afterCreate:this._sortNodeCreated,afterUpdate:this._sortNodeCreated,afterRemoved:this._sortNodeRemoved,class:this.classes("esri-layer-list__list",l),"aria-expanded":d.open?"true":"false",role:u?"listbox":z===fa?"radiogroup":"group",hidden:d.open||S?null:!0},null==F?void 0:F.map(za=>this.renderItem(za,d)).toArray()):null};K.renderChildrenToggle=function(d,
k){var {messagesCommon:l}=this;const {children:u}=d,z=!!d.error,F={["esri-layer-list__child-toggle--open"]:d.open};l=d.open?l.collapse:l.expand;return u.length&&!z?g.jsx("span",{onclick:this._toggleChildrenClick,onkeydown:this._toggleChildrenClick,"data-item":d,key:"toggle-children",class:this.classes("esri-layer-list__child-toggle",F),tabindex:"0",role:"button","aria-controls":k,"aria-label":l,title:l},g.jsx("span",{"aria-hidden":"true",class:this.classes("esri-layer-list__child-toggle-icon--closed",
"esri-icon-right-triangle-arrow")}),g.jsx("span",{"aria-hidden":"true",class:this.classes("esri-layer-list__child-toggle-icon--opened","esri-icon-down-arrow")}),g.jsx("span",{"aria-hidden":"true",class:this.classes("esri-layer-list__child-toggle-icon--closed-rtl","esri-icon-left-triangle-arrow")})):null};K.renderError=function(d){return d.error?g.jsx("div",{key:"esri-layer-list__error",class:"esri-layer-list__item-error-message",role:"alert"},g.jsx("span",null,this.messages.layerError)):null};K.renderItemContent=
function(d,k,l){var {id:u}=this,z=`${u}_${d.uid}`;u=`${z}_actions`;z=`${z}__list`;const {panel:F}=d,L=this._filterActions(d.actionsSections),S=this._countActions(L);return[g.jsx("div",{key:"list-item-container",class:"esri-layer-list__item-container"},this.renderChildrenToggle(d,z),this.renderLabel(d,k,l),this.renderActionsMenu(d,L,S,u)),this.renderError(d),S?this.renderActionsSections(d,L,u):null,F&&F.open?F.render():null,this.renderChildList(d,z)]};K.renderItem=function(d,k){const {_newUI:l,id:u,
selectionEnabled:z,selectedItems:F,visibleElements:L}=this;var {children:S}=d;const fa=`${`${u}_${d.uid}`}__title`;var ua=!!d.error;S={["esri-layer-list__item--has-children"]:!!S.length&&!ua,["esri-layer-list__item--error"]:!!ua,["esri-layer-list__item--updating"]:d.updating&&!k&&L.statusIndicators,["esri-layer-list__item--invisible"]:l&&!d.visible,["esri-layer-list__item--invisible-at-scale"]:!d.visibleAtCurrentScale,["esri-layer-list__item--selectable"]:z};if(z){var za;ua={["data-layer-uid"]:null==
(za=d.layer)?void 0:za.uid,["data-sort-filter"]:(!d.sortable).toString()};return g.jsx("li",Object.assign({key:`item-with-selection-${d.uid}`,bind:this,afterCreate:this._focusListItem,afterUpdate:this._focusListItem,class:this.classes("esri-layer-list__item",S),"aria-labelledby":fa,onclick:this._toggleSelection,onkeydown:this._selectionKeydown,"data-item":d,"data-group":k?k.uid:"root",tabIndex:0,"aria-selected":E.findSelectedItem(d,F)?"true":"false",role:"option"},ua),this.renderItemContent(d,k,fa))}return g.jsx("li",
{key:`item-no-selection-${d.uid}`,bind:this,afterCreate:this._focusListItem,afterUpdate:this._focusListItem,class:this.classes("esri-layer-list__item",S),"aria-labelledby":fa},this.renderItemContent(d,k,fa))};K.renderItemTitle=function(d,k){const {messages:l}=this,u=d.title||l.untitledLayer;d=d.visibleAtCurrentScale?u:`${u} (${l.layerInvisibleAtScale})`;return g.jsx("span",{key:"layer-title-container",id:k,title:d,"aria-label":d,class:"esri-layer-list__item-title"},u)};K.renderItemToggleIcon=function(d,
k){const {_newUI:l}=this,{exclusive:u}=n;k=k&&k.visibilityMode;return g.jsx("span",{key:"item-toggle-icon",class:this.classes({["esri-layer-list__item-toggle-icon"]:l,["esri-layer-list__item-toggle-icon"]:l&&k!==u,["esri-layer-list__item-radio-icon"]:l&&k===u,["esri-icon-radio-checked"]:k===u&&d.visible,["esri-icon-radio-unchecked"]:k===u&&!d.visible,["esri-icon-visible"]:k!==u&&d.visible,["esri-icon-non-visible"]:k!==u&&!d.visible}),"aria-hidden":"true"})};K.renderItemToggle=function(d,k,l){const {selectionEnabled:u}=
this,{exclusive:z}=n,F=k&&k.visibilityMode;return u?g.jsx("span",{key:"item-toggle-selection-enabled",class:"esri-layer-list__item-toggle",bind:this,onclick:this._toggleVisibility,onkeydown:this._toggleVisibility,"data-item":d,"data-parent-visibility":F,tabIndex:0,"aria-checked":d.visible?"true":"false",role:F===z?"radio":"switch","aria-labelledby":l},this.renderItemToggleIcon(d,k)):g.jsx("span",{key:"item-toggle",class:"esri-layer-list__item-toggle"},this.renderItemToggleIcon(d,k))};K.renderItemError=
function(d){return d.error?g.jsx("span",{key:"notice-triangle","aria-hidden":"true",class:"esri-icon-notice-triangle"}):null};K.renderLabel=function(d,k,l){const {selectionEnabled:u,_newUI:z}=this,{inherited:F,exclusive:L}=n,S=null==k?void 0:k.visibilityMode;var fa=S===L?"radio":"switch";k=[this.renderItemToggle(d,k,l),this.renderItemTitle(d,l)];z&&k.reverse();fa=u?g.jsx("div",{key:`item-label-no-selection-${d.uid}`,class:"esri-layer-list__item-label"},k):g.jsx("div",{key:`item-label-with-selection-${d.uid}`,
class:"esri-layer-list__item-label",bind:this,onclick:this._toggleVisibility,onkeydown:this._toggleVisibility,"data-item":d,"data-parent-visibility":S,tabIndex:0,"aria-checked":d.visible?"true":"false",role:fa,"aria-labelledby":l},k);return S===F||d.error?g.jsx("div",{key:`item-label-container-${d.uid}`,class:"esri-layer-list__item-label"},this.renderItemError(d),this.renderItemTitle(d,l)):fa};K.renderPanelButton=function(d){const {className:k,open:l,title:u,image:z}=d,F=z||k?k:"esri-icon-default-action",
L=this._getIconImageStyles(d),S={["esri-layer-list__item-actions-menu-item--active"]:l},fa={["esri-layer-list__item-action-image"]:!!L["background-image"]};F&&(fa[F]=!!F);return g.jsx("div",{key:`panel-${d.uid}`,bind:this,"data-panel":d,onclick:this._triggerPanel,onkeydown:this._triggerPanel,class:this.classes("esri-layer-list__item-actions-menu-item",S),role:"button",tabindex:"0",title:u,"aria-label":u},g.jsx("span",{class:this.classes(fa),styles:L}))};K.renderActionsSections=function(d,k,l){k=k.toArray().map((u,
z)=>g.jsx("ul",{key:`${d}-action-section-${z}`,class:"esri-layer-list__item-actions-list"},this.renderActionSection(d,u)));return g.jsx("div",{role:"group","aria-expanded":d.actionsOpen?"true":"false",key:"actions-section",id:l,class:"esri-layer-list__item-actions",hidden:d.actionsOpen?null:!0},k)};K.renderActionSection=function(d,k){return(k&&k.toArray()).map(l=>this.renderAction({item:d,action:l}))};K.renderActionIcon=function(d){const {active:k,className:l}=d,u=this._getIconImageStyles(d);d="button"!==
d.type||d.image||l?l:"esri-icon-default-action";const z={["esri-layer-list__item-action-image"]:!k&&!!u["background-image"],["esri-icon-loading-indicator"]:k,["esri-rotating"]:k};d&&!k&&(z[d]=!0);return g.jsx("span",{key:"action-icon","aria-hidden":"true",class:this.classes("esri-layer-list__item-action-icon",z),styles:u})};K.renderActionTitle=function(d,k){return k?null:g.jsx("span",{key:"action-title",class:"esri-layer-list__item-action-title"},d)};K.renderAction=function(d){const {item:k,action:l,
singleAction:u}=d,{active:z,disabled:F,title:L}=l;d={["esri-layer-list__item-actions-menu-item"]:u&&"button"===l.type,["esri-layer-list__item-action"]:z||!u&&"toggle"!==l.type,["esri-layer-list__action-toggle"]:!z&&"toggle"===l.type,["esri-layer-list__action-toggle--on"]:!z&&"toggle"===l.type&&l.value,["esri-disabled-element"]:F};const S=[this.renderActionIcon(l),this.renderActionTitle(L,u)];return u?g.jsx("div",{bind:this,"data-item":k,"data-action":l,role:"button",key:`single-action-${l.uid}`,onclick:this._triggerAction,
onkeydown:this._triggerAction,classes:d,tabindex:"0",title:L,"aria-label":L},S):g.jsx("li",{bind:this,"data-item":k,"data-action":l,key:`action-${l.uid}`,onclick:this._triggerAction,onkeydown:this._triggerAction,classes:d,tabindex:"0",role:"button",title:L,"aria-label":L},S)};K._sortNodeRemoved=function(d){const {_sortableMap:k}=this;d=d.dataset.group;const l=k.get(d);l&&l.destroy();k.delete(d)};K._destroySortables=function(){const {_sortableMap:d,_sortableNodes:k}=this;d.forEach(l=>l&&l.destroy());
d.clear();k.clear()};K._moveLayerFromChildList=function({to:d,from:k,item:l,newIndex:u}){this.viewModel.moveListItem(l["data-item"],k["data-item"],d["data-item"],u)};K._sortLayers=function(d){if(d){var k=d.el["data-item"];d=d.toArray();if(k)E.sortChildLayersToIds(k,d);else{var l,u;E.sortLayersToIds(null==(l=this.view)?void 0:null==(u=l.map)?void 0:u.layers,d)}}};K._toggleSorting=function(d,k){const {_sortableMap:l,selectionEnabled:u}=this,z=l.get(k);var F=d["data-item"];F=("root"===k?!0:F.childrenSortable&&
E.canSortSublayers(F))&&u;z?z.option("disabled",!F):F&&(d=la.Sortable.create(d,{dataIdAttr:"data-layer-uid",group:{name:k,pull:this._sortableCanPull,put:this._sortableCanPut},filter:'[data-sort-filter\x3d"true"]',fallbackTolerance:4,onSort:this._onSortableSort,onEnd:this._onSortableEnd,disabled:!F,chosenClass:"esri-layer-list--chosen"}),l.set(k,d))};K._toggleAllSorting=function(){this._sortableNodes.forEach((d,k)=>this._toggleSorting(d,k))};K._sortNodeCreated=function(d){const k=d.dataset.group;k&&
(this._sortableNodes.set(k,d),this._toggleSorting(d,k))};K._setVisibleItems=function(d){this.visibleItems=null==d?void 0:d.filter(k=>this.errorsVisible||!k.error)};K._getSingleActionButton=function(d){return d.reduce(k=>k).filter(k=>k&&"button"===k.type).getItemAt(0)};K._focusListItem=function(d){var k;const {_focusSortUid:l}=this;d&&l&&(null==(k=d["data-item"].layer)?void 0:k.uid)===l&&(d.focus(),this._focusSortUid=null)};K._watchActionSectionChanges=function(d,k){const l="action-section"+k;this._handles.add(d.on("change",
this.scheduleRender.bind(this)),l);d.forEach(u=>this._renderOnActionChanges(u,k))};K._renderOnActionChanges=function(d,k){k="actions"+k;"toggle"===d.type?this._handles.add([ta.init(d,"className image id title visible value".split(" "),()=>this.scheduleRender())],k):"slider"===d.type?this._handles.add([ta.init(d,"className id title visible value displayValueEnabled max min step".split(" "),()=>this.scheduleRender())],k):this._handles.add([ta.init(d,["className","image","id","title","visible"],()=>
this.scheduleRender())],k)};K._renderOnItemChanges=function(d){const k=d.uid,l="items"+k;this._handles.add([ta.init(d,"actionsOpen visible open updating title visibleAtCurrentScale error visibilityMode panel panel.title panel.content panel.className sortable childrenSortable".split(" "),()=>this.scheduleRender()),d.actionsSections.on("change",()=>this.scheduleRender()),d.children.on("change",()=>this.scheduleRender())],l);d.children.forEach(u=>this._renderOnItemChanges(u));d.actionsSections.forEach(u=>
this._watchActionSectionChanges(u,k))};K._itemsChanged=function(d){this._handles.removeAll();d.forEach(k=>this._renderOnItemChanges(k));this._setVisibleItems(d);this.scheduleRender()};K._filterActions=function(d){return d.map(k=>k.filter(l=>l.visible))};K._countActions=function(d){return d.reduce((k,l)=>k+l.length,0)};K._getIconImageStyles=function(d){d="esri.widgets.LayerList.ListItemPanel"===d.declaredClass||"esri.support.Action.ActionButton"===d.declaredClass||"esri.support.Action.ActionToggle"===
d.declaredClass?d.image:null;return{"background-image":d?`url("${d}")`:null}};K._selectionKeydown=function(d){var k=na.eventKey(d);if(-1===["ArrowDown","ArrowUp"].indexOf(k))this._toggleSelection(d);else{d.stopPropagation();var l=d.currentTarget,u=l["data-item"],{_sortableMap:z,selectedItems:F}=this;if(l=z.get(l.dataset.group)){var L=E.findSelectedItem(u,F),S=l.toArray();d=S.indexOf(d.target.dataset.layerUid);if(-1!==d){if("ArrowDown"===k){const La=d+1;if(La>=S.length)return;if(L){var fa;S.splice(La,
0,S.splice(d,1)[0]);l.sort(S);this._sortLayers(l);this._focusSortUid=null==(fa=u.layer)?void 0:fa.uid}else{var ua;this._focusSortUid=null==(ua=u.layer)?void 0:ua.uid;this.scheduleRender()}}if("ArrowUp"===k&&(k=d-1,!(-1>=k)))if(L){var za;S.splice(k,0,S.splice(d,1)[0]);l.sort(S);this._sortLayers(l);this._focusSortUid=null==(za=u.layer)?void 0:za.uid}else{var Wa;this._focusSortUid=null==(Wa=u.layer)?void 0:Wa.uid;this.scheduleRender()}}}}};K._toggleActionsOpen=function(d){const k=d.currentTarget["data-item"];
var {actionsOpen:l}=k;(l=!l)&&this.operationalItems.forEach(u=>wa(u));k.actionsOpen=l;d.stopPropagation()};K._triggerPanel=function(d){const k=d.currentTarget["data-panel"];k&&(k.open=!k.open);d.stopPropagation()};K._triggerAction=function(d){var k=d.currentTarget;const l=k["data-action"];k=k["data-item"];"toggle"===l.type&&(l.value=!l.value);this.triggerAction(l,k);d.stopPropagation()};K._toggleVisibility=function(d){var k=d.currentTarget;const l=k.getAttribute("data-parent-visibility");k=k["data-item"];
l===n.exclusive&&k.visible||(k.visible=!k.visible);d.stopPropagation()};K._toggleChildrenClick=function(d){const k=d.currentTarget["data-item"];k.open=!k.open;d.stopPropagation()};K._toggleSelection=function(d){d.stopPropagation();const {multipleSelectionEnabled:k,selectedItems:l}=this,u=k&&(d.metaKey||d.ctrlKey);d=d.currentTarget["data-item"];const z=E.findSelectedItem(d,l),{length:F}=l,L=z&&1===F;u?z?null==l.remove?void 0:l.remove(z):l.add(d):F&&!L?(l.removeAll(),l.add(d)):z?null==l.remove?void 0:
l.remove(z):l.add(d)};aa._createClass(Ka,[{key:"statusIndicatorsVisible",set:function(d){r.deprecatedProperty(qa,"statusIndicatorsVisible",{replacement:"visibleElements.statusIndicators",version:"4.15"});this.visibleElements={...this.visibleElements,statusIndicators:d}}}]);return Ka}(y);A.__decorate([T.property()],t.prototype,"visibleItems",void 0);A.__decorate([T.property()],t.prototype,"iconClass",void 0);A.__decorate([T.property()],t.prototype,"errorsVisible",void 0);A.__decorate([T.property({aliasOf:{source:"messages.widgetLabel",
overridable:!0}})],t.prototype,"label",void 0);A.__decorate([Y.aliasOf("viewModel.listItemCreatedFunction")],t.prototype,"listItemCreatedFunction",void 0);A.__decorate([T.property(),ca.messageBundle("esri/widgets/LayerList/t9n/LayerList")],t.prototype,"messages",void 0);A.__decorate([T.property(),ca.messageBundle("esri/t9n/common")],t.prototype,"messagesCommon",void 0);A.__decorate([T.property()],t.prototype,"multipleSelectionEnabled",void 0);A.__decorate([Y.aliasOf("viewModel.operationalItems")],
t.prototype,"operationalItems",void 0);A.__decorate([T.property()],t.prototype,"selectionEnabled",void 0);A.__decorate([T.property()],t.prototype,"selectedItems",void 0);A.__decorate([T.property()],t.prototype,"statusIndicatorsVisible",null);A.__decorate([Y.aliasOf("viewModel.view")],t.prototype,"view",void 0);A.__decorate([U.vmEvent("trigger-action"),T.property({type:oa})],t.prototype,"viewModel",void 0);A.__decorate([T.property()],t.prototype,"visibleElements",void 0);A.__decorate([J.cast("visibleElements")],
t.prototype,"castVisibleElements",null);A.__decorate([Y.aliasOf("viewModel.triggerAction")],t.prototype,"triggerAction",null);A.__decorate([ka.accessibleHandler()],t.prototype,"_toggleActionsOpen",null);A.__decorate([ka.accessibleHandler()],t.prototype,"_triggerPanel",null);A.__decorate([ka.accessibleHandler()],t.prototype,"_triggerAction",null);A.__decorate([ka.accessibleHandler()],t.prototype,"_toggleVisibility",null);A.__decorate([ka.accessibleHandler()],t.prototype,"_toggleChildrenClick",null);
A.__decorate([ka.accessibleHandler()],t.prototype,"_toggleSelection",null);return t=A.__decorate([X.subclass("esri.widgets.LayerList")],t)});