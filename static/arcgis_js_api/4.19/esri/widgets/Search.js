// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.19/esri/copyright.txt for details.
//>>built
require({cache:{"esri/widgets/Search/SearchViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../config ../../core/maybe ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/Error ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/promiseUtils ../../core/Accessor ../../geometry/SpatialReference ../../geometry/Point ../../core/Evented ../../core/Collection ../../intl/locale ../../PopupTemplate ../../symbols/SimpleLineSymbol ../../intl/messages ../../assets ../../portal/Portal ../../symbols/PictureMarkerSymbol ../../symbols/SimpleFillSymbol ../../symbols/SimpleMarkerSymbol ../../symbols/TextSymbol ../../Graphic ../../core/Handles ../../core/watchUtils ../../views/support/layerViewUtils ../support/GoTo ../../chunks/location ./SearchSource ./support/geometryUtils ./LayerSearchSource ./support/locatorUtils ./LocatorSearchSource ../support/geolocationUtils".split(" "),
function(k,b,a,z,p,d,n,f,q,w,t,l,C,A,g,h,x,y,D,I,F,L,J,W,S,Z,ca,X,K,v,e,u,m,E,M,Q,N,T,O,ba,ja,da){function V(ha,fa){return ha.hasOwnProperty(fa)&&null!=ha[fa]&&""!==ha[fa]}const aa=d.getLogger("esri.widgets.Search.SearchViewModel"),R=I.ofType({key:ha=>ha.layer?"layer":"locator",base:N,typeMap:{layer:O,locator:ja}}),ia=x.WGS84,ka=/<(?:.|\s)*?>/g;d=function(ha){function fa(c){c=ha.call(this,c)||this;c._handles=new u;c._gotoController=null;c._searching=null;c.autoNavigate=!0;c.autoSelect=!0;c.defaultPopupTemplate=
null;c.defaultSources=new R;c.defaultSymbol=new ca({url:S.getAssetUrl(a("trident")?"esri/images/search/search-symbol-32.png":"esri/images/search/search-symbol-32.svg"),size:24,width:24,height:24});c.includeDefaultSources=!0;c.maxInputLength=128;c.maxResults=6;c.maxSuggestions=6;c.messages=null;c.minSuggestCharacters=1;c.popupEnabled=!0;c.popupTemplate=null;c.portal=Z.getDefault();c.resultCount=null;c.resultGraphicEnabled=!0;c.resultGraphic=null;c.results=null;c.selectedSuggestion=null;c.searchAllEnabled=
!0;c.selectedResult=null;c.sources=new R;c.suggestionDelay=150;c.suggestionCount=null;c.suggestions=null;c.suggestionsEnabled=!0;c.view=null;return c}k._inheritsLoose(fa,ha);var P=fa.prototype;P.initialize=function(){const c=async()=>{const r=await W.fetchMessageBundle("esri/widgets/Search/t9n/Search");this.messages=r;this.defaultPopupTemplate=new L({title:r.searchResult,content:"{Match_addr}"})};c();this._handles.add([m.on(this,["defaultSources","sources"],"change",()=>this.notifyChange("allSources")),
m.init(this,["includeDefaultSources","view","portal"],()=>this._update()),F.onLocaleChange(c)])};P.destroy=function(){this._abortGoTo();this.clearGraphics();this._handles.destroy();this._handles=null};P.clear=function(){this.searchTerm=""};P.clearGraphics=function(){this._removeHighlight();this._closePopup();this.view&&this.view.graphics.remove(this.resultGraphic);this._set("resultGraphic",null)};P.search=function(c,r){this.emit("search-start");this.clearGraphics();const B=this._createSuggestionForSearch(c);
this._searching=c=this.when().then(()=>this._getResultsFromSources(B,r).then(G=>{const H={activeSourceIndex:this.activeSourceIndex,searchTerm:B.text,numResults:0,numErrors:0,errors:[],results:[]};this._formatResponse(H,G,B);G=this._getFirstResult(H.results);const U=(B.location&&G?G.name:B.text).replace(ka,"");this._set("searchTerm",U);(B.key&&"number"===typeof B.sourceIndex||B.location)&&this._set("selectedSuggestion",B);this._set("results",H.results);this._set("resultCount",H.results.reduce((Y,ea)=>
Y+ea.results.length,0));this.emit("search-complete",H);return this._selectFirstResult(G).then(()=>H)})).then(G=>{this._clearSearching();return G},G=>{this._clearSearching();throw G;});this.notifyChange("state");return c};P.searchNearby=function(c){if(!this.locationEnabled){var r=new t("searchNearby:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});aa.error(r);return Promise.reject(r)}this._searching=r=da.getCurrentPosition().then(B=>da.positionToPoint({position:B,
view:this.view},c)).then(B=>this.search(B,c));this.notifyChange("state");r.catch(()=>{}).then(()=>this._clearSearching());return r};P.select=function(c){this.clearGraphics();if(!c){var r=new t("select:missing-parameter","Cannot select without a searchResult.",{searchResult:c});aa.error(r);return Promise.reject(r)}const {view:B}=this,G=V(c,"sourceIndex")?c.sourceIndex:this._getSourceIndexOfResult(c),H=this.allSources.getItemAt(G);if(!H)return r=new t("select:missing-source","Cannot select without a source.",
{source:H}),aa.error(r),Promise.reject(r);r=H instanceof O?this._getLayerSourcePopupTemplate(H):H.popupTemplate;const U=H.resultSymbol||this._getDefaultSymbol(c),Y=V(H,"resultGraphicEnabled")?H.resultGraphicEnabled:this.resultGraphicEnabled,ea=V(H,"autoNavigate")?H.autoNavigate:this.autoNavigate,pa=V(H,"popupEnabled")?H.popupEnabled:this.popupEnabled,ua=pa?r||this.popupTemplate||this.defaultPopupTemplate:null,{feature:la}=c;if(!la)return r=new t("select:missing-feature","Cannot select without a feature.",
{feature:la}),aa.error(r),Promise.reject(r);const {attributes:va,geometry:sa,layer:wa,sourceLayer:xa}=la,qa=T.getPointFromGeometry(sa);r={layerViewQuery:this._getLayerView(la),elevationQuery:B&&p.isSome(qa)?T.getPointWithElevation(qa,B).catch(()=>qa):Promise.resolve(qa)};return g.eachAlways(r).then(ma=>{const na=ma.layerViewQuery.value,ya=ma.elevationQuery.value;U instanceof v&&(U.text=c.name);ma=B&&ea?c.target||c.extent:null;return(p.isSome(ma)?this._goToSearchResult(ma):Promise.resolve()).then(()=>
{var ra;const oa=na?la:new e({geometry:sa,symbol:U,attributes:va,layer:wa,sourceLayer:xa,popupTemplate:ua}),ta=pa&&(null==(ra=this.view)?void 0:ra.popup);(ra=ta&&oa.getEffectivePopupTemplate(ta.defaultPopupTemplateEnabled))&&B.popup.open({features:[oa],location:ya});na&&E.highlightsSupported(na)&&!ra&&this._highlightFeature({graphic:oa,layerView:na});!na&&Y&&B&&B.graphics.push(oa);this._set("selectedResult",c);this._set("resultGraphic",oa);this.emit("select-result",{result:c,source:H,sourceIndex:G});
return c})})};P.suggest=function(c,r,B){const G=c||this.searchTerm;this.emit("suggest-start",{searchTerm:G});return this._suggestTimer(r,B).then(()=>this._suggestImmediate(G,B).then(H=>{this._set("suggestions",H.results);this._set("suggestionCount",H.results.reduce((U,Y)=>U+Y.results.length,0));this.emit("suggest-complete",H);return H}))};P.when=async function(){await m.whenFalseOnce(this,"updating")};P._update=async function(){const {portal:c,view:r}=this;if(this.includeDefaultSources){var B=this._updatingPromise=
g.eachAlways([null==c?void 0:c.load(),null==r?void 0:r.when()]);if(this.destroyed)return;this.notifyChange("updating");await B;if(B!==this._updatingPromise)return}this._updatingPromise=null;this.notifyChange("updating");B=m.whenOnce(this,"messages");this.destroyed||(this._handles.add(B),await B,this._updateDefaultSources())};P._clearSearching=function(){this._searching=null;this.notifyChange("state")};P._convertHelperServices=function(){var c,r;const B=null==(c=this.portal)?void 0:null==(r=c.helperServices)?
void 0:r.geocode;return B?B.map(G=>{var H;if(!1!==G.placefinding){var U=z.apiKey&&ba.isArcGISWorldGeocoder(G.url)?{url:"https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer"}:null;G=ja.fromJSON({...G,...U});U=null==(H=G.locator)?void 0:H.url;(ba.isArcGISWorldGeocoder(U)||ba.isProxiedArcGISWorldGeocoder(U)||ba.isMeteredArcGISWorldGeocoder(U))&&G.set({singleLineFieldName:"SingleLine",outFields:G.outFields||["Addr_type","Match_addr","StAddr","City"],placeholder:G.placeholder||this.messages.placeholder,
defaultZoomScale:"number"===typeof G.defaultZoomScale?G.defaultZoomScale:2500});if(G.singleLineFieldName)return G}}).filter(Boolean):[]};P._getLayerSources=function(c,r){var B;const G=null==(B=this.view)?void 0:B.map;return c.map(H=>{const U=G.findLayerById(H.id);if(U){H=this._getLayerJSON(H);var Y=O.fromJSON(H);Y.placeholder=r;this._getLayer(U,H).then(ea=>{Y.layer=ea});return Y}}).filter(Boolean).toArray()};P._getTableSources=function(c,r){var B;const G=null==(B=this.view)?void 0:B.map;return c.map(H=>
{const U=G.findTableById(H.id);if(U){H=this._getLayerJSON(H);var Y=O.fromJSON(H);Y.placeholder=r;this._getLayer(U,H).then(ea=>{Y.layer=ea});return Y}}).filter(Boolean).toArray()};P._convertApplicationProperties=function(){var c,r,B;const G=null==(c=this.view)?void 0:c.map;c=null==G?void 0:null==(r=G.applicationProperties)?void 0:null==(B=r.viewing)?void 0:B.search;if(!c)return[];const {enabled:H,hintText:U,layers:Y,tables:ea}=c;if(!H)return[];r=this._getLayerSources(Y,U);B=this._getTableSources(ea,
U);return[...r,...B]};P._getSubLayer=function(c,r){return c.load().then(()=>{if(!c.allSublayers)return Promise.reject();const B=c.allSublayers.find(G=>G.id===r.subLayer);return B?B.createFeatureLayer():Promise.reject()})};P._getBuildingSubLayer=async function(c,r){await c.load();c=c.allSublayers.find(B=>B.id===r.subLayer);if("building-component"!==(null==c?void 0:c.type))return Promise.reject();await c.load();if(null==c.associatedLayer)return Promise.reject();await c.associatedLayer.load();return c};
P._getLayer=function(c,r){return"feature"===c.type||"scene"===c.type||"csv"===c.type||"geojson"===c.type||"ogc-feature"===c.type?Promise.resolve(c):"map-image"===c.type?this._getSubLayer(c,r).catch(()=>{const B=new t("search:create-featurelayer","Could not create a FeatureLayer from the MapImageLayer",{layer:c});aa.error(B);return null}):"building-scene"===c.type?this._getBuildingSubLayer(c,r):Promise.resolve(null)};P._getLayerJSON=function(c){return"function"===typeof c.toJSON?c.toJSON():c};P._updateDefaultSources=
function(){const {defaultSources:c,includeDefaultSources:r}=this;c.removeAll();r&&c.addMany([...this._convertApplicationProperties(),...this._convertHelperServices()]);this.notifyChange("allSources")};P._abortGoTo=function(){this._gotoController&&this._gotoController.abort();this._gotoController=null};P._clear=function(){this._abortGoTo();this._set("resultCount",null);this._set("results",null);this._set("suggestions",null);this._set("suggestionCount",null);this._set("selectedResult",null);this._set("selectedSuggestion",
null);this.emit("search-clear")};P._closePopup=function(){var c;const r=null==(c=this.view)?void 0:c.popup;({resultGraphic:c}=this);if(r&&c){var {selectedFeature:B}=r;B&&B===c&&r.close()}};P._suggestTimer=function(c,r){return g.after(null!=c?c:this.suggestionDelay,null,r&&r.signal)};P._createLocationForSearch=function(c){return c instanceof e?T.getPointFromGeometry(c.geometry):c instanceof y?c:Array.isArray(c)&&2===c.length?new y({longitude:c[0],latitude:c[1]}):null};P._createSuggestionForSearch=
function(c){if(c&&V(c,"key")&&V(c,"text")&&V(c,"sourceIndex"))return c;const r=this._createLocationForSearch(c),B="string"===typeof c?c:this.searchTerm,{selectedSuggestion:G,selectedResult:H}=this,U=(c=!c&&G&&H)&&G.location;return c&&G.key===H.key&&G.sourceIndex===H.sourceIndex||U?G:{location:p.unwrap(r),text:r?"":B,sourceIndex:null,key:null}};P._getFirstResult=function(c){let r=null;c&&c.some(B=>{({results:B}=B);B=B[0];const G=!!B;G&&(r=B);return G});return r};P._selectFirstResult=function(c){return this.autoSelect&&
c?this.select(c):Promise.resolve(null)};P._suggestImmediate=function(c,r){return this.when().then(()=>this._getSuggestionsFromSources(c,r)).then(B=>{const G={activeSourceIndex:this.activeSourceIndex,searchTerm:c,numResults:0,numErrors:0,errors:[],results:[]};this._formatResponse(G,B);return G})};P._formatSourceResponse=function(c,r,B){const G=r&&r.value||[];r=r&&r.error;const H=this.allSources.getItemAt(B);r?(c.errors.push({sourceIndex:B,source:H,error:r}),c.numErrors++):(c.results.push({sourceIndex:B,
source:H,results:G}),c.numResults+=G.length)};P._formatResponse=function(c,r,B){if(r)if(-1===c.activeSourceIndex){const G=B&&V(B,"sourceIndex")&&-1!==B.sourceIndex?B.sourceIndex:void 0;r.forEach((H,U)=>{this._formatSourceResponse(c,H,void 0!==G?G:U)})}else this._formatSourceResponse(c,r[0],c.activeSourceIndex)};P._getResultsFromSources=function(c,r){var {allSources:B}=this;const G=!c.location&&V(c,"sourceIndex")?c.sourceIndex:this.activeSourceIndex,H=[];if(!B.length)return B=new t("search:no-sources-defined",
"At least one source is required.",{allSources:B}),aa.error(B),Promise.reject(B);-1===G?B.forEach((U,Y)=>{H.push(this._getResultsFromSource(c,Y,r))}):H.push(this._getResultsFromSource(c,G,r));return g.eachAlways(H)};P._getSuggestionsFromSources=function(c,r){const {allSources:B,activeSourceIndex:G}=this,H=[];if(!B.length){const U=new t("suggest:no-sources-defined","At least one source is required.",{allSources:B});aa.error(U);return Promise.reject(U)}-1===G?B.forEach((U,Y)=>{H.push(this._getSuggestionsFromSource(c,
Y,r))}):H.push(this._getSuggestionsFromSource(c,G,r));return g.eachAlways(H)};P._getResultsFromSource=function(c,r,B){var G;const H=this.allSources.getItemAt(r),{location:U=null}=c,Y=(null==(G=this.view)?void 0:G.spatialReference)||ia;G=V(H,"maxResults")?H.maxResults:this.maxResults;const ea=H instanceof O&&V(H,"exactMatch")?H.exactMatch:!1,{view:pa}=this;return H.getResults({view:pa,sourceIndex:r,location:U,suggestResult:c,spatialReference:Y,exactMatch:ea,maxResults:G},B)};P._getSuggestionsFromSource=
function(c,r,B){const G=this.allSources.getItemAt(r);var H=V(G,"suggestionsEnabled")?G.suggestionsEnabled:this.suggestionsEnabled,U=c.length;const Y=V(G,"minSuggestCharacters")?G.minSuggestCharacters:this.minSuggestCharacters;if(H&&c.trim()&&U>=Y){var ea;H=(null==(ea=this.view)?void 0:ea.spatialReference)||ia;ea=V(G,"maxSuggestions")?G.maxSuggestions:this.maxSuggestions;({view:U}=this);return G.getSuggestions({view:U,sourceIndex:r,suggestTerm:c,spatialReference:H,maxSuggestions:ea},B)}return Promise.resolve(null)};
P.createDefaultSymbol=function(c,r){if("point"===r)return new K({color:c.color,size:c.size,outline:{color:c.outline.color,width:c.outline.width}});if("polyline"===r)return new J({color:c.color,width:c.width});if("polygon"===r)return new X({color:c.color,outline:{color:c.outline.color,width:c.outline.width}})};P._getLayerSourcePopupTemplate=function(c){const {layer:r}=c;if(r)return V(c,"popupTemplate")?c.popupTemplate:r.popupTemplate};P._getSourceIndexOfResult=function(c){let r=null;this.results.some(B=>
B.results.some(G=>G===c?(r=B.sourceIndex,!0):!1));return r};P._goToSearchResult=async function(c){const r=!!c;this._abortGoTo();const B=g.createAbortController();this._gotoController=B;await this.callGoTo({target:{target:c},options:{animate:r,signal:B.signal}});this._gotoController=null};P._getDefaultSymbol=function(c){var r,B,G,H=null==(r=this.view)?void 0:null==(B=r.map)?void 0:null==(G=B.basemap)?void 0:G.id;c=p.get(c,"feature","geometry","type");return p.isSome(c)&&(H=(H=Q.getSchemes({basemap:H,
geometryType:c})||Q.getSchemes({basemap:"topo",geometryType:c}))&&H.primaryScheme)?(H.color&&V(H,"opacity")&&(H.color.a=H.opacity),this.createDefaultSymbol(H,c)):this.defaultSymbol};P._removeHighlight=function(){this._handles.remove("highlight")};P._getLayerView=async function(c){const {view:r}=this;if(!c||!r||"building-component"===c.layer.type)return Promise.resolve(null);({layer:c}=c);await r.when();return r.whenLayerView(c)};P._highlightFeature=function(c){const {graphic:r,layerView:B}=c,{attributes:G,
layer:H}=r;({objectIdField:c}=H);c=B.highlight(G&&G[c]||r);this._handles.add(c,"highlight")};k._createClass(fa,[{key:"activeSource",get:function(){return this.allSources.getItemAt(this.activeSourceIndex)||null}},{key:"activeSourceIndex",get:function(){return 1!==this.allSources.length&&this.searchAllEnabled?-1:0},set:function(c){void 0===c?this._clearOverride("activeSourceIndex"):this._override("activeSourceIndex",c)}},{key:"allPlaceholder",get:function(){var c;return null==(c=this.messages)?void 0:
c.allPlaceholder},set:function(c){c?this._override("allPlaceholder",c):this._clearOverride("allPlaceholder")}},{key:"allSources",get:function(){const {sources:c,defaultSources:r,includeDefaultSources:B}=this,G="function"===typeof B?B.call(null,{sources:c,defaultSources:r}):B?r.concat(c):c,H=this._get("allSources")||new R;H.removeAll();H.addMany(G.filter(Boolean));return H}},{key:"locationEnabled",get:function(){return this._get("locationEnabled")||da.supported()},set:function(c){if(void 0===c)this._clearOverride("locationEnabled");
else{var r=da.supported();if(c&&!r){const B=new t("locationEnabled:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});aa.error(B)}this._override("locationEnabled",c&&r)}}},{key:"placeholder",get:function(){const {allSources:c,activeSourceIndex:r,allPlaceholder:B}=this;if(-1===r)return B;const G=c.getItemAt(r);return G?G.placeholder:""}},{key:"searchTerm",get:function(){return this._get("searchTerm")||""},set:function(c){this._set("searchTerm",c||"");this.clearGraphics();
this.selectedSuggestion&&this.selectedSuggestion.text!==c&&this._set("selectedSuggestion",null);""===c&&this._clear()}},{key:"state",get:function(){return this._searching?"searching":this.updating?"loading":0===this.allSources.length?"disabled":"ready"}},{key:"updating",get:function(){return null!=this._updatingPromise}}]);return fa}(M.GoToMixin(D.EventedMixin(h)));d.ALL_INDEX=-1;b.__decorate([f.property({readOnly:!0,value:null})],d.prototype,"activeSource",null);b.__decorate([f.property()],d.prototype,
"activeSourceIndex",null);b.__decorate([f.property()],d.prototype,"allPlaceholder",null);b.__decorate([f.property({readOnly:!0,dependsOn:["defaultSources.length","sources.length","includeDefaultSources"]})],d.prototype,"allSources",null);b.__decorate([f.property()],d.prototype,"autoNavigate",void 0);b.__decorate([f.property()],d.prototype,"autoSelect",void 0);b.__decorate([f.property()],d.prototype,"defaultPopupTemplate",void 0);b.__decorate([f.property({readOnly:!0})],d.prototype,"defaultSources",
void 0);b.__decorate([f.property()],d.prototype,"defaultSymbol",void 0);b.__decorate([f.property()],d.prototype,"includeDefaultSources",void 0);b.__decorate([f.property()],d.prototype,"locationEnabled",null);b.__decorate([f.property()],d.prototype,"maxInputLength",void 0);b.__decorate([f.property()],d.prototype,"maxResults",void 0);b.__decorate([f.property()],d.prototype,"maxSuggestions",void 0);b.__decorate([f.property()],d.prototype,"messages",void 0);b.__decorate([f.property()],d.prototype,"minSuggestCharacters",
void 0);b.__decorate([f.property({readOnly:!0})],d.prototype,"placeholder",null);b.__decorate([f.property()],d.prototype,"popupEnabled",void 0);b.__decorate([f.property({type:L})],d.prototype,"popupTemplate",void 0);b.__decorate([f.property({type:Z})],d.prototype,"portal",void 0);b.__decorate([f.property()],d.prototype,"resultCount",void 0);b.__decorate([f.property()],d.prototype,"resultGraphicEnabled",void 0);b.__decorate([f.property({readOnly:!0})],d.prototype,"resultGraphic",void 0);b.__decorate([f.property({readOnly:!0})],
d.prototype,"results",void 0);b.__decorate([f.property({readOnly:!0})],d.prototype,"selectedSuggestion",void 0);b.__decorate([f.property()],d.prototype,"searchAllEnabled",void 0);b.__decorate([f.property({readOnly:!0})],d.prototype,"selectedResult",void 0);b.__decorate([f.property()],d.prototype,"searchTerm",null);b.__decorate([f.property({type:R})],d.prototype,"sources",void 0);b.__decorate([f.property({readOnly:!0,dependsOn:["allSources.length","updating"]})],d.prototype,"state",null);b.__decorate([f.property()],
d.prototype,"suggestionDelay",void 0);b.__decorate([f.property()],d.prototype,"suggestionCount",void 0);b.__decorate([f.property({readOnly:!0})],d.prototype,"suggestions",void 0);b.__decorate([f.property()],d.prototype,"suggestionsEnabled",void 0);b.__decorate([f.property({readOnly:!0})],d.prototype,"updating",null);b.__decorate([f.property()],d.prototype,"view",void 0);b.__decorate([f.property()],d.prototype,"clear",null);return d=b.__decorate([w.subclass("esri.widgets.Search.SearchViewModel")],
d)})},"esri/chunks/location":function(){define(["exports","../Color","../smartMapping/symbology/support/symbologyUtils","../smartMapping/symbology/support/utils"],function(k,b,a,z){function p(t){return a.getThemesforBasemap(q,t)}function d(t){const l=a.getRawSchemes({basemap:t.basemap,geometryType:t.geometryType,basemapTheme:t.basemapTheme,theme:q.get("default")});if(l){var {schemesInfo:C,basemapId:A,basemapTheme:g}=l;return{primaryScheme:f(t,C.primary),secondarySchemes:C.secondary.map(h=>f(t,h)).filter(Boolean),
basemapId:A,basemapTheme:g}}}function n(t){if(t)return t={...t},t.color&&(t.color=new b(t.color)),"outline"in t&&t.outline&&(t.outline={color:t.outline.color&&new b(t.outline.color),width:t.outline.width}),t}function f(t,l){var C="mesh"!==t.geometryType&&t.worldScale?t.view:null;switch(t.geometryType){case "point":case "multipoint":t={...l.outline};var A=l.size;return{color:new b(l.color),outline:{color:new b(t.color),width:t.width},size:C?z.toWorldScale(A,C):A,opacity:1};case "polyline":return t=
l.width,{color:new b(l.color),width:C?z.toWorldScale(t,C):t,opacity:1};case "polygon":t=l.size;A={...l.outline};var g=l.opacity;return{color:new b(l.color),outline:{color:new b(A.color),width:A.width},size:C?z.toWorldScale(t,C):t,opacity:g};case "mesh":return C=l.opacity,{color:new b(l.color),opacity:C}}}const q=a.createThemes({themeDictionary:{default:{name:"default",label:"Default",description:"Default theme for basic visualization of features.",schemes:{point:{light:{primary:{color:[77,77,77,1],
outline:{color:[255,255,255,.25],width:"1px"},size:"8px"},secondary:[{color:[226,119,40,1],outline:{color:[255,255,255,.25],width:"1px"},size:"8px"},{color:[255,255,255,1],outline:{color:[51,51,51,.25],width:"1px"},size:"8px"}]},dark:{primary:{color:[255,255,255,1],outline:{color:[92,92,92,.25],width:"1px"},size:"8px"},secondary:[{color:[226,119,40,1],outline:{color:[255,255,255,.25],width:"1px"},size:"8px"},{color:[26,26,26,1],outline:{color:[178,178,178,.25],width:"1px"},size:"8px"}]}},polyline:{light:{primary:{color:[77,
77,77,1],width:"2px"},secondary:[{color:[226,119,40,1],width:"2px"},{color:[255,255,255,1],width:"2px"}]},dark:{primary:{color:[255,255,255,1],width:"2px"},secondary:[{color:[226,119,40,1],width:"2px"},{color:[26,26,26,1],width:"2px"}]}},polygon:{light:{primary:{size:"12px",color:[227,139,79,1],outline:{color:[255,255,255,.25],width:"1px"},opacity:.8},secondary:[{size:"12px",color:[128,128,128,1],outline:{color:[255,255,255,.25],width:"1px"},opacity:.8},{size:"12px",color:[255,255,255,1],outline:{color:[128,
128,128,.25],width:"1px"},opacity:.8}]},dark:{primary:{size:"12px",color:[227,139,79,1],outline:{color:[92,92,92,.25],width:"1px"},opacity:.8},secondary:[{size:"12px",color:[178,178,178,1],outline:{color:[92,92,92,.25],width:"1px"},opacity:.8},{size:"12px",color:[26,26,26,1],outline:{color:[128,128,128,.25],width:"1px"},opacity:.8}]}}}}}});var w=Object.freeze({__proto__:null,getThemes:p,getSchemes:d,cloneScheme:n});k.cloneScheme=n;k.getSchemes=d;k.getThemes=p;k.locationSymbology=w})},"esri/smartMapping/symbology/support/symbologyUtils":function(){define(["exports",
"./Theme"],function(k,b){k.createThemes=function(a){a=a.themeDictionary;const z=new Map;for(const p in a)z.set(p,new b(a[p]));return z};k.filterSchemesByName=function(a,z){if(a&&z){var p=null;z=[z.primaryScheme,...z.secondarySchemes];for(const d of z)if(d.name.toLowerCase()===a.toLowerCase()){p=d;break}return p}};k.filterSchemesByTag=function(a,z,p){if(!a&&!z||!p)return[];const d=!(a&&a.length),n=!(z&&z.length);var f=[p.primaryScheme,...p.secondarySchemes];p=[];for(const q of f){f=d?!0:a.some(t=>
-1<q.tags.indexOf(t));const w=!n&&z.some(t=>-1<q.tags.indexOf(t));f&&!w&&p.push(q)}return p};k.getRawSchemes=function(a){const z=a.theme;if(z)return z.getRawSchemes({basemap:a.basemap,geometryType:a.geometryType,basemapTheme:a.basemapTheme})};k.getThemesforBasemap=function(a,z){const p=[];a.forEach(d=>{d.isBasemapSupported(z)&&p.push({name:d.name,label:d.label,description:d.description,basemaps:[...d.supportedBasemaps]})});return p};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/smartMapping/symbology/support/Theme":function(){define(["../../../core/lang",
"../../../core/maybe","../../support/utils"],function(k,b,a){return function(){function z(d){this.schemes=this.basemapGroups=this.supportedBasemaps=this.description=this.label=this.name=null;const {name:n,label:f,description:q,schemes:w}=d;this.name=n;this.label=f;this.description=q;this.schemes=w;d=d.basemapGroups||a.defaultBasemapGroups;let t=[];if(d)for(const l in d)t=t.concat(d[l]);this.supportedBasemaps=t;this.basemapGroups=d}var p=z.prototype;p.isBasemapSupported=function(d){return(d=a.getBasemapId(d,
this.supportedBasemaps))&&-1<this.supportedBasemaps.indexOf(d)?!0:!1};p.getRawSchemes=function(d){{var n=d.basemap;var f=d.basemapTheme;var q=null;let l=null;n&&(q=a.getBasemapId(n,this.supportedBasemaps,!1))&&(n=a.getBasemapGroup(q),b.isSome(n)&&(l=n));!q&&f&&(q="dark"===f?"dark-gray":"gray",l=f);q||l||(q="gray",l="light");f={basemapId:q,basemapTheme:l}}const {basemapId:w,basemapTheme:t}=f;f=t;w&&(q=a.getBasemapGroup(w,this.basemapGroups),b.isSome(q)&&(f=q));d=d.geometryType;"multipoint"===d?d="point":
"mesh"===d&&(d="polygon");return{schemesInfo:k.clone((this.schemes[d]||this.schemes["default"])[f]),basemapId:w,basemapTheme:t}};return z}()})},"esri/smartMapping/support/utils":function(){define(["exports","../../support/arcadeOnDemand","../../Basemap","../../support/basemapUtils"],function(k,b,a,z){function p(l){return String(l).padStart(2,"0")}function d(l,C,A){if("date"===C||"number"===C){"number"===C&&(l=new Date(l));C=A?l.getFullYear():l.getUTCFullYear();const g=p((A?l.getMonth():l.getUTCMonth())+
1),h=p(A?l.getDate():l.getUTCDate()),x=p(A?l.getHours():l.getUTCHours()),y=p(A?l.getMinutes():l.getUTCMinutes());l=p(A?l.getSeconds():l.getUTCSeconds());l=`TIMESTAMP'${C}-${g}-${h} ${x}:${y}:${l}'`}return l}function n(l,C){if(C instanceof Date)return"date";if("number"===typeof C)return"number";if("string"===typeof C&&(l=l.getField(C),"\x3cnow\x3e"!==C.toLowerCase()&&l&&"date"===l.type))return"field"}const f={light:"streets gray topo terrain national-geographic oceans osm gray-vector streets-vector topo-vector streets-relief-vector streets-navigation-vector".split(" "),
dark:["satellite","hybrid","dark-gray","dark-gray-vector","streets-night-vector"]},q={years:365,months:30,days:1,hours:1/24,minutes:1/1440,seconds:1/86400,milliseconds:1/864E5},w=["integer","small-integer"];let t=null;k.castIntegerFieldToFloat=function(l){return`cast(${l} as float)`};k.defaultBasemapGroups=f;k.getBasemapGroup=function(l,C=f){for(const A in C)if(-1<C[A].indexOf(l))return A};k.getBasemapId=function(l,C,A=!0){let g=null;"string"===typeof l&&-1<C.indexOf(l)?g=l:l instanceof a&&(g=z.getWellKnownBasemapId(l));
return A?g||"gray":g};k.getDateDiffSQL=function(l,C,A,g){var {hasQueryEngine:h}=l;A=d(A,n(l,A),h);l=d(C,n(l,C),h);l=`(${A} - ${l})`;h&&(l=`(${l} * ${q.milliseconds})`);g=q[g];h="/";1>g&&(g=1/g,h="*");return{sqlExpression:1===g?l:`(${l} ${h} ${g})`,sqlWhere:null}};k.getDateType=n;k.getFieldsList=async function(l){const C=l.field,A=l.normalizationField;l=l.valueExpression;var g=[];l&&(t||({arcadeUtils:g}=await b.loadArcade(),t=g),g=t.extractFieldNames(l));C&&g.push(C);A&&g.push(A);return g};k.getNormalizationType=
function(l){let C=l.normalizationType;C||(l.normalizationField?C="field":null!=l.normalizationTotal&&(C="percent-of-total"));return C};k.isIntegerField=function(l,C){return(l=C&&l.getField(C))&&-1<w.indexOf(l.type)};k.unitValueInDays=q;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/smartMapping/symbology/support/utils":function(){define(["exports","../../../core/screenUtils","../../support/utils"],function(k,b,a){function z(q,w){return q.r===w.r&&q.g===w.g&&q.b===w.b}function p(q){var w=
q.width;const t=q.height;let l=q.pixelSizeAt(q.toMap(b.createScreenPoint(.5*w,.5*t),{exclude:[]}));0>=l&&(l=q.pixelSizeAt(q.toMap(b.createScreenPoint(.5*w,.95*t),{exclude:[]})),0>=l&&(w=q.camera.position.clone(),w.z=0,l=2*q.pixelSizeAt(w)));return l}const d="streets gray topo terrain national-geographic oceans osm gray-vector streets-vector topo-vector streets-relief-vector streets-navigation-vector".split(" "),n=["satellite","hybrid","dark-gray","dark-gray-vector","streets-night-vector"],f=[].concat(d).concat(n);
k.getBasemapTheme=function(q){q=a.getBasemapId(q,f,!1);if(!q)return null;if(-1<d.indexOf(q))return"light";if(-1<n.indexOf(q))return"dark"};k.getPixelSize=p;k.getStorageType=function(q){return"multipoint"===q?"point":"mesh"===q?"polygon":q};k.getTagsFromSchemes=function(q){if(!q)return[];const w=new Set,t=[q.primaryScheme];q.secondarySchemes&&t.push(...q.secondarySchemes);for(const l of t)l&&"tags"in l&&l.tags&&l.tags.forEach(C=>w.add(C));return[...w]};k.hasIdenticalColors=function(q,w){let t=0;if(q.length===
w.length){let l=q.every((C,A)=>z(C,w[A]));l?t=1:(l=q.slice(0).reverse().every((C,A)=>z(C,w[A])))&&(t=-1)}return t};k.toWorldScale=function(q,w){return Math.ceil(p(w)*b.pt2px(b.toPt(q)))};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/widgets/Search/SearchSource":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../core/Identifiable".split(" "),
function(k,b,a,z,p,d,n,f,q,w,t,l,C){a=function(A){function g(h){h=A.call(this,h)||this;h.autoNavigate=null;h.filter=null;h.getResults=null;h.getSuggestions=null;h.maxResults=null;h.maxSuggestions=null;h.minSuggestCharacters=null;h.outFields=null;h.placeholder="";h.popupEnabled=null;h.popupTemplate=null;h.prefix="";h.resultGraphicEnabled=null;h.resultSymbol=null;h.suggestionsEnabled=null;h.suffix="";h.withinViewEnabled=!1;h.zoomScale=null;return h}k._inheritsLoose(g,A);return g}(C.IdentifiableMixin(l.JSONSupport));
b.__decorate([d.property()],a.prototype,"autoNavigate",void 0);b.__decorate([d.property()],a.prototype,"filter",void 0);b.__decorate([d.property()],a.prototype,"getResults",void 0);b.__decorate([d.property()],a.prototype,"getSuggestions",void 0);b.__decorate([d.property()],a.prototype,"maxResults",void 0);b.__decorate([d.property()],a.prototype,"maxSuggestions",void 0);b.__decorate([d.property()],a.prototype,"minSuggestCharacters",void 0);b.__decorate([d.property()],a.prototype,"outFields",void 0);
b.__decorate([d.property()],a.prototype,"placeholder",void 0);b.__decorate([d.property()],a.prototype,"popupEnabled",void 0);b.__decorate([d.property()],a.prototype,"popupTemplate",void 0);b.__decorate([d.property()],a.prototype,"prefix",void 0);b.__decorate([d.property()],a.prototype,"resultGraphicEnabled",void 0);b.__decorate([d.property()],a.prototype,"resultSymbol",void 0);b.__decorate([d.property()],a.prototype,"suggestionsEnabled",void 0);b.__decorate([d.property()],a.prototype,"suffix",void 0);
b.__decorate([d.property()],a.prototype,"withinViewEnabled",void 0);b.__decorate([d.property()],a.prototype,"zoomScale",void 0);return a=b.__decorate([f.subclass("esri.widgets.Search.SearchSource")],a)})},"esri/widgets/Search/support/geometryUtils":function(){define("exports ../../../core/maybe ../../../core/Logger ../../../core/Error ../../../geometry/Extent ../../../geometry ../../../geometry/support/scaleUtils".split(" "),function(k,b,a,z,p,d,n){function f(w,t,l){const C=w.hasZ?w.z:void 0;return t&&
t.map?(l?n.getExtentForScale(t,l):t.extent).clone().centerAt(w).set({zmax:C,zmin:C}):new p({xmin:w.x-.25,ymin:w.y-.25,xmax:w.x+.25,ymax:w.y+.25,spatialReference:w.spatialReference,zmin:C,zmax:C})}const q=a.getLogger("esri.widgets.Search.support.geometryUtils");k.createExtentFromGeometry=function(w,t,l){if(b.isNone(w))return null;if("extent"===w.type)return w;if("multipoint"===w.type||"polygon"===w.type||"polyline"===w.type)return w.extent;if("point"===w.type)return f(w,t,l)};k.getPointFromGeometry=
function(w){if(b.isNone(w))return null;switch(w.type){case "point":return w;case "extent":return w.center;case "polygon":return w.centroid;case "multipoint":return w.getPoint(0);case "polyline":return w.getPoint(0,0)}return null};k.getPointWithElevation=function(w,t){var l,C;if(!t)return q.error("missing-parameter: view is missing."),Promise.reject(new z("searchgeometryutils:missing-parameter","view is missing."));if(!w)return q.error("missing-parameter: point is missing."),Promise.reject(new z("searchgeometryutils:missing-parameter",
"point is missing."));if(w.hasZ||"2d"===t.type)return Promise.resolve(w);const A=null==t?void 0:null==(l=t.map)?void 0:l.ground;return A&&A.layers.length?A.queryElevation(w,{cache:null==(C=t.basemapTerrain)?void 0:C.elevationQueryCache}).then(g=>g.geometry):Promise.resolve(w)};k.scaleExtent=function(w,t,l){return b.isNone(w)||b.isNone(t)?null:f(w.center,t,l)};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/geometry/support/scaleUtils":function(){define(["exports","../../core/unitUtils"],
function(k,b){function a(z,p){p=b.getMetersPerUnitForSR(p);return z/(p*b.inchesPerMeter*96)}k.getExtentForScale=function(z,p){const d=z.extent;z=z.width;p=a(p,d.spatialReference);return d.clone().expand(p*z/d.width)};k.getResolutionForScale=a;k.getScale=function(z,p){p=p||z.extent;z=z.width;const d=b.getMetersPerUnitForSR(p&&p.spatialReference);return p&&z?p.width/z*d*b.inchesPerMeter*96:0};k.getScaleForResolution=function(z,p){p=b.getMetersPerUnitForSR(p);return z*p*b.inchesPerMeter*96};Object.defineProperty(k,
"__esModule",{value:!0})})},"esri/widgets/Search/LayerSearchSource":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/lang ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ./SearchSource ./support/layerSearchUtils".split(" "),function(k,b,a,z,p,d,n,
f,q,w,t,l,C,A){var g;a=g=function(h){function x(){var D=h.apply(this,arguments)||this;D.displayField=null;D.exactMatch=null;D.orderByFields=null;D.searchFields=null;D.searchTemplate=null;D.suggestionTemplate=null;D.getResults=(I,F)=>A.getResults({source:k._assertThisInitialized(D),...I},F);D.getSuggestions=(I,F)=>A.getSuggestions({source:k._assertThisInitialized(D),...I},F);return D}k._inheritsLoose(x,h);var y=x.prototype;y.clone=function(){return new g({autoNavigate:this.autoNavigate,filter:this.filter,
maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?z.clone(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,displayField:this.displayField,exactMatch:this.exactMatch,
layer:this.layer,searchFields:this.searchFields?z.clone(this.searchFields):null,suggestionTemplate:this.suggestionTemplate,zoomScale:this.zoomScale})};y._getFirstStringField=function(){const D=this.layer;let I="";D&&D.fields&&D.fields.some(F=>"string"===F.type?(I=F.name,!0):!1);return I};y._getDisplayField=function(){return this.displayField||this.layer.displayField||this._getFirstStringField()};y._getSearchFieldsString=function(){const {layer:D,searchFields:I}=this;return D.loaded?`: ${(I||[this._getDisplayField()]).map(F=>
{const L=D.getField(F);return L&&L.alias||F}).join(", ")}`:""};y._getLayerTitle=function(){var {layer:D}=this;if(D&&({title:D}=D,D))return`${D}${this._getSearchFieldsString()}`};k._createClass(x,[{key:"layer",set:function(D){this._set("layer",D);D&&D.load().catch(()=>{})}},{key:"name",get:function(){return this._getLayerTitle()||""},set:function(D){void 0===D?this._clearOverride("name"):this._override("name",D)}}]);return x}(C);b.__decorate([n.property({json:{read:{source:"field.name"},write:{target:"field.name"}}})],
a.prototype,"displayField",void 0);b.__decorate([n.property({json:{read:{source:"field.exactMatch"},write:{target:"field.exactMatch"}}})],a.prototype,"exactMatch",void 0);b.__decorate([n.property({value:null})],a.prototype,"layer",null);b.__decorate([n.property()],a.prototype,"name",null);b.__decorate([n.property({type:[String],json:{write:!0}})],a.prototype,"orderByFields",void 0);b.__decorate([n.property()],a.prototype,"searchFields",void 0);b.__decorate([n.property()],a.prototype,"searchTemplate",
void 0);b.__decorate([n.property()],a.prototype,"suggestionTemplate",void 0);return a=g=b.__decorate([q.subclass("esri.widgets.Search.LayerSearchSource")],a)})},"esri/widgets/Search/support/layerSearchUtils":function(){define("exports ../../../core/lang ../../../core/maybe ../../../core/Logger ../../../core/Error ../../../geometry/Polygon ../../../intl/date ../../../intl/substitute ../../../intl ../../../core/unitUtils ./geometryUtils".split(" "),function(k,b,a,z,p,d,n,f,q,w,t){function l(K,v){const {filter:e,
withinViewEnabled:u}=K;K=v&&v.extent;return e&&e.geometry||(u&&K?K:void 0)}async function C(K){K&&await K.load()}function A(K){var v,e,u;return null!=(v=null==K?void 0:null==(e=K.capabilities)?void 0:null==(u=e.query)?void 0:u.supportsPagination)?v:!1}function g(K){let v="";K&&({fields:K}=K,K&&K.some(e=>"string"===e.type?(v=e.name,!0):!1));return v}function h(K,v){return K&&v?v.every(e=>!!K.getField(e)):!1}function x(K){for(let v=0;v<K.length;v++)if(255<K.charCodeAt(v))return!0;return!1}function y(K,
v,e){let u=null;({codedValues:K}=K);K&&K.some(m=>{var E=m.name;E=e?E:E.toLowerCase();return(e?v:v.toLowerCase())===E?(u=m.code.toString(),!0):!1});return u}function D(K,v){return(v=v&&v.where)?`(${K}) AND (${v})`:K}function I(K,v,e,u,m){const {definitionExpression:E}=v;let M="";if(K){const Q=Z.test(v.url)&&x(K)?"N":"";e&&e.forEach(N=>{var T=v.getField(N);N=((N="function"===typeof v.getFieldDomain&&v.getFieldDomain(N))&&"coded-value"===N.type?y(N,K,m):null)||K||null;if(null!==N){{const O=T.type;T=
T.name;"string"===O||"date"===O||"global-id"===O?m?T=D(`${T} = ${Q}'${N}'`,u):(N=N.toUpperCase(),T=D(`UPPER(${T}) LIKE ${Q}'%${N}%'`,u)):"oid"===O||"small-integer"===O||"integer"===O||"single"===O||"double"===O?(N=Number(N),T=isNaN(N)?null:D(`${T} = ${N}`,u)):T=D(`${T} = ${N}`,u)}T&&(M+=M?` OR (${T})`:`(${T})`)}})}return E?`(${E}) AND (${M})`:M}function F(K,v){let e=null;({codedValues:K}=K);K&&K.length&&K.some(u=>u.code===v?(e=u.name,!0):!1);return e}function L(K,v){return K[Object.keys(K).find(e=>
e.toLowerCase()===v.toLowerCase())]}function J(K,v,e){const u=K.sourceLayer,{attributes:m}=K;K="function"===typeof u.getFieldDomain&&u.getFieldDomain(e);return v?f.substitute(v,m):e&&m?(v=u.getField(e),e=L(m,e),null==e?"":K&&"coded-value"===K.type?F(K,e):"date"===(null==v?void 0:v.type)?n.formatDate(new Date(e)):"number"===typeof e?e.toString():"string"!==typeof e?"":e.trim()):""}function W(K,v,e,u){return K.features.map(m=>{var E=m.sourceLayer,{attributes:M}=m;({objectIdField:E}=E);M=M[E];return m=
{text:J(m,v.suggestionTemplate,u),key:M,sourceIndex:e}})}function S(K,v,e,u,m,E,M){return K.features.map(Q=>{{var N=Q.clone();var T=Q.sourceLayer;T=(T=T&&T.objectIdField)&&Q.attributes[T];const ba=J(Q,e.searchTemplate,m);var O=t.createExtentFromGeometry(N.geometry,v,E);O="number"===typeof M?t.scaleExtent(b.clone(O),v,M):O;Q=Q.clone();a.isSome(O)&&(Q.geometry=d.fromExtent(O));N={extent:O,target:Q,feature:N,key:T,name:ba,sourceIndex:u}}return N})}const Z=/https?:\/\/services.*\.arcgis\.com/i,ca=/(?:\{([^}]+)\})/g,
X=z.getLogger("esri.widgets.Search.support.layerSearchUtils");k.getResults=function(K,v){const {exactMatch:e=!1,location:u,maxResults:m,spatialReference:E,source:M,sourceIndex:Q,suggestResult:N,view:T}=K,{layer:O,filter:ba,zoomScale:ja}=M,da=T&&T.scale,V=l(M,T),aa=v&&v.signal;return C(O).then(()=>{const R=O.popupTemplate;return R?R.getRequiredFields(O.fields):null}).then(R=>{var ia,ka;const {objectIdField:ha,returnZ:fa}=O,P=M.displayField||M.layer.displayField||g(M.layer);if(!O.getField(P))throw X.error("invalid-field: displayField is invalid."),
new p("getResults():invalid-field","displayField is invalid.");R=R&&R.length?R:[P];const c=M.outFields||R;R=c&&-1!==c.indexOf("*");-1!==c.indexOf(ha)||R||c.push(ha);if(!R&&!h(O,c))throw X.error("invalid-field: outField is invalid."),new p("getResults():invalid-field","outField is invalid.");R=O.createQuery();var {orderByFields:r}=M;r&&(R.orderByFields=r);E&&(R.outSpatialReference=E,r=1/w.getMetersPerUnitForSR(E))&&(R.maxAllowableOffset=r);r="mesh"===O.geometryType||"multipatch"===O.geometryType;const B=
(null==(ia=O.capabilities)?void 0:null==(ka=ia.data)?void 0:ka.supportsZ)&&!r;R.returnZ=B&&!1!==fa;R.returnGeometry=!0;R.multipatchOption=r?"xyFootprint":null;c&&(R.outFields=c);if(u)R.geometry=u;else if(N.key)R.objectIds=[parseInt(N.key,10)];else{ia=M.searchFields||[P];if(!h(O,ia))throw X.error("invalid-field: search field is invalid."),new p("getResults():invalid-field","search field is invalid.");A(O)&&(R.num=m);V&&(R.geometry=V);if(!N.text.trim())return[];const {prefix:G="",suffix:H=""}=M;ka=
`${G}${N.text}${H}`.replace(/'/g,"''");ia=I(ka,O,ia,ba,e);if(!ia)return[];R.where=ia}return O.queryFeatures(R,{signal:aa}).then(G=>S(G,T,M,Q,P,da,ja))})};k.getSuggestions=function(K,v){const {source:e,spatialReference:u,view:m,suggestTerm:E,maxSuggestions:M,sourceIndex:Q}=K,{layer:N,filter:T}=e,O=v&&v.signal,ba=l(e,m);return C(N).then(()=>{if(!A(N))return[];const ja=e.displayField||e.layer.displayField||g(e.layer);var da=e.searchFields||[ja];const V=[];e.suggestionTemplate?e.suggestionTemplate.replace(ca,
(fa,P)=>{V.push(P);return fa}):V.push(ja);var aa=V&&-1!==V.indexOf("*");-1!==V.indexOf(N.objectIdField)||aa||V.push(N.objectIdField);var R=!!N.getField(ja);aa=aa||h(N,V);const ia=h(N,da);if(!R)throw X.error("invalid-field: displayField is invalid."),new p("getSuggestions():invalid-field","displayField is invalid.");if(!aa)throw X.error("invalid-field: outField is invalid."),new p("getSuggestions():invalid-field","outField is invalid.");if(!ia)throw X.error("invalid-field: search field is invalid."),
new p("getSuggestions():invalid-field","search field is invalid.");R=N.createQuery();({orderByFields:aa}=e);aa&&(R.orderByFields=aa);R.outSpatialReference=u;R.returnGeometry=!1;R.num=M;R.outFields=V;ba&&(R.geometry=ba);if(!E.trim())return[];const {prefix:ka="",suffix:ha=""}=e;aa=`${ka}${E}${ha}`.replace(/'/g,"''");da=I(aa,N,da,T,!1);if(!da)return[];R.where=da;return N.queryFeatures(R,{signal:O}).then(fa=>W(fa,e,Q,ja))})};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/widgets/Search/support/locatorUtils":function(){define("exports ../../../core/maybe ../../../geometry/Polygon ../../../Graphic ../../../tasks/support/AddressToLocationsParameters ../../../tasks/support/LocationToAddressParameters ../../../tasks/support/SuggestLocationsParameters ./geometryUtils".split(" "),
function(k,b,a,z,p,d,n,f){function q(g){const h=null==g?void 0:g.scale;return"number"===typeof h&&3E5>=h?g.get("extent.center"):null}function w(g,h){const {source:x,spatialReference:y,location:D,sourceIndex:I,view:F}=g,{apiKey:L,locator:J,zoomScale:W,defaultZoomScale:S}=x,Z=F&&F.scale;g=h&&h.signal;h=new d;h.location=D;L&&(h.apiKey=L);y&&(h.outSpatialReference=y);return J.locationToAddress(h,{signal:g}).then(ca=>A([ca],{sourceIndex:I,scale:Z,view:F,zoomScale:W,defaultZoomScale:S}))}function t(g,h){const {filter:x,
withinViewEnabled:y}=g;g=h&&h.extent;return(h=f.createExtentFromGeometry(x&&x.geometry,h,h&&h.scale))||(y&&g?g:void 0)}function l(g,h){const {source:x,suggestResult:y,spatialReference:D,view:I,maxResults:F,sourceIndex:L}=g,J=x&&x.zoomScale,W=x&&x.defaultZoomScale;if(!y.text.trim())return Promise.resolve(null);g=`${!y.key&&x.prefix?x.prefix:""}${y.text}${!y.key&&x.suffix?x.suffix:""}`;const S=new p,{apiKey:Z,locator:ca}=x,X=I&&I.scale,K=t(x,I);h=h&&h.signal;Z&&(S.apiKey=Z);if(!ca)return Promise.resolve(null);
x.categories&&(S.categories=x.categories);x.locationType&&(S.locationType=x.locationType);D&&(S.outSpatialReference=D);const v=q(I);v&&(S.location=v);S.maxLocations=F;K&&(S.searchExtent=b.unwrap(K));x.countryCode&&(S.countryCode=x.countryCode);const {key:e}=y;e&&(S.magicKey=e);S.address={};S.address[x.singleLineFieldName||"Single Line Input"]=g;x.outFields&&(S.outFields=x.outFields);return ca.addressToLocations(S,{signal:h}).then(u=>A(u,{key:e,scale:X,sourceIndex:L,view:I,zoomScale:J,defaultZoomScale:W}))}
function C(g,h){return g.map(x=>({text:x.text,key:x.magicKey,sourceIndex:h}))}function A(g,h){return g.map(x=>{{const {key:I,scale:F,sourceIndex:L,view:J,zoomScale:W,defaultZoomScale:S}=h,{attributes:Z,extent:ca,location:X,address:K}=x;x=new z({geometry:X,attributes:Z});var y=ca||X,D=f.createExtentFromGeometry(y,J,F);y="number"===typeof W?f.scaleExtent(D,J,W):"number"===typeof S&&"point"===y.type?f.scaleExtent(D,J,S):D;D=X?`${X.x},${X.y}`:"";D=K||D;const v=x.clone();b.isSome(y)&&(v.geometry=a.fromExtent(y));
x={extent:y,feature:x,target:v,key:I,name:D,sourceIndex:L}}return x})}k.getLocation=q;k.getResults=function(g,h){return g.location?w(g,h):l(g,h)};k.getSuggestions=function(g,h){const {source:x,spatialReference:y,view:D,suggestTerm:I,maxSuggestions:F,sourceIndex:L}=g;g=new n;const {apiKey:J,locator:W}=x,S=t(x,D);h=h&&h.signal;if(!W)return Promise.resolve(null);J&&(g.apiKey=J);x.categories&&(g.categories=x.categories);y&&(g.outSpatialReference=y);const Z=q(D);Z&&(g.location=Z);if(!I.trim())return Promise.resolve(null);
const {prefix:ca="",suffix:X=""}=x;g.text=`${ca}${I}${X}`;S&&(g.searchExtent=b.unwrap(S));g.maxSuggestions=F;x.countryCode&&(g.countryCode=x.countryCode);return W.suggestLocations(g,{signal:h}).then(K=>C(K,L))};k.isArcGISWorldGeocoder=function(g){return g?/(?:arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/gi.test(g):!1};k.isMeteredArcGISWorldGeocoder=function(g){return g?/(?:geocode\-api\.arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/gi.test(g):!1};k.isProxiedArcGISWorldGeocoder=
function(g){return g?/(?:\/servers\/[\da-z\.-]+\/rest\/services\/world\/geocodeserver).*/gi.test(g):!1};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/tasks/support/AddressToLocationsParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../geometry/SpatialReference ../../geometry/Point ../../geometry/Extent ../../geometry ./commonProperties".split(" "),
function(k,b,a,z,p,d,n,f,q,w,t,l,C,A,g,h,x){a=function(y){function D(I){I=y.call(this,I)||this;I.address=null;I.apiKey=null;I.categories=null;I.countryCode=null;I.forStorage=null;I.location=null;I.locationType=null;I.magicKey=null;I.maxLocations=null;I.outFields=null;I.outSpatialReference=null;I.searchExtent=null;return I}k._inheritsLoose(D,y);return D}(l.JSONSupport);b.__decorate([d.property({type:Object,json:{write:!0}})],a.prototype,"address",void 0);b.__decorate([d.property(x.apiKey)],a.prototype,
"apiKey",void 0);b.__decorate([d.property({type:[String],json:{read:{source:"category",reader:y=>y?y.split(","):null},write:{target:"category",writer:(y,D)=>{D.category=y?y.join(","):null}}}})],a.prototype,"categories",void 0);b.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"countryCode",void 0);b.__decorate([d.property({type:Boolean,json:{write:!0}})],a.prototype,"forStorage",void 0);b.__decorate([d.property({type:A,json:{write:{writer:(y,D)=>{D.location=y?y.clone().normalize():
null}}}})],a.prototype,"location",void 0);b.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"locationType",void 0);b.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"magicKey",void 0);b.__decorate([d.property({type:Number,json:{write:!0}})],a.prototype,"maxLocations",void 0);b.__decorate([d.property({type:[String],json:{write:{writer:(y,D)=>{D.outFields=y?y.join(","):null}}}})],a.prototype,"outFields",void 0);b.__decorate([d.property({type:C,json:{read:{source:"outSR"},
write:{target:"outSR"}}})],a.prototype,"outSpatialReference",void 0);b.__decorate([d.property({type:g,json:{write:{writer:(y,D)=>{y=y?y.shiftCentralMeridian():null;D.searchExtent=y}}}})],a.prototype,"searchExtent",void 0);a=b.__decorate([f.subclass("esri.tasks.support.AddressToLocationsParameters")],a);a.from=p.ensureType(a);return a})},"esri/tasks/support/commonProperties":function(){define(["exports"],function(k){k.apiKey={type:String,json:{read:{source:"token"},write:{target:"token"}}};Object.defineProperty(k,
"__esModule",{value:!0})})},"esri/tasks/support/LocationToAddressParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../geometry/SpatialReference ../../geometry/Point ../../geometry ./commonProperties".split(" "),
function(k,b,a,z,p,d,n,f,q,w,t,l,C,A,g,h){a=function(x){function y(D){D=x.call(this,D)||this;D.apiKey=null;D.location=null;D.locationType=null;D.outSpatialReference=null;return D}k._inheritsLoose(y,x);return y}(l.JSONSupport);b.__decorate([d.property(h.apiKey)],a.prototype,"apiKey",void 0);b.__decorate([d.property({type:A,json:{write:{writer:(x,y)=>{x=x?x.clone().normalize():null;y.location="undefined"!==typeof x?x:null}}}})],a.prototype,"location",void 0);b.__decorate([d.property({type:String,json:{write:!0}})],
a.prototype,"locationType",void 0);b.__decorate([d.property({type:C,json:{read:{source:"outSR"},write:{target:"outSR"}}})],a.prototype,"outSpatialReference",void 0);a=b.__decorate([f.subclass("esri.tasks.support.LocationToAddressParameters")],a);a.from=p.ensureType(a);return a})},"esri/tasks/support/SuggestLocationsParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../geometry/SpatialReference ../../geometry/Point ../../geometry/Extent ../../geometry ./commonProperties".split(" "),
function(k,b,a,z,p,d,n,f,q,w,t,l,C,A,g,h,x){a=function(y){function D(I){I=y.call(this,I)||this;I.apiKey=null;I.categories=null;I.countryCode=null;I.location=null;I.maxSuggestions=null;I.outSpatialReference=null;I.searchExtent=null;I.text=null;return I}k._inheritsLoose(D,y);return D}(l.JSONSupport);b.__decorate([d.property(x.apiKey)],a.prototype,"apiKey",void 0);b.__decorate([d.property({type:[String],json:{read:{source:"category",reader:y=>y?y.split(","):null},write:{target:"category",writer:(y,D)=>
{D.category=y?y.join(","):null}}}})],a.prototype,"categories",void 0);b.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"countryCode",void 0);b.__decorate([d.property({type:A,json:{write:{writer:(y,D)=>{D.location=y?y.clone().normalize():null}}}})],a.prototype,"location",void 0);b.__decorate([d.property({type:Number,json:{write:!0}})],a.prototype,"maxSuggestions",void 0);b.__decorate([d.property({type:C,json:{read:{source:"outSR"},write:{target:"outSR"}}})],a.prototype,"outSpatialReference",
void 0);b.__decorate([d.property({type:g,json:{write:{writer:(y,D)=>{y=y?y.shiftCentralMeridian():null;D.searchExtent=JSON.stringify(y)}}}})],a.prototype,"searchExtent",void 0);b.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"text",void 0);a=b.__decorate([f.subclass("esri.tasks.support.SuggestLocationsParameters")],a);a.from=p.ensureType(a);return a})},"esri/widgets/Search/LocatorSearchSource":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/lang ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../tasks/Locator ./SearchSource ./support/locatorUtils".split(" "),
function(k,b,a,z,p,d,n,f,q,w,t,l,C,A,g,h,x){var y;a=y=function(D){function I(){var L=D.apply(this,arguments)||this;L.apiKey=null;L.categories=null;L.countryCode=null;L.defaultZoomScale=null;L.locator=null;L.locationType=null;L.name="";L.placeholder="";L.searchTemplate="";L.singleLineFieldName=null;L.suggestionsEnabled=null;L.zoomScale=null;L.getResults=(J,W)=>x.getResults({source:k._assertThisInitialized(L),...J},W);L.getSuggestions=(J,W)=>x.getSuggestions({source:k._assertThisInitialized(L),...J},
W);return L}k._inheritsLoose(I,D);var F=I.prototype;F.readLocator=function(L,J){({url:L}=J);return L?new g({url:L}):null};F.writeLocator=function(L,J){J.url=L?L.url:null};F.clone=function(){return new y({apiKey:this.apiKey,autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?z.clone(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,
resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,categories:this.categories?z.clone(this.categories):null,countryCode:this.countryCode,locationType:this.locationType,locator:this.locator,searchTemplate:this.searchTemplate,singleLineFieldName:this.singleLineFieldName,zoomScale:this.zoomScale})};return I}(h);b.__decorate([n.property()],a.prototype,
"apiKey",void 0);b.__decorate([n.property()],a.prototype,"categories",void 0);b.__decorate([n.property()],a.prototype,"countryCode",void 0);b.__decorate([n.property({json:{write:!0}})],a.prototype,"defaultZoomScale",void 0);b.__decorate([n.property({type:g})],a.prototype,"locator",void 0);b.__decorate([q.reader("locator",["url"])],a.prototype,"readLocator",null);b.__decorate([t.writer("locator")],a.prototype,"writeLocator",null);b.__decorate([n.property()],a.prototype,"locationType",void 0);b.__decorate([n.property({json:{write:!0}})],
a.prototype,"name",void 0);b.__decorate([n.property({json:{write:!0}})],a.prototype,"placeholder",void 0);b.__decorate([n.property()],a.prototype,"searchTemplate",void 0);b.__decorate([n.property({json:{write:!0}})],a.prototype,"singleLineFieldName",void 0);b.__decorate([n.property({json:{read:{source:"suggest"},write:{target:"suggest"}}})],a.prototype,"suggestionsEnabled",void 0);b.__decorate([n.property({json:{write:!0}})],a.prototype,"zoomScale",void 0);return a=y=b.__decorate([w.subclass("esri.widgets.Search.LocatorSearchSource")],
a)})},"esri/tasks/Locator":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../geometry/SpatialReference ./Task ../rest/locator/addressToLocations ../rest/locator/addressesToLocations ../rest/locator/locationToAddress ../rest/locator/suggestLocations".split(" "),
function(k,b,a,z,p,d,n,f,q,w,t,l,C,A,g,h,x){a=function(y){function D(F){F=y.call(this,F)||this;F.outSpatialReference=null;F.url=null;return F}k._inheritsLoose(D,y);var I=D.prototype;I.addressToLocations=function(F,L){!F.outSpatialReference&&this.outSpatialReference&&(F.outSpatialReference=this.outSpatialReference);return A.addressToLocations(this.url,F,{...this.requestOptions,...L})};I.suggestLocations=function(F,L){return x.suggestLocations(this.url,F,{...this.requestOptions,...L})};I.addressesToLocations=
function(F,L){!F.outSpatialReference&&this.outSpatialReference&&(F.outSpatialReference=this.outSpatialReference);return g.addressesToLocations(this.url,F,{...this.requestOptions,...L})};I.locationToAddress=function(F,L){!F.outSpatialReference&&this.outSpatialReference&&(F.outSpatialReference=this.outSpatialReference);return h.locationToAddress(this.url,F,{...this.requestOptions,...L})};return D}(C);b.__decorate([d.property({type:l})],a.prototype,"outSpatialReference",void 0);b.__decorate([d.property()],
a.prototype,"url",void 0);return a=b.__decorate([f.subclass("esri.tasks.Locator")],a)})},"esri/rest/locator/addressToLocations":function(){define("exports ../../request ../utils ./utils ../../tasks/support/AddressCandidate ../../tasks/support/AddressToLocationsParameters".split(" "),function(k,b,a,z,p,d){function n({data:f}){if(!f)return[];const {candidates:q,spatialReference:w}=f;return q?q.map(t=>{if(t){var {extent:l,location:C}=t,A=l?z.isValidExtent(l):!0;if(z.isValidLocation(C)&&A)return l&&(l.spatialReference=
w),C.spatialReference=w,p.fromJSON(t)}}):[]}k.addressToLocations=async function(f,q,w){q=d.from(q);f=a.parseUrl(f);const {address:t,...l}=q.toJSON();q=a.encode({...f.query,...t,...l,f:"json"});w=a.asValidOptions(q,w);return b(`${f.path}/findAddressCandidates`,w).then(n)};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/rest/locator/utils":function(){define(["exports"],function(k){k.isValidExtent=function(b){return b&&"number"===typeof b.xmin&&"number"===typeof b.ymin&&"number"===typeof b.xmax&&
"number"===typeof b.ymax};k.isValidLocation=function(b){return b&&"number"===typeof b.x&&"number"===typeof b.y};k.normalizeExtent=function(b){return b?b.shiftCentralMeridian():null};k.normalizePoint=function(b){return b?b.clone().normalize():null};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/tasks/support/AddressCandidate":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../geometry/Point ../../geometry/Extent".split(" "),
function(k,b,a,z,p,d,n,f,q,w,t,l,C,A){a=function(g){function h(x){x=g.call(this,x)||this;x.address=null;x.attributes=null;x.extent=null;x.location=null;x.score=null;return x}k._inheritsLoose(h,g);return h}(l.JSONSupport);b.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"address",void 0);b.__decorate([d.property({type:Object,json:{write:!0}})],a.prototype,"attributes",void 0);b.__decorate([d.property({type:A,json:{write:!0}})],a.prototype,"extent",void 0);b.__decorate([d.property({type:C,
json:{write:!0}})],a.prototype,"location",void 0);b.__decorate([d.property({type:Number,json:{write:!0}})],a.prototype,"score",void 0);return a=b.__decorate([f.subclass("esri.tasks.support.AddressCandidate")],a)})},"esri/rest/locator/addressesToLocations":function(){define(["exports","../../request","../utils","../../tasks/support/AddressCandidate","../../tasks/support/AddressesToLocationsParameters"],function(k,b,a,z,p){function d(n){({data:n}=n);if(!n)return[];const {locations:f,spatialReference:q}=
n;return f?f.map(w=>{const {location:t}=w;t&&(t.spatialReference=q);return z.fromJSON(w)}):[]}k.addressesToLocations=async function(n,f,q){f=p.from(f);n=a.parseUrl(n);f={...f.toJSON(),f:"json"};f=a.encode({...n.query,...f});q=a.asValidOptions(f,q);return b(`${n.path}/geocodeAddresses`,q).then(d)};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/tasks/support/AddressesToLocationsParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../geometry/SpatialReference ../../geometry".split(" "),
function(k,b,a,z,p,d,n,f,q,w,t,l,C,A){a=function(g){function h(x){x=g.call(this,x)||this;x.addresses=null;x.categories=null;x.countryCode=null;x.locationType=null;x.outSpatialReference=null;return x}k._inheritsLoose(h,g);return h}(l.JSONSupport);b.__decorate([d.property({type:[Object],json:{read:{reader:g=>g&&g.records?g.records.map(h=>h.attributes):null},write:{writer:(g,h)=>{const x=[];Array.isArray(g)&&g.forEach(y=>{x.push({attributes:y})});h.addresses={records:x}}}}})],a.prototype,"addresses",
void 0);b.__decorate([d.property({type:[String],json:{read:{source:"category",reader:g=>g?g.split(","):null},write:{target:"category",writer:(g,h)=>{h.category=g?g.join(","):null}}}})],a.prototype,"categories",void 0);b.__decorate([d.property({type:String,json:{read:{source:"sourceCountry"},write:{target:"sourceCountry"}}})],a.prototype,"countryCode",void 0);b.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"locationType",void 0);b.__decorate([d.property({type:C,json:{read:{source:"outSR"},
write:{target:"outSR"}}})],a.prototype,"outSpatialReference",void 0);a=b.__decorate([f.subclass("esri.tasks.support.AddressesToLocationsParameters")],a);a.from=p.ensureType(a);return a})},"esri/rest/locator/locationToAddress":function(){define(["exports","../../request","../utils","../../tasks/support/AddressCandidate","../../tasks/support/LocationToAddressParameters"],function(k,b,a,z,p){function d({data:n}){if(n){var {address:f,location:q}=n;return z.fromJSON({address:f&&f.Match_addr||"",attributes:f||
{},location:q,score:100})}}k.locationToAddress=async function(n,f,q){f=p.from(f);n=a.parseUrl(n);f={...f.toJSON(),f:"json"};f=a.encode({...n.query,...f});q=a.asValidOptions(f,q);return b(`${n.path}/reverseGeocode`,q).then(d)};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/rest/locator/suggestLocations":function(){define(["exports","../../request","../utils","../../tasks/support/SuggestionCandidate","../../tasks/support/SuggestLocationsParameters"],function(k,b,a,z,p){function d(n){({data:n}=
n);if(!n)return[];({suggestions:n}=n);return n?n.map(f=>new z(f)):[]}k.suggestLocations=async function(n,f,q){n=a.parseUrl(n);f=p.from(f);f={...f.toJSON(),f:"json"};f=a.encode({...n.query,...f});q=a.asValidOptions(f,q);return b(`${n.path}/suggest`,q).then(d)};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/tasks/support/SuggestionCandidate":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport".split(" "),
function(k,b,a,z,p,d,n,f,q,w,t,l){a=function(C){function A(g){g=C.call(this,g)||this;g.isCollection=null;g.magicKey=null;g.text=null;return g}k._inheritsLoose(A,C);return A}(l.JSONSupport);b.__decorate([d.property({type:Boolean,json:{write:!0}})],a.prototype,"isCollection",void 0);b.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"magicKey",void 0);b.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"text",void 0);return a=b.__decorate([f.subclass("esri.tasks.support.SuggestionCandidate")],
a)})},"esri/widgets/support/geolocationUtils":function(){define("exports ../../core/has ../../config ../../core/Logger ../../core/Error ../../core/urlUtils ../../geometry/Geometry ../../geometry/support/webMercatorUtils ../../geometry/Point ../../geometry/Extent ../../geometry/Multipoint ../../geometry/Polygon ../../geometry/Polyline ../../geometry ../../request ../../portal/Portal ../../tasks/support/ProjectParameters ../../rest/geometryService/units ../../tasks/operations/generalize ../../tasks/support/GeneralizeParameters ../../tasks/operations/lengths ../../tasks/support/LengthsParameters ../../tasks/operations/offset ../../tasks/support/OffsetParameters ../../rest/geometryService/project ../../tasks/operations/relation ../../tasks/support/RelationParameters ../../tasks/operations/trimExtend ../../tasks/support/TrimExtendParameters".split(" "),
function(k,b,a,z,p,d,n,f,q,w,t,l,C,A,g,h,x,y,D,I,F,L,J,W,S,Z,ca,X,K){function v(E,M,Q){if(!M)return Promise.resolve(E);const N=M.spatialReference;return N.isWGS84?Promise.resolve(E):N.isWebMercator?Promise.resolve(f.geographicToWebMercator(E)):e(Q).then(T=>{if(!T)throw new p("geometry-service:missing-url","Geometry service URL is missing");const O=new x({geometries:[E],outSpatialReference:N});return S.project(T,O,Q).then(ba=>ba[0])})}function e(E){if(a.geometryServiceUrl)return Promise.resolve(a.geometryServiceUrl);
const M=h.getDefault();return M.load(E).catch(()=>{}).then(()=>M.get("helperServices.geometry.url"))}const u=z.getLogger("esri.widgets.support.geolocationUtils"),m={maximumAge:0,timeout:15E3,enableHighAccuracy:!0};k.getCurrentPosition=function(E){E||(E=m);return new Promise((M,Q)=>{setTimeout(()=>Q(new p("geolocation:timeout","getting the current geolocation position timed out")),15E3);navigator.geolocation.getCurrentPosition(M,Q,E)})};k.positionToPoint=function(E,M){const {position:Q,view:N}=E;E=
Q&&Q.coords||{};E={accuracy:E.accuracy,altitude:E.altitude,altitudeAccuracy:E.altitudeAccuracy,heading:E.heading,latitude:E.latitude,longitude:E.longitude,speed:E.speed};E=Q?{coords:E,timestamp:Q.timestamp}:Q;E=(E=E&&E.coords)?new q({longitude:E.longitude,latitude:E.latitude,z:E.altitude||null,spatialReference:{wkid:4326}}):null;return v(E,N,M)};k.supported=function(){var E;(E=b("esri-geolocation"))||u.warn("geolocation-unsupported","Geolocation unsupported.");E&&((E=window.isSecureContext)||u.warn("insecure-context",
"Geolocation requires a secure origin."));return E};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/tasks/support/ProjectParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../geometry/support/jsonUtils".split(" "),
function(k,b,a,z,p,d,n,f,q,w,t,l,C){a=function(A){function g(h){h=A.call(this,h)||this;h.geometries=null;h.outSpatialReference=null;h.transformation=null;h.transformForward=null;return h}k._inheritsLoose(g,A);g.prototype.toJSON=function(){const h=this.geometries.map(function(D){return D.toJSON()}),x=this.geometries[0],y={};y.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON());y.inSR=x.spatialReference.wkid||JSON.stringify(x.spatialReference.toJSON());y.geometries=
JSON.stringify({geometryType:C.getJsonType(x),geometries:h});this.transformation&&(y.transformation=this.transformation.wkid||JSON.stringify(this.transformation));null!=this.transformForward&&(y.transformForward=this.transformForward);return y};return g}(l.JSONSupport);b.__decorate([d.property()],a.prototype,"geometries",void 0);b.__decorate([d.property({json:{read:{source:"outSR"}}})],a.prototype,"outSpatialReference",void 0);b.__decorate([d.property()],a.prototype,"transformation",void 0);b.__decorate([d.property()],
a.prototype,"transformForward",void 0);return a=b.__decorate([f.subclass("esri.tasks.support.ProjectParameters")],a)})},"esri/rest/geometryService/units":function(){define(["exports","../../core/jsonMap"],function(k,b){b=new b.JSONMap({MGRS:"mgrs",USNG:"usng",UTM:"utm",GeoRef:"geo-ref",GARS:"gars",DMS:"dms",DDM:"ddm",DD:"dd"});k.conversionTypeKebabDict=b;k.units={UNIT_METER:9001,UNIT_GERMAN_METER:9031,UNIT_FOOT:9002,UNIT_SURVEY_FOOT:9003,UNIT_CLARKE_FOOT:9005,UNIT_FATHOM:9014,UNIT_NAUTICAL_MILE:9030,
UNIT_SURVEY_CHAIN:9033,UNIT_SURVEY_LINK:9034,UNIT_SURVEY_MILE:9035,UNIT_KILOMETER:9036,UNIT_CLARKE_YARD:9037,UNIT_CLARKE_CHAIN:9038,UNIT_CLARKE_LINK:9039,UNIT_SEARS_YARD:9040,UNIT_SEARS_FOOT:9041,UNIT_SEARS_CHAIN:9042,UNIT_SEARS_LINK:9043,UNIT_BENOIT_1895A_YARD:9050,UNIT_BENOIT_1895A_FOOT:9051,UNIT_BENOIT_1895A_CHAIN:9052,UNIT_BENOIT_1895A_LINK:9053,UNIT_BENOIT_1895B_YARD:9060,UNIT_BENOIT_1895B_FOOT:9061,UNIT_BENOIT_1895B_CHAIN:9062,UNIT_BENOIT_1895B_LINK:9063,UNIT_INDIAN_FOOT:9080,UNIT_INDIAN_1937_FOOT:9081,
UNIT_INDIAN_1962_FOOT:9082,UNIT_INDIAN_1975_FOOT:9083,UNIT_INDIAN_YARD:9084,UNIT_INDIAN_1937_YARD:9085,UNIT_INDIAN_1962_YARD:9086,UNIT_INDIAN_1975_YARD:9087,UNIT_FOOT_1865:9070,UNIT_RADIAN:9101,UNIT_DEGREE:9102,UNIT_ARCMINUTE:9103,UNIT_ARCSECOND:9104,UNIT_GRAD:9105,UNIT_GON:9106,UNIT_MICRORADIAN:9109,UNIT_ARCMINUTE_CENTESIMAL:9112,UNIT_ARCSECOND_CENTESIMAL:9113,UNIT_MIL6400:9114,UNIT_BRITISH_1936_FOOT:9095,UNIT_GOLDCOAST_FOOT:9094,UNIT_INTERNATIONAL_CHAIN:109003,UNIT_INTERNATIONAL_LINK:109004,UNIT_INTERNATIONAL_YARD:109001,
UNIT_STATUTE_MILE:9093,UNIT_SURVEY_YARD:109002,UNIT_50KILOMETER_LENGTH:109030,UNIT_150KILOMETER_LENGTH:109031,UNIT_DECIMETER:109005,UNIT_CENTIMETER:109006,UNIT_MILLIMETER:109007,UNIT_INTERNATIONAL_INCH:109008,UNIT_US_SURVEY_INCH:109009,UNIT_INTERNATIONAL_ROD:109010,UNIT_US_SURVEY_ROD:109011,UNIT_US_NAUTICAL_MILE:109012,UNIT_UK_NAUTICAL_MILE:109013,UNIT_SQUARE_INCHES:"esriSquareInches",UNIT_SQUARE_FEET:"esriSquareFeet",UNIT_SQUARE_YARDS:"esriSquareYards",UNIT_ACRES:"esriAcres",UNIT_SQUARE_MILES:"esriSquareMiles",
UNIT_SQUARE_MILLIMETERS:"esriSquareMillimeters",UNIT_SQUARE_CENTIMETERS:"esriSquareCentimeters",UNIT_SQUARE_DECIMETERS:"esriSquareDecimeters",UNIT_SQUARE_METERS:"esriSquareMeters",UNIT_ARES:"esriAres",UNIT_HECTARES:"esriHectares",UNIT_SQUARE_KILOMETERS:"esriSquareKilometers"};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/tasks/operations/generalize":function(){define(["exports","../../core/jsonMap","../../geometry/support/jsonUtils"],function(k,b,a){const z=new b.JSONMap({109006:"centimeters",
9102:"decimal-degrees",109005:"decimeters",9002:"feet",109009:"inches",9036:"kilometers",9001:"meters",9035:"miles",109007:"millimeters",109012:"nautical-miles",9096:"yards"});k.generalizeToRESTParameters=function(p){const {geometries:d,deviationUnit:n,maxDeviation:f}=p.toJSON();p={maxDeviation:f};d&&d.length&&(p.geometries=JSON.stringify({geometryType:a.getJsonType(d[0]),geometries:d}),p.sr=JSON.stringify(d[0].spatialReference));z.write(n,p,"deviationUnit");return p};Object.defineProperty(k,"__esModule",
{value:!0})})},"esri/tasks/support/GeneralizeParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../geometry/support/jsonUtils".split(" "),function(k,b,a,z,p,d,n,f,q,w,t,l,C){a=
function(A){function g(h){h=A.call(this,h)||this;h.deviationUnit=null;h.geometries=null;h.maxDeviation=null;return h}k._inheritsLoose(g,A);return g}(l.JSONSupport);b.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"deviationUnit",void 0);b.__decorate([d.property({json:{read:{reader:A=>A?A.map(g=>C.fromJSON(g)):null},write:{writer:(A,g)=>{g.geometries=A.map(h=>h.toJSON())}}}})],a.prototype,"geometries",void 0);b.__decorate([d.property({type:Number,json:{write:!0}})],a.prototype,
"maxDeviation",void 0);a=b.__decorate([f.subclass("esri.tasks.support.GeneralizeParameters")],a);a.from=p.ensureType(a);return a})},"esri/tasks/operations/lengths":function(){define(["exports","../../core/jsonMap"],function(k,b){const a=new b.JSONMap({preserveShape:"preserve-shape"});k.lengthsToRESTParameters=function(z){const {polylines:p,lengthUnit:d,geodesic:n,calculationType:f}=z.toJSON(),q={};q.polylines=JSON.stringify(p);z=z.polylines[0].spatialReference;q.sr=z.wkid?z.wkid:JSON.stringify(z.toJSON());
d&&(q.lengthUnit=d);n&&(q.geodesic=n);f&&(q.calculationType=a.toJSON(f));return q};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/tasks/support/LengthsParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../geometry/Polyline ../../geometry/support/jsonUtils ../../geometry".split(" "),
function(k,b,a,z,p,d,n,f,q,w,t,l,C,A,g){a=function(h){function x(y){y=h.call(this,y)||this;y.calculationType=null;y.geodesic=null;y.lengthUnit=null;y.polylines=null;return y}k._inheritsLoose(x,h);return x}(l.JSONSupport);b.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"calculationType",void 0);b.__decorate([d.property({type:Boolean,json:{write:!0}})],a.prototype,"geodesic",void 0);b.__decorate([d.property({json:{write:!0}})],a.prototype,"lengthUnit",void 0);b.__decorate([d.property({type:[C],
json:{read:{reader:h=>h?h.map(x=>A.fromJSON(x)):null},write:{writer:(h,x)=>{x.polylines=h.map(y=>y.toJSON())}}}})],a.prototype,"polylines",void 0);a=b.__decorate([f.subclass("esri.tasks.support.LengthsParameters")],a);a.from=p.ensureType(a);return a})},"esri/tasks/operations/offset":function(){define(["exports","../../core/jsonMap","../../geometry/support/jsonUtils"],function(k,b,a){const z=new b.JSONMap({esriGeometryOffsetBevelled:"bevelled",esriGeometryOffsetMitered:"mitered",esriGeometryOffsetRounded:"rounded"}),
p=new b.JSONMap({9001:"meters",9002:"feet",9036:"kilometers",9093:"miles",109012:"nautical-miles",109001:"yards"});k.offsetToRESTParameters=function(d){const {geometries:n,bevelRatio:f,offsetDistance:q,offsetHow:w,offsetUnit:t}=d.toJSON();d={bevelRatio:f,offsetDistance:q};n&&n.length&&(d.geometries=JSON.stringify({geometryType:a.getJsonType(n[0]),geometries:n}),d.sr=JSON.stringify(n[0].spatialReference));w&&(d.offsetHow=z.toJSON(w));t&&(d.offsetUnit=p.toJSON(t));return d};Object.defineProperty(k,
"__esModule",{value:!0})})},"esri/tasks/support/OffsetParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../geometry/support/jsonUtils".split(" "),function(k,b,a,z,p,d,n,f,q,
w,t,l,C){a=function(A){function g(h){h=A.call(this,h)||this;h.bevelRatio=null;h.geometries=null;h.offsetDistance=null;h.offsetHow=null;h.offsetUnit=null;return h}k._inheritsLoose(g,A);return g}(l.JSONSupport);b.__decorate([d.property({type:Number,json:{write:!0}})],a.prototype,"bevelRatio",void 0);b.__decorate([d.property({json:{read:{reader:A=>A?A.map(g=>C.fromJSON(g)):null},write:{writer:(A,g)=>{g.geometries=A.map(h=>h.toJSON())}}}})],a.prototype,"geometries",void 0);b.__decorate([d.property({type:Number,
json:{write:!0}})],a.prototype,"offsetDistance",void 0);b.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"offsetHow",void 0);b.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"offsetUnit",void 0);a=b.__decorate([f.subclass("esri.tasks.support.OffsetParameters")],a);a.from=p.ensureType(a);return a})},"esri/rest/geometryService/project":function(){define("exports ../../core/accessorSupport/ensureType ../../geometry/support/jsonUtils ../../request ../../tasks/support/ProjectParameters ../utils ./utils".split(" "),
function(k,b,a,z,p,d,n){const f=b.ensureType(p);k.project=async function(q,w,t){w=f(w);q=d.parseUrl(q);const l={...q.query,f:"json",...w.toJSON()},C=w.outSpatialReference,A=a.getJsonType(w.geometries[0]);w=d.asValidOptions(l,t);return z(q.path+"/project",w).then(({data:{geometries:g}})=>n.decodeGeometries(g,A,C))};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/rest/geometryService/utils":function(){define(["exports","../../geometry/support/jsonUtils"],function(k,b){k.decodeGeometries=function(a,
z,p){const d=b.getGeometryType(z);return a.map(n=>{n=d.fromJSON(n);n.spatialReference=p;return n})};k.encodeGeometries=function(a){return{geometryType:b.getJsonType(a[0]),geometries:a.map(z=>z.toJSON())}};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/tasks/operations/relation":function(){define(["exports","../../core/jsonMap","../../geometry/support/jsonUtils"],function(k,b,a){const z=new b.JSONMap({esriGeometryRelationCross:"cross",esriGeometryRelationDisjoint:"disjoint",esriGeometryRelationIn:"in",
esriGeometryRelationInteriorIntersection:"interior-intersection",esriGeometryRelationIntersection:"intersection",esriGeometryRelationLineCoincidence:"line-coincidence",esriGeometryRelationLineTouch:"line-touch",esriGeometryRelationOverlap:"overlap",esriGeometryRelationPointTouch:"point-touch",esriGeometryRelationTouch:"touch",esriGeometryRelationWithin:"within",esriGeometryRelationRelation:"relation"});k.relationToRESTParameters=function(p){const {geometries1:d,geometries2:n,relation:f,relationParameter:q}=
p.toJSON();p={};if(d&&d.length){p.geometries1=JSON.stringify({geometryType:a.getJsonType(d[0]),geometries:d});const w=d[0].spatialReference;p.sr=w.wkid?w.wkid:JSON.stringify(w)}n&&0<n.length&&(p.geometries2=JSON.stringify({geometryType:a.getJsonType(n[0]),geometries:n}));f&&(p.relation=z.toJSON(f));q&&(p.relationParam=q);return p};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/tasks/support/RelationParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../geometry/support/jsonUtils".split(" "),
function(k,b,a,z,p,d,n,f,q,w,t,l,C){a=function(A){function g(h){h=A.call(this,h)||this;h.geometries1=null;h.geometries2=null;h.relation=null;h.relationParameter=null;return h}k._inheritsLoose(g,A);return g}(l.JSONSupport);b.__decorate([d.property({json:{read:{reader:A=>A?A.map(g=>C.fromJSON(g)):null},write:{writer:(A,g)=>{g.geometries1=A.map(h=>h.toJSON())}}}})],a.prototype,"geometries1",void 0);b.__decorate([d.property({json:{read:{reader:A=>A?A.map(g=>C.fromJSON(g)):null},write:{writer:(A,g)=>{g.geometries2=
A.map(h=>h.toJSON())}}}})],a.prototype,"geometries2",void 0);b.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"relation",void 0);b.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"relationParameter",void 0);a=b.__decorate([f.subclass("esri.tasks.support.RelationParameters")],a);a.from=p.ensureType(a);return a})},"esri/tasks/operations/trimExtend":function(){define(["exports","../../core/jsonMap"],function(k,b){const a=new b.JSONMap({0:"default-curve-extension",
1:"relocate-ends",2:"keep-end-attributes",4:"no-end-attributes",8:"no-extend-at-from",16:"no-extend-at-to"});k.trimExtendToRESTParameters=function(z){const {extendHow:p,polylines:d,trimExtendTo:n}=z.toJSON();z={};z.extendHow=a.toJSON(p);d&&d.length&&(z.polylines=JSON.stringify(d),z.sr=JSON.stringify(d[0].spatialReference));n&&(z.trimExtendTo=JSON.stringify(n));return z};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/tasks/support/TrimExtendParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../geometry/Polyline ../../geometry/support/jsonUtils ../../geometry".split(" "),
function(k,b,a,z,p,d,n,f,q,w,t,l,C,A,g){a=function(h){function x(y){y=h.call(this,y)||this;y.extendHow="default-curve-extension";y.polylines=null;y.trimExtendTo=null;return y}k._inheritsLoose(x,h);return x}(l.JSONSupport);b.__decorate([d.property({type:String,json:{write:!0}})],a.prototype,"extendHow",void 0);b.__decorate([d.property({type:[C],json:{read:{reader:h=>h?h.map(x=>A.fromJSON(x)):null},write:{writer:(h,x)=>{x.polylines=h.map(y=>y.toJSON())}}}})],a.prototype,"polylines",void 0);b.__decorate([d.property({json:{read:{reader:h=>
h?A.fromJSON(h):null},write:{writer:(h,x)=>{x.trimExtendTo=h.toJSON()}}}})],a.prototype,"trimExtendTo",void 0);a=b.__decorate([f.subclass("esri.tasks.support.TrimExtendParameters")],a);a.from=p.ensureType(a);return a})},"esri/widgets/Search/SearchResultRenderer":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../support/widgetUtils ../support/decorators/accessibleHandler ../support/decorators/messageBundle ../../chunks/index ../Widget ./SearchViewModel".split(" "),
function(k,b,a,z,p,d,n,f,q,w,t,l,C,A,g,h,x){a=function(y){function D(F,L){F=y.call(this,F,L)||this;F.messages=null;F.showMoreResultsOpen=!1;F.viewModel=null;return F}k._inheritsLoose(D,y);var I=D.prototype;I.render=function(){return g.jsx("div",{class:"esri-search-result-renderer esri-widget"},g.jsx("div",{key:"esri-search-renderer__container",class:this.classes("esri-search-result-renderer__more-results",{["esri-search-result-renderer__more-results--show-more-results"]:this.showMoreResultsOpen})},
this.renderSearchResultName(),this.renderMoreResults()))};I.renderMoreResults=function(){return g.jsx("div",{key:"esri-search-renderer__more-results"},this.renderMoreResultsButton(),this.renderMoreResultsLists())};I.renderSearchResultName=function(){var F;const L=null==(F=this.viewModel)?void 0:F.selectedResult;return g.jsx("div",{key:"esri-search-renderer__result-name",class:"esri-search-result-renderer__more-results-item"},L&&L.name||"")};I.renderMoreResultsLists=function(){var F,L=null==(F=this.viewModel)?
void 0:F.results;({resultCount:F}=this.viewModel);if(2>F)return null;L=L.map(J=>this.renderMoreResultsList(J));return g.jsx("div",{key:"esri-search-renderer__more-results-container",class:"esri-search-result-renderer__more-results-list"},L)};I.renderMoreResultsButton=function(){const {messages:F}=this,{resultCount:L}=this.viewModel;return 2>L?null:g.jsx("div",{key:"esri-search-renderer__more-results-button",class:"esri-search-result-renderer__more-results-item"},g.jsx("a",{class:"esri-widget__anchor",
href:"#",bind:this,onclick:this._showMoreResultsClick,onkeydown:this._showMoreResultsClick},this.showMoreResultsOpen?F.hideMoreResults:F.showMoreResults))};I.renderMoreResultsHeader=function(F,L){return g.jsx("div",{key:`esri-search-result-renderer__header-${L}`,class:"esri-search-result-renderer__more-results-list-header"},F)};I.renderMoreResultsList=function(F){var L,J;const {results:W}=F;var S=W.length;const Z=!!S,ca=null==(L=this.viewModel)?void 0:L.selectedResult;L=1===S&&W[0]===ca;S=this._getSourceName(F.source,
F.sourceIndex);S=1<(null==(J=this.viewModel)?void 0:J.results.length)&&!L?this.renderMoreResultsHeader(S,F.sourceIndex):null;J=Z&&W.map((X,K)=>this.renderMoreResultsListItem(X,K));J=Z&&!L?g.jsx("ul",{key:`esri-search-result-renderer__list-${F.sourceIndex}`},J):null;return Z?g.jsx("div",{key:`esri-search-result-renderer__results-${F.sourceIndex}`},S,J):null};I.renderMoreResultsListItem=function(F,L){const J=this.get("viewModel.selectedResult");return F!==J?g.jsx("li",{key:`esri-search-result-renderer__list-item-${L}`},
g.jsx("a",{class:"esri-widget__anchor",href:"#",tabindex:"0",bind:this,"data-result":F,onclick:this._selectResultClick,onkeydown:this._selectResultClick},F.name)):null};I._showMoreResultsClick=function(F){F.preventDefault();this.showMoreResultsOpen=!this.showMoreResultsOpen;(F=this.get("viewModel.view.popup"))&&F.reposition()};I._selectResultClick=function(F){F.preventDefault();F=F.currentTarget["data-result"];this.viewModel&&this.viewModel.select(F)};I._getSourceName=function(F,L){return L===x.ALL_INDEX?
this.messages.all:F.name};return D}(h);b.__decorate([d.property(),A.messageBundle("esri/widgets/Search/t9n/Search")],a.prototype,"messages",void 0);b.__decorate([d.property()],a.prototype,"showMoreResultsOpen",void 0);b.__decorate([d.property()],a.prototype,"viewModel",void 0);b.__decorate([C.accessibleHandler()],a.prototype,"_showMoreResultsClick",null);b.__decorate([C.accessibleHandler()],a.prototype,"_selectResultClick",null);return a=b.__decorate([f.subclass("esri.widgets.Search.SearchResultRenderer")],
a)})},"*noref":1}});
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/string ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/aliasOf ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/events ../core/promiseUtils ../intl/substitute ../intl ../core/Handles ../core/watchUtils ./support/widgetUtils ./support/decorators/messageBundle ./support/decorators/vmEvent ../chunks/index ./Widget ./Search/SearchViewModel ./Search/SearchResultRenderer".split(" "),function(k,
b,a,z,p,d,n,f,q,w,t,l,C,A,g,h,x,y,D,I,F,L,J,W,S,Z){const ca=/<[a-z/][\s\S]*>/i;a=function(X){function K(e,u){var m=X.call(this,e,u)||this;m._activeMenuItemIndex=-1;m._handles=new y;m._inputNode=null;m._menuItemCount=0;m._sourceMenuButtonNode=null;m._sourceListNode=null;m._suggestionListNode=null;m._searchResultRenderer=new Z;m._relatedTarget=null;m._locateFailed=null;m.activeMenu="none";m.activeSource=null;m.activeSourceIndex=null;m.allPlaceholder=null;m.allSources=null;m.autoNavigate=null;m.autoSelect=
null;m.defaultSources=null;m.disabled=!1;m.goToOverride=null;m.iconClass="esri-icon-search";m.includeDefaultSources=null;m.label=void 0;m.locationEnabled=null;m.maxResults=null;m.maxSuggestions=null;m.messages=null;m.messagesCommon=null;m.minSuggestCharacters=null;m.popupEnabled=null;m.popupTemplate=null;m.portal=null;m.resultGraphic=null;m.resultGraphicEnabled=null;m.results=null;m.searchAllEnabled=null;m.searchTerm=null;m.selectedResult=null;m.sources=null;m.suggestions=null;m.suggestionsEnabled=
null;m.view=null;m.viewModel=new S;m.own(D.watch(k._assertThisInitialized(m),"searchTerm",E=>{if(E&&"warning"===m.activeMenu||!E&&!m.get("viewModel.selectedSuggestion.location"))m.activeMenu="none"}),D.on(k._assertThisInitialized(m),"viewModel.allSources","change",()=>m._watchSourceChanges()),D.init(k._assertThisInitialized(m),"activeMenu",()=>m._resetActiveMenuItemIndex()),D.init(k._assertThisInitialized(m),"viewModel.defaultPopupTemplate",E=>{E&&(E.content=m._renderSearchResultsContent.bind(k._assertThisInitialized(m)))}));
return m}k._inheritsLoose(K,X);var v=K.prototype;v.destroy=function(){this._handles.destroy();this._handles=null;this._cancelSuggest();this._cancelSearch();this._searchResultRenderer&&(this._searchResultRenderer.viewModel=null,this._searchResultRenderer.destroy(),this._searchResultRenderer=null)};v.clear=function(){};v.focus=function(){this._inputNode&&(this.activeMenu="suggestion",this._inputNode.focus(),this.emit("search-focus"))};v.blur=function(e){this._inputNode&&(this._inputNode.blur(),this._inputBlur(e),
this.emit("search-blur"))};v.search=function(e){this.activeMenu="none";this._cancelSuggest();this._cancelSearch();const u=g.createAbortController(),{signal:m}=u;this._searchController=u;return this.viewModel.search(e,{signal:m}).catch(E=>{if(this._searchController===u)return this.activeMenu="none",this._searchController=null,E}).then(E=>{if(this._searchController===u)return this.activeMenu=E.numResults?"none":"warning",this._searchController=null,E})};v.suggest=function(e){this._cancelSuggest();const u=
g.createAbortController(),{signal:m}=u;this._suggestController=u;return this.viewModel.suggest(e,null,{signal:m}).then(E=>{if(this._suggestController===u)return this._suggestController=null,E.numResults&&(this.activeMenu="suggestion"),this._scrollToTopSuggestion(),E}).catch(()=>{if(this._suggestController===u)return this._suggestController=null})};v.render=function(){const {state:e}=this.viewModel;return J.jsx("div",{class:this.classes("esri-search esri-widget",{["esri-disabled"]:"disabled"===e,["esri-widget--disabled"]:this.disabled})},
"loading"===e?this.renderLoader():this.renderContainer())};v.renderSubmitButton=function(){const {messages:e}=this;return J.jsx("button",{"aria-label":e.searchButtonTitle,bind:this,class:this.classes("esri-search__submit-button","esri-widget--button"),key:"esri-search__submit-button",onclick:this._handleSearchButtonClick,title:e.searchButtonTitle},J.jsx("span",{"aria-hidden":"true",class:"esri-icon-search"}))};v.renderWarningMenu=function(){return J.jsx("div",{key:"esri-search__error-menu",class:this.classes("esri-menu",
"esri-search__warning-menu")},J.jsx("div",{class:"esri-search__warning-body"},this.renderWarning()))};v.renderSourceMenuButton=function(){const {messages:e,activeMenu:u,sourceMenuId:m,sourceMenuButtonId:E}=this,{activeSourceIndex:M,allSources:Q}=this.viewModel;return 1<Q.length?J.jsx("button",{id:E,key:"esri-search__source-menu-button",bind:this,"aria-label":e.searchIn,title:e.searchIn,"aria-haspopup":"true","aria-expanded":("source"===u).toString(),"aria-controls":m,class:this.classes("esri-search__sources-button",
"esri-widget--button"),onclick:this._handleSourcesMenuToggleClick,onblur:this._sourcesButtonBlur,afterCreate:I.storeNode,"data-node-ref":"_sourceMenuButtonNode"},J.jsx("span",{"aria-hidden":"true",class:"esri-icon-down-arrow esri-search__sources-button--down"}),J.jsx("span",{"aria-hidden":"true",class:"esri-icon-up-arrow esri-search__sources-button--up"}),J.jsx("span",{class:"esri-search__source-name"},this._getSourceName(M))):null};v.renderSourcesList=function(){const {allSources:e,searchAllEnabled:u}=
this.viewModel,{_activeMenuItemIndex:m,activeMenu:E,sourceMenuId:M,sourceMenuButtonId:Q}=this,N="source"===E&&-1<m?this._buildId("source-item",m):null;return 1<e.length?J.jsx("ul",{"aria-activedescendant":N,"aria-labelledby":Q,id:M,role:"menu",bind:this,afterCreate:I.storeNode,onkeydown:this._handleSourceMenuKeydown,onkeyup:this._handleSourceMenuKeyup,"data-node-ref":"_sourceListNode",class:"esri-menu__list",tabIndex:-1},u?this.renderSource(S.ALL_INDEX):null,e.map((T,O)=>this.renderSource(O)).toArray()):
null};v.renderSourcesMenu=function(){const {allSources:e}=this.viewModel;return 1<e.length?J.jsx("div",{key:"esri-search__source-menu",class:this.classes("esri-menu","esri-search__sources-menu")},this.renderSourcesList()):null};v.renderLoader=function(){const {messages:e,messagesCommon:u}=this;return J.jsx("div",{class:"esri-widget__loader",key:"base-loader"},J.jsx("span",{"aria-hidden":"true",class:"esri-widget__loader-animation"}),J.jsx("span",{class:"esri-icon-font-fallback-text"},e.searchButtonTitle),
J.jsx("span",{class:"esri-widget__loader-text"},u.loading))};v.renderContainer=function(){const {allSources:e,state:u}=this.viewModel,{activeMenu:m}=this;return J.jsx("div",{class:this.classes({["esri-search--multiple-sources"]:1<e.length,["esri-search--loading"]:"loading"===u,["esri-search--searching"]:"searching"===u,["esri-search--warning"]:"warning"===m,["esri-search--sources"]:"source"===m,["esri-search--show-suggestions"]:"suggestion"===m},"esri-search__container"),key:"base-container"},this.renderSourceMenuButton(),
this.renderSourcesMenu(),this.renderInputContainer(),this.renderSubmitButton(),this.renderWarningMenu())};v.renderClearButton=function(){return this.searchTerm?J.jsx("button",{bind:this,class:this.classes("esri-search__clear-button","esri-widget--button"),key:"esri-search__clear-button",onclick:this._handleClearButtonClick,onfocus:this._clearButtonFocus,title:this.messages.clearButtonTitle},J.jsx("span",{"aria-hidden":"true",class:"esri-icon-close"})):null};v.renderLocationGroup=function(){const {messages:e,
locationEnabled:u,displayedSearchTerm:m}=this,E="suggestion"===this.activeMenu&&0===this._activeMenuItemIndex;return u&&!m?J.jsx("ul",{role:"group",key:"esri-search__suggestion-list-current-location",class:this.classes("esri-menu__list","esri-search__suggestions-list","esri-search__suggestions-list--current-location")},J.jsx("li",{bind:this,"data-current-location-item":!0,onclick:this._handleUseCurrentLocationClick,id:this._buildId("suggestion-item",0),"aria-selected":("suggestion"===this.activeMenu&&
0===this._activeMenuItemIndex).toString(),role:"option",class:this.classes("esri-menu__list-item",E?"esri-menu__list-item--focus":null)},J.jsx("span",{"aria-hidden":"true",class:"esri-icon-locate-circled"})," ",e.useCurrentLocation)):null};v.renderInput=function(){const {activeMenu:e,locationEnabled:u,displayedSearchTerm:m,messages:E,suggestionsMenuId:M,inputId:Q,_activeMenuItemIndex:N}=this,{maxInputLength:T,placeholder:O,searchTerm:ba,suggestionCount:ja}=this.viewModel,da=!!(u&&!m||ja),V="suggestion"===
e&&-1<N?this._buildId("suggestion-item",N):null;return J.jsx("input",{"aria-activedescendant":V,"aria-autocomplete":"list","aria-expanded":(da&&"suggestion"===e).toString(),"aria-controls":da?M:null,"aria-owns":da?M:null,"aria-haspopup":"listbox","aria-label":E.searchButtonTitle,bind:this,placeholder:O,maxlength:T,autocomplete:"off",type:"text",class:this.classes("esri-input","esri-search__input"),value:ba,id:Q,role:"combobox",onkeyup:this._handleInputKeyup,onclick:this._handleInputClick,oninput:this._handleInputPaste,
onpaste:this._handleInputPaste,afterCreate:I.storeNode,"data-node-ref":"_inputNode",onfocusout:this._storeRelatedTarget,onfocus:this.focus,onblur:this.blur,title:ba?"":O})};v.renderForm=function(){return J.jsx("form",{key:"esri-search__form",bind:this,class:"esri-search__form",onsubmit:this._formSubmit,role:"search"},this.renderInput())};v.renderSuggestList=function(e){const {sourceIndex:u}=e,m=e.results;return e.results.length?J.jsx("ul",{role:"group",key:`esri-search__suggestion-list-${u}`,class:this.classes("esri-menu__list",
"esri-search__suggestions-list")},m.map(E=>this.renderSuggestion(E,this._menuItemCount++))):null};v.renderSuggestionsGroup=function(){const {suggestions:e}=this.viewModel;return e?e.map(u=>[this.renderSuggestionHeader(u),this.renderSuggestList(u)]):null};v.renderSuggestionsMenu=function(){const {displayedSearchTerm:e,locationEnabled:u,suggestionsMenuId:m,inputId:E}=this,{suggestionCount:M}=this.viewModel;this._menuItemCount=0;return u&&!e||M?J.jsx("div",{id:m,key:"esri-search__suggestions-menu",class:this.classes("esri-menu",
"esri-search__suggestions-menu"),role:"listbox","aria-labelledby":E,bind:this,afterCreate:I.storeNode,"data-node-ref":"_suggestionListNode"},this.renderLocationGroup(),this.renderSuggestionsGroup()):null};v.renderInputContainer=function(){return J.jsx("div",{key:"esri-search__input-container",class:"esri-search__input-container"},this.renderForm(),this.renderSuggestionsMenu(),this.renderClearButton())};v.renderSuggestionHeader=function(e){const {allSources:u,activeSourceIndex:m}=this.viewModel,{sourceIndex:E}=
e,M=1<u.length&&m===S.ALL_INDEX;return e.results.length&&M?J.jsx("div",{key:`esri-search__suggestion-header-${E}`,class:"esri-menu__header"},this._getSourceName(E)):null};v.renderSuggestion=function(e,u){const {_activeMenuItemIndex:m,messages:E}=this;var {searchTerm:M}=this.viewModel;if(M){var {text:Q}=e;Q=Q||E.untitledResult;const N=[];if(ca.test(Q))N.push(J.jsx("div",{innerHTML:Q}));else{Q=this._splitResult(Q,M);const T=M.toLowerCase();Q.forEach((O,ba)=>{O&&O.length&&(O.toLowerCase()===T?N.push(J.jsx("strong",
{key:ba},O)):N.push(O))})}M="suggestion"===this.activeMenu&&m===u;return J.jsx("li",{bind:this,id:this._buildId("suggestion-item",u),"aria-selected":("suggestion"===this.activeMenu&&this._activeMenuItemIndex===u).toString(),onclick:this._handleSuggestionClick,key:`esri-search__suggestion_${u}`,"data-suggestion":e,role:"option",class:this.classes("esri-menu__list-item",M?"esri-menu__list-item--focus":null)},N)}};v.renderSource=function(e){const {activeSourceIndex:u,searchAllEnabled:m}=this.viewModel,
E={["esri-menu__list-item--active"]:e===u,["esri-menu__list-item--focus"]:"source"===this.activeMenu&&e===(m?this._activeMenuItemIndex-1:this._activeMenuItemIndex)};return J.jsx("li",{bind:this,key:`esri-search__source-${e}`,id:this._buildId("source-item",m?e+1:e),"aria-checked":(e===u).toString(),onclick:this._handleSourceClick,"data-source-index":e,role:"menuitemradio",class:this.classes("esri-search__source","esri-menu__list-item",E)},this._getSourceName(e))};v.renderNoResultsWarning=function(e){const {messages:u}=
this;e=e?h.substitute(u.noResultsFoundForValue,{value:`"${e}"`}):u.noResultsFound;return J.jsx("div",{key:"esri-search__no_results"},J.jsx("div",{class:"esri-search__warning-header"},u.noResults),J.jsx("div",{class:"esri-search__warning-text"},e))};v.renderEmptySearchWarning=function(){const {messages:e}=this;return J.jsx("div",{key:"esri-search__empty-search"},J.jsx("span",{"aria-hidden":"true",class:"esri-icon-notice-triangle"}),J.jsx("span",{class:"esri-search__no-value-text"},e.emptyValue))};
v.renderLocateWarning=function(){const {messages:e}=this;return J.jsx("div",{key:"esri-search__locate-error"},J.jsx("span",{"aria-hidden":"true",class:"esri-icon-notice-triangle"}),J.jsx("span",{class:"esri-search__no-value-text"},e.locateError))};v.renderWarning=function(){var e;const {displayedSearchTerm:u,_locateFailed:m}=this,{viewModel:E}=this;return m?this.renderLocateWarning():null!=(e=E.selectedSuggestion)&&e.location||u?this.renderNoResultsWarning(u):this.renderEmptySearchWarning()};v._resetActiveMenuItemIndex=
function(){this._activeMenuItemIndex=-1};v._buildId=function(e,u){return`${this.id}-${e}${void 0===u?"":`-${u}`}`};v._watchSourceChanges=function(){const {_handles:e,viewModel:{allSources:u}}=this;e.remove("sources");u.forEach(m=>e.add(D.watch(m,"name",()=>this.scheduleRender()),"sources"))};v._handleSourcesMenuToggleClick=function(){this.activeMenu="source"===this.activeMenu?"none":"source";this.renderNow();if("source"===this.activeMenu){var e;null==(e=this._sourceListNode)?void 0:e.focus()}};v._handleClearButtonClick=
function(){this.viewModel.clear();this._focus()};v._handleSearchButtonClick=function(){this.search()};v._handleSuggestionClick=function(e){if(e=e.currentTarget["data-suggestion"])this._focus(),this.search(e)};v._handleUseCurrentLocationClick=function(){this._useCurrentLocation()};v._useCurrentLocation=function(){this._focus("none");this._cancelSuggest();this._cancelSearch();const e=g.createAbortController(),{signal:u}=e;this._searchController=e;this.viewModel.searchNearby({signal:u}).catch(()=>{this._locateFailed=
!0;this.activeMenu="warning"}).then(()=>{this._searchController=null})};v._handleSourceClick=function(e){this._setSourceFromMenuItem(e.currentTarget)};v._setSourceFromMenuItem=function(e){var u;e&&(this.viewModel.activeSourceIndex=e["data-source-index"],this.activeMenu="none",null==(u=this._sourceMenuButtonNode)?void 0:u.focus())};v._sourcesButtonBlur=function(e){this._removeActiveMenu(e&&e.relatedTarget,this._sourceListNode)};v._inputBlur=function(e){e=e&&e.relatedTarget;this._removeActiveMenu(e?
e:this._relatedTarget,this._suggestionListNode)};v._storeRelatedTarget=function(e){this._relatedTarget=e.relatedTarget};v._clearButtonFocus=function(){this.activeMenu="none"};v._removeActiveMenu=function(e,u){!e||e&&u&&u.contains(e)||(this.activeMenu="none")};v._cancelSuggest=function(){this._suggestController&&(this._suggestController.abort(),this._suggestController=null)};v._cancelSearch=function(){this._searchController&&(this._searchController.abort(),this._searchController=null);this._locateFailed=
!1};v._handleInputKeyup=function(e){var u,m=A.eventKey(e);if(!e.ctrlKey&&!e.metaKey&&"Copy"!==m&&"ArrowLeft"!==m&&"ArrowRight"!==m&&"Shift"!==m)if("Tab"===m||"Escape"===m||e.shiftKey&&"Tab"===m)this._cancelSuggest(),"Escape"===m&&(this.activeMenu="none");else{var E="Home"===m||"End"===m||"ArrowUp"===m||"ArrowDown"===m;if("Enter"===m&&0>this._activeMenuItemIndex)this._cancelSuggest();else{var M=null==(u=this._suggestionListNode)?void 0:u.getElementsByTagName("li");if(null!=M&&M.length){"suggestion"!==
this.activeMenu&&(this.activeMenu="suggestion");if(E){e.preventDefault();this._cancelSuggest();this.handleItemNavigation(m,M,this._suggestionListNode);return}e=M[this._activeMenuItemIndex];if("Enter"===m&&e){(m=e["data-suggestion"])?(this._focus(),this.search(m)):e["data-current-location-item"]&&this._useCurrentLocation();return}}this.viewModel.searchTerm&&this.suggest()}}};v.handleItemNavigation=function(e,u,m){const E=this._activeMenuItemIndex;"Home"===e&&(this._activeMenuItemIndex=0);"End"===e&&
(this._activeMenuItemIndex=u.length-1);"ArrowUp"===e&&(this._activeMenuItemIndex=0>=this._activeMenuItemIndex?u.length-1:this._activeMenuItemIndex-1);"ArrowDown"===e&&(this._activeMenuItemIndex=this._activeMenuItemIndex===u.length-1?0:this._activeMenuItemIndex+1);E!==this._activeMenuItemIndex&&I.keepMenuItemWithinView(u[this._activeMenuItemIndex],m)};v._scrollToTopSuggestion=function(){this._suggestionListNode&&(this._suggestionListNode.scrollTop=0)};v._handleInputClick=function(){this.activeMenu=
"suggestion"};v._handleInputPaste=function(e){e=e.target;this.viewModel.searchTerm!==e.value&&(this.viewModel.searchTerm=e.value);this.viewModel.searchTerm&&this.suggest()};v._handleSourceMenuKeydown=function(e){const u=A.eventKey(e);" "===u||"Enter"===u?(e.preventDefault(),e=this._sourceListNode.getElementsByTagName("li")[this._activeMenuItemIndex],this._setSourceFromMenuItem(e)):"ArrowUp"!==u&&"ArrowDown"!==u&&"End"!==u&&"Home"!==u||e.preventDefault()};v._handleSourceMenuKeyup=function(e){var u;
const m=A.eventKey(e),E="ArrowUp"===m||"ArrowDown"===m||"End"===m||"Home"===m;E&&e.preventDefault();if("Escape"===m){var M;this.activeMenu="none";null==(M=this._sourceMenuButtonNode)?void 0:M.focus()}else(e=null==(u=this._sourceListNode)?void 0:u.getElementsByTagName("li"))&&0!==e.length&&E&&("source"!==this.activeMenu&&(this.activeMenu="source"),this.handleItemNavigation(m,e,this._sourceListNode.parentElement))};v._focus=function(e){this.focus();e&&(this.activeMenu=e)};v._formSubmit=function(e){e.preventDefault();
-1===this._activeMenuItemIndex&&this.search()};v._getSourceName=function(e){const {messages:u}=this;var {allSources:m}=this.viewModel;m=m.getItemAt(e);return e===S.ALL_INDEX?u.all:m?m.name||u.untitledSource:u.untitledSource};v._splitResult=function(e,u){u=z.escapeRegExpString(u);return e.replace(new RegExp(`(^|)(${u})(|$)`,"ig"),"$1|$2|$3").split("|")};v._renderSearchResultsContent=function(){this._searchResultRenderer.showMoreResultsOpen=!1;this._searchResultRenderer.viewModel=this.viewModel;return this._searchResultRenderer};
k._createClass(K,[{key:"displayedSearchTerm",get:function(){return`${this.viewModel.searchTerm}`.trim()}},{key:"inputId",get:function(){return this._buildId("input")}},{key:"suggestionsMenuId",get:function(){return this._buildId("suggest-menu")}},{key:"sourceMenuId",get:function(){return this._buildId("source-menu")}},{key:"sourceMenuButtonId",get:function(){return this._buildId("source-menu-button")}}]);return K}(W);b.__decorate([n.property()],a.prototype,"_activeMenuItemIndex",void 0);b.__decorate([n.property()],
a.prototype,"displayedSearchTerm",null);b.__decorate([n.property({readOnly:!0})],a.prototype,"inputId",null);b.__decorate([n.property({readOnly:!0})],a.prototype,"suggestionsMenuId",null);b.__decorate([n.property({readOnly:!0})],a.prototype,"sourceMenuId",null);b.__decorate([n.property({readOnly:!0})],a.prototype,"sourceMenuButtonId",null);b.__decorate([n.property()],a.prototype,"activeMenu",void 0);b.__decorate([f.aliasOf("viewModel.activeSource")],a.prototype,"activeSource",void 0);b.__decorate([f.aliasOf("viewModel.activeSourceIndex")],
a.prototype,"activeSourceIndex",void 0);b.__decorate([f.aliasOf("viewModel.allPlaceholder")],a.prototype,"allPlaceholder",void 0);b.__decorate([f.aliasOf("viewModel.allSources")],a.prototype,"allSources",void 0);b.__decorate([f.aliasOf("viewModel.autoNavigate")],a.prototype,"autoNavigate",void 0);b.__decorate([f.aliasOf("viewModel.autoSelect")],a.prototype,"autoSelect",void 0);b.__decorate([f.aliasOf("viewModel.defaultSources")],a.prototype,"defaultSources",void 0);b.__decorate([n.property()],a.prototype,
"disabled",void 0);b.__decorate([f.aliasOf("viewModel.goToOverride")],a.prototype,"goToOverride",void 0);b.__decorate([n.property()],a.prototype,"iconClass",void 0);b.__decorate([f.aliasOf("viewModel.includeDefaultSources")],a.prototype,"includeDefaultSources",void 0);b.__decorate([n.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],a.prototype,"label",void 0);b.__decorate([f.aliasOf("viewModel.locationEnabled")],a.prototype,"locationEnabled",void 0);b.__decorate([f.aliasOf("viewModel.maxResults")],
a.prototype,"maxResults",void 0);b.__decorate([f.aliasOf("viewModel.maxSuggestions")],a.prototype,"maxSuggestions",void 0);b.__decorate([n.property(),F.messageBundle("esri/widgets/Search/t9n/Search")],a.prototype,"messages",void 0);b.__decorate([n.property(),F.messageBundle("esri/t9n/common")],a.prototype,"messagesCommon",void 0);b.__decorate([f.aliasOf("viewModel.minSuggestCharacters")],a.prototype,"minSuggestCharacters",void 0);b.__decorate([f.aliasOf("viewModel.popupEnabled")],a.prototype,"popupEnabled",
void 0);b.__decorate([f.aliasOf("viewModel.popupTemplate")],a.prototype,"popupTemplate",void 0);b.__decorate([f.aliasOf("viewModel.portal")],a.prototype,"portal",void 0);b.__decorate([f.aliasOf("viewModel.resultGraphic")],a.prototype,"resultGraphic",void 0);b.__decorate([f.aliasOf("viewModel.resultGraphicEnabled")],a.prototype,"resultGraphicEnabled",void 0);b.__decorate([f.aliasOf("viewModel.results")],a.prototype,"results",void 0);b.__decorate([f.aliasOf("viewModel.searchAllEnabled")],a.prototype,
"searchAllEnabled",void 0);b.__decorate([f.aliasOf("viewModel.searchTerm")],a.prototype,"searchTerm",void 0);b.__decorate([f.aliasOf("viewModel.selectedResult")],a.prototype,"selectedResult",void 0);b.__decorate([f.aliasOf("viewModel.sources")],a.prototype,"sources",void 0);b.__decorate([f.aliasOf("viewModel.suggestions")],a.prototype,"suggestions",void 0);b.__decorate([f.aliasOf("viewModel.suggestionsEnabled")],a.prototype,"suggestionsEnabled",void 0);b.__decorate([f.aliasOf("viewModel.view")],a.prototype,
"view",void 0);b.__decorate([L.vmEvent("search-complete search-clear search-start select-result suggest-start suggest-complete".split(" ")),n.property({type:S})],a.prototype,"viewModel",void 0);b.__decorate([f.aliasOf("viewModel.clear")],a.prototype,"clear",null);return a=b.__decorate([w.subclass("esri.widgets.Search")],a)});