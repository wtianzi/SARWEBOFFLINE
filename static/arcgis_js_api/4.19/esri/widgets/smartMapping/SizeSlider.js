// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.19/esri/copyright.txt for details.
//>>built
define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/maybe ../../core/Logger ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/aliasOf ../../core/accessorSupport/decorators/cast ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../Color ../../renderers/visualVariables/support/SizeStop ../../renderers/visualVariables/SizeVariable ../support/widgetUtils ../support/decorators/messageBundle ../../chunks/index ./support/utils ./SmartMappingSliderBase ./SizeSlider/SizeSliderViewModel".split(" "),
function(E,l,h,x,P,t,p,F,Q,G,R,S,T,y,z,A,H,I,q,m,J,K){var w;const B={trackFillColor:new y([149,149,149]),trackBackgroundColor:new y([224,224,224])};h=w=function(C){function u(a,b){a=C.call(this,a,b)||this;a._maxRampFillWidth=1;a._minRampFillWidth=.2;a._rampNode=null;a.handlesSyncedToPrimary=null;a.label=void 0;a.messages=null;a.persistSizeRangeEnabled=null;a.primaryHandleEnabled=null;a.stops=null;a.style={...B};a.viewModel=new K;a.zoomOptions=null;return a}E._inheritsLoose(u,C);var n=u.prototype;
n.castStyle=function(a){return{...B,...a}};u.fromRendererResult=function(a,b){const {visualVariables:c,statistics:d}=a,{avg:k,stddev:e}=d,f=c[0],[g,r]=m.getSizesFromVariable(f);a=a.renderer.authoringInfo.visualVariables[0];return new w({max:a.maxSliderValue,min:a.minSliderValue,stops:[{value:f.minDataValue,size:r},{value:f.maxDataValue,size:g}],histogramConfig:{average:k,standardDeviation:e,bins:b?b.bins:[]}})};n.updateFromRendererResult=function(a,b){const {visualVariables:c,statistics:d}=a,{avg:k,
stddev:e}=d,f=c[0],[g,r]=m.getSizesFromVariable(f);a=a.renderer.authoringInfo.visualVariables[0];this.set({max:a.maxSliderValue,min:a.minSliderValue,stops:[{value:f.minDataValue,size:r},{value:f.maxDataValue,size:g}],histogramConfig:{average:k,standardDeviation:e,bins:b?b.bins:[]}})};n.updateVisualVariable=function(a){const b=a.clone();var {stops:c}=this;if(!a||!c)return null;if(b.stops)return b.stops=c,b;a=c[0];c=c[c.length-1];let d=b.maxSize,k=b.minSize;if(d instanceof A){var e=d.stops;const f=
c.size/e[0].size;e=e.map(g=>{g.size*=f;return g});d.stops=e}else d=c.size;if(k instanceof A){e=k.stops;const f=a.size/e[0].size;e=e.map(g=>{g.size*=f;return g});k.stops=e}else k=a.size;b.set({maxDataValue:c.value,minDataValue:a.value,maxSize:d,minSize:k});return b};n.updateFromVisualVariable=function(a){if(a){var {maxDataValue:b,minDataValue:c,stops:d}=a;if(d)this.stops=d;else{const [k,e]=m.getSizesFromVariable(a);this.stops=[new z({value:c,size:e}),new z({value:b,size:k})]}}};n.render=function(){const {state:a,
label:b}=this,c="disabled"===a,d=this.classes("esri-size-slider","esri-widget","esri-widget--panel",{["esri-disabled"]:c});return q.jsx("div",{"aria-label":b,class:d},c?null:this.renderContent(this.renderRamp(),"esri-size-slider__slider-container","esri-size-slider__histogram-container"))};n.renderRamp=function(){const {style:{trackBackgroundColor:a},zoomOptions:b}=this;return q.jsx("div",{afterCreate:H.storeNode,bind:this,class:"esri-size-slider__ramp","data-node-ref":"_rampNode"},q.jsx("svg",{key:"ramp-svg",
xmlns:"http://www.w3.org/2000/svg"},q.jsx("rect",{x:"0",y:"0",fill:m.getFillFromColor(a),height:"100%",width:"100%"}),this.renderPath()),b?this.renderZoomCaps():null)};n.renderPath=function(){if(this._rampNode){var {offsetHeight:a=0,offsetWidth:b=0}=this._rampNode;if(x.isSome(a)&&x.isSome(b)){var {primaryHandleEnabled:c,stops:d,style:{trackFillColor:k},values:e,viewModel:{max:f,min:g},_maxRampFillWidth:r,_minRampFillWidth:L}=this,v=[r,L];d[0].size<d[d.length-1].size&&v.reverse();var [M,D]=v,[N,O]=
e;v=c?m.getDynamicPathForSizeStops({max:f,min:g,pathHeight:a,pathWidth:b,stops:d,padding:D}):m.getPathForSizeStops({bottomValue:N,bottomWidth:M,max:f,min:g,pathHeight:a,pathWidth:b,topValue:O,topWidth:D});return q.jsx("path",{d:v,fill:m.getFillFromColor(k)})}}};return u}(J.SmartMappingSliderBase);l.__decorate([p.aliasOf("viewModel.handlesSyncedToPrimary")],h.prototype,"handlesSyncedToPrimary",void 0);l.__decorate([t.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],h.prototype,"label",
void 0);l.__decorate([t.property(),I.messageBundle("esri/widgets/smartMapping/SizeSlider/t9n/SizeSlider")],h.prototype,"messages",void 0);l.__decorate([p.aliasOf("viewModel.persistSizeRangeEnabled")],h.prototype,"persistSizeRangeEnabled",void 0);l.__decorate([p.aliasOf("viewModel.primaryHandleEnabled")],h.prototype,"primaryHandleEnabled",void 0);l.__decorate([p.aliasOf("viewModel.stops")],h.prototype,"stops",void 0);l.__decorate([t.property()],h.prototype,"style",void 0);l.__decorate([F.cast("style")],
h.prototype,"castStyle",null);l.__decorate([t.property()],h.prototype,"viewModel",void 0);l.__decorate([p.aliasOf("viewModel.zoomOptions")],h.prototype,"zoomOptions",void 0);return h=w=l.__decorate([G.subclass("esri.widgets.smartMapping.SizeSlider")],h)});