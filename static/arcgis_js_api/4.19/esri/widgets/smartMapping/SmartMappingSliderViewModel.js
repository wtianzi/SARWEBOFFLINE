// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.19/esri/copyright.txt for details.
//>>built
define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/maybe ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../Slider/SliderViewModel ./support/utils".split(" "),function(t,g,e,h,C,D,k,E,z,F,G,H,A,w){e=function(x){function p(a){var b=x.call(this,a)||this;b._max=null;
b._min=null;b.stops=null;b.hasTimeData=!1;b.inputFormatFunction=(d,c)=>"max"===c?b.getUnzoomedMax().toString():"min"===c?b.getUnzoomedMin().toString():d.toString();b.inputParseFunction=null;b.labelFormatFunction=d=>{if(b.hasTimeData)return w.formatDateLabel(d);const {max:c,min:f,precision:l}=t._assertThisInitialized(b);return w.formatNumberLabel(parseFloat(d.toFixed(10<c-f?2:l)))};b.zoomingEnabled=!0;return b}t._inheritsLoose(p,x);var n=p.prototype;n.getStopIndexFromValueIndex=function(a){const {stops:b}=
this;return 0===a?0:b.length-1};n.getStopChanges=function(a,b){const {max:d,min:c,stops:f,values:l}=this,u=this.getStopIndexFromValueIndex(a),q=0===a?c:l[a-1];a=a===l.length-1?d:l[a+1];const m=f.map(r=>r.hasOwnProperty("ratio")?r.ratio:r.value);m[u]=Math.max(Math.min(b,a),q);const v=m[m.length-1]-m[0],B=f.length-1;return m.map((r,y)=>({index:y,value:this.toPrecision(m[0]+y*v/B)}))};n.getValuesFromStops=function(){var a;return null==(a=this.stops)?void 0:a.map(b=>b.hasOwnProperty("ratio")?b.ratio:
b.value)};n.updateStops=function(a){const {stops:b}=this,d=this.getValuesFromStops();for(const c of a)d[c.index]=c.value;b.forEach((c,f)=>{c.hasOwnProperty("ratio")?c.ratio=d[f]:c.value=d[f]})};n.getUnzoomedMax=function(){return this.zoomOptions&&h.isSome(this._max)?this._max:this.max};n.getUnzoomedMin=function(){return this.zoomOptions&&h.isSome(this._min)?this._min:this.min};n._storeZoomMax=function(a,b){this._max=b;this.setMax(a)};n._storeZoomMin=function(a,b){this._min=b;this.setMin(a)};t._createClass(p,
[{key:"labels",get:function(){var {values:a}=this;a=a&&a.length?a.map((c,f)=>this.getLabelForValue(c,"value",f)):[];const b=this.getUnzoomedMax(),d=this.getUnzoomedMin();return{max:this.getLabelForValue(b,"max"),min:this.getLabelForValue(d,"min"),values:a}}},{key:"max",set:function(a){var {zoomOptions:b}=this;if(b&&h.isSome(b.max)){const d=this.values;let c=b.max;a<c&&(c=a,b.max=a);if(d&&d.length)for(b=0;b<d.length;b++)a<d[b]&&this.setValue(b,a);this._storeZoomMax(c,a)}else this.setMax(a);this.notifyChange("labels")}},
{key:"min",set:function(a){var {zoomOptions:b}=this;if(b&&h.isSome(b.min)){const d=this.values;let c=b.min;a>c&&(c=a,b.min=a);if(d&&d.length)for(b=0;b<d.length;b++)a>d[b]&&this.setValue(b,a);this._storeZoomMin(c,a)}else this.setMin(a);this.notifyChange("labels")}},{key:"state",get:function(){const {max:a,min:b,values:d}=this;return h.isSome(a)&&h.isSome(b)&&0<d.length?"ready":"disabled"}},{key:"values",get:function(){var {stops:a}=this;if(!a||!a.length||2>a.length)return[];a=this.getValuesFromStops();
return[a[0],a[a.length-1]]}},{key:"zoomOptions",set:function(a){const {zoomingEnabled:b,zoomOptions:d}=this;if(b){if(d){var c=h.isSome(this._max)?this._max:this.max;const f=h.isSome(this._min)?this._min:this.min;if(a){const {max:l,min:u}=a,q=h.isSome(l),m=h.isSome(u),v=q?a.max:c;c=q?c:null;this._storeZoomMin(m?a.min:f,m?f:null);this._storeZoomMax(v,c)}else this.setMax(c),this.setMin(f),this._max=this._min=null}else if(a){const {max:f,min:l}=a;h.isSome(l)&&this._storeZoomMin(a.min,this.min);h.isSome(f)&&
this._storeZoomMax(a.max,this.max)}this._set("zoomOptions",a);this.notifyChange("max");this.notifyChange("min")}}}]);return p}(A);g.__decorate([k.property()],e.prototype,"stops",void 0);g.__decorate([k.property()],e.prototype,"hasTimeData",void 0);g.__decorate([k.property()],e.prototype,"inputFormatFunction",void 0);g.__decorate([k.property()],e.prototype,"inputParseFunction",void 0);g.__decorate([k.property()],e.prototype,"labelFormatFunction",void 0);g.__decorate([k.property({readOnly:!0})],e.prototype,
"labels",null);g.__decorate([k.property()],e.prototype,"max",null);g.__decorate([k.property()],e.prototype,"min",null);g.__decorate([k.property({readOnly:!0})],e.prototype,"state",null);g.__decorate([k.property({readOnly:!0})],e.prototype,"values",null);g.__decorate([k.property()],e.prototype,"zoomingEnabled",void 0);g.__decorate([k.property()],e.prototype,"zoomOptions",null);return e=g.__decorate([z.subclass("esri.widgets.smartMapping.SmartMappingSliderViewModel")],e)});