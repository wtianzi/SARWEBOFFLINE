// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.19/esri/copyright.txt for details.
//>>built
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/aliasOf ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ./support/widgetUtils ./support/decorators/messageBundle ../chunks/index ./Widget ../chunks/ResizeObserver ./FloorFilter/FloorFilterViewModel".split(" "),function(z,
l,h,D,E,t,n,F,A,G,H,I,u,w,d,B,C,x){h=function(y){function v(a,b){var c=y.call(this,a,b)||this;c._baseNode=null;c.enabled=null;c.longNames=null;c.minimized=null;c.pinnedLevels=null;c.site=null;c.facility=null;c.level=null;c.view=null;c.viewModel=new x;c.messages=null;c.messagesCommon=null;c.goToOverride=null;c._resizeObserver=new C.ResizeObserver(()=>c.scheduleRender());return c}z._inheritsLoose(v,y);var f=v.prototype;f.destroy=function(){this._resizeObserver.disconnect()};f.updateWebDocument=function(){};
f.render=function(){var a,{longNames:b}=this;b=b&&this.viewModel.isNormalMode?"expanded":"collapsed";var c=this.renderButtons();const e=this.renderFilterMenu(),g=d.jsx("div",{class:this.classes("esri-floor-filter__separator")});var k=this._getComponentPosition();const p=this._getPosition(k),m="top-right"===k||"bottom-right"===k,r="top-left"===k||"bottom-left"===k,q=u.isRTL();k=q&&r||!q&&m?e:c;c=q&&r||!q&&m?c:e;return d.jsx("div",{afterCreate:this._afterBaseNodeCreate,key:"floor-filter-menu",class:this.classes("esri-floor-filter",
"esri-widget",`${"esri-floor-filter__layout--"}${b}`,`${"esri-floor-filter__position--"}${p}`)},k,(null==(a=this.viewModel)?void 0:a.filterMenuOpen)&&g,c)};f.renderButtons=function(){const a=this._getComponentPosition(),b=[];"top"===this._getPosition(a)?(b.push(this.renderBrowseButton()),b.push(this.renderLevelButtons()),b.push(this.renderCloseLevelsButton()),b.push(this.renderZoomButton()),b.push(this.renderCollapseToggleButton())):(b.push(this.renderCollapseToggleButton()),b.push(this.renderZoomButton()),
b.push(this.renderCloseLevelsButton()),b.push(this.renderLevelButtons()),b.push(this.renderBrowseButton()));return d.jsx("div",{key:"button-container",class:this.classes("esri-widget","esri-floor-filter__button-container")},b)};f.renderBrowseButton=function(){var a;const {longNames:b,messages:c}=this;return d.jsx("button",{key:"browse-button",title:c.buttons.browse,bind:this,class:this.classes("esri-widget","esri-widget--button","esri-interactive",("loading"===this.viewModel.state||"disabled"===this.viewModel.state)&&
"esri-button--disabled","esri-floor-filter__browse-button",(null==(a=this.viewModel)?void 0:a.filterMenuOpen)&&"esri-widget--button-active"),"aria-expanded":this.viewModel.filterMenuOpen.toString(),"aria-label":c.buttons.browse,onclick:this._toggleFilterMenu},d.jsx("div",{class:this.classes("esri-floor-filter__button-info")},d.jsx("span",{class:this.classes("esri-icon","esri-icon-urban-model")}),d.jsx("span",{class:this.classes("esri-floor-filter__button-label")},b&&this.viewModel.isNormalMode&&c.buttons.browse)))};
f.renderLevelButtons=function(){var a,b,c,e;if(null==(a=this.viewModel)||null==(b=a.filterFeatures)||null==(c=b.levels)||!c.levelsInfo||!this.facility)return null;const {facility:g,messagesCommon:k}=this;a=(null==(e=this.viewModel)?void 0:e.getFacilityLevels(g)).map(p=>this.renderLevelButton(p));if(!a.length)return null;this._isWebScene(this.view.map)&&1<(null==a?void 0:a.length)&&(e=this.renderLevelButton({id:`all--${g}`,facilityId:g,shortName:k.all,longName:k.all,levelNumber:null,verticalOrder:null}),
a.push(e));return d.jsx("ul",{key:"levels-button-container",class:this.classes("esri-floor-filter__levels-container")},a)};f.renderLevelButton=function(a){var {longNames:b}=this;const {shortName:c,longName:e,id:g}=a;a=this.level===g;b=b&&this.viewModel.isNormalMode?e:c;return this.viewModel.isNormalMode||a||this.viewModel.levelsExpanded?d.jsx("li",{key:`levels--${g}`},d.jsx("button",{"data-id":g,bind:this,class:this.classes("esri-widget--button",a?"esri-widget--button-active":null,"esri-interactive",
"esri-floor-filter__level-button"),onclick:this._levelSelected},b)):null};f.renderCloseLevelsButton=function(){if(!this.level||this.viewModel.isNormalMode||!this.viewModel.levelsExpanded)return null;const {messagesCommon:a}=this;return d.jsx("button",{key:"close-levels-button",title:a.close,bind:this,class:this.classes("esri-widget","esri-widget--button","esri-interactive","esri-floor-filter__close-levels-button"),"aria-label":a.close,onclick:this._closeLevels},d.jsx("div",{class:this.classes("esri-floor-filter__button-info")},
d.jsx("span",{class:this.classes("esri-icon","esri-icon-close")})))};f.renderZoomButton=function(){var a,b,c,e,g;const {longNames:k,messages:p,facility:m,site:r}=this,q=null==(a=this.viewModel)?void 0:a.filterMenuType;a=null==(b=this.viewModel)?void 0:b.filterMenuOpen;b=null==(c=this.viewModel)?void 0:c.getSite(r);c=null==(e=this.viewModel)?void 0:e.getFacility(m);return d.jsx("button",{key:"zoom-button",title:p.buttons.zoomTo,bind:this,class:this.classes("esri-widget","esri-widget--button",("site"===
q&&a?!b:!c)&&"esri-button--disabled","esri-interactive",0<(null==(g=this.viewModel)?void 0:g.getFacilityLevels(m).length)?"esri-floor-filter__zoom-button--levels":"esri-floor-filter__zoom-button"),"aria-label":p.buttons.zoomTo,onclick:this._zoomToClicked},d.jsx("div",{class:this.classes("esri-floor-filter__button-info")},d.jsx("span",{class:this.classes("esri-icon","esri-icon-zoom-to-object")}),d.jsx("span",{class:this.classes("esri-floor-filter__button-label")},k&&this.viewModel.isNormalMode&&p.buttons.zoomTo)))};
f.renderCollapseToggleButton=function(){const {longNames:a,messagesCommon:b}=this,c=this.classes("esri-icon",a?"esri-icon-collapse":"esri-icon-expand"),e=a?b.collapse:b.expand;return d.jsx("button",{key:"minimize-toggle-button",title:e,bind:this,class:this.classes("esri-widget","esri-widget--button","esri-interactive","esri-floor-filter__minimize-toggle-button"),"aria-label":e,onclick:this._toggleCollapsed},d.jsx("div",{class:this.classes("esri-floor-filter__button-info")},d.jsx("span",{class:c}),
d.jsx("span",{class:this.classes("esri-floor-filter__button-label")},a&&this.viewModel.isNormalMode&&b.collapse)))};f.renderFilterMenu=function(){var a,b,c;return null!=(a=this.viewModel)&&a.filterMenuOpen?"site"===(null==(b=this.viewModel)?void 0:b.filterMenuType)?this.renderSiteFilterMenu():"facility"===(null==(c=this.viewModel)?void 0:c.filterMenuType)?this.renderFacilityFilterMenu():null:null};f.renderSiteFilterMenu=function(){var a,b;const {messages:c,messagesCommon:e}=this;var g=this.site?null==
(a=this.viewModel)?void 0:null==(b=a.getSite(this.site))?void 0:b.name:c.selector.selectSite;a=d.jsx("div",{key:"filter-menu-site-header",class:this.classes("esri-floor-filter__filter-menu-header")},d.jsx("div",{class:this.classes("esri-floor-filter__filter-menu-header-text-group")},d.jsx("h2",{class:this.classes("esri-floor-filter__filter-menu-header-text")},g)),d.jsx("button",{bind:this,title:e.close,class:this.classes("esri-icon","esri-icon-close"),onclick:this._closeClicked}));b=this.renderSearchInput();
g=this.renderSiteItems();return d.jsx("div",{key:"filter-menu-site",class:this.classes("esri-floor-filter__filter-menu")},a,b,g)};f.renderFacilityFilterMenu=function(){var a,b,c,e;const {messages:g,messagesCommon:k,site:p}=this;var m=null==(a=this.viewModel)?void 0:null==(b=a.getSite(p))?void 0:b.name;a=this.facility&&(null==(c=this.viewModel)?void 0:null==(e=c.getFacility(this.facility))?void 0:e.name)||g.selector.selectFacility;c=this.viewModel.hasMultipleSites?d.jsx("button",{bind:this,title:k.back,
class:this.classes("esri-floor-filter__filter-menu-header-back"),onclick:this._backClicked},d.jsx("span",{class:this.classes(u.isRTL()?"esri-icon-right":"esri-icon-left")})):null;m=this.viewModel.hasMultipleSites?d.jsx("h3",{class:this.classes("esri-floor-filter__filter-menu-header-subtext")},m):null;m=d.jsx("div",{key:"filter-menu-site-header",class:this.classes("esri-floor-filter__filter-menu-header")},c,d.jsx("div",{class:this.classes("esri-floor-filter__filter-menu-header-text-group")},d.jsx("h2",
{class:this.classes("esri-floor-filter__filter-menu-header-text")},a),m),d.jsx("button",{bind:this,title:k.close,class:this.classes("esri-icon","esri-icon-close"),onclick:this._closeClicked}));c=this.renderSearchInput();e=this.renderFacilityItems();return d.jsx("div",{key:"filter-menu-facility",class:this.classes("esri-floor-filter__filter-menu")},m,c,e)};f.renderSearchInput=function(){const {messagesCommon:a}=this;return d.jsx("div",{key:"filter-menu-search",class:this.classes("esri-floor-filter__filter-menu-search")},
d.jsx("span",{class:this.classes("esri-icon","esri-icon-search")}),d.jsx("input",{bind:this,key:"filter-menu-search__input",class:this.classes("esri-floor-filter__filter-menu-search-input"),placeholder:a.search,oninput:this._onSearchChange,onpaste:this._onSearchChange}))};f.renderBlueCircle=function(){return d.jsx("span",{key:"floor-filter__selected-item-circle",class:this.classes("esri-floor-filter__selected-item-circle")})};f.renderSiteItems=function(){var a,b,c,e;if(null==(a=this.viewModel)||null==
(b=a.filterFeatures)||null==(c=b.sites)||!c.sitesInfo)return null;({messages:b}=this);a=this.viewModel.filterSites(this.viewModel.filterFeatures.sites.sitesInfo).map(g=>this.renderSiteItem(g));b=0===a.length&&(null==(e=this.viewModel)?void 0:e.searchTerm)&&d.jsx("div",{class:this.classes("esri-widget__content--empty")},b.noResults);return d.jsx("ul",{key:"filter-menu-items--sites",class:this.classes("esri-floor-filter__filter-menu-items")},a,b)};f.renderSiteItem=function(a){const {name:b,id:c}=a;
a=this.site===c;return d.jsx("li",{key:`filter-menu-site--${c}`},d.jsx("button",{"data-id":c,bind:this,class:this.classes("esri-floor-filter__filter-menu-site"),onclick:this._siteSelected},a&&this.renderBlueCircle(),d.jsx("span",{class:this.classes(a?"esri-floor-filter__filter-menu-item-name--selected":"esri-floor-filter__filter-menu-item-name")},b),d.jsx("span",{class:this.classes(u.isRTL()?"esri-icon-left":"esri-icon-right")})))};f.renderFacilityItems=function(){var a,b,c,e;if(null==(a=this.viewModel)||
null==(b=a.filterFeatures)||null==(c=b.facilities)||!c.facilitiesInfo)return null;({messages:b}=this);a=this.viewModel.filterFacilities(this.viewModel.filterFeatures.facilities.facilitiesInfo).map(g=>this.renderFacilityItem(g));b=0===a.length&&(null==(e=this.viewModel)?void 0:e.searchTerm)&&d.jsx("div",{class:this.classes("esri-widget__content--empty")},b.noResults);return d.jsx("ul",{key:"filter-menu-items--facilities",class:this.classes("esri-floor-filter__filter-menu-items")},a,b)};f.renderFacilityItem=
function(a){const {name:b,id:c}=a;a=this.facility===c;return d.jsx("li",{key:`filter-menu-facility--${c}`},d.jsx("button",{"data-id":c,bind:this,class:this.classes("esri-floor-filter__filter-menu-facility"),onclick:this._facilitySelected},a&&this.renderBlueCircle(),d.jsx("span",{class:this.classes(a?"esri-floor-filter__filter-menu-item-name--selected":"esri-floor-filter__filter-menu-item-name")},b)))};f._afterBaseNodeCreate=function(a){var b;if(this._baseNode){var c;null==(c=this._resizeObserver)?
void 0:c.unobserve(this._baseNode)}this._baseNode=a;null==(b=this._resizeObserver)?void 0:b.observe(this._baseNode)};f._toggleCollapsed=function(){this.longNames=!this.longNames};f._toggleFilterMenu=function(){var a,b;const c=null!=(a=null==(b=this.viewModel)?void 0:b.filterMenuOpen)?a:!1;this.viewModel.filterMenuOpen=!c};f._setFilterMenuType=function(a){this.viewModel.filterMenuType=a};f._zoomToClicked=function(){var a,b;if(this.site&&"site"===(null==(a=this.viewModel)?void 0:a.filterMenuType)&&
null!=(b=this.viewModel)&&b.filterMenuOpen){var c,e=null==(c=this.viewModel)?void 0:c.getSite(this.site);this.viewModel.goTo(e)}else if(this.facility)c=null==(e=this.viewModel)?void 0:e.getFacility(this.facility),this.viewModel.goTo(c);else if(this.site){var g;c=null==(g=this.viewModel)?void 0:g.getSite(this.site);this.viewModel.goTo(c)}};f._onSearchChange=function(a){var b;a=a.target;""===a.value?this.viewModel.searchTerm=null:a.value&&(null==(b=this.viewModel)?void 0:b.searchTerm)!==a.value&&(this.viewModel.searchTerm=
a.value.toLowerCase().trim())};f._closeClicked=function(){this.viewModel.searchTerm=null;this.viewModel.filterMenuOpen=!1};f._backClicked=function(){this.viewModel.filterMenuType="site";this.viewModel.searchTerm=null};f._siteSelected=function(a){a=a.currentTarget.getAttribute("data-id");const b=this.viewModel.getSite(a);let c=!1;this.site!==a&&(this.level=this.facility=void 0,c=!0,this.viewModel.levelsExpanded=!1);this.site=a;this.viewModel.searchTerm=null;this._setFilterMenuType("facility");this.viewModel.goTo(b);
c&&this.viewModel.setFloors(null)};f._facilitySelected=function(a){a=a.currentTarget.getAttribute("data-id");const b=this.viewModel.getFacility(a);var c=!1;if(this.facility!==a){if("base-floors"===this.viewModel.filterMode){var e;this.level=(c=null==(e=this.viewModel)?void 0:e.getBaseLevel(b))?c.id:void 0}else this.level=void 0;c=!0;this.viewModel.levelsExpanded=!1}this.facility=a;this.viewModel.goTo(b);c&&(e=this.viewModel.getLevel(this.level),this.viewModel.setFloors(e));this.viewModel.isNormalMode||
(a=this.viewModel.getFacilityLevels(a),1<(null==a?void 0:a.length)&&(this.viewModel.levelsExpanded=!0))};f._levelSelected=function(a){this.level=a.currentTarget.getAttribute("data-id")};f._closeLevels=function(){this.viewModel.levelsExpanded=!1};f._isWebScene=function(a){return"esri.WebScene"===a.declaredClass};f._getComponentPosition=function(){var a,b;return null==(a=this.view)?void 0:null==(b=a.ui)?void 0:b.getPosition(this.container)};f._getPosition=function(a){switch(a){case "bottom-right":case "bottom-left":return"bottom";
default:return"top"}};return v}(B);l.__decorate([n.aliasOf("viewModel.enabled")],h.prototype,"enabled",void 0);l.__decorate([n.aliasOf("viewModel.longNames")],h.prototype,"longNames",void 0);l.__decorate([n.aliasOf("viewModel.minimized")],h.prototype,"minimized",void 0);l.__decorate([n.aliasOf("viewModel.pinnedLevels")],h.prototype,"pinnedLevels",void 0);l.__decorate([n.aliasOf("viewModel.site")],h.prototype,"site",void 0);l.__decorate([n.aliasOf("viewModel.facility")],h.prototype,"facility",void 0);
l.__decorate([n.aliasOf("viewModel.level")],h.prototype,"level",void 0);l.__decorate([n.aliasOf("viewModel.view")],h.prototype,"view",void 0);l.__decorate([t.property({type:x})],h.prototype,"viewModel",void 0);l.__decorate([t.property(),w.messageBundle("esri/widgets/FloorFilter/t9n/FloorFilter")],h.prototype,"messages",void 0);l.__decorate([t.property(),w.messageBundle("esri/t9n/common")],h.prototype,"messagesCommon",void 0);l.__decorate([n.aliasOf("viewModel.goToOverride")],h.prototype,"goToOverride",
void 0);l.__decorate([n.aliasOf("viewModel.updateWebDocument")],h.prototype,"updateWebDocument",null);return h=l.__decorate([A.subclass("esri.widgets.FloorFilter")],h)});