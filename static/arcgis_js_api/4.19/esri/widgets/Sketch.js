// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.19/esri/copyright.txt for details.
//>>built
require({cache:{"esri/views/interactive/snapping/SnappingOptions":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../../core/Accessor ../../../core/Collection ./Settings ./FeatureSnappingLayerSource".split(" "),
function(a,g,r,A,v,t,p,b,k,n,l,q,C,w,x){r=function(c){function m(f){f=c.call(this,f)||this;f.enabled=!1;f.enabledToggled=!1;f.selfEnabled=!0;f.featureEnabled=!0;f.featureSources=new C;f.distance=w.defaults.distance;f.touchSensitivityMultiplier=w.defaults.touchSensitivityMultiplier;return f}a._inheritsLoose(m,c);a._createClass(m,[{key:"effectiveEnabled",get:function(){return this.enabledToggled?!this.enabled:this.enabled}},{key:"effectiveSelfEnabled",get:function(){return this.effectiveEnabled&&this.selfEnabled}},
{key:"effectiveFeatureEnabled",get:function(){return this.effectiveEnabled&&this.featureEnabled}}]);return m}(q);g.__decorate([t.property()],r.prototype,"enabled",void 0);g.__decorate([t.property()],r.prototype,"enabledToggled",void 0);g.__decorate([t.property()],r.prototype,"selfEnabled",void 0);g.__decorate([t.property()],r.prototype,"featureEnabled",void 0);g.__decorate([t.property({type:C.ofType(x)})],r.prototype,"featureSources",void 0);g.__decorate([t.property()],r.prototype,"distance",void 0);
g.__decorate([t.property()],r.prototype,"touchSensitivityMultiplier",void 0);g.__decorate([t.property({readOnly:!0})],r.prototype,"effectiveEnabled",null);g.__decorate([t.property({readOnly:!0})],r.prototype,"effectiveSelfEnabled",null);g.__decorate([t.property({readOnly:!0})],r.prototype,"effectiveFeatureEnabled",null);return r=g.__decorate([b.subclass("esri.views.interactive.snapping.SnappingOptions")],r)})},"esri/views/interactive/snapping/Settings":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/decorators/subclass ../../../core/JSONSupport ../../../Color".split(" "),
function(a,g,r,A,v,t,p){let b=function(k){function n(){var l=k.apply(this,arguments)||this;l.enabled=!0;return l}g._inheritsLoose(n,k);return n}(t.JSONSupport);r.__decorate([A.property({type:Boolean})],b.prototype,"enabled",void 0);b=r.__decorate([v.subclass("esri.views.interactive.snapping.Settings.DefaultSnappingAlgorithm")],b);t=function(k){function n(l){l=k.call(this,l)||this;l.lineSnapper=new b;l.parallelLineSnapper=new b;l.rightAngleSnapper=new b;l.rightAngleTriangleSnapper=new b;l.shortLineThreshold=
15;l.distance=5;l.pointThreshold=1E-6;l.intersectionParallelLineThreshold=1E-6;l.parallelLineThreshold=1E-6;l.touchSensitivityMultiplier=1.5;l.pointOnLineThreshold=1E-6;l.orange=new p([255,127,0]);l.lineHintWidthReference=3;l.lineHintWidthTarget=3;l.lineHintFadedExtensions=.3;l.parallelLineHintWidth=2;l.parallelLineHintLength=24;l.parallelLineHintOffset=1.5;l.rightAngleHintSize=24;l.rightAngleHintOutlineSize=1.5;return l}g._inheritsLoose(n,k);return n}(t.JSONSupport);r.__decorate([A.property({type:b,
constructOnly:!0,nonNullable:!0,json:{write:!0}})],t.prototype,"lineSnapper",void 0);r.__decorate([A.property({type:b,constructOnly:!0,nonNullable:!0,json:{write:!0}})],t.prototype,"parallelLineSnapper",void 0);r.__decorate([A.property({type:b,constructOnly:!0,nonNullable:!0,json:{write:!0}})],t.prototype,"rightAngleSnapper",void 0);r.__decorate([A.property({type:b,constructOnly:!0,nonNullable:!0,json:{write:!0}})],t.prototype,"rightAngleTriangleSnapper",void 0);r.__decorate([A.property({type:Number,
nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],t.prototype,"shortLineThreshold",void 0);r.__decorate([A.property({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],t.prototype,"distance",void 0);r.__decorate([A.property({type:Number,nonNullable:!0,range:{min:0,max:1E-5},json:{write:!0}})],t.prototype,"pointThreshold",void 0);r.__decorate([A.property({type:Number,nonNullable:!0,range:{min:0,max:1E-5},json:{write:!0}})],t.prototype,"intersectionParallelLineThreshold",
void 0);r.__decorate([A.property({type:Number,nonNullable:!0,range:{min:0,max:1E-5},json:{write:!0}})],t.prototype,"parallelLineThreshold",void 0);r.__decorate([A.property({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],t.prototype,"touchSensitivityMultiplier",void 0);r.__decorate([A.property({type:Number,nonNullable:!0,range:{min:0,max:1E-5},json:{write:!0}})],t.prototype,"pointOnLineThreshold",void 0);r.__decorate([A.property({type:p,nonNullable:!0})],t.prototype,"orange",void 0);
r.__decorate([A.property({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],t.prototype,"lineHintWidthReference",void 0);r.__decorate([A.property({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],t.prototype,"lineHintWidthTarget",void 0);r.__decorate([A.property({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],t.prototype,"lineHintFadedExtensions",void 0);r.__decorate([A.property({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],
t.prototype,"parallelLineHintWidth",void 0);r.__decorate([A.property({type:Number,nonNullable:!0,range:{min:0,max:50},json:{write:!0}})],t.prototype,"parallelLineHintLength",void 0);r.__decorate([A.property({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],t.prototype,"parallelLineHintOffset",void 0);r.__decorate([A.property({type:Number,nonNullable:!0,range:{min:0,max:46},json:{write:!0}})],t.prototype,"rightAngleHintSize",void 0);r.__decorate([A.property({type:Number,nonNullable:!0,
range:{min:0,max:6},json:{write:!0}})],t.prototype,"rightAngleHintOutlineSize",void 0);t=r.__decorate([v.subclass("esri.views.interactive.snapping.Settings.Defaults")],t);r=new t;a.defaults=r;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/interactive/snapping/FeatureSnappingLayerSource":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../../core/Accessor".split(" "),
function(a,g,r,A,v,t,p,b,k,n,l,q){r=function(C){function w(x){x=C.call(this,x)||this;x.layer=null;x.enabled=!0;x.updating=!1;x.availability=1;return x}a._inheritsLoose(w,C);return w}(q);g.__decorate([t.property({constructOnly:!0})],r.prototype,"layer",void 0);g.__decorate([t.property()],r.prototype,"enabled",void 0);g.__decorate([t.property()],r.prototype,"updating",void 0);g.__decorate([t.property()],r.prototype,"availability",void 0);return r=g.__decorate([b.subclass("esri.views.interactive.snapping.SnappingLayerSource")],
r)})},"esri/widgets/Sketch/SketchViewModel":function(){define("require ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/maybe ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/Error ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/promiseUtils ../../geometry/Point ../../geometry/support/coordsUtils ../../geometry ../../core/Evented ../../core/Collection ../../symbols/CIMSymbol ../../core/screenUtils ../../symbols/SimpleLineSymbol ../../symbols/SimpleFillSymbol ../../symbols/SimpleMarkerSymbol ../../symbols ../../Graphic ../../core/Handles ../../geometry/projectionEllipsoid ../../core/watchUtils ../../layers/GraphicsLayer ../../views/input/InputManager ../../views/DOMContainer ../../views/support/screenUtils ../../views/draw/Draw ../../views/interactive/snapping/SnappingOptions ../../views/3d/interactive/editingTools/isSupportedGraphicUtils ../../views/3d/interactive/editingTools/moveGraphic/isSupportedGraphic ../../views/3d/interactive/editingTools/reshapeGraphic/isSupportedGraphic ../../views/3d/interactive/editingTools/transformGraphic/isSupportedGraphic ../../views/draw/support/createUtilsAsync ../../views/draw/support/layerUtils ../../views/interactive/snapping/SnappingManager ./support/OperationHandle".split(" "),
function(a,g,r,A,v,t,p,b,k,n,l,q,C,w,x,c,m,f,e,d,h,F,E,u,z,y,B,H,D,M,U,R,J,L,N,V,T,W,Q,Z,O,P,S,Y){function ta(X){return Object.freeze({__proto__:null,"default":X})}function wa(X,ha){const fa=X.history.undo.pop().updates,K=[];ha.forEach((ba,ea)=>{ea=fa[ea];const aa={};null!=ea&&(v.isSome(ea.geometry)&&(aa.geometry=ba.geometry,ba.geometry=ea.geometry),v.isSome(ea.symbol)&&(aa.symbol=ba.symbol,ba.symbol=ea.symbol),K.push(aa))});X.history.redo.push({updates:K})}function G(X,ha){const fa=X.history.redo.pop().updates,
K=[];ha.forEach((ba,ea)=>{ea=fa[ea];const aa={};null!=ea&&(v.isSome(ea.geometry)&&(aa.geometry=ba.geometry,ba.geometry=ea.geometry),v.isSome(ea.symbol)&&(aa.symbol=ba.symbol,ba.symbol=ea.symbol),K.push(aa))});X.history.undo.push({updates:K})}function I(X){return{updates:X.map(ha=>({geometry:ha.geometry}))}}function ca(X){return{updates:X.map(ha=>({symbol:ha.symbol}))}}function ia(X){return"requireError"in X&&"aborted"===X.requireError}const ja=t.getLogger("esri.widgets.Sketch.SketchViewModel");var la=
["Backspace","Delete"];const da={defaultZ:0},ka={enableMidpoints:!0,enableMoveAllGraphics:!0,enableRotation:!0,enableScaling:!0,multipleSelectionEnabled:!0,preserveAspectRatio:!1,toggleToolOnClick:!0,tool:"transform",enableZ:!0,enableMoveGraphic:!0};A=function(X){function ha(K){K=X.call(this,K)||this;K._activeFillGraphic=null;K._activeLineGraphic=null;K._centerIndicatorGraphic=null;K._centerSymbol=new z({style:"cross",size:6,color:[255,255,255]});K._defaultSegmentOffset=48;K._numUpdating=0;K._handles=
new H;K._internalGraphicsLayer=new U({listMode:"hide",internal:!0});K._lineGraphic=null;K._operationHandle=null;K._vertexGraphics=[];K._viewHandles=new H;K._doUnnormalization=!1;K._moveOperationCloneInfos=[];K.activeFillSymbol=new u({style:"solid",color:[150,150,150,.2],outline:{color:[50,50,50],width:0}});K.activeLineSymbol=new h({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",effects:[{type:"CIMGeometricEffectDashes",dashTemplate:[3.75,3.75],lineDashEnding:"HalfPattern",
controlPointEnding:"NoConstraint"}],enable:!0,capStyle:"Butt",joinStyle:"Round",miterLimit:10,width:1.6,color:[255,255,255,255]},{type:"CIMSolidStroke",enable:!0,capStyle:"Butt",joinStyle:"Round",miterLimit:10,width:2,color:[0,0,0,255]}]}}});K.activeVertexSymbol=new z({style:"circle",size:6,color:[255,127,0,1],outline:{color:[50,50,50],width:1}});K.layer=null;K.pointSymbol=new z({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}});K.polygonSymbol=new u({color:[150,150,150,
.2],outline:{color:[50,50,50],width:2}});K.polylineSymbol=new E({color:[130,130,130,1],width:2});K._snappingManager=null;K.updateGraphics=new d;K.updateOnGraphicClick=!0;K.updatePointSymbol=new z({size:10,color:[0,200,255,.5],outline:{color:"black",width:1}});K.updatePolygonSymbol=new u({color:[12,207,255,.2],outline:{join:"round",color:[12,207,255],width:2}});K.updatePolylineSymbol=new E({color:[12,207,255],width:2});K.vertexSymbol=new z({style:"circle",size:6,color:[255,255,255],outline:{color:[50,
50,50],width:1}});K._moduleLoaderAbortController=null;K._viewReadyAbortController=null;K._originalAutoOpenEnabled=null;K.defaultCreateOptions=da;K.defaultUpdateOptions=ka;K.snappingOptions=new V;return K}g._inheritsLoose(ha,X);var fa=ha.prototype;fa.initialize=function(){this._handles.add([M.watch(this,"layer",()=>{this.cancel();this._internalGraphicsLayer.elevationInfo=v.isSome(this.layer)?this.layer.elevationInfo:null}),M.on(this,"view.map.layers","change",K=>{0<=K.removed.indexOf(this.layer)&&
this.cancel()}),M.on(this,"layer.graphics","change",K=>{if(v.isSome(this._operationHandle))for(const ba of K.removed)this.updateGraphics.includes(ba)&&(1<this.updateGraphics.length?this._operationHandle.removeFromSelection(ba):this._operationHandle.cancel())}),M.init(this,"layer.elevationInfo",()=>{this.cancel();this._internalGraphicsLayer.elevationInfo=v.isSome(this.layer)?this.layer.elevationInfo:null},!0),M.init(this,"view",K=>{v.destroyMaybe(this._snappingManager);K&&(this._snappingManager=new S.SnappingManager({view:K,
options:this.snappingOptions}))},!0)])};fa.destroy=function(){this.cancel();this._handles=v.destroyMaybe(this._handles);this._viewHandles=v.destroyMaybe(this._viewHandles);this._removeDefaultLayer();v.destroyMaybe(this._draw);v.destroyMaybe(this._snappingManager);this._set("view",null);this.emit("destroy")};fa.cancel=function(){this._moduleLoaderAbortController=v.abortMaybe(this._moduleLoaderAbortController);this._viewReadyAbortController=v.abortMaybe(this._viewReadyAbortController);this._operationHandle&&
this._operationHandle.cancel()};fa.complete=function(){this._operationHandle&&this._operationHandle.complete()};fa.delete=function(){const {state:K,updateGraphics:ba}=this;if("active"===K&&ba.length){const {activeTool:ea,layer:aa}=this,pa=ba.toArray();aa.removeMany(pa);this.cancel();this._emitDeleteEvent({graphics:pa,tool:ea})}};fa.create=async function(K,ba){await this._waitViewReady();if("disabled"===this.state)throw this.layer||this._logError("sketch:missing-property","Property 'layer' is missing on SketchViewModel."),
this.view||this._logError("sketch:missing-property","Property 'view' is missing on SketchViewModel."),x.createAbortError();this.cancel();if(K){var ea=await this._setupCreateOperation(K,ba);v.isNone(ea)||this.destroyed||(P.addUniqueLayer(this.view,this._internalGraphicsLayer),ea.on("complete",()=>{if(ea===this._operationHandle){const aa=this.createGraphic,pa=this._operationHandle.cancelled;this._operationHandle.destroy();this._operationHandle=null;this._set("createGraphic",null);this.view&&this.view.map&&
this.view.map.remove(this._internalGraphicsLayer);ea.cancelled||null==aa||this.layer.add(aa);this.emit("create",{graphic:aa,state:pa?"cancel":"complete",tool:K,toolEventInfo:null,type:"create"})}}),this._operationHandle=ea,this.view.ready&&J.isDOMContainer(this.view)&&this.view.focus())}else this._logError("sketch:missing-parameter","Missing parameter 'tool'.")};fa.update=async function(K,ba){await this._waitViewReady();const {layer:ea,view:aa,state:pa}=this;if("disabled"===pa)throw aa||this._logError("sketch:missing-property",
"Property 'view' is missing on SketchViewModel."),ea||this._logError("sketch:missing-property","Property 'layer' is missing on SketchViewModel."),x.createAbortError();this.cancel();const na=Array.isArray(K)?K:[K];null!=K&&na&&na.length?na.some(ra=>ra.layer!==ea?(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics missing from the supplied GraphicsLayer."),!0):v.isNone(ra.geometry)?(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics with an unsupported geometry."),
!0):"2d"!==aa.type||aa.spatialReference.equals(ra.geometry.spatialReference)?!1:(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics with a spatial reference different from the supplied MapView."),!0))||(K=await this._setupUpdateOperation(na,ba),this.destroyed||v.isNone(K)||ia(K)||(P.addUniqueLayer(this.view,this._internalGraphicsLayer),this._setUpdateOperationHandle(K,ba),this.emit("update",{graphics:na,state:"start",aborted:!1,tool:K.tool,toolEventInfo:null,
type:"update"}))):this._logError("sketch:missing-parameter","Missing parameter 'graphics'.")};fa.undo=function(){this.canUndo()&&this._operationHandle.undo()};fa.redo=function(){this.canRedo()&&this._operationHandle.redo()};fa.canUndo=function(){return!(!this._operationHandle||!this._operationHandle.canUndo())};fa.canRedo=function(){return!(!this._operationHandle||!this._operationHandle.canRedo())};fa.toggleUpdateTool=function(){this._operationHandle&&this._operationHandle.toggleTool&&this._operationHandle.toggleTool()};
fa._getFirstHit=async function(K){const ba=[];switch(this.view.type){case "2d":var ea=await this.view.hitTest(K);if(0<ea.results.length&&(ea=ea.results[0],ea.graphic)){var aa,pa;const na=ea.graphic;"vector-tile"!==(null==(aa=na.layer)?void 0:aa.type)&&"imagery"!==(null==(pa=na.layer)?void 0:pa.type)&&ba.push(ea)}break;case "3d":{const na=[this.view.map.ground];this.view.map.allLayers.forEach(ra=>{"integrated-mesh"===ra.type&&na.push(ra)});aa=await this.view.hitTest(K,{exclude:na});0<aa.results.length&&
(pa=aa.results[0],(!aa.ground.mapPoint||1>this.view.map.ground.opacity||aa.ground.distance-pa.distance>-Math.min(3*aa.ground.distance,"global"===this.view.viewingMode?D.getReferenceEllipsoid(this.view.renderCoordsHelper.spatialReference).radius/this.view.renderCoordsHelper.unitInMeters:Number.POSITIVE_INFINITY))&&ba.push(pa))}}return{screenPoint:K,results:ba}};fa._generateViewHandles=function(K){return[K.on("immediate-click",ba=>{const {_operationHandle:ea,defaultUpdateOptions:aa,layer:pa,state:na,
updateGraphics:ra,updateOnGraphicClick:va}=this,qa="active"===na&&"create"===ea.type;"disabled"!==na&&!qa&&va&&(this._beginAsyncOperation(),this._getFirstHit(L.createScreenPointFromEvent(ba)).then(xa=>{xa=xa.results;if(xa.length)for(let za=0;za<xa.length;++za){var ua=xa[za];if(ua.graphic){ua=ua.graphic;if(-1<ra.indexOf(ua)||ua.layer===pa)return ba.stopPropagation(),ua;"2d"!==K.type||this._isComponentGraphic(ua)||"active"!==na||this.cancel()}}else"active"===na&&this.cancel();return null}).then(xa=>
v.isSome(xa)&&-1===ra.indexOf(xa)?this.update([xa],{...aa}):null).then(()=>{this._endAsyncOperation()}))},R.ViewEventPriorities.WIDGET)]};fa._setupCreateOperation=async function(K,ba){if(!K)return null;ba={hasZ:"3d"===this.view.type,...this.defaultCreateOptions,...ba};let ea;if("2d"===this.view.type)switch(K){case "point":ea=this._setupCreatePointOperation(K,ba);break;case "multipoint":ea=await this._setupCreateMultipointOperation(K,ba);break;case "polygon":ea=await this._setupCreatePolyOperation(K,
ba);break;case "polyline":ea=await this._setupCreatePolyOperation(K,ba);break;case "rectangle":ea=await this._setupCreateRectangleOperation(K,ba);break;case "circle":ea=await this._setupCreateCircleOperation(K,ba)}else{K=await this._setupCreate3DOperation(K,this.view,ba);if(v.isNone(K)||ia(K))return null;ea=K}return ea};fa._setupCreate3DOperation=async function(K,ba,ea){if("multipoint"===K)return null;const aa={point:this.pointSymbol,multipoint:null,polyline:this.polylineSymbol,polygon:this.polygonSymbol,
rectangle:this.polygonSymbol,circle:this.polygonSymbol}[K];this._removeCreateOperationGraphics();const pa="rectangle"===K?!1:!0,na="rectangle"===K?!1:!0;this.snappingOptions.enabledToggled=!1;ba={view:ba,mode:"rectangle"===K||"circle"===K?"hybrid":"click",...ea,elevationInfo:this.layer.elevationInfo,geometryType:K,createGraphicSymbol:aa,snapToScene:v.isSome(this.layer.elevationInfo)?"absolute-height"===this.layer.elevationInfo.mode:!0,snappingManager:this._snappingManager,forceUniformSize:na,centered:pa};
ea=await this._requireModule(new Promise(function(ua,za){a(["../../views/3d/interactive/editingTools"],ua,za)}));if(ia(ea))return ea;if(this.destroyed)return null;const ra=new ea.module.DrawGraphicTool(ba);this.view.tools.add(ra);let va=null;this.view.activeTool=ra;const qa=[],xa=new Y.OperationHandle({activeComponent:ra,tool:K,type:"update",onEnd:()=>{var ua;qa.forEach(za=>za.remove());qa.length=0;null==(ua=this.view.tools)?void 0:ua.remove(ra);ra.destroy()},undo:()=>{ra.canUndo&&ra.undo()},redo:()=>
{ra.canRedo&&ra.redo()},canUndo:()=>ra.canUndo,canRedo:()=>ra.canRedo});qa.push(this.view.on("key-down",ua=>{" "===ua.key?(ua.stopPropagation(),ua.repeat||(ra.enabled=!1)):"c"===ua.key?(ua.stopPropagation(),ra.completeCreateOperation()):"z"===ua.key?(ua.stopPropagation(),xa.undo()):"r"===ua.key?(ua.stopPropagation(),xa.redo()):"Control"!==ua.key||"rectangle"===K||"circle"===K||ua.repeat?"Control"!==ua.key||"rectangle"!==K&&"circle"!==K||ua.repeat?"Alt"!==ua.key||ua.repeat||(ra.centered=!pa,ua.stopPropagation()):
(ra.forceUniformSize=!na,ua.stopPropagation()):(this.snappingOptions.enabledToggled=!0,ua.stopPropagation())},R.ViewEventPriorities.WIDGET),this.view.on("key-up",ua=>{" "===ua.key?ra.enabled=!0:"Control"===ua.key&&"rectangle"!==K&&"circle"!==K?(this.snappingOptions.enabledToggled=!1,ua.stopPropagation()):"Control"!==ua.key||"rectangle"!==K&&"circle"!==K?"Alt"===ua.key&&(ra.centered=pa,ua.stopPropagation()):(ra.forceUniformSize=na,ua.stopPropagation())},R.ViewEventPriorities.WIDGET),ra.on("vertex-add",
ua=>{va=v.isNone(va)?"start":"active";switch(ua.operation){case "apply":this.emit("create",{graphic:v.unwrap(ra.createGraphic),state:va,tool:this.activeTool,toolEventInfo:ua,type:"create"});break;case "undo":this._emitUndoEvent({graphics:[v.unwrap(ra.createGraphic)],tool:K});break;case "redo":this._emitRedoEvent({graphics:[v.unwrap(ra.createGraphic)],tool:K})}}),ra.on("cursor-update",ua=>{0<ra.drawOperation.numCommittedVertices&&this.emit("create",{graphic:v.unwrap(ra.createGraphic),state:"active",
tool:this.activeTool,toolEventInfo:{coordinates:ua.vertices[0].coordinates,type:"cursor-update"},type:"create"})}),ra.on("vertex-remove",ua=>{switch(ua.operation){case "apply":this.emit("create",{graphic:v.unwrap(ra.createGraphic),state:"active",tool:this.activeTool,toolEventInfo:ua,type:"create"});break;case "undo":this._emitUndoEvent({graphics:[v.unwrap(ra.createGraphic)],tool:K});break;case "redo":this._emitRedoEvent({graphics:[v.unwrap(ra.createGraphic)],tool:K})}}),ra.on("complete",ua=>{this._removeCreateOperationGraphics();
this._set("createGraphic",v.unwrap(ua.graphic));va="complete";ua.aborted?xa&&xa.cancel():xa&&xa.complete()}));return xa};fa._setupCreatePointOperation=function(K,ba){ba=this._draw.create(K,{elevationInfo:this.layer.elevationInfo,hasZ:ba.hasZ,defaultZ:ba.defaultZ,snappingManager:this._snappingManager,interactiveUndoDisabled:!0});const ea=[ba.on("cursor-update",na=>{v.isSome(na.vertexIndex)?this._displayCrosshairCursor():this._displayDefaultCursor()}),ba.on("draw-complete",na=>{na=this.createPointFromVertex(na.vertices[0]);
na=new B(na,this.pointSymbol);this._set("createGraphic",na);pa&&pa.complete()})],aa=[this.view.on("key-down",na=>{"Escape"===na.key&&(pa&&pa.cancel(),na.stopPropagation())},R.ViewEventPriorities.WIDGET)],pa=this._operationHandleForCreateAction(ba,[...ea,...aa],K);return pa};fa._setupCreateMultipointOperation=async function(K,ba){const ea=await O.loadCreateUtils();ba=this._draw.create(K,{...ba,elevationInfo:this.layer.elevationInfo,snappingManager:this._snappingManager,interactiveUndoDisabled:!0});
let aa=null;const pa=[],na=this._operationHandleForCreateAction(ba,pa,K);pa.push(ba.on("vertex-add",ra=>{const {type:va,vertexIndex:qa,vertices:xa}=ra,ua=xa[qa];aa=ra;this._drawMultipointGraphic(ea,xa,!0);this.emit("create",{graphic:this.createGraphic,state:1===xa.length?"start":"active",tool:K,toolEventInfo:{added:ua,vertices:[{coordinates:ua,componentIndex:0,vertexIndex:qa}],type:va},type:"create"})}),ba.on("vertex-remove",ra=>{const {type:va,vertexIndex:qa,vertices:xa}=ra,ua=xa[qa];aa=ra;this._drawMultipointGraphic(ea,
xa,!0);this.emit("create",{graphic:this.createGraphic,state:"active",tool:K,toolEventInfo:{removed:ua,vertices:[{coordinates:ua,componentIndex:0,vertexIndex:qa}],type:va},type:"create"})}),ba.on("vertex-update",ra=>{const {type:va,vertexIndex:qa,vertices:xa}=ra,ua=xa[qa];aa=ra;this._drawMultipointGraphic(ea,xa,!0);this.emit("create",{graphic:this.createGraphic,state:"active",tool:K,toolEventInfo:{type:va,updated:ua,vertices:[{coordinates:ua,componentIndex:0,vertexIndex:qa}]},type:"create"})}),ba.on("cursor-update",
ra=>{aa=ra}),ba.on("draw-complete",ra=>{ra=ra.vertices.slice(0);(ra=ea.createMultipoint(ra,this.view.spatialReference))&&this.createGraphic&&(this.createGraphic.geometry=ra);na&&na.complete()}),ba.on("undo",ra=>{ra=ra.vertices;const va=aa&&"cursor-update"!==aa.type;this._resetCreateOperationGraphics();ra.length&&this._drawMultipointGraphic(ea,ra,va)}),ba.on("redo",ra=>{ra=ra.vertices;const va=aa&&"cursor-update"!==aa.type;this._resetCreateOperationGraphics();ra.length&&this._drawMultipointGraphic(ea,
ra,va)}));pa.push(this.view.on("pointer-move",()=>this._displayCrosshairCursor(),R.ViewEventPriorities.WIDGET),this.view.on("key-down",ra=>this._getCommonUpdateOperationKeyDownHandlers(na,ra),R.ViewEventPriorities.WIDGET));return na};fa._setupCreatePolyOperation=async function(K,ba){const ea=await O.loadCreateUtils();ba={...ba,elevationInfo:this.layer.elevationInfo,snappingManager:this._snappingManager,interactiveUndoDisabled:!0};let aa=null;"polyline"===K?aa=this._draw.create(K,ba):"polygon"===K&&
(aa=this._draw.create(K,ba));let pa=null;ba=[aa.on("vertex-add",va=>{const {type:qa,vertexIndex:xa,vertices:ua}=va,za=ua[xa];this._snapLastPolygonVertexToFirst(K,ua);pa=va;this._drawVertexGraphics(ea,K,ua,{userClicked:!0});this.emit("create",{graphic:this.createGraphic,state:1===ua.length?"start":"active",tool:K,toolEventInfo:{added:za,vertices:[{coordinates:za,componentIndex:0,vertexIndex:xa}],type:qa},type:"create"})}),aa.on("vertex-remove",va=>{const {type:qa,vertexIndex:xa,vertices:ua}=va,za=
ua[xa];this._snapLastPolygonVertexToFirst(K,ua);pa=va;this._drawVertexGraphics(ea,K,ua,{userClicked:!0});this.emit("create",{graphic:this.createGraphic,state:"active",tool:K,toolEventInfo:{removed:za,vertices:[{coordinates:za,componentIndex:0,vertexIndex:xa}],type:qa},type:"create"})}),aa.on("vertex-update",va=>{const {type:qa,vertexIndex:xa,vertices:ua}=va,za=ua[xa];this._snapLastPolygonVertexToFirst(K,ua);pa=va;this._drawVertexGraphics(ea,K,ua,{userClicked:!0});this.emit("create",{graphic:this.createGraphic,
state:"active",tool:K,toolEventInfo:{type:qa,updated:za,vertices:[{coordinates:za,componentIndex:0,vertexIndex:xa}]},type:"create"})}),aa.on("cursor-update",va=>{const {type:qa,vertices:xa}=va;va.mapPoint&&(this._snapLastPolygonVertexToFirst(K,xa),pa=va,this._drawVertexGraphics(ea,K,xa,{userClicked:!1}),1<xa.length&&this.emit("create",{graphic:this.createGraphic,state:"active",tool:K,toolEventInfo:{coordinates:xa[xa.length-1],type:qa},type:"create"}))}),aa.on("draw-complete",va=>{va=va.vertices.slice(0);
let qa=null;"polyline"===K?qa=ea.createPolyline([va],this.view.spatialReference,this._doUnnormalization):"polygon"===K&&(qa=ea.createPolygon([va],this.view.spatialReference,this._doUnnormalization,!0));qa&&(this.createGraphic.geometry=qa);ra&&ra.complete()}),aa.on("undo",va=>{va=va.vertices;const qa=pa&&"cursor-update"!==pa.type;this._resetCreateOperationGraphics();this._snapLastPolygonVertexToFirst(K,va);va.length&&this._drawVertexGraphics(ea,K,va,{userClicked:qa})}),aa.on("redo",va=>{va=va.vertices;
const qa=pa&&"cursor-update"!==pa.type;this._resetCreateOperationGraphics();this._snapLastPolygonVertexToFirst(K,va);va.length&&this._drawVertexGraphics(ea,K,va,{userClicked:qa})})];const na=[this.view.on("pointer-move",va=>{v.isSome(aa.getCoordsFromScreenPoint(F.createScreenPoint(va.x,va.y)))?this._displayCrosshairCursor():this._displayDefaultCursor()},R.ViewEventPriorities.WIDGET),this.view.on("key-down",va=>{"Control"!==va.key||va.repeat?"z"===va.key&&ra&&ra.canUndo()?(va.stopPropagation(),ra.undo()):
"r"===va.key&&ra&&ra.canRedo()?(va.stopPropagation(),ra.redo()):"Escape"===va.key&&ra&&ra.cancel():(this.snappingOptions.enabledToggled=!0,va.stopPropagation())},R.ViewEventPriorities.WIDGET),this.view.on("key-up",va=>{"Control"===va.key&&(this.snappingOptions.enabledToggled=!1,va.stopPropagation())},R.ViewEventPriorities.WIDGET)];if("polygon"===K){const va=(ua,za,Ba)=>{if(!ua||!ua.layer||!ua.visible)return!1;ua=this.view.toScreen(ua.geometry);return this._isWithinScreenDistance(ua,za,Ba)},qa=ua=>
{if(!(2>=this._vertexGraphics.length))return va(this._vertexGraphics[0],ua,this._getVertexIntersectDistance())};let xa=!1;na.push(this.view.on("pointer-move",()=>{xa=!1},R.ViewEventPriorities.WIDGET),this.view.on("pointer-down",ua=>{qa(ua)?(xa=!0,ua.stopPropagation()):this._vertexGraphics.some(za=>va(za,ua,this._getVertexIntersectDistance()))&&ua.stopPropagation()},R.ViewEventPriorities.WIDGET),this.view.on("pointer-up",ua=>{xa&&(ua.stopPropagation(),aa.complete())}))}const ra=this._operationHandleForCreateAction(aa,
[...ba,...na],K);return ra};fa._setupCreateCircleOperation=async function(K,ba){const ea=await O.loadCreateUtils(),aa=this._draw.create(K,{...ba,elevationInfo:this.layer.elevationInfo,snappingManager:this._snappingManager,interactiveUndoDisabled:!0});let pa=!1,na=!0;ba=[aa.on("vertex-add",qa=>{const {type:xa,vertexIndex:ua,vertices:za}=qa;qa=za[ua];this._drawSegmentGraphic(ea,K,za,{centered:na,constrainToggle:pa},aa.viewAlignedCoordinateSystem);this.emit("create",{graphic:this.createGraphic,state:1===
za.length?"start":"active",tool:K,toolEventInfo:{added:qa,vertices:[{coordinates:qa,componentIndex:0,vertexIndex:ua}],type:xa},type:"create"})}),aa.on("cursor-update",qa=>{const {type:xa,vertices:ua}=qa;this._drawSegmentGraphic(ea,K,ua,{centered:na,constrainToggle:pa},aa.viewAlignedCoordinateSystem);2===ua.length&&this.emit("create",{graphic:this.createGraphic,state:"active",tool:K,toolEventInfo:{coordinates:ua[ua.length-1],type:xa},type:"create"})}),aa.on("draw-complete",qa=>{qa=qa.vertices.slice(0);
1===qa.length?(qa.push(aa.viewAlignedCoordinateSystem.makeMapPoint(qa[0][0]+this._defaultSegmentOffset*this.view.resolution,qa[0][1])),qa=ea.createCircle(qa,aa.viewAlignedCoordinateSystem,!0,this.view.resolution)):qa=pa?ea.createEllipse(qa,aa.viewAlignedCoordinateSystem,na):ea.createCircle(qa,aa.viewAlignedCoordinateSystem,na,this.view.resolution);this.createGraphic?this.createGraphic.geometry=qa:(this._removeCreateGraphic(),this._set("createGraphic",new B(qa,this.polygonSymbol)));va&&va.complete()})];
const ra=[this.view.on("pointer-move",qa=>{v.isSome(aa.getCoordsFromScreenPoint(F.createScreenPoint(qa.x,qa.y)))?this._displayCrosshairCursor():this._displayDefaultCursor()},R.ViewEventPriorities.WIDGET),this.view.on("key-down",qa=>{"Control"===qa.key?pa||(pa=!0,this._drawSegmentGraphic(ea,K,aa.vertices,{centered:na,constrainToggle:pa},aa.viewAlignedCoordinateSystem)):"Alt"===qa.key?na&&(na=!1,this._drawSegmentGraphic(ea,K,aa.vertices,{centered:na,constrainToggle:pa},aa.viewAlignedCoordinateSystem)):
"Escape"===qa.key&&va&&va.cancel()},R.ViewEventPriorities.WIDGET),this.view.on("key-up",qa=>{"Control"===qa.key?(pa=!1,this._drawSegmentGraphic(ea,K,aa.vertices,{centered:na,constrainToggle:pa},aa.viewAlignedCoordinateSystem)):"Alt"===qa.key&&(na=!0,this._drawSegmentGraphic(ea,K,aa.vertices,{centered:na,constrainToggle:pa},aa.viewAlignedCoordinateSystem))},R.ViewEventPriorities.WIDGET)],va=this._operationHandleForCreateAction(aa,[...ba,...ra],K);return va};fa._setupCreateRectangleOperation=async function(K,
ba){const ea=await O.loadCreateUtils(),aa=this._draw.create(K,{...ba,elevationInfo:this.layer.elevationInfo,snappingManager:this._snappingManager,interactiveUndoDisabled:!0});let pa=!1,na=!1;ba=[aa.on("vertex-add",qa=>{const {type:xa,vertexIndex:ua,vertices:za}=qa;qa=za[ua];this._drawSegmentGraphic(ea,K,za,{centered:na,constrainToggle:pa},aa.viewAlignedCoordinateSystem);this.emit("create",{graphic:this.createGraphic,state:1===za.length?"start":"active",tool:K,toolEventInfo:{added:qa,vertices:[{coordinates:qa,
componentIndex:0,vertexIndex:ua}],type:xa},type:"create"})}),aa.on("cursor-update",qa=>{const {type:xa,vertices:ua}=qa;this._drawSegmentGraphic(ea,K,ua,{centered:na,constrainToggle:pa},aa.viewAlignedCoordinateSystem);2===ua.length&&this.emit("create",{graphic:this.createGraphic,state:"active",tool:K,toolEventInfo:{coordinates:ua[ua.length-1],type:xa},type:"create"})}),aa.on("draw-complete",qa=>{qa=qa.vertices.slice(0);let xa=null;1===qa.length&&(na=pa=!1);xa=pa?ea.createSquare(qa,aa.viewAlignedCoordinateSystem,
na):ea.createRectangle(qa,aa.viewAlignedCoordinateSystem,na);this.createGraphic?this.createGraphic.geometry=xa:(this._removeCreateGraphic(),this._set("createGraphic",new B(xa,this.polygonSymbol)));va&&va.complete()})];const ra=[this.view.on("pointer-move",qa=>{v.isSome(aa.getCoordsFromScreenPoint(F.createScreenPoint(qa.x,qa.y)))?this._displayCrosshairCursor():this._displayDefaultCursor()},R.ViewEventPriorities.WIDGET),this.view.on("key-down",qa=>{"Control"===qa.key?pa||(pa=!0,this._drawSegmentGraphic(ea,
K,aa.vertices,{centered:na,constrainToggle:pa},aa.viewAlignedCoordinateSystem)):"Alt"===qa.key?na||(na=!0,this._drawSegmentGraphic(ea,K,aa.vertices,{centered:na,constrainToggle:pa},aa.viewAlignedCoordinateSystem)):"Escape"===qa.key&&va&&va.cancel()},R.ViewEventPriorities.WIDGET),this.view.on("key-up",qa=>{"Control"===qa.key?(pa=!1,this._drawSegmentGraphic(ea,K,aa.vertices,{centered:na,constrainToggle:pa},aa.viewAlignedCoordinateSystem)):"Alt"===qa.key&&(na=!1,this._drawSegmentGraphic(ea,K,aa.vertices,
{centered:na,constrainToggle:pa},aa.viewAlignedCoordinateSystem))},R.ViewEventPriorities.WIDGET)],va=this._operationHandleForCreateAction(aa,[...ba,...ra],K);return va};fa._setupUpdateOperation=async function(K,ba){const {_defaultUpdateTool:ea,defaultUpdateOptions:aa,layer:pa,view:na}=this;ba={...aa,...ba};var ra=ba.tool||ea;for(var va of K)pa.remove(va),pa.add(va);if("3d"===na.type){if(0===K.length)return null;switch(ra){case "move":return this._setupMove3DOperation(K,ba,na,ra);case "reshape":if(1<
K.length)return this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null;ra=Q.isSupportedGraphic(K[0]);if(0===ra)return this._setupReshape3DOperation(K[0],ba,na);this._logError("sketch:reshape",`Reshape operation not supported for provided graphic(s) (${T.isSupportedGraphicResultMessage(ra)}).`);return null;case "transform":return this._setupGraphicTransform3DOperation(K,ba,na)}}if("move"===ra)return this._setupMoveOperation(K,ba,na);if(1<K.length)return"reshape"===
ra?(this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null):this._setupTransformOrReshapeOperation(K,ra,ba,na);if(1===K.length){va=v.get(K[0].geometry,"type");if("point"===va||"multipoint"===va)return this._setupMoveOperation(K,ba,na);if("transform"===ra||"reshape"===ra)return this._setupTransformOrReshapeOperation(K,ra,ba,na)}return null};fa._setupMove3DOperation=async function(K,ba,ea,aa,pa=!1){for(var na of K){const xa=W.isSupportedGraphic(na);if(0!==
xa)return this._logError("sketch:move",`Move operation not supported for provided graphic(s) (${T.isSupportedGraphicResultMessage(xa)}).`),null}na=await this._requireModule(new Promise(function(xa,ua){a(["../../views/3d/interactive/editingTools"],xa,ua)}));if(ia(na))return na;const ra=new na.module.GraphicMoveTool({view:ea,enableZ:ba.enableZ,snappingManager:this._snappingManager});this.view.tools.add(ra);ra.graphics.addMany(K);pa||this.updateGraphics.addMany(K);const va=[],qa=new Y.OperationHandle({activeComponent:ra,
tool:aa,type:"update",onEnd:()=>{var xa;va.forEach(ua=>ua.remove());va.length=0;null==(xa=this.view.tools)?void 0:xa.remove(ra);ra.destroyed||ra.destroy()},undo:()=>{wa(qa,this.updateGraphics.toArray());this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:aa})},redo:()=>{G(qa,this.updateGraphics.toArray());this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:aa})},addToSelection:xa=>{this.updateGraphics.push(xa);ra.graphics.push(xa);this.emit("update",{graphics:this.updateGraphics.toArray(),
state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[xa],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:xa=>{const ua=this.updateGraphics.indexOf(xa);qa.history.undo.forEach(za=>za.updates.splice(ua,1));qa.history.redo.forEach(za=>za.updates.splice(ua,1));this.updateGraphics.remove(xa);this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[xa],type:"selection-change"},type:"update"});
0===this.updateGraphics.length?qa.complete():ra.graphics.remove(xa)},toggleTool:async()=>{if(1===this.updateGraphics.length&&!1!==ba.toggleToolOnClick&&"transform"===aa){var xa=this.updateGraphics.getItemAt(0);0===Q.isSupportedGraphic(xa)&&(xa=await this._setupReshape3DOperation(xa,ba,ea,!0),ia(xa)||(qa.onEnd(),qa.destroy(),this._setUpdateOperationHandle(xa,ba)))}}});va.push(...this._getHandlesForComponent(qa,ba),this.view.on("immediate-click",xa=>this._getCommonUpdateOperationClickHandlers(qa,xa,
ba),R.ViewEventPriorities.WIDGET),this.view.on("key-down",xa=>this._getCommonUpdateOperationKeyDownHandlers(qa,xa),R.ViewEventPriorities.WIDGET));return qa};fa._setupGraphicTransform3DOperation=function(K,ba,ea,aa=!1){if(1===K.length&&0===Z.isSupportedGraphic(K[0])){const pa=K[0];if(v.isSome(pa.geometry)&&"point"===pa.geometry.type)return this._setupPointTransform3DOperation(pa,ba,ea);if(v.isSome(pa.geometry)&&("polygon"===pa.geometry.type||"polyline"===pa.geometry.type))return this._setupPolyTransform3DOperation(pa,
ba,ea,aa)}return this._setupMove3DOperation(K,ba,ea,"transform",aa)};fa._setupPointTransform3DOperation=async function(K,ba,ea){const {enableRotation:aa,enableScaling:pa,enableZ:na}=ba,ra=await this._requireModule(new Promise(function(ua,za){a(["../../views/3d/interactive/editingTools"],ua,za)}));if(ia(ra))return ra;const va=new ra.module.GraphicTransformTool({graphic:K,view:ea,enableRotation:aa,enableScaling:pa,enableZ:na,snappingManager:this._snappingManager});this.view.tools.add(va);this.updateGraphics.add(K);
const qa=[],xa=new Y.OperationHandle({activeComponent:va,tool:"transform",type:"update",onEnd:()=>{var ua;qa.forEach(za=>za.remove());qa.length=0;null==(ua=this.view.tools)?void 0:ua.remove(va);va.destroyed||va.destroy()},undo:()=>{wa(xa,this.updateGraphics.toArray());this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:"transform"})},redo:()=>{G(xa,this.updateGraphics.toArray());this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:"transform"})},addToSelection:async ua=>{this.updateGraphics.add(ua);
ua=await this._setupMove3DOperation(this.updateGraphics.toArray(),ba,ea,"transform",!0);ia(ua)||(xa.onEnd(),xa.destroy(),this._setUpdateOperationHandle(ua,ba))}});qa.push(...this._getHandlesForComponent(xa,ba),this.view.on("immediate-click",ua=>this._getCommonUpdateOperationClickHandlers(xa,ua,ba),R.ViewEventPriorities.WIDGET),this.view.on("key-down",ua=>this._getCommonUpdateOperationKeyDownHandlers(xa,ua),R.ViewEventPriorities.WIDGET));return xa};fa._setupPolyTransform3DOperation=async function(K,
ba,ea,aa=!1){const {enableRotation:pa,enableScaling:na,enableZ:ra,preserveAspectRatio:va}=ba,qa=await this._requireModule(new Promise(function(Ba,Ea){a(["../../views/3d/interactive/editingTools"],Ba,Ea)}));if(ia(qa))return qa;const xa=new qa.module.ExtentTransformTool({graphic:K,view:ea,enableRotation:pa,enableScaling:na,enableZ:ra,preserveAspectRatio:va});this.view.tools.add(xa);aa||this.updateGraphics.add(K);const ua=[],za=new Y.OperationHandle({activeComponent:xa,tool:"transform",type:"update",
onEnd:()=>{var Ba;ua.forEach(Ea=>Ea.remove());ua.length=0;null==(Ba=this.view.tools)?void 0:Ba.remove(xa);xa.destroyed||xa.destroy()},canUndo:()=>xa.canUndo(),undo:()=>{xa.undo();this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:"transform"})},canRedo:()=>xa.canRedo(),redo:()=>{xa.redo();this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:"transform"})},addToSelection:async Ba=>{this.updateGraphics.add(Ba);this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",
aborted:!1,tool:this.activeTool,toolEventInfo:{added:[Ba],removed:[],type:"selection-change"},type:"update"});Ba=await this._setupMove3DOperation(this.updateGraphics.toArray(),ba,ea,"transform",!0);ia(Ba)||(za.onEnd(),za.destroy(),this._setUpdateOperationHandle(Ba,ba))},removeFromSelection:async Ba=>{this.updateGraphics.remove(Ba);this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[Ba],type:"selection-change"},
type:"update"});za.complete()},toggleTool:async()=>{if(1===this.updateGraphics.length&&!1!==ba.toggleToolOnClick){var Ba=this.updateGraphics.getItemAt(0);0===Q.isSupportedGraphic(Ba)&&(Ba=await this._setupReshape3DOperation(Ba,ba,ea,!0),ia(Ba)||(za.onEnd(),za.destroy(),this._setUpdateOperationHandle(Ba,ba)))}}});ua.push(...this._getHandlesForComponent(za,ba),this.view.on("immediate-click",Ba=>this._getCommonUpdateOperationClickHandlers(za,Ba,ba),R.ViewEventPriorities.WIDGET),this.view.on("key-down",
Ba=>this._getCommonUpdateOperationKeyDownHandlers(za,Ba),R.ViewEventPriorities.WIDGET),this.view.on("key-down",Ba=>{"Control"!==Ba.key||Ba.repeat||(xa.preserveAspectRatio=!xa.preserveAspectRatio,Ba.stopPropagation())},R.ViewEventPriorities.WIDGET),this.view.on("key-up",Ba=>{"Control"===Ba.key&&(xa.preserveAspectRatio=!xa.preserveAspectRatio,Ba.stopPropagation())},R.ViewEventPriorities.WIDGET));return za};fa._setupMoveOperation=async function(K,ba,ea){this.updateGraphics.addMany(K);const aa=await this._getGraphicMover(K,
ba,ea);if(ia(aa))return aa;this._syncCloneInfos();const pa=new Y.OperationHandle({activeComponent:aa,tool:"move",type:"update",onEnd:()=>{var va;this._displayDefaultCursor();ra.forEach(qa=>qa.remove());na.forEach(qa=>qa.remove());ra=[];na=[];aa.destroy();null==(va=this._internalGraphicsLayer)?void 0:va.removeMany([...this.updateGraphics.toArray()]);this._removeCloneGraphics()},undo:()=>{const va=this.updateGraphics.toArray();wa(pa,va);this._syncCloneInfos();this._emitUndoEvent({graphics:va,tool:"move"})},
redo:()=>{const va=this.updateGraphics.toArray();G(pa,va);this._syncCloneInfos();this._emitRedoEvent({graphics:va,tool:"move"})},addToSelection:va=>{this.updateGraphics.push(va);aa.graphics=this.updateGraphics.toArray();const qa=this._createClone(va);this._moveOperationCloneInfos.push({graphic:va,clone:qa});this._internalGraphicsLayer.add(qa);this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[va],removed:[],type:"selection-change"},
type:"update"})},removeFromSelection:va=>{const qa=this.updateGraphics.indexOf(va);pa.history.undo.forEach(ua=>ua.updates.splice(qa,1));pa.history.redo.forEach(ua=>ua.updates.splice(qa,1));var xa=this._moveOperationCloneInfos.findIndex(ua=>ua.graphic===va);this._internalGraphicsLayer.remove(this._moveOperationCloneInfos[xa].clone);this.updateGraphics.remove(va);this._moveOperationCloneInfos.splice(xa,1);xa=this.updateGraphics.toArray();this.emit("update",{graphics:xa,state:"active",aborted:!1,tool:this.activeTool,
toolEventInfo:{added:[],removed:[va],type:"selection-change"},type:"update"});0===this.updateGraphics.length?pa.complete():aa.graphics=xa}});let na=[ea.on("immediate-click",va=>this._getCommonUpdateOperationClickHandlers(pa,va,ba),R.ViewEventPriorities.WIDGET),ea.on("key-down",va=>{this._getCommonUpdateOperationKeyDownHandlers(pa,va);"Control"!==va.key||va.repeat||(aa.enableMoveAllGraphics=!aa.enableMoveAllGraphics)},R.ViewEventPriorities.WIDGET),ea.on("key-up",va=>{"Control"===va.key&&(aa.enableMoveAllGraphics=
!aa.enableMoveAllGraphics)},R.ViewEventPriorities.WIDGET)],ra=this._getHandlesForComponent(pa,ba);ra.push(aa.on("graphic-move",va=>{this._moveOperationCloneInfos.forEach(qa=>{const xa=va.allGraphics.find(ua=>ua===qa.graphic);xa&&(qa.clone.geometry=xa.geometry)})}));return pa};fa._removeCloneGraphics=function(){if(this._moveOperationCloneInfos.length){for(const {clone:K}of this._moveOperationCloneInfos)this._internalGraphicsLayer.remove(K),K.destroy();this._moveOperationCloneInfos=[]}};fa._syncCloneInfos=
function(){this._removeCloneGraphics();this._moveOperationCloneInfos=this._generateCloneInfos(this.updateGraphics.toArray());for(const {clone:K}of this._moveOperationCloneInfos)this._internalGraphicsLayer.add(K)};fa._generateCloneInfos=function(K){return(null==K?void 0:K.map(ba=>({graphic:ba,clone:this._createClone(ba)})))||[]};fa._createClone=function(K){const ba=K.clone();ba.symbol=this._getSymbolForClone(K);return ba};fa._getSymbolForClone=function(K){if(v.isNone(K.symbol))return null;switch(K.symbol.type){case "cim":return new z({style:"circle",
size:12,color:[0,0,0,0],outline:{color:[255,127,0,1],width:1}});case "picture-marker":{const {xoffset:ba,yoffset:ea,height:aa,width:pa}=K.symbol;return new z({xoffset:ba,yoffset:ea,size:aa===pa?pa:Math.max(aa,pa),style:"square",color:[0,0,0,0],outline:{color:[255,127,0,1],width:1}})}case "simple-marker":{const {xoffset:ba,yoffset:ea,size:aa,style:pa}=K.symbol;return new z({xoffset:ba,yoffset:ea,style:"circle"===pa?"circle":"square",size:aa+2,color:[0,0,0,0],outline:{color:[255,127,0,1],width:1}})}case "simple-fill":return new u({color:[0,
0,0,0],outline:{style:"dash",color:[255,127,0,1],width:1}});case "simple-line":return new E({color:[255,127,0,1],style:"dash",width:1});case "text":{const {xoffset:ba,yoffset:ea}=K.symbol;return new z({xoffset:ba,yoffset:ea,size:12,color:[0,0,0,0],outline:{color:[255,127,0,1],width:1}})}default:return null}};fa._setupReshape3DOperation=async function(K,ba,ea,aa=!1){const pa=await this._requireModule(new Promise(function(qa,xa){a(["../../views/3d/interactive/editingTools"],qa,xa)}));if(ia(pa))return pa;
this.snappingOptions.enabledToggled=!1;const na=new pa.module.GraphicReshapeTool({view:ea,graphic:K,enableZ:ba.enableZ,enableMoveGraphic:ba.enableMoveGraphic,snappingManager:this._snappingManager});ea.tools.add(na);aa||this.updateGraphics.add(K);const ra=[],va=new Y.OperationHandle({activeComponent:na,tool:"reshape",type:"update",onEnd:()=>{var qa;ra.forEach(xa=>xa.remove());ra.length=0;null==(qa=this.view.tools)?void 0:qa.remove(na);na.destroyed||na.destroy()},undo:()=>{na.beforeUndo();wa(va,this.updateGraphics.toArray());
this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:"reshape"})},redo:()=>{G(va,this.updateGraphics.toArray());this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:"reshape"})},addToSelection:async qa=>{this.updateGraphics.add(qa);this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[qa],removed:[],type:"selection-change"},type:"update"});qa=await this._setupMove3DOperation(this.updateGraphics.toArray(),
ba,ea,"transform",!0);ia(qa)||(va.onEnd(),va.destroy(),this._setUpdateOperationHandle(qa,ba))},removeFromSelection:async qa=>{this.updateGraphics.remove(qa);this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[qa],type:"selection-change"},type:"update"});va.complete()},toggleTool:async()=>{if(!1!==ba.toggleToolOnClick){var qa=await this._setupGraphicTransform3DOperation(this.updateGraphics.toArray(),ba,ea,!0);ia(qa)||
(va.onEnd(),va.destroy(),this._setUpdateOperationHandle(qa,ba))}}});ra.push(...this._getHandlesForComponent(va,ba),ea.on("immediate-click",qa=>this._getCommonUpdateOperationClickHandlers(va,qa,ba),R.ViewEventPriorities.WIDGET),ea.on("key-down",qa=>{this._getCommonUpdateOperationKeyDownHandlers(va,qa);"Control"===qa.key&&(this.snappingOptions.enabledToggled=!0,qa.stopPropagation())},R.ViewEventPriorities.WIDGET),ea.on("key-up",qa=>{"Control"===qa.key&&(this.snappingOptions.enabledToggled=!1,qa.stopPropagation())},
R.ViewEventPriorities.WIDGET));return va};fa._setupTransformOrReshapeOperation=async function(K,ba,ea,aa){const {multipleSelectionEnabled:pa}=ea;this.updateGraphics.addMany(K);ba="transform"===ba?await this._getBox(K,ea,aa):await this._getReshape(K,ea,aa);if(ia(ba))return ba;const na=new Y.OperationHandle({activeComponent:ba,type:"update",onEnd:()=>{va.forEach(qa=>qa.remove());ra.forEach(qa=>qa.remove());va=[];ra=[];na.activeComponent&&!na.activeComponent.destroyed&&na.activeComponent.destroy();this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray())},
undo:()=>{wa(na,this.updateGraphics.toArray());na.refreshComponent();this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:na.tool})},redo:()=>{G(na,this.updateGraphics.toArray());na.refreshComponent();this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:na.tool})},addToSelection:qa=>{const xa=na.activeComponent;this.updateGraphics.add(qa);xa.graphics=this.updateGraphics.toArray();xa.refresh();na.resetHistory();this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",
aborted:!1,tool:this.activeTool,toolEventInfo:{added:[qa],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:qa=>{const xa=na.activeComponent,ua=this.updateGraphics.indexOf(qa);na.history.undo.forEach(Ba=>Ba.updates.splice(ua,1));na.history.redo.forEach(Ba=>Ba.updates.splice(ua,1));this.updateGraphics.remove(qa);const za=this.updateGraphics.toArray();this.emit("update",{graphics:za,state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[qa],type:"selection-change"},
type:"update"});0===this.updateGraphics.length?na.complete():xa.graphics=za},toggleTool:async()=>{if(!(1<this.updateGraphics.length)){var qa=null;"transform"===na.tool?qa=await this._getReshape(K,ea,aa):"reshape"===na.tool&&(qa=await this._getBox(K,ea,aa));ia(qa)||(na.activeComponent.destroy(),na.activeComponent=qa,na.activeComponent&&(va.forEach(xa=>xa.remove()),va=this._getHandlesForComponent(na,ea)))}}});let ra=[aa.on("immediate-click",qa=>{this._getFirstHit(L.createScreenPointFromEvent(qa)).then(xa=>
{var ua;if(na)if(null!=(ua=xa.results)&&ua.length){var za=na.activeComponent;xa.results.some(Ba=>{if(Ba.graphic){var Ea;Ba=Ba.graphic;if("box"===(null==za?void 0:za.type)&&null!=(Ea=qa.native)&&Ea.shiftKey&&pa)return na.addToSelection(Ba),!0;Ba.layer===this.layer&&na.complete()}return!1})&&qa.stopPropagation()}else na.complete()})},R.ViewEventPriorities.WIDGET),aa.on("key-down",qa=>{this._getCommonUpdateOperationKeyDownHandlers(na,qa);"Control"!==qa.key||qa.repeat||(this.snappingOptions.enabledToggled=
!0,qa.stopPropagation());"Control"===qa.key&&!qa.repeat&&na&&(qa=na.activeComponent)&&"box"===qa.type&&(qa.preserveAspectRatio=!qa.preserveAspectRatio)},R.ViewEventPriorities.WIDGET),aa.on("key-up",qa=>{var xa;"Control"===qa.key&&"reshape"===(null==na?void 0:null==(xa=na.activeComponent)?void 0:xa.type)&&(this.snappingOptions.enabledToggled=!1,qa.stopPropagation());"Control"===qa.key&&na&&(qa=na.activeComponent)&&"box"===qa.type&&(qa.preserveAspectRatio=!qa.preserveAspectRatio)},R.ViewEventPriorities.WIDGET)],
va=this._getHandlesForComponent(na,ea);return na};fa._getGraphicMover=async function(K,ba,ea){({enableMoveAllGraphics:ba}=ba);const aa=await this._requireModule(new Promise(function(pa,na){a(["../../views/draw/support/GraphicMover"],function(ra){pa(ta(ra))},na)}));return ia(aa)?aa:new aa.module.default({enableMoveAllGraphics:ba,graphics:K,view:ea,callbacks:{onGraphicMoveStart:({dx:pa,dy:na,graphic:ra})=>{this._displayGrabbingCursor();this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",
aborted:!1,tool:this.activeTool,toolEventInfo:{dx:pa,dy:na,mover:ra,type:"move-start"},type:"update"})},onGraphicMove:({dx:pa,dy:na,graphic:ra})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:pa,dy:na,mover:ra,type:"move"},type:"update"}),onGraphicMoveStop:({dx:pa,dy:na,graphic:ra})=>{this._displayPointerCursor();this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:pa,
dy:na,mover:ra,type:"move-stop"},type:"update"})},onGraphicPointerOver:()=>this._displayPointerCursor(),onGraphicPointerOut:()=>this._displayDefaultCursor()}})};fa._getBox=async function(K,ba,ea){const {enableRotation:aa,enableScaling:pa,preserveAspectRatio:na}=ba;ba=await this._requireModule(new Promise(function(ra,va){a(["../../views/draw/support/Box"],function(qa){ra(ta(qa))},va)}));return ia(ba)?ba:new ba.module.default({graphics:K,enableRotation:aa,enableScaling:pa,preserveAspectRatio:na,layer:this._internalGraphicsLayer,
view:ea,callbacks:{onMoveStart:ra=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...ra},type:"update"}),onMove:ra=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...ra},type:"update"}),onMoveStop:ra=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...ra},type:"update"}),onScaleStart:ra=>
this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...ra},type:"update"}),onScale:ra=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...ra},type:"update"}),onScaleStop:ra=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...ra},type:"update"}),onRotateStart:ra=>this.emit("update",{graphics:this.updateGraphics.toArray(),
state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...ra},type:"update"}),onRotate:ra=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...ra},type:"update"}),onRotateStop:ra=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...ra},type:"update"})}})};fa._getReshape=async function(K,ba,ea){({enableMidpoints:ba=!0}=ba);const aa=await this._requireModule(new Promise(function(pa,
na){a(["../../views/draw/support/Reshape"],function(ra){pa(ta(ra))},na)}));return ia(aa)?aa:new aa.module.default({enableMidpoints:ba,graphic:K[0],layer:this._internalGraphicsLayer,snappingManager:this._snappingManager,view:ea,callbacks:{onReshapeStart:pa=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...pa},type:"update"}),onReshape:pa=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,
toolEventInfo:{...pa},type:"update"}),onReshapeStop:({mover:pa,type:na})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:pa,type:na},type:"update"}),onMoveStart:({dx:pa,dy:na,mover:ra,type:va})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:pa,dy:na,mover:ra,type:va},type:"update"}),onMove:({dx:pa,dy:na,mover:ra,type:va})=>this.emit("update",
{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:pa,dy:na,mover:ra,type:va},type:"update"}),onMoveStop:({dx:pa,dy:na,mover:ra,type:va})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:pa,dy:na,mover:ra,type:va},type:"update"}),onVertexAdd:({added:pa,type:na,vertices:ra})=>{pa=pa.map(va=>m.geometryToCoordinates(va.geometry));this.emit("update",{graphics:this.updateGraphics.toArray(),
state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:pa,vertices:ra,type:na},type:"update"})},onVertexRemove:({removed:pa,type:na,vertices:ra})=>{pa=pa.map(va=>m.geometryToCoordinates(va.geometry));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{removed:pa,vertices:ra,type:na},type:"update"})}}})};fa._getHandlesForComponent=function(K,ba){const ea=K.activeComponent;switch(ea.type){case "graphic-mover":return[ea.on("graphic-click",
({graphic:aa,viewEvent:pa})=>{var na;null!=(na=pa.native)&&na.shiftKey&&(pa.stopPropagation(),K.removeFromSelection(aa))}),ea.on("graphic-move-start",aa=>K.addToHistory(I(aa.allGraphics)))];case "box":return[ea.on("graphic-click",aa=>this._onTransformOrReshape2DGraphicClick(K,ba,aa)),ea.on("move-start",aa=>K.addToHistory(I(aa.graphics))),ea.on("rotate-start",aa=>K.addToHistory(I(aa.graphics))),ea.on("scale-start",aa=>K.addToHistory(I(aa.graphics)))];case "reshape":return[ea.on("graphic-click",aa=>
this._onTransformOrReshape2DGraphicClick(K,ba,aa)),ea.on("move-start",aa=>K.addToHistory(I([aa.mover]))),ea.on("reshape-start",aa=>K.addToHistory(I([aa.graphic]))),ea.on("vertex-add",aa=>K.addToHistory(I([aa.oldGraphic]))),ea.on("vertex-remove",aa=>K.addToHistory(I([aa.oldGraphic])))];case "move-3d":return[ea.on("graphic-move-start",aa=>{K.addToHistory(I(aa.allGraphics));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,
mover:0<aa.allGraphics.length?aa.allGraphics[0]:null,type:"move-start"},type:"update"})}),ea.on("graphic-move",aa=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:aa.dx,dy:aa.dy,mover:0<aa.allGraphics.length?aa.allGraphics[0]:null,type:"move"},type:"update"})}),ea.on("graphic-move-stop",aa=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,
mover:0<aa.allGraphics.length?aa.allGraphics[0]:null,type:"move-stop"},type:"update"})}),ea.on("immediate-click",aa=>{aa.shiftKey?this._toggleSelection([aa.graphic],K,ba):K.toggleTool()})];case "transform-3d":return[ea.on("graphic-translate-start",aa=>{K.addToHistory(I([aa.graphic]));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:aa.graphic,dx:aa.dxScreen,dy:aa.dyScreen,type:"move-start"},type:"update"})}),ea.on("graphic-translate-stop",
aa=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:aa.graphic,dx:aa.dxScreen,dy:aa.dyScreen,type:"move-stop"},type:"update"})}),ea.on("graphic-rotate-start",aa=>{K.addToHistory(ca([aa.graphic]));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:aa.graphic,angle:aa.angle,type:"rotate-start"},type:"update"})}),ea.on("graphic-rotate-stop",aa=>{this.emit("update",
{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:aa.graphic,angle:aa.angle,type:"rotate-stop"},type:"update"})}),ea.on("graphic-scale-start",aa=>{K.addToHistory(ca([aa.graphic]));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:aa.graphic,xScale:aa.xScale,yScale:aa.yScale,type:"scale-start"},type:"update"})}),ea.on("graphic-scale-stop",aa=>{this.emit("update",{graphics:this.updateGraphics.toArray(),
state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:aa.graphic,xScale:aa.xScale,yScale:aa.yScale,type:"scale-stop"},type:"update"})}),ea.on("graphic-translate",aa=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:aa.graphic,dx:aa.dxScreen,dy:aa.dyScreen,type:"move"},type:"update"})}),ea.on("graphic-rotate",aa=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,
toolEventInfo:{mover:aa.graphic,angle:aa.angle,type:"rotate"},type:"update"})}),ea.on("graphic-scale",aa=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:aa.graphic,xScale:aa.xScale,yScale:aa.yScale,type:"scale"},type:"update"})}),ea.on("immediate-click",aa=>{aa.shiftKey?this._toggleSelection([aa.graphic],K,ba):K.toggleTool()})];case "reshape-3d":return[ea.on("reshape",aa=>{"reshape-start"===aa.type&&K.addToHistory(I([aa.mover]));
this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:aa,type:"update"})}),ea.on("move",aa=>{"move-start"===aa.type&&K.addToHistory(I([aa.mover]));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:aa,type:"update"})}),ea.on("vertex-add",aa=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:aa,
type:"update"})}),ea.on("vertex-remove",aa=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:aa,type:"update"})}),ea.on("immediate-click",aa=>{aa.shiftKey?this._toggleSelection([aa.graphic],K,ba):K.toggleTool()})];case "draw":case "draw-3d":return null}};fa._onTransformOrReshape2DGraphicClick=function(K,ba,ea){var aa;const {graphic:pa,viewEvent:na}=ea;null!=(aa=na.native)&&aa.shiftKey?(na.stopPropagation(),K.removeFromSelection(pa)):
ba.toggleToolOnClick&&(v.isNone(pa.geometry)||"extent"!==pa.geometry.type?(na.stopPropagation(),K.toggleTool()):this._logError("sketch:reshape-extent","Reshape operation does not support graphics with geometry of type 'extent'."))};fa._setUpdateOperationHandle=function(K,ba){this._operationHandle=K;const ea=this.view.map;this._disablePopup(ba);K.on("complete",()=>{if(K===this._operationHandle){const aa=this.updateGraphics.toArray(),pa=this._operationHandle.tool;this._operationHandle.destroy();this._operationHandle=
null;this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray());this.updateGraphics.removeAll();ea&&ea.remove(this._internalGraphicsLayer);this._restorePopup(ba);this.emit("update",{graphics:aa,state:"complete",aborted:K.cancelled,tool:pa,toolEventInfo:null,type:"update"})}})};fa._getCommonUpdateOperationClickHandlers=function(K,ba,ea){const aa=L.createScreenPointFromEvent(ba);this._getFirstHit(aa).then(pa=>{pa=pa.results;pa.length?ba.native.shiftKey&&this._toggleSelection(pa.map(na=>na.graphic),
K,ea)?ba.stopPropagation():pa.some(na=>na.graphic&&-1<this.updateGraphics.indexOf(na.graphic))?ba.stopPropagation():K.complete():K.complete()})};fa._toggleSelection=function(K,ba,ea){const aa=!!ea.multipleSelectionEnabled;return K.some(pa=>null==pa?!1:aa&&pa.layer===this.layer?(-1===this.updateGraphics.indexOf(pa)?ba.addToSelection(pa):ba.removeFromSelection(pa),!0):!1)};fa._getCommonUpdateOperationKeyDownHandlers=function(K,ba){if(K){var ea=ba.key;"z"===ea&&K.canUndo()?(ba.stopPropagation(),K.undo()):
"r"===ea&&K.canRedo()?(ba.stopPropagation(),K.redo()):"Escape"===ea?(ba.stopPropagation(),K.cancel()):0<=la.indexOf(ea)&&this._onDeleteKey(ba)}};fa._onDeleteKey=function(K){if(this._operationHandle&&"update"===this._operationHandle.type){var ba=this.activeComponent;v.isNone(ba)||"reshape"===ba.type||"reshape-3d"===ba.type||(K.stopPropagation(),K=this.updateGraphics.toArray(),this.layer.removeMany(K),this._emitDeleteEvent({graphics:K,tool:this.activeTool}))}};fa._drawMultipointGraphic=function(K,ba,
ea){var aa=null;!ea&&1<ba.length?(aa=ba.slice(0),aa.pop(),aa=K.createMultipoint(aa,this.view.spatialReference)):aa=K.createMultipoint(ba,this.view.spatialReference);this.createGraphic?this.createGraphic.geometry=aa:this._set("createGraphic",new B(aa,this.pointSymbol));ea&&1===ba.length&&this._internalGraphicsLayer.add(this.createGraphic)};fa._drawVertexGraphics=function(K,ba,ea,aa){if(ea.length){var {_doUnnormalization:pa,activeLineSymbol:na,activeVertexSymbol:ra,polygonSymbol:va,polylineSymbol:qa,
vertexSymbol:xa,view:{spatialReference:ua}}=this,za=!(!aa||!aa.userClicked),Ba="polygon"===ba;aa=Ba?va:qa;if(1===ea.length){this._removeLineGraphic();this._removeActiveLineGraphic();var Ea=this.createPointFromVertex(ea[0]);ea=Ba?K.createPolygon([ea],ua,pa,!0):K.createPolyline([ea],ua,pa);this._vertexGraphics.length?this._vertexGraphics[0].geometry=Ea:this._vertexGraphics.push(new B(Ea,ra));this.createGraphic?this.createGraphic.set({geometry:ea,symbol:aa}):this._set("createGraphic",new B(ea,aa));za&&
this._internalGraphicsLayer.add(this._vertexGraphics[0])}else if(2===ea.length){var Ha=this.createPointFromVertex(ea[1]);Ea=K.createPolyline([ea],ua,pa);K=Ba?K.createPolygon([ea],ua,pa,!0):K.createPolyline([ea],ua,pa);this._vertexGraphics.length||(ea=this.createPointFromVertex(ea[0]),ea=new B(ea,xa),this._vertexGraphics.push(ea));1===this._vertexGraphics.length?(ea=this._vertexGraphics[0],Ha=new B(Ha,xa),this._removeLineGraphic(),this._removeActiveFillGraphic(),this._vertexGraphics.push(Ha),this._internalGraphicsLayer.remove(ea),
this._internalGraphicsLayer.add(ea)):this._vertexGraphics[1].geometry=Ha;this._showActiveLineGraphic(Ea);ea=this._vertexGraphics[0];za&&(this._activeLineGraphic.symbol=qa,ea.symbol=xa,this._internalGraphicsLayer.add(this._vertexGraphics[1]));this.createGraphic?this.createGraphic.set({geometry:K,symbol:aa}):this._set("createGraphic",new B(K,aa));this._internalGraphicsLayer.remove(ea);this._internalGraphicsLayer.add(ea)}else if(2<ea.length){Ha=Ba?K.createPolygon([ea],ua,pa,!0):K.createPolyline([ea],
ua,pa);"polygon"===ba&&this._showFillGraphic(Ha);Ba=ea.map(Pa=>Pa.slice());ba=Ba.pop();const Oa=[Ba[Ba.length-1],ba];ba=K.createPolyline([Ba],ua,pa);K=K.createPolyline([Oa],ua,pa);this._showLineGraphic(ba);this._showActiveLineGraphic(K);for(K=0;K<Ba.length;K++)(ba=this._vertexGraphics[K])?ba.symbol=za||K!==this._vertexGraphics.length-1?xa:ra:(ba=this.createPointFromVertex(ea[K]),this._showVertexGraphic(ba));za?(this._activeLineGraphic.symbol=qa,za=this.createPointFromVertex(ea[ea.length-1]),this._showVertexGraphic(za)):
this._activeLineGraphic.symbol=na;this.createGraphic?this.createGraphic.set({geometry:Ha,symbol:aa}):(this._removeCreateGraphic(),this._set("createGraphic",new B(Ha,aa)));for(Ea of this._vertexGraphics)this._internalGraphicsLayer.remove(Ea),this._internalGraphicsLayer.add(Ea)}}};fa._drawSegmentGraphic=function(K,ba,ea,aa,pa){if(ea.length){var na=!(null==aa||!aa.centered);aa=!(null==aa||!aa.constrainToggle);var ra;1===ea.length?this._removeCenterIndicatorGraphic():("rectangle"===ba?ra=aa?K.createSquare(ea,
pa,na):K.createRectangle(ea,pa,na):"circle"===ba&&(ra=aa?K.createEllipse(ea,pa,na):K.createCircle(ea,pa,na,this.view.resolution)),v.isSome(ra)&&ra.extent&&ra.extent.center&&this._showCenterIndicatorGraphic(ra.extent.center));ra?this.createGraphic?this.createGraphic.geometry=ra:(this._removeCreateGraphic(),this._set("createGraphic",new B(ra,this.polygonSymbol)),this._internalGraphicsLayer.add(this.createGraphic)):this._removeCreateGraphic()}};fa._showCenterIndicatorGraphic=function(K){this._centerIndicatorGraphic?
this._centerIndicatorGraphic.geometry=K:(this._centerIndicatorGraphic=new B(K,this._centerSymbol),this._internalGraphicsLayer.add(this._centerIndicatorGraphic))};fa._removeCenterIndicatorGraphic=function(){this._centerIndicatorGraphic&&(this._internalGraphicsLayer.remove(this._centerIndicatorGraphic),this._centerIndicatorGraphic.destroy(),this._centerIndicatorGraphic=null)};fa._showActiveLineGraphic=function(K){this._activeLineGraphic?(this._activeLineGraphic.set({geometry:K,symbol:this.activeLineSymbol}),
this._internalGraphicsLayer.remove(this._activeLineGraphic)):this._activeLineGraphic=new B(K,this.activeLineSymbol);this._internalGraphicsLayer.add(this._activeLineGraphic)};fa._showFillGraphic=function(K){this._activeFillGraphic?(this._activeFillGraphic.set({geometry:K,symbol:this.activeFillSymbol}),this._internalGraphicsLayer.remove(this._activeFillGraphic)):this._activeFillGraphic=new B(K,this.activeFillSymbol);this._internalGraphicsLayer.add(this._activeFillGraphic)};fa._showLineGraphic=function(K){this._lineGraphic?
(this._lineGraphic.set({geometry:K,symbol:this.polylineSymbol}),this._internalGraphicsLayer.remove(this._lineGraphic)):this._lineGraphic=new B(K,this.polylineSymbol);this._internalGraphicsLayer.add(this._lineGraphic)};fa._showVertexGraphic=function(K,ba){K=new B(K,ba?this.activeVertexSymbol:this.vertexSymbol);this._vertexGraphics.push(K);this._internalGraphicsLayer.add(K)};fa._resetCreateOperationGraphics=function(){this._removeActiveFillGraphic();this._removeLineGraphic();this._removeActiveLineGraphic();
this._removeVertexGraphics();this._removeCloneGraphics()};fa._removeCreateGraphic=function(){this.createGraphic&&(this._internalGraphicsLayer.remove(this.createGraphic),this._set("createGraphic",null))};fa._removeCreateOperationGraphics=function(){this._removeCenterIndicatorGraphic();this._removeActiveLineGraphic();this._removeActiveFillGraphic();this._removeLineGraphic();this._removeVertexGraphics()};fa._removeActiveLineGraphic=function(){this._activeLineGraphic&&(this._internalGraphicsLayer.remove(this._activeLineGraphic),
this._activeLineGraphic.destroy(),this._activeLineGraphic=null)};fa._removeActiveFillGraphic=function(){this._activeFillGraphic&&(this._internalGraphicsLayer.remove(this._activeFillGraphic),this._activeFillGraphic.destroy(),this._activeFillGraphic=null)};fa._removeLineGraphic=function(){this._lineGraphic&&(this._internalGraphicsLayer.remove(this._lineGraphic),this._lineGraphic.destroy(),this._lineGraphic=null)};fa._removeVertexGraphics=function(){this._vertexGraphics.length&&(this._internalGraphicsLayer.removeMany(this._vertexGraphics),
this._vertexGraphics.forEach(K=>K.destroy()),this._vertexGraphics=[])};fa._removeDefaultLayer=function(){this._internalGraphicsLayer&&(this.view&&this.view.map&&this.view.map.remove(this._internalGraphicsLayer),this._internalGraphicsLayer.destroy(),this._internalGraphicsLayer=null)};fa._operationHandleForCreateAction=function(K,ba,ea){return new Y.OperationHandle({activeComponent:this._draw,tool:ea,type:"create",onEnd:()=>{ba.forEach(aa=>aa.remove());ba.length=0;this._removeCreateOperationGraphics();
this._internalGraphicsLayer&&this._internalGraphicsLayer.remove(this.createGraphic);this._displayDefaultCursor()},undo:()=>{K.undo();this._emitUndoEvent({graphics:[this.createGraphic],tool:ea})},redo:()=>{K.redo();this._emitRedoEvent({graphics:[this.createGraphic],tool:ea})},canUndo:()=>K&&K.canUndo(),canRedo:()=>K&&K.canRedo()})};fa._isComponentGraphic=function(K){const {activeComponent:ba}=this;return!K||v.isNone(ba)?!1:K.attributes&&K.attributes.esriSketchTool?!0:("box"===ba.type||"reshape"===
ba.type)&&ba.isUIGraphic(K)};fa._snapLastPolygonVertexToFirst=function(K,ba){if(!("polygon"!==K&&2>=ba.length)){K=ba[0];ba=ba[ba.length-1];var ea=this.view.toScreen(new c(K[0],K[1],this.view.spatialReference)),aa=this.view.toScreen(new c(ba[0],ba[1],this.view.spatialReference));this._isWithinScreenDistance(ea,aa,this._getVertexIntersectDistance())&&(ba[0]=K[0],ba[1]=K[1])}};fa._getVertexIntersectDistance=function(){return this.vertexSymbol&&"simple-marker"===this.vertexSymbol.type?F.pt2px(this.vertexSymbol.size)/
2+3:3};fa._isWithinScreenDistance=function(K,ba,ea){const aa=K.x-ba.x;K=K.y-ba.y;return Math.sqrt(aa*aa+K*K)<=ea};fa._displayPointerCursor=function(){this.view&&this.view.container&&"pointer"!==this.view.cursor&&(this.view.cursor="pointer")};fa._displayGrabbingCursor=function(){this.view&&this.view.container&&"grabbing"!==this.view.cursor&&(this.view.cursor="grabbing")};fa._displayCrosshairCursor=function(){this.view&&this.view.container&&"crosshair"!==this.view.cursor&&(this.view.cursor="crosshair")};
fa._displayDefaultCursor=function(){this.view&&this.view.container&&null!==this.view.cursor&&(this.view.cursor=null)};fa._logError=function(K,ba,ea){ja.error(new l(K,ba,ea))};fa._requireModule=async function(K){const ba=new AbortController;this._moduleLoaderAbortController=ba;K=await K;return this._moduleLoaderAbortController!==ba||ba.signal.aborted?{requireError:"aborted"}:{module:K}};fa._emitUndoEvent=function(K){this.emit("undo",{...K,type:"undo"})};fa._emitRedoEvent=function(K){this.emit("redo",
{...K,type:"redo"})};fa._emitDeleteEvent=function(K){this.emit("delete",{...K,type:"delete"})};fa.createPointFromVertex=function(K){return 2<K.length?new c(K[0],K[1],K[2],this.view.spatialReference):new c(K[0],K[1],this.view.spatialReference)};fa.test=function(){return this._operationHandle};fa.wait=function(){return M.whenNotOnce(this,"updating")};fa._beginAsyncOperation=function(){this._numUpdating+=1;this.notifyChange("updating")};fa._endAsyncOperation=function(){--this._numUpdating;this.notifyChange("updating")};
fa._disablePopupEnabled=function(K){var ba;return"3d"!==(null==(ba=this.view)?void 0:ba.type)||this.updateOnGraphicClick||v.isSome(K)&&K.toggleToolOnClick};fa._disablePopup=function(K){this._disablePopupEnabled(K)&&(K=this.view.popup)&&v.isNone(this._originalAutoOpenEnabled)&&(this._originalAutoOpenEnabled=K.autoOpenEnabled,K.autoOpenEnabled=!1)};fa._restorePopup=function(K){this._disablePopupEnabled(K)&&(K=this.view.popup)&&v.isSome(this._originalAutoOpenEnabled)&&(K.autoOpenEnabled=this._originalAutoOpenEnabled,
this._originalAutoOpenEnabled=null)};fa._waitViewReady=async function(){this.view&&(v.abortMaybe(this._viewReadyAbortController),this._viewReadyAbortController=x.createAbortController(),await x.whenOrAbort(M.whenOnce(this.view,"ready"),this._viewReadyAbortController.signal))};g._createClass(ha,[{key:"_defaultUpdateTool",get:function(){return"3d"===this.view.type?"move":"transform"}},{key:"_draw",get:function(){return"ready"===this.state||"active"===this.state?new N({view:this.view}):null}},{key:"updating",
get:function(){return 0<this._numUpdating}},{key:"activeTool",get:function(){return this._operationHandle&&this._operationHandle.tool?this._operationHandle.tool:null}},{key:"activeComponent",get:function(){return this._operationHandle?this._operationHandle.activeComponent:null}},{key:"createGraphic",get:function(){return this.view&&"3d"===this.view.type&&v.isSome(this.activeComponent)&&"draw-3d"===this.activeComponent.type?v.unwrap(this.activeComponent.createGraphic):this._get("createGraphic")}},
{key:"defaultCreateOptions",set:function(K){this._set("defaultCreateOptions",{...da,...K})}},{key:"defaultUpdateOptions",set:function(K){this._set("defaultUpdateOptions",{...ka,...K})}},{key:"snappingOptions",set:function(K){v.isSome(this._snappingManager)&&(this._snappingManager.options=K);this._set("snappingOptions",K)}},{key:"state",get:function(){var K;const ba=!(null==(K=this.view)||!K.ready||!this.layer);K=this._operationHandle;return ba&&K?"active":ba?"ready":"disabled"}},{key:"view",get:function(){return this._get("view")},
set:function(K){const ba=this._get("view");if(ba){const {container:ea,map:aa}=ba;ea&&(ba.cursor=null);aa&&aa.remove(this._internalGraphicsLayer);this._viewHandles.removeAll();this.cancel()}this._doUnnormalization=null!=K&&"3d"===K.type&&"global"===K.viewingMode;this._handles.remove("view-ready");K&&this._handles.add(M.when(K,"ready",ea=>{this._viewHandles.removeAll();ea&&this._viewHandles.add(this._generateViewHandles(K))},!0),"view-ready");this._set("view",K)}}]);return ha}(e.EventedAccessor);r.__decorate([b.property({readOnly:!0})],
A.prototype,"_draw",null);r.__decorate([b.property()],A.prototype,"updating",null);r.__decorate([b.property()],A.prototype,"_operationHandle",void 0);r.__decorate([b.property({readOnly:!0})],A.prototype,"activeTool",null);r.__decorate([b.property()],A.prototype,"activeFillSymbol",void 0);r.__decorate([b.property()],A.prototype,"activeLineSymbol",void 0);r.__decorate([b.property()],A.prototype,"activeVertexSymbol",void 0);r.__decorate([b.property({readOnly:!0})],A.prototype,"createGraphic",null);r.__decorate([b.property()],
A.prototype,"defaultCreateOptions",null);r.__decorate([b.property()],A.prototype,"defaultUpdateOptions",null);r.__decorate([b.property()],A.prototype,"layer",void 0);r.__decorate([b.property({types:y.symbolTypes})],A.prototype,"pointSymbol",void 0);r.__decorate([b.property({types:y.symbolTypes})],A.prototype,"polygonSymbol",void 0);r.__decorate([b.property({types:y.symbolTypes})],A.prototype,"polylineSymbol",void 0);r.__decorate([b.property({type:V,nonNullable:!0})],A.prototype,"snappingOptions",
null);r.__decorate([b.property()],A.prototype,"_snappingManager",void 0);r.__decorate([b.property({readOnly:!0})],A.prototype,"state",null);r.__decorate([b.property({readOnly:!0})],A.prototype,"updateGraphics",void 0);r.__decorate([b.property()],A.prototype,"updateOnGraphicClick",void 0);r.__decorate([b.property({types:y.symbolTypes})],A.prototype,"updatePointSymbol",void 0);r.__decorate([b.property({types:y.symbolTypes})],A.prototype,"updatePolygonSymbol",void 0);r.__decorate([b.property({types:y.symbolTypes})],
A.prototype,"updatePolylineSymbol",void 0);r.__decorate([b.property({types:y.symbolTypes})],A.prototype,"vertexSymbol",void 0);r.__decorate([b.property({value:null})],A.prototype,"view",null);r.__decorate([b.property()],A.prototype,"cancel",null);r.__decorate([b.property()],A.prototype,"complete",null);r.__decorate([b.property()],A.prototype,"delete",null);r.__decorate([b.property()],A.prototype,"create",null);r.__decorate([b.property()],A.prototype,"update",null);r.__decorate([b.property()],A.prototype,
"undo",null);r.__decorate([b.property()],A.prototype,"redo",null);r.__decorate([b.property()],A.prototype,"canUndo",null);r.__decorate([b.property()],A.prototype,"canRedo",null);r.__decorate([b.property()],A.prototype,"toggleUpdateTool",null);return A=r.__decorate([n.subclass("esri.widgets.Sketch.SketchViewModel")],A)})},"esri/layers/GraphicsLayer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ./Layer ../symbols/support/ElevationInfo ./mixins/BlendLayer ./mixins/ScaleRangeLayer ../support/GraphicsCollection".split(" "),
function(a,g,r,A,v,t,p,b,k,n,l,q,C,w,x,c){r=function(m){function f(d){d=m.call(this,d)||this;d.elevationInfo=null;d.graphics=new c["default"];d.screenSizePerspectiveEnabled=!0;d.type="graphics";d.internal=!1;return d}a._inheritsLoose(f,m);var e=f.prototype;e.destroy=function(){this.removeAll();this.graphics.destroy()};e.add=function(d){this.graphics.add(d);return this};e.addMany=function(d){this.graphics.addMany(d);return this};e.removeAll=function(){this.graphics.removeAll();return this};e.remove=
function(d){this.graphics.remove(d)};e.removeMany=function(d){this.graphics.removeMany(d)};e.on=function(d,h){return m.prototype.on.call(this,d,h)};e.graphicChanged=function(d){this.emit("graphic-update",d)};return f}(w.BlendLayer(x.ScaleRangeLayer(q)));g.__decorate([t.property({type:C})],r.prototype,"elevationInfo",void 0);g.__decorate([t.property(c.graphicsCollectionProperty())],r.prototype,"graphics",void 0);g.__decorate([t.property({type:["show","hide"]})],r.prototype,"listMode",void 0);g.__decorate([t.property()],
r.prototype,"screenSizePerspectiveEnabled",void 0);g.__decorate([t.property({readOnly:!0})],r.prototype,"type",void 0);g.__decorate([t.property({constructOnly:!0})],r.prototype,"internal",void 0);return r=g.__decorate([b.subclass("esri.layers.GraphicsLayer")],r)})},"esri/views/draw/Draw":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/Accessor ../../chunks/MultipointDrawAction ./PointDrawAction ./PolygonDrawAction ./PolylineDrawAction ./SegmentDrawAction".split(" "),
function(a,g,r,A,v,t,p,b,k,n,l,q,C,w,x,c,m){r=function(f){function e(){var h=f.apply(this,arguments)||this;h.activeAction=null;h.type="draw";h.view=null;return h}a._inheritsLoose(e,f);var d=e.prototype;d.destroy=function(){this.activeAction&&(this.activeAction.destroy(),this.activeAction=null)};d.create=function(h,F){this.reset();F={view:this.view,...F};switch(h){case "point":F.editGeometryType="point";this.activeAction=new w.PointDrawAction(F);break;case "polyline":F.editGeometryType="polyline";
this.activeAction=new c.PolylineDrawAction(F);break;case "multipoint":F.editGeometryType="polygon";this.activeAction=new C.MultipointDrawAction(F);break;case "polygon":F.editGeometryType="polygon";this.activeAction=new x.PolygonDrawAction(F);break;case "rectangle":case "circle":case "ellipse":case "triangle":F.editGeometryType="polygon",this.activeAction=new m.SegmentDrawAction(F)}return this.activeAction};d.complete=function(){this.activeAction&&this.activeAction.complete();this.activeAction=null};
d.reset=function(){this.activeAction&&this.activeAction.destroy();this.activeAction=null};return e}(q);g.__decorate([t.property()],r.prototype,"activeAction",void 0);g.__decorate([t.property({readOnly:!0})],r.prototype,"type",void 0);g.__decorate([t.property()],r.prototype,"view",void 0);return r=g.__decorate([b.subclass("esri.views.draw.Draw")],r)})},"esri/chunks/MultipointDrawAction":function(){define("exports ./_rollupPluginBabelHelpers ./tslib.es6 ../core/has ../core/maybe ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../geometry/Point ../geometry ../core/Handles ../views/input/InputManager ../views/support/screenUtils ../views/draw/DrawAction ../views/draw/input/DrawEvents ../views/draw/input/Keys".split(" "),
function(a,g,r,A,v,t,p,b,k,n,l,q,C,w,x,c,m,f,e,d,h){a.MultipointDrawAction=function(F){function E(z){z=F.call(this,z)||this;z._cursorScreenPoint=null;z._popVertexOnPointerMove=!1;z._addVertexOnPointerUp=!1;z._activePointerId=null;z._viewHandles=new c;z._undoRedoHandles=new c;return z}g._inheritsLoose(E,F);var u=E.prototype;u.initialize=function(){this._addViewHandles();this._addUndoRedoHandles()};u.destroy=function(){this._removeViewHandles();this._viewHandles.destroy();this._removeUndoRedoHandles();
this._undoRedoHandles.destroy();this.emit("destroy")};u.undo=function(){F.prototype.undo.call(this);this.notifyChange("vertices")};u.redo=function(){F.prototype.redo.call(this);this.notifyChange("vertices")};u.complete=function(){this._completeDrawing()};u._addViewHandles=function(){this._removeViewHandles();this._viewHandles.add([this.view.on("click",z=>{z.stopPropagation()},m.ViewEventPriorities.TOOL),this.view.on("pointer-down",z=>{this._shouldHandlePointerEvent(z)&&(this._snappingTask=v.abortMaybe(this._snappingTask),
this._activePointerId=z.pointerId,this._addVertexOnPointerUp=!0,this._cursorScreenPoint=f.createScreenPointFromEvent(z),"touch"===z.pointerType&&this._updateCursor(z.native))},m.ViewEventPriorities.TOOL),this.view.on("pointer-move",z=>{this._popVertexOnPointerMove&&(this.undo(),this._popVertexOnPointerMove=!1);this._snappingTask=v.abortMaybe(this._snappingTask);this._cursorScreenPoint=f.createScreenPointFromEvent(z);"touch"!==z.pointerType&&this._updateCursor(z.native)},m.ViewEventPriorities.TOOL),
this.view.on("pointer-drag",z=>{this._shouldHandlePointerEvent(z)&&(this._snappingTask=v.abortMaybe(this._snappingTask),this._addVertexOnPointerUp=!1)},m.ViewEventPriorities.TOOL),this.view.on("pointer-up",z=>{this._shouldHandlePointerEvent(z)&&(this._snappingTask=v.abortMaybe(this._snappingTask),this._activePointerId=null,this._addVertexOnPointerUp?this._vertexAddHandler(z):this._updateCursor(z.native,"touch"===z.pointerType))},m.ViewEventPriorities.TOOL),this.view.on("drag",["Shift"],z=>{z.stopPropagation()},
m.ViewEventPriorities.TOOL),this.view.on("double-click",z=>{z.stopPropagation();this._drawCompleteHandler(z)},m.ViewEventPriorities.TOOL),this.view.on("double-click",["Control"],z=>{z.stopPropagation();this._drawCompleteHandler(z)},m.ViewEventPriorities.TOOL),this.view.on("key-down",z=>{const {key:y,repeat:B}=z;y===h.KEYS.vertexAddKey&&!B&&this._cursorScreenPoint?(z.stopPropagation(),this._snappingTask=v.abortMaybe(this._snappingTask),this._vertexAddHandler(z)):y===h.KEYS.drawCompleteKey&&!B&&this._cursorScreenPoint&&
2<this.vertices.length?(z.stopPropagation(),this._snappingTask=v.abortMaybe(this._snappingTask),this._vertexAddHandler(z),this._drawCompleteHandler(z)):y!==h.KEYS.undoKey||this.interactiveUndoDisabled||B?y!==h.KEYS.redoKey||this.interactiveUndoDisabled||B?y!==h.KEYS.panKey||B||z.stopPropagation():(z.stopPropagation(),this.redo()):(z.stopPropagation(),this.undo())},m.ViewEventPriorities.TOOL),this.view.on("key-up",z=>{z.key===h.KEYS.panKey&&z.stopPropagation()},m.ViewEventPriorities.TOOL)])};u._addUndoRedoHandles=
function(){this._removeUndoRedoHandles();this._undoRedoHandles.add([this._editGeometry.on("vertex-remove",z=>{this.notifyChange("vertices");if("undo"===z.operation){const y=this._nativeEventHistory.undoStack.pop();this._nativeEventHistory.redoStack.push(y);const B=[...this._committedVertices];v.isSome(this._stagedVertex)&&B.push(this._coordinateHelper.pointToArray(this._stagedVertex));this.emit("undo",new d.VertexRemoveEvent(this.view,y,z.vertices[0].index,B))}}),this._editGeometry.on("vertex-add",
z=>{this.notifyChange("vertices");if("apply"===z.operation)z=new d.VertexAddEvent(this.view,this._nativeEventHistory.undoStack[this._nativeEventHistory.undoStack.length],this._committedVertices.length-1,this.vertices),this.emit("vertex-add",z),z.defaultPrevented&&(this._popVertexOnPointerMove=!0);else if("redo"===z.operation){const y=this._nativeEventHistory.redoStack.pop();this._nativeEventHistory.undoStack.push(y);const B=[...this._committedVertices];v.isSome(this._stagedVertex)&&B.push(this._coordinateHelper.pointToArray(this._stagedVertex));
this.emit("redo",new d.VertexAddEvent(this.view,y,z.vertices[0].index,B))}})])};u._removeViewHandles=function(){this._viewHandles.removeAll()};u._removeUndoRedoHandles=function(){this._undoRedoHandles.removeAll()};u._addVertex=function(z,y){z=this._coordinateHelper.fromArray(z);this._isDuplicateOfLastVertex(z)||(this._lastVertexUnsnapped=this._stagedVertexUnsnapped,this._popCursorVertex(),this._editGeometry.appendVertex(z),y=y||new Event("placeholder"),this._nativeEventHistory.undoStack.push(y))};
u._updateCursor=function(z,y=!1){this._popCursorVertex();if(this._cursorScreenPoint){var B=this.getCoordsAndPointFromScreenPoint(this._cursorScreenPoint);if(v.isSome(B)&&!y){this._pushCursorVertex(B.vertex);const H=()=>new d.CursorUpdateEvent(this.view,z,this._activeComponent.vertices.length,this.vertices,v.isSome(this._stagedVertex)?new w(this._stagedVertex):null);this.emit("cursor-update",H());v.isSome(this._snappingTask)&&this._snappingTask.promise.then(D=>{D.valid&&this.emit("cursor-update",H())},
()=>{})}}};u._completeDrawing=function(z){this._activePointerId=null;this._popCursorVertex();this._snappingTask=v.abortMaybe(this._snappingTask);v.isSome(this._snappingManager)&&this._snappingManager.doneSnapping();2>this.vertices.length||(z=new d.DrawCompleteEvent(z,this.vertices),this.emit("draw-complete",z),z.defaultPrevented||this._removeViewHandles())};u._shouldHandlePointerEvent=function(z){return("mouse"!==z.pointerType||0===z.button)&&(v.isNone(this._activePointerId)||this._activePointerId===
z.pointerId)};u._vertexAddHandler=function(z){const y=v.isSome(this._stagedVertex)?this._coordinateHelper.pointToArray(this._stagedVertex):this.getCoordsFromScreenPoint(this._cursorScreenPoint);v.isSome(y)&&this._addVertex(y,z.native)};u._drawCompleteHandler=function(z){this._completeDrawing(z.native)};return E}(e);a.MultipointDrawAction=r.__decorate([n.subclass("esri.views.draw.MultipointDrawAction")],a.MultipointDrawAction);r=Object.freeze({__proto__:null,get MultipointDrawAction(){return a.MultipointDrawAction}});
a.MultipointDrawAction$1=r})},"esri/views/draw/DrawAction":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/maybe ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/promiseUtils ../../core/Evented ../../core/screenUtils ../../layers/graphics/dehydratedFeatures ../2d/interactive/SnappingVisualizer2D ../interactive/coordinateHelper ../interactive/editGeometry/EditGeometry ../interactive/editGeometry/EditGeometryHelper ../interactive/snapping/SnappingContext".split(" "),
function(a,g,r,A,v,t,p,b,k,n,l,q,C,w,x,c,m,f,e,d,h){r=function(u){function z(B){var H;var D=u.call(this,B)||this;D._hasZ=null;D._snappingTask=null;D._stagedVertex=null;D._stagedVertexUnsnapped=null;D._lastVertexUnsnapped=null;D._nativeEventHistory={undoStack:[],redoStack:[]};D.interactiveUndoDisabled=!1;D.history=[];D.redoHistory=[];D.snapToScene=!1;D.view=null;D.elevationInfo=null;D.defaultZ=0;D._coordinateHelper=f.createCoordinateHelper(B.hasZ,!1,B.view.spatialReference,"local");D._snappingManager=
B.snappingManager;D._editGeometry=new d.EditGeometryHelper(new e.EditGeometry(D._coordinateHelper),null!=(H=B.editGeometryType)?H:"polygon");D._snappingContext=new h.SnappingContext({geometry:D._editGeometry,elevationInfo:{mode:"on-the-ground",offset:0},pointer:"mouse",visualizer:new m.SnappingVisualizer2D});D._activeComponent=new e.Component(D._editGeometry.editGeometry);D._editGeometry.editGeometry.components.push(D._activeComponent);return D}a._inheritsLoose(z,u);var y=z.prototype;y.destroy=function(){this._snappingTask=
A.abortMaybe(this._snappingTask);A.isSome(this._snappingManager)&&this._snappingManager.doneSnapping();this._editGeometry.destroy()};y.canUndo=function(){return this._editGeometry.editGeometry.canUndo};y.canRedo=function(){return this._editGeometry.editGeometry.canRedo};y.undo=function(){this.canUndo()&&this._editGeometry.undo()};y.redo=function(){this.canRedo()&&this._editGeometry.redo()};y.getCoordsFromScreenPoint=function(B){B=this.screenToMap(B);return A.isSome(B)?B.hasZ?[B.x,B.y,B.z]:[B.x,B.y]:
null};y.getCoordsAndPointFromScreenPoint=function(B){B=this.screenToMap(B);return A.isSome(B)?B.hasZ?{vertex:[B.x,B.y,B.z],mapPoint:B}:{vertex:[B.x,B.y],mapPoint:B}:null};y._pushCursorVertex=function(B){const H=c.makeDehydratedPoint(B[0],B[1],null,this.view.spatialReference);this._stagedVertexUnsnapped=H;A.isNone(this._snappingManager)?this._stagedVertex=H:(this._stagedVertex=this._snappingManager.update(H,this._snappingContext),this._snappingTask=C.createTask(async D=>A.isSome(this._snappingManager)?
(D=await this._snappingManager.snap(H,this._snappingContext,D),D.valid&&(this._stagedVertex=D.apply(),this.notifyChange("vertices")),D):null))};y._popCursorVertex=function(){this._stagedVertexUnsnapped=this._stagedVertex=null;this.notifyChange("vertices")};y.getGeometryZValue=function(){return this.defaultZ};y.screenToMap=function(B){var H=null;"3d"===this.view.type?this.hasZ?(H=A.unwrapOr(this.elevationInfo,F),H=this.view.sceneIntersectionHelper.intersectElevationFromScreen(x.createScreenPointArray(B.x,
B.y),H,this.getGeometryZValue())):(H=A.unwrapOr(this.elevationInfo,E),H=this.view.sceneIntersectionHelper.intersectElevationFromScreen(x.createScreenPointArray(B.x,B.y),H,0),A.isSome(H)&&(H.z=void 0)):(H=this.view.toMap(B),A.isSome(H)&&(H.z=this.hasZ?this.getGeometryZValue():void 0));return H};y._isDuplicateOfLastVertex=function(B){const H=this._editGeometry.editGeometry.components[0].getLastVertex();if(A.isSome(H)&&B[0]===H[0]&&B[1]===H[1])return!0;const {x:D,y:M}=this._coordinateHelper.createDehydratedPoint(B);
return A.isSome(this._lastVertexUnsnapped)&&D===this._lastVertexUnsnapped.x&&M===this._lastVertexUnsnapped.y?!0:!1};a._createClass(z,[{key:"_committedVertices",get:function(){return this._editGeometry.editGeometry.components[0].vertices.map(B=>B.pos)}},{key:"vertices",get:function(){return A.isSome(this._stagedVertex)?[...this._committedVertices,this._coordinateHelper.pointToArray(this._stagedVertex)]:this._committedVertices}},{key:"hasZ",get:function(){return A.isSome(this._hasZ)?this._hasZ:"3d"===
this.view.type},set:function(B){this._hasZ=B;this.notifyChange("hasZ")}}]);return z}(w.EventedAccessor);g.__decorate([p.property({readOnly:!0})],r.prototype,"vertices",null);g.__decorate([p.property({type:Boolean,nonNullable:!0})],r.prototype,"interactiveUndoDisabled",void 0);g.__decorate([p.property({readOnly:!0})],r.prototype,"history",void 0);g.__decorate([p.property({readOnly:!0})],r.prototype,"redoHistory",void 0);g.__decorate([p.property()],r.prototype,"snapToScene",void 0);g.__decorate([p.property()],
r.prototype,"view",void 0);g.__decorate([p.property()],r.prototype,"elevationInfo",void 0);g.__decorate([p.property({nonNullable:!0})],r.prototype,"defaultZ",void 0);g.__decorate([p.property()],r.prototype,"hasZ",null);r=g.__decorate([k.subclass("esri.views.draw.DrawAction")],r);const F={mode:"absolute-height",offset:0},E={mode:"on-the-ground",offset:0};return r})},"esri/layers/graphics/dehydratedFeatures":function(){define("exports ../../core/has ../../core/typedArrayUtil ../../core/maybe ../../geometry/SpatialReference ../../geometry/support/typeUtils ../../core/uid ../../geometry/support/aaBoundingRect ../support/Field ../../core/byteSizeEstimations ../../geometry/support/aaBoundingBox ../../geometry/support/quantizationUtils ./dehydratedFeatureComparison".split(" "),
function(a,g,r,A,v,t,p,b,k,n,l,q,C){function w(d,h,F){if(!d)return null;switch(h){case "point":return{x:d.x,y:d.y,z:d.z,m:d.m,hasZ:null!=d.z,hasM:null!=d.m,type:"point",spatialReference:F};case "polyline":return{paths:d.paths,hasZ:!!d.hasZ,hasM:!!d.hasM,type:"polyline",spatialReference:F};case "polygon":return{rings:d.rings,hasZ:!!d.hasZ,hasM:!!d.hasM,type:"polygon",spatialReference:F};case "multipoint":return{points:d.points,hasZ:!!d.hasZ,hasM:!!d.hasM,type:"multipoint",spatialReference:F}}}function x(d){if(A.isNone(d))return 0;
let h=32;switch(d.type){case "point":h+=42;break;case "polyline":case "polygon":{var F=0;const E=2+(d.hasZ?1:0)+(d.hasM?1:0);d="polyline"===d.type?d.paths:d.rings;for(const u of d)F+=u.length;h+=8*F*E+64;h+=128*F;h=h+34+32*(d.length+1);break}case "multipoint":F=d.points.length;h+=8*F*(2+(d.hasZ?1:0)+(d.hasM?1:0))+64;h+=128*F;h=h+34+32;break;case "extent":h+=98;d.hasM&&(h+=32);d.hasZ&&(h+=32);break;case "mesh":h+=r.estimateSize(d.vertexAttributes.position),h+=r.estimateSize(d.vertexAttributes.normal),
h+=r.estimateSize(d.vertexAttributes.uv),h+=r.estimateSize(d.vertexAttributes.tangent)}return h}function c(d,h){l.empty(h);"mesh"===d.type&&(d=d.extent);switch(d.type){case "point":h[0]=h[3]=d.x;h[1]=h[4]=d.y;d.hasZ&&(h[2]=h[5]=d.z);break;case "polyline":for(var F=0;F<d.paths.length;F++)l.expandWithNestedArray(h,d.paths[F],d.hasZ);break;case "polygon":for(F=0;F<d.rings.length;F++)l.expandWithNestedArray(h,d.rings[F],d.hasZ);break;case "multipoint":l.expandWithNestedArray(h,d.points,d.hasZ);break;
case "extent":h[0]=d.xmin,h[1]=d.ymin,h[3]=d.xmax,h[4]=d.ymax,null!=d.zmin&&(h[2]=d.zmin),null!=d.zmax&&(h[5]=d.zmax)}}function m(d,h){b.empty(h);"mesh"===d.type&&(d=d.extent);switch(d.type){case "point":h[0]=h[2]=d.x;h[1]=h[3]=d.y;break;case "polyline":for(var F=0;F<d.paths.length;F++)b.expandWithNestedArray(h,d.paths[F]);break;case "polygon":for(F=0;F<d.rings.length;F++)b.expandWithNestedArray(h,d.rings[F]);break;case "multipoint":b.expandWithNestedArray(h,d.points);break;case "extent":h[0]=d.xmin,
h[1]=d.ymin,h[2]=d.xmax,h[3]=d.ymax}}const f=l.create(),e=b.create();a.equals=C.equals;a.DehydratedFeatureClass=function(d,h,F){this.uid=d;this.geometry=h;this.attributes=F;this.visible=!0;this.centroid=this.objectId=null};a.DehydratedFeatureSetClass=function(){this.exceededTransferLimit=!1;this.features=[];this.fields=[];this.hasZ=this.hasM=!1;this.transform=this.spatialReference=this.geohashFieldName=this.geometryProperties=this.globalIdFieldName=this.objectIdFieldName=this.geometryType=null};a.computeAABB=
c;a.computeAABR=m;a.estimateGeometryObjectSize=x;a.estimateSize=function(d){let h;h=32+n.estimateAttributesObjectSize(d.attributes);return h=h+3+(8+x(d.geometry))};a.expandAABB=function(d,h){c(d,f);l.expandWithAABB(h,f)};a.expandAABR=function(d,h){m(d,e);b.expand(h,e)};a.fromFeatureSetJSON=function(d){const h=t.featureGeometryTypeKebabDictionary.fromJSON(d.geometryType),F=v.fromJSON(d.spatialReference),E=d.transform,u=d.features.map(z=>{var y=d.objectIdFieldName;z={uid:p.generateUID(),objectId:y&&
z.attributes?z.attributes[y]:null,attributes:z.attributes,geometry:w(z.geometry,h,F),visible:!0};if((y=z.geometry)&&E)switch(y.type){case "point":z.geometry=q.unquantizePoint(E,y,y,y.hasZ,y.hasM);break;case "multipoint":z.geometry=q.unquantizeMultipoint(E,y,y,y.hasZ,y.hasM);break;case "polygon":z.geometry=q.unquantizePolygon(E,y,y,y.hasZ,y.hasM);break;case "polyline":z.geometry=q.unquantizePolyline(E,y,y,y.hasZ,y.hasM)}return z});return{geometryType:h,features:u,spatialReference:F,fields:d.fields?
d.fields.map(z=>k.fromJSON(z)):null,objectIdFieldName:d.objectIdFieldName,globalIdFieldName:d.globalIdFieldName,geohashFieldName:d.geohashFieldName,geometryProperties:d.geometryProperties,hasZ:d.hasZ,hasM:d.hasM,exceededTransferLimit:d.exceededTransferLimit,transform:null}};a.fromJSONGeometry=w;a.getObjectId=function(d,h){return null!=d.objectId?d.objectId:d.attributes&&h?d.attributes[h]:null};a.hasGeometry=function(d){return A.isSome(d.geometry)};a.hasVertices=function(d){if(!d)return!1;switch(d.type){case "extent":case "point":return!0;
case "polyline":for(const h of d.paths)if(0<h.length)return!0;return!1;case "polygon":for(const h of d.rings)if(0<h.length)return!0;return!1;case "multipoint":return 0<d.points.length;case "mesh":return d.vertexAttributes&&d.vertexAttributes.position&&0<d.vertexAttributes.position.length}};a.isDehydratedPoint=function(d){return"point"===d.type};a.isFeatureGeometry=function(d){return t.isFeatureGeometryType(d.type)};a.makeDehydratedPoint=function(d,h,F,E){return{x:d,y:h,z:F,hasZ:null!=F,hasM:!1,spatialReference:E,
type:"point"}};a.numVertices=function(d){if(A.isNone(d))return 0;switch(d.type){case "point":return 1;case "polyline":var h=0;for(var F of d.paths)h+=F.length;return h;case "polygon":F=0;for(h of d.rings)F+=h.length;return F;case "multipoint":return d.points.length;case "extent":return 2;case "mesh":return(d=d.vertexAttributes&&d.vertexAttributes.position)?d.length/3:0}};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/geometry/support/aaBoundingRect":function(){define(["exports","../../core/has",
"../../core/maybe","../Extent"],function(a,g,r,A){function v(w=C){return[w[0],w[1],w[2],w[3]]}function t(w){return w[0]>=w[2]?0:w[2]-w[0]}function p(w){return w[1]>=w[3]?0:w[3]-w[1]}function b(w,x,c){return x>=w[0]&&c>=w[1]&&x<=w[2]&&c<=w[3]}function k(w,x){w[0]=x[0];w[1]=x[1];w[2]=x[2];w[3]=x[3];return w}function n(w){return 4===w.length}function l(w,x,c){return w<x?x:w>c?c:w}const q=[Infinity,Infinity,-Infinity,-Infinity],C=[0,0,0,0];a.NEGATIVE_INFINITY=q;a.POSITIVE_INFINITY=[-Infinity,-Infinity,
Infinity,Infinity];a.UNIT=[0,0,1,1];a.ZERO=C;a.allFinite=function(w){for(let x=0;4>x;x++)if(!isFinite(w[x]))return!1;return!0};a.area=function(w){return t(w)*p(w)};a.center=function(w,x=[0,0]){x[0]=(w[0]+w[2])/2;x[1]=(w[1]+w[3])/2;return x};a.clone=function(w){return[w[0],w[1],w[2],w[3]]};a.contains=function(w,x){return x[0]>=w[0]&&x[2]<=w[2]&&x[1]>=w[1]&&x[3]<=w[3]};a.containsPoint=function(w,x){return b(w,x[0],x[1])};a.containsPointObject=function(w,x){return b(w,x.x,x.y)};a.containsPointWithMargin=
function(w,x,c){return x[0]>=w[0]-c&&x[1]>=w[1]-c&&x[0]<=w[2]+c&&x[1]<=w[3]+c};a.containsXY=b;a.create=v;a.diameter=function(w){const x=t(w);w=p(w);return Math.sqrt(x*x+w*w)};a.distance=function(w,x){const c=(w[1]+w[3])/2,m=Math.max(Math.abs(x[0]-(w[0]+w[2])/2)-t(w)/2,0);w=Math.max(Math.abs(x[1]-c)-p(w)/2,0);return Math.sqrt(m*m+w*w)};a.empty=function(w){return w?k(w,q):v(q)};a.equals=function(w,x,c){if(r.isNone(w)||r.isNone(x))return w===x;if(!n(w)||!n(x))return!1;if(c)for(let m=0;m<w.length;m++){if(!c(w[m],
x[m]))return!1}else for(c=0;c<w.length;c++)if(w[c]!==x[c])return!1;return!0};a.expand=function(w,x,c=w){if("length"in x)if(n(x))c[0]=Math.min(w[0],x[0]),c[1]=Math.min(w[1],x[1]),c[2]=Math.max(w[2],x[2]),c[3]=Math.max(w[3],x[3]);else{if(2===x.length||3===x.length)c[0]=Math.min(w[0],x[0]),c[1]=Math.min(w[1],x[1]),c[2]=Math.max(w[2],x[0]),c[3]=Math.max(w[3],x[1])}else switch(x.type){case "extent":c[0]=Math.min(w[0],x.xmin);c[1]=Math.min(w[1],x.ymin);c[2]=Math.max(w[2],x.xmax);c[3]=Math.max(w[3],x.ymax);
break;case "point":c[0]=Math.min(w[0],x.x),c[1]=Math.min(w[1],x.y),c[2]=Math.max(w[2],x.x),c[3]=Math.max(w[3],x.y)}return c};a.expandPointInPlace=function(w,x){x[0]<w[0]&&(w[0]=x[0]);x[0]>w[2]&&(w[2]=x[0]);x[1]<w[1]&&(w[1]=x[1]);x[1]>w[3]&&(w[3]=x[1])};a.expandWithNestedArray=function(w,x,c=w){const m=x.length;let f=w[0],e=w[1],d=w[2];w=w[3];for(let h=0;h<m;h++){const F=x[h];f=Math.min(f,F[0]);e=Math.min(e,F[1]);d=Math.max(d,F[0]);w=Math.max(w,F[1])}c[0]=f;c[1]=e;c[2]=d;c[3]=w;return c};a.fromExtent=
function(w,x=v()){x[0]=w.xmin;x[1]=w.ymin;x[2]=w.xmax;x[3]=w.ymax;return x};a.fromValues=function(w,x,c,m,f=v()){f[0]=w;f[1]=x;f[2]=c;f[3]=m;return f};a.height=p;a.intersection=function(w,x,c=w){const m=x[0],f=x[1],e=x[2];x=x[3];c[0]=l(w[0],m,e);c[1]=l(w[1],f,x);c[2]=l(w[2],m,e);c[3]=l(w[3],f,x);return c};a.intersects=function(w,x){return Math.max(x[0],w[0])<=Math.min(x[2],w[2])&&Math.max(x[1],w[1])<=Math.min(x[3],w[3])};a.is=n;a.isPoint=function(w){return(0===t(w)||!isFinite(w[0]))&&(0===p(w)||!isFinite(w[1]))};
a.offset=function(w,x,c,m=w){m[0]=w[0]+x;m[1]=w[1]+c;m[2]=w[2]+x;m[3]=w[3]+c;return m};a.pad=function(w,x,c=w){c[0]=w[0]-x;c[1]=w[1]-x;c[2]=w[2]+x;c[3]=w[3]+x;return c};a.set=k;a.setMax=function(w,x,c=w){c[2]=x[0];c[3]=x[1];c!==w&&(c[0]=w[0],c[1]=w[1]);return w};a.setMin=function(w,x,c=w){c[0]=x[0];c[1]=x[1];c!==w&&(c[2]=w[2],c[3]=w[3]);return c};a.size=function(w,x){x[0]=w[2]-w[0];x[1]=w[3]-w[1]};a.toExtent=function(w,x){return new A({xmin:w[0],ymin:w[1],xmax:w[2],ymax:w[3],spatialReference:x})};
a.width=t;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/core/byteSizeEstimations":function(){define(["exports"],function(a){function g(r){return 32+r.length}a.estimateAttributesObjectSize=function(r){if(!r)return 0;let A=32;for(const v in r)if(r.hasOwnProperty(v)){const t=r[v];switch(typeof t){case "string":A+=g(t);break;case "number":A+=16;break;case "boolean":A+=4}}return A};a.estimateFixedArraySize=function(r,A){return 32+r.length*A};a.estimateNumberByteSize=function(){return 16};a.estimateStringByteSize=
g;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/geometry/support/aaBoundingBox":function(){define(["exports","../../core/maybe","../Extent","./aaBoundingRect"],function(a,g,r,A){function v(c=w){return[c[0],c[1],c[2],c[3],c[4],c[5]]}function t(c,m,f,e,d,h,F=v()){F[0]=c;F[1]=m;F[2]=f;F[3]=e;F[4]=d;F[5]=h;return F}function p(c){return c[0]>=c[3]?0:c[3]-c[0]}function b(c){return c[1]>=c[4]?0:c[4]-c[1]}function k(c){return c[2]>=c[5]?0:c[5]-c[2]}function n(c,m){return Math.max(m[0],c[0])<=
Math.min(m[3],c[3])&&Math.max(m[1],c[1])<=Math.min(m[4],c[4])&&Math.max(m[2],c[2])<=Math.min(m[5],c[5])}function l(c,m){c[0]=m[0];c[1]=m[1];c[2]=m[2];c[3]=m[3];c[4]=m[4];c[5]=m[5];return c}function q(c){return 6===c.length}const C=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity],w=[0,0,0,0,0,0],x=v();a.NEGATIVE_INFINITY=C;a.POSITIVE_INFINITY=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];a.ZERO=w;a.allFinite=function(c){for(let m=0;6>m;m++)if(!isFinite(c[m]))return!1;return!0};
a.center=function(c,m=[0,0,0]){m[0]=c[0]+p(c)/2;m[1]=c[1]+b(c)/2;m[2]=c[2]+k(c)/2;return m};a.contains=function(c,m){return m[0]>=c[0]&&m[1]>=c[1]&&m[2]>=c[2]&&m[3]<=c[3]&&m[4]<=c[4]&&m[5]<=c[5]};a.containsPoint=function(c,m){return m[0]>=c[0]&&m[1]>=c[1]&&m[2]>=c[2]&&m[0]<=c[3]&&m[1]<=c[4]&&m[2]<=c[5]};a.containsPointWithMargin=function(c,m,f){return m[0]>=c[0]-f&&m[1]>=c[1]-f&&m[2]>=c[2]-f&&m[0]<=c[3]+f&&m[1]<=c[4]+f&&m[2]<=c[5]+f};a.create=v;a.depth=b;a.diameter=function(c){const m=p(c),f=k(c);
c=b(c);return Math.sqrt(m*m+f*f+c*c)};a.empty=function(c){return c?l(c,C):v(C)};a.equals=function(c,m,f){if(g.isNone(c)||g.isNone(m))return c===m;if(!q(c)||!q(m))return!1;if(f)for(let e=0;e<c.length;e++){if(!f(c[e],m[e]))return!1}else for(f=0;f<c.length;f++)if(c[f]!==m[f])return!1;return!0};a.expandWithAABB=function(c,m){c[0]=Math.min(c[0],m[0]);c[1]=Math.min(c[1],m[1]);c[2]=Math.min(c[2],m[2]);c[3]=Math.max(c[3],m[3]);c[4]=Math.max(c[4],m[4]);c[5]=Math.max(c[5],m[5])};a.expandWithBuffer=function(c,
m,f=0,e=m.length/3){let d=c[0],h=c[1],F=c[2],E=c[3],u=c[4],z=c[5];for(let y=0;y<e;y++)d=Math.min(d,m[f+3*y]),h=Math.min(h,m[f+3*y+1]),F=Math.min(F,m[f+3*y+2]),E=Math.max(E,m[f+3*y]),u=Math.max(u,m[f+3*y+1]),z=Math.max(z,m[f+3*y+2]);c[0]=d;c[1]=h;c[2]=F;c[3]=E;c[4]=u;c[5]=z};a.expandWithNestedArray=function(c,m,f){const e=m.length;let d=c[0],h=c[1],F=c[2],E=c[3],u=c[4],z=c[5];if(f)for(f=0;f<e;f++){var y=m[f];d=Math.min(d,y[0]);h=Math.min(h,y[1]);F=Math.min(F,y[2]);E=Math.max(E,y[0]);u=Math.max(u,y[1]);
z=Math.max(z,y[2])}else for(f=0;f<e;f++)y=m[f],d=Math.min(d,y[0]),h=Math.min(h,y[1]),E=Math.max(E,y[0]),u=Math.max(u,y[1]);c[0]=d;c[1]=h;c[2]=F;c[3]=E;c[4]=u;c[5]=z};a.expandWithOffset=function(c,m,f,e){c[0]=Math.min(c[0],c[0]+m);c[3]=Math.max(c[3],c[3]+m);c[1]=Math.min(c[1],c[1]+f);c[4]=Math.max(c[4],c[4]+f);c[2]=Math.min(c[2],c[2]+e);c[5]=Math.max(c[5],c[5]+e)};a.expandWithRect=function(c,m){c[0]=Math.min(c[0],m[0]);c[1]=Math.min(c[1],m[1]);c[3]=Math.max(c[3],m[2]);c[4]=Math.max(c[4],m[3])};a.expandWithVec3=
function(c,m){c[0]=Math.min(c[0],m[0]);c[1]=Math.min(c[1],m[1]);c[2]=Math.min(c[2],m[2]);c[3]=Math.max(c[3],m[0]);c[4]=Math.max(c[4],m[1]);c[5]=Math.max(c[5],m[2])};a.fromExtent=function(c,m=v()){m[0]=c.xmin;m[1]=c.ymin;m[2]=c.zmin;m[3]=c.xmax;m[4]=c.ymax;m[5]=c.zmax;return m};a.fromMinMax=function(c,m,f=v()){f[0]=c[0];f[1]=c[1];f[2]=c[2];f[3]=m[0];f[4]=m[1];f[5]=m[2];return f};a.fromRect=function(c,m){c[0]=m[0];c[1]=m[1];c[2]=Number.NEGATIVE_INFINITY;c[3]=m[2];c[4]=m[3];c[5]=Number.POSITIVE_INFINITY;
return c};a.fromValues=t;a.getMax=function(c,m){m[0]=c[3];m[1]=c[4];m[2]=c[5];return m};a.getMin=function(c,m){m[0]=c[0];m[1]=c[1];m[2]=c[2];return m};a.height=k;a.intersects=n;a.intersectsClippingArea=function(c,m){return g.isNone(m)?!0:n(c,m)};a.is=q;a.isPoint=function(c){return 0===p(c)&&0===b(c)&&0===k(c)};a.maximumDimension=function(c){return Math.max(p(c),k(c),b(c))};a.offset=function(c,m,f,e,d=c){d[0]=c[0]+m;d[1]=c[1]+f;d[2]=c[2]+e;d[3]=c[3]+m;d[4]=c[4]+f;d[5]=c[5]+e;return d};a.scale=function(c,
m,f=c){const e=c[0]+p(c)/2,d=c[1]+b(c)/2,h=c[2]+k(c)/2;f[0]=e+(c[0]-e)*m;f[1]=d+(c[1]-d)*m;f[2]=h+(c[2]-h)*m;f[3]=e+(c[3]-e)*m;f[4]=d+(c[4]-d)*m;f[5]=h+(c[5]-h)*m;return f};a.set=l;a.setMax=function(c,m,f=c){f[3]=m[0];f[4]=m[1];f[5]=m[2];f!==c&&(f[0]=c[0],f[1]=c[1],f[2]=c[2]);return c};a.setMin=function(c,m,f=c){f[0]=m[0];f[1]=m[1];f[2]=m[2];f!==c&&(f[3]=c[3],f[4]=c[4],f[5]=c[5]);return f};a.size=function(c,m=[0,0,0]){m[0]=p(c);m[1]=b(c);m[2]=k(c);return m};a.toExtent=function(c,m){return isFinite(c[2])||
isFinite(c[5])?new r({xmin:c[0],xmax:c[3],ymin:c[1],ymax:c[4],zmin:c[2],zmax:c[5],spatialReference:m}):new r({xmin:c[0],xmax:c[3],ymin:c[1],ymax:c[4],spatialReference:m})};a.toRect=function(c,m){m||(m=A.create());m[0]=c[0];m[1]=c[1];m[2]=c[3];m[3]=c[4];return m};a.width=p;a.wrap=function(c,m,f,e,d,h){return t(c,m,f,e,d,h,x)};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/geometry/support/quantizationUtils":function(){define(["exports","./jsonUtils"],function(a,g){function r({scale:y,translate:B},
H){return Math.round((H-B[0])/y[0])}function A({scale:y,translate:B},H){return Math.round((B[1]-H)/y[1])}function v(y,B,H){const D=[];let M,U,R,J;for(let L=0;L<H.length;L++){const N=H[L];if(0<L){if(R=r(y,N[0]),J=A(y,N[1]),R!==M||J!==U)D.push(B(N,R-M,J-U)),M=R,U=J}else M=r(y,N[0]),U=A(y,N[1]),D.push(B(N,M,U))}return 0<D.length?D:null}function t(y,B,H,D){return v(y,H?D?z:u:D?u:E,B)}function p(y,B,H,D){const M=[];H=H?D?z:u:D?u:E;for(D=0;D<B.length;D++){const U=v(y,H,B[D]);U&&3<=U.length&&M.push(U)}return M.length?
M:null}function b(y,B,H,D){const M=[];H=H?D?z:u:D?u:E;for(D=0;D<B.length;D++){const U=v(y,H,B[D]);U&&2<=U.length&&M.push(U)}return M.length?M:null}function k({scale:y,translate:B},H){return H*y[0]+B[0]}function n({scale:y,translate:B},H){return B[1]-H*y[1]}function l(y,B,H){const D=Array(H.length);if(!H.length)return D;const [M,U]=y.scale;let R=k(y,H[0][0]);y=n(y,H[0][1]);D[0]=B(H[0],R,y);for(let J=1;J<H.length;J++){const L=H[J];R+=L[0]*M;y-=L[1]*U;D[J]=B(L,R,y)}return D}function q(y,B,H){const D=
Array(H.length);for(let M=0;M<H.length;M++)D[M]=l(y,B,H[M]);return D}function C(y,B,H,D){return l(y,H?D?z:u:D?u:E,B)}function w(y,B,H,D){return q(y,H?D?z:u:D?u:E,B)}function x(y,B,H,D){return q(y,H?D?z:u:D?u:E,B)}function c(y,B,H){let [D,M]=H[0],U=Math.min(D,B[0]),R=Math.min(M,B[1]),J=Math.max(D,B[2]);B=Math.max(M,B[3]);for(let L=1;L<H.length;L++){const [N,V]=H[L];D+=N;M+=V;0>N&&(U=Math.min(U,D));0<N&&(J=Math.max(J,D));0>V?R=Math.min(R,M):0<V&&(B=Math.max(B,M))}y[0]=U;y[1]=R;y[2]=J;y[3]=B;return y}
function m(y,B){if(!B.length)return null;y[0]=y[1]=Number.POSITIVE_INFINITY;y[2]=y[3]=Number.NEGATIVE_INFINITY;for(let H=0;H<B.length;H++)c(y,y,B[H]);return y}function f(y,B,H,D,M){B.xmin=r(y,H.xmin);B.ymin=A(y,H.ymin);B.xmax=r(y,H.xmax);B.ymax=A(y,H.ymax);B!==H&&(D&&(B.zmin=H.zmin,B.zmax=H.zmax),M&&(B.mmin=H.mmin,B.mmax=H.mmax));return B}function e(y,B,H,D,M){B.points=t(y,H.points,D,M);return B}function d(y,B,H,D,M){B.x=r(y,H.x);B.y=A(y,H.y);B!==H&&(D&&(B.z=H.z),M&&(B.m=H.m));return B}function h(y,
B,H,D,M){y=p(y,H.rings,D,M);if(!y)return null;B.rings=y;return B}function F(y,B,H,D,M){y=b(y,H.paths,D,M);if(!y)return null;B.paths=y;return B}const E=(y,B,H)=>[B,H],u=(y,B,H)=>[B,H,y[2]],z=(y,B,H)=>[B,H,y[2],y[3]];a.equals=function(y,B){if(y===B||null==y&&null==B)return!0;if(null==y||null==B)return!1;let H,D,M,U;y&&"upperLeft"===y.originPosition?(H=y.translate[0],D=y.translate[1],y=y.scale[0]):(H=y.extent.xmin,D=y.extent.ymax,y=y.tolerance);B&&"upperLeft"===B.originPosition?(M=B.translate[0],U=B.translate[1],
B=B.scale[0]):(M=B.extent.xmin,U=B.extent.ymax,B=B.tolerance);return H===M&&D===U&&y===B};a.getQuantizedBoundsCoordsArray=c;a.getQuantizedBoundsCoordsArrayArray=m;a.getQuantizedBoundsPaths=function(y){return m([0,0,0,0],y)};a.getQuantizedBoundsPoints=function(y){const B=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return c(B,B,y)};a.getQuantizedBoundsRings=function(y){return m([0,0,0,0],y)};a.quantizeBounds=function(y,B,H){B[0]=r(y,H[0]);B[3]=
A(y,H[1]);B[2]=r(y,H[2]);B[1]=A(y,H[3]);return B};a.quantizeExtent=f;a.quantizeGeometry=function(y,B){return y&&B?g.isPoint(B)?d(y,{},B,!1,!1):g.isPolyline(B)?F(y,{},B,!1,!1):g.isPolygon(B)?h(y,{},B,!1,!1):g.isMultipoint(B)?e(y,{},B,!1,!1):g.isExtent(B)?f(y,{},B,!1,!1):null:null};a.quantizeMultipoint=e;a.quantizePaths=b;a.quantizePoint=d;a.quantizePoints=t;a.quantizePolygon=h;a.quantizePolyline=F;a.quantizeRings=p;a.quantizeX=r;a.quantizeY=A;a.toQuantizationTransform=function(y){return y?{originPosition:"upper-left"===
y.originPosition?"upperLeft":"lower-left"===y.originPosition?"lowerLeft":y.originPosition,scale:y.tolerance?[y.tolerance,y.tolerance]:[1,1],translate:y.extent?[y.extent.xmin,y.extent.ymax]:[0,0]}:null};a.unquantizeBounds=function(y,B,H){return H?(B[0]=k(y,H[0]),B[1]=n(y,H[3]),B[2]=k(y,H[2]),B[3]=n(y,H[1]),B):[k(y,B[0]),n(y,B[3]),k(y,B[2]),n(y,B[1])]};a.unquantizeCoordsArray=l;a.unquantizeCoordsArrayArray=q;a.unquantizeExtent=function(y,B,H,D,M){B.xmin=k(y,H.xmin);B.ymin=n(y,H.ymin);B.xmax=k(y,H.xmax);
B.ymax=n(y,H.ymax);B!==H&&(D&&(B.zmin=H.zmin,B.zmax=H.zmax),M&&(B.mmin=H.mmin,B.mmax=H.mmax));return B};a.unquantizeMultipoint=function(y,B,H,D,M){B.points=C(y,H.points,D,M);return B};a.unquantizePaths=w;a.unquantizePoint=function(y,B,H,D,M){B.x=k(y,H.x);B.y=n(y,H.y);B!==H&&(D&&(B.z=H.z),M&&(B.m=H.m));return B};a.unquantizePoints=C;a.unquantizePolygon=function(y,B,H,D,M){B.rings=x(y,H.rings,D,M);return B};a.unquantizePolyline=function(y,B,H,D,M){B.paths=w(y,H.paths,D,M);return B};a.unquantizeRings=
x;a.unquantizeX=k;a.unquantizeY=n;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/layers/graphics/dehydratedFeatureComparison":function(){define(["exports","../../core/has","../../core/maybe"],function(a,g,r){function A(n,l){if(n===l)return!0;if(null==n||null==l||n.length!==l.length)return!1;for(let q=0;q<n.length;q++){const C=n[q],w=l[q];if(C.length!==w.length)return!1;for(let x=0;x<C.length;x++)if(C[x]!==w[x])return!1}return!0}function v(n,l){if(n===l)return!0;if(null==n||null==l||n.length!==
l.length)return!1;for(let q=0;q<n.length;q++)if(!A(n[q],l[q]))return!1;return!0}function t(n,l){return p(n.spatialReference,l.spatialReference)?n.x===l.x&&n.y===l.y&&n.z===l.z&&n.m===l.m:!1}function p(n,l){return n===l||n&&l&&n.equals(l)}function b(n,l){if(n===l)return!0;if(r.isNone(n)||r.isNone(l)||n.type!==l.type)return!1;switch(n.type){case "point":return t(n,l);case "extent":return n=n.hasZ!==l.hasZ||n.hasM!==l.hasM?!1:p(n.spatialReference,l.spatialReference)?n.xmin===l.xmin&&n.ymin===l.ymin&&
n.zmin===l.zmin&&n.xmax===l.xmax&&n.ymax===l.ymax&&n.zmax===l.zmax:!1,n;case "polyline":return n=n.hasZ!==l.hasZ||n.hasM!==l.hasM?!1:p(n.spatialReference,l.spatialReference)?v(n.paths,l.paths):!1,n;case "polygon":return n=n.hasZ!==l.hasZ||n.hasM!==l.hasM?!1:p(n.spatialReference,l.spatialReference)?v(n.rings,l.rings):!1,n;case "multipoint":return n=n.hasZ!==l.hasZ||n.hasM!==l.hasM?!1:p(n.spatialReference,l.spatialReference)?A(n.points,l.points):!1,n;case "mesh":return!1}}function k(n,l){if(n===l)return!0;
if(!n||!l)return!1;const q=Object.keys(n),C=Object.keys(l);if(q.length!==C.length)return!1;for(const w of q)if(n[w]!==l[w])return!1;return!0}a.equals=function(n,l){return n===l?!0:null!=n&&null!=l&&n.objectId===l.objectId&&b(n.geometry,l.geometry)&&k(n.attributes,l.attributes)?!0:!1};a.pointEquals=t;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/2d/interactive/SnappingVisualizer2D":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/handleUtils ../../../geometry/Point ../../../geometry/Polyline ../../../geometry ../../../symbols/CIMSymbol ../../../core/screenUtils ../../../symbols/SimpleLineSymbol ../../../symbols/SimpleMarkerSymbol ../../../symbols ../../../Graphic ../../../chunks/vec3f64 ../../../chunks/vec2f64 ../../../chunks/vec2 ../../draw/support/settings ../../interactive/snapping/Settings ../../interactive/snapping/SnappingVisualizer".split(" "),
function(a,g,r,A,v,t,p,b,k,n,l,q,C,w,x,c,m,f){t=function(H){function D(){return H.apply(this,arguments)||this}g._inheritsLoose(D,H);var M=D.prototype;M.visualizeIntersectionPoint=function(U,R){return this._visualizeSnappingIndicator({geometry:new A({x:U.intersectionPoint[0],y:U.intersectionPoint[1],spatialReference:R.coordinateHelper.spatialReference}),symbol:h,context:R})};M.visualizePoint=function(U,R){return this._visualizeSnappingIndicator({geometry:new A({x:U.point[0],y:U.point[1],spatialReference:R.coordinateHelper.spatialReference}),
symbol:F,context:R})};M.visualizeLine=function(U,R){return this._visualizeSnappingIndicator({geometry:new v({paths:[[U.lineStart,U.lineEnd]],spatialReference:R.coordinateHelper.spatialReference}),symbol:E,context:R})};M.visualizeParallelSign=function(U,R){return this._visualizeSnappingIndicator({geometry:new v({paths:[[U.lineStart,U.lineEnd]],spatialReference:R.coordinateHelper.spatialReference}),symbol:u,context:R})};M.visualizeRightAngleQuad=function(U,R){return this._visualizeSnappingIndicator({geometry:new v({paths:[[U.previousVertex,
U.centerVertex,U.nextVertex]],spatialReference:R.coordinateHelper.spatialReference}),symbol:B(U),context:R})};M._visualizeSnappingIndicator=function(U){const {geometry:R,symbol:J,context:L}=U,N=new q({geometry:R,symbol:J});L.view.graphics.add(N);return r.makeHandle(()=>{L.view.graphics.remove(N)})};return D}(f.SnappingVisualizer);const e=c.colors.main.toArray(),d=[...c.colors.main.toRgb(),100],h=new n({outline:new k({width:1.5,color:e}),size:15,color:[0,0,0,0]}),F=new n({outline:{width:.5,color:[0,
0,0,1]},size:10,color:e}),E=new p({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",enable:!0,capStyle:"Butt",joinStyle:"Round",miterLimit:10,width:b.px2pt(m.defaults.lineHintWidthTarget),color:e}]}}}),u=new p({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:0,y:-1,z:0},anchorPointUnits:"Relative",size:5,markerPlacement:{type:"CIMMarkerPlacementOnLine",placePerPart:!0,angleToLine:!0,
relativeTo:"LineMiddle"},frame:{xmin:-5,ymin:-1.5,xmax:5,ymax:1.5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[7,0],[-7,0],[-7,1.5],[7,1.5]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:e}]}}],scaleSymbolsProportionally:!0,respectFrame:!0},{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:0,y:1,z:0},anchorPointUnits:"Relative",size:5,markerPlacement:{type:"CIMMarkerPlacementOnLine",placePerPart:!0,angleToLine:!0,relativeTo:"LineMiddle"},frame:{xmin:-5,
ymin:-1.5,xmax:5,ymax:1.5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[7,0],[-7,0],[-7,-1.5],[7,-1.5]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:e}]}}],scaleSymbolsProportionally:!0,respectFrame:!0}]}}});k=H=>new p({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:.5,y:.5,z:0},anchorPointUnits:"Relative",size:b.px2pt(m.defaults.rightAngleHintSize),rotation:H,markerPlacement:{type:"CIMMarkerPlacementOnVertices",
placePerPart:!0,angleToLine:!0,placeOnEndPoints:!1},frame:{xmin:-5,ymin:-5,xmax:5,ymax:5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{paths:[[[5,-5],[-5,-5],[-5,5],[5,5],[5,-5]]]},symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",enable:!0,capStyle:"Butt",joinStyle:"Round",miterLimit:10,width:b.px2pt(m.defaults.rightAngleHintOutlineSize),color:e},{type:"CIMSolidFill",enable:!0,color:d}]}}],scaleSymbolsProportionally:!0,respectFrame:!0}]}}});const z=k(45),y=k(225),B=(()=>{const H=
w.create(),D=w.create(),M=C.create();return U=>{x.subtract(H,U.centerVertex,U.previousVertex);x.subtract(D,U.nextVertex,U.previousVertex);x.cross(M,H,D);return 0>M[2]?z:y}})();a.SnappingVisualizer2D=t;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/chunks/vec2f64":function(){define(["exports"],function(a){function g(){return[0,0]}function r(c){return[c[0],c[1]]}function A(c,m){return[c,m]}function v(c){const m=[0,0],f=Math.min(2,c.length);for(let e=0;e<f;++e)m[e]=c[e];return m}function t(c,
m){return new Float64Array(c,m,2)}function p(){return[0,0]}function b(){return[1,1]}function k(){return[1,0]}function n(){return[0,1]}const l=[0,0],q=[1,1],C=[1,0],w=[0,1];var x=Object.freeze({__proto__:null,create:g,clone:r,fromValues:A,fromArray:v,createView:t,zeros:p,ones:b,unitX:k,unitY:n,ZEROS:l,ONES:q,UNIT_X:C,UNIT_Y:w});a.ONES=q;a.UNIT_X=C;a.UNIT_Y=w;a.ZEROS=l;a.clone=r;a.create=g;a.createView=t;a.fromArray=v;a.fromValues=A;a.ones=b;a.unitX=k;a.unitY=n;a.vec2f64=x;a.zeros=p})},"esri/chunks/vec2":function(){define(["exports",
"./common"],function(a,g){function r(T,W){T[0]=W[0];T[1]=W[1];return T}function A(T,W,Q){T[0]=W;T[1]=Q;return T}function v(T,W,Q){T[0]=W[0]+Q[0];T[1]=W[1]+Q[1];return T}function t(T,W,Q){T[0]=W[0]-Q[0];T[1]=W[1]-Q[1];return T}function p(T,W,Q){T[0]=W[0]*Q[0];T[1]=W[1]*Q[1];return T}function b(T,W,Q){T[0]=W[0]/Q[0];T[1]=W[1]/Q[1];return T}function k(T,W){T[0]=Math.ceil(W[0]);T[1]=Math.ceil(W[1]);return T}function n(T,W){T[0]=Math.floor(W[0]);T[1]=Math.floor(W[1]);return T}function l(T,W,Q){T[0]=Math.min(W[0],
Q[0]);T[1]=Math.min(W[1],Q[1]);return T}function q(T,W,Q){T[0]=Math.max(W[0],Q[0]);T[1]=Math.max(W[1],Q[1]);return T}function C(T,W){T[0]=Math.round(W[0]);T[1]=Math.round(W[1]);return T}function w(T,W,Q){T[0]=W[0]*Q;T[1]=W[1]*Q;return T}function x(T,W,Q,Z){T[0]=W[0]+Q[0]*Z;T[1]=W[1]+Q[1]*Z;return T}function c(T,W){const Q=W[0]-T[0];T=W[1]-T[1];return Math.sqrt(Q*Q+T*T)}function m(T,W){const Q=W[0]-T[0];T=W[1]-T[1];return Q*Q+T*T}function f(T){const W=T[0];T=T[1];return Math.sqrt(W*W+T*T)}function e(T){const W=
T[0];T=T[1];return W*W+T*T}function d(T,W){T[0]=-W[0];T[1]=-W[1];return T}function h(T,W){T[0]=1/W[0];T[1]=1/W[1];return T}function F(T,W){var Q=W[0];const Z=W[1];Q=Q*Q+Z*Z;0<Q&&(Q=1/Math.sqrt(Q),T[0]=W[0]*Q,T[1]=W[1]*Q);return T}function E(T,W){return T[0]*W[0]+T[1]*W[1]}function u(T,W,Q){W=W[0]*Q[1]-W[1]*Q[0];T[0]=T[1]=0;T[2]=W;return T}function z(T,W,Q,Z){const O=W[0];W=W[1];T[0]=O+Z*(Q[0]-O);T[1]=W+Z*(Q[1]-W);return T}function y(T,W){W=W||1;const Q=2*g.RANDOM()*Math.PI;T[0]=Math.cos(Q)*W;T[1]=
Math.sin(Q)*W;return T}function B(T,W,Q){const Z=W[0];W=W[1];T[0]=Q[0]*Z+Q[2]*W;T[1]=Q[1]*Z+Q[3]*W;return T}function H(T,W,Q){const Z=W[0];W=W[1];T[0]=Q[0]*Z+Q[2]*W+Q[4];T[1]=Q[1]*Z+Q[3]*W+Q[5];return T}function D(T,W,Q){const Z=W[0];W=W[1];T[0]=Q[0]*Z+Q[3]*W+Q[6];T[1]=Q[1]*Z+Q[4]*W+Q[7];return T}function M(T,W,Q){const Z=W[0];W=W[1];T[0]=Q[0]*Z+Q[4]*W+Q[12];T[1]=Q[1]*Z+Q[5]*W+Q[13];return T}function U(T,W,Q,Z){const O=W[0]-Q[0];W=W[1]-Q[1];const P=Math.sin(Z);Z=Math.cos(Z);T[0]=O*Z-W*P+Q[0];T[1]=
O*P+W*Z+Q[1];return T}function R(T,W){var Q=T[0];T=T[1];const Z=W[0];W=W[1];let O=Q*Q+T*T;0<O&&(O=1/Math.sqrt(O));let P=Z*Z+W*W;0<P&&(P=1/Math.sqrt(P));Q=(Q*Z+T*W)*O*P;return 1<Q?0:-1>Q?Math.PI:Math.acos(Q)}function J(T){return"vec2("+T[0]+", "+T[1]+")"}function L(T,W){return T[0]===W[0]&&T[1]===W[1]}function N(T,W){const Q=T[0];T=T[1];const Z=W[0];W=W[1];return Math.abs(Q-Z)<=g.EPSILON*Math.max(1,Math.abs(Q),Math.abs(Z))&&Math.abs(T-W)<=g.EPSILON*Math.max(1,Math.abs(T),Math.abs(W))}var V=Object.freeze({__proto__:null,
copy:r,set:A,add:v,subtract:t,multiply:p,divide:b,ceil:k,floor:n,min:l,max:q,round:C,scale:w,scaleAndAdd:x,distance:c,squaredDistance:m,length:f,squaredLength:e,negate:d,inverse:h,normalize:F,dot:E,cross:u,lerp:z,random:y,transformMat2:B,transformMat2d:H,transformMat3:D,transformMat4:M,rotate:U,angle:R,str:J,exactEquals:L,equals:N,len:f,sub:t,mul:p,div:b,dist:c,sqrDist:m,sqrLen:e});a.add=v;a.angle=R;a.ceil=k;a.copy=r;a.cross=u;a.dist=c;a.distance=c;a.div=b;a.divide=b;a.dot=E;a.equals=N;a.exactEquals=
L;a.floor=n;a.inverse=h;a.len=f;a.length=f;a.lerp=z;a.max=q;a.min=l;a.mul=p;a.multiply=p;a.negate=d;a.normalize=F;a.random=y;a.rotate=U;a.round=C;a.scale=w;a.scaleAndAdd=x;a.set=A;a.sqrDist=m;a.sqrLen=e;a.squaredDistance=m;a.squaredLength=e;a.str=J;a.sub=t;a.subtract=t;a.transformMat2=B;a.transformMat2d=H;a.transformMat3=D;a.transformMat4=M;a.vec2=V})},"esri/views/draw/support/settings":function(){define(["exports","../../../Color"],function(a,g){function r(n,l){if(l)for(const q in l)n[q]=l[q]}const A=
{main:new g([255,127,0]),selected:new g([255,255,255]),outline:new g([0,0,0,.5]),selectedOutline:new g([255,255,255]),hoverOutline:new g([255,255,255]),secondary:new g([255,255,255]),secondaryOutline:new g([100,100,100]),transparent:new g([0,0,0,0])};let v=function(n){this.size=8;this.hoverSize=10;this.hoverColor=this.color=A.main;this.outlineColor=A.outline;this.hoverOutlineColor=A.hoverOutline;r(this,n)},t=function(n){this.color=A.secondary;this.hoverColor=A.main;r(this,n)},p=function(n){this.hoverColor=
this.color=A.transparent;this.hoverOutlineColor=this.outlineColor=A.main;this.stagedColor=A.transparent;this.stagedOutlineColor=A.secondary;r(this,n)},b=function(n){this.vertex=new v;this.midpoint=new v({color:A.secondary,outlineColor:A.secondaryOutline,size:6});this.selected=new v({color:A.selected,hoverColor:A.selected,hoverOutlineColor:A.hoverOutline});r(this,n)},k=function(n){this.center=new v({color:A.secondaryOutline});this.fill=new p;this.line=new t;this.vertex=new v({color:A.selected,outlineColor:A.main,
hoverColor:A.selected,hoverOutlineColor:A.secondaryOutline});r(this,n)};g=new function(n){this.reshapeGraphics=new b;this.transformGraphics=new k;r(this,n)};a.colors=A;a.settings=g;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/interactive/snapping/SnappingVisualizer":function(){define("exports ../../../core/handleUtils ./hints/IntersectionSnappingHint ./hints/LineSnappingHint ./hints/ParallelSnappingHint ./hints/PointSnappingHint ./hints/RightAngleSnappingHint".split(" "),function(a,
g,r,A,v,t,p){let b=function(){function k(){}var n=k.prototype;n.draw=function(l,q){l=this.getUniqueHints(l);const C=[];for(const w of l)w instanceof r.IntersectionSnappingHint&&C.push(this.visualizeIntersectionPoint(w,q)),w instanceof A.LineSnappingHint&&C.push(this.visualizeLine(w,q)),w instanceof v.ParallelSnappingHint&&C.push(this.visualizeParallelSign(w,q)),w instanceof p.RightAngleSnappingHint&&C.push(this.visualizeRightAngleQuad(w,q)),w instanceof t.PointSnappingHint&&C.push(this.visualizePoint(w,
q));return g.handlesGroup(C)};n.getUniqueHints=function(l){const q=[];for(const C of l){l=!0;for(const w of q)if(C.equals(w)){l=!1;break}l&&q.push(C)}return q};return k}();a.SnappingVisualizer=b;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/interactive/snapping/hints/IntersectionSnappingHint":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../snappingUtils","./SnappingHint"],function(a,g,r,A){A=function(v){function t(p){var b=v.call(this)||this;b.intersectionPoint=
p;return b}g._inheritsLoose(t,v);t.prototype.equals=function(p){return p instanceof t?r.objectEqual(this.intersectionPoint,p.intersectionPoint):!1};return t}(A.SnappingHint);a.IntersectionSnappingHint=A;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/interactive/snapping/snappingUtils":function(){define("exports ../../../geometry/Point ../../../core/screenUtils ../../../chunks/vec3f64 ../../../chunks/vec2 ../../../support/elevationInfoUtils".split(" "),function(a,g,r,A,v,t){function p(l,
q,C,w,x=A.create()){l=q.toXYZ(l);l[2]=t.getConvertedElevationFromVector(w,l,q.spatialReference,C)||0;w.renderCoordsHelper.toRenderCoords(l,q.spatialReference,x);return x}const b=A.create(),k=r.createScreenPointArray(),n=new g;a.anyMapPointToRender=p;a.anyMapPointToScreenPoint=function(l,q,C,w){if("2d"===w.type)return w.toScreen(q.toPoint(l,n));p(l,q,C,w,b);w.state.camera.projectToScreen(b,k);return r.createScreenPoint(k[0],k[1])};a.anyMapPointsToRenderWithEqualZ=function(l,q,C,w,x,c,m){l=C.toXYZ(l);
q=C.toXYZ(q);const f=t.getConvertedElevationFromVector(x,l,C.spatialReference,w);w=t.getConvertedElevationFromVector(x,q,C.spatialReference,w);w=(null==f?w:null==w?f:Math.min(f,w))||0;l[2]=w;q[2]=w;x.renderCoordsHelper.toRenderCoords(l,C.spatialReference,c);x.renderCoordsHelper.toRenderCoords(q,C.spatialReference,m)};a.objectEqual=function(l,q){const C=l.length===q.length&&l[0]===q[0]&&l[1]===q[1];switch(l.length){case 2:return C;case 3:return C&&l[2]===q[2];case 4:return C&&l[3]===q[3]}return!1};
a.sortCandidatesInPlace=function(l,q){q.sort((C,w)=>{C=v.squaredDistance(C.targetPoint,l);w=v.squaredDistance(w.targetPoint,l);return C-w})};a.squareDistance=function(l,q){const C=l.x-q.x;l=l.y-q.y;return C*C+l*l};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/support/elevationInfoUtils":function(){define(["exports","../core/maybe","../symbols/support/unitConversionUtils"],function(a,g,r){function A(n,l){return g.isNone(l)||!l.mode?n?"absolute-height":"on-the-ground":l.mode}function v(n,
l){return A(g.isSome(n)?n.hasZ:!1,l)}function t(n){const l=p(n);return v(n.geometry,l)}function p(n){return n.layer&&"elevationInfo"in n.layer?n.layer.elevationInfo:null}function b(n,l,q,C,w,x,c=null){if(!g.isNone(x)){var m=g.isSome(c)?c.mode:"absolute-height";if("on-the-ground"===m)return 0;a:{x=k(l,q,C,w,n,x);c=g.isSome(c)&&g.isSome(c.offset)?c.offset:0;switch(m){case "absolute-height":n=x-c;break a;case "relative-to-ground":n=x-(g.unwrapOr(n.elevationProvider.getElevation(l,q,C,w,"ground"),0)+
c);break a;case "relative-to-scene":n=x-(g.unwrapOr(n.elevationProvider.getElevation(l,q,C,w,"scene"),0)+c);break a}n=void 0}return n}}function k(n,l,q,C,w,x){const c=g.isSome(x.offset)?x.offset:0;switch(x.mode){case "absolute-height":return q+c;case "on-the-ground":return g.unwrapOr(w.elevationProvider.getElevation(n,l,0,C,"ground"),0);case "relative-to-ground":return q+g.unwrapOr(w.elevationProvider.getElevation(n,l,q,C,"ground"),0)+c;case "relative-to-scene":return q+g.unwrapOr(w.elevationProvider.getElevation(n,
l,q,C,"scene"),0)+c}}a.getConvertedElevation=function(n,l,q,C=null){return b(n,l.x,l.y,l.hasZ?l.z:0,l.spatialReference,q,C)};a.getConvertedElevationFromVector=function(n,l,q,C,w=null){return b(n,l[0],l[1],2<l.length?l[2]:0,q,C,w)};a.getEffectiveElevationMode=A;a.getGeometryEffectiveElevationMode=v;a.getGraphicEffectiveElevationInfo=function(n){var l=p(n);n=v(n.geometry,l);l=g.isSome(l)&&"on-the-ground"!==n?g.unwrapOr(l.offset,0)*r.getMetersPerUnit(g.unwrapOr(l.unit,"meters")):0;return{mode:n,offset:l}};
a.getGraphicEffectiveElevationMode=t;a.getZForElevationMode=function(n,l,q){if(!g.isNone(q)&&q.mode){var C=n.hasZ?n.z:0,w=g.isSome(q.offset)?q.offset:0;switch(q.mode){case "absolute-height":return C-w;case "on-the-ground":return 0;case "relative-to-ground":return n=g.unwrapOr(l.elevationProvider.getElevation(n.x,n.y,n.z,n.spatialReference,"ground"),0)+w,C-n;case "relative-to-scene":return n=g.unwrapOr(l.elevationProvider.getElevation(n.x,n.y,n.z,n.spatialReference,"scene"),0)+w,C-n}}};a.hasGraphicFeatureExpressionInfo=
function(n){if("on-the-ground"===t(n))return!1;n=p(n);n=g.isSome(n)&&n.featureExpressionInfo?n.featureExpressionInfo.expression:null;return!(!n||"0"===n)};a.zValueInAbsoluteHeightMode=k;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/interactive/snapping/hints/SnappingHint":function(){define(["exports"],function(a){a.SnappingHint=function(){};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/interactive/snapping/hints/LineSnappingHint":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/has ../../../../core/Logger ../snappingUtils ./SnappingHint".split(" "),
function(a,g,r,A,v,t){A.getLogger("esri.views.interactive.snapping.hints.LineSnappingHint");r=function(p){function b(k,n,l,q=!0,C=!0){var w=p.call(this)||this;w.type=k;w.lineStart=n;w.lineEnd=l;w.fadeLeft=q;w.fadeRight=C;return w}g._inheritsLoose(b,p);b.prototype.equals=function(k){return k instanceof b?this.type===k.type&&v.objectEqual(this.lineStart,k.lineStart)&&v.objectEqual(this.lineEnd,k.lineEnd)&&this.fadeLeft===k.fadeLeft&&this.fadeRight===k.fadeRight:!1};return b}(t.SnappingHint);a.LineSnappingHint=
r;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/interactive/snapping/hints/ParallelSnappingHint":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/has ../../../../core/Logger ../snappingUtils ./SnappingHint".split(" "),function(a,g,r,A,v,t){A.getLogger("esri.views.interactive.snapping.hints.ParallelSnappingHint");r=function(p){function b(k,n){var l=p.call(this)||this;l.lineStart=k;l.lineEnd=n;return l}g._inheritsLoose(b,p);b.prototype.equals=
function(k){return k instanceof b?v.objectEqual(this.lineStart,k.lineStart)&&v.objectEqual(this.lineEnd,k.lineEnd):!1};return b}(t.SnappingHint);a.ParallelSnappingHint=r;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/interactive/snapping/hints/PointSnappingHint":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../snappingUtils","./SnappingHint"],function(a,g,r,A){A=function(v){function t(p){var b=v.call(this)||this;b.point=p;return b}g._inheritsLoose(t,
v);t.prototype.equals=function(p){return p instanceof t?r.objectEqual(this.point,p.point):!1};return t}(A.SnappingHint);a.PointSnappingHint=A;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/interactive/snapping/hints/RightAngleSnappingHint":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/has ../../../../core/Logger ../snappingUtils ./SnappingHint".split(" "),function(a,g,r,A,v,t){A.getLogger("esri.views.interactive.snapping.hints.RightAngleSnappingHint");
r=function(p){function b(k,n,l){var q=p.call(this)||this;q.previousVertex=k;q.centerVertex=n;q.nextVertex=l;return q}g._inheritsLoose(b,p);b.prototype.equals=function(k){return k instanceof b?v.objectEqual(this.previousVertex,k.previousVertex)&&v.objectEqual(this.centerVertex,k.centerVertex)&&v.objectEqual(this.nextVertex,k.nextVertex):!1};return b}(t.SnappingHint);a.RightAngleSnappingHint=r;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/interactive/coordinateHelper":function(){define("exports ../../geometry/support/spatialReferenceUtils ../../geometry/Point ../../geometry ../../chunks/vec3f64 ../../chunks/vec3 ../../chunks/vec2f64 ../../chunks/vec4f64 ../../chunks/vec2 ../../chunks/vec4 ../3d/support/stack".split(" "),
function(a,g,r,A,v,t,p,b,k,n,l){function q(m,f){if(f.supported){var e=Infinity,d=-Infinity,h=f.upperBoundX-f.lowerBoundX;m.forEach(E=>{let u=E.pos[0];for(;u<f.lowerBoundX;)u+=h;for(;u>f.upperBoundX;)u-=h;e=Math.min(e,u);d=Math.max(d,u);E.pos[0]=u});var F=d-e;h-F<F&&m.forEach(E=>{0>E.pos[0]&&(E.pos[0]+=h)})}}function C(m,f){m=g.getInfo(m);return"global"===f&&m?{supported:!0,lowerBoundX:m.valid[0],upperBoundX:m.valid[1]}:{supported:!1,lowerBoundX:null,upperBoundX:null}}let w=function(){function m(e,
d){this.spatialReference=e;this.viewingMode=d;this._unnormalizationInfo=C(e,d)}var f=m.prototype;f.tag=function(e){return e};f.createNew=function(){return this.tag(p.create())};f.fromPoint=function(e){return this.tag(p.fromValues(e.x,e.y))};f.fromArray=function(e){return this.tag(p.fromValues(e[0],e[1]))};f.toArray=function(e){return[e[0],e[1]]};f.clone=function(e){return this.tag(p.fromArray(e))};f.toPoint=function(e,d){d.x=e[0];d.y=e[1];d.hasZ=!1;d.hasM=!1;d.spatialReference=this.spatialReference;
return d};f.createPoint=function(e){return new r({x:e[0],y:e[1],z:void 0,m:void 0,spatialReference:this.spatialReference})};f.createPointFromArray=function(e){return new r({x:e[0],y:e[1],z:void 0,m:void 0,spatialReference:this.spatialReference})};f.createDehydratedPoint=function(e){return{x:e[0],y:e[1],z:void 0,m:void 0,hasZ:!1,hasM:!1,spatialReference:this.spatialReference,type:"point"}};f.lerp=function(e,d,h,F){return k.lerp(F,e,d,h)};f.addDelta=function(e,d,h){e[0]+=d;e[1]+=h};f.scale=function(e,
d,h,F){const E=l.sv2d.get();d=k.subtract(E,e,d);h=k.scale(E,h,k.dot(h,d));k.scaleAndAdd(e,e,h,F-1)};f.rotate=function(e,d,h){k.rotate(e,e,d,h)};f.pointToArray=function(e){return[e.x,e.y]};f.getZ=function(e,d){return d};f.hasZ=function(){return!1};f.unnormalize=function(e){q(e,this._unnormalizationInfo)};f.fromXYZ=function(e){return this.tag(p.fromValues(e[0],e[1]))};f.toXYZ=function(e,d=0){return v.fromValues(e[0],e[1],d)};return m}(),x=function(){function m(e,d,h){this.valueType=e;this.spatialReference=
d;this._unnormalizationInfo=C(d,h)}var f=m.prototype;f.tag=function(e){return e};f.createNew=function(){return this.tag(v.create())};f.fromPoint=function(e){return this.tag(v.fromValues(e.x,e.y,0===this.valueType?e.z:e.m))};f.fromArray=function(e){return this.tag(v.fromValues(e[0],e[1],e[2]||0))};f.toArray=function(e){return[e[0],e[1],e[2]]};f.clone=function(e){return this.tag(v.fromArray(e))};f.toPoint=function(e,d){d.x=e[0];d.y=e[1];0===this.valueType?(d.z=e[2],d.hasZ=!0,d.hasM=!1):(d.m=e[2],d.hasZ=
!1,d.hasM=!0);d.spatialReference=this.spatialReference;return d};f.createPoint=function(e){return new r({x:e[0],y:e[1],z:0===this.valueType?e[2]:void 0,m:1===this.valueType?e[2]:void 0,spatialReference:this.spatialReference})};f.createPointFromArray=function(e){return new r({x:e[0],y:e[1],z:0===this.valueType?e[2]:void 0,m:1===this.valueType?e[2]:void 0,spatialReference:this.spatialReference})};f.createDehydratedPoint=function(e){const d=0===this.valueType,h=1===this.valueType;return{x:e[0],y:e[1],
z:d?e[2]:void 0,m:h?e[2]:void 0,hasZ:d,hasM:h,spatialReference:this.spatialReference,type:"point"}};f.lerp=function(e,d,h,F){return t.lerp(F,e,d,h)};f.addDelta=function(e,d,h,F){e[0]+=d;e[1]+=h;0===this.valueType&&(e[2]+=F)};f.scale=function(e,d,h,F){const E=l.sv2d.get();d=k.subtract(E,e,d);h=k.scale(E,h,k.dot(h,d));k.scaleAndAdd(e,e,h,F-1)};f.rotate=function(e,d,h){k.rotate(e,e,d,h)};f.pointToArray=function(e){return 0===this.valueType?[e.x,e.y,e.z]:[e.x,e.y,e.m]};f.getZ=function(e,d){return 0===
this.valueType?e[2]:d};f.hasZ=function(){return 0===this.valueType};f.unnormalize=function(e){q(e,this._unnormalizationInfo)};f.fromXYZ=function(e,d=0,h=0){return this.tag(v.fromValues(e[0],e[1],0===this.valueType?2<e.length?e[2]:d:h))};f.toXYZ=function(e,d=0){return this.tag(v.fromValues(e[0],e[1],0===this.valueType?e[2]:d))};return m}(),c=function(){function m(e,d){this.spatialReference=e;this._unnormalizationInfo=C(e,d)}var f=m.prototype;f.tag=function(e){return e};f.createNew=function(){return this.tag(b.create())};
f.fromPoint=function(e){return this.tag(b.fromValues(e.x,e.y,e.z,e.m))};f.fromArray=function(e){return this.tag(b.fromValues(e[0],e[1],e[2]||0,e[3]||0))};f.toArray=function(e){return[e[0],e[1],e[2],e[3]]};f.clone=function(e){return this.tag(b.fromArray(e))};f.toPoint=function(e,d){d.x=e[0];d.y=e[1];d.z=e[2];d.m=e[3];d.hasZ=!0;d.hasM=!0;d.spatialReference=this.spatialReference;return d};f.createPoint=function(e){return new r({x:e[0],y:e[1],z:e[2],m:e[3],spatialReference:this.spatialReference})};f.createPointFromArray=
function(e){return new r({x:e[0],y:e[1],z:e[2],m:e[3],spatialReference:this.spatialReference})};f.createDehydratedPoint=function(e){return{x:e[0],y:e[1],z:e[2],m:e[3],hasZ:!0,hasM:!0,spatialReference:this.spatialReference,type:"point"}};f.lerp=function(e,d,h,F){return n.lerp(F,e,d,h)};f.addDelta=function(e,d,h,F){e[0]+=d;e[1]+=h;e[2]+=F};f.scale=function(e,d,h,F){const E=l.sv2d.get();d=k.subtract(E,e,d);h=k.scale(E,h,k.dot(h,d));k.scaleAndAdd(e,e,h,F-1)};f.rotate=function(e,d,h){k.rotate(e,e,d,h)};
f.pointToArray=function(e){return[e.x,e.y,e.z,e.m]};f.getZ=function(e){return e[2]};f.hasZ=function(){return!0};f.unnormalize=function(e){q(e,this._unnormalizationInfo)};f.fromXYZ=function(e,d=0,h=0){return this.tag(b.fromValues(e[0],e[1],2<e.length?e[2]:d,h))};f.toXYZ=function(e){return v.fromValues(e[0],e[1],e[2])};return m}();a.CoordinateHelper2D=w;a.CoordinateHelper3D=x;a.CoordinateHelper4D=c;a.createCoordinateHelper=function(m,f,e,d){return m&&f?new c(e,d):f?new x(1,e,d):m?new x(0,e,d):new w(e,
d)};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/chunks/vec4f64":function(){define(["exports"],function(a){function g(){return[0,0,0,0]}function r(d){return[d[0],d[1],d[2],d[3]]}function A(d,h,F,E){return[d,h,F,E]}function v(d){const h=g(),F=Math.min(4,d.length);for(let E=0;E<F;++E)h[E]=d[E];return h}function t(d,h){return new Float64Array(d,h,4)}function p(){return g()}function b(){return[1,1,1,1]}function k(){return[1,0,0,0]}function n(){return[0,1,0,0]}function l(){return[0,0,1,0]}
function q(){return[0,0,0,1]}const C=g(),w=b(),x=k(),c=n(),m=l(),f=q();var e=Object.freeze({__proto__:null,create:g,clone:r,fromValues:A,fromArray:v,createView:t,zeros:p,ones:b,unitX:k,unitY:n,unitZ:l,unitW:q,ZEROS:C,ONES:w,UNIT_X:x,UNIT_Y:c,UNIT_Z:m,UNIT_W:f});a.ONES=w;a.UNIT_W=f;a.UNIT_X=x;a.UNIT_Y=c;a.UNIT_Z=m;a.ZEROS=C;a.clone=r;a.create=g;a.createView=t;a.fromArray=v;a.fromValues=A;a.ones=b;a.unitW=q;a.unitX=k;a.unitY=n;a.unitZ=l;a.vec4f64=e;a.zeros=p})},"esri/chunks/vec4":function(){define(["exports",
"./common"],function(a,g){function r(R,J){R[0]=J[0];R[1]=J[1];R[2]=J[2];R[3]=J[3];return R}function A(R,J,L,N,V){R[0]=J;R[1]=L;R[2]=N;R[3]=V;return R}function v(R,J,L){R[0]=J[0]+L[0];R[1]=J[1]+L[1];R[2]=J[2]+L[2];R[3]=J[3]+L[3];return R}function t(R,J,L){R[0]=J[0]-L[0];R[1]=J[1]-L[1];R[2]=J[2]-L[2];R[3]=J[3]-L[3];return R}function p(R,J,L){R[0]=J[0]*L[0];R[1]=J[1]*L[1];R[2]=J[2]*L[2];R[3]=J[3]*L[3];return R}function b(R,J,L){R[0]=J[0]/L[0];R[1]=J[1]/L[1];R[2]=J[2]/L[2];R[3]=J[3]/L[3];return R}function k(R,
J){R[0]=Math.ceil(J[0]);R[1]=Math.ceil(J[1]);R[2]=Math.ceil(J[2]);R[3]=Math.ceil(J[3]);return R}function n(R,J){R[0]=Math.floor(J[0]);R[1]=Math.floor(J[1]);R[2]=Math.floor(J[2]);R[3]=Math.floor(J[3]);return R}function l(R,J,L){R[0]=Math.min(J[0],L[0]);R[1]=Math.min(J[1],L[1]);R[2]=Math.min(J[2],L[2]);R[3]=Math.min(J[3],L[3]);return R}function q(R,J,L){R[0]=Math.max(J[0],L[0]);R[1]=Math.max(J[1],L[1]);R[2]=Math.max(J[2],L[2]);R[3]=Math.max(J[3],L[3]);return R}function C(R,J){R[0]=Math.round(J[0]);
R[1]=Math.round(J[1]);R[2]=Math.round(J[2]);R[3]=Math.round(J[3]);return R}function w(R,J,L){R[0]=J[0]*L;R[1]=J[1]*L;R[2]=J[2]*L;R[3]=J[3]*L;return R}function x(R,J,L,N){R[0]=J[0]+L[0]*N;R[1]=J[1]+L[1]*N;R[2]=J[2]+L[2]*N;R[3]=J[3]+L[3]*N;return R}function c(R,J){const L=J[0]-R[0],N=J[1]-R[1],V=J[2]-R[2];R=J[3]-R[3];return Math.sqrt(L*L+N*N+V*V+R*R)}function m(R,J){const L=J[0]-R[0],N=J[1]-R[1],V=J[2]-R[2];R=J[3]-R[3];return L*L+N*N+V*V+R*R}function f(R){const J=R[0],L=R[1],N=R[2];R=R[3];return Math.sqrt(J*
J+L*L+N*N+R*R)}function e(R){const J=R[0],L=R[1],N=R[2];R=R[3];return J*J+L*L+N*N+R*R}function d(R,J){R[0]=-J[0];R[1]=-J[1];R[2]=-J[2];R[3]=-J[3];return R}function h(R,J){R[0]=1/J[0];R[1]=1/J[1];R[2]=1/J[2];R[3]=1/J[3];return R}function F(R,J){const L=J[0],N=J[1],V=J[2];J=J[3];let T=L*L+N*N+V*V+J*J;0<T&&(T=1/Math.sqrt(T),R[0]=L*T,R[1]=N*T,R[2]=V*T,R[3]=J*T);return R}function E(R,J){return R[0]*J[0]+R[1]*J[1]+R[2]*J[2]+R[3]*J[3]}function u(R,J,L,N){const V=J[0],T=J[1],W=J[2];J=J[3];R[0]=V+N*(L[0]-
V);R[1]=T+N*(L[1]-T);R[2]=W+N*(L[2]-W);R[3]=J+N*(L[3]-J);return R}function z(R,J){J=J||1;let L,N,V,T;let W;do{L=2*g.RANDOM()-1;N=2*g.RANDOM()-1;var Q=L*L+N*N}while(1<=Q);do V=2*g.RANDOM()-1,T=2*g.RANDOM()-1,W=V*V+T*T;while(1<=W);Q=Math.sqrt((1-Q)/W);R[0]=J*L;R[1]=J*N;R[2]=J*V*Q;R[3]=J*T*Q;return R}function y(R,J,L){const N=J[0],V=J[1],T=J[2];J=J[3];R[0]=L[0]*N+L[4]*V+L[8]*T+L[12]*J;R[1]=L[1]*N+L[5]*V+L[9]*T+L[13]*J;R[2]=L[2]*N+L[6]*V+L[10]*T+L[14]*J;R[3]=L[3]*N+L[7]*V+L[11]*T+L[15]*J;return R}function B(R,
J,L){var N=J[0];const V=J[1],T=J[2],W=L[0],Q=L[1],Z=L[2];L=L[3];const O=L*N+Q*T-Z*V,P=L*V+Z*N-W*T,S=L*T+W*V-Q*N;N=-W*N-Q*V-Z*T;R[0]=O*L+N*-W+P*-Z-S*-Q;R[1]=P*L+N*-Q+S*-W-O*-Z;R[2]=S*L+N*-Z+O*-Q-P*-W;R[3]=J[3];return R}function H(R){return"vec4("+R[0]+", "+R[1]+", "+R[2]+", "+R[3]+")"}function D(R,J){return R[0]===J[0]&&R[1]===J[1]&&R[2]===J[2]&&R[3]===J[3]}function M(R,J){const L=R[0],N=R[1],V=R[2];R=R[3];const T=J[0],W=J[1],Q=J[2];J=J[3];return Math.abs(L-T)<=g.EPSILON*Math.max(1,Math.abs(L),Math.abs(T))&&
Math.abs(N-W)<=g.EPSILON*Math.max(1,Math.abs(N),Math.abs(W))&&Math.abs(V-Q)<=g.EPSILON*Math.max(1,Math.abs(V),Math.abs(Q))&&Math.abs(R-J)<=g.EPSILON*Math.max(1,Math.abs(R),Math.abs(J))}var U=Object.freeze({__proto__:null,copy:r,set:A,add:v,subtract:t,multiply:p,divide:b,ceil:k,floor:n,min:l,max:q,round:C,scale:w,scaleAndAdd:x,distance:c,squaredDistance:m,length:f,squaredLength:e,negate:d,inverse:h,normalize:F,dot:E,lerp:u,random:z,transformMat4:y,transformQuat:B,str:H,exactEquals:D,equals:M,sub:t,
mul:p,div:b,dist:c,sqrDist:m,len:f,sqrLen:e});a.add=v;a.ceil=k;a.copy=r;a.dist=c;a.distance=c;a.div=b;a.divide=b;a.dot=E;a.equals=M;a.exactEquals=D;a.floor=n;a.inverse=h;a.len=f;a.length=f;a.lerp=u;a.max=q;a.min=l;a.mul=p;a.multiply=p;a.negate=d;a.normalize=F;a.random=z;a.round=C;a.scale=w;a.scaleAndAdd=x;a.set=A;a.sqrDist=m;a.sqrLen=e;a.squaredDistance=m;a.squaredLength=e;a.str=H;a.sub=t;a.subtract=t;a.transformMat4=y;a.transformQuat=B;a.vec4=U})},"esri/views/3d/support/stack":function(){define(["exports",
"../../../core/VectorStack"],function(a,g){const r=g.VectorStack.createVec2f64(),A=g.VectorStack.createVec3f64(),v=g.VectorStack.createVec4f64(),t=g.VectorStack.createMat3f64(),p=g.VectorStack.createMat4f64();g=g.VectorStack.createQuatf64();a.sm3d=t;a.sm4d=p;a.sq4d=g;a.sv2d=r;a.sv3d=A;a.sv4d=v;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/core/VectorStack":function(){define("exports ../chunks/_rollupPluginBabelHelpers ./maybe ./nextTick ../chunks/vec3f64 ../chunks/mat3f64 ../chunks/mat4f64 ../chunks/quatf64 ../chunks/vec2f64 ../chunks/vec4f64".split(" "),
function(a,g,r,A,v,t,p,b,k,n){let l=function(){function q(w,x,c){this.itemByteSize=w;this.itemCreate=x;this.buffers=[];this.items=[];this.itemsPtr=this.itemsPerBuffer=0;this.itemsPerBuffer=Math.ceil(c/this.itemByteSize);this.tickHandle=A.before(()=>this.reset())}var C=q.prototype;C.destroy=function(){this.tickHandle&&(this.tickHandle.remove(),this.tickHandle=r.nullifyNonnullableForDispose(this.tickHandle));this.itemsPtr=0;this.items=r.nullifyNonnullableForDispose(this.items);this.buffers=r.nullifyNonnullableForDispose(this.buffers)};
C.get=function(){0===this.itemsPtr&&A(()=>{});const w=Math.floor(this.itemsPtr/this.itemsPerBuffer);for(;this.buffers.length<=w;){const x=new ArrayBuffer(this.itemsPerBuffer*this.itemByteSize);for(let c=0;c<this.itemsPerBuffer;++c)this.items.push(this.itemCreate(x,c*this.itemByteSize));this.buffers.push(x)}return this.items[this.itemsPtr++]};C.reset=function(){const w=2*(Math.floor(this.itemsPtr/this.itemsPerBuffer)+1);for(;this.buffers.length>w;)this.buffers.pop(),this.items.length=this.buffers.length*
this.itemsPerBuffer;this.itemsPtr=0};q.createVec2f64=function(w=4096){return new q(16,k.createView,w)};q.createVec3f64=function(w=4096){return new q(24,v.createView,w)};q.createVec4f64=function(w=4096){return new q(32,n.createView,w)};q.createMat3f64=function(w=4096){return new q(72,t.createView,w)};q.createMat4f64=function(w=4096){return new q(128,p.createView,w)};q.createQuatf64=function(w=4096){return new q(32,b.createView,w)};g._createClass(q,[{key:"test",get:function(){return{size:this.buffers.length*
this.itemsPerBuffer*this.itemByteSize}}}]);return q}();a.VectorStack=l;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/chunks/mat3f64":function(){define(["exports"],function(a){function g(){return[1,0,0,0,1,0,0,0,1]}function r(p){return[p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],p[8]]}function A(p,b,k,n,l,q,C,w,x){return[p,b,k,n,l,q,C,w,x]}function v(p,b){return new Float64Array(p,b,9)}var t=Object.freeze({__proto__:null,create:g,clone:r,fromValues:A,createView:v});a.clone=r;a.create=g;a.createView=
v;a.fromValues=A;a.mat3f64=t})},"esri/chunks/mat4f64":function(){define(["exports"],function(a){function g(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function r(b){return[b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9],b[10],b[11],b[12],b[13],b[14],b[15]]}function A(b,k,n,l,q,C,w,x,c,m,f,e,d,h,F,E){return[b,k,n,l,q,C,w,x,c,m,f,e,d,h,F,E]}function v(b,k){return new Float64Array(b,k,16)}const t=g();var p=Object.freeze({__proto__:null,create:g,clone:r,fromValues:A,createView:v,IDENTITY:t});a.IDENTITY=
t;a.clone=r;a.create=g;a.createView=v;a.fromValues=A;a.mat4f64=p})},"esri/chunks/quatf64":function(){define(["exports"],function(a){function g(){return[0,0,0,1]}function r(b){return[b[0],b[1],b[2],b[3]]}function A(b,k,n,l){return[b,k,n,l]}function v(b,k){return new Float64Array(b,k,4)}const t=g();var p=Object.freeze({__proto__:null,create:g,clone:r,fromValues:A,createView:v,IDENTITY:t});a.IDENTITY=t;a.clone=r;a.create=g;a.createView=v;a.fromValues=A;a.quatf64=p})},"esri/views/interactive/editGeometry/EditGeometry":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/Polygon ../../../geometry/Polyline ../../../geometry ../../../core/Evented ../coordinateHelper".split(" "),
function(a,g,r,A,v,t,p,b){let k=function(){function q(C){this.right=this.left=null;this.type="vertex";this.index=null;this.component=C}g._createClass(q,[{key:"pos",get:function(){return this._pos},set:function(C){this._pos=C;this.component.unnormalizeVertexPositions()}}]);return q}(),n=function(q,C,w){this.type="edge";this.component=q;this.left=C;this.right=w;C.right=this;w.left=this},l=function(){function q(w){this.vertices=[];this.edges=[];this.data=w}var C=q.prototype;C.unnormalizeVertexPositions=
function(){1>=this.vertices.length||this.data.coordinateHelper.unnormalize(this.vertices)};C.updateVertexIndex=function(w,x){if(0!==this.vertices.length){var c=this.vertices[0],m=null;do m=w,m.index=x++,w=m.right?m.right.right:null;while(null!=w&&w!==c);m.left&&m!==this.vertices[this.vertices.length-1]&&this.swapVertices(this.vertices.indexOf(m),this.vertices.length-1)}};C.getFirstVertex=function(){return 0===this.vertices.length?null:this.vertices[0]};C.getLastVertex=function(){return 0===this.vertices.length?
null:this.vertices[this.vertices.length-1]};C.swapVertices=function(w,x){const c=this.vertices[w];this.vertices[w]=this.vertices[x];this.vertices[x]=c};C.iterateVertices=function(w){if(0!==this.vertices.length){var x=this.vertices[0],c=x;do w(c,c.index),c=r.isSome(c.right)?c.right.right:null;while(c!==x&&null!=c)}};return q}();t=function(q){function C(x){var c=q.call(this)||this;c.coordinateHelper=x;c.undoStack=[];c.redoStack=[];c.components=[];return c}g._inheritsLoose(C,q);var w=C.prototype;w.apply=
function(x,c=1){if(0===c||r.isNone(this.lastOperation)||!this.lastOperation.accumulate(x))x.apply(),this.undoStack.push(x),this.redoStack=[]};w.undo=function(){if(0<this.undoStack.length){const x=this.undoStack.pop();x.undo();this.redoStack.push(x);return x}return null};w.redo=function(){if(0<this.redoStack.length){const x=this.redoStack.pop();x.apply();this.undoStack.push(x);return x}return null};w.toPoint=function(){return 0===this.components.length||0===this.components[0].vertices.length?null:
this.coordinateHelper.createPoint(this.components[0].vertices[0].pos)};w.toPolyline=function(){const x=[],c=this.coordinateHelper.toArray;this.components.forEach((m,f)=>{f=[];const e=m=m.vertices.find(d=>null==d.left);do f.push(c(m.pos)),m=m.right?m.right.right:null;while(m&&m!==e);x.push(f)});return new v({paths:x,spatialReference:this.coordinateHelper.spatialReference})};w.toPolygon=function(){const x=[],c=this.coordinateHelper.toArray;this.components.forEach((m,f)=>{f=[];let e=m=m.vertices[0];
const d=e;do f.push(c(e.pos)),e=r.isSome(e.right)?e.right.right:null;while(e&&e!==d);f.push(c(m.pos));x.push(f)});return new A({rings:x,spatialReference:this.coordinateHelper.spatialReference})};C.fromGeometry=function(x,c){var m=b.createCoordinateHelper(x.hasZ,x.hasM,x.spatialReference,c);c=new C(m);switch(x.type){case "polygon":var f=x.rings;for(x=0;x<f.length;++x){var e=f[x],d=new l(c),h=e.length-1;for(var F=0;F<h;++F){const E=m.fromArray(e[F]),u=new k(d);d.vertices.push(u);u.pos=E;u.index=F}e=
d.vertices.length-1;for(h=0;h<e;++h)F=new n(d,d.vertices[h],d.vertices[h+1]),d.edges.push(F);e=new n(d,d.vertices[d.vertices.length-1],d.vertices[0]);d.edges.push(e);c.components.push(d)}break;case "polyline":for(f of x.paths){x=new l(c);d=f.length;for(e=0;e<d;++e)h=m.fromArray(f[e]),F=new k(x),x.vertices.push(F),F.pos=h,F.index=e;d=x.vertices.length-1;for(e=0;e<d;++e)h=new n(x,x.vertices[e],x.vertices[e+1]),x.edges.push(h);c.components.push(x)}break;case "point":m=new l(c),f=new k(m),f.index=0,f.pos=
c.coordinateHelper.fromPoint(x),m.vertices.push(f),c.components.push(m)}return c};g._createClass(C,[{key:"canUndo",get:function(){return 0<this.undoStack.length}},{key:"lastOperation",get:function(){return 0<this.undoStack.length?this.undoStack[this.undoStack.length-1]:null}},{key:"canRedo",get:function(){return 0<this.redoStack.length}}]);return C}(p);a.Component=l;a.Edge=n;a.EditGeometry=t;a.Vertex=k;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/interactive/editGeometry/EditGeometryHelper":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/Evented ./EditGeometry ./operations/AppendVertex ./operations/UpdateVertices ./operations/RemoveVertices ./operations/SplitEdge ./operations/SetVertexPosition ./operations/MoveVertex ./operations/RotateVertex ./operations/ScaleVertex".split(" "),
function(a,g,r,A,v,t,p,b,k,n,l,q){r=function(C){function w(c,m){var f=C.call(this)||this;f.editGeometry=c;f.type=m;f._geometry=null;f._dirty=!0;f._listener=f.editGeometry.on("change",e=>{e.addedVertices&&f.emit("vertex-add",{type:"vertex-add",vertices:e.addedVertices,operation:e.operation});e.removedVertices&&f.emit("vertex-remove",{type:"vertex-remove",vertices:e.removedVertices,operation:e.operation});e.updatedVertices&&f.emit("vertex-update",{type:"vertex-update",vertices:e.updatedVertices,operation:e.operation});
f._dirty=!0});return f}g._inheritsLoose(w,C);var x=w.prototype;x.destroy=function(){this._listener.remove()};x.splitEdge=function(c,m){c=new b.SplitEdge(this.editGeometry,c,m);this.editGeometry.apply(c);return c};x.updateVertices=function(c,m,f=1){c=new t.UpdateVertices(this.editGeometry,c,m);this.editGeometry.apply(c,f);return c};x.moveVertices=function(c,m,f,e,d=1){return this.updateVertices(c,new n.MoveVertex(this.editGeometry.coordinateHelper,m,f,e),d)};x.scaleVertices=function(c,m,f,e,d,h=1,
F=0){return this.updateVertices(c,new q.ScaleVertex(this.editGeometry.coordinateHelper,m,f,e,d,F),h)};x.rotateVertices=function(c,m,f,e=1,d=0){return this.updateVertices(c,new l.RotateVertex(this.editGeometry.coordinateHelper,m,f,d),e)};x.removeVertices=function(c){let m=0;switch(this.type){case "point":m=1;break;case "polyline":m=2;break;case "polygon":m=3}c=new p.RemoveVertices(this.editGeometry,c,m);this.editGeometry.apply(c);return c};x.appendVertex=function(c){if(0===this.editGeometry.components.length)return null;
c=new v.AppendVertex(this.editGeometry,this.editGeometry.components[0],c);this.editGeometry.apply(c);return c};x.canRemoveVertex=function(){let c=0;switch(this.type){case "point":c=1;break;case "polyline":c=2;break;case "polygon":c=3}return this.editGeometry.components[0].vertices.length>c};x.undo=function(){return this.editGeometry.undo()};x.redo=function(){return this.editGeometry.redo()};g._createClass(w,[{key:"canUndo",get:function(){return this.editGeometry.canUndo}},{key:"canRedo",get:function(){return this.editGeometry.canRedo}},
{key:"geometry",get:function(){if(this._dirty){switch(this.type){case "point":this._geometry=this.editGeometry.toPoint();break;case "polyline":this._geometry=this.editGeometry.toPolyline();break;case "polygon":this._geometry=this.editGeometry.toPolygon()}this._dirty=!1}return this._geometry}}]);return w}(r);a.Component=A.Component;a.Edge=A.Edge;a.EditGeometry=A.EditGeometry;a.Vertex=A.Vertex;a.EditGeometryHelper=r;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/interactive/editGeometry/operations/AppendVertex":function(){define(["exports",
"../../../../core/maybe","../EditGeometry"],function(a,g,r){let A=function(){function v(p,b,k){this.editGeometry=p;this.component=b;this.pos=k;this.right=this.left=this.originalEdge=this.addedVertex=null}var t=v.prototype;t.apply=function(){let p="redo";g.isNone(this.addedVertex)&&(p="apply",this.addedVertex=new r.Vertex(this.component));if(0===this.component.vertices.length)this.component.vertices.push(this.addedVertex),this.addedVertex.pos=this.pos,this.addedVertex.index=0;else{const b=g.unwrap(this.component.getLastVertex());
let k=null;b.right&&(this.originalEdge=b.right,k=this.originalEdge.right,this.component.edges.splice(this.component.edges.indexOf(this.originalEdge),1));this.component.vertices.push(this.addedVertex);this.addedVertex.pos=this.pos;g.isNone(this.left)&&(this.left=new r.Edge(this.component,b,this.addedVertex));this.component.edges.push(this.left);b.right=this.left;g.isSome(this.originalEdge)&&g.isSome(k)&&(g.isNone(this.right)&&(this.right=new r.Edge(this.component,this.addedVertex,k)),this.component.edges.push(this.right),
k.left=this.right);this.component.updateVertexIndex(this.addedVertex,b.index+1)}this.editGeometry.emit("change",{addedVertices:[this.addedVertex],operation:p})};t.undo=function(){if(g.isNone(this.addedVertex))return null;this.component.vertices.splice(this.component.vertices.indexOf(this.addedVertex),1);g.isSome(this.left)&&(this.component.edges.splice(this.component.edges.indexOf(this.left),1),this.left.left.right=null);g.isSome(this.right)&&(this.component.edges.splice(this.component.edges.indexOf(this.right),
1),this.right.right.left=null);g.isSome(this.originalEdge)&&(this.component.edges.push(this.originalEdge),this.originalEdge.left.right=this.originalEdge,this.originalEdge.right.left=this.originalEdge);g.isSome(this.left)?this.component.updateVertexIndex(this.left.left,this.left.left.index):this.component.updateVertexIndex(this.addedVertex,0);this.editGeometry.emit("change",{removedVertices:[this.addedVertex],operation:"undo"})};t.accumulate=function(p){return!1};return v}();a.AppendVertex=A;Object.defineProperty(a,
"__esModule",{value:!0})})},"esri/views/interactive/editGeometry/operations/UpdateVertices":function(){define(["exports"],function(a){let g=function(){function r(v,t,p){this.editGeometry=v;this.vertices=t;this.operation=p;this.undone=!1}var A=r.prototype;A.apply=function(){this.vertices.forEach(v=>this.operation.apply(v));this.editGeometry.components.forEach(v=>v.unnormalizeVertexPositions());this.editGeometry.emit("change",{updatedVertices:this.vertices,operation:this.undone?"redo":"apply"})};A.undo=
function(){this.vertices.forEach(v=>{this.operation.undo(v)});this.editGeometry.emit("change",{updatedVertices:this.vertices,operation:"undo"});this.undone=!0};A.canAccumulate=function(v){if(this.undone||v.vertices.length!==this.vertices.length)return!1;for(let t=0;t<v.vertices.length;++t)if(v.vertices[t]!==this.vertices[t])return!1;return this.operation.canAccumulate(v.operation)};A.accumulate=function(v){return v instanceof r&&this.canAccumulate(v)?(this.vertices.forEach(t=>this.operation.accumulate(t,
v.operation)),this.operation.accumulateParams(v.operation),this.editGeometry.components.forEach(t=>t.unnormalizeVertexPositions()),this.editGeometry.emit("change",{updatedVertices:this.vertices,operation:"apply"}),!0):!1};return r}();a.PerVertexOperation=function(r){this.helper=r};a.UpdateVertices=g;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/interactive/editGeometry/operations/RemoveVertices":function(){define(["exports","../../../../core/maybe","../EditGeometry"],function(a,
g,r){let A=function(){function v(p,b,k=0){this.editGeometry=p;this.removedVertices=null;this._minNumberOfVertices=0;this.vertices=b;this._minNumberOfVertices=k}var t=v.prototype;t.apply=function(){let p="redo";null==this.removedVertices?(this.removedVertices=[],this.vertices.forEach(b=>{b=this._removeVertex(b);g.isSome(b)&&this.removedVertices.push(b)}),p="apply"):this.removedVertices.forEach(b=>{this._redoRemoveVertex(b)});this.editGeometry.emit("change",{removedVertices:this.vertices,operation:p})};
t.undo=function(){this.removedVertices.forEach(p=>{this._undoRemoveVertex(p)});this.editGeometry.emit("change",{addedVertices:this.vertices,operation:"undo"})};t.accumulate=function(p){return!1};t._removeVertex=function(p){const b=p.component;if(b.vertices.length<=this._minNumberOfVertices)return null;const k={removedVertex:p,createdEdge:null},n=p.left,l=p.right;b.vertices.splice(b.vertices.indexOf(p),1);n&&(b.edges.splice(b.edges.indexOf(n),1),n.left.right=null);l&&(b.edges.splice(b.edges.indexOf(l),
1),l.right.left=null);0===p.index&&l&&0<this.vertices.length&&b.swapVertices(b.vertices.indexOf(l.right),0);n&&l&&(k.createdEdge=new r.Edge(b,n.left,l.right),b.edges.push(k.createdEdge));l&&b.updateVertexIndex(l.right,l.right.index-1);return k};t._redoRemoveVertex=function(p){console.warn("redo remove vertex not implemented yet")};t._undoRemoveVertex=function(p){const b=p.removedVertex,k=p.removedVertex.component,n=b.left,l=b.right;p.createdEdge&&k.edges.splice(k.edges.indexOf(p.createdEdge),1);k.vertices.push(b);
n&&(k.edges.push(n),n.left.right=n);l&&(k.edges.push(l),l.right.left=l);k.updateVertexIndex(b,b.index)};return v}();a.RemoveVertices=A;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/interactive/editGeometry/operations/SplitEdge":function(){define(["exports","../../../../core/maybe","../EditGeometry"],function(a,g,r){let A=function(){function v(p,b,k){this.editGeometry=p;this.edge=b;this.t=k;this.right=this.left=this.createdVertex=null}var t=v.prototype;t.apply=function(){let p="redo";
const b=this.edge,k=b.component,n=b.component.data,l=b.left,q=b.right;k.edges.splice(k.edges.indexOf(b),1);g.isNone(this.createdVertex)&&(p="apply",this.createdVertex=new r.Vertex(b.component));k.vertices.push(this.createdVertex);this.createdVertex.pos=n.coordinateHelper.lerp(b.left.pos,b.right.pos,this.t,n.coordinateHelper.createNew());g.isNone(this.left)&&(this.left=new r.Edge(k,l,this.createdVertex));this.left.left.left?k.edges.push(this.left):k.edges.unshift(this.left);l.right=this.left;g.isNone(this.right)&&
(this.right=new r.Edge(k,this.createdVertex,q));k.edges.push(this.right);q.left=this.right;k.updateVertexIndex(this.createdVertex,l.index+1);this.editGeometry.emit("change",{addedVertices:[this.createdVertex],operation:p})};t.undo=function(){if(g.isNone(this.createdVertex)||g.isNone(this.left)||g.isNone(this.right))return null;const p=this.edge,b=p.component,k=this.createdVertex.left.left,n=this.createdVertex.right.right;b.vertices.splice(b.vertices.indexOf(this.createdVertex),1);b.edges.splice(b.edges.indexOf(this.left),
1);b.edges.splice(b.edges.indexOf(this.right),1);this.edge.left.left?b.edges.push(this.edge):b.edges.unshift(this.edge);k.right=p;n.left=p;b.updateVertexIndex(k,k.index);this.editGeometry.emit("change",{removedVertices:[this.createdVertex],operation:"undo"})};t.accumulate=function(p){return!1};return v}();a.SplitEdge=A;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/interactive/editGeometry/operations/SetVertexPosition":function(){define(["exports","../../../../core/maybe"],function(a,
g){let r=function(){function A(t,p,b){this.editGeometry=t;this.vertex=p;this.pos=b}var v=A.prototype;v.apply=function(){let t="redo";g.isNone(this.originalPosition)&&(t="apply",this.originalPosition=this.vertex.pos);this._apply(t)};v.undo=function(){this.vertex.pos=g.unwrap(this.originalPosition);this.editGeometry.emit("change",{updatedVertices:[this.vertex],operation:"undo"})};v.accumulate=function(t){return t instanceof A&&t.vertex===this.vertex?(this.pos=t.pos,this._apply("apply"),!0):!1};v._apply=
function(t){this.vertex.pos=this.pos;this.editGeometry.components.forEach(p=>p.unnormalizeVertexPositions());this.editGeometry.emit("change",{updatedVertices:[this.vertex],operation:t})};return A}();a.SetVertexPosition=r;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/interactive/editGeometry/operations/MoveVertex":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","./UpdateVertices"],function(a,g,r){r=function(A){function v(p,b,k,n){p=A.call(this,p)||this;
p.dx=b;p.dy=k;p.dz=n;return p}g._inheritsLoose(v,A);var t=v.prototype;t.move=function(p,b,k,n){this.helper.addDelta(p.pos,b,k,n)};t.apply=function(p){this.move(p,this.dx,this.dy,this.dz)};t.undo=function(p){this.move(p,-this.dx,-this.dy,-this.dz)};t.canAccumulate=function(p){return p instanceof v};t.accumulate=function(p,b){this.move(p,b.dx,b.dy,b.dz)};t.accumulateParams=function(p){this.dx+=p.dx;this.dy+=p.dy;this.dz+=p.dz};return v}(r.PerVertexOperation);a.MoveVertex=r;Object.defineProperty(a,"__esModule",
{value:!0})})},"esri/views/interactive/editGeometry/operations/RotateVertex":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../core/arrayUtils","./UpdateVertices"],function(a,g,r,A){A=function(v){function t(b,k,n,l=0){b=v.call(this,b)||this;b.origin=k;b.angle=n;b.accumulationType=l;return b}g._inheritsLoose(t,v);var p=t.prototype;p.rotate=function(b,k){this.helper.rotate(b.pos,this.origin,k)};p.apply=function(b){this.rotate(b,this.angle)};p.undo=function(b){this.rotate(b,
-this.angle)};p.canAccumulate=function(b){return b instanceof t&&r.equals(this.origin,b.origin)};p.accumulate=function(b,k){this.rotate(b,1===k.accumulationType?k.angle-this.angle:k.angle)};p.accumulateParams=function(b){this.angle=1===b.accumulationType?b.angle:this.angle+b.angle};return t}(A.PerVertexOperation);a.RotateVertex=A;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/interactive/editGeometry/operations/ScaleVertex":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/arrayUtils ../../../../chunks/vec2f64 ../../../../chunks/vec2 ./UpdateVertices".split(" "),
function(a,g,r,A,v,t){t=function(p){function b(n,l,q,C,w,x=0){n=p.call(this,n)||this;n.origin=l;n.axis1=q;n.factor1=C;n.factor2=w;n.accumulationType=x;n.axis2=v.set(A.create(),q[1],-q[0]);return n}g._inheritsLoose(b,p);var k=b.prototype;k.scale=function(n,l,q){this.helper.scale(n.pos,this.origin,this.axis1,l);this.helper.scale(n.pos,this.origin,this.axis2,q)};k.apply=function(n){this.scale(n,this.factor1,this.factor2)};k.undo=function(n){this.scale(n,1/this.factor1,1/this.factor2)};k.canAccumulate=
function(n){return n instanceof b&&r.equals(this.origin,n.origin)&&r.equals(this.axis1,n.axis1)};k.accumulate=function(n,l){1===l.accumulationType?this.scale(n,l.factor1/this.factor1,l.factor2/this.factor2):this.scale(n,l.factor1,l.factor2)};k.accumulateParams=function(n){const l=1===n.accumulationType;this.factor1=l?n.factor1:this.factor1*n.factor1;this.factor2=l?n.factor2:this.factor2*n.factor2};return b}(t.PerVertexOperation);a.ScaleVertex=t;Object.defineProperty(a,"__esModule",{value:!0})})},
"esri/views/interactive/snapping/SnappingContext":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers"],function(a,g){let r=function(){function A(v){this.visualizer=this.excludeFeature=this.vertexHandle=null;this.geometry=v.geometry;this.elevationInfo=v.elevationInfo;this.pointer=v.pointer;this.vertexHandle=v.vertexHandle;this.excludeFeature=v.excludeFeature;this.visualizer=v.visualizer}g._createClass(A,[{key:"coordinateHelper",get:function(){return this.geometry.editGeometry.coordinateHelper}}]);
return A}();a.SnappingContext=r;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/draw/input/DrawEvents":function(){define(["exports"],function(a){let g=function(){function p(b,k,n,l){this.view=b;this.native=k;this.vertexIndex=n;this.vertices=l;this.defaultPrevented=!1;this.type="vertex-add"}p.prototype.preventDefault=function(){this.defaultPrevented=!0};return p}(),r=function(){function p(b,k,n,l){this.view=b;this.native=k;this.vertexIndex=n;this.vertices=l;this.defaultPrevented=!1;
this.type="vertex-update"}p.prototype.preventDefault=function(){this.defaultPrevented=!0};return p}(),A=function(){function p(b,k,n,l){this.view=b;this.native=k;this.vertexIndex=n;this.vertices=l;this.defaultPrevented=!1;this.type="vertex-remove"}p.prototype.preventDefault=function(){this.defaultPrevented=!0};return p}(),v=function(){function p(b,k,n,l,q=null){this.view=b;this.native=k;this.vertexIndex=n;this.vertices=l;this.mapPoint=q;this.coordinates=null;this.defaultPrevented=!1;this.type="cursor-update";
this.coordinates=1===l.length?l[0]:null}p.prototype.preventDefault=function(){this.defaultPrevented=!0};return p}(),t=function(){function p(b,k){this.native=b;this.vertices=k;this.coordinates=null;this.defaultPrevented=!1;this.type="draw-complete";this.coordinates=1===k.length?k[0]:null}p.prototype.preventDefault=function(){this.defaultPrevented=!0};return p}();a.CursorUpdateEvent=v;a.DrawCompleteEvent=t;a.VertexAddEvent=g;a.VertexRemoveEvent=A;a.VertexUpdateEvent=r;Object.defineProperty(a,"__esModule",
{value:!0})})},"esri/views/draw/input/Keys":function(){define(["exports"],function(a){a.KEYS={drawCompleteKey:"c",redoKey:"r",undoKey:"z",vertexAddKey:"f",panKey:" "};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/draw/PointDrawAction":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/maybe ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/deprecate ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../geometry/Point ../../geometry ../../core/Handles ../input/InputManager ../support/screenUtils ./DrawAction ./input/DrawEvents ./input/Keys ../3d/interactive/editingTools/draw/DrawTool".split(" "),
function(a,g,r,A,v,t,p,b,k,n,l,q,C,w,x,c,m,f,e,d,h,F,E){a.PointDrawAction=function(u){function z(B){B=u.call(this,B)||this;B._cursorScreenPoint=null;B._addVertexOnPointerUp=!1;B._activePointerId=null;B._viewHandles=new m;return B}g._inheritsLoose(z,u);var y=z.prototype;y.initialize=function(){"2d"===this.view.type?this._addViewHandles():this._addDrawTool(this.view)};y.destroy=function(){"2d"===this.view.type?(this._removeViewHandles(),this._viewHandles.destroy()):this._removeDrawTool();this.emit("destroy")};
y.complete=function(){"2d"===this.view.type?this._cursorScreenPoint&&this._completeDrawing():this._drawTool.completeCreateOperation()};y._addViewHandles=function(){this._removeViewHandles();this._viewHandles.add([this.view.on("pointer-down",B=>{this._shouldHandlePointerEvent(B)&&(this._snappingTask=v.abortMaybe(this._snappingTask),this._activePointerId=B.pointerId,this._addVertexOnPointerUp=!0,this._cursorScreenPoint=e.createScreenPointFromEvent(B),"touch"===B.pointerType&&this._updateCursor(B.native))},
f.ViewEventPriorities.TOOL),this.view.on("pointer-move",B=>{this._snappingTask=v.abortMaybe(this._snappingTask);this._cursorScreenPoint=e.createScreenPointFromEvent(B);"touch"!==B.pointerType&&this._updateCursor(B.native)},f.ViewEventPriorities.TOOL),this.view.on("pointer-drag",B=>{this._shouldHandlePointerEvent(B)&&(this._snappingTask=v.abortMaybe(this._snappingTask),this._addVertexOnPointerUp=!1)},f.ViewEventPriorities.TOOL),this.view.on("pointer-up",B=>{this._shouldHandlePointerEvent(B)&&(this._snappingTask=
v.abortMaybe(this._snappingTask),this._activePointerId=null,this._addVertexOnPointerUp?(B.stopPropagation(),this._vertexAddHandler()):this._updateCursor(B.native,"touch"===B.pointerType))},f.ViewEventPriorities.TOOL),this.view.on("drag",["Shift"],B=>{B.stopPropagation()},f.ViewEventPriorities.TOOL),this.view.on("key-down",B=>{B.key===F.KEYS.drawCompleteKey&&this._cursorScreenPoint&&(this._snappingTask=v.abortMaybe(this._snappingTask),this._vertexAddHandler())},f.ViewEventPriorities.TOOL)])};y._removeViewHandles=
function(){this._viewHandles.removeAll()};y._addDrawTool=function(B){this._drawTool=new E.DrawTool({view:B,elevationInfo:this.elevationInfo,hasZ:this.hasZ,geometryType:"point",mode:"click"});this.view.toolViewManager.tools.push(this._drawTool);this.view.activeTool=this._drawTool;this._drawTool.on("cursor-update",H=>{1===H.vertices.length&&this.emit("cursor-update",new h.CursorUpdateEvent(this.view,null,H.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))});this._drawTool.on("complete",H=>
{this.emit("draw-complete",new h.DrawCompleteEvent(null,this._drawTool.getVertexCoords()));this._removeDrawTool()})};y._removeDrawTool=function(){v.isSome(this._drawTool)&&(this.view.tools.remove(this._drawTool),this._drawTool.destroy(),this._drawTool=null)};y._addVertex=function(B){B=this._coordinateHelper.fromArray(B);this._isDuplicateOfLastVertex(B)||(this._lastVertexUnsnapped=this._stagedVertexUnsnapped,this._popCursorVertex(),this._editGeometry.appendVertex(B),this.notifyChange("vertices"))};
y._updateCursor=function(B,H=!1){this._popCursorVertex();if(this._cursorScreenPoint){var D=this.getCoordsAndPointFromScreenPoint(this._cursorScreenPoint);if(v.isSome(D)&&!H){this._pushCursorVertex(D.vertex);const M=()=>new h.CursorUpdateEvent(this.view,B,this._activeComponent.vertices.length,this.vertices,v.isSome(this._stagedVertex)?new x(this._stagedVertex):null);this.emit("cursor-update",M());v.isSome(this._snappingTask)&&this._snappingTask.promise.then(U=>{U.valid&&this.emit("cursor-update",M())},
()=>{})}}};y._completeDrawing=function(B){this._activePointerId=null;this._popCursorVertex();this._snappingTask=v.abortMaybe(this._snappingTask);v.isSome(this._snappingManager)&&this._snappingManager.doneSnapping();B=new h.DrawCompleteEvent(B,this.vertices);this.emit("draw-complete",B);B.defaultPrevented||this._removeViewHandles()};y._shouldHandlePointerEvent=function(B){return("mouse"!==B.pointerType||0===B.button)&&(v.isNone(this._activePointerId)||this._activePointerId===B.pointerId)};y._vertexAddHandler=
function(){const B=v.isSome(this._stagedVertex)?this._coordinateHelper.pointToArray(this._stagedVertex):this.getCoordsFromScreenPoint(this._cursorScreenPoint);v.isSome(B)&&(this._addVertex(B),this._completeDrawing())};g._createClass(z,[{key:"coordinates",get:function(){k.deprecatedProperty(t.getLogger("esri.views.draw.PointDrawAction"),"coordinates",{replacement:"vertices",version:"4.19"});return this.vertices[0]}}]);return z}(d);r.__decorate([b.property({readOnly:!0})],a.PointDrawAction.prototype,
"coordinates",null);a.PointDrawAction=r.__decorate([l.subclass("esri.views.draw.PointDrawAction")],a.PointDrawAction);Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/interactive/editingTools/draw/DrawTool":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/has ../../../../../core/maybe ../../../../../core/Logger ../../../../../core/accessorSupport/ensureType ../../../../../core/accessorSupport/decorators/property ../../../../../core/jsonMap ../../../../../core/accessorSupport/decorators/subclass ../../../../../core/urlUtils ../../../../../core/uuid ../../../../../portal/support/resourceExtension ../../../../../core/Evented ./DrawOperation ./drawSurfaces ../../../../interactive/InteractiveToolBase".split(" "),
function(a,g,r,A,v,t,p,b,k,n,l,q,C,w,x,c,m){a.DrawTool=function(f){function e(h){h=f.call(this,h)||this;h.drawOperation=null;h.hasZ=!0;h.defaultZ=0;h.elevationInfo=null;h.snapToScene=null;h.mode=null;h.geometryType=null;h.type="draw-3d";return h}g._inheritsLoose(e,f);var d=e.prototype;d.initialize=function(){const h=v.unwrapOr(this.elevationInfo,{mode:this.hasZ?"absolute-height":"on-the-ground",offset:0});this.drawOperation=new x.DrawOperation({view:this.view,manipulators:this.manipulators,geometryType:this.geometryType,
drawingMode:this.mode,hasZ:this.hasZ,defaultZ:this.defaultZ,snapToSceneEnabled:this.snapToScene,snappingDrawSurface:new c.SceneDrawSurface(this.view,h),elevationDrawSurface:new c.ElevationDrawSurface(h,this.defaultZ,this.view),hasM:!1,elevationInfo:h});this.drawOperation.on("vertex-add",F=>this.onVertexAdd(F));this.drawOperation.on("vertex-remove",F=>this.onVertexRemove(F));this.drawOperation.on("vertex-update",F=>this.onVertexUpdate(F));this.drawOperation.on("cursor-update",F=>this.onCursorUpdate(F));
this.drawOperation.on("complete",F=>this.onComplete(F))};d.destroy=function(){this.drawOperation.destroy();this.drawOperation=null;this._set("view",null)};d.onInputEvent=function(h){this.drawOperation.onInputEvent(h)};d.reset=function(){};d.redo=function(){this.drawOperation.redo()};d.undo=function(){this.drawOperation.undo()};d.completeCreateOperation=function(){this.drawOperation.complete()};d.activate=function(){};d.deactivate=function(){this.drawOperation.isCompleted||this.drawOperation.cancel()};
d.getVertexCoords=function(){return this.drawOperation.vertices};d.onVertexAdd=function(h){this.emit("vertex-add",h)};d.onVertexRemove=function(h){this.emit("vertex-remove",h)};d.onVertexUpdate=function(h){this.emit("vertex-update",h)};d.onCursorUpdate=function(h){this.emit("cursor-update",h)};d.onComplete=function(h){this.emit("complete",h)};g._createClass(e,[{key:"enabled",set:function(h){this.drawOperation.interactive=h;this._set("enabled",h)}},{key:"canRedo",get:function(){return this.drawOperation.canRedo}},
{key:"canUndo",get:function(){return this.drawOperation.canUndo}}]);return e}(w.EventedMixin(m.InteractiveToolBase));r.__decorate([b.property({constructOnly:!0,nonNullable:!0})],a.DrawTool.prototype,"view",void 0);r.__decorate([b.property({value:!0})],a.DrawTool.prototype,"enabled",null);r.__decorate([b.property({constructOnly:!0})],a.DrawTool.prototype,"hasZ",void 0);r.__decorate([b.property({constructOnly:!0,nonNullable:!0})],a.DrawTool.prototype,"defaultZ",void 0);r.__decorate([b.property({constructOnly:!0})],
a.DrawTool.prototype,"elevationInfo",void 0);r.__decorate([b.property()],a.DrawTool.prototype,"snapToScene",void 0);r.__decorate([b.property({constructOnly:!0})],a.DrawTool.prototype,"mode",void 0);r.__decorate([b.property({constructOnly:!0})],a.DrawTool.prototype,"geometryType",void 0);r.__decorate([b.property({readOnly:!0})],a.DrawTool.prototype,"type",void 0);a.DrawTool=r.__decorate([n.subclass("esri.views.3d.interactive.editingTools.draw.DrawTool")],a.DrawTool);Object.defineProperty(a,"__esModule",
{value:!0})})},"esri/views/3d/interactive/editingTools/draw/DrawOperation":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/has ../../../../../core/lang ../../../../../core/maybe ../../../../../core/Logger ../../../../../core/accessorSupport/ensureType ../../../../../core/accessorSupport/decorators/property ../../../../../core/jsonMap ../../../../../core/accessorSupport/decorators/subclass ../../../../../core/urlUtils ../../../../../core/uuid ../../../../../portal/support/resourceExtension ../../../../../core/promiseUtils ../../../../../geometry/Point ../../../../../geometry ../../../../../core/Evented ../../../../../core/screenUtils ../../../../../core/Handles ../../../../support/Scheduler ../../../../../layers/graphics/dehydratedFeatureComparison ../../../../interactive/coordinateHelper ../../../../interactive/editGeometry/EditGeometry ../../../../interactive/editGeometry/EditGeometryHelper ../../../../interactive/snapping/SnappingContext ../../../../interactive/dragEventPipeline ../../SnappingDragPipelineStep ../../SnappingVisualizer3D ./DrawManipulator ../../../../draw/DrawingMode".split(" "),
function(a,g,r,A,v,t,p,b,k,n,l,q,C,w,x,c,m,f,e,d,h,F,E,u,z,y,B,H,D,M,U){a.DrawOperation=function(J){function L(V){var T,W;var Q=J.call(this)||this;Q._manipulator=null;Q._stagedVertex=null;Q.geometryType=null;Q.elevationInfo=null;Q.snapToSceneEnabled=null;Q._handles=new d;Q._defaultZ=0;Q._elevationDrawSurface=null;Q._snappingDrawSurface=null;Q._snappingManager=null;Q._snappingPipeline=new H.SnappingPipeline;Q._createOperationCompleted=!1;Q._pointerDownStates=new Set;Q._snappingTask=null;Q.view=V.view;
Q.drawingMode=t.unwrapOr(V.drawingMode,U.defaultDrawingMode);Q.geometryType=V.geometryType;Q.elevationInfo=V.elevationInfo;Q.coordinateHelper=E.createCoordinateHelper(V.hasZ,V.hasM,Q.view.spatialReference,Q.view.viewingMode);Q._defaultZ=V.defaultZ;Q.snapToSceneEnabled=V.snapToSceneEnabled;Q._snappingDrawSurface=t.unwrap(V.snappingDrawSurface);Q._snappingManager=V.snappingManager;const Z=null==(T=V.view)?void 0:null==(W=T.resourceController)?void 0:W.scheduler;Q._frameTask=Z?Z.registerTask(h.Task.SNAPPING,
O=>Q._frameTask.processQueue(O),()=>!1):h.ImmediateTask;Q._elevationDrawSurface=V.elevationDrawSurface;Q._editGeometry=new z.EditGeometryHelper(new u.EditGeometry(Q.coordinateHelper),"segment"===Q.geometryType?"polyline":Q.geometryType);Q._activeComponent=new u.Component(Q._editGeometry.editGeometry);Q._editGeometry.editGeometry.components.push(Q._activeComponent);Q._editGeometry.on(["vertex-add","vertex-update","vertex-remove"],O=>{const P=O.vertices.map(Y=>({componentIndex:0,vertexIndex:Y.index,
coordinates:Q.coordinateHelper.toArray(Y.pos)})),S=P.map(Y=>Y.coordinates);switch(O.type){case "vertex-add":Q.emit(O.type,{...O,added:S,vertices:P});break;case "vertex-update":Q.emit(O.type,{...O,updated:S,vertices:P});break;case "vertex-remove":Q.emit(O.type,{...O,removed:S,vertices:P})}});Q._manipulator=new M.DrawManipulator({grabbableForEvent:O=>"click"!==Q.drawingMode?!0:"touch"===O.pointerType&&Q._snappingEnabled&&1===Q._pointerDownStates.size});V.manipulators.add(Q._manipulator);Q._manipulator.grabbable=
"point"!==Q.geometryType;V=Q.createManipulatorDragPipeline(Q._manipulator);T=Q._manipulator.events.on("immediate-double-click",O=>{Q._manipulator.dragging||"point"===Q.geometryType||(Q.complete(),O.stopPropagation())});W=Q._manipulator.events.on("immediate-click",O=>{if(!Q._manipulator.dragging){var P=Q._activeComponent,S=Q._closeOnClickVertexIndex(O.screenPoint);if(t.isSome(S))Q.discardStagedVertex(),Q.complete();else if(S=Q._screenToMap(O.screenPoint),t.isSome(S))switch(Q.drawingMode){case "click":case "hybrid":Q._snappingTask=
t.abortMaybe(Q._snappingTask),Q.hasStagedVertex?Q.commitStagedVertex():Q._editGeometry.appendVertex(Q.coordinateHelper.fromPoint(S)),("point"===Q.geometryType||"segment"===Q.geometryType&&2===P.vertices.length||"segment"===Q.geometryType&&"hybrid"===Q.drawingMode&&1===P.vertices.length)&&Q.complete()}O.stopPropagation()}});Q._handles.add([V,W,T]);return Q}g._inheritsLoose(L,J);var N=L.prototype;N.createManipulatorDragPipeline=function(V){switch(this.drawingMode){case "click":return this.createManipulatorDragPipelineClick(V);
case "freehand":return this.createManipulatorDragPipelineFreehand(V);case "hybrid":return this.createManipulatorDragPipelineHybrid(V)}};N.createManipulatorDragPipelineClick=function(V){return B.createManipulatorDragEventPipeline(V,(T,W,Q,Z)=>{const O="touch"===Z&&this._snappingEnabled;!this.isCompleted&&O&&(W.next(this._screenToMapDragEventStep()).next(P=>{"start"===P.action&&(this.stagedVertex=P.mapStart,("segment"===this.geometryType||O&&0===this.vertices.length)&&this.commitStagedVertex());return P}).next(this._snappingPipeline.createSnapDragEventPipelineStep({predicate:()=>
O,cancel:Q,snappingManager:this._snappingManager,snappingContext:new y.SnappingContext({geometry:this._editGeometry,elevationInfo:this.elevationInfo,pointer:Z,visualizer:new D.SnappingVisualizer3D})}),this._snappingPipeline.next).next(P=>{O&&(this.stagedVertex=P.mapEnd,"end"===P.action&&this.commitStagedVertex());return P}).next(P=>{"end"!==P.action||"segment"!==this.geometryType&&"point"!==this.geometryType||this.complete();return P}),Q.next(()=>{O&&t.isSome(this._snappingManager)&&this._snappingManager.doneSnapping()}))})};
N.createManipulatorDragPipelineFreehand=function(V){return B.createManipulatorDragEventPipeline(V,(T,W)=>{this.isCompleted||W.next(this._screenToMapDragEventStep()).next(Q=>{"start"===Q.action&&(this.stagedVertex=Q.mapStart,"segment"===this.geometryType&&this.commitStagedVertex());return Q}).next(Q=>{switch(Q.action){case "start":case "update":this.stagedVertex=Q.mapEnd;"polygon"!==this.geometryType&&"polyline"!==this.geometryType||this.commitStagedVertex();break;case "end":this.complete()}return Q})})};
N.createManipulatorDragPipelineHybrid=function(V){return B.createManipulatorDragEventPipeline(V,(T,W)=>{this.isCompleted||W.next(this._screenToMapDragEventStep()).next(Q=>{"start"===Q.action&&(this.stagedVertex=Q.mapStart,this.commitStagedVertex());return Q}).next(Q=>{switch(Q.action){case "start":case "update":this.stagedVertex=Q.mapEnd;"polygon"!==this.geometryType&&"polyline"!==this.geometryType||this.commitStagedVertex();break;case "end":"segment"!==this.geometryType&&"point"!==this.geometryType||
this.complete()}return Q})})};N.destroy=function(){this._handles.destroy();this._handles=null;this._editGeometry.destroy();this._frameTask.remove()};N.onInputEvent=function(V){switch(V.type){case "pointer-down":this._pointerDownStates.add(V.pointerId);break;case "pointer-up":this._pointerDownStates.delete(V.pointerId)}switch(V.type){case "pointer-move":return this._onPointerMove(V);case "hold":return this._onHold(V)}};N.redo=function(){this._editGeometry.redo()};N.undo=function(){t.isSome(this._snappingManager)&&
this._snappingManager.doneSnapping();this._editGeometry.undo()};N.complete=function(V=!1){t.abortMaybe(this._snappingTask);this.commitStagedVertex();this._createOperationCompleted=!0;t.isSome(this._snappingManager)&&this._snappingManager.doneSnapping();this.emit("complete",{vertices:this.vertices.map((T,W)=>({componentIndex:0,vertexIndex:W,coordinates:T})),aborted:V,type:"complete"})};N.cancel=function(){this.complete(!0)};N.commitStagedVertex=function(){this._snappingTask=t.abortMaybe(this._snappingTask);
if(t.isSome(this._stagedVertex)){const V=this._stagedVertex;this._stagedVertex=null;this._editGeometry.appendVertex(this.coordinateHelper.fromPoint(V))}};N.discardStagedVertex=function(){this._stagedVertex=null};N._onPointerMove=function(V){t.abortMaybe(this._snappingTask);if(!(this._manipulator.dragging||this._pointerDownStates.has(V.pointerId)||this._manipulator.grabbing)&&this._manipulator.interactive){var T=e.createScreenPoint(V.x,V.y),W=this._closeOnClickVertexIndex(T);if(t.isSome(W))this.discardStagedVertex(),
T={componentIndex:0,vertexIndex:W,coordinates:this.coordinateHelper.toArray(this._activeComponent.vertices[W].pos)},this.emit("cursor-update",{updated:null,vertices:[T],operation:"apply",type:"vertex-update"});else{const Q=this._screenToMap(T);this._manipulator.cursor=t.isSome(Q)?"crosshair":null;if(t.isSome(Q))if(t.isSome(this._snappingManager)){const Z=this._snappingManager,O=new y.SnappingContext({geometry:this._editGeometry,elevationInfo:this.elevationInfo,pointer:V.pointerType,visualizer:new D.SnappingVisualizer3D});
this.stagedVertex=Z.update(Q,O);this._snappingTask=x.createTask(async P=>{const S=await this._frameTask.schedule(()=>Z.snap(Q,O,P),P);S.valid&&await this._frameTask.schedule(()=>{this.stagedVertex=S.apply()},P)})}else this.stagedVertex=Q}V.stopPropagation()}};N._onHold=function(V){t.abortMaybe(this._snappingTask);"click"===this.drawingMode&&"touch"===V.pointerType&&this._snappingEnabled&&(this.stagedVertex=V.mapPoint);V.stopPropagation()};N._screenToMapDragEventStep=function(){let V=null;return T=>
{"start"===T.action&&(V=this._screenToMap(T.screenStart));if(t.isNone(V))return null;const W=this._screenToMap(T.screenEnd);return t.isSome(W)?{...T,mapStart:V,mapEnd:W}:null}};N._screenToMap=function(V){return this._getDrawSurface().screenToMap(V)};N._mapToScreen=function(V){return this._getDrawSurface().mapToScreen(V)};N._getDrawSurface=function(){var V=null;if(this.coordinateHelper.hasZ){V=this._defaultZ;let T=!1;t.isSome(this.elevationInfo)&&"absolute-height"===this.elevationInfo.mode&&(T=!0);
t.isSome(this.snapToSceneEnabled)&&(T=this.snapToSceneEnabled);t.isSome(this.elevationInfo)&&"on-the-ground"===this.elevationInfo.mode&&(T=!1);const W=this._activeComponent.vertices.length;("segment"===this.geometryType||"polygon"===this.geometryType)&&0<W&&(V=this.coordinateHelper.getZ(this._activeComponent.vertices[0].pos),T=!1);T?V=this._snappingDrawSurface:(this._elevationDrawSurface.defaultZ=V,V=this._elevationDrawSurface)}else this._elevationDrawSurface.defaultZ=null,V=this._elevationDrawSurface;
return V};N._vertexWithinPointerDistance=function(V,T){const W=this._mapToScreen(V);t.isSome(W)?(V=W.x-T.x,T=W.y-T.y,T=25>=V*V+T*T):T=!1;return T};N._closeOnClickVertexIndex=function(V){const T=this._activeComponent;if("polygon"===this.geometryType&&2<T.vertices.length){if(this._vertexWithinPointerDistance(this.coordinateHelper.toPoint(T.vertices[0].pos,R),V))return 0;if(this._vertexWithinPointerDistance(this.coordinateHelper.toPoint(T.vertices[T.vertices.length-1].pos,R),V))return T.vertices.length-
1}return null};g._createClass(L,[{key:"isCompleted",get:function(){return this._createOperationCompleted}},{key:"_snappingEnabled",get:function(){return t.isSome(this._snappingManager)&&this._snappingManager.options.effectiveEnabled}},{key:"canRedo",get:function(){return this._editGeometry.canRedo}},{key:"canUndo",get:function(){return this._editGeometry.canUndo}},{key:"interactive",get:function(){return this._manipulator.interactive},set:function(V){this._manipulator.interactive=V}},{key:"numVertices",
get:function(){return t.isSome(this._stagedVertex)?this._activeComponent.vertices.length+1:this._activeComponent.vertices.length}},{key:"numCommittedVertices",get:function(){return this._activeComponent.vertices.length}},{key:"vertices",get:function(){const V=this._activeComponent.vertices.map(T=>this.coordinateHelper.toArray(T.pos));t.isSome(this._stagedVertex)&&V.push(this.coordinateHelper.pointToArray(this._stagedVertex));return V}},{key:"spatialReference",get:function(){return this.view.spatialReference}},
{key:"hasStagedVertex",get:function(){return t.isSome(this._stagedVertex)}},{key:"stagedVertex",get:function(){return this._stagedVertex},set:function(V){t.isNone(V)?this.discardStagedVertex():t.isSome(this._stagedVertex)&&F.pointEquals(this._stagedVertex,V)||(t.isNone(this._stagedVertex)?this._stagedVertex=v.clone(V):(this._stagedVertex.x=V.x,this._stagedVertex.y=V.y,this._stagedVertex.z=V.z,this._stagedVertex.m=V.m,this._stagedVertex.hasZ=V.hasZ,this._stagedVertex.hasM=V.hasM,this._stagedVertex.spatialReference=
V.spatialReference),V={componentIndex:0,vertexIndex:this._activeComponent.vertices.length,coordinates:this.coordinateHelper.pointToArray(V)},this.emit("cursor-update",{updated:null,vertices:[V],operation:"apply",type:"vertex-update"}))}}]);return L}(f);a.DrawOperation=r.__decorate([l.subclass("esri.views.3d.interactive.editingTools.draw3D.DrawOperation")],a.DrawOperation);const R=new c({x:0,y:0,z:0});Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/interactive/dragEventPipeline":function(){define("exports ../../core/lang ../../core/maybe ../../core/handleUtils ../../geometry/support/webMercatorUtils ../../core/mathUtils ../../core/screenUtils ../draw/support/drawUtils".split(" "),
function(a,g,r,A,v,t,p,b){function k(c,m){let f=null,e=null;return d=>{if("cancel"===d.action)r.isSome(e)&&(e.execute({action:"cancel"}),e=f=null);else{var h={action:d.action,screenStart:d.start,screenEnd:d.screenPoint};"start"===d.action&&r.isNone(f)&&(f=new x,e=new x,m(c,f,e,d.pointerType,h));r.isSome(f)&&f.execute(h);"end"===d.action&&r.isSome(f)&&(e=f=null)}}}function n(c,m){return c.events.on("drag",k(c,m))}function l(c,m){let f=null;const e=r.isSome(c[m])?c[m].spatialReference:null;return d=>
{if("start"===d.action&&r.isSome(c[m])){var h=c[m],F=d.mapStart.spatialReference;f=r.isNone(h)||"mesh"===h.type?null:h.spatialReference.equals(F)?h.clone():v.canProject(h,F)?v.project(h,F):null}if(r.isNone(f))return null;h=d.mapEnd.x-d.mapStart.x;F=d.mapEnd.y-d.mapStart.y;const E=d.mapEnd.z-d.mapStart.z,u=b.move(f.clone(),h,F,E);u.spatialReference.equals(e)?c[m]=u:c[m]=v.project(u,e);return{...d,translationX:h,translationY:F,translationZ:E}}}function q(c){return l(c,"geometry")}function C(c,m){const f=
new Map;for(const e of m)f.set(e,g.clone(c[e]));return e=>{f.forEach((d,h)=>{c[h]=d});return e}}function w(c){return C(c,["geometry"])}let x=function(){function c(){this.execute=()=>{}}c.prototype.next=function(m,f=new c){r.isSome(m)&&(this.execute=e=>{e=m(e);r.isSome(e)&&f.execute(e)});return f};return c}();a.EventPipeline=x;a.addMapDelta=function(){let c=0,m=0,f=0;return e=>{"start"===e.action&&(c=e.mapStart.x,m=e.mapStart.y,f=e.mapStart.z);const d=e.mapEnd.x-c,h=e.mapEnd.y-m,F=e.mapEnd.z-f;c=e.mapEnd.x;
m=e.mapEnd.y;f=e.mapEnd.z;return{...e,mapDeltaX:d,mapDeltaY:h,mapDeltaZ:F,mapDeltaSpatialReference:e.mapStart.spatialReference}}};a.addScreenDelta=function(){let c=0,m=0;return f=>{"start"===f.action&&(c=f.screenStart.x,m=f.screenStart.y);const e=f.screenEnd.x-c,d=f.screenEnd.y-m;c=f.screenEnd.x;m=f.screenEnd.y;return{...f,screenDeltaX:e,screenDeltaY:d}}};a.constrainToMapAxis=function(c,m){const f=[c.x,c.y,c.z],e=[Math.cos(m),Math.sin(m)];c=Math.sqrt(e[0]*e[0]+e[1]*e[1]);if(0===c)return null;e[0]/=
c;e[1]/=c;const d=h=>{const F=(h.x-f[0])*e[0]+(h.y-f[1])*e[1];h.x=f[0]+F*e[0];h.y=f[1]+F*e[1]};return h=>{d(h.mapStart);d(h.mapEnd);return h}};a.createDragEventPipelineCallback=k;a.createManipulatorDragEventPipeline=n;a.createManipulatorDragEventPipelineMany=function(c,m){const f=[];for(const e of c)f.push(n(e,m));return A.handlesGroup(f)};a.dragAtLocation=function(c,m){let f=null,e=0,d=0;return h=>{"start"===h.action&&(f=c.toScreen(m),0>f.x||f.x>c.width||0>f.y||f.y>c.height?f=null:(e=h.screenStart.x-
f.x,d=h.screenStart.y-f.y));if(null==f)return null;var F=t.clamp(h.screenEnd.x-e,0,c.width);const E=t.clamp(h.screenEnd.y-d,0,c.height);F=p.createScreenPoint(F,E);h.screenStart=f;h.screenEnd=F;return h}};a.dragGeometry=l;a.dragGraphic=q;a.dragGraphicMany=function(c){const m=c.map(f=>r.unwrap(q(f))).filter(f=>r.isSome(f));return f=>{const e=f.mapEnd.x-f.mapStart.x,d=f.mapEnd.y-f.mapStart.y,h=f.mapEnd.z-f.mapStart.z;m.forEach(F=>F(f));return{...f,translationX:e,translationY:d,translationZ:h}}};a.resetGraphic=
w;a.resetGraphicMany=function(c){const m=c.map(f=>r.unwrap(w(f))).filter(f=>r.isSome(f));return f=>{m.forEach(e=>e(f));return f}};a.resetProperties=C;a.resetSymbol=function(c){const m=r.isSome(c.symbol)?c.symbol.clone():null;return f=>{c.symbol=m;return f}};a.screenToMap=function(c,m=null,f){let e=null;const d=r.isSome(m)&&!c.spatialReference.equals(m)?F=>r.isSome(F)?v.project(F,m):F:F=>F,h={exclude:[],...f};return F=>{"start"===F.action&&(e=d(c.toMap(F.screenStart,h)));if(r.isNone(e))return null;
const E=d(c.toMap(F.screenEnd,h));return r.isSome(E)?{...F,mapStart:e,mapEnd:E}:null}};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/draw/support/drawUtils":function(){define(["exports","../../../geometry/support/coordsUtils","../../../geometry/support/boundsUtils","../../../geometry/support/aaBoundingRect"],function(a,g,r,A){function v(b,k,n,l){null==l||b.hasZ||(l=void 0);if("point"===b.type)return b.x+=k,b.y+=n,b.hasZ&&null!=l&&(b.z+=l),b;if("multipoint"===b.type){var q=b.points;
for(var C=0;C<q.length;C++)q[C]=t(q[C],k,n,l);return b}if("extent"===b.type)return b.xmin+=k,b.xmax+=k,b.ymin+=n,b.ymax+=n,null!=l&&(b.zmin+=l,b.zmax+=l),b;q=g.geometryToCoordinates(b);C="polyline"===b.type?b.paths:b.rings;for(let w=0;w<q.length;w++){const x=q[w];for(let c=0;c<x.length;c++)x[c]=t(x[c],k,n,l)}"paths"in b?b.paths=C:b.rings=C;return b}function t(b,k,n,l){return p(b,b[0]+k,b[1]+n,null!=b[2]&&null!=l?b[2]+l:void 0)}function p(b,k,n,l){k=[k,n];2<b.length&&k.push(null!=l?l:b[2]);3<b.length&&
k.push(b[3]);return k}a.cloneMove=function(b,k,n,l,q){b=b.clone();var C=l.resolution;if("point"===b.type)return q?v(b,k*C,-n*C):(q=l.state.transform,l=l.state.inverseTransform,C=q[0]*b.x+q[2]*b.y+q[4],q=q[1]*b.x+q[3]*b.y+q[5],b.x=l[0]*(C+k)+l[2]*(q+n)+l[4],b.y=l[1]*(C+k)+l[3]*(q+n)+l[5]),b;if("multipoint"===b.type){if(q)v(b,k*C,-n*C);else{q=b.points;C=l.state.transform;l=l.state.inverseTransform;for(var w=0;w<q.length;w++){var x=q[w],c=C[0]*x[0]+C[2]*x[1]+C[4],m=C[1]*x[0]+C[3]*x[1]+C[5];q[w]=p(x,
l[0]*(c+k)+l[2]*(m+n)+l[4],l[1]*(c+k)+l[3]*(m+n)+l[5],void 0)}}return b}if("extent"===b.type)return q?v(b,k*C,-n*C):(q=l.state.transform,l=l.state.inverseTransform,C=q[0]*b.xmin+q[2]*b.ymin+q[4],w=q[1]*b.xmin+q[3]*b.ymin+q[5],x=q[0]*b.xmax+q[2]*b.ymax+q[4],q=q[1]*b.xmax+q[3]*b.ymax+q[5],b.xmin=l[0]*(C+k)+l[2]*(w+n)+l[4],b.ymin=l[1]*(C+k)+l[3]*(w+n)+l[5],b.xmax=l[0]*(x+k)+l[2]*(q+n)+l[4],b.ymax=l[1]*(x+k)+l[3]*(q+n)+l[5]),b;if(q)v(b,k*C,-n*C);else{q=g.geometryToCoordinates(b);C="polyline"===b.type?
b.paths:b.rings;w=l.state.transform;l=l.state.inverseTransform;for(x=0;x<q.length;x++)for(c=q[x],m=0;m<c.length;m++){const f=c[m],e=w[0]*f[0]+w[2]*f[1]+w[4],d=w[1]*f[0]+w[3]*f[1]+w[5];c[m]=p(f,l[0]*(e+k)+l[2]*(d+n)+l[4],l[1]*(e+k)+l[3]*(d+n)+l[5],void 0)}"paths"in b?b.paths=C:b.rings=C}return b};a.getRotationAngle=function(b,k,n,l,q,C){return 180*Math.atan2(k-C,b-q)/Math.PI-180*Math.atan2(k-l,b-n)/Math.PI};a.getScaleRatio=function(b,k,n,l,q,C){return Math.sqrt((q-b)*(q-b)+(C-k)*(C-k))/Math.sqrt((n-
b)*(n-b)+(l-k)*(l-k))};a.move=v;a.scale=function(b,k,n,l){if("point"===b.type){const {x:d,y:h}=b;var q=l?l[0]:d,C=l?l[1]:h;b=b.clone();n=(h-C)*n+C;b.x=(d-q)*k+q;b.y=n;return b}if("multipoint"===b.type){q=g.geometryToCoordinates(b);C=A.create();const [d,h,F,E]=r.getRingsOrPathsBounds(C,[q]);q=l?l[0]:(d+F)/2;C=l?l[1]:(E+h)/2;b=b.clone();l=b.points;for(var w=0;w<l.length;w++){var x=l[w];const [u,z]=x;l[w]=p(x,(u-q)*k+q,(z-C)*n+C,void 0)}return b}if("extent"===b.type){const {xmin:d,xmax:h,ymin:F,ymax:E}=
b;q=l?l[0]:(d+h)/2;C=l?l[1]:(E+F)/2;b=b.clone();b.xmin=(d-q)*k+q;b.ymax=(E-C)*n+C;b.xmax=(h-q)*k+q;b.ymin=(F-C)*n+C;b.xmin>b.xmax&&(k=b.xmin,b.xmin=b.xmax,b.xmax=k);b.ymin>b.ymax&&(k=b.ymin,b.ymin=b.ymax,b.ymax=k);return b}q=g.geometryToCoordinates(b);C=A.create();const [c,m,f,e]=r.getRingsOrPathsBounds(C,q);C=l?l[0]:(c+f)/2;l=l?l[1]:(e+m)/2;b=b.clone();w="polyline"===b.type?b.paths:b.rings;for(x=0;x<q.length;x++){const d=q[x];for(let h=0;h<d.length;h++){const F=d[h],[E,u]=F;w[x][h]=p(F,(E-C)*k+C,
(u-l)*n+l,void 0)}}"paths"in b?b.paths=w:b.rings=w;return b};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/interactive/SnappingDragPipelineStep":function(){define("exports ../../../core/maybe ../../../core/promiseUtils ../../support/Scheduler ../../../layers/graphics/dehydratedFeatureComparison ../../interactive/snapping/SnappingContext ../../interactive/dragEventPipeline".split(" "),function(a,g,r,A,v,t,p){let b=function(){function k(){this.next=new p.EventPipeline}k.prototype.createSnapDragEventPipelineStep=
function({predicate:n=()=>!0,cancel:l,snappingManager:q,snappingContext:C}){if(g.isNone(q))return m=>m;let w=null,x=null;const c=()=>{w=g.abortMaybe(w);q.doneSnapping();g.isSome(x)&&x.frameTask.remove();x=null};l.next(m=>{c();return m});this.next=new p.EventPipeline;return m=>{if(!n(m))return m;w=g.abortMaybe(w);if("start"===m.action){const f="3d"===q.view.type?q.view.resourceController.scheduler.registerTask(A.Task.SNAPPING,e=>g.unwrap(f).processQueue(e),()=>!1):A.ImmediateTask;x={context:new t.SnappingContext({geometry:C.geometry,
elevationInfo:C.elevationInfo,pointer:C.pointer,vertexHandle:g.isSome(m.info)?m.info.handle:null,excludeFeature:C.excludeFeature,visualizer:C.visualizer}),originalPos:g.isSome(m.snapOrigin)?C.coordinateHelper.createDehydratedPoint(m.snapOrigin):m.mapStart,frameTask:f}}if(g.isSome(x)){const f=x.context.coordinateHelper.createDehydratedPoint(x.context.coordinateHelper.fromArray([x.originalPos.x,x.originalPos.y,x.originalPos.z]));f.x+=m.mapEnd.x-m.mapStart.x;f.y+=m.mapEnd.y-m.mapStart.y;const e=m.mapStart.x-
x.originalPos.x,d=m.mapStart.y-x.originalPos.y,h={...m,action:"udpate"},F=x.context,E=q.update(f,x.context);m.mapEnd.x=E.x+e;m.mapEnd.y=E.y+d;if("end"!==m.action){const u=x.frameTask;w=r.createTask(async z=>{const y=await u.schedule(()=>q.snap(f,F,z),z);if(y.valid){const B=await u.schedule(()=>y.apply(),z);v.pointEquals(B,E)||(h.mapEnd.x=B.x+e,h.mapEnd.y=B.y+d,this.next.execute(h))}})}}"end"===m.action&&c();return m}};return k}();a.SnappingPipeline=b;Object.defineProperty(a,"__esModule",{value:!0})})},
"esri/views/3d/interactive/SnappingVisualizer3D":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/has ../../../core/handleUtils ../../../Color ../../../chunks/vec3f64 ../../../chunks/vec3 ../../interactive/snapping/Settings ../../interactive/snapping/snappingUtils ../../interactive/snapping/SnappingVisualizer ./visualElements/ExtendedLineVisualElement ./visualElements/ParallelLineVisualElement ./visualElements/PointVisualElement ./visualElements/RightAngleQuadVisualElement".split(" "),
function(a,g,r,A,v,t,p,b,k,n,l,q,C,w){r=function(x){function c(){return x.apply(this,arguments)||this}g._inheritsLoose(c,x);var m=c.prototype;m.visualizeIntersectionPoint=function(f,e){const {coordinateHelper:d,elevationInfo:h,view:F}=e;return A.destroyHandle(new C.PointVisualElement({view:F,primitive:"circle",geometry:d.createPoint(f.intersectionPoint),elevationInfo:h,size:20,outlineSize:2,color:[0,0,0,0],outlineColor:v.toUnitRGBA(b.defaults.orange),pixelSnappingEnabled:!1}))};m.visualizePoint=function(f,
e){const {coordinateHelper:d,elevationInfo:h,view:F}=e;return A.destroyHandle(new C.PointVisualElement({view:F,primitive:"circle",geometry:d.createPoint(f.point),elevationInfo:h,size:20,outlineSize:2,color:[0,0,0,0],outlineColor:v.toUnitRGBA(b.defaults.orange),pixelSnappingEnabled:!1}))};m.visualizeLine=function(f,e){const {coordinateHelper:d,elevationInfo:h,view:F}=e;return A.destroyHandle(this.createLineSegmentHintFromMap(f.type,f.lineStart,f.lineEnd,d,h,F,f.fadeLeft,f.fadeRight))};m.visualizeParallelSign=
function(f,e){const {coordinateHelper:d,elevationInfo:h,view:F}=e,E=k.anyMapPointToRender(f.lineStart,d,h,e.view);f=k.anyMapPointToRender(f.lineEnd,d,h,e.view);f=p.lerp(f,E,f,.5);e=new q.ParallelLineVisualElement({view:F,attached:!1,offset:b.defaults.parallelLineHintOffset,length:b.defaults.parallelLineHintLength,width:b.defaults.parallelLineHintWidth,color:v.toUnitRGBA(b.defaults.orange),location:f,renderOccluded:16});e.setDirectionFromPoints(E,f);e.attached=!0;return A.destroyHandle(e)};m.visualizeRightAngleQuad=
function(f,e){const {coordinateHelper:d,elevationInfo:h,view:F}=e;return A.destroyHandle(new w.RightAngleQuadVisualElement({view:F,attached:!0,color:v.toUnitRGBA(b.defaults.orange),renderOccluded:2,outlineRenderOccluded:16,outlineColor:v.toUnitRGBA(b.defaults.orange),outlineSize:b.defaults.rightAngleHintOutlineSize,size:b.defaults.rightAngleHintSize,geometry:{previous:k.anyMapPointToRender(f.previousVertex,d,h,F),center:k.anyMapPointToRender(f.centerVertex,d,h,F),next:k.anyMapPointToRender(f.nextVertex,
d,h,F)}}))};m.createLineSegmentHintFromMap=function(f,e,d,h,F,E,u=!0,z=!0){const y=t.create(),B=t.create();k.anyMapPointsToRenderWithEqualZ(e,d,h,F,E,y,B);return this.createLineSegmentHint(f,E,y,B,u,z)};m.createLineSegmentHint=function(f,e,d,h,F=!0,E=!0){e=new l.ExtendedLineVisualElement({view:e,extensionType:3,start:d,end:h,color:v.toUnitRGBA(b.defaults.orange),renderOccluded:16});switch(f){case 0:e.width=b.defaults.lineHintWidthTarget;e.fadedExtensions={start:0,end:b.defaults.lineHintFadedExtensions};
break;case 2:e.width=b.defaults.lineHintWidthReference;e.fadedExtensions={start:0,end:0};break;case 1:e.width=b.defaults.lineHintWidthReference,e.fadedExtensions={start:F?b.defaults.lineHintFadedExtensions:0,end:E?b.defaults.lineHintFadedExtensions:0}}e.attached=!0;return e};return c}(n.SnappingVisualizer);a.SnappingVisualizer3D=r;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/interactive/visualElements/ExtendedLineVisualElement":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/has ../../../../core/maybe ../../../../chunks/vec3f64 ../../../../chunks/vec3 ../../../../core/Handles ../../../../chunks/vec4 ../../../../chunks/vec4f32 ../../../../chunks/clipRay ../../support/geometryUtils ../../webgl-engine/lib/GeometryUtil ../../webgl-engine/materials/RibbonLineMaterial ./LaserlineVisualElement ./Object3DVisualElement".split(" "),
function(a,g,r,A,v,t,p,b,k,n,l,q,C,w,x){r=function(h){function F(u){var z=h.call(this,u)||this;z._ray=l.ray.create();z._externalResources=null;z._handles=new p;z._isWorldDown=!1;z._start=v.create();z._end=v.fromValues(1,0,0);z._width=1;z._color=k.fromValues(1,0,1,1);z._polygonOffset=!1;z._writeDepthEnabled=!0;z._innerWidth=0;z._innerColor=k.fromValues(1,1,1,1);z._stippleIntegerRepeats=!0;z._stipplePattern=null;z._stippleOffColor=null;z._falloff=0;z._extensionType=0;z._laserlineStyle=null;z._laserlineEnabled=
!1;z._renderOccluded=4;z._fadedExtensions=d;z.applyProps(u);return z}g._inheritsLoose(F,h);var E=F.prototype;E.createExternalResources=function(){const u=new C.RibbonLineMaterial(this.materialParameters);this._handles.add(this.view.state.watch("camera",()=>{this.updateGeometry()}));const z=new w.LaserlineVisualElement({view:this.view,attached:this._laserlineEnabled});this._externalResources={material:u,laserline:z}};E.destroyExternalResources=function(){A.isSome(this._externalResources)&&this._externalResources.laserline.destroy();
this._externalResources=null;this._handles.removeAll()};E.forEachExternalMaterial=function(u){A.isSome(this._externalResources)&&u(this._externalResources.material)};E.createGeometries=function(u){var z=[v.create(),v.create()],y=3===this.extensionType;y&&z.push(v.create(),v.create());y=y?new Float32Array([1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,0]):null;z=q.createPolylineGeometry(z,null,y);u.addGeometry(z,A.unwrap(this._externalResources).material);this.updateVertices(z)};E.updateVisibility=function(u){h.prototype.updateVisibility.call(this,
u);A.isSome(this._externalResources)&&(this._externalResources.laserline.visible=u)};E.setStartEndFromWorldDownAtLocation=function(u){this._isWorldDown=!0;t.copy(this._start,u);this.view.renderCoordsHelper.worldUpAtPosition(u,this._end);t.subtract(this._end,u,this._end);l.ray.fromPoints(this._start,this._end,this._ray);this.updateGeometry()};E.updateMaterial=function(){A.isNone(this._externalResources)||this._externalResources.material.setParameterValues(this.materialParameters)};E.updateGeometry=
function(){A.isSome(this.object)&&this.updateVertices(this.object.geometries[0])};E.updateVertices=function(u){const z=3===this._extensionType?this.updateLineSegmentFinite(e):this.updateLineSegmentInfinite(this._extensionType,e);this.updateVertexAttributes(u,z);A.isSome(this._externalResources)&&(this._externalResources.laserline.intersectsLine=z)};E.updateLineSegmentFinite=function(u){return l.lineSegment.fromPoints(this._start,this._end,u)};E.updateLineSegmentInfinite=function(u,z){var y=this.view.state.camera;
n.fromRay(this._ray,c);switch(u){case 0:c.c0=-Number.MAX_VALUE;break;case 1:case 2:var B=this._ray.origin;u=A.unwrapOr(this.view.elevationProvider.getElevation(B[0],B[1],B[2],this.view.renderCoordsHelper.spatialReference,"ground"),0);B=this.view.renderCoordsHelper.getAltitude(B);this._isWorldDown&&B<u&&t.negate(c.ray.direction,c.ray.direction);2===this._extensionType&&null!=u&&(c.c1=Math.abs(B-u))}if(!l.frustum.intersectClipRay(y.frustum,c))return l.lineSegment.fromPoints(this._start,this._end,z);
y=n.getStart(c,m);u=n.getEnd(c,f);return l.lineSegment.fromPoints(y,u,z)};E.updateVertexAttributes=function(u,z){u=u.getMutableAttribute("position").data;if(3===this.extensionType){var y=l.lineSegment.pointAt(z,-this.fadedExtensions.start,m);u[0]=y[0];u[1]=y[1];u[2]=y[2];y=l.lineSegment.pointAt(z,0,m);u[3]=y[0];u[4]=y[1];u[5]=y[2];y=l.lineSegment.pointAt(z,1,m);u[6]=y[0];u[7]=y[1];u[8]=y[2];z=l.lineSegment.pointAt(z,1+this.fadedExtensions.end,m);u[9]=z[0];u[10]=z[1];u[11]=z[2]}else y=l.lineSegment.pointAt(z,
0,m),u[0]=y[0],u[1]=y[1],u[2]=y[2],z=l.lineSegment.pointAt(z,1,m),u[3]=z[0],u[4]=z[1],u[5]=z[2];A.isSome(this.object)&&this.object.geometryVertexAttrsUpdated(0)};g._createClass(F,[{key:"start",get:function(){return this._start},set:function(u){this._isWorldDown=!1;t.exactEquals(this._start,u)||(t.copy(this._start,u),l.ray.fromPoints(this._start,this._end,this._ray),this.updateGeometry())}},{key:"end",get:function(){return this._end},set:function(u){this._isWorldDown=!1;t.exactEquals(this._end,u)||
(t.copy(this._end,u),l.ray.fromPoints(this._start,this._end,this._ray),this.updateGeometry())}},{key:"width",get:function(){return this._width},set:function(u){u!==this._width&&(this._width=u,this.updateMaterial())}},{key:"color",get:function(){return this._color},set:function(u){b.exactEquals(u,this._color)||(b.copy(this._color,u),this.updateMaterial())}},{key:"polygonOffset",get:function(){return this._polygonOffset},set:function(u){u!==this._polygonOffset&&(this._polygonOffset=u,this.updateMaterial())}},
{key:"writeDepthEnabled",get:function(){return this._writeDepthEnabled},set:function(u){this._writeDepthEnabled!==u&&(this._writeDepthEnabled=u,this.updateMaterial())}},{key:"innerWidth",get:function(){return this._innerWidth},set:function(u){u!==this._innerWidth&&(this._innerWidth=u,this.updateMaterial())}},{key:"innerColor",get:function(){return this._innerColor},set:function(u){b.exactEquals(u,this._innerColor)||(b.copy(this._innerColor,u),this.updateMaterial())}},{key:"stippleIntegerRepeats",
get:function(){return this._stippleIntegerRepeats},set:function(u){u!==this._stippleIntegerRepeats&&(this._stippleIntegerRepeats=u,this.updateMaterial())}},{key:"stipplePattern",get:function(){return this._stipplePattern},set:function(u){const z=A.isSome(u)!==A.isSome(this._stipplePattern);this._stipplePattern=u;z?this.recreate():this.updateMaterial()}},{key:"stippleOffColor",get:function(){return this._stippleOffColor},set:function(u){if(A.isNone(u)||A.isNone(this._stippleOffColor)||!b.exactEquals(u,
this._stippleOffColor))this._stippleOffColor=A.isSome(u)?k.clone(u):null,this.updateMaterial()}},{key:"falloff",get:function(){return this._falloff},set:function(u){u!==this._falloff&&(this._falloff=u,this.updateMaterial())}},{key:"extensionType",get:function(){return this._extensionType},set:function(u){u!==this._extensionType&&(this._extensionType=u,this.updateGeometry())}},{key:"_laserlineAttached",get:function(){return this._laserlineEnabled&&A.isSome(this._laserlineStyle)}},{key:"laserlineStyle",
get:function(){return this._laserlineStyle},set:function(u){this._laserlineStyle=u;A.isSome(this._externalResources)&&(this._externalResources.laserline.attached=this._laserlineAttached,A.isSome(u)&&(this._externalResources.laserline.style=u))}},{key:"laserlineEnabled",get:function(){return this._laserlineEnabled},set:function(u){this._laserlineEnabled!==u&&(this._laserlineEnabled=u,A.isSome(this._externalResources)&&(this._externalResources.laserline.attached=this._laserlineAttached))}},{key:"renderOccluded",
get:function(){return this._renderOccluded},set:function(u){u!==this._renderOccluded&&(this._renderOccluded=u,this.updateMaterial())}},{key:"fadedExtensions",get:function(){return this._fadedExtensions},set:function(u){this._fadedExtensions=A.unwrapOr(u,d);this.recreateGeometry()}},{key:"materialParameters",get:function(){return{width:this._width,color:this._color,stippleOffColor:this._stippleOffColor,stipplePattern:this._stipplePattern,stippleIntegerRepeats:this._stippleIntegerRepeats,innerWidth:this._innerWidth,
innerColor:this._innerColor,falloff:this._falloff,polygonOffset:this._polygonOffset,renderOccluded:this._renderOccluded,writeDepth:this._writeDepthEnabled}}}]);return F}(x.Object3DVisualElement);const c=n.create(),m=v.create(),f=v.create(),e=l.lineSegment.create();x=1/3;const d={start:x,end:x};a.ExtendedLineVisualElement=r;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/chunks/vec4f32":function(){define(["exports"],function(a){function g(){return new Float32Array(4)}function r(e){const d=
new Float32Array(4);d[0]=e[0];d[1]=e[1];d[2]=e[2];d[3]=e[3];return d}function A(e,d,h,F){const E=new Float32Array(4);E[0]=e;E[1]=d;E[2]=h;E[3]=F;return E}function v(e,d){return new Float32Array(e,d,4)}function t(){return g()}function p(){return A(1,1,1,1)}function b(){return A(1,0,0,0)}function k(){return A(0,1,0,0)}function n(){return A(0,0,1,0)}function l(){return A(0,0,0,1)}const q=g(),C=p(),w=b(),x=k(),c=n(),m=l();var f=Object.freeze({__proto__:null,create:g,clone:r,fromValues:A,createView:v,
zeros:t,ones:p,unitX:b,unitY:k,unitZ:n,unitW:l,ZEROS:q,ONES:C,UNIT_X:w,UNIT_Y:x,UNIT_Z:c,UNIT_W:m});a.ONES=C;a.UNIT_W=m;a.UNIT_X=w;a.UNIT_Y=x;a.UNIT_Z=c;a.ZEROS=q;a.clone=r;a.create=g;a.createView=v;a.fromValues=A;a.ones=p;a.unitW=l;a.unitX=b;a.unitY=k;a.unitZ=n;a.vec4f32=f;a.zeros=t})},"esri/chunks/clipRay":function(){define(["exports","./vec3","../core/ObjectStack","../views/3d/support/stack","./ray"],function(a,g,r,A,v){function t(m){return m?{ray:v.create(m.ray),c0:m.c0,c1:m.c1}:{ray:v.create(),
c0:0,c1:Number.MAX_VALUE}}function p(m,f,e){const d=c.get();d.ray=m;d.c0=f;d.c1=e;return d}function b(m,f=t()){return k(m.ray,m.c0,m.c1,f)}function k(m,f,e,d=t()){v.copy(m,d.ray);d.c0=f;d.c1=e;return d}function n(m,f=t()){v.copy(m,f.ray);f.c0=0;f.c1=Number.MAX_VALUE;return f}function l(m,f=t()){const e=g.normalize(A.sv3d.get(),m.vector);return q(m,e,f)}function q(m,f,e=t()){const d=g.length(m.vector);v.fromValues(m.origin,f,e.ray);e.c0=0;e.c1=d;return e}function C(m,f){return x(m,m.c0,f)}function w(m,
f){return x(m,m.c1,f)}function x(m,f,e){return g.add(e,m.ray.origin,g.scale(e,m.ray.direction,f))}const c=new r.ObjectStack(()=>({c0:0,c1:0,ray:null}));r=Object.freeze({__proto__:null,create:t,wrap:p,copy:b,fromValues:k,fromRay:n,fromLineSegment:l,fromLineSegmentAndDirection:q,getStart:C,getEnd:w,getAt:x});a.clipRayModule=r;a.copy=b;a.create=t;a.fromLineSegment=l;a.fromLineSegmentAndDirection=q;a.fromRay=n;a.fromValues=k;a.getAt=x;a.getEnd=w;a.getStart=C;a.wrap=p})},"esri/core/ObjectStack":function(){define(["exports",
"./maybe","./nextTick"],function(a,g,r){let A=function(){function v(p){this.allocator=p;this.items=[];this.itemsPtr=0;this.tickHandle=r.before(()=>this.reset());this.grow()}var t=v.prototype;t.destroy=function(){this.tickHandle&&(this.tickHandle.remove(),this.tickHandle=g.nullifyNonnullableForDispose(this.tickHandle));this.items=g.nullifyNonnullableForDispose(this.items)};t.get=function(){0===this.itemsPtr&&r(()=>{});this.itemsPtr===this.items.length&&this.grow();return this.items[this.itemsPtr++]};
t.reset=function(){this.items.length=Math.min(Math.min(3*Math.max(8,this.itemsPtr),this.itemsPtr+3072),this.items.length);this.itemsPtr=0};t.grow=function(){for(let p=0;p<Math.max(8,Math.min(this.items.length,1024));p++)this.items.push(this.allocator())};return v}();a.ObjectStack=A;a.default=A;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/chunks/ray":function(){define("exports ../core/maybe ../core/screenUtils ./vec3f64 ./vec3 ../core/ObjectStack ./vec2 ../views/3d/support/stack".split(" "),
function(a,g,r,A,v,t,p,b){function k(E){return E?{origin:A.clone(E.origin),direction:A.clone(E.direction)}:{origin:A.create(),direction:A.create()}}function n(E,u){const z=F.get();z.origin=E;z.direction=u;return z}function l(E,u=k()){return C(E.origin,E.direction,u)}function q(E,u,z=k()){v.copy(z.origin,E);v.subtract(z.direction,u,E);return z}function C(E,u,z=k()){v.copy(z.origin,E);v.copy(z.direction,u);return z}function w(E,u,z=k()){return x(E,E.screenToRender(u,r.castRenderScreenPointArray3(b.sv3d.get())),
z)}function x(E,u,z=k()){const y=r.castRenderScreenPointArray3(p.copy(b.sv3d.get(),u));y[2]=0;if(!E.unprojectFromRenderScreen(y,z.origin))return null;u=r.castRenderScreenPointArray3(p.copy(b.sv3d.get(),u));u[2]=1;E=E.unprojectFromRenderScreen(u,b.sv3d.get());if(g.isNone(E))return null;v.subtract(z.direction,E,z.origin);return z}function c(E,u,z=k()){return m(E,E.screenToRender(u,r.castRenderScreenPointArray3(b.sv3d.get())),z)}function m(E,u,z=k()){v.copy(z.origin,E.eye);u=v.set(b.sv3d.get(),u[0],
u[1],1);E=E.unprojectFromRenderScreen(u,b.sv3d.get());if(g.isNone(E))return null;v.subtract(z.direction,E,z.origin);return z}function f(E,u){E=v.cross(b.sv3d.get(),v.normalize(b.sv3d.get(),E.direction),v.subtract(b.sv3d.get(),u,E.origin));return v.dot(E,E)}function e(E,u){return Math.sqrt(f(E,u))}function d(E,u,z){u=v.dot(E.direction,v.subtract(z,u,E.origin));v.add(z,E.origin,v.scale(z,E.direction,u));return z}function h(){return{origin:null,direction:null}}const F=new t.ObjectStack(h);t=Object.freeze({__proto__:null,
create:k,wrap:n,copy:l,fromPoints:q,fromValues:C,fromScreen:w,fromRender:x,fromScreenAtEye:c,fromRenderAtEye:m,distance2:f,distance:e,closestPoint:d,createWrapper:h});a.closestPoint=d;a.copy=l;a.create=k;a.createWrapper=h;a.distance=e;a.distance2=f;a.fromPoints=q;a.fromRender=x;a.fromRenderAtEye=m;a.fromScreen=w;a.fromScreenAtEye=c;a.fromValues=C;a.rayModule=t;a.wrap=n})},"esri/views/3d/support/geometryUtils":function(){define("exports ../../../chunks/vector ../../../chunks/axisAngle ../../../chunks/lineSegment ../../../chunks/ray ../../../chunks/sphere ../../../chunks/plane ../../../chunks/boundedPlane ../../../chunks/clipRay ../../../chunks/frustum ../../../chunks/triangle".split(" "),
function(a,g,r,A,v,t,p,b,k,n,l){p=p.planeModule;b=b.boundedPlaneModule;l=l.triangleModule;A=A.lineSegmentModule;v=v.rayModule;k=k.clipRayModule;t=t.sphereModule;n=n.frustumModule;g=g.vectorModule;a.axisAngle=r.axisAngleModule;a.boundedPlane=b;a.clipRay=k;a.frustum=n;a.lineSegment=A;a.plane=p;a.ray=v;a.sphere=t;a.triangle=l;a.vector=g;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/chunks/vector":function(){define(["exports","../core/mathUtils","./vec3f64","./vec3"],function(a,g,r,A){function v(l,
q,C){q=A.dot(l,q)/A.dot(l,l);return A.scale(C,l,q)}function t(l,q){return A.dot(l,q)/A.length(l)}function p(l,q){l=A.dot(l,q)/(A.length(l)*A.length(q));return-g.acosClamped(l)}function b(l,q,C){A.normalize(k,l);A.normalize(n,q);l=A.dot(k,n);l=g.acosClamped(l);q=A.cross(k,k,n);return 0>A.dot(q,C)?2*Math.PI-l:l}const k=r.create(),n=r.create();r=Object.freeze({__proto__:null,projectPoint:v,projectPointSignedLength:t,angle:p,angleAroundAxis:b});a.angle=p;a.angleAroundAxis=b;a.projectPoint=v;a.projectPointSignedLength=
t;a.vectorModule=r})},"esri/chunks/axisAngle":function(){define(["exports","./vec3","../views/3d/support/stack","./vector"],function(a,g,r,A){function v(x=C){return[x[0],x[1],x[2],x[3]]}function t(x,c,m,f){return k(x,c,m,f,r.sv4d.get())}function p(x,c){return k(x[0],x[1],x[2],c,r.sv4d.get())}function b(x,c=v()){return k(x[0],x[1],x[2],x[3],c)}function k(x,c,m,f,e=v()){e[0]=x;e[1]=c;e[2]=m;e[3]=f;return e}function n(x,c,m=v()){g.copy(m,x);m[3]=c;return m}function l(x,c,m=v()){g.cross(m,x,c);g.normalize(m,
m);m[3]=A.angle(x,c);return m}function q(x){return x}const C=[0,0,1,0];var w=Object.freeze({__proto__:null,create:v,wrap:t,wrapAxisAngle:p,copy:b,fromValues:k,fromAxisAndAngle:n,fromPoints:l,axis:q,UP:C});a.UP=C;a.axis=q;a.axisAngleModule=w;a.copy=b;a.create=v;a.fromAxisAndAngle=n;a.fromPoints=l;a.fromValues=k;a.wrap=t;a.wrapAxisAngle=p})},"esri/chunks/lineSegment":function(){define("exports ../core/mathUtils ./vec3f64 ./vec3 ../core/ObjectStack ../views/3d/support/stack".split(" "),function(a,g,
r,A,v,t){function p(E){return E?{origin:r.clone(E.origin),vector:r.clone(E.vector)}:{origin:r.create(),vector:r.create()}}function b(E,u){const z=F.get();z.origin=E;z.vector=u;return z}function k(E,u=p()){return n(E.origin,E.vector,u)}function n(E,u,z=p()){A.copy(z.origin,E);A.copy(z.vector,u);return z}function l(E,u,z=p()){A.copy(z.origin,E);A.subtract(z.vector,u,E);return z}function q(E,u){u=A.subtract(t.sv3d.get(),u,E.origin);var z=A.dot(E.vector,u);const y=A.dot(E.vector,E.vector);z=g.clamp(z/
y,0,1);E=A.subtract(t.sv3d.get(),A.scale(t.sv3d.get(),E.vector,z),u);return A.dot(E,E)}function C(E,u){return Math.sqrt(q(E,u))}function w(E,u,z){return c(E,u,0,1,z)}function x(E,u,z){return A.add(z,E.origin,A.scale(z,E.vector,u))}function c(E,u,z,y,B){const {vector:H,origin:D}=E;u=A.subtract(t.sv3d.get(),u,D);u=A.dot(H,u)/A.squaredLength(H);A.scale(B,H,g.clamp(u,z,y));return A.add(B,B,E.origin)}function m(E,u){if(d(E,b(u.origin,u.direction),!1,h)){const {tA:z,pB:y,distance2:B}=h;if(0<=z&&1>=z)return B;
if(0>z)return A.squaredDistance(E.origin,y);if(1<z)return A.squaredDistance(A.add(t.sv3d.get(),E.origin,E.vector),y)}return null}function f(E,u,z){return d(E,u,!0,h)?(A.copy(z,h.pA),!0):!1}function e(E,u){return d(E,u,!0,h)?h.distance2:null}function d(E,u,z,y){const B=E.origin;var H=A.add(t.sv3d.get(),B,E.vector);E=u.origin;var D=A.add(t.sv3d.get(),E,u.vector),M=t.sv3d.get();u=t.sv3d.get();M[0]=B[0]-E[0];M[1]=B[1]-E[1];M[2]=B[2]-E[2];u[0]=D[0]-E[0];u[1]=D[1]-E[1];u[2]=D[2]-E[2];if(1E-6>Math.abs(u[0])&&
1E-6>Math.abs(u[1])&&1E-6>Math.abs(u[2]))return!1;D=t.sv3d.get();D[0]=H[0]-B[0];D[1]=H[1]-B[1];D[2]=H[2]-B[2];if(1E-6>Math.abs(D[0])&&1E-6>Math.abs(D[1])&&1E-6>Math.abs(D[2]))return!1;H=M[0]*u[0]+M[1]*u[1]+M[2]*u[2];var U=u[0]*D[0]+u[1]*D[1]+u[2]*D[2];const R=u[0]*u[0]+u[1]*u[1]+u[2]*u[2],J=(D[0]*D[0]+D[1]*D[1]+D[2]*D[2])*R-U*U;if(1E-6>Math.abs(J))return!1;M=(H*U-(M[0]*D[0]+M[1]*D[1]+M[2]*D[2])*R)/J;H=(H+U*M)/R;z&&(M=g.clamp(M,0,1),H=g.clamp(H,0,1));z=t.sv3d.get();U=t.sv3d.get();z[0]=B[0]+M*D[0];
z[1]=B[1]+M*D[1];z[2]=B[2]+M*D[2];U[0]=E[0]+H*u[0];U[1]=E[1]+H*u[1];U[2]=E[2]+H*u[2];y.tA=M;y.tB=H;y.pA=z;y.pB=U;y.distance2=A.squaredDistance(z,U);return!0}const h={tA:0,tB:0,pA:r.create(),pB:r.create(),distance2:0},F=new v.ObjectStack(()=>({origin:null,vector:null}));v=Object.freeze({__proto__:null,create:p,wrap:b,copy:k,fromValues:n,fromPoints:l,distance2:q,distance:C,projectPoint:w,pointAt:x,projectPointClamp:c,closestRayDistance2:m,closestLineSegmentPoint:f,closestLineSegmentDistance2:e});a.closestLineSegmentDistance2=
e;a.closestLineSegmentPoint=f;a.closestRayDistance2=m;a.copy=k;a.create=p;a.distance=C;a.distance2=q;a.fromPoints=l;a.fromValues=n;a.lineSegmentModule=v;a.pointAt=x;a.projectPoint=w;a.projectPointClamp=c;a.wrap=b})},"esri/chunks/sphere":function(){define("exports ../core/has ../core/maybe ../core/Logger ../core/mathUtils ./vec3f64 ./vec3 ../views/3d/support/mathUtils ./mat4 ./vec4f64 ./vec4 ../views/3d/support/stack ./vector ./ray".split(" "),function(a,g,r,A,v,t,p,b,k,n,l,q,C,w){function x(){return n.create()}
function c(S,Y=x()){return l.copy(Y,S)}function m(S,Y){return n.fromValues(S[0],S[1],S[2],Y)}function f(S){return S}function e(S){S[0]=S[1]=S[2]=S[3]=0}function d(S){return S}function h(S){return Array.isArray(S)?S[3]:S}function F(S){return Array.isArray(S)?S:O}function E(S,Y,ta,wa){return n.fromValues(S,Y,ta,wa)}function u(S,Y,ta){S!==ta&&p.copy(ta,S);ta[3]=S[3]+Y;return ta}function z(S,Y,ta){W.error("sphere.setExtent is not yet supported");return S===ta?ta:c(S,ta)}function y(S,Y,ta){if(r.isNone(Y))return!1;
var wa=p.subtract(q.sv3d.get(),Y.origin,F(S)),G=p.dot(Y.direction,Y.direction);const I=2*p.dot(Y.direction,wa);S=p.dot(wa,wa)-S[3]*S[3];S=I*I-4*G*S;if(0>S)return!1;wa=Math.sqrt(S);S=(-I-wa)/(2*G);G=(-I+wa)/(2*G);if(0>S||G<S&&0<G)S=G;if(0>S)return!1;ta&&p.add(ta,Y.origin,p.scale(q.sv3d.get(),Y.direction,S));return!0}function B(S,Y,ta,wa){Y=w.fromScreenAtEye(Y,ta,Z);return y(S,Y,wa)}function H(S,Y){return y(S,Y,null)}function D(S,Y,ta){if(y(S,Y,ta))return ta;S=M(S,Y,q.sv3d.get());p.add(ta,Y.origin,
p.scale(q.sv3d.get(),Y.direction,p.distance(Y.origin,S)/p.length(Y.direction)));return ta}function M(S,Y,ta){const wa=q.sv3d.get(),G=q.sm4d.get();p.cross(wa,Y.origin,Y.direction);const I=h(S);p.cross(ta,wa,Y.origin);p.scale(ta,ta,1/p.length(ta)*I);S=L(S,Y.origin);Y=C.angle(Y.origin,ta);k.identity(G);k.rotate(G,G,Y+S,wa);p.transformMat4(ta,ta,G);return ta}function U(S,Y,ta){if(y(S,Y,ta))return ta;w.closestPoint(Y,F(S),ta);return R(S,ta,ta)}function R(S,Y,ta){Y=p.subtract(q.sv3d.get(),Y,F(S));Y=p.scale(q.sv3d.get(),
Y,S[3]/p.length(Y));return p.add(ta,Y,F(S))}function J(S,Y){Y=p.subtract(q.sv3d.get(),Y,F(S));Y=p.squaredLength(Y);return Math.sqrt(Math.abs(Y-S[3]*S[3]))}function L(S,Y){Y=p.subtract(q.sv3d.get(),Y,F(S));Y=p.length(Y);S=h(S);return v.acosClamped(S/(S+Math.abs(S-Y)))}function N(S,Y,ta,wa){S=p.subtract(Q,Y,F(S));switch(ta){case 0:return ta=b.cartesianToSpherical(S,Q)[2],p.set(wa,-Math.sin(ta),Math.cos(ta),0);case 1:return S=b.cartesianToSpherical(S,Q),ta=S[1],S=S[2],Y=Math.sin(ta),p.set(wa,-Y*Math.cos(S),
-Y*Math.sin(S),Math.cos(ta));case 2:return p.normalize(wa,S)}}function V(S,Y){Y=p.subtract(P,Y,F(S));return p.length(Y)-S[3]}function T(S,Y,ta,wa){const G=V(S,Y);S=N(S,Y,2,P);ta=p.scale(P,S,ta-G);p.add(wa,Y,ta);return wa}const W=A.getLogger("esri.views.3d.support.geometryUtils.sphere"),Q=t.create(),Z=w.create(),O=t.create(),P=t.create();Object.freeze(O);g=Object.freeze({__proto__:null,create:x,copy:c,fromCenterAndRadius:m,wrap:f,clear:e,fromRadius:d,getRadius:h,getCenter:F,fromValues:E,elevate:u,
setExtent:z,intersectRay:y,intersectScreen:B,intersectsRay:H,intersectRayClosestSilhouette:D,closestPointOnSilhouette:M,closestPoint:U,projectPoint:R,distanceToSilhouette:J,angleToSilhouette:L,axisAt:N,altitudeAt:V,setAltitudeAt:T});a.altitudeAt=V;a.angleToSilhouette=L;a.axisAt=N;a.clear=e;a.closestPoint=U;a.closestPointOnSilhouette=M;a.copy=c;a.create=x;a.distanceToSilhouette=J;a.elevate=u;a.fromCenterAndRadius=m;a.fromRadius=d;a.fromValues=E;a.getCenter=F;a.getRadius=h;a.intersectRay=y;a.intersectRayClosestSilhouette=
D;a.intersectScreen=B;a.intersectsRay=H;a.projectPoint=R;a.setAltitudeAt=T;a.setExtent=z;a.sphereModule=g;a.wrap=f})},"esri/chunks/mat4":function(){define(["exports","./vec3f64","./common"],function(a,g,r){function A(G,I){G[0]=I[0];G[1]=I[1];G[2]=I[2];G[3]=I[3];G[4]=I[4];G[5]=I[5];G[6]=I[6];G[7]=I[7];G[8]=I[8];G[9]=I[9];G[10]=I[10];G[11]=I[11];G[12]=I[12];G[13]=I[13];G[14]=I[14];G[15]=I[15];return G}function v(G,I,ca,ia,ja,la,da,ka,X,ha,fa,K,ba,ea,aa,pa,na){G[0]=I;G[1]=ca;G[2]=ia;G[3]=ja;G[4]=la;
G[5]=da;G[6]=ka;G[7]=X;G[8]=ha;G[9]=fa;G[10]=K;G[11]=ba;G[12]=ea;G[13]=aa;G[14]=pa;G[15]=na;return G}function t(G){G[0]=1;G[1]=0;G[2]=0;G[3]=0;G[4]=0;G[5]=1;G[6]=0;G[7]=0;G[8]=0;G[9]=0;G[10]=1;G[11]=0;G[12]=0;G[13]=0;G[14]=0;G[15]=1;return G}function p(G,I){if(G===I){const ca=I[1],ia=I[2],ja=I[3],la=I[6],da=I[7],ka=I[11];G[1]=I[4];G[2]=I[8];G[3]=I[12];G[4]=ca;G[6]=I[9];G[7]=I[13];G[8]=ia;G[9]=la;G[11]=I[14];G[12]=ja;G[13]=da;G[14]=ka}else G[0]=I[0],G[1]=I[4],G[2]=I[8],G[3]=I[12],G[4]=I[1],G[5]=I[5],
G[6]=I[9],G[7]=I[13],G[8]=I[2],G[9]=I[6],G[10]=I[10],G[11]=I[14],G[12]=I[3],G[13]=I[7],G[14]=I[11],G[15]=I[15];return G}function b(G,I){const ca=I[0],ia=I[1],ja=I[2],la=I[3],da=I[4],ka=I[5],X=I[6],ha=I[7],fa=I[8],K=I[9],ba=I[10],ea=I[11],aa=I[12],pa=I[13],na=I[14];I=I[15];const ra=ca*ka-ia*da,va=ca*X-ja*da,qa=ca*ha-la*da,xa=ia*X-ja*ka,ua=ia*ha-la*ka,za=ja*ha-la*X,Ba=fa*pa-K*aa,Ea=fa*na-ba*aa,Ha=fa*I-ea*aa,Oa=K*na-ba*pa,Pa=K*I-ea*pa,Ja=ba*I-ea*na;let Ka=ra*Ja-va*Pa+qa*Oa+xa*Ha-ua*Ea+za*Ba;if(!Ka)return null;
Ka=1/Ka;G[0]=(ka*Ja-X*Pa+ha*Oa)*Ka;G[1]=(ja*Pa-ia*Ja-la*Oa)*Ka;G[2]=(pa*za-na*ua+I*xa)*Ka;G[3]=(ba*ua-K*za-ea*xa)*Ka;G[4]=(X*Ha-da*Ja-ha*Ea)*Ka;G[5]=(ca*Ja-ja*Ha+la*Ea)*Ka;G[6]=(na*qa-aa*za-I*va)*Ka;G[7]=(fa*za-ba*qa+ea*va)*Ka;G[8]=(da*Pa-ka*Ha+ha*Ba)*Ka;G[9]=(ia*Ha-ca*Pa-la*Ba)*Ka;G[10]=(aa*ua-pa*qa+I*ra)*Ka;G[11]=(K*qa-fa*ua-ea*ra)*Ka;G[12]=(ka*Ea-da*Oa-X*Ba)*Ka;G[13]=(ca*Oa-ia*Ea+ja*Ba)*Ka;G[14]=(pa*va-aa*xa-na*ra)*Ka;G[15]=(fa*xa-K*va+ba*ra)*Ka;return G}function k(G,I){const ca=I[0],ia=I[1],ja=
I[2],la=I[3],da=I[4],ka=I[5],X=I[6],ha=I[7],fa=I[8],K=I[9],ba=I[10],ea=I[11],aa=I[12],pa=I[13],na=I[14];I=I[15];G[0]=ka*(ba*I-ea*na)-K*(X*I-ha*na)+pa*(X*ea-ha*ba);G[1]=-(ia*(ba*I-ea*na)-K*(ja*I-la*na)+pa*(ja*ea-la*ba));G[2]=ia*(X*I-ha*na)-ka*(ja*I-la*na)+pa*(ja*ha-la*X);G[3]=-(ia*(X*ea-ha*ba)-ka*(ja*ea-la*ba)+K*(ja*ha-la*X));G[4]=-(da*(ba*I-ea*na)-fa*(X*I-ha*na)+aa*(X*ea-ha*ba));G[5]=ca*(ba*I-ea*na)-fa*(ja*I-la*na)+aa*(ja*ea-la*ba);G[6]=-(ca*(X*I-ha*na)-da*(ja*I-la*na)+aa*(ja*ha-la*X));G[7]=ca*(X*
ea-ha*ba)-da*(ja*ea-la*ba)+fa*(ja*ha-la*X);G[8]=da*(K*I-ea*pa)-fa*(ka*I-ha*pa)+aa*(ka*ea-ha*K);G[9]=-(ca*(K*I-ea*pa)-fa*(ia*I-la*pa)+aa*(ia*ea-la*K));G[10]=ca*(ka*I-ha*pa)-da*(ia*I-la*pa)+aa*(ia*ha-la*ka);G[11]=-(ca*(ka*ea-ha*K)-da*(ia*ea-la*K)+fa*(ia*ha-la*ka));G[12]=-(da*(K*na-ba*pa)-fa*(ka*na-X*pa)+aa*(ka*ba-X*K));G[13]=ca*(K*na-ba*pa)-fa*(ia*na-ja*pa)+aa*(ia*ba-ja*K);G[14]=-(ca*(ka*na-X*pa)-da*(ia*na-ja*pa)+aa*(ia*X-ja*ka));G[15]=ca*(ka*ba-X*K)-da*(ia*ba-ja*K)+fa*(ia*X-ja*ka);return G}function n(G){const I=
G[0],ca=G[1],ia=G[2],ja=G[3],la=G[4],da=G[5],ka=G[6],X=G[7],ha=G[8],fa=G[9],K=G[10],ba=G[11],ea=G[12],aa=G[13],pa=G[14];G=G[15];return(I*da-ca*la)*(K*G-ba*pa)-(I*ka-ia*la)*(fa*G-ba*aa)+(I*X-ja*la)*(fa*pa-K*aa)+(ca*ka-ia*da)*(ha*G-ba*ea)-(ca*X-ja*da)*(ha*pa-K*ea)+(ia*X-ja*ka)*(ha*aa-fa*ea)}function l(G,I,ca){const ia=I[0],ja=I[1],la=I[2],da=I[3],ka=I[4],X=I[5],ha=I[6],fa=I[7],K=I[8],ba=I[9],ea=I[10],aa=I[11],pa=I[12],na=I[13],ra=I[14];I=I[15];let va=ca[0],qa=ca[1],xa=ca[2],ua=ca[3];G[0]=va*ia+qa*ka+
xa*K+ua*pa;G[1]=va*ja+qa*X+xa*ba+ua*na;G[2]=va*la+qa*ha+xa*ea+ua*ra;G[3]=va*da+qa*fa+xa*aa+ua*I;va=ca[4];qa=ca[5];xa=ca[6];ua=ca[7];G[4]=va*ia+qa*ka+xa*K+ua*pa;G[5]=va*ja+qa*X+xa*ba+ua*na;G[6]=va*la+qa*ha+xa*ea+ua*ra;G[7]=va*da+qa*fa+xa*aa+ua*I;va=ca[8];qa=ca[9];xa=ca[10];ua=ca[11];G[8]=va*ia+qa*ka+xa*K+ua*pa;G[9]=va*ja+qa*X+xa*ba+ua*na;G[10]=va*la+qa*ha+xa*ea+ua*ra;G[11]=va*da+qa*fa+xa*aa+ua*I;va=ca[12];qa=ca[13];xa=ca[14];ua=ca[15];G[12]=va*ia+qa*ka+xa*K+ua*pa;G[13]=va*ja+qa*X+xa*ba+ua*na;G[14]=
va*la+qa*ha+xa*ea+ua*ra;G[15]=va*da+qa*fa+xa*aa+ua*I;return G}function q(G,I,ca){const ia=ca[0],ja=ca[1];ca=ca[2];let la=void 0,da=void 0,ka=void 0,X=void 0,ha=void 0,fa=void 0,K=void 0,ba=void 0,ea=void 0,aa=void 0,pa=void 0,na=void 0;I===G?(G[12]=I[0]*ia+I[4]*ja+I[8]*ca+I[12],G[13]=I[1]*ia+I[5]*ja+I[9]*ca+I[13],G[14]=I[2]*ia+I[6]*ja+I[10]*ca+I[14],G[15]=I[3]*ia+I[7]*ja+I[11]*ca+I[15]):(la=I[0],da=I[1],ka=I[2],X=I[3],ha=I[4],fa=I[5],K=I[6],ba=I[7],ea=I[8],aa=I[9],pa=I[10],na=I[11],G[0]=la,G[1]=da,
G[2]=ka,G[3]=X,G[4]=ha,G[5]=fa,G[6]=K,G[7]=ba,G[8]=ea,G[9]=aa,G[10]=pa,G[11]=na,G[12]=la*ia+ha*ja+ea*ca+I[12],G[13]=da*ia+fa*ja+aa*ca+I[13],G[14]=ka*ia+K*ja+pa*ca+I[14],G[15]=X*ia+ba*ja+na*ca+I[15]);return G}function C(G,I,ca){const ia=ca[0],ja=ca[1];ca=ca[2];G[0]=I[0]*ia;G[1]=I[1]*ia;G[2]=I[2]*ia;G[3]=I[3]*ia;G[4]=I[4]*ja;G[5]=I[5]*ja;G[6]=I[6]*ja;G[7]=I[7]*ja;G[8]=I[8]*ca;G[9]=I[9]*ca;G[10]=I[10]*ca;G[11]=I[11]*ca;G[12]=I[12];G[13]=I[13];G[14]=I[14];G[15]=I[15];return G}function w(G,I,ca,ia){let ja=
ia[0],la=ia[1];ia=ia[2];let da=Math.sqrt(ja*ja+la*la+ia*ia);var ka=void 0,X=void 0;let ha=void 0,fa=void 0,K=void 0,ba=void 0,ea=void 0,aa=void 0,pa=void 0,na=void 0,ra=void 0,va=void 0,qa=void 0,xa=void 0,ua=void 0,za=void 0,Ba=void 0,Ea=void 0,Ha=void 0,Oa=void 0,Pa=void 0,Ja=void 0;X=ka=void 0;if(da<r.EPSILON)return null;da=1/da;ja*=da;la*=da;ia*=da;ka=Math.sin(ca);X=Math.cos(ca);ha=1-X;fa=I[0];K=I[1];ba=I[2];ea=I[3];aa=I[4];pa=I[5];na=I[6];ra=I[7];va=I[8];qa=I[9];xa=I[10];ua=I[11];za=ja*ja*ha+
X;Ba=la*ja*ha+ia*ka;Ea=ia*ja*ha-la*ka;Ha=ja*la*ha-ia*ka;Oa=la*la*ha+X;Pa=ia*la*ha+ja*ka;Ja=ja*ia*ha+la*ka;ka=la*ia*ha-ja*ka;X=ia*ia*ha+X;G[0]=fa*za+aa*Ba+va*Ea;G[1]=K*za+pa*Ba+qa*Ea;G[2]=ba*za+na*Ba+xa*Ea;G[3]=ea*za+ra*Ba+ua*Ea;G[4]=fa*Ha+aa*Oa+va*Pa;G[5]=K*Ha+pa*Oa+qa*Pa;G[6]=ba*Ha+na*Oa+xa*Pa;G[7]=ea*Ha+ra*Oa+ua*Pa;G[8]=fa*Ja+aa*ka+va*X;G[9]=K*Ja+pa*ka+qa*X;G[10]=ba*Ja+na*ka+xa*X;G[11]=ea*Ja+ra*ka+ua*X;I!==G&&(G[12]=I[12],G[13]=I[13],G[14]=I[14],G[15]=I[15]);return G}function x(G,I,ca){const ia=
Math.sin(ca);ca=Math.cos(ca);const ja=I[4],la=I[5],da=I[6],ka=I[7],X=I[8],ha=I[9],fa=I[10],K=I[11];I!==G&&(G[0]=I[0],G[1]=I[1],G[2]=I[2],G[3]=I[3],G[12]=I[12],G[13]=I[13],G[14]=I[14],G[15]=I[15]);G[4]=ja*ca+X*ia;G[5]=la*ca+ha*ia;G[6]=da*ca+fa*ia;G[7]=ka*ca+K*ia;G[8]=X*ca-ja*ia;G[9]=ha*ca-la*ia;G[10]=fa*ca-da*ia;G[11]=K*ca-ka*ia;return G}function c(G,I,ca){const ia=Math.sin(ca);ca=Math.cos(ca);const ja=I[0],la=I[1],da=I[2],ka=I[3],X=I[8],ha=I[9],fa=I[10],K=I[11];I!==G&&(G[4]=I[4],G[5]=I[5],G[6]=I[6],
G[7]=I[7],G[12]=I[12],G[13]=I[13],G[14]=I[14],G[15]=I[15]);G[0]=ja*ca-X*ia;G[1]=la*ca-ha*ia;G[2]=da*ca-fa*ia;G[3]=ka*ca-K*ia;G[8]=ja*ia+X*ca;G[9]=la*ia+ha*ca;G[10]=da*ia+fa*ca;G[11]=ka*ia+K*ca;return G}function m(G,I,ca){const ia=Math.sin(ca);ca=Math.cos(ca);const ja=I[0],la=I[1],da=I[2],ka=I[3],X=I[4],ha=I[5],fa=I[6],K=I[7];I!==G&&(G[8]=I[8],G[9]=I[9],G[10]=I[10],G[11]=I[11],G[12]=I[12],G[13]=I[13],G[14]=I[14],G[15]=I[15]);G[0]=ja*ca+X*ia;G[1]=la*ca+ha*ia;G[2]=da*ca+fa*ia;G[3]=ka*ca+K*ia;G[4]=X*
ca-ja*ia;G[5]=ha*ca-la*ia;G[6]=fa*ca-da*ia;G[7]=K*ca-ka*ia;return G}function f(G,I){G[0]=1;G[1]=0;G[2]=0;G[3]=0;G[4]=0;G[5]=1;G[6]=0;G[7]=0;G[8]=0;G[9]=0;G[10]=1;G[11]=0;G[12]=I[0];G[13]=I[1];G[14]=I[2];G[15]=1;return G}function e(G,I){G[0]=I[0];G[1]=0;G[2]=0;G[3]=0;G[4]=0;G[5]=I[1];G[6]=0;G[7]=0;G[8]=0;G[9]=0;G[10]=I[2];G[11]=0;G[12]=0;G[13]=0;G[14]=0;G[15]=1;return G}function d(G,I,ca){let ia=ca[0],ja=ca[1];ca=ca[2];let la=Math.sqrt(ia*ia+ja*ja+ca*ca),da=void 0,ka=void 0,X=void 0;if(la<r.EPSILON)return null;
la=1/la;ia*=la;ja*=la;ca*=la;da=Math.sin(I);ka=Math.cos(I);X=1-ka;G[0]=ia*ia*X+ka;G[1]=ja*ia*X+ca*da;G[2]=ca*ia*X-ja*da;G[3]=0;G[4]=ia*ja*X-ca*da;G[5]=ja*ja*X+ka;G[6]=ca*ja*X+ia*da;G[7]=0;G[8]=ia*ca*X+ja*da;G[9]=ja*ca*X-ia*da;G[10]=ca*ca*X+ka;G[11]=0;G[12]=0;G[13]=0;G[14]=0;G[15]=1;return G}function h(G,I){const ca=Math.sin(I);I=Math.cos(I);G[0]=1;G[1]=0;G[2]=0;G[3]=0;G[4]=0;G[5]=I;G[6]=ca;G[7]=0;G[8]=0;G[9]=-ca;G[10]=I;G[11]=0;G[12]=0;G[13]=0;G[14]=0;G[15]=1;return G}function F(G,I){const ca=Math.sin(I);
I=Math.cos(I);G[0]=I;G[1]=0;G[2]=-ca;G[3]=0;G[4]=0;G[5]=1;G[6]=0;G[7]=0;G[8]=ca;G[9]=0;G[10]=I;G[11]=0;G[12]=0;G[13]=0;G[14]=0;G[15]=1;return G}function E(G,I){const ca=Math.sin(I);I=Math.cos(I);G[0]=I;G[1]=ca;G[2]=0;G[3]=0;G[4]=-ca;G[5]=I;G[6]=0;G[7]=0;G[8]=0;G[9]=0;G[10]=1;G[11]=0;G[12]=0;G[13]=0;G[14]=0;G[15]=1;return G}function u(G,I,ca){var ia=I[0],ja=I[1],la=I[2],da=I[3],ka=ia+ia,X=ja+ja;const ha=la+la;I=ia*ka;const fa=ia*X;ia*=ha;const K=ja*X;ja*=ha;la*=ha;ka*=da;X*=da;da*=ha;G[0]=1-(K+la);
G[1]=fa+da;G[2]=ia-X;G[3]=0;G[4]=fa-da;G[5]=1-(I+la);G[6]=ja+ka;G[7]=0;G[8]=ia+X;G[9]=ja-ka;G[10]=1-(I+K);G[11]=0;G[12]=ca[0];G[13]=ca[1];G[14]=ca[2];G[15]=1;return G}function z(G,I){const ca=wa,ia=-I[0],ja=-I[1],la=-I[2],da=I[3],ka=I[4],X=I[5],ha=I[6],fa=I[7],K=ia*ia+ja*ja+la*la+da*da;0<K?(ca[0]=2*(ka*da+fa*ia+X*la-ha*ja)/K,ca[1]=2*(X*da+fa*ja+ha*ia-ka*la)/K,ca[2]=2*(ha*da+fa*la+ka*ja-X*ia)/K):(ca[0]=2*(ka*da+fa*ia+X*la-ha*ja),ca[1]=2*(X*da+fa*ja+ha*ia-ka*la),ca[2]=2*(ha*da+fa*la+ka*ja-X*ia));u(G,
I,ca);return G}function y(G,I){G[0]=I[12];G[1]=I[13];G[2]=I[14];return G}function B(G,I){const ca=I[0],ia=I[1],ja=I[2],la=I[4],da=I[5],ka=I[6],X=I[8],ha=I[9];I=I[10];G[0]=Math.sqrt(ca*ca+ia*ia+ja*ja);G[1]=Math.sqrt(la*la+da*da+ka*ka);G[2]=Math.sqrt(X*X+ha*ha+I*I);return G}function H(G,I){const ca=I[0]+I[5]+I[10];let ia=0;0<ca?(ia=2*Math.sqrt(ca+1),G[3]=.25*ia,G[0]=(I[6]-I[9])/ia,G[1]=(I[8]-I[2])/ia,G[2]=(I[1]-I[4])/ia):I[0]>I[5]&&I[0]>I[10]?(ia=2*Math.sqrt(1+I[0]-I[5]-I[10]),G[3]=(I[6]-I[9])/ia,G[0]=
.25*ia,G[1]=(I[1]+I[4])/ia,G[2]=(I[8]+I[2])/ia):I[5]>I[10]?(ia=2*Math.sqrt(1+I[5]-I[0]-I[10]),G[3]=(I[8]-I[2])/ia,G[0]=(I[1]+I[4])/ia,G[1]=.25*ia,G[2]=(I[6]+I[9])/ia):(ia=2*Math.sqrt(1+I[10]-I[0]-I[5]),G[3]=(I[1]-I[4])/ia,G[0]=(I[8]+I[2])/ia,G[1]=(I[6]+I[9])/ia,G[2]=.25*ia);return G}function D(G,I,ca,ia){var ja=I[0],la=I[1],da=I[2],ka=I[3],X=ja+ja,ha=la+la,fa=da+da;I=ja*X;const K=ja*ha;ja*=fa;const ba=la*ha;la*=fa;da*=fa;X*=ka;ha*=ka;ka*=fa;fa=ia[0];const ea=ia[1];ia=ia[2];G[0]=(1-(ba+da))*fa;G[1]=
(K+ka)*fa;G[2]=(ja-ha)*fa;G[3]=0;G[4]=(K-ka)*ea;G[5]=(1-(I+da))*ea;G[6]=(la+X)*ea;G[7]=0;G[8]=(ja+ha)*ia;G[9]=(la-X)*ia;G[10]=(1-(I+ba))*ia;G[11]=0;G[12]=ca[0];G[13]=ca[1];G[14]=ca[2];G[15]=1;return G}function M(G,I,ca,ia,ja){var la=I[0],da=I[1],ka=I[2],X=I[3],ha=la+la,fa=da+da,K=ka+ka;I=la*ha;var ba=la*fa,ea=la*K;la=da*fa;da*=K;var aa=ka*K;ka=X*ha;fa*=X;const pa=X*K;var na=ia[0],ra=ia[1];K=ia[2];ia=ja[0];X=ja[1];ja=ja[2];ha=(1-(la+aa))*na;const va=(ba+pa)*na;na*=ea-fa;ba=(ba-pa)*ra;aa=(1-(I+aa))*
ra;ra*=da+ka;ea=(ea+fa)*K;da=(da-ka)*K;I=(1-(I+la))*K;G[0]=ha;G[1]=va;G[2]=na;G[3]=0;G[4]=ba;G[5]=aa;G[6]=ra;G[7]=0;G[8]=ea;G[9]=da;G[10]=I;G[11]=0;G[12]=ca[0]+ia-(ha*ia+ba*X+ea*ja);G[13]=ca[1]+X-(va*ia+aa*X+da*ja);G[14]=ca[2]+ja-(na*ia+ra*X+I*ja);G[15]=1;return G}function U(G,I){var ca=I[0],ia=I[1],ja=I[2];I=I[3];var la=ca+ca,da=ia+ia;const ka=ja+ja;ca*=la;const X=ia*la;ia*=da;const ha=ja*la,fa=ja*da;ja*=ka;la*=I;da*=I;I*=ka;G[0]=1-ia-ja;G[1]=X+I;G[2]=ha-da;G[3]=0;G[4]=X-I;G[5]=1-ca-ja;G[6]=fa+la;
G[7]=0;G[8]=ha+da;G[9]=fa-la;G[10]=1-ca-ia;G[11]=0;G[12]=0;G[13]=0;G[14]=0;G[15]=1;return G}function R(G,I,ca,ia,ja,la,da){const ka=1/(ca-I),X=1/(ja-ia),ha=1/(la-da);G[0]=2*la*ka;G[1]=0;G[2]=0;G[3]=0;G[4]=0;G[5]=2*la*X;G[6]=0;G[7]=0;G[8]=(ca+I)*ka;G[9]=(ja+ia)*X;G[10]=(da+la)*ha;G[11]=-1;G[12]=0;G[13]=0;G[14]=da*la*2*ha;G[15]=0;return G}function J(G,I,ca,ia,ja){I=1/Math.tan(I/2);let la=void 0;G[0]=I/ca;G[1]=0;G[2]=0;G[3]=0;G[4]=0;G[5]=I;G[6]=0;G[7]=0;G[8]=0;G[9]=0;G[11]=-1;G[12]=0;G[13]=0;G[15]=0;
null!=ja&&Infinity!==ja?(la=1/(ia-ja),G[10]=(ja+ia)*la,G[14]=2*ja*ia*la):(G[10]=-1,G[14]=-2*ia);return G}function L(G,I,ca,ia){const ja=Math.tan(I.upDegrees*Math.PI/180),la=Math.tan(I.downDegrees*Math.PI/180),da=Math.tan(I.leftDegrees*Math.PI/180);I=Math.tan(I.rightDegrees*Math.PI/180);const ka=2/(da+I),X=2/(ja+la);G[0]=ka;G[1]=0;G[2]=0;G[3]=0;G[4]=0;G[5]=X;G[6]=0;G[7]=0;G[8]=-((da-I)*ka*.5);G[9]=(ja-la)*X*.5;G[10]=ia/(ca-ia);G[11]=-1;G[12]=0;G[13]=0;G[14]=ia*ca/(ca-ia);G[15]=0;return G}function N(G,
I,ca,ia,ja,la,da){const ka=1/(I-ca),X=1/(ia-ja),ha=1/(la-da);G[0]=-2*ka;G[1]=0;G[2]=0;G[3]=0;G[4]=0;G[5]=-2*X;G[6]=0;G[7]=0;G[8]=0;G[9]=0;G[10]=2*ha;G[11]=0;G[12]=(I+ca)*ka;G[13]=(ja+ia)*X;G[14]=(da+la)*ha;G[15]=1;return G}function V(G,I,ca,ia){let ja=void 0,la=void 0;var da=void 0,ka=void 0;let X=void 0,ha=void 0;var fa=void 0,K=void 0;let ba=void 0,ea=void 0;const aa=I[0],pa=I[1];I=I[2];da=ia[0];ka=ia[1];ia=ia[2];fa=ca[0];K=ca[1];ca=ca[2];if(Math.abs(aa-fa)<r.EPSILON&&Math.abs(pa-K)<r.EPSILON&&
Math.abs(I-ca)<r.EPSILON)return t(G);fa=aa-fa;K=pa-K;ba=I-ca;ea=1/Math.sqrt(fa*fa+K*K+ba*ba);fa*=ea;K*=ea;ba*=ea;ja=ka*ba-ia*K;la=ia*fa-da*ba;da=da*K-ka*fa;(ea=Math.sqrt(ja*ja+la*la+da*da))?(ea=1/ea,ja*=ea,la*=ea,da*=ea):da=la=ja=0;ka=K*da-ba*la;X=ba*ja-fa*da;ha=fa*la-K*ja;(ea=Math.sqrt(ka*ka+X*X+ha*ha))?(ea=1/ea,ka*=ea,X*=ea,ha*=ea):ha=X=ka=0;G[0]=ja;G[1]=ka;G[2]=fa;G[3]=0;G[4]=la;G[5]=X;G[6]=K;G[7]=0;G[8]=da;G[9]=ha;G[10]=ba;G[11]=0;G[12]=-(ja*aa+la*pa+da*I);G[13]=-(ka*aa+X*pa+ha*I);G[14]=-(fa*
aa+K*pa+ba*I);G[15]=1;return G}function T(G,I,ca,ia){const ja=I[0],la=I[1];I=I[2];var da=ia[0];const ka=ia[1];var X=ia[2];ia=ja-ca[0];let ha=la-ca[1];ca=I-ca[2];let fa=ia*ia+ha*ha+ca*ca;0<fa&&(fa=1/Math.sqrt(fa),ia*=fa,ha*=fa,ca*=fa);let K=ka*ca-X*ha;X=X*ia-da*ca;da=da*ha-ka*ia;fa=K*K+X*X+da*da;0<fa&&(fa=1/Math.sqrt(fa),K*=fa,X*=fa,da*=fa);G[0]=K;G[1]=X;G[2]=da;G[3]=0;G[4]=ha*da-ca*X;G[5]=ca*K-ia*da;G[6]=ia*X-ha*K;G[7]=0;G[8]=ia;G[9]=ha;G[10]=ca;G[11]=0;G[12]=ja;G[13]=la;G[14]=I;G[15]=1;return G}
function W(G){return"mat4("+G[0]+", "+G[1]+", "+G[2]+", "+G[3]+", "+G[4]+", "+G[5]+", "+G[6]+", "+G[7]+", "+G[8]+", "+G[9]+", "+G[10]+", "+G[11]+", "+G[12]+", "+G[13]+", "+G[14]+", "+G[15]+")"}function Q(G){return Math.sqrt(G[0]**2+G[1]**2+G[2]**2+G[3]**2+G[4]**2+G[5]**2+G[6]**2+G[7]**2+G[8]**2+G[9]**2+G[10]**2+G[11]**2+G[12]**2+G[13]**2+G[14]**2+G[15]**2)}function Z(G,I,ca){G[0]=I[0]+ca[0];G[1]=I[1]+ca[1];G[2]=I[2]+ca[2];G[3]=I[3]+ca[3];G[4]=I[4]+ca[4];G[5]=I[5]+ca[5];G[6]=I[6]+ca[6];G[7]=I[7]+ca[7];
G[8]=I[8]+ca[8];G[9]=I[9]+ca[9];G[10]=I[10]+ca[10];G[11]=I[11]+ca[11];G[12]=I[12]+ca[12];G[13]=I[13]+ca[13];G[14]=I[14]+ca[14];G[15]=I[15]+ca[15];return G}function O(G,I,ca){G[0]=I[0]-ca[0];G[1]=I[1]-ca[1];G[2]=I[2]-ca[2];G[3]=I[3]-ca[3];G[4]=I[4]-ca[4];G[5]=I[5]-ca[5];G[6]=I[6]-ca[6];G[7]=I[7]-ca[7];G[8]=I[8]-ca[8];G[9]=I[9]-ca[9];G[10]=I[10]-ca[10];G[11]=I[11]-ca[11];G[12]=I[12]-ca[12];G[13]=I[13]-ca[13];G[14]=I[14]-ca[14];G[15]=I[15]-ca[15];return G}function P(G,I,ca){G[0]=I[0]*ca;G[1]=I[1]*ca;
G[2]=I[2]*ca;G[3]=I[3]*ca;G[4]=I[4]*ca;G[5]=I[5]*ca;G[6]=I[6]*ca;G[7]=I[7]*ca;G[8]=I[8]*ca;G[9]=I[9]*ca;G[10]=I[10]*ca;G[11]=I[11]*ca;G[12]=I[12]*ca;G[13]=I[13]*ca;G[14]=I[14]*ca;G[15]=I[15]*ca;return G}function S(G,I,ca,ia){G[0]=I[0]+ca[0]*ia;G[1]=I[1]+ca[1]*ia;G[2]=I[2]+ca[2]*ia;G[3]=I[3]+ca[3]*ia;G[4]=I[4]+ca[4]*ia;G[5]=I[5]+ca[5]*ia;G[6]=I[6]+ca[6]*ia;G[7]=I[7]+ca[7]*ia;G[8]=I[8]+ca[8]*ia;G[9]=I[9]+ca[9]*ia;G[10]=I[10]+ca[10]*ia;G[11]=I[11]+ca[11]*ia;G[12]=I[12]+ca[12]*ia;G[13]=I[13]+ca[13]*ia;
G[14]=I[14]+ca[14]*ia;G[15]=I[15]+ca[15]*ia;return G}function Y(G,I){return G[0]===I[0]&&G[1]===I[1]&&G[2]===I[2]&&G[3]===I[3]&&G[4]===I[4]&&G[5]===I[5]&&G[6]===I[6]&&G[7]===I[7]&&G[8]===I[8]&&G[9]===I[9]&&G[10]===I[10]&&G[11]===I[11]&&G[12]===I[12]&&G[13]===I[13]&&G[14]===I[14]&&G[15]===I[15]}function ta(G,I){const ca=G[0],ia=G[1],ja=G[2],la=G[3],da=G[4],ka=G[5],X=G[6],ha=G[7],fa=G[8],K=G[9],ba=G[10],ea=G[11],aa=G[12],pa=G[13],na=G[14];G=G[15];const ra=I[0],va=I[1],qa=I[2],xa=I[3],ua=I[4],za=I[5],
Ba=I[6],Ea=I[7],Ha=I[8],Oa=I[9],Pa=I[10],Ja=I[11],Ka=I[12],Ia=I[13],Ra=I[14];I=I[15];return Math.abs(ca-ra)<=r.EPSILON*Math.max(1,Math.abs(ca),Math.abs(ra))&&Math.abs(ia-va)<=r.EPSILON*Math.max(1,Math.abs(ia),Math.abs(va))&&Math.abs(ja-qa)<=r.EPSILON*Math.max(1,Math.abs(ja),Math.abs(qa))&&Math.abs(la-xa)<=r.EPSILON*Math.max(1,Math.abs(la),Math.abs(xa))&&Math.abs(da-ua)<=r.EPSILON*Math.max(1,Math.abs(da),Math.abs(ua))&&Math.abs(ka-za)<=r.EPSILON*Math.max(1,Math.abs(ka),Math.abs(za))&&Math.abs(X-Ba)<=
r.EPSILON*Math.max(1,Math.abs(X),Math.abs(Ba))&&Math.abs(ha-Ea)<=r.EPSILON*Math.max(1,Math.abs(ha),Math.abs(Ea))&&Math.abs(fa-Ha)<=r.EPSILON*Math.max(1,Math.abs(fa),Math.abs(Ha))&&Math.abs(K-Oa)<=r.EPSILON*Math.max(1,Math.abs(K),Math.abs(Oa))&&Math.abs(ba-Pa)<=r.EPSILON*Math.max(1,Math.abs(ba),Math.abs(Pa))&&Math.abs(ea-Ja)<=r.EPSILON*Math.max(1,Math.abs(ea),Math.abs(Ja))&&Math.abs(aa-Ka)<=r.EPSILON*Math.max(1,Math.abs(aa),Math.abs(Ka))&&Math.abs(pa-Ia)<=r.EPSILON*Math.max(1,Math.abs(pa),Math.abs(Ia))&&
Math.abs(na-Ra)<=r.EPSILON*Math.max(1,Math.abs(na),Math.abs(Ra))&&Math.abs(G-I)<=r.EPSILON*Math.max(1,Math.abs(G),Math.abs(I))}const wa=g.create();g=Object.freeze({__proto__:null,copy:A,set:v,identity:t,transpose:p,invert:b,adjoint:k,determinant:n,multiply:l,translate:q,scale:C,rotate:w,rotateX:x,rotateY:c,rotateZ:m,fromTranslation:f,fromScaling:e,fromRotation:d,fromXRotation:h,fromYRotation:F,fromZRotation:E,fromRotationTranslation:u,fromQuat2:z,getTranslation:y,getScaling:B,getRotation:H,fromRotationTranslationScale:D,
fromRotationTranslationScaleOrigin:M,fromQuat:U,frustum:R,perspective:J,perspectiveFromFieldOfView:L,ortho:N,lookAt:V,targetTo:T,str:W,frob:Q,add:Z,subtract:O,multiplyScalar:P,multiplyScalarAndAdd:S,exactEquals:Y,equals:ta,mul:l,sub:O});a.add=Z;a.adjoint=k;a.copy=A;a.determinant=n;a.equals=ta;a.exactEquals=Y;a.frob=Q;a.fromQuat=U;a.fromQuat2=z;a.fromRotation=d;a.fromRotationTranslation=u;a.fromRotationTranslationScale=D;a.fromRotationTranslationScaleOrigin=M;a.fromScaling=e;a.fromTranslation=f;a.fromXRotation=
h;a.fromYRotation=F;a.fromZRotation=E;a.frustum=R;a.getRotation=H;a.getScaling=B;a.getTranslation=y;a.identity=t;a.invert=b;a.lookAt=V;a.mat4=g;a.mul=l;a.multiply=l;a.multiplyScalar=P;a.multiplyScalarAndAdd=S;a.ortho=N;a.perspective=J;a.perspectiveFromFieldOfView=L;a.rotate=w;a.rotateX=x;a.rotateY=c;a.rotateZ=m;a.scale=C;a.set=v;a.str=W;a.sub=O;a.subtract=O;a.targetTo=T;a.translate=q;a.transpose=p})},"esri/chunks/plane":function(){define("exports ../core/maybe ../core/mathUtils ./vec3f64 ./vec3 ../views/3d/support/stack ./sphere".split(" "),
function(a,g,r,A,v,t,p){function b(P=O){return[P[0],P[1],P[2],P[3]]}function k(P,S,Y,ta){return l(P,S,Y,ta,t.sv4d.get())}function n(P,S=b()){return l(P[0],P[1],P[2],P[3],S)}function l(P,S,Y,ta,wa=b()){wa[0]=P;wa[1]=S;wa[2]=Y;wa[3]=ta;return wa}function q(P,S,Y=b()){v.copy(Y,P);Y[3]=S;return Y}function C(P,S,Y=b()){v.copy(Y,S);S=v.dot(S,S);1E-5<Math.abs(S-1)&&1E-12<S&&v.scale(Y,Y,1/Math.sqrt(S));m(Y,P,Y);return Y}function w(P,S,Y,ta=b()){return e(v.subtract(t.sv3d.get(),P,S),v.subtract(t.sv3d.get(),
Y,S),P,ta)}function x(P,S){return c(P,S,0,1,2)}function c(P,S,Y,ta,wa){if(3>P.count)return!1;P.getVec(Y,V);let G=ta,I=!1;for(;G<P.count-1&&!I;)P.getVec(G,T),G++,I=!v.exactEquals(V,T);if(!I)return!1;G=Math.max(G,wa);for(I=!1;G<P.count&&!I;)P.getVec(G,W),G++,v.subtract(Q,V,T),v.normalize(Q,Q),v.subtract(Z,T,W),v.normalize(Z,Z),I=!v.exactEquals(V,W)&&!v.exactEquals(T,W)&&.99619469809>Math.abs(v.dot(Q,Z));if(!I)return 0===Y&&1===ta&&2===wa?!1:c(P,S,0,1,2);w(V,T,W,S);return!0}function m(P,S,Y){P!==Y&&
n(P,Y);Y[3]=-v.dot(Y,S);return Y}function f(P,S){S[0]=-P[0];S[1]=-P[1];S[2]=-P[2];S[3]=-P[3];return S}function e(P,S,Y,ta=b()){P=v.cross(t.sv3d.get(),S,P);return C(Y,P,ta)}function d(P,S,Y){return g.isSome(S)?L(P,S.origin,S.direction,!0,!1,Y):!1}function h(P,S,Y){return L(P,S.origin,S.vector,!1,!1,Y)}function F(P,S,Y){return L(P,S.origin,S.vector,!1,!0,Y)}function E(P,S){return 0<=J(P,p.getCenter(S))-S[3]}function u(P,S){return 0>J(P,p.getCenter(S))+S[3]}function z(P,S){return 0<=J(P,S)}function y(P,
S){return 0>J(P,S)}function B(P,S){const Y=S[0],ta=S[1],wa=S[2],G=S[3],I=S[4];S=S[5];return 0<=P[0]*(0<P[0]?Y:G)+P[1]*(0<P[1]?ta:I)+P[2]*(0<P[2]?wa:S)+P[3]}function H(P,S){const Y=v.dot(P,S.ray.direction);P=-J(P,S.ray.origin);if(0>P&&0<=Y)return!1;if(-1E-6<Y&&1E-6>Y)return 0<P;if((0>P||0>Y)&&!(0>P&&0>Y))return!0;P/=Y;0<Y?P<S.c1&&(S.c1=P):P>S.c0&&(S.c0=P);return S.c0<=S.c1}function D(P,S){const Y=v.dot(P,S.ray.direction);P=-J(P,S.ray.origin);if(-1E-6<Y&&1E-6>Y)return 0<P;P/=Y;0<Y?P<S.c1&&(S.c1=P):
P>S.c0&&(S.c0=P);return S.c0<=S.c1}function M(P,S,Y){const ta=v.scale(t.sv3d.get(),P,-P[3]);S=v.subtract(t.sv3d.get(),S,ta);P=U(P,S,t.sv3d.get());v.add(Y,P,ta);return Y}function U(P,S,Y){P=v.scale(t.sv3d.get(),P,v.dot(P,S));v.subtract(Y,S,P);return Y}function R(P,S){return Math.abs(J(P,S))}function J(P,S){return v.dot(P,S)+P[3]}function L(P,S,Y,ta,wa,G){const I=v.dot(P,Y);if(0===I)return!1;P=-(v.dot(P,S)+P[3])/I;wa&&(P=ta?Math.max(0,P):r.clamp(P,0,1));if(0>P||!ta&&1<P)return!1;v.add(G,S,v.scale(G,
Y,P));return!0}function N(P){return P}const V=A.create(),T=A.create(),W=A.create(),Q=A.create(),Z=A.create(),O=[0,0,1,0];A=Object.freeze({__proto__:null,create:b,wrap:k,copy:n,fromValues:l,fromNormalAndOffset:q,fromPositionAndNormal:C,fromPoints:w,fromManyPoints:x,fromManyPointsSampleAt:c,setOffsetFromPoint:m,negate:f,fromVectorsAndPoint:e,intersectRay:d,intersectLineSegment:h,intersectLineSegmentClamp:F,isSphereFullyInside:E,isSphereFullyOutside:u,isPointInside:z,isPointOutside:y,isAABBFullyInside:B,
clip:H,clipInfinite:D,projectPoint:M,projectVector:U,distance:R,signedDistance:J,normal:N,UP:O});a.UP=O;a.clip=H;a.clipInfinite=D;a.copy=n;a.create=b;a.distance=R;a.fromManyPoints=x;a.fromManyPointsSampleAt=c;a.fromNormalAndOffset=q;a.fromPoints=w;a.fromPositionAndNormal=C;a.fromValues=l;a.fromVectorsAndPoint=e;a.intersectLineSegment=h;a.intersectLineSegmentClamp=F;a.intersectRay=d;a.isAABBFullyInside=B;a.isPointInside=z;a.isPointOutside=y;a.isSphereFullyInside=E;a.isSphereFullyOutside=u;a.negate=
f;a.normal=N;a.planeModule=A;a.projectPoint=M;a.projectVector=U;a.setOffsetFromPoint=m;a.signedDistance=J;a.wrap=k})},"esri/chunks/boundedPlane":function(){define("exports ../core/has ../core/Logger ../core/mathUtils ./vec3f64 ./vec3 ../views/3d/support/mathUtils ./mat4 ../core/ObjectStack ./mat4f64 ../views/3d/support/stack ./vector ./lineSegment ./ray ./plane".split(" "),function(a,g,r,A,v,t,p,b,k,n,l,q,C,w,x){function c(X=G){return{plane:x.create(X.plane),origin:v.clone(X.origin),basis1:v.clone(X.basis1),
basis2:v.clone(X.basis2)}}function m(X,ha,fa){const K=ja.get();K.origin=X;K.basis1=ha;K.basis2=fa;K.plane=x.wrap(0,0,0,0);h(K);return K}function f(X,ha=c()){return d(X.origin,X.basis1,X.basis2,ha)}function e(X,ha){t.copy(ha.origin,X.origin);t.copy(ha.basis1,X.basis1);t.copy(ha.basis2,X.basis2);x.copy(X.plane,ha.plane)}function d(X,ha,fa,K=c()){t.copy(K.origin,X);t.copy(K.basis1,ha);t.copy(K.basis2,fa);h(K);1E-6<Math.abs(t.dot(K.basis1,K.basis2)/(t.length(K.basis1)*t.length(K.basis2)))&&wa.warn("fromValues()",
"Provided basis vectors are not perpendicular");1E-6<Math.abs(t.dot(K.basis1,O(K)))&&wa.warn("fromValues()","Basis vectors and plane normal are not perpendicular");1E-6<Math.abs(-t.dot(O(K),K.origin)-K.plane[3])&&wa.warn("fromValues()","Plane offset is not consistent with plane origin");return K}function h(X){x.fromVectorsAndPoint(X.basis2,X.basis1,X.origin,X.plane)}function F(X,ha,fa){X!==fa&&f(X,fa);X=t.scale(l.sv3d.get(),O(X),ha);t.add(fa.origin,fa.origin,X);fa.plane[3]-=ha;return fa}function E(X,
ha,fa){u(ha,fa);F(fa,V(X,X.origin),fa);return fa}function u(X,ha=c()){const fa=(X[2]-X[0])/2,K=(X[3]-X[1])/2;t.set(ha.origin,X[0]+fa,X[1]+K,0);t.set(ha.basis1,fa,0,0);t.set(ha.basis2,0,K,0);x.fromValues(0,0,1,0,ha.plane);return ha}function z(X,ha,fa){return x.intersectRay(X.plane,ha,fa)?P(X,fa):!1}function y(X,ha,fa){if(z(X,ha,fa))return fa;X=B(X,ha,l.sv3d.get());t.add(fa,ha.origin,t.scale(l.sv3d.get(),ha.direction,t.distance(ha.origin,X)/t.length(ha.direction)));return fa}function B(X,ha,fa){const K=
I.get();var ba=I.get();ta(X,ha,K,ba);ba=Number.POSITIVE_INFINITY;for(const aa of la){var ea=Y(X,aa,ca.get());const pa=l.sv3d.get();x.intersectLineSegment(K,ea,pa)&&(ea=p.directionFromTo(l.sv3d.get(),ha.origin,pa),ea=Math.abs(A.acosClamped(t.dot(ha.direction,ea))),ea<ba&&(ba=ea,t.copy(fa,pa)))}return ba===Number.POSITIVE_INFINITY?H(X,ha,fa):fa}function H(X,ha,fa){if(z(X,ha,fa))return fa;const K=I.get(),ba=I.get();ta(X,ha,K,ba);let ea=Number.POSITIVE_INFINITY;for(const pa of la){var aa=Y(X,pa,ca.get());
const na=l.sv3d.get();x.intersectLineSegmentClamp(K,aa,na)&&(aa=w.distance2(ha,na),x.isPointInside(ba,na)&&aa<ea&&(ea=aa,t.copy(fa,na)))}U(X,ha.origin)<ea&&D(X,ha.origin,fa);return fa}function D(X,ha,fa){var K=x.projectPoint(X.plane,ha,l.sv3d.get());ha=C.projectPointClamp(S(X,X.basis1),K,-1,1,l.sv3d.get());K=C.projectPointClamp(S(X,X.basis2),K,-1,1,l.sv3d.get());t.subtract(fa,t.add(l.sv3d.get(),ha,K),X.origin);return fa}function M(X,ha,fa){const {origin:K,basis1:ba,basis2:ea}=X,aa=t.subtract(l.sv3d.get(),
ha,K);ha=q.projectPointSignedLength(ba,aa);const pa=q.projectPointSignedLength(ea,aa);X=q.projectPointSignedLength(O(X),aa);return t.set(fa,ha,pa,X)}function U(X,ha){ha=M(X,ha,l.sv3d.get());const {basis1:fa,basis2:K}=X;X=t.length(fa);var ba=t.length(K);X=Math.max(Math.abs(ha[0])-X,0);ba=Math.max(Math.abs(ha[1])-ba,0);ha=ha[2];return X*X+ba*ba+ha*ha}function R(X,ha){return Math.sqrt(U(X,ha))}function J(X,ha){let fa=Number.NEGATIVE_INFINITY;for(const ba of la){var K=Y(X,ba,ca.get());K=C.distance2(K,
ha);K>fa&&(fa=K)}return Math.sqrt(fa)}function L(X,ha){return x.isPointInside(X.plane,ha)&&P(X,ha)}function N(X,ha,fa,K){switch(fa){case 0:t.copy(K,X.basis1);t.normalize(K,K);break;case 1:t.copy(K,X.basis2);t.normalize(K,K);break;case 2:t.copy(K,O(X))}return K}function V(X,ha){const fa=-X.plane[3];return q.projectPointSignedLength(O(X),ha)-fa}function T(X,ha,fa,K){const ba=V(X,ha);X=t.scale(ia,O(X),fa-ba);t.add(K,ha,X);return K}function W(X,ha){return t.exactEquals(X.basis1,ha.basis1)&&t.exactEquals(X.basis2,
ha.basis2)&&t.exactEquals(X.origin,ha.origin)}function Q(X,ha,fa){X!==fa&&f(X,fa);b.invert(da,ha);b.transpose(da,da);t.transformMat4(fa.basis1,X.basis1,da);t.transformMat4(fa.basis2,X.basis2,da);t.transformMat4(x.normal(fa.plane),x.normal(X.plane),da);t.transformMat4(fa.origin,X.origin,ha);x.setOffsetFromPoint(fa.plane,fa.origin,fa.plane);return fa}function Z(X,ha,fa,K){X!==K&&f(X,K);b.rotate(ka,b.identity(ka),ha,fa);t.transformMat4(K.basis1,X.basis1,ka);t.transformMat4(K.basis2,X.basis2,ka);h(K);
return K}function O(X){return x.normal(X.plane)}function P(X,ha){const fa=t.subtract(l.sv3d.get(),ha,X.origin);ha=t.squaredLength(X.basis1);const K=t.squaredLength(X.basis2),ba=t.dot(X.basis1,fa);X=t.dot(X.basis2,fa);return 0>-ba-ha&&0>ba-ha&&0>-X-K&&0>X-K}function S(X,ha){const fa=ca.get();t.copy(fa.origin,X.origin);t.copy(fa.vector,ha);return fa}function Y(X,ha,fa){const {basis1:K,basis2:ba,origin:ea}=X;X=t.scale(l.sv3d.get(),K,ha.origin[0]);const aa=t.scale(l.sv3d.get(),ba,ha.origin[1]);t.add(fa.origin,
X,aa);t.add(fa.origin,fa.origin,ea);X=t.scale(l.sv3d.get(),K,ha.direction[0]);ha=t.scale(l.sv3d.get(),ba,ha.direction[1]);t.scale(fa.vector,t.add(X,X,ha),2);return fa}function ta(X,ha,fa,K){X=O(X);x.fromVectorsAndPoint(X,ha.direction,ha.origin,fa);x.fromVectorsAndPoint(x.normal(fa),X,ha.origin,K)}const wa=r.getLogger("esri.views.3d.support.geometryUtils.boundedPlane");g=function(){this.plane=x.create();this.origin=v.create();this.basis1=v.create();this.basis2=v.create()};const G={plane:x.create(),
origin:v.fromValues(0,0,0),basis1:v.fromValues(1,0,0),basis2:v.fromValues(0,1,0)},I=new k.ObjectStack(x.create),ca=new k.ObjectStack(C.create),ia=v.create(),ja=new k.ObjectStack(()=>({origin:null,basis1:null,basis2:null,plane:null})),la=[{origin:[-1,-1],direction:[1,0]},{origin:[1,-1],direction:[0,1]},{origin:[1,1],direction:[-1,0]},{origin:[-1,1],direction:[0,-1]}],da=n.create(),ka=n.create();k=Object.freeze({__proto__:null,BoundedPlaneClass:g,create:c,wrap:m,copy:f,copyWithoutVerify:e,fromValues:d,
updateUnboundedPlane:h,elevate:F,setExtent:E,fromAABoundingRect:u,intersectRay:z,intersectRayClosestSilhouette:y,closestPointOnSilhouette:B,closestPoint:H,projectPoint:D,projectPointLocal:M,distance2:U,distance:R,distanceToSilhouette:J,extrusionContainsPoint:L,axisAt:N,altitudeAt:V,setAltitudeAt:T,equals:W,transform:Q,rotate:Z,normal:O,UP:G});a.BoundedPlaneClass=g;a.UP=G;a.altitudeAt=V;a.axisAt=N;a.boundedPlaneModule=k;a.closestPoint=H;a.closestPointOnSilhouette=B;a.copy=f;a.copyWithoutVerify=e;a.create=
c;a.distance=R;a.distance2=U;a.distanceToSilhouette=J;a.elevate=F;a.equals=W;a.extrusionContainsPoint=L;a.fromAABoundingRect=u;a.fromValues=d;a.intersectRay=z;a.intersectRayClosestSilhouette=y;a.normal=O;a.projectPoint=D;a.projectPointLocal=M;a.rotate=Z;a.setAltitudeAt=T;a.setExtent=E;a.transform=Q;a.updateUnboundedPlane=h;a.wrap=m})},"esri/chunks/frustum":function(){define("exports ./vec3f64 ./vec3 ./mat4 ../core/ObjectStack ./vec4f64 ./vec4 ../views/3d/support/stack ./plane ./clipRay".split(" "),
function(a,g,r,A,v,t,p,b,k,n){function l(B){return B?[k.create(B[0]),k.create(B[1]),k.create(B[2]),k.create(B[3]),k.create(B[4]),k.create(B[5])]:[k.create(),k.create(),k.create(),k.create(),k.create(),k.create()]}function q(){return[g.create(),g.create(),g.create(),g.create(),g.create(),g.create(),g.create(),g.create()]}function C(B,H=l()){for(let D=0;6>D;D++)k.copy(B[D],H[D])}function w(B,H,D,M=y){B=A.multiply(b.sm4d.get(),H,B);A.invert(B,B);for(H=0;8>H;++H){const U=p.transformMat4(b.sv4d.get(),
u[H],B);r.set(M[H],U[0]/U[3],U[1]/U[3],U[2]/U[3])}x(D,M)}function x(B,H){k.fromPoints(H[4],H[0],H[3],B[0]);k.fromPoints(H[1],H[5],H[6],B[1]);k.fromPoints(H[4],H[5],H[1],B[2]);k.fromPoints(H[3],H[2],H[6],B[3]);k.fromPoints(H[0],H[1],H[2],B[4]);k.fromPoints(H[5],H[4],H[7],B[5])}function c(B,H){for(let D=0;6>D;D++)if(k.isSphereFullyInside(B[D],H))return!1;return!0}function m(B,H){return F(B,n.fromRay(H,z.get()))}function f(B,H){for(let D=0;6>D;D++)if(!k.clipInfinite(B[D],H))return!1;return!0}function e(B,
H,D){return F(B,n.fromLineSegmentAndDirection(H,D,z.get()))}function d(B,H){for(let D=0;6>D;D++)if(0<k.signedDistance(B[D],H))return!1;return!0}function h(B,H){for(let D=0;6>D;D++)if(k.isAABBFullyInside(B[D],H))return!1;return!0}function F(B,H){for(let D=0;6>D;D++)if(!k.clip(B[D],H))return!1;return!0}const E={bottom:[5,1,0,4],near:[0,1,2,3],far:[5,4,7,6],right:[1,5,6,2],left:[4,0,3,7],top:[7,3,2,6]},u=[t.fromValues(-1,-1,-1,1),t.fromValues(1,-1,-1,1),t.fromValues(1,1,-1,1),t.fromValues(-1,1,-1,1),
t.fromValues(-1,-1,1,1),t.fromValues(1,-1,1,1),t.fromValues(1,1,1,1),t.fromValues(-1,1,1,1)],z=new v.ObjectStack(n.create),y=q();v=Object.freeze({__proto__:null,create:l,createPoints:q,copy:C,fromMatrix:w,computePlanes:x,intersectsSphere:c,intersectsRay:m,intersectClipRay:f,intersectsLineSegment:e,intersectsPoint:d,intersectsAABB:h,planePointIndices:E});a.computePlanes=x;a.copy=C;a.create=l;a.createPoints=q;a.fromMatrix=w;a.frustumModule=v;a.intersectClipRay=f;a.intersectsAABB=h;a.intersectsLineSegment=
e;a.intersectsPoint=d;a.intersectsRay=m;a.intersectsSphere=c;a.planePointIndices=E})},"esri/chunks/triangle":function(){define("exports ./vec3f64 ./vec3 ../core/ObjectStack ./vec2 ../views/3d/support/stack ./lineSegment".split(" "),function(a,g,r,A,v,t,p){function b(h){return h?{p0:g.clone(h.p0),p1:g.clone(h.p1),p2:g.clone(h.p2)}:{p0:g.create(),p1:g.create(),p2:g.create()}}function k(h,F,E){const u=f.get();u.p0=h;u.p1=F;u.p2=E;return u}function n(h,F=b()){return l(h.p0,h.p1,h.p2,F)}function l(h,F,
E,u=b()){r.copy(u.p0,h);r.copy(u.p1,F);r.copy(u.p2,E);return u}function q(h,F){var E=h.p0,u=h.p1;h=h.p2;const z=r.subtract(t.sv3d.get(),u,E),y=r.subtract(t.sv3d.get(),h,u),B=r.subtract(t.sv3d.get(),E,h),H=r.subtract(t.sv3d.get(),F,E);var D=r.subtract(t.sv3d.get(),F,u),M=r.subtract(t.sv3d.get(),F,h);const U=r.cross(z,z,B),R=r.dot(r.cross(t.sv3d.get(),z,U),H);D=r.dot(r.cross(t.sv3d.get(),y,U),D);M=r.dot(r.cross(t.sv3d.get(),B,U),M);if(0<R&&0<D&&0<M)return F=r.dot(U,H),F*F/r.dot(U,U);E=p.distance2(p.fromValues(E,
z,m.get()),F);u=p.distance2(p.fromValues(u,y,m.get()),F);F=p.distance2(p.fromValues(h,B,m.get()),F);return Math.min(E,u,F)}function C(h,F,E){const {direction:u,origin:z}=F,{p0:y,p1:B,p2:H}=h;var D=B[0]-y[0],M=B[1]-y[1],U=B[2]-y[2];h=H[0]-y[0];F=H[1]-y[1];const R=H[2]-y[2];var J=u[1]*R-F*u[2],L=u[2]*h-R*u[0];const N=u[0]*F-h*u[1];var V=D*J+M*L+U*N;if(-1E-5<V&&1E-5>V)return!1;V=1/V;const T=z[0]-y[0],W=z[1]-y[1],Q=z[2]-y[2];J=V*(T*J+W*L+Q*N);if(0>J||1<J)return!1;L=W*U-M*Q;U=Q*D-U*T;D=T*M-D*W;M=V*(u[0]*
L+u[1]*U+u[2]*D);if(0>M||1<J+M)return!1;E&&(r.scale(E,u,V*(h*L+F*U+R*D)),r.add(E,z,E));return!0}function w(h,F,E){var u=v.distance(h,F);F=v.distance(F,E);h=v.distance(E,h);E=(u+F+h)/2;u=E*(E-u)*(E-F)*(E-h);return 0>=u?0:Math.sqrt(u)}function x(h){return w(h.p0,h.p1,h.p2)}function c(h,F,E){r.subtract(e,F,h);r.subtract(d,E,h);return r.length(r.cross(e,e,d))/2}const m=new A.ObjectStack(p.create),f=new A.ObjectStack(()=>({p0:null,p1:null,p2:null})),e=g.create(),d=g.create();A=Object.freeze({__proto__:null,
create:b,wrap:k,copy:n,fromValues:l,distance2:q,intersectRay:C,areaPoints2d:w,area2d:x,areaPoints3d:c});a.area2d=x;a.areaPoints2d=w;a.areaPoints3d=c;a.copy=n;a.create=b;a.distance2=q;a.fromValues=l;a.intersectRay=C;a.triangleModule=A;a.wrap=k})},"esri/views/3d/webgl-engine/lib/GeometryUtil":function(){define("../../../../chunks/vec3f64 ../../../../chunks/vec3 ../../../../chunks/vec3f32 ../../support/geometryUtils ./BufferVectorMath ./Util ./geometryDataUtils ./Geometry".split(" "),function(a,g,r,
A,v,t,p,b){const k=v.Vec3Compact;var n;(function(x){const c=[[-.5,-.5,.5],[.5,-.5,.5],[.5,.5,.5],[-.5,.5,.5],[-.5,-.5,-.5],[.5,-.5,-.5],[.5,.5,-.5],[-.5,.5,-.5]],m=[0,0,1,-1,0,0,1,0,0,0,-1,0,0,1,0,0,0,-1],f=[0,0,1,0,1,1,0,1],e=new Uint16Array([0,1,2,2,3,0,4,0,3,3,7,4,1,5,6,6,2,1,1,0,4,4,5,1,3,2,6,6,7,3,5,4,7,7,6,5]),d=new Uint16Array(36);for(var h=0;6>h;h++)for(let E=0;6>E;E++)d[6*h+E]=h;const F=new Uint16Array(36);for(h=0;6>h;h++)F[6*h]=0,F[6*h+1]=1,F[6*h+2]=2,F[6*h+3]=2,F[6*h+4]=3,F[6*h+5]=0;x.createGeometry=
function(E){Array.isArray(E)||(E=[E,E,E]);const u=Array(24);for(let z=0;8>z;z++)u[3*z]=c[z][0]*E[0],u[3*z+1]=c[z][1]*E[1],u[3*z+2]=c[z][2]*E[2];return new b.Geometry([["position",{size:3,data:u,exclusive:!0}],["normal",{size:3,data:m}],["uv0",{size:2,data:f}]],[["position",e],["normal",d],["uv0",F]])}})(n||(n={}));var l;(function(x){const c=[[-.5,0,-.5],[.5,0,-.5],[.5,0,.5],[-.5,0,.5],[0,-.5,0],[0,.5,0]],m=[0,1,-1,1,1,0,0,1,1,-1,1,0,0,-1,-1,1,-1,0,0,-1,1,-1,-1,0],f=new Uint16Array([5,1,0,5,2,1,5,
3,2,5,0,3,4,0,1,4,1,2,4,2,3,4,3,0]),e=new Uint16Array([0,0,0,1,1,1,2,2,2,3,3,3,4,4,4,5,5,5,6,6,6,7,7,7]);x.createGeometry=function(d){Array.isArray(d)||(d=[d,d,d]);const h=Array(18);for(let F=0;6>F;F++)h[3*F]=c[F][0]*d[0],h[3*F+1]=c[F][1]*d[1],h[3*F+2]=c[F][2]*d[2];return new b.Geometry([["position",{size:3,data:h,exclusive:!0}],["normal",{size:3,data:m}]],[["position",f],["normal",e]])}})(l||(l={}));var q;(function(x){const c=r.fromValues(-.5,0,-.5),m=r.fromValues(.5,0,-.5),f=r.fromValues(0,0,.5),
e=r.fromValues(0,.5,0),d=r.create(),h=r.create(),F=r.create(),E=r.create(),u=r.create();g.subtract(d,c,e);g.subtract(h,c,m);g.cross(F,d,h);g.normalize(F,F);g.subtract(d,m,e);g.subtract(h,m,f);g.cross(E,d,h);g.normalize(E,E);g.subtract(d,f,e);g.subtract(h,f,c);g.cross(u,d,h);g.normalize(u,u);const z=[c,m,f,e],y=[0,-1,0,F[0],F[1],F[2],E[0],E[1],E[2],u[0],u[1],u[2]],B=[0,1,2,3,1,0,3,2,1,3,0,2],H=[0,0,0,1,1,1,2,2,2,3,3,3];x.createGeometry=function(D){Array.isArray(D)||(D=[D,D,D]);const M=Array(12);for(let U=
0;4>U;U++)M[3*U]=z[U][0]*D[0],M[3*U+1]=z[U][1]*D[1],M[3*U+2]=z[U][2]*D[2];return new b.Geometry([["position",{size:3,data:M,exclusive:!0}],["normal",{size:3,data:y}]],[["position",new Uint16Array(B)],["normal",new Uint16Array(H)]])}})(q||(q={}));var C;(function(x){function c(e,d,h,F,E){if(Math.abs(g.dot(d,e))>E)return!1;g.cross(h,e,d);g.normalize(h,h);g.cross(F,h,e);g.normalize(F,F);return!0}function m(e,d,h,F,E,u,z){return c(e,d,E,u,z)||c(e,h,E,u,z)||c(e,F,E,u,z)}x.createBoxGeometry=n.createGeometry;
x.createDiamondGeometry=l.createGeometry;x.createTetrahedronGeometry=q.createGeometry;x.createSphereGeometry=function(e,d,h,F={uv:!0}){var E=-Math.PI,u=2*Math.PI,z=-Math.PI/2,y=Math.PI;d=Math.max(3,Math.floor(d));const B=Math.max(2,Math.floor(h));var H=(d+1)*(B+1);h=new Float32Array(3*H);const D=new Float32Array(3*H);H=new Float32Array(2*H);const M=[];let U=0;for(var R=0;R<=B;R++){var J=[];const N=R/B,V=z+N*y,T=Math.cos(V);for(let W=0;W<=d;W++){const Q=W/d;var L=E+Q*u;const Z=Math.cos(L)*T,O=Math.sin(V);
L=-Math.sin(L)*T;h[3*U]=Z*e;h[3*U+1]=O*e;h[3*U+2]=L*e;D[3*U]=Z;D[3*U+1]=O;D[3*U+2]=L;H[2*U]=Q;H[2*U+1]=N;J.push(U);++U}M.push(J)}e=new Uint32Array(2*d*(B-1)*3);U=0;for(E=0;E<B;E++)for(u=0;u<d;u++)z=M[E][u],y=M[E][u+1],R=M[E+1][u+1],J=M[E+1][u],0===E?(e[U++]=z,e[U++]=R,e[U++]=J):E===B-1?(e[U++]=z,e[U++]=y,e[U++]=R):(e[U++]=z,e[U++]=y,e[U++]=R,e[U++]=R,e[U++]=J,e[U++]=z);d=[["position",e],["normal",e]];h=[["position",{size:3,data:h,exclusive:!0}],["normal",{size:3,data:D,exclusive:!0}]];F.uv&&(h.push(["uv0",
{size:2,data:H,exclusive:!0}]),d.push(["uv0",e]));F.offset&&(d[0][0]="offset",h[0][0]="offset",d.push(["position",new Uint32Array(e.length)]),h.push(["position",{size:3,data:Float64Array.from(F.offset),exclusive:!0}]));return new b.Geometry(h,d)};x.createPolySphereGeometry=function(e,d,h){function F(y,B){y>B&&([y,B]=[B,y]);const H=y.toString()+"."+B.toString();if(z[H])return z[H];let D=E.length;E.length+=3;k.add(E,3*y,E,3*B,E,D);k.scale(E,D,e/k.length(E,D));D/=3;return z[H]=D}let E;h?(E=[0,-1,0,1,
0,0,0,0,1,-1,0,0,0,0,-1,0,1,0],h=new Uint32Array([0,1,2,0,2,3,0,3,4,0,4,1,1,5,2,2,5,3,3,5,4,4,5,1])):(h=e*(1+Math.sqrt(5))/2,E=[-e,h,0,e,h,0,-e,-h,0,e,-h,0,0,-e,h,0,e,h,0,-e,-h,0,e,-h,h,0,-e,h,0,e,-h,0,-e,-h,0,e],h=new Uint32Array([0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1]));for(var u=0;u<E.length;u+=3)k.scale(E,u,e/k.length(E,u));let z={};for(u=0;u<d;u++){const y=h.length,B=new Uint32Array(4*y);for(let H=0;H<
y;H+=3){const D=h[H],M=h[H+1],U=h[H+2],R=F(D,M),J=F(M,U),L=F(U,D),N=4*H;B[N]=D;B[N+1]=R;B[N+2]=L;B[N+3]=M;B[N+4]=J;B[N+5]=R;B[N+6]=U;B[N+7]=L;B[N+8]=J;B[N+9]=R;B[N+10]=J;B[N+11]=L}h=B;z={}}d=new Float32Array(E);for(u=0;u<d.length;u+=3)k.normalize(d,u);h=[["position",h],["normal",h]];d=[["position",{size:3,data:new Float32Array(E),exclusive:!0}],["normal",{size:3,data:d,exclusive:!0}]];return new b.Geometry(d,h)};x.createPointGeometry=function(e,d,h,F,E,u,z){d=d?[d[0],d[1],d[2]]:[0,0,0];e=e?[e[0],
e[1],e[2]]:[0,0,1];u=u||[0,0];h=[["position",{size:3,data:d,exclusive:!0}],["normal",{size:3,data:e,exclusive:!0}],["uv0",{size:u.length,data:u}],["color",{size:4,data:h?[255*h[0],255*h[1],255*h[2],3<h.length?255*h[3]:255]:[255,255,255,255],exclusive:!0}],["size",{size:2,data:null!=F&&2===F.length?F:[1,1]}]];null!=E&&(E=new Float32Array([E[0],E[1],E[2],E[3]]),h.push(["auxpos1",{size:4,data:E}]));null!=z&&(z=new Float32Array([z[0],z[1],z[2],z[3]]),h.push(["auxpos2",{size:4,data:z}]));return new b.Geometry(h,
null,1)};x.updatePointGeometry=function(e,d,h,F,E,u,z,y){if(null!=e){const {data:B}=y.getMutableAttribute("normal");B[0]=e[0];B[1]=e[1];B[2]=e[2]}null!=d&&({data:e}=y.getMutableAttribute("position"),e[0]=d[0],e[1]=d[1],e[2]=d[2]);null!=h&&({data:d}=y.getMutableAttribute("color"),d[0]=h[0],d[1]=h[1],d[2]=h[2],d[3]=h[3]);null!=F&&({data:h}=y.getMutableAttribute("size"),h[0]=F[0],h[1]=F[1]);null!=E&&({data:F}=y.getMutableAttribute("auxpos1"),F[0]=E[0],F[1]=E[1],F[2]=E[2],F[3]=E[3]);null!=u&&({data:E}=
y.getMutableAttribute("uv0"),E[0]=u[0],E[1]=u[1]);null!=z&&({data:u}=y.getMutableAttribute("auxpos2"),u[0]=z[0],u[1]=z[1],u[2]=z[2],u[3]=z[3])};x.createPointArrayGeometry=function(e,d){const h=new Float32Array(3*e.length),F=new Float32Array(d?3*e.length:3),E=new Uint32Array(e.length),u=new Uint32Array(e.length);for(let z=0;z<e.length;z++)h[3*z]=e[z][0],h[3*z+1]=e[z][1],h[3*z+2]=e[z][2],d&&(F[3*z]=d[z][0],F[3*z+1]=d[z][1],F[3*z+2]=d[z][2]),E[z]=z,u[z]=0;d||(F[0]=0,F[1]=1,F[2]=0);return new b.Geometry([["position",
{size:3,data:h,exclusive:!0}],["normal",{size:3,data:F,exclusive:!0}],["uv0",{size:2,data:[0,0],exclusive:!0}]],[["position",E],["normal",d?E:u],["uv0",u]],1)};x.createTriangleGeometry=function(){const e=new Uint16Array([0,1,2]),d=new Uint16Array([0,0,0]),h=new Uint16Array([0,0,0]);return new b.Geometry([["position",{size:3,data:[0,0,0,0,0,100,100,0,0],exclusive:!0}],["normal",{size:3,data:[0,1,0],exclusive:!0}],["uv0",{size:2,data:[0,0],exclusive:!0}]],[["position",e],["normal",d],["uv0",h]])};const f=
[[-1,-1,0],[1,-1,0],[1,1,0],[-1,1,0]];x.createSquareGeometry=function(e=f){const d=Array(12);for(var h=0;4>h;h++)for(let F=0;3>F;F++)d[3*h+F]=e[h][F];e=new Uint32Array([0,1,2,2,3,0]);h=new Uint32Array([0,0,0,0,0,0]);return new b.Geometry([["position",{size:3,data:d,exclusive:!0}],["normal",{size:3,data:[0,0,1],exclusive:!0}],["uv0",{size:2,data:[0,0,1,0,1,1,0,1],exclusive:!0}],["color",{size:4,data:[255,255,255,255],exclusive:!0}]],[["position",e],["normal",h],["uv0",e],["color",h]])};x.createConeGeometry=
function(e,d,h,F,E=!0,u=!0){var z=0,y=r.fromValues(0,z,0),B=r.fromValues(0,z+e,0),H=r.fromValues(0,-1,0),D=r.fromValues(0,1,0);F&&(z=e,B=r.fromValues(0,0,0),y=r.fromValues(0,z,0),H=r.fromValues(0,1,0),D=r.fromValues(0,-1,0));y=[B,y];H=[H,D];D=h+2;B=Math.sqrt(e*e+d*d);if(F)for(F=h-1;0<=F;F--){var M=2*Math.PI/h*F,U=r.fromValues(Math.cos(M)*d,z,Math.sin(M)*d);y.push(U);M=r.fromValues(e*Math.cos(M)/B,-d/B,e*Math.sin(M)/B);H.push(M)}else for(F=0;F<h;F++)M=2*Math.PI/h*F,U=r.fromValues(Math.cos(M)*d,z,Math.sin(M)*
d),y.push(U),M=r.fromValues(e*Math.cos(M)/B,d/B,e*Math.sin(M)/B),H.push(M);e=new Uint32Array(6*(h+2));h=new Uint32Array(6*(h+2));z=d=0;if(E){for(E=3;E<y.length;E++)e[d++]=1,e[d++]=E-1,e[d++]=E,h[z++]=0,h[z++]=0,h[z++]=0;e[d++]=y.length-1;e[d++]=2;e[d++]=1;h[z++]=0;h[z++]=0;h[z++]=0}if(u){for(u=3;u<y.length;u++)e[d++]=u,e[d++]=u-1,e[d++]=0,h[z++]=u,h[z++]=u-1,h[z++]=1;e[d++]=0;e[d++]=2;e[d++]=y.length-1;h[z++]=1;h[z++]=2;h[z++]=H.length-1}u=new Float32Array(3*D);for(E=0;E<D;E++)u[3*E]=y[E][0],u[3*
E+1]=y[E][1],u[3*E+2]=y[E][2];y=new Float32Array(3*D);for(E=0;E<D;E++)y[3*E]=H[E][0],y[3*E+1]=H[E][1],y[3*E+2]=H[E][2];return new b.Geometry([["position",{size:3,data:u,exclusive:!0}],["normal",{size:3,data:y,exclusive:!0}]],[["position",e],["normal",h]])};x.createCylinderGeometry=function(e,d,h,F,E,u){F=F?r.clone(F):r.fromValues(1,0,0);E=E?r.clone(E):r.fromValues(0,0,0);u=null==u?!0:u;var z=r.create();g.normalize(z,F);const y=r.create();g.scale(y,z,Math.abs(e));const B=r.create();g.scale(B,y,-.5);
g.add(B,B,E);const H=r.fromValues(0,1,0);.2>Math.abs(1-g.dot(z,H))&&g.set(H,0,0,1);const D=r.create();g.cross(D,z,H);g.normalize(D,D);g.cross(H,D,z);e=2*h+(u?2:0);E=h+(u?2:0);F=new Float32Array(3*e);const M=new Float32Array(3*E),U=new Float32Array(2*e),R=new Uint32Array(3*h*(u?4:2)),J=new Uint32Array(3*h*(u?4:2));u&&(F[3*(e-2)]=B[0],F[3*(e-2)+1]=B[1],F[3*(e-2)+2]=B[2],U[2*(e-2)]=0,U[2*(e-2)+1]=0,F[3*(e-1)]=F[3*(e-2)]+y[0],F[3*(e-1)+1]=F[3*(e-2)+1]+y[1],F[3*(e-1)+2]=F[3*(e-2)+2]+y[2],U[2*(e-1)]=1,
U[2*(e-1)+1]=1,M[3*(E-2)]=-z[0],M[3*(E-2)+1]=-z[1],M[3*(E-2)+2]=-z[2],M[3*(E-1)]=z[0],M[3*(E-1)+1]=z[1],M[3*(E-1)+2]=z[2]);z=function(W,Q,Z){R[W]=Q;J[W]=Z};let L=0;const N=r.create(),V=r.create();for(let W=0;W<h;W++){var T=2*Math.PI/h*W;g.scale(N,H,Math.sin(T));g.scale(V,D,Math.cos(T));g.add(N,N,V);M[3*W]=N[0];M[3*W+1]=N[1];M[3*W+2]=N[2];g.scale(N,N,d);g.add(N,N,B);F[3*W]=N[0];F[3*W+1]=N[1];F[3*W+2]=N[2];U[2*W]=W/h;U[2*W+1]=0;F[3*(W+h)]=F[3*W]+y[0];F[3*(W+h)+1]=F[3*W+1]+y[1];F[3*(W+h)+2]=F[3*W+2]+
y[2];U[2*(W+h)]=W/h;U[2*W+1]=1;T=(W+1)%h;z(L++,W,W);z(L++,W+h,W);z(L++,T,T);z(L++,T,T);z(L++,W+h,W);z(L++,T+h,T)}if(u){for(d=0;d<h;d++)u=(d+1)%h,z(L++,e-2,E-2),z(L++,d,E-2),z(L++,u,E-2);for(d=0;d<h;d++)u=(d+1)%h,z(L++,d+h,E-1),z(L++,e-1,E-1),z(L++,u+h,E-1)}return new b.Geometry([["position",{size:3,data:F,exclusive:!0}],["normal",{size:3,data:M,exclusive:!0}],["uv0",{size:2,data:U,exclusive:!0}]],[["position",R],["normal",J],["uv0",R]])};x.createTubeGeometry=function(e,d,h,F,E){h=h||10;F=null!=F?
F:!0;t.assert(1<e.length);const u=[],z=[];for(let y=0;y<h;y++){u.push([0,-y-1,-((y+1)%h)-1]);const B=y/h*2*Math.PI;z.push([Math.cos(B)*d,Math.sin(B)*d])}return x.createPathExtrusionGeometry(z,e,[[0,0,0]],u,F,E)};x.createPathExtrusionGeometry=function(e,d,h,F,E,u=r.fromValues(0,0,0)){var z=e.length;const y=new Float32Array(d.length*z*3+(6*h.length||0)),B=new Float32Array(d.length*z*3+(h?6:0));var H=(d.length-1)*z*6+6*F.length;const D=new Uint32Array(H);H=new Uint32Array(H);let M=0;var U=0;let R=0,
J=0;const L=r.create(),N=r.create(),V=r.create(),T=r.create(),W=r.create(),Q=r.create(),Z=r.create(),O=a.create(),P=r.create(),S=r.create(),Y=r.create(),ta=r.create(),wa=r.create(),G=A.plane.create();g.set(P,0,1,0);g.subtract(N,d[1],d[0]);g.normalize(N,N);E?(g.add(O,d[0],u),g.normalize(V,O)):g.set(V,0,0,1);m(N,V,P,P,W,V,.99619469809);g.copy(T,V);g.copy(ta,W);for(var I=0;I<h.length;I++)g.scale(Q,W,h[I][0]),g.scale(O,V,h[I][2]),g.add(Q,Q,O),g.add(Q,Q,d[0]),y[M++]=Q[0],y[M++]=Q[1],y[M++]=Q[2];B[U++]=
-N[0];B[U++]=-N[1];B[U++]=-N[2];for(I=0;I<F.length;I++)D[R++]=0<F[I][0]?F[I][0]:-F[I][0]-1+h.length,D[R++]=0<F[I][1]?F[I][1]:-F[I][1]-1+h.length,D[R++]=0<F[I][2]?F[I][2]:-F[I][2]-1+h.length,H[J++]=0,H[J++]=0,H[J++]=0;I=h.length;const ca=h.length-1;for(let ja=0;ja<d.length;ja++){let la=!1;0<ja&&(g.copy(L,N),ja<d.length-1?(g.subtract(N,d[ja+1],d[ja]),g.normalize(N,N)):la=!0,g.add(S,L,N),g.normalize(S,S),g.add(Y,d[ja-1],T),A.plane.fromPositionAndNormal(d[ja],S,G),A.plane.intersectRay(G,A.ray.wrap(Y,
L),O)?(g.subtract(O,O,d[ja]),g.normalize(V,O),g.cross(W,S,V),g.normalize(W,W)):m(S,T,ta,P,W,V,.99619469809),g.copy(T,V),g.copy(ta,W));E&&(g.add(O,d[ja],u),g.normalize(wa,O));for(let da=0;da<z;da++)if(g.scale(Q,W,e[da][0]),g.scale(O,V,e[da][1]),g.add(Q,Q,O),g.normalize(Z,Q),B[U++]=Z[0],B[U++]=Z[1],B[U++]=Z[2],g.add(Q,Q,d[ja]),y[M++]=Q[0],y[M++]=Q[1],y[M++]=Q[2],!la){var ia=(da+1)%z;D[R++]=I+da;D[R++]=I+z+da;D[R++]=I+ia;D[R++]=I+ia;D[R++]=I+z+da;D[R++]=I+z+ia;for(ia=0;6>ia;ia++)H[J++]=D[R-6+ia]-ca}I+=
z}e=d[d.length-1];for(d=0;d<h.length;d++)g.scale(Q,W,h[d][0]),g.scale(O,V,h[d][1]),g.add(Q,Q,O),g.add(Q,Q,e),y[M++]=Q[0],y[M++]=Q[1],y[M++]=Q[2];h=U/3;B[U++]=N[0];B[U++]=N[1];B[U++]=N[2];z=I-z;for(U=0;U<F.length;U++)D[R++]=0<=F[U][0]?I+F[U][0]:-F[U][0]-1+z,D[R++]=0<=F[U][2]?I+F[U][2]:-F[U][2]-1+z,D[R++]=0<=F[U][1]?I+F[U][1]:-F[U][1]-1+z,H[J++]=h,H[J++]=h,H[J++]=h;return new b.Geometry([["position",{size:3,data:y,exclusive:!0}],["normal",{size:3,data:B,exclusive:!0}]],[["position",D],["normal",H]])};
x.createPolylineGeometry=function(e,d,h){t.assert(1<e.length,"createPolylineGeometry(): polyline needs at least 2 points");t.assert(3===e[0].length,"createPolylineGeometry(): malformed vertex");t.assert(null==d||d.length===e.length,"createPolylineGeometry: need same number of points and normals");t.assert(null==d||3===d[0].length,"createPolylineGeometry(): malformed normal");var F=new Float64Array(3*e.length);const E=new Uint32Array(2*(e.length-1));var u=0,z=0;for(var y=0;y<e.length;y++){for(var B=
0;3>B;B++)F[u++]=e[y][B];0<y&&(E[z++]=y-1,E[z++]=y)}u=[];z=[];u.push(["position",E]);z.push(["position",{size:3,data:F,exclusive:!0}]);if(d){F=new Float32Array(3*d.length);y=0;for(B=0;B<e.length;B++)for(let H=0;3>H;H++)F[y++]=d[B][H];u.push(["normal",E]);z.push(["normal",{size:3,data:F,exclusive:!0}])}h&&(z.push(["color",{size:4,data:h}]),u.push(["color",p.generateDefaultIndexArray(h.length/4)]));return new b.Geometry(z,u,2)};x.createExtrudedTriangle=function(e,d,h,F){const E=Array(18);e=[[-d,0,F/
2],[h,0,F/2],[0,e,F/2],[-d,0,-F/2],[h,0,-F/2],[0,e,-F/2]];d=new Uint16Array([0,1,2,3,0,2,2,5,3,1,4,5,5,2,1,1,0,3,3,4,1,4,3,5]);for(h=0;6>h;h++)E[3*h]=e[h][0],E[3*h+1]=e[h][1],E[3*h+2]=e[h][2];return new b.Geometry([["position",{size:3,data:E,exclusive:!0}]],[["position",d]])};x.transformInPlace=function(e,d){e=e.getMutableAttribute("position").data;for(let h=0;h<e.length;h+=3)g.set(w,e[h],e[h+1],e[h+2]),g.transformMat4(w,w,d),e[h]=w[0],e[h+1]=w[1],e[h+2]=w[2]};x.cgToGIS=function(e,d=e){var h=e.vertexAttributes;
e=h.get("position").data;if(h=h.get("normal").data){var F=d.getMutableAttribute("normal").data;for(var E=0;E<h.length;E+=3){const u=h[E+1];F[E+1]=-h[E+2];F[E+2]=u}}if(e)for(h=d.getMutableAttribute("position").data,F=0;F<e.length;F+=3)E=e[F+1],h[F+1]=-e[F+2],h[F+2]=E;return d};x.makeOrthoBasisDirUp=c;x.makeOrthoBasisDirUpFallback=m})(C||(C={}));const w=r.create();return C})},"esri/chunks/vec3f32":function(){define(["exports"],function(a){function g(){return new Float32Array(3)}function r(m){const f=
new Float32Array(3);f[0]=m[0];f[1]=m[1];f[2]=m[2];return f}function A(m,f,e){const d=new Float32Array(3);d[0]=m;d[1]=f;d[2]=e;return d}function v(m,f){return new Float32Array(m,f,3)}function t(){return g()}function p(){return A(1,1,1)}function b(){return A(1,0,0)}function k(){return A(0,1,0)}function n(){return A(0,0,1)}const l=g(),q=p(),C=b(),w=k(),x=n();var c=Object.freeze({__proto__:null,create:g,clone:r,fromValues:A,createView:v,zeros:t,ones:p,unitX:b,unitY:k,unitZ:n,ZEROS:l,ONES:q,UNIT_X:C,UNIT_Y:w,
UNIT_Z:x});a.ONES=q;a.UNIT_X=C;a.UNIT_Y=w;a.UNIT_Z=x;a.ZEROS=l;a.clone=r;a.create=g;a.createView=v;a.fromValues=A;a.ones=p;a.unitX=b;a.unitY=k;a.unitZ=n;a.vec3f32=c;a.zeros=t})},"esri/views/3d/webgl-engine/lib/BufferVectorMath":function(){define(["exports"],function(a){(function(g){g.length=function(r,A){const v=r[A],t=r[A+1];r=r[A+2];return Math.sqrt(v*v+t*t+r*r)};g.normalize=function(r,A){var v=r[A];const t=r[A+1],p=r[A+2];v=1/Math.sqrt(v*v+t*t+p*p);r[A]*=v;r[A+1]*=v;r[A+2]*=v};g.scale=function(r,
A,v){r[A]*=v;r[A+1]*=v;r[A+2]*=v};g.add=function(r,A,v,t,p,b=A){p=p||r;p[b]=r[A]+v[t];p[b+1]=r[A+1]+v[t+1];p[b+2]=r[A+2]+v[t+2]};g.subtract=function(r,A,v,t,p,b=A){p=p||r;p[b]=r[A]-v[t];p[b+1]=r[A+1]-v[t+1];p[b+2]=r[A+2]-v[t+2]}})(a.Vec3Compact||(a.Vec3Compact={}));Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/Util":function(){define("exports ../../../../core/mathUtils ../../../../chunks/vec3f64 ../../../../chunks/mat4 ../../../../chunks/vec2f64 ../../../../chunks/vec4f64 ../../../../chunks/vec2 ../../../../chunks/vec4".split(" "),
function(a,g,r,A,v,t,p,b){function k(f,e){if(!f)throw e=e||"assert",f=Error(e),f.stack&&console.log(f.stack),new w(e);}function n(f,e){f[12]=e[0];f[13]=e[1];f[14]=e[2]}function l(f,e=0){let d=0;for(let h=0;4>h;h++)d+=f[e+h]*c[h];return d}function q(f){return f-Math.floor(f)}const C=t.create();let w=function(){function f(e){this.message=e}f.prototype.toString=function(){return`AssertException: ${this.message}`};return f}();const x=[1,256,65536,16777216],c=[1/256,1/65536,1/16777216,1/4294967296],m=
l(new Uint8ClampedArray([255,255,255,255]));a.AssertException=w;a.assert=k;a.createTranslationMatrix=function(f,e){f=A.identity(f);n(f,e);return f};a.dec2hex=function(f){f=f.toString(16);return"00000000".substr(0,8-f.length)+f};a.encodeInt16=function(f){return g.clamp(Math.round(32767*f),-32767,32767)};a.encodeNormal=function(f,e){const d=Math.abs(f[0]),h=Math.abs(f[1]),F=1/(d+h+Math.abs(f[2])),E=Math.min(f[2]*F,0);e[0]=(0>f[0]?-1:1)*(d*F-E);e[1]=(0>f[1]?-1:1)*(h*F-E)};a.fallbackIfUndefined=function(f,
e){return void 0===f?e:f};a.fovd2fovx=function(f,e,d){return 2*Math.atan(e*Math.tan(.5*f)/Math.sqrt(e*e+d*d))};a.fovd2fovy=function(f,e,d){return 2*Math.atan(d*Math.tan(.5*f)/Math.sqrt(e*e+d*d))};a.fovx2fovd=function(f,e,d){return 2*Math.atan(Math.sqrt(e*e+d*d)*Math.tan(.5*f)/e)};a.fovx2fovy=function(f,e,d){return 2*Math.atan(d*Math.tan(.5*f)/e)};a.fovy2fovd=function(f,e,d){return 2*Math.atan(Math.sqrt(e*e+d*d)*Math.tan(.5*f)/d)};a.fovy2fovx=function(f,e,d){return 2*Math.atan(e*Math.tan(.5*f)/d)};
a.getFirstObjectKey=function(f){for(const e in f)return e};a.getMatrixTranslation=function(f,e=r.create()){e[0]=f[12];e[1]=f[13];e[2]=f[14];return e};a.hex2rgb=function(f){f=Math.floor(f);return[(f>>16&255)/255,(f>>8&255)/255,(f&255)/255]};a.inverseProjectionInfo=function(f,e,d,h,F){0===f[11]?(h[0]=2/(e*f[0]),h[1]=2/(d*f[5]),h[2]=(1+f[12])/f[0],h[3]=(1+f[13])/f[5],p.set(F,0,1)):(h[0]=-2/(e*f[0]),h[1]=-2/(d*f[5]),h[2]=(1-f[8])/f[0],h[3]=(1-f[9])/f[5],p.set(F,1,0))};a.isTranslationMatrix=function(f){return 1===
f[0]&&0===f[1]&&0===f[2]&&0===f[3]&&0===f[4]&&1===f[5]&&0===f[6]&&0===f[7]&&0===f[8]&&0===f[9]&&1===f[10]&&0===f[11]&&1===f[15]};a.logWithBase=function(f,e){return Math.log(f)/Math.log(e)};a.objectEmpty=function(f){for(const e in f)return!1;return!0};a.packFloatRGBA=function(f,e,d=0){f=g.clamp(f,0,m);for(let h=0;4>h;h++)e[d+h]=Math.floor(256*q(f*x[h]))};a.project=function(f,e,d,h,F){F||(F=f);C[0]=f[0];C[1]=f[1];C[2]=f[2];C[3]=1;b.transformMat4(C,C,e);2<F.length&&(F[2]=-C[2]);b.transformMat4(C,C,d);
k(0!==C[3]);F[0]=C[0]/C[3];F[1]=C[1]/C[3];F[2]=C[2]/C[3];F[0]=(.5*F[0]+.5)*h[2]+h[0];F[1]=(.5*F[1]+.5)*h[3]+h[1]};a.rayBoxTest=function(f,e,d,h){let F,E=(d[0]-f[0])/e[0],u=(h[0]-f[0])/e[0];E>u&&(F=E,E=u,u=F);let z=(d[1]-f[1])/e[1],y=(h[1]-f[1])/e[1];z>y&&(F=z,z=y,y=F);if(E>y||z>u)return!1;z>E&&(E=z);y<u&&(u=y);d=(d[2]-f[2])/e[2];f=(h[2]-f[2])/e[2];d>f&&(F=d,d=f,f=F);if(E>f||d>u)return!1;f<u&&(u=f);return 0>u?!1:!0};a.rayRay2D=function(f,e,d,h,F,E=v.create()){const u=(h[F]-d[F])*(e[0]-f[0])-(h[0]-
d[0])*(e[F]-f[F]);if(0===u)return!1;d=((h[0]-d[0])*(f[F]-d[F])-(h[F]-d[F])*(f[0]-d[0]))/u;E[0]=f[0]+d*(e[0]-f[0]);E[1]=f[F]+d*(e[F]-f[F]);return!0};a.rayTriangle3D=function(f,e,d,h,F,E,u,z,y=r.create()){var B=h[u]-d[E];const H=h[u+1]-d[E+1],D=h[u+2]-d[E+2];h=F[z]-d[E];u=F[z+1]-d[E+1];F=F[z+2]-d[E+2];const M=e[1]*F-u*e[2],U=e[2]*h-F*e[0],R=e[0]*u-h*e[1];z=B*M+H*U+D*R;if(-1E-5<z&&1E-5>z)return!1;z=1/z;const J=f[0]-d[E],L=f[1]-d[E+1];f=f[2]-d[E+2];y[1]=z*(J*M+L*U+f*R);if(0>y[1]||1<y[1])return!1;d=L*
D-H*f;f=f*B-D*J;B=J*H-B*L;y[2]=z*(e[0]*d+e[1]*f+e[2]*B);if(0>y[2]||1<y[1]+y[2])return!1;y[0]=z*(h*d+u*f+F*B);return!0};a.rgb2hex=function(f){const e=g.clamp(Math.round(255*f[0]),0,255),d=g.clamp(Math.round(255*f[1]),0,255);f=g.clamp(Math.round(255*f[2]),0,255);return"0x"+((e<<16)+(d<<8)+f).toString(16)};a.setMatrixTranslation=n;a.setMatrixTranslation3=function(f,e,d,h){f[12]=e;f[13]=d;f[14]=h};a.unpackFloatRGBA=l;a.verify=function(f,e){f||console.warn("Verify failed: "+(e||"")+"\n"+Error("verify").stack)};
Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/geometryDataUtils":function(){define(["exports","../../../../chunks/vec3f64","../../../../chunks/vec3","../../../../chunks/triangle"],function(a,g,r,A){let v=(()=>{const q=new Uint32Array(131072);for(let C=0;C<q.length;++C)q[C]=C;return q})();const t=new Uint16Array([0]),p=(()=>{const q=new Uint16Array(65536);for(let C=0;C<q.length;++C)q[C]=C;return q})(),b=g.create(),k=g.create(),n=g.create(),l=g.create();a.computeAttachmentOriginLines=
function(q,C,w,x){if(!q)return!1;const {size:c,data:m}=q;r.set(x,0,0,0);r.set(l,0,0,0);let f=q=0;const e=C?C.length-1:m.length/c-1;w=e+(w?2:0);for(let F=0;F<w;F+=2){var d=F<e?F:e,h=F<e?F+1:0;d=(C?C[d]:d)*c;h=(C?C[h]:h)*c;b[0]=m[d+0];b[1]=m[d+1];b[2]=m[d+2];k[0]=m[h+0];k[1]=m[h+1];k[2]=m[h+2];r.scale(b,r.add(b,b,k),.5);h=r.dist(b,k);0<h?(r.add(x,x,r.scale(b,b,h)),q+=h):(r.add(l,l,b),f++)}return 0!==q?(r.scale(x,x,1/q),!0):0!==f?(r.scale(x,l,1/f),!0):!1};a.computeAttachmentOriginPoints=function(q,C,
w){if(!q||!C)return!1;const {size:x,data:c}=q;r.set(w,0,0,0);q=-1;let m=0;for(let f=0;f<C.length;f++){const e=C[f]*x;q!==e&&(w[0]+=c[e+0],w[1]+=c[e+1],w[2]+=c[e+2],m++);q=e}1<m&&r.scale(w,w,1/m);return 0<m};a.computeAttachmentOriginTriangles=function(q,C,w){if(!q)return!1;const {size:x,data:c}=q;r.set(w,0,0,0);r.set(l,0,0,0);let m=q=0;for(let e=0;e<C.length-2;e+=3){var f=C[e+0]*x;const d=C[e+1]*x,h=C[e+2]*x;r.set(b,c[f+0],c[f+1],c[f+2]);r.set(k,c[d+0],c[d+1],c[d+2]);r.set(n,c[h+0],c[h+1],c[h+2]);
(f=A.areaPoints3d(b,k,n))?(r.add(b,b,k),r.add(b,b,n),r.scale(b,b,1/3*f),r.add(w,w,b),q+=f):(r.add(l,l,b),r.add(l,l,k),r.add(l,l,n),m+=3)}return 0===m&&0===q?!1:0!==q?(r.scale(w,w,1/q),!0):0!==m?(r.scale(w,l,1/m),!0):!1};a.generateDefaultIndexArray=function(q){if(1===q)return t;if(q<p.length)return new Uint16Array(p.buffer,0,q);if(q>v.length){v=new Uint32Array(Math.max(2*v.length,q));for(let C=0;C<v.length;C++)v[C]=C}return new Uint32Array(v.buffer,0,q)};Object.defineProperty(a,"__esModule",{value:!0})})},
"esri/views/3d/webgl-engine/lib/Geometry":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ./Util ./BoundingInfo ./ContentObject ./geometryDataUtils".split(" "),function(a,g,r,A,v,t,p){function b(k){if(k.BYTES_PER_ELEMENT===Uint16Array.BYTES_PER_ELEMENT)return k;for(const n of k)if(65536<=n)return k;return new Uint16Array(k)}t=function(k){function n(q,C=[],w=0,x=-1){var c=k.call(this)||this;c._primitiveType=w;c.edgeIndicesLength=x;c.type=2;c._vertexAttributes=
new Map;c._indices=new Map;c._boundingInfo=null;for(const [m,f]of q)f&&c._vertexAttributes.set(m,{...f});if(null==C||0===C.length){q=c._vertexAttributes.values().next().value;q=null==q?0:q.data.length/q.size;C=p.generateDefaultIndexArray(q);c.edgeIndicesLength=0>c.edgeIndicesLength?q:c.edgeIndicesLength;for(const m of c._vertexAttributes.keys())c._indices.set(m,C)}else for(const [m,f]of C)f&&(c._indices.set(m,b(f)),"position"===m&&(c.edgeIndicesLength=0>c.edgeIndicesLength?c._indices.get(m).length:
c.edgeIndicesLength));return c}g._inheritsLoose(n,k);var l=n.prototype;l.getMutableAttribute=function(q){(q=this._vertexAttributes.get(q))&&!q.exclusive&&(q.data=Array.from(q.data),q.exclusive=!0);return q};l.computeAttachmentOrigin=function(q){return 0===this.primitiveType?this.computeAttachmentOriginTriangles(q):this.computeAttachmentOriginPoints(q)};l.computeAttachmentOriginTriangles=function(q){const C=this.indices.get("position"),w=this.vertexAttributes.get("position");return p.computeAttachmentOriginTriangles(w,
C,q)};l.computeAttachmentOriginPoints=function(q){const C=this.indices.get("position"),w=this.vertexAttributes.get("position");return p.computeAttachmentOriginPoints(w,C,q)};l.invalidateBoundingInfo=function(){this._boundingInfo=null};l._calculateBoundingInfo=function(){const q=this.indices.get("position");if(0===q.length)return null;const C=0===this.primitiveType?3:1;A.assert(0===q.length%C,"Indexing error: "+q.length+" not divisible by "+C);const w=p.generateDefaultIndexArray(q.length/C),x=this.vertexAttributes.get("position");
return new v.BoundingInfo(w,C,q,x)};g._createClass(n,[{key:"vertexAttributes",get:function(){return this._vertexAttributes}},{key:"indices",get:function(){return this._indices}},{key:"indexCount",get:function(){const q=this._indices.values().next().value;return q?q.length:0}},{key:"primitiveType",get:function(){return this._primitiveType}},{key:"faceCount",get:function(){return this.indexCount/3}},{key:"boundingInfo",get:function(){r.isNone(this._boundingInfo)&&(this._boundingInfo=this._calculateBoundingInfo());
return this._boundingInfo}}]);return n}(t.ContentObject);a.Geometry=t;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/BoundingInfo":function(){define(["exports","../../../../core/PooledArray","../../../../chunks/vec3f64","../../../../chunks/vec3","./Util"],function(a,g,r,A,v){let t=function(){function b(n,l,q,C){this.primitiveIndices=n;this._numIndexPerPrimitive=l;this.indices=q;this.position=C;this.center=r.create();v.assert(1<=n.length);v.assert(0===q.length%
this._numIndexPerPrimitive);v.assert(q.length>=n.length*this._numIndexPerPrimitive);v.assert(3===C.size||4===C.size);const {data:w,size:x}=C;C=n.length;l=x*q[this._numIndexPerPrimitive*n[0]];p.clear();p.push(l);this.bbMin=r.fromValues(w[l],w[l+1],w[l+2]);this.bbMax=r.clone(this.bbMin);for(var c=0;c<C;++c){var m=this._numIndexPerPrimitive*n[c];for(var f=0;f<this._numIndexPerPrimitive;++f){l=x*q[m+f];p.push(l);let e=w[l];this.bbMin[0]=Math.min(e,this.bbMin[0]);this.bbMax[0]=Math.max(e,this.bbMax[0]);
e=w[l+1];this.bbMin[1]=Math.min(e,this.bbMin[1]);this.bbMax[1]=Math.max(e,this.bbMax[1]);e=w[l+2];this.bbMin[2]=Math.min(e,this.bbMin[2]);this.bbMax[2]=Math.max(e,this.bbMax[2])}}A.lerp(this.center,this.bbMin,this.bbMax,.5);this.radius=.5*Math.max(Math.max(this.bbMax[0]-this.bbMin[0],this.bbMax[1]-this.bbMin[1]),this.bbMax[2]-this.bbMin[2]);n=this.radius*this.radius;for(q=0;q<p.length;++q)l=p.getItemAt(q),C=w[l]-this.center[0],c=w[l+1]-this.center[1],l=w[l+2]-this.center[2],m=C*C+c*c+l*l,m<=n||(m=
Math.sqrt(m),f=.5*(m-this.radius),this.radius+=f,n=this.radius*this.radius,m=f/m,this.center[0]+=C*m,this.center[1]+=c*m,this.center[2]+=l*m);p.clear()}var k=b.prototype;k.getCenter=function(){return this.center};k.getBSRadius=function(){return this.radius};k.getBBMin=function(){return this.bbMin};k.getBBMax=function(){return this.bbMax};k.getChildren=function(){if(this._children)return this._children;if(1<A.squaredDistance(this.bbMin,this.bbMax)){var n=A.lerp(r.create(),this.bbMin,this.bbMax,.5),
l=this.primitiveIndices.length;const x=new Uint8Array(l),c=Array(8);for(var q=0;8>q;++q)c[q]=0;const {data:m,size:f}=this.position;for(q=0;q<l;++q){var C=0;const e=this._numIndexPerPrimitive*this.primitiveIndices[q];var w=f*this.indices[e];let d=m[w],h=m[w+1],F=m[w+2];for(let E=1;E<this._numIndexPerPrimitive;++E){w=f*this.indices[e+E];const u=m[w],z=m[w+1];w=m[w+2];u<d&&(d=u);z<h&&(h=z);w<F&&(F=w)}d<n[0]&&(C|=1);h<n[1]&&(C|=2);F<n[2]&&(C|=4);x[q]=C;++c[C]}n=0;for(q=0;8>q;++q)0<c[q]&&++n;if(2>n)return;
n=Array(8);for(q=0;8>q;++q)n[q]=0<c[q]?new Uint32Array(c[q]):void 0;for(q=0;8>q;++q)c[q]=0;for(q=0;q<l;++q)C=x[q],n[C][c[C]++]=this.primitiveIndices[q];this._children=Array(8);for(l=0;8>l;++l)void 0!==n[l]&&(this._children[l]=new b(n[l],this._numIndexPerPrimitive,this.indices,this.position))}return this._children};b.prune=function(){p.prune()};return b}();const p=new g({deallocator:null});a.BoundingInfo=t;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/ContentObject":function(){define(["exports",
"../../../../core/uid"],function(a,g){let r=function(){function A(){this.id=g.generateUID()}A.prototype.unload=function(){};return A}();a.ContentObject=r;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/materials/RibbonLineMaterial":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../core/Logger ../../../../core/mathUtils ../../../../core/screenUtils ../../../../chunks/vec3f64 ../../../../chunks/vec3 ../../../../chunks/vec2 ../../support/buffer/InterleavedLayout ../../support/geometryUtils ../lib/Util ../lib/geometryDataUtils ./renderers/utils ../lib/GLMaterial ../lib/Material ./VisualVariableMaterialParameters ../shaders/RibbonLineTechnique".split(" "),
function(a,g,r,A,v,t,p,b,k,n,l,q,C,w,x,c,m,f){function e(ta,wa,G,I,ca){for(let ia=0;ia<ca;ia++)G[I++]=ta[wa++];return I}function d(ta,wa,G){wa=wa.get("position").data;G=G?G.get("position"):null;return ta.isClosed?G?2<G.length:6<wa.length:!1}const h=A.getLogger("esri.views.3d.webgl-engine.materials.RibbonLineMaterial");A=function(ta){function wa(I){I=ta.call(this,I,E)||this;I._vertexAttributeLocations=f.ribbonVertexAttributeLocations;I.techniqueConfig=new f.RibbonLineTechniqueConfiguration;I.layout=
I.createLayout();return I}g._inheritsLoose(wa,ta);var G=wa.prototype;G.isClosed=function(I,ca){return this.params.isClosed?ca?2<ca.length:6<I.length:!1};G.dispose=function(){};G.getPassParameters=function(){return this.params};G.getTechniqueConfig=function(I,ca){this.techniqueConfig.output=I;I=r.isSome(this.params.stipplePattern);this.techniqueConfig.stippleEnabled=I;this.techniqueConfig.stippleIntegerRepeatsEnabled=I&&this.params.stippleIntegerRepeats;this.techniqueConfig.stippleOffColorEnabled=
I&&r.isSome(this.params.stippleOffColor);this.techniqueConfig.slicePlaneEnabled=this.params.slicePlaneEnabled;this.techniqueConfig.sceneHasOcludees=this.params.sceneHasOcludees;this.techniqueConfig.roundJoins="round"===this.params.join;this.techniqueConfig.roundCaps="round"===this.params.cap;this.techniqueConfig.transparent=this.params.transparent;this.techniqueConfig.polygonOffset=this.params.polygonOffset;this.techniqueConfig.writeDepth=this.params.writeDepth;this.techniqueConfig.vvColor=this.params.vvColorEnabled;
this.techniqueConfig.vvOpacity=this.params.vvOpacityEnabled;this.techniqueConfig.vvSize=this.params.vvSizeEnabled;this.techniqueConfig.innerColorEnabled=0<this.params.innerWidth&&r.isSome(this.params.innerColor);this.techniqueConfig.falloffEnabled=0<this.params.falloff;this.techniqueConfig.occluder=8===this.params.renderOccluded;this.techniqueConfig.transparencyPassType=ca?ca.transparencyPassType:3;this.techniqueConfig.multipassTerrainEnabled=ca?ca.multipassTerrainEnabled:!1;this.techniqueConfig.cullAboveGround=
ca?ca.cullAboveGround:!0;return this.techniqueConfig};G.intersect=function(I,ca,ia,ja,la,da,ka,X,ha){ha?this.intersectDrapedLineGeometry(I,ja,da,ka):this.intersectLineGeometry(I,ca,ia,ja,this.params.width,ka)};G.intersectDrapedLineGeometry=function(I,ca,ia,ja){if(ca.options.selectionMode){ca=I.vertexAttributes.get("position").data;var la=I.vertexAttributes.get("size"),da=this.params.width;this.params.vvSizeEnabled?(la=I.vertexAttributes.get("sizeFeatureAttribute").data[0],da*=v.clamp(this.params.vvSizeOffset[0]+
la*this.params.vvSizeFactor[0],this.params.vvSizeMinSize[0],this.params.vvSizeMaxSize[0])):la&&(da*=la.data[0]);la=ia[0];ia=ia[1];I=(da/2+4)*I.screenToWorldRatio;da=Number.MAX_VALUE;for(let K=0;K<ca.length-5;K+=3){var ka=ca[K],X=ca[K+1],ha=la-ka,fa=ia-X;ka=ca[K+3]-ka;X=ca[K+4]-X;const ba=v.clamp((ka*ha+X*fa)/(ka*ka+X*X),0,1);ha=ka*ba-ha;fa=X*ba-fa;fa=ha*ha+fa*fa;fa<da&&(da=fa)}da<I*I&&ja()}};G.intersectLineGeometry=function(I,ca,ia,ja,la,da){if(ja.options.selectionMode&&!w.isInstanceHidden(ca))if(q.isTranslationMatrix(ia)){var ka=
I.vertexAttributes;ca=ka.get("position").data;if(this.params.vvSizeEnabled){var X=ka.get("sizeFeatureAttribute").data[0];la*=v.clamp(this.params.vvSizeOffset[0]+X*this.params.vvSizeFactor[0],this.params.vvSizeMinSize[0],this.params.vvSizeMaxSize[0])}else ka.has("size")&&(la*=ka.get("size").data[0]);X=ja.camera;var ha=D;k.copy(ha,ja.point);la=la*X.pixelRatio/2+4*X.pixelRatio;b.set(Q[0],ha[0]-la,ha[1]+la,0);b.set(Q[1],ha[0]+la,ha[1]+la,0);b.set(Q[2],ha[0]+la,ha[1]-la,0);b.set(Q[3],ha[0]-la,ha[1]-la,
0);for(var fa=0;4>fa;fa++)if(!X.unprojectFromRenderScreen(Q[fa],Z[fa]))return;l.plane.fromPoints(X.eye,Z[0],Z[1],O);l.plane.fromPoints(X.eye,Z[1],Z[2],P);l.plane.fromPoints(X.eye,Z[2],Z[3],S);l.plane.fromPoints(X.eye,Z[3],Z[0],Y);fa=Number.MAX_VALUE;I=d(this.params,ka,I.indices)?ca.length-2:ca.length-5;for(ka=0;ka<I;ka+=3){z[0]=ca[ka]+ia[12];z[1]=ca[ka+1]+ia[13];z[2]=ca[ka+2]+ia[14];var K=(ka+3)%ca.length;y[0]=ca[K]+ia[12];y[1]=ca[K+1]+ia[13];y[2]=ca[K+2]+ia[14];if(!(0>l.plane.signedDistance(O,z)&&
0>l.plane.signedDistance(O,y)||0>l.plane.signedDistance(P,z)&&0>l.plane.signedDistance(P,y)||0>l.plane.signedDistance(S,z)&&0>l.plane.signedDistance(S,y)||0>l.plane.signedDistance(Y,z)&&0>l.plane.signedDistance(Y,y))){X.projectToRenderScreen(z,M);X.projectToRenderScreen(y,U);if(0>M[2]&&0<U[2])b.subtract(B,z,y),K=X.frustum,K=-l.plane.signedDistance(K[4],z)/b.dot(B,l.plane.normal(K[4])),b.scale(B,B,K),b.add(z,z,B),X.projectToRenderScreen(z,M);else if(0<M[2]&&0>U[2])b.subtract(B,y,z),K=X.frustum,K=-l.plane.signedDistance(K[4],
y)/b.dot(B,l.plane.normal(K[4])),b.scale(B,B,K),b.add(y,y,B),X.projectToRenderScreen(y,U);else if(0>M[2]&&0>U[2])continue;M[2]=0;U[2]=0;K=l.lineSegment.distance2(l.lineSegment.fromPoints(M,U,L),ha);K<fa&&(fa=K,b.copy(R,z),b.copy(J,y))}}ia=ja.rayBeginPoint;ja=ja.rayEndPoint;fa<la*la&&(ca=Number.MAX_VALUE,l.lineSegment.closestLineSegmentPoint(l.lineSegment.fromPoints(R,J,L),l.lineSegment.fromPoints(ia,ja,N),H)&&(b.subtract(H,H,ia),ca=b.length(H),b.scale(H,H,1/ca),ca/=b.distance(ia,ja)),da(ca,H))}else h.error("intersection assumes a translation-only matrix")};
G.computeAttachmentOrigin=function(I,ca){const ia=I.vertexAttributes;if(!ia)return null;I=I.indices;const ja=ia.get("position");return C.computeAttachmentOriginLines(ja,I?I.get("position"):null,I&&d(this.params,ia,I),ca)};G.createLayout=function(){const I=n.newLayout().vec3f("position").f32("subdivisionFactor").vec2f("uv0").vec3f("auxpos1").vec3f("auxpos2");this.params.vvSizeEnabled?I.f32("sizeFeatureAttribute"):I.f32("size");this.params.vvColorEnabled?I.f32("colorFeatureAttribute"):I.vec4f("color");
this.params.vvOpacityEnabled&&I.f32("opacityFeatureAttribute");return I};G.createBufferWriter=function(){return new u(this.layout,this.params)};G.getGLMaterial=function(I){return 0===I.output||7===I.output||4===I.output||1===I.output?new F(I):void 0};G.validateParameterValues=function(I){"miter"!==I.join&&(I.miterLimit=0);this.requiresTransparent(I)&&(I.transparent=!0)};G.requiresTransparent=function(I){return!!(1>(I.color&&I.color[3])||0<I.innerWidth&&this.colorRequiresTransparent(I.innerColor)||
I.stipplePattern&&this.colorRequiresTransparent(I.stippleOffColor)||0<I.falloff)};G.colorRequiresTransparent=function(I){return r.isSome(I)&&1>I[3]&&0<I[3]};return wa}(c.Material);let F=function(ta){function wa(I){I=ta.call(this,I)||this;I.updateParameters();return I}g._inheritsLoose(wa,ta);var G=wa.prototype;G.updateParameters=function(I){this.technique=this.techniqueRep.acquireAndReleaseExisting(f.RibbonLineTechnique,this.material.getTechniqueConfig(this.output,I),this.technique)};G.beginSlot=function(I){return this.technique.configuration.occluder?
3===I||10===I||11===I:0===this.output||7===this.output?(this.targetSlot=this.technique.configuration.writeDepth?5:8,I===this.targetSlot):3===I};G._updateOccludeeState=function(I){I.hasOccludees!==this.material.params.sceneHasOcludees&&this.material.setParameterValues({sceneHasOcludees:I.hasOccludees})};G.ensureParameters=function(I){0!==this.output&&7!==this.output||this._updateOccludeeState(I);this.updateParameters(I)};G.bind=function(I,ca){I.bindProgram(this.technique.program);this.technique.bindPass(I,
this.material.getPassParameters(),ca)};G.getPipelineState=function(I,ca){return this.technique.getPipelineState(I,ca)};return wa}(x);const E={width:0,color:[1,1,1,1],join:"miter",cap:"butt",miterLimit:5,writeDepth:!0,polygonOffset:!1,stipplePattern:null,stippleIntegerRepeats:!1,stippleOffColor:null,slicePlaneEnabled:!1,vvFastUpdate:!1,transparent:!1,isClosed:!1,falloff:0,innerWidth:0,innerColor:null,sceneHasOcludees:!1,...c.materialParametersDefaults,...m.Default};let u=function(){function ta(G,I){this.params=
I;this.numJoinSubdivisions=0;this.vertexBufferLayout=G;switch(this.params.join){case "miter":case "bevel":this.numJoinSubdivisions=I.stipplePattern?1:0;break;case "round":this.numJoinSubdivisions=1}}var wa=ta.prototype;wa.isClosed=function(G){return d(this.params,G.vertexAttributes,G.indices)};wa.numCapSubdivisions=function(G){if(this.isClosed(G))return 0;switch(this.params.cap){case "butt":return 0;case "square":return 1;case "round":return 3}};wa.allocate=function(G){return this.vertexBufferLayout.createBuffer(G)};
wa.elementCount=function(G){var I=2*this.numCapSubdivisions(G)+2,ca=G.indices.get("position").length/2+1;const ia=this.isClosed(G);I=ia?2:2*I;var ja=ia?0:1;ca=ia?ca:ca-1;if(G.vertexAttributes.has("subdivisions"))for(G=G.vertexAttributes.get("subdivisions").data;ja<ca;++ja)I+=4+2*G[ja];else I+=(ca-ja)*(2*this.numJoinSubdivisions+4);return I+2};wa.write=function(G,I,ca,ia){const ja=V,la=T,da=W;var ka=I.vertexAttributes.get("position").data,X=I.indices&&I.indices.get("position");const ha=this.numCapSubdivisions(I);
X&&X.length!==2*(ka.length/3-1)&&console.warn("RibbonLineMaterial does not support indices");X=null;I.vertexAttributes.has("subdivisions")&&(X=I.vertexAttributes.get("subdivisions").data);let fa=1,K=0;this.params.vvSizeEnabled?K=I.vertexAttributes.get("sizeFeatureAttribute").data[0]:I.vertexAttributes.has("size")&&(fa=I.vertexAttributes.get("size").data[0]);let ba=[1,1,1,1],ea=0;this.params.vvColorEnabled?ea=I.vertexAttributes.get("colorFeatureAttribute").data[0]:I.vertexAttributes.has("color")&&
(ba=I.vertexAttributes.get("color").data);let aa=0;this.params.vvOpacityEnabled&&(aa=I.vertexAttributes.get("opacityFeatureAttribute").data[0]);const pa=ka.length/3;G=G.transformation;const na=new Float32Array(ca.buffer);ca=this.vertexBufferLayout.stride/4;let ra=ia*ca;ia=ra;const va=(za,Ba,Ea,Ha,Oa,Pa,Ja)=>{na[ra++]=Ba[0];na[ra++]=Ba[1];na[ra++]=Ba[2];na[ra++]=Ha;na[ra++]=Oa;na[ra++]=Pa;na[ra++]=za[0];na[ra++]=za[1];na[ra++]=za[2];na[ra++]=Ea[0];na[ra++]=Ea[1];na[ra++]=Ea[2];this.params.vvSizeEnabled?
na[ra++]=K:na[ra++]=fa;this.params.vvColorEnabled?na[ra++]=ea:(za=Math.min(4*Ja,ba.length-4),na[ra++]=ba[za+0],na[ra++]=ba[za+1],na[ra++]=ba[za+2],na[ra++]=ba[za+3]);this.params.vvOpacityEnabled&&(na[ra++]=aa)};ra+=ca;b.set(la,ka[0],ka[1],ka[2]);G&&b.transformMat4(la,la,G);if(I=this.isClosed(I)){var qa=ka.length-3;b.set(ja,ka[qa],ka[qa+1],ka[qa+2]);G&&b.transformMat4(ja,ja,G)}else{b.copy(ja,la);b.set(da,ka[3],ka[4],ka[5]);G&&b.transformMat4(da,da,G);for(qa=0;qa<ha;++qa){var xa=1-qa/ha;va(ja,la,da,
xa,1,-4,0);va(ja,la,da,xa,1,4,0)}va(ja,la,da,0,0,-4,0);va(ja,la,da,0,0,4,0);b.copy(ja,la);b.copy(la,da)}xa=I?0:1;for(qa=I?pa:pa-1;xa<qa;xa++){var ua=(xa+1)%pa*3;b.set(da,ka[ua+0],ka[ua+1],ka[ua+2]);G&&b.transformMat4(da,da,G);va(ja,la,da,0,1,-1,xa);va(ja,la,da,0,1,1,xa);ua=X?X[xa]:this.numJoinSubdivisions;for(let za=0;za<ua;++za){const Ba=(za+1)/(ua+1);va(ja,la,da,Ba,1,-2,xa);va(ja,la,da,Ba,1,2,xa)}va(ja,la,da,1,0,-2,xa);va(ja,la,da,1,0,2,xa);b.copy(ja,la);b.copy(la,da)}if(I)ra=e(na,ia+ca,na,ra,2*
ca);else for(va(ja,la,da,0,1,-5,qa),va(ja,la,da,0,1,5,qa),ka=0;ka<ha;++ka)X=(ka+1)/ha,va(ja,la,da,X,1,-5,qa),va(ja,la,da,X,1,5,qa);e(na,ia+ca,na,ia,ca);ra=e(na,ra-ca,na,ra,ca)};return ta}();const z=p.create(),y=p.create(),B=p.create(),H=p.create(),D=p.create(),M=t.createRenderScreenPointArray3(),U=t.createRenderScreenPointArray3(),R=p.create(),J=p.create(),L=l.lineSegment.create(),N=l.lineSegment.create(),V=p.create(),T=p.create(),W=p.create(),Q=[t.createRenderScreenPointArray3(),t.createRenderScreenPointArray3(),
t.createRenderScreenPointArray3(),t.createRenderScreenPointArray3()],Z=[p.create(),p.create(),p.create(),p.create()],O=l.plane.create(),P=l.plane.create(),S=l.plane.create(),Y=l.plane.create();a.RibbonLineMaterial=A;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/support/buffer/InterleavedLayout":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","./BufferView","./types"],function(a,g,r,A){let v=function(){function p(k,n){this.layout=k;this.buffer="number"===
typeof n?new ArrayBuffer(n*k.stride):n;for(const l of k.fieldNames)n=k.fields.get(l),this[l]=new n.constructor(this.buffer,n.offset,this.stride)}var b=p.prototype;b.getField=function(k,n){return(k=this[k])&&k.elementCount===n.ElementCount&&k.elementType===n.ElementType?k:null};b.slice=function(k,n){return new p(this.layout,this.buffer.slice(k*this.stride,n*this.stride))};b.copyFrom=function(k,n,l,q){const C=this.stride;0===C%4?(k=new Uint32Array(k.buffer,n*C,q*C/4),(new Uint32Array(this.buffer,l*
C,q*C/4)).set(k)):(k=new Uint8Array(k.buffer,n*C,q*C),(new Uint8Array(this.buffer,l*C,q*C)).set(k))};g._createClass(p,[{key:"stride",get:function(){return this.layout.stride}},{key:"count",get:function(){return this.buffer.byteLength/this.stride}},{key:"byteLength",get:function(){return this.buffer.byteLength}}]);return p}(),t=function(){function p(){this.stride=0;this.fields=new Map;this.fieldNames=[]}var b=p.prototype;b.vec2f=function(k,n){this.appendField(k,r.BufferViewVec2f,n);return this};b.vec2f64=
function(k,n){this.appendField(k,r.BufferViewVec2f64,n);return this};b.vec3f=function(k,n){this.appendField(k,r.BufferViewVec3f,n);return this};b.vec3f64=function(k,n){this.appendField(k,r.BufferViewVec3f64,n);return this};b.vec4f=function(k,n){this.appendField(k,r.BufferViewVec4f,n);return this};b.vec4f64=function(k,n){this.appendField(k,r.BufferViewVec4f64,n);return this};b.mat3f=function(k,n){this.appendField(k,r.BufferViewMat3f,n);return this};b.mat3f64=function(k,n){this.appendField(k,r.BufferViewMat3f64,
n);return this};b.mat4f=function(k,n){this.appendField(k,r.BufferViewMat4f,n);return this};b.mat4f64=function(k,n){this.appendField(k,r.BufferViewMat4f64,n);return this};b.vec4u8=function(k,n){this.appendField(k,r.BufferViewVec4u8,n);return this};b.f32=function(k,n){this.appendField(k,r.BufferViewFloat,n);return this};b.f64=function(k,n){this.appendField(k,r.BufferViewFloat64,n);return this};b.u8=function(k,n){this.appendField(k,r.BufferViewUint8,n);return this};b.u16=function(k,n){this.appendField(k,
r.BufferViewUint16,n);return this};b.i8=function(k,n){this.appendField(k,r.BufferViewInt8,n);return this};b.vec2i8=function(k,n){this.appendField(k,r.BufferViewVec2i8,n);return this};b.vec2i16=function(k,n){this.appendField(k,r.BufferViewVec2i16,n);return this};b.vec2u8=function(k,n){this.appendField(k,r.BufferViewVec2u8,n);return this};b.vec4u16=function(k,n){this.appendField(k,r.BufferViewVec4u16,n);return this};b.u32=function(k,n){this.appendField(k,r.BufferViewUint32,n);return this};b.appendField=
function(k,n,l){const q=n.ElementCount*A.elementTypeSize(n.ElementType);this.fields.set(k,{size:q,constructor:n,offset:this.stride,optional:l});this.stride+=q;this.fieldNames.push(k)};b.alignTo=function(k){this.stride=Math.floor((this.stride+k-1)/k)*k;return this};b.hasField=function(k){return 0<=this.fieldNames.indexOf(k)};b.createBuffer=function(k){return new v(this,k)};b.createView=function(k){return new v(this,k)};b.clone=function(){const k=new p;k.stride=this.stride;k.fields=new Map;this.fields.forEach((n,
l)=>k.fields.set(l,n));k.fieldNames=this.fieldNames.slice();k.BufferType=this.BufferType;return k};return p}();a.InterleavedBuffer=v;a.InterleavedLayout=t;a.newLayout=function(){return new t};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/support/buffer/BufferView":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ./internals/Mat3 ./internals/Mat4 ./internals/Scalar ./internals/Vec2 ./internals/Vec3 ./internals/Vec4".split(" "),function(a,g,r,A,v,t,p,b){let k=
function(Q){function Z(O,P=0,S,Y){O=Q.call(this,Float32Array,O,P,S,Y)||this;O.elementType="f32";return O}g._inheritsLoose(Z,Q);Z.fromTypedArray=function(O,P){return new Z(O.buffer,O.byteOffset,P,O.byteOffset+O.byteLength)};return Z}(v.BufferViewScalarImpl);k.ElementType="f32";let n=function(Q){function Z(O,P=0,S,Y){O=Q.call(this,Float32Array,O,P,S,Y)||this;O.elementType="f32";return O}g._inheritsLoose(Z,Q);Z.fromTypedArray=function(O,P){return new Z(O.buffer,O.byteOffset,P,O.byteOffset+O.byteLength)};
return Z}(t.BufferViewVec2Impl);n.ElementType="f32";let l=function(Q){function Z(O,P=0,S,Y){O=Q.call(this,Float32Array,O,P,S,Y)||this;O.elementType="f32";return O}g._inheritsLoose(Z,Q);Z.fromTypedArray=function(O,P){return new Z(O.buffer,O.byteOffset,P,O.byteOffset+O.byteLength)};return Z}(p.BufferViewVec3Impl);l.ElementType="f32";let q=function(Q){function Z(O,P=0,S,Y){O=Q.call(this,Float32Array,O,P,S,Y)||this;O.elementType="f32";return O}g._inheritsLoose(Z,Q);Z.fromTypedArray=function(O,P){return new Z(O.buffer,
O.byteOffset,P,O.byteOffset+O.byteLength)};return Z}(b.BufferViewVec4Impl);q.ElementType="f32";let C=function(Q){function Z(O,P=0,S,Y){O=Q.call(this,Float32Array,O,P,S,Y)||this;O.elementType="f32";return O}g._inheritsLoose(Z,Q);Z.fromTypedArray=function(O,P){return new Z(O.buffer,O.byteOffset,P,O.byteOffset+O.byteLength)};return Z}(r.BufferViewMat3Impl);C.ElementType="f32";r=function(Q){function Z(O,P=0,S,Y){O=Q.call(this,Float64Array,O,P,S,Y)||this;O.elementType="f64";return O}g._inheritsLoose(Z,
Q);Z.fromTypedArray=function(O,P){return new Z(O.buffer,O.byteOffset,P,O.byteOffset+O.byteLength)};return Z}(r.BufferViewMat3Impl);r.ElementType="f64";let w=function(Q){function Z(O,P=0,S,Y){O=Q.call(this,Float32Array,O,P,S,Y)||this;O.elementType="f32";return O}g._inheritsLoose(Z,Q);Z.fromTypedArray=function(O,P){return new Z(O.buffer,O.byteOffset,P,O.byteOffset+O.byteLength)};return Z}(A.BufferViewMat4Impl);w.ElementType="f32";A=function(Q){function Z(O,P=0,S,Y){O=Q.call(this,Float64Array,O,P,S,
Y)||this;O.elementType="f64";return O}g._inheritsLoose(Z,Q);Z.fromTypedArray=function(O,P){return new Z(O.buffer,O.byteOffset,P,O.byteOffset+O.byteLength)};return Z}(A.BufferViewMat4Impl);A.ElementType="f64";let x=function(Q){function Z(O,P=0,S,Y){O=Q.call(this,Float64Array,O,P,S,Y)||this;O.elementType="f64";return O}g._inheritsLoose(Z,Q);Z.fromTypedArray=function(O,P){return new Z(O.buffer,O.byteOffset,P,O.byteOffset+O.byteLength)};return Z}(v.BufferViewScalarImpl);x.ElementType="f64";let c=function(Q){function Z(O,
P=0,S,Y){O=Q.call(this,Float64Array,O,P,S,Y)||this;O.elementType="f64";return O}g._inheritsLoose(Z,Q);Z.fromTypedArray=function(O,P){return new Z(O.buffer,O.byteOffset,P,O.byteOffset+O.byteLength)};return Z}(t.BufferViewVec2Impl);c.ElementType="f64";let m=function(Q){function Z(O,P=0,S,Y){O=Q.call(this,Float64Array,O,P,S,Y)||this;O.elementType="f64";return O}g._inheritsLoose(Z,Q);Z.fromTypedArray=function(O,P){return new Z(O.buffer,O.byteOffset,P,O.byteOffset+O.byteLength)};return Z}(p.BufferViewVec3Impl);
m.ElementType="f64";let f=function(Q){function Z(O,P=0,S,Y){O=Q.call(this,Float64Array,O,P,S,Y)||this;O.elementType="f64";return O}g._inheritsLoose(Z,Q);Z.fromTypedArray=function(O,P){return new Z(O.buffer,O.byteOffset,P,O.byteOffset+O.byteLength)};return Z}(b.BufferViewVec4Impl);f.ElementType="f64";let e=function(Q){function Z(O,P=0,S,Y){O=Q.call(this,Uint8Array,O,P,S,Y)||this;O.elementType="u8";return O}g._inheritsLoose(Z,Q);Z.fromTypedArray=function(O,P){return new Z(O.buffer,O.byteOffset,P,O.byteOffset+
O.byteLength)};return Z}(v.BufferViewScalarImpl);e.ElementType="u8";let d=function(Q){function Z(O,P=0,S,Y){O=Q.call(this,Uint8Array,O,P,S,Y)||this;O.elementType="u8";return O}g._inheritsLoose(Z,Q);Z.fromTypedArray=function(O,P){return new Z(O.buffer,O.byteOffset,P,O.byteOffset+O.byteLength)};return Z}(t.BufferViewVec2Impl);d.ElementType="u8";let h=function(Q){function Z(O,P=0,S,Y){O=Q.call(this,Uint8Array,O,P,S,Y)||this;O.elementType="u8";return O}g._inheritsLoose(Z,Q);Z.fromTypedArray=function(O,
P){return new Z(O.buffer,O.byteOffset,P,O.byteOffset+O.byteLength)};return Z}(p.BufferViewVec3Impl);h.ElementType="u8";let F=function(Q){function Z(O,P=0,S,Y){O=Q.call(this,Uint8Array,O,P,S,Y)||this;O.elementType="u8";return O}g._inheritsLoose(Z,Q);Z.fromTypedArray=function(O,P){return new Z(O.buffer,O.byteOffset,P,O.byteOffset+O.byteLength)};return Z}(b.BufferViewVec4Impl);F.ElementType="u8";let E=function(Q){function Z(O,P=0,S,Y){O=Q.call(this,Uint16Array,O,P,S,Y)||this;O.elementType="u16";return O}
g._inheritsLoose(Z,Q);Z.fromTypedArray=function(O,P){return new Z(O.buffer,O.byteOffset,P,O.byteOffset+O.byteLength)};return Z}(v.BufferViewScalarImpl);E.ElementType="u16";let u=function(Q){function Z(O,P=0,S,Y){O=Q.call(this,Uint16Array,O,P,S,Y)||this;O.elementType="u16";return O}g._inheritsLoose(Z,Q);Z.fromTypedArray=function(O,P){return new Z(O.buffer,O.byteOffset,P,O.byteOffset+O.byteLength)};return Z}(t.BufferViewVec2Impl);u.ElementType="u16";let z=function(Q){function Z(O,P=0,S,Y){O=Q.call(this,
Uint16Array,O,P,S,Y)||this;O.elementType="u16";return O}g._inheritsLoose(Z,Q);Z.fromTypedArray=function(O,P){return new Z(O.buffer,O.byteOffset,P,O.byteOffset+O.byteLength)};return Z}(p.BufferViewVec3Impl);z.ElementType="u16";let y=function(Q){function Z(O,P=0,S,Y){O=Q.call(this,Uint16Array,O,P,S,Y)||this;O.elementType="u16";return O}g._inheritsLoose(Z,Q);Z.fromTypedArray=function(O,P){return new Z(O.buffer,O.byteOffset,P,O.byteOffset+O.byteLength)};return Z}(b.BufferViewVec4Impl);y.ElementType="u16";
let B=function(Q){function Z(O,P=0,S,Y){O=Q.call(this,Uint32Array,O,P,S,Y)||this;O.elementType="u32";return O}g._inheritsLoose(Z,Q);Z.fromTypedArray=function(O,P){return new Z(O.buffer,O.byteOffset,P,O.byteOffset+O.byteLength)};return Z}(v.BufferViewScalarImpl);B.ElementType="u32";let H=function(Q){function Z(O,P=0,S,Y){O=Q.call(this,Uint32Array,O,P,S,Y)||this;O.elementType="u32";return O}g._inheritsLoose(Z,Q);Z.fromTypedArray=function(O,P){return new Z(O.buffer,O.byteOffset,P,O.byteOffset+O.byteLength)};
return Z}(t.BufferViewVec2Impl);H.ElementType="u32";let D=function(Q){function Z(O,P=0,S,Y){O=Q.call(this,Uint32Array,O,P,S,Y)||this;O.elementType="u32";return O}g._inheritsLoose(Z,Q);Z.fromTypedArray=function(O,P){return new Z(O.buffer,O.byteOffset,P,O.byteOffset+O.byteLength)};return Z}(p.BufferViewVec3Impl);D.ElementType="u32";let M=function(Q){function Z(O,P=0,S,Y){O=Q.call(this,Uint32Array,O,P,S,Y)||this;O.elementType="u32";return O}g._inheritsLoose(Z,Q);Z.fromTypedArray=function(O,P){return new Z(O.buffer,
O.byteOffset,P,O.byteOffset+O.byteLength)};return Z}(b.BufferViewVec4Impl);M.ElementType="u32";let U=function(Q){function Z(O,P=0,S,Y){O=Q.call(this,Int8Array,O,P,S,Y)||this;O.elementType="i8";return O}g._inheritsLoose(Z,Q);Z.fromTypedArray=function(O,P){return new Z(O.buffer,O.byteOffset,P,O.byteOffset+O.byteLength)};return Z}(v.BufferViewScalarImpl);U.ElementType="i8";let R=function(Q){function Z(O,P=0,S,Y){O=Q.call(this,Int8Array,O,P,S,Y)||this;O.elementType="i8";return O}g._inheritsLoose(Z,Q);
Z.fromTypedArray=function(O,P){return new Z(O.buffer,O.byteOffset,P,O.byteOffset+O.byteLength)};return Z}(t.BufferViewVec2Impl);R.ElementType="i8";let J=function(Q){function Z(O,P=0,S,Y){O=Q.call(this,Int8Array,O,P,S,Y)||this;O.elementType="i8";return O}g._inheritsLoose(Z,Q);Z.fromTypedArray=function(O,P){return new Z(O.buffer,O.byteOffset,P,O.byteOffset+O.byteLength)};return Z}(p.BufferViewVec3Impl);J.ElementType="i8";let L=function(Q){function Z(O,P=0,S,Y){O=Q.call(this,Int8Array,O,P,S,Y)||this;
O.elementType="i8";return O}g._inheritsLoose(Z,Q);Z.fromTypedArray=function(O,P){return new Z(O.buffer,O.byteOffset,P,O.byteOffset+O.byteLength)};return Z}(b.BufferViewVec4Impl);L.ElementType="i8";let N=function(Q){function Z(O,P=0,S,Y){O=Q.call(this,Int16Array,O,P,S,Y)||this;O.elementType="i16";return O}g._inheritsLoose(Z,Q);Z.fromTypedArray=function(O,P){return new Z(O.buffer,O.byteOffset,P,O.byteOffset+O.byteLength)};return Z}(v.BufferViewScalarImpl);N.ElementType="i16";let V=function(Q){function Z(O,
P=0,S,Y){O=Q.call(this,Int16Array,O,P,S,Y)||this;O.elementType="i16";return O}g._inheritsLoose(Z,Q);Z.fromTypedArray=function(O,P){return new Z(O.buffer,O.byteOffset,P,O.byteOffset+O.byteLength)};return Z}(t.BufferViewVec2Impl);V.ElementType="i16";let T=function(Q){function Z(O,P=0,S,Y){O=Q.call(this,Int16Array,O,P,S,Y)||this;O.elementType="i16";return O}g._inheritsLoose(Z,Q);Z.fromTypedArray=function(O,P){return new Z(O.buffer,O.byteOffset,P,O.byteOffset+O.byteLength)};return Z}(p.BufferViewVec3Impl);
T.ElementType="i16";let W=function(Q){function Z(O,P=0,S,Y){O=Q.call(this,Int16Array,O,P,S,Y)||this;O.elementType="i16";return O}g._inheritsLoose(Z,Q);Z.fromTypedArray=function(O,P){return new Z(O.buffer,O.byteOffset,P,O.byteOffset+O.byteLength)};return Z}(b.BufferViewVec4Impl);W.ElementType="i16";v=function(Q){function Z(O,P=0,S,Y){O=Q.call(this,Int32Array,O,P,S,Y)||this;O.elementType="i32";return O}g._inheritsLoose(Z,Q);Z.fromTypedArray=function(O,P){return new Z(O.buffer,O.byteOffset,P,O.byteOffset+
O.byteLength)};return Z}(v.BufferViewScalarImpl);v.ElementType="i32";t=function(Q){function Z(O,P=0,S,Y){O=Q.call(this,Int32Array,O,P,S,Y)||this;O.elementType="i32";return O}g._inheritsLoose(Z,Q);Z.fromTypedArray=function(O,P){return new Z(O.buffer,O.byteOffset,P,O.byteOffset+O.byteLength)};return Z}(t.BufferViewVec2Impl);t.ElementType="i32";p=function(Q){function Z(O,P=0,S,Y){O=Q.call(this,Int32Array,O,P,S,Y)||this;O.elementType="i32";return O}g._inheritsLoose(Z,Q);Z.fromTypedArray=function(O,P){return new Z(O.buffer,
O.byteOffset,P,O.byteOffset+O.byteLength)};return Z}(p.BufferViewVec3Impl);p.ElementType="i32";b=function(Q){function Z(O,P=0,S,Y){O=Q.call(this,Int32Array,O,P,S,Y)||this;O.elementType="i32";return O}g._inheritsLoose(Z,Q);Z.fromTypedArray=function(O,P){return new Z(O.buffer,O.byteOffset,P,O.byteOffset+O.byteLength)};return Z}(b.BufferViewVec4Impl);b.ElementType="i32";a.BufferViewFloat=k;a.BufferViewFloat64=x;a.BufferViewInt16=N;a.BufferViewInt32=v;a.BufferViewInt8=U;a.BufferViewMat3f=C;a.BufferViewMat3f64=
r;a.BufferViewMat4f=w;a.BufferViewMat4f64=A;a.BufferViewUint16=E;a.BufferViewUint32=B;a.BufferViewUint8=e;a.BufferViewVec2f=n;a.BufferViewVec2f64=c;a.BufferViewVec2i16=V;a.BufferViewVec2i32=t;a.BufferViewVec2i8=R;a.BufferViewVec2u16=u;a.BufferViewVec2u32=H;a.BufferViewVec2u8=d;a.BufferViewVec3f=l;a.BufferViewVec3f64=m;a.BufferViewVec3i16=T;a.BufferViewVec3i32=p;a.BufferViewVec3i8=J;a.BufferViewVec3u16=z;a.BufferViewVec3u32=D;a.BufferViewVec3u8=h;a.BufferViewVec4f=q;a.BufferViewVec4f64=f;a.BufferViewVec4i16=
W;a.BufferViewVec4i32=b;a.BufferViewVec4i8=L;a.BufferViewVec4u16=y;a.BufferViewVec4u32=M;a.BufferViewVec4u8=F;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/support/buffer/internals/Mat3":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers"],function(a,g){let r=function(){function A(t,p,b=0,k,n){this.TypedArrayConstructor=t;this.elementCount=9;t=this.TypedArrayConstructor;void 0===k&&(k=9*t.BYTES_PER_ELEMENT);const l=0===p.byteLength?0:b;this.typedBuffer=
null==n?new t(p,l):new t(p,l,(n-b)/t.BYTES_PER_ELEMENT);this.typedBufferStride=k/t.BYTES_PER_ELEMENT;this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride);this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}var v=A.prototype;v.getMat=function(t,p){t*=this.typedBufferStride;for(let b=0;9>b;b++)p[b]=this.typedBuffer[t+b];return p};v.setMat=function(t,p){t*=this.typedBufferStride;for(let b=0;9>b;b++)this.typedBuffer[t+b]=p[b]};v.get=function(t,p){return this.typedBuffer[t*
this.typedBufferStride+p]};v.set=function(t,p,b){this.typedBuffer[t*this.typedBufferStride+p]=b};v.copyFrom=function(t,p,b){const k=this.typedBuffer,n=p.typedBuffer;t*=this.typedBufferStride;p=b*p.typedBufferStride;for(b=0;9>b;++b)k[t+b]=n[p+b]};g._createClass(A,[{key:"buffer",get:function(){return this.typedBuffer.buffer}}]);return A}();r.ElementCount=9;a.BufferViewMat3Impl=r;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/support/buffer/internals/Mat4":function(){define(["exports",
"../../../../../chunks/_rollupPluginBabelHelpers"],function(a,g){let r=function(){function A(t,p,b=0,k,n){this.TypedArrayConstructor=t;this.elementCount=16;t=this.TypedArrayConstructor;void 0===k&&(k=16*t.BYTES_PER_ELEMENT);const l=0===p.byteLength?0:b;this.typedBuffer=null==n?new t(p,l):new t(p,l,(n-b)/t.BYTES_PER_ELEMENT);this.typedBufferStride=k/t.BYTES_PER_ELEMENT;this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride);this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}
var v=A.prototype;v.getMat=function(t,p){t*=this.typedBufferStride;for(let b=0;16>b;b++)p[b]=this.typedBuffer[t+b];return p};v.setMat=function(t,p){t*=this.typedBufferStride;for(let b=0;16>b;b++)this.typedBuffer[t+b]=p[b]};v.get=function(t,p){return this.typedBuffer[t*this.typedBufferStride+p]};v.set=function(t,p,b){this.typedBuffer[t*this.typedBufferStride+p]=b};v.copyFrom=function(t,p,b){const k=this.typedBuffer,n=p.typedBuffer;t*=this.typedBufferStride;p=b*p.typedBufferStride;for(b=0;16>b;++b)k[t+
b]=n[p+b]};g._createClass(A,[{key:"buffer",get:function(){return this.typedBuffer.buffer}}]);return A}();r.ElementCount=16;a.BufferViewMat4Impl=r;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/support/buffer/internals/Scalar":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers"],function(a,g){let r=function(){function A(t,p,b=0,k,n){this.TypedArrayConstructor=t;this.elementCount=1;t=this.TypedArrayConstructor;void 0===k&&(k=t.BYTES_PER_ELEMENT);const l=
0===p.byteLength?0:b;this.typedBuffer=null==n?new t(p,l):new t(p,l,(n-b)/t.BYTES_PER_ELEMENT);this.typedBufferStride=k/t.BYTES_PER_ELEMENT;this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride);this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}var v=A.prototype;v.get=function(t){return this.typedBuffer[t*this.typedBufferStride]};v.set=function(t,p){this.typedBuffer[t*this.typedBufferStride]=p};g._createClass(A,[{key:"buffer",get:function(){return this.typedBuffer.buffer}}]);
return A}();r.ElementCount=1;a.BufferViewScalarImpl=r;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/support/buffer/internals/Vec2":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../../../../../chunks/vec2"],function(a,g,r){let A=function(){function v(p,b,k=0,n,l){this.TypedArrayConstructor=p;this.elementCount=2;p=this.TypedArrayConstructor;void 0===n&&(n=2*p.BYTES_PER_ELEMENT);const q=0===b.byteLength?0:k;this.typedBuffer=null==l?new p(b,q):new p(b,
q,(l-k)/p.BYTES_PER_ELEMENT);this.typedBufferStride=n/p.BYTES_PER_ELEMENT;this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride);this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}var t=v.prototype;t.getVec=function(p,b){return r.set(b,this.typedBuffer[p*this.typedBufferStride],this.typedBuffer[p*this.typedBufferStride+1])};t.setVec=function(p,b){this.typedBuffer[p*this.typedBufferStride]=b[0];this.typedBuffer[p*this.typedBufferStride+1]=b[1]};t.get=function(p,
b){return this.typedBuffer[p*this.typedBufferStride+b]};t.set=function(p,b,k){this.typedBuffer[p*this.typedBufferStride+b]=k};t.setValues=function(p,b,k){this.typedBuffer[p*this.typedBufferStride]=b;this.typedBuffer[p*this.typedBufferStride+1]=k};t.copyFrom=function(p,b,k){const n=this.typedBuffer,l=b.typedBuffer;p*=this.typedBufferStride;b=k*b.typedBufferStride;n[p]=l[b];n[p+1]=l[b+1]};g._createClass(v,[{key:"buffer",get:function(){return this.typedBuffer.buffer}}]);return v}();A.ElementCount=2;
a.BufferViewVec2Impl=A;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/support/buffer/internals/Vec3":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../../../../../chunks/vec3"],function(a,g,r){let A=function(){function v(p,b,k=0,n,l){this.TypedArrayConstructor=p;this.elementCount=3;p=this.TypedArrayConstructor;void 0===n&&(n=3*p.BYTES_PER_ELEMENT);const q=0===b.byteLength?0:k;this.typedBuffer=null==l?new p(b,q):new p(b,q,(l-k)/p.BYTES_PER_ELEMENT);
this.typedBufferStride=n/p.BYTES_PER_ELEMENT;this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride);this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}var t=v.prototype;t.getVec=function(p,b){return r.set(b,this.typedBuffer[p*this.typedBufferStride],this.typedBuffer[p*this.typedBufferStride+1],this.typedBuffer[p*this.typedBufferStride+2])};t.setVec=function(p,b){this.typedBuffer[p*this.typedBufferStride]=b[0];this.typedBuffer[p*this.typedBufferStride+1]=
b[1];this.typedBuffer[p*this.typedBufferStride+2]=b[2]};t.get=function(p,b){return this.typedBuffer[p*this.typedBufferStride+b]};t.set=function(p,b,k){this.typedBuffer[p*this.typedBufferStride+b]=k};t.setValues=function(p,b,k,n){this.typedBuffer[p*this.typedBufferStride]=b;this.typedBuffer[p*this.typedBufferStride+1]=k;this.typedBuffer[p*this.typedBufferStride+2]=n};t.copyFrom=function(p,b,k){const n=this.typedBuffer,l=b.typedBuffer;p*=this.typedBufferStride;b=k*b.typedBufferStride;n[p]=l[b];n[p+
1]=l[b+1];n[p+2]=l[b+2]};g._createClass(v,[{key:"buffer",get:function(){return this.typedBuffer.buffer}}]);return v}();A.ElementCount=3;a.BufferViewVec3Impl=A;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/support/buffer/internals/Vec4":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../../../../../chunks/vec4"],function(a,g,r){let A=function(){function v(p,b,k=0,n,l){this.TypedArrayConstructor=p;this.elementCount=4;p=this.TypedArrayConstructor;
void 0===n&&(n=4*p.BYTES_PER_ELEMENT);const q=0===b.byteLength?0:k;this.typedBuffer=null==l?new p(b,q):new p(b,q,(l-k)/p.BYTES_PER_ELEMENT);this.typedBufferStride=n/p.BYTES_PER_ELEMENT;this.count=Math.ceil(this.typedBuffer.length/this.typedBufferStride);this.stride=this.typedBufferStride*this.TypedArrayConstructor.BYTES_PER_ELEMENT}var t=v.prototype;t.getVec=function(p,b){return r.set(b,this.typedBuffer[p*this.typedBufferStride],this.typedBuffer[p*this.typedBufferStride+1],this.typedBuffer[p*this.typedBufferStride+
2],this.typedBuffer[p*this.typedBufferStride+3])};t.setVec=function(p,b){this.typedBuffer[p*this.typedBufferStride]=b[0];this.typedBuffer[p*this.typedBufferStride+1]=b[1];this.typedBuffer[p*this.typedBufferStride+2]=b[2];this.typedBuffer[p*this.typedBufferStride+3]=b[3]};t.get=function(p,b){return this.typedBuffer[p*this.typedBufferStride+b]};t.set=function(p,b,k){this.typedBuffer[p*this.typedBufferStride+b]=k};t.setValues=function(p,b,k,n,l){this.typedBuffer[p*this.typedBufferStride]=b;this.typedBuffer[p*
this.typedBufferStride+1]=k;this.typedBuffer[p*this.typedBufferStride+2]=n;this.typedBuffer[p*this.typedBufferStride+3]=l};t.copyFrom=function(p,b,k){const n=this.typedBuffer,l=b.typedBuffer;p*=this.typedBufferStride;b=k*b.typedBufferStride;n[p]=l[b];n[p+1]=l[b+1];n[p+2]=l[b+2];n[p+3]=l[b+3]};g._createClass(v,[{key:"buffer",get:function(){return this.typedBuffer.buffer}}]);return v}();A.ElementCount=4;a.BufferViewVec4Impl=A;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/support/buffer/types":function(){define(["exports",
"../../../../core/has"],function(a,g){a.elementTypeSize=function(r){switch(r){case "u8":return 1;case "u16":return 2;case "u32":return 4;case "i8":return 1;case "i16":return 2;case "i32":return 4;case "f32":return 4;case "f64":return 8}};a.isInteger=function(r){switch(r){case "u8":case "u16":case "u32":case "i8":case "i16":case "i32":return!0;case "f32":case "f64":return!1}};a.isSigned=function(r){switch(r){case "u8":case "u16":case "u32":return!1;case "i8":case "i16":case "i32":case "f32":case "f64":return!0}};
a.maximumValue=function(r){switch(r){case "u8":return 255;case "u16":return 65535;case "u32":return 4294967295;case "i8":return 127;case "i16":return 32767;case "i32":return 2147483647;case "f32":return 3.402823E38;case "f64":return 1.79769E308}};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/materials/renderers/utils":function(){define("exports ../../../../../core/maybe ../../../../../chunks/mat4 ../../../../../chunks/mat4f64 ../../lib/Util ../../lib/doublePrecisionUtils".split(" "),
function(a,g,r,A,v,t){const p=new Float64Array(3),b=new Float32Array(6),k=A.create();a.acquireMaterials=function(n,l){const q=new Map;q.set(0,l.acquire(n,0));q.set(1,l.acquire(n,7));q.set(4,l.acquire(n,3));q.set(3,l.acquire(n,2));q.set(2,l.acquire(n,1));q.set(5,l.acquire(n,4));q.set(7,l.acquire(n,3));q.set(6,l.acquire(n,3));return q};a.addObject3DStateID=function(n,l){g.isNone(n)&&(n=[]);n.push(l);return n};a.calculateTransformRelToOrigin=function(n,l,q){const C=n.origin.vec3;v.setMatrixTranslation3(k,
-C[0],-C[1],-C[2]);g.isSome(n.transformation)?r.multiply(l,k,n.transformation):r.copy(l,k);q&&(r.invert(q,l),r.transpose(q,q))};a.encodeDoubleVec3=function(n,l,q,C,w){p[0]=n.get(l,0);p[1]=n.get(l,1);p[2]=n.get(l,2);t.encodeDoubleArray(p,b,3);q.set(w,0,b[0]);C.set(w,0,b[1]);q.set(w,1,b[2]);C.set(w,1,b[3]);q.set(w,2,b[4]);C.set(w,2,b[5])};a.isInstanceHidden=function(n){return g.isSome(n)?!n.visible:!1};a.releaseMaterials=function(n,l){l.release(n,0);l.release(n,7);l.release(n,3);l.release(n,2);l.release(n,
1);l.release(n,4)};a.removeObject3DStateID=function(n,l){if(g.isNone(n))return n;n=n.filter(q=>q!==l);return 0===n.length?null:n};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/doublePrecisionUtils":function(){define(["exports"],function(a){function g(v,t,p){for(let b=0;b<p;++b)t[2*b]=v[b],t[2*b+1]=v[b]-t[2*b]}const r=new Float64Array(1),A=new Float32Array(2);a.decodeDoubleArray=function(v,t,p){for(let b=0;b<p;++b)t[b]=v[2*b]+v[2*b+1]};a.encodeDouble=function(v,
t){A[0]=v;A[1]=v-A[0];t[0]=A[0];t[1]=A[1]};a.encodeDoubleArray=g;a.encodeDoubleArraySplit=function(v,t,p,b){for(let k=0;k<b;++k)r[0]=v[k],g(r,A,1),t[k]=A[0],p[k]=A[1]};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/GLMaterial":function(){define(["../../../../chunks/_rollupPluginBabelHelpers","./AutoDisposable"],function(a,g){return function(r){function A(t){var p=r.call(this)||this;p.material=t.material;p.techniqueRep=t.techniqueRep;p.output=t.output;return p}
a._inheritsLoose(A,r);var v=A.prototype;v.getTechnique=function(){return this.technique};v.getPipelineState=function(t,p){return this.getTechnique().pipeline};v.ensureResources=function(t){return 2};v.ensureParameters=function(t){};return A}(g.AutoDisposable)})},"esri/views/3d/webgl-engine/lib/AutoDisposable":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers"],function(a,g){const r=v=>function(t){function p(){var b=t.apply(this,arguments)||this;b._isDisposed=!1;return b}g._inheritsLoose(p,
t);p.prototype.dispose=function(){for(const k of null!=(b=this._managedDisposables)?b:[]){var b;b=this[k];this[k]=null;b&&"function"===typeof b.dispose&&b.dispose()}this._isDisposed=!0};g._createClass(p,[{key:"isDisposed",get:function(){return this._isDisposed}}]);return p}(v);let A=function(v){function t(){return v.apply(this,arguments)||this}g._inheritsLoose(t,v);return t}(r(function(){return function(){}}()));a.AutoDisposable=A;a.AutoDisposableMixin=r;a.autoDispose=function(){return(v,t)=>{if(!v.hasOwnProperty("_managedDisposables")){var p,
b;v._managedDisposables=null!=(p=null==(b=v._managedDisposables)?void 0:b.slice())?p:[]}v._managedDisposables.unshift(t)}};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/Material":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ./DefaultVertexAttributeLocations ./ContentObject ../materials/internal/MaterialUtil".split(" "),function(a,g,r,A,v,t){v=function(p){function b(n,l){var q=p.call(this)||this;q.type=3;q.supportsEdges=
!1;q._visible=!0;q._renderPriority=0;q._insertOrder=0;q._vertexAttributeLocations=A.Default3D;q._params=t.copyParameters(n,l);q.validateParameterValues(q._params);return q}g._inheritsLoose(b,p);var k=b.prototype;k.dispose=function(){};k.update=function(n){return!1};k.setParameterValues=function(n){t.updateParameters(this._params,n)&&(this.validateParameterValues(this._params),this.parametersChanged())};k.validateParameterValues=function(n){};k.isVisibleInPass=function(n){return!0};k.isVisible=function(){return this._visible};
k.parametersChanged=function(){r.isSome(this.materialRepository)&&this.materialRepository.materialChanged(this)};g._createClass(b,[{key:"params",get:function(){return this._params}},{key:"visible",get:function(){return this._visible},set:function(n){n!==this._visible&&(this._visible=n,this.parametersChanged())}},{key:"renderOccluded",get:function(){return this.params.renderOccluded}},{key:"renderPriority",get:function(){return this._renderPriority},set:function(n){n!==this._renderPriority&&(this._renderPriority=
n,this.parametersChanged())}},{key:"insertOrder",get:function(){return this._insertOrder},set:function(n){n!==this._insertOrder&&(this._insertOrder=n,this.parametersChanged())}},{key:"vertexAttributeLocations",get:function(){return this._vertexAttributeLocations}}]);return b}(v.ContentObject);a.Material=v;a.materialParametersDefaults={renderOccluded:1};a.materialPredicate=function(p,b){return p.isVisible()&&p.isVisibleInPass(b.pass)&&0!==(p.renderOccluded&b.renderOccludedMask)};Object.defineProperty(a,
"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/DefaultVertexAttributeLocations":function(){define(["exports"],function(a){a.Default3D={position:0,normal:1,uv0:2,color:3,size:4,tangent:4,auxpos1:5,symbolColor:5,auxpos2:6,featureAttribute:6,instanceFeatureAttribute:6,instanceColor:7,model:8,modelNormal:12,modelOriginHi:11,modelOriginLo:15};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/materials/internal/MaterialUtil":function(){define("exports ../../../../../core/maybe ../../../../../core/mathUtils ../../../../../chunks/vec3f64 ../../../../../chunks/vec3 ../../../../../geometry/support/aaBoundingBox ../../lib/Util ../renderers/utils ../../lib/screenSizePerspectiveUtils".split(" "),
function(a,g,r,A,v,t,p,b,k){function n(E,u,z,y,B,H){if(!g.isNone(E)){var D=C(u,z,e);t.setMin(f,E.getBBMin());t.setMax(f,E.getBBMax());g.isSome(B)&&B.applyToAabb(f);if(w(f,u,D,y)){const {primitiveIndices:M,indices:U,position:R}=E;D=M?M.length:U.length/3;if(1E3<D&&(E=E.getChildren(),void 0!==E)){for(D=0;8>D;++D)void 0!==E[D]&&n(E[D],u,z,y,B,H);return}l(u,z,0,D,U,R,M,B,H)}}}function l(E,u,z,y,B,H,D,M,U){if(D){var R=H.data;H=H.stride||H.size;var J=E[0],L=E[1];E=E[2];var N=u[0]-J,V=u[1]-L;for(u=u[2]-E;z<
y;++z){var T=D[z],W=3*T,Q=H*B[W++],Z=R[Q++],O=R[Q++],P=R[Q];Q=H*B[W++];var S=R[Q++],Y=R[Q++],ta=R[Q];Q=H*B[W];W=R[Q++];var wa=R[Q++];Q=R[Q];g.isSome(M)&&([Z,O,P]=M.applyToVertex(Z,O,P,z),[S,Y,ta]=M.applyToVertex(S,Y,ta,z),[W,wa,Q]=M.applyToVertex(W,wa,Q,z));S-=Z;Y-=O;ta-=P;W-=Z;wa-=O;Q-=P;var G=V*Q-wa*u,I=u*W-Q*N;const ia=N*wa-W*V;var ca=S*G+Y*I+ta*ia;if(!(Math.abs(ca)<=Number.EPSILON)){Z=J-Z;O=L-O;P=E-P;G=Z*G+O*I+P*ia;if(0<ca){if(0>G||G>ca)continue}else if(0<G||G<ca)continue;I=O*ta-Y*P;P=P*S-ta*
Z;O=Z*Y-S*O;Z=N*I+V*P+u*O;if(0<ca){if(0>Z||G+Z>ca)continue}else if(0<Z||G+Z<ca)continue;P=(W*I+wa*P+Q*O)/ca;0<=P&&(S=q(S,Y,ta,W,wa,Q,d),U(P,S,T))}}}else{D=H.data;R=H.stride||H.size;H=E[0];J=E[1];L=E[2];E=u[0]-H;N=u[1]-J;V=u[2]-L;for(let ia=z,ja=3*z;ia<y;++ia)if(W=R*B[ja++],O=D[W++],P=D[W++],ta=D[W],W=R*B[ja++],u=D[W++],z=D[W++],T=D[W],W=R*B[ja++],S=D[W++],Y=D[W++],W=D[W],g.isSome(M)&&([O,P,ta]=M.applyToVertex(O,P,ta,ia),[u,z,T]=M.applyToVertex(u,z,T,ia),[S,Y,W]=M.applyToVertex(S,Y,W,ia)),u-=O,z-=
P,T-=ta,S-=O,Y-=P,W-=ta,Q=N*W-Y*V,Z=V*S-W*E,ca=E*Y-S*N,wa=u*Q+z*Z+T*ca,!(Math.abs(wa)<=Number.EPSILON)){O=H-O;P=J-P;ta=L-ta;Q=O*Q+P*Z+ta*ca;if(0<wa){if(0>Q||Q>wa)continue}else if(0<Q||Q<wa)continue;Z=P*T-z*ta;ta=ta*u-T*O;P=O*z-u*P;O=E*Z+N*ta+V*P;if(0<wa){if(0>O||Q+O>wa)continue}else if(0<O||Q+O<wa)continue;ta=(S*Z+Y*ta+W*P)/wa;0<=ta&&(u=q(u,z,T,S,Y,W,d),U(ta,u,ia))}}}function q(E,u,z,y,B,H,D){v.set(h,E,u,z);v.set(F,y,B,H);v.cross(D,h,F);v.normalize(D,D);return D}function C(E,u,z){return v.set(z,1/
(u[0]-E[0]),1/(u[1]-E[1]),1/(u[2]-E[2]))}function w(E,u,z,y){return x(E,u,z,y,Infinity)}function x(E,u,z,y,B){var H=(E[0]-y-u[0])*z[0],D=(E[3]+y-u[0])*z[0];let M=Math.min(H,D);H=Math.max(H,D);D=(E[1]-y-u[1])*z[1];const U=(E[4]+y-u[1])*z[1];H=Math.min(H,Math.max(D,U));if(0>H)return!1;M=Math.max(M,Math.min(D,U));if(M>H)return!1;D=(E[2]-y-u[2])*z[2];E=(E[5]+y-u[2])*z[2];H=Math.min(H,Math.max(D,E));if(0>H)return!1;M=Math.max(M,Math.min(D,E));return M>H?!1:M<B}function c(E,u){u=u?c(u):{};for(const z in E){let y=
E[z];y&&y.forEach&&(y=m(y));null==y&&z in u||(u[z]=y)}return u}function m(E){const u=[];E.forEach(z=>u.push(z));return u}const f=t.create(),e=A.create(),d=A.create(),h=A.create(),F=A.create();a.bindScreenSizePerspective=function(E,u,z){if(E){var y=E.parameters;u.setUniform4f(z,y.divisor,y.offset,y.minPixelSize,E.paddingPixelsOverride)}};a.colorMixModes={multiply:1,ignore:2,replace:3,tint:4};a.computeInvDir=C;a.computeNormal=q;a.copyParameters=c;a.intersectAabbInvDir=w;a.intersectAabbInvDirBefore=
x;a.intersectDrapedRenderLineGeometry=function(E,u,z,y,B){if(u.options.selectionMode){u=E.vertexAttributes.get("position").data;var H=E.vertexAttributes.get("size"),D=z[0];z=z[1];E=(((H&&H.data[0])+y)/2+4)*E.screenToWorldRatio;y=Number.MAX_VALUE;for(H=0;H<u.length-5;H+=3){var M=u[H],U=u[H+1],R=D-M,J=z-U;M=u[H+3]-M;U=u[H+4]-U;const L=r.clamp((M*R+U*J)/(M*M+U*U),0,1);R=M*L-R;J=U*L-J;J=R*R+J*J;J<y&&(y=J)}y<E*E&&B()}};a.intersectTriangleGeometry=function(E,u,z,y,B,H,D){u=b.isInstanceHidden(u);z=z.tolerance;
u||(E.boundingInfo?(p.assert(0===E.primitiveType),n(E.boundingInfo,y,B,z,H,D)):(z=E.indices.get("position"),E=E.vertexAttributes.get("position"),l(y,B,0,z.length/3,z,E,void 0,H,D)))};a.intersectTriangles=l;a.updateParameters=function(E,u){let z=!1;for(const y in u){const B=u[y];void 0!==B&&(z=!0,Array.isArray(B)?E[y]=B.slice():E[y]=B)}return z};a.verticalOffsetAtDistance=function(E,u,z,y,B){let H=(z.screenLength||0)*E.pixelRatio;B&&(H=k.scale(H,y,u,B));return r.glClamp(H*Math.tan(.5*E.fovY)/(.5*E.fullHeight)*
u,z.minWorldLength||0,null!=z.maxWorldLength?z.maxWorldLength:Infinity)};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/screenSizePerspectiveUtils":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../core/mathUtils"],function(a,g,r){function A(l,q,C){const w=C.parameters;C=C.paddingPixelsOverride;k.scale=Math.min(w.divisor/(q-w.offset),1);k.factor=Math.abs(l*l*l);k.minPixelSize=w.minPixelSize;k.paddingPixels=C;return k}function v(l,
q){return 0===l?q.minPixelSize:q.minPixelSize*(1+2*q.paddingPixels/l)}function t(l,q){return Math.max(r.lerp(l*q.scale,l,q.factor),v(l,q))}let p=function(){function l(C,w,x,c={camera:{distance:0,fovY:0},divisor:0,offset:0,minPixelSize:0,paddingPixels:0},m){this.viewingMode=C;this.description=w;this.ellipsoidRadius=x;this.parameters=c;this._paddingPixelsOverride=m;2===this.viewingMode?(this.coverageCompensation=this.surfaceCoverageCompensationLocal,this.calculateCurvatureDependentParameters=this.calculateCurvatureDependentParametersLocal):
(this.coverageCompensation=this.surfaceCoverageCompensationGlobal,this.calculateCurvatureDependentParameters=this.calculateCurvatureDependentParametersGlobal)}var q=l.prototype;q.update=function(C){if(this.parameters&&this.parameters.camera.fovY===C.fovY&&this.parameters.camera.distance===C.distance)return!1;this.calculateParameters(C,this.ellipsoidRadius,this.parameters);return!0};q.overridePadding=function(C){return C!==this.paddingPixelsOverride?new l(this.viewingMode,this.description,this.ellipsoidRadius,
this.parameters,C):this};q.calculateParameters=function(C,w,x){const {scaleStart:c,scaleFallOffRange:m,minPixelSize:f}=this.description,{fovY:e,distance:d}=C;var h=this.calculateCurvatureDependentParameters(C,w);w=this.coverageCompensation(C,w,h);const {tiltAngle:F,scaleFallOffFactor:E}=h,u=Math.sin(F)*d,z=.5*Math.PI-F-e*(.5-c*w);h=u/Math.cos(z);w=(h-u/Math.cos(z+e*m*w)*E)/(1-E);x.camera.fovY=C.fovY;x.camera.distance=C.distance;x.offset=w;x.divisor=h-w;x.minPixelSize=f;return x};q.calculateCurvatureDependentParametersLocal=
function(C,w,x=n){x.tiltAngle=this.description.curvatureDependent.min.tiltAngle;x.scaleFallOffFactor=this.description.curvatureDependent.min.scaleFallOffFactor;return x};q.calculateCurvatureDependentParametersGlobal=function(C,w,x=n){const c=this.description.curvatureDependent;C=1+C.distance/w;C=Math.sqrt(C*C-1);const [m,f]=[c.min.curvature,c.max.curvature];C=r.clamp((C-m)/(f-m),0,1);const [e,d]=[c.min,c.max];x.tiltAngle=r.lerp(e.tiltAngle,d.tiltAngle,C);x.scaleFallOffFactor=r.lerp(e.scaleFallOffFactor,
d.scaleFallOffFactor,C);return x};q.surfaceCoverageCompensationLocal=function(C,w,x){return(C.fovY-x.tiltAngle)/C.fovY};q.surfaceCoverageCompensationGlobal=function(C,w,x){const c=w*w;x=x.tiltAngle+.5*Math.PI;const {fovY:m,distance:f}=C;C=f*f+c-2*Math.cos(x)*f*w;const e=Math.sqrt(C);return(Math.acos(Math.sqrt(C-c)/e)-Math.asin(w/(e/Math.sin(x)))+.5*m)/m};g._createClass(l,[{key:"paddingPixelsOverride",get:function(){return this._paddingPixelsOverride||this.parameters.paddingPixels}}]);return l}();
const b={curvatureDependent:{min:{curvature:r.deg2rad(10),tiltAngle:r.deg2rad(12),scaleFallOffFactor:.5},max:{curvature:r.deg2rad(70),tiltAngle:r.deg2rad(40),scaleFallOffFactor:.8}},scaleStart:.3,scaleFallOffRange:.65,minPixelSize:0},k={scale:0,factor:0,minPixelSize:0,paddingPixels:0},n={tiltAngle:0,scaleFallOffFactor:0};a.applyPrecomputedScaleFactor=function(l,q,C=[0,0]){q=Math.min(Math.max(q.scale,v(l[1],q)/l[1]),1);C[0]=l[0]*q;C[1]=l[1]*q;return C};a.applyScaleFactor=t;a.applyScaleFactorVec2=function(l,
q,C=[0,0]){const w=Math.min(Math.max(q.scale,v(l[1],q)/l[1]),1);C[0]=r.lerp(l[0]*w,l[0],q.factor);C[1]=r.lerp(l[1]*w,l[1],q.factor);return C};a.getLabelSettings=function(l,q){const {curvatureDependent:C,scaleStart:w,scaleFallOffRange:x}=b;return new p(l,{curvatureDependent:{min:{curvature:C.min.curvature,tiltAngle:C.min.tiltAngle,scaleFallOffFactor:.7},max:{curvature:C.max.curvature,tiltAngle:C.max.tiltAngle,scaleFallOffFactor:.95}},scaleStart:w,scaleFallOffRange:x,minPixelSize:14},q)};a.getSettings=
function(l,q){return new p(l,b,q)};a.precomputeScaleFactor=function(l,q,C,w){l=A(l,q,C);l.minPixelSize=0;l.paddingPixels=0;l=t(1,l);w.scale=l;w.factor=0;w.minPixelSize=C.parameters.minPixelSize;w.paddingPixels=C.paddingPixelsOverride};a.scale=function(l,q,C,w){return t(l,A(q,C,w))};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/materials/VisualVariableMaterialParameters":function(){define(["../../../../chunks/mat3f64","../../../../chunks/vec3f32"],function(a,g){var r;
(r||(r={})).Default={vvSizeEnabled:!1,vvSizeMinSize:g.fromValues(1,1,1),vvSizeMaxSize:g.fromValues(100,100,100),vvSizeOffset:g.fromValues(0,0,0),vvSizeFactor:g.fromValues(1,1,1),vvSizeValue:g.fromValues(1,1,1),vvColorEnabled:!1,vvColorValues:[0,0,0,0,0,0,0,0],vvColorColors:[1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0],vvOpacityEnabled:!1,vvOpacityValues:[0,0,0,0,0,0,0,0],vvOpacityOpacities:[1,1,1,1,1,1,1,1],vvSymbolAnchor:[0,0,0],vvSymbolRotationMatrix:a.create()};return r})},
"esri/views/3d/webgl-engine/shaders/RibbonLineTechnique":function(){define("require exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/maybe ../core/shaderTechnique/ReloadableShaderModule ../core/shaderTechnique/ShaderTechnique ../core/shaderTechnique/ShaderTechniqueConfiguration ../../../webgl/Program ../../../webgl/renderState ../core/shaderLibrary/util/View.glsl ../core/shaderLibrary/Slice.glsl ../core/shaderLibrary/output/OutputHighlight.glsl ../core/shaderLibrary/shading/VisualVariables.glsl ../lib/OrderIndependentTransparency ../core/shaderLibrary/shading/MultipassTerrainTest.glsl ../lib/StencilUtils ../../../../chunks/RibbonLine.glsl".split(" "),
function(a,g,r,A,v,t,p,b,k,n,l,q,C,w,x,c,m,f){const e={position:0,subdivisionFactor:1,uv0:2,auxpos1:3,auxpos2:4,size:6,sizeFeatureAttribute:6,color:5,colorFeatureAttribute:5,opacityFeatureAttribute:7};p=function(h){function F(u,z){z=h.call(this,u,z)||this;z.stipplePattern=null;z.stippleTextureBind=null;z.stippleTextureRepository=u.stippleTextureRepository;return z}r._inheritsLoose(F,h);var E=F.prototype;E.initializeProgram=function(u){var z=F.shader.get();const y=this.configuration;z=z.build({OITEnabled:0===
y.transparencyPassType,output:y.output,slicePlaneEnabled:y.slicePlaneEnabled,sliceHighlightDisabled:!1,sliceEnabledForVertexPrograms:!1,stippleEnabled:y.stippleEnabled,stippleOffColorEnabled:y.stippleOffColorEnabled,stippleUVMaxEnabled:y.stippleIntegerRepeatsEnabled,stippleIntegerRepeatsEnabled:y.stippleIntegerRepeatsEnabled,roundCaps:y.roundCaps,roundJoins:y.roundJoins,vvColor:y.vvColor,vvSize:y.vvSize,vvInstancingEnabled:!0,vvOpacity:y.vvOpacity,falloffEnabled:y.falloffEnabled,innerColorEnabled:y.innerColorEnabled,
multipassTerrainEnabled:y.multipassTerrainEnabled,cullAboveGround:y.cullAboveGround});return new k(u.rctx,z.generateSource("vertex"),z.generateSource("fragment"),e)};E.dispose=function(){h.prototype.dispose.call(this);this.stippleTextureRepository.release(this.stipplePattern);this.stippleTextureBind=this.stipplePattern=null};E.bindPass=function(u,z,y){l.View.bindProjectionMatrix(this.program,y.camera.projectionMatrix);4===this.configuration.output&&C.OutputHighlight.bindOutputHighlight(u,this.program,
y);y.multipassTerrainEnabled&&(this.program.setUniform2fv("inverseViewport",y.inverseViewport),c.bindMultipassTerrainUniforms(this.program,u,y));this.program.setUniform1f("intrinsicWidth",z.width);this.program.setUniform4fv("intrinsicColor",z.color);this.program.setUniform1f("miterLimit","miter"!==z.join?0:z.miterLimit);this.program.setUniform2fv("cameraNearFar",y.camera.nearFar);this.program.setUniform1f("pixelRatio",y.camera.pixelRatio);this.program.setUniform2f("screenSize",y.camera.fullViewport[2],
y.camera.fullViewport[3]);w.VisualVariables.bindUniformsWithOpacity(this.program,z);if(this.stipplePattern!==z.stipplePattern){const B=z.stipplePattern;this.stippleTextureBind=this.stippleTextureRepository.swap(this.stipplePattern,B);this.stipplePattern=B}this.configuration.stippleEnabled&&(u=v.isSome(this.stippleTextureBind)?this.stippleTextureBind(u,0)*y.camera.pixelRatio:1,this.program.setUniform1i("stipplePatternTexture",0),this.program.setUniform1f("stipplePatternPixelSizeInv",1/u),this.configuration.stippleOffColorEnabled&&
(u=v.unwrap(z.stippleOffColor),this.program.setUniform4f("stippleOffColor",u[0],u[1],u[2],3<u.length?u[3]:1)));this.configuration.falloffEnabled&&this.program.setUniform1f("falloff",z.falloff);this.configuration.innerColorEnabled&&(this.program.setUniform4fv("innerColor",v.unwrapOr(z.innerColor,z.color)),this.program.setUniform1f("innerWidth",z.innerWidth*y.camera.pixelRatio))};E.bindDraw=function(u){l.View.bindView(this.program,u);q.Slice.bindUniformsWithOrigin(this.program,this.configuration,u)};
E.setPipelineState=function(u,z){const y=this.configuration,B=3===u,H=2===u;return n.makePipelineState({blending:0===y.output||7===y.output?B?x.blendingDefault:x.OITBlending(u):null,depthTest:{func:x.OITDepthTest(u)},depthWrite:B?!y.transparent&&y.writeDepth&&n.defaultDepthWriteParams:x.OITDepthWrite(u),colorWrite:n.defaultColorWriteParams,stencilWrite:y.sceneHasOcludees?m.stencilWriteMaskOn:null,stencilTest:y.sceneHasOcludees?z?m.stencilToolMaskBaseParams:m.stencilBaseAllZerosParams:null,polygonOffset:B||
H?y.polygonOffset&&d:x.OITPolygonOffset})};E.initializePipeline=function(){const u=this.configuration,z=u.polygonOffset&&d;u.occluder&&(this._occluderPipelineTransparent=n.makePipelineState({blending:x.blendingDefault,polygonOffset:z,depthTest:m.depthCompareAlways,depthWrite:null,colorWrite:n.defaultColorWriteParams,stencilWrite:null,stencilTest:m.stencilToolTransparentOccluderParams}),this._occluderPipelineOpaque=n.makePipelineState({blending:x.blendingDefault,polygonOffset:z,depthTest:m.depthCompareAlways,
depthWrite:null,colorWrite:n.defaultColorWriteParams,stencilWrite:m.stencilWriteMaskOff,stencilTest:m.stencilToolMaskOccluderParams}),this._occluderPipelineMaskWrite=n.makePipelineState({blending:null,polygonOffset:z,depthTest:m.depthCompareLess,depthWrite:null,colorWrite:null,stencilWrite:m.stencilWriteMaskOn,stencilTest:m.stencilToolMaskBaseParams}));this._occludeePipelineState=this.setPipelineState(this.configuration.transparencyPassType,!0);return this.setPipelineState(this.configuration.transparencyPassType,
!1)};E.getPipelineState=function(u,z){return z?this._occludeePipelineState:this.configuration.occluder?11===u?this._occluderPipelineTransparent:10===u?this._occluderPipelineOpaque:this._occluderPipelineMaskWrite:this.pipeline};r._createClass(F,[{key:"primitiveType",get:function(){return 5}}]);return F}(p.ShaderTechnique);p.shader=new t.ReloadableShaderModule(f.RibbonLineShader,()=>new Promise(function(h,F){a(["./RibbonLine.glsl"],h,F)}));const d={factor:0,units:-4};t=function(h){function F(){var E=
h.apply(this,arguments)||this;E.output=0;E.occluder=!1;E.slicePlaneEnabled=!1;E.transparent=!1;E.polygonOffset=!1;E.writeDepth=!1;E.stippleEnabled=!1;E.stippleOffColorEnabled=!1;E.stippleIntegerRepeatsEnabled=!1;E.roundCaps=!1;E.roundJoins=!1;E.vvSize=!1;E.vvColor=!1;E.vvOpacity=!1;E.falloffEnabled=!1;E.innerColorEnabled=!1;E.sceneHasOcludees=!1;E.transparencyPassType=3;E.multipassTerrainEnabled=!1;E.cullAboveGround=!0;return E}r._inheritsLoose(F,h);return F}(b.ShaderTechniqueConfiguration);A.__decorate([b.parameter({count:8})],
t.prototype,"output",void 0);A.__decorate([b.parameter()],t.prototype,"occluder",void 0);A.__decorate([b.parameter()],t.prototype,"slicePlaneEnabled",void 0);A.__decorate([b.parameter()],t.prototype,"transparent",void 0);A.__decorate([b.parameter()],t.prototype,"polygonOffset",void 0);A.__decorate([b.parameter()],t.prototype,"writeDepth",void 0);A.__decorate([b.parameter()],t.prototype,"stippleEnabled",void 0);A.__decorate([b.parameter()],t.prototype,"stippleOffColorEnabled",void 0);A.__decorate([b.parameter()],
t.prototype,"stippleIntegerRepeatsEnabled",void 0);A.__decorate([b.parameter()],t.prototype,"roundCaps",void 0);A.__decorate([b.parameter()],t.prototype,"roundJoins",void 0);A.__decorate([b.parameter()],t.prototype,"vvSize",void 0);A.__decorate([b.parameter()],t.prototype,"vvColor",void 0);A.__decorate([b.parameter()],t.prototype,"vvOpacity",void 0);A.__decorate([b.parameter()],t.prototype,"falloffEnabled",void 0);A.__decorate([b.parameter()],t.prototype,"innerColorEnabled",void 0);A.__decorate([b.parameter()],
t.prototype,"sceneHasOcludees",void 0);A.__decorate([b.parameter({count:4})],t.prototype,"transparencyPassType",void 0);A.__decorate([b.parameter()],t.prototype,"multipassTerrainEnabled",void 0);A.__decorate([b.parameter()],t.prototype,"cullAboveGround",void 0);g.RibbonLineTechnique=p;g.RibbonLineTechniqueConfiguration=t;g.ribbonVertexAttributeLocations=e;Object.defineProperty(g,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderTechnique/ReloadableShaderModule":function(){define(["exports"],
function(a){let g=function(){function r(v,t){this._module=v;this._loadModule=t}var A=r.prototype;A.get=function(){return this._module};A.reload=async function(){return this._module=await this._loadModule()};return r}();a.ReloadableShaderModule=g;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderTechnique/ShaderTechnique":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers"],function(a,g){let r=function(){function A(t,p){p&&(this._config=
p.snapshot());this._program=this.initializeProgram(t);t.commonUniformStore&&(this._commonUniformStore=t.commonUniformStore,this._commonUniformStore.subscribeProgram(this._program));this._pipeline=this.initializePipeline(t)}var v=A.prototype;v.dispose=function(){this._program&&(this._commonUniformStore&&this._commonUniformStore.unsubscribeProgram(this._program),this._program.dispose(),this._program=null)};v.reload=function(t){this._program&&(this._commonUniformStore&&this._commonUniformStore.unsubscribeProgram(this._program),
this._program.dispose());this._program=this.initializeProgram(t);this._commonUniformStore&&this._commonUniformStore.subscribeProgram(this._program)};v.bindPass=function(t,p,b){};v.bindMaterial=function(t,p,b){};v.bindDraw=function(t,p,b){};v.bindPipelineState=function(t){t.setPipelineState(this.pipeline)};v.ensureAttributeLocations=function(t){this.program.assertCompatibleVertexAttributeLocations(t)};g._createClass(A,[{key:"program",get:function(){return this._program}},{key:"pipeline",get:function(){return this._pipeline}},
{key:"key",get:function(){return this._config.key}},{key:"configuration",get:function(){return this._config}},{key:"primitiveType",get:function(){return 4}}]);return A}();a.ShaderTechnique=r;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderTechnique/ShaderTechniqueConfiguration":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../../../../../core/mathUtils"],function(a,g,r){let A=function(){function v(){this._key="";this._keyDirty=
!1;this._parameterBits=this._parameterBits.map(()=>0)}v.prototype.snapshot=function(){const t=this._parameterNames,p={key:this.key};for(const b of t)p[b]=this[b];return p};g._createClass(v,[{key:"key",get:function(){this._keyDirty&&(this._keyDirty=!1,this._key=String.fromCharCode.apply(String,this._parameterBits));return this._key}}]);return v}();a.ShaderTechniqueConfiguration=A;a.parameter=function(v={}){return(t,p)=>{var b,k;t._parameterNames=null!=(b=t._parameterNames)?b:[];t._parameterNames.push(p);
const n=t._parameterNames.length-1;b=Math.ceil(r.log2(v.count||2));const l=null!=(k=t._parameterBits)?k:[0];let q=0;for(;16<l[q]+b;)q++,q>=l.length&&l.push(0);t._parameterBits=l;const C=l[q],w=(1<<b)-1<<C;l[q]+=b;Object.defineProperty(t,p,{get(){return this[n]},set(x){if(this[n]!==x&&(this[n]=x,this._keyDirty=!0,this._parameterBits[q]=this._parameterBits[q]&~w|+x<<C&w,"number"!==typeof x&&"boolean"!==typeof x))throw"Configuration value for "+p+" must be boolean or number, got "+typeof x;}})}};Object.defineProperty(a,
"__esModule",{value:!0})})},"esri/views/webgl/Program":function(){define(["../../chunks/_rollupPluginBabelHelpers","../../core/has","../../core/maybe","./ShaderTranspiler"],function(a,g,r,A){function v(t,p){if(r.isNone(t)||t.length!==p.length)return!0;for(let b=0;b<t.length;++b)if(t[b]!==p[b])return!0;return!1}return function(){function t(b,k,n,l,q={}){this._glName=this._context=null;this._locations={};this._initialized=!1;this._fShader=this._vShader=null;this._defines={};this._nameToUniformLocation=
{};this._nameToAttribLocation={};this._nameToUniform1={};this._nameToUniform1v={};this._nameToUniform2={};this._nameToUniform3={};this._nameToUniform4={};this._nameToUniformMatrix3={};this._nameToUniformMatrix4={};b||console.error("RenderingContext isn't initialized!");0===k.length&&console.error("Shaders source should not be empty!");b.instanceCounter.increment(3,this);this._context=b;this._vertexShaderSource=k;this._fragmentShaderSource=n;if(Array.isArray(q))for(const C of q)this._defines[C]="1";
else this._defines=q;this._locations=l}var p=t.prototype;p.getDefine=function(b){return this._defines[b]};p.dispose=function(){if(this._context){var b=this._context.gl;this._vShader&&(b.deleteShader(this._vShader),this._vShader=null);this._fShader&&(b.deleteShader(this._fShader),this._fShader=null);this._glName&&(b.deleteProgram(this._glName),this._glName=null);this._context.instanceCounter.decrement(3,this);this._context=null}};p.initialize=function(){if(!this._initialized){this._vShader=this._loadShader(35633);
this._fShader=this._loadShader(35632);this._vShader&&this._fShader||console.error("Error loading shaders!");var b=this._context.gl,k=b.createProgram();b.attachShader(k,this._vShader);b.attachShader(k,this._fShader);for(const n in this._locations)b.bindAttribLocation(k,this._locations[n],n);b.linkProgram(k);this._glName=k;this._initialized=!0}};p.getUniformLocation=function(b){this.initialize();void 0===this._nameToUniformLocation[b]&&(this._nameToUniformLocation[b]=this._context.gl.getUniformLocation(this._glName,
b));return this._nameToUniformLocation[b]};p.hasUniform=function(b){return null!==this.getUniformLocation(b)};p.getAttribLocation=function(b){this.initialize();void 0===this._nameToAttribLocation[b]&&(this._nameToAttribLocation[b]=this._context.gl.getAttribLocation(this._glName,b));return this._nameToAttribLocation[b]};p.setUniform1i=function(b,k){const n=this._nameToUniform1[b];if(void 0===n||k!==n)this._context.bindProgram(this),this._context.gl.uniform1i(this.getUniformLocation(b),k),this._nameToUniform1[b]=
k};p.setUniform1iv=function(b,k){const n=this._nameToUniform1v[b];v(n,k)&&(this._context.bindProgram(this),this._context.gl.uniform1iv(this.getUniformLocation(b),k),void 0===n?this._nameToUniform1v[b]=t._arrayCopy(k):t._arrayAssign(k,n))};p.setUniform2iv=function(b,k){const n=this._nameToUniform2[b];v(n,k)&&(this._context.bindProgram(this),this._context.gl.uniform2iv(this.getUniformLocation(b),k),void 0===n?this._nameToUniform2[b]=t._arrayCopy(k):t._arrayAssign(k,n))};p.setUniform3iv=function(b,k){const n=
this._nameToUniform3[b];v(n,k)&&(this._context.bindProgram(this),this._context.gl.uniform3iv(this.getUniformLocation(b),k),void 0===n?this._nameToUniform3[b]=t._arrayCopy(k):t._arrayAssign(k,n))};p.setUniform4iv=function(b,k){const n=this._nameToUniform4[b];v(n,k)&&(this._context.bindProgram(this),this._context.gl.uniform4iv(this.getUniformLocation(b),k),void 0===n?this._nameToUniform4[b]=t._arrayCopy(k):t._arrayAssign(k,n))};p.setUniform1f=function(b,k){const n=this._nameToUniform1[b];if(void 0===
n||k!==n)this._context.bindProgram(this),this._context.gl.uniform1f(this.getUniformLocation(b),k),this._nameToUniform1[b]=k};p.setUniform1fv=function(b,k){const n=this._nameToUniform1v[b];v(n,k)&&(this._context.bindProgram(this),this._context.gl.uniform1fv(this.getUniformLocation(b),k),void 0===n?this._nameToUniform1v[b]=t._arrayCopy(k):t._arrayAssign(k,n))};p.setUniform2f=function(b,k,n){const l=this._nameToUniform2[b];if(void 0===l||k!==l[0]||n!==l[1])this._context.bindProgram(this),this._context.gl.uniform2f(this.getUniformLocation(b),
k,n),void 0===l?this._nameToUniform2[b]=[k,n]:(l[0]=k,l[1]=n)};p.setUniform2fv=function(b,k){const n=this._nameToUniform2[b];v(n,k)&&(this._context.bindProgram(this),this._context.gl.uniform2fv(this.getUniformLocation(b),k),void 0===n?this._nameToUniform2[b]=t._arrayCopy(k):t._arrayAssign(k,n))};p.setUniform3f=function(b,k,n,l){const q=this._nameToUniform3[b];if(void 0===q||k!==q[0]||n!==q[1]||l!==q[2])this._context.bindProgram(this),this._context.gl.uniform3f(this.getUniformLocation(b),k,n,l),void 0===
q?this._nameToUniform3[b]=[k,n,l]:(q[0]=k,q[1]=n,q[2]=l)};p.setUniform3fv=function(b,k){const n=this._nameToUniform3[b];v(n,k)&&(this._context.bindProgram(this),this._context.gl.uniform3fv(this.getUniformLocation(b),k),void 0===n?this._nameToUniform3[b]=t._arrayCopy(k):t._arrayAssign(k,n))};p.setUniform4f=function(b,k,n,l,q){const C=this._nameToUniform4[b];if(void 0===C||k!==C[0]||n!==C[1]||l!==C[2]||q!==C[3])this._context.bindProgram(this),this._context.gl.uniform4f(this.getUniformLocation(b),k,
n,l,q),void 0===C?this._nameToUniform4[b]=[k,n,l,q]:(C[0]=k,C[1]=n,C[2]=l,C[3]=q)};p.setUniform4fv=function(b,k){const n=this._nameToUniform4[b];v(n,k)&&(this._context.bindProgram(this),this._context.gl.uniform4fv(this.getUniformLocation(b),k),void 0===n?this._nameToUniform4[b]=t._arrayCopy(k):t._arrayAssign(k,n))};p.setUniformMatrix3fv=function(b,k,n=!1){const l=this._nameToUniformMatrix3[b];var q=r.isNone(l)?!0:9!==l.length?v(l,k):9!==l.length||l[0]!==k[0]||l[1]!==k[1]||l[2]!==k[2]||l[3]!==k[3]||
l[4]!==k[4]||l[5]!==k[5]||l[6]!==k[6]||l[7]!==k[7]||l[8]!==k[8];q&&(this._context.bindProgram(this),this._context.gl.uniformMatrix3fv(this.getUniformLocation(b),n,k),void 0===l?this._nameToUniformMatrix3[b]=t._arrayCopy(k):t._arrayAssign(k,l))};p.setUniformMatrix4fv=function(b,k,n=!1){const l=this._nameToUniformMatrix4[b];var q=r.isNone(l)?!0:16!==l.length?v(l,k):16!==l.length||l[0]!==k[0]||l[1]!==k[1]||l[2]!==k[2]||l[3]!==k[3]||l[4]!==k[4]||l[5]!==k[5]||l[6]!==k[6]||l[7]!==k[7]||l[8]!==k[8]||l[9]!==
k[9]||l[10]!==k[10]||l[11]!==k[11]||l[12]!==k[12]||l[13]!==k[13]||l[14]!==k[14]||l[15]!==k[15];q&&(this._context.bindProgram(this),this._context.gl.uniformMatrix4fv(this.getUniformLocation(b),n,k),void 0===l?this._nameToUniformMatrix4[b]=t._arrayCopy(k):t._arrayAssign(k,l))};p.assertCompatibleVertexAttributeLocations=function(b){(b=b.locations===this.locations)||console.error("VertexAttributeLocations are incompatible");return b};t._padToThree=function(b){let k=b.toString();1E3>b&&(k=("  "+b).slice(-3));
return k};p._addLineNumbers=function(b){let k=2;return b.replace(/\n/g,()=>"\n"+t._padToThree(k++)+":")};p._loadShader=function(b){var k=35633===b,n=k?this._vertexShaderSource:this._fragmentShaderSource;let l="";for(const q in this._defines)l+=`#define ${q} ${this._defines[q]}\n`;n=l+n;"webgl2"===this._context.contextVersion&&(n=A.transpileShader(n,k?"vertex":"fragment"));k=this._context.gl;b=k.createShader(b);k.shaderSource(b,n);k.compileShader(b);return b};t._arrayCopy=function(b){const k=[];for(let n=
0;n<b.length;++n)k.push(b[n]);return k};t._arrayAssign=function(b,k){for(let n=0;n<b.length;++n)k[n]=b[n]};a._createClass(t,[{key:"glName",get:function(){return this._glName}},{key:"locations",get:function(){return this._locations}}]);return t}()})},"esri/views/webgl/ShaderTranspiler":function(){define(["exports","../../chunks/_commonjsHelpers","./reservedWordsGLSL3"],function(a,g,r){function A(){function c(T){T.length&&D.push({type:w[z],data:T,position:R,line:M,column:U})}function m(){H=H.length?
[]:H;if("/"===B&&"*"===y)return R=u+E-1,z=0,B=y,E+1;if("/"===B&&"/"===y)return R=u+E-1,z=1,B=y,E+1;if("#"===y)return z=2,R=u+E,E;if(/\s/.test(y))return z=9,R=u+E,E;J=/\d/.test(y);L=/[^\w_]/.test(y);R=u+E;z=J?4:L?3:9999;return E}function f(){if(("\r"===y||"\n"===y)&&"\\"!==B)return c(H.join("")),z=999,E;H.push(y);B=y;return E+1}function e(){if("."===B&&/\d/.test(y))return z=5,E;if("/"===B&&"*"===y)return z=0,E;if("/"===B&&"/"===y)return z=1,E;if("."===y&&H.length){for(;d(H););z=5;return E}if(";"===
y||")"===y||"("===y){if(H.length)for(;d(H););c(y);z=999;return E+1}var T=2===H.length&&"\x3d"!==y;if(/[\w_\d\s]/.test(y)||T){for(;d(H););z=999;return E}H.push(y);B=y;return E+1}function d(T){var W=0;do{var Q=q.indexOf(T.slice(0,T.length+W).join(""));var Z=q[Q];if(-1===Q){if(0<W--+T.length)continue;Z=T.slice(0,1).join("")}c(Z);R+=Z.length;H=H.slice(Z.length);return H.length}while(1)}function h(){if("."===y||/[eE]/.test(y))return H.push(y),z=5,B=y,E+1;if("x"===y&&1===H.length&&"0"===H[0])return z=11,
H.push(y),B=y,E+1;if(/[^\d]/.test(y))return c(H.join("")),z=999,E;H.push(y);B=y;return E+1}function F(){"f"===y&&(H.push(y),B=y,E+=1);if(/[eE]/.test(y)||"-"===y&&/[eE]/.test(B))return H.push(y),B=y,E+1;if(/[^\d]/.test(y))return c(H.join("")),z=999,E;H.push(y);B=y;return E+1}var E=0,u=0,z=999,y,B,H=[],D=[],M=1,U=0,R=0,J=!1,L=!1,N="",V;return function(T){D=[];if(null!==T){T=T.replace?T.replace(/\r\n/g,"\n"):T;E=0;N+=T;for(V=N.length;y=N[E],E<V;){T=E;switch(z){case 0:"/"===y&&"*"===B?(H.push(y),c(H.join("")),
z=999):(H.push(y),B=y);E+=1;break;case 1:E=f();break;case 2:E=f();break;case 3:E=e();break;case 4:E=h();break;case 11:/[^a-fA-F0-9]/.test(y)?(c(H.join("")),z=999):(H.push(y),B=y,E+=1);break;case 5:E=F();break;case 9999:if(/[^\d\w_]/.test(y)){var W=H.join("");z=-1<l.indexOf(W)?8:-1<C.indexOf(W)?7:6;c(H.join(""));z=999}else H.push(y),B=y,E+=1;break;case 9:/[^\s]/g.test(y)?(c(H.join("")),z=999):(H.push(y),B=y,E+=1);break;case 999:E=m()}if(T!==E)switch(N[T]){case "\n":U=0;++M;break;default:++U}}u+=E;
N=N.slice(E);return D}H.length&&c(H.join(""));z=10;c("(eof)");return D}}function v(c){return c.map(m=>"eof"!==m.type?m.data:"").join("")}function t(c,m="100",f="300 es"){const e=/^\s*#version\s+([0-9]+(\s+[a-zA-Z]+)?)\s*/;for(const d of c)if("preprocessor"===d.type){const h=e.exec(d.data);if(h){c=h[1].replace(/\s\s+/g," ");if(c===f)return c;if(c===m)return d.data="#version "+f,m;throw Error("unknown glsl version: "+c);}}c.splice(0,0,{type:"preprocessor",data:"#version "+f},{type:"whitespace",data:"\n"});
return null}function p(c,m,f,e){e=e||f;for(const d of c)if("ident"===d.type&&d.data===f)return e in m?m[e]++:m[e]=0,p(c,m,e+"_"+m[e],e);return f}function b(c,m,f="afterVersion"){const e={data:"\n",type:"whitespace"},d=F=>F<c.length?/[^\r\n]$/.test(c[F].data):!1;let h=function(F){let E=-1,u=0,z=-1;for(let B=0;B<F.length;B++){var y=F[B];"preprocessor"===y.type&&(y.data.match(/#(if|ifdef|ifndef)\s+.+/)?++u:y.data.match(/#endif\s*.*/)&&--u);("afterVersion"===f||"afterPrecision"===f)&&"preprocessor"===
y.type&&/^#version/.test(y.data)&&(z=Math.max(z,B));if("afterPrecision"===f&&"keyword"===y.type&&"precision"===y.data){a:{for(y=B;y<F.length;y++){const H=F[y];if("operator"===H.type&&";"===H.data)break a}y=null}if(null===y)throw Error("precision statement not followed by any semicolons!");z=Math.max(z,y)}E<z&&0===u&&(E=B)}return E+1}(c);d(h-1)&&c.splice(h++,0,e);for(const F of m)c.splice(h++,0,F);d(h-1)&&d(h)&&c.splice(h,0,e)}function k(c,m,f,e="lowp"){b(c,[{type:"keyword",data:"out"},{type:"whitespace",
data:" "},{type:"keyword",data:e},{type:"whitespace",data:" "},{type:"keyword",data:f},{type:"whitespace",data:" "},{type:"ident",data:m},{type:"operator",data:";"}],"afterPrecision")}function n(c,m,f,e,d="lowp"){b(c,[{type:"keyword",data:"layout"},{type:"operator",data:"("},{type:"keyword",data:"location"},{type:"whitespace",data:" "},{type:"operator",data:"\x3d"},{type:"whitespace",data:" "},{type:"integer",data:e.toString()},{type:"operator",data:")"},{type:"whitespace",data:" "},{type:"keyword",
data:"out"},{type:"whitespace",data:" "},{type:"keyword",data:d},{type:"whitespace",data:" "},{type:"keyword",data:f},{type:"whitespace",data:" "},{type:"ident",data:m},{type:"operator",data:";"}],"afterPrecision")}var l=g.createCommonjsModule(function(c){(function(m){m=m();void 0!==m&&(c.exports=m)})(function(){return"precision highp mediump lowp attribute const uniform varying break continue do for while if else in out inout float int void bool true false discard return mat2 mat3 mat4 vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadow struct asm class union enum typedef template this packed goto switch default inline noinline volatile public static extern external interface long short double half fixed unsigned input output hvec2 hvec3 hvec4 dvec2 dvec3 dvec4 fvec2 fvec3 fvec4 sampler2DRect sampler3DRect sampler2DRectShadow sizeof cast namespace using".split(" ")})}),
q=g.createCommonjsModule(function(c){(function(m){m=m();void 0!==m&&(c.exports=m)})(function(){"use strict;";return"\x3c\x3c\x3d \x3e\x3e\x3d ++ -- \x3c\x3c \x3e\x3e \x3c\x3d \x3e\x3d \x3d\x3d !\x3d \x26\x26 || +\x3d -\x3d *\x3d /\x3d %\x3d \x26\x3d ^^ ^\x3d |\x3d ( ) [ ] . ! ~ * / % + - \x3c \x3e \x26 ^ | ? : \x3d , ; { }".split(" ")})}),C=g.createCommonjsModule(function(c){(function(m){m=m();void 0!==m&&(c.exports=m)})(function(){return"abs acos all any asin atan ceil clamp cos cross dFdx dFdy degrees distance dot equal exp exp2 faceforward floor fract gl_BackColor gl_BackLightModelProduct gl_BackLightProduct gl_BackMaterial gl_BackSecondaryColor gl_ClipPlane gl_ClipVertex gl_Color gl_DepthRange gl_DepthRangeParameters gl_EyePlaneQ gl_EyePlaneR gl_EyePlaneS gl_EyePlaneT gl_Fog gl_FogCoord gl_FogFragCoord gl_FogParameters gl_FragColor gl_FragCoord gl_FragData gl_FragDepth gl_FragDepthEXT gl_FrontColor gl_FrontFacing gl_FrontLightModelProduct gl_FrontLightProduct gl_FrontMaterial gl_FrontSecondaryColor gl_LightModel gl_LightModelParameters gl_LightModelProducts gl_LightProducts gl_LightSource gl_LightSourceParameters gl_MaterialParameters gl_MaxClipPlanes gl_MaxCombinedTextureImageUnits gl_MaxDrawBuffers gl_MaxFragmentUniformComponents gl_MaxLights gl_MaxTextureCoords gl_MaxTextureImageUnits gl_MaxTextureUnits gl_MaxVaryingFloats gl_MaxVertexAttribs gl_MaxVertexTextureImageUnits gl_MaxVertexUniformComponents gl_ModelViewMatrix gl_ModelViewMatrixInverse gl_ModelViewMatrixInverseTranspose gl_ModelViewMatrixTranspose gl_ModelViewProjectionMatrix gl_ModelViewProjectionMatrixInverse gl_ModelViewProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixTranspose gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_Normal gl_NormalMatrix gl_NormalScale gl_ObjectPlaneQ gl_ObjectPlaneR gl_ObjectPlaneS gl_ObjectPlaneT gl_Point gl_PointCoord gl_PointParameters gl_PointSize gl_Position gl_ProjectionMatrix gl_ProjectionMatrixInverse gl_ProjectionMatrixInverseTranspose gl_ProjectionMatrixTranspose gl_SecondaryColor gl_TexCoord gl_TextureEnvColor gl_TextureMatrix gl_TextureMatrixInverse gl_TextureMatrixInverseTranspose gl_TextureMatrixTranspose gl_Vertex greaterThan greaterThanEqual inversesqrt length lessThan lessThanEqual log log2 matrixCompMult max min mix mod normalize not notEqual pow radians reflect refract sign sin smoothstep sqrt step tan texture2D texture2DLod texture2DProj texture2DProjLod textureCube textureCubeLod texture2DLodEXT texture2DProjLodEXT textureCubeLodEXT texture2DGradEXT texture2DProjGradEXT textureCubeGradEXT".split(" ")})}),
w="block-comment line-comment preprocessor operator integer float ident builtin keyword whitespace eof integer".split(" ");const x=["GL_OES_standard_derivatives","GL_EXT_frag_depth","GL_EXT_draw_buffers","GL_EXT_shader_texture_lod"];a.transpileShader=function(c,m){var f=A(),e=[];e=e.concat(f(c));c=e=e.concat(f(null));if("300 es"===t(c,"100","300 es"))throw Error("shader is already glsl 300 es");e=f=null;const d={},h={};for(let z=0;z<c.length;++z){const y=c[z];switch(y.type){case "keyword":"vertex"===
m&&"attribute"===y.data?y.data="in":"varying"===y.data&&(y.data="vertex"===m?"out":"in");break;case "builtin":/^texture(2D|Cube)(Proj)?(Lod|Grad)?(EXT)?$/.test(y.data.trim())&&(y.data=y.data.replace(/(2D|Cube|EXT)/g,""));"fragment"===m&&"gl_FragColor"===y.data&&(f||(f=p(c,d,"fragColor"),k(c,f,"vec4")),y.data=f);if("fragment"===m&&"gl_FragData"===y.data){{var F=void 0;let B=void 0;var E=c;var u=z+1;let H=-1;for(;u<E.length;u++){const D=E[u];if("operator"===D.type&&("["===D.data&&(B=u),"]"===D.data)){F=
u;break}"integer"===D.type&&(H=parseInt(D.data,10))}B&&F&&E.splice(B,F-B+1);E=H}F=p(c,d,"fragData");n(c,F,"vec4",E,"mediump");y.data=F}else"fragment"===m&&"gl_FragDepthEXT"===y.data&&(e||(e=p(c,d,"gl_FragDepth")),y.data=e);break;case "ident":if(0<=r.indexOf(y.data)){if(E="vertex"===m)a:{for(E=z-1;0<=E;E--)if(F=c[E],"whitespace"!==F.type&&"block-comment"!==F.type)if("keyword"===F.type){if("attribute"===F.data||"in"===F.data){E=!0;break a}}else break;E=!1}if(E)throw Error("attribute in vertex shader uses a name that is a reserved word in glsl 300 es");
y.data in h||(h[y.data]=p(c,d,y.data));y.data=h[y.data]}}}for(m=c.length-1;0<=m;--m)f=c[m],"preprocessor"===f.type&&((e=f.data.match(/#extension\s+(.*):/))&&e[1]&&0<=x.indexOf(e[1].trim())&&(e=c[m+1],c.splice(m,e&&"whitespace"===e.type?2:1)),(e=f.data.match(/#ifdef\s+(.*)/))&&e[1]&&0<=x.indexOf(e[1].trim())&&(f.data="#if 1"),(e=f.data.match(/#ifndef\s+(.*)/))&&e[1]&&0<=x.indexOf(e[1].trim())&&(f.data="#if 0"));return v(c)};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/chunks/_commonjsHelpers":function(){define(["exports"],
function(a){function g(){throw Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs");}a.commonjsGlobal="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};a.commonjsRequire=g;a.createCommonjsModule=function(r,A,v){return v={path:A,exports:{},require:function(t,p){return g(t,void 0===p||null===p?v.path:p)}},r(v,v.exports),v.exports};a.getDefaultExportFromCjs=function(r){return r&&
r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r["default"]:r}})},"esri/views/webgl/reservedWordsGLSL3":function(){define(function(){return"layout centroid smooth case mat2x2 mat2x3 mat2x4 mat3x2 mat3x3 mat3x4 mat4x2 mat4x3 mat4x4 uint uvec2 uvec3 uvec4 samplerCubeShadow sampler2DArray sampler2DArrayShadow isampler2D isampler3D isamplerCube isampler2DArray usampler2D usampler3D usamplerCube usampler2DArray coherent restrict readonly writeonly resource atomic_uint noperspective patch sample subroutine common partition active filter image1D image2D image3D imageCube iimage1D iimage2D iimage3D iimageCube uimage1D uimage2D uimage3D uimageCube image1DArray image2DArray iimage1DArray iimage2DArray uimage1DArray uimage2DArray image1DShadow image2DShadow image1DArrayShadow image2DArrayShadow imageBuffer iimageBuffer uimageBuffer sampler1DArray sampler1DArrayShadow isampler1D isampler1DArray usampler1D usampler1DArray isampler2DRect usampler2DRect samplerBuffer isamplerBuffer usamplerBuffer sampler2DMS isampler2DMS usampler2DMS sampler2DMSArray isampler2DMSArray usampler2DMSArray trunc round roundEven isnan isinf floatBitsToInt floatBitsToUint intBitsToFloat uintBitsToFloat packSnorm2x16 unpackSnorm2x16 packUnorm2x16 unpackUnorm2x16 packHalf2x16 unpackHalf2x16 outerProduct transpose determinant inverse texture textureSize textureProj textureLod textureOffset texelFetch texelFetchOffset textureProjOffset textureLodOffset textureProjLod textureProjLodOffset textureGrad textureGradOffset textureProjGrad textureProjGradOffset".split(" ")})},
"esri/views/webgl/renderState":function(){define(["exports"],function(a){function g(D){return d.intern(D)}function r(D){return h.intern(D)}function A(D){return F.intern(D)}function v(D){return E.intern(D)}function t(D){return u.intern(D)}function p(D){return z.intern(D)}function b(D){return y.intern(D)}function k(D){return B.intern(D)}function n(D){return"["+D.join(",")+"]"}function l(D){return D?n([D.srcRgb,D.srcAlpha,D.dstRgb,D.dstAlpha,D.opRgb,D.opAlpha,D.color.r,D.color.g,D.color.b,D.color.a]):
null}function q(D){return D?n([D.face,D.mode]):null}function C(D){return D?n([D.factor,D.units]):null}function w(D){return D?n([D.func]):null}function x(D){return D?n([D.function.func,D.function.ref,D.function.mask,D.operation.fail,D.operation.zFail,D.operation.zPass]):null}function c(D){return D?n([D.zNear,D.zFar]):null}function m(D){return D?n([D.r,D.g,D.b,D.a]):null}function f(D){return D?n([D.mask]):null}var e=function(){function D(M,U){this.makeKey=M;this.makeRef=U;this.interns=new Map}D.prototype.intern=
function(M){if(!M)return null;const U=this.makeKey(M),R=this.interns;R.has(U)||R.set(U,this.makeRef(M));return R.get(U)};return D}();const d=new e(l,D=>({__tag:"Blending",...D})),h=new e(q,D=>({__tag:"Culling",...D})),F=new e(C,D=>({__tag:"PolygonOffset",...D})),E=new e(w,D=>({__tag:"DepthTest",...D})),u=new e(x,D=>({__tag:"StencilTest",...D})),z=new e(c,D=>({__tag:"DepthWrite",...D})),y=new e(m,D=>({__tag:"ColorWrite",...D})),B=new e(f,D=>({__tag:"StencilWrite",...D})),H=new e(function(D){return D?
n([l(D.blending),q(D.culling),C(D.polygonOffset),w(D.depthTest),x(D.stencilTest),c(D.depthWrite),m(D.colorWrite),f(D.stencilWrite)]):null},D=>({blending:g(D.blending),culling:r(D.culling),polygonOffset:A(D.polygonOffset),depthTest:v(D.depthTest),stencilTest:t(D.stencilTest),depthWrite:p(D.depthWrite),colorWrite:b(D.colorWrite),stencilWrite:k(D.stencilWrite)}));e=function(){function D(U){this._stencilWriteInvalid=this._colorWriteInvalid=this._depthWriteInvalid=this._stencilTestInvalid=this._depthTestInvalid=
this._polygonOffsetInvalid=this._cullingInvalid=this._blendingInvalid=this._pipelineInvalid=!0;this._stateSetters=U}var M=D.prototype;M.setPipeline=function(U){if(this._pipelineInvalid||U!==this._pipeline)this.setBlending(U.blending),this.setCulling(U.culling),this.setPolygonOffset(U.polygonOffset),this.setDepthTest(U.depthTest),this.setStencilTest(U.stencilTest),this.setDepthWrite(U.depthWrite),this.setColorWrite(U.colorWrite),this.setStencilWrite(U.stencilWrite),this._pipeline=U;this._pipelineInvalid=
!1};M.invalidateBlending=function(){this._pipelineInvalid=this._blendingInvalid=!0};M.invalidateCulling=function(){this._pipelineInvalid=this._cullingInvalid=!0};M.invalidatePolygonOffset=function(){this._pipelineInvalid=this._polygonOffsetInvalid=!0};M.invalidateDepthTest=function(){this._pipelineInvalid=this._depthTestInvalid=!0};M.invalidateStencilTest=function(){this._pipelineInvalid=this._stencilTestInvalid=!0};M.invalidateDepthWrite=function(){this._pipelineInvalid=this._depthWriteInvalid=!0};
M.invalidateColorWrite=function(){this._pipelineInvalid=this._colorWriteInvalid=!0};M.invalidateStencilWrite=function(){this._pipelineInvalid=this._stencilTestInvalid=!0};M.setBlending=function(U){this._blending=this.setSubState(U,this._blending,this._blendingInvalid,this._stateSetters.setBlending);this._blendingInvalid=!1};M.setCulling=function(U){this._culling=this.setSubState(U,this._culling,this._cullingInvalid,this._stateSetters.setCulling);this._cullingInvalid=!1};M.setPolygonOffset=function(U){this._polygonOffset=
this.setSubState(U,this._polygonOffset,this._polygonOffsetInvalid,this._stateSetters.setPolygonOffset);this._polygonOffsetInvalid=!1};M.setDepthTest=function(U){this._depthTest=this.setSubState(U,this._depthTest,this._depthTestInvalid,this._stateSetters.setDepthTest);this._depthTestInvalid=!1};M.setStencilTest=function(U){this._stencilTest=this.setSubState(U,this._stencilTest,this._stencilTestInvalid,this._stateSetters.setStencilTest);this._stencilTestInvalid=!1};M.setDepthWrite=function(U){this._depthWrite=
this.setSubState(U,this._depthWrite,this._depthWriteInvalid,this._stateSetters.setDepthWrite);this._depthWriteInvalid=!1};M.setColorWrite=function(U){this._colorWrite=this.setSubState(U,this._colorWrite,this._colorWriteInvalid,this._stateSetters.setColorWrite);this._colorWriteInvalid=!1};M.setStencilWrite=function(U){this._stencilWrite=this.setSubState(U,this._stencilWrite,this._stencilWriteInvalid,this._stateSetters.setStencilWrite);this._stencilTestInvalid=!1};M.setSubState=function(U,R,J,L){if(J||
U!==R)L(U),this._pipelineInvalid=!0;return U};return D}();a.StateTracker=e;a.backFaceCullingParams={face:1029,mode:2305};a.defaultColorWriteParams={r:!0,g:!0,b:!0,a:!0};a.defaultDepthWriteParams={zNear:0,zFar:1};a.makeBlending=g;a.makeColorWrite=b;a.makeCulling=r;a.makeDepthTest=v;a.makeDepthWrite=p;a.makePipelineState=function(D){return H.intern(D)};a.makePolygonOffset=A;a.makeStencilTest=t;a.makeStencilWrite=k;a.separateBlendingParams=function(D,M,U,R,J=32774,L=32774,N=[0,0,0,0]){return{srcRgb:D,
srcAlpha:M,dstRgb:U,dstAlpha:R,opRgb:J,opAlpha:L,color:{r:N[0],g:N[1],b:N[2],a:N[3]}}};a.simpleBlendingParams=function(D,M,U=32774,R=[0,0,0,0]){return{srcRgb:D,srcAlpha:D,dstRgb:M,dstAlpha:M,opRgb:U,opAlpha:U,color:{r:R[0],g:R[1],b:R[2],a:R[3]}}};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderLibrary/util/View.glsl":function(){define(["exports","../../../../../../chunks/mat4","../../../../../../chunks/mat4f32"],function(a,g,r){(function(v){function t(p,
b,k){g.translate(A,k,b);p.setUniform3fv("localOrigin",b);p.setUniformMatrix4fv("view",A)}v.bindCamPosition=function(p,b,k){p.setUniform3f("camPos",k[3]-b[0],k[7]-b[1],k[11]-b[2])};v.bindProjectionMatrix=function(p,b){p.setUniformMatrix4fv("proj",b)};v.bindNearFar=function(p,b){p.setUniform2fv("nearFar",b)};v.bindViewCustomOrigin=t;v.bindView=function(p,b){t(p,b.origin,b.camera.viewMatrix)};v.bindViewport=function(p,b){p.setUniform4fv("viewport",b.camera.fullViewport)}})(a.View||(a.View={}));const A=
r.create();Object.defineProperty(a,"__esModule",{value:!0})})},"esri/chunks/mat4f32":function(){define(["exports"],function(a){function g(){const b=new Float32Array(16);b[0]=1;b[5]=1;b[10]=1;b[15]=1;return b}function r(b){const k=new Float32Array(16);k[0]=b[0];k[1]=b[1];k[2]=b[2];k[3]=b[3];k[4]=b[4];k[5]=b[5];k[6]=b[6];k[7]=b[7];k[8]=b[8];k[9]=b[9];k[10]=b[10];k[11]=b[11];k[12]=b[12];k[13]=b[13];k[14]=b[14];k[15]=b[15];return k}function A(b,k,n,l,q,C,w,x,c,m,f,e,d,h,F,E){const u=new Float32Array(16);
u[0]=b;u[1]=k;u[2]=n;u[3]=l;u[4]=q;u[5]=C;u[6]=w;u[7]=x;u[8]=c;u[9]=m;u[10]=f;u[11]=e;u[12]=d;u[13]=h;u[14]=F;u[15]=E;return u}function v(b,k){return new Float32Array(b,k,16)}const t=g();var p=Object.freeze({__proto__:null,create:g,clone:r,fromValues:A,createView:v,IDENTITY:t});a.IDENTITY=t;a.clone=r;a.create=g;a.createView=v;a.fromValues=A;a.mat4f32=p})},"esri/views/3d/webgl-engine/core/shaderLibrary/Slice.glsl":function(){define(["exports","../../../../../core/maybe","../../../../../chunks/vec3f64",
"../../../../../chunks/vec3","../shaderModules/interfaces"],function(a,g,r,A,v){function t(b,k){if(k.slicePlaneEnabled){b.extensions.add("GL_OES_standard_derivatives");k.sliceEnabledForVertexPrograms&&(b.vertex.uniforms.add("slicePlaneOrigin","vec3"),b.vertex.uniforms.add("slicePlaneBasis1","vec3"),b.vertex.uniforms.add("slicePlaneBasis2","vec3"));b.fragment.uniforms.add("slicePlaneOrigin","vec3");b.fragment.uniforms.add("slicePlaneBasis1","vec3");b.fragment.uniforms.add("slicePlaneBasis2","vec3");
var n=v.glsl`
      struct SliceFactors {
        float front;
        float side0;
        float side1;
        float side2;
        float side3;
      };

      SliceFactors calculateSliceFactors(vec3 pos) {
        vec3 rel = pos - slicePlaneOrigin;

        vec3 slicePlaneNormal = -cross(slicePlaneBasis1, slicePlaneBasis2);
        float slicePlaneW = -dot(slicePlaneNormal, slicePlaneOrigin);

        float basis1Len2 = dot(slicePlaneBasis1, slicePlaneBasis1);
        float basis2Len2 = dot(slicePlaneBasis2, slicePlaneBasis2);

        float basis1Dot = dot(slicePlaneBasis1, rel);
        float basis2Dot = dot(slicePlaneBasis2, rel);

        return SliceFactors(
          dot(slicePlaneNormal, pos) + slicePlaneW,
          -basis1Dot - basis1Len2,
          basis1Dot - basis1Len2,
          -basis2Dot - basis2Len2,
          basis2Dot - basis2Len2
        );
      }

      bool sliceByFactors(SliceFactors factors) {
        return factors.front < 0.0
          && factors.side0 < 0.0
          && factors.side1 < 0.0
          && factors.side2 < 0.0
          && factors.side3 < 0.0;
      }

      bool sliceEnabled() {
        // a slicePlaneBasis1 vector of zero length is used to disable slicing in the shader during draped rendering.
        return dot(slicePlaneBasis1, slicePlaneBasis1) != 0.0;
      }

      bool sliceByPlane(vec3 pos) {
        return sliceEnabled() && sliceByFactors(calculateSliceFactors(pos));
      }

      #define rejectBySlice(_pos_) sliceByPlane(_pos_)
      #define discardBySlice(_pos_) { if (sliceByPlane(_pos_)) discard; }
    `,l=v.glsl`
      vec4 applySliceHighlight(vec4 color, vec3 pos) {
        SliceFactors factors = calculateSliceFactors(pos);

        if (sliceByFactors(factors)) {
          return color;
        }

        const float HIGHLIGHT_WIDTH = 1.0;
        const vec4 HIGHLIGHT_COLOR = vec4(0.0, 0.0, 0.0, 0.3);

        factors.front /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.front);
        factors.side0 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side0);
        factors.side1 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side1);
        factors.side2 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side2);
        factors.side3 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side3);

        float highlightFactor = (1.0 - step(0.5, factors.front))
          * (1.0 - step(0.5, factors.side0))
          * (1.0 - step(0.5, factors.side1))
          * (1.0 - step(0.5, factors.side2))
          * (1.0 - step(0.5, factors.side3));

        return mix(color, vec4(HIGHLIGHT_COLOR.rgb, color.a), highlightFactor * HIGHLIGHT_COLOR.a);
      }
    `;l=k.sliceHighlightDisabled?v.glsl`#define highlightSlice(_color_, _pos_) (_color_)`:v.glsl`
        ${l}
        #define highlightSlice(_color_, _pos_) (sliceEnabled() ? applySliceHighlight(_color_, _pos_) : (_color_))
      `;k.sliceEnabledForVertexPrograms&&b.vertex.code.add(n);b.fragment.code.add(n);b.fragment.code.add(l)}else n=v.glsl`
      #define rejectBySlice(_pos_) false
      #define discardBySlice(_pos_) {}
      #define highlightSlice(_color_, _pos_) (_color_)
    `,k.sliceEnabledForVertexPrograms&&b.vertex.code.add(n),b.fragment.code.add(n)}(function(b){b.bindUniformsWithOrigin=function(k,n,l){b.bindUniforms(k,n,l.slicePlane,l.origin)};b.bindUniforms=function(k,n,l,q){n.slicePlaneEnabled&&(g.isSome(l)?(q?(A.subtract(p,l.origin,q),k.setUniform3fv("slicePlaneOrigin",p)):k.setUniform3fv("slicePlaneOrigin",l.origin),k.setUniform3fv("slicePlaneBasis1",l.basis1),k.setUniform3fv("slicePlaneBasis2",l.basis2)):(k.setUniform3fv("slicePlaneBasis1",r.ZEROS),k.setUniform3fv("slicePlaneBasis2",
r.ZEROS),k.setUniform3fv("slicePlaneOrigin",r.ZEROS)))}})(t||(t={}));const p=r.create();a.Slice=t;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderModules/interfaces":function(){define(["exports"],function(a){function g(r,...A){let v="";for(let t=0;t<A.length;t++)v+=r[t]+A[t];return v+=r[r.length-1]}(function(r){r.int=function(A){return Math.round(A).toString()};r.float=function(A){return A.toPrecision(8)}})(g||(g={}));a.glsl=g;Object.defineProperty(a,"__esModule",
{value:!0})})},"esri/views/3d/webgl-engine/core/shaderLibrary/output/OutputHighlight.glsl":function(){define(["exports","../../../../../../chunks/vec4f64","../../shaderModules/interfaces"],function(a,g,r){function A(p){p.fragment.uniforms.add("depthTex","sampler2D");p.fragment.uniforms.add("highlightViewportPixelSz","vec4");p.fragment.constants.add("occludedHighlightFlag","vec4",v).add("unoccludedHighlightFlag","vec4",t);p.fragment.code.add(r.glsl`
    void outputHighlight() {
      vec4 fragCoord = gl_FragCoord;

      float sceneDepth = texture2D(depthTex, (fragCoord.xy - highlightViewportPixelSz.xy) * highlightViewportPixelSz.zw).r;
      if (fragCoord.z > sceneDepth + 5e-7) {
        gl_FragColor = occludedHighlightFlag;
      }
      else {
        gl_FragColor = unoccludedHighlightFlag;
      }
    }
  `)}const v=g.fromValues(1,1,0,1),t=g.fromValues(1,0,1,1);(function(p){p.bindOutputHighlight=function(b,k,n){b.bindTexture(n.highlightDepthTexture,5);k.setUniform1i("depthTex",5);k.setUniform4f("highlightViewportPixelSz",0,0,n.inverseViewport[0],n.inverseViewport[1])}})(A||(A={}));a.OutputHighlight=A;a.occludedHighlightFlag=v;a.unoccludedHighlightFlag=t;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderLibrary/shading/VisualVariables.glsl":function(){define(["exports",
"../../shaderModules/interfaces"],function(a,g){function r(A,v){v.vvInstancingEnabled&&(v.vvSize||v.vvColor)&&A.attributes.add("instanceFeatureAttribute","vec4");v.vvSize?(A.vertex.uniforms.add("vvSizeMinSize","vec3"),A.vertex.uniforms.add("vvSizeMaxSize","vec3"),A.vertex.uniforms.add("vvSizeOffset","vec3"),A.vertex.uniforms.add("vvSizeFactor","vec3"),A.vertex.uniforms.add("vvSymbolRotationMatrix","mat3"),A.vertex.uniforms.add("vvSymbolAnchor","vec3"),A.vertex.code.add(g.glsl`
      vec3 vvScale(vec4 _featureAttribute) {
        return clamp(vvSizeOffset + _featureAttribute.x * vvSizeFactor, vvSizeMinSize, vvSizeMaxSize);
      }

      vec4 vvTransformPosition(vec3 position, vec4 _featureAttribute) {
        return vec4(vvSymbolRotationMatrix * ( vvScale(_featureAttribute) * (position + vvSymbolAnchor)), 1.0);
      }
    `),A.vertex.code.add(g.glsl`
      const float eps = 1.192092896e-07;
      vec4 vvTransformNormal(vec3 _normal, vec4 _featureAttribute) {
        vec3 vvScale = clamp(vvSizeOffset + _featureAttribute.x * vvSizeFactor, vvSizeMinSize + eps, vvSizeMaxSize);
        return vec4(vvSymbolRotationMatrix * _normal / vvScale, 1.0);
      }

      ${v.vvInstancingEnabled?g.glsl`
      vec4 vvLocalNormal(vec3 _normal) {
        return vvTransformNormal(_normal, instanceFeatureAttribute);
      }

      vec4 localPosition() {
        return vvTransformPosition(position, instanceFeatureAttribute);
      }`:""}
    `)):A.vertex.code.add(g.glsl`
      vec4 localPosition() { return vec4(position, 1.0); }

      vec4 vvLocalNormal(vec3 _normal) { return vec4(_normal, 1.0); }
    `);v.vvColor?(A.vertex.constants.add("vvColorNumber","int",8),A.vertex.code.add(g.glsl`
      uniform float vvColorValues[vvColorNumber];
      uniform vec4 vvColorColors[vvColorNumber];

      vec4 vvGetColor(vec4 featureAttribute, float values[vvColorNumber], vec4 colors[vvColorNumber]) {
        float value = featureAttribute.y;
        if (value <= values[0]) {
          return colors[0];
        }

        for (int i = 1; i < vvColorNumber; ++i) {
          if (values[i] >= value) {
            float f = (value - values[i-1]) / (values[i] - values[i-1]);
            return mix(colors[i-1], colors[i], f);
          }
        }
        return colors[vvColorNumber - 1];
      }

      ${v.vvInstancingEnabled?g.glsl`
      vec4 vvColor() {
        return vvGetColor(instanceFeatureAttribute, vvColorValues, vvColorColors);
      }`:""}
    `)):A.vertex.code.add(g.glsl`
      vec4 vvColor() { return vec4(1.0); }
    `)}(function(A){function v(t,p){p.vvSizeEnabled&&(t.setUniform3fv("vvSizeMinSize",p.vvSizeMinSize),t.setUniform3fv("vvSizeMaxSize",p.vvSizeMaxSize),t.setUniform3fv("vvSizeOffset",p.vvSizeOffset),t.setUniform3fv("vvSizeFactor",p.vvSizeFactor));p.vvColorEnabled&&(t.setUniform1fv("vvColorValues",p.vvColorValues),t.setUniform4fv("vvColorColors",p.vvColorColors))}A.bindUniforms=v;A.bindUniformsWithOpacity=function(t,p){v(t,p);p.vvOpacityEnabled&&(t.setUniform1fv("vvOpacityValues",p.vvOpacityValues),
t.setUniform1fv("vvOpacityOpacities",p.vvOpacityOpacities))};A.bindUniformsForSymbols=function(t,p){v(t,p);p.vvSizeEnabled&&(t.setUniform3fv("vvSymbolAnchor",p.vvSymbolAnchor),t.setUniformMatrix3fv("vvSymbolRotationMatrix",p.vvSymbolRotationMatrix))}})(r||(r={}));a.VisualVariables=r;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/OrderIndependentTransparency":function(){define(["exports","../../../webgl/renderState"],function(a,g){const r=g.separateBlendingParams(770,
1,771,771),A=g.simpleBlendingParams(1,1),v=g.simpleBlendingParams(0,771),t={factor:-1,units:-2};a.OITBlending=function(p){return 2===p?null:1===p?v:A};a.OITDepthTest=function(p){return 3===p||2===p?513:515};a.OITDepthWrite=function(p){return 2===p?g.defaultDepthWriteParams:null};a.OITPolygonOffset=t;a.OITPolygonOffsetLimit=5E5;a.blendingAlpha=v;a.blendingColor=A;a.blendingDefault=r;a.getOITPolygonOffset=function(p){return p?t:null};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderLibrary/shading/MultipassTerrainTest.glsl":function(){define(["exports",
"../../shaderModules/interfaces"],function(a,g){a.bindMultipassTerrainUniforms=function(r,A,v){v.multipassTerrainEnabled&&v.terrainLinearDepthTexture&&(r.setUniform1i("terrainDepthTexture",10),A.bindTexture(v.terrainLinearDepthTexture,10))};a.multipassTerrainTest=function(r,A){r.fragment.uniforms.add("terrainDepthTexture","sampler2D");r.fragment.uniforms.add("cameraNearFar","vec2");r.fragment.uniforms.add("inverseViewport","vec2");r.fragment.code.add(g.glsl`
    //Compare the linearized depths of the fragment and the terrain. If fragment is on the wrong side of the terrain, discard it.
    void terrainDepthTest(vec4 fragCoord, float fragmentDepth){

      float terrainDepth = linearDepthFromTexture(terrainDepthTexture, fragCoord.xy * inverseViewport, cameraNearFar);
      if(fragmentDepth ${A.cullAboveGround?"\x3e":"\x3c\x3d"} terrainDepth){
        discard;
      }
    }
  `)};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/StencilUtils":function(){define(["exports"],function(a){a.depthCompareAlways={func:519};a.depthCompareLess={func:513};a.renderWhenBitIsNotSet=g=>({function:{func:517,ref:g,mask:g},operation:{fail:7680,zFail:7680,zPass:7680}});a.replaceBitWhenDepthTestPasses=g=>({function:{func:519,ref:g,mask:g},operation:{fail:7680,zFail:7680,zPass:7681}});a.stencilBaseAllZerosParams={function:{func:519,ref:2,mask:2},operation:{fail:7680,
zFail:7680,zPass:0}};a.stencilToolMaskBaseParams={function:{func:519,ref:2,mask:2},operation:{fail:7680,zFail:7680,zPass:7681}};a.stencilToolMaskOccluderParams={function:{func:514,ref:2,mask:2},operation:{fail:7680,zFail:7680,zPass:7680}};a.stencilToolTransparentOccluderParams={function:{func:517,ref:2,mask:2},operation:{fail:7680,zFail:7680,zPass:7680}};a.stencilWriteMaskOff={mask:0};a.stencilWriteMaskOn={mask:255};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/chunks/RibbonLine.glsl":function(){define("exports ../views/3d/webgl-engine/core/shaderModules/interfaces ../views/3d/webgl-engine/core/shaderModules/ShaderBuilder ../views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl ../views/3d/webgl-engine/core/shaderLibrary/Slice.glsl ../views/3d/webgl-engine/core/shaderLibrary/output/ReadLinearDepth.glsl ../views/3d/webgl-engine/core/shaderLibrary/util/AlphaDiscard.glsl ../views/3d/webgl-engine/core/shaderLibrary/shading/MultipassTerrainTest.glsl ../views/3d/webgl-engine/core/shaderLibrary/attributes/RibbonVertexPosition.glsl ../views/3d/webgl-engine/core/shaderLibrary/output/OutputDepth.glsl ../views/3d/webgl-engine/core/shaderLibrary/shading/LineStipple.glsl ../views/3d/webgl-engine/core/shaderLibrary/shading/PiUtils.glsl".split(" "),
function(a,g,r,A,v,t,p,b,k,n,l,q){function C(x){const c=new r.ShaderBuilder;c.extensions.add("GL_OES_standard_derivatives");c.include(q.PiUtils);c.include(k.RibbonVertexPosition,x);c.include(l.LineStipple,x);1===x.output&&c.include(n.OutputDepth,x);c.vertex.uniforms.add("proj","mat4").add("view","mat4").add("cameraNearFar","vec2").add("pixelRatio","float").add("miterLimit","float").add("screenSize","vec2");c.attributes.add("position","vec3");c.attributes.add("subdivisionFactor","float");c.attributes.add("uv0",
"vec2");c.attributes.add("auxpos1","vec3");c.attributes.add("auxpos2","vec3");c.varyings.add("vColor","vec4");c.varyings.add("vpos","vec3");c.varyings.add("linearDepth","float");x.multipassTerrainEnabled&&c.varyings.add("depth","float");const m=x.falloffEnabled,f=x.innerColorEnabled;f&&c.varyings.add("vLineDistance","float");m&&c.varyings.add("vLineDistanceNorm","float");x.falloffEnabled&&c.fragment.uniforms.add("falloff","float");x.innerColorEnabled&&(c.fragment.uniforms.add("innerColor","vec4"),
c.fragment.uniforms.add("innerWidth","float"));c.vertex.code.add(g.glsl`
		#define PERPENDICULAR(v) vec2(v.y, -v.x);
		#define ISOUTSIDE (left.x * right.y - left.y * right.x)*uv0.y > 0.0

		float interp(float ncp, vec4 a, vec4 b) {
			return (-ncp - a.z) / (b.z - a.z);
		}

		vec2 rotate(vec2 v, float a) {
			float s = sin(a);
			float c = cos(a);
			mat2 m = mat2(c, -s, s, c);
			return m * v;
		}
`);c.vertex.code.add(g.glsl`
    vec4 projectAndScale(vec4 pos) {
      vec4 posNdc = proj * pos;

      // Note that posNdc is in -1:1, scaling by screenSize converts this to a coordinate system
      // that is twice scaled (going from -size:size).
      posNdc.xy *= screenSize / posNdc.w;
      return posNdc;
    }
`);c.vertex.code.add(g.glsl`
    void clipAndTransform(inout vec4 pos, inout vec4 prev, inout vec4 next, in bool isStartVertex) {
      float vnp = cameraNearFar[0] * 0.99;

      //current pos behind ncp --> we need to clip
      if(pos.z > -cameraNearFar[0]) {
        if (!isStartVertex) {
          //previous in front of ncp
          if(prev.z < -cameraNearFar[0]) {
            pos = mix(prev, pos, interp(vnp, prev, pos));
            next = pos;
          } else {
            pos = vec4(0.0, 0.0, 0.0, 1.0);
          }
        }
        //next in front of ncp
        if(isStartVertex) {
          if(next.z < -cameraNearFar[0]) {
            pos = mix(pos, next, interp(vnp, pos, next));
            prev = pos;
          } else {
            pos = vec4(0.0, 0.0, 0.0, 1.0);
          }
        }
      } else {
        //current position visible
        //previous behind ncp
        if (prev.z > -cameraNearFar[0]) {
          prev = mix(pos, prev, interp(vnp, pos, prev));
        }
        //next behind ncp
        if (next.z > -cameraNearFar[0]) {
          next = mix(next, pos, interp(vnp, next, pos));
        }
      }

      ${x.multipassTerrainEnabled?"depth \x3d pos.z;":""}
      linearDepth = (-pos.z - cameraNearFar[0]) / (cameraNearFar[1] - cameraNearFar[0]);

      pos = projectAndScale(pos);
      next = projectAndScale(next);
      prev = projectAndScale(prev);
    }
`);c.vertex.code.add(g.glsl`
  void main(void) {
    float coverage = 1.0;
    vpos = position;

    // Check for special value of uv0.y which is used by the Renderer when graphics
    // are removed before the VBO is recompacted. If this is the case, then we just
    // project outside of clip space.
    if (uv0.y == 0.0) {
      // Project out of clip space
      gl_Position = vec4(1e038, 1e038, 1e038, 1.0);
    }
    else {
      bool isStartVertex = abs(abs(uv0.y)-3.0) == 1.0;
      bool isJoin = abs(uv0.y)-3.0 < 0.0;

      float lineWidth = getSize() * pixelRatio;

      // convert sub-pixel coverage to alpha
      if (lineWidth < 1.0) {
        coverage = lineWidth;
        lineWidth = 1.0;
      }else{
        // Ribbon lines cannot properly render non-integer sizes. Round width to integer size if
        // larger than one for better quality. Note that we do render < 1 pixels more or less correctly
        // so we only really care to round anything larger than 1.
        lineWidth = floor(lineWidth + 0.5);
      }

      vec4 pos  = view * vec4(position.xyz, 1.0);
      vec4 prev = view * vec4(auxpos1.xyz, 1.0);
      vec4 next = view * vec4(auxpos2.xyz, 1.0);

      clipAndTransform(pos, prev, next, isStartVertex);

      vec2 left = (pos.xy - prev.xy);
      vec2 right = (next.xy - pos.xy);

      float leftLen = length(left);
      float rightLen = length(right);
  `);x.stippleEnabled&&c.vertex.code.add(g.glsl`
      // uv0.x is either 0 or 1, depending on whether this is considered the start of a line segment
      // or the end. If start, then use pos->next, otherwise use prev->pos to define the line segment
      // vector
      vec4 stippleSegmentInfo = mix(vec4(pos.xy, right), vec4(prev.xy, left), uv0.x);
      vec2 stippleSegmentOrigin = stippleSegmentInfo.xy;

      // Scale s.t. it's in units of stipple pattern size.
      vec2 stippleSegmentDirection = stippleSegmentInfo.zw;
    `);c.vertex.code.add(g.glsl`
    left = (leftLen > 0.001) ? left/leftLen : vec2(0.0, 0.0);
    right = (rightLen > 0.001) ? right/rightLen : vec2(0.0, 0.0);

    vec2 capDisplacementDir = vec2(0, 0);
    vec2 joinDisplacementDir = vec2(0, 0);
    float displacementLen = lineWidth;

    if (isJoin) {

      // JOIN handling ---------------------------------------------------
      // determine if vertex is on the "outside or "inside" of the join
      bool isOutside = ISOUTSIDE;

      // compute miter join position first
      joinDisplacementDir = normalize(left + right);
      joinDisplacementDir = PERPENDICULAR(joinDisplacementDir);

      // compute miter stretch
      if (leftLen > 0.001 && rightLen > 0.001) {
        float nDotSeg = dot(joinDisplacementDir, left);
        displacementLen /= length(nDotSeg * left - joinDisplacementDir);

        // limit displacement of inner vertices
        if (!isOutside) {
          displacementLen = min(displacementLen, min(leftLen, rightLen)/abs(nDotSeg));
        }
      }

      if (isOutside && (displacementLen > miterLimit * lineWidth)) {
    `);x.roundJoins?c.vertex.code.add(g.glsl`
        vec2 startDir;
        vec2 endDir;

        if (leftLen < 0.001) {
          startDir = right;
        }
        else{
          startDir = left;
        }
        startDir = normalize(startDir);
        startDir = PERPENDICULAR(startDir);

        if (rightLen < 0.001) {
          endDir = left;
        }
        else{
          endDir = right;
        }
        endDir = normalize(endDir);
        endDir = PERPENDICULAR(endDir);

        float rotationAngle = acos(clamp(dot(startDir, endDir), -1.0, 1.0));
        joinDisplacementDir = rotate(startDir, -sign(uv0.y) * subdivisionFactor * rotationAngle);
      `):c.vertex.code.add(g.glsl`
        // convert to bevel join if miterLimit is exceeded
        if (leftLen < 0.001) {
          joinDisplacementDir = right;
        }
        else if (rightLen < 0.001) {
          joinDisplacementDir = left;
        }
        else {
          joinDisplacementDir = isStartVertex ? right : left;
        }
        joinDisplacementDir = normalize(joinDisplacementDir);
        joinDisplacementDir = PERPENDICULAR(joinDisplacementDir);
  `);c.vertex.code.add(g.glsl`
        displacementLen = lineWidth;
      }
    } else {
    // CAP handling ---------------------------------------------------
    if (leftLen < 0.001) {
      joinDisplacementDir = right;
    }
    else if (rightLen < 0.001) {
      joinDisplacementDir = left;
    }
    else {
      joinDisplacementDir = isStartVertex ? right : left;
    }
    joinDisplacementDir = normalize(joinDisplacementDir);
    joinDisplacementDir = PERPENDICULAR(joinDisplacementDir);
    displacementLen = lineWidth;

    capDisplacementDir = isStartVertex ? -right : left;
  `);x.roundCaps?c.vertex.code.add(g.glsl`
    float angle = subdivisionFactor*PI*0.5;
    joinDisplacementDir *= cos(angle);
    capDisplacementDir *= sin(angle);
    `):c.vertex.code.add(g.glsl`
    capDisplacementDir *= subdivisionFactor;
    `);c.vertex.code.add(g.glsl`
  }

  // Displacement (in pixels) caused by join/or cap
  vec2 dpos = joinDisplacementDir * sign(uv0.y) * displacementLen + capDisplacementDir * displacementLen;

  ${m||f?g.glsl`float lineDist = lineWidth * sign(uv0.y) * pos.w;`:""}

  ${f?g.glsl`vLineDistance = lineDist;`:""}
  ${m?g.glsl`vLineDistanceNorm = lineDist / lineWidth;`:""}

  pos.xy += dpos;
  `);x.stippleEnabled&&(c.vertex.code.add(g.glsl`
    {
      // Compute the stipple pattern UV coordinate from the actual position, based on the origin
      // and direction of the line segment on which the stipple pattern is based.

      // Project the vector from the origin of the segment to the vertex onto the line segment.
      // Note the 0.5 factor due to projected positions being at twice the screen size scale (see projectAndScale)
      vec2 posVec = pos.xy - stippleSegmentOrigin;

      float stippleSegmentDirectionLength = length(stippleSegmentDirection);
    `),x.stippleIntegerRepeatsEnabled&&c.vertex.code.add(g.glsl`
      float numberOfPatternRepeats = stippleSegmentDirectionLength * 0.5 * stipplePatternPixelSizeInv;
      float roundedNumberOfPatternRepeats = floor(numberOfPatternRepeats);
      stipplePatternUvMax = roundedNumberOfPatternRepeats;
      `),c.vertex.code.add(g.glsl`
      if (stippleSegmentDirectionLength >= 0.001) {
        // Project the vertex position onto the line segment.
        float projectedLength = dot(stippleSegmentDirection, posVec) / stippleSegmentDirectionLength * 0.5;
     ${x.stippleIntegerRepeatsEnabled?"float wholeNumberOfRepeatsScale \x3d roundedNumberOfPatternRepeats / numberOfPatternRepeats;":"float wholeNumberOfRepeatsScale \x3d 1.0;"}
        stipplePatternUv = projectedLength * wholeNumberOfRepeatsScale * stipplePatternPixelSizeInv * pos.w;
        } else {
          stipplePatternUv = 1.0;
        }
      }
    `));c.vertex.code.add(g.glsl`
      // Convert back into NDC
      pos.xy = pos.xy / screenSize * pos.w;

      vColor = getColor();
      vColor.a *= coverage;

      gl_Position = pos;
    }
  }
  `);x.multipassTerrainEnabled&&(c.fragment.include(t.ReadLinearDepth),c.include(b.multipassTerrainTest,x));c.include(v.Slice,x);c.fragment.uniforms.add("intrinsicColor","vec4");c.fragment.include(A.ColorConversion);c.fragment.code.add(g.glsl`
  void main() {
    discardBySlice(vpos);
    ${x.multipassTerrainEnabled?"terrainDepthTest(gl_FragCoord, depth);":""}
    float stippleAlpha = getStippleAlpha();
    discardByStippleAlpha(stippleAlpha, stippleAlphaColorDiscard);

    vec4 color = intrinsicColor * vColor;
  `);x.innerColorEnabled&&(c.fragment.uniforms.add("pixelRatio","float"),c.fragment.code.add(g.glsl`
    float distToInner = abs(vLineDistance * gl_FragCoord.w) - innerWidth;
    float innerAA = clamp(0.5 - distToInner, 0.0, 1.0);
    float innerAlpha = innerColor.a + color.a * (1.0 - innerColor.a);
    color = mix(color, vec4(innerColor.rgb, innerAlpha), innerAA);
    `));c.fragment.code.add(g.glsl`
    vec4 finalColor = blendStipple(color, stippleAlpha);
  `);x.falloffEnabled&&c.fragment.code.add(g.glsl`
    finalColor.a *= pow(max(0.0, 1.0 - abs(vLineDistanceNorm * gl_FragCoord.w)), falloff);
    `);c.fragment.code.add(g.glsl`
    if (finalColor.a < ${g.glsl.float(p.symbolAlphaCutoff)}) {
      discard;
    }

    ${7===x.output?g.glsl`gl_FragColor = vec4(finalColor.a);`:""}
    ${0===x.output?g.glsl`gl_FragColor = highlightSlice(finalColor, vpos);`:""}
    ${0===x.output&&x.OITEnabled?"gl_FragColor \x3d premultiplyAlpha(gl_FragColor);":""}
    ${4===x.output?g.glsl`gl_FragColor = vec4(1.0);`:""}
    ${1===x.output?g.glsl`outputDepth(linearDepth);`:""}
  }
  `);return c}var w=Object.freeze({__proto__:null,build:C});a.RibbonLineShader=w;a.build=C})},"esri/views/3d/webgl-engine/core/shaderModules/ShaderBuilder":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../../../../../core/Logger"],function(a,g,r){const A=r.getLogger("esri.views.3d.webgl-engine.core.shaderModules.shaderBuilder");r=function(){function C(){this.includedModules=new Map}C.prototype.include=function(w,x){this.includedModules.has(w)?this.includedModules.get(w)!==
x&&A.error("Trying to include shader module multiple times with different sets of options."):(this.includedModules.set(w,x),w(this.builder,x))};return C}();let v=function(C){function w(){var x=C.apply(this,arguments)||this;x.vertex=new b;x.fragment=new b;x.attributes=new k;x.varyings=new n;x.extensions=new l;x.constants=new q;return x}g._inheritsLoose(w,C);w.prototype.generateSource=function(x){const c=this.extensions.generateSource(x),m=this.attributes.generateSource(x),f=this.varyings.generateSource();
var e="vertex"===x?this.vertex:this.fragment;const d=e.uniforms.generateSource(),h=e.code.generateSource();x="vertex"===x?"precision highp float;\nprecision highp sampler2D;":"#ifdef GL_FRAGMENT_PRECISION_HIGH\n  precision highp float;\n  precision highp sampler2D;\n#else\n  precision mediump float;\n  precision mediump sampler2D;\n#endif";e=this.constants.generateSource().concat(e.constants.generateSource());return`
${c.join("\n")}

${x}

${e.join("\n")}

${d.join("\n")}

${m.join("\n")}

${f.join("\n")}

${h.join("\n")}`};g._createClass(w,[{key:"builder",get:function(){return this}}]);return w}(r),t=function(){function C(){this._entries=[];this._set=new Set}var w=C.prototype;w.add=function(x,c,m){const f=`${x}_${c}_${m}`;this._set.has(f)||(this._entries.push([x,c,m]),this._set.add(f));return this};w.generateSource=function(){return this._entries.map(x=>{var c=x[2];return`uniform ${x[1]} ${x[0]}${c?`[${c}]`:""};`})};return C}(),p=function(){function C(){this._entries=[]}var w=C.prototype;w.add=function(x){this._entries.push(x)};
w.generateSource=function(){return this._entries};return C}(),b=function(C){function w(){var x=C.apply(this,arguments)||this;x.uniforms=new t;x.code=new p;x.constants=new q;return x}g._inheritsLoose(w,C);g._createClass(w,[{key:"builder",get:function(){return this}}]);return w}(r),k=function(){function C(){this._entries=[]}var w=C.prototype;w.add=function(x,c){this._entries.push([x,c])};w.generateSource=function(x){return"fragment"===x?[]:this._entries.map(c=>`attribute ${c[1]} ${c[0]};`)};return C}(),
n=function(){function C(){this._entries=[]}var w=C.prototype;w.add=function(x,c){this._entries.push([x,c])};w.generateSource=function(){return this._entries.map(x=>`varying ${x[1]} ${x[0]};`)};return C}(),l=function(){function C(){this._entries=new Set}var w=C.prototype;w.add=function(x){this._entries.add(x)};w.generateSource=function(x){const c="vertex"===x?C.ALLOWLIST_VERTEX:C.ALLOWLIST_FRAGMENT;return Array.from(this._entries).filter(m=>c.includes(m)).map(m=>`#extension ${m} : enable`)};return C}();
l.ALLOWLIST_FRAGMENT=["GL_EXT_shader_texture_lod","GL_OES_standard_derivatives"];l.ALLOWLIST_VERTEX=[];let q=function(){function C(){this._entries=[]}var w=C.prototype;w.add=function(x,c,m){let f="ERROR_CONSTRUCTOR_STRING";switch(c){case "float":f=C.numberToFloatStr(m);break;case "int":f=C.numberToIntStr(m);break;case "bool":f=m.toString();break;case "vec2":f=`vec2(${C.numberToFloatStr(m[0])},\
                            ${C.numberToFloatStr(m[1])})`;break;case "vec3":f=`vec3(${C.numberToFloatStr(m[0])},\
                            ${C.numberToFloatStr(m[1])},\
                            ${C.numberToFloatStr(m[2])})`;break;case "vec4":f=`vec4(${C.numberToFloatStr(m[0])},\
                            ${C.numberToFloatStr(m[1])},\
                            ${C.numberToFloatStr(m[2])},\
                            ${C.numberToFloatStr(m[3])})`;break;case "ivec2":f=`ivec2(${C.numberToIntStr(m[0])},\
                             ${C.numberToIntStr(m[1])})`;break;case "ivec3":f=`ivec3(${C.numberToIntStr(m[0])},\
                             ${C.numberToIntStr(m[1])},\
                             ${C.numberToIntStr(m[2])})`;break;case "ivec4":f=`ivec4(${C.numberToIntStr(m[0])},\
                             ${C.numberToIntStr(m[1])},\
                             ${C.numberToIntStr(m[2])},\
                             ${C.numberToIntStr(m[3])})`;break;case "bvec2":f=`bvec2(${m[0].toString()},\
                             ${m[1].toString()})`;break;case "bvec3":f=`bvec3(${m[0].toString()},\
                             ${m[1].toString()},\
                             ${m[2].toString()})`;break;case "bvec4":f=`bvec4(${m[0].toString()},\
                             ${m[1].toString()},\
                             ${m[2].toString()},\
                             ${m[3].toString()})`;break;case "mat2":case "mat3":case "mat4":f=`${c}(${Array.prototype.map.call(m,e=>C.numberToFloatStr(e)).join(", ")})`}this._entries.push(`const ${c} ${x} = ${f};`);return this};C.numberToIntStr=function(x){return x.toFixed(0)};C.numberToFloatStr=function(x){return Number.isInteger(x)?x.toFixed(1):x.toString()};w.generateSource=function(){return Array.from(this._entries)};return C}();a.Code=p;a.Includes=r;a.ShaderBuilder=v;a.Stage=b;Object.defineProperty(a,
"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl":function(){define(["exports","../../shaderModules/interfaces"],function(a,g){a.ColorConversion=function(r){r.code.add(g.glsl`
    vec4 premultiplyAlpha(vec4 v) {
      return vec4(v.rgb * v.a, v.a);
    }

    // Note: the min in the last line has been added to fix an instability in chrome.
    // See https://devtopia.esri.com/WebGIS/arcgis-js-api/issues/23911
    // With proper floating point handling, the value could never be >1.
    vec3 rgb2hsv(vec3 c) {
      vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);
      vec4 p = c.g < c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy);
      vec4 q = c.r < p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx);

      float d = q.x - min(q.w, q.y);
      float e = 1.0e-10;
      return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), min(d / (q.x + e), 1.0), q.x);
    }

    vec3 hsv2rgb(vec3 c) {
      vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);
      vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);
      return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);
    }

    float rgb2v(vec3 c) {
      return max(c.x, max(c.y, c.z));
    }
  `)};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderLibrary/output/ReadLinearDepth.glsl":function(){define(["exports","../../shaderModules/interfaces","../util/RgbaFloatEncoding.glsl"],function(a,g,r){a.ReadLinearDepth=function(A){A.include(r.RgbaFloatEncoding);A.code.add(g.glsl`
    float linearDepthFromFloat(float depth, vec2 nearFar) {
      return -(depth * (nearFar[1] - nearFar[0]) + nearFar[0]);
    }

    float linearDepthFromTexture(sampler2D depthTex, vec2 uv, vec2 nearFar) {
      return linearDepthFromFloat(rgba2float(texture2D(depthTex, uv)), nearFar);
    }
  `)};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderLibrary/util/RgbaFloatEncoding.glsl":function(){define(["exports","../../shaderModules/interfaces"],function(a,g){a.RgbaFloatEncoding=function(r){r.code.add(g.glsl`
    // This is the maximum float value representable as 32bit fixed point,
    // it is rgba2float(vec4(1)) inlined.
    const float MAX_RGBA_FLOAT =
      255.0 / 256.0 +
      255.0 / 256.0 / 256.0 +
      255.0 / 256.0 / 256.0 / 256.0 +
      255.0 / 256.0 / 256.0 / 256.0 / 256.0;

    // Factors to convert to fixed point, i.e. factors (256^0, 256^1, 256^2, 256^3)
    const vec4 FIXED_POINT_FACTORS = vec4(1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0);

    vec4 float2rgba(const float value) {
      // Make sure value is in the domain we can represent
      float valueInValidDomain = clamp(value, 0.0, MAX_RGBA_FLOAT);

      // Decompose value in 32bit fixed point parts represented as
      // uint8 rgba components. Decomposition uses the fractional part after multiplying
      // by a power of 256 (this removes the bits that are represented in the previous
      // component) and then converts the fractional part to 8bits.
      vec4 fixedPointU8 = floor(fract(valueInValidDomain * FIXED_POINT_FACTORS) * 256.0);

      // Convert uint8 values (from 0 to 255) to floating point representation for
      // the shader
      const float toU8AsFloat = 1.0 / 255.0;

      return fixedPointU8 * toU8AsFloat;
    }

    // Factors to convert rgba back to float
    const vec4 RGBA_2_FLOAT_FACTORS = vec4(
      255.0 / (256.0),
      255.0 / (256.0 * 256.0),
      255.0 / (256.0 * 256.0 * 256.0),
      255.0 / (256.0 * 256.0 * 256.0 * 256.0)
    );

    float rgba2float(vec4 rgba) {
      // Convert components from 0->1 back to 0->255 and then
      // add the components together with their corresponding
      // fixed point factors, i.e. (256^1, 256^2, 256^3, 256^4)
      return dot(rgba, RGBA_2_FLOAT_FACTORS);
    }
  `)};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderLibrary/util/AlphaDiscard.glsl":function(){define(["exports","../../shaderModules/interfaces"],function(a,g){a.DiscardOrAdjustAlpha=function(r,A){const v=r.fragment;switch(A.alphaDiscardMode){case 0:v.code.add(g.glsl`
        #define discardOrAdjustAlpha(color) { if (color.a < ${g.glsl.float(.001)}) { discard; } }
      `);break;case 1:v.code.add(g.glsl`
        void discardOrAdjustAlpha(inout vec4 color) {
          color.a = 1.0;
        }
      `);break;case 2:v.uniforms.add("textureAlphaCutoff","float");v.code.add(g.glsl`
        #define discardOrAdjustAlpha(color) { if (color.a < textureAlphaCutoff) { discard; } else { color.a = 1.0; } }
      `);break;case 3:r.fragment.uniforms.add("textureAlphaCutoff","float"),r.fragment.code.add(g.glsl`
        #define discardOrAdjustAlpha(color) { if (color.a < textureAlphaCutoff) { discard; } }
      `)}};a.defaultMaskAlphaCutoff=.1;a.symbolAlphaCutoff=.001;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderLibrary/attributes/RibbonVertexPosition.glsl":function(){define(["exports","../../shaderModules/interfaces"],function(a,g){a.RibbonVertexPosition=function(r,A){r.vertex.uniforms.add("intrinsicWidth","float");A.vvSize?(r.attributes.add("sizeFeatureAttribute","float"),r.vertex.uniforms.add("vvSizeMinSize","vec3"),r.vertex.uniforms.add("vvSizeMaxSize",
"vec3"),r.vertex.uniforms.add("vvSizeOffset","vec3"),r.vertex.uniforms.add("vvSizeFactor","vec3"),r.vertex.code.add(g.glsl`
    float getSize() {
      return intrinsicWidth * clamp(vvSizeOffset + sizeFeatureAttribute * vvSizeFactor, vvSizeMinSize, vvSizeMaxSize).x;
    }
    `)):(r.attributes.add("size","float"),r.vertex.code.add(g.glsl`
    float getSize(){
      return intrinsicWidth * size;
    }
    `));A.vvOpacity?(r.attributes.add("opacityFeatureAttribute","float"),r.vertex.constants.add("vvOpacityNumber","int",8),r.vertex.code.add(g.glsl`
    uniform float vvOpacityValues[vvOpacityNumber];
    uniform float vvOpacityOpacities[vvOpacityNumber];

    float interpolateOpacity( float value ){
      if (value <= vvOpacityValues[0]) {
        return vvOpacityOpacities[0];
      }

      for (int i = 1; i < vvOpacityNumber; ++i) {
        if (vvOpacityValues[i] >= value) {
          float f = (value - vvOpacityValues[i-1]) / (vvOpacityValues[i] - vvOpacityValues[i-1]);
          return mix(vvOpacityOpacities[i-1], vvOpacityOpacities[i], f);
        }
      }

      return vvOpacityOpacities[vvOpacityNumber - 1];
    }

    vec4 applyOpacity( vec4 color ){
      return vec4(color.xyz, interpolateOpacity(opacityFeatureAttribute));
    }
    `)):r.vertex.code.add(g.glsl`
    vec4 applyOpacity( vec4 color ){
      return color;
    }
    `);A.vvColor?(r.attributes.add("colorFeatureAttribute","float"),r.vertex.constants.add("vvColorNumber","int",8),r.vertex.code.add(g.glsl`
    uniform float vvColorValues[vvColorNumber];
    uniform vec4 vvColorColors[vvColorNumber];

    vec4 interpolateColor( float value ) {
      if (value <= vvColorValues[0]) {
        return vvColorColors[0];
      }

      for (int i = 1; i < vvColorNumber; ++i) {
        if (vvColorValues[i] >= value) {
          float f = (value - vvColorValues[i-1]) / (vvColorValues[i] - vvColorValues[i-1]);
          return mix(vvColorColors[i-1], vvColorColors[i], f);
        }
      }

      return vvColorColors[vvColorNumber - 1];
    }

    vec4 getColor(){
      return applyOpacity(interpolateColor(colorFeatureAttribute));
    }
    `)):(r.attributes.add("color","vec4"),r.vertex.code.add(g.glsl`
    vec4 getColor(){
      return applyOpacity(color);
    }
    `))};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderLibrary/output/OutputDepth.glsl":function(){define(["exports","../../shaderModules/interfaces","../util/RgbaFloatEncoding.glsl"],function(a,g,r){a.OutputDepth=function(A,v){A.fragment.include(r.RgbaFloatEncoding);3===v.output?(A.extensions.add("GL_OES_standard_derivatives"),A.fragment.code.add(g.glsl`
      float _calculateFragDepth(const in float depth) {
        // calc polygon offset
        const float SLOPE_SCALE = 2.0;
        const float BIAS = 2.0 * .000015259;    // 1 / (2^16 - 1)
        float m = max(abs(dFdx(depth)), abs(dFdy(depth)));
        float result = depth + SLOPE_SCALE * m + BIAS;
        return clamp(result, .0, .999999);
      }

      void outputDepth(float _linearDepth) {
        gl_FragColor = float2rgba(_calculateFragDepth(_linearDepth));
      }
    `)):1===v.output&&A.fragment.code.add(g.glsl`
      void outputDepth(float _linearDepth) {
        gl_FragColor = float2rgba(_linearDepth);
      }
    `)};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderLibrary/shading/LineStipple.glsl":function(){define(["exports","../../shaderModules/interfaces"],function(a,g){a.LineStipple=function(r,A){r.constants.add("stippleAlphaColorDiscard","float",.001);r.constants.add("stippleAlphaHighlightDiscard","float",.5);A.stippleEnabled?(r.vertex.uniforms.add("stipplePatternPixelSizeInv","float"),A.stippleUVMaxEnabled&&r.varyings.add("stipplePatternUvMax","float"),
r.varyings.add("stipplePatternUv","float"),r.fragment.uniforms.add("stipplePatternTexture","sampler2D"),A.stippleOffColorEnabled&&r.fragment.uniforms.add("stippleOffColor","vec4"),r.fragment.code.add(g.glsl`
  float getStippleAlpha() {
    float stipplePatternUvClamped = stipplePatternUv * gl_FragCoord.w;
    ${A.stippleUVMaxEnabled?"stipplePatternUvClamped \x3d clamp(stipplePatternUvClamped, 0.0, stipplePatternUvMax);":""}

    return texture2D(stipplePatternTexture, vec2(mod(stipplePatternUvClamped, 1.0), 0.5)).a;
  }`),A.stippleOffColorEnabled?r.fragment.code.add(g.glsl`
    #define discardByStippleAlpha(stippleAlpha, threshold) {}
    #define blendStipple(color, stippleAlpha) mix(color, stippleOffColor, stippleAlpha)
    `):r.fragment.code.add(g.glsl`
    #define discardByStippleAlpha(stippleAlpha, threshold) if (stippleAlpha < threshold) { discard; }
    #define blendStipple(color, stippleAlpha) vec4(color.rgb, color.a * stippleAlpha)
    `)):r.fragment.code.add(g.glsl`
  float getStippleAlpha() { return 1.0; }

  #define discardByStippleAlpha(_stippleAlpha_, _threshold_) {}
  #define blendStipple(color, _stippleAlpha_) color
  `)};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderLibrary/shading/PiUtils.glsl":function(){define(["exports","../../shaderModules/interfaces"],function(a,g){a.PiUtils=function(r){r.vertex.code.add(g.glsl`
    const float PI = 3.141592653589793;
  `);r.fragment.code.add(g.glsl`
    const float PI = 3.141592653589793;
    const float LIGHT_NORMALIZATION = 1.0 / PI;
    const float INV_PI = 0.3183098861837907;
    const float HALF_PI = 1.570796326794897;
    `)};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/interactive/visualElements/LaserlineVisualElement":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../chunks/vec3f64 ../../../../chunks/vec3 ../../support/geometryUtils ./VisualElement ../../../../chunks/Laserlines.glsl ../../support/LaserLineRenderer".split(" "),function(a,g,r,A,v,t,p,b,k){p=function(l){function q(w){var x=l.call(this,w.view)||this;x._angleCutoff=b.defaultAngleCutoff;
x._style={};x._heightManifoldTarget=A.create();x._heightManifoldEnabled=!1;x._intersectsLine=t.lineSegment.create();x._intersectsLineEnabled=!1;x._intersectsLineInfinite=!1;x._lineVerticalPlaneSegment=null;x._pathVerticalPlaneBuffers=null;x._pointDistanceLine=null;x.applyProps(w);return x}g._inheritsLoose(q,l);var C=q.prototype;C.createResources=function(){this.ensureRenderer()};C.destroyResources=function(){this.disposeRenderer()};C.updateVisibility=function(){this.syncHeightManifold();this.syncIntersectsLine();
this.syncPathVerticalPlane();this.syncLineVerticalPlane();this.syncPointDistance()};C.syncRenderer=function(){this.attached&&(this._intersectsLineEnabled||this._heightManifoldEnabled||r.isSome(this._pointDistanceLine)||r.isSome(this._pathVerticalPlaneBuffers))?this.ensureRenderer():this.disposeRenderer()};C.ensureRenderer=function(){r.isSome(this.renderer)||(this.renderer=new k.LaserLineRenderer(this.view.renderCoordsHelper,void 0,{contrastControlEnabled:!0}),this.syncStyle(),this.syncHeightManifold(),
this.syncIntersectsLine(),this.syncIntersectsLineInfinite(),this.syncPathVerticalPlane(),this.syncLineVerticalPlane(),this.syncPointDistance(),this.syncAngleCutoff(),this.view._stage&&this.view._stage.addRenderPlugin(this.renderer.renderSlots,this.renderer))};C.syncStyle=function(){r.isNone(this.renderer)||(this.renderer.setParameterValues(this._style),null!=this._style.intersectsLineRadius&&(this.renderer.intersectsLineRadius=this._style.intersectsLineRadius))};C.syncAngleCutoff=function(){r.isNone(this.renderer)||
this.renderer.setParameterValues({angleCutoff:this._angleCutoff})};C.syncHeightManifold=function(){r.isNone(this.renderer)||(this.renderer.heightManifoldEnabled=this._heightManifoldEnabled&&this.visible,this._heightManifoldEnabled&&(this.renderer.heightManifoldTarget=this._heightManifoldTarget))};C.syncIntersectsLine=function(){r.isNone(this.renderer)||(this.renderer.intersectsLineEnabled=this._intersectsLineEnabled&&this.visible,this._intersectsLineEnabled&&(this.renderer.intersectsLineSegment=this._intersectsLine))};
C.syncIntersectsLineInfinite=function(){r.isNone(this.renderer)||(this.renderer.intersectsLineInfinite=this._intersectsLineInfinite)};C.syncPathVerticalPlane=function(){r.isNone(this.renderer)||(this.renderer.pathVerticalPlaneEnabled=r.isSome(this._pathVerticalPlaneBuffers)&&this.visible,r.isSome(this._pathVerticalPlaneBuffers)&&(this.renderer.pathVerticalPlaneBuffers=this._pathVerticalPlaneBuffers))};C.syncLineVerticalPlane=function(){r.isNone(this.renderer)||(this.renderer.lineVerticalPlaneEnabled=
r.isSome(this._lineVerticalPlaneSegment)&&this.visible,r.isSome(this._lineVerticalPlaneSegment)&&(this.renderer.lineVerticalPlaneSegment=this._lineVerticalPlaneSegment))};C.syncPointDistance=function(){r.isNone(this.renderer)||(this.renderer.pointDistanceEnabled=r.isSome(this._pointDistanceLine)&&this.visible,r.isSome(this._pointDistanceLine)&&(this.renderer.pointDistanceOrigin=this._pointDistanceLine.origin,this.renderer.pointDistanceTarget=this._pointDistanceLine.target))};C.disposeRenderer=function(){r.isSome(this.renderer)&&
this.view._stage&&(this.view._stage.removeRenderPlugin(this.renderer),this.renderer=null)};g._createClass(q,[{key:"testData",get:function(){return this.renderer}},{key:"angleCutoff",get:function(){return this._angleCutoff},set:function(w){this._angleCutoff!==w&&(this._angleCutoff=w,this.syncAngleCutoff())}},{key:"style",get:function(){return this._style},set:function(w){this._style=w;this.syncStyle()}},{key:"heightManifoldTarget",get:function(){return this._heightManifoldEnabled?this._heightManifoldTarget:
null},set:function(w){r.isSome(w)?(v.copy(this._heightManifoldTarget,w),this._heightManifoldEnabled=!0):this._heightManifoldEnabled=!1;this.syncRenderer();this.syncHeightManifold()}},{key:"intersectsWorldUpAtLocation",set:function(w){if(r.isNone(w))this.intersectsLine=null;else{var x=this.view.renderCoordsHelper.worldUpAtPosition(w,n);this.intersectsLine=t.lineSegment.fromValues(w,x);this.intersectsLineInfinite=!0}}},{key:"intersectsLine",get:function(){return this._intersectsLineEnabled?this._intersectsLine:
null},set:function(w){r.isSome(w)?(t.lineSegment.copy(w,this._intersectsLine),this._intersectsLineEnabled=!0):this._intersectsLineEnabled=!1;this.syncIntersectsLine();this.syncRenderer()}},{key:"intersectsLineInfinite",get:function(){return this._intersectsLineInfinite},set:function(w){this._intersectsLineInfinite=w;this.syncIntersectsLineInfinite()}},{key:"lineVerticalPlaneSegment",get:function(){return this._lineVerticalPlaneSegment},set:function(w){this._lineVerticalPlaneSegment=r.isSome(w)?t.lineSegment.copy(w):
null;this.syncLineVerticalPlane();this.syncRenderer()}},{key:"pathVerticalPlane",get:function(){return this._pathVerticalPlaneBuffers},set:function(w){this._pathVerticalPlaneBuffers=w;this.syncPathVerticalPlane();this.syncLineVerticalPlane();this.syncPointDistance();this.syncRenderer()}},{key:"pointDistanceLine",get:function(){return this._pointDistanceLine},set:function(w){this._pointDistanceLine=r.isSome(w)?{origin:A.clone(w.origin),target:A.clone(w.target)}:null;this.syncPointDistance();this.syncRenderer()}}]);
return q}(p.VisualElement);const n=A.create();a.LaserlineVisualElement=p;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/interactive/visualElements/VisualElement":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers"],function(a,g){let r=function(){function A(t){this._resourcesCreated=this._attached=!1;this._visible=!0;this.view=t;this.view.watch("ready",p=>{this._resourcesCreated&&(p?this._createResources():this._destroyResources())})}var v=A.prototype;v.applyProps=
function(t){let p=!1;for(const b in t)b in this?"attached"===b?p=t[b]:this[b]=t[b]:console.error("Cannot set unknown property",b);this.attached=p};v.destroy=function(){this.attached=!1};v._createResources=function(){this.createResources();this._resourcesCreated=!0;this.visible||this.updateVisibility(!1)};v._destroyResources=function(){this.destroyResources();this._resourcesCreated=!1};g._createClass(A,[{key:"attached",get:function(){return this._attached},set:function(t){t!==this._attached&&this.view._stage&&
((this._attached=t)&&!this._resourcesCreated?this._createResources():!this._attached&&this._resourcesCreated&&this._destroyResources())}},{key:"visible",get:function(){return this._visible},set:function(t){t!==this._visible&&(this._visible=t,this.attached&&this.updateVisibility(t))}}]);return A}();a.VisualElement=r;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/chunks/Laserlines.glsl":function(){define("exports ../core/mathUtils ../views/3d/webgl-engine/core/shaderModules/interfaces ../views/3d/webgl-engine/core/shaderModules/ShaderBuilder ../views/3d/webgl-engine/core/shaderLibrary/ScreenSpacePass ../views/3d/webgl-engine/core/shaderLibrary/Laserline.glsl".split(" "),
function(a,g,r,A,v,t){function p(k){const n=new A.ShaderBuilder;n.extensions.add("GL_OES_standard_derivatives");n.include(v.ScreenSpacePass);n.include(t.Laserline,k);n.fragment.uniforms.add("angleCutoff","vec2");n.fragment.uniforms.add("globalAlpha","float");k.heightManifoldEnabled&&n.fragment.uniforms.add("heightPlane","vec4");k.pointDistanceEnabled&&n.fragment.uniforms.add("pointDistanceSphere","vec4");k.lineVerticalPlaneEnabled&&n.fragment.uniforms.add("lineVerticalPlane","vec4").add("lineVerticalStart",
"vec3").add("lineVerticalEnd","vec3");(k.heightManifoldEnabled||k.pointDistanceEnabled||k.lineVerticalPlaneEnabled)&&n.fragment.uniforms.add("maxPixelDistance","float");k.intersectsLineEnabled&&n.fragment.uniforms.add("intersectsLineStart","vec3").add("intersectsLineEnd","vec3").add("intersectsLineDirection","vec3").add("intersectsLineRadius","float").add("perScreenPixelRatio","float");(k.lineVerticalPlaneEnabled||k.heightManifoldEnabled)&&n.fragment.code.add(r.glsl`
      float planeDistancePixels(vec4 plane, vec3 pos) {
        float dist = dot(plane.xyz, pos) + plane.w;
        float width = fwidth(dist);
        dist /= min(width, maxPixelDistance);
        return abs(dist);
      }`);k.pointDistanceEnabled&&n.fragment.code.add(r.glsl`
    float sphereDistancePixels(vec4 sphere, vec3 pos) {
      float dist = distance(sphere.xyz, pos) - sphere.w;
      float width = fwidth(dist);
      dist /= min(width, maxPixelDistance);
      return abs(dist);
    }
    `);k.intersectsLineEnabled&&n.fragment.code.add(r.glsl`
    float lineDistancePixels(vec3 start, vec3 dir, float radius, vec3 pos) {
      float dist = length(cross(dir, pos - start)) / (length(pos) * perScreenPixelRatio);
      return abs(dist) - radius;
    }
    `);(k.lineVerticalPlaneEnabled||k.intersectsLineEnabled)&&n.fragment.code.add(r.glsl`
    bool pointIsWithinLine(vec3 pos, vec3 start, vec3 end) {
      vec3 dir = end - start;
      float t2 = dot(dir, pos - start);
      float l2 = dot(dir, dir);
      return t2 >= 0.0 && t2 <= l2;
    }
    `);n.fragment.code.add(r.glsl`
  void main() {
    vec3 pos;
    vec3 normal;
    float depthDiscontinuityAlpha;

    if (!laserlineReconstructFromDepth(pos, normal, depthDiscontinuityAlpha)) {
      discard;
    }

    vec4 color = vec4(0, 0, 0, 0);
  `);k.heightManifoldEnabled&&n.fragment.code.add(r.glsl`
    {
      float heightManifoldAlpha = 1.0 - smoothstep(angleCutoff.x, angleCutoff.y, abs(dot(normal, heightPlane.xyz)));
      vec4 heightManifoldColor = laserlineProfile(planeDistancePixels(heightPlane, pos));
      color = max(color, heightManifoldColor * heightManifoldAlpha);
    }
    `);k.pointDistanceEnabled&&n.fragment.code.add(r.glsl`
    {
      // distance to sphere
      float pointDistanceSphereDistance = sphereDistancePixels(pointDistanceSphere, pos);
      vec4 pointDistanceSphereColor = laserlineProfile(pointDistanceSphereDistance);
      float pointDistanceSphereAlpha = 1.0 - smoothstep(angleCutoff.x, angleCutoff.y, abs(dot(normal, normalize(pos - pointDistanceSphere.xyz))));

      color = max(color, pointDistanceSphereColor * pointDistanceSphereAlpha);
    }
    `);k.lineVerticalPlaneEnabled&&n.fragment.code.add(r.glsl`
    {
      if (pointIsWithinLine(pos, lineVerticalStart, lineVerticalEnd)) {
        float lineVerticalDistance = planeDistancePixels(lineVerticalPlane, pos);

        vec4 lineVerticalColor = laserlineProfile(lineVerticalDistance);
        float lineVerticalAlpha = 1.0 - smoothstep(angleCutoff.x, angleCutoff.y, abs(dot(normal, lineVerticalPlane.xyz)));

        color = max(color, lineVerticalColor * lineVerticalAlpha);
      }
    }
    `);k.intersectsLineEnabled&&n.fragment.code.add(r.glsl`
    {
      if (pointIsWithinLine(pos, intersectsLineStart, intersectsLineEnd)) {
        float intersectsLineDistance = lineDistancePixels(intersectsLineStart, intersectsLineDirection, intersectsLineRadius, pos);
        vec4 intersectsLineColor = laserlineProfile(intersectsLineDistance);
        float intersectsLineAlpha = 1.0 - smoothstep(angleCutoff.x, angleCutoff.y, 1.0 - abs(dot(normal, intersectsLineDirection)));

        color = max(color, intersectsLineColor * intersectsLineAlpha);
      }
    }
    `);n.fragment.code.add(r.glsl`
    gl_FragColor = laserlineOutput(color * depthDiscontinuityAlpha);
  }
  `);return n}g=g.deg2rad(6);var b=Object.freeze({__proto__:null,defaultAngleCutoff:g,build:p});a.LaserlinesShader=b;a.build=p;a.defaultAngleCutoff=g})},"esri/views/3d/webgl-engine/core/shaderLibrary/ScreenSpacePass":function(){define(["exports","../shaderModules/interfaces"],function(a,g){a.ScreenSpacePass=function(r){r.attributes.add("position","vec2");r.varyings.add("uv","vec2");r.vertex.code.add(g.glsl`
    void main(void) {
      gl_Position = vec4(position, 0.0, 1.0);
      uv = position * 0.5 + vec2(0.5);
    }
  `)};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderLibrary/Laserline.glsl":function(){define(["exports","../shaderModules/interfaces","./output/ReadLinearDepth.glsl","./util/CameraSpace.glsl"],function(a,g,r,A){a.Laserline=function(v,t){v.extensions.add("GL_OES_standard_derivatives");v.fragment.include(r.ReadLinearDepth);v.include(A.CameraSpace);v.fragment.uniforms.add("glowColor","vec3");v.fragment.uniforms.add("glowWidth","float");v.fragment.uniforms.add("glowFalloff",
"float");v.fragment.uniforms.add("innerColor","vec3");v.fragment.uniforms.add("innerWidth","float");v.fragment.uniforms.add("depthMap","sampler2D");v.fragment.uniforms.add("nearFar","vec2");v.fragment.uniforms.add("frameColor","sampler2D");t.contrastControlEnabled&&v.fragment.uniforms.add("globalAlphaContrastBoost","float");v.fragment.code.add(g.glsl`
  vec4 blendPremultiplied(vec4 source, vec4 dest) {
    float oneMinusSourceAlpha = 1.0 - source.a;

    return vec4(
      source.rgb + dest.rgb * oneMinusSourceAlpha,
      source.a + dest.a * oneMinusSourceAlpha
    );
  }
  `);v.fragment.code.add(g.glsl`
  vec4 premultipliedColor(vec3 rgb, float alpha) {
    return vec4(rgb * alpha, alpha);
  }
  `);v.fragment.code.add(g.glsl`
  vec4 laserlineProfile(float dist) {
    if (dist > glowWidth) {
      return vec4(0.0);
    }

    float innerAlpha = (1.0 - smoothstep(0.0, innerWidth, dist));
    float glowAlpha = pow(max(0.0, 1.0 - dist / glowWidth), glowFalloff);

    return blendPremultiplied(
      premultipliedColor(innerColor, innerAlpha),
      premultipliedColor(glowColor, glowAlpha)
    );
  }
  `);v.fragment.code.add(g.glsl`
  bool laserlineReconstructFromDepth(out vec3 pos, out vec3 normal, out float depthDiscontinuityAlpha) {
    float depth = linearDepthFromTexture(depthMap, uv, nearFar);

    if (-depth == nearFar[0]) {
      return false;
    }

    pos = reconstructPosition(gl_FragCoord.xy, depth);
    normal = normalize(cross(dFdx(pos), dFdy(pos)));

    float ddepth = fwidth(depth);
    depthDiscontinuityAlpha = 1.0 - smoothstep(0.0, 0.01, -ddepth / depth);

    return true;
  }
  `);t.contrastControlEnabled?v.fragment.code.add(g.glsl`
    float rgbToLuminance(vec3 color) {
      return dot(vec3(0.2126, 0.7152, 0.0722), color);
    }

    vec4 laserlineOutput(vec4 color) {
      float backgroundLuminance = rgbToLuminance(texture2D(frameColor, uv).rgb);
      float alpha = clamp(globalAlpha * max(backgroundLuminance * globalAlphaContrastBoost, 1.0), 0.0, 1.0);

      return color * alpha;
    }
    `):v.fragment.code.add(g.glsl`
    vec4 laserlineOutput(vec4 color) {
      return color * globalAlpha;
    }
    `)};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderLibrary/util/CameraSpace.glsl":function(){define(["exports","../../shaderModules/interfaces"],function(a,g){a.CameraSpace=function(r){r.fragment.uniforms.add("projInfo","vec4");r.fragment.uniforms.add("zScale","vec2");r.fragment.code.add(g.glsl`
    vec3 reconstructPosition(vec2 fragCoord, float depth) {
      return vec3((fragCoord * projInfo.xy + projInfo.zw) * (zScale.x * depth + zScale.y), depth);
    }
  `)};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/support/LaserLineRenderer":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../core/mathUtils ../../../chunks/vec3f64 ../../../chunks/vec3 ../../../chunks/vec2f64 ../../../chunks/vec4f64 ../../../chunks/vec4 ./geometryUtils ../webgl-engine/lib/Util ../webgl-engine/lib/glUtil3D ../webgl-engine/materials/internal/MaterialUtil ../webgl-engine/shaders/LaserlinePathTechnique ./LaserlinePathData ../webgl-engine/shaders/LaserlineTechnique".split(" "),
function(a,g,r,A,v,t,p,b,k,n,l,q,C,w,x,c){function m(u,z,y,B){const H=f,D=e;t.transformMat4(H,z,B);t.copy(D,y);D[3]=0;k.transformMat4(D,D,B);n.plane.fromPositionAndNormal(H,D,u)}const f=v.create(),e=b.create(),d={glowColor:[1,.5,0],glowWidth:8,glowFalloff:8,innerColor:[1,1,1],innerWidth:1,globalAlpha:.75,angleCutoff:A.deg2rad(6),globalAlphaContrastBoost:2};A=function(){function u(y,B={},H={contrastControlEnabled:!1}){this._renderCoordsHelper=y;this._config=H;this._technique=null;this._projInfo=b.create();
this._zScale=p.create();this._heightManifoldEnabled=!1;this._heightManifoldTarget=v.create();this._pointDistanceEnabled=!1;this._pointDistanceOrigin=v.create();this._pointDistanceTarget=v.create();this._lineVerticalPlaneEnabled=!1;this._lineVerticalPlaneSegment=n.lineSegment.create();this._intersectsLineEnabled=!1;this._intersectsLineSegment=n.lineSegment.create();this._intersectsLineRadius=3;this._pathVerticalPlaneEnabled=this._intersectsLineInfinite=!1;this._pathTechnique=this._pathVerticalPlaneData=
null;this.canRender=!0;this._tempNormal=v.create();this._tempDir=v.create();this._tempUp=v.create();this._tempVec3A=v.create();this._tempVec3B=v.create();this._tempVec4=b.create();this._tempPlane=n.plane.create();this._tempSphere=n.sphere.create();this._params=C.copyParameters(B,d)}var z=u.prototype;z.setParameterValues=function(y){C.updateParameters(this._params,y)&&this._requestRender()};z.initializeRenderContext=function(y){this._context=y;this._quadVAO=q.createQuadVAO(y.renderContext.rctx);this._techniqueRepository=
y.shaderTechniqueRep;this._techniqueConfig=new c.LaserlineTechniqueConfiguration;this._pathTechniqueConfig=new w.LaserlinePathTechniqueConfiguration};z.uninitializeRenderContext=function(){this._quadVAO=r.disposeMaybe(this._quadVAO);this._techniqueRepository.release(this._technique);this._technique=null;this._pathVerticalPlaneData=r.disposeMaybe(this._pathVerticalPlaneData);this._techniqueRepository.release(this._pathTechnique);this._pathTechnique=null};z.render=function(y){const B=this.heightManifoldEnabled||
this.pointDistanceEnabled||this.lineVerticalPlaneSegment||this.intersectsLineEnabled,H=this.pathVerticalPlaneEnabled;if(!B&&!H)return!0;const D=y.camera;l.inverseProjectionInfo(D.projectionMatrix,D.fullWidth,D.fullHeight,this._projInfo,this._zScale);B&&this.renderUnified(y);H&&this.renderPath(y);return!0};z.renderUnified=function(y){const B=y.rctx,H=this._selectTechnique(),D=H.program;B.bindProgram(D);H.bindPipelineState(B);this.bindGlobalUniforms(y,D);this.bindHeightManifoldUniforms(y,D);this.bindPointDistanceUniforms(y,
D);this.bindLineVerticalPlaneUniforms(y,D);this.bindIntersectsLineUniforms(y,D);H.bind(this._params,y.camera);B.bindVAO(this._quadVAO);B.drawArrays(5,0,4)};z.renderPath=function(y){if(!r.isNone(this._pathVerticalPlaneData)){this._pathTechniqueConfig.contrastControlEnabled=this._config.contrastControlEnabled;this._pathTechnique=this._techniqueRepository.acquireAndReleaseExisting(w.LaserlinePathTechnique,this._pathTechniqueConfig,this._pathTechnique);var B=y.rctx,H=this._pathTechnique,D=H.program;B.bindProgram(D);
H.bindPipelineState(B);this.bindGlobalUniforms(y,D);H.bind(this._params,this._pathVerticalPlaneData.origin,y.camera);this._pathVerticalPlaneData.draw(y.rctx)}};z.bindHeightManifoldUniforms=function(y,B){if(this.heightManifoldEnabled){var H=this._tempVec3A,D=this._tempPlane;this._renderCoordsHelper.worldUpAtPosition(this._heightManifoldTarget,H);m(D,this._heightManifoldTarget,H,y.camera.viewMatrix);B.setUniform4fv("heightPlane",D)}};z.bindPointDistanceUniforms=function(y,B){if(this._pointDistanceEnabled){y=
y.camera;var H=this._tempSphere;t.copy(H,this._pointDistanceOrigin);t.transformMat4(H,H,y.viewMatrix);H[3]=t.distance(this._pointDistanceOrigin,this._pointDistanceTarget);B.setUniform4f("pointDistanceSphere",H[0],H[1],H[2],H[3])}};z.bindLineVerticalPlaneUniforms=function(y,B){if(this._lineVerticalPlaneEnabled){var H=this._renderCoordsHelper;y=y.camera;var D=this._tempPlane,M=this._tempVec3A,U=this._tempUp,R=this._tempDir,J=this._tempNormal;n.lineSegment.pointAt(this._lineVerticalPlaneSegment,.5,M);
H.worldUpAtPosition(M,U);t.normalize(R,this._lineVerticalPlaneSegment.vector);t.cross(J,U,R);t.normalize(J,J);m(D,this._lineVerticalPlaneSegment.origin,J,y.viewMatrix);B.setUniform4fv("lineVerticalPlane",D);D=this._tempVec3A;t.copy(D,this._lineVerticalPlaneSegment.origin);H.setAltitude(0,D);t.transformMat4(D,D,y.viewMatrix);B.setUniform3fv("lineVerticalStart",D);D=this._tempVec3B;t.add(D,this._lineVerticalPlaneSegment.origin,this._lineVerticalPlaneSegment.vector);H.setAltitude(0,D);t.transformMat4(D,
D,y.viewMatrix);B.setUniform3fv("lineVerticalEnd",D)}};z.bindIntersectsLineUniforms=function(y,B){if(this._intersectsLineEnabled){var H=F,D=E;if(this._intersectsLineInfinite){var M=y.camera;n.clipRay.fromRay(n.ray.wrap(this._intersectsLineSegment.origin,this._intersectsLineSegment.vector),h);h.c0=-Number.MAX_VALUE;if(!n.frustum.intersectClipRay(M.frustum,h))return;n.clipRay.getStart(h,H);n.clipRay.getEnd(h,D)}else t.copy(H,this._intersectsLineSegment.origin),t.add(D,this._intersectsLineSegment.origin,
this._intersectsLineSegment.vector);M=this._tempVec3A;t.transformMat4(M,H,y.camera.viewMatrix);B.setUniform3fv("intersectsLineStart",M);H=this._tempVec4;t.copy(H,this._intersectsLineSegment.vector);this._tempVec4[3]=0;k.transformMat4(this._tempVec4,this._tempVec4,y.camera.viewMatrix);t.transformMat4(D,D,y.camera.viewMatrix);B.setUniform3fv("intersectsLineEnd",D);t.normalize(H,H);B.setUniform3f("intersectsLineDirection",H[0],H[1],H[2]);B.setUniform1f("intersectsLineRadius",this._intersectsLineRadius)}};
z.bindGlobalUniforms=function(y,B){const H=y.camera;B.setUniform4fv("projInfo",this._projInfo);B.setUniform2fv("zScale",this._zScale);B.setUniform2f("nearFar",H.near,H.far);this._heightManifoldEnabled?B.setUniform1f("maxPixelDistance",2*H.computeScreenPixelSizeAt(this._heightManifoldTarget)):this._pointDistanceEnabled?B.setUniform1f("maxPixelDistance",2*H.computeScreenPixelSizeAt(this._pointDistanceTarget)):this._lineVerticalPlaneEnabled&&B.setUniform1f("maxPixelDistance",2*H.computeScreenPixelSizeAt(this._lineVerticalPlaneSegment.origin));
B.setUniform1i("depthMap",0);y.rctx.bindTexture(y.offscreenRenderingHelper.linearDepthTexture,0);B.setUniform1i("frameColor",1);y.rctx.bindTexture(y.offscreenRenderingHelper.mainColorTexture,1)};z._requestRender=function(){this._context&&this._context.requestRender()};z._selectTechnique=function(){this._techniqueConfig.heightManifoldEnabled=this.heightManifoldEnabled;this._techniqueConfig.lineVerticalPlaneEnabled=this.lineVerticalPlaneEnabled;this._techniqueConfig.pointDistanceEnabled=this.pointDistanceEnabled;
this._techniqueConfig.intersectsLineEnabled=this.intersectsLineEnabled;this._techniqueConfig.contrastControlEnabled=this._config.contrastControlEnabled;return this._technique=this._techniqueRepository.acquireAndReleaseExisting(c.LaserlineTechnique,this._techniqueConfig,this._technique)};g._createClass(u,[{key:"renderSlots",get:function(){return[this._config.contrastControlEnabled?17:16]}},{key:"needsLinearDepth",get:function(){return!0}},{key:"heightManifoldEnabled",get:function(){return this._heightManifoldEnabled},
set:function(y){this._heightManifoldEnabled!==y&&(this._heightManifoldEnabled=y,this._requestRender())}},{key:"heightManifoldTarget",get:function(){return this._heightManifoldTarget},set:function(y){t.copy(this._heightManifoldTarget,y);this._requestRender()}},{key:"pointDistanceEnabled",get:function(){return this._pointDistanceEnabled},set:function(y){y!==this._pointDistanceEnabled&&(this._pointDistanceEnabled=y,this._requestRender())}},{key:"pointDistanceTarget",get:function(){return this._pointDistanceTarget},
set:function(y){t.copy(this._pointDistanceTarget,y);this._requestRender()}},{key:"pointDistanceOrigin",get:function(){return this._pointDistanceOrigin},set:function(y){t.copy(this._pointDistanceOrigin,y);this._requestRender()}},{key:"lineVerticalPlaneEnabled",get:function(){return this._lineVerticalPlaneEnabled},set:function(y){y!==this._lineVerticalPlaneEnabled&&(this._lineVerticalPlaneEnabled=y,this._requestRender())}},{key:"lineVerticalPlaneSegment",get:function(){return this._lineVerticalPlaneSegment},
set:function(y){n.lineSegment.copy(y,this._lineVerticalPlaneSegment);this._requestRender()}},{key:"intersectsLineEnabled",get:function(){return this._intersectsLineEnabled},set:function(y){y!==this._intersectsLineEnabled&&(this._intersectsLineEnabled=y,this._requestRender())}},{key:"intersectsLineSegment",get:function(){return this._intersectsLineSegment},set:function(y){n.lineSegment.copy(y,this._intersectsLineSegment);this._requestRender()}},{key:"intersectsLineRadius",get:function(){return this._intersectsLineRadius},
set:function(y){y!==this._intersectsLineRadius&&(this._intersectsLineRadius=y,this._requestRender())}},{key:"intersectsLineInfinite",get:function(){return this._intersectsLineInfinite},set:function(y){y!==this._intersectsLineInfinite&&(this._intersectsLineInfinite=y,this._requestRender())}},{key:"pathVerticalPlaneEnabled",get:function(){return this._pathVerticalPlaneEnabled},set:function(y){y!==this._pathVerticalPlaneEnabled&&(this._pathVerticalPlaneEnabled=y,r.isSome(this._pathVerticalPlaneData)&&
this._requestRender())}},{key:"pathVerticalPlaneVertices",set:function(y){r.isNone(this._pathVerticalPlaneData)&&(this._pathVerticalPlaneData=new x.LaserlinePathData(this._renderCoordsHelper));this._pathVerticalPlaneData.vertices=y;this.pathVerticalPlaneEnabled&&this._requestRender()}},{key:"pathVerticalPlaneBuffers",set:function(y){r.isNone(this._pathVerticalPlaneData)&&(this._pathVerticalPlaneData=new x.LaserlinePathData(this._renderCoordsHelper));this._pathVerticalPlaneData.buffers=y;this.pathVerticalPlaneEnabled&&
this._requestRender()}}]);return u}();const h=n.clipRay.create(),F=v.create(),E=v.create();a.LaserLineRenderer=A;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/glUtil3D":function(){define("exports ./DefaultVertexAttributeLocations ../../../webgl/BufferObject ../../../webgl/Texture ../../../webgl/VertexArrayObject ./DefaultVertexBufferLayouts".split(" "),function(a,g,r,A,v,t){a.createColorTexture=function(p,b,k=4){const n=new Uint8Array(k*k*4);for(let l=0;l<n.length;l+=
4)n[l+0]=255*b[0],n[l+1]=255*b[1],n[l+2]=255*b[2],n[l+3]=255*b[3];return new A(p,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,width:k,height:k},n)};a.createEmptyDepthTexture=function(p){return new A(p,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,width:1,height:1},new Uint8Array([255,255,255,255]))};a.createEmptyTexture=function(p,b=4){return new A(p,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,width:b,height:b})};a.createQuadVAO=function(p,b=t.Pos2,
k=g.Default3D,n=-1,l=1){let q=null;switch(b){case t.Pos2Tex:q=new Float32Array([n,n,0,0,l,n,1,0,n,l,0,1,l,l,1,1]);break;default:q=new Float32Array([n,n,l,n,n,l,l,l])}return new v(p,k,{geometry:b},{geometry:r.createVertex(p,35044,q)})};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/webgl/BufferObject":function(){define(["../../chunks/_rollupPluginBabelHelpers","../../core/typedArrayUtil","./checkWebGLError"],function(a,g,r){return function(){function A(t,p,b,k,n){this._context=t;this.bufferType=
p;this.usage=b;this._glName=null;this._size=-1;this._indexType=void 0;t.instanceCounter.increment(1,this);this._glName=this._context.gl.createBuffer();r.checkWebGLError(this._context.gl);k&&this.setData(k,n)}A.createIndex=function(t,p,b,k){return new A(t,34963,p,b,k)};A.createVertex=function(t,p,b){return new A(t,34962,p,b)};var v=A.prototype;v.dispose=function(){this._context&&(this._glName&&(this._context.gl.deleteBuffer(this._glName),this._glName=null),this._context.instanceCounter.decrement(1,
this),this._context=null)};v.setData=function(t,p){if(t){if("number"===typeof t){if(0>t&&console.error("Buffer size cannot be negative!"),34963===this.bufferType&&p)switch(this._indexType=p,this._size=t,p){case 5123:t*=2;break;case 5125:t*=4}}else p=t.byteLength,g.isUint16Array(t)&&(p/=2,this._indexType=5123),g.isUint32Array(t)&&(p/=4,this._indexType=5125),this._size=p;p=this._context.getBoundVAO();this._context.bindVAO(null);this._context.bindBuffer(this);this._context.gl.bufferData(this.bufferType,
t,this.usage);this._context.bindVAO(p)}};v.setSubData=function(t,p=0,b=0,k=t.byteLength){if(t){(0>p||p>=this._size)&&console.error("offset is out of range!");var n=p,l=b,q=k,C=t.byteLength;g.isUint16Array(t)&&(C/=2,n*=2,l*=2,q*=2);g.isUint32Array(t)&&(C/=4,n*=4,l*=4,q*=4);void 0===k&&(k=C-1);b>=k&&console.error("end must be bigger than start!");p+b-k>this._size&&console.error("An attempt to write beyond the end of the buffer!");p=this._context.getBoundVAO();this._context.bindVAO(null);this._context.bindBuffer(this);
b=this._context.gl;k=ArrayBuffer.isView(t)?t.buffer:t;t=0===l&&q===t.byteLength?k:k.slice(l,q);b.bufferSubData(this.bufferType,n,t);this._context.bindVAO(p)}};a._createClass(A,[{key:"glName",get:function(){return this._glName}},{key:"size",get:function(){return this._size}},{key:"indexType",get:function(){return this._indexType}},{key:"byteSize",get:function(){return 34962===this.bufferType?this._size:5125===this._indexType?4*this._size:2*this._size}}]);return A}()})},"esri/views/webgl/checkWebGLError":function(){define(["exports",
"../../core/has","../../core/Logger","../../core/Error"],function(a,g,r,A){r.getLogger("esri/views/webgl");a.checkWebGLError=function(v){};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/webgl/Texture":function(){define(["../../chunks/_rollupPluginBabelHelpers","../../core/maybe","../../core/mathUtils","./capabilities/isWebGL2Context"],function(a,g,r,A){return function(){function v(p,b,k=null){this._glName=this._context=null;this._descriptor=void 0;this._wrapModeDirty=this._samplingModeDirty=
!1;p.instanceCounter.increment(0,this);this._context=p;this._descriptor={target:3553,samplingMode:9729,wrapMode:10497,flipped:!1,hasMipmap:!1,isOpaque:!1,unpackAlignment:4,preMultiplyAlpha:!1,...b};this.setData(k)}var t=v.prototype;t.dispose=function(){if(this._context&&this._context.gl){if(this._glName){const p=this._context.gl;this._context.unbindTextureAllUnits(this);p.deleteTexture(this._glName);this._glName=null}this._context.instanceCounter.decrement(0,this);this._context=null}};t.release=function(){this.dispose()};
t.resize=function(p,b){const k=this._descriptor;if(k.width!==p||k.height!==b)k.width=p,k.height=b,this.setData(null)};t.setData=function(p){if(this._context&&this._context.gl){var b=this._context.gl;this._glName||(this._glName=b.createTexture());void 0===p&&(p=null);null===p&&(this._descriptor.width=this._descriptor.width||4,this._descriptor.height=this._descriptor.height||4);var k=this._context.getBoundTexture(0);this._context.bindTexture(this,0);var n=this._descriptor;v._validateTexture(this._context,
n);b.pixelStorei(b.UNPACK_ALIGNMENT,n.unpackAlignment);b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL,n.flipped?1:0);b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.preMultiplyAlpha?1:0);var l=n.pixelFormat,q=n.internalFormat?n.internalFormat:l;if(p instanceof ImageData||p instanceof HTMLImageElement||p instanceof HTMLCanvasElement||p instanceof HTMLVideoElement){var C=p.width,w=p.height;p instanceof HTMLVideoElement&&(C=p.videoWidth,w=p.videoHeight);n.width&&n.height&&console.assert(C===n.width&&w===n.height);
b.texImage2D(b.TEXTURE_2D,0,q,l,n.dataType,p);n.hasMipmap&&this.generateMipmap();void 0===n.width&&(n.width=C);void 0===n.height&&(n.height=w)}else{null!=n.width&&null!=n.height||console.error("Width and height must be specified!");b.DEPTH24_STENCIL8&&q===b.DEPTH_STENCIL&&(q=b.DEPTH24_STENCIL8);C=n.width;w=n.height;var x=p;if(g.isSome(x)&&"type"in x&&"compressed"===x.type)for(l=Math.round(Math.log(Math.max(C,w))/Math.LN2)+1,n.hasMipmap=n.hasMipmap&&l===p.levels.length,l=0;;++l){b.compressedTexImage2D(b.TEXTURE_2D,
l,q,C,w,0,p.levels[Math.min(l,p.levels.length-1)]);if(1===C&&1===w||!n.hasMipmap)break;C=Math.max(1,C>>1);w=Math.max(1,w>>1)}else if(g.isSome(p))b.texImage2D(b.TEXTURE_2D,0,q,C,w,0,l,n.dataType,p),n.hasMipmap&&this.generateMipmap();else for(p=0;;++p){b.texImage2D(b.TEXTURE_2D,p,q,C,w,0,l,n.dataType,null);if(1===C&&1===w||!n.hasMipmap)break;C=Math.max(1,C>>1);w=Math.max(1,w>>1)}}v._applySamplingMode(b,this._descriptor);v._applyWrapMode(b,this._descriptor);v._applyAnisotropicFilteringParameters(this._context,
this._descriptor);k&&this._context.bindTexture(k,0)}};t.updateData=function(p,b,k,n,l,q){q||console.error("An attempt to use uninitialized data!");this._glName||console.error("An attempt to update uninitialized texture!");const C=this._context.gl,w=this._descriptor,x=this._context.getBoundTexture(0);this._context.bindTexture(this,0);(0>b||0>k||n>w.width||l>w.height||b+n>w.width||k+l>w.height)&&console.error("An attempt to update out of bounds of the texture!");C.pixelStorei(C.UNPACK_ALIGNMENT,w.unpackAlignment);
C.pixelStorei(C.UNPACK_FLIP_Y_WEBGL,w.flipped?1:0);C.pixelStorei(C.UNPACK_PREMULTIPLY_ALPHA_WEBGL,w.preMultiplyAlpha?1:0);q instanceof ImageData||q instanceof HTMLImageElement||q instanceof HTMLCanvasElement||q instanceof HTMLVideoElement?C.texSubImage2D(C.TEXTURE_2D,p,b,k,w.pixelFormat,w.dataType,q):C.texSubImage2D(C.TEXTURE_2D,p,b,k,n,l,w.pixelFormat,w.dataType,q);this._context.bindTexture(x,0)};t.generateMipmap=function(){var p=this._descriptor;p.hasMipmap||(this._samplingModeDirty=p.hasMipmap=
!0,v._validateTexture(this._context,p));9729===p.samplingMode?(this._samplingModeDirty=!0,p.samplingMode=9985):9728===p.samplingMode&&(this._samplingModeDirty=!0,p.samplingMode=9984);p=this._context.getBoundTexture(0);this._context.bindTexture(this,0);const b=this._context.gl;b.generateMipmap(b.TEXTURE_2D);this._context.bindTexture(p,0)};t.setSamplingMode=function(p){p!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=p,v._validateTexture(this._context,this._descriptor),this._samplingModeDirty=
!0)};t.setWrapMode=function(p){p!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=p,v._validateTexture(this._context,this._descriptor),this._wrapModeDirty=!0)};t.applyChanges=function(){const p=this._context.gl,b=this._descriptor;this._samplingModeDirty&&(v._applySamplingMode(p,b),this._samplingModeDirty=!1);this._wrapModeDirty&&(v._applyWrapMode(p,b),this._wrapModeDirty=!1)};v._validateTexture=function(p,b){(0>b.width||0>b.height)&&console.error("Negative dimension parameters are not allowed!");
const k=r.isPowerOfTwo(b.width)&&r.isPowerOfTwo(b.height);A(p.gl)||k||("number"===typeof b.wrapMode?33071!==b.wrapMode&&console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"):(33071!==b.wrapMode.s||33071!==b.wrapMode.t)&&console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"),b.hasMipmap&&console.error("Mipmapping requires power-of-two textures!"))};v._applySamplingMode=function(p,b){let k=b.samplingMode,n=b.samplingMode;if(9985===k||9987===k)k=
9729,b.hasMipmap||(n=9729);else if(9984===k||9986===k)k=9728,b.hasMipmap||(n=9728);p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,k);p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,n)};v._applyWrapMode=function(p,b){"number"===typeof b.wrapMode?(p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,b.wrapMode),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,b.wrapMode)):(p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,b.wrapMode.s),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,b.wrapMode.t))};v._applyAnisotropicFilteringParameters=
function(p,b){if(null!=b.maxAnisotropy){var k=p.capabilities.textureFilterAnisotropic;k&&(p=p.gl,p.texParameterf(p.TEXTURE_2D,k.TEXTURE_MAX_ANISOTROPY,b.maxAnisotropy))}};a._createClass(v,[{key:"glName",get:function(){return this._glName}},{key:"descriptor",get:function(){return this._descriptor}}]);return v}()})},"esri/views/webgl/capabilities/isWebGL2Context":function(){define(function(){return function(a){return window.WebGL2RenderingContext&&a instanceof window.WebGL2RenderingContext}})},"esri/views/webgl/VertexArrayObject":function(){define(["../../chunks/_rollupPluginBabelHelpers",
"../../core/maybe","./Util"],function(a,g,r){return function(){function A(t,p,b,k,n){this._context=t;this._locations=p;this._layout=b;this._buffers=k;this._indexBuffer=n;this._glName=null;this._initialized=!1;t.instanceCounter.increment(2,this)}var v=A.prototype;v.dispose=function(t=!0){if(this._context){var p=this._context.capabilities.vao;p&&this._glName&&(p.deleteVertexArray(this._glName),this._glName=null);this._context.getBoundVAO()===this&&this._context.bindVAO(null);if(t){for(const b in this._buffers)this._buffers[b].dispose(),
delete this._buffers[b];this._indexBuffer=g.disposeMaybe(this._indexBuffer)}this._context.instanceCounter.decrement(2,this);this._context=null}};v.initialize=function(){if(!this._initialized){var t=this._context.capabilities.vao;if(t){const p=t.createVertexArray();t.bindVertexArray(p);this._bindLayout();t.bindVertexArray(null);this._glName=p}this._initialized=!0}};v.bind=function(){this.initialize();const t=this._context.capabilities.vao;t?t.bindVertexArray(this.glName):(this._context.bindVAO(null),
this._bindLayout())};v._bindLayout=function(){const t=this._buffers,p=!!this._context.capabilities.vao,b=this._layout,k=this._indexBuffer;t||console.error("Vertex buffer dictionary is empty!");const n=this._context.gl;for(const l in t){const q=t[l];q||console.error("Vertex buffer is uninitialized!");const C=b[l];C||console.error("Vertex element descriptor is empty!");r.bindVertexBufferLayout(this._context,this._locations,q,C)}k&&(p?n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,k.glName):this._context.bindBuffer(k))};
v.unbind=function(){this.initialize();const t=this._context.capabilities.vao;t?t.bindVertexArray(null):this._unbindLayout()};v._unbindLayout=function(){const t=this._buffers,p=this._layout;t||console.error("Vertex buffer dictionary is empty!");for(const b in t){const k=t[b];k||console.error("Vertex buffer is uninitialized!");r.unbindVertexBufferLayout(this._context,this._locations,k,p[b])}this._indexBuffer&&this._context.unbindBuffer(this._indexBuffer.bufferType)};a._createClass(A,[{key:"glName",
get:function(){return this._glName}},{key:"vertexBuffers",get:function(){return this._buffers}},{key:"indexBuffer",get:function(){return this._indexBuffer}},{key:"size",get:function(){return Object.keys(this._buffers).reduce((t,p)=>t+this._buffers[p].size,this._indexBuffer?this._indexBuffer.size:0)}},{key:"layout",get:function(){return this._layout}},{key:"locations",get:function(){return this._locations}}]);return A}()})},"esri/views/webgl/Util":function(){define(["exports","../../core/has","../../core/maybe"],
function(a,g,r){function A(b){return b[0].stride}function v(b){switch(b){case 5126:return 4;case 5124:return 4;case 5125:return 4;case 5122:return 2;case 5123:return 2;case 5120:return 1;case 5121:return 1;default:throw Error("Unknown data type");}}function t(b){switch(b){case 6406:case 6409:case 36168:return 1;case 6410:case 32854:case 33325:case 32854:case 33189:return 2;case 6407:case 6402:return 3;case 6408:case 34041:case 33326:case 35898:case 33327:case 34041:return 4;case 33328:case 34842:return 8;
case 34836:return 16;case 33776:case 33777:return.5;case 33778:case 33779:return 1;case 37488:case 37489:case 37492:case 37493:case 37494:case 37495:return.5;case 37490:case 37491:case 37496:case 37497:return 1}return 0}function p(b){if(r.isNone(b))return 0;if("colorAttachment"in b)return b.glName?p(b.colorAttachment)+p(b.depthStencilAttachment):0;if("descriptor"in b)return b.glName?p(b.descriptor):0;const k=b.internalFormat||"pixelFormat"in b&&b.pixelFormat;if(!k)return 0;const n="hasMipmap"in b&&
b.hasMipmap?1.3:1;b=b.width*b.height;return t(k)*b*n}a.addDescriptor=function(b,k,n,l,q,C){const w=v(l);if(0<b.length){const x=b[0].stride,c=x+w*n;b.forEach(m=>m.stride=c);b.push({name:k,count:n,type:l,offset:x,stride:c,normalized:q,divisor:C})}else b.push({name:k,count:n,type:l,offset:0,stride:w*n,normalized:q,divisor:C})};a.bindVertexBufferLayout=function(b,k,n,l,q){const C=b.gl,w=b.capabilities.instancing;b.bindBuffer(n);for(const x of l)if(b=k[x.name],n=(q?q:0+x.baseInstance?x.baseInstance:0)*
x.stride,void 0===b&&console.error(`There is no location for vertex attribute '${x.name}' defined.`),x.baseInstance&&!x.divisor&&console.error(`Vertex attribute '${x.name}' uses baseInstanceOffset without divisor.`),4>=x.count)C.vertexAttribPointer(b,x.count,x.type,x.normalized,x.stride,x.offset+n),C.enableVertexAttribArray(b),x.divisor&&0<x.divisor&&w&&w.vertexAttribDivisor(b,x.divisor);else if(9===x.count)for(l=0;3>l;l++)C.vertexAttribPointer(b+l,3,x.type,x.normalized,x.stride,x.offset+12*l+n),
C.enableVertexAttribArray(b+l),x.divisor&&0<x.divisor&&w&&w.vertexAttribDivisor(b+l,x.divisor);else if(16===x.count)for(l=0;4>l;l++)C.vertexAttribPointer(b+l,4,x.type,x.normalized,x.stride,x.offset+16*l+n),C.enableVertexAttribArray(b+l),x.divisor&&0<x.divisor&&w&&w.vertexAttribDivisor(b+l,x.divisor);else console.error("Unsupported vertex attribute element count: "+x.count)};a.copyFramebufferToTexture=function(b,k,n,l,q=0){const C=b.getBoundFramebufferObject(),w=b.getBoundTexture(0);b.bindFramebuffer(k);
b.bindTexture(n,0);b.gl.copyTexImage2D(b.gl.TEXTURE_2D,q,n.descriptor.pixelFormat,l[0],l[1],l[2],l[3],0);b.gl.flush();b.bindFramebuffer(C);b.bindTexture(w,0)};a.findAttribute=function(b,k){for(let n=0;n<b.length;n++)if(b[n].name===k)return b[n];return null};a.getBytesPerElement=v;a.getBytesPerElementFormat=t;a.getGpuMemoryUsage=p;a.getStride=A;a.getTypedArrayConstructor=function(b){switch(b){case 5120:return Int8Array;case 5126:return Float32Array;case 5124:return Int32Array;case 5122:return Int16Array;
case 5121:return Uint8Array;case 5125:return Uint32Array;case 5123:return Uint16Array;default:throw Error("Unknown data type");}};a.hasAttribute=function(b,k){for(let n=0;n<b.length;n++)if(b[n].name===k)return!0;return!1};a.setBaseInstanceOffset=function(b,k){const n={};for(const l in b)n[l]=b[l].map(q=>q.divisor?{...q,baseInstance:k}:q);return n};a.unbindVertexBufferLayout=function(b,k,n,l){const q=b.gl,C=b.capabilities.instancing;b.bindBuffer(n);for(const w of l)if(n=k[w.name],4>=w.count)q.disableVertexAttribArray(n),
w.divisor&&0<w.divisor&&C&&C.vertexAttribDivisor(n,0);else if(9===w.count)for(l=0;3>l;l++)q.disableVertexAttribArray(n+l),w.divisor&&0<w.divisor&&C&&C.vertexAttribDivisor(n+l,0);else if(16===w.count)for(l=0;4>l;l++)q.disableVertexAttribArray(n+l),w.divisor&&0<w.divisor&&C&&C.vertexAttribDivisor(n+l,0);else console.error("Unsupported vertex attribute element count: "+w.count);b.unbindBuffer(34962)};a.vertexCount=function(b,k){return b.vertexBuffers[k].size/A(b.layout[k])};Object.defineProperty(a,"__esModule",
{value:!0})})},"esri/views/3d/webgl-engine/lib/DefaultVertexBufferLayouts":function(){define(["exports"],function(a){a.Pos2=[{name:"position",count:2,type:5126,offset:0,stride:8,normalized:!1}];a.Pos2Tex=[{name:"position",count:2,type:5126,offset:0,stride:16,normalized:!1},{name:"uv0",count:2,type:5126,offset:8,stride:16,normalized:!1}];a.Pos3=[{name:"position",count:3,type:5126,offset:0,stride:12,normalized:!1}];a.Pos3Col=[{name:"position",count:3,type:5126,offset:0,stride:16,normalized:!1},{name:"color",
count:4,type:5121,offset:12,stride:16,normalized:!1}];a.Pos3NormalTex=[{name:"position",count:3,type:5126,offset:0,stride:32,normalized:!1},{name:"normal",count:3,type:5126,offset:12,stride:32,normalized:!1},{name:"uv0",count:2,type:5126,offset:24,stride:32,normalized:!1}];a.Pos3Tex=[{name:"position",count:3,type:5126,offset:0,stride:20,normalized:!1},{name:"uv0",count:2,type:5126,offset:12,stride:20,normalized:!1}];Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/shaders/LaserlinePathTechnique":function(){define("require exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../chunks/mat4 ../../../../chunks/mat4f64 ../core/shaderTechnique/ReloadableShaderModule ../core/shaderTechnique/ShaderTechnique ../core/shaderTechnique/ShaderTechniqueConfiguration ../../../webgl/Program ../../../webgl/renderState ../../../../chunks/LaserlinePath.glsl".split(" "),
function(a,g,r,A,v,t,p,b,k,n,l,q){b=function(w){function x(){return w.apply(this,arguments)||this}r._inheritsLoose(x,w);var c=x.prototype;c.initializeProgram=function(m){const f=x.shader.get().build(this.configuration);return new n(m.rctx,f.generateSource("vertex"),f.generateSource("fragment"),x.attributeLocations)};c.bind=function(m,f,e){this.program.setUniform3fv("innerColor",m.innerColor);this.program.setUniform1f("innerWidth",m.innerWidth*e.pixelRatio);this.program.setUniform3fv("glowColor",m.glowColor);
this.program.setUniform1f("glowWidth",m.glowWidth*e.pixelRatio);this.program.setUniform1f("glowFalloff",m.glowFalloff);this.program.setUniform1f("globalAlpha",m.globalAlpha);this.program.setUniform1f("perScreenPixelRatio",e.perScreenPixelRatio);this.program.setUniform2f("pixelToNDC",2/e.fullWidth,2/e.fullHeight);this.program.setUniformMatrix4fv("uProjectionMatrix",e.projectionMatrix);v.translate(C,e.viewMatrix,f);this.program.setUniformMatrix4fv("uModelViewMatrix",C);this.configuration.contrastControlEnabled&&
this.program.setUniform1f("globalAlphaContrastBoost",null!=m.globalAlphaContrastBoost?m.globalAlphaContrastBoost:1)};c.initializePipeline=function(){return l.makePipelineState({blending:l.simpleBlendingParams(1,771),colorWrite:l.defaultColorWriteParams})};c.bindPipelineState=function(m){m.setPipelineState(this.pipeline)};return x}(b.ShaderTechnique);b.shader=new p.ReloadableShaderModule(q.LaserlinePathShader,()=>new Promise(function(w,x){a(["./LaserlinePath.glsl"],w,x)}));b.attributeLocations={start:0,
end:1,up:2,extrude:3};p=function(w){function x(){var c=w.apply(this,arguments)||this;c.contrastControlEnabled=!1;return c}r._inheritsLoose(x,w);return x}(k.ShaderTechniqueConfiguration);A.__decorate([k.parameter()],p.prototype,"contrastControlEnabled",void 0);const C=t.create();g.LaserlinePathTechnique=b;g.LaserlinePathTechniqueConfiguration=p;Object.defineProperty(g,"__esModule",{value:!0})})},"esri/chunks/LaserlinePath.glsl":function(){define(["exports","../views/3d/webgl-engine/core/shaderModules/interfaces",
"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder","../views/3d/webgl-engine/core/shaderLibrary/Laserline.glsl"],function(a,g,r,A){function v(p){const b=new r.ShaderBuilder;b.include(A.Laserline,p);b.vertex.uniforms.add("uModelViewMatrix","mat4");b.vertex.uniforms.add("uProjectionMatrix","mat4");b.attributes.add("start","vec3");b.attributes.add("end","vec3");b.attributes.add("up","vec3");b.attributes.add("extrude","vec2");b.varyings.add("uv","vec2");b.varyings.add("vViewStart","vec3");b.varyings.add("vViewEnd",
"vec3");b.varyings.add("vViewPlane","vec4");b.vertex.uniforms.add("glowWidth","float");b.vertex.uniforms.add("pixelToNDC","vec2");b.vertex.code.add(g.glsl`
  void main() {
    vec3 pos = mix(start, end, extrude.x);

    vec4 viewPos = uModelViewMatrix * vec4(pos, 1);
    vec4 projPos = uProjectionMatrix * viewPos;
    vec2 ndcPos = projPos.xy / projPos.w;

    vec3 viewUp = (uModelViewMatrix * vec4(extrude.y * up, 0)).xyz;
    vec4 projPosUp = uProjectionMatrix * vec4(viewPos.xyz + viewUp, 1);
    vec2 projExtrudeDir = normalize(projPosUp.xy / projPosUp.w - ndcPos);

    vec2 lxy = abs(sign(projExtrudeDir) - ndcPos);
    ndcPos += length(lxy) * projExtrudeDir;

    vec3 worldPlaneNormal = normalize(cross(up, normalize(end - start)));
    vec3 viewPlaneNormal = (uModelViewMatrix * vec4(worldPlaneNormal, 0)).xyz;

    vViewStart = (uModelViewMatrix * vec4(start, 1)).xyz;
    vViewEnd = (uModelViewMatrix * vec4(end, 1)).xyz;
    vViewPlane = vec4(viewPlaneNormal, -dot(viewPlaneNormal, vViewStart));

    // Add enough padding in the X screen space direction for glow
    float xPaddingPixels = sign(dot(viewPlaneNormal, viewPos.xyz)) * (extrude.x * 2.0 - 1.0) * glowWidth;
    ndcPos.x += xPaddingPixels * pixelToNDC.x;

    uv = ndcPos * 0.5 + 0.5;
    gl_Position = vec4(ndcPos, 0, 1);
  }
  `);b.fragment.uniforms.add("globalAlpha","float");b.fragment.uniforms.add("perScreenPixelRatio","float");b.fragment.code.add(g.glsl`
  float planeDistancePixels(vec4 plane, vec3 pos, vec3 start, vec3 end) {
    vec3 origin = mix(start, end, 0.5);
    vec3 basis = end - origin;
    vec3 posAtOrigin = pos - origin;

    float x = dot(normalize(basis), posAtOrigin);
    float y = dot(plane.xyz, posAtOrigin);

    float dx = max(abs(x) - length(basis), 0.0);
    float dy = y;

    float dist = length(vec2(dx, dy));

    float width = fwidth(y);
    float maxPixelDistance = length(pos) * perScreenPixelRatio * 2.0;
    float pixelDist = dist / min(width, maxPixelDistance);
    return abs(pixelDist);
  }

  void main() {
    vec3 pos;
    vec3 normal;
    float depthDiscontinuityAlpha;

    if (!laserlineReconstructFromDepth(pos, normal, depthDiscontinuityAlpha)) {
      discard;
    }

    float distance = planeDistancePixels(vViewPlane, pos, vViewStart, vViewEnd);

    vec4 color = laserlineProfile(distance);
    float alpha = 1.0 - smoothstep(0.995, 0.999, abs(dot(normal, vViewPlane.xyz)));

    gl_FragColor = laserlineOutput(color * alpha * depthDiscontinuityAlpha);
  }
  `);return b}var t=Object.freeze({__proto__:null,build:v});a.LaserlinePathShader=t;a.build=v})},"esri/views/3d/support/LaserlinePathData":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../chunks/vec3f64 ../../../chunks/vec3 ../../webgl/Program ./buffer/glUtil ./buffer/InterleavedLayout ../../webgl/BufferObject ../../webgl/Texture ../../webgl/VertexArrayObject ../../webgl/Renderbuffer ../../webgl/FramebufferObject ../../webgl/ProgramCache ../../webgl/RenderingContext ../../webgl/ShaderCompiler ../webgl-engine/shaders/LaserlinePathTechnique".split(" "),
function(a,g,r,A,v,t,p,b,k,n,l,q,C,w,x,c,m){t=function(){function h(E){this._renderCoordsHelper=E;this._buffers=null;this._origin=A.create();this._dirty=!1;this._count=0;this._vao=null}var F=h.prototype;F.draw=function(E){const u=this.ensureVAO(E);r.isSome(u)&&(E.bindVAO(u),E.drawArrays(4,0,this._count))};F.dispose=function(){r.isSome(this._vao)&&this._vao.dispose()};F.ensureVAO=function(E){if(r.isNone(this._buffers))return null;r.isNone(this._vao)&&(this._vao=this.createVAO(E,this._buffers));this.ensureVertexData(this._vao,
this._buffers);return this._vao};F.createVAO=function(E,u){u=this.createDataBuffer(u);this._dirty=!1;return new l(E,m.LaserlinePathTechnique.attributeLocations,{data:p.glLayout(d)},{data:k.createVertex(E,35044,u)})};F.ensureVertexData=function(E,u){this._dirty&&(u=this.createDataBuffer(u),E.vertexBuffers.data.setData(u),this._dirty=!1)};F.numberOfRenderVertices=function(E){return 6*(E.length/3-1)};F.createDataBuffer=function(E){var u=E.reduce((M,U)=>M+this.numberOfRenderVertices(U),0);this._count=
u;u=d.createBuffer(u);const z=this._origin;let y=0,B=0;for(const M of E){for(E=0;E<M.length;E+=3){var H=v.set(e,M[E+0],M[E+1],M[E+2]);0===E?B=this._renderCoordsHelper.getAltitude(H):this._renderCoordsHelper.setAltitude(B,H);var D=this._renderCoordsHelper.worldUpAtPosition(H,f);const U=y+2*E;H=v.subtract(e,H,z);if(E<M.length-3){u.up.setVec(U,D);u.up.setVec(U+3,D);u.up.setVec(U+5,D);for(let R=0;6>R;R++)u.start.setVec(U+R,H);u.extrude.setValues(U+0,0,-1);u.extrude.setValues(U+1,1,-1);u.extrude.setValues(U+
2,1,1);u.extrude.setValues(U+3,0,-1);u.extrude.setValues(U+4,1,1);u.extrude.setValues(U+5,0,1)}if(0<E)for(u.up.setVec(U-2,D),u.up.setVec(U-4,D),u.up.setVec(U-5,D),D=-6;0>D;D++)u.end.setVec(U+D,H)}y+=this.numberOfRenderVertices(M)}return u.buffer};g._createClass(h,[{key:"vertices",set:function(E){const u=new Float64Array(3*E.length);let z=0;for(const y of E)u[z++]=y[0],u[z++]=y[1],u[z++]=y[2];this.buffers=[u]}},{key:"buffers",set:function(E){this._buffers=E;if(0<this._buffers.length){E=this._buffers[0];
const u=3*Math.floor(E.length/3/2);v.set(this._origin,E[u+0],E[u+1],E[u+2])}else v.set(this._origin,0,0,0);this._dirty=!0}},{key:"origin",get:function(){return this._origin}}]);return h}();const f=A.create(),e=A.create(),d=b.newLayout().vec3f("start").vec3f("end").vec3f("up").vec2f("extrude");a.LaserlinePathData=t;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/support/buffer/glUtil":function(){define(["exports"],function(a){const g={divisor:0},r={u8:5121,u16:5123,u32:5125,i8:5120,
i16:5122,i32:5124,f32:5126};a.glLayout=function(A,v={}){v={...g,...v};const t=A.stride;return A.fieldNames.filter(p=>{p=A.fields.get(p).optional;return!(p&&p.glPadding)}).map(p=>{const b=A.fields.get(p),k=b.constructor.ElementCount;var n=r[b.constructor.ElementType];if(!n)throw Error("BufferType not supported in WebGL");return{name:p,stride:t,count:k,type:n,offset:b.offset,normalized:!(!b.optional||!b.optional.glNormalized),divisor:v.divisor}})};Object.defineProperty(a,"__esModule",{value:!0})})},
"esri/views/webgl/Renderbuffer":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(a){return function(){function g(A,v){this._context=A;this._desc=v;this._context.instanceCounter.increment(5,this);A=this._context.gl;this.glName=A.createRenderbuffer();this._context.bindRenderbuffer(this);A.renderbufferStorage(A.RENDERBUFFER,v.internalFormat,v.width,v.height)}var r=g.prototype;r.resize=function(A,v){const t=this._desc;if(t.width!==A||t.height!==v)t.width=A,t.height=v,A=this._context.gl,
this._context.bindRenderbuffer(this),A.renderbufferStorage(A.RENDERBUFFER,t.internalFormat,t.width,t.height)};r.dispose=function(){this._context&&(this._context.gl.deleteRenderbuffer(this.glName),this._context.instanceCounter.decrement(5,this),this._context=null)};a._createClass(g,[{key:"descriptor",get:function(){return this._desc}}]);return g}()})},"esri/views/webgl/FramebufferObject":function(){define(["../../chunks/_rollupPluginBabelHelpers","../../core/has","../../core/Logger","./Texture","./Renderbuffer"],
function(a,g,r,A,v){const t=r.getLogger("esri.views.webgl.FrameBufferObject");g=function(){function p(k,n,l,q){this._context=k;this._stencilAttachment=this._depthAttachment=this._glName=null;this._colorAttachments=new Map;this._initialized=!1;this._desc={...n};k.instanceCounter.increment(4,this);if(l)if(Array.isArray(l))for(const x of l){const {attachmentPoint:c,texture:m}=x;l=m instanceof A?m:new A(k,m);n=l.descriptor;this._colorAttachments.set(c,l);this._validateColorAttachmentPoint(c);this._validateTextureDimensions(n,
this._desc)}else{var C;l instanceof A?(n=l.descriptor,this._colorAttachments.set(36064,l)):(n=l,this._colorAttachments.set(36064,new A(k,l)));0!==(null==(C=this._desc)?void 0:C.colorTarget)&&console.error("Framebuffer is initialized with a texture however the descriptor indicates using a renderbuffer color attachment!");this._validateTextureDimensions(n,this._desc)}if(q instanceof v){var w;k=null!=(w=this._desc.depthStencilTarget)?w:3;2===k?this._stencilAttachment=q:1===k||3===k?this._depthAttachment=
q:console.error('If a Renderbuffer is provided, "depthStencilTarget" must be one of STENCIL_RENDER_BUFFER, DEPTH_RENDER_BUFFER or DEPTH_STENCIL_RENDER_BUFFER');p._validateBufferDimensions(q.descriptor,this._desc)}else q&&(this._context.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture as an attachment!"),q instanceof A?(this._depthStencilTexture=q,q=this._depthStencilTexture.descriptor):this._depthStencilTexture=
new A(this._context,q),this._validateTextureDimensions(q,this._desc))}var b=p.prototype;b.dispose=function(){if(this._desc){var k=this._context.getBoundFramebufferObject();this._disposeColorAttachments();this._disposeDepthStencilAttachments();this._glName&&(this._context.gl.deleteFramebuffer(this._glName),this._glName=null);this._context.bindFramebuffer(k);this._context.instanceCounter.decrement(4,this);this._desc=null}};b.getColorTexture=function(k){return(k=this._colorAttachments.get(k))&&k instanceof
A?k:null};b.attachColorTexture=function(k,n=36064){if(k){this._validateColorAttachmentPoint(n);this._validateTextureDimensions(k.descriptor,this._desc);this._disposeColorAttachments();if(this._initialized){this._context.bindFramebuffer(this);const l=this._context.gl;l.framebufferTexture2D(l.FRAMEBUFFER,n,l.TEXTURE_2D,k.glName,0)}this._colorAttachments.set(n,k)}};b.detachColorTexture=function(k=36064){const n=this._colorAttachments.get(k);if(n instanceof A){if(this._initialized){this._context.bindFramebuffer(this);
const l=this._context.gl;l.framebufferTexture2D(l.FRAMEBUFFER,k,l.TEXTURE_2D,null,0)}this._colorAttachments.delete(k);return n}};b.attachDepthStencilTexture=function(k){if(k){var n=k.descriptor;34041!==n.pixelFormat&&console.error("Depth/Stencil texture must have a pixel type of DEPTH_STENCIL!");34042!==n.dataType&&console.error("Depth/Stencil texture must have data type of UNSIGNED_INT_24_8!");this._context.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture!");
this._validateTextureDimensions(n,this._desc);this._desc.depthStencilTarget&&4!==this._desc.depthStencilTarget&&(this._desc.depthStencilTarget=4);this._disposeDepthStencilAttachments();this._initialized&&(this._context.bindFramebuffer(this),n=this._context.gl,n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,k.glName,0));this._depthStencilTexture=k}};b.detachDepthStencilTexture=function(){const k=this._depthStencilTexture;if(k&&this._initialized){this._context.bindFramebuffer(this);
const n=this._context.gl;this._context.gl.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,null,0)}this._depthStencilTexture=null;return k};b.attachDepthStencilBuffer=function(k){if(k){var n=k.descriptor;34041!==n.internalFormat&&33189!==n.internalFormat&&console.error("Depth/Stencil buffer must have correct internalFormat");p._validateBufferDimensions(n,this._desc);this._disposeDepthStencilAttachments();this._desc.depthStencilTarget=34041===n.internalFormat?3:1;this._initialized&&
(this._context.bindFramebuffer(this),n=this._context.gl,n.framebufferRenderbuffer(n.FRAMEBUFFER,1===this._desc.depthStencilTarget?n.DEPTH_ATTACHMENT:n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,k.glName));this._depthAttachment=k}};b.detachDepthStencilBuffer=function(){const k=this._context.gl,n=this._depthAttachment;n&&this._initialized&&(this._context.bindFramebuffer(this),k.framebufferRenderbuffer(k.FRAMEBUFFER,1===this._desc.depthStencilTarget?k.DEPTH_ATTACHMENT:k.DEPTH_STENCIL_ATTACHMENT,k.RENDERBUFFER,
null));this._depthAttachment=null;return n};b.copyToTexture=function(k,n,l,q,C,w,x){(0>k||0>n||0>C||0>w)&&console.error("Offsets cannot be negative!");(0>=l||0>=q)&&console.error("Copy width and height must be greater than zero!");var c=this._desc;const m=x.descriptor;3553!==x.descriptor.target&&console.error("Texture target must be TEXTURE_2D!");(k+l>c.width||n+q>c.height||C+l>m.width||w+q>m.height)&&console.error("Bad dimensions, the current input values will attempt to read or copy out of bounds!");
c=this._context;c.bindTexture(x,0);c.bindFramebuffer(this);c.gl.copyTexSubImage2D(3553,0,C,w,k,n,l,q)};b.readPixels=function(k,n,l,q,C,w,x){(0>=l||0>=q)&&console.error("Copy width and height must be greater than zero!");x||console.error("Target memory is not initialized!");this._context.bindFramebuffer(this);this._context.gl.readPixels(k,n,l,q,C,w,x)};b.resize=function(k,n){const l=this._desc;if(l.width!==k||l.height!==n)if(this._initialized){l.width=k;l.height=n;this._colorAttachments.forEach(q=>
{q&&q.resize(k,n)});if(null!=this._depthStencilTexture)this._depthStencilTexture.resize(k,n);else if(this._depthAttachment||this._stencilAttachment)this._depthAttachment&&this._depthAttachment.resize(k,n),this._stencilAttachment&&this._stencilAttachment.resize(k,n);this._context.getBoundFramebufferObject()===this&&this._context.bindFramebuffer(null);this._initialized=!1}else l.width=k,l.height=n,this._colorAttachments.forEach(q=>{q&&q.resize(k,n)}),this._depthStencilTexture&&this._depthStencilTexture.resize(k,
n)};b.initializeAndBind=function(){var k,n,l,q;const C=this._context.gl;if(this._initialized)C.bindFramebuffer(C.FRAMEBUFFER,this.glName);else{this._glName&&C.deleteFramebuffer(this._glName);var w=this._context,x=C.createFramebuffer(),c=this._desc,m=null!=(k=c.colorTarget)?k:1;k=null!=(n=c.width)?n:1;n=null!=(l=c.height)?l:1;C.bindFramebuffer(C.FRAMEBUFFER,x);0===this._colorAttachments.size&&(0===m?this._colorAttachments.set(36064,new A(w,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,
wrapMode:33071,width:c.width,height:c.height})):(l=new v(w,{internalFormat:32854,width:k,height:n}),this._colorAttachments.set(36064,l)));this._colorAttachments.forEach((f,e)=>{f&&(f instanceof A?C.framebufferTexture2D(C.FRAMEBUFFER,e,C.TEXTURE_2D,f.glName,0):C.framebufferRenderbuffer(C.FRAMEBUFFER,C.COLOR_ATTACHMENT0,C.RENDERBUFFER,f.glName))});l=null!=(q=c.depthStencilTarget)?q:0;switch(l){case 1:case 3:this._depthAttachment||(this._depthAttachment=new v(w,{internalFormat:1===c.depthStencilTarget?
33189:34041,width:k,height:n}));C.framebufferRenderbuffer(C.FRAMEBUFFER,1===l?C.DEPTH_ATTACHMENT:C.DEPTH_STENCIL_ATTACHMENT,C.RENDERBUFFER,this._depthAttachment.glName);break;case 2:this._stencilAttachment||(this._stencilAttachment=new v(w,{internalFormat:36168,width:k,height:n}));C.framebufferRenderbuffer(C.FRAMEBUFFER,C.STENCIL_ATTACHMENT,C.RENDERBUFFER,this._stencilAttachment.glName);break;case 4:this._depthStencilTexture||(w.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture as an attachment!"),
this._depthStencilTexture=new A(w,{target:3553,pixelFormat:34041,dataType:34042,samplingMode:9728,wrapMode:33071,width:k,height:n})),C.framebufferTexture2D(C.FRAMEBUFFER,C.DEPTH_STENCIL_ATTACHMENT,C.TEXTURE_2D,this._depthStencilTexture.glName,0)}this._glName=x;this._initialized=!0}};b._disposeColorAttachments=function(){this._colorAttachments.forEach((k,n)=>{if(k instanceof A){if(this._initialized){this._context.bindFramebuffer(this);var l=this._context.gl;l.framebufferTexture2D(l.FRAMEBUFFER,n,l.TEXTURE_2D,
null,0)}k.dispose()}else k instanceof WebGLRenderbuffer&&(l=this._context.gl,this._initialized&&(this._context.bindFramebuffer(this),l.framebufferRenderbuffer(l.FRAMEBUFFER,n,l.RENDERBUFFER,null)),this._context.gl.deleteRenderbuffer(k))});this._colorAttachments.clear()};b._disposeDepthStencilAttachments=function(){const k=this._context.gl;this._depthAttachment&&(this._initialized&&(this._context.bindFramebuffer(this),k.framebufferRenderbuffer(k.FRAMEBUFFER,1===this._desc.depthStencilTarget?k.DEPTH_ATTACHMENT:
k.DEPTH_STENCIL_ATTACHMENT,k.RENDERBUFFER,null)),this._depthAttachment.dispose(),this._depthAttachment=null);this._stencilAttachment&&(this._initialized&&(this._context.bindFramebuffer(this),k.framebufferRenderbuffer(k.FRAMEBUFFER,k.STENCIL_ATTACHMENT,k.RENDERBUFFER,null)),this._stencilAttachment.dispose(),this._stencilAttachment=null);this._depthStencilTexture&&(this._initialized&&(this._context.bindFramebuffer(this),k.framebufferTexture2D(k.FRAMEBUFFER,k.DEPTH_STENCIL_ATTACHMENT,k.TEXTURE_2D,null,
0)),this._depthStencilTexture.dispose(),this._depthStencilTexture=null)};p._validateBufferDimensions=function(k,n){console.assert(0<=k.width&&0<=k.height);void 0!==n.width&&0<=n.width&&void 0!==n.height&&0<=n.height?n.width===k.width&&n.height===k.height||console.error("Renderbuffer dimensions must match the framebuffer's!"):(n.width=k.width,n.height=k.height)};b._validateTextureDimensions=function(k,n){console.assert(0<=k.width&&0<=k.height);3553!==k.target&&console.error("Texture type must be TEXTURE_2D!");
void 0!==n.width&&0<=n.width&&void 0!==n.height&&0<=n.height?n.width===k.width&&n.height===k.height||console.error("Color attachment texture must match the framebuffer's!"):(n.width=k.width,n.height=k.height)};b._validateColorAttachmentPoint=function(k){if(-1===p._MAX_COLOR_ATTACHMENTS){const n=this._context.capabilities.drawBuffers;p._MAX_COLOR_ATTACHMENTS=n?this._context.gl.getParameter(n.MAX_COLOR_ATTACHMENTS):1}k-=36064;k+1>p._MAX_COLOR_ATTACHMENTS&&t.error("esri.FrameBufferObject",`illegal attachment point for color attachment: ${k+
1}. Implementation supports up to ${p._MAX_COLOR_ATTACHMENTS} color attachments`)};a._createClass(p,[{key:"glName",get:function(){return this._glName}},{key:"descriptor",get:function(){return this._desc}},{key:"colorTexture",get:function(){const k=this._colorAttachments.get(36064);return k&&k instanceof A?k:null}},{key:"colorAttachment",get:function(){return this._colorAttachments.get(36064)}},{key:"depthStencilAttachment",get:function(){return this._depthStencilTexture||this._depthAttachment||this._stencilAttachment}},
{key:"depthStencilTexture",get:function(){return this._depthStencilTexture}},{key:"width",get:function(){return this._desc.width}},{key:"height",get:function(){return this._desc.height}}]);return p}();g._MAX_COLOR_ATTACHMENTS=-1;return g})},"esri/views/webgl/ProgramCache":function(){define(["./programUtils"],function(a){return function(){function g(A){this._programCacheByTemplate=new Map;this._rctx=A}var r=g.prototype;r.dispose=function(){this._programCacheByTemplate.forEach(A=>{A.programs.forEach(v=>
{v.dispose()})});this._programCacheByTemplate=null};r.getProgram=function(A,v){this._programCacheByTemplate.has(A)||this.addProgramTemplate(A,t=>a.createProgram(this._rctx,A,t));return this.getProgramTemplateInstance(A,v)};r.addProgramTemplate=function(A,v){this._programCacheByTemplate.set(A,{constructor:v,programs:new Map})};r.getProgramTemplateInstance=function(A,v){if(A=this._programCacheByTemplate.get(A)){const t=v?JSON.stringify(v):"default";A.programs.has(t)||(v=A.constructor(v),A.programs.set(t,
v));return A.programs.get(t)}return null};return g}()})},"esri/views/webgl/programUtils":function(){define(["exports","./Program"],function(a,g){a.createProgram=function(r,A,v,t){v=v||{};t=t||"";v="function"===typeof A.shaders?A.shaders(v):A.shaders;return new g(r,t+v.vertexShader,t+v.fragmentShader,A.attributes)};a.glslifyDefineMap=function(r){let A="";for(const v in r){const t=r[v];if("boolean"===typeof t)t&&(A+=`#define ${v}\n`);else if("number"===typeof t)A+=`#define ${v} ${t.toFixed()}\n`;else if("object"===
typeof t){const p=t.options;let b=0;for(const k in p)A+=`#define ${p[k]} ${(b++).toFixed()}\n`;A+=`#define ${v} ${p[t.value]}\n`}}return A};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/webgl/RenderingContext":function(){define("../../chunks/_rollupPluginBabelHelpers ../../core/has ../../core/maybe ./renderState ./capabilities/isWebGL2Context ./enums ./InstanceCounter ./capabilities/load".split(" "),function(a,g,r,A,v,t,p,b){function k(n,l,q,C){l?C!==l&&n.bindBuffer(q,l.glName):
n.bindBuffer(q,null);return l}return function(){function n(q,C){this.gl=null;this.instanceCounter=new p.InstanceCounter;this._blendEnabled=!1;this._blendColorState={r:0,g:0,b:0,a:0};this._blendFunctionState={srcRGB:1,dstRGB:0,srcAlpha:1,dstAlpha:0};this._blendEquationState={mode:32774,modeAlpha:32774};this._colorMaskState={r:!0,g:!0,b:!0,a:!0};this._polygonCullingEnabled=!1;this._cullFace=1029;this._frontFace=2305;this._scissorTestEnabled=!1;this._scissorRect={x:0,y:0,width:0,height:0};this._depthTestEnabled=
!1;this._depthFunction=513;this._clearDepth=1;this._depthWriteEnabled=!0;this._depthRange={zNear:0,zFar:1};this._viewport=null;this._polygonOffsetFillEnabled=this._stencilTestEnabled=!1;this._polygonOffset=[0,0];this._stencilFunction={face:1032,func:519,ref:0,mask:1};this._clearStencil=0;this._stencilWriteMask=1;this._stencilOperation={face:1032,fail:7680,zFail:7680,zPass:7680};this._clearColor={r:0,g:0,b:0,a:0};this._activeRenderbuffer=this._activeFramebuffer=this._activeIndexBuffer=this._activeVertexBuffer=
this._activeShaderProgram=null;this._activeTextureUnit=0;this._textureUnitMap=[];this._numOfTriangles=this._numOfDrawCalls=0;this.contextVersion=v(q)?"webgl2":"webgl";this.gl=q;q instanceof WebGLRenderingContext&&this.gl.getExtension("OES_element_index_uint");this._capabilities=b.loadCapabilities(q,C);q=this.gl.getParameter(this.gl.VIEWPORT);this._viewport={x:q[0],y:q[1],width:q[2],height:q[3]};this._stateTracker=new A.StateTracker({setBlending:w=>{w?(this.setBlendingEnabled(!0),this.setBlendEquationSeparate(w.opRgb,
w.opAlpha),this.setBlendFunctionSeparate(w.srcRgb,w.dstRgb,w.srcAlpha,w.dstAlpha),w=w.color,this.setBlendColor(w.r,w.g,w.b,w.a)):this.setBlendingEnabled(!1)},setCulling:w=>{w?(this.setFaceCullingEnabled(!0),this.setCullFace(w.face),this.setFrontFace(w.mode)):this.setFaceCullingEnabled(!1)},setPolygonOffset:w=>{w?(this.setPolygonOffsetFillEnabled(!0),this.setPolygonOffset(w.factor,w.units)):this.setPolygonOffsetFillEnabled(!1)},setDepthTest:w=>{w?(this.setDepthTestEnabled(!0),this.setDepthFunction(w.func)):
this.setDepthTestEnabled(!1)},setStencilTest:w=>{if(w){this.setStencilTestEnabled(!0);const x=w.function;this.setStencilFunction(x.func,x.ref,x.mask);w=w.operation;this.setStencilOp(w.fail,w.zFail,w.zPass)}else this.setStencilTestEnabled(!1)},setDepthWrite:w=>{w?(this.setDepthWriteEnabled(!0),this.setDepthRange(w.zNear,w.zFar)):this.setDepthWriteEnabled(!1)},setColorWrite:w=>{w?this.setColorMask(w.r,w.g,w.b,w.a):this.setColorMask(!1,!1,!1,!1)},setStencilWrite:w=>{w?this.setStencilWriteMask(w.mask):
this.setStencilWriteMask(0)}});this.enforceState()}var l=n.prototype;l.isWebGL2Context=function(){return"webgl2"===this.contextVersion};l.dispose=function(){this.bindVAO(null);this.unbindBuffer(34962);this.unbindBuffer(34963);this._textureUnitMap=[];this._capabilities=this.gl=null};l.setPipelineState=function(q){this._stateTracker.setPipeline(q)};l.setBlendingEnabled=function(q){this._blendEnabled!==q&&(!0===q?this.gl.enable(this.gl.BLEND):this.gl.disable(this.gl.BLEND),this._blendEnabled=q,this._stateTracker.invalidateBlending())};
l.setBlendColor=function(q,C,w,x){if(q!==this._blendColorState.r||C!==this._blendColorState.g||w!==this._blendColorState.b||x!==this._blendColorState.a)this.gl.blendColor(q,C,w,x),this._blendColorState.r=q,this._blendColorState.g=C,this._blendColorState.b=w,this._blendColorState.a=x,this._stateTracker.invalidateBlending()};l.setBlendFunction=function(q,C){if(q!==this._blendFunctionState.srcRGB||C!==this._blendFunctionState.dstRGB)this.gl.blendFunc(q,C),this._blendFunctionState.srcRGB=q,this._blendFunctionState.srcAlpha=
q,this._blendFunctionState.dstRGB=C,this._blendFunctionState.dstAlpha=C,this._stateTracker.invalidateBlending()};l.setBlendFunctionSeparate=function(q,C,w,x){if(this._blendFunctionState.srcRGB!==q||this._blendFunctionState.srcAlpha!==w||this._blendFunctionState.dstRGB!==C||this._blendFunctionState.dstAlpha!==x)this.gl.blendFuncSeparate(q,C,w,x),this._blendFunctionState.srcRGB=q,this._blendFunctionState.srcAlpha=w,this._blendFunctionState.dstRGB=C,this._blendFunctionState.dstAlpha=x,this._stateTracker.invalidateBlending()};
l.setBlendEquation=function(q){this._blendEquationState.mode!==q&&(this.gl.blendEquation(q),this._blendEquationState.mode=q,this._blendEquationState.modeAlpha=q,this._stateTracker.invalidateBlending())};l.setBlendEquationSeparate=function(q,C){if(this._blendEquationState.mode!==q||this._blendEquationState.modeAlpha!==C)this.gl.blendEquationSeparate(q,C),this._blendEquationState.mode=q,this._blendEquationState.modeAlpha=C,this._stateTracker.invalidateBlending()};l.setColorMask=function(q,C,w,x){if(this._colorMaskState.r!==
q||this._colorMaskState.g!==C||this._colorMaskState.b!==w||this._colorMaskState.a!==x)this.gl.colorMask(q,C,w,x),this._colorMaskState.r=q,this._colorMaskState.g=C,this._colorMaskState.b=w,this._colorMaskState.a=x,this._stateTracker.invalidateColorWrite()};l.setClearColor=function(q,C,w,x){if(this._clearColor.r!==q||this._clearColor.g!==C||this._clearColor.b!==w||this._clearColor.a!==x)this.gl.clearColor(q,C,w,x),this._clearColor.r=q,this._clearColor.g=C,this._clearColor.b=w,this._clearColor.a=x};
l.setFaceCullingEnabled=function(q){this._polygonCullingEnabled!==q&&(!0===q?this.gl.enable(this.gl.CULL_FACE):this.gl.disable(this.gl.CULL_FACE),this._polygonCullingEnabled=q,this._stateTracker.invalidateCulling())};l.setPolygonOffsetFillEnabled=function(q){this._polygonOffsetFillEnabled!==q&&(!0===q?this.gl.enable(this.gl.POLYGON_OFFSET_FILL):this.gl.disable(this.gl.POLYGON_OFFSET_FILL),this._polygonOffsetFillEnabled=q,this._stateTracker.invalidatePolygonOffset())};l.setPolygonOffset=function(q,
C){if(this._polygonOffset[0]!==q||this._polygonOffset[1]!==C)this._polygonOffset[0]=q,this._polygonOffset[1]=C,this.gl.polygonOffset(q,C),this._stateTracker.invalidatePolygonOffset()};l.setCullFace=function(q){this._cullFace!==q&&(this.gl.cullFace(q),this._cullFace=q,this._stateTracker.invalidateCulling())};l.setFrontFace=function(q){this._frontFace!==q&&(this.gl.frontFace(q),this._frontFace=q,this._stateTracker.invalidateCulling())};l.setScissorTestEnabled=function(q){this._scissorTestEnabled!==
q&&(!0===q?this.gl.enable(this.gl.SCISSOR_TEST):this.gl.disable(this.gl.SCISSOR_TEST),this._scissorTestEnabled=q)};l.setScissorRect=function(q,C,w,x){if(this._scissorRect.x!==q||this._scissorRect.y!==C||this._scissorRect.width!==w||this._scissorRect.height!==x)this.gl.scissor(q,C,w,x),this._scissorRect.x=q,this._scissorRect.y=C,this._scissorRect.width=w,this._scissorRect.height=x};l.setDepthTestEnabled=function(q){this._depthTestEnabled!==q&&(!0===q?this.gl.enable(this.gl.DEPTH_TEST):this.gl.disable(this.gl.DEPTH_TEST),
this._depthTestEnabled=q,this._stateTracker.invalidateDepthTest())};l.setClearDepth=function(q){this._clearDepth!==q&&(this.gl.clearDepth(q),this._clearDepth=q)};l.setDepthFunction=function(q){this._depthFunction!==q&&(this.gl.depthFunc(q),this._depthFunction=q,this._stateTracker.invalidateDepthTest())};l.setDepthWriteEnabled=function(q){this._depthWriteEnabled!==q&&(this.gl.depthMask(q),this._depthWriteEnabled=q,this._stateTracker.invalidateDepthWrite())};l.setDepthRange=function(q,C){if(this._depthRange.zNear!==
q||this._depthRange.zFar!==C)this.gl.depthRange(q,C),this._depthRange.zNear=q,this._depthRange.zFar=C,this._stateTracker.invalidateDepthWrite()};l.setStencilTestEnabled=function(q){this._stencilTestEnabled!==q&&(!0===q?this.gl.enable(this.gl.STENCIL_TEST):this.gl.disable(this.gl.STENCIL_TEST),this._stencilTestEnabled=q,this._stateTracker.invalidateStencilTest())};l.setClearStencil=function(q){q!==this._clearStencil&&(this.gl.clearStencil(q),this._clearStencil=q)};l.setStencilFunction=function(q,C,
w){if(this._stencilFunction.func!==q||this._stencilFunction.ref!==C||this._stencilFunction.mask!==w)this.gl.stencilFunc(q,C,w),this._stencilFunction.face=1032,this._stencilFunction.func=q,this._stencilFunction.ref=C,this._stencilFunction.mask=w,this._stateTracker.invalidateStencilTest()};l.setStencilFunctionSeparate=function(q,C,w,x){if(this._stencilFunction.face!==q||this._stencilFunction.func!==C||this._stencilFunction.ref!==w||this._stencilFunction.mask!==x)this.gl.stencilFuncSeparate(q,C,w,x),
this._stencilFunction.face=q,this._stencilFunction.func=C,this._stencilFunction.ref=w,this._stencilFunction.mask=x,this._stateTracker.invalidateStencilTest()};l.setStencilWriteMask=function(q){this._stencilWriteMask!==q&&(this.gl.stencilMask(q),this._stencilWriteMask=q,this._stateTracker.invalidateStencilWrite())};l.setStencilOp=function(q,C,w){if(this._stencilOperation.fail!==q||this._stencilOperation.zFail!==C||this._stencilOperation.zPass!==w)this.gl.stencilOp(q,C,w),this._stencilOperation.face=
1032,this._stencilOperation.fail=q,this._stencilOperation.zFail=C,this._stencilOperation.zPass=w,this._stateTracker.invalidateStencilTest()};l.setStencilOpSeparate=function(q,C,w,x){if(this._stencilOperation.face!==q||this._stencilOperation.fail!==C||this._stencilOperation.zFail!==w||this._stencilOperation.zPass!==x)this.gl.stencilOpSeparate(q,C,w,x),this._stencilOperation.face=q,this._stencilOperation.face=q,this._stencilOperation.fail=C,this._stencilOperation.zFail=w,this._stencilOperation.zPass=
x,this._stateTracker.invalidateStencilTest()};l.setActiveTexture=function(q){const C=this._activeTextureUnit;0<=q&&q!==this._activeTextureUnit&&(this.gl.activeTexture(t.BASE_TEXTURE_UNIT+q),this._activeTextureUnit=q);return C};l.clear=function(q){q&&this.gl.clear(q)};l.clearSafe=function(q,C=255){q&&(q&16384&&this.setColorMask(!0,!0,!0,!0),q&256&&this.setDepthWriteEnabled(!0),q&1024&&this.setStencilWriteMask(C),this.gl.clear(q))};l.drawArrays=function(q,C,w){this.gl.drawArrays(q,C,w)};l.drawElements=
function(q,C,w,x){5123===w?this.gl.drawElements(q,C,w,x):5125===w&&this.gl.drawElements(q,C,w,x)};l.logIno=function(){};l.setViewport=function(q,C,w,x){const c=this._viewport;if(c.x!==q||c.y!==C||c.width!==w||c.height!==x)c.x=q,c.y=C,c.width=w,c.height=x,this.gl.viewport(q,C,w,x)};l.getViewport=function(){return{x:this._viewport.x,y:this._viewport.y,width:this._viewport.width,height:this._viewport.height}};l.bindProgram=function(q){q?this._activeShaderProgram!==q&&(q.initialize(),this.gl.useProgram(q.glName),
this._activeShaderProgram=q):(this.gl.useProgram(null),this._activeShaderProgram=null)};l.bindTexture=function(q,C){(C>=this.parameters.maxTextureImageUnits||0>C)&&console.error("Input texture unit is out of range of available units!");const w=this._textureUnitMap[C];this.setActiveTexture(C);null==q||null==q.glName?(null!=w&&this.gl.bindTexture(w.descriptor.target,null),this._textureUnitMap[C]=null):w===q?q.applyChanges():(this.gl.bindTexture(q.descriptor.target,q.glName),q.applyChanges(),this._textureUnitMap[C]=
q)};l.unbindTextureAllUnits=function(q){for(let C=0;C<this.parameters.maxTextureImageUnits;C++)this._textureUnitMap[C]===q&&this.bindTexture(null,C)};l.bindFramebuffer=function(q){r.isNone(q)?(this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this._activeFramebuffer=null):this._activeFramebuffer!==q&&(q.initializeAndBind(),this._activeFramebuffer=q)};l.bindBuffer=function(q){q&&(34962===q.bufferType?this._activeVertexBuffer=k(this.gl,q,q.bufferType,this._activeVertexBuffer):this._activeIndexBuffer=
k(this.gl,q,q.bufferType,this._activeIndexBuffer))};l.bindRenderbuffer=function(q){const C=this.gl;q||(C.bindRenderbuffer(C.RENDERBUFFER,null),this._activeRenderbuffer=null);this._activeRenderbuffer!==q&&(C.bindRenderbuffer(C.RENDERBUFFER,q.glName),this._activeRenderbuffer=q)};l.unbindBuffer=function(q){34962===q?this._activeVertexBuffer=k(this.gl,null,q,this._activeVertexBuffer):this._activeIndexBuffer=k(this.gl,null,q,this._activeIndexBuffer)};l.bindVAO=function(q){q?this._activeVertexArrayObject&&
this._activeVertexArrayObject===q||(q.bind(),this._activeVertexArrayObject=q):this._activeVertexArrayObject&&(this._activeVertexArrayObject.unbind(),this._activeVertexArrayObject=null)};l.getBoundTexture=function(q){return this._textureUnitMap[q]};l.getBoundFramebufferObject=function(){return this._activeFramebuffer};l.getBoundVAO=function(){return this._activeVertexArrayObject};l.resetState=function(){this.bindProgram(null);this.bindVAO(null);this.bindFramebuffer(null);this.unbindBuffer(34962);this.unbindBuffer(34963);
for(let q=0;q<this.parameters.maxTextureImageUnits;q++)this.bindTexture(null,q);this.setBlendingEnabled(!1);this.setBlendFunction(1,0);this.setBlendEquation(32774);this.setBlendColor(0,0,0,0);this.setFaceCullingEnabled(!1);this.setCullFace(1029);this.setFrontFace(2305);this.setPolygonOffsetFillEnabled(!1);this.setPolygonOffset(0,0);this.setScissorTestEnabled(!1);this.setScissorRect(0,0,this.gl.canvas.width,this.gl.canvas.height);this.setDepthTestEnabled(!1);this.setDepthFunction(513);this.setDepthRange(0,
1);this.setStencilTestEnabled(!1);this.setStencilFunction(519,0,0);this.setStencilOp(7680,7680,7680);this.setClearColor(0,0,0,0);this.setClearDepth(1);this.setClearStencil(0);this.setColorMask(!0,!0,!0,!0);this.setStencilWriteMask(4294967295);this.setDepthWriteEnabled(!0);this.setViewport(0,0,this.gl.canvas.width,this.gl.canvas.height)};l.enforceState=function(){const q=this.gl;var C=this.capabilities.vao;C&&C.bindVertexArray(null);for(var w=0;w<this.parameters.maxVertexAttributes;w++)q.disableVertexAttribArray(w);
this._activeVertexBuffer?q.bindBuffer(this._activeVertexBuffer.bufferType,this._activeVertexBuffer.glName):q.bindBuffer(34962,null);this._activeIndexBuffer?q.bindBuffer(this._activeIndexBuffer.bufferType,this._activeIndexBuffer.glName):q.bindBuffer(34963,null);if(C&&this._activeVertexArrayObject){if(C=this._activeVertexArrayObject)this._activeVertexArrayObject.unbind(),this._activeVertexArrayObject=null;this.bindVAO(C)}q.bindFramebuffer(q.FRAMEBUFFER,this._activeFramebuffer?this._activeFramebuffer.glName:
null);q.useProgram(this._activeShaderProgram?this._activeShaderProgram.glName:null);q.blendColor(this._blendColorState.r,this._blendColorState.g,this._blendColorState.b,this._blendColorState.a);q.bindRenderbuffer(q.RENDERBUFFER,this._activeRenderbuffer?this._activeRenderbuffer.glName:null);!0===this._blendEnabled?q.enable(this.gl.BLEND):q.disable(this.gl.BLEND);q.blendEquationSeparate(this._blendEquationState.mode,this._blendEquationState.modeAlpha);q.blendFuncSeparate(this._blendFunctionState.srcRGB,
this._blendFunctionState.dstRGB,this._blendFunctionState.srcAlpha,this._blendFunctionState.dstAlpha);q.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearColor.a);q.clearDepth(this._clearDepth);q.clearStencil(this._clearStencil);q.colorMask(this._colorMaskState.r,this._colorMaskState.g,this._colorMaskState.b,this._colorMaskState.a);q.cullFace(this._cullFace);q.depthFunc(this._depthFunction);q.depthRange(this._depthRange.zNear,this._depthRange.zFar);!0===this._depthTestEnabled?
q.enable(q.DEPTH_TEST):q.disable(q.DEPTH_TEST);q.depthMask(this._depthWriteEnabled);q.frontFace(this._frontFace);q.lineWidth(1);!0===this._polygonCullingEnabled?q.enable(q.CULL_FACE):q.disable(q.CULL_FACE);q.polygonOffset(this._polygonOffset[0],this._polygonOffset[1]);!0===this._polygonOffsetFillEnabled?q.enable(q.POLYGON_OFFSET_FILL):q.disable(q.POLYGON_OFFSET_FILL);q.scissor(this._scissorRect.x,this._scissorRect.y,this._scissorRect.width,this._scissorRect.height);!0===this._scissorTestEnabled?q.enable(q.SCISSOR_TEST):
q.disable(q.SCISSOR_TEST);q.stencilFunc(this._stencilFunction.func,this._stencilFunction.ref,this._stencilFunction.mask);q.stencilOpSeparate(this._stencilOperation.face,this._stencilOperation.fail,this._stencilOperation.zFail,this._stencilOperation.zPass);!0===this._stencilTestEnabled?q.enable(q.STENCIL_TEST):q.disable(q.STENCIL_TEST);q.stencilMask(this._stencilWriteMask);for(C=0;C<this.parameters.maxTextureImageUnits;C++)q.activeTexture(t.BASE_TEXTURE_UNIT+C),q.bindTexture(3553,null),(w=this._textureUnitMap[C])&&
q.bindTexture(w.descriptor.target,w.glName);q.activeTexture(t.BASE_TEXTURE_UNIT+this._activeTextureUnit);q.viewport(this._viewport.x,this._viewport.y,this._viewport.width,this._viewport.height)};a._createClass(n,[{key:"contextAttributes",get:function(){return this.gl.getContextAttributes()}},{key:"parameters",get:function(){if(!this._parameters){const q=this.capabilities.textureFilterAnisotropic;this._parameters={versionString:this.gl.getParameter(this.gl.VERSION),maxVertexTextureImageUnits:this.gl.getParameter(this.gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS),
maxVertexAttributes:this.gl.getParameter(this.gl.MAX_VERTEX_ATTRIBS),maxMaxAnisotropy:q?this.gl.getParameter(q.MAX_TEXTURE_MAX_ANISOTROPY):void 0,maxTextureImageUnits:this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS),maxTextureSize:this.gl.getParameter(this.gl.MAX_TEXTURE_SIZE)}}return this._parameters}},{key:"capabilities",get:function(){return this._capabilities}}]);return n}()})},"esri/views/webgl/enums":function(){define(["exports"],function(a){a.BASE_TEXTURE_UNIT=33984;Object.defineProperty(a,
"__esModule",{value:!0})})},"esri/views/webgl/InstanceCounter":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers"],function(a,g){let r=function(){function A(){this._current=[];this._max=[];for(this._allocations=new Map;6>this._current.length;)this._current.push(0),this._max.push(0)}var v=A.prototype;v.resetMax=function(){for(this._max.length=0;this._max.length<this._current.length;)this._max.push(0)};v.increment=function(t,p){p=++this._current[t];this._max[t]=Math.max(p,this._max[t])};
v.decrement=function(t,p){--this._current[t]};v.printResourceCount=function(){console.log("Live objects:");console.log(`Textures: ${this._current[0]}`);console.log(`Buffers: ${this._current[1]}`);console.log(`VAOs: ${this._current[2]}`);console.log(`Programs: ${this._current[3]}`);console.log(`Framebuffers: ${this._current[4]}`);console.log(`Renderbuffers: ${this._current[5]}`);if(0<this._allocations.size){console.log(`${this._allocations.size} live object allocations:`);const t=new Map;this._allocations.forEach(p=>
{var b;t.set(p,(null!=(b=t.get(p))?b:0)+1)});t.forEach((p,b)=>console.log(p," : ",b))}};g._createClass(A,[{key:"max",get:function(){return this._max}},{key:"current",get:function(){return this._current}}]);return A}();a.InstanceCounter=r;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/webgl/capabilities/load":function(){define("exports ./isWebGL2Context ./DisjointTimerQuery ./DrawBuffers ./Instancing ./LoseContext ./VertexArrayObjects".split(" "),function(a,g,r,A,v,t,p){function b(k,
n,l,q,C){if(q&&g(k))return!0;if(n[l])return!1;for(const w of C)if(k.getExtension(w))return!0;return!1}a.loadCapabilities=function(k,n){const l=n&&n.disabledExtensions||{},q=n&&n.debugWebGLExtensions||{};let C,w,x,c,m,f,e,d,h,F,E,u=null,z=null,y=null,B=null;return{get drawBuffers(){E||(E=A.load(k,l));return E},get instancing(){C||(C=v.load(k));return C},get vao(){w||(w=p.load(k,l));return w},get compressedTextureETC(){if(!x)if(l.compressedTextureETC)x=null;else{var H=k.getExtension("WEBGL_compressed_texture_etc");
x=H?{COMPRESSED_R11_EAC:H.COMPRESSED_R11_EAC,COMPRESSED_SIGNED_R11_EAC:H.COMPRESSED_SIGNED_R11_EAC,COMPRESSED_RG11_EAC:H.COMPRESSED_RG11_EAC,COMPRESSED_SIGNED_RG11_EAC:H.COMPRESSED_SIGNED_RG11_EAC,COMPRESSED_RGB8_ETC2:H.COMPRESSED_RGB8_ETC2,COMPRESSED_SRGB8_ETC2:H.COMPRESSED_SRGB8_ETC2,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:H.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:H.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2,COMPRESSED_RGBA8_ETC2_EAC:H.COMPRESSED_RGBA8_ETC2_EAC,
COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:H.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC}:null}return x},get compressedTextureS3TC(){if(!c)if(l.compressedTextureS3TC)c=null;else{var H=k.getExtension("WEBGL_compressed_texture_s3tc");c=H?{COMPRESSED_RGB_S3TC_DXT1:H.COMPRESSED_RGB_S3TC_DXT1_EXT,COMPRESSED_RGBA_S3TC_DXT1:H.COMPRESSED_RGBA_S3TC_DXT1_EXT,COMPRESSED_RGBA_S3TC_DXT3:H.COMPRESSED_RGBA_S3TC_DXT3_EXT,COMPRESSED_RGBA_S3TC_DXT5:H.COMPRESSED_RGBA_S3TC_DXT5_EXT}:null}return c},get textureFilterAnisotropic(){if(!m)if(l.textureFilterAnisotropic)m=
null;else{var H=k.getExtension("EXT_texture_filter_anisotropic")||k.getExtension("MOZ_EXT_texture_filter_anisotropic")||k.getExtension("WEBKIT_EXT_texture_filter_anisotropic");m=H?{MAX_TEXTURE_MAX_ANISOTROPY:H.MAX_TEXTURE_MAX_ANISOTROPY_EXT,TEXTURE_MAX_ANISOTROPY:H.TEXTURE_MAX_ANISOTROPY_EXT}:null}return m},get disjointTimerQuery(){f||(f=r.createDisjointTimerQuery(k,l));return f},get textureFloat(){if(!e)if(g(k))e={textureFloat:!0,textureFloatLinear:!l.textureFloatLinear&&!!k.getExtension("OES_texture_float_linear"),
textureHalfFloat:!0,textureHalfFloatLinear:!l.textureHalfFloatLinear&&!!k.getExtension("OES_texture_half_float_linear"),HALF_FLOAT:k.HALF_FLOAT};else if(k instanceof WebGLRenderingContext){const H=!l.textureHalfFloat&&k.getExtension("OES_texture_half_float");e={textureFloat:!l.textureFloat&&!!k.getExtension("OES_texture_float"),textureFloatLinear:!l.textureFloatLinear&&!!k.getExtension("OES_texture_float_linear"),textureHalfFloat:!!H,textureHalfFloatLinear:!l.textureHalfFloatLinear&&!!k.getExtension("OES_texture_half_float_linear"),
HALF_FLOAT:H?H.HALF_FLOAT_OES:void 0}}else e=null;return e},get colorBufferFloat(){if(!d)if(g(k)){var H=!l.colorBufferFloat&&k.getExtension("EXT_color_buffer_half_float"),D=!l.colorBufferFloat&&k.getExtension("EXT_color_buffer_float"),M=!l.colorBufferFloat&&k.getExtension("EXT_float_blend");d=H||D||M?{textureFloat:!!D,textureHalfFloat:!!H,R16F:k.R16F,RG16F:k.RG16F,RGBA16F:k.RGBA16F,R32F:k.R32F,RG32F:k.RG32F,RGBA32F:k.RGBA32F,R11F_G11F_B10F:k.R11F_G11F_B10F,RGB16F:k.RGB16F}:null}else k instanceof WebGLRenderingContext?
(H=!l.colorBufferFloat&&k.getExtension("EXT_color_buffer_half_float"),D=!l.colorBufferFloat&&k.getExtension("WEBGL_color_buffer_float"),M=!l.colorBufferFloat&&k.getExtension("EXT_float_blend"),d=H||D||M?{textureFloat:!!D,textureHalfFloat:!!H,RGBA16F:H?H.RGBA16F_EXT:void 0,RGB16F:H?H.RGB16F_EXT:void 0,RGBA32F:D?D.RGBA32F_EXT:void 0}:null):d=null;return d},get blendMinMax(){if(!h)if(g(k))h={MIN:k.MIN,MAX:k.MAX};else if(l.blendMinMax)h=null;else{{const H=k.getExtension("EXT_blend_minmax");h=H?{MIN:H.MIN_EXT,
MAX:H.MAX_EXT}:null}}return h},get depthTexture(){null===u&&(u=b(k,l,"depthTexture",!0,["WEBGL_depth_texture","MOZ_WEBGL_depth_texture","WEBKIT_WEBGL_depth_texture"]));return u},get standardDerivatives(){null===z&&(z=b(k,l,"standardDerivatives",!0,["OES_standard_derivatives"]));return z},get shaderTextureLOD(){null===y&&(y=b(k,l,"shaderTextureLOD",!0,["EXT_shader_texture_lod"]));return y},get fragDepth(){null===B&&(B=b(k,l,"fragDepth",!0,["EXT_frag_depth"]));return B},get loseContext(){F||(F=t.load(k,
q));return F},enable(H){return this[H]}}};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/webgl/capabilities/DisjointTimerQuery":function(){define(["exports","./isWebGL2Context"],function(a,g){let r=function(A,v,t,p,b,k,n,l){this.createQuery=A;this.resultAvailable=v;this.getResult=t;this.disjoint=p;this.beginTimeElapsed=b;this.endTimeElapsed=k;this.createTimestamp=n;this.timestampBits=l};a.DisjointTimerQuery=r;a.createDisjointTimerQuery=function(A,v){if(v.disjointTimerQuery)return null;
let t=A.getExtension("EXT_disjoint_timer_query_webgl2");return t&&g(A)?new r(()=>A.createQuery(),p=>A.getQueryParameter(p,A.QUERY_RESULT_AVAILABLE),p=>A.getQueryParameter(p,A.QUERY_RESULT),()=>A.getParameter(t.GPU_DISJOINT_EXT),p=>A.beginQuery(t.TIME_ELAPSED_EXT,p),()=>A.endQuery(t.TIME_ELAPSED_EXT),p=>t.queryCounterEXT(p,t.TIMESTAMP_EXT),()=>A.getQuery(t.TIMESTAMP_EXT,t.QUERY_COUNTER_BITS_EXT)):(t=A.getExtension("EXT_disjoint_timer_query"))?new r(()=>t.createQueryEXT(),p=>t.getQueryObjectEXT(p,t.QUERY_RESULT_AVAILABLE_EXT),
p=>t.getQueryObjectEXT(p,t.QUERY_RESULT_EXT),()=>A.getParameter(t.GPU_DISJOINT_EXT),p=>t.beginQueryEXT(t.TIME_ELAPSED_EXT,p),()=>t.endQueryEXT(t.TIME_ELAPSED_EXT),p=>t.queryCounterEXT(p,t.TIMESTAMP_EXT),()=>t.getQueryEXT(t.TIMESTAMP_EXT,t.QUERY_COUNTER_BITS_EXT)):null};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/webgl/capabilities/DrawBuffers":function(){define(["exports","./isWebGL2Context"],function(a,g){a.load=function(r,A){return A.disjointTimerQuery?null:g(r)?{drawBuffers:r.drawBuffers.bind(r),
MAX_DRAW_BUFFERS:r.MAX_DRAW_BUFFERS,MAX_COLOR_ATTACHMENTS:r.MAX_COLOR_ATTACHMENTS}:A.drawBuffers?null:(r=r.getExtension("WEBGL_draw_buffers"))?{drawBuffers:r.drawBuffersWEBGL.bind(r),MAX_DRAW_BUFFERS:r.MAX_DRAW_BUFFERS_WEBGL,MAX_COLOR_ATTACHMENTS:r.MAX_COLOR_ATTACHMENTS_WEBGL}:null};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/webgl/capabilities/Instancing":function(){define(["exports","./isWebGL2Context"],function(a,g){a.load=function(r){return g(r)?{drawArraysInstanced:r.drawArraysInstanced.bind(r),
drawElementsInstanced:r.drawElementsInstanced.bind(r),vertexAttribDivisor:r.vertexAttribDivisor.bind(r)}:(r=r.getExtension("ANGLE_instanced_arrays"))?{drawArraysInstanced:r.drawArraysInstancedANGLE.bind(r),drawElementsInstanced:r.drawElementsInstancedANGLE.bind(r),vertexAttribDivisor:r.vertexAttribDivisorANGLE.bind(r)}:null};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/webgl/capabilities/LoseContext":function(){define(["exports"],function(a){a.load=function(g,r){const A=r.loseContext&&
g.getExtension("WEBGL_lose_context");return A?{loseRenderingContext:()=>A.loseContext()}:null};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/webgl/capabilities/VertexArrayObjects":function(){define(["exports","./isWebGL2Context"],function(a,g){a.load=function(r,A){return g(r)?{createVertexArray:r.createVertexArray.bind(r),deleteVertexArray:r.deleteVertexArray.bind(r),bindVertexArray:r.bindVertexArray.bind(r)}:A.vao?null:(r=r.getExtension("OES_vertex_array_object")||r.getExtension("MOZ_OES_vertex_array_object")||
r.getExtension("WEBKIT_OES_vertex_array_object"))?{createVertexArray:r.createVertexArrayOES.bind(r),deleteVertexArray:r.deleteVertexArrayOES.bind(r),bindVertexArray:r.bindVertexArrayOES.bind(r)}:null};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/webgl/ShaderCompiler":function(){define(function(){return function(){function a(r){this.readFile=r}var g=a.prototype;g.resolveIncludes=function(r){return this.resolve(r)};g.resolve=function(r,A=new Map){if(A.has(r))return A.get(r);const v=
this.read(r);if(!v)throw Error(`cannot find shader file ${r}`);const t=/^[^\S\n]*#include\s+<(\S+)>[^\S\n]?/gm;let p=t.exec(v);const b=[];for(;null!=p;)b.push({path:p[1],start:p.index,length:p[0].length}),p=t.exec(v);let k=0,n="";b.forEach(l=>{n+=v.slice(k,l.start);n+=A.has(l.path)?"":this.resolve(l.path,A);k=l.start+l.length});n+=v.slice(k);A.set(r,n);return n};g.read=function(r){return this.readFile(r)};return a}()})},"esri/views/3d/webgl-engine/shaders/LaserlineTechnique":function(){define("require exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/mathUtils ../core/shaderTechnique/ReloadableShaderModule ../core/shaderTechnique/ShaderTechnique ../core/shaderTechnique/ShaderTechniqueConfiguration ../lib/DefaultVertexAttributeLocations ../../../webgl/Program ../../../webgl/renderState ../../../../chunks/Laserlines.glsl".split(" "),
function(a,g,r,A,v,t,p,b,k,n,l,q){p=function(C){function w(){return C.apply(this,arguments)||this}r._inheritsLoose(w,C);var x=w.prototype;x.initializeProgram=function(c){const m=w.shader.get().build(this.configuration);return new n(c.rctx,m.generateSource("vertex"),m.generateSource("fragment"),k.Default3D)};x.bind=function(c,m){this.program.setUniform3fv("innerColor",c.innerColor);this.program.setUniform1f("innerWidth",c.innerWidth*m.pixelRatio);this.program.setUniform3fv("glowColor",c.glowColor);
this.program.setUniform1f("glowWidth",c.glowWidth*m.pixelRatio);this.program.setUniform1f("glowFalloff",c.glowFalloff);this.program.setUniform1f("globalAlpha",c.globalAlpha);this.configuration.contrastControlEnabled&&this.program.setUniform1f("globalAlphaContrastBoost",null!=c.globalAlphaContrastBoost?c.globalAlphaContrastBoost:1);c=null!=c.angleCutoff?c.angleCutoff:q.defaultAngleCutoff;this.program.setUniform2f("angleCutoff",Math.cos(c),Math.cos(Math.max(0,c-v.deg2rad(2))));this.configuration.intersectsLineEnabled&&
this.program.setUniform1f("perScreenPixelRatio",m.perScreenPixelRatio)};x.initializePipeline=function(){return l.makePipelineState({blending:l.simpleBlendingParams(1,771),colorWrite:l.defaultColorWriteParams})};return w}(p.ShaderTechnique);p.shader=new t.ReloadableShaderModule(q.LaserlinesShader,()=>new Promise(function(C,w){a(["./Laserlines.glsl"],C,w)}));t=function(C){function w(){var x=C.apply(this,arguments)||this;x.heightManifoldEnabled=!1;x.pointDistanceEnabled=!1;x.lineVerticalPlaneEnabled=
!1;x.intersectsLineEnabled=!1;x.contrastControlEnabled=!1;return x}r._inheritsLoose(w,C);return w}(b.ShaderTechniqueConfiguration);A.__decorate([b.parameter()],t.prototype,"heightManifoldEnabled",void 0);A.__decorate([b.parameter()],t.prototype,"pointDistanceEnabled",void 0);A.__decorate([b.parameter()],t.prototype,"lineVerticalPlaneEnabled",void 0);A.__decorate([b.parameter()],t.prototype,"intersectsLineEnabled",void 0);A.__decorate([b.parameter()],t.prototype,"contrastControlEnabled",void 0);g.LaserlineTechnique=
p;g.LaserlineTechniqueConfiguration=t;Object.defineProperty(g,"__esModule",{value:!0})})},"esri/views/3d/interactive/visualElements/Object3DVisualElement":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../chunks/mat4 ../../../../chunks/mat4f64 ../../webgl-engine/lib/Object3D ../../webgl-engine/lib/WebGLLayer ./VisualElement".split(" "),function(a,g,r,A,v,t,p,b){b=function(k){function n(q){q=k.call(this,q.view)||this;q._resources=null;q._transform=
v.create();return q}g._inheritsLoose(n,k);var l=n.prototype;l.recreate=function(){this.attached&&this.createResources()};l.recreateGeometry=function(){if(!r.isNone(this._resources)){var q=this._resources.object,C=this.view._stage;C.removeMany(q.geometries);q.removeAllGeometries();this.createGeometries(q);this.visible||q.setVisible(this.visible);C.addMany(q.geometries);this._resources.layer.commit()}};l.createResources=function(){this.destroyResources();const q=this.view._stage;if(q){var C=new p.WebGLLayer({isPickable:!1});
q.add(C);var w=new t.Object3D({castShadow:!1});w.transformation=this._transform;this.createExternalResources();this.createGeometries(w);q.addMany(w.geometries);this.forEachExternalMaterial(x=>q.add(x));q.add(w);C.add(w);C.commit();this.visible||(w.setVisible(!1),C.commit());this._resources={layer:C,object:w}}};l.destroyResources=function(){const q=this.view._stage;!r.isNone(this._resources)&&q&&(q.remove(this._resources.object),q.remove(this._resources.layer),this.forEachExternalMaterial(C=>{q.remove(C);
C.dispose()}),q.removeMany(this._resources.object.geometries),this._resources.object.dispose(),this.destroyExternalResources(),this._resources=null)};l.updateVisibility=function(q){r.isNone(this._resources)||(this._resources.object.setVisible(q),this._resources.layer.commit())};g._createClass(n,[{key:"object",get:function(){return r.isSome(this._resources)?this._resources.object:null}},{key:"transform",get:function(){return this._transform},set:function(q){A.copy(this._transform,q);r.isSome(this._resources)&&
(this._resources.object.transformation=this._transform,this._resources.layer.commit())}}]);return n}(b.VisualElement);a.Object3DVisualElement=b;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/Object3D":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../chunks/vec3f64 ../../../../chunks/vec3 ../../support/mathUtils ../../../../chunks/mat4 ../../../../chunks/mat4f64 ../../../../chunks/sphere ./Util ./ContentObject ./GeometryRecord ./Object3DStateID ../materials/renderers/utils".split(" "),
function(a,g,r,A,v,t,p,b,k,n,l,q,C,w){l=function(m){function f(d={}){var h=m.call(this)||this;h.type=1;h._geometryRecords=[];h._geometries=[];h._objectTransformation=b.create();h._bvObjectSpace=new c;h._bvWorldSpace=new c;h._bvDirty=!0;h._hasVolatileTransformation=!1;h._visible=!0;h.castShadow=null!=d.castShadow?d.castShadow:!0;h.metadata=d.metadata;h.metadata&&h.metadata.isElevationSource&&(h.metadata.lastValidElevationBB=new x);h.transformation=b.create();const {geometries:F,materials:E,transformations:u,
origins:z}=d;if(!Array.isArray(F))return g._assertThisInitialized(h);n.assert(E.length===F.length,"Object3D: materials don't match geometries");n.assert(u.length===F.length,"Object3D: transformations don't match geometries");h._geometryRecords.length=F.length;h._geometries.length=F.length;for(d=0;d<F.length;d++)h._geometries[d]=F[d],h._geometryRecords[d]=q.GeometryRecord.pool.acquire(F[d],E[d],b.clone(u[d]),{highlights:null,occludees:null,visible:!0},z&&z[d]);return h}g._inheritsLoose(f,m);var e=
f.prototype;e.dispose=function(){this._geometryRecords.length=0;this._geometries.length=0};e.getNumGeometryRecords=function(){return this._geometryRecords.length};e.getGeometryRecord=function(d){n.assert(0<=d&&d<this._geometryRecords.length,"Object3d.getGeometryDataByIndex: index out of range");return this._geometryRecords[d]};e.addGeometry=function(d,h,F,E,u,z){F=F?F:b.IDENTITY;this._geometries.push(d);d=q.GeometryRecord.pool.acquire(d,h,F,E||{highlights:null,occludees:null,visible:!0},u,z);this._geometryRecords.push(d);
this._hasVolatileTransformation=this._hasVolatileTransformation||r.isSome(d.shaderTransformation);this._emit("objectGeometryAdded",{object:this,record:d});this._invalidateBoundingVolume();return d};e.removeGeometry=function(d){const h=this._geometryRecords.splice(d,1)[0];this._hasVolatileTransformation=r.isSome(h.shaderTransformation)?this._geometryRecords.some(F=>r.isSome(F.shaderTransformation)):this._hasVolatileTransformation;h.dispose();this._geometries.splice(d,1);this._emit("objectGeometryRemoved",
{object:this,record:h});this._invalidateBoundingVolume();return h};e.removeAllGeometries=function(){for(;0<this.getNumGeometryRecords();)this.removeGeometry(0)};e.geometryVertexAttrsUpdated=function(d){this._emit("vertexAttrsUpdated",{object:this,record:this._geometryRecords[d]});this._invalidateBoundingVolume()};e.setVisible=function(d){this._visible=d;for(const h of this._geometryRecords)h.instanceParameters.visible=this._visible;this._emit("visibilityChanged",this)};e.maskOccludee=function(){const d=
new C.Object3DStateID(1);for(const h of this._geometryRecords)h.instanceParameters.occludees=w.addObject3DStateID(h.instanceParameters.occludees,d);this._emit("occlusionChanged",this);return d};e.removeOcclude=function(d){for(const h of this._geometryRecords)h.instanceParameters.occludees=w.removeObject3DStateID(h.instanceParameters.occludees,d);this._emit("occlusionChanged",this)};e.highlight=function(){const d=new C.Object3DStateID(0);for(const h of this._geometryRecords)h.instanceParameters.highlights=
w.addObject3DStateID(h.instanceParameters.highlights,d);this._emit("highlightChanged",this);return d};e.removeHighlight=function(d){for(const h of this._geometryRecords)h.instanceParameters.highlights=w.removeObject3DStateID(h.instanceParameters.highlights,d);this._emit("highlightChanged",this)};e.getCombinedStaticTransformation=function(d,h){return p.multiply(r.unwrapOr(h,b.create()),this.transformation,d.getStaticTransformation())};e.getCombinedShaderTransformation=function(d,h){h=h||b.create();
p.multiply(h,this.transformation,d.getShaderTransformation());return h};e.hasVolativeTransformation=function(){return this._hasVolatileTransformation};e.getBBMin=function(d){this._validateBoundingVolume();return d?this._bvObjectSpace.bbMin:this._bvWorldSpace.bbMin};e.getBBMax=function(d){this._validateBoundingVolume();return d?this._bvObjectSpace.bbMax:this._bvWorldSpace.bbMax};e.getBounds=function(d){this._validateBoundingVolume();return d?this._bvObjectSpace.bounds:this._bvWorldSpace.bounds};e._validateBoundingVolume=
function(){if(this._bvDirty||this._hasVolatileTransformation){this._bvObjectSpace.init();this._bvWorldSpace.init();for(var d=0;d<this._geometryRecords.length;++d){var h=this._geometryRecords[d],F=this._geometries[d].boundingInfo;r.isSome(F)&&(this._calculateTransformedBoundingVolume(F,this._bvObjectSpace,h.getShaderTransformation()),this._calculateTransformedBoundingVolume(F,this._bvWorldSpace,this.getCombinedShaderTransformation(h)))}v.lerp(this._bvObjectSpace.bounds,this._bvObjectSpace.bbMin,this._bvObjectSpace.bbMax,
.5);v.lerp(this._bvWorldSpace.bounds,this._bvWorldSpace.bbMin,this._bvWorldSpace.bbMax,.5);d=A.create();h=A.create();F=t.maxScale(this.transformation);for(let y=0;y<this._geometryRecords.length;++y){var E=this._geometries[y].boundingInfo;if(!r.isNone(E)){var u=this._geometryRecords[y].getShaderTransformation(),z=t.maxScale(u);v.transformMat4(d,E.getCenter(),u);u=v.distance(d,this._bvObjectSpace.bounds);E=E.getBSRadius()*z;this._bvObjectSpace.bounds[3]=Math.max(this._bvObjectSpace.bounds[3],u+E);v.transformMat4(h,
d,this.transformation);z=v.distance(h,this._bvWorldSpace.bounds);this._bvWorldSpace.bounds[3]=Math.max(this._bvWorldSpace.bounds[3],z+E*F)}}this._bvDirty=!1}};e._calculateTransformedBoundingVolume=function(d,h,F){const E=d.getBBMin();d=d.getBBMax();const u=A.clone(E),z=A.clone(d);v.transformMat4(u,u,F);v.transformMat4(z,z,F);for(var y=0;3>y;++y)h.bbMin[y]=Math.min(h.bbMin[y],u[y],z[y]),h.bbMax[y]=Math.max(h.bbMax[y],u[y],z[y]);for(y=0;3>y;++y){v.copy(u,E);v.copy(z,d);u[y]=d[y];z[y]=E[y];v.transformMat4(u,
u,F);v.transformMat4(z,z,F);for(let B=0;3>B;++B)h.bbMin[B]=Math.min(h.bbMin[B],u[B],z[B]),h.bbMax[B]=Math.max(h.bbMax[B],u[B],z[B])}};e._invalidateBoundingVolume=function(){this._bvDirty=!0;r.isSome(this._parentLayer)&&this._parentLayer.notifyObjectBBChanged(this,this._bvWorldSpace.bounds)};e._emit=function(d,h){r.isSome(this._parentLayer)&&this._parentLayer.events.emit(d,h)};g._createClass(f,[{key:"geometryRecords",get:function(){return this._geometryRecords}},{key:"geometries",get:function(){return this._geometries}},
{key:"transformation",get:function(){return this._objectTransformation},set:function(d){p.copy(this._objectTransformation,d);this._invalidateBoundingVolume();this._emit("objectTransformation",this)}},{key:"parentLayer",get:function(){return this._parentLayer},set:function(d){n.assert(null==this._parentLayer||null==d,"Object3D can only be added to a single Layer");this._parentLayer=d}},{key:"isVisible",get:function(){return this._visible}},{key:"test",get:function(){const d=this;return{hasGeometry:h=>
-1<d._geometries.indexOf(h),getGeometryIndex:h=>d._geometries.indexOf(h)}}}]);return f}(l.ContentObject);let x=function(){function m(){this.bbMin=A.fromValues(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE);this.bbMax=A.fromValues(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE)}m.prototype.isEmpty=function(){return this.bbMax[0]<this.bbMin[0]&&this.bbMax[1]<this.bbMin[1]&&this.bbMax[2]<this.bbMin[2]};return m}(),c=function(m){function f(){var e=m.apply(this,arguments)||this;e.bounds=k.create();
return e}g._inheritsLoose(f,m);f.prototype.init=function(){v.set(this.bbMin,Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE);v.set(this.bbMax,-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);k.clear(this.bounds)};return f}(x);a.Object3D=l;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/GeometryRecord":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../core/ObjectPool ../../../../core/uid ../../../../chunks/vec3".split(" "),
function(a,g,r,A,v,t){let p=function(){function b(){this._disposed=!1}var k=b.prototype;k.acquire=function(n,l,q,C,w,x){this.id=v.generateUID();this.geometry=n;this.material=l;this.transformation=q;this.instanceParameters=C;this.origin=w;this._shaderTransformation=x;this._disposed=!1};k.release=function(){this._disposed=!1};k.dispose=function(){this._disposed=!0};k.getStaticTransformation=function(){return this.transformation};k.getShaderTransformation=function(){return r.isSome(this._shaderTransformation)?
this._shaderTransformation(this.transformation):this.transformation};k.computeAttachmentOrigin=function(n){return(this.material.computeAttachmentOrigin?this.material.computeAttachmentOrigin(this.geometry,n):this.geometry.computeAttachmentOrigin(n))?(t.transformMat4(n,n,this.getStaticTransformation()),!0):!1};g._createClass(b,[{key:"disposed",get:function(){return this._disposed}},{key:"shaderTransformation",get:function(){return this._shaderTransformation}}]);return b}();p.pool=new A(p);a.GeometryRecord=
p;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/Object3DStateID":function(){define(["exports","../../../../core/uid"],function(a,g){a.Object3DStateID=function(r){this.channel=r;this.id=g.generateUID()};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/WebGLLayer":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../core/PooledArray ../../../../core/Evented ../../../../chunks/vec3f64 ../../../../core/Handles ./ContentObject ./DirtyEvents ./Octree".split(" "),
function(a,g,r,A,v,t,p,b,k,n){b=function(l){function q(w,x=""){var c=l.call(this)||this;c.apiLayerUid=x;c.type=0;c.events=new v;c.isSliceable=!1;c._objects=new A;c._stageHandles=new p;c.apiLayerUid=x;w=w||{};c.group=w.group||"";c.isVisible=null!=w.isVisible?w.isVisible:!0;c.isPickable=null!=w.isPickable?w.isPickable:!0;c.translation=w.translation?t.clone(w.translation):t.create();return c}g._inheritsLoose(q,l);var C=q.prototype;C.destroy=function(){this.detachStage();this._stage=null};C.attachStage=
function(w){this.detachStage();this._stage=w;for(const x of k.DirtyEventNames)this._stageHandles.add(this.events.on(x,c=>w.handleEvent(x,c)))};C.detachStage=function(){this._stageHandles.removeAll();this.invalidateSpatialQueryAccelerator()};C.getObjectIds=function(){return this._objects.map(w=>w.id)};C.getObjects=function(){return this._objects};C.add=function(w){this._objects.push(w);w.parentLayer=this;this.events.emit("layerObjectAdded",{layer:this,object:w});r.isSome(this._octree)&&this._octree.add([w])};
C.remove=function(w){this._objects.removeUnordered(w)&&(w.parentLayer=null,this.events.emit("layerObjectRemoved",{layer:this,object:w}),r.isSome(this._octree)&&this._octree.remove([w]))};C.addMany=function(w){this._objects.pushArray(w);for(const x of w)x.parentLayer=this;this.events.emit("layerObjectsAdded",{layer:this,objects:w});r.isSome(this._octree)&&this._octree.add(w)};C.removeMany=function(w){const x=[];this._objects.removeUnorderedMany(w,w.length,x);if(0!==x.length){for(const c of x)c.parentLayer=
null;this.events.emit("layerObjectsRemoved",{layer:this,objects:x});r.isSome(this._octree)&&this._octree.remove(x)}};C.commit=function(){r.isSome(this._stage)&&this._stage.processDirtyLayer(this.id)};C.notifyObjectBBChanged=function(w,x){r.isSome(this._octree)&&this._octree.update(w,x)};C.getSpatialQueryAccelerator=function(){r.isNone(this._octree)&&50<this._objects.length&&this._createOctree();return this._octree};C.shaderTransformationChanged=function(){this.invalidateSpatialQueryAccelerator();
this.events.emit("shaderTransformationChanged",this)};C.invalidateSpatialQueryAccelerator=function(){this._octree=r.destroyMaybe(this._octree)};C._createOctree=function(){this._octree=new n(w=>w.getBounds());this._octree.add(this._objects.data,this._objects.length)};return q}(b.ContentObject);a.WebGLLayer=b;a.isWebGLLayer=function(l){return r.isSome(l)&&0===l.type};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/DirtyEvents":function(){define(["exports"],function(a){a.DirtyEventNames=
"layerObjectAdded layerObjectRemoved layerObjectsAdded layerObjectsRemoved shaderTransformationChanged objectTransformation visibilityChanged occlusionChanged highlightChanged objectGeometryAdded objectGeometryRemoved vertexAttrsUpdated".split(" ");Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/Octree":function(){define("../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../core/ObjectPool ../../../../core/PooledArray ../../../../chunks/vec3f64 ../../../../chunks/vec3 ../../support/geometryUtils ./Util".split(" "),
function(a,g,r,A,v,t,p,b){function k(J,L,N){N[0]=J[0]+L;N[1]=J[1]+L;N[2]=J[2]+L}function n(J,L,N,V){if(1===L)J=N(J[0]),p.sphere.copy(J,V);else{E[0]=Infinity;E[1]=Infinity;E[2]=Infinity;u[0]=-Infinity;u[1]=-Infinity;u[2]=-Infinity;for(let Z=0;Z<L;Z++){var T=N(J[Z]);if(w(T[3])){var W=E,Q=T;W[0]=Math.min(W[0],Q[0]-Q[3]);W[1]=Math.min(W[1],Q[1]-Q[3]);W[2]=Math.min(W[2],Q[2]-Q[3]);W=u;W[0]=Math.max(W[0],T[0]+T[3]);W[1]=Math.max(W[1],T[1]+T[3]);W[2]=Math.max(W[2],T[2]+T[3])}}t.lerp(V,E,u,.5);V[3]=Math.max(u[0]-
E[0],u[1]-E[1],u[2]-E[2])/2}}function l(J,L,N){if(!U.length)for(var V=0;8>V;++V)U.push({index:0,distance:0});for(V=0;8>V;++V){const T=m[V];U.data[V].index=V;U.data[V].distance=C(J,L,T)}U.sort((T,W)=>T.distance-W.distance);for(J=0;8>J;++J)N[J]=U.data[J].index}function q(J,L){let N=Infinity,V=null;for(let T=0;8>T;++T){const W=C(J,L,f[T]);W<N&&(N=W,V=f[T])}return V}function C(J,L,N){return L*(J[0]*N[0]+J[1]*N[1]+J[2]*N[2])}function w(J){return!isNaN(J)&&-Infinity!==J&&Infinity!==J&&0<J}let x=function(){function J(N,
V){this._objectToBoundingSphere=N;this._maximumObjectsPerNode=10;this._maximumDepth=20;this._degenerateObjects=new Set;this._root=new c;this._objectCount=0;V&&(void 0!==V.maximumObjectsPerNode&&(this._maximumObjectsPerNode=V.maximumObjectsPerNode),void 0!==V.maximumDepth&&(this._maximumDepth=V.maximumDepth))}var L=J.prototype;L.destroy=function(){this._degenerateObjects.clear();c.clearPool();d[0]=null;z.prune();U.prune()};L.add=function(N,V=N.length){this._objectCount+=V;this._grow(N,V);const T=c.acquire();
for(let W=0;W<V;W++){const Q=N[W];this._isDegenerate(Q)?this._degenerateObjects.add(Q):(T.init(this._root),this._add(Q,T))}c.release(T)};L.remove=function(N,V=null){this._objectCount-=N.length;const T=c.acquire();for(const W of N)N=g.isSome(V)?V:p.sphere.copy(this._objectToBoundingSphere(W),y),w(N[3])?(T.init(this._root),this._remove(W,N,T)):this._degenerateObjects.delete(W);c.release(T);this._shrink()};L.update=function(N,V){if(w(V[3])||!this._isDegenerate(N))d[0]=N,N=d,this.remove(N,V),this.add(N)};
L.forEachAlongRay=function(N,V,T){const W=p.ray.wrap(N,V);this._forEachNode(this._root,Q=>{if(!this._intersectsNode(W,Q))return!1;Q=Q.node;Q.terminals.forAll(Z=>{this._intersectsObject(W,Z)&&T(Z)});null!==Q.residents&&Q.residents.forAll(Z=>{this._intersectsObject(W,Z)&&T(Z)});return!0})};L.forEachAlongRayWithVerticalOffset=function(N,V,T,W){const Q=p.ray.wrap(N,V);this._forEachNode(this._root,Z=>{if(!this._intersectsNodeWithOffset(Q,Z,W))return!1;Z=Z.node;Z.terminals.forAll(O=>{this._intersectsObjectWithOffset(Q,
O,W)&&T(O)});null!==Z.residents&&Z.residents.forAll(O=>{this._intersectsObjectWithOffset(Q,O,W)&&T(O)});return!0})};L.forEach=function(N){this._forEachNode(this._root,V=>{V=V.node;V.terminals.forAll(N);null!==V.residents&&V.residents.forAll(N);return!0});this._degenerateObjects.forEach(N)};L.forEachDegenerateObject=function(N){this._degenerateObjects.forEach(N)};L.findClosest=function(N,V,T,W,Q){return this._findClosest(N,"front-to-back"===V?1:-1,T,W,Q)};L.forEachInDepthRange=function(N,V,T,W,Q,Z,
O,P){this._forEachInDepthRange(N,V,"front-to-back"===T?1:-1,W,Q,Z,O,P)};L.forEachNode=function(N){this._forEachNode(this._root,V=>N(V.node,V.bounds,V.halfSize))};L._intersectsNode=function(N,V){k(V.bounds,2*-V.halfSize,E);k(V.bounds,2*V.halfSize,u);return b.rayBoxTest(N.origin,N.direction,E,u)};L._intersectsNodeWithOffset=function(N,V,T){k(V.bounds,2*-V.halfSize,E);k(V.bounds,2*V.halfSize,u);T.applyToMinMax(E,u);return b.rayBoxTest(N.origin,N.direction,E,u)};L._intersectsObject=function(N,V){V=this._objectToBoundingSphere(V);
return 0<V[3]?p.sphere.intersectsRay(V,N):!0};L._intersectsObjectWithOffset=function(N,V,T){V=this._objectToBoundingSphere(V);return 0<V[3]?p.sphere.intersectsRay(T.applyToBoundingSphere(V),N):!0};L._forEachNode=function(N,V){N=c.acquire().init(N);const T=[N];for(;0!==T.length;){N=T.pop();if(V(N)&&!N.isLeaf())for(let W=0;W<N.node.children.length;W++)N.node.children[W]&&T.push(c.acquire().init(N).advance(W));c.release(N)}};L._forEachNodeDepthOrdered=function(N,V,T,W=1){N=c.acquire().init(N);const Q=
[N];for(l(T,W,R);0!==Q.length;){N=Q.pop();if(V(N)&&!N.isLeaf())for(T=7;0<=T;--T)W=R[T],W>=N.node.children.length||N.node.children[W]&&Q.push(c.acquire().init(N).advance(W));c.release(N)}};L._findClosest=function(N,V,T,W,Q){let Z=Infinity,O=Infinity,P=null;const S=q(N,V);let Y=0;const ta=wa=>{++Y;if(!W||W(wa)){var G=this._objectToBoundingSphere(wa);if(!T||p.frustum.intersectsSphere(T,G)){var I=C(N,V,p.sphere.getCenter(G)),ca=I-G[3];G=I+G[3];ca<Z&&(Z=ca,O=G,P=wa)}}};this._forEachNodeDepthOrdered(this._root,
wa=>{if(null!=Q&&Y>=Q||T&&!p.frustum.intersectsSphere(T,wa.bounds))return!1;t.scale(F,S,wa.halfSize);t.add(F,F,wa.bounds);if(C(N,V,F)>O)return!1;wa=wa.node;wa.terminals.forAll(G=>{ta(G)});null!==wa.residents&&wa.residents.forAll(G=>{ta(G)});return!0},N,V);return P};L._forEachInDepthRange=function(N,V,T,W,Q,Z,O,P){let S=-Infinity,Y=Infinity;const ta={setRange:ja=>{1===T?(S=Math.max(S,ja.near),Y=Math.min(Y,ja.far)):(S=Math.max(S,-ja.far),Y=Math.min(Y,-ja.near))}};ta.setRange(W);const wa=C(V,T,N),G=
q(V,T),I=q(V,-1*T);let ca=0;const ia=ja=>{++ca;if(!O||O(ja)){var la=this._objectToBoundingSphere(ja),da=p.sphere.getCenter(la);da=C(V,T,da)-wa;var ka=da+la[3];da-la[3]>Y||ka<S||(!Z||p.frustum.intersectsSphere(Z,la))&&Q(ja,ta)}};this._forEachNodeDepthOrdered(this._root,ja=>{if(null!=P&&ca>=P||Z&&!p.frustum.intersectsSphere(Z,ja.bounds))return!1;t.scale(F,G,ja.halfSize);t.add(F,F,ja.bounds);if(C(V,T,F)-wa>Y)return!1;t.scale(F,I,ja.halfSize);t.add(F,F,ja.bounds);if(C(V,T,F)-wa<S)return!1;ja=ja.node;
ja.terminals.forAll(la=>{ia(la)});null!==ja.residents&&ja.residents.forAll(la=>{ia(la)});return!0},V,T)};L._remove=function(N,V,T){z.clear();V=T.advanceTo(V,(W,Q)=>{z.push(W.node);z.push(Q)})?T.node.terminals:T.node.residents;V.removeUnordered(N);if(0===V.length)for(N=z.length-2;0<=N&&this._purge(z.data[N],z.data[N+1]);N-=2);};L._nodeIsEmpty=function(N){if(0!==N.terminals.length)return!1;if(null!==N.residents)return 0===N.residents.length;for(let V=0;V<N.children.length;V++)if(N.children[V])return!1;
return!0};L._purge=function(N,V){0<=V&&(N.children[V]=null);return this._nodeIsEmpty(N)?(null===N.residents&&(N.residents=new A({shrink:!0})),!0):!1};L._add=function(N,V){V.advanceTo(this._objectToBoundingSphere(N))?V.node.terminals.push(N):(V.node.residents.push(N),V.node.residents.length>this._maximumObjectsPerNode&&V.depth<this._maximumDepth&&this._split(V))};L._split=function(N){const V=N.node.residents;N.node.residents=null;for(let T=0;T<V.length;T++){const W=c.acquire().init(N);this._add(V.getItemAt(T),
W);c.release(W)}};L._grow=function(N,V){0!==V&&(n(N,V,T=>this._objectToBoundingSphere(T),B),w(B[3])&&!this._fitsInsideTree(B)&&(this._nodeIsEmpty(this._root.node)?(p.sphere.copy(B,this._root.bounds),this._root.halfSize=1.25*B[3]):(N=this._rootBoundsForRootAsSubNode(B),this._placingRootViolatesMaxDepth(N)?this._rebuildTree(B,N):this._growRootAsSubNode(N),c.release(N))))};L._rebuildTree=function(N,V){t.copy(H,V.bounds);H[3]=V.halfSize;n([N,H],2,T=>T,D);N=c.acquire().init(this._root);this._root.initFrom(null,
D,1.25*D[3]);this._forEachNode(N,T=>{this.add(T.node.terminals.data,T.node.terminals.length);null!==T.node.residents&&this.add(T.node.residents.data,T.node.residents.length);return!0});c.release(N)};L._placingRootViolatesMaxDepth=function(N){const V=Math.log(N.halfSize/this._root.halfSize)*Math.LOG2E;let T=0;this._forEachNode(this._root,W=>{T=Math.max(T,W.depth);return T+V<=this._maximumDepth});return T+V>this._maximumDepth};L._rootBoundsForRootAsSubNode=function(N){var V=N[3];let T=-Infinity;const W=
this._root.bounds,Q=this._root.halfSize;for(var Z=0;3>Z;Z++){var O=Math.max(0,Math.ceil((W[Z]-Q-(N[Z]-V))/(2*Q)));const P=Math.max(0,Math.ceil((N[Z]+V-(W[Z]+Q))/(2*Q)))+1;T=Math.max(T,2**Math.ceil(Math.log(O+P)*Math.LOG2E));M[Z].min=O;M[Z].max=P}for(N=0;3>N;N++)V=M[N].min,Z=M[N].max,O=(T-(V+Z))/2,V+=Math.ceil(O),Z+=Math.floor(O),h[N]=W[N]-Q-V*Q*2+(Z+V)*Q;h[3]=T*Q*e;return c.acquire().initFrom(null,h,T*Q,0)};L._growRootAsSubNode=function(N){const V=this._root.node;t.copy(B,this._root.bounds);B[3]=
this._root.halfSize;this._root.init(N);N.advanceTo(B,null,!0);N.node.children=V.children;N.node.residents=V.residents;N.node.terminals=V.terminals};L._shrink=function(){for(;;){const N=this._findShrinkIndex();if(-1===N)break;this._root.advance(N);this._root.depth=0}};L._findShrinkIndex=function(){if(0!==this._root.node.terminals.length||this._root.isLeaf())return-1;let N=null;const V=this._root.node.children;let T=0,W=0;for(;W<V.length&&null==N;)T=W++,N=V[T];for(;W<V.length;)if(V[W++])return-1;return T};
L._isDegenerate=function(N){N=this._objectToBoundingSphere(N)[3];return!w(N)};L._fitsInsideTree=function(N){const V=this._root.bounds,T=this._root.halfSize;return N[3]<=T&&N[0]>=V[0]-T&&N[0]<=V[0]+T&&N[1]>=V[1]-T&&N[1]<=V[1]+T&&N[2]>=V[2]-T&&N[2]<=V[2]+T};a._createClass(J,[{key:"bounds",get:function(){return this._root.bounds}},{key:"halfSize",get:function(){return this._root.halfSize}},{key:"root",get:function(){return this._root.node}},{key:"maximumObjectsPerNode",get:function(){return this._maximumObjectsPerNode}},
{key:"maximumDepth",get:function(){return this._maximumDepth}},{key:"objectCount",get:function(){return this._objectCount}}]);return J}(),c=function(){function J(){this.bounds=p.sphere.create();this.halfSize=0;this.initFrom(null,null,0,0)}var L=J.prototype;L.init=function(N){return this.initFrom(N.node,N.bounds,N.halfSize,N.depth)};L.initFrom=function(N,V,T,W=this.depth){this.node=g.isSome(N)?N:J.createEmptyNode();g.isSome(V)&&p.sphere.copy(V,this.bounds);this.halfSize=T;this.depth=W;return this};
L.advance=function(N){let V=this.node.children[N];V||(V=J.createEmptyNode(),this.node.children[N]=V);this.node=V;this.halfSize/=2;this.depth++;N=m[N];this.bounds[0]+=N[0]*this.halfSize;this.bounds[1]+=N[1]*this.halfSize;this.bounds[2]+=N[2]*this.halfSize;this.bounds[3]=this.halfSize*e;return this};L.advanceTo=function(N,V,T=!1){for(;;){if(this.isTerminalFor(N))return V&&V(this,-1),!0;if(this.isLeaf()){if(!T)return V&&V(this,-1),!1;this.node.residents=null}const W=this._childIndex(N);V&&V(this,W);
this.advance(W)}};L.isLeaf=function(){return null!=this.node.residents};L.isTerminalFor=function(N){return N[3]>this.halfSize/2};L._childIndex=function(N){const V=this.bounds;return(V[0]<N[0]?1:0)+(V[1]<N[1]?2:0)+(V[2]<N[2]?4:0)};J.createEmptyNode=function(){return{children:[null,null,null,null,null,null,null,null],terminals:new A({shrink:!0}),residents:new A({shrink:!0})}};J.acquire=function(){return J._pool.acquire()};J.release=function(N){J._pool.release(N)};J.clearPool=function(){J._pool.prune()};
return J}();c._pool=new r(c);const m=[v.fromValues(-1,-1,-1),v.fromValues(1,-1,-1),v.fromValues(-1,1,-1),v.fromValues(1,1,-1),v.fromValues(-1,-1,1),v.fromValues(1,-1,1),v.fromValues(-1,1,1),v.fromValues(1,1,1)],f=[v.fromValues(-1,-1,-1),v.fromValues(-1,-1,1),v.fromValues(-1,1,-1),v.fromValues(-1,1,1),v.fromValues(1,-1,-1),v.fromValues(1,-1,1),v.fromValues(1,1,-1),v.fromValues(1,1,1)],e=Math.sqrt(3),d=[null],h=p.sphere.create(),F=v.create(),E=v.create(),u=v.create(),z=new A,y=p.sphere.create(),B=p.sphere.create(),
H=p.sphere.create(),D=p.sphere.create(),M=[{min:0,max:0},{min:0,max:0},{min:0,max:0}],U=new A,R=[0,0,0,0,0,0,0,0];return x})},"esri/views/3d/interactive/visualElements/ParallelLineVisualElement":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../core/screenUtils ../../../../chunks/vec3f64 ../../../../chunks/vec3 ../../../../core/Handles ../../../../chunks/mat4f64 ../../../../chunks/vec2 ../../../../chunks/vec4 ../../../../chunks/vec4f32 ../../webgl-engine/lib/GeometryUtil ../../webgl-engine/materials/RibbonLineMaterial ./Object3DVisualElement".split(" "),
function(a,g,r,A,v,t,p,b,k,n,l,q,C,w){w=function(h){function F(u){var z=h.call(this,u)||this;z._handles=new p;z._location=v.create();z._direction=v.fromValues(1,0,0);z._width=1;z._offset=1;z._length=18;z._color=l.fromValues(1,0,1,1);z._renderOccluded=4;z.applyProps(u);return z}g._inheritsLoose(F,h);var E=F.prototype;E.setDirectionFromPoints=function(u,z){t.normalize(this._direction,t.subtract(this._direction,z,u));this.updateGeometry()};E.createExternalResources=function(){const u=new C.RibbonLineMaterial(this.materialParameters);
this._handles.add(this.view.state.watch("camera",()=>{this.updateGeometry()}));this._externalResources={material:u}};E.destroyExternalResources=function(){this._handles.removeAll();this._externalResources=null};E.createGeometries=function(u){const z=q.createPolylineGeometry([v.create(),v.create()]),y=q.createPolylineGeometry([v.create(),v.create()]),B=r.unwrap(this._externalResources).material;u.addGeometry(z,B,b.IDENTITY);u.addGeometry(y,B,b.IDENTITY);this.updateVertices(u)};E.forEachExternalMaterial=
function(u){r.isSome(this._externalResources)&&u(this._externalResources.material)};E.updateMaterial=function(){r.isNone(this._externalResources)||this._externalResources.material.setParameterValues(this.materialParameters)};E.updateGeometry=function(){const u=this.object;r.isNone(u)||this.updateVertices(u)};E.updateVertices=function(u){const z=this.view.state.camera;z.projectToScreen(this.location,c);t.add(x,this.location,this.direction);z.projectToScreen(x,m);k.normalize(m,k.subtract(m,m,c));this.updateVertexAttributes(z,
u,0,c,m,1);this.updateVertexAttributes(z,u,1,c,m,-1)};E.updateVertexAttributes=function(u,z,y,B,H,D){const M=z.geometryRecords[y].geometry.getMutableAttribute("position").data;D=k.scale(f,k.set(f,H[1]*D,H[0]*-D),this.offset+this.width/2);B=k.add(e,k.add(e,k.add(e,B,k.scale(e,H,this.length/2)),D),D);H=k.add(d,B,k.scale(d,H,-this.length));u.unprojectFromScreen(B,x);M[0]=x[0];M[1]=x[1];M[2]=x[2];u.unprojectFromScreen(H,x);M[3]=x[0];M[4]=x[1];M[5]=x[2];z.geometryVertexAttrsUpdated(y)};g._createClass(F,
[{key:"location",get:function(){return this._location},set:function(u){t.exactEquals(this._location,u)||(t.copy(this._location,u),this.updateGeometry())}},{key:"direction",get:function(){return this._direction},set:function(u){t.exactEquals(this._direction,u)||(t.copy(this._direction,u),this.updateGeometry())}},{key:"width",get:function(){return this._width},set:function(u){u!==this._width&&(this._width=u,this.updateMaterial())}},{key:"offset",get:function(){return this._offset},set:function(u){u!==
this._offset&&(this._offset=u,this.updateGeometry())}},{key:"length",get:function(){return this._length},set:function(u){u!==this._length&&(this._length=u,this.updateGeometry())}},{key:"color",get:function(){return this._color},set:function(u){n.exactEquals(u,this._color)||(n.copy(this._color,u),this.updateMaterial())}},{key:"renderOccluded",get:function(){return this._renderOccluded},set:function(u){u!==this._renderOccluded&&(this._renderOccluded=u,this.updateMaterial())}},{key:"materialParameters",
get:function(){return{width:this._width,color:this._color,renderOccluded:this._renderOccluded}}}]);return F}(w.Object3DVisualElement);const x=v.create(),c=A.createScreenPointArray(),m=A.createScreenPointArray(),f=A.createScreenPointArray(),e=A.createScreenPointArray(),d=A.createScreenPointArray();a.ParallelLineVisualElement=w;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/interactive/visualElements/PointVisualElement":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../core/mathUtils ../../../../chunks/vec3f64 ../../../../chunks/vec3 ../../../../geometry/projection ../../../../chunks/vec4f64 ../../../../chunks/vec4 ../../../../geometry/support/aaBoundingBox ../../support/stack ../../webgl-engine/lib/GeometryUtil ../../webgl-engine/materials/HUDMaterial ../../layers/graphics/elevationAlignmentUtils ../../layers/graphics/ElevationContext ../../layers/graphics/sdfPrimitives ../../webgl-engine/lib/Texture ./VisualElementResources".split(" "),
function(a,g,r,A,v,t,p,b,k,n,l,q,C,w,x,c,m,f){let e=function(){function F(u){this._geometry=this.view=null;this._size=3;this._color=b.fromValues(1,0,1,1);this._pixelSnappingEnabled=!0;this._primitive="square";this._outlineSize=1;this._outlineColor=b.fromValues(1,1,1,1);this._elevationInfo=null;this.resources=new f.VisualElementResources({view:u.view,createResources:y=>this.createResources(y),recreateGeometry:(y,B)=>{y.geometry=this.recreateGeometry(B,y.material);return r.isSome(y.geometry)?[y.geometry]:
[]}});let z=!0;for(const y in u)y in this?"attached"===y?z=u[y]:this[y]=u[y]:console.error("Cannot set unknown property",y);this.attached=z}var E=F.prototype;E.destroy=function(){this.resources.destroy()};E.updateMaterial=function(){const u=this.resources.resources;r.isNone(u)||u.material.setParameterValues(this.materialParameters(u.texture.id))};E.updateSizeAttribute=function(){var u=this.resources.resources;const z=this.resources.object;if(!r.isNone(u)&&!r.isNone(z)&&(u=u.geometry,!r.isNone(u))){u=
u.getMutableAttribute("size").data;var y=this.geometrySize;u[0]=y;u[1]=y;z.geometryVertexAttrsUpdated(0)}};E.materialParameters=function(u){return{color:this._color,textureIsSignedDistanceField:!0,distanceFieldBoundingBox:d,occlusionTest:!1,outlineColor:this._outlineColor,outlineSize:this._outlineSize,textureId:u,polygonOffset:!1,shaderPolygonOffset:0,drawInSecondSlot:!0,depthEnabled:!1,pixelSnappingEnabled:this.pixelSnappingEnabled}};E.recreateGeometry=function(u,z){const y=this.createRenderGeometry();
r.isSome(y)&&u.addGeometry(y,z);return y};E.createResources=function(u){const z=this.createTexture(),y=new C.HUDMaterial(this.materialParameters(z.id));u=this.recreateGeometry(u,y);return{material:y,texture:z,geometry:u,forEach(B){B(z);B(y);r.isSome(this.geometry)&&B(this.geometry)}}};E.createTexture=function(){const u=this.preferredTextureSize;return new m.Texture(c.createType(this._primitive,u,.5*u),{mipmap:!1,wrap:{s:33071,t:33071},width:u,height:u,components:4,noUnpackFlip:!0})};E.calculateMapBounds=
function(u){if(r.isNone(this.resources.resources)||r.isNone(this.resources.resources.geometry))return!1;const z=this.resources.resources.geometry.vertexAttributes.get("position");p.projectVectorToVector(z.data,this.view.renderCoordsHelper.spatialReference,h,this.view.spatialReference);n.expandWithBuffer(u,h);return!0};E.createRenderGeometry=function(){var u=this.geometry;if(r.isNone(u))return null;const {renderCoordsHelper:z,elevationProvider:y}=this.view;var B=w.evaluateElevationAlignmentAtPoint(u,
y,x.ElevationContext.fromElevationInfo(this.elevationInfo),z);const H=t.set(l.sv3d.get(),u.x,u.y,B);B=l.sv3d.get();p.projectVectorToVector(H,u.spatialReference,B,z.spatialReference);u=this.geometrySize;return q.createPointGeometry(null,B,null,[u,u],[0,0,0,1])};g._createClass(F,[{key:"visible",get:function(){return this.resources.visible},set:function(u){this.resources.visible=u}},{key:"attached",get:function(){return this.resources.attached},set:function(u){this.resources.attached=u}},{key:"geometry",
get:function(){return this._geometry},set:function(u){this._geometry=u;this.resources.recreateGeometry()}},{key:"size",get:function(){return this._size},set:function(u){if(u!==this._size){const z=this.preferredTextureSize;this._size=u;z<this.preferredTextureSize?r.isSome(this.resources)&&this.resources.recreate():this.updateSizeAttribute()}}},{key:"color",get:function(){return this._color},set:function(u){k.exactEquals(u,this._color)||(k.copy(this._color,u),this.updateMaterial())}},{key:"pixelSnappingEnabled",
get:function(){return this._pixelSnappingEnabled},set:function(u){this._pixelSnappingEnabled!==u&&(this._pixelSnappingEnabled=u,this.updateMaterial())}},{key:"primitive",get:function(){return this._primitive},set:function(u){this._primitive!==u&&(this._primitive=u,r.isSome(this.resources)&&this.resources.recreate())}},{key:"outlineSize",get:function(){return this._outlineSize},set:function(u){u!==this._outlineSize&&(this._outlineSize=u,this.updateMaterial())}},{key:"outlineColor",get:function(){return this._outlineColor},
set:function(u){k.exactEquals(u,this._outlineColor)||(k.copy(this._outlineColor,u),this.updateMaterial())}},{key:"elevationInfo",get:function(){return this._elevationInfo},set:function(u){this._elevationInfo=u;this.resources&&this.resources.recreateGeometry()}},{key:"geometrySize",get:function(){return this._size/.5}},{key:"preferredTextureSize",get:function(){return A.clamp(A.nextHighestPowerOfTwo(2*this.geometrySize),16,128)}}]);return F}();const d=[.25,.25,.75,.75],h=v.create();a.PointVisualElement=
e;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/maybe ../core/Error ../core/promiseUtils ./support/spatialReferenceUtils ./support/Ellipsoid ./Point ./Extent ./Multipoint ./Polygon ./Polyline ../core/mathUtils ../chunks/vec3f64 ../chunks/vec3 ./projectionEllipsoid ../core/unitUtils ../chunks/mat4 ../chunks/pe ./support/aaBoundingRect ./support/geodesicConstants ./support/GeographicTransformation".split(" "),
function(a,g,r,A,v,t,p,b,k,n,l,q,C,w,x,c,m,f,e,d,h,F,E){function u(){return!!va&&d.isLoaded()}function z(ma){A.isNone(xa)&&(xa=Promise.all([d.load(),(new Promise(function(sa,oa){a(["../chunks/geometryEngineBase"],sa,oa)})).then(function(sa){return sa.geometryEngineBase}),new Promise(function(sa,oa){a(["./geometryAdapters/hydrated"],sa,oa)})]));return xa.then(([,sa,{hydratedAdapter:oa}])=>{t.throwIfAborted(ma);qa=oa;va=sa.default;va._enableProjection(d.pe)})}function y(ma,sa,oa,ya,Aa=null){if(A.isNone(oa)||
A.isNone(ya))return sa;if(H(oa,ya,Aa))return sa.map(Ca=>D(Ca,oa,ya));if(A.isNone(Aa)){const Ca=E.cacheKey(oa,ya);void 0!==ua[Ca]?Aa=ua[Ca]:(Aa=B(oa,ya,null),A.isNone(Aa)&&(Aa=new E),ua[Ca]=Aa)}if(A.isNone(va))throw new za;return va._project(ma,sa,oa,ya,Aa)}function B(ma,sa,oa=null){if(A.isNone(va))throw new za;if(A.isNone(ma)||A.isNone(sa))return null;ma=va._getTransformation(qa,ma,sa,oa,null==oa?void 0:oa.spatialReference);return null!==ma?E.fromGE(ma):null}function H(ma,sa,oa){return oa?!1:p.equals(ma,
sa)?!0:p.isValid(ma)&&p.isValid(sa)&&!!pa(ma,sa,Oa)}function D(ma,sa,oa){if(!ma)return ma;if("x"in ma){var ya=new k;return M(ma,sa,ya,oa)?ya:null}return"xmin"in ma?(ya=new n,L(ma,sa,ya,oa)?ya:null):"rings"in ma?(ya=new q,J(ma,sa,ya,oa)?ya:null):"paths"in ma?(ya=new C,R(ma,sa,ya,oa)?ya:null):"points"in ma?(ya=new l,U(ma,sa,ya,oa)?ya:null):null}function M(ma,sa,oa,ya,Aa=0){Ga[0]=ma.x;Ga[1]=ma.y;const Ca=ma.z;Ga[2]=void 0!==Ca?Ca:Aa;if(!W(Ga,sa,0,Ga,ya,0,1))return!1;oa.x=Ga[0];oa.y=Ga[1];oa.spatialReference=
ya;void 0===Ca?(oa.z=void 0,oa.hasZ=!1):(oa.z=Ga[2],oa.hasZ=!0);void 0===ma.m?(oa.m=void 0,oa.hasM=!1):(oa.m=ma.m,oa.hasM=!0);return!0}function U(ma,sa,oa,ya,Aa=0){const {points:Ca,hasZ:Da,hasM:Fa}=ma;ma=[];const Na=Ca.length,Ma=[];for(var La of Ca)Ma.push(La[0],La[1],Da?La[2]:Aa);if(!W(Ma,sa,0,Ma,ya,0,Na))return!1;for(sa=0;sa<Na;++sa){Aa=3*sa;La=Ma[Aa];const Qa=Ma[Aa+1];Da&&Fa?ma.push([La,Qa,Ma[Aa+2],Ca[sa][3]]):Da?ma.push([La,Qa,Ma[Aa+2]]):Fa?ma.push([La,Qa,Ca[sa][2]]):ma.push([La,Qa])}oa.points=
ma;oa.spatialReference=ya;oa.hasZ=Da;oa.hasM=Fa;return!0}function R(ma,sa,oa,ya,Aa=0){const {paths:Ca,hasZ:Da,hasM:Fa}=ma;ma=[];if(!Q(Ca,Da,Fa,sa,ma,ya,Aa))return!1;oa.paths=ma;oa.spatialReference=ya;oa.hasZ=Da;oa.hasM=Fa;return!0}function J(ma,sa,oa,ya,Aa=0){const {rings:Ca,hasZ:Da,hasM:Fa}=ma;ma=[];if(!Q(Ca,Da,Fa,sa,ma,ya,Aa))return!1;oa.rings=ma;oa.spatialReference=ya;oa.hasZ=Da;oa.hasM=Fa;return!0}function L(ma,sa,oa,ya,Aa=0){const {xmin:Ca,ymin:Da,xmax:Fa,ymax:Na,hasZ:Ma,hasM:La}=ma;if(!N(Ca,
Da,Ma?ma.zmin:Aa,sa,Ga,ya))return!1;oa.xmin=Ga[0];oa.ymin=Ga[1];Ma&&(oa.zmin=Ga[2]);if(!N(Fa,Na,Ma?ma.zmax:Aa,sa,Ga,ya))return!1;oa.xmax=Ga[0];oa.ymax=Ga[1];Ma&&(oa.zmax=Ga[2]);La&&(oa.mmin=ma.mmin,oa.mmax=ma.mmax);oa.spatialReference=ya;return!0}function N(ma,sa,oa,ya,Aa,Ca){Ia[0]=ma;Ia[1]=sa;Ia[2]=oa;return W(Ia,ya,0,Aa,Ca,0,1)}function V(ma,sa,oa,ya){if(A.isNone(sa)||A.isNone(ya)||2>ma.length)return!1;2===ma.length&&(Ia[0]=ma[0],Ia[1]=ma[1],Ia[2]=0,ma=Ia);return W(ma,sa,0,oa,ya,0,1)}function T(ma,
sa,oa){A.isNone(sa)?ma=!1:(sa=O(sa,Ea),sa=Ba[sa][6],A.isNone(sa)?ma=!1:(sa(ma,0,Ia,0),oa!==Ia&&(oa[0]=Ia[0],oa[1]=Ia[1],2<oa.length&&(oa[2]=Ia[2])),ma=!0));return ma}function W(ma,sa,oa,ya,Aa,Ca,Da=1){sa=pa(sa,Aa,Oa);if(A.isNone(sa))return!1;if(sa===P){if(ma===ya&&oa===Ca)return!0;Da=oa+3*Da;for(let Fa=oa,Na=Ca;Fa<Da;Fa++,Na++)ya[Na]=ma[Fa];return!0}Da=oa+3*Da;for(let Fa=oa,Na=Ca;Fa<Da;Fa+=3,Na+=3)sa(ma,Fa,ya,Na);return!0}function Q(ma,sa,oa,ya,Aa,Ca,Da=0){const Fa=[];for(const Na of ma)for(const Ma of Na)Fa.push(Ma[0],
Ma[1],sa?Ma[2]:Da);if(!W(Fa,ya,0,Fa,Ca,0,Fa.length/3))return!1;ya=0;Aa.length=0;for(const Na of ma){ma=[];for(const Ma of Na)sa&&oa?ma.push([Fa[ya++],Fa[ya++],Fa[ya++],Ma[3]]):sa?ma.push([Fa[ya++],Fa[ya++],Fa[ya++]]):(oa?ma.push([Fa[ya++],Fa[ya++],Ma[2]]):ma.push([Fa[ya++],Fa[ya++]]),ya++);Aa.push(ma)}return!0}function Z(ma,sa,oa){const ya=Math.sin(sa);sa=Math.cos(sa);const Aa=Math.sin(ma);ma=Math.cos(ma);oa[0]=-ya;oa[4]=-Aa*sa;oa[8]=ma*sa;oa[12]=0;oa[1]=sa;oa[5]=-Aa*ya;oa[9]=ma*ya;oa[13]=0;oa[2]=
0;oa[6]=ma;oa[10]=Aa;oa[14]=0;oa[3]=0;oa[7]=0;oa[11]=0;oa[15]=1;return oa}function O(ma,sa){if(sa.spatialReference===ma)return sa.spatialReferenceId;sa.spatialReference=ma;"metersPerUnit"in sa&&(sa.metersPerUnit=f.getMetersPerUnitForSR(ma,1));return ma.wkt===m.SphericalECEFSpatialReference.wkt?sa.spatialReferenceId=1:p.isWGS84(ma)?sa.spatialReferenceId=2:p.isWebMercator(ma)?sa.spatialReferenceId=3:ma.wkt===m.WGS84ECEFSpatialReference.wkt?sa.spatialReferenceId=4:4490===ma.wkid?sa.spatialReferenceId=
5:ma.wkt===m.SphericalPCPFMars.wkt?sa.spatialReferenceId=7:ma.wkt===m.SphericalPCPFMoon.wkt?sa.spatialReferenceId=9:p.isMars(ma)?sa.spatialReferenceId=8:p.isMoon(ma)?sa.spatialReferenceId=10:sa.spatialReferenceId=0}function P(ma,sa,oa,ya){ma!==oa&&(oa[ya++]=ma[sa++],oa[ya++]=ma[sa++],oa[ya]=ma[sa])}function S(ma,sa,oa,ya){oa[ya++]=Ka*(ma[sa++]/b.earth.radius);oa[ya++]=Ka*(Math.PI/2-2*Math.atan(Math.exp(-1*ma[sa++]/b.earth.radius)));oa[ya]=ma[sa]}function Y(ma,sa,oa,ya){S(ma,sa,oa,ya);ja(oa,ya,oa,
ya)}function ta(ma,sa,oa,ya){S(ma,sa,oa,ya);K(oa,ya,oa,ya)}function wa(ma,sa,oa,ya,Aa){var Ca=.4999999*Math.PI;Ca=w.clamp(Ja*ma[sa+1],-Ca,Ca);Ca=Math.sin(Ca);oa[ya++]=Ja*ma[sa]*Aa.radius;oa[ya++]=Aa.halfSemiMajorAxis*Math.log((1+Ca)/(1-Ca));oa[ya]=ma[sa+2]}function G(ma,sa,oa,ya){wa(ma,sa,oa,ya,b.earth)}function I(ma,sa,oa,ya,Aa){Aa+=ma[sa+2];const Ca=Ja*ma[sa+1];ma=Ja*ma[sa];sa=Math.cos(Ca);oa[ya++]=Math.cos(ma)*sa*Aa;oa[ya++]=Math.sin(ma)*sa*Aa;oa[ya]=Math.sin(Ca)*Aa}function ca(ma,sa,oa,ya){I(ma,
sa,oa,ya,b.moon.radius)}function ia(ma,sa,oa,ya){I(ma,sa,oa,ya,b.mars.radius)}function ja(ma,sa,oa,ya){I(ma,sa,oa,ya,b.earth.radius)}function la(ma,sa,oa,ya,Aa){var Ca=ma[sa];const Da=ma[sa+1];sa=ma[sa+2];ma=Math.sqrt(Ca*Ca+Da*Da+sa*sa);sa=w.asinClamped(sa/(0===ma?1:ma));Ca=Math.atan2(Da,Ca);oa[ya++]=Ka*Ca;oa[ya++]=Ka*sa;oa[ya]=ma-Aa}function da(ma,sa,oa,ya){la(ma,sa,oa,ya,b.moon.radius)}function ka(ma,sa,oa,ya){la(ma,sa,oa,ya,b.mars.radius)}function X(ma,sa,oa,ya){la(ma,sa,oa,ya,b.earth.radius)}
function ha(ma,sa,oa,ya){X(ma,sa,oa,ya);G(oa,ya,oa,ya)}function fa(ma,sa,oa,ya){X(ma,sa,oa,ya);K(oa,ya,oa,ya)}function K(ma,sa,oa,ya){{var Aa=b.earth;const Da=Ja*ma[sa];var Ca=Ja*ma[sa+1];ma=ma[sa+2];sa=Math.sin(Ca);Ca=Math.cos(Ca);const Fa=Aa.radius/Math.sqrt(1-Aa.eccentricitySquared*sa*sa);oa[ya++]=(Fa+ma)*Ca*Math.cos(Da);oa[ya++]=(Fa+ma)*Ca*Math.sin(Da);oa[ya++]=(Fa*(1-Aa.eccentricitySquared)+ma)*sa}}function ba(ma,sa,oa,ya){var Aa=F.earthEllipsoidConstants,Ca=ma[sa],Da=ma[sa+1];ma=ma[sa+2];let Fa;
sa=Math.abs(ma);var Na=Ca*Ca+Da*Da;var Ma=Math.sqrt(Na);var La=Na+ma*ma;var Qa=Math.sqrt(La);Ca=Math.atan2(Da,Ca);var Sa=ma*ma/La;La=Na/La;Da=Aa.a2/Qa;Na=Aa.a3-Aa.a4/Qa;.3<La?(Sa=sa/Qa*(1+La*(Aa.a1+Da+Sa*Na)/Qa),Qa=Math.asin(Sa),Da=Sa*Sa,La=Math.sqrt(1-Da)):(La=Ma/Qa*(1-Sa*(Aa.a5-Da-La*Na)/Qa),Qa=Math.acos(La),Da=1-La*La,Sa=Math.sqrt(Da));Fa=1-b.earth.eccentricitySquared*Da;Da=b.earth.radius/Math.sqrt(Fa);Aa=Aa.a6*Da;Da=Ma-Da*La;Na=sa-Aa*Sa;sa=La*Da+Sa*Na;Ma=La*Na-Sa*Da;Aa=Ma/(Aa/Fa+sa);Qa+=Aa;0>
ma&&(Qa=-Qa);oa[ya++]=Ka*Ca;oa[ya++]=Ka*Qa;oa[ya]=sa+Ma*Aa/2}function ea(ma,sa,oa,ya){ba(ma,sa,oa,ya);ja(oa,ya,oa,ya)}function aa(ma,sa,oa,ya){ba(ma,sa,oa,ya);G(oa,ya,oa,ya)}function pa(ma,sa,oa=ra()){return A.isNone(ma)||A.isNone(sa)?null:na(ma,sa,oa).projector}function na(ma,sa,oa){if(A.isNone(ma)||A.isNone(sa)||oa.source.spatialReference===ma&&oa.dest.spatialReference===sa)return oa;const ya=O(ma,oa.source),Aa=O(sa,oa.dest);0===ya&&0===Aa?p.equals(ma,sa)?oa.projector=P:oa.projector=null:oa.projector=
Ba[ya][Aa];return oa}function ra(){return{source:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},projector:P}}let va=null,qa=null,xa=null,ua={},za=function(ma){function sa(){return ma.call(this,"projection:not-loaded","projection engine not fully loaded yet, please call load()")||this}r._inheritsLoose(sa,ma);return sa}(v);const Ba={[2]:{[5]:null,[8]:null,[10]:null,[6]:P,[1]:ja,[7]:null,[9]:null,[0]:null,[3]:G,[2]:P,[4]:K},
[5]:{[5]:P,[8]:null,[10]:null,[6]:P,[1]:ja,[7]:null,[9]:null,[0]:null,[3]:null,[2]:null,[4]:K},[8]:{[5]:null,[8]:P,[10]:null,[6]:null,[1]:null,[7]:ia,[9]:null,[0]:null,[3]:null,[2]:null,[4]:null},[10]:{[5]:null,[8]:null,[10]:P,[6]:null,[1]:null,[7]:null,[9]:ca,[0]:null,[3]:null,[2]:null,[4]:null},[3]:{[5]:null,[8]:null,[10]:null,[6]:S,[1]:Y,[7]:null,[9]:null,[0]:null,[3]:P,[2]:S,[4]:ta},[4]:{[5]:ba,[8]:null,[10]:null,[6]:ba,[1]:ea,[7]:null,[9]:null,[0]:null,[3]:aa,[2]:ba,[4]:P},[1]:{[5]:X,[8]:null,
[10]:null,[6]:X,[1]:P,[7]:null,[9]:null,[0]:null,[3]:ha,[2]:X,[4]:fa},[7]:{[5]:null,[8]:ka,[10]:null,[6]:null,[1]:null,[7]:P,[9]:null,[0]:null,[3]:null,[2]:null,[4]:null},[9]:{[5]:null,[8]:null,[10]:da,[6]:null,[1]:null,[7]:null,[9]:P,[0]:null,[3]:null,[2]:null,[4]:null},[0]:{[5]:null,[8]:null,[10]:null,[6]:null,[1]:null,[7]:null,[9]:null,[0]:P,[3]:null,[2]:null,[4]:null},[6]:{[5]:null,[8]:null,[10]:null,[6]:P,[1]:ja,[7]:null,[9]:null,[0]:null,[3]:null,[2]:P,[4]:K}},Ea={spatialReference:null,spatialReferenceId:0},
Ha={spatialReference:null,spatialReferenceId:0},Oa=ra(),Pa=ra(),Ja=w.deg2rad(1),Ka=w.rad2deg(1),Ia=x.create(),Ra=x.create(),Ta=x.create(),Ga=x.create(),Ua=x.create();g.canProjectToWGS84ComparableLonLat=function(ma){if(A.isNone(ma))return!1;ma=O(ma,Ea);return!!Ba[ma][6]};g.canProjectWithoutEngine=H;g.computeLatLonToENURotation=Z;g.computeLinearTransformation=function(ma,sa,oa,ya){if(A.isNone(ma)||A.isNone(ya))return!1;var Aa=O(ma,Ea),Ca=O(ya,Ha);if(Aa===Ca&&1!==Ca&&(0!==Aa||p.equals(ma,ya)))return e.identity(oa),
e.translate(oa,oa,sa),!0;if(1===Ca||7===Ca||9===Ca){ya=ma=0;if(1===Ca){Aa=Ba[Aa][6];Ca=Ba[6][Ca];if(A.isNone(Aa)||A.isNone(Ca))return!1;Aa(sa,0,Ra,0);Ca(Ra,0,Ta,0);ma=Ja*Ra[0];ya=Ja*Ra[1]}else if(7===Ca||9===Ca){Ca=Ba[Aa][Ca];if(A.isNone(Ca))return!1;Ca(sa,0,Ta,0);ma=Ja*sa[0];ya=Ja*sa[1]}Z(ya,ma,oa);oa[12]=Ta[0];oa[13]=Ta[1];oa[14]=Ta[2];return!0}if(3===Ca&&(2===Aa||1===Aa)){Ca=Ba[Aa][6];if(A.isNone(Ca))return!1;Ca(sa,0,Ra,0);sa=Ja*Ra[1];G(Ra,0,Ta,0);e.identity(oa);e.translate(oa,oa,Ta);sa=1/Math.cos(sa);
e.scale(oa,oa,[sa,sa,1]);return!0}return!1};g.getProjectorName=function(ma,sa){switch(pa(ma,sa,Oa)){case P:return"copy3";case ja:return"wgs84ToSphericalECEF";case G:return"wgs84ToWebMercator";case K:return"wgs84ToWGS84ECEF";case S:return"webMercatorToWGS84";case Y:return"webMercatorToSphericalECEF";case ta:return"webMercatorToWGS84ECEF";case ba:return"wgs84ECEFToWGS84";case ea:return"wgs84ECEFToSphericalECEF";case aa:return"wgs84ECEFToWebMercator";case X:return"sphericalECEFToWGS84";case ha:return"sphericalECEFToWebMercator";
case ka:return"sphericalMarsPCPFToMars2000";case da:return"sphericalMoonPCPFToMoon2000";case fa:return"sphericalECEFToWGS84ECEF";case ia:return"mars2000ToSphericalPCPF";case ca:return"moon2000ToSphericalPCPF";default:return null}};g.getTransformation=B;g.getTransformations=function(ma,sa,oa=null){if(A.isNone(va))throw new za;ma=va._getTransformationBySuitability(qa,ma,sa,oa,null==oa?void 0:oa.spatialReference);if(null!==ma){sa=[];for(const ya of ma)sa.push(E.fromGE(ya));return sa}return[]};g.initializeProjection=
async function(ma,sa){if(!u())for(const {source:oa,dest:ya,geographicTransformation:Aa}of ma)if(!H(oa,ya,Aa))return z(sa)};g.isLoaded=u;g.isSupported=function(){return!0};g.load=z;g.localLinearScaleFactors=function(ma,sa,oa,ya){if(A.isNone(sa)||A.isNone(ya))return!1;const Aa=O(sa,Ea);var Ca=O(ya,Ha);if(Aa===Ca&&0!==Aa||p.equals(sa,ya))return oa[0]=1,oa[1]=1,oa[2]=1,!0;if(1===Aa){sa=c.length(ma);ma=sa/Math.sqrt(ma[0]*ma[0]+ma[1]*ma[1]);sa/=b.earth.radius;if(3===Ca)return oa[0]=ma*sa,oa[1]=ma*sa,oa[2]=
1,!0;if(2===Ca||5===Ca)return Ca=180/(b.earth.radius*Math.PI),oa[0]=Ca*ma*sa,oa[1]=Ca*sa,oa[2]=1,!0}return!1};g.lonLatToSphericalPCPF=function(ma,sa,oa,ya,Aa=0){ya+=Aa;Aa=Math.cos(oa);ma[0]=Math.cos(sa)*Aa*ya;ma[1]=Math.sin(sa)*Aa*ya;ma[2]=Math.sin(oa)*ya};g.lonLatToWebMercatorComparable=wa;g.project=function(ma,sa,oa=null){return Array.isArray(ma)?0===ma.length?[]:y(qa,ma,ma[0].spatialReference,sa,oa):y(qa,[ma],ma.spatialReference,sa,oa)[0]};g.projectBoundingRect=function(ma,sa,oa,ya){if(null==ma)return!1;
if(p.equals(sa,ya))return h.set(oa,ma),!0;Ia[0]=ma[0];Ia[1]=ma[1];Ia[2]=0;if(!W(Ia,sa,0,Ia,ya,0,1))return!1;oa[0]=Ia[0];oa[1]=Ia[1];Ia[0]=ma[2];Ia[1]=ma[3];Ia[2]=0;if(!W(Ia,sa,0,Ia,ya,0,1))return!1;oa[2]=Ia[0];oa[3]=Ia[1];return!0};g.projectBoundingSphere=function(ma,sa,oa,ya){if(A.isNone(sa)||A.isNone(ya))return!1;sa=na(sa,ya,Pa);if(sa.projector===P)return oa[0]=ma[0],oa[1]=ma[1],oa[2]=ma[2],oa[3]=ma[3],!0;if(A.isNone(sa.projector))return!1;const {source:Aa,dest:Ca}=sa;if(3===Ca.spatialReferenceId){sa=
Ba[Aa.spatialReferenceId][2];if(A.isNone(sa))return!1;sa(ma,0,Ra,0);sa=Math.abs(Ja*Ra[1])+Math.asin(ma[3]/(b.earth.radius+ma[2]));G(Ra,0,oa,0);oa[3]=sa>.9999*Math.PI?Number.MAX_VALUE:1/Math.cos(sa)*ma[3];return!0}sa.projector(ma,0,oa,0);oa[3]=ma[3]*Aa.metersPerUnit/Ca.metersPerUnit;return!0};g.projectBuffer=W;g.projectDirection=function(ma,sa,oa,ya,Aa){c.copy(Ga,ma);c.add(Ua,ma,sa);V(Ga,oa,Ga,Aa);V(Ua,oa,Ua,Aa);c.subtract(ya,Ua,Ga);c.normalize(ya,ya)};g.projectExtent=function(ma,sa,oa=sa.spatialReference,
ya=0){return A.isNone(oa)?!1:L(ma,ma.spatialReference,sa,oa,ya)};g.projectMany=y;g.projectMultipoint=function(ma,sa,oa=sa.spatialReference,ya=0){return A.isNone(oa)?!1:U(ma,ma.spatialReference,sa,oa,ya)};g.projectPoint=function(ma,sa,oa=sa.spatialReference,ya=0){return A.isNone(oa)?!1:M(ma,ma.spatialReference,sa,oa,ya)};g.projectPointToVector=function(ma,sa,oa,ya=0){Ga[0]=ma.x;Ga[1]=ma.y;const Aa=ma.z;Ga[2]=void 0!==Aa?Aa:ya;return W(Ga,ma.spatialReference,0,sa,oa,0,1)};g.projectPointToWGS84ComparableLonLat=
function(ma,sa){Ga[0]=ma.x;Ga[1]=ma.y;const oa=ma.z;Ga[2]=void 0!==oa?oa:0;return T(Ga,ma.spatialReference,sa)};g.projectPolygon=function(ma,sa,oa=sa.spatialReference,ya=0){return A.isNone(oa)?!1:J(ma,ma.spatialReference,sa,oa,ya)};g.projectPolyline=function(ma,sa,oa=sa.spatialReference,ya=0){return A.isNone(oa)?!1:R(ma,ma.spatialReference,sa,oa,ya)};g.projectVectorToDehydratedPoint=function(ma,sa,oa){return W(ma,sa,0,Ga,oa.spatialReference,0,1)?(oa.x=Ga[0],oa.y=Ga[1],oa.z=Ga[2],oa):null};g.projectVectorToPoint=
function(ma,sa,oa){if(A.isNone(sa)||A.isNone(oa))return null;const ya=new k({spatialReference:oa});return W(ma,sa,0,Ga,oa,0,1)?(ya.x=Ga[0],ya.y=Ga[1],ya.z=Ga[2],ya):null};g.projectVectorToVector=V;g.projectVectorToWGS84ComparableLonLat=T;g.projectXYZToVector=N;g.sphericalPCPFtoLonLatElevation=la;g.unload=function(){xa=qa=va=null;ua={}};Object.defineProperty(g,"__esModule",{value:!0})})},"esri/chunks/pe":function(){define(["require","exports","./_rollupPluginBabelHelpers","../core/has","../assets"],
function(a,g,r,A,v){function t(){return!!g._pe}function p(){return!!A("esri-wasm")}function b(){return w?w:w=(new Promise(function(c,m){a(["./pe-wasm"],c,m)})).then(function(c){return c.peWasm}).then(({default:c})=>c({locateFile:m=>v.getAssetUrl(`esri/geometry/support/${m}`)})).then(c=>{k(c)})}function k(c){function m(d,h,F){d[h]=F(d[h])}g._pe=c;g.PeDefs.init();g.PeGTlistExtended.init();g.PeNotationMgrs.init();g.PeNotationUtm.init();g.PePCSInfo.init();g.PeGCSExtent=function(d){function h(){return d.apply(this,
arguments)||this}r._inheritsLoose(h,d);h.prototype.destroy=function(){g._pe.destroy(this)};return h}(g._pe.PeGCSExtent);c=[g._pe.PeDatum,g._pe.PeGeogcs,g._pe.PeGeogtran,g._pe.PeObject,g._pe.PeParameter,g._pe.PePrimem,g._pe.PeProjcs,g._pe.PeSpheroid,g._pe.PeUnit];for(var f of c)m(f.prototype,"getName",d=>function(){return d.call(this,Array(g.PeDefs.PE_NAME_MAX))});for(const d of[g._pe.PeGeogtran,g._pe.PeProjcs])m(d.prototype,"getParameters",h=>function(){const F=Array(g.PeDefs.PE_PARM_MAX);let E=h.call(this);
for(let u=0;u<F.length;u++){const z=g._pe.getValue(E,"*");F[u]=z?g._pe.wrapPointer(z,g._pe.PeParameter):null;E+=Int32Array.BYTES_PER_ELEMENT}return F});m(g._pe.PeHorizon.prototype,"getCoord",d=>function(){const h=this.getSize();if(!h)return null;const F=[],E=d.call(this);C(F,h,E);return F});m(g._pe.PeGTlistExtendedEntry.prototype,"getEntries",d=>{const h=g._pe._pe_getPeGTlistExtendedGTsSize();return function(){let F=null;var E=d.call(this);if(!g._pe.compare(E,g._pe.NULL)){F=[E];const u=this.getSteps();
if(1<u){E=g._pe.getPointer(E);for(let z=1;z<u;z++)F.push(g._pe.wrapPointer(E+h*z,g._pe.PeGTlistExtendedGTs))}}return F}});const e=g._pe._pe_getPeHorizonSize();f=d=>function(){let h=this._cache;h||(this._cache=h=new Map);if(h.has(d))return h.get(d);let F=null;var E=d.call(this);if(!g._pe.compare(E,g._pe.NULL)){F=[E];const u=E.getNump();if(1<u){E=g._pe.getPointer(E);for(let z=1;z<u;z++)F.push(g._pe.wrapPointer(E+e*z,g._pe.PeHorizon))}}h.set(d,F);return F};m(g._pe.PeProjcs.prototype,"horizonGcsGenerate",
f);m(g._pe.PeProjcs.prototype,"horizonPcsGenerate",f);g._pe.PeObject.prototype.toString=function(d=g.PeDefs.PE_STR_OPTS_NONE){g._pe.ensureCache.prepare();const h=g._pe.getPointer(this),F=g._pe.ensureInt8(Array(g.PeDefs.PE_BUFFER_MAX));return g._pe.UTF8ToString(g._pe._pe_object_to_string_ext(h,d,F))}}function n(c){if(c){var m=g._pe.getClass(c);m&&(m=g._pe.getCache(m))&&(c=g._pe.getPointer(c))&&delete m[c]}}function l(c,m){const f=[];m=Array(m);for(let e=0;e<c;e++)f.push(g._pe.ensureInt8(m));return f}
function q(c){let m;Array.isArray(c[0])?(m=[],c.forEach(f=>{m.push(f[0],f[1])})):m=c;return m}function C(c,m,f,e=!1){if(e)for(e=0;e<2*m;e++)c[e]=g._pe.getValue(f+e*Float64Array.BYTES_PER_ELEMENT,"double");else{e=0===c.length;for(let d=0;d<m;d++)e&&(c[d]=Array(2)),c[d][0]=g._pe.getValue(f,"double"),c[d][1]=g._pe.getValue(f+Float64Array.BYTES_PER_ELEMENT,"double"),f+=2*Float64Array.BYTES_PER_ELEMENT}}let w;g._pe=null;(function(c){function m(d,h,F){g._pe.ensureCache.prepare();var E=q(F);const u=F===
E;E=g._pe.ensureFloat64(E);(d=g._pe._pe_geog_to_proj(g._pe.getPointer(d),h,E))&&C(F,h,E,u);return d}function f(d,h,F){return e(d,h,F,0)}function e(d,h,F,E){g._pe.ensureCache.prepare();var u=q(F);const z=F===u;u=g._pe.ensureFloat64(u);(d=g._pe._pe_proj_to_geog_center(g._pe.getPointer(d),h,u,E))&&C(F,h,u,z);return d}c.geogToProj=m;c.projGeog=function(d,h,F,E){switch(E){case g.PeDefs.PE_TRANSFORM_P_TO_G:return f(d,h,F);case g.PeDefs.PE_TRANSFORM_G_TO_P:return m(d,h,F)}return 0};c.projToGeog=f;c.projToGeogCenter=
e})(g.PeCSTransformations||(g.PeCSTransformations={}));(function(c){c.init=function(){c.PE_BUFFER_MAX=g._pe.PeDefs.prototype.PE_BUFFER_MAX;c.PE_NAME_MAX=g._pe.PeDefs.prototype.PE_NAME_MAX;c.PE_MGRS_MAX=g._pe.PeDefs.prototype.PE_MGRS_MAX;c.PE_USNG_MAX=g._pe.PeDefs.prototype.PE_USNG_MAX;c.PE_DD_MAX=g._pe.PeDefs.prototype.PE_DD_MAX;c.PE_DDM_MAX=g._pe.PeDefs.prototype.PE_DDM_MAX;c.PE_DMS_MAX=g._pe.PeDefs.prototype.PE_DMS_MAX;c.PE_UTM_MAX=g._pe.PeDefs.prototype.PE_UTM_MAX;c.PE_PARM_MAX=g._pe.PeDefs.prototype.PE_PARM_MAX;
c.PE_TYPE_NONE=g._pe.PeDefs.prototype.PE_TYPE_NONE;c.PE_TYPE_GEOGCS=g._pe.PeDefs.prototype.PE_TYPE_GEOGCS;c.PE_TYPE_PROJCS=g._pe.PeDefs.prototype.PE_TYPE_PROJCS;c.PE_TYPE_GEOGTRAN=g._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;c.PE_TYPE_COORDSYS=g._pe.PeDefs.prototype.PE_TYPE_COORDSYS;c.PE_TYPE_UNIT=g._pe.PeDefs.prototype.PE_TYPE_UNIT;c.PE_TYPE_LINUNIT=g._pe.PeDefs.prototype.PE_TYPE_LINUNIT;c.PE_STR_OPTS_NONE=g._pe.PeDefs.prototype.PE_STR_OPTS_NONE;c.PE_STR_AUTH_NONE=g._pe.PeDefs.prototype.PE_STR_AUTH_NONE;
c.PE_STR_AUTH_TOP=g._pe.PeDefs.prototype.PE_STR_AUTH_TOP;c.PE_STR_NAME_CANON=g._pe.PeDefs.prototype.PE_STR_NAME_CANON;c.PE_PARM_X0=g._pe.PeDefs.prototype.PE_PARM_X0;c.PE_PARM_ND=g._pe.PeDefs.prototype.PE_PARM_ND;c.PE_TRANSFORM_1_TO_2=g._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;c.PE_TRANSFORM_2_TO_1=g._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;c.PE_TRANSFORM_P_TO_G=g._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;c.PE_TRANSFORM_G_TO_P=g._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;c.PE_HORIZON_RECT=g._pe.PeDefs.prototype.PE_HORIZON_RECT;
c.PE_HORIZON_POLY=g._pe.PeDefs.prototype.PE_HORIZON_POLY;c.PE_HORIZON_LINE=g._pe.PeDefs.prototype.PE_HORIZON_LINE;c.PE_HORIZON_DELTA=g._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(g.PeDefs||(g.PeDefs={}));(function(c){function m(h,F){let E=null,u=f[h];u||(u={},f[h]=u);u.hasOwnProperty(String(F))?E=u[F]:(h=g._pe.PeFactory.prototype.factoryByType(h,F),g._pe.compare(h,g._pe.NULL)||(E=h,u[F]=E));return E=d(E)}const f={},e={},d=h=>{if(h){const F=h.getType();switch(F){case g.PeDefs.PE_TYPE_GEOGCS:h=g._pe.castObject(h,
g._pe.PeGeogcs);break;case g.PeDefs.PE_TYPE_PROJCS:h=g._pe.castObject(h,g._pe.PeProjcs);break;case g.PeDefs.PE_TYPE_GEOGTRAN:h=g._pe.castObject(h,g._pe.PeGeogtran);break;default:F&g.PeDefs.PE_TYPE_UNIT&&(h=g._pe.castObject(h,g._pe.PeUnit))}}return h};c.initialize=function(){g._pe.PeFactory.prototype.initialize(null)};c.coordsys=function(h){return m(g.PeDefs.PE_TYPE_COORDSYS,h)};c.factoryByType=m;c.fromString=function(h,F){let E=null,u=e[h];u||(u={},e[h]=u);u.hasOwnProperty(F)?E=u[F]:(h=g._pe.PeFactory.prototype.fromString(h,
F),g._pe.compare(h,g._pe.NULL)||(E=h,u[F]=E));return E=d(E)};c.geogcs=function(h){return m(g.PeDefs.PE_TYPE_GEOGCS,h)};c.geogtran=function(h){return m(g.PeDefs.PE_TYPE_GEOGTRAN,h)};c.getCode=function(h){return g._pe.PeFactory.prototype.getCode(h)};c.projcs=function(h){return m(g.PeDefs.PE_TYPE_PROJCS,h)};c.unit=function(h){return m(g.PeDefs.PE_TYPE_UNIT,h)}})(g.PeFactory||(g.PeFactory={}));g.PeGCSExtent=null;(function(c){let m;c.init=function(){c.PE_GTLIST_OPTS_COMMON=g._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;
m=g._pe._pe_getPeGTlistExtendedEntrySize()};c.getGTlist=function(f,e,d,h,F,E){let u=null;const z=new g._pe.PeInteger(E);try{const y=g._pe.PeGTlistExtended.prototype.getGTlist(f,e,d,h,F,z);if(E=z.val)if(u=[y],1<E){const B=g._pe.getPointer(y);for(f=1;f<E;f++)u.push(g._pe.wrapPointer(B+m*f,g._pe.PeGTlistExtendedEntry))}}finally{g._pe.destroy(z)}return u}})(g.PeGTlistExtended||(g.PeGTlistExtended={}));(function(c){c.destroy=function(m){if(m&&m.length){for(const f of m)n(f),f.getEntries().forEach(e=>{n(e);
e=e.getGeogtran();n(e);e.getParameters().forEach(n);[e.getGeogcs1(),e.getGeogcs2()].forEach(d=>{n(d);const h=d.getDatum();n(h);n(h.getSpheroid());n(d.getPrimem());n(d.getUnit())})});g._pe.PeGTlistExtendedEntry.prototype.Delete(m[0])}}})(g.PeGTlistExtendedEntry||(g.PeGTlistExtendedEntry={}));(function(c){c.geogToGeog=function(m,f,e,d,h){g._pe.ensureCache.prepare();var F=q(e);const E=e===F;F=g._pe.ensureFloat64(F);let u=0;d&&(u=g._pe.ensureFloat64(d));(m=g._pe._pe_geog_to_geog(g._pe.getPointer(m),f,
F,u,h))&&C(e,f,F,E);return m}})(g.PeGTTransformations||(g.PeGTTransformations={}));(function(c){const m=(e,d,h,F,E,u)=>{g._pe.ensureCache.prepare();switch(e){case "dd":var z=g._pe._pe_geog_to_dd;var y=g.PeDefs.PE_DD_MAX;break;case "ddm":z=g._pe._pe_geog_to_ddm;y=g.PeDefs.PE_DDM_MAX;break;case "dms":z=g._pe._pe_geog_to_dms,y=g.PeDefs.PE_DMS_MAX}e=0;d&&(e=g._pe.getPointer(d));d=q(F);d=g._pe.ensureFloat64(d);y=l(h,y);F=g._pe.ensureInt32(y);if(E=z(e,h,d,E,F))for(z=0;z<h;z++)u[z]=g._pe.UTF8ToString(y[z]);
return E},f=(e,d,h,F,E)=>{g._pe.ensureCache.prepare();switch(e){case "dd":var u=g._pe._pe_dd_to_geog;break;case "ddm":u=g._pe._pe_ddm_to_geog;break;case "dms":u=g._pe._pe_dms_to_geog}e=0;d&&(e=g._pe.getPointer(d));d=F.map(z=>g._pe.ensureString(z));F=g._pe.ensureInt32(d);d=g._pe.ensureFloat64(Array(2*h));(u=u(e,h,F,d))&&C(E,h,d);return u};c.geog_to_dms=function(e,d,h,F,E){return m("dms",e,d,h,F,E)};c.dms_to_geog=function(e,d,h,F){return f("dms",e,d,h,F)};c.geog_to_ddm=function(e,d,h,F,E){return m("ddm",
e,d,h,F,E)};c.ddm_to_geog=function(e,d,h,F){return f("ddm",e,d,h,F)};c.geog_to_dd=function(e,d,h,F,E){return m("dd",e,d,h,F,E)};c.dd_to_geog=function(e,d,h,F){return f("dd",e,d,h,F)}})(g.PeNotationDms||(g.PeNotationDms={}));(function(c){c.init=function(){c.PE_MGRS_STYLE_NEW=g._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;c.PE_MGRS_STYLE_OLD=g._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;c.PE_MGRS_STYLE_AUTO=g._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;c.PE_MGRS_180_ZONE_1_PLUS=g._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;
c.PE_MGRS_ADD_SPACES=g._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};c.geog_to_mgrs_extended=function(m,f,e,d,h,F,E){g._pe.ensureCache.prepare();let u=0;m&&(u=g._pe.getPointer(m));m=q(e);e=g._pe.ensureFloat64(m);m=l(f,g.PeDefs.PE_MGRS_MAX);const z=g._pe.ensureInt32(m);if(d=g._pe._pe_geog_to_mgrs_extended(u,f,e,d,h,F,z))for(h=0;h<f;h++)E[h]=g._pe.UTF8ToString(m[h]);return d};c.mgrs_to_geog_extended=function(m,f,e,d,h){g._pe.ensureCache.prepare();let F=0;m&&(F=g._pe.getPointer(m));m=e.map(E=>g._pe.ensureString(E));
e=g._pe.ensureInt32(m);m=g._pe.ensureFloat64(Array(2*f));(d=g._pe._pe_mgrs_to_geog_extended(F,f,e,d,m))&&C(h,f,m);return d}})(g.PeNotationMgrs||(g.PeNotationMgrs={}));(function(c){c.geog_to_usng=function(m,f,e,d,h,F,E){g._pe.ensureCache.prepare();let u=0;m&&(u=g._pe.getPointer(m));m=q(e);e=g._pe.ensureFloat64(m);m=l(f,g.PeDefs.PE_MGRS_MAX);const z=g._pe.ensureInt32(m);if(d=g._pe._pe_geog_to_usng(u,f,e,d,h,F,z))for(h=0;h<f;h++)E[h]=g._pe.UTF8ToString(m[h]);return d};c.usng_to_geog=function(m,f,e,d){g._pe.ensureCache.prepare();
var h=0;m&&(h=g._pe.getPointer(m));m=e.map(F=>g._pe.ensureString(F));e=g._pe.ensureInt32(m);m=g._pe.ensureFloat64(Array(2*f));(h=g._pe._pe_usng_to_geog(h,f,e,m))&&C(d,f,m);return h}})(g.PeNotationUsng||(g.PeNotationUsng={}));(function(c){c.init=function(){c.PE_UTM_OPTS_NONE=g._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;c.PE_UTM_OPTS_ADD_SPACES=g._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;c.PE_UTM_OPTS_NS=g._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};c.geog_to_utm=function(m,f,e,d,h){g._pe.ensureCache.prepare();
var F=0;m&&(F=g._pe.getPointer(m));m=q(e);e=g._pe.ensureFloat64(m);m=l(f,g.PeDefs.PE_UTM_MAX);const E=g._pe.ensureInt32(m);if(d=g._pe._pe_geog_to_utm(F,f,e,d,E))for(F=0;F<f;F++)h[F]=g._pe.UTF8ToString(m[F]);return d};c.utm_to_geog=function(m,f,e,d,h){g._pe.ensureCache.prepare();let F=0;m&&(F=g._pe.getPointer(m));m=e.map(E=>g._pe.ensureString(E));e=g._pe.ensureInt32(m);m=g._pe.ensureFloat64(Array(2*f));(d=g._pe._pe_utm_to_geog(F,f,e,d,m))&&C(h,f,m);return d}})(g.PeNotationUtm||(g.PeNotationUtm={}));
(function(c){const m=new Map;c.init=function(){c.PE_PCSINFO_OPTION_NONE=g._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;c.PE_PCSINFO_OPTION_DOMAIN=g._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;c.PE_POLE_OUTSIDE_BOUNDARY=g._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;c.PE_POLE_POINT=g._pe.PePCSInfo.prototype.PE_POLE_POINT};c.generate=function(f,e=c.PE_PCSINFO_OPTION_DOMAIN){let d,h;m.has(f)&&(h=m.get(f),h[e]&&(d=h[e]));d||(d=g._pe.PePCSInfo.prototype.generate(f,e),h||(h=[],m.set(f,h)),h[e]=
d);return d}})(g.PePCSInfo||(g.PePCSInfo={}));(function(c){c.version_string=function(){return g._pe.PeVersion.prototype.version_string()}})(g.PeVersion||(g.PeVersion={}));var x=Object.freeze({__proto__:null,get _pe(){return g._pe},isLoaded:t,isSupported:p,load:b,get PeCSTransformations(){return g.PeCSTransformations},get PeDefs(){return g.PeDefs},get PeFactory(){return g.PeFactory},get PeGCSExtent(){return g.PeGCSExtent},get PeGTlistExtended(){return g.PeGTlistExtended},get PeGTlistExtendedEntry(){return g.PeGTlistExtendedEntry},
get PeGTTransformations(){return g.PeGTTransformations},get PeNotationDms(){return g.PeNotationDms},get PeNotationMgrs(){return g.PeNotationMgrs},get PeNotationUsng(){return g.PeNotationUsng},get PeNotationUtm(){return g.PeNotationUtm},get PePCSInfo(){return g.PePCSInfo},get PeVersion(){return g.PeVersion},_init:k});g._init=k;g.isLoaded=t;g.isSupported=p;g.load=b;g.pe=x})},"esri/geometry/support/geodesicConstants":function(){define(["exports","./Ellipsoid"],function(a,g){const r=Math.PI/180;var A=
g.earth.radius;const v=g.earth.eccentricitySquared;A={a1:A*v,a2:A*v*A*v,a3:A*v*v/2,a4:A*v*A*v*2.5,a5:A*v+A*v*v/2,a6:1-v};g={4326:{a:g.earth.radius,f:g.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,f:0},104902:{a:6051800,f:0},104903:{a:g.moon.radius,f:g.moon.flattening},104904:{a:3393400,f:.005207166853303471},104905:{a:g.mars.radius,f:g.mars.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1E4,
f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},104914:{a:4E4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,f:3},104922:{a:18E3,f:0},104923:{a:14E3,f:0},104924:{a:49300,f:0},104925:{a:60268E3,f:.09796243445941462},104926:{a:16E3,f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,f:0},
104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,f:0},104938:{a:11E4,f:0},104939:{a:50100,f:0},104940:{a:764E3,f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},104945:{a:578900,f:0},104946:{a:33E3,f:0},104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,f:0},104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},104958:{a:788900,
f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},104961:{a:74E3,f:0},104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,f:0},104968:{a:1352600,f:0},104969:{a:1195E3,f:0},104970:{a:593E3,f:0},104971:{a:g.mars.radius,f:0},104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};a.WKT_SPHEROID_REGEX=/SPHEROID\[([^\]]+)]/i;a.earthEllipsoidConstants=A;a.spheroids=g;a.toRadians=r;Object.defineProperty(a,
"__esModule",{value:!0})})},"esri/geometry/support/GeographicTransformation":function(){define(["./GeographicTransformationStep"],function(a){return function(){function g(A){this.steps=[];this._cached_projection={};this._chain="";this._gtlistentry=null;if(A&&A.steps)for(const v of A.steps)v instanceof a?this.steps.push(v):this.steps.push(new a({wkid:v.wkid,wkt:v.wkt,isInverse:v.isInverse}))}g.cacheKey=function(A,v){return[void 0!==A.wkid&&null!==A.wkid?A.wkid.toString():"-1",void 0!==A.wkt&&null!==
A.wkt?A.wkt.toString():"",void 0!==v.wkid&&null!==v.wkid?v.wkid.toString():"-1",void 0!==v.wkt&&null!==v.wkt?v.wkt.toString():""].join()};g.fromGE=function(A){const v=new g;let t="";for(const p of A.steps)A=a.fromGE(p),v.steps.push(A),t+=A.uid.toString()+",";v._cached_projection={};v._gtlistentry=null;v._chain=t;return v};var r=g.prototype;r.getInverse=function(){const A=new g;A.steps=[];for(let v=this.steps.length-1;0<=v;v--)A.steps.push(this.steps[v].getInverse());return A};r.getGTListEntry=function(){let A=
"";for(const v of this.steps)A+=v.uid.toString()+",";A!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=A);return this._gtlistentry};r.assignCachedGe=function(A,v,t){this._cached_projection[g.cacheKey(A,v)]=t};r.getCachedGeTransformation=function(A,v){let t="";for(const p of this.steps)t+=p.uid.toString()+",";t!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=t);A=this._cached_projection[g.cacheKey(A,v)];return void 0===A?null:A};return g}()})},
"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(a){let g=0;return function(){function r(A=null){this.uid=g++;A?(this._wkt=void 0!==A.wkt?A.wkt:null,this._wkid=void 0!==A.wkid?A.wkid:-1,this._isInverse=void 0!==A.isInverse?!0===A.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}r.fromGE=function(A){const v=new r;v._wkt=A.wkt;v._wkid=A.wkid;v._isInverse=A.isInverse;return v};r.prototype.getInverse=function(){const A=
new r;A._wkt=this.wkt;A._wkid=this._wkid;A._isInverse=!this.isInverse;return A};a._createClass(r,[{key:"wkt",get:function(){return this._wkt},set:function(A){this._wkt=A;this.uid=g++}},{key:"wkid",get:function(){return this._wkid},set:function(A){this._wkid=A;this.uid=g++}},{key:"isInverse",get:function(){return this._isInverse},set:function(A){this._isInverse=A;this.uid=g++}}]);return r}()})},"esri/views/3d/webgl-engine/materials/HUDMaterial":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../core/mathUtils ../../../../core/screenUtils ../../../../chunks/vec3f64 ../../../../chunks/vec3 ../../../../chunks/mat4 ../../../../geometry/support/aaBoundingRect ../../../../chunks/mat3f64 ../../../../chunks/mat4f64 ../../../../chunks/vec2f64 ../../../../chunks/mat3 ../../../../chunks/vec2 ../../support/buffer/InterleavedLayout ../lib/Util ../lib/geometryDataUtils ./renderers/utils ../lib/screenSizePerspectiveUtils ../../../../core/libs/gl-matrix-2/types/mat4 ../lib/GLMaterialTexture ./internal/MaterialUtil ../lib/Material ./internal/bufferWriterUtils ../../../../chunks/HUDMaterial.glsl ../shaders/HUDMaterialTechnique".split(" "),
function(a,g,r,A,v,t,p,b,k,n,l,q,C,w,x,c,m,f,e,d,h,F,E,u,z,y){function B(ia,ja,la,da=J){w.copy(da,ia.anchorPos);da[0]*=-ja[0];da[1]*=-ja[1];da[0]+=ia.screenOffset[0]*la;da[1]+=ia.screenOffset[1]*la;return da}function H(ia,ja,la,da,ka,X,ha,fa){ja=ja-ka-(0<fa[0]?da[0]*fa[0]:0);let K=ja+da[0]+2*ka;la=la-ka-(0<fa[1]?da[1]*fa[1]:0);ka=la+da[1]+2*ka;ha.textureIsSignedDistanceField&&(ha=ha.distanceFieldBoundingBox,ja+=da[0]*ha[0],la+=da[1]*ha[1],K-=da[0]*(1-ha[2]),ka-=da[1]*(1-ha[3]),ja-=X,K+=X,la-=X,ka+=
X);return ia[0]>ja&&ia[0]<K&&ia[1]>la&&ia[1]<ka}let D=function(ia){function ja(da){da=ia.call(this,da,G)||this;da.techniqueConfig=new y.HUDMaterialTechniqueConfiguration;return da}g._inheritsLoose(ja,ia);var la=ja.prototype;la.getTechniqueConfig=function(da,ka){this.techniqueConfig.output=da;this.techniqueConfig.slicePlaneEnabled=this.params.slicePlaneEnabled;this.techniqueConfig.verticalOffset=!!this.params.verticalOffset;this.techniqueConfig.screenSizePerspective=!!this.params.screenSizePerspective;
this.techniqueConfig.screenCenterOffsetUnitsEnabled="screen"===this.params.centerOffsetUnits?1:0;this.techniqueConfig.polygonOffsetEnabled=this.params.polygonOffset;this.techniqueConfig.isDraped=this.params.isDraped;this.techniqueConfig.occlusionTestEnabled=this.params.occlusionTest;this.techniqueConfig.pixelSnappingEnabled=this.params.pixelSnappingEnabled;this.techniqueConfig.sdf=this.params.textureIsSignedDistanceField;this.techniqueConfig.vvSize=!!this.params.vvSizeEnabled;this.techniqueConfig.vvColor=
!!this.params.vvColorEnabled;0===da&&(this.techniqueConfig.debugDrawBorder=!!this.params.debugDrawBorder);4===da&&(this.techniqueConfig.binaryHighlightOcclusion=this.params.binaryHighlightOcclusion);this.techniqueConfig.depthEnabled=this.params.depthEnabled;this.techniqueConfig.transparencyPassType=ka?ka.transparencyPassType:3;this.techniqueConfig.multipassGeometryEnabled=ka?ka.multipassGeometryEnabled:!1;return this.techniqueConfig};la.intersect=function(da,ka,X,ha,fa,K,ba,ea,aa){aa?this.intersectDrapedHudGeometry(da,
K,ba,ea):this.intersectHudGeometry(da,ka,X,ha,ba,ea)};la.intersectDrapedHudGeometry=function(da,ka,X,ha){const fa=da.vertexAttributes.get("position"),K=da.vertexAttributes.get("size"),ba=this.params,ea=z.calculateAnchorPosForRendering(ba);let aa=1;var pa=1;r.isSome(ha)&&(pa=ha(Y),aa=pa[0],pa=pa[5]);aa*=da.screenToWorldRatio;pa*=da.screenToWorldRatio;ha=2*da.screenToWorldRatio;for(let ra=0;ra<fa.data.length/fa.size;ra++){var na=ra*fa.size;const va=fa.data[na];na=fa.data[na+1];const qa=ra*K.size;ta[0]=
K.data[qa]*aa;ta[1]=K.data[qa+1]*pa;let xa;ba.textureIsSignedDistanceField&&(xa=ba.outlineSize*da.screenToWorldRatio/2);H(ka,va,na,ta,ha,xa,ba,ea)&&X()}};la.intersectHudGeometry=function(da,ka,X,ha,fa,K){if(ha.options.selectionMode&&ha.options.hud&&!f.isInstanceHidden(ka)){ka=this.params;var ba=1,ea=1;C.fromMat4(Q,X);if(r.isSome(K)){ea=K(Y);ba=ea[0];ea=ea[5];{K=Q;var aa=K[0],pa=K[1],na=K[2],ra=K[3],va=K[4],qa=K[5],xa=K[6],ua=K[7],za=K[8],Ba=1/Math.sqrt(aa*aa+pa*pa+na*na);const Ea=1/Math.sqrt(ra*ra+
va*va+qa*qa),Ha=1/Math.sqrt(xa*xa+ua*ua+za*za);K[0]=aa*Ba;K[1]=pa*Ba;K[2]=na*Ba;K[3]=ra*Ea;K[4]=va*Ea;K[5]=qa*Ea;K[6]=xa*Ha;K[7]=ua*Ha;K[8]=za*Ha}}K=da.vertexAttributes.get("position");aa=da.vertexAttributes.get("size");pa=da.vertexAttributes.get("normal");da=da.vertexAttributes.get("auxpos1");c.assert(3<=K.size);na=ha.point;ra=ha.camera;va=z.calculateAnchorPosForRendering(ka);ba*=ra.pixelRatio;ea*=ra.pixelRatio;qa="screen"===this.params.centerOffsetUnits;for(xa=0;xa<K.data.length/K.size;xa++)if(ua=
xa*K.size,p.set(L,K.data[ua],K.data[ua+1],K.data[ua+2]),p.transformMat4(L,L,X),ua=xa*aa.size,ta[0]=aa.data[ua]*ba,ta[1]=aa.data[ua+1]*ea,p.transformMat4(L,L,ra.viewMatrix),ua=xa*da.size,p.set(P,da.data[ua+0],da.data[ua+1],da.data[ua+2]),qa||(L[0]+=P[0],L[1]+=P[1],0!==P[2]&&(ua=P[2],p.normalize(P,L),p.subtract(L,L,p.scale(P,P,ua)))),ua=xa*pa.size,p.set(N,pa.data[ua],pa.data[ua+1],pa.data[ua+2]),this.normalAndViewAngle(N,Q,ra,S),this.applyVerticalOffsetTransformationView(L,S,ra,R),ra.applyProjection(L,
V),-1<V[0]){ua=Math.floor(V[0])+this.params.screenOffset[0];za=Math.floor(V[1])+this.params.screenOffset[1];qa&&(ua+=P[0],0!==P[1]&&(za+=e.applyScaleFactor(P[1],R.factorAlignment)));e.applyPrecomputedScaleFactor(ta,R.factor,ta);Ba=1*ra.pixelRatio;let Ea;ka.textureIsSignedDistanceField&&(Ea=ka.outlineSize*ra.pixelRatio/2);H(na,ua,za,ta,Ba,Ea,ka,va)&&(za=ha.ray,p.transformMat4(W,L,b.invert(O,ra.viewMatrix)),V[0]=na[0],V[1]=na[1],ra.unprojectFromRenderScreen(V,L)&&(ua=t.create(),p.copy(ua,za.direction),
Ba=1/p.length(ua),p.scale(ua,ua,Ba),za=p.distance(za.origin,L)*Ba,fa(za,ua,-1,1,!0,W)))}}};la.computeAttachmentOrigin=function(da,ka){var X=da.vertexAttributes;if(!X)return!1;X=X.get("position");da=da.indices.get("position");return m.computeAttachmentOriginPoints(X,da,ka)};la.createBufferWriter=function(){return new ca(this)};la.normalAndViewAngle=function(da,ka,X,ha){d.isMat4(ka)&&(ka=C.fromMat4(Z,ka));p.transformMat3(ha.normal,da,ka);p.transformMat4(ha.normal,ha.normal,X.viewInverseTransposeMatrix);
ha.cosAngle=p.dot(T,wa);return ha};la.updateScaleInfo=function(da,ka,X){const ha=this.params;ha.screenSizePerspective?e.precomputeScaleFactor(X,ka,ha.screenSizePerspective,da.factor):(da.factor.scale=1,da.factor.factor=0,da.factor.minPixelSize=0,da.factor.paddingPixels=0);ha.screenSizePerspectiveAlignment?e.precomputeScaleFactor(X,ka,ha.screenSizePerspectiveAlignment,da.factorAlignment):(da.factorAlignment.factor=da.factor.factor,da.factorAlignment.scale=da.factor.scale,da.factorAlignment.minPixelSize=
da.factor.minPixelSize,da.factorAlignment.paddingPixels=da.factor.paddingPixels)};la.applyShaderOffsetsView=function(da,ka,X,ha,fa,K,ba){ka=this.normalAndViewAngle(ka,X,fa,S);this.applyVerticalGroundOffsetView(da,ka,fa,ba);this.applyVerticalOffsetTransformationView(ba,ka,fa,K);this.applyPolygonOffsetView(ba,ka,ha[3],fa,ba);this.applyCenterOffsetView(ba,ha,ba);return ba};la.applyShaderOffsetsNDC=function(da,ka,X,ha,fa){this.applyCenterOffsetNDC(da,ka,X,ha);r.isSome(fa)&&p.copy(fa,ha);this.applyPolygonOffsetNDC(ha,
ka,X,ha);return ha};la.applyPolygonOffsetView=function(da,ka,X,ha,fa){var K=ha.aboveGround?1:-1;X=A.sign(X);0===X&&(X=K);K*=X;if(0>=this.params.shaderPolygonOffset)return p.copy(fa,da);ka=A.clamp(Math.abs(ka.cosAngle),.01,1);ha=1-Math.sqrt(1-ka*ka)/ka/ha.viewport[2];0<K?p.scale(fa,da,ha):p.scale(fa,da,1/ha);return fa};la.applyVerticalGroundOffsetView=function(da,ka,X,ha){const fa=p.length(da),K=X.aboveGround?1:-1;X=.5*X.computeRenderPixelSizeAtDist(fa);ka=p.scale(L,ka.normal,K*X);p.add(ha,da,ka);
return ha};la.applyVerticalOffsetTransformationView=function(da,ka,X,ha){const fa=this.params;if(!fa.verticalOffset||!fa.verticalOffset.screenLength){if(fa.screenSizePerspective||fa.screenSizePerspectiveAlignment){var K=p.length(da);this.updateScaleInfo(ha,K,ka.cosAngle)}else ha.factor.scale=1,ha.factorAlignment.scale=1;return da}K=p.length(da);X=F.verticalOffsetAtDistance(X,K,fa.verticalOffset,ka.cosAngle,fa.screenSizePerspectiveAlignment||fa.screenSizePerspective);this.updateScaleInfo(ha,K,ka.cosAngle);
p.scale(ka.normal,ka.normal,X);return p.add(da,da,ka.normal)};la.applyCenterOffsetView=function(da,ka,X){const ha="screen"!==this.params.centerOffsetUnits;X!==da&&p.copy(X,da);ha&&(X[0]+=ka[0],X[1]+=ka[1],ka[2]&&(p.normalize(N,X),p.add(X,X,p.scale(N,N,ka[2]))));return X};la.applyCenterOffsetNDC=function(da,ka,X,ha){const fa="screen"!==this.params.centerOffsetUnits;ha!==da&&p.copy(ha,da);fa||(ha[0]+=ka[0]/X.fullWidth*2,ha[1]+=ka[1]/X.fullHeight*2);return ha};la.applyPolygonOffsetNDC=function(da,ka,
X,ha){const fa=this.params.shaderPolygonOffset;da!==ha&&p.copy(ha,da);fa&&(da=X.aboveGround?1:-1,ka=da*A.sign(ka[3]),ha[2]-=(ka||da)*fa);return ha};la.getGLMaterial=function(da){if(0===da.output||7===da.output)return new M(da);if(4===da.output)return new U(da)};la.calculateRelativeScreenBounds=function(da,ka,X=k.create()){B(this.params,da,ka,X);X[2]=X[0]+da[0];X[3]=X[1]+da[1];return X};return ja}(E.Material);h=function(ia){function ja(da){da=ia.call(this,{...da,...da.material.params})||this;da.updateParameters();
return da}g._inheritsLoose(ja,ia);var la=ja.prototype;la.beginSlot=function(da){return da===(this.material.params.drawInSecondSlot?19:18)};la.updateParameters=function(da){this.updateTexture(this.material.params.textureId);this.selectProgram(da)};la.selectProgram=function(da){this.technique=this.techniqueRep.acquireAndReleaseExisting(y.HUDMaterialTechnique,this.material.getTechniqueConfig(this.output,da),this.technique)};la.ensureParameters=function(da){this.updateParameters(da)};la.bind=function(da,
ka){da.bindProgram(this.technique.program);this.bindTexture(da,this.technique.program);this.bindTextureScale(da,this.technique.program);this.technique.bindPass(da,this.material.params,ka)};return ja}(h);let M=function(ia){function ja(da){da=ia.call(this,da)||this;da.isOcclusionSlot=!1;return da}g._inheritsLoose(ja,ia);var la=ja.prototype;la.beginSlot=function(da){const ka=this.material.params.drawInSecondSlot?19:18;if(this.material.params.occlusionTest)return this.isOcclusionSlot=12===da,12===da||
da===ka;this.isOcclusionSlot=!1;return da===ka};la.getTechnique=function(){return this.isOcclusionSlot?this.occlusionTechnique:this.technique};la.selectProgram=function(da){this.technique=this.techniqueRep.acquireAndReleaseExisting(y.HUDMaterialTechnique,this.material.getTechniqueConfig(this.output,da),this.technique);this.occlusionTechnique=this.techniqueRep.acquireAndReleaseExisting(y.HUDMaterialTechnique,this.material.getTechniqueConfig(6,da),this.occlusionTechnique)};la.bind=function(da,ka){const X=
this.getTechnique();da.bindProgram(X.program);this.isOcclusionSlot||(this.bindTexture(da,X.program),this.bindTextureScale(da,X.program));X.bindPass(da,this.material.params,ka)};return ja}(h),U=function(ia){function ja(la){return ia.call(this,{...la,output:4})||this}g._inheritsLoose(ja,ia);return ja}(h);const R={factor:{scale:0,factor:0,minPixelSize:0,paddingPixels:0},factorAlignment:{scale:0,factor:0,minPixelSize:0,paddingPixels:0}},J=q.create(),L=t.create(),N=t.create(),V=v.createRenderScreenPointArray3(),
T=t.create(),W=t.create(),Q=n.create(),Z=n.create(),O=l.create(),P=t.create(),S={normal:T,cosAngle:0},Y=l.create(),ta=[0,0],wa=t.fromValues(0,0,1),G={texCoordScale:[1,1],occlusionTest:!0,binaryHighlightOcclusion:!0,drawInSecondSlot:!1,color:[1,1,1,1],outlineColor:[1,1,1,1],outlineSize:0,textureIsSignedDistanceField:!1,distanceFieldBoundingBox:null,vvSizeEnabled:!1,vvSizeMinSize:[1,1,1],vvSizeMaxSize:[100,100,100],vvSizeOffset:[0,0,0],vvSizeFactor:[1,1,1],vvColorEnabled:!1,vvColorValues:[0,0,0,0,0,
0,0,0],vvColorColors:[1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0],screenOffset:[0,0],verticalOffset:null,screenSizePerspective:null,screenSizePerspectiveAlignment:null,slicePlaneEnabled:!1,anchorPos:q.fromValues(.5,.5),shaderPolygonOffset:1E-5,polygonOffset:!1,textureId:null,centerOffsetUnits:"world",depthEnabled:!0,pixelSnappingEnabled:!0,debugDrawBorder:!1,isDraped:!1,...E.materialParametersDefaults},I=x.newLayout().vec3f("position").vec3f("normal").vec2f("uv0").vec4u8("color").vec2f("size").vec4f("auxpos1").vec4f("auxpos2");
let ca=function(){function ia(la){this.material=la;this.vertexBufferLayout=I}var ja=ia.prototype;ja.allocate=function(la){return this.vertexBufferLayout.createBuffer(la)};ja.elementCount=function(la){return 6*la.indices.get("position").length};ja.write=function(la,da,ka,X){u.writePosition(da.indices.get("position"),da.vertexAttributes.get("position").data,la.transformation,ka.position,X,6);u.writeNormal(da.indices.get("normal"),da.vertexAttributes.get("normal").data,la.invTranspTransformation,ka.normal,
X,6);var ha=da.vertexAttributes.get("uv0").data;if(null==ha||4>ha.length){ha=this.material.params;var fa=la=0;var K=ha.texCoordScale[0];ha=ha.texCoordScale[1]}else la=ha[0],fa=ha[1],K=ha[2],ha=ha[3];K=Math.min(1.99999,K+1);ha=Math.min(1.99999,ha+1);var ba=da.indices.get("position").length,ea=ka.uv0,aa=X;for(var pa=0;pa<ba;++pa)ea.set(aa,0,la),ea.set(aa,1,fa),aa+=1,ea.set(aa,0,K),ea.set(aa,1,fa),aa+=1,ea.set(aa,0,K),ea.set(aa,1,ha),aa+=1,ea.set(aa,0,K),ea.set(aa,1,ha),aa+=1,ea.set(aa,0,la),ea.set(aa,
1,ha),aa+=1,ea.set(aa,0,la),ea.set(aa,1,fa),aa+=1;u.writeColor(da.indices.get("color"),da.vertexAttributes.get("color").data,4,ka.color,X,6);la=da.indices.get("size");fa=da.vertexAttributes.get("size").data;K=la.length;ha=ka.size;ba=X;for(ea=0;ea<K;++ea){aa=fa[2*la[ea]];pa=fa[2*la[ea]+1];for(let na=0;6>na;++na)ha.set(ba,0,aa),ha.set(ba,1,pa),ba+=1}da.indices.get("auxpos1")&&da.vertexAttributes.get("auxpos1")&&u.writeBufferVec4(da.indices.get("auxpos1"),da.vertexAttributes.get("auxpos1").data,ka.auxpos1,
X,6);da.indices.get("auxpos2")&&da.vertexAttributes.get("auxpos2")&&u.writeBufferVec4(da.indices.get("auxpos2"),da.vertexAttributes.get("auxpos2").data,ka.auxpos2,X,6)};return ia}();a.HUDMaterial=D;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/chunks/mat3":function(){define(["exports","./common"],function(a,g){function r(J,L){J[0]=L[0];J[1]=L[1];J[2]=L[2];J[3]=L[4];J[4]=L[5];J[5]=L[6];J[6]=L[8];J[7]=L[9];J[8]=L[10];return J}function A(J,L){J[0]=L[0];J[1]=L[1];J[2]=L[2];J[3]=L[3];J[4]=
L[4];J[5]=L[5];J[6]=L[6];J[7]=L[7];J[8]=L[8];return J}function v(J,L,N,V,T,W,Q,Z,O,P){J[0]=L;J[1]=N;J[2]=V;J[3]=T;J[4]=W;J[5]=Q;J[6]=Z;J[7]=O;J[8]=P;return J}function t(J){J[0]=1;J[1]=0;J[2]=0;J[3]=0;J[4]=1;J[5]=0;J[6]=0;J[7]=0;J[8]=1;return J}function p(J,L){if(J===L){const N=L[1],V=L[2],T=L[5];J[1]=L[3];J[2]=L[6];J[3]=N;J[5]=L[7];J[6]=V;J[7]=T}else J[0]=L[0],J[1]=L[3],J[2]=L[6],J[3]=L[1],J[4]=L[4],J[5]=L[7],J[6]=L[2],J[7]=L[5],J[8]=L[8];return J}function b(J,L){const N=L[0],V=L[1],T=L[2],W=L[3],
Q=L[4],Z=L[5],O=L[6],P=L[7];L=L[8];const S=L*Q-Z*P,Y=-L*W+Z*O,ta=P*W-Q*O;let wa=N*S+V*Y+T*ta;if(!wa)return null;wa=1/wa;J[0]=S*wa;J[1]=(-L*V+T*P)*wa;J[2]=(Z*V-T*Q)*wa;J[3]=Y*wa;J[4]=(L*N-T*O)*wa;J[5]=(-Z*N+T*W)*wa;J[6]=ta*wa;J[7]=(-P*N+V*O)*wa;J[8]=(Q*N-V*W)*wa;return J}function k(J,L){const N=L[0],V=L[1],T=L[2],W=L[3],Q=L[4],Z=L[5],O=L[6],P=L[7];L=L[8];J[0]=Q*L-Z*P;J[1]=T*P-V*L;J[2]=V*Z-T*Q;J[3]=Z*O-W*L;J[4]=N*L-T*O;J[5]=T*W-N*Z;J[6]=W*P-Q*O;J[7]=V*O-N*P;J[8]=N*Q-V*W;return J}function n(J){const L=
J[3],N=J[4],V=J[5],T=J[6],W=J[7],Q=J[8];return J[0]*(Q*N-V*W)+J[1]*(-Q*L+V*T)+J[2]*(W*L-N*T)}function l(J,L,N){const V=L[0],T=L[1],W=L[2],Q=L[3],Z=L[4],O=L[5],P=L[6],S=L[7];L=L[8];const Y=N[0],ta=N[1],wa=N[2],G=N[3],I=N[4],ca=N[5],ia=N[6],ja=N[7];N=N[8];J[0]=Y*V+ta*Q+wa*P;J[1]=Y*T+ta*Z+wa*S;J[2]=Y*W+ta*O+wa*L;J[3]=G*V+I*Q+ca*P;J[4]=G*T+I*Z+ca*S;J[5]=G*W+I*O+ca*L;J[6]=ia*V+ja*Q+N*P;J[7]=ia*T+ja*Z+N*S;J[8]=ia*W+ja*O+N*L;return J}function q(J,L,N){const V=L[0],T=L[1],W=L[2],Q=L[3],Z=L[4],O=L[5],P=L[6],
S=L[7];L=L[8];const Y=N[0];N=N[1];J[0]=V;J[1]=T;J[2]=W;J[3]=Q;J[4]=Z;J[5]=O;J[6]=Y*V+N*Q+P;J[7]=Y*T+N*Z+S;J[8]=Y*W+N*O+L;return J}function C(J,L,N){const V=L[0],T=L[1],W=L[2],Q=L[3],Z=L[4],O=L[5],P=L[6],S=L[7];L=L[8];const Y=Math.sin(N);N=Math.cos(N);J[0]=N*V+Y*Q;J[1]=N*T+Y*Z;J[2]=N*W+Y*O;J[3]=N*Q-Y*V;J[4]=N*Z-Y*T;J[5]=N*O-Y*W;J[6]=P;J[7]=S;J[8]=L;return J}function w(J,L,N){const V=N[0],T=N[1];N=N[2];J[0]=V*L[0];J[1]=V*L[1];J[2]=V*L[2];J[3]=T*L[3];J[4]=T*L[4];J[5]=T*L[5];J[6]=N*L[6];J[7]=N*L[7];J[8]=
N*L[8];return J}function x(J,L,N){const V=N[0];N=N[1];J[0]=V*L[0];J[1]=V*L[1];J[2]=V*L[2];J[3]=N*L[3];J[4]=N*L[4];J[5]=N*L[5];return J}function c(J,L){J[0]=1;J[1]=0;J[2]=0;J[3]=0;J[4]=1;J[5]=0;J[6]=L[0];J[7]=L[1];J[8]=1;return J}function m(J,L){const N=Math.sin(L);L=Math.cos(L);J[0]=L;J[1]=N;J[2]=0;J[3]=-N;J[4]=L;J[5]=0;J[6]=0;J[7]=0;J[8]=1;return J}function f(J,L){J[0]=L[0];J[1]=0;J[2]=0;J[3]=0;J[4]=L[1];J[5]=0;J[6]=0;J[7]=0;J[8]=1;return J}function e(J,L){J[0]=L[0];J[1]=L[1];J[2]=0;J[3]=L[2];J[4]=
L[3];J[5]=0;J[6]=L[4];J[7]=L[5];J[8]=1;return J}function d(J,L){var N=L[0],V=L[1],T=L[2];L=L[3];var W=N+N,Q=V+V;const Z=T+T;N*=W;const O=V*W;V*=Q;const P=T*W,S=T*Q;T*=Z;W*=L;Q*=L;L*=Z;J[0]=1-V-T;J[3]=O-L;J[6]=P+Q;J[1]=O+L;J[4]=1-N-T;J[7]=S-W;J[2]=P-Q;J[5]=S+W;J[8]=1-N-V;return J}function h(J,L){const N=L[0],V=L[1],T=L[2],W=L[4],Q=L[5],Z=L[6],O=L[8],P=L[9];L=L[10];const S=L*Q-Z*P,Y=-L*W+Z*O,ta=P*W-Q*O;var wa=N*S+V*Y+T*ta;if(!wa)return null;wa=1/wa;J[0]=S*wa;J[1]=(-L*V+T*P)*wa;J[2]=(Z*V-T*Q)*wa;J[3]=
Y*wa;J[4]=(L*N-T*O)*wa;J[5]=(-Z*N+T*W)*wa;J[6]=ta*wa;J[7]=(-P*N+V*O)*wa;J[8]=(Q*N-V*W)*wa;return J}function F(J,L){const N=L[0],V=L[1],T=L[2],W=L[3],Q=L[4],Z=L[5],O=L[6],P=L[7];var S=L[8],Y=L[9],ta=L[10],wa=L[11];const G=L[12],I=L[13],ca=L[14];L=L[15];const ia=N*Z-V*Q,ja=N*O-T*Q,la=N*P-W*Q,da=V*O-T*Z,ka=V*P-W*Z,X=T*P-W*O,ha=S*I-Y*G,fa=S*ca-ta*G;S=S*L-wa*G;const K=Y*ca-ta*I;Y=Y*L-wa*I;ta=ta*L-wa*ca;wa=ia*ta-ja*Y+la*K+da*S-ka*fa+X*ha;if(!wa)return null;wa=1/wa;J[0]=(Z*ta-O*Y+P*K)*wa;J[1]=(O*S-Q*ta-
P*fa)*wa;J[2]=(Q*Y-Z*S+P*ha)*wa;J[3]=(T*Y-V*ta-W*K)*wa;J[4]=(N*ta-T*S+W*fa)*wa;J[5]=(V*S-N*Y-W*ha)*wa;J[6]=(I*X-ca*ka+L*da)*wa;J[7]=(ca*la-G*X-L*ja)*wa;J[8]=(G*ka-I*la+L*ia)*wa;return J}function E(J,L,N){J[0]=2/L;J[1]=0;J[2]=0;J[3]=0;J[4]=-2/N;J[5]=0;J[6]=-1;J[7]=1;J[8]=1;return J}function u(J){return"mat3("+J[0]+", "+J[1]+", "+J[2]+", "+J[3]+", "+J[4]+", "+J[5]+", "+J[6]+", "+J[7]+", "+J[8]+")"}function z(J){return Math.sqrt(J[0]**2+J[1]**2+J[2]**2+J[3]**2+J[4]**2+J[5]**2+J[6]**2+J[7]**2+J[8]**2)}
function y(J,L,N){J[0]=L[0]+N[0];J[1]=L[1]+N[1];J[2]=L[2]+N[2];J[3]=L[3]+N[3];J[4]=L[4]+N[4];J[5]=L[5]+N[5];J[6]=L[6]+N[6];J[7]=L[7]+N[7];J[8]=L[8]+N[8];return J}function B(J,L,N){J[0]=L[0]-N[0];J[1]=L[1]-N[1];J[2]=L[2]-N[2];J[3]=L[3]-N[3];J[4]=L[4]-N[4];J[5]=L[5]-N[5];J[6]=L[6]-N[6];J[7]=L[7]-N[7];J[8]=L[8]-N[8];return J}function H(J,L,N){J[0]=L[0]*N;J[1]=L[1]*N;J[2]=L[2]*N;J[3]=L[3]*N;J[4]=L[4]*N;J[5]=L[5]*N;J[6]=L[6]*N;J[7]=L[7]*N;J[8]=L[8]*N;return J}function D(J,L,N,V){J[0]=L[0]+N[0]*V;J[1]=
L[1]+N[1]*V;J[2]=L[2]+N[2]*V;J[3]=L[3]+N[3]*V;J[4]=L[4]+N[4]*V;J[5]=L[5]+N[5]*V;J[6]=L[6]+N[6]*V;J[7]=L[7]+N[7]*V;J[8]=L[8]+N[8]*V;return J}function M(J,L){return J[0]===L[0]&&J[1]===L[1]&&J[2]===L[2]&&J[3]===L[3]&&J[4]===L[4]&&J[5]===L[5]&&J[6]===L[6]&&J[7]===L[7]&&J[8]===L[8]}function U(J,L){const N=J[0],V=J[1],T=J[2],W=J[3],Q=J[4],Z=J[5],O=J[6],P=J[7];J=J[8];const S=L[0],Y=L[1],ta=L[2],wa=L[3],G=L[4],I=L[5],ca=L[6],ia=L[7];L=L[8];return Math.abs(N-S)<=g.EPSILON*Math.max(1,Math.abs(N),Math.abs(S))&&
Math.abs(V-Y)<=g.EPSILON*Math.max(1,Math.abs(V),Math.abs(Y))&&Math.abs(T-ta)<=g.EPSILON*Math.max(1,Math.abs(T),Math.abs(ta))&&Math.abs(W-wa)<=g.EPSILON*Math.max(1,Math.abs(W),Math.abs(wa))&&Math.abs(Q-G)<=g.EPSILON*Math.max(1,Math.abs(Q),Math.abs(G))&&Math.abs(Z-I)<=g.EPSILON*Math.max(1,Math.abs(Z),Math.abs(I))&&Math.abs(O-ca)<=g.EPSILON*Math.max(1,Math.abs(O),Math.abs(ca))&&Math.abs(P-ia)<=g.EPSILON*Math.max(1,Math.abs(P),Math.abs(ia))&&Math.abs(J-L)<=g.EPSILON*Math.max(1,Math.abs(J),Math.abs(L))}
var R=Object.freeze({__proto__:null,fromMat4:r,copy:A,set:v,identity:t,transpose:p,invert:b,adjoint:k,determinant:n,multiply:l,translate:q,rotate:C,scale:w,scaleByVec2:x,fromTranslation:c,fromRotation:m,fromScaling:f,fromMat2d:e,fromQuat:d,normalFromMat4Legacy:h,normalFromMat4:F,projection:E,str:u,frob:z,add:y,subtract:B,multiplyScalar:H,multiplyScalarAndAdd:D,exactEquals:M,equals:U,mul:l,sub:B});a.add=y;a.adjoint=k;a.copy=A;a.determinant=n;a.equals=U;a.exactEquals=M;a.frob=z;a.fromMat2d=e;a.fromMat4=
r;a.fromQuat=d;a.fromRotation=m;a.fromScaling=f;a.fromTranslation=c;a.identity=t;a.invert=b;a.mat3=R;a.mul=l;a.multiply=l;a.multiplyScalar=H;a.multiplyScalarAndAdd=D;a.normalFromMat4=F;a.normalFromMat4Legacy=h;a.projection=E;a.rotate=C;a.scale=w;a.scaleByVec2=x;a.set=v;a.str=u;a.sub=B;a.subtract=B;a.translate=q;a.transpose=p})},"esri/core/libs/gl-matrix-2/types/mat4":function(){define(["exports"],function(a){function g(A){return A instanceof Float32Array&&16<=A.length}function r(A){return Array.isArray(A)&&
16<=A.length}a.isMat4=function(A){return g(A)||r(A)};a.isMat4f32=g;a.isMat4f64=r;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/GLMaterialTexture":function(){define(["../../../../chunks/_rollupPluginBabelHelpers","../../../../core/maybe","./DefaultTextureUnits","./GLMaterial"],function(a,g,r,A){return function(v){function t(b){var k=v.call(this,b)||this;k._textureIDs=new Set;k._textureRepository=b.textureRep;k._textureId=b.textureId;k._initTransparent=!!b.initTextureTransparent;
k._texture=k._acquireIfNotUndefined(k._textureId);k._textureNormal=k._acquireIfNotUndefined(b.normalTextureId);k._textureEmissive=k._acquireIfNotUndefined(b.emissiveTextureId);k._textureOcclusion=k._acquireIfNotUndefined(b.occlusionTextureId);k._textureMetallicRoughness=k._acquireIfNotUndefined(b.metallicRoughnessTextureId);return k}a._inheritsLoose(t,v);var p=t.prototype;p.dispose=function(){this._textureIDs.forEach(b=>this._textureRepository.release(b));this._textureIDs.clear()};p.updateTexture=
function(b){b!==this._textureId&&(this._releaseIfNotUndefined(this._textureId),this._textureId=b,this._texture=this._acquireIfNotUndefined(this._textureId))};p.bindTexture=function(b,k){g.isSome(this._texture)&&(k.setUniform1i("tex",r.DefaultTextureUnits.DIFFUSE),b.bindTexture(this._texture.glTexture,r.DefaultTextureUnits.DIFFUSE));g.isSome(this._textureNormal)&&(k.setUniform1i("normalTexture",r.DefaultTextureUnits.NORMAL),b.bindTexture(this._textureNormal.glTexture,r.DefaultTextureUnits.NORMAL));
g.isSome(this._textureEmissive)&&(k.setUniform1i("texEmission",r.DefaultTextureUnits.EMISSION),b.bindTexture(this._textureEmissive.glTexture,r.DefaultTextureUnits.EMISSION));g.isSome(this._textureOcclusion)&&(k.setUniform1i("texOcclusion",r.DefaultTextureUnits.OCCLUSION),b.bindTexture(this._textureOcclusion.glTexture,r.DefaultTextureUnits.OCCLUSION));g.isSome(this._textureMetallicRoughness)&&(k.setUniform1i("texMetallicRoughness",r.DefaultTextureUnits.METALLIC_ROUGHNESS),b.bindTexture(this._textureMetallicRoughness.glTexture,
r.DefaultTextureUnits.METALLIC_ROUGHNESS))};p.bindTextureScale=function(b,k){(b=g.isSome(this._texture)&&this._texture.glTexture)&&b.descriptor.textureCoordinateScaleFactor?k.setUniform2fv("textureCoordinateScaleFactor",b.descriptor.textureCoordinateScaleFactor):k.setUniform2f("textureCoordinateScaleFactor",1,1)};p._acquireIfNotUndefined=function(b){if(!g.isNone(b))return this._textureIDs.add(b),this._textureRepository.acquire(b,this._initTransparent)};p._releaseIfNotUndefined=function(b){g.isNone(b)||
(this._textureIDs.delete(b),this._textureRepository.release(b))};return t}(A)})},"esri/views/3d/webgl-engine/lib/DefaultTextureUnits":function(){define(["exports"],function(a){a.DefaultTextureUnits={DIFFUSE:0,NORMAL:1,EMISSION:2,OCCLUSION:3,METALLIC_ROUGHNESS:4,SSAO:6,SHADOW_MAP:7};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/materials/internal/bufferWriterUtils":function(){define(["exports","../../../support/buffer/BufferView","../../lib/Util"],function(a,g,r){function A(n,
l,q,C){const w=q.typedBuffer;q=q.typedBufferStride;const x=n.length;C*=q;for(let c=0;c<x;++c){const m=2*n[c];w[C]=l[m];w[C+1]=l[m+1];C+=q}}function v(n,l,q,C,w){const x=q.typedBuffer;q=q.typedBufferStride;const c=n.length;C*=q;if(null==w||1===w)for(w=0;w<c;++w){var m=3*n[w];x[C]=l[m];x[C+1]=l[m+1];x[C+2]=l[m+2];C+=q}else for(m=0;m<c;++m){const f=3*n[m];for(let e=0;e<w;++e)x[C]=l[f],x[C+1]=l[f+1],x[C+2]=l[f+2],C+=q}}function t(n,l,q,C,w=1){const x=q.typedBuffer;q=q.typedBufferStride;const c=n.length;
C*=q;if(1===w)for(w=0;w<c;++w){var m=4*n[w];x[C]=l[m];x[C+1]=l[m+1];x[C+2]=l[m+2];x[C+3]=l[m+3];C+=q}else for(m=0;m<c;++m){const f=4*n[m];for(let e=0;e<w;++e)x[C]=l[f],x[C+1]=l[f+1],x[C+2]=l[f+2],x[C+3]=l[f+3],C+=q}}function p(n,l,q,C,w,x=1){if(q){const h=C.typedBuffer;C=C.typedBufferStride;const F=n.length,E=q[0],u=q[1],z=q[2],y=q[4],B=q[5],H=q[6],D=q[8],M=q[9],U=q[10],R=q[12],J=q[13];q=q[14];w*=C;if(1===x)for(x=0;x<F;++x){var c=3*n[x],m=l[c],f=l[c+1];c=l[c+2];h[w]=E*m+y*f+D*c+R;h[w+1]=u*m+B*f+M*
c+J;h[w+2]=z*m+H*f+U*c+q;w+=C}else for(m=0;m<F;++m){f=3*n[m];var e=l[f],d=l[f+1];const L=l[f+2];f=E*e+y*d+D*L+R;c=u*e+B*d+M*L+J;e=z*e+H*d+U*L+q;for(d=0;d<x;++d)h[w]=f,h[w+1]=c,h[w+2]=e,w+=C}}else v(n,l,C,w,x)}function b(n,l,q,C,w,x){if(q){const h=C.typedBuffer;C=C.typedBufferStride;const F=n.length,E=q[0],u=q[1],z=q[2],y=q[4],B=q[5],H=q[6],D=q[8],M=q[9];q=q[10];const U=1E-5<Math.abs(1-E*E+y*y+D*D)||1E-5<Math.abs(1-u*u+B*B+M*M)||1E-5<Math.abs(1-z*z+H*H+q*q);w*=C;if(1===x)for(x=0;x<F;++x){var c=3*n[x],
m=l[c],f=l[c+1],e=l[c+2];c=E*m+y*f+D*e;var d=u*m+B*f+M*e;m=z*m+H*f+q*e;U&&(f=c*c+d*d+m*m,.999999>f&&1E-6<f&&(f=Math.sqrt(f),c/=f,d/=f,m/=f));h[w+0]=c;h[w+1]=d;h[w+2]=m;w+=C}else for(c=0;c<F;++c){d=3*n[c];f=l[d];e=l[d+1];const R=l[d+2];d=E*f+y*e+D*R;m=u*f+B*e+M*R;f=z*f+H*e+q*R;U&&(e=d*d+m*m+f*f,.999999>e&&1E-6<e&&(e=Math.sqrt(e),d/=e,m/=e,f/=e));for(e=0;e<x;++e)h[w+0]=d,h[w+1]=m,h[w+2]=f,w+=C}}else v(n,l,C,w,x)}function k(n,l,q,C,w,x=1){const c=C.typedBuffer;C=C.typedBufferStride;const m=n.length;
w*=C;if(1===x)if(4===q)for(x=0;x<m;++x)q=4*n[x],c[w]=l[q],c[w+1]=l[q+1],c[w+2]=l[q+2],c[w+3]=l[q+3],w+=C;else{if(3===q)for(x=0;x<m;++x)q=3*n[x],c[w]=l[q],c[w+1]=l[q+1],c[w+2]=l[q+2],c[w+3]=255,w+=C}else if(4===q)for(q=0;q<m;++q){var f=4*n[q];for(var e=0;e<x;++e)c[w]=l[f],c[w+1]=l[f+1],c[w+2]=l[f+2],c[w+3]=l[f+3],w+=C}else if(3===q)for(q=0;q<m;++q)for(f=3*n[q],e=0;e<x;++e)c[w]=l[f],c[w+1]=l[f+1],c[w+2]=l[f+2],c[w+3]=255,w+=C}a.writeBufferMat3f=function(n,l,q,C){const w=q.typedBuffer;q=q.typedBufferStride;
const x=n.length;C*=q;for(let c=0;c<x;++c){const m=9*n[c];for(let f=0;9>f;++f)w[C+f]=l[m+f];C+=q}};a.writeBufferMat4f=function(n,l,q,C){const w=q.typedBuffer;q=q.typedBufferStride;const x=n.length;C*=q;for(let c=0;c<x;++c){const m=16*n[c];for(let f=0;16>f;++f)w[C+f]=l[m+f];C+=q}};a.writeBufferVec2=A;a.writeBufferVec3=v;a.writeBufferVec4=t;a.writeColor=k;a.writeDefaultAttributes=function(n,l,q,C,w,x){for(const m of l.fieldNames){l=n.vertexAttributes.get(m);const f=n.indices.get(m);if(l&&f)switch(m){case "position":r.assert(3===
l.size);var c=w.getField(m,g.BufferViewVec3f);c&&p(f,l.data,q,c,x);break;case "normal":r.assert(3===l.size);(c=w.getField(m,g.BufferViewVec3f))&&b(f,l.data,C,c,x,1);break;case "uv0":r.assert(2===l.size);(c=w.getField(m,g.BufferViewVec2f))&&A(f,l.data,c,x);break;case "color":r.assert(3===l.size||4===l.size);(c=w.getField(m,g.BufferViewVec4u8))&&k(f,l.data,l.size,c,x);break;case "symbolColor":r.assert(3===l.size||4===l.size);(c=w.getField(m,g.BufferViewVec4u8))&&k(f,l.data,l.size,c,x);break;case "tangent":r.assert(4===
l.size),(c=w.getField(m,g.BufferViewVec4f))&&t(f,l.data,c,x)}}};a.writeNormal=b;a.writePosition=p;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/chunks/HUDMaterial.glsl":function(){define("exports ./vec2f64 ./vec4f64 ./vec2 ../views/3d/webgl-engine/core/shaderModules/interfaces ../views/3d/webgl-engine/core/shaderModules/ShaderBuilder ../views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl ../views/3d/webgl-engine/core/shaderLibrary/hud/AlignPixel.glsl ../views/3d/webgl-engine/core/shaderLibrary/Slice.glsl ../views/3d/webgl-engine/core/shaderLibrary/util/ScreenSizePerspective.glsl ../views/3d/webgl-engine/core/shaderLibrary/hud/HUD.glsl ../views/3d/webgl-engine/core/shaderLibrary/util/RgbaFloatEncoding.glsl ../views/3d/webgl-engine/core/shaderLibrary/hud/HUDOcclusionPass.glsl ../views/3d/webgl-engine/core/shaderLibrary/output/OutputHighlight.glsl ../views/3d/webgl-engine/core/shaderLibrary/shading/VisualVariables.glsl ../views/3d/webgl-engine/core/shaderLibrary/util/AlphaDiscard.glsl".split(" "),
function(a,g,r,A,v,t,p,b,k,n,l,q,C,w,x,c){function m(d){const h=new t.ShaderBuilder;var F=d.signedDistanceFieldEnabled;h.include(b.AlignPixel);h.include(l.HUD,d);h.include(k.Slice,d);if(6===d.output)return h.include(C.HUDOcclusionPass,d),h;h.include(n.ScreenSizePerspective);h.fragment.include(q.RgbaFloatEncoding);h.fragment.include(p.ColorConversion);h.include(x.VisualVariables,d);h.varyings.add("vcolor","vec4");h.varyings.add("vtc","vec2");h.varyings.add("vsize","vec2");d.binaryHighlightOcclusionEnabled&&
h.varyings.add("voccluded","float");h.vertex.uniforms.add("screenOffset","vec2").add("anchorPos","vec2").add("textureCoordinateScaleFactor","vec2").add("materialColor","vec4");F&&h.vertex.uniforms.add("outlineColor","vec4");d.screenSizePerspectiveEnabled&&h.vertex.uniforms.add("screenSizePerspective","vec4");(d.debugDrawBorder||d.binaryHighlightOcclusionEnabled)&&h.varyings.add("debugBorderCoords","vec4");h.attributes.add("uv0","vec2");h.attributes.add("color","vec4");h.attributes.add("size","vec2");
h.attributes.add("auxpos2","vec4");h.vertex.code.add(v.glsl`
    void main(void) {
      ProjectHUDAux projectAux;
      vec4 posProj = projectPositionHUD(projectAux);

      if (rejectBySlice(projectAux.posModel)) {
        // Project outside of clip plane
        gl_Position = vec4(1e038, 1e038, 1e038, 1.0);
        return;
      }
      vec2 inputSize;
      ${d.screenSizePerspectiveEnabled?v.glsl`
      inputSize = screenSizePerspectiveScaleVec2(size, projectAux.absCosAngle, projectAux.distanceToCamera, screenSizePerspective);
      vec2 screenOffsetScaled = screenSizePerspectiveScaleVec2(screenOffset, projectAux.absCosAngle, projectAux.distanceToCamera, screenSizePerspectiveAlignment);
         `:v.glsl`
      inputSize = size;
      vec2 screenOffsetScaled = screenOffset;`}

      ${d.vvSize?"inputSize *\x3d vvScale(auxpos2).xx;":""}

      vec2 combinedSize = inputSize * pixelRatio;
      vec4 quadOffset = vec4(0.0);

      ${d.occlusionTestEnabled||d.binaryHighlightOcclusionEnabled?"bool visible \x3d testVisibilityHUD(posProj);":""}

      ${d.binaryHighlightOcclusionEnabled?"voccluded \x3d visible ? 0.0 : 1.0;":""}
    `);var E=v.glsl`
      vec2 uv01 = floor(uv0);
      vec2 uv = uv0 - uv01;
      quadOffset.xy = ((uv01 - anchorPos) * 2.0 * combinedSize + screenOffsetScaled) / viewport.zw * posProj.w;
  `;const u=d.pixelSnappingEnabled?F?v.glsl`
  posProj = alignToPixelOrigin(posProj, viewport.zw) + quadOffset;`:v.glsl`
  posProj += quadOffset;
  if (inputSize.x == size.x) {
    posProj = alignToPixelOrigin(posProj, viewport.zw);
  }`:v.glsl`posProj += quadOffset;`;h.vertex.code.add(v.glsl`
      ${d.occlusionTestEnabled?"if (visible) {":""}
      ${E}
      ${d.vvColor?"vcolor \x3d vvGetColor(auxpos2, vvColorValues, vvColorColors) * materialColor;":"vcolor \x3d color / 255.0 * materialColor;"}

      bool alphaDiscard = vcolor.a < ${v.glsl.float(c.symbolAlphaCutoff)};
      ${F?`alphaDiscard = alphaDiscard && outlineColor.a < ${v.glsl.float(c.symbolAlphaCutoff)};`:""}
      if (alphaDiscard) {
        // "early discard" if both symbol color (= fill) and outline color (if applicable) are transparent
        gl_Position = vec4(1e38, 1e38, 1e38, 1.0);
        return;
      } else {
        ${u}
        gl_Position = posProj;
      }

      vtc = uv * textureCoordinateScaleFactor;

      ${d.debugDrawBorder?"debugBorderCoords \x3d vec4(uv01, 1.5 / combinedSize);":""}
      vsize = inputSize;
      ${d.occlusionTestEnabled?v.glsl`} else { vtc = vec2(0.0);
        ${d.debugDrawBorder?"debugBorderCoords \x3d vec4(0.5, 0.5, 1.5 / combinedSize);}":"}"}`:""}
    }
    `);h.fragment.uniforms.add("tex","sampler2D");F&&(h.fragment.uniforms.add("outlineColor","vec4"),h.fragment.uniforms.add("outlineSize","float"));E=d.debugDrawBorder?v.glsl`(isBorder > 0.0 ? 0.0 : ${v.glsl.float(c.defaultMaskAlphaCutoff)})`:v.glsl.float(c.defaultMaskAlphaCutoff);F=v.glsl`
    ${d.debugDrawBorder?v.glsl`
      float isBorder = float(any(lessThan(debugBorderCoords.xy, debugBorderCoords.zw)) || any(greaterThan(debugBorderCoords.xy, 1.0 - debugBorderCoords.zw)));`:""}

    ${F?v.glsl`
      vec4 fillPixelColor = vcolor;

      // Attempt to sample texel centers to avoid that thin cross outlines
      // disappear with large symbol sizes.
      // see: https://devtopia.esri.com/WebGIS/arcgis-js-api/issues/7058#issuecomment-603041
      const float txSize = 128.0;
      const float texelSize = 1.0 / txSize;
      // Calculate how much we have to add/subtract to/from each texel to reach the size of an onscreen pixel
      vec2 scaleFactor = (vsize - txSize) * texelSize;
      vec2 samplePos = vtc + (vec2(1.0, -1.0) * texelSize) * scaleFactor;

      // Get distance and map it into [-0.5, 0.5]
      float d = rgba2float(texture2D(tex, samplePos)) - 0.5;

      // Distance in output units (i.e. pixels)
      float dist = d * vsize.x;

      // Create smooth transition from the icon into its outline
      float fillAlphaFactor = clamp(0.5 - dist, 0.0, 1.0);
      fillPixelColor.a *= fillAlphaFactor;

      if (outlineSize > 0.25) {
        vec4 outlinePixelColor = outlineColor;
        float clampedOutlineSize = min(outlineSize, 0.5*vsize.x);

        // Create smooth transition around outline
        float outlineAlphaFactor = clamp(0.5 - (abs(dist) - 0.5*clampedOutlineSize), 0.0, 1.0);
        outlinePixelColor.a *= outlineAlphaFactor;

        if (
          outlineAlphaFactor + fillAlphaFactor < ${E} ||
          fillPixelColor.a + outlinePixelColor.a < ${v.glsl.float(c.symbolAlphaCutoff)}
        ) {
          discard;
        }

        // perform un-premultiplied over operator (see https://en.wikipedia.org/wiki/Alpha_compositing#Description)
        float compositeAlpha = outlinePixelColor.a + fillPixelColor.a * (1.0 - outlinePixelColor.a);
        vec3 compositeColor = vec3(outlinePixelColor) * outlinePixelColor.a +
          vec3(fillPixelColor) * fillPixelColor.a * (1.0 - outlinePixelColor.a);

        gl_FragColor = vec4(compositeColor, compositeAlpha);
      } else {
        if (fillAlphaFactor < ${E}) {
          discard;
        }

        gl_FragColor = premultiplyAlpha(fillPixelColor);
      }

      // visualize SDF:
      // gl_FragColor = vec4(clamp(-dist/vsize.x*2.0, 0.0, 1.0), clamp(dist/vsize.x*2.0, 0.0, 1.0), 0.0, 1.0);
      `:v.glsl`
          vec4 texColor = texture2D(tex, vtc, -0.5);
          if (texColor.a < ${E}) {
            discard;
          }
          gl_FragColor = texColor * premultiplyAlpha(vcolor);
          `}

    ${d.debugDrawBorder?v.glsl`gl_FragColor = mix(gl_FragColor, vec4(1.0, 0.0, 1.0, 1.0), isBorder);`:""}
  `;7===d.output&&h.fragment.code.add(v.glsl`
      void main() {
        ${F}
        gl_FragColor = vec4(gl_FragColor.a);
      }
      `);0===d.output&&h.fragment.code.add(v.glsl`
    void main() {
      ${F}
      ${d.FrontFacePass?"gl_FragColor.rgb /\x3d gl_FragColor.a;":""}
    }
    `);4===d.output&&(h.include(w.OutputHighlight),h.fragment.code.add(v.glsl`
    void main() {
      ${F}
      ${d.binaryHighlightOcclusionEnabled?v.glsl`
          if (voccluded == 1.0) {
            gl_FragColor = vec4(1.0, 1.0, 0.0, 1.0);
          } else {
            gl_FragColor = vec4(1.0, 0.0, 1.0, 1.0);
          }`:"outputHighlight();"}
    }
    `));return h}function f(d,h=e){if(d.textureIsSignedDistanceField){var F=d.anchorPos;d=d.distanceFieldBoundingBox;h[0]=F[0]*(d[2]-d[0])+d[0];h[1]=F[1]*(d[3]-d[1])+d[1]}else A.copy(h,d.anchorPos);return h}(function(d){d.bindUniforms=function(h,F,E){h.setUniform4fv("materialColor",F.color);F.textureIsSignedDistanceField&&(0>=F.outlineColor[3]||0>=F.outlineSize?(h.setUniform4fv("outlineColor",r.ZEROS),h.setUniform1f("outlineSize",0)):(h.setUniform4fv("outlineColor",F.outlineColor),h.setUniform1f("outlineSize",
F.outlineSize)));h.setUniform2f("screenOffset",2*F.screenOffset[0]*E,2*F.screenOffset[1]*E);h.setUniform2fv("anchorPos",f(F))}})(a.HUDMaterial||(a.HUDMaterial={}));const e=g.create();g=Object.freeze({__proto__:null,build:m,get HUDMaterial(){return a.HUDMaterial},calculateAnchorPosForRendering:f});a.HUDMaterialShader=g;a.build=m;a.calculateAnchorPosForRendering=f})},"esri/views/3d/webgl-engine/core/shaderLibrary/hud/AlignPixel.glsl":function(){define(["exports","../../shaderModules/interfaces"],function(a,
g){a.AlignPixel=function(r){const A=g.glsl`
    vec4 alignToPixelCenter(vec4 clipCoord, vec2 widthHeight) {
      vec2 xy = vec2(0.500123) + 0.5 * clipCoord.xy / clipCoord.w;
      vec2 pixelSz = vec2(1.0) / widthHeight;
      vec2 ij = (floor(xy * widthHeight) + vec2(0.5)) * pixelSz;
      vec2 result = (ij * 2.0 - vec2(1.0)) * clipCoord.w;
      return vec4(result, clipCoord.zw);
    }
  `,v=g.glsl`

    vec4 alignToPixelOrigin(vec4 clipCoord, vec2 widthHeight) {
      vec2 xy = vec2(0.5) + 0.5 * clipCoord.xy / clipCoord.w;
      vec2 pixelSz = vec2(1.0) / widthHeight;
      vec2 ij = floor((xy + 0.5 * pixelSz) * widthHeight) * pixelSz;
      vec2 result = (ij * 2.0 - vec2(1.0)) * clipCoord.w;
      return vec4(result, clipCoord.zw);
    }
  `;r.vertex.code.add(A);r.vertex.code.add(v);r.fragment.code.add(A);r.fragment.code.add(v)};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderLibrary/util/ScreenSizePerspective.glsl":function(){define(["exports","../../shaderModules/interfaces","../../../materials/internal/MaterialUtil"],function(a,g,r){function A(v){v.vertex.code.add(g.glsl`
    float screenSizePerspectiveMinSize(float size, vec4 factor) {
      float nonZeroSize = 1.0 - step(size, 0.0);

      return (
        factor.z * (
          1.0 +
          // Multiply by nzs ensures if size is 0, then we ignore proportionally scaled padding
          nonZeroSize *
          2.0 * factor.w / (
            size + (1.0 - nonZeroSize) // Adding 1 - nzs ensures we divide either by size, or by 1
          )
        )
      );
    }
  `);v.vertex.code.add(g.glsl`
    float screenSizePerspectiveViewAngleDependentFactor(float absCosAngle) {
      return absCosAngle * absCosAngle * absCosAngle;
    }
  `);v.vertex.code.add(g.glsl`
    vec4 screenSizePerspectiveScaleFactor(float absCosAngle, float distanceToCamera, vec4 params) {
      return vec4(
        min(params.x / (distanceToCamera - params.y), 1.0),
        screenSizePerspectiveViewAngleDependentFactor(absCosAngle),
        params.z,
        params.w
      );
    }
  `);v.vertex.code.add(g.glsl`
    float applyScreenSizePerspectiveScaleFactorFloat(float size, vec4 factor) {
      return max(mix(size * factor.x, size, factor.y), screenSizePerspectiveMinSize(size, factor));
    }
  `);v.vertex.code.add(g.glsl`
    float screenSizePerspectiveScaleFloat(float size, float absCosAngle, float distanceToCamera, vec4 params) {
      return applyScreenSizePerspectiveScaleFactorFloat(
        size,
        screenSizePerspectiveScaleFactor(absCosAngle, distanceToCamera, params)
      );
    }
  `);v.vertex.code.add(g.glsl`
    vec2 applyScreenSizePerspectiveScaleFactorVec2(vec2 size, vec4 factor) {
      return mix(size * clamp(factor.x, screenSizePerspectiveMinSize(size.y, factor) / size.y, 1.0), size, factor.y);
    }
  `);v.vertex.code.add(g.glsl`
    vec2 screenSizePerspectiveScaleVec2(vec2 size, float absCosAngle, float distanceToCamera, vec4 params) {
      return applyScreenSizePerspectiveScaleFactorVec2(size, screenSizePerspectiveScaleFactor(absCosAngle, distanceToCamera, params));
    }
  `)}(function(v){v.bindUniforms=function(t,p){p.screenSizePerspective&&(r.bindScreenSizePerspective(p.screenSizePerspective,t,"screenSizePerspective"),r.bindScreenSizePerspective(p.screenSizePerspectiveAlignment||p.screenSizePerspective,t,"screenSizePerspectiveAlignment"))}})(A||(A={}));a.ScreenSizePerspective=A;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderLibrary/hud/HUD.glsl":function(){define(["exports","../../shaderModules/interfaces","../util/ScreenSizePerspective.glsl"],
function(a,g,r){function A(v,t){v.include(r.ScreenSizePerspective);v.attributes.add("position","vec3");v.attributes.add("normal","vec3");v.attributes.add("auxpos1","vec4");v.vertex.uniforms.add("proj","mat4");v.vertex.uniforms.add("view","mat4");v.vertex.uniforms.add("viewNormal","mat4");v.vertex.uniforms.add("viewport","vec4");v.vertex.uniforms.add("camPos","vec3");v.vertex.uniforms.add("polygonOffset","float");v.vertex.uniforms.add("cameraGroundRelative","float");v.vertex.uniforms.add("pixelRatio",
"float");v.vertex.uniforms.add("perDistancePixelRatio","float");v.vertex.uniforms.add("uRenderTransparentlyOccludedHUD","float");t.verticalOffsetEnabled&&v.vertex.uniforms.add("verticalOffset","vec4");t.screenSizePerspectiveEnabled&&v.vertex.uniforms.add("screenSizePerspectiveAlignment","vec4");v.vertex.uniforms.add("hudVisibilityTexture","sampler2D");v.vertex.constants.add("smallOffsetAngle","float",.984807753012208);v.vertex.code.add(g.glsl`
    struct ProjectHUDAux {
      vec3 posModel;
      vec3 posView;
      vec3 vnormal;

      float distanceToCamera;
      float absCosAngle;
    };
  `);v.vertex.code.add(g.glsl`
    float applyHUDViewDependentPolygonOffset(float pointGroundDistance, float absCosAngle, inout vec3 posView) {
      float pointGroundSign = sign(pointGroundDistance);

      if (pointGroundSign == 0.0) {
        pointGroundSign = cameraGroundRelative;
      }

      // cameraGroundRelative is -1 if camera is below ground, 1 if above ground
      // groundRelative is 1 if both camera and symbol are on the same side of the ground, -1 otherwise
      float groundRelative = cameraGroundRelative * pointGroundSign;

      // view angle dependent part of polygon offset emulation
      // we take the absolute value because the sign that is dropped is
      // instead introduced using the ground-relative position of the symbol and the camera
      if (polygonOffset > .0) {
        float cosAlpha = clamp(absCosAngle, 0.01, 1.0);

        float tanAlpha = sqrt(1.0 - cosAlpha * cosAlpha) / cosAlpha;
        float factor = (1.0 - tanAlpha / viewport[2]);

        // same side of the terrain
        if (groundRelative > 0.0) {
          posView *= factor;
        }
        // opposite sides of the terrain
        else {
          posView /= factor;
        }
      }

      return groundRelative;
    }
  `);t.isDraped||v.vertex.code.add(g.glsl`
    void applyHUDVerticalGroundOffset(vec3 normalModel, inout vec3 posModel, inout vec3 posView) {
      float distanceToCamera = length(posView);

      // Compute offset in world units for a half pixel shift
      float pixelOffset = distanceToCamera * perDistancePixelRatio * 0.5;

      // Apply offset along normal in the direction away from the ground surface
      vec3 modelOffset = normalModel * cameraGroundRelative * pixelOffset;

      // Apply the same offset also on the view space position
      vec3 viewOffset = (viewNormal * vec4(modelOffset, 1.0)).xyz;

      posModel += modelOffset;
      posView += viewOffset;
    }
  `);v.vertex.code.add(g.glsl`
    vec4 projectPositionHUD(out ProjectHUDAux aux) {
      // centerOffset is in view space and is used to implement world size offsetting
      // of labels with respect to objects. It also pulls the label towards the viewer
      // so that the label is visible in front of the object.
      vec3 centerOffset = auxpos1.xyz;

      // The pointGroundDistance is the distance of the geometry to the ground and is
      // negative if the point is below the ground, or positive if the point is above
      // ground.
      float pointGroundDistance = auxpos1.w;

      aux.posModel = position;
      aux.posView = (view * vec4(aux.posModel, 1.0)).xyz;
      aux.vnormal = normal;
      ${t.isDraped?"":"applyHUDVerticalGroundOffset(aux.vnormal, aux.posModel, aux.posView);"}

      // Screen sized offset in world space, used for example for line callouts
      // Note: keep this implementation in sync with the CPU implementation, see
      //   - MaterialUtil.verticalOffsetAtDistance
      //   - HUDMaterial.applyVerticalOffsetTransformation

      aux.distanceToCamera = length(aux.posView);

      vec3 viewDirObjSpace = normalize(camPos - aux.posModel);
      float cosAngle = dot(aux.vnormal, viewDirObjSpace);

      aux.absCosAngle = abs(cosAngle);

      ${t.screenSizePerspectiveEnabled?t.verticalOffsetEnabled||1===t.screenCenterOffsetUnitsEnabled?"vec4 perspectiveFactor \x3d screenSizePerspectiveScaleFactor(aux.absCosAngle, aux.distanceToCamera, screenSizePerspectiveAlignment);":"":""}

      ${t.verticalOffsetEnabled?t.screenSizePerspectiveEnabled?"float verticalOffsetScreenHeight \x3d applyScreenSizePerspectiveScaleFactorFloat(verticalOffset.x, perspectiveFactor);":"float verticalOffsetScreenHeight \x3d verticalOffset.x;":""}

      ${t.verticalOffsetEnabled?g.glsl`
            float worldOffset = clamp(verticalOffsetScreenHeight * verticalOffset.y * aux.distanceToCamera, verticalOffset.z, verticalOffset.w);
            vec3 modelOffset = aux.vnormal * worldOffset;
            aux.posModel += modelOffset;
            vec3 viewOffset = (viewNormal * vec4(modelOffset, 1.0)).xyz;
            aux.posView += viewOffset;
            // Since we elevate the object, we need to take that into account
            // in the distance to ground
            pointGroundDistance += worldOffset;`:""}

      float groundRelative = applyHUDViewDependentPolygonOffset(pointGroundDistance, aux.absCosAngle, aux.posView);

      ${1!==t.screenCenterOffsetUnitsEnabled?g.glsl`
            // Apply x/y in view space, but z in screen space (i.e. along posView direction)
            aux.posView += vec3(centerOffset.x, centerOffset.y, 0.0);

            // Same material all have same z != 0.0 condition so should not lead to
            // branch fragmentation and will save a normalization if it's not needed
            if (centerOffset.z != 0.0) {
              aux.posView -= normalize(aux.posView) * centerOffset.z;
            }
          `:""}

      vec4 posProj = proj * vec4(aux.posView, 1.0);

      ${1===t.screenCenterOffsetUnitsEnabled?t.screenSizePerspectiveEnabled?"float centerOffsetY \x3d applyScreenSizePerspectiveScaleFactorFloat(centerOffset.y, perspectiveFactor);":"float centerOffsetY \x3d centerOffset.y;":""}

      ${1===t.screenCenterOffsetUnitsEnabled?"posProj.xy +\x3d vec2(centerOffset.x, centerOffsetY) * pixelRatio * 2.0 / viewport.zw * posProj.w;":""}

      // constant part of polygon offset emulation
      posProj.z -= groundRelative * polygonOffset * posProj.w;
      return posProj;
    }
  `);v.vertex.code.add(g.glsl`
    bool testVisibilityHUD(vec4 posProj) {
      // For occlusion testing, use the nearest pixel center to avoid
      // subpixel filtering messing up the color we use to test for
      vec4 posProjCenter = alignToPixelCenter(posProj, viewport.zw);

      vec4 occlusionPixel = texture2D(hudVisibilityTexture, .5 + .5 * posProjCenter.xy / posProjCenter.w);

      // the red pixel here indicates that the occlusion pixel passed the depth test against solid geometry and was written
      // the green pixel stores transparency of transparent geometry (1.0 -> fully transparent)
      // note that we also check against green == 0.0, i.e. transparent geometry that has opaque parts

      // thus we render visible pixels that are occluded by semi-transparent (but not fully transparent!) geometry here
      if (uRenderTransparentlyOccludedHUD > 0.5) {
        // multiplying by uRenderTransparentlyOccludedHUD allows us to ignore the second condition if
        // uRenderTransparentlyOccludedHUD = 0.75
        return occlusionPixel.r * occlusionPixel.g > 0.0 && occlusionPixel.g * uRenderTransparentlyOccludedHUD < 1.0;
      }

      // and visible pixels that are not occluded by semi-transparent geometry here
      return occlusionPixel.r * occlusionPixel.g > 0.0 && occlusionPixel.g == 1.0;
    }
  `)}(function(v){v.bindUniforms=function(t,p){t.setUniform1f("uRenderTransparentlyOccludedHUD",0===p.renderTransparentlyOccludedHUD?1:1===p.renderTransparentlyOccludedHUD?0:.75)};v.bindVisibilityTexture=function(t,p,b){p.setUniform1i("hudVisibilityTexture",4);t.bindTexture(b.hudVisibilityTexture,4);t.setActiveTexture(0)}})(A||(A={}));a.HUD=A;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderLibrary/hud/HUDOcclusionPass.glsl":function(){define(["exports","../../shaderModules/interfaces",
"../shading/MultipassGeometryTest.glsl"],function(a,g,r){(function(A){A.bindUniforms=function(v){v.setUniform4f("color",1,1,1,1)}})(a.HUDOcclusion||(a.HUDOcclusion={}));a.HUDOcclusionPass=function(A,v){v.multipassGeometryEnabled&&A.vertex.include(r.multipassGeometryTest);A.vertex.code.add(g.glsl`
  void main(void) {
    vec4 posProjCenter;
    if (dot(position, position) > 0.0) {
      // Render single point to center of the pixel to avoid subpixel
      // filtering to affect the marker color
      ProjectHUDAux projectAux;
      vec4 posProj = projectPositionHUD(projectAux);
      posProjCenter = alignToPixelCenter(posProj, viewport.zw);

      ${v.multipassGeometryEnabled?g.glsl`
        // Don't draw vertices behind geometry
        if(geometryDepthTest(.5 + .5 * posProjCenter.xy / posProjCenter.w, projectAux.posView.z)){
          posProjCenter = vec4(1e038, 1e038, 1e038, 1.0);
        }`:""}

      vec3 vpos = projectAux.posModel;
      if (rejectBySlice(vpos)) {
        // Project out of clip space
        posProjCenter = vec4(1e038, 1e038, 1e038, 1.0);
      }

    }
    else {
      // Project out of clip space
      posProjCenter = vec4(1e038, 1e038, 1e038, 1.0);
    }

    gl_Position = posProjCenter;
    gl_PointSize = 1.0;
  }
  `);A.fragment.uniforms.add("color","vec4");A.fragment.code.add(g.glsl`
  void main() {
    gl_FragColor = color;
  }
  `)};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderLibrary/shading/MultipassGeometryTest.glsl":function(){define(["exports","../../shaderModules/interfaces","../output/ReadLinearDepth.glsl"],function(a,g,r){a.bindMultipassGeometryUniforms=function(A,v,t){t.multipassGeometryEnabled&&t.geometryLinearDepthTexture&&(A.setUniform1i("geometryDepthTexture",11),v.bindTexture(t.geometryLinearDepthTexture,11))};a.multipassGeometryTest=function(A){A.include(r.ReadLinearDepth);
A.uniforms.add("geometryDepthTexture","sampler2D");A.uniforms.add("cameraNearFar","vec2");A.code.add(g.glsl`
    //Compare the linearized depths of the vertex/fragment and the geometry in the scene. If vertex/fragment is behind geometry, don't draw it.
    bool geometryDepthTest(vec2 pos, float elementDepth){

      float geometryDepth = linearDepthFromTexture(geometryDepthTexture, pos, cameraNearFar);
      if(elementDepth < (geometryDepth - 1.0)){
        return true;
      }
      return false;
    }
  `)};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/shaders/HUDMaterialTechnique":function(){define("require exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../core/shaderTechnique/ReloadableShaderModule ../core/shaderTechnique/ShaderTechnique ../core/shaderTechnique/ShaderTechniqueConfiguration ../lib/DefaultVertexAttributeLocations ../../../webgl/Program ../../../webgl/renderState ../core/shaderLibrary/util/View.glsl ../core/shaderLibrary/Slice.glsl ../core/shaderLibrary/util/ScreenSizePerspective.glsl ../core/shaderLibrary/hud/HUD.glsl ../core/shaderLibrary/shading/MultipassGeometryTest.glsl ../core/shaderLibrary/hud/HUDOcclusionPass.glsl ../core/shaderLibrary/output/OutputHighlight.glsl ../core/shaderLibrary/shading/VisualVariables.glsl ../../../../chunks/HUDMaterial.glsl ../core/shaderLibrary/attributes/VerticalOffset.glsl ../lib/OrderIndependentTransparency".split(" "),
function(a,g,r,A,v,t,p,b,k,n,l,q,C,w,x,c,m,f,e,d,h){t=function(u){function z(){return u.apply(this,arguments)||this}r._inheritsLoose(z,u);var y=z.prototype;y.initializeProgram=function(B){var H=z.shader.get();const D=this.configuration;H=H.build({output:D.output,FrontFacePass:2===D.transparencyPassType,viewingMode:B.viewingMode,occlusionTestEnabled:D.occlusionTestEnabled,signedDistanceFieldEnabled:D.sdf,slicePlaneEnabled:D.slicePlaneEnabled,sliceHighlightDisabled:!1,sliceEnabledForVertexPrograms:!0,
debugDrawBorder:D.debugDrawBorder,binaryHighlightOcclusionEnabled:D.binaryHighlightOcclusion,screenCenterOffsetUnitsEnabled:D.screenCenterOffsetUnitsEnabled,screenSizePerspectiveEnabled:D.screenSizePerspective,verticalOffsetEnabled:D.verticalOffset,pixelSnappingEnabled:D.pixelSnappingEnabled,vvSize:D.vvSize,vvColor:D.vvColor,vvInstancingEnabled:!1,isDraped:D.isDraped,multipassGeometryEnabled:D.multipassGeometryEnabled});return new k(B.rctx,H.generateSource("vertex"),H.generateSource("fragment"),b.Default3D)};
y.bindPass=function(B,H,D){l.View.bindProjectionMatrix(this.program,D.camera.projectionMatrix);this.program.setUniform1f("cameraGroundRelative",D.camera.aboveGround?1:-1);this.program.setUniform1f("perDistancePixelRatio",Math.tan(D.camera.fovY/2)/(D.camera.fullViewport[2]/2));this.program.setUniformMatrix4fv("viewNormal",D.camera.viewInverseTransposeMatrix);this.program.setUniform1f("polygonOffset",H.shaderPolygonOffset);d.VerticalOffset.bindUniforms(this.program,H,D);C.ScreenSizePerspective.bindUniforms(this.program,
H);this.program.setUniform1f("pixelRatio",D.camera.pixelRatio||1);l.View.bindViewport(this.program,D);6===this.configuration.output?(c.HUDOcclusion.bindUniforms(this.program),this.program.setUniform2fv("cameraNearFar",D.camera.nearFar),this.program.setUniform2fv("inverseViewport",D.inverseViewport),x.bindMultipassGeometryUniforms(this.program,B,D)):(w.HUD.bindUniforms(this.program,D),e.HUDMaterial.bindUniforms(this.program,H,D.camera.pixelRatio||1),f.VisualVariables.bindUniforms(this.program,H),this.configuration.occlusionTestEnabled&&
w.HUD.bindVisibilityTexture(B,this.program,D));4===this.configuration.output&&m.OutputHighlight.bindOutputHighlight(B,this.program,D)};y.bindDraw=function(B){l.View.bindView(this.program,B);l.View.bindCamPosition(this.program,B.origin,B.camera.viewInverseTransposeMatrix);q.Slice.bindUniformsWithOrigin(this.program,this.configuration,B)};y.setPipelineState=function(B){const H=this.configuration,D=3===B,M=this.configuration.polygonOffsetEnabled&&F,U=!D&&2!==B||4===H.output?null:(H.depthEnabled||6===
H.output)&&n.defaultDepthWriteParams;return n.makePipelineState({blending:0===H.output||7===H.output||4===H.output?D?E:h.OITBlending(B):null,depthTest:{func:515},depthWrite:U,colorWrite:n.defaultColorWriteParams,polygonOffset:M})};y.initializePipeline=function(){return this.setPipelineState(this.configuration.transparencyPassType)};r._createClass(z,[{key:"primitiveType",get:function(){return 6===this.configuration.output?0:4}}]);return z}(t.ShaderTechnique);t.shader=new v.ReloadableShaderModule(e.HUDMaterialShader,
()=>new Promise(function(u,z){a(["./HUDMaterial.glsl"],u,z)}));const F={factor:0,units:-4},E=n.simpleBlendingParams(1,771);v=function(u){function z(){var y=u.apply(this,arguments)||this;y.output=0;y.occlusionTestEnabled=!0;y.sdf=!1;y.vvSize=!1;y.vvColor=!1;y.verticalOffset=!1;y.screenSizePerspective=!1;y.screenCenterOffsetUnitsEnabled=0;y.debugDrawBorder=!0;y.binaryHighlightOcclusion=!0;y.slicePlaneEnabled=!1;y.polygonOffsetEnabled=!1;y.depthEnabled=!0;y.transparencyPassType=3;y.pixelSnappingEnabled=
!0;y.isDraped=!1;y.multipassGeometryEnabled=!1;return y}r._inheritsLoose(z,u);return z}(p.ShaderTechniqueConfiguration);A.__decorate([p.parameter({count:8})],v.prototype,"output",void 0);A.__decorate([p.parameter()],v.prototype,"occlusionTestEnabled",void 0);A.__decorate([p.parameter()],v.prototype,"sdf",void 0);A.__decorate([p.parameter()],v.prototype,"vvSize",void 0);A.__decorate([p.parameter()],v.prototype,"vvColor",void 0);A.__decorate([p.parameter()],v.prototype,"verticalOffset",void 0);A.__decorate([p.parameter()],
v.prototype,"screenSizePerspective",void 0);A.__decorate([p.parameter({count:2})],v.prototype,"screenCenterOffsetUnitsEnabled",void 0);A.__decorate([p.parameter()],v.prototype,"debugDrawBorder",void 0);A.__decorate([p.parameter()],v.prototype,"binaryHighlightOcclusion",void 0);A.__decorate([p.parameter()],v.prototype,"slicePlaneEnabled",void 0);A.__decorate([p.parameter()],v.prototype,"polygonOffsetEnabled",void 0);A.__decorate([p.parameter()],v.prototype,"depthEnabled",void 0);A.__decorate([p.parameter({count:4})],
v.prototype,"transparencyPassType",void 0);A.__decorate([p.parameter()],v.prototype,"pixelSnappingEnabled",void 0);A.__decorate([p.parameter()],v.prototype,"isDraped",void 0);A.__decorate([p.parameter()],v.prototype,"multipassGeometryEnabled",void 0);g.HUDMaterialTechnique=t;g.HUDMaterialTechniqueConfiguration=v;Object.defineProperty(g,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderLibrary/attributes/VerticalOffset.glsl":function(){define(["exports","../../shaderModules/interfaces",
"../util/ScreenSizePerspective.glsl"],function(a,g,r){function A(p,b){const k=p.vertex.code;b.verticalOffsetEnabled?(p.vertex.uniforms.add("verticalOffset","vec4"),b.screenSizePerspectiveEnabled&&(p.include(r.ScreenSizePerspective),p.vertex.uniforms.add("screenSizePerspectiveAlignment","vec4")),k.add(g.glsl`
    vec3 calculateVerticalOffset(vec3 worldPos, vec3 localOrigin) {
      float viewDistance = length((view * vec4(worldPos, 1.0)).xyz);
      ${1===b.viewingMode?g.glsl`vec3 worldNormal = normalize(worldPos + localOrigin);`:g.glsl`vec3 worldNormal = vec3(0.0, 0.0, 1.0);`}
      ${b.screenSizePerspectiveEnabled?g.glsl`
          float cosAngle = dot(worldNormal, normalize(worldPos - camPos));
          float verticalOffsetScreenHeight = screenSizePerspectiveScaleFloat(verticalOffset.x, abs(cosAngle), viewDistance, screenSizePerspectiveAlignment);`:g.glsl`
          float verticalOffsetScreenHeight = verticalOffset.x;`}
      // Screen sized offset in world space, used for example for line callouts
      float worldOffset = clamp(verticalOffsetScreenHeight * verticalOffset.y * viewDistance, verticalOffset.z, verticalOffset.w);
      return worldNormal * worldOffset;
    }

    vec3 addVerticalOffset(vec3 worldPos, vec3 localOrigin) {
      return worldPos + calculateVerticalOffset(worldPos, localOrigin);
    }
    `)):k.add(g.glsl`
    vec3 addVerticalOffset(vec3 worldPos, vec3 localOrigin) { return worldPos; }
    `)}function v(p,b,k,n=t){n.screenLength=p.screenLength;n.perDistance=Math.tan(.5*b)/(.5*k);n.minWorldLength=p.minWorldLength;n.maxWorldLength=p.maxWorldLength;return n}(function(p){p.bindUniforms=function(b,k,n){k.verticalOffset&&(k=v(k.verticalOffset,n.camera.fovY,n.camera.fullViewport[3]),b.setUniform4f("verticalOffset",k.screenLength*(n.camera.pixelRatio||1),k.perDistance,k.minWorldLength,k.maxWorldLength))}})(A||(A={}));const t={screenLength:0,perDistance:0,minWorldLength:0,maxWorldLength:0};
a.VerticalOffset=A;a.calculateVerticalOffsetFactors=v;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/layers/graphics/elevationAlignmentUtils":function(){define("exports ../../../../core/compilerUtils ../../../../core/maybe ../../../../chunks/vec3f64 ../../../../chunks/mat4 ../../../../geometry/projection ../../../../chunks/mat4f64 ../../../../layers/graphics/dehydratedFeatures ../../support/ElevationProvider ./graphicUtils".split(" "),function(a,g,r,A,v,t,p,b,k,n){function l(c,
m,f,e,d){const h=(b.isDehydratedPoint(c)?c.z:k.isSamplePosition(c)?c.array[c.offset+2]:c[2])||0;switch(f.mode){case "on-the-ground":return f=r.unwrapOr(k.getElevationAtPoint(m,c,"ground"),0),d&&(d.verticalDistanceToGround=0,d.sampledElevation=f),f;case "relative-to-ground":return c=r.unwrapOr(k.getElevationAtPoint(m,c,"ground"),0),f=f.geometryZWithOffset(h,e),d&&(d.verticalDistanceToGround=f,d.sampledElevation=c),f+c;case "relative-to-scene":return c=r.unwrapOr(k.getElevationAtPoint(m,c,"scene"),
0),f=f.geometryZWithOffset(h,e),d&&(d.verticalDistanceToGround=f,d.sampledElevation=c),f+c;case "absolute-height":return f=f.geometryZWithOffset(h,e),d&&(e=r.unwrapOr(k.getElevationAtPoint(m,c,"ground"),0),d.verticalDistanceToGround=f-e,d.sampledElevation=e),f;default:return g.neverReached(f.mode),0}}(function(c){c[c.NONE=0]="NONE";c[c.UPDATE=1]="UPDATE";c[c.RECREATE=2]="RECREATE"})(a.SymbolUpdateType||(a.SymbolUpdateType={}));const q={"absolute-height":{applyElevationAlignmentBuffer:function(c,m,
f,e,d,h,F,E){h=E.calculateOffsetRenderUnits(F);E=E.featureExpressionInfoContext;m*=3;e*=3;for(F=0;F<d;++F){const u=c[m+1],z=c[m+2];f[e+0]=c[m+0];f[e+1]=u;f[e+2]=null==E?z+h:h;m+=3;e+=3}return 0},requiresAlignment:function(c){const m=c.featureExpressionInfoContext;return 0!==c.meterUnitOffset||null!=m}},"on-the-ground":{applyElevationAlignmentBuffer:function(c,m,f,e,d,h){let F=0;const E=h.spatialReference;m*=3;e*=3;for(let u=0;u<d;++u){const z=c[m+0],y=c[m+1],B=r.unwrapOr(h.getElevation(z,y,c[m+2],
E,"ground"),0);F+=B;f[e+0]=z;f[e+1]=y;f[e+2]=B;m+=3;e+=3}return F/d},requiresAlignment:()=>!0},"relative-to-ground":{applyElevationAlignmentBuffer:function(c,m,f,e,d,h,F,E){let u=0;F=E.calculateOffsetRenderUnits(F);E=E.featureExpressionInfoContext;const z=h.spatialReference;m*=3;e*=3;for(let y=0;y<d;++y){const B=c[m+0],H=c[m+1],D=c[m+2],M=r.unwrapOr(h.getElevation(B,H,D,z,"ground"),0);u+=M;f[e+0]=B;f[e+1]=H;f[e+2]=null==E?D+M+F:M+F;m+=3;e+=3}return u/d},requiresAlignment:()=>!0},"relative-to-scene":{applyElevationAlignmentBuffer:function(c,
m,f,e,d,h,F,E){let u=0;F=E.calculateOffsetRenderUnits(F);E=E.featureExpressionInfoContext;const z=h.spatialReference;m*=3;e*=3;for(let y=0;y<d;++y){const B=c[m+0],H=c[m+1],D=c[m+2],M=r.unwrapOr(h.getElevation(B,H,D,z,"scene"),0);u+=M;f[e+0]=B;f[e+1]=H;f[e+2]=null==E?D+M+F:M+F;m+=3;e+=3}return u/d},requiresAlignment:()=>!0}},C=p.create(),w={verticalDistanceToGround:0,sampledElevation:0},x=A.create();a.applyElevationAlignmentForHUD=function(c,m,f,e,d){f=l(m,f,d,e,w);n.updateVertexAttributeAuxpos1w(c,
w.verticalDistanceToGround);d=w.sampledElevation;const h=v.copy(C,c.transformation);x[0]=m.x;x[1]=m.y;x[2]=f;t.computeLinearTransformation(m.spatialReference,x,h,e.spatialReference)?c.transformation=h:console.warn("Could not locate symbol object properly, it might be misplaced");return d};a.applyPerVertexElevationAlignment=function(c,m,f,e,d,h,F,E,u,z,y){const B=q[y.mode];let H=0;if(t.projectBuffer(c,m,f,e,u.spatialReference,d,E)&&(B.requiresAlignment(y)?(H=B.applyElevationAlignmentBuffer(e,d,h,F,
E,u,z,y),c=h,d=F):c=e,t.projectBuffer(c,u.spatialReference,d,h,z.spatialReference,F,E)))return H};a.elevationModeChangeUpdateType=function(c,m,f){return null==m||null==f?c.definedChanged:"on-the-ground"===m&&"on-the-ground"===f?c.staysOnTheGround:m===f||"on-the-ground"!==m&&"on-the-ground"!==f?a.SymbolUpdateType.UPDATE:c.onTheGroundChanged};a.evaluateElevationAlignmentAtPoint=l;a.needsElevationUpdates2D=function(c){return"relative-to-ground"===c||"relative-to-scene"===c};a.needsElevationUpdates3D=
function(c){return"absolute-height"!==c};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/support/ElevationProvider":function(){define(["exports","../../../core/maybe","../../../layers/graphics/dehydratedFeatures"],function(a,g,r){function A(v){return"array"in v}a.SamplePosition=function(v,t=null,p=0){this.array=v;this.spatialReference=t;this.offset=p};a.getElevationAtPoint=function(v,t,p="ground"){if(r.isDehydratedPoint(t))return v.getElevation(t.x,t.y,t.z||0,t.spatialReference,
p);if(A(t)){let b=t.offset;return v.getElevation(t.array[b++],t.array[b++],t.array[b]||0,g.unwrapOr(t.spatialReference,v.spatialReference),p)}return v.getElevation(t[0],t[1],t[2]||0,v.spatialReference,p)};a.isSamplePosition=A;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/layers/graphics/graphicUtils":function(){define("exports ../../../../core/maybe ../../../../geometry/support/coordsUtils ../../../../geometry/support/centroid ../../../../core/mathUtils ../../../../chunks/vec3f64 ../../../../chunks/mat4 ../../../../geometry/support/aaBoundingRect ../../../../geometry/projection ../../../../chunks/mat4f64 ../../../../chunks/vec2f64 ../../../../chunks/vec4f64 ../../../../chunks/vec4 ../../../../geometry/support/aaBoundingBox ../../../../layers/graphics/dehydratedFeatures ../../../../layers/graphics/hydratedFeatures".split(" "),
function(a,g,r,A,v,t,p,b,k,n,l,q,C,w,x,c){function m(d){var h=d.paths[0];if(!h||0===h.length)return null;h=r.getPointOnPath(h,r.getPathLength(h)/2);return x.makeDehydratedPoint(h[0],h[1],h[2],d.spatialReference)}function f(d,h,F){F=F?d:c.clonePoint(d);return h&&d?k.projectPoint(d,F,h)?F:null:F}function e(d){if(Array.isArray(d)){for(const h of d)if(!e(h))return!1;return!0}return null==d||0<=d}l={"bottom-left":l.fromValues(0,0),bottom:l.fromValues(.5,0),"bottom-right":l.fromValues(1,0),left:l.fromValues(0,
.5),center:l.fromValues(.5,.5),right:l.fromValues(1,.5),"top-left":l.fromValues(0,1),top:l.fromValues(.5,1),"top-right":l.fromValues(1,1)};a.computeCentroid=function(d,h){if("point"===d.type)return f(d,h,!1);if(c.isHydratedGeometry(d))switch(d.type){case "extent":return f(d.center,h,!1);case "polygon":return f(d.centroid,h,!1);case "polyline":return f(m(d),h,!0);case "mesh":return f(d.extent.center,h,!1)}else switch(d.type){case "extent":var F=v.isFinite(d.zmin);d=x.makeDehydratedPoint(.5*(d.xmax+
d.xmin),.5*(d.ymax+d.ymin),F?.5*(d.zmax+d.zmin):void 0,d.spatialReference);return f(d,h,!0);case "polygon":return(F=d.rings[0])&&0!==F.length?(F=A.ringsCentroid(d.rings,d.hasZ),d=x.makeDehydratedPoint(F[0],F[1],F[2],d.spatialReference)):d=null,f(d,h,!0);case "polyline":return f(m(d),h,!0)}};a.computeObjectRotation=function(d,h,F,E=n.create()){d=d||0;h=h||0;F=F||0;0!==d&&p.rotateZ(E,E,-d/180*Math.PI);0!==h&&p.rotateX(E,E,h/180*Math.PI);0!==F&&p.rotateY(E,E,F/180*Math.PI);return E};a.computeObjectScale=
function(d=t.ONES,h,F,E=1){const u=Array(3);if(g.isNone(h)||g.isNone(F))u[0]=1,u[1]=1,u[2]=1;else{let y=0;for(let B=2;0<=B;B--){const H=d[B];let D;const M=null!=H,U=0===B&&!z&&!M,R=F[B];"symbol-value"===H||U?D=0!==R?h[B]/R:1:M&&"proportional"!==H&&isFinite(H)&&(D=0!==R?H/R:1);if(null!=D){var z=u[B]=D;y=Math.max(y,Math.abs(D))}}for(d=2;0<=d;d--)null==u[d]?u[d]=z:0===u[d]&&(u[d]=.001*y)}for(z=2;0<=z;z--)u[z]/=E;return t.fromArray(u)};a.demResolutionForBoundingBox=function(d,h){return null!=h.minDemResolution?
h.minDemResolution:w.isPoint(d)?h.minDemResolutionForPoints:.01*w.maximumDimension(d)};a.enlargeExtent=function(d,h,F,E=0){if(d){h||(h=b.create());let u=.5*d.width*(F-1);F=.5*d.height*(F-1);d.width<1E-7*d.height?u+=F/20:d.height<1E-7*d.width&&(F+=u/20);C.set(h,d.xmin-u-E,d.ymin-F-E,d.xmax+u+E,d.ymax+F+E);return h}return null};a.isValidSize=e;a.mixinColorAndOpacity=function(d,h){const F=q.clone(q.ONES);g.isSome(d)&&(F[0]=d[0],F[1]=d[1],F[2]=d[2]);g.isSome(h)?F[3]=h:g.isSome(d)&&3<d.length&&(F[3]=d[3]);
return F};a.namedAnchorToHUDMaterialAnchorPos=l;a.overrideColor=function(d,h,F,E,u,z=[0,0,0,0]){for(let y=0;3>y;++y)g.isSome(d)&&null!=d[y]?z[y]=d[y]:g.isSome(F)&&null!=F[y]?z[y]=F[y]:z[y]=u[y];g.isSome(h)?z[3]=h:g.isSome(E)?z[3]=E:z[3]=u[3];return z};a.updateVertexAttributeAuxpos1w=function(d,h){for(let F=0;F<d.geometries.length;++F){const E=d.geometries[F].getMutableAttribute("auxpos1");E&&E.data[3]!==h&&(E.data[3]=h,d.geometryVertexAttrsUpdated(F))}};a.validateSymbolLayerSize=function(d){null!=
d.isPrimitive&&(d=[d.width,d.depth,d.height]);return e(d)?null:"Symbol sizes may not be negative values"};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/layers/graphics/hydratedFeatures":function(){define("exports ../../core/has ../../core/typedArrayUtil ../../core/lang ../../core/maybe ../../geometry/support/jsonUtils ../../Graphic ./dehydratedFeatures".split(" "),function(a,g,r,A,v,t,p,b){function k(f){return"declaredClass"in f}function n(f){return"declaredClass"in f}function l(f){return"declaredClass"in
f}function q(f){return v.isNone(f)?null:k(f)?f:t.fromJSON(C(f))}function C(f){const e=f.spatialReference.toJSON();switch(f.type){case "point":{const {x:d,y:h,z:F,m:E}=f;return{x:d,y:h,z:F,m:E,spatialReference:e}}case "polygon":{const {rings:d,hasZ:h,hasM:F}=f;return{rings:w(d),hasZ:h,hasM:F,spatialReference:e}}case "polyline":{const {paths:d,hasZ:h,hasM:F}=f;return{paths:w(d),hasZ:h,hasM:F,spatialReference:e}}case "extent":{const {xmin:d,xmax:h,ymin:F,ymax:E,zmin:u,zmax:z,mmin:y,mmax:B,hasZ:H,hasM:D}=
f;return{xmin:d,xmax:h,ymin:F,ymax:E,zmin:u,zmax:z,mmin:y,mmax:B,hasZ:H,hasM:D,spatialReference:e}}case "multipoint":{const {points:d,hasZ:h,hasM:F}=f;return{points:m(d)?x(d):d,hasZ:h,hasM:F,spatialReference:e}}}}function w(f){return c(f)?f.map(e=>x(e)):f}function x(f){return f.map(e=>r.toArray(e))}function c(f){for(const e of f)if(0!==e.length)return m(e);return!1}function m(f){return f.length&&(r.isFloat32Array(f[0])||r.isFloat64Array(f[0]))}a.clonePoint=function(f,e){if(!f)return null;if(n(f)){if(null==
e)return f.clone();if(n(e))return e.copy(f)}null!=e?(e.x=f.x,e.y=f.y,e.spatialReference=f.spatialReference,f.hasZ?(e.z=f.z,e.hasZ=f.hasZ):(e.z=null,e.hasZ=!1),f.hasM?(e.m=f.m,e.hasM=!0):(e.m=null,e.hasM=!1)):(e=b.makeDehydratedPoint(f.x,f.y,f.z,f.spatialReference),f.hasM&&(e.m=f.m,e.hasM=!0));return e};a.hydrateGeometry=q;a.hydrateGraphic=function(f,e){if(!f)return null;if(l(f))return f;e=new p({layer:e,sourceLayer:e});e.visible=f.visible;e.symbol=A.clone(f.symbol);e.attributes=A.clone(f.attributes);
e.geometry=q(f.geometry);return e};a.isHydratedGeometry=k;a.isHydratedGraphic=l;a.isHydratedPoint=n;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/layers/graphics/ElevationContext":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../core/maybe","../../../../symbols/support/unitConversionUtils","./featureExpressionInfoUtils"],function(a,g,r,A,v){let t=function(){function p(){this._renderUnitOffset=this._meterUnitOffset=0;this._unit="meters";
this._metersPerElevationInfoUnit=1;this.mode=this.centerPointInElevationSR=this._featureExpressionInfoContext=null}var b=p.prototype;b.reset=function(){this.mode=null;this._renderUnitOffset=this._meterUnitOffset=0;this._featureExpressionInfoContext=null;this.unit="meters"};b.addOffsetRenderUnits=function(k){this._renderUnitOffset+=k};b.geometryZWithOffset=function(k,n){n=this.calculateOffsetRenderUnits(n);return null!=this.featureExpressionInfoContext?n:k+n};b.calculateOffsetRenderUnits=function(k){let n=
this._meterUnitOffset;const l=this.featureExpressionInfoContext;null!=l&&(n+=v.execute(l)*this._metersPerElevationInfoUnit);return n/k.unitInMeters+this._renderUnitOffset};b.setFromElevationInfo=function(k){this.mode=k.mode;this.unit=A.supportsUnit(k.unit)?k.unit:"meters";this.offsetElevationInfoUnits=r.unwrapOr(k.offset,0)};b.updateFeatureExpressionInfoContext=function(k,n,l){if(r.isNone(k))this._featureExpressionInfoContext=null;else{var q=k&&k.arcade;q&&r.isSome(n)&&r.isSome(l)?(this._featureExpressionInfoContext=
v.clone(k),v.setContextFeature(this._featureExpressionInfoContext,v.createFeature(q.modules,n,l))):this._featureExpressionInfoContext=k}};p.fromElevationInfo=function(k){const n=new p;r.isSome(k)&&n.setFromElevationInfo(k);return n};g._createClass(p,[{key:"featureExpressionInfoContext",get:function(){return this._featureExpressionInfoContext}},{key:"meterUnitOffset",get:function(){return this._meterUnitOffset}},{key:"unit",get:function(){return this._unit},set:function(k){this._unit=k;this._metersPerElevationInfoUnit=
A.getMetersPerUnit(k)}},{key:"offsetMeters",set:function(k){this._meterUnitOffset=k;this._renderUnitOffset=0}},{key:"offsetElevationInfoUnits",set:function(k){this._meterUnitOffset=k*this._metersPerElevationInfoUnit;this._renderUnitOffset=0}}]);return p}();a.ElevationContext=t;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/layers/graphics/featureExpressionInfoUtils":function(){define(["exports","../../../../core/Logger","../../../../support/arcadeOnDemand","../../../../layers/graphics/hydratedFeatures"],
function(a,g,r,A){const v=g.getLogger("esri.views.3d.layers.graphics.featureExpressionInfoUtils");a.clone=function(t){return{cachedResult:t.cachedResult,arcade:t.arcade?{func:t.arcade.func,context:t.arcade.modules.arcadeUtils.createExecContext(null,{sr:t.arcade.context.spatialReference}),modules:t.arcade.modules}:null}};a.createContext=async function(t,p,b){t=t&&t.expression;if("string"!==typeof t)return null;var k="0"===t?0:null;if(null!=k)return{cachedResult:k};k=await r.loadArcade();const n=k.arcadeUtils;
t=n.createSyntaxTree(t);return n.dependsOnView(t)?(null!=b&&b.error("Expressions containing '$view' are not supported on ElevationInfo"),{cachedResult:0}):{arcade:{func:n.createFunction(t),context:n.createExecContext(null,{sr:p}),modules:k}}};a.createContextWithoutExpressionSupport=function(t){t=t&&t.expression;return"string"===typeof t&&(t="0"===t?0:null,null!=t)?{cachedResult:t}:null};a.createFeature=function(t,p,b){return t.arcadeUtils.createFeature(p.attributes,p.geometry,b)};a.execute=function(t){if(null!=
t){if(null!=t.cachedResult)return t.cachedResult;var p=t.arcade;p=t.arcade.modules.arcadeUtils.executeFunction(p.func,p.context);"number"!==typeof p&&(p=t.cachedResult=0);return p}return 0};a.extractExpressionInfo=function(t,p=!1){const b=(t=t&&t.featureExpressionInfo)&&t.expression;p||"0"===b||(t=null);return t};a.setContextFeature=function(t,p){null!=t&&null==t.cachedResult&&(p&&t.arcade?(p._geometry&&(p._geometry=A.hydrateGeometry(p._geometry)),t.arcade.modules.arcadeUtils.updateExecContext(t.arcade.context,
p)):v.errorOncePerTick("Arcade support required but not provided"))};a.zeroContext={cachedResult:0};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/layers/graphics/sdfPrimitives":function(){define(["exports","../../../../core/has","../../webgl-engine/lib/Util"],function(a,g,r){function A(q,C){const w=new Uint8Array(4*q*q),x=q/2-.5;C/=2;for(let m=0;m<q;m++)for(let f=0;f<q;f++){const e=f+q*m;var c=f-x;const d=m-x;c=Math.sqrt(c*c+d*d)-C;c=c/q+.5;r.packFloatRGBA(c,w,4*e)}return w}function v(q,
C){return n(q,C,!1)}function t(q,C){return n(q,C,!0)}function p(q,C){return l(q,C,!1)}function b(q,C){return l(q,C,!0)}function k(q,C){const w=new Uint8Array(4*q*q),x=Math.sqrt(1.25),c=(q-C)/2;for(let m=0;m<q;m++)for(let f=0;f<q;f++){const e=(f-c)/C,d=(m-c+.75)/C;r.packFloatRGBA(Math.max(-(1*e+-.5*d)/x,(e-1+-.5*-d)/x,-d)*C/q+.5,w,4*(m*q+f))}return w}function n(q,C,w){w&&(C/=Math.SQRT2);const x=new Uint8Array(4*q*q);for(let m=0;m<q;m++)for(let f=0;f<q;f++){var c=f-.5*q+.25;let e=-m+.5*q-.75;const d=
m*q+f;if(w){const h=(c+e)/Math.SQRT2;e=(e-c)/Math.SQRT2;c=h}c=Math.max(Math.abs(c),Math.abs(e))-.5*C;c=c/q+.5;r.packFloatRGBA(c,x,4*d)}return x}function l(q,C,w){w&&(C*=Math.SQRT2);C*=.5;const x=new Uint8Array(4*q*q);for(let m=0;m<q;m++)for(let f=0;f<q;f++){var c=f-.5*q;let e=-m+.5*q-1;const d=m*q+f;if(w){const h=(c+e)/Math.SQRT2;e=(e-c)/Math.SQRT2;c=h}c=Math.abs(c);e=Math.abs(e);c=c>e?c>C?Math.sqrt((c-C)*(c-C)+e*e):e:e>C?Math.sqrt(c*c+(e-C)*(e-C)):c;c=c/q+.5;r.packFloatRGBA(c,x,4*d)}return x}a.createCircle=
A;a.createCross=p;a.createKite=t;a.createSquare=v;a.createTriangle=k;a.createType=function(q,C,w){switch(q){case "circle":return A(C,w);case "square":return v(C,w);case "cross":return p(C,w);case "x":return b(C,w);case "kite":return t(C,w);case "triangle":return k(C,w);default:return A(C,w)}};a.createX=b;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/Texture":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/compilerUtils ../../../../core/typedArrayUtil ../../../../core/maybe ../../../../core/Error ../../../../core/urlUtils ../../../../core/promiseUtils ../../../../core/Evented ../../../../core/mathUtils ../../../../support/requestUtils ../../../../support/requestImageUtils ./Util ./ContentObject ../../../webgl/capabilities/isWebGL2Context ../../../webgl/Texture ../../../webgl/Util ./glUtil3D ../../../webgl/FramebufferObject ./BasisUtil ./DDSUtil".split(" "),
function(a,g,r,A,v,t,p,b,k,n,l,q,C,w,x,c,m,f,e,d,h){w=function(F){function E(z,y){var B=F.call(this)||this;B.data=z;B.type=4;B.glTexture=null;B.powerOfTwoStretchInfo=null;B.loadingPromise=null;B.loadingController=null;B.events=new k;B.params=y||{};B.params.mipmap=!1!==B.params.mipmap;B.params.noUnpackFlip=B.params.noUnpackFlip||!1;B.params.preMultiplyAlpha=B.params.preMultiplyAlpha||!1;B.params.wrap=B.params.wrap||{s:10497,t:10497};B.params.powerOfTwoResizeMode=B.params.powerOfTwoResizeMode||1;B.estimatedTexMemRequired=
E.estimateTexMemRequired(B.data,B.params);B.startPreload();return B}g._inheritsLoose(E,F);var u=E.prototype;u.startPreload=function(){const z=this.data;v.isNone(z)||(z instanceof HTMLVideoElement?this.startPreloadVideoElement(z):z instanceof HTMLImageElement&&this.startPreloadImageElement(z))};u.startPreloadVideoElement=function(z){p.isBlobProtocol(z.src)||"auto"===z.preload&&z.crossOrigin||(z.preload="auto",z.crossOrigin="anonymous",z.src=z.src)};u.startPreloadImageElement=function(z){p.isDataProtocol(z.src)||
p.isBlobProtocol(z.src)||z.crossOrigin||(z.crossOrigin="anonymous",z.src=z.src)};E.getDataDimensions=function(z){return z instanceof HTMLVideoElement?{width:z.videoWidth,height:z.videoHeight}:z};E.estimateTexMemRequired=function(z,y){if(v.isNone(z))return 0;if(A.isArrayBuffer(z)||A.isUint8Array(z))return y.encoding===E.BASIS_ENCODING?d.estimateBasisTextureMemoryUsage(z):z.byteLength;const {width:B,height:H}=z instanceof Image||z instanceof ImageData||z instanceof HTMLCanvasElement||z instanceof HTMLVideoElement?
E.getDataDimensions(z):y;return(y.mipmap?4/3:1)*B*H*(y.components||4)||0};u.dispose=function(){this.data=void 0};u.createDescriptor=function(z){return{target:3553,pixelFormat:6408,dataType:5121,wrapMode:this.params.wrap,flipped:!this.params.noUnpackFlip,samplingMode:this.params.mipmap?9987:9729,hasMipmap:this.params.mipmap,preMultiplyAlpha:this.params.preMultiplyAlpha,maxAnisotropy:this.params.mipmap&&!this.params.disableAnisotropy?z.parameters.maxMaxAnisotropy:void 0}};u.load=function(z,y){if(v.isSome(this.glTexture))return this.glTexture;
if(v.isSome(this.loadingPromise))return this.loadingPromise;const B=this.data;return v.isNone(B)?(this.glTexture=new c(z,this.createDescriptor(z),null),z.bindTexture(this.glTexture,0),this.glTexture):"string"===typeof B?this.loadFromURL(z,y,B):B instanceof Image?this.loadFromImageElement(z,y,B):B instanceof HTMLVideoElement?this.loadFromVideoElement(z,y,B):B instanceof ImageData||B instanceof HTMLCanvasElement?this.loadFromImage(z,B,y):(A.isArrayBuffer(B)||A.isUint8Array(B))&&this.params.encoding===
E.DDS_ENCODING?this.loadFromDDSData(z,B):(A.isArrayBuffer(B)||A.isUint8Array(B))&&this.params.encoding===E.BASIS_ENCODING?this.loadFromBasis(z,B):A.isUint8Array(B)?this.loadFromPixelData(z,B):A.isArrayBuffer(B)?this.loadFromPixelData(z,new Uint8Array(B)):null};u.frameUpdate=function(z,y,B){if(!(this.data instanceof HTMLVideoElement)||v.isNone(this.glTexture)||2>this.data.readyState||B===this.data.currentTime)return B;if(v.isSome(this.powerOfTwoStretchInfo)){const {framebuffer:H,vao:D,sourceTexture:M}=
this.powerOfTwoStretchInfo;M.setData(this.data);this.drawStretchedTexture(z,y,H,D,M,this.glTexture)}else{const {width:H,height:D}=this.data,{width:M,height:U}=this.glTexture.descriptor;H!==M||D!==U?this.glTexture.updateData(0,0,0,Math.min(H,M),Math.min(D,U),this.data):this.glTexture.setData(this.data)}this.glTexture.descriptor.hasMipmap&&this.glTexture.generateMipmap();return this.data.currentTime};u.loadFromDDSData=function(z,y){this.glTexture=h.createDDSTexture(z,this.createDescriptor(z),y,this.params.mipmap);
z.bindTexture(this.glTexture,0);return this.glTexture};u.loadFromBasis=function(z,y){return this.loadAsync(()=>d.createTextureFromBasis(z,this.createDescriptor(z),y).then(B=>this.glTexture=B))};u.loadFromPixelData=function(z,y){C.assert(0<this.params.width&&0<this.params.height);const B=this.createDescriptor(z);B.pixelFormat=1===this.params.components?6409:3===this.params.components?6407:6408;B.width=this.params.width;B.height=this.params.height;this.glTexture=new c(z,B,y);z.bindTexture(this.glTexture,
0);return this.glTexture};u.loadAsync=async function(z){const y=b.createAbortController();this.loadingController=y;const B=z(y.signal);this.loadingPromise=B;z=()=>{this.loadingController===y&&(this.loadingController=null);this.loadingPromise===B&&(this.loadingPromise=null)};B.then(z,z);return B};u.loadFromURL=function(z,y,B){return this.loadAsync(async H=>{H=await q.requestImage(B,{signal:H});return this.loadFromImage(z,H,y)})};u.loadFromImageElement=function(z,y,B){return B.complete?this.loadFromImage(z,
B,y):this.loadAsync(async H=>{H=await l.loadImageAsync(B,B.src,!1,H);return this.loadFromImage(z,H,y)})};u.loadFromVideoElement=function(z,y,B){return 2<=B.readyState?this.loadFromImage(z,B,y):this.loadFromVideoElementAsync(z,y,B)};u.loadFromVideoElementAsync=function(z,y,B){return this.loadAsync(H=>new Promise((D,M)=>{const U=()=>{B.removeEventListener("loadeddata",R);B.removeEventListener("error",J);v.isSome(L)&&L.remove()},R=()=>{2<=B.readyState&&(U(),D(this.loadFromImage(z,B,y)))},J=N=>{U();M(N||
new t("Failed to load video"))};B.addEventListener("loadeddata",R);B.addEventListener("error",J);const L=b.onAbort(H,()=>J(b.createAbortError()))}))};u.loadFromImage=function(z,y,B){const H=E.getDataDimensions(y);this.params.width=H.width;this.params.height=H.height;const D=this.createDescriptor(z);D.pixelFormat=3===this.params.components?6407:6408;if(this.requiresPowerOfTwo(z,D)&&(!n.isPowerOfTwo(H.width)||!n.isPowerOfTwo(H.height)))return this.glTexture=this.makePowerOfTwoTexture(z,y,H,D,B),z.bindTexture(this.glTexture,
0),this.glTexture;D.width=H.width;D.height=H.height;this.glTexture=new c(z,D,y);z.bindTexture(this.glTexture,0);return this.glTexture};u.requiresPowerOfTwo=function(z,y){const B="number"===typeof y.wrapMode?33071===y.wrapMode:33071===y.wrapMode.s&&33071===y.wrapMode.t;return!x(z.gl)&&(y.hasMipmap||!B)};u.makePowerOfTwoTexture=function(z,y,B,H,D){const {width:M,height:U}=B;B=n.nextHighestPowerOfTwo(M);const R=n.nextHighestPowerOfTwo(U);H.width=B;H.height=R;let J;switch(this.params.powerOfTwoResizeMode){case 2:H.textureCoordinateScaleFactor=
[M/B,U/R];J=new c(z,H);J.updateData(0,0,0,M,U,y);break;case 1:case null:case void 0:J=this.stretchToPowerOfTwo(z,y,H,D);break;default:r.neverReached(this.params.powerOfTwoResizeMode)}H.hasMipmap&&J.generateMipmap();return J};u.stretchToPowerOfTwo=function(z,y,B,H){const D=new c(z,B),M=new e(z,{colorTarget:0,depthStencilTarget:0},D);y=new c(z,{target:3553,pixelFormat:B.pixelFormat,dataType:5121,wrapMode:33071,samplingMode:9729,flipped:!!B.flipped,maxAnisotropy:8,preMultiplyAlpha:B.preMultiplyAlpha},
y);B=f.createQuadVAO(z);this.drawStretchedTexture(z,H,M,B,y,D);this.requiresFrameUpdates?this.powerOfTwoStretchInfo={vao:B,sourceTexture:y,framebuffer:M}:(B.dispose(!0),y.dispose(),M.detachColorTexture(),z.bindFramebuffer(null),M.dispose());return D};u.drawStretchedTexture=function(z,y,B,H,D,M){z.bindFramebuffer(B);B=z.getViewport();z.setViewport(0,0,M.descriptor.width,M.descriptor.height);M=y.program;z.bindProgram(M);M.setUniform4f("color",1,1,1,1);M.setUniform1i("tex",0);z.bindTexture(D,0);z.bindVAO(H);
z.setPipelineState(y.pipeline);z.drawArrays(5,0,m.vertexCount(H,"geometry"));z.bindFramebuffer(null);z.setViewport(B.x,B.y,B.width,B.height)};u.unload=function(){if(v.isSome(this.powerOfTwoStretchInfo)){const {framebuffer:z,vao:y,sourceTexture:B}=this.powerOfTwoStretchInfo;y.dispose(!0);B.dispose();z.dispose();this.powerOfTwoStretchInfo=this.glTexture=null}v.isSome(this.glTexture)&&(this.glTexture.dispose(),this.glTexture=null);if(v.isSome(this.loadingController)){const z=this.loadingController;this.loadingPromise=
this.loadingController=null;z.abort()}this.events.emit("unloaded")};g._createClass(E,[{key:"width",get:function(){return this.params.width}},{key:"height",get:function(){return this.params.height}},{key:"requiresFrameUpdates",get:function(){return this.data instanceof HTMLVideoElement}}]);return E}(w.ContentObject);w.DDS_ENCODING="image/vnd-ms.dds";w.BASIS_ENCODING="image/x.basis";a.Texture=w;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/support/requestImageUtils":function(){define(["exports",
"../request"],function(a,g){a.requestImage=async function(r,A){({data:r}=await g(r,{responseType:"image",...A}));return r};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/lib/BasisUtil":function(){define(["exports","../../../../core/maybe","../../../webgl/Texture","../../../webgl/Util","../../../../libs/basisu/BasisU"],function(a,g,r,A,v){async function t(){g.isNone(b)&&(b=v.getBasisTranscoder(),p=await b);return b}let p=null,b=null;a.createTextureFromBasis=async function(k,
n,l){g.isNone(p)&&(p=await t());l=new p.BasisFile(new Uint8Array(l));if(1>l.getNumImages())return null;const q=l.getNumLevels(0);var C=l.getHasAlpha();const w=l.getImageWidth(0,0),x=l.getImageHeight(0,0),{compressedTextureETC:c,compressedTextureS3TC:m}=k.capabilities,[f,e]=c?C?[1,37496]:[0,37492]:m?C?[3,33779]:[2,33776]:[13,6408];l.startTranscoding();C=[];for(let d=0;d<q;d++)C.push(new Uint8Array(l.getImageTranscodedSizeInBytes(0,d,f))),l.transcodeImage(C[d],0,d,f,0,0);l.close();l.delete();return new r(k,
{...n,samplingMode:1<q?9987:9729,hasMipmap:1<q,internalFormat:e,width:w,height:x},{type:"compressed",levels:C})};a.estimateBasisTextureMemoryUsage=function(k){if(g.isNone(p))return k.byteLength;var n=new p.BasisFile(new Uint8Array(k));if(1>n.getNumImages())return 0;k=n.getNumLevels(0);const l=n.getHasAlpha(),q=n.getImageWidth(0,0),C=n.getImageHeight(0,0);n.close();n.delete();n=A.getBytesPerElementFormat(l?37496:37492);return Math.ceil((4**k-1)/(3*4**(k-1))*C*n*q)};a.loadBasis=t;Object.defineProperty(a,
"__esModule",{value:!0})})},"esri/libs/basisu/BasisU":function(){define(["require","exports","../../core/maybe","../../assets"],function(a,g,r,A){let v;g.getBasisTranscoder=function(){if(r.isNone(v)){const t=p=>A.getAssetUrl(`esri/libs/basisu/${p}`);v=(new Promise(function(p,b){a(["../../chunks/basis_transcoder"],p,b)})).then(function(p){return p.basis_transcoder}).then(({default:p})=>p({locateFile:t}).then(b=>{b.initializeBasis();delete b.then;return b}))}return v};Object.defineProperty(g,"__esModule",
{value:!0})})},"esri/views/3d/webgl-engine/lib/DDSUtil":function(){define(["exports","../../../../core/Logger","../../../../core/mathUtils","../../../webgl/Texture"],function(a,g,r,A){function v(l){return l.charCodeAt(0)+(l.charCodeAt(1)<<8)+(l.charCodeAt(2)<<16)+(l.charCodeAt(3)<<24)}function t(l,q){var C=new Int32Array(l,0,31);if(542327876!==C[0])return p.error("Invalid magic number in DDS header"),null;if(!(C[20]&4))return p.error("Unsupported format, must contain a FourCC code"),null;var w=C[21];
let x;switch(w){case b:w=8;x=33776;break;case k:w=16;x=33778;break;case n:w=16;x=33779;break;default:return p.error("Unsupported FourCC code:",String.fromCharCode(w&255,w>>8&255,w>>16&255,w>>24&255)),null}let c=1,m=C[4],f=C[3];if(0!==(m&3)||0!==(f&3))p.warn("Rounding up compressed texture size to nearest multiple of 4."),m=m+3&-4,f=f+3&-4;const e=m,d=f;C[2]&131072&&!1!==q&&(c=Math.max(1,C[7]));1===c||r.isPowerOfTwo(m)&&r.isPowerOfTwo(f)||(p.warn("Ignoring mipmaps of non power of two sized compressed texture."),
c=1);let h=C[1]+4;const F=[];for(let E=0;E<c;++E)C=(m+3>>2)*(f+3>>2)*w,q=new Uint8Array(l,h,C),F.push(q),h+=C,m=Math.max(1,m>>1),f=Math.max(1,f>>1);return{textureData:{type:"compressed",levels:F},internalFormat:x,width:e,height:d}}const p=g.getLogger("esri.views.3d.webgl-engine.lib.DDSUtil"),b=v("DXT1"),k=v("DXT3"),n=v("DXT5");a.createDDSTexture=function(l,q,C,w){const {textureData:x,internalFormat:c,width:m,height:f}=t(C,w);q.samplingMode=1<x.levels.length?9987:9729;q.hasMipmap=1<x.levels.length;
q.internalFormat=c;q.width=m;q.height=f;q=new A(l,q,x);l.bindTexture(q,0);return q};a.createDDSTextureData=t;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/interactive/visualElements/VisualElementResources":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../core/watchUtils ../../webgl-engine/lib/Object3D ../../webgl-engine/lib/WebGLLayer".split(" "),function(a,g,r,A,v,t){let p=function(){function b(n){this.resourceFactory=
n;this._resources=null;this._visible=!0;this._attached=!1}var k=b.prototype;k.destroy=function(){this._destroyResources()};k.recreate=function(){this.attached&&this._createResources()};k.recreateGeometry=function(){if(this.resourceFactory.recreateGeometry){var n=this.resourceFactory.view._stage;if(!r.isNone(this._resources)&&n){var l=this._resources.object;this._resources.external.forEach(q=>{2===q.type&&n.remove(q)});l.removeAllGeometries();l=this.resourceFactory.recreateGeometry(this._resources.external,
l,this._resources.layer);n.addMany(l);this._resources.layer.commit()}}else this.recreate()};k._createOrDestroyResources=function(){this._attached?this._resources||this._createResources():this._destroyResources()};k._createResources=function(){this._destroyResources();const n=this.resourceFactory.view._stage;if(n){var l=new t.WebGLLayer({isPickable:!1});n.add(l);var q=new v.Object3D({castShadow:!1}),C=this.resourceFactory.createResources(q,l);C.forEach(x=>n.add(x));n.add(q);l.add(q);l.commit();this._syncVisible();
var w=this.resourceFactory.cameraChanged?A.init(this.resourceFactory.view.state,"camera",x=>this.resourceFactory.cameraChanged(x)):null;this._resources={layer:l,object:q,external:C,cameraHandle:w}}};k._destroyResources=function(){if(!r.isNone(this._resources)){var n=this.resourceFactory.view._stage;null==n?void 0:n.remove(this._resources.object);null==n?void 0:n.remove(this._resources.layer);this._resources.external.forEach(l=>{null==n?void 0:n.remove(l);"dispose"in l&&l.dispose()});this._resources.object.dispose();
this._resources.cameraHandle&&this._resources.cameraHandle.remove();this._resources=null}};k._syncVisible=function(){r.isNone(this._resources)||(this._resources.object.setVisible(this._visible),this._resources.layer.commit())};g._createClass(b,[{key:"object",get:function(){return r.isSome(this._resources)?this._resources.object:null}},{key:"resources",get:function(){return r.isSome(this._resources)?this._resources.external:null}},{key:"visible",get:function(){return this._visible},set:function(n){n!==
this._visible&&(this._visible=n,this._syncVisible())}},{key:"attached",get:function(){return this._attached},set:function(n){n!==this._attached&&(this._attached=n,this._createOrDestroyResources())}}]);return b}();a.VisualElementResources=p;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/interactive/visualElements/RightAngleQuadVisualElement":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../chunks/vec3f64 ../../../../chunks/vec3 ../../../../core/Handles ../../../../chunks/mat4 ../../../../chunks/mat4f64 ../../../../chunks/vec4 ../../../../chunks/vec4f32 ../../support/stack ../../webgl-engine/lib/Geometry ../../webgl-engine/lib/GeometryUtil ../../webgl-engine/materials/RibbonLineMaterial ../../webgl-engine/materials/ColorMaterial ./Object3DVisualElement".split(" "),
function(a,g,r,A,v,t,p,b,k,n,l,q,C,w,x,c){c=function(f){function e(h){var F=f.call(this,h)||this;F._handles=new t;F._quadMaterial=null;F._outlineMaterial=null;F._maxSize=0;F._position=A.create();F._up=A.create();F._right=A.create();F._renderOccluded=4;F._color=n.fromValues(1,0,0,1);F._outlineColor=n.fromValues(0,0,0,1);F._outlineSize=0;F._size=32;F._outlineRenderOccluded=16;F.applyProps(h);return F}g._inheritsLoose(e,f);var d=e.prototype;d.createExternalResources=function(){this._quadMaterial=new x.ColorMaterial(this.quadMaterialParameters);
this._outlineMaterial=new w.RibbonLineMaterial(this.outlineMaterialParameters);this._handles.add(this.view.state.watch("camera",()=>this._updateTransform()))};d.destroyExternalResources=function(){this._outlineMaterial=this._quadMaterial=null;this._handles.removeAll()};d.forEachExternalMaterial=function(h){h(this._quadMaterial);h(this._outlineMaterial)};d.createGeometries=function(h){this._createQuadGeometry(h);this._createOutlineGeometry(h);this._updateTransform(h)};d._createQuadGeometry=function(h){const F=
this._quadGeometryData(this._up,this._right);h.addGeometry(F,this._quadMaterial)};d._createOutlineGeometry=function(h){if(0!==this._outlineSize){var F=v.add(l.sv3d.get(),this._up,this._right);F=C.createPolylineGeometry([this._up,F,this._right]);h.addGeometry(F,this._outlineMaterial)}};d._updateTransform=function(h=this.object){var F=this._size*this.view.state.camera.computeScreenPixelSizeAt(this._position);F=Math.min(this._maxSize,F);p.identity(m);p.translate(m,m,this._position);p.scale(m,m,[F,F,
F]);r.isSome(h)&&(h.transformation=m)};d._quadGeometryData=function(h,F){const E=v.add(l.sv3d.get(),h,F);return new q.Geometry([["position",{size:3,data:[0,0,0,...F,...h,...E],exclusive:!0}]],[["position",new Uint16Array([0,1,2,1,2,3])]])};d._updateQuadMaterial=function(){this._quadMaterial&&this._quadMaterial.setParameterValues(this.quadMaterialParameters)};d._updateOutlineMaterial=function(){this._outlineMaterial&&this._outlineMaterial.setParameterValues(this.outlineMaterialParameters)};g._createClass(e,
[{key:"renderOccluded",get:function(){return this._renderOccluded},set:function(h){h!==this._renderOccluded&&(this._renderOccluded=h,this._updateQuadMaterial())}},{key:"color",get:function(){return this._color},set:function(h){k.copy(this._color,h);this._updateQuadMaterial()}},{key:"outlineColor",get:function(){return this._outlineColor},set:function(h){k.copy(this._outlineColor,h);this._updateOutlineMaterial()}},{key:"outlineSize",get:function(){return this._outlineSize},set:function(h){const F=
0===this._outlineSize!==(0===h);this._outlineSize=h;F?this.recreateGeometry():this._updateOutlineMaterial()}},{key:"size",get:function(){return this._size},set:function(h){h!==this._size&&(this._size=h,this._updateTransform())}},{key:"outlineRenderOccluded",get:function(){return this._outlineRenderOccluded},set:function(h){this._outlineRenderOccluded=h;this._updateOutlineMaterial()}},{key:"geometry",set:function({previous:h,center:F,next:E}){this._maxSize=Math.min(v.distance(F,h),v.distance(F,E))/
3;v.normalize(this._up,v.subtract(this._up,h,F));v.normalize(this._right,v.subtract(this._right,E,F));v.copy(this._position,F);this.recreateGeometry()}},{key:"quadMaterialParameters",get:function(){return{color:this._color,transparent:!0,writeDepth:!1,polygonOffset:!0,renderOccluded:this._renderOccluded}}},{key:"outlineMaterialParameters",get:function(){return{color:this._outlineColor,width:this._outlineSize,renderOccluded:this._outlineRenderOccluded}}}]);return e}(c.Object3DVisualElement);const m=
b.create();a.RightAngleQuadVisualElement=c;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/materials/ColorMaterial":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../lib/GLMaterial ./internal/MaterialUtil ../lib/Material ../lib/OrderIndependentTransparency ./internal/DefaultBufferWriter ../shaders/ColorMaterialTechnique".split(" "),function(a,g,r,A,v,t,p,b){let k=function(q){function C(x){x=q.call(this,x,l)||this;x.supportsEdges=!0;x.techniqueConfig=
new b.ColorMaterialTechniqueConfiguration;return x}g._inheritsLoose(C,q);var w=C.prototype;w.getTechniqueConfig=function(x,c){this.techniqueConfig.output=x;this.techniqueConfig.cullFace=this.params.cullFace;this.techniqueConfig.vertexColors=this.params.vertexColors;this.techniqueConfig.slicePlaneEnabled=this.params.slicePlaneEnabled;this.techniqueConfig.transparent=this.params.transparent;this.techniqueConfig.polygonOffset=this.params.polygonOffset;this.techniqueConfig.writeDepth=this.params.writeDepth;
this.techniqueConfig.sceneHasOcludees=this.params.sceneHasOcludees;this.techniqueConfig.transparencyPassType=c?c.transparencyPassType:3;this.techniqueConfig.enableOffset=c?c.camera.relativeElevation<t.OITPolygonOffsetLimit:!0;this.techniqueConfig.multipassTerrainEnabled=c?c.multipassTerrainEnabled:!1;this.techniqueConfig.cullAboveGround=c?c.cullAboveGround:!0;return this.techniqueConfig};w.getPassParameters=function(){return this.params};w.intersect=function(x,c,m,f,e,d,h){A.intersectTriangleGeometry(x,
c,f,e,d,void 0,h)};w.getGLMaterial=function(x){return 0===x.output||7===x.output||4===x.output||1===x.output&&this.params.writeLinearDepth?new n(x):void 0};w.createBufferWriter=function(){return new p.DefaultBufferWriter(p.PositionColorLayout)};return C}(v.Material),n=function(q){function C(x){x=q.call(this,x)||this;x.updateParameters();return x}g._inheritsLoose(C,q);var w=C.prototype;w.updateParameters=function(x){this.technique=this.techniqueRep.acquireAndReleaseExisting(b.ColorMaterialTechnique,
this.material.getTechniqueConfig(this.output,x),this.technique)};w.beginSlot=function(x){return 4===this.output?3===x:x===(this.technique.configuration.transparent?this.technique.configuration.writeDepth?5:8:3)};w._updateOccludeeState=function(x){x.hasOccludees!==this.material.params.sceneHasOcludees&&this.material.setParameterValues({sceneHasOcludees:x.hasOccludees})};w.ensureParameters=function(x){0!==this.output&&7!==this.output||this._updateOccludeeState(x);this.updateParameters(x)};w.bind=function(x,
c){x.bindProgram(this.technique.program);this.technique.bindPass(x,this.material.getPassParameters(),c)};w.getPipelineState=function(x,c){return this.technique.getPipelineState(c)};return C}(r);const l={color:[1,1,1,1],transparent:!1,writeDepth:!0,writeLinearDepth:!1,vertexColors:!1,polygonOffset:!1,slicePlaneEnabled:!1,cullFace:0,sceneHasOcludees:!1,...v.materialParametersDefaults};a.ColorMaterial=k;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/materials/internal/DefaultBufferWriter":function(){define(["exports",
"../../../support/buffer/InterleavedLayout","./bufferWriterUtils"],function(a,g,r){const A=g.newLayout().vec3f("position"),v=g.newLayout().vec3f("position").vec2f("uv0");g=g.newLayout().vec3f("position").vec4u8("color");let t=function(){function p(k){this.vertexBufferLayout=k}var b=p.prototype;b.allocate=function(k){return this.vertexBufferLayout.createBuffer(k)};b.elementCount=function(k){return k.indices.get("position").length};b.write=function(k,n,l,q){r.writeDefaultAttributes(n,this.vertexBufferLayout,
k.transformation,k.invTranspTransformation,l,q)};return p}();a.DefaultBufferWriter=t;a.PositionColorLayout=g;a.PositionLayout=A;a.PositionUVLayout=v;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/shaders/ColorMaterialTechnique":function(){define("require exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../core/shaderTechnique/ReloadableShaderModule ../core/shaderTechnique/ShaderTechnique ../core/shaderTechnique/ShaderTechniqueConfiguration ../lib/DefaultVertexAttributeLocations ../../../webgl/Program ../../../webgl/renderState ../core/shaderLibrary/util/View.glsl ../core/shaderLibrary/Slice.glsl ../core/shaderLibrary/output/OutputHighlight.glsl ../lib/OrderIndependentTransparency ../core/shaderLibrary/shading/MultipassTerrainTest.glsl ../lib/StencilUtils ../../../../chunks/ColorMaterial.glsl".split(" "),
function(a,g,r,A,v,t,p,b,k,n,l,q,C,w,x,c,m){t=function(e){function d(){return e.apply(this,arguments)||this}r._inheritsLoose(d,e);var h=d.prototype;h.initializeProgram=function(F){var E=d.shader.get();const u=this.configuration;E=E.build({output:u.output,OITEnabled:0===u.transparencyPassType,attributeColor:u.vertexColors,slicePlaneEnabled:u.slicePlaneEnabled,sliceHighlightDisabled:!1,sliceEnabledForVertexPrograms:!1,multipassTerrainEnabled:u.multipassTerrainEnabled,cullAboveGround:u.cullAboveGround});
return new k(F.rctx,E.generateSource("vertex"),E.generateSource("fragment"),b.Default3D)};h.bindPass=function(F,E,u){l.View.bindProjectionMatrix(this.program,u.camera.projectionMatrix);this.program.setUniform4fv("eColor",E.color);4===this.configuration.output&&C.OutputHighlight.bindOutputHighlight(F,this.program,u);(1===this.configuration.output||u.multipassTerrainEnabled)&&this.program.setUniform2fv("cameraNearFar",u.camera.nearFar);u.multipassTerrainEnabled&&(this.program.setUniform2fv("inverseViewport",
u.inverseViewport),x.bindMultipassTerrainUniforms(this.program,F,u))};h.bindDraw=function(F){l.View.bindView(this.program,F);q.Slice.bindUniformsWithOrigin(this.program,this.configuration,F)};h.setPipelineState=function(F,E){const u=this.configuration,z=3===F,y=2===F;return n.makePipelineState({blending:0!==u.output&&7!==u.output||!u.transparent?null:z?w.blendingDefault:w.OITBlending(F),culling:(B=>0!==B&&{face:1===B?1028:1029,mode:2305})(u.cullFace),depthTest:{func:w.OITDepthTest(F)},depthWrite:z||
y?u.writeDepth&&n.defaultDepthWriteParams:null,colorWrite:n.defaultColorWriteParams,stencilWrite:u.sceneHasOcludees?c.stencilWriteMaskOn:null,stencilTest:u.sceneHasOcludees?E?c.stencilToolMaskBaseParams:c.stencilBaseAllZerosParams:null,polygonOffset:z||y?u.polygonOffset&&f:w.getOITPolygonOffset(u.enableOffset)})};h.initializePipeline=function(){this._occludeePipelineState=this.setPipelineState(this.configuration.transparencyPassType,!0);return this.setPipelineState(this.configuration.transparencyPassType,
!1)};h.getPipelineState=function(F){return F?this._occludeePipelineState:this.pipeline};return d}(t.ShaderTechnique);t.shader=new v.ReloadableShaderModule(m.ColorMaterialShader,()=>new Promise(function(e,d){a(["./ColorMaterial.glsl"],e,d)}));const f={factor:1,units:1};v=function(e){function d(){var h=e.apply(this,arguments)||this;h.output=0;h.cullFace=0;h.slicePlaneEnabled=!1;h.vertexColors=!1;h.transparent=!1;h.polygonOffset=!1;h.enableOffset=!0;h.writeDepth=!0;h.sceneHasOcludees=!1;h.transparencyPassType=
3;h.multipassTerrainEnabled=!1;h.cullAboveGround=!0;return h}r._inheritsLoose(d,e);return d}(p.ShaderTechniqueConfiguration);A.__decorate([p.parameter({count:8})],v.prototype,"output",void 0);A.__decorate([p.parameter({count:3})],v.prototype,"cullFace",void 0);A.__decorate([p.parameter()],v.prototype,"slicePlaneEnabled",void 0);A.__decorate([p.parameter()],v.prototype,"vertexColors",void 0);A.__decorate([p.parameter()],v.prototype,"transparent",void 0);A.__decorate([p.parameter()],v.prototype,"polygonOffset",
void 0);A.__decorate([p.parameter()],v.prototype,"enableOffset",void 0);A.__decorate([p.parameter()],v.prototype,"writeDepth",void 0);A.__decorate([p.parameter()],v.prototype,"sceneHasOcludees",void 0);A.__decorate([p.parameter({count:4})],v.prototype,"transparencyPassType",void 0);A.__decorate([p.parameter()],v.prototype,"multipassTerrainEnabled",void 0);A.__decorate([p.parameter()],v.prototype,"cullAboveGround",void 0);g.ColorMaterialTechnique=t;g.ColorMaterialTechniqueConfiguration=v;Object.defineProperty(g,
"__esModule",{value:!0})})},"esri/chunks/ColorMaterial.glsl":function(){define("exports ../views/3d/webgl-engine/core/shaderModules/interfaces ../views/3d/webgl-engine/core/shaderLibrary/Transform.glsl ../views/3d/webgl-engine/core/shaderModules/ShaderBuilder ../views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl ../views/3d/webgl-engine/core/shaderLibrary/Slice.glsl ../views/3d/webgl-engine/core/shaderLibrary/output/ReadLinearDepth.glsl ../views/3d/webgl-engine/core/shaderLibrary/output/OutputHighlight.glsl ../views/3d/webgl-engine/core/shaderLibrary/util/AlphaDiscard.glsl ../views/3d/webgl-engine/core/shaderLibrary/shading/MultipassTerrainTest.glsl ../views/3d/webgl-engine/core/shaderLibrary/output/OutputDepth.glsl ../views/3d/webgl-engine/core/shaderLibrary/attributes/VertexColor.glsl".split(" "),
function(a,g,r,A,v,t,p,b,k,n,l,q){function C(x){const c=new A.ShaderBuilder,m=1===x.output;c.include(r.Transform,{linearDepth:m});c.include(q.VertexColor,x);c.vertex.uniforms.add("proj","mat4").add("view","mat4");c.attributes.add("position","vec3");c.varyings.add("vpos","vec3");x.multipassTerrainEnabled&&c.varyings.add("depth","float");m&&(c.include(l.OutputDepth,x),c.vertex.uniforms.add("cameraNearFar","vec2"),c.varyings.add("linearDepth","float"));c.vertex.code.add(g.glsl`
    void main(void) {
      vpos = position;
      forwardNormalizedVertexColor();
      ${x.multipassTerrainEnabled?"depth \x3d (view * vec4(vpos, 1.0)).z;":""}
      gl_Position = ${m?g.glsl`transformPositionWithDepth(proj, view, vpos, cameraNearFar, linearDepth);`:g.glsl`transformPosition(proj, view, vpos);`}
    }
  `);c.include(t.Slice,x);c.fragment.include(v.ColorConversion);x.multipassTerrainEnabled&&(c.fragment.include(p.ReadLinearDepth),c.include(n.multipassTerrainTest,x));c.fragment.uniforms.add("eColor","vec4");4===x.output&&c.include(b.OutputHighlight);c.fragment.code.add(g.glsl`
  void main() {
    discardBySlice(vpos);
    ${x.multipassTerrainEnabled?"terrainDepthTest(gl_FragCoord, depth);":""}
    vec4 color = ${x.attributeColor?"vColor * eColor;":"eColor;"}

    if (color.a < ${g.glsl.float(k.symbolAlphaCutoff)}) {
      discard;
    }

    ${7===x.output?g.glsl`gl_FragColor = vec4(color.a);`:""}

    ${0===x.output?g.glsl`gl_FragColor = highlightSlice(color, vpos); ${x.OITEnabled?"gl_FragColor \x3d premultiplyAlpha(gl_FragColor);":""}`:""}
    ${4===x.output?g.glsl`outputHighlight();`:""};
    ${1===x.output?g.glsl`outputDepth(linearDepth);`:""};
  }
  `);return c}var w=Object.freeze({__proto__:null,build:C});a.ColorMaterialShader=w;a.build=C})},"esri/views/3d/webgl-engine/core/shaderLibrary/Transform.glsl":function(){define(["exports","../shaderModules/interfaces"],function(a,g){a.Transform=function(r,A){A.linearDepth?r.vertex.code.add(g.glsl`
    vec4 transformPositionWithDepth(mat4 proj, mat4 view, vec3 pos, vec2 nearFar, out float depth) {
      vec4 eye = view * vec4(pos, 1.0);
      depth = (-eye.z - nearFar[0]) / (nearFar[1] - nearFar[0]) ;
      return proj * eye;
    }
    `):r.vertex.code.add(g.glsl`
    vec4 transformPosition(mat4 proj, mat4 view, vec3 pos) {
      // Make sure the order of operations is the same as in transformPositionWithDepth.
      return proj * (view * vec4(pos, 1.0));
    }
    `)};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/webgl-engine/core/shaderLibrary/attributes/VertexColor.glsl":function(){define(["exports","../../shaderModules/interfaces"],function(a,g){a.VertexColor=function(r,A){A.attributeColor?(r.attributes.add("color","vec4"),r.varyings.add("vColor","vec4"),r.vertex.code.add(g.glsl`
      void forwardVertexColor() { vColor = color; }
    `),r.vertex.code.add(g.glsl`
      void forwardNormalizedVertexColor() { vColor = color * 0.003921568627451; }
    `)):r.vertex.code.add(g.glsl`
      void forwardVertexColor() {}
      void forwardNormalizedVertexColor() {}
    `)};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/interactive/editingTools/draw/DrawManipulator":function(){define(["exports","../../../../../core/Evented"],function(a,g){let r=function(){function A({grabbableForEvent:t}){this.events=new g;this.interactive=!0;this.selectable=!1;this.cursor=null;this.grabbable=!0;this.grabbableForEvent=t}var v=A.prototype;v.intersectionDistance=function(t,p){return 0};v.attach=function(){};v.detach=function(){};return A}();a.DrawManipulator=
r;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/draw/DrawingMode":function(){define(["exports"],function(a){a.defaultDrawingMode="click";a.drawingModes=["freehand","hybrid","click"];Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/interactive/editingTools/draw/drawSurfaces":function(){define(["exports","../../../../../core/maybe","../../../../../core/screenUtils","../../../../../support/elevationInfoUtils","../../../../../layers/graphics/dehydratedFeatures"],function(a,
g,r,A,v){let t=function(){function b(n,l,q,C=null){this.elevationInfo=n;this.defaultZ=l;this.view=q;this.excludeGraphics=C}var k=b.prototype;k.screenToMap=function(n){if(g.isSome(this.defaultZ))return this.view.sceneIntersectionHelper.intersectElevationFromScreen(r.createScreenPointArray(n.x,n.y),this.elevationInfo,this.defaultZ,this.excludeGraphics);n=this.view.sceneIntersectionHelper.intersectElevationFromScreen(r.createScreenPointArray(n.x,n.y),this.elevationInfo,0,this.excludeGraphics);g.isSome(n)&&
(n.z=void 0);return n};k.mapToScreen=function(n){n=v.makeDehydratedPoint(n.x,n.y,A.getConvertedElevation(this.view,n,this.elevationInfo),n.spatialReference);return this.view.toScreen(n)};return b}(),p=function(){function b(n,l,q=[]){this.view=n;this.elevationInfo=l;this.exclude=q}var k=b.prototype;k.screenToMap=function(n){n=this.view.toMap(n,{exclude:this.exclude});g.isSome(n)&&(n.z=A.getZForElevationMode(n,this.view,this.elevationInfo));return n};k.mapToScreen=function(n){let l=n;g.isSome(this.elevationInfo)&&
(l=v.makeDehydratedPoint(n.x,n.y,A.getConvertedElevation(this.view,n,this.elevationInfo),n.spatialReference));return this.view.toScreen(l)};return b}();a.ElevationDrawSurface=t;a.SceneDrawSurface=p;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/interactive/InteractiveToolBase":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/promiseUtils ../../core/Accessor ./interactiveToolUtils ./ManipulatorCollection".split(" "),
function(a,g,r,A,v,t,p,b,k,n,l,q,C,w,x,c){a.InteractiveToolBase=function(m){function f(d){d=m.call(this,d)||this;d.attached=!1;d.created=!1;d.completed=!1;d.manipulators=new c.ManipulatorCollection;d.deferCreation=!1;d._editableFlags=[];d._creationResolver=C.createResolver();return d}g._inheritsLoose(f,m);var e=f.prototype;e.attach=function(){if(!this.attached&&this.isSupported){this.manipulators.attach();this.onAttach();if(this.visible)this.onShow();this._set("attached",!0)}};e.detach=function(){this.attached&&
(this.onHide(),this.onDetach(),this.manipulators.detach(),this._set("attached",!1))};e.handleInputEvent=function(d){if(this.attached)this.onInputEvent(d)};e.handleInputEventAfter=function(d){if(this.attached)this.onInputEventAfter(d)};e.destroy=function(){this.manipulators.destroy();this._set("view",null);this._set("created",!1);this._set("completed",!1)};e.setEditableFlag=function(d,h){this._editableFlags[d]=h;this.manipulators.isToolEditable=this._editableFlags.every(F=>null==F||F);this._updateManipulatorAttachment();
0===d&&this.notifyChange("editable");this.onEditableChange()};e.hasEditableFlag=function(d){d=this._editableFlags[d];return null==d?!0:d};e.when=function(){return this._creationResolver.promise};e.rejectCreation=function(d){this._creationResolver.reject(d)};e.initialize=function(){this.deferCreation||this.complete()};e.onAttach=function(){};e.onDetach=function(){};e.onShow=function(){};e.onHide=function(){};e.onEditableChange=function(){};e.onInputEvent=function(d){};e.onInputEventAfter=function(d){};
e.create=function(){this.created||(this._set("created",!0),this._creationResolver.resolve(this))};e.complete=function(){this.create();this._set("completed",!0)};e._show=function(){this._updateManipulatorAttachment();this.onShow()};e._hide=function(){this._updateManipulatorAttachment();this.onHide()};e._updateManipulatorAttachment=function(){this.attached&&this.visible?this.manipulators.attach():this.manipulators.detach()};g._createClass(f,[{key:"active",get:function(){return null!=this.view&&this.view.activeTool===
this}},{key:"isSupported",get:function(){return!0}},{key:"visible",set:function(d){this._set("visible",d);d||x.setActive(this,!1);this.attached&&(d?this._show():this._hide())}},{key:"editable",get:function(){return this.hasEditableFlag(0)},set:function(d){this.setEditableFlag(0,d)}},{key:"internallyEditable",get:function(){return this.hasEditableFlag(0)&&this.hasEditableFlag(1)}}]);return f}(w);r.__decorate([p.property({constructOnly:!0})],a.InteractiveToolBase.prototype,"view",void 0);r.__decorate([p.property({readOnly:!0})],
a.InteractiveToolBase.prototype,"active",null);r.__decorate([p.property({value:!0})],a.InteractiveToolBase.prototype,"visible",null);r.__decorate([p.property({value:!0})],a.InteractiveToolBase.prototype,"editable",null);r.__decorate([p.property({readOnly:!0})],a.InteractiveToolBase.prototype,"attached",void 0);r.__decorate([p.property({readOnly:!0})],a.InteractiveToolBase.prototype,"created",void 0);r.__decorate([p.property({readOnly:!0})],a.InteractiveToolBase.prototype,"completed",void 0);r.__decorate([p.property({readOnly:!0})],
a.InteractiveToolBase.prototype,"manipulators",void 0);r.__decorate([p.property({constructOnly:!0})],a.InteractiveToolBase.prototype,"deferCreation",void 0);a.InteractiveToolBase=r.__decorate([k.subclass("esri.views.interactive.InteractiveToolBase")],a.InteractiveToolBase);Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/interactive/ManipulatorCollection":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../core/maybe","../../core/Collection"],function(a,g,r,
A){let v=function(){function t(){this._isToolEditable=!0;this._manipulators=new A;this._nextManipulatorId=0;this._resourceContexts={manipulator3D:{}};this._attached=!1}var p=t.prototype;p.add=function(b,k=0){return this.addMany([b],k)[0]};p.addMany=function(b,k=0){return b.map(n=>{const l=this._nextManipulatorId++;n={id:l,manipulator:n,visibilityPredicate:k,attached:!1};this._manipulators.add(n);this._attached&&this._updateManipulatorAttachment(n);return l})};p.remove=function(b){if("number"===typeof b){for(var k=
0;k<this._manipulators.length;k++)if(this._manipulators.getItemAt(k).id===b)return b=this._manipulators.splice(k,1)[0],this._detachManipulator(b),b.id;return null}for(k=0;k<this._manipulators.length;k++)if(this._manipulators.getItemAt(k).manipulator===b)return b=this._manipulators.splice(k,1)[0],this._detachManipulator(b),b.id;return null};p.removeAll=function(){this._manipulators.forEach(b=>{this._detachManipulator(b)});this._manipulators.removeAll()};p.attach=function(){this._manipulators.forEach(b=>
{this._updateManipulatorAttachment(b)});this._attached=!0};p.detach=function(){this._manipulators.forEach(b=>{this._detachManipulator(b)});this._attached=!1};p.destroy=function(){this._manipulators.forEach(({manipulator:b})=>{b.destroy&&b.destroy()});this._manipulators.destroy();this._resourceContexts=null};p.on=function(b,k){return this._manipulators.on(b,n=>{k(n)})};p.forEach=function(b){for(const k of this._manipulators.items)b(k)};p.some=function(b){return this._manipulators.items.some(b)};p.toArray=
function(){const b=[];this.forEach(k=>b.push(k.manipulator));return b};p.intersect=function(b,k){let n=null,l=Number.MAX_VALUE;this._manipulators.forEach(({id:q,manipulator:C,attached:w})=>{w&&C.interactive&&(w=C.intersectionDistance(b,k),r.isSome(w)&&w<l&&(l=w,n={id:q,manipulator:C}))});return n};p.findById=function(b){if(r.isNone(b))return null;for(const k of this._manipulators.items)if(b===k.id)return k.manipulator;return null};p._updateManipulatorAttachment=function(b){this._isManipulatorItemVisible(b)?
this._attachManipulator(b):this._detachManipulator(b)};p._attachManipulator=function(b){b.attached||(b.manipulator.attach&&b.manipulator.attach(this._resourceContexts),b.attached=!0)};p._detachManipulator=function(b){if(b.attached){var k=b.manipulator;k.grabbing=!1;k.dragging=!1;k.hovering=!1;k.selected=!1;k.detach&&k.detach(this._resourceContexts);b.attached=!1}};p._isManipulatorItemVisible=function(b){return 2===b.visibilityPredicate?!0:this._isToolEditable?0===b.visibilityPredicate:1===b.visibilityPredicate};
g._createClass(t,[{key:"isToolEditable",set:function(b){this._isToolEditable=b}},{key:"length",get:function(){return this._manipulators.length}}]);return t}();a.ManipulatorCollection=v;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/draw/PolygonDrawAction":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/maybe ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../geometry/Point ../../geometry ../../core/Handles ../input/InputManager ../support/screenUtils ./DrawAction ./input/DrawEvents ./input/Keys ./DrawingMode ../3d/interactive/editingTools/draw/DrawTool".split(" "),
function(a,g,r,A,v,t,p,b,k,n,l,q,C,w,x,c,m,f,e,d,h,F,E){a.PolygonDrawAction=function(u){function z(B){B=u.call(this,B)||this;B._cursorScreenPoint=null;B._panEnabled=!1;B._popVertexOnPointerMove=!1;B._addVertexOnPointerUp=!1;B._activePointerId=null;B._viewHandles=new c;B._undoRedoHandles=new c;B.mode=F.defaultDrawingMode;return B}g._inheritsLoose(z,u);var y=z.prototype;y.initialize=function(){"2d"===this.view.type?(this._addViewHandles(),this._addUndoRedoHandles()):this._addDrawTool(this.view)};y.destroy=
function(){"2d"===this.view.type?(this._removeViewHandles(),this._viewHandles.destroy(),this._removeUndoRedoHandles(),this._undoRedoHandles.destroy()):this._removeDrawTool();this.emit("destroy")};y.undo=function(){u.prototype.undo.call(this);this.notifyChange("vertices")};y.redo=function(){u.prototype.redo.call(this);this.notifyChange("vertices")};y.complete=function(){"2d"===this.view.type?this._completeDrawing():this._drawTool.completeCreateOperation()};y.getGeometryZValue=function(){return 0<this.vertices.length&&
2<this.vertices[0].length?this.vertices[0][2]:this._get("defaultZ")};y._addViewHandles=function(){this._removeViewHandles();this._viewHandles.add([this.view.on("click",B=>{B.stopPropagation()},m.ViewEventPriorities.TOOL),this.view.on("pointer-down",B=>{this._shouldHandlePointerEvent(B)&&(this._snappingTask=v.abortMaybe(this._snappingTask),this._activePointerId=B.pointerId,this._addVertexOnPointerUp=!0,this._cursorScreenPoint=f.createScreenPointFromEvent(B),"touch"===B.pointerType&&this._updateCursor(B.native))},
m.ViewEventPriorities.TOOL),this.view.on("pointer-move",B=>{this._snappingTask=v.abortMaybe(this._snappingTask);this._popVertexOnPointerMove&&(this.undo(),this._popVertexOnPointerMove=!1);this._cursorScreenPoint=f.createScreenPointFromEvent(B);"touch"!==B.pointerType&&this._updateCursor(B.native)},m.ViewEventPriorities.TOOL),this.view.on("pointer-drag",B=>{this._shouldHandlePointerEvent(B)&&(this._snappingTask=v.abortMaybe(this._snappingTask),this._cursorScreenPoint=f.createScreenPointFromEvent(B),
this._dragEnabled&&!this._panEnabled?this._vertexAddHandler(B):this._addVertexOnPointerUp=!1)},m.ViewEventPriorities.TOOL),this.view.on("pointer-up",B=>{this._shouldHandlePointerEvent(B)&&(this._snappingTask=v.abortMaybe(this._snappingTask),this._activePointerId=null,this._addVertexOnPointerUp?this._clickEnabled?this._vertexAddHandler(B):(1===this.vertices.length&&this.vertices.pop(),this._drawCompleteHandler(B)):this._updateCursor(B.native,"touch"===B.pointerType))},m.ViewEventPriorities.TOOL),this.view.on("drag",
B=>{this._dragEnabled&&v.isSome(this._activePointerId)&&!this._panEnabled&&B.stopPropagation()},m.ViewEventPriorities.TOOL),this.view.on("drag",["Shift"],B=>{B.stopPropagation()},m.ViewEventPriorities.TOOL),this.view.on("double-click",B=>{B.stopPropagation();this._drawCompleteHandler(B)},m.ViewEventPriorities.TOOL),this.view.on("double-click",["Control"],B=>{B.stopPropagation();this._drawCompleteHandler(B)},m.ViewEventPriorities.TOOL),this.view.on("key-down",B=>{const {key:H,repeat:D}=B;H===h.KEYS.vertexAddKey&&
!D&&this._cursorScreenPoint?(B.stopPropagation(),this._snappingTask=v.abortMaybe(this._snappingTask),this._vertexAddHandler(B)):H===h.KEYS.drawCompleteKey&&!D&&this._cursorScreenPoint&&2<this.vertices.length?(B.stopPropagation(),this._snappingTask=v.abortMaybe(this._snappingTask),this._vertexAddHandler(B),this._drawCompleteHandler(B)):H!==h.KEYS.undoKey||this.interactiveUndoDisabled||D?H!==h.KEYS.redoKey||this.interactiveUndoDisabled||D?H!==h.KEYS.panKey||D||(B.stopPropagation(),this._panEnabled=
!0):(B.stopPropagation(),this.redo()):(B.stopPropagation(),this.undo())},m.ViewEventPriorities.TOOL),this.view.on("key-up",B=>{B.key===h.KEYS.panKey&&(B.stopPropagation(),this._panEnabled=!1)},m.ViewEventPriorities.TOOL)])};y._addUndoRedoHandles=function(){this._removeUndoRedoHandles();this._undoRedoHandles.add([this._editGeometry.on("vertex-remove",B=>{this.notifyChange("vertices");if("undo"===B.operation){const H=this._nativeEventHistory.undoStack.pop();this._nativeEventHistory.redoStack.push(H);
const D=[...this._committedVertices];v.isSome(this._stagedVertex)&&D.push(this._coordinateHelper.pointToArray(this._stagedVertex));this.emit("undo",new d.VertexRemoveEvent(this.view,H,B.vertices[0].index,D))}}),this._editGeometry.on("vertex-add",B=>{this.notifyChange("vertices");if("apply"===B.operation)B=new d.VertexAddEvent(this.view,this._nativeEventHistory.undoStack[this._nativeEventHistory.undoStack.length],this._committedVertices.length-1,this.vertices),this.emit("vertex-add",B),B.defaultPrevented&&
(this._popVertexOnPointerMove=!0);else if("redo"===B.operation){const H=this._nativeEventHistory.redoStack.pop();this._nativeEventHistory.undoStack.push(H);const D=[...this._committedVertices];v.isSome(this._stagedVertex)&&D.push(this._coordinateHelper.pointToArray(this._stagedVertex));this.emit("redo",new d.VertexAddEvent(this.view,H,B.vertices[0].index,D))}})])};y._removeViewHandles=function(){this._viewHandles.removeAll()};y._removeUndoRedoHandles=function(){this._undoRedoHandles.removeAll()};
y._addDrawTool=function(B){this._drawTool=new E.DrawTool({view:B,elevationInfo:this.elevationInfo,hasZ:this.hasZ,geometryType:"polygon",mode:this.mode});this.view.toolViewManager.tools.push(this._drawTool);this.view.activeTool=this._drawTool;this._drawTool.on("vertex-add",H=>{1===H.vertices.length&&this.emit("vertex-add",new d.VertexAddEvent(this.view,null,H.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))});this._drawTool.on("cursor-update",H=>{1===H.vertices.length&&this.emit("cursor-update",
new d.CursorUpdateEvent(this.view,null,H.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))});this._drawTool.on("complete",H=>{this.emit("draw-complete",new d.DrawCompleteEvent(null,this._drawTool.getVertexCoords()));this._removeDrawTool()})};y._removeDrawTool=function(){v.isSome(this._drawTool)&&(this.view.tools.remove(this._drawTool),this._drawTool.destroy(),this._drawTool=null)};y._addVertex=function(B,H){B=this._coordinateHelper.fromArray(B);this._isDuplicateOfLastVertex(B)||(this._lastVertexUnsnapped=
this._stagedVertexUnsnapped,this._popCursorVertex(),this._editGeometry.appendVertex(B),H=H||new Event("placeholder"),this._nativeEventHistory.undoStack.push(H))};y._updateCursor=function(B,H=!1){this._popCursorVertex();if(this._cursorScreenPoint){var D=this.getCoordsAndPointFromScreenPoint(this._cursorScreenPoint);if(v.isSome(D)&&!H){this._pushCursorVertex(D.vertex);const M=()=>new d.CursorUpdateEvent(this.view,B,this._activeComponent.vertices.length,this.vertices,v.isSome(this._stagedVertex)?new w(this._stagedVertex):
null);this.emit("cursor-update",M());v.isSome(this._snappingTask)&&this._snappingTask.promise.then(U=>{U.valid&&this.emit("cursor-update",M())},()=>{})}}};y._completeDrawing=function(B){this._activePointerId=null;this._popCursorVertex();this._snappingTask=v.abortMaybe(this._snappingTask);v.isSome(this._snappingManager)&&this._snappingManager.doneSnapping();3>this.vertices.length||(B=new d.DrawCompleteEvent(B,this.vertices),this.emit("draw-complete",B),B.defaultPrevented||this._removeViewHandles())};
y._shouldHandlePointerEvent=function(B){return("mouse"!==B.pointerType||0===B.button)&&(v.isNone(this._activePointerId)||this._activePointerId===B.pointerId)};y._vertexAddHandler=function(B){const H=v.isSome(this._stagedVertex)?this._coordinateHelper.pointToArray(this._stagedVertex):this.getCoordsFromScreenPoint(this._cursorScreenPoint);v.isSome(H)&&this._addVertex(H,B.native)};y._drawCompleteHandler=function(B){this._completeDrawing(B.native)};g._createClass(z,[{key:"_dragEnabled",get:function(){return"freehand"===
this.mode||"hybrid"===this.mode}},{key:"_clickEnabled",get:function(){return"click"===this.mode||"hybrid"===this.mode}}]);return z}(e);r.__decorate([b.property()],a.PolygonDrawAction.prototype,"_dragEnabled",null);r.__decorate([b.property()],a.PolygonDrawAction.prototype,"_clickEnabled",null);r.__decorate([b.property({type:F.drawingModes})],a.PolygonDrawAction.prototype,"mode",void 0);a.PolygonDrawAction=r.__decorate([n.subclass("esri.views.draw.PolygonDrawAction")],a.PolygonDrawAction);Object.defineProperty(a,
"__esModule",{value:!0})})},"esri/views/draw/PolylineDrawAction":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/maybe ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../geometry/Point ../../geometry ../../core/Handles ../input/InputManager ../support/screenUtils ./DrawAction ./input/DrawEvents ./input/Keys ./DrawingMode ../3d/interactive/editingTools/draw/DrawTool".split(" "),
function(a,g,r,A,v,t,p,b,k,n,l,q,C,w,x,c,m,f,e,d,h,F,E){a.PolylineDrawAction=function(u){function z(B){B=u.call(this,B)||this;B._cursorScreenPoint=null;B._panEnabled=!1;B._popVertexOnPointerMove=!1;B._addVertexOnPointerUp=!1;B._activePointerId=null;B._viewHandles=new c;B._undoRedoHandles=new c;B.mode=F.defaultDrawingMode;return B}g._inheritsLoose(z,u);var y=z.prototype;y.initialize=function(){"2d"===this.view.type?(this._addViewHandles(),this._addUndoRedoHandles()):this._addDrawTool(this.view)};y.destroy=
function(){"2d"===this.view.type?(this._removeViewHandles(),this._viewHandles.destroy(),this._removeUndoRedoHandles(),this._undoRedoHandles.destroy()):this._removeDrawTool();this.emit("destroy")};y.undo=function(){u.prototype.undo.call(this);this.notifyChange("vertices")};y.redo=function(){u.prototype.redo.call(this);this.notifyChange("vertices")};y.complete=function(){"2d"===this.view.type?this._completeDrawing():this._drawTool.completeCreateOperation()};y._addViewHandles=function(){this._removeViewHandles();
this._viewHandles.add([this.view.on("click",B=>{B.stopPropagation()},m.ViewEventPriorities.TOOL),this.view.on("pointer-down",B=>{this._shouldHandlePointerEvent(B)&&!this._panEnabled&&(this._snappingTask=v.abortMaybe(this._snappingTask),this._activePointerId=B.pointerId,this._addVertexOnPointerUp=!0,this._cursorScreenPoint=f.createScreenPointFromEvent(B),"touch"===B.pointerType&&this._updateCursor(B.native))},m.ViewEventPriorities.TOOL),this.view.on("pointer-move",B=>{this._popVertexOnPointerMove&&
(this.undo(),this._popVertexOnPointerMove=!1);this._snappingTask=v.abortMaybe(this._snappingTask);this._cursorScreenPoint=f.createScreenPointFromEvent(B);"touch"!==B.pointerType&&this._updateCursor(B.native)},m.ViewEventPriorities.TOOL),this.view.on("pointer-drag",B=>{this._shouldHandlePointerEvent(B)&&(this._snappingTask=v.abortMaybe(this._snappingTask),this._cursorScreenPoint=f.createScreenPointFromEvent(B),this._dragEnabled&&!this._panEnabled?this._vertexAddHandler(B):this._addVertexOnPointerUp=
!1)},m.ViewEventPriorities.TOOL),this.view.on("pointer-up",B=>{this._shouldHandlePointerEvent(B)&&(this._snappingTask=v.abortMaybe(this._snappingTask),this._activePointerId=null,this._addVertexOnPointerUp?this._clickEnabled?this._vertexAddHandler(B):(1===this.vertices.length&&this.vertices.pop(),this._drawCompleteHandler(B)):this._updateCursor(B.native,"touch"===B.pointerType))},m.ViewEventPriorities.TOOL),this.view.on("drag",B=>{this._dragEnabled&&v.isSome(this._activePointerId)&&!this._panEnabled&&
B.stopPropagation()},m.ViewEventPriorities.TOOL),this.view.on("drag",["Shift"],B=>{B.stopPropagation()},m.ViewEventPriorities.TOOL),this.view.on("double-click",B=>{B.stopPropagation();this._drawCompleteHandler(B)},m.ViewEventPriorities.TOOL),this.view.on("double-click",["Control"],B=>{B.stopPropagation();this._drawCompleteHandler(B)},m.ViewEventPriorities.TOOL),this.view.on("key-down",B=>{const {key:H,repeat:D}=B;H===h.KEYS.vertexAddKey&&!D&&this._cursorScreenPoint?(B.stopPropagation(),this._snappingTask=
v.abortMaybe(this._snappingTask),this._vertexAddHandler(B)):H===h.KEYS.drawCompleteKey&&!D&&this._cursorScreenPoint&&1<this.vertices.length?(B.stopPropagation(),this._snappingTask=v.abortMaybe(this._snappingTask),this._vertexAddHandler(B),this._drawCompleteHandler(B)):H!==h.KEYS.undoKey||this.interactiveUndoDisabled||D?H!==h.KEYS.redoKey||this.interactiveUndoDisabled||D?H!==h.KEYS.panKey||D||(B.stopPropagation(),this._panEnabled=!0):(B.stopPropagation(),this.redo()):(B.stopPropagation(),this.undo())},
m.ViewEventPriorities.TOOL),this.view.on("key-up",B=>{B.key===h.KEYS.panKey&&(B.stopPropagation(),this._panEnabled=!1)},m.ViewEventPriorities.TOOL)])};y._addUndoRedoHandles=function(){this._removeUndoRedoHandles();this._undoRedoHandles.add([this._editGeometry.on("vertex-remove",B=>{this.notifyChange("vertices");if("undo"===B.operation){const H=this._nativeEventHistory.undoStack.pop();this._nativeEventHistory.redoStack.push(H);const D=[...this._committedVertices];v.isSome(this._stagedVertex)&&D.push(this._coordinateHelper.pointToArray(this._stagedVertex));
this.emit("undo",new d.VertexRemoveEvent(this.view,H,B.vertices[0].index,D))}}),this._editGeometry.on("vertex-add",B=>{this.notifyChange("vertices");if("apply"===B.operation)B=new d.VertexAddEvent(this.view,this._nativeEventHistory.undoStack[this._nativeEventHistory.undoStack.length],this._committedVertices.length-1,this.vertices),this.emit("vertex-add",B),B.defaultPrevented&&(this._popVertexOnPointerMove=!0);else if("redo"===B.operation){const H=this._nativeEventHistory.redoStack.pop();this._nativeEventHistory.undoStack.push(H);
const D=[...this._committedVertices];v.isSome(this._stagedVertex)&&D.push(this._coordinateHelper.pointToArray(this._stagedVertex));this.emit("redo",new d.VertexAddEvent(this.view,H,B.vertices[0].index,D))}})])};y._removeViewHandles=function(){this._viewHandles.removeAll()};y._removeUndoRedoHandles=function(){this._undoRedoHandles.removeAll()};y._addDrawTool=function(B){this._drawTool=new E.DrawTool({view:B,elevationInfo:this.elevationInfo,hasZ:this.hasZ,geometryType:"polyline",mode:this.mode});this.view.toolViewManager.tools.push(this._drawTool);
this.view.activeTool=this._drawTool;this._drawTool.on("vertex-add",H=>{1===H.vertices.length&&this.emit("vertex-add",new d.VertexAddEvent(this.view,null,H.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))});this._drawTool.on("cursor-update",H=>{1===H.vertices.length&&this.emit("cursor-update",new d.CursorUpdateEvent(this.view,null,H.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))});this._drawTool.on("complete",H=>{this.emit("draw-complete",new d.DrawCompleteEvent(null,this._drawTool.getVertexCoords()));
this._removeDrawTool()})};y._removeDrawTool=function(){v.isSome(this._drawTool)&&(this.view.tools.remove(this._drawTool),this._drawTool=v.destroyMaybe(this._drawTool))};y._addVertex=function(B,H){B=this._coordinateHelper.fromArray(B);this._isDuplicateOfLastVertex(B)||(this._lastVertexUnsnapped=this._stagedVertexUnsnapped,this._popCursorVertex(),this._editGeometry.appendVertex(B),H=H||new Event("placeholder"),this._nativeEventHistory.undoStack.push(H))};y._updateCursor=function(B,H=!1){this._popCursorVertex();
if(this._cursorScreenPoint){var D=this.getCoordsAndPointFromScreenPoint(this._cursorScreenPoint);if(v.isSome(D)&&!H){this._pushCursorVertex(D.vertex);const M=()=>new d.CursorUpdateEvent(this.view,B,this._activeComponent.vertices.length,this.vertices,v.isSome(this._stagedVertex)?new w(this._stagedVertex):null);this.emit("cursor-update",M());v.isSome(this._snappingTask)&&this._snappingTask.promise.then(U=>{U.valid&&this.emit("cursor-update",M())},()=>{})}}};y._completeDrawing=function(B){this._activePointerId=
null;this._popCursorVertex();this._snappingTask=v.abortMaybe(this._snappingTask);v.isSome(this._snappingManager)&&this._snappingManager.doneSnapping();2>this.vertices.length||(B=new d.DrawCompleteEvent(B,this.vertices),this.emit("draw-complete",B),B.defaultPrevented||this._removeViewHandles())};y._shouldHandlePointerEvent=function(B){return("mouse"!==B.pointerType||0===B.button)&&(v.isNone(this._activePointerId)||this._activePointerId===B.pointerId)};y._vertexAddHandler=function(B){const H=v.isSome(this._stagedVertex)?
this._coordinateHelper.pointToArray(this._stagedVertex):this.getCoordsFromScreenPoint(this._cursorScreenPoint);v.isSome(H)&&this._addVertex(H,B.native)};y._drawCompleteHandler=function(B){this._completeDrawing(B.native)};g._createClass(z,[{key:"_clickEnabled",get:function(){return"click"===this.mode||"hybrid"===this.mode}},{key:"_dragEnabled",get:function(){return"freehand"===this.mode||"hybrid"===this.mode}}]);return z}(e);r.__decorate([b.property()],a.PolylineDrawAction.prototype,"_clickEnabled",
null);r.__decorate([b.property()],a.PolylineDrawAction.prototype,"_dragEnabled",null);r.__decorate([b.property({type:F.drawingModes})],a.PolylineDrawAction.prototype,"mode",void 0);a.PolylineDrawAction=r.__decorate([n.subclass("esri.views.draw.PolylineDrawAction")],a.PolylineDrawAction);Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/draw/SegmentDrawAction":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/maybe ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../geometry/Point ../../geometry ../../core/Handles ../input/InputManager ../support/screenUtils ../interactive/editGeometry/EditGeometry ../interactive/editGeometry/EditGeometryHelper ./DrawAction ./input/DrawEvents ./input/Keys ../3d/interactive/editingTools/draw/DrawTool ./support/surfaceCoordinateSystems".split(" "),
function(a,g,r,A,v,t,p,b,k,n,l,q,C,w,x,c,m,f,e,d,h,F,E,u,z){a.SegmentDrawAction=function(y){function B(D){D=y.call(this,D)||this;D._isDragging=!1;D._panEnabled=!1;D._cursorScreenPoint=null;D._viewHandles=new c;D._activePointerId=null;D._addVertexOnPointerUp=!1;D.viewAlignedCoordinateSystem=null;D.mode="freehand";return D}g._inheritsLoose(B,y);var H=B.prototype;H.initialize=function(){"2d"===this.view.type?this._addViewHandles():this._addDrawTool(this.view)};H.destroy=function(){"2d"===this.view.type?
(this._removeViewHandles(),this._viewHandles.destroy()):this._removeDrawTool();this.emit("destroy")};H.complete=function(){"2d"===this.view.type?this._completeDrawing():this._drawTool.completeCreateOperation()};H.getGeometryZValue=function(){return 0<this.vertices.length&&2<this.vertices[0].length?this.vertices[0][2]:this._get("defaultZ")};H._addViewHandles=function(){this._removeViewHandles();"click"===this.mode?this._viewHandles.add(this._getClickModeViewHandles()):this._viewHandles.add(this._getDragModeViewHandles())};
H._getDragModeViewHandles=function(){return[this.view.on("immediate-click",D=>{D.stopPropagation();if(D.mapPoint&&!this._panEnabled){const M=this.getCoordsFromScreenPoint(f.createScreenPointFromEvent(D));v.isSome(M)&&(this._vertexAddHandler(D),this._drawCompleteHandler(D))}},m.ViewEventPriorities.TOOL),this.view.on("pointer-down",D=>{this._shouldHandlePointerEvent(D)&&(this._snappingTask=v.abortMaybe(this._snappingTask),this._panEnabled||(this._resetGeometry(),this._addVertexOnPointerUp=!0,this._cursorScreenPoint=
f.createScreenPointFromEvent(D),this._activePointerId=D.pointerId,this._vertexAddHandler(D),this._isDragging=!1,"touch"===D.pointerType&&this._updateCursor(D.native)))},m.ViewEventPriorities.TOOL),this.view.on("pointer-move",D=>{this._snappingTask=v.abortMaybe(this._snappingTask);v.isNone(this._activePointerId)&&"touch"!==D.pointerType&&(this._cursorScreenPoint=f.createScreenPointFromEvent(D),this._updateCursor(D.native))},m.ViewEventPriorities.TOOL),this.view.on("pointer-drag",D=>{this._shouldHandlePointerEvent(D)&&
(this._snappingTask=v.abortMaybe(this._snappingTask),this._isDragging=!0,this._cursorScreenPoint=f.createScreenPointFromEvent(D),this._updateCursor(D.native))},m.ViewEventPriorities.TOOL),this.view.on("pointer-up",D=>{this._shouldHandlePointerEvent(D)&&this._addVertexOnPointerUp&&(this._snappingTask=v.abortMaybe(this._snappingTask),this._activePointerId=null,this._isDragging&&this._vertexAddHandler(D),2===this._committedVertices.length&&this._drawCompleteHandler(D),this._isDragging=!1)},m.ViewEventPriorities.TOOL),
this.view.on("key-down",D=>{D.key===E.KEYS.drawCompleteKey&&this._cursorScreenPoint?(this._snappingTask=v.abortMaybe(this._snappingTask),this._drawCompleteHandler(D)):D.key===E.KEYS.panKey&&(this._panEnabled=!0)},m.ViewEventPriorities.TOOL),this.view.on("key-up",D=>{D.key===E.KEYS.panKey&&(this._panEnabled=!1)},m.ViewEventPriorities.TOOL),this.view.on("drag",D=>{v.isSome(this._activePointerId)&&D.stopPropagation()},m.ViewEventPriorities.TOOL),this.view.on("drag",["Shift"],D=>{D.stopPropagation()},
m.ViewEventPriorities.TOOL)]};H._getClickModeViewHandles=function(){return[this.view.on("pointer-down",D=>{this._snappingTask=v.abortMaybe(this._snappingTask);this._cursorScreenPoint=f.createScreenPointFromEvent(D);this._activePointerId=D.pointerId;this._isDragging=!1;"touch"===D.pointerType&&this._updateCursor(D.native)},m.ViewEventPriorities.TOOL),this.view.on("pointer-move",D=>{this._snappingTask=v.abortMaybe(this._snappingTask);this._cursorScreenPoint=f.createScreenPointFromEvent(D);v.isNone(this._activePointerId)&&
"touch"!==D.pointerType&&this._updateCursor(D.native)},m.ViewEventPriorities.TOOL),this.view.on("pointer-drag",D=>{this._shouldHandlePointerEvent(D)&&(this._snappingTask=v.abortMaybe(this._snappingTask),this._isDragging=!0)},m.ViewEventPriorities.TOOL),this.view.on("pointer-up",D=>{this._shouldHandlePointerEvent(D)&&(this._snappingTask=v.abortMaybe(this._snappingTask),this._activePointerId=null,D.stopPropagation(),this._isDragging||this._vertexAddHandler(D),2!==this.vertices.length||this._isDragging||
this._drawCompleteHandler(D),this._isDragging=!1)},m.ViewEventPriorities.TOOL),this.view.on("key-down",D=>{D.key===E.KEYS.vertexAddKey&&this._cursorScreenPoint&&(this._vertexAddHandler(D),2===this.vertices.length&&this._drawCompleteHandler(D));D.key===E.KEYS.drawCompleteKey&&this._cursorScreenPoint&&2===this.vertices.length&&this._drawCompleteHandler(D)},m.ViewEventPriorities.TOOL)]};H._removeViewHandles=function(){this._viewHandles.removeAll()};H._addDrawTool=function(D){this._drawTool=new u.DrawTool({view:D,
elevationInfo:this.elevationInfo,hasZ:this.hasZ,geometryType:"segment",mode:this.mode});this.view.toolViewManager.tools.push(this._drawTool);this.view.activeTool=this._drawTool;this._drawTool.on("vertex-add",M=>{1===M.vertices.length&&this.emit("vertex-add",new F.VertexAddEvent(this.view,null,M.vertices[0].vertexIndex,this._drawTool.getVertexCoords()))});this._drawTool.on("cursor-update",M=>{1===M.vertices.length&&this.emit("cursor-update",new F.CursorUpdateEvent(this.view,null,M.vertices[0].vertexIndex,
this._drawTool.getVertexCoords()))});this._drawTool.on("complete",M=>{this.emit("draw-complete",new F.DrawCompleteEvent(null,this._drawTool.getVertexCoords()));this._removeDrawTool()})};H._removeDrawTool=function(){v.isSome(this._drawTool)&&(this.view.tools.remove(this._drawTool),this._drawTool.destroy(),this._drawTool=null)};H._addVertex=function(D,M){D=this._coordinateHelper.fromArray(D);this._isDuplicateOfLastVertex(D)||(this._lastVertexUnsnapped=this._stagedVertexUnsnapped,this._popCursorVertex(),
this._editGeometry.appendVertex(D),1===this._committedVertices.length&&(this.viewAlignedCoordinateSystem=z.createViewAlignedCoordinateSystem(this.view,this._committedVertices[0])),M=new F.VertexAddEvent(this.view,M,this._committedVertices.length-1,this.vertices),this.emit("vertex-add",M))};H._updateCursor=function(D){this._popCursorVertex();if(this._cursorScreenPoint){var M=this.getCoordsAndPointFromScreenPoint(this._cursorScreenPoint);if(v.isSome(M)){this._pushCursorVertex(M.vertex);const U=()=>
new F.CursorUpdateEvent(this.view,D,this._activeComponent.vertices.length,this.vertices,v.isSome(this._stagedVertex)?new w(this._stagedVertex):null);this.emit("cursor-update",U());v.isSome(this._snappingTask)&&this._snappingTask.promise.then(R=>{R.valid&&this.emit("cursor-update",U())},()=>{})}}};H._completeDrawing=function(D){this._activePointerId=null;this._popCursorVertex();this._cursorScreenPoint=null;this._isDragging=!1;this._snappingTask=v.abortMaybe(this._snappingTask);v.isSome(this._snappingManager)&&
this._snappingManager.doneSnapping();1>this.vertices.length||(D=new F.DrawCompleteEvent(D,this.vertices),this.emit("draw-complete",D),D.defaultPrevented||this._removeViewHandles())};H._resetGeometry=function(){this._editGeometry.destroy();this._editGeometry=new d.EditGeometryHelper(new e.EditGeometry(this._coordinateHelper),"polygon");this._activeComponent=new e.Component(this._editGeometry.editGeometry);this._editGeometry.editGeometry.components.push(this._activeComponent)};H._shouldHandlePointerEvent=
function(D){return("mouse"!==D.pointerType||0===D.button)&&(v.isNone(this._activePointerId)||this._activePointerId===D.pointerId)};H._vertexAddHandler=function(D){const M=v.isSome(this._stagedVertex)?this._coordinateHelper.pointToArray(this._stagedVertex):this.getCoordsFromScreenPoint(this._cursorScreenPoint);v.isSome(M)&&this._addVertex(M,D.native)};H._drawCompleteHandler=function(D){this._completeDrawing(D.native)};return B}(h);r.__decorate([b.property({type:["freehand","click"]})],a.SegmentDrawAction.prototype,
"mode",void 0);a.SegmentDrawAction=r.__decorate([n.subclass("esri/views/2d/engine/markup/SegmentDrawAction")],a.SegmentDrawAction);Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/draw/support/surfaceCoordinateSystems":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/Point ../../../geometry ../../../chunks/vec3f64 ../../../chunks/vec3 ../../../chunks/quatf64 ../../../chunks/quat ../../../chunks/mat2d ../../../chunks/mat2df64".split(" "),
function(a,g,r,A,v,t,p,b,k,n,l){function q(c,m,f=null){return r.isSome(f)?[c,m,f]:[c,m]}function C(c,m,f=null){return r.isSome(f)?{x:c,y:m,z:f}:{x:c,y:m}}v=function(){function c(m){this.spatialReference=m}c.prototype.mapToLocalMultiple=function(m){return r.filterNones(m.map(f=>this.mapToLocal(f)))};g._createClass(c,[{key:"doUnnormalization",get:function(){return!1}}]);return c}();let w=function(c){function m(e,d,h=null){d=c.call(this,d)||this;d.defaultZ=h;d.transform=l.create();d.transformInv=l.create();
d.transform=l.clone(e);n.invert(d.transformInv,d.transform);return d}g._inheritsLoose(m,c);var f=m.prototype;f.makeMapPoint=function(e,d){return q(e,d,this.defaultZ)};f.mapToLocal=function(e){return C(this.transform[0]*e[0]+this.transform[2]*e[1]+this.transform[4],this.transform[1]*e[0]+this.transform[3]*e[1]+this.transform[5])};f.localToMap=function(e){return q(this.transformInv[0]*e.x+this.transformInv[2]*e.y+this.transformInv[4],this.transformInv[1]*e.x+this.transformInv[3]*e.y+this.transformInv[5],
this.defaultZ)};return m}(v),x=function(c){function m(e,d){var h=c.call(this,e.spatialReference)||this;h.view=e;h.defaultZ=null;h.pWS=t.create();h.tangentFrameUpWS=t.create();h.tangentFrameRightWS=t.create();h.tangentFrameForwardWS=t.create();h.localFrameRightWS=t.create();h.localFrameUpWS=t.create();h.worldToLocalTransform=b.create();h.localToWorldTransform=b.create();h.scale=1;h.scale=e.resolution;h.referenceMapPoint=d;h.defaultZ=d.hasZ?d.z:null;e=e.state.camera.viewRight;h.view.renderCoordsHelper.toRenderCoords(h.referenceMapPoint,
h.pWS);h.view.renderCoordsHelper.worldBasisAtPosition(h.pWS,0,h.tangentFrameRightWS);h.view.renderCoordsHelper.worldBasisAtPosition(h.pWS,1,h.tangentFrameUpWS);h.view.renderCoordsHelper.worldBasisAtPosition(h.pWS,2,h.tangentFrameForwardWS);d=t.create();p.scale(d,h.tangentFrameForwardWS,p.dot(e,h.tangentFrameForwardWS));p.subtract(h.localFrameRightWS,e,d);p.normalize(h.localFrameRightWS,h.localFrameRightWS);p.cross(h.localFrameUpWS,h.tangentFrameForwardWS,h.localFrameRightWS);k.rotationTo(h.worldToLocalTransform,
h.localFrameRightWS,h.tangentFrameRightWS);k.invert(h.localToWorldTransform,h.worldToLocalTransform);return h}g._inheritsLoose(m,c);var f=m.prototype;f.makeMapPoint=function(e,d){return q(e,d,this.defaultZ)};f.mapToLocal=function(e){const d=t.create();this.view.renderCoordsHelper.toRenderCoords(new A({x:e[0],y:e[1],spatialReference:this.spatialReference}),d);p.transformQuat(d,d,this.worldToLocalTransform);e=this.view.renderCoordsHelper.fromRenderCoords(d,this.view.spatialReference);return r.isSome(e)?
C(e.x/this.scale,e.y/this.scale):null};f.localToMap=function(e){const d=t.create();this.view.renderCoordsHelper.toRenderCoords(new A({x:e.x*this.scale,y:e.y*this.scale,spatialReference:this.spatialReference}),d);p.transformQuat(d,d,this.localToWorldTransform);e=this.view.renderCoordsHelper.fromRenderCoords(d,this.view.spatialReference);return r.isSome(e)?q(e.x,e.y,this.defaultZ):null};g._createClass(m,[{key:"doUnnormalization",get:function(){return"global"===this.view.viewingMode}}]);return m}(v);
a.AffineCoordinateSystem=w;a.SceneViewCoordinateSystem=x;a.SurfaceCoordinateSystem=v;a.createViewAlignedCoordinateSystem=function(c,m){return"2d"===c.type?new w(c.state.transform,c.spatialReference,2<m.length?m[2]:null):"3d"===c.type?(m=2<m.length?new A({x:m[0],y:m[1],z:m[2],spatialReference:c.spatialReference}):new A({x:m[0],y:m[1],spatialReference:c.spatialReference}),new x(c,m)):null};a.makeMapPoint=q;a.makeSurfacePoint=C;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/chunks/quat":function(){define("exports ./vec3f64 ./common ./vec3 ./mat3f64 ./quatf64 ./vec4".split(" "),
function(a,g,r,A,v,t,p){function b(P){P[0]=0;P[1]=0;P[2]=0;P[3]=1;return P}function k(P,S,Y){Y*=.5;const ta=Math.sin(Y);P[0]=ta*S[0];P[1]=ta*S[1];P[2]=ta*S[2];P[3]=Math.cos(Y);return P}function n(P,S){const Y=2*Math.acos(S[3]),ta=Math.sin(Y/2);ta>r.EPSILON?(P[0]=S[0]/ta,P[1]=S[1]/ta,P[2]=S[2]/ta):(P[0]=1,P[1]=0,P[2]=0);return Y}function l(P,S,Y){const ta=S[0],wa=S[1],G=S[2];S=S[3];const I=Y[0],ca=Y[1],ia=Y[2];Y=Y[3];P[0]=ta*Y+S*I+wa*ia-G*ca;P[1]=wa*Y+S*ca+G*I-ta*ia;P[2]=G*Y+S*ia+ta*ca-wa*I;P[3]=S*
Y-ta*I-wa*ca-G*ia;return P}function q(P,S,Y){Y*=.5;const ta=S[0],wa=S[1],G=S[2];S=S[3];const I=Math.sin(Y);Y=Math.cos(Y);P[0]=ta*Y+S*I;P[1]=wa*Y+G*I;P[2]=G*Y-wa*I;P[3]=S*Y-ta*I;return P}function C(P,S,Y){Y*=.5;const ta=S[0],wa=S[1],G=S[2];S=S[3];const I=Math.sin(Y);Y=Math.cos(Y);P[0]=ta*Y-G*I;P[1]=wa*Y+S*I;P[2]=G*Y+ta*I;P[3]=S*Y-wa*I;return P}function w(P,S,Y){Y*=.5;const ta=S[0],wa=S[1],G=S[2];S=S[3];const I=Math.sin(Y);Y=Math.cos(Y);P[0]=ta*Y+wa*I;P[1]=wa*Y-ta*I;P[2]=G*Y+S*I;P[3]=S*Y-G*I;return P}
function x(P,S){const Y=S[0],ta=S[1];S=S[2];P[0]=Y;P[1]=ta;P[2]=S;P[3]=Math.sqrt(Math.abs(1-Y*Y-ta*ta-S*S));return P}function c(P,S,Y,ta){const wa=S[0],G=S[1],I=S[2];S=S[3];let ca=Y[0],ia=Y[1],ja=Y[2];Y=Y[3];let la;let da;var ka=wa*ca+G*ia+I*ja+S*Y;0>ka&&(ka=-ka,ca=-ca,ia=-ia,ja=-ja,Y=-Y);1-ka>r.EPSILON?(la=Math.acos(ka),da=Math.sin(la),ka=Math.sin((1-ta)*la)/da,ta=Math.sin(ta*la)/da):ka=1-ta;P[0]=ka*wa+ta*ca;P[1]=ka*G+ta*ia;P[2]=ka*I+ta*ja;P[3]=ka*S+ta*Y;return P}function m(P){var S=r.RANDOM();const Y=
r.RANDOM(),ta=r.RANDOM(),wa=Math.sqrt(1-S);S=Math.sqrt(S);P[0]=wa*Math.sin(2*Math.PI*Y);P[1]=wa*Math.cos(2*Math.PI*Y);P[2]=S*Math.sin(2*Math.PI*ta);P[3]=S*Math.cos(2*Math.PI*ta);return P}function f(P,S){const Y=S[0],ta=S[1],wa=S[2];S=S[3];var G=Y*Y+ta*ta+wa*wa+S*S;G=G?1/G:0;P[0]=-Y*G;P[1]=-ta*G;P[2]=-wa*G;P[3]=S*G;return P}function e(P,S){P[0]=-S[0];P[1]=-S[1];P[2]=-S[2];P[3]=S[3];return P}function d(P,S){var Y=S[0]+S[4]+S[8];if(0<Y)Y=Math.sqrt(Y+1),P[3]=.5*Y,Y=.5/Y,P[0]=(S[5]-S[7])*Y,P[1]=(S[6]-
S[2])*Y,P[2]=(S[1]-S[3])*Y;else{let ta=0;S[4]>S[0]&&(ta=1);S[8]>S[3*ta+ta]&&(ta=2);const wa=(ta+1)%3,G=(ta+2)%3;Y=Math.sqrt(S[3*ta+ta]-S[3*wa+wa]-S[3*G+G]+1);P[ta]=.5*Y;Y=.5/Y;P[3]=(S[3*wa+G]-S[3*G+wa])*Y;P[wa]=(S[3*wa+ta]+S[3*ta+wa])*Y;P[G]=(S[3*G+ta]+S[3*ta+G])*Y}return P}function h(P,S,Y,ta){var wa=.5*Math.PI/180;S*=wa;Y*=wa;ta*=wa;wa=Math.sin(S);S=Math.cos(S);const G=Math.sin(Y);Y=Math.cos(Y);const I=Math.sin(ta);ta=Math.cos(ta);P[0]=wa*Y*ta-S*G*I;P[1]=S*G*ta+wa*Y*I;P[2]=S*Y*I-wa*G*ta;P[3]=S*
Y*ta+wa*G*I;return P}function F(P){return"quat("+P[0]+", "+P[1]+", "+P[2]+", "+P[3]+")"}function E(P,S,Y){const ta=A.dot(S,Y);if(-.999999>ta)return A.cross(V,T,S),1E-6>A.len(V)&&A.cross(V,W,S),A.normalize(V,V),k(P,V,Math.PI),P;if(.999999<ta)return P[0]=0,P[1]=0,P[2]=0,P[3]=1,P;A.cross(V,S,Y);P[0]=V[0];P[1]=V[1];P[2]=V[2];P[3]=1+ta;return L(P,P)}function u(P,S,Y,ta,wa,G){c(Q,S,wa,G);c(Z,Y,ta,G);c(P,Q,Z,2*G*(1-G));return P}function z(P,S,Y,ta){const wa=O;wa[0]=Y[0];wa[3]=Y[1];wa[6]=Y[2];wa[1]=ta[0];
wa[4]=ta[1];wa[7]=ta[2];wa[2]=-S[0];wa[5]=-S[1];wa[8]=-S[2];return L(P,d(P,wa))}const y=p.copy,B=p.set,H=p.add,D=p.scale,M=p.dot,U=p.lerp,R=p.length,J=p.squaredLength,L=p.normalize,N=p.exactEquals;p=p.equals;const V=g.create(),T=g.fromValues(1,0,0),W=g.fromValues(0,1,0),Q=t.create(),Z=t.create(),O=v.create();g=Object.freeze({__proto__:null,identity:b,setAxisAngle:k,getAxisAngle:n,multiply:l,rotateX:q,rotateY:C,rotateZ:w,calculateW:x,slerp:c,random:m,invert:f,conjugate:e,fromMat3:d,fromEuler:h,str:F,
copy:y,set:B,add:H,mul:l,scale:D,dot:M,lerp:U,length:R,len:R,squaredLength:J,sqrLen:J,normalize:L,exactEquals:N,equals:p,rotationTo:E,sqlerp:u,setAxes:z});a.add=H;a.calculateW=x;a.conjugate=e;a.copy=y;a.dot=M;a.equals=p;a.exactEquals=N;a.fromEuler=h;a.fromMat3=d;a.getAxisAngle=n;a.identity=b;a.invert=f;a.len=R;a.length=R;a.lerp=U;a.mul=l;a.multiply=l;a.normalize=L;a.quat=g;a.random=m;a.rotateX=q;a.rotateY=C;a.rotateZ=w;a.rotationTo=E;a.scale=D;a.set=B;a.setAxes=z;a.setAxisAngle=k;a.slerp=c;a.sqlerp=
u;a.sqrLen=J;a.squaredLength=J;a.str=F})},"esri/chunks/mat2d":function(){define(["exports","./common"],function(a,g){function r(u,z){u[0]=z[0];u[1]=z[1];u[2]=z[2];u[3]=z[3];u[4]=z[4];u[5]=z[5];return u}function A(u){u[0]=1;u[1]=0;u[2]=0;u[3]=1;u[4]=0;u[5]=0;return u}function v(u,z,y,B,H,D,M){u[0]=z;u[1]=y;u[2]=B;u[3]=H;u[4]=D;u[5]=M;return u}function t(u,z){const y=z[0],B=z[1],H=z[2],D=z[3],M=z[4];z=z[5];let U=y*D-B*H;if(!U)return null;U=1/U;u[0]=D*U;u[1]=-B*U;u[2]=-H*U;u[3]=y*U;u[4]=(H*z-D*M)*U;
u[5]=(B*M-y*z)*U;return u}function p(u){return u[0]*u[3]-u[1]*u[2]}function b(u,z,y){const B=z[0],H=z[1],D=z[2],M=z[3],U=z[4];z=z[5];const R=y[0],J=y[1],L=y[2],N=y[3],V=y[4];y=y[5];u[0]=B*R+D*J;u[1]=H*R+M*J;u[2]=B*L+D*N;u[3]=H*L+M*N;u[4]=B*V+D*y+U;u[5]=H*V+M*y+z;return u}function k(u,z,y){const B=z[0],H=z[1],D=z[2],M=z[3],U=z[4];z=z[5];const R=Math.sin(y);y=Math.cos(y);u[0]=B*y+D*R;u[1]=H*y+M*R;u[2]=B*-R+D*y;u[3]=H*-R+M*y;u[4]=U;u[5]=z;return u}function n(u,z,y){const B=z[1],H=z[2],D=z[3],M=z[4],
U=z[5],R=y[0];y=y[1];u[0]=z[0]*R;u[1]=B*R;u[2]=H*y;u[3]=D*y;u[4]=M;u[5]=U;return u}function l(u,z,y){const B=z[0],H=z[1],D=z[2],M=z[3],U=z[4];z=z[5];const R=y[0];y=y[1];u[0]=B;u[1]=H;u[2]=D;u[3]=M;u[4]=B*R+D*y+U;u[5]=H*R+M*y+z;return u}function q(u,z){const y=Math.sin(z);z=Math.cos(z);u[0]=z;u[1]=y;u[2]=-y;u[3]=z;u[4]=0;u[5]=0;return u}function C(u,z){u[0]=z[0];u[1]=0;u[2]=0;u[3]=z[1];u[4]=0;u[5]=0;return u}function w(u,z){u[0]=1;u[1]=0;u[2]=0;u[3]=1;u[4]=z[0];u[5]=z[1];return u}function x(u){return"mat2d("+
u[0]+", "+u[1]+", "+u[2]+", "+u[3]+", "+u[4]+", "+u[5]+")"}function c(u){return Math.sqrt(u[0]**2+u[1]**2+u[2]**2+u[3]**2+u[4]**2+u[5]**2+1)}function m(u,z,y){u[0]=z[0]+y[0];u[1]=z[1]+y[1];u[2]=z[2]+y[2];u[3]=z[3]+y[3];u[4]=z[4]+y[4];u[5]=z[5]+y[5];return u}function f(u,z,y){u[0]=z[0]-y[0];u[1]=z[1]-y[1];u[2]=z[2]-y[2];u[3]=z[3]-y[3];u[4]=z[4]-y[4];u[5]=z[5]-y[5];return u}function e(u,z,y){u[0]=z[0]*y;u[1]=z[1]*y;u[2]=z[2]*y;u[3]=z[3]*y;u[4]=z[4]*y;u[5]=z[5]*y;return u}function d(u,z,y,B){u[0]=z[0]+
y[0]*B;u[1]=z[1]+y[1]*B;u[2]=z[2]+y[2]*B;u[3]=z[3]+y[3]*B;u[4]=z[4]+y[4]*B;u[5]=z[5]+y[5]*B;return u}function h(u,z){return u[0]===z[0]&&u[1]===z[1]&&u[2]===z[2]&&u[3]===z[3]&&u[4]===z[4]&&u[5]===z[5]}function F(u,z){const y=u[0],B=u[1],H=u[2],D=u[3],M=u[4];u=u[5];const U=z[0],R=z[1],J=z[2],L=z[3],N=z[4];z=z[5];return Math.abs(y-U)<=g.EPSILON*Math.max(1,Math.abs(y),Math.abs(U))&&Math.abs(B-R)<=g.EPSILON*Math.max(1,Math.abs(B),Math.abs(R))&&Math.abs(H-J)<=g.EPSILON*Math.max(1,Math.abs(H),Math.abs(J))&&
Math.abs(D-L)<=g.EPSILON*Math.max(1,Math.abs(D),Math.abs(L))&&Math.abs(M-N)<=g.EPSILON*Math.max(1,Math.abs(M),Math.abs(N))&&Math.abs(u-z)<=g.EPSILON*Math.max(1,Math.abs(u),Math.abs(z))}var E=Object.freeze({__proto__:null,copy:r,identity:A,set:v,invert:t,determinant:p,multiply:b,rotate:k,scale:n,translate:l,fromRotation:q,fromScaling:C,fromTranslation:w,str:x,frob:c,add:m,subtract:f,multiplyScalar:e,multiplyScalarAndAdd:d,exactEquals:h,equals:F,mul:b,sub:f});a.add=m;a.copy=r;a.determinant=p;a.equals=
F;a.exactEquals=h;a.frob=c;a.fromRotation=q;a.fromScaling=C;a.fromTranslation=w;a.identity=A;a.invert=t;a.mat2d=E;a.mul=b;a.multiply=b;a.multiplyScalar=e;a.multiplyScalarAndAdd=d;a.rotate=k;a.scale=n;a.set=v;a.str=x;a.sub=f;a.subtract=f;a.translate=l})},"esri/chunks/mat2df64":function(){define(["exports"],function(a){function g(){return[1,0,0,1,0,0]}function r(p){return[p[0],p[1],p[2],p[3],p[4],p[5]]}function A(p,b,k,n,l,q){return[p,b,k,n,l,q]}function v(p,b){return new Float64Array(p,b,6)}var t=
Object.freeze({__proto__:null,create:g,clone:r,fromValues:A,createView:v});a.clone=r;a.create=g;a.createView=v;a.fromValues=A;a.mat2df64=t})},"esri/views/3d/interactive/editingTools/isSupportedGraphicUtils":function(){define(["exports","../../../../core/has"],function(a,g){a.isSupportedGraphicResultMessage=function(r){switch(r){case 1:return"not owned by a graphics layer";case 2:return"no geometry";case 3:return"the geometry type is not supported";case 4:return"the elevation mode is not supported";
case 5:return"the symbol type is not supported"}return""};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/interactive/editingTools/moveGraphic/isSupportedGraphic":function(){define(["exports","../../../../../core/has","../../../../../core/maybe","../../../../../support/elevationInfoUtils"],function(a,g,r,A){a.isSupportedGraphic=function(v){var t;if("graphics"!==(null==(t=v.layer)?void 0:t.type))return 1;if(r.isNone(v.geometry))return 2;switch(v.geometry.type){case "polygon":case "point":case "polyline":break;
case "multipoint":case "extent":case "mesh":return 3;default:return 3}return"on-the-ground"!==A.getGraphicEffectiveElevationMode(v)&&A.hasGraphicFeatureExpressionInfo(v)?4:0};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/interactive/editingTools/reshapeGraphic/isSupportedGraphic":function(){define(["exports","../../../../../core/has","../../../../../core/maybe","../../../../../geometry/Circle","../../../../../support/elevationInfoUtils"],function(a,g,r,A,v){a.isSupportedGraphic=
function(t){var p;if("graphics"!==(null==(p=t.layer)?void 0:p.type))return 1;p=t.geometry;if(r.isNone(p))return 2;switch(p.type){case "polygon":if(p instanceof A)return 3;break;case "polyline":break;case "point":case "multipoint":case "extent":case "mesh":return 3;default:return 3}return"on-the-ground"!==v.getGraphicEffectiveElevationMode(t)&&v.hasGraphicFeatureExpressionInfo(t)?4:0};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/geometry/Circle":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ./support/WKIDUnitConversion ./support/webMercatorUtils ./Point ./Polygon ./projectionEllipsoid ../core/unitUtils ./support/geodesicUtils".split(" "),
function(a,g,r,A,v,t,p,b,k,n,l,q,C,w,x,c,m,f){var e;r=e=function(d){function h(...E){E=d.call(this,...E)||this;E.center=null;E.geodesic=!1;E.numberOfPoints=60;E.radius=1E3;E.radiusUnit="meters";return E}a._inheritsLoose(h,d);var F=h.prototype;F.normalizeCtorArgs=function(E,u){if(!E||!E.center){if(E&&E.rings)return d.prototype.normalizeCtorArgs.call(this,E,u);E={center:E}}return{...d.prototype.normalizeCtorArgs.call(this),...E,...u}};F.initialize=function(){var E=this.center;const u=this.numberOfPoints;
this.hasZ=E&&E.hasZ;if(0===this.rings.length&&E){var z=m.convertUnit(this.radius,this.radiusUnit,"meters"),y=E.spatialReference,B="geographic";if(y.isWebMercator)B="webMercator";else if(null!=q[y.wkid]||y.wkt&&0===y.wkt.indexOf("PROJCS"))B="projected";if(this.geodesic){let H;switch(B){case "webMercator":H=C.webMercatorToGeographic(E);break;case "projected":console.error("Creating a geodesic circle requires the center to be specified in web mercator or geographic coordinate system");break;case "geographic":H=
E}E=this._createGeodesicCircle(H,z,u);"webMercator"===B&&(E=C.geographicToWebMercator(E))}else{let H;"webMercator"===B||"projected"===B?H=z/this._convert2Meters(1,E.spatialReference):"geographic"===B&&(H=m.lengthToDegrees(z,"meters",c.getReferenceEllipsoid(E.spatialReference).radius));E=this._createPlanarCircle(E,H,u)}this.spatialReference=E.spatialReference;this.addRing(E.rings[0])}};F.clone=function(){const {center:E,numberOfPoints:u,radius:z,radiusUnit:y,geodesic:B}=this;return new e({center:E.clone(),
numberOfPoints:u,radius:z,radiusUnit:y,geodesic:B})};F._createGeodesicCircle=function(E,u,z){let y=0;const B=[];for(;360>y;){const H=[0,0];f.directGeodeticSolver(H,[E.x,E.y],y,u);this.hasZ&&H.push(E.z);B.push(H);y+=360/z}B.push(B[0]);return new x(B)};F._createPlanarCircle=function(E,u,z){let y=0;const B=[];for(;y<2*Math.PI;){const H=[E.x+Math.cos(-y)*u,E.y+Math.sin(-y)*u];this.hasZ&&H.push(E.z);B.push(H);y+=Math.PI/(z/2)}B.push(B[0]);return new x({spatialReference:E.spatialReference,rings:[B]})};
F._convert2Meters=function(E,u){if(null!=q[u.wkid])u=q.values[q[u.wkid]];else{u=u.wkt;const z=u.lastIndexOf(",")+1,y=u.lastIndexOf("]]");u=parseFloat(u.substring(z,y))}return E*u};return h}(x);g.__decorate([t.property({type:w})],r.prototype,"center",void 0);g.__decorate([t.property()],r.prototype,"geodesic",void 0);g.__decorate([t.property()],r.prototype,"numberOfPoints",void 0);g.__decorate([t.property()],r.prototype,"radius",void 0);g.__decorate([t.property()],r.prototype,"radiusUnit",void 0);return r=
e=g.__decorate([b.subclass("esri.geometry.Circle")],r)})},"esri/geometry/support/geodesicUtils":function(){define("exports ../../core/Error ../SpatialReference ../Point ../Polygon ../Polyline ../../geometry ../../core/unitUtils ./geodesicConstants".split(" "),function(a,g,r,A,v,t,p,b,k){function n(m){if(!m)return null;if(m.isGeographic&&m.wkid){var f=k.spheroids[m.wkid];if(f)return f}if(m.wkt){m=k.WKT_SPHEROID_REGEX.exec(m.wkt);if(!m||2!==m.length)return null;f=m[1].split(",");if(!f||3>f.length)return null;
m=parseFloat(f[1]);f=parseFloat(f[2]);return isNaN(m)||isNaN(f)?null:{a:m,f:0===f?0:1/f}}return null}function l(m){m=n(m||r.WGS84);if("b"in m&&"eSq"in m&&"radius"in m)return m;const f=m.a*(1-m.f);return Object.assign(m,{b:f,eSq:1-(f/m.a)**2,radius:(2*m.a+f)/3,densificationRatio:1E4/((2*m.a+f)/3)})}function q(m,f,e){const {a:d,eSq:h}=l(e);e=Math.sqrt(h);const F=Math.sin(f[1]*k.toRadians);f=d*f[0]*k.toRadians;e=0<h?d*(1-h)*(F/(1-h*F*F)-1/(2*e)*Math.log((1-e*F)/(1+e*F)))*.5:d*F;m[0]=f;m[1]=e;return m}
function C(m){return null!==n(m)}function w(m,f){if("polyline"!==m.type&&"polygon"!==m.type)throw new g("geodesic-densify:invalid-geometry","the input geometry is neither polyline nor polygon");const {spatialReference:e}=m;if(!C(e))throw new g("geodesic-densify:invalid-spatial-reference","the input geometry spatial reference is not supported");var d="polyline"===m.type?m.paths:m.rings;const h=[],F=[0,0],E={distance:null};for(const y of d){d=[];h.push(d);d.push([y[0][0],y[0][1]]);var u=y[0][0],z=y[0][1];
let B,H;for(let D=0;D<y.length-1;D++){B=y[D+1][0];H=y[D+1][1];if(u===B&&z===H)continue;const M=[u,z];c(E,[u,z],[B,H],e);const {azimuth:U,distance:R}=E;u=R/f;if(1<u){for(z=1;z<=u-1;z++)x(F,M,U,z*f,e),d.push(F.slice(0));x(F,M,U,(R+Math.floor(u-1)*f)/2,e);d.push(F.slice(0))}x(F,M,U,R,e);d.push(F.slice(0));u=F[0];z=F[1]}}return"polyline"===m.type?new t({paths:h,spatialReference:e}):new v({rings:h,spatialReference:e})}function x(m,f,e,d,h){const F=f[0]*k.toRadians;f=f[1]*k.toRadians;e*=k.toRadians;const {a:E,
b:u,f:z}=l(h);h=Math.sin(e);e=Math.cos(e);var y=(1-z)*Math.tan(f);f=1/Math.sqrt(1+y*y);const B=y*f,H=Math.atan2(y,e);y=f*h;const D=y*y;var M=1-D,U=M*(E*E-u*u)/(u*u);const R=1+U/16384*(4096+U*(-768+U*(320-175*U))),J=U/1024*(256+U*(-128+U*(74-47*U)));U=d/(u*R);let L=2*Math.PI,N,V,T,W;for(;1E-12<Math.abs(U-L);)T=Math.cos(2*H+U),N=Math.sin(U),V=Math.cos(U),W=J*N*(T+J/4*(V*(-1+2*T*T)-J/6*T*(-3+4*N*N)*(-3+4*T*T))),L=U,U=d/(u*R)+W;d=B*N-f*V*e;M=z/16*M*(4+z*(4-3*M));d=Math.atan2(B*V+f*N*e,(1-z)*Math.sqrt(D+
d*d))/k.toRadians;m[0]=(F+(Math.atan2(N*h,f*V-B*N*e)-(1-M)*z*y*(U+M*N*(T+M*V*(-1+2*T*T)))))/k.toRadians;m[1]=d;return m}function c(m,f,e,d){var h=f[0]*k.toRadians;f=f[1]*k.toRadians;var F=e[0]*k.toRadians;e=e[1]*k.toRadians;const {a:E,b:u,f:z,radius:y}=l(d),B=F-h;var H=Math.atan((1-z)*Math.tan(f)),D=Math.atan((1-z)*Math.tan(e));d=Math.sin(H);H=Math.cos(H);const M=Math.sin(D);D=Math.cos(D);let U=1E3,R=B,J,L,N;let V,T,W;do{var Q=Math.sin(R);var Z=Math.cos(R);N=Math.sqrt(D*Q*D*Q+(H*M-d*D*Z)*(H*M-d*D*
Z));if(0===N)return m.distance=0,m.azimuth=void 0,m.reverseAzimuth=void 0,m;Z=d*M+H*D*Z;V=Math.atan2(N,Z);T=H*D*Q/N;L=1-T*T;Q=Z-2*d*M/L;isNaN(Q)&&(Q=0);W=z/16*L*(4+z*(4-3*L));J=R;R=B+(1-W)*z*T*(V+W*N*(Q+W*Z*(-1+2*Q*Q)))}while(1E-12<Math.abs(R-J)&&0<--U);if(0===U)return d=Math.acos(Math.sin(f)*Math.sin(e)+Math.cos(f)*Math.cos(e)*Math.cos(F-h))*y,h=F-h,m.azimuth=Math.atan2(Math.sin(h)*Math.cos(e),Math.cos(f)*Math.sin(e)-Math.sin(f)*Math.cos(e)*Math.cos(h))/k.toRadians,m.distance=d,m.reverseAzimuth=
void 0,m;h=L*(E*E-u*u)/(u*u);f=h/1024*(256+h*(-128+h*(74-47*h)));F=Math.atan2(H*Math.sin(R),H*M*Math.cos(R)-d*D);m.azimuth=Math.atan2(D*Math.sin(R),H*M-d*D*Math.cos(R))/k.toRadians;m.distance=u*(1+h/16384*(4096+h*(-768+h*(320-175*h))))*(V-f*N*(Q+f/4*(Z*(-1+2*Q*Q)-f/6*Q*(-3+4*N*N)*(-3+4*Q*Q))));m.reverseAzimuth=F/k.toRadians;return m}a.directGeodeticSolver=x;a.geodesicAreas=function(m,f="square-meters"){if(m.some(F=>!C(F.spatialReference)))throw new g("geodesic-areas:invalid-spatial-reference","the input geometries spatial reference is not supported");
const e=[];for(var d=0;d<m.length;d++){var h=m[d];const {radius:F,densificationRatio:E}=l(h.spatialReference);e.push(w(h,F*E))}m=[];d=[0,0];h=[0,0];for(let F=0;F<e.length;F++){const {rings:E,spatialReference:u}=e[F];let z=0;for(let y=0;y<E.length;y++){const B=E[y];q(d,B[0],u);q(h,B[B.length-1],u);let H=h[0]*d[1]-d[0]*h[1];for(let D=0;D<B.length-1;D++)q(d,B[D+1],u),q(h,B[D],u),H+=h[0]*d[1]-d[0]*h[1];z+=H}z=b.convertUnit(z,"square-meters",f);m.push(z/-2)}return m};a.geodesicDensify=w;a.geodesicDistance=
function(m,f,e="meters"){if(!m||!f)throw new g("geodesic-distance:missing-parameters","one or both input parameters are missing");if(!m.spatialReference||!f.spatialReference)throw new g("geodesic-distance:invalid-parameters","one or both input points do not have a spatial reference");if(!m.spatialReference.equals(f.spatialReference))throw new g("geodesic-distance:invalid-parameters","spatial references of input parameters do not match");const {spatialReference:d}=m;if(!C(d))throw new g("geodesic-distance:not-supported",
"input geometry spatial reference is not supported");if(m.equals(f))return{distance:0,azimuth:0,reverseAzimuth:0};const h={distance:null};c(h,[m.x,m.y],[f.x,f.y],d);h.distance=b.convertUnit(h.distance,"meters",e);return h};a.geodesicLengths=function(m,f="meters"){if(!m&&!m)throw new g("geodesic-lengths:invalid-geometries","the input geometries type is not supported");if(m.some(h=>!C(h.spatialReference)))throw new g("geodesic-lengths:invalid-spatial-reference","the input geometries spatial reference is not supported");
const e=[];for(let h=0;h<m.length;h++){var d=m[h];const {spatialReference:F}=d;d="polyline"===d.type?d.paths:d.rings;let E=0;for(let u=0;u<d.length;u++){const z=d[u];let y=0;for(let B=1;B<z.length;B++){const H=z[B-1][0],D=z[B][0],M=z[B-1][1],U=z[B][1];if(M!==U||H!==D){const R={distance:null};c(R,[H,M],[D,U],F);y+=R.distance}}E+=y}E=b.convertUnit(E,"meters",f);e.push(E)}return e};a.inverseGeodeticSolver=c;a.isSupported=C;a.pointFromDistance=function(m,f,e){if(!m||null==f||null==e)throw new g("point-from-distance:missing-parameters",
"one or more input parameters are missing or undefined");if(0>e||360<e)throw new g("point-from-distance:-of-bounds","azimuth is restricted to angles between, and including, 0\u00b0 to 360\u00b0 degrees");if(!m.spatialReference)throw new g("point-from-distance:missing-spatial-reference","the input point must have a spatial reference");const {spatialReference:d}=m;if(!C(d))throw new g("geodesic-distance:not-supported","input geometry spatial reference is not supported");const h=[0,0];x(h,[m.x,m.y],
e,f,d);return new A({x:h[0],y:h[1],spatialReference:d})};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/3d/interactive/editingTools/transformGraphic/isSupportedGraphic":function(){define(["exports","../../../../../core/has","../../../../../core/maybe","../../../../../support/elevationInfoUtils"],function(a,g,r,A){a.isSupportedGraphic=function(v){var t;if("graphics"!==(null==(t=v.layer)?void 0:t.type))return 1;if(r.isNone(v.geometry))return 2;switch(v.geometry.type){case "point":break;
case "polygon":case "polyline":return 0;case "multipoint":case "extent":case "mesh":return 3;default:return 3}return(t=r.isSome(v.symbol)&&"point-3d"===v.symbol.type&&v.symbol.symbolLayers)&&0<t.length&&t.some(p=>"object"===p.type)?"on-the-ground"!==A.getGraphicEffectiveElevationMode(v)&&A.hasGraphicFeatureExpressionInfo(v)?4:0:5};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/draw/support/createUtilsAsync":function(){define(["require","exports"],function(a,g){let r=null;g.loadCreateUtils=
async function(){r||(r=await new Promise(function(A,v){a(["./createUtils"],A,v)}));return r};Object.defineProperty(g,"__esModule",{value:!0})})},"esri/views/draw/support/layerUtils":function(){define(["exports"],function(a){a.addUniqueLayer=function(g,r){r&&g&&g.map&&({map:g}=g,g.layers.find(A=>A===r)||g.add(r))};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/interactive/snapping/SnappingManager":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/maybe ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../../core/promiseUtils ../../../core/accessorSupport/trackingUtils ../../../geometry/SpatialReference ../../../geometry/Point ../../../core/Evented ../../../core/watchUtils ../../../core/HandleOwner ../../../chunks/vec2 ./snappingUtils ./SnappingOptions ./FeatureSnappingEngine ./SelfSnappingEngine ./candidates/IntersectionSnappingCandidate".split(" "),
function(a,g,r,A,v,t,p,b,k,n,l,q,C,w,x,c,m,f,e,d,h,F,E,u,z,y){a.SnappingManager=function(B){function H(M){M=B.call(this,M)||this;M.options=new E;M.engines=[];M._currentMainCandidate=null;M._currentOtherActiveCandidates=[];M.options=new E;return M}g._inheritsLoose(H,B);var D=H.prototype;D.initialize=function(){this.handles.add([x.reaction(()=>{const {effectiveFeatureEnabled:M,effectiveSelfEnabled:U,touchSensitivityMultiplier:R,distance:J}=this.options;return{effectiveFeatureEnabled:M,effectiveSelfEnabled:U,
touchSensitivityMultiplier:R,distance:J}},()=>{this.doneSnapping();this.emit("changed")}),this.watch("options",M=>{for(const U of this.engines)U.options=M},!0),e.init(this.view,"ready",M=>this.onViewReady(M),!0)])};D.destroy=function(){this.destroyEngines()};D.onViewReady=function(M){this.destroyEngines();if(M){var U,R;this.engines=[new z.SelfSnappingEngine({view:this.view,options:this.options}),new u.FeatureSnappingEngine({view:this.view,spatialReference:null!=(U=null==(R=this.view)?void 0:R.spatialReference)?
U:c.WGS84,options:this.options})]}};D.destroyEngines=function(){for(const M of this.engines)M.destroy();this.engines.length=0};D.snap=async function(M,U,R){const J=U.coordinateHelper.fromPoint(M),L=await this.fetchCandidates(J,U,R);return{get valid(){return!w.isAborted(R)},apply:()=>{const {snappedPoint:N,hints:V}=this.processCandidates(J,L,U);this.removeVisualization();v.isSome(U.visualizer)&&this.handles.add(U.visualizer.draw(V,{coordinateHelper:U.coordinateHelper,elevationInfo:U.elevationInfo,
view:this.view}),"visualization-handle");return N}}};D.update=function(M,U){this.removeVisualization();let R=M;const J=[];if(v.isSome(this._currentMainCandidate)){const L=U.coordinateHelper;M=L.fromPoint(M);const N=this._currentMainCandidate.constraint.closestTo(M);if(F.squareDistance(F.anyMapPointToScreenPoint(M,L,U.elevationInfo,this.view),F.anyMapPointToScreenPoint(N,L,U.elevationInfo,this.view))<this.squaredPointProximityThreshold(U.pointer)){R=L.createDehydratedPoint(N);this._currentMainCandidate.targetPoint=
N;J.push(...this._currentMainCandidate.hints);for(const V of this._currentOtherActiveCandidates)V.targetPoint=N,J.push(...V.hints)}else this._currentMainCandidate=null,this._currentOtherActiveCandidates=[]}v.isSome(U.visualizer)&&this.handles.add(U.visualizer.draw(J,{coordinateHelper:U.coordinateHelper,elevationInfo:U.elevationInfo,view:this.view}),"visualization-handle");return R};D.doneSnapping=function(){this.removeVisualization();this._currentMainCandidate=null;this._currentOtherActiveCandidates=
[]};D.removeVisualization=function(){this.handles.remove("visualization-handle")};D.fetchCandidates=async function(M,U,R){return(await Promise.all(this.engines.map(J=>J.fetchCandidates(M,U,R)))).flat()};D.processCandidates=function(M,U,R){if(1>U.length)return this.doneSnapping(),{snappedPoint:R.coordinateHelper.toPoint(M,new m),hints:[]};F.sortCandidatesInPlace(M,U);const J=this._currentMainCandidate;if(v.isSome(J)){const L=this.findOldConstraintInNewCandidates(J,U);if(0<=L)if(U[L]instanceof y.IntersectionSnappingCandidate){if(h.squaredDistance(M,
J.targetPoint)<this.squaredPointProximityThreshold(R.pointer))return this.updateSnappingCandidate(J,U,R)}else return this.intersectWithOtherCandidates(L,U,M,R)}return this.intersectWithOtherCandidates(0,U,M,R)};D.findOldConstraintInNewCandidates=function(M,U){return M instanceof y.IntersectionSnappingCandidate?0<=this.findOldCandidateIndex(U,M.first)&&0<=this.findOldCandidateIndex(U,M.second)?0:-1:this.findOldCandidateIndex(U,M)};D.intersectWithOtherCandidates=function(M,U,R,J){const L=U[M],N=[],
V=J.coordinateHelper;for(let T=0;T<U.length;++T){if(T===M)continue;const W=U[T];for(const Q of L.constraint.intersect(W.constraint)){const Z=V.fromXYZ(Q.intersection,L.targetPoint[2]);N.push([new y.IntersectionSnappingCandidate(V,Z,L,W),F.squareDistance(F.anyMapPointToScreenPoint(R,J.coordinateHelper,J.elevationInfo,this.view),F.anyMapPointToScreenPoint(Z,J.coordinateHelper,J.elevationInfo,this.view))])}}return 0<N.length&&(N.sort((T,W)=>T[1]-W[1]),N[0][1]<this.squaredPointProximityThreshold(J.pointer))?
this.updateSnappingCandidate(N[0][0],U,J):this.updateSnappingCandidate(L,U,J)};D.updateSnappingCandidate=function(M,U,R){this.doneSnapping();this._currentMainCandidate=M;const J=this._currentMainCandidate.targetPoint,L=[];L.push(...M.hints);for(const N of U){if(M instanceof y.IntersectionSnappingCandidate){if(N.constraint.objectEqual(M.first.constraint)||N.constraint.objectEqual(M.second.constraint))continue}else if(N.constraint.objectEqual(M.constraint))continue;N.constraint.check(J)&&(N.targetPoint=
J,this._currentOtherActiveCandidates.push(N),L.push(...N.hints))}return{snappedPoint:R.coordinateHelper.createDehydratedPoint(J),hints:L}};D.squaredPointProximityThreshold=function(M){return"touch"===M?this.squaredTouchProximityThreshold:this.squaredMouseProximityTreshold};D.findOldCandidateIndex=function(M,U){let R=-1;for(let J=0;J<M.length;++J)if(U.constraint.objectEqual(M[J].constraint)){R=J;break}return R};g._createClass(H,[{key:"updating",get:function(){return this.engines.some(M=>M.updating)}},
{key:"squaredMouseProximityTreshold",get:function(){return this.options.distance*this.options.distance}},{key:"squaredTouchProximityThreshold",get:function(){const {distance:M,touchSensitivityMultiplier:U}=this.options,R=M*U;return R*R}},{key:"test",get:function(){return{visualizationsActive:this.handles.has("visualization-handle")}}}]);return H}(f.EventedMixin(d.HandleOwner));r.__decorate([b.property({constructOnly:!0})],a.SnappingManager.prototype,"view",void 0);r.__decorate([b.property()],a.SnappingManager.prototype,
"options",void 0);r.__decorate([b.property({readOnly:!0})],a.SnappingManager.prototype,"updating",null);r.__decorate([b.property()],a.SnappingManager.prototype,"engines",void 0);r.__decorate([b.property()],a.SnappingManager.prototype,"squaredMouseProximityTreshold",null);r.__decorate([b.property()],a.SnappingManager.prototype,"squaredTouchProximityThreshold",null);a.SnappingManager=r.__decorate([n.subclass("esri.views.interactive.snapping.SnappingManager")],a.SnappingManager);Object.defineProperty(a,
"__esModule",{value:!0})})},"esri/views/interactive/snapping/FeatureSnappingEngine":function(){define("require exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/maybe ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../../core/promiseUtils ../../../chunks/vec3f64 ../../../core/Handles ../../../core/watchUtils ../../../core/HandleOwner ../../../core/MapUtils ./snappingUtils ./candidates/FeatureSnappingCandidate".split(" "),
function(a,g,r,A,v,t,p,b,k,n,l,q,C,w,x,c,m,f,e,d,h,F){g.FeatureSnappingEngine=function(z){function y(H){H=z.call(this,H)||this;H.sourceModules={featureService:{module:null,loader:null},featureCollection:{module:null,loader:null},graphics:{module:null,loader:null}};return H}r._inheritsLoose(y,z);var B=y.prototype;B.initialize=function(){this.updatingHandles.add(this,"snappingSources",()=>{this.notifyChange("updating")},1);if(t.isSome(this.view)){var H;this.handles.add([null==(H=this.view.refreshManager)?
void 0:H.on("refresh",D=>{"interval"===D.trigger&&this.refreshSourceOfLayer(D.layerView.layer)}),this.view.on("layerview-create",D=>this.updateLayerView(D.layer,D.layerView)),this.view.on("layerview-destroy",D=>this.updateLayerView(D.layer,null))])}};B.refreshSourceOfLayer=function(H){for(const [,{snappingSource:D}]of this.snappingSources)D.layerSource.layer===H&&D.refresh()};B.updateLayerView=function(H,D){for(const [,M]of this.snappingSources)M.snappingSource.layerSource.layer===H&&(M.layerView=
D)};B.destroy=function(){this._set("options",null);for(const [,H]of this.snappingSources)H.destroy()};B.fetchCandidates=async function(H,D,M){if(!this.options.effectiveFeatureEnabled)return[];var U=[];const R={distance:this.computeScreeenSizeDistanceParameters(H,D),point:H,coordinateHelper:D.coordinateHelper,types:this.types,filter:null};for(const [,{snappingSource:J,layerView:L}]of this.snappingSources)!J.layerSource.enabled||t.isSome(L)&&L.suspended||U.push(J.fetchCandidates(R,M).then(({candidates:N})=>
N.filter(V=>!this.candidateIsExcluded(J,V,D.excludeFeature))));U=(await x.eachAlwaysValues(U)).flat();x.throwIfAborted(M);h.sortCandidatesInPlace(H,U);return U};B.computeScreeenSizeDistanceParameters=function(H,D){const M=this.options.distance*("touch"===D.pointer?this.options.touchSensitivityMultiplier:1);return t.isNone(this.view)?M:"2d"===this.view.type?M*this.view.resolution:this.computeScreeenSizeDistanceParameters3D(H,M,this.view,D)};B.computeScreeenSizeDistanceParameters3D=function(H,D,M,U){const {coordinateHelper:R,
elevationInfo:J}=U,L=M.state.camera.computeScreenPixelSizeAt(h.anyMapPointToRender(H,R,J,M,u))*M.renderCoordsHelper.unitInMeters/M.mapCoordsHelper.unitInMeters;D*=L;const N=this.computeScreenMagnitudeOfMapOffset(H,L,0,M,U);H=this.computeScreenMagnitudeOfMapOffset(H,0,L,M,U);return{x:D/N,y:D/H}};B.computeScreenMagnitudeOfMapOffset=function(H,D,M,U,{coordinateHelper:R,elevationInfo:J}){const L=R.clone(H);L[0]+=D;L[1]+=M;H=h.anyMapPointToScreenPoint(H,R,J,U);R=h.anyMapPointToScreenPoint(L,R,J,U);U=R.x-
H.x;R=R.y-H.y;return Math.sqrt(U*U+R*R)};B.candidateIsExcluded=function(H,D,M){if(t.isNone(M))return!1;D=this.getCandidateObjectId(D);if(t.isNone(D))return!1;H=H.layerSource.layer;return"graphics"===H.type?M.uid===D:M.sourceLayer===H&&M.attributes&&"objectIdField"in H?M.attributes[H.objectIdField]===D:!1};B.getCandidateObjectId=function(H){return H instanceof F.FeatureSnappingCandidate?H.objectId:null};B.createSourceInfo=function(H){const D=this.createFeatureSnappingSourceType(H);if(t.isNone(D))return null;
if("loading"in D)return this.updatingHandles.addPromise(D.loading.then(()=>{this.destroyed||this.notifyChange("snappingSources")})),null;const M=t.isSome(this.view)?this.view.allLayerViews.find(U=>U.layer===H.layer):null;return new E(D.source,M)};B.createFeatureSnappingSourceType=function(H){switch(H.layer.type){case "feature":case "geojson":case "csv":return this.createFeatureSnappingSourceFeatureLayer(H);case "graphics":return this.createFeatureSnappingSourceGraphicsLayer(H)}return null};B.createFeatureSnappingSourceFeatureLayer=
function(H){switch(H.layer.source.type){case "feature-layer":var D=this.getSourceModule("featureService");return t.isSome(D.module)?{source:new D.module.FeatureServiceSnappingSource({spatialReference:this.spatialReference,view:this.view,layerSource:H})}:{loading:D.loader};case "memory":case "csv":case "geojson":if("mesh"!==H.layer.geometryType)return D=this.getSourceModule("featureCollection"),t.isSome(D.module)?{source:new D.module.FeatureCollectionSnappingSource({layerSource:H})}:{loading:D.loader}}return null};
B.createFeatureSnappingSourceGraphicsLayer=function(H){const D=this.getSourceModule("graphics");return t.isSome(D.module)?{source:new D.module.GraphicsSnappingSource({spatialReference:this.spatialReference,view:this.view,layerSource:H})}:{loading:D.loader}};B.getSourceModule=function(H){const D=this.sourceModules[H];return t.isNone(D.loader)?(H=this.loadSourceModule(H).then(M=>{D.module=M}),D.loader=H,{module:D.module,loader:H}):{module:D.module,loader:D.loader}};B.loadSourceModule=function(H){switch(H){case "featureService":return this.updatingHandles.addPromise(new Promise(function(D,
M){a(["./featureSources/FeatureServiceSnappingSource"],D,M)}));case "featureCollection":return this.updatingHandles.addPromise(new Promise(function(D,M){a(["./featureSources/FeatureCollectionSnappingSource"],D,M)}));case "graphics":return this.updatingHandles.addPromise(new Promise(function(D,M){a(["./featureSources/GraphicsSnappingSource"],D,M)}))}return null};r._createClass(y,[{key:"updating",get:function(){return d.someMap(this.snappingSources,({snappingSource:H})=>H.updating)||this.updatingHandles.updating}},
{key:"snappingSources",get:function(){var H;const D=this._get("snappingSources")||new Map,M=new Map;if(null!=(H=this.options)&&H.featureSources)for(const R of this.options.featureSources.items){H=R.layer.uid;var U=D.get(H);U?(D.delete(H),M.set(H,U)):R.layer.loaded?(U=this.createSourceInfo(R),t.isSome(U)&&M.set(H,U)):this.updatingHandles.addPromise(R.layer.load())}for(const [,R]of D)R.destroy();return M}},{key:"types",get:function(){return 3}}]);return y}(e.HandleOwner);A.__decorate([k.property({constructOnly:!0})],
g.FeatureSnappingEngine.prototype,"spatialReference",void 0);A.__decorate([k.property({constructOnly:!0})],g.FeatureSnappingEngine.prototype,"view",void 0);A.__decorate([k.property()],g.FeatureSnappingEngine.prototype,"options",void 0);A.__decorate([k.property({readOnly:!0})],g.FeatureSnappingEngine.prototype,"updating",null);A.__decorate([k.property({readOnly:!0})],g.FeatureSnappingEngine.prototype,"snappingSources",null);g.FeatureSnappingEngine=A.__decorate([l.subclass("esri.views.interactive.snapping.FeatureSnappingEngine")],
g.FeatureSnappingEngine);let E=function(){function z(y,B){this.snappingSource=y;this.layerView=B;this.handles=new m;B=this.snappingSource.layerSource.layer;"refresh"in B&&this.handles.add(B.on("refresh",()=>y.refresh()));this.handles.add([f.init(y,"updating",H=>y.layerSource.updating=H,!0),f.init(y,"availability",H=>y.layerSource.availability=H,!0)])}z.prototype.destroy=function(){this.snappingSource.destroy();this.handles.destroy()};return z}();const u=c.create();Object.defineProperty(g,"__esModule",
{value:!0})})},"esri/views/interactive/snapping/candidates/FeatureSnappingCandidate":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","./SnappingCandidate"],function(a,g,r){r=function(A){function v({coordinateHelper:t,targetPoint:p,objectId:b,constraint:k}){t=A.call(this,t,p,k)||this;t.objectId=b;return t}g._inheritsLoose(v,A);return v}(r.SnappingCandidate);a.FeatureSnappingCandidate=r;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/interactive/snapping/candidates/SnappingCandidate":function(){define(["exports"],
function(a){a.SnappingCandidate=function(g,r,A){this.coordinateHelper=g;this.targetPoint=r;this.constraint=A};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/interactive/snapping/SelfSnappingEngine":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../../core/Accessor ../../../core/Collection ./snappingUtils ./LineSnapper ./ParallelLineSnapper ./RightAngleSnapper ./RightAngleTriangleSnapper".split(" "),
function(a,g,r,A,v,t,p,b,k,n,l,q,C,w,x,c,m,f,e){a.SelfSnappingEngine=function(d){function h(E){E=d.call(this,E)||this;E.updating=!1;E._snappers=new w;return E}g._inheritsLoose(h,d);var F=h.prototype;F.initialize=function(){this._snappers.push(new m.ParallelLineSnapper(this.view,this.options),new c.LineSnapper(this.view,this.options),new f.RightAngleSnapper(this.view,this.options),new e.RightAngleTriangleSnapper(this.view,this.options))};F.fetchCandidates=async function(E,u){if(!this.options.effectiveSelfEnabled)return[];
const z=[];for(const y of this._snappers.items)z.push(...y.snap(E,u));x.sortCandidatesInPlace(E,z);return z};g._createClass(h,[{key:"options",set:function(E){this._set("options",E);for(const u of this._snappers)u.options=E}}]);return h}(C);r.__decorate([p.property({readOnly:!0})],a.SelfSnappingEngine.prototype,"updating",void 0);r.__decorate([p.property({constructOnly:!0})],a.SelfSnappingEngine.prototype,"view",void 0);r.__decorate([p.property()],a.SelfSnappingEngine.prototype,"options",null);a.SelfSnappingEngine=
r.__decorate([k.subclass("esri.views.interactive.snapping.SelfSnappingEngine")],a.SelfSnappingEngine);Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/interactive/snapping/LineSnapper":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../chunks/vec2f64 ./snappingUtils ./SnappingAlgorithm ../../support/geometry2dUtils ./candidates/LineSnappingCandidate".split(" "),function(a,g,r,A,v,t,p,b){t=function(k){function n(){return k.apply(this,arguments)||
this}g._inheritsLoose(n,k);var l=n.prototype;l.snapNewVertex=function(q,C){var w=C.geometry.editGeometry.components[0],x=w.edges.length;const c=[];if(1>x)return c;const m=v.anyMapPointToScreenPoint(q,C.coordinateHelper,C.elevationInfo,this.view);x=w=w.edges[x-1];do this.edgeExceedsShortLineThreshold(x,C)&&this._processCandidateProposal(x.left.pos,x.right.pos,q,m,C,c),x=x.left.left;while(x&&x!==w);return c};l.snapExistingVertex=function(q,C){const w=[],x=r.unwrap(C.vertexHandle);var c=x.component;
if(2>c.edges.length)return w;const m=v.anyMapPointToScreenPoint(q,C.coordinateHelper,C.elevationInfo,this.view);var f=x.left;const e=x.right;f&&e&&this.edgeExceedsShortLineThreshold(f,C)&&this.edgeExceedsShortLineThreshold(e,C)&&this._processCandidateProposal(f.left.pos,e.right.pos,q,m,C,w);f=c=c.edges[0];do f!==x.left&&f!==x.right&&this.edgeExceedsShortLineThreshold(f,C)&&this._processCandidateProposal(f.left.pos,f.right.pos,q,m,C,w),f=f.right.right;while(f&&f!==c);return w};l._processCandidateProposal=
function(q,C,w,x,c,m){const f=p.projectPointToLine(A.create(),w,q,C),e=c.coordinateHelper;w=e.fromXYZ(f,e.getZ(w,0));v.squareDistance(x,v.anyMapPointToScreenPoint(w,e,c.elevationInfo,this.view))<this.squaredProximityTreshold(c.pointer)&&m.push(new b.LineSnappingCandidate({coordinateHelper:c.coordinateHelper,lineStart:q,lineEnd:C,targetPoint:w}))};return n}(t.SnappingAlgorithm);a.LineSnapper=t;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/interactive/snapping/SnappingAlgorithm":function(){define(["exports",
"../../../chunks/_rollupPluginBabelHelpers","../../../core/maybe","./Settings","./snappingUtils"],function(a,g,r,A,v){let t=function(){function p(k,n){this.view=k;this.options=n;this.squaredShortLineThreshold=A.defaults.shortLineThreshold*A.defaults.shortLineThreshold}var b=p.prototype;b.snap=function(k,n){return r.isSome(n.vertexHandle)?"vertex"!==n.vertexHandle.type?[]:this.snapExistingVertex(k,n):this.snapNewVertex(k,n)};b.edgeExceedsShortLineThreshold=function(k,n){return this.exceedsShortLineThreshold(k.left.pos,
k.right.pos,n)};b.exceedsShortLineThreshold=function(k,n,{elevationInfo:l,geometry:q}){q=q.editGeometry.coordinateHelper;return 0===this.squaredShortLineThreshold||v.squareDistance(v.anyMapPointToScreenPoint(n,q,l,this.view),v.anyMapPointToScreenPoint(k,q,l,this.view))>this.squaredShortLineThreshold};b.squaredProximityTreshold=function(k){return"touch"===k?this.squaredTouchProximityThreshold:this.squaredMouseProximityTreshold};g._createClass(p,[{key:"squaredMouseProximityTreshold",get:function(){return this.options.distance*
this.options.distance}},{key:"squaredTouchProximityThreshold",get:function(){const {distance:k,touchSensitivityMultiplier:n}=this.options,l=k*n;return l*l}}]);return p}();a.SnappingAlgorithm=t;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/support/geometry2dUtils":function(){define(["exports","../../core/mathUtils","../../chunks/vec2f64","../../chunks/vec2"],function(a,g,r,A){function v(C,w){return C[0]*w[1]-C[1]*w[0]}function t(C,w,x){w=A.dot(x,w)/A.squaredLength(x);return A.scale(C,
x,w)}function p(C,w,x,c,m=x){A.subtract(k,c,x);A.subtract(l,w,m);t(q,l,k);return A.add(C,m,q)}function b(C,w,x,c){A.subtract(k,w,x);w=c/A.length(k);return A.scaleAndAdd(C,x,k,w)}const k=r.create(),n=r.create(),l=r.create(),q=r.create();a.cross=v;a.intersectCircleAndPoint=function(C,w,x){b(l,x,C,w);return g.floatEqualAbsolute(l[0],x[0])&&g.floatEqualAbsolute(l[1],x[1])?[r.clone(x)]:[]};a.intersectLineAndPoint=function(C,w){p(l,w,C.start,C.end);return g.floatEqualAbsolute(l[0],w[0])&&g.floatEqualAbsolute(l[1],
w[1])?[r.clone(w)]:[]};a.intersectLineAndRay=function(C,w){const x=C.start;var c=w.start,m=w.end;const f=A.subtract(k,C.end,x);var e=A.subtract(n,m,c);m=v(f,e);if(1E-6>=Math.abs(m))return[];c=A.subtract(l,x,c);e=v(e,c)/m;m=v(f,c)/m;if(0<=e){if(0<=m||1===w.type)return[A.scaleAndAdd(q,x,f,e)]}else if(1===C.type&&(0<=m||1===w.type))return[A.scaleAndAdd(q,x,f,e)];return[]};a.intersectLineLikeAndCircle=function(C,w,x){const c=[],m=A.subtract(k,C.end,C.start);var f=A.subtract(n,C.start,w);w=A.squaredLength(m);
const e=2*A.dot(m,f);x=A.squaredLength(f)-x*x;x=e*e-4*w*x;0===x?(w=-e/(2*w),(1===C.type||0<=w)&&c.push(A.scaleAndAdd(q,C.start,m,w))):0<x&&(x=Math.sqrt(x),f=(-e+x)/(2*w),(1===C.type||0<=f)&&c.push(A.scaleAndAdd(q,C.start,m,f)),w=(-e-x)/(2*w),(1===C.type||0<=w)&&c.push(A.scaleAndAdd(l,C.start,m,w)));return c};a.pointToLineDistance=function(C,w,x){return Math.abs((w[0]-C[0])*(x[1]-C[1])-(w[1]-C[1])*(x[0]-C[0]))/A.distance(w,x)};a.projectPoint=t;a.projectPointToCircle=b;a.projectPointToLine=p;a.projectPointToRay=
function(C,w,x,c){A.subtract(k,c,x);A.subtract(l,w,x);w=A.dot(k,l)/A.squaredLength(k);return 0<w?A.scaleAndAdd(C,x,k,w):A.copy(C,x)};Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/interactive/snapping/candidates/LineSnappingCandidate":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/mathUtils ../../../../chunks/vec2f64 ../../../../chunks/vec2 ../hints/LineSnappingHint ./SnappingCandidate ../SnappingConstraint".split(" "),function(a,g,r,A,v,
t,p,b){p=function(l){function q({coordinateHelper:C,lineStart:w,lineEnd:x,targetPoint:c}){C=l.call(this,C,c,new b.LineConstraint(C,w,x))||this;C.referenceLineHint=new t.LineSnappingHint(2,w,x);return C}g._inheritsLoose(q,l);q.prototype.lineEndClosestToTarget=function(){const C=this.constraint.start,w=this.constraint.end;return 0<r.sign(v.dot(v.subtract(n,w,C),v.subtract(k,this.targetPoint,C)))?w:C};g._createClass(q,[{key:"hints",get:function(){return[this.referenceLineHint,new t.LineSnappingHint(0,
this.lineEndClosestToTarget(),this.targetPoint)]}}]);return q}(p.SnappingCandidate);const k=A.create(),n=A.create();a.LineSnappingCandidate=p;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/interactive/snapping/SnappingConstraint":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/vec2f64 ../../../chunks/vec2 ./Settings ./snappingUtils ../../support/geometry2dUtils".split(" "),function(a,g,r,A,v,t,p){let b=function(x){this.coordinateHelper=x},k=function(x){function c(f,
e){f=x.call(this,f)||this;f.point=e;return f}g._inheritsLoose(c,x);var m=c.prototype;m.objectEqual=function(f){return f instanceof c?t.objectEqual(this.point,f.point):!1};m.check=function(f){return A.squaredDistance(f,this.point)<v.defaults.pointThreshold};m.closestTo=function(){return this.coordinateHelper.clone(this.point)};m.intersect=function(f){const e=[];f instanceof n?e.push(...p.intersectLineAndPoint({start:f.start,end:f.end,type:f instanceof q?1:0},this.point)):f instanceof w&&e.push(...p.intersectCircleAndPoint(f.center,
f.radius,this.point));return e.map(d=>new C(this.coordinateHelper,d,this,f))};return c}(b),n=function(x){function c(f,e,d){f=x.call(this,f)||this;f.start=e;f.end=d;return f}g._inheritsLoose(c,x);var m=c.prototype;m.objectEqual=function(f){return f instanceof c?t.objectEqual(this.start,f.start)&&t.objectEqual(this.end,f.end):!1};m.intersect=function(f){const e=[];f instanceof k?e.push(...p.intersectLineAndPoint({start:this.start,end:this.end,type:this instanceof q?1:0},f.point)):f instanceof c?e.push(...p.intersectLineAndRay({start:this.start,
end:this.end,type:this instanceof q?1:0},{start:f.start,end:f.end,type:f instanceof q?1:0})):f instanceof w&&e.push(...p.intersectLineLikeAndCircle({start:this.start,end:this.end,type:this instanceof q?1:0},f.center,f.radius));return e.map(d=>new C(this.coordinateHelper,d,this,f))};return c}(b),l=function(x){function c(f,e,d){f=x.call(this,f,e,d)||this;f.dir=r.create();f.p=r.create();return f}g._inheritsLoose(c,x);var m=c.prototype;m.objectEqual=function(f){return f instanceof c?x.prototype.objectEqual.call(this,
f):!1};m.check=function(f){A.subtract(this.dir,this.end,this.start);A.subtract(this.p,f,this.start);return 0<=A.dot(this.dir,this.p)?p.pointToLineDistance(f,this.start,this.end)<v.defaults.pointOnLineThreshold:!1};m.closestTo=function(f){const e=this.coordinateHelper.clone(f);p.projectPointToRay(e,f,this.start,this.end);return e};return c}(n),q=function(x){function c(f,e,d){return x.call(this,f,e,d)||this}g._inheritsLoose(c,x);var m=c.prototype;m.objectEqual=function(f){return f instanceof c?x.prototype.objectEqual.call(this,
f):!1};m.check=function(f){return p.pointToLineDistance(f,this.start,this.end)<v.defaults.pointOnLineThreshold};m.closestTo=function(f){const e=this.coordinateHelper.clone(f);p.projectPointToLine(e,f,this.start,this.end);return e};return c}(n),C=function(x){function c(f,e,d,h){f=x.call(this,f)||this;f.intersection=e;f.first=d;f.second=h;return f}g._inheritsLoose(c,x);var m=c.prototype;m.objectEqual=function(f){return f instanceof c?this.first.objectEqual(f.first)&&this.second.objectEqual(f.second):
!1};m.check=function(){return!1};m.closestTo=function(f){f=this.coordinateHelper.clone(f);A.copy(f,this.intersection);return f};m.intersect=function(){return[]};return c}(b),w=function(x){function c(f,e,d){f=x.call(this,f)||this;f.center=e;f.radius=d;return f}g._inheritsLoose(c,x);var m=c.prototype;m.objectEqual=function(f){return f instanceof c?this.center[0]===f.center[0]&&this.center[1]===f.center[1]&&this.radius===f.radius:!1};m.check=function(){return!1};m.closestTo=function(f){const e=this.coordinateHelper.clone(f);
p.projectPointToCircle(e,f,this.center,this.radius);return e};m.intersect=function(f){const e=[];f instanceof n?e.push(...p.intersectLineLikeAndCircle({start:f.start,end:f.end,type:f instanceof q?1:0},this.center,this.radius)):f instanceof k&&e.push(...p.intersectCircleAndPoint(this.center,this.radius,f.point));return e.map(d=>new C(this.coordinateHelper,d,this,f))};return c}(b);a.IntersectionConstraint=C;a.LineConstraint=q;a.LineLikeConstraint=n;a.PlanarCircleConstraint=w;a.PointConstraint=k;a.RayConstraint=
l;a.SnappingConstraint=b;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/interactive/snapping/ParallelLineSnapper":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../chunks/vec2f64 ../../../chunks/vec2 ./Settings ./snappingUtils ./SnappingAlgorithm ../../support/geometry2dUtils ./candidates/ParallelLineSnappingCandidate".split(" "),function(a,g,r,A,v,t,p,b,k,n){b=function(l){function q(){var w=l.apply(this,arguments)||this;w._tmpProjection=
A.create();return w}g._inheritsLoose(q,l);var C=q.prototype;C.snapNewVertex=function(w,x){var c=x.geometry.editGeometry.components[0],m=c.edges.length,f=c.vertices.length;const e=[];if(2>m)return e;const d=p.anyMapPointToScreenPoint(w,x.coordinateHelper,x.elevationInfo,this.view);f=c.vertices[f-1];const h=c.vertices[0];m=c=c.edges[m-1];do this.edgeExceedsShortLineThreshold(m,x)&&(this._checkEdgeForParalleLines(m,f.pos,w,d,x,e),this._checkEdgeForParalleLines(m,h.pos,w,d,x,e)),m=m.left.left;while(m&&
m!==c);return e};C.snapExistingVertex=function(w,x){const c=[],m=r.unwrap(x.vertexHandle);var f=m.component;if(3>f.edges.length)return c;const e=p.anyMapPointToScreenPoint(w,x.coordinateHelper,x.elevationInfo,this.view),d=m.left,h=m.right,F=f.vertices[0],E=f.vertices[f.vertices.length-1];let u=f=f.edges[0];do u!==d&&u!==h&&this.edgeExceedsShortLineThreshold(u,x)&&(d&&this._checkEdgeForParalleLines(u,d.left.pos,w,e,x,c),h&&this._checkEdgeForParalleLines(u,h.right.pos,w,e,x,c),m===F?this._checkEdgeForParalleLines(u,
E.pos,w,e,x,c):m===E&&this._checkEdgeForParalleLines(u,F.pos,w,e,x,c)),u=u.right.right;while(u&&u!==f);return c};C._checkEdgeForParalleLines=function(w,x,c,m,f,e){var d=w.left.pos;const h=w.right.pos;k.projectPointToLine(this._tmpProjection,x,d,h);v.squaredDistance(this._tmpProjection,x)<t.defaults.parallelLineThreshold||(k.projectPointToLine(this._tmpProjection,c,d,h,x),d=f.coordinateHelper,c=d.fromXYZ(this._tmpProjection,d.getZ(c,0)),p.squareDistance(m,p.anyMapPointToScreenPoint(c,d,f.elevationInfo,
this.view))<this.squaredProximityTreshold(f.pointer)&&!this.parallelToPreviousCandidate(w,e)&&e.push(new n.ParallelLineSnappingCandidate({coordinateHelper:d,referenceLine:w,lineStart:x,targetPoint:c})))};C.parallelToPreviousCandidate=function(w,x){const c=w.left.pos,m=w.right.pos;for(const f of x)if(k.projectPointToLine(this._tmpProjection,m,f.constraint.start,f.constraint.end,c),v.squaredDistance(this._tmpProjection,m)<t.defaults.parallelLineThreshold)return f.addReferenceLine(w),!0;return!1};return q}(b.SnappingAlgorithm);
a.ParallelLineSnapper=b;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/interactive/snapping/candidates/ParallelLineSnappingCandidate":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/vec2 ../hints/LineSnappingHint ../hints/ParallelSnappingHint ./SnappingCandidate ../SnappingConstraint".split(" "),function(a,g,r,A,v,t,p){t=function(b){function k({coordinateHelper:n,referenceLine:l,lineStart:q,targetPoint:C}){const w=n.clone(q);r.subtract(w,
r.add(w,w,l.right.pos),l.left.pos);n=b.call(this,n,C,new p.LineConstraint(n,q,w))||this;n._referenceLines=[{edge:l,fadeLeft:!0,fadeRight:!0}];return n}g._inheritsLoose(k,b);k.prototype.addReferenceLine=function(n){const l={edge:n,fadeLeft:!0,fadeRight:!0};this._referenceLines.forEach(q=>{n.right.right===q.edge&&(q.fadeLeft=!1,l.fadeRight=!1);n.left.left===q.edge&&(q.fadeRight=!1,l.fadeLeft=!1)});this._referenceLines.push(l)};g._createClass(k,[{key:"hints",get:function(){return[new A.LineSnappingHint(0,
this.constraint.start,this.targetPoint),new v.ParallelSnappingHint(this.constraint.start,this.targetPoint),...this._referenceLines.map(n=>new A.LineSnappingHint(1,n.edge.left.pos,n.edge.right.pos,n.fadeLeft,n.fadeRight))]}}]);return k}(t.SnappingCandidate);a.ParallelLineSnappingCandidate=t;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/interactive/snapping/RightAngleSnapper":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../core/mathUtils ../../../chunks/vec2f64 ../../../chunks/vec2 ./snappingUtils ./SnappingAlgorithm ./SnappingConstraint ./candidates/RightAngleSnappingCandidate".split(" "),
function(a,g,r,A,v,t,p,b,k,n){b=function(l){function q(){var w=l.apply(this,arguments)||this;w._tmp=v.create();return w}g._inheritsLoose(q,l);var C=q.prototype;C.snapNewVertex=function(w,x){var c=x.geometry.editGeometry.components[0],m=c.vertices.length;const f=[];if(2>m)return f;const e=p.anyMapPointToScreenPoint(w,x.coordinateHelper,x.elevationInfo,this.view);m=c.vertices[m-1];this._checkForSnappingCandidate(f,m.left,m.pos,w,m.left.left.pos,m.pos,x,w,e);c=c.vertices[0];this._checkForSnappingCandidate(f,
c.right,c.pos,w,c.right.right.pos,c.pos,x,w,e);return f};C.snapExistingVertex=function(w,x){const c=[];var m=r.unwrap(x.vertexHandle),f=m.component;const e=f.vertices.length;if(3>e)return c;const d=p.anyMapPointToScreenPoint(w,x.coordinateHelper,x.elevationInfo,this.view);var h=m.left;m=m.right;const F=f.vertices[0];f=f.vertices[e-1];if(!h)return this._checkForSnappingCandidate(c,F.right.right.right,F.right.right.pos,w,F.right.right.right.right.pos,F.right.right.pos,x,w,d),c;if(!m)return this._checkForSnappingCandidate(c,
f.left.left.left,f.left.left.pos,w,f.left.left.left.left.pos,f.left.left.pos,x,w,d),c;h&&h.left.left&&(f=h.left.left,this._checkForSnappingCandidate(c,f,h.left.pos,w,f.left.pos,h.left.pos,x,w,d));m&&m.right.right&&(h=m.right.right,this._checkForSnappingCandidate(c,h,m.right.pos,w,h.right.pos,m.right.pos,x,w,d));return c};C._checkForSnappingCandidate=function(w,x,c,m,f,e,d,h,F){this.edgeExceedsShortLineThreshold(x,d)&&(t.subtract(this._tmp,x.right.pos,x.left.pos),x=v.fromValues(this._tmp[1],-this._tmp[0]),
c=t.dot(x,t.subtract(this._tmp,m,c))/t.squaredLength(x),m=d.coordinateHelper,h=m.fromXYZ(t.scaleAndAdd(v.create(),e,x,c),m.getZ(h,0)),p.squareDistance(F,p.anyMapPointToScreenPoint(h,m,d.elevationInfo,this.view))<this.squaredProximityTreshold(d.pointer)&&w.push(new n.RightAngleSnappingCandidate({coordinateHelper:m,targetPoint:h,constraint:new k.RayConstraint(m,e,t.scaleAndAdd(m.createNew(),e,x,A.sign(c))),previousVertex:f,centerVertex:e})))};return q}(b.SnappingAlgorithm);a.RightAngleSnapper=b;Object.defineProperty(a,
"__esModule",{value:!0})})},"esri/views/interactive/snapping/candidates/RightAngleSnappingCandidate":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../hints/LineSnappingHint","../hints/RightAngleSnappingHint","./SnappingCandidate"],function(a,g,r,A,v){v=function(t){function p({coordinateHelper:b,targetPoint:k,constraint:n,previousVertex:l,centerVertex:q}){b=t.call(this,b,k,n)||this;b.previousVertex=l;b.centerVertex=q;b.referenceLine=new r.LineSnappingHint(1,l,n.start);
return b}g._inheritsLoose(p,t);g._createClass(p,[{key:"hints",get:function(){return[new r.LineSnappingHint(0,this.constraint.start,this.targetPoint),this.referenceLine,new A.RightAngleSnappingHint(this.previousVertex,this.centerVertex,this.targetPoint)]}}]);return p}(v.SnappingCandidate);a.RightAngleSnappingCandidate=v;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/interactive/snapping/RightAngleTriangleSnapper":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../chunks/vec2f64 ../../../chunks/vec2 ./snappingUtils ./SnappingAlgorithm ../../support/geometry2dUtils ./candidates/RightAngleTriangleSnappingCandidate".split(" "),
function(a,g,r,A,v,t,p,b,k){p=function(n){function l(){return n.apply(this,arguments)||this}g._inheritsLoose(l,n);var q=l.prototype;q.snapNewVertex=function(C,w){const x=w.geometry.editGeometry.components[0],c=[],m=x.vertices.length;if("polygon"!==w.geometry.type||2>m)return c;this._processCandidateProposal(x.vertices[0].pos,x.vertices[m-1].pos,C,w,c);return c};q.snapExistingVertex=function(C,w){const x=[],c=r.unwrap(w.vertexHandle),m=c.component;if(2>m.edges.length||"polyline"===w.geometry.type&&
(0===c.index||c.index===m.vertices.length-1))return x;this._processCandidateProposal(c.left.left.pos,c.right.right.pos,C,w,x);return x};q._processCandidateProposal=function(C,w,x,c,m){if(this.exceedsShortLineThreshold(C,w,c)){var f=v.lerp(A.create(),C,w,.5),e=.5*v.distance(C,w);e=b.projectPointToCircle(A.create(),x,f,e);f=c.coordinateHelper;e=f.fromXYZ(e,f.getZ(x,0));x=t.anyMapPointToScreenPoint(x,f,c.elevationInfo,this.view);t.squareDistance(x,t.anyMapPointToScreenPoint(e,f,c.elevationInfo,this.view))<
this.squaredProximityTreshold(c.pointer)&&m.push(new k.RightAngleTriangleSnappingCandidate({coordinateHelper:f,targetPoint:e,point1:C,point2:w}))}};return l}(p.SnappingAlgorithm);a.RightAngleTriangleSnapper=p;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/interactive/snapping/candidates/RightAngleTriangleSnappingCandidate":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/vec2f64 ../../../../chunks/vec2 ../hints/LineSnappingHint ../hints/RightAngleSnappingHint ./SnappingCandidate ../SnappingConstraint".split(" "),
function(a,g,r,A,v,t,p,b){p=function(n){function l({coordinateHelper:q,targetPoint:C,point1:w,point2:x}){q=n.call(this,q,C,new b.PlanarCircleConstraint(q,A.lerp(k,w,x,.5),.5*A.distance(w,x)))||this;q.p1=w;q.p2=x;return q}g._inheritsLoose(l,n);g._createClass(l,[{key:"hints",get:function(){return[new v.LineSnappingHint(1,this.targetPoint,this.p1),new v.LineSnappingHint(1,this.targetPoint,this.p2),new t.RightAngleSnappingHint(this.p1,this.targetPoint,this.p2)]}}]);return l}(p.SnappingCandidate);const k=
r.create();a.RightAngleTriangleSnappingCandidate=p;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/views/interactive/snapping/candidates/IntersectionSnappingCandidate":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../hints/IntersectionSnappingHint","./SnappingCandidate","../SnappingConstraint"],function(a,g,r,A,v){A=function(t){function p(b,k,n,l){b=t.call(this,b,k,new v.IntersectionConstraint(b,k,n.constraint,l.constraint))||this;b.first=n;b.second=l;return b}
g._inheritsLoose(p,t);g._createClass(p,[{key:"hints",get:function(){this.first.targetPoint=this.targetPoint;this.second.targetPoint=this.targetPoint;return[...this.first.hints,...this.second.hints,new r.IntersectionSnappingHint(this.targetPoint)]}}]);return p}(A.SnappingCandidate);a.IntersectionSnappingCandidate=A;Object.defineProperty(a,"__esModule",{value:!0})})},"esri/widgets/Sketch/support/OperationHandle":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/compilerUtils ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../../core/Evented".split(" "),
function(a,g,r,A,v,t,p,b,k,n,l,q,C,w){a.OperationHandle=function(x){function c(f){f=x.call(this,f)||this;f.cancelled=!1;f.history={undo:[],redo:[]};f.type=null;return f}g._inheritsLoose(c,x);var m=c.prototype;m.addToHistory=function(f){this.history.redo=[];this.history.undo.push(f)};m.resetHistory=function(){this.history.redo=[];this.history.undo=[]};m.canUndo=function(){return 0<this.history.undo.length};m.canRedo=function(){return 0<this.history.redo.length};m.complete=function(){this.reset();this.onEnd();
this.emit("complete")};m.cancel=function(){this.cancelled=!0;this.complete()};m.reset=function(){this.activeComponent.reset()};m.refreshComponent=function(){const f=this.activeComponent;f&&("box"!==f.type&&"reshape"!==f.type||f.refresh())};g._createClass(c,[{key:"tool",get:function(){if(!this.activeComponent)return null;switch(this.activeComponent.type){case "graphic-mover":case "move-3d":return"move";case "box":case "transform-3d":return"transform";case "reshape":case "reshape-3d":return"reshape";
case "draw":case "draw-3d":break;default:v.neverReached(this.activeComponent)}return null}},{key:"undo",set:function(f){this._set("undo",()=>{this.canUndo()&&f()})}},{key:"redo",set:function(f){this._set("redo",()=>{this.canRedo()&&f()})}}]);return c}(w.EventedAccessor);r.__decorate([b.property()],a.OperationHandle.prototype,"activeComponent",void 0);r.__decorate([b.property()],a.OperationHandle.prototype,"cancelled",void 0);r.__decorate([b.property()],a.OperationHandle.prototype,"history",void 0);
r.__decorate([b.property()],a.OperationHandle.prototype,"tool",null);r.__decorate([b.property()],a.OperationHandle.prototype,"type",void 0);r.__decorate([b.property()],a.OperationHandle.prototype,"canUndo",null);r.__decorate([b.property()],a.OperationHandle.prototype,"canRedo",null);r.__decorate([b.property()],a.OperationHandle.prototype,"onEnd",void 0);r.__decorate([b.property()],a.OperationHandle.prototype,"undo",null);r.__decorate([b.property()],a.OperationHandle.prototype,"redo",null);r.__decorate([b.property()],
a.OperationHandle.prototype,"toggleTool",void 0);r.__decorate([b.property()],a.OperationHandle.prototype,"addToSelection",void 0);r.__decorate([b.property()],a.OperationHandle.prototype,"removeFromSelection",void 0);a.OperationHandle=r.__decorate([n.subclass("esri.widgets.Sketch.support.OperationHandle")],a.OperationHandle);Object.defineProperty(a,"__esModule",{value:!0})})},"esri/widgets/support/Selector":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/Accessor ../../core/Collection ../../core/HandleOwner ./Selector/selectorUtils ./Selector/SelectionOperation".split(" "),
function(a,g,r,A,v,t,p,b,k,n,l,q,C,w,x,c){r=function(m){function f(d){d=m.call(this,d)||this;d._defaultSelectionOptions={intersects:!0,overlaps:!0,contains:!0};d.candidates=null;d.options=null;d.view=null;return d}a._inheritsLoose(f,m);var e=f.prototype;e.draw=function(d){const {_defaultSelectionOptions:h,candidates:F,options:E,view:u}=this;return new c({candidates:F,options:{...d,selectionOptions:{...h,...E,...null==d?void 0:d.selectionOptions}},view:u})};e.selectionFrom=async function(d,h){const {_defaultSelectionOptions:F,
candidates:E,options:u,view:z}=this,y=new C;await x.updateSelection({selector:d,candidates:E,currentSelection:y,options:{...F,...u,...h},view:z});return y.toArray()};return f}(w.HandleOwnerMixin(q));g.__decorate([t.property()],r.prototype,"candidates",void 0);g.__decorate([t.property()],r.prototype,"options",void 0);g.__decorate([t.property({value:null})],r.prototype,"view",void 0);return r=g.__decorate([b.subclass("esri.widgets.support.Selector")],r)})},"esri/widgets/support/Selector/selectorUtils":function(){define(["require",
"exports"],function(a,g){async function r(){return new Promise(function(v,t){a(["../../../geometry/geometryEngineJSON"],v,t)})}async function A(){return r().then(({contains:v,intersects:t,overlaps:p,simplify:b})=>({contains:v,intersects:t,overlaps:p,simplify:b}))}g.getGeometryEngineOperations=A;g.importGeometryEngine=r;g.updateSelection=async function(v){const {selector:t,candidates:p,currentSelection:b,options:k,view:n}=v;if(!(p&&p.length&&b&&n))return{added:[],removed:[]};const {overlaps:l,intersects:q,
contains:C}=k,{spatialReference:w}=n;if(!t)return{added:[],removed:b.removeAll()};const x=await A(),c=[],m=[];p.forEach(f=>{var e=f.geometry;const d=l&&!!x.overlaps(w,t,e),h=q&&!!x.intersects(w,t,e);e=C&&!!x.contains(w,t,e);const F=b.includes(f);d||h||e?!F&&c.push(f):F&&m.push(f)});b.removeMany(m);b.addMany(c);return{added:c,removed:m}};Object.defineProperty(g,"__esModule",{value:!0})})},"esri/widgets/support/Selector/SelectionOperation":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../../core/Evented ../../../core/Collection ../../../symbols/SimpleLineSymbol ../../../symbols/SimpleFillSymbol ../../../symbols/SimpleMarkerSymbol ../../../symbols ../../../core/Handles ../../../layers/GraphicsLayer ../../Sketch/SketchViewModel ./selectorUtils".split(" "),
function(a,g,r,A,v,t,p,b,k,n,l,q,C,w,x,c,m,f,e,d,h){r=function(F){function E(z){var y=F.call(this)||this;y._activeOptions=null;y._dashedFillSymbol=new x({color:[0,0,0,0],outline:{style:"dash",color:[12,207,255],width:2}});y._dashedLineSymbol=new w({style:"dash",color:[12,207,255],width:2});y._defaultOptions={tool:"rectangle",createOptions:null,selectionOptions:{overlaps:!0,intersects:!0,contains:!1}};y._completed=!1;y._handles=new f;y._sketchViewModel=new d;y._sketchGraphicsLayer=new e({listMode:"hide",
internal:!0});y._transparentPointSymbol=new c({color:[0,0,0,0],outline:{style:"none",width:0}});y.candidates=null;y.geometry=null;y.options=null;y.selection=new C;y.view=null;y.candidates=z.candidates;y.options=z.options;y.view=z.view;const {_dashedFillSymbol:B,_dashedLineSymbol:H,_sketchViewModel:D,_sketchGraphicsLayer:M,_transparentPointSymbol:U}=a._assertThisInitialized(y);D.set({layer:M,view:y.view,activePointSymbol:U,activeLineSymbol:H,activeVertexSymbol:U,activeFillSymbol:B,pointSymbol:U,polygonSymbol:B,
polylineSymbol:H,vertexSymbol:U});y._handles.add([D.on("create",R=>y._onSketchEvent(R)),D.on(["undo","redo"],R=>y._onSketchEvent(R))]);return y}a._inheritsLoose(E,F);var u=E.prototype;u.initialize=function(){this._load()};u.destroy=function(){this._handles.destroy();this._handles=null};u.cancel=function(){this._sketchViewModel.cancel()};u._load=async function(){await this.view.whenReady();const {options:z}=this,{tool:y,createOptions:B}=this._activeOptions={...this._defaultOptions,...z};this._sketchViewModel.create(y,
B)};u._onSketchEvent=function(z){const y="create"===z.type?z.graphic:z.graphics[0];this._processSelectionGeometry((null==y?void 0:y.geometry)||null,"create"===z.type&&"complete"===z.state,"create"===z.type&&"cancel"===z.state)};u._processSelectionGeometry=function(z,y,B){this._set("geometry",z);if(y||B)this._completed=!0;if(B)this._onComplete([],!0);else{var {_activeOptions:H,candidates:D,selection:M,view:U}=this;h.updateSelection({selector:z,candidates:D,currentSelection:M,options:H.selectionOptions,
view:U}).then(({added:R,removed:J})=>{y?this._onComplete(this.selection.toArray(),!1):(R.length||J.length)&&this.emit("selection-change",{added:R,removed:J,type:"selection-change"})})}};u._onComplete=function(z,y){this._handles.removeAll();this.notifyChange("state");this.emit("complete",{aborted:y,selection:z,type:"complete"})};a._createClass(E,[{key:"state",get:function(){const {_completed:z,_sketchViewModel:{state:y}}=this;return z?"complete":"active"===y?"active":"disabled"}}]);return E}(q.EventedAccessor);
g.__decorate([t.property()],r.prototype,"_completed",void 0);g.__decorate([t.property()],r.prototype,"candidates",void 0);g.__decorate([t.property({readOnly:!0})],r.prototype,"geometry",void 0);g.__decorate([t.property()],r.prototype,"options",void 0);g.__decorate([t.property({readOnly:!0})],r.prototype,"selection",void 0);g.__decorate([t.property({readOnly:!0})],r.prototype,"state",null);g.__decorate([t.property({value:null})],r.prototype,"view",void 0);return r=g.__decorate([b.subclass("esri.widgets.support.Selector")],
r)})},"*noref":1}});
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/aliasOf ../core/accessorSupport/decorators/cast ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/events ../core/Collection ../intl/substitute ../intl ./support/widgetUtils ./support/decorators/messageBundle ./support/decorators/vmEvent ../chunks/index ./Widget ../views/interactive/snapping/SnappingOptions ./Sketch/SketchViewModel ./support/Selector".split(" "),function(a,
g,r,A,v,t,p,b,k,n,l,q,C,w,x,c,m,f,e,d,h,F,E,u){const z={createTools:{point:!0,polyline:!0,polygon:!0,rectangle:!0,circle:!0},selectionTools:{"rectangle-selection":!0,"lasso-selection":!0},undoRedoMenu:!0,settingsMenu:!0};r=function(y){function B(D,M){D=y.call(this,D,M)||this;D._activeCreateOptions=null;D._activeSelectionInfo=null;D._menuOpen=!1;D._selector=new u;D.availableCreateTools=["point","polyline","polygon","rectangle","circle"];D.createGraphic=null;D.creationMode="continuous";D.defaultCreateOptions=
null;D.defaultUpdateOptions=null;D.iconClass="esri-icon-edit";D.label=void 0;D.layer=null;D.messages=null;D.snappingOptions=new F;D.updateGraphics=new w;D.view=null;D.viewModel=new E;D.visibleElements={...z};D._activateCreateTool=D._activateCreateTool.bind(a._assertThisInitialized(D));return D}a._inheritsLoose(B,y);var H=B.prototype;H.initialize=function(){const {view:D}=this;this._selector.view=D;this.own([this.viewModel.on("create",()=>this.scheduleRender()),this.viewModel.on("update",()=>this.scheduleRender()),
this.viewModel.on("create",M=>this._onCreateOperation(M)),this.viewModel.on("delete",M=>this.emit("delete",M)),this.viewModel.on("undo",()=>this.scheduleRender()),this.viewModel.on("redo",()=>this.scheduleRender()),this.viewModel.watch("view",M=>this._selector.set({view:M})),this.viewModel.watch("state",()=>this.notifyChange("state"))])};H.castVisibleElements=function(D){return{...z,...D,createTools:{...z.createTools,...null==D?void 0:D.createTools},selectionTools:{...z.selectionTools,...null==D?
void 0:D.selectionTools}}};H.create=function(D,M){this._activeCreateOptions=M||null;this.viewModel.create(D,M)};H.update=function(D,M){return this.viewModel.update(D,M)};H.complete=function(){};H.cancel=function(){this._cancelSelectionOperation();this.viewModel.cancel()};H.undo=function(){};H.redo=function(){};H.delete=function(){};H.render=function(){const {label:D,layout:M,viewModel:{state:U}}=this;return d.jsx("div",{"aria-label":D,class:this.classes("esri-sketch","esri-widget",{["esri-disabled"]:"disabled"===
U,["esri-sketch--vertical"]:"vertical"===M})},d.jsx("div",{role:"toolbar",class:"esri-sketch__panel"},this.renderTopPanelContents()),d.jsx("div",{class:this.classes("esri-sketch__panel","esri-sketch__info-panel")},this.renderInfoPanelContents()))};H.renderTopPanelContents=function(){const D=this.classes("esri-sketch__section","esri-sketch__tool-section"),{availableCreateTools:M,visibleElements:U}=this;return[d.jsx("div",{role:"menu",key:"selection-button-container",class:D},this.renderSelectionTools()),
M&&M.length?d.jsx("div",{role:"menu",class:D},this.renderDrawButtons()):null,U.undoRedoMenu?d.jsx("div",{role:"menu",key:"undo-redo-menu-button-container",class:D},this.renderUndoRedoMenuButtons()):null,U.settingsMenu?d.jsx("div",{key:"settings-menu-button-container",class:"esri-sketch__section"},this.renderSettingsMenuButton()):null]};H.renderInfoPanelContents=function(){if(this._menuOpen)return this.renderSettingsMenu();if(this.updateGraphics.length)return[d.jsx("div",{class:this.classes("esri-sketch__section",
"esri-sketch__info-section","esri-sketch__info-count-section"),key:"feature-count-container"},this.renderFeatureCount()),d.jsx("div",{class:this.classes("esri-sketch__section","esri-sketch__info-section"),key:"delete-button-container"},this.renderDeleteButton())]};H.renderSettingsMenu=function(){const {settings:D}=this.messages;return[d.jsx("div",{role:"menu",class:"esri-sketch__menu-container",key:"settings-menu-container"},d.jsx("header",{class:"esri-sketch__menu-header",key:"settings-menu-header"},
d.jsx("span",{class:"esri-sketch__menu-title"},D)),d.jsx("div",{class:"esri-sketch__menu-content",key:"settings-menu-content","aria-label":D},d.jsx("div",{class:"esri-sketch__menu-item-wrapper"},this.renderSnappingToggleMenuItem())))]};H.renderSnappingToggleMenuItem=function(){var D;return d.jsx("div",{class:"esri-sketch__menu-item","aria-label":null==(D=this.messages)?void 0:D.snappingEnabled,key:"sketch-snapping-action-toggle",role:"menuitem"},this.renderSnappingToggle())};H.renderSnappingToggle=
function(){const {messages:{snappingEnabled:D},viewModel:{snappingOptions:{enabled:M}}}=this,U=this.classes("esri-sketch__action-toggle",{["esri-sketch__action-toggle--on"]:M});return d.jsx("div",{bind:this,role:"button",onclick:this._onSnappingToggleClick,onkeydown:this._onSnappingToggleKeyDown,class:U,tabindex:"0",title:D,"aria-label":D},this.renderActionIcon(),d.jsx("span",{class:"esri-sketch__item-action-title"},D))};H._onSnappingToggleKeyDown=function(D){const M=C.eventKey(D);if("Enter"===M||
" "===M)D.preventDefault(),this._toggleSnapping()};H._onSnappingToggleClick=function(D){D.stopPropagation();this._toggleSnapping()};H.renderActionIcon=function(){return d.jsx("span",{key:"action-icon","aria-hidden":"true",class:this.classes("esri-sketch__item-action-icon")})};H.renderFeatureCount=function(){const {layout:D,messages:M,updateGraphics:{length:U}}=this,R=x.substitute(1===U?M.featureCount:M.featuresCount,{count:U});return d.jsx("div",{class:"esri-sketch__feature-count-badge","aria-label":R},
d.jsx("span",{class:"esri-sketch__feature-count-number"},"vertical"===D?U:R))};H.renderDeleteButton=function(){const D=this.messages.deleteFeature;return d.jsx("button",{"aria-label":D,bind:this,class:this.classes("esri-sketch__button","esri-icon-trash"),onclick:this.delete,title:D,type:"button"})};H.renderSelectionTools=function(){return[this.renderDefaultSelectionButton(),this.renderRectangleSelectionButton(),this.renderLassoSelectionButton()]};H.renderDefaultSelectionButton=function(){if(this.viewModel.updateOnGraphicClick){var D=
this.messages.selectFeature;return d.jsx("button",{"aria-label":D,bind:this,class:this.classes("esri-sketch__button","esri-icon-cursor",{["esri-sketch__button--selected"]:"ready"===this.state}),onclick:this.cancel,role:"menuitemradio",title:D})}};H.renderRectangleSelectionButton=function(){var D,M;if("2d"===(null==(D=this.view)?void 0:D.type)&&this.visibleElements.selectionTools["rectangle-selection"])return D=this.messages.selectRectangle,d.jsx("button",{"aria-label":D,bind:this,class:this.classes("esri-sketch__button",
"esri-icon-cursor-marquee",{["esri-sketch__button--selected"]:"rectangle-selection"===(null==(M=this._activeSelectionInfo)?void 0:M.tool)}),onclick:this._activateRectangleSelectTool,role:"menuitemradio",title:D})};H.renderLassoSelectionButton=function(){var D,M;if("2d"===(null==(D=this.view)?void 0:D.type)&&this.visibleElements.selectionTools["lasso-selection"])return D=this.messages.selectLasso,d.jsx("button",{"aria-label":D,bind:this,class:this.classes("esri-sketch__button","esri-icon-lasso",{["esri-sketch__button--selected"]:"lasso-selection"===
(null==(M=this._activeSelectionInfo)?void 0:M.tool)}),onclick:this._activateLassoSelectTool,role:"menuitemradio",title:D})};H.renderDrawButtons=function(){const D=this.visibleElements.createTools;return this.availableCreateTools.map(M=>{if("point"===M&&D.point)return this.renderPointButton();if("polyline"===M&&D.polyline)return this.renderPolylineButton();if("polygon"===M&&D.polygon)return this.renderPolygonButton();if("rectangle"===M&&D.rectangle)return this.renderRectangleButton();if("circle"===
M&&D.circle)return this.renderCircleButton()})};H.renderPointButton=function(){const D=this.messages.drawPoint,M=["esri-sketch__button","esri-icon-map-pin"];"point"===this.activeTool&&M.push("esri-sketch__button--selected");return d.jsx("button",{"aria-label":D,bind:this,class:this.classes(M),"data-tool-name":"point",onclick:this._activateCreateTool,role:"menuitemradio",title:D,type:"button"})};H.renderPolygonButton=function(){const D=this.messages.drawPolygon,M=["esri-sketch__button","esri-icon-polygon"];
"polygon"===this.activeTool&&M.push("esri-sketch__button--selected");return d.jsx("button",{"aria-label":D,bind:this,class:this.classes(M),"data-tool-name":"polygon",onclick:this._activateCreateTool,role:"menuitemradio",title:D,type:"button"})};H.renderPolylineButton=function(){const D=this.messages.drawPolyline,M=["esri-sketch__button","esri-icon-polyline"];"polyline"===this.activeTool&&M.push("esri-sketch__button--selected");return d.jsx("button",{"aria-label":D,bind:this,class:this.classes(M),
"data-tool-name":"polyline",onclick:this._activateCreateTool,role:"menuitemradio",title:D,type:"button"})};H.renderCircleButton=function(){const D=this.messages.drawCircle,M=["esri-sketch__button","esri-icon-radio-unchecked"];"circle"===this.activeTool&&M.push("esri-sketch__button--selected");return d.jsx("button",{"aria-label":D,bind:this,class:this.classes(M),"data-tool-name":"circle",onclick:this._activateCreateTool,role:"menuitemradio",title:D,type:"button"})};H.renderRectangleButton=function(){const D=
this.messages.drawRectangle,M=["esri-sketch__button","esri-icon-checkbox-unchecked"];"rectangle"===this.activeTool&&M.push("esri-sketch__button--selected");return d.jsx("button",{"aria-label":D,bind:this,class:this.classes(M),"data-tool-name":"rectangle",onclick:this._activateCreateTool,role:"menuitemradio",title:D,type:"button"})};H.renderUndoRedoMenuButtons=function(){return[this.renderUndoButton(),this.renderRedoButton()]};H.renderUndoButton=function(){const D=this.messages.undo,M=!this.viewModel.canUndo(),
U=m.isRTL()?"esri-icon-redo":"esri-icon-undo";return d.jsx("button",{"aria-label":D,bind:this,class:this.classes("esri-sketch__button",U),disabled:M,onclick:this.undo,title:D,type:"button"})};H.renderRedoButton=function(){const D=this.messages.redo,M=!this.viewModel.canRedo(),U=m.isRTL()?"esri-icon-undo":"esri-icon-redo";return d.jsx("button",{"aria-label":D,bind:this,class:this.classes("esri-sketch__button",U),disabled:M,onclick:this.redo,title:D,type:"button"})};H.renderSettingsMenuButton=function(){const D=
this.messages.settings,M=["esri-sketch__button","esri-icon-settings"];this._menuOpen&&M.push("esri-sketch__button--selected");return d.jsx("button",{"aria-label":D,bind:this,class:this.classes(M),onclick:this._toggleMenu,title:D,type:"button"})};H._cancelSelectionOperation=function(){var D,M;null==(D=this._activeSelectionInfo)?void 0:null==(M=D.operation)?void 0:M.cancel();this._activeSelectionInfo=null;this._selector.candidates=null};H._activateCreateTool=function(D){D=D.target.getAttribute("data-tool-name");
this.activeTool===D?this.cancel():(this._activeSelectionInfo&&this._cancelSelectionOperation(),this.create(D))};H._onCreateOperation=function(D){if("complete"===D.state){var {creationMode:M}=this,{type:U}=D;if("create"===U){const {tool:R,graphic:J}=D;D=this._activeCreateOptions;this._activeCreateOptions=null;"continuous"===M?this.create(R,D):"update"===M&&this.update([J])}}};H._toggleMenu=function(){this._menuOpen=!this._menuOpen;this.scheduleRender()};H._toggleSnapping=function(){const {viewModel:{snappingOptions:D}}=
this;this.viewModel.snappingOptions.enabled=!D.enabled;this.scheduleRender()};H._onSelectionOperationComplete=function(D){const {viewModel:{defaultUpdateOptions:M}}=this,{selection:U}=D;this._activeSelectionInfo=null;!D.aborted&&U.length&&(D=M.tool,this.update(U,{...M,tool:1<U.length&&"reshape"===D?"transform":D}));this.notifyChange("state")};H._activateRectangleSelectTool=function(){if(this._activeSelectionInfo){var D=this._activeSelectionInfo.tool;this._cancelSelectionOperation();if("rectangle-selection"===
D)return}else"active"===this.state&&this.cancel();this._selector.candidates=this._getSelectionCandidates();D=this._selector.draw({tool:"rectangle"});D.once("complete",M=>this._onSelectionOperationComplete(M));this._activeSelectionInfo={tool:"rectangle-selection",operation:D}};H._activateLassoSelectTool=function(){if(this._activeSelectionInfo){var D=this._activeSelectionInfo.tool;this._cancelSelectionOperation();if("lasso-selection"===D)return}else"active"===this.state&&this.cancel();this._selector.candidates=
this._getSelectionCandidates();D=this._selector.draw({tool:"polygon",createOptions:{mode:"freehand"}});D.once("complete",M=>this._onSelectionOperationComplete(M));this._activeSelectionInfo={tool:"lasso-selection",operation:D}};H._getSelectionCandidates=function(){var D,M;return(null==(D=this.layer)?void 0:null==(M=D.graphics)?void 0:M.toArray())||[]};a._createClass(B,[{key:"activeTool",get:function(){var D;return(null==(D=this._activeSelectionInfo)?void 0:D.tool)||this.viewModel.activeTool}},{key:"layout",
set:function(D){"vertical"!==D&&(D="horizontal");this._set("layout",D)}},{key:"state",get:function(){return this._activeSelectionInfo?"active":this.viewModel.state}}]);return B}(h);g.__decorate([v.property()],r.prototype,"_activeSelectionInfo",void 0);g.__decorate([v.property()],r.prototype,"activeTool",null);g.__decorate([v.property({cast:y=>{if(!y||!y.length)return null;const B=new Set(["point","polyline","polygon","rectangle","circle"]);return y.filter(H=>B.has(H))}})],r.prototype,"availableCreateTools",
void 0);g.__decorate([t.aliasOf("viewModel.createGraphic")],r.prototype,"createGraphic",void 0);g.__decorate([v.property()],r.prototype,"creationMode",void 0);g.__decorate([t.aliasOf("viewModel.defaultCreateOptions")],r.prototype,"defaultCreateOptions",void 0);g.__decorate([t.aliasOf("viewModel.defaultUpdateOptions")],r.prototype,"defaultUpdateOptions",void 0);g.__decorate([v.property()],r.prototype,"iconClass",void 0);g.__decorate([v.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],
r.prototype,"label",void 0);g.__decorate([t.aliasOf("viewModel.layer")],r.prototype,"layer",void 0);g.__decorate([v.property({value:"horizontal"})],r.prototype,"layout",null);g.__decorate([v.property(),f.messageBundle("esri/widgets/Sketch/t9n/Sketch")],r.prototype,"messages",void 0);g.__decorate([t.aliasOf("viewModel.snappingOptions")],r.prototype,"snappingOptions",void 0);g.__decorate([v.property()],r.prototype,"state",null);g.__decorate([t.aliasOf("viewModel.updateGraphics")],r.prototype,"updateGraphics",
void 0);g.__decorate([t.aliasOf("viewModel.view")],r.prototype,"view",void 0);g.__decorate([v.property(),e.vmEvent(["create","update","undo","redo"])],r.prototype,"viewModel",void 0);g.__decorate([v.property()],r.prototype,"visibleElements",void 0);g.__decorate([p.cast("visibleElements")],r.prototype,"castVisibleElements",null);g.__decorate([t.aliasOf("viewModel.complete")],r.prototype,"complete",null);g.__decorate([t.aliasOf("viewModel.undo")],r.prototype,"undo",null);g.__decorate([t.aliasOf("viewModel.redo")],
r.prototype,"redo",null);g.__decorate([t.aliasOf("viewModel.delete")],r.prototype,"delete",null);return r=g.__decorate([k.subclass("esri.widgets.Sketch")],r)});