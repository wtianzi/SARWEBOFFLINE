// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.19/esri/copyright.txt for details.
//>>built
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/aliasOf ../core/accessorSupport/decorators/cast ../core/deprecate ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/watchUtils ../core/HandleOwner ./support/widgetUtils ./support/decorators/messageBundle ./support/decorators/vmEvent ../chunks/index ./Widget ./FeatureTemplates/FeatureTemplatesViewModel ./FeatureTemplates/ItemList".split(" "),
function(l,e,b,u,k,q,v,w,H,x,I,J,K,y,z,L,A,B,r,C,D,E){function F(n){return n.label}const G=u.getLogger("esri.widgets.FeatureTemplates"),t={filter:!0};b=function(n){function p(a,d){a=n.call(this,a,d)||this;a._iconIntersectionObserver=new IntersectionObserver((f,m)=>{f.forEach(async c=>{if(c.isIntersecting&&(c=c.target,!c["data-has-icon"])){const g=c["data-item"];c["data-has-icon"]=!0;m.unobserve(c);await g.fetchThumbnail();c["data-item"]===g&&g.thumbnail?c.appendChild(g.thumbnail):(c["data-has-icon"]=
!1,m.observe(c))}})});a.filterFunction=null;a.filterText="";a.groupBy=null;a.label=void 0;a.layers=null;a.messages=null;a.viewModel=new D;a.visibleElements={...t};a.renderItemIcon=a.renderItemIcon.bind(l._assertThisInitialized(a));a._afterItemCreateOrUpdate=a._afterItemCreateOrUpdate.bind(l._assertThisInitialized(a));a._afterItemRemoved=a._afterItemRemoved.bind(l._assertThisInitialized(a));return a}l._inheritsLoose(p,n);var h=p.prototype;h.initialize=function(){const a=({label:d})=>!this.filterText||
-1<d.toLowerCase().indexOf(this.filterText.toLowerCase());this.own(y.init(this,"viewModel",(d,f)=>{d&&!d.filterFunction&&(this.filterFunction=a);f&&f!==d&&f.filterFunction===a&&(f.filterFunction=null)}))};h.destroy=function(){this._iconIntersectionObserver&&(this._iconIntersectionObserver.disconnect(),this._iconIntersectionObserver=null)};h.castVisibleElements=function(a){return{...t,...a}};h.render=function(){const {filterText:a,messages:d,viewModel:{items:f,state:m}}=this,c=this.visibleElements.filter;
return r.jsx("div",{class:this.classes("esri-feature-templates","esri-widget"),"aria-label":d.widgetLabel},"loading"===m?this.renderLoader():"ready"===m?E.ItemList({id:this.id,identify:F,filterText:a,items:f,messages:{filterPlaceholder:d.filterPlaceholder,noItems:d.noItems,noMatches:d.noMatches},filterEnabled:c,onItemSelect:g=>{this.viewModel.select(g)},onFilterChange:g=>{this.filterText=g;this.viewModel.refresh()},renderIcon:this.renderItemIcon}):null)};h.renderItemIcon=function({item:a}){return r.jsx("span",
{key:"icon",class:"esri-feature-templates__list-item-icon",afterCreate:this._afterItemCreateOrUpdate,afterUpdate:this._afterItemCreateOrUpdate,afterRemoved:this._afterItemRemoved,"data-item":a,"data-has-icon":!1})};h.renderLoader=function(){return r.jsx("div",{class:"esri-feature-templates__loader",key:"loader"})};h._afterItemCreateOrUpdate=function(a){this._iconIntersectionObserver.observe(a)};h._afterItemRemoved=function(a){this._iconIntersectionObserver.unobserve(a)};l._createClass(p,[{key:"filterEnabled",
set:function(a){w.deprecatedProperty(G,"filterEnabled",{replacement:"visibleElements.filter",version:"4.15"});this.visibleElements={...this.visibleElements,filter:a}}}]);return p}(z.HandleOwnerMixin(C));e.__decorate([k.property()],b.prototype,"filterEnabled",null);e.__decorate([q.aliasOf("viewModel.filterFunction")],b.prototype,"filterFunction",void 0);e.__decorate([k.property()],b.prototype,"filterText",void 0);e.__decorate([q.aliasOf("viewModel.groupBy")],b.prototype,"groupBy",void 0);e.__decorate([k.property({aliasOf:{source:"messages.widgetLabel",
overridable:!0}})],b.prototype,"label",void 0);e.__decorate([q.aliasOf("viewModel.layers")],b.prototype,"layers",void 0);e.__decorate([k.property(),A.messageBundle("esri/widgets/FeatureTemplates/t9n/FeatureTemplates")],b.prototype,"messages",void 0);e.__decorate([k.property(),B.vmEvent("select")],b.prototype,"viewModel",void 0);e.__decorate([k.property()],b.prototype,"visibleElements",void 0);e.__decorate([v.cast("visibleElements")],b.prototype,"castVisibleElements",null);return b=e.__decorate([x.subclass("esri.widgets.FeatureTemplates")],
b)});