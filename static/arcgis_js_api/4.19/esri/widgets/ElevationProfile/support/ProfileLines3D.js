// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.19/esri/copyright.txt for details.
//>>built
define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/maybe ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../../core/accessorSupport/trackingUtils ../../../core/Accessor ../../../geometry/Polyline ../../../Color ../../../core/Handles ../../../core/throttle ../../../chunks/vec4f64 ./constants ../../../views/3d/interactive/visualElements/OutlineVisualElement".split(" "),
function(h,r,l,F,k,G,H,p,I,t,J,K,L,u,v,w,x,y,z,A,B,C){h.ProfileLines3D=function(q){function m(a){a=q.call(this,a)||this;a._chartData=null;a._visualElements=[];a._handles=new y;return a}r._inheritsLoose(m,q);var f=m.prototype;f.initialize=function(){const a=z.throttle(c=>{this._update(c)},100);this._handles.add([u.reactionInit(()=>({spatialReference:this.view.spatialReference,chartData:this._chartData}),a),a])};f.destroy=function(){this._handles.destroy();this._destroyVisualElements()};f.remove=function(){this._destroyVisualElements()};
f.update=function(a){this._chartData=a};f._update=function(a){var {chartData:c}=a;if(k.isNone(c))return this.remove();if(c.fullyRefined){c=c.lines.filter(d=>this._shouldDisplayLine(d));for(var g=c.length;this._visualElements.length>g;)this._visualElements.pop().destroy();for(var b=B.PROFILE_LINES_STYLE_3D;this._visualElements.length<g;){var e=new C.OutlineVisualElement({view:this.view,elevationInfo:{mode:"absolute-height",offset:0},innerWidth:b.width-b.outlineSize,width:b.width,falloff:b.falloff,
color:b.outlineColor,renderOccluded:b.renderOccluded});this._visualElements.push(e)}a=a.spatialReference;for(b=0;b<g;++b){e=this._visualElements[b];const d=c[g-1-b];e.geometry=this._createLineGeometry(d,a);e.innerColor=A.fromArray(x.toUnitRGBA(d.color))}}};f._shouldDisplayLine=function(a){return"input"===a.type?!1:!0};f._createLineGeometry=function(a,c){a=k.unwrapOr(a.samples,[]);const g=a.length-1,b=[];let e=[];for(let d=0;d<=g;d++){const {x:D,y:E,z:n}=a[d];k.isSome(n)&&e.push([D,E,n]);(d===g||k.isNone(n))&&
e.length&&(b.push(e),e=[])}return new w({paths:b,hasZ:!0,spatialReference:c})};f._destroyVisualElements=function(){this._visualElements.forEach(a=>a.destroy());this._visualElements.length=0};return m}(v);l.__decorate([p.property()],h.ProfileLines3D.prototype,"view",void 0);l.__decorate([p.property()],h.ProfileLines3D.prototype,"_chartData",void 0);h.ProfileLines3D=l.__decorate([t.subclass("esri.widgets.ElevationProfile.support.ProfileLines3D")],h.ProfileLines3D);Object.defineProperty(h,"__esModule",
{value:!0})});