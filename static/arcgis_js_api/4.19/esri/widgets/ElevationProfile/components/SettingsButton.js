// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.19/esri/copyright.txt for details.
//>>built
define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/maybe ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/handleUtils ../../../core/accessorSupport/decorators/property ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../../core/events ../../../core/unitUtils ../../support/widgetUtils ../../support/decorators/messageBundle ../../../chunks/index ../../Widget ../../support/Popover ../css".split(" "),
function(d,r,f,z,e,A,B,t,g,C,u,D,E,F,n,v,G,p,h,w,x,l){d.SettingsButton=function(q){function m(a,b){a=q.call(this,a,b)||this;a._messagesUnits=null;a._popover=null;a._buttonElement=null;a._clickOutsideHandle=null;a._requestFocusOnCreate=!1;return a}r._inheritsLoose(m,q);var c=m.prototype;c.destroy=function(){this._destroyPopover()};c.render=function(){const a=e.isSome(this._popover)&&this._popover.open?this._messages.hideSettings:this._messages.showSettings;return h.jsx("button",{class:l.SETTINGS_CSS.base,
title:a,bind:this,afterCreate:this._initializePopover,onclick:this._togglePopover,"aria-label":a})};c._initializePopover=function(a){this._destroyPopover();this._buttonElement=a;this._popover=new x({owner:this,placement:"bottom-end",offset:[0,0],anchorElement:a,renderContentFunction:()=>this._renderPopoverContent()})};c._destroyPopover=function(){e.applySome(this._clickOutsideHandle,a=>a.remove());e.destroyMaybe(this._popover)};c._renderPopoverContent=function(){const a=this._messagesUnits,{unit:b,
unitOptions:y}=this;return h.jsx("div",{class:l.SETTINGS_CSS.popoverContent,bind:this,onkeydown:this._onPopoverKeyDown,afterCreate:this._onPopoverContentAfterCreate},h.jsx("label",{class:l.SETTINGS_CSS.selectLabel},this._messages.unitSelectLabel),h.jsx("select",{class:l.SETTINGS_CSS.select,value:b,bind:this,onchange:this._onUnitChange,afterCreate:this._onUnitSelectAfterCreate},y.map(k=>h.jsx("option",{key:k,value:k},v.isMeasurementSystem(k)?a.systems[k]:a.units[k].pluralCapitalized))))};c._onUnitChange=
function(a){this.onUnitChange(a.target.value);this._closePopover()};c._onUnitSelectAfterCreate=function(a){this._requestFocusOnCreate&&(this._requestFocusOnCreate=!1,a.focus())};c._onPopoverKeyDown=function(a){switch(a.key){case "Enter":case "Escape":a.stopPropagation(),a.preventDefault(),this._closePopover()}};c._togglePopover=function(a){e.isSome(this._popover)&&this._popover.open?this._closePopover():this._openPopover()};c._openPopover=function(){e.applySome(this._popover,a=>a.open=!0);this._requestFocusOnCreate=
!0};c._closePopover=function({focusOnButton:a=!0}={}){e.applySome(this._popover,b=>b.open=!1);e.applySome(this._clickOutsideHandle,b=>b.remove());a&&e.applySome(this._buttonElement,b=>b.focus())};c._onPopoverContentAfterCreate=function(a){e.applySome(this._clickOutsideHandle,b=>b.remove());this._clickOutsideHandle=t.handlesGroup([n.on(a,"click",b=>b.stopPropagation()),n.on(window,"click",()=>this._closePopover({focusOnButton:!1}))])};return m}(w);f.__decorate([g.property()],d.SettingsButton.prototype,
"unit",void 0);f.__decorate([g.property()],d.SettingsButton.prototype,"unitOptions",void 0);f.__decorate([g.property()],d.SettingsButton.prototype,"onUnitChange",void 0);f.__decorate([g.property(),p.messageBundle("esri/widgets/ElevationProfile/t9n/ElevationProfile")],d.SettingsButton.prototype,"_messages",void 0);f.__decorate([g.property(),p.messageBundle("esri/core/t9n/Units")],d.SettingsButton.prototype,"_messagesUnits",void 0);d.SettingsButton=f.__decorate([u.subclass("esri.widgets.ElevationProfile.SettingsButton")],
d.SettingsButton);Object.defineProperty(d,"__esModule",{value:!0})});