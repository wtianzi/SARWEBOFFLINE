// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.19/esri/copyright.txt for details.
//>>built
define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/deprecate ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/accessorSupport/tracking ../core/promiseUtils ../core/accessorSupport/tracking/SimpleTrackingTarget ../core/Evented ../intl/locale ../intl/messages ../intl ../core/Promise ../core/Handles ../core/watchUtils ../core/domUtils ./support/widgetUtils ../libs/maquette/projection ../libs/maquette/projector".split(" "),
function(p,e,d,z,h,A,B,Q,C,R,D,S,E,l,F,G,H,I,T,J,K,t,L,u,U,M){const v=z.getLogger("esri.widgets.Widget");let N=0;const O=M.createProjector();let q=!1;d=function(w){function m(a,g){var b=w.call(this,a,g)||this;b._attached=!1;b._internalHandles=new K;b._projector=O;b.domNode=null;b.iconClass="esri-icon-checkbox-unchecked";b.label=b.declaredClass.split(".").pop();b.visible=!0;b._loadLocale=l.debounce(async()=>{if(b._messageBundleProps&&b._messageBundleProps.length){const f=await l.eachAlways(b._messageBundleProps.map(async({bundlePath:n,
propertyName:P})=>{b[P]=await I.fetchMessageBundle(n)}));for(const n of f)n.error&&v.error("widget-intl:locale-error",b.declaredClass,n.error)}await b.loadLocale()});a=u.getThemeName()||"light";["light","dark"].includes(a)||B.deprecated(v,"The following themes are deprecated: light-blue, dark-blue, light-green, dark-green, light-purple, dark-purple, light-red, and dark-red.",{version:"4.19",warnOnce:!0,see:"https://developers.arcgis.com/javascript/latest/styling/"});const k="esri-widget-uid-"+D.generateUUID(),
r=b.render.bind(p._assertThisInitialized(b));let x=!1;b._trackingTarget=new F.SimpleTrackingTarget(()=>b.scheduleRender());const y=()=>{if(!x||b.destroyed)return null;const f=r();f.properties?f.properties.key||(f.properties.key=k):f.properties={key:k};return f};b.render=()=>{if(q)return y();b._trackingTarget.clear();q=!0;let f;try{f=E.runTracked(b._trackingTarget,y)}finally{q=!1}return f};b.addResolvingPromise(b._resourcesFetch=b.beforeFirstRender().then(()=>{x=!0;b._postInitialize()}));return b}
p._inheritsLoose(m,w);var c=m.prototype;c.normalizeCtorArgs=function(a,g){a={...a};g&&(a.container=g);return a};c.postInitialize=function(){};c.beforeFirstRender=function(){return this._loadLocale().catch(l.throwIfNotAbortError)};c.loadLocale=async function(){};c.destroy=function(){this.destroyed||(this._trackingTarget.destroy(),this._trackingTarget=null,this.viewModel&&(this.viewModel.destroy(),this.viewModel=null),this._detach(this.container),this._set("container",null),this._internalHandles.destroy(),
this._emitter.clear(),this.render=()=>null,this._projector=null)};c.castContainer=function(a){return L.byId(a)};c.render=function(){throw Error("not implemented");};c.scheduleRender=function(){this.destroyed||this._projector.scheduleRender()};c.classes=function(...a){return u.classes.apply(this,a)};c.own=function(a){1<arguments.length&&(a=Array.prototype.slice.call(arguments));this._internalHandles.add(a)};c.renderNow=function(){this._projector.renderNow()};c._postInitialize=function(){var a;this.destroyed||
(this.scheduleRender(),null!=(a=this._delegatedEventNames)&&a.length&&this._internalHandles.add(t.init(this,"viewModel",(g,b)=>{b&&this._internalHandles.remove("delegated-events");g&&this._internalHandles.add(this._delegatedEventNames.map(k=>g.on(k,r=>{this.emit(k,r)})),"delegated-events")})),this.postInitialize(),this._internalHandles.add(H.onLocaleChange(async()=>{await this._loadLocale().catch(l.throwIfNotAbortError);this.scheduleRender()})),this._internalHandles.add(t.whenOnce(this,"container",
async g=>{this.destroyed||this._attach(g)})))};c._attach=function(a){a&&(this._projector.merge(a,this.render),this._attached=!0)};c._detach=function(a){a&&this._attached&&(this._projector.detach(this.render),a.parentNode&&a.parentNode.removeChild(a),this._attached=!1)};p._createClass(m,[{key:"container",set:function(a){this._get("container")||this._set("container",a)}},{key:"id",get:function(){return this._get("id")||this.get("container.id")||Date.now().toString(16)+"-widget-"+N++},set:function(a){a&&
this._set("id",a)}},{key:"renderable",get:function(){return this._resourcesFetch}}]);return m}(J.EsriPromiseMixin(G.EventedAccessor));e.__decorate([h.property({value:null})],d.prototype,"container",null);e.__decorate([A.cast("container")],d.prototype,"castContainer",null);e.__decorate([h.property({aliasOf:"container"})],d.prototype,"domNode",void 0);e.__decorate([h.property()],d.prototype,"iconClass",void 0);e.__decorate([h.property()],d.prototype,"id",null);e.__decorate([h.property()],d.prototype,
"label",void 0);e.__decorate([h.property()],d.prototype,"renderable",null);e.__decorate([h.property()],d.prototype,"viewModel",void 0);e.__decorate([h.property()],d.prototype,"visible",void 0);return d=e.__decorate([C.subclass("esri.widgets.Widget")],d)});