// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.19/esri/copyright.txt for details.
//>>built
require({cache:{"esri/webmap/background/ColorBackground":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/lang ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../Color".split(" "),function(h,b,k,p,D,l,u,H,J,w,r,n,A,e){var d;
k=d=function(c){function q(E){E=c.call(this,E)||this;E.color=new e([0,0,0,1]);return E}h._inheritsLoose(q,c);q.prototype.clone=function(){return new d(p.clone({color:this.color}))};return q}(A.JSONSupport);b.__decorate([u.property({type:e,json:{write:!0}})],k.prototype,"color",void 0);return k=d=b.__decorate([J.subclass("esri.webmap.background.ColorBackground")],k)})},"esri/views/support/screenshotUtils":function(){define(["exports","../../core/has","../../core/mathUtils"],function(h,b,k){function p(d,
c){const {format:q,quality:E,rotation:z,disableDecorations:F}=d||{};var B=J(d,c.padding);var y=c.width-B.left-B.right;c=c.height-B.top-B.bottom;B={x:0,y:0,width:y,height:c};if(d&&d.area){null!=d.area.x&&(B.x=Math.floor(d.area.x));null!=d.area.y&&(B.y=Math.floor(d.area.y));var v=null!=d.area.width?Math.floor(d.area.width):null,m=null!=d.area.height?Math.floor(d.area.height):null;B.width=y-B.x;B.height=c-B.y;null!=v&&null!=m?(B.width=Math.min(B.width,v),B.height=Math.min(B.height,m)):null==v&&null!=
m?(v=Math.min(B.width,v),B.height*=v/B.width,B.width=v):null!=v&&null==m&&(v=Math.min(B.height,m),B.width*=v/B.height,B.height=v)}B=H(B,d);v=Math.floor(Math.max(B.x,0));m=Math.floor(Math.max(B.y,0));y={x:v,y:m,width:Math.floor(Math.min(B.width,y-v)),height:Math.floor(Math.min(B.height,c-m))};c=y.width/y.height;B=B.width/B.height;B!==c&&(B>c?(c=Math.floor(y.width/B),y={x:y.x,y:Math.floor(y.y+(y.height-c)/2),width:y.width,height:c}):(c=Math.floor(y.height*B),y={x:Math.floor(y.x+(y.width-c)/2),y:y.y,
width:c,height:y.height}));const {width:t,height:L}=u(d,y);a:switch(q){case "png":case "jpg":case "jpeg":c=q;break a;case null:case void 0:c="png";break a;default:c="png"}B=A[c];B=k.clamp(null!=E?E:B,0,100);return{format:c,quality:B,area:y,width:t,height:L,rotation:z,disableDecorations:!!F,ignoreBackground:!(!d||!d.ignoreBackground),ignorePadding:!(!d||!d.ignorePadding)}}function D(d,c){return d.toDataURL(n[c.format],c.quality/100)}function l(d,c,q){q||(w||(w=document.createElement("canvas"),w.width=
1,w.height=1),q=w);return q.getContext("2d").createImageData(d,c)}function u(d,c){if(!d)return c;const q=d.width;d=d.height;if(null!=q&&null!=d)return{width:Math.floor(q),height:Math.floor(d)};if(null==q&&null==d)return c;c=c.width/c.height;return null==d?{width:Math.floor(q),height:Math.floor(q/c)}:{width:Math.floor(d*c),height:Math.floor(d)}}function H(d,c){if(!c||null==c.width||null==c.height)return d;c=c.width/c.height;const q=d.width/d.height;if(q===c)return d;if(q<c)return c=Math.floor(d.height*
c),d.x-=(c-d.width)/2,d.width=c,d;c=Math.floor(d.width/c);d.y-=(c-d.height)/2;d.height=c;return d}function J(d,c){return!c||d&&d.ignorePadding?e:c}let w=null,r=!0;const n={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},A={png:100,jpg:98,jpeg:98},e={top:0,right:0,bottom:0,left:0};h.completeUserSettings=p;h.createEmptyImageData=function(d,c,q){if(!d||!c)throw Error("Cannot construct image data without dimensions");if(r)try{return new ImageData(d,c)}catch(E){r=!1}return l(d,c,q)};h.encodeResult=
function(d,c,q,E){if(E.premultipliedAlpha){{var z=d.data;const B=z.length;for(let y=0;y<B;y+=4){var F=z[y+3];0<F&&(F/=255,z[y+0]/=F,z[y+1]/=F,z[y+2]/=F)}}}q.width=d.width;q.height=d.height;z=q.getContext("2d");z.putImageData(d,0,0);E.flipY&&(z.save(),z.globalCompositeOperation="copy",z.scale(1,-1),z.translate(0,-z.canvas.height),z.drawImage(z.canvas,0,0),z.restore());d=z.getImageData(0,0,d.width,d.height);c=D(q,c);q.width=0;q.height=0;return{dataUrl:c,data:d}};h.resampleHermite=function(d,c,q,E=0,
z=0,F=d.width-E,B=d.height-z,y=!1){const {data:v}=d,{width:m,height:t,data:L}=c;F/=m;B/=t;const K=Math.ceil(F/2),N=Math.ceil(B/2);d=d.width;for(let fa=0;fa<t;fa++)for(let ka=0;ka<m;ka++){const x=4*(ka+(y?t-fa-1:fa)*m);let G=0,V=0,na=0,R=0,S=0,W=0;const ja=(fa+.5)*B;for(let ma=Math.floor(fa*B);ma<(fa+1)*B;ma++){var Y=Math.abs(ja-(ma+.5))/N;const ca=(ka+.5)*F;Y*=Y;for(let U=Math.floor(ka*F);U<(ka+1)*F;U++){var da=Math.abs(ca-(U+.5))/K;da=Math.sqrt(Y+da*da);if(1<=da)continue;da=2*da*da*da-3*da*da+1;
const aa=4*(E+U+(z+ma)*d);W+=da*v[aa+3];V+=da;!q&&255>v[aa+3]&&(da=da*v[aa+3]/255);na+=da*v[aa];R+=da*v[aa+1];S+=da*v[aa+2];G+=da}}L[x]=na/G;L[x+1]=R/G;L[x+2]=S/G;L[x+3]=W/V}return c};h.screenshotSuperSampleSettings=function(d,c,q){if(!c)return d;const {framebufferWidth:E,framebufferHeight:z,pixelRatio:F,region:B}=d;c=J(d,q);q=c.left+c.right;const y=c.top+c.bottom,v=E-q,m=z-y,t=Math.min(8,Math.min((2048-q)/v,(2048-y)/m));return 1.5>t?d:{...d,framebufferWidth:Math.round(v*t)+q,framebufferHeight:Math.round(m*
t)+y,pixelRatio:F*t,resample:{region:{x:Math.round((B.x-c.left)*t)+c.left,y:Math.round((B.y-c.top)*t)+c.top,width:Math.round(B.width*t),height:Math.round(B.height*t)},width:E,height:z}}};h.toDataUrl=D;h.toRenderSettings=function(d,c){const q=p(d,c),E=q.area,z=q.width/E.width,F=J(q,c.padding),B=F.left+F.right,y=F.top+F.bottom;return{framebufferWidth:Math.floor((c.width-B)*z+B),framebufferHeight:Math.floor((c.height-y)*z+y),region:{x:Math.floor(E.x*z)+F.left,y:Math.floor(E.y*z)+F.top,width:q.width,
height:q.height},format:q.format,quality:q.quality,rotation:q.rotation,pixelRatio:z,layers:d&&d.layers?d.layers:[],disableDecorations:q.disableDecorations,ignoreBackground:q.ignoreBackground,ignorePadding:q.ignorePadding}};h.wrapImageData=function(d,c,q,E){if(!c||!q)throw Error("Cannot construct image data without dimensions");if(r)try{return new ImageData(d,c,q)}catch(z){r=!1}c=l(c,q,E);c.data.set(d,0);return c};Object.defineProperty(h,"__esModule",{value:!0})})},"esri/views/BreakpointsOwner":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/ArrayPool ../core/Handles ../core/watchUtils".split(" "),
function(h,b,k,p,D,l,u,H,J,w,r,n,A,e,d){function c(z,F){return F?q[z].valueToClassName[F].split(" "):[]}const q={widthBreakpoint:{getValue(z){const F=z.viewSize[0];z=z.breakpoints;const B=this.values;return F<=z.xsmall?B.xsmall:F<=z.small?B.small:F<=z.medium?B.medium:F<=z.large?B.large:B.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",
small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",
xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(z){const F=z.viewSize[1];z=z.breakpoints;const B=this.values;return F<=z.xsmall?B.xsmall:F<=z.small?B.small:F<=z.medium?B.medium:F<=z.large?B.large:B.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",
small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",
xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(z){z=z.viewSize;const F=this.values;return z[1]>=z[0]?F.portrait:F.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},E={xsmall:544,small:768,medium:992,large:1200};h.BreakpointsOwner=
z=>{z=function(F){function B(...v){v=F.call(this,...v)||this;v._breakpointsHandles=new e;v.orientation=null;v.widthBreakpoint=null;v.heightBreakpoint=null;v.breakpoints=E;return v}b._inheritsLoose(B,F);var y=B.prototype;y.initialize=function(){this._breakpointsHandles.add(d.init(this,["breakpoints","size"],this._updateClassNames))};y.destroy=function(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles.destroy(),this._breakpointsHandles=null)};y._updateClassNames=function(){if(this.container){var v=
A.acquire(),m=A.acquire(),t=!1,L;for(L in q){const K=this[L],N=q[L].getValue({viewSize:this.size,breakpoints:this.breakpoints});K!==N&&(t=!0,this[L]=N,c(L,K).forEach(Y=>m.push(Y)),c(L,N).forEach(Y=>v.push(Y)))}t&&(this._applyClassNameChanges(v,m),A.release(v),A.release(m))}};y._applyClassNameChanges=function(v,m){const t=this.container;t&&(m.forEach(L=>t.classList.remove(L)),v.forEach(L=>t.classList.add(L)))};y._removeActiveClassNames=function(){const v=this.container;if(v)for(var m in q)c(m,this[m]).forEach(t=>
v.classList.remove(t))};b._createClass(B,[{key:"breakpoints",set:function(v){var m=this._get("breakpoints");if(v!==m){m=(m=v)&&m.xsmall<m.small&&m.small<m.medium&&m.medium<m.large;if(!m){const t=JSON.stringify(E,null,2);console.warn("provided breakpoints are not valid, using defaults:"+t)}v=m?v:E;this._set("breakpoints",{...v})}}}]);return B}(z);k.__decorate([u.property()],z.prototype,"breakpoints",null);k.__decorate([u.property()],z.prototype,"orientation",void 0);k.__decorate([u.property()],z.prototype,
"widthBreakpoint",void 0);k.__decorate([u.property()],z.prototype,"heightBreakpoint",void 0);return z=k.__decorate([J.subclass("esri.views.BreakpointsOwner")],z)};Object.defineProperty(h,"__esModule",{value:!0})})},"esri/views/MapViewBase":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/maybe ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/Error ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/promiseUtils ../geometry/SpatialReference ../geometry/support/webMercatorUtils ../geometry/Point ../geometry/Extent ../geometry ../core/screenUtils ../Viewpoint ../core/watchUtils ../layers/support/TileInfo ./2d/tiling/TileKey ./PopupView ./View ./ViewAnimation ./2d/viewpointUtils ./2d/AnimationManager ./2d/FrameTask ./2d/layerViewModuleImportUtils ./2d/MapViewConstraints ./2d/PaddedViewState ./2d/tiling/PagedTileQueue ./2d/tiling/TileInfoView ./2d/tiling/TileQueue ./2d/tiling/TileStrategy ./2d/support/Timeline".split(" "),
function(h,b,k,p,D,l,u,H,J,w,r,n,A,e,d,c,q,E,z,F,B,y,v,m,t,L,K,N,Y,da,fa,ka,x,G,V,na,R,S){const W=D.getLogger("esri.views.MapView");k=function(ja){function ma(U){var aa=ja.call(this,U)||this;aa._stationaryTimer=null;aa.frameTask=new da(h._assertThisInitialized(aa));aa.featuresTilingScheme=null;aa.fullOpacity=1;aa.graphicsView=null;aa.initialExtent=null;aa.labelManager=null;aa.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0};aa.resizeAlign=
"center";aa.supportsGround=!1;aa.timeline=new S.Timeline;aa.type="2d";aa.constraints=new ka;aa.padding={top:0,right:0,bottom:0,left:0};const sa=aa.handles,la=()=>aa.notifyChange("updating");sa.add([aa.watch("viewpoint",()=>{aa._lastStationaryEventTimestamp=performance.now();aa._flipStationary(160)},!0),aa.on("resize",a=>aa._resizeHandler(a)),aa.watch("animationManager.animation",a=>{aa.animation=a}),aa.allLayerViews.on("change",()=>{la();sa.remove("map-view-base-layerViewsUpdating");sa.add(aa.allLayerViews.map(a=>
a.watch("updating",la)),"map-view-base-layerViewsUpdating")})],"map-view-base");return aa}h._inheritsLoose(ma,ja);var ca=ma.prototype;ca.destroy=function(){this.destroyed||(this._set("preconditionsReady",!1),this._gotoTask=this.frameTask=null)};ca.goTo=function(U,aa){if(U)return this.animation&&(this.animation=null),this._createAnimation(),y.whenTrueOnce(this,"ready",aa&&aa.signal).then(()=>{const sa={animate:!0,...aa},la=N.createAsync(U,this);this.animation.update(la);this._gotoTask={};return sa.animate?
this._gotoAnimated(la,sa):this._gotoImmediate(la,sa)});W.error("#goTo()","target cannot be null or undefined")};ca.hitTest=function(U){return Promise.reject("Should be implemented by subclasses")};ca.popupHitTest=function(U){return this.hitTest(U).then(aa=>({...aa,mapPoint:this.toMap(U)}))};ca.toMap=function(U){if(!this.ready)return null;const [aa,sa]=this.state.toMap([0,0],[U.x,U.y]);return new q({x:aa,y:sa,spatialReference:this.spatialReference})};ca.isTileInfoRequired=function(){return!0};ca.toScreen=
function(U){if(!this.ready)return null;U=this._normalizeInput(U);U=[U.x,U.y];this.state.toScreen(U,U);return F.createScreenPoint(U[0],U[1])};ca.pixelSizeAt=function(){return this.ready?this.state.resolution:(W.error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)};ca.requestUpdate=function(){this.ready&&this.frameTask.requestUpdate()};ca.getDefaultSpatialReference=function(){return this.get("map.initialViewProperties.spatialReference")||this.get("defaultsFromMap.spatialReference")||
null};ca.isSpatialReferenceSupported=function(U,aa){return aa||this._get("ready")?!0:null!==this._getDefaultViewpoint()};ca.importLayerView=function(U){return fa.layerView2DImporter.importLayerView(U)};ca.hasLayerViewModule=function(U){return fa.layerView2DImporter.hasLayerViewModule(U)};ca._createAnimation=function(){if(!this.animation||this.animation.done)this.animation=new K;return this.animation};ca._cancellableGoTo=function(U,aa,sa){const la=()=>U===this._gotoTask,a=sa.then(()=>{la()&&(this.animation=
null)}).catch(g=>{la()&&(this.animation=null,aa.done||(aa.stop(),this.frameTask.animationInProgress=!1));throw g;}),f=new Promise(g=>g(a));aa.when().catch(()=>{la()&&f.cancel&&f.cancel()});return f};ca._gotoImmediate=function(U,aa){const sa=this._gotoTask,la=this.animation;U=U.then(a=>{e.throwIfAborted(aa);if(sa!==this._gotoTask)throw new w("view:goto-interrupted","Goto was interrupted");this.viewpoint=la.target=a;la.finish()});return this._cancellableGoTo(sa,la,U)};ca._gotoAnimated=function(U,aa){const sa=
this._gotoTask,la=this.animation;U=U.then(a=>{e.throwIfAborted(aa);if(sa!==this._gotoTask)throw new w("view:goto-interrupted","Goto was interrupted");la.update(a);this.animationManager.animate(la,this.viewpoint,aa);return la.when().then(()=>{},()=>{})});return this._cancellableGoTo(sa,la,U)};ca._resizeHandler=function(U){const aa=this.state;if(aa){var sa=this.state.paddedViewState.viewpoint,la=this.state.paddedViewState.size.concat();aa.size=[U.width,U.height];N.resize(sa,sa,la,this.state.paddedViewState.size,
this.resizeAlign);sa=this.constraints.constrain(sa,null);this.state.viewpoint=sa}};ca._startup=function(){const U=this._getDefaultViewpoint();this.constraints.view=this;this.constraints.fit(U);this._set("animationManager",new Y({view:this}));this._set("state",new x({padding:this._get("padding"),size:this.size,viewpoint:U}));this._set("featuresTilingScheme",new V(v.create({spatialReference:this.spatialReference,size:512})));this._set("ready",!0);this.frameTask&&this.frameTask.start()};ca._teardown=
function(){this.frameTask&&this.frameTask.stop();this._set("ready",!1);this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null);const {center:[U,aa],spatialReference:sa,rotation:la,scale:a}=this.state.paddedViewState,f=new q({x:U,y:aa,spatialReference:sa});this._set("viewpoint",null);this._set("extent",null);this._set("center",f);this._set("zoom",-1);this._set("rotation",la);this._set("scale",a);this._set("spatialReference",sa);this.constraints.view=null;this.animationManager.destroy();
this._set("animationManager",null);this._set("state",null);this.animation=null};ca._flipStationary=function(U){return null!==this._stationaryTimer?this._stationaryTimer:this._stationaryTimer=setTimeout(()=>{this._stationaryTimer=null;const aa=performance.now()-this._lastStationaryEventTimestamp;160>aa&&(this._stationaryTimer=this._flipStationary(aa))},U)};ca._normalizeInput=function(U,aa=this.spatialReference){const sa=U&&U.targetGeometry||U;return aa?sa?aa.equals(sa.spatialReference)?U:c.canProject(sa,
aa)?U&&"esri.Viewpoint"===U.declaredClass?(U.targetGeometry=c.project(sa,aa),U):c.project(sa,aa):null:null:U};ca._getDefaultViewpoint=function(){var U=this.constraints,aa=this._get("zoom"),sa=this._get("scale"),la=this._normalizeInput(this._get("center")),a=this._normalizeInput(this._get("extent")),f=this._get("rotation"),g=this._normalizeInput(this._get("viewpoint"));U.effectiveLODs?-1!==aa&&(sa=U.zoomToScale(aa)):aa=-1;let C=null;var I=null;aa=0;U=g&&g.rotation;var O=g&&g.targetGeometry;p.isSome(O)&&
("extent"===O.type?C=O:"point"===O.type&&(I=O,aa=g.scale));g=this._normalizeInput(this.get("map.initialViewProperties.viewpoint.targetGeometry.extent"));O=this._normalizeInput(this.initialExtent);a=a||C||g||O;la=la||I||a&&a.center;I=this.get("map.initialViewProperties.viewpoint.scale");sa=sa||aa||I||a&&N.extentToScale(a,this.size);aa=this.get("map.initialViewProperties.viewpoint.rotation");return la&&sa?new B({targetGeometry:la,scale:sa,rotation:f||U||aa||0}):null};h._createClass(ma,[{key:"animation",
set:function(U){var aa=this._get("animation");U!==aa&&(aa&&aa.stop(),!U||U.isFulfilled()?this._set("animation",null):(this._set("animation",U),this.frameTask.animationInProgress=!0,aa=()=>{U===this._get("animation")&&(this._set("animation",null),this.frameTask.requestFrame());this.frameTask.animationInProgress=!1},U.when(aa,aa)))}},{key:"center",get:function(){if(!this.ready)return this._get("center");const {center:U,spatialReference:aa}=this.state.paddedViewState;return new q({x:U[0],y:U[1],spatialReference:aa})},
set:function(U){if(null!=U)if(this._normalizeInput(U))if(this.ready){var aa=this.viewpoint;N.centerAt(aa,aa,U);this.viewpoint=aa}else this._set("center",U),this.notifyChange("initialExtentRequired");else W.error("#center",`incompatible spatialReference ${JSON.stringify(U.spatialReference)} with view's spatialReference ${JSON.stringify(this.spatialReference)}`)}},{key:"constraints",set:function(U){const aa=this._get("constraints");aa&&(this.handles.remove("map-view-base-constraints"),aa.destroy());
this._set("constraints",U);U&&(U.view=this,this.ready&&(this.state.viewpoint=U.fit(this.state.paddedViewState.viewpoint)),this.handles.add(U.on("update",()=>{this.ready&&this.state&&(this.state.viewpoint=U.fit(this.state.paddedViewState.viewpoint))}),"map-view-base-constraints"))}},{key:"extent",get:function(){return this.ready?this.state.paddedViewState.extent.clone():this._get("extent")},set:function(U){if(null!=U){var aa=this._normalizeInput(U);aa?aa.width&&aa.height?this.ready?(U=this.viewpoint,
N.setExtent(U,U,aa,this.size,{constraints:this.constraints}),this.viewpoint=U):(this._set("extent",aa),this._set("center",null),this._set("viewpoint",null),this._set("scale",0),this._set("zoom",-1),this.notifyChange("initialExtentRequired")):W.error("#extent","invalid extent size"):W.error("#center",`incompatible spatialReference ${JSON.stringify(U.spatialReference)} with view's spatialReference ${JSON.stringify(this.spatialReference)}`)}}},{key:"initialExtentRequired",get:function(){const {extent:U,
center:aa,scale:sa,viewpoint:la,zoom:a}=this;return this.get("map.initialViewProperties.viewpoint")||U||aa&&(0!==sa||-1!==a)||la?!1:!0}},{key:"padding",get:function(){return this.ready?this.state.padding:this._get("padding")},set:function(U){this.ready?(this.state.padding=U,this._set("padding",this.state.padding)):this._set("padding",U)}},{key:"resolution",get:function(){return this.state?this.state.resolution:0}},{key:"rotation",get:function(){return this.ready?this.state.rotation:this._get("rotation")},
set:function(U){if(!isNaN(U))if(this.ready){var aa=this.viewpoint;N.rotateTo(aa,aa,U);this.viewpoint=aa}else this._set("rotation",U)}},{key:"scale",get:function(){return this.ready?this.state.scale:this._get("scale")},set:function(U){if(U&&!isNaN(U))if(this.ready){var aa=this.viewpoint;N.scaleTo(aa,aa,U);this.viewpoint=aa}else{this._set("scale",U);this._set("zoom",-1);if(U=this._get("extent"))this._set("extent",null),this._set("center",U.center);this.notifyChange("initialExtentRequired")}}},{key:"stationary",
get:function(){return!this.animation&&!this.navigating&&!this._get("resizing")&&!this._stationaryTimer}},{key:"updating",get:function(){return!this.destroyed&&(!0===this.get("layerViewManager.updating")||!0===this.get("labelManager.updating")||!0===this.get("graphicsView.updating")||this.allLayerViews.some(U=>!U.destroyed&&!("layerViews"in U)&&!0===U.updating))}},{key:"viewpoint",get:function(){if(!this.ready)return this._get("viewpoint");const U=this.state.paddedViewState;return U&&U.viewpoint.clone()},
set:function(U){if(null!=U){var aa=this._normalizeInput(U);aa?this.ready?(U=new B({targetGeometry:new q,scale:0,rotation:0}),N.copy(U,aa),this.constraints.constrain(U,this.state.paddedViewState.viewpoint),this.state.viewpoint=U,this.frameTask.requestFrame(),this._set("viewpoint",U)):(this._set("viewpoint",aa),this._set("extent",null),this._set("center",null),this._set("zoom",-1),this._set("scale",0),this.notifyChange("initialExtentRequired")):!U.scale||isNaN(U.scale)?W.error("#viewpoint",`invalid scale value of ${U.scale}`):
p.isNone(U.targetGeometry)?W.error("#viewpoint","geometry not defined"):W.error("#viewpoint",`incompatible spatialReference ${JSON.stringify(U.targetGeometry.spatialReference)} with view's spatialReference ${JSON.stringify(this.spatialReference)}`)}}},{key:"zoom",get:function(){return this.ready?this.constraints.scaleToZoom(this.scale):this._get("zoom")},set:function(U){if(null!=U){if(!this.ready){this.notifyChange("initialExtentRequired");this._set("zoom",U);this._set("scale",0);var aa=this._get("extent");
aa&&(this._set("extent",null),this._set("center",aa.center))}this.constraints.effectiveLODs&&(aa=this.viewpoint,N.scaleTo(aa,aa,this.constraints.zoomToScale(U)),this.viewpoint=aa,this._set("zoom",this.constraints.scaleToZoom(this.scale)))}}}]);return ma}(t.PopupView(L));b.__decorate([u.property()],k.prototype,"_stationaryTimer",void 0);b.__decorate([u.property()],k.prototype,"animation",null);b.__decorate([u.property({readOnly:!0})],k.prototype,"animationManager",void 0);b.__decorate([u.property({value:null,
type:q,dependsOn:["state.id","ready"]})],k.prototype,"center",null);b.__decorate([u.property({type:ka})],k.prototype,"constraints",null);b.__decorate([u.property({value:null,type:E,dependsOn:["state.id","ready"]})],k.prototype,"extent",null);b.__decorate([u.property({readOnly:!0})],k.prototype,"featuresTilingScheme",void 0);b.__decorate([u.property()],k.prototype,"fullOpacity",void 0);b.__decorate([u.property()],k.prototype,"graphicsView",void 0);b.__decorate([u.property({type:E})],k.prototype,"initialExtent",
void 0);b.__decorate([u.property({dependsOn:["map.initialViewProperties?.viewpoint"]})],k.prototype,"initialExtentRequired",null);b.__decorate([u.property()],k.prototype,"labelManager",void 0);b.__decorate([u.property({value:{top:0,right:0,bottom:0,left:0},cast:ja=>({top:0,right:0,bottom:0,left:0,...ja})})],k.prototype,"padding",null);b.__decorate([u.property({type:Object})],k.prototype,"renderingOptions",void 0);b.__decorate([u.property()],k.prototype,"resizeAlign",void 0);b.__decorate([u.property({readOnly:!0,
dependsOn:["state.id"]})],k.prototype,"resolution",null);b.__decorate([u.property({value:0,type:Number,dependsOn:["state.id","ready"]})],k.prototype,"rotation",null);b.__decorate([u.property({value:0,type:Number,dependsOn:["state.id","ready"]})],k.prototype,"scale",null);b.__decorate([u.property({type:d,dependsOn:["map.initialViewProperties?.spatialReference","defaultsFromMap.isSpatialReferenceDone"]})],k.prototype,"spatialReference",void 0);b.__decorate([u.property({readOnly:!0})],k.prototype,"state",
void 0);b.__decorate([u.property({dependsOn:["animation","navigating","resizing","_stationaryTimer"]})],k.prototype,"stationary",null);b.__decorate([u.property({readOnly:!0})],k.prototype,"supportsGround",void 0);b.__decorate([u.property({type:S.Timeline,readOnly:!0})],k.prototype,"timeline",void 0);b.__decorate([u.property({readOnly:!0})],k.prototype,"type",void 0);b.__decorate([u.property({readOnly:!0,dependsOn:["layerViewManager.updating","labelManager.updating","graphicsView?.updating"]})],k.prototype,
"updating",null);b.__decorate([u.property({value:null,type:B,dependsOn:["state.id","ready"]})],k.prototype,"viewpoint",null);b.__decorate([u.property({value:-1,dependsOn:["state.id"]})],k.prototype,"zoom",null);return k=b.__decorate([J.subclass("esri.views.MapViewBase")],k)})},"esri/layers/support/TileInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../geometry/support/spatialReferenceUtils ../../geometry/SpatialReference ../../geometry/support/webMercatorUtils ../../geometry/Point ../../geometry ../../core/unitUtils ../../geometry/support/aaBoundingRect ./LOD".split(" "),
function(h,b,k,p,D,l,u,H,J,w,r,n,A,e,d,c,q,E,z,F,B,y){var v;k=new u.JSONMap({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});e=v=function(m){function t(K){K=m.call(this,K)||this;K.dpi=96;K.format=null;K.origin=null;K.minScale=0;K.maxScale=0;K.size=null;K.spatialReference=null;return K}h._inheritsLoose(t,m);t.create=function(K=
{size:256,spatialReference:c.WebMercator}){var N=K.resolutionFactor||1,Y=K.scales;const da=K.size||256,fa=K.spatialReference||c.WebMercator;if(!d.isValid(fa)){N=[];if(Y)for(K=0;K<Y.length;K++){var ka=Y[K];N.push({level:K,scale:ka,resolution:ka})}else for(Y=5E-4,K=23;0<=K;K--)N.unshift({level:K,scale:Y,resolution:Y}),Y*=2;return new v({dpi:96,lods:N,origin:new E(0,0,fa),size:[da,da],spatialReference:fa})}ka=d.getInfo(fa);K=K.origin?new E({x:K.origin.x,y:K.origin.y,spatialReference:fa}):ka?new E({x:ka.origin[0],
y:ka.origin[1],spatialReference:fa}):new E({x:0,y:0,spatialReference:fa});ka=1/(39.37*F.getMetersPerUnitForSR(fa)*96);const x=[];if(Y)for(N=0;N<Y.length;N++){var G=Y[N];x.push({level:N,scale:G,resolution:G*ka})}else{var V=d.isGeographic(fa)?512/da*5.916575275917094E8:256/da*5.91657527591555E8;Y=Math.ceil(24/N);x.push({level:0,scale:V,resolution:V*ka});for(G=1;G<Y;G++)V/=2**N,x.push({level:G,scale:V,resolution:V*ka})}return new v({dpi:96,lods:x,origin:K,size:[da,da],spatialReference:fa})};var L=t.prototype;
L.readOrigin=function(K,N){return E.fromJSON({spatialReference:N.spatialReference,...K})};L.readSize=function(K,N){return[N.cols,N.rows]};L.writeSize=function(K,N){N.cols=K[0];N.rows=K[0]};L.zoomToScale=function(K){const N=this.scales;if(0>=K)return N[0];if(K>=N.length)return N[N.length-1];{const Y=Math.round(K);return N[Y]+(Y-K)*(N[Math.round(K-.5)]-N[Y])}};L.scaleToZoom=function(K){const N=this.scales,Y=N.length-1;let da=0;for(;da<Y;da++){const fa=N[da],ka=N[da+1];if(fa<=K)break;if(ka===K)return da+
1;if(fa>K&&ka<K)return da+1-(K-ka)/(fa-ka)}return da};L.snapScale=function(K,N=.95){K=this.scaleToZoom(K);return K%Math.floor(K)>=N?this.zoomToScale(Math.ceil(K)):this.zoomToScale(Math.floor(K))};L.tileAt=function(K,N,Y,da){var fa=this.lodAt(K);if(!fa)return null;let ka;if("number"===typeof N)ka=N,N=Y;else{if(d.equals(N.spatialReference,this.spatialReference))ka=N.x,N=N.y;else{da=q.project(N,this.spatialReference);if(!da)return null;ka=da.x;N=da.y}da=Y}Y=fa.resolution*this.size[0];fa=fa.resolution*
this.size[1];da||(da={id:null,level:0,row:0,col:0,extent:B.create()});da.level=K;da.row=Math.floor((this.origin.y-N)/fa+.001);da.col=Math.floor((ka-this.origin.x)/Y+.001);this.updateTileInfo(da);return da};L.updateTileInfo=function(K,N=0){var Y=this.lodAt(K.level);Y||1!==N||(N=this.lods[this.lods.length-1],N.level<K.level&&(Y=N));if(Y){var da=K.level-Y.level;N=Y.resolution*this.size[0]/2**da;Y=Y.resolution*this.size[1]/2**da;K.id=`${K.level}/${K.row}/${K.col}`;K.extent||(K.extent=B.create());K.extent[0]=
this.origin.x+K.col*N;K.extent[1]=this.origin.y-(K.row+1)*Y;K.extent[2]=K.extent[0]+N;K.extent[3]=K.extent[1]+Y}};L.upsampleTile=function(K){const N=this._upsampleLevels[K.level];if(!N||-1===N.parentLevel)return!1;K.level=N.parentLevel;K.row=Math.floor(K.row/N.factor+.001);K.col=Math.floor(K.col/N.factor+.001);this.updateTileInfo(K);return!0};L.getTileBounds=function(K,N){var {resolution:Y}=this.lodAt(N.level);const da=Y*this.size[0];Y*=this.size[1];K[0]=this.origin.x+N.col*da;K[1]=this.origin.y-
(N.row+1)*Y;K[2]=K[0]+da;K[3]=K[1]+Y;return K};L.lodAt=function(K){return this._levelToLOD&&this._levelToLOD[K]||null};L.clone=function(){return v.fromJSON(this.write({}))};L._initializeUpsampleLevels=function(){const K=this.lods;this._upsampleLevels=[];let N=null;for(let Y=0;Y<K.length;Y++){const da=K[Y];this._upsampleLevels[da.level]={parentLevel:N?N.level:-1,factor:N?N.resolution/da.resolution:0};N=da}};h._createClass(t,[{key:"isWrappable",get:function(){const {spatialReference:K,origin:N}=this;
if(K&&N){const Y=d.getInfo(K);return K.isWrappable&&Math.abs(Y.origin[0]-N.x)<=Y.dx}return!1}},{key:"lods",set:function(K){let N=0,Y=0;const da=[];this._levelToLOD={};K&&(N=-Infinity,Y=Infinity,K.forEach(fa=>{da.push(fa.scale);N=fa.scale>N?fa.scale:N;Y=fa.scale<Y?fa.scale:Y;this._levelToLOD[fa.level]=fa}));this._set("scales",da);this._set("minScale",N);this._set("maxScale",Y);this._set("lods",K);this._initializeUpsampleLevels()}}]);return t}(e.JSONSupport);b.__decorate([l.property({type:Number,json:{write:!0}})],
e.prototype,"compressionQuality",void 0);b.__decorate([l.property({type:Number,json:{write:!0}})],e.prototype,"dpi",void 0);b.__decorate([l.property({type:String,json:{read:k.read,write:k.write,origins:{"web-scene":{read:!1,write:!1}}}})],e.prototype,"format",void 0);b.__decorate([l.property({readOnly:!0})],e.prototype,"isWrappable",null);b.__decorate([l.property({type:E,json:{write:!0}})],e.prototype,"origin",void 0);b.__decorate([H.reader("origin")],e.prototype,"readOrigin",null);b.__decorate([l.property({type:[y],
value:null,json:{write:!0}})],e.prototype,"lods",null);b.__decorate([l.property({readOnly:!0})],e.prototype,"minScale",void 0);b.__decorate([l.property({readOnly:!0})],e.prototype,"maxScale",void 0);b.__decorate([l.property({readOnly:!0})],e.prototype,"scales",void 0);b.__decorate([l.property({cast:m=>Array.isArray(m)?m:"number"===typeof m?[m,m]:[256,256]})],e.prototype,"size",void 0);b.__decorate([H.reader("size",["rows","cols"])],e.prototype,"readSize",null);b.__decorate([w.writer("size",{cols:{type:D.Integer},
rows:{type:D.Integer}})],e.prototype,"writeSize",null);b.__decorate([l.property({type:c,json:{write:!0}})],e.prototype,"spatialReference",void 0);return e=v=b.__decorate([J.subclass("esri.layers.support.TileInfo")],e)})},"esri/geometry/support/aaBoundingRect":function(){define(["exports","../../core/has","../../core/maybe","../Extent"],function(h,b,k,p){function D(e=A){return[e[0],e[1],e[2],e[3]]}function l(e){return e[0]>=e[2]?0:e[2]-e[0]}function u(e){return e[1]>=e[3]?0:e[3]-e[1]}function H(e,
d,c){return d>=e[0]&&c>=e[1]&&d<=e[2]&&c<=e[3]}function J(e,d){e[0]=d[0];e[1]=d[1];e[2]=d[2];e[3]=d[3];return e}function w(e){return 4===e.length}function r(e,d,c){return e<d?d:e>c?c:e}const n=[Infinity,Infinity,-Infinity,-Infinity],A=[0,0,0,0];h.NEGATIVE_INFINITY=n;h.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];h.UNIT=[0,0,1,1];h.ZERO=A;h.allFinite=function(e){for(let d=0;4>d;d++)if(!isFinite(e[d]))return!1;return!0};h.area=function(e){return l(e)*u(e)};h.center=function(e,d=[0,0]){d[0]=
(e[0]+e[2])/2;d[1]=(e[1]+e[3])/2;return d};h.clone=function(e){return[e[0],e[1],e[2],e[3]]};h.contains=function(e,d){return d[0]>=e[0]&&d[2]<=e[2]&&d[1]>=e[1]&&d[3]<=e[3]};h.containsPoint=function(e,d){return H(e,d[0],d[1])};h.containsPointObject=function(e,d){return H(e,d.x,d.y)};h.containsPointWithMargin=function(e,d,c){return d[0]>=e[0]-c&&d[1]>=e[1]-c&&d[0]<=e[2]+c&&d[1]<=e[3]+c};h.containsXY=H;h.create=D;h.diameter=function(e){const d=l(e);e=u(e);return Math.sqrt(d*d+e*e)};h.distance=function(e,
d){const c=(e[1]+e[3])/2,q=Math.max(Math.abs(d[0]-(e[0]+e[2])/2)-l(e)/2,0);e=Math.max(Math.abs(d[1]-c)-u(e)/2,0);return Math.sqrt(q*q+e*e)};h.empty=function(e){return e?J(e,n):D(n)};h.equals=function(e,d,c){if(k.isNone(e)||k.isNone(d))return e===d;if(!w(e)||!w(d))return!1;if(c)for(let q=0;q<e.length;q++){if(!c(e[q],d[q]))return!1}else for(c=0;c<e.length;c++)if(e[c]!==d[c])return!1;return!0};h.expand=function(e,d,c=e){if("length"in d)if(w(d))c[0]=Math.min(e[0],d[0]),c[1]=Math.min(e[1],d[1]),c[2]=Math.max(e[2],
d[2]),c[3]=Math.max(e[3],d[3]);else{if(2===d.length||3===d.length)c[0]=Math.min(e[0],d[0]),c[1]=Math.min(e[1],d[1]),c[2]=Math.max(e[2],d[0]),c[3]=Math.max(e[3],d[1])}else switch(d.type){case "extent":c[0]=Math.min(e[0],d.xmin);c[1]=Math.min(e[1],d.ymin);c[2]=Math.max(e[2],d.xmax);c[3]=Math.max(e[3],d.ymax);break;case "point":c[0]=Math.min(e[0],d.x),c[1]=Math.min(e[1],d.y),c[2]=Math.max(e[2],d.x),c[3]=Math.max(e[3],d.y)}return c};h.expandPointInPlace=function(e,d){d[0]<e[0]&&(e[0]=d[0]);d[0]>e[2]&&
(e[2]=d[0]);d[1]<e[1]&&(e[1]=d[1]);d[1]>e[3]&&(e[3]=d[1])};h.expandWithNestedArray=function(e,d,c=e){const q=d.length;let E=e[0],z=e[1],F=e[2];e=e[3];for(let B=0;B<q;B++){const y=d[B];E=Math.min(E,y[0]);z=Math.min(z,y[1]);F=Math.max(F,y[0]);e=Math.max(e,y[1])}c[0]=E;c[1]=z;c[2]=F;c[3]=e;return c};h.fromExtent=function(e,d=D()){d[0]=e.xmin;d[1]=e.ymin;d[2]=e.xmax;d[3]=e.ymax;return d};h.fromValues=function(e,d,c,q,E=D()){E[0]=e;E[1]=d;E[2]=c;E[3]=q;return E};h.height=u;h.intersection=function(e,d,
c=e){const q=d[0],E=d[1],z=d[2];d=d[3];c[0]=r(e[0],q,z);c[1]=r(e[1],E,d);c[2]=r(e[2],q,z);c[3]=r(e[3],E,d);return c};h.intersects=function(e,d){return Math.max(d[0],e[0])<=Math.min(d[2],e[2])&&Math.max(d[1],e[1])<=Math.min(d[3],e[3])};h.is=w;h.isPoint=function(e){return(0===l(e)||!isFinite(e[0]))&&(0===u(e)||!isFinite(e[1]))};h.offset=function(e,d,c,q=e){q[0]=e[0]+d;q[1]=e[1]+c;q[2]=e[2]+d;q[3]=e[3]+c;return q};h.pad=function(e,d,c=e){c[0]=e[0]-d;c[1]=e[1]-d;c[2]=e[2]+d;c[3]=e[3]+d;return c};h.set=
J;h.setMax=function(e,d,c=e){c[2]=d[0];c[3]=d[1];c!==e&&(c[0]=e[0],c[1]=e[1]);return e};h.setMin=function(e,d,c=e){c[0]=d[0];c[1]=d[1];c!==e&&(c[2]=e[2],c[3]=e[3]);return c};h.size=function(e,d){d[0]=e[2]-e[0];d[1]=e[3]-e[1]};h.toExtent=function(e,d){return new p({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:d})};h.width=l;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/layers/support/LOD":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport".split(" "),
function(h,b,k,p,D,l,u,H,J,w,r,n){var A;k=A=function(e){function d(c){c=e.call(this,c)||this;c.level=0;c.levelValue=null;c.resolution=0;c.scale=0;return c}h._inheritsLoose(d,e);d.prototype.clone=function(){return new A({level:this.level,levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})};return d}(n.JSONSupport);b.__decorate([l.property({type:D.Integer,json:{write:!0}})],k.prototype,"level",void 0);b.__decorate([l.property({type:String,json:{write:!0}})],k.prototype,"levelValue",
void 0);b.__decorate([l.property({type:Number,json:{write:!0}})],k.prototype,"resolution",void 0);b.__decorate([l.property({type:Number,json:{write:!0}})],k.prototype,"scale",void 0);return k=A=b.__decorate([H.subclass("esri.layers.support.LOD")],k)})},"esri/views/2d/tiling/TileKey":function(){define(["../../../chunks/_rollupPluginBabelHelpers","../../../core/ObjectPool"],function(h,b){let k=function(){function p(l,u,H,J){this.set(l,u,H,J)}p.getId=function(l,u,H,J){return"object"===typeof l?`${l.level}/${l.row}/${l.col}/${l.world}`:
`${l}/${u}/${H}/${J}`};var D=p.prototype;D.acquire=function(l,u,H,J){this.set(l,u,H,J)};D.contains=function(l){const u=l.level-this.level;return this.row===l.row>>u&&this.col===l.col>>u&&this.world===l.world};D.equals=function(l){return this.level===l.level&&this.row===l.row&&this.col===l.col&&this.world===l.world};D.clone=function(){return new p(this)};D.release=function(){this.world=this.col=this.row=this.level=0};D.set=function(l,u,H,J){if(null==l)this.world=this.col=this.row=this.level=0;else if("object"===
typeof l)this.level=l.level||0,this.row=l.row||0,this.col=l.col||0,this.world=l.world||0;else if("string"===typeof l){const [w,r,n,A]=l.split("/");this.level=parseFloat(w);this.row=parseFloat(r);this.col=parseFloat(n);this.world=parseFloat(A)}else this.level=+l,this.row=+u,this.col=+H,this.world=+J||0;return this};D.toString=function(){return`${this.level}/${this.row}/${this.col}/${this.world}`};D.getParentKey=function(){return 0>=this.level?null:new p(this.level-1,this.row>>1,this.col>>1,this.world)};
D.getChildKeys=function(){const l=this.level+1,u=this.row<<1,H=this.col<<1,J=this.world;return[new p(l,u,H,J),new p(l,u,H+1,J),new p(l,u+1,H,J),new p(l,u+1,H+1,J)]};D.compareRowMajor=function(l){return this.row<l.row?-1:this.row>l.row?1:this.col<l.col?-1:this.col>l.col?1:0};h._createClass(p,[{key:"key",get:function(){return this}},{key:"id",get:function(){return this.toString()},set:function(l){this.set(l)}}]);return p}();k.pool=new b(k,null,null,25,50);return k})},"esri/views/PopupView":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/maybe ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/arrayUtils ../core/promiseUtils".split(" "),
function(h,b,k,p,D,l,u,H,J,w,r,n,A,e,d){h.PopupView=c=>{c=function(q){function E(){return q.apply(this,arguments)||this}b._inheritsLoose(E,q);var z=E.prototype;z.fetchPopupFeatures=async function(F,B){await this.when();const {location:y,queryArea:v,layerViewsAndGraphics:m,clientOnlyGraphics:t}=await this._prepareFetchPopupFeatures(F,B);F=Promise.resolve(t);B=this._queryLayerPopupFeatures({queryArea:v,layerViewsAndGraphics:m,options:B});const L=B.map(K=>K.promise);F=d.eachAlwaysValues([F,...L]).then(e.flatten);
return{location:y,clientOnlyGraphics:t,allGraphicsPromise:F,promisesPerLayerView:B}};z._queryLayerPopupFeatures=function({queryArea:F,layerViewsAndGraphics:B,options:y}){return B.map(({layerView:v,graphics:m})=>{m={clientGraphics:m,event:D.isSome(y)?y.event:null,signal:D.isSome(y)?y.signal:null,defaultPopupTemplateEnabled:D.isSome(y)?!!y.defaultPopupTemplateEnabled:!1};m=v.fetchPopupFeatures(F,m);return{layerView:v,promise:m}})};z._isValidPopupGraphic=function(F,B){return F&&!!F.getEffectivePopupTemplate(D.isSome(B)&&
B.defaultPopupTemplateEnabled)};z._prepareFetchPopupFeatures=async function(F,B){const {clientGraphics:y,queryArea:v,location:m}=await this._popupHitTestGraphics(F,B);F=this._getFetchPopupLayerViews();const {layerViewsAndGraphics:t,clientOnlyGraphics:L}=this._graphicsPerFetchPopupLayerView(y,F);return{clientOnlyGraphics:L,layerViewsAndGraphics:t,queryArea:v,location:m}};z._popupHitTestGraphics=async function(F,B){const {results:y,mapPoint:v}=await this.popupHitTest(F);F=y.filter(t=>this._isValidPopupGraphic(t.graphic,
B));const m=F.length?F[0].mapPoint:null;return{clientGraphics:F.map(t=>t.graphic),queryArea:v,location:v||m}};z._getFetchPopupLayerViews=function(){const F=[];this.allLayerViews.forEach(B=>{this._isValidPopupLayerView(B)&&F.push(B)});D.isSome(this.graphicsView)&&this._isValidPopupLayerView(this.graphicsView)&&F.push(this.graphicsView);return F.reverse()};z._isValidPopupLayerView=function(F){return D.isSome(F)&&(!("layer"in F)||!F.suspended)&&"fetchPopupFeatures"in F};z._graphicsPerFetchPopupLayerView=
function(F,B){const y=[],v=new Map;B=B.map(m=>{const t=[];"layer"in m?v.set(m.layer,t):v.set(m.graphics,t);return{layerView:m,graphics:t}});for(const m of F)(F=v.get(m.layer)||null)?F.push(m):y.push(m);return{layerViewsAndGraphics:B,clientOnlyGraphics:y}};return E}(c);return c=k.__decorate([w.subclass("esri.views.PopupView")],c)};Object.defineProperty(h,"__esModule",{value:!0})})},"esri/views/2d/viewpointUtils":function(){define("exports ../../core/maybe ../../geometry/support/spatialReferenceUtils ../../geometry/SpatialReference ../../geometry/Geometry ../../geometry/support/Ellipsoid ../../geometry/support/webMercatorUtils ../../geometry/Point ../../geometry/Extent ../../core/Collection ../../chunks/common ../../core/unitUtils ../../Viewpoint ../../chunks/vec2f64 ../../chunks/vec2 ../../chunks/mat2d ../../chunks/mat2df64".split(" "),
function(h,b,k,p,D,l,u,H,J,w,r,n,A,e,d,c,q){function E(g,C,I,O){return O&&I&&!O.equals(I)&&u.canProject(O,I)&&O.isWebMercator?(O.isWebMercator?(I=C[1],89.99999<I?I=89.99999:-89.99999>I&&(I=-89.99999),I=Math.sin(r.toRadian(I)),g=d.set(g,r.toRadian(C[0])*l.earth.radius,.5*l.earth.radius*Math.log((1+I)/(1-I)))):(I=r.toDegree(C[0]/l.earth.radius),g=d.set(g,I-360*Math.floor((I+180)/360),r.toDegree(.5*Math.PI-2*Math.atan(Math.exp(-1*C[1]/l.earth.radius))))),g):d.copy(g,C)}function z(g){return g.wkid?g:
g.spatialReference||p.WGS84}function F(g,C){return C.type?d.set(g,C.x,C.y):d.copy(g,C)}function B(g,C){return Math.max(g.width/C[0],g.height/C[1])*Y(g.spatialReference)}async function y(g,C,I,O){if(!g||Array.isArray(g)&&!g.length)return null;w.isCollection(g)&&(g=g.toArray());if(Array.isArray(g)&&g.length&&"object"===typeof g[0]){var T=g.every(pa=>"attributes"in pa);var X=g.some(pa=>!pa.geometry),ba=g;if(T&&X&&C&&C.allLayerViews){T=new Map;for(var ha of g)g=ha.layer,X=T.get(g)||[],ba=ha.attributes[g.objectIdField],
null!=ba&&X.push(ba),T.set(g,X);const pa=[];T.forEach((qa,va)=>{const ta=C.allLayerViews.find(ua=>ua.layer.id===va.id);if("queryFeatures"in ta){const ua=va.createQuery();ua.objectIds=qa;ua.returnGeometry=!0;pa.push(ta.queryFeatures(ua))}});ha=await Promise.all(pa);g=[];for(var ea of ha)if(ea&&ea.features&&ea.features.length)for(var ia of ea.features)b.isSome(ia.geometry)&&g.push(ia.geometry);ba=g}for(const pa of ba)O=await y(pa,C,I,O);return O}if(Array.isArray(g)&&2===g.length&&"number"===typeof g[0]&&
"number"===typeof g[1])T=new H(g);else if(g instanceof D)T=g;else if("geometry"in g)if(g.geometry)T=g.geometry;else if(g.layer){const pa=g.layer;ea=C.allLayerViews.find(qa=>qa.layer.id===pa.id);"queryFeatures"in ea&&(ia=pa.createQuery(),ia.objectIds=[g.attributes[pa.objectIdField]],ia.returnGeometry=!0,ea=await ea.queryFeatures(ia),T=b.get(ea,"features",0,"geometry"))}if(b.isNone(T))return null;ea="point"===T.type?new J({xmin:T.x,ymin:T.y,xmax:T.x,ymax:T.y,spatialReference:T.spatialReference}):T.extent;
if(!ea)return null;ia=u.canProject(ea,I);if(!ea.spatialReference.equals(I)&&ia)ea=u.project(ea,I);else if(!ia)return null;return O=O?O.union(ea):ea.clone()}function v(g){if(g&&(!Array.isArray(g)||"number"!==typeof g[0])&&("object"===typeof g||Array.isArray(g)&&"object"===typeof g[0])){if("layer"in g&&g.layer&&g.layer.minScale&&g.layer.maxScale){var C=g.layer;return{min:C.minScale,max:C.maxScale}}if(Array.isArray(g)&&g.length&&g.every(I=>"layer"in I)){let I=C=0;for(const O of g)(g=O.layer)&&g.minScale&&
g.maxScale&&(C=g.minScale<C?g.minScale:C,I=g.maxScale>I?g.maxScale:I);return C&&I?{min:C,max:I}:null}}}async function m(g,C){if(!g||!C)return new A({targetGeometry:new H,scale:0,rotation:0});let I=C.spatialReference;const {constraints:O,padding:T,viewpoint:X,size:ba}=C,ha=[T?ba[0]-T.left-T.right:ba[0],T?ba[1]-T.top-T.bottom:ba[1]];let ea=null;g instanceof A?ea=g:g.viewpoint?ea=g.viewpoint:g.target&&"esri.Viewpoint"===g.target.declaredClass&&(ea=g.target);let ia=null;if(ea&&ea.targetGeometry)ia=ea.targetGeometry;
else if(g instanceof J)ia=g;else if(g||g&&("center"in g||"extent"in g||"target"in g))ia=await y(g.center,C,I)||await y(g.extent,C,I)||await y(g.target,C,I)||await y(g,C,I);!ia&&X&&X.targetGeometry?ia=X.targetGeometry:!ia&&C.extent&&(ia=C.extent);var pa=z(ia);I||(I=z(C.spatialReference||C.extent||ia));if(!u.canProject(ia,I)&&pa&&!pa.equals(I))return null;var qa=F(e.create(),ia.center?ia.center:ia);pa=new H(E(qa,qa,pa,I),I);qa=null;qa=ea&&b.isSome(ea.targetGeometry)&&"point"===ea.targetGeometry.type?
ea.scale:g.hasOwnProperty("scale")&&g.scale?g.scale:g.hasOwnProperty("zoom")&&-1!==g.zoom&&O&&O.effectiveLODs?O.zoomToScale(g.zoom):Array.isArray(ia)||"point"===ia.type||"extent"===ia.type&&0===ia.width&&0===ia.height?C.extent&&u.canProject(C.extent,I)?B(u.project(C.extent,I),ha):C.extent?B(C.extent,ha):X.scale:u.canProject(ia.extent,I)?B(u.project(ia.extent,I),ha):B(ia.extent,ha);if(C=v(g))C.min&&C.min>qa?qa=C.min:C.max&&C.max<qa&&(qa=C.max);C=0;ea?C=ea.rotation:g.hasOwnProperty("rotation")?C=g.rotation:
X&&(C=X.rotation);g=new A({targetGeometry:pa,scale:qa,rotation:C});O&&(g=O.fit(g),O.constrainByGeometry(g),O.rotationEnabled||(g.rotation=C));return g}function t(g,C){const I=g.targetGeometry,O=C.targetGeometry;I.x=O.x;I.y=O.y;I.spatialReference=O.spatialReference;g.scale=C.scale;g.rotation=C.rotation;return g}function L(g,C,I){return I?d.set(g,.5*(C[0]-I.right+I.left),.5*(C[1]-I.bottom+I.top)):d.scale(g,C,.5)}function K(g,C,I,O){na(g,C,I,O);return c.invert(g,g)}function N(g){var C=g.scale;g=g.targetGeometry;
g=b.isSome(g)&&k.isValid(g.spatialReference)?1/(39.37*n.getMetersPerUnitForSR(g.spatialReference)*96):1;return C*g}function Y(g){return k.isValid(g)?39.37*n.getMetersPerUnitForSR(g)*96:1}function da(g){return g.isWrappable?(g=k.getInfo(g),g.valid[1]-g.valid[0]):0}const fa=180/Math.PI,ka=function(){const g=e.create();return function(C,I,O){const T=I.targetGeometry;F(g,T);I=.5*N(I);C.xmin=g[0]-I*O[0];C.ymin=g[1]-I*O[1];C.xmax=g[0]+I*O[0];C.ymax=g[1]+I*O[1];C.spatialReference=T.spatialReference;return C}}(),
x=function(){const g=e.create();return function(C,I,O){return d.sub(C,d.scale(C,I,.5),L(g,I,O))}}(),G=function(){const g=q.create(),C=e.create();return function(I,O,T,X){const ba=N(O);O=r.toRadian(O.rotation)||0;d.set(C,ba,ba);c.fromScaling(g,C);c.rotate(g,g,O);c.translate(g,g,x(C,T,X));c.translate(g,g,[0,X.top-X.bottom]);return d.set(I,g[4],g[5])}}(),V=function(){const g=e.create(),C=e.create(),I=e.create();return function(O,T,X,ba,ha,ea){d.negate(g,T);d.scale(C,X,.5*ea);d.set(I,1/ba*ea,-1/ba*ea);
c.identity(O);c.translate(O,O,C);ha&&c.rotate(O,O,ha);c.scale(O,O,I);c.translate(O,O,g);return O}}(),na=function(){const g=e.create();return function(C,I,O,T){const X=N(I),ba=r.toRadian(I.rotation)||0;F(g,I.targetGeometry);return V(C,g,O,X,ba,T)}}(),R=function(){const g=e.create();return function(C,I,O,T){const X=N(I);F(g,I.targetGeometry);return V(C,g,O,X,0,T)}}(),S=function(){const g=e.create(),C=e.create(),I=[0,0,0];return function(O,T,X){d.subtract(g,O,T);d.normalize(g,g);d.subtract(C,O,X);d.normalize(C,
C);d.cross(I,g,C);O=Math.acos(d.dot(g,C)/(d.length(g)*d.length(C)))*fa;0>I[2]&&(O=-O);isNaN(O)&&(O=0);return O}}(),W=function(){const g=e.create();return function(C,I,O,T){const X=C.targetGeometry;t(C,I);G(g,I,O,T);X.x+=g[0];X.y+=g[1];return C}}(),ja=function(){const g=e.create();return function(C,I,O,T){const X=C.targetGeometry;t(C,I);G(g,I,O,T);X.x-=g[0];X.y-=g[1];return C}}(),ma=function(){const g=e.create();return function(C,I,O){t(C,I);I=C.targetGeometry;const T=z(O),X=z(I);F(g,O);E(g,g,T,X);
I.x=g[0];I.y=g[1];return C}}(),ca=function(){const g=e.create();return function(C,I,O,T,X){X||(X="center");d.sub(g,O,T);d.scale(g,g,.5);O=g[0];T=g[1];switch(X){case "center":d.set(g,0,0);break;case "left":d.set(g,-O,0);break;case "top":d.set(g,0,T);break;case "right":d.set(g,O,0);break;case "bottom":d.set(g,0,-T);break;case "top-left":d.set(g,-O,T);break;case "bottom-left":d.set(g,-O,-T);break;case "top-right":d.set(g,O,T);break;case "bottom-right":d.set(g,O,-T)}f(C,I,g);return C}}(),U=function(){const g=
e.create();return function(C,I,O,T,X){t(C,I);isNaN(O)||0===O||(la(g,T,I,X),C.scale=I.scale*O,a(g,g,C,X),f(C,C,d.set(g,g[0]-T[0],T[1]-g[1])));return C}}(),aa=function(){const g=e.create();return function(C,I,O,T,X,ba){t(C,I);isNaN(O)||0===O||(la(g,X,I,ba),C.scale=I.scale*O,C.rotation+=T,a(g,g,C,ba),f(C,C,d.set(g,g[0]-X[0],X[1]-g[1])));return C}}(),sa=function(){const g=e.create(),C=e.create();return function(I,O,T,X,ba,ha,ea){x(C,ha,ea);d.add(g,ba,C);return X?aa(I,O,T,X,g,ha):U(I,O,T,g,ha)}}(),la=
function(){const g=q.create();return function(C,I,O,T){return d.transformMat2d(C,I,K(g,O,T,1))}}(),a=function(){const g=q.create();return function(C,I,O,T){return d.transformMat2d(C,I,na(g,O,T,1))}}(),f=function(){const g=e.create(),C=q.create();return function(I,O,T){t(I,O);const X=N(O),ba=I.targetGeometry;c.fromRotation(C,r.toRadian(O.rotation)||0);c.scale(C,C,e.fromValues(X,X));d.transformMat2d(g,T,C);ba.x+=g[0];ba.y+=g[1];return I}}();h.addPadding=W;h.angleBetween=S;h.centerAt=ma;h.copy=t;h.create=
m;h.createAsync=function(g,C){return m(g,C)};h.extentToScale=B;h.getAnchor=L;h.getExtent=ka;h.getMatrix=V;h.getOuterSize=function(g,C,I){var O=r.toRadian(C.rotation)||0;C=Math.abs(Math.cos(O));O=Math.abs(Math.sin(O));return d.set(g,Math.round(I[1]*O+I[0]*C),Math.round(I[1]*C+I[0]*O))};h.getPaddingMapTranslation=G;h.getPaddingScreenTranslation=x;h.getResolution=N;h.getResolutionToScaleFactor=Y;h.getTransform=na;h.getTransformNoRotation=R;h.getWorldScreenWidth=function(g,C){return Math.round(da(g)/
C)};h.getWorldWidth=da;h.padAndScaleAndRotateBy=sa;h.pixelSize=function(g){return N(g)};h.removePadding=ja;h.resize=ca;h.rotateBy=function(g,C,I){t(g,C);g.rotation+=I;return g};h.rotateTo=function(g,C,I){t(g,C);g.rotation=I;return g};h.scaleAndRotateBy=aa;h.scaleBy=U;h.scaleTo=function(g,C,I){t(g,C);g.scale=I;return g};h.setExtent=function(g,C,I,O,T){ma(g,C,I.center);g.scale=B(I,O);T&&T.constraints&&T.constraints.constrain(g);return g};h.toMap=la;h.toScreen=a;h.translateBy=f;Object.defineProperty(h,
"__esModule",{value:!0})})},"esri/chunks/vec2f64":function(){define(["exports"],function(h){function b(){return[0,0]}function k(c){return[c[0],c[1]]}function p(c,q){return[c,q]}function D(c){const q=[0,0],E=Math.min(2,c.length);for(let z=0;z<E;++z)q[z]=c[z];return q}function l(c,q){return new Float64Array(c,q,2)}function u(){return[0,0]}function H(){return[1,1]}function J(){return[1,0]}function w(){return[0,1]}const r=[0,0],n=[1,1],A=[1,0],e=[0,1];var d=Object.freeze({__proto__:null,create:b,clone:k,
fromValues:p,fromArray:D,createView:l,zeros:u,ones:H,unitX:J,unitY:w,ZEROS:r,ONES:n,UNIT_X:A,UNIT_Y:e});h.ONES=n;h.UNIT_X=A;h.UNIT_Y=e;h.ZEROS=r;h.clone=k;h.create=b;h.createView=l;h.fromArray=D;h.fromValues=p;h.ones=H;h.unitX=J;h.unitY=w;h.vec2f64=d;h.zeros=u})},"esri/chunks/vec2":function(){define(["exports","./common"],function(h,b){function k(R,S){R[0]=S[0];R[1]=S[1];return R}function p(R,S,W){R[0]=S;R[1]=W;return R}function D(R,S,W){R[0]=S[0]+W[0];R[1]=S[1]+W[1];return R}function l(R,S,W){R[0]=
S[0]-W[0];R[1]=S[1]-W[1];return R}function u(R,S,W){R[0]=S[0]*W[0];R[1]=S[1]*W[1];return R}function H(R,S,W){R[0]=S[0]/W[0];R[1]=S[1]/W[1];return R}function J(R,S){R[0]=Math.ceil(S[0]);R[1]=Math.ceil(S[1]);return R}function w(R,S){R[0]=Math.floor(S[0]);R[1]=Math.floor(S[1]);return R}function r(R,S,W){R[0]=Math.min(S[0],W[0]);R[1]=Math.min(S[1],W[1]);return R}function n(R,S,W){R[0]=Math.max(S[0],W[0]);R[1]=Math.max(S[1],W[1]);return R}function A(R,S){R[0]=Math.round(S[0]);R[1]=Math.round(S[1]);return R}
function e(R,S,W){R[0]=S[0]*W;R[1]=S[1]*W;return R}function d(R,S,W,ja){R[0]=S[0]+W[0]*ja;R[1]=S[1]+W[1]*ja;return R}function c(R,S){const W=S[0]-R[0];R=S[1]-R[1];return Math.sqrt(W*W+R*R)}function q(R,S){const W=S[0]-R[0];R=S[1]-R[1];return W*W+R*R}function E(R){const S=R[0];R=R[1];return Math.sqrt(S*S+R*R)}function z(R){const S=R[0];R=R[1];return S*S+R*R}function F(R,S){R[0]=-S[0];R[1]=-S[1];return R}function B(R,S){R[0]=1/S[0];R[1]=1/S[1];return R}function y(R,S){var W=S[0];const ja=S[1];W=W*W+
ja*ja;0<W&&(W=1/Math.sqrt(W),R[0]=S[0]*W,R[1]=S[1]*W);return R}function v(R,S){return R[0]*S[0]+R[1]*S[1]}function m(R,S,W){S=S[0]*W[1]-S[1]*W[0];R[0]=R[1]=0;R[2]=S;return R}function t(R,S,W,ja){const ma=S[0];S=S[1];R[0]=ma+ja*(W[0]-ma);R[1]=S+ja*(W[1]-S);return R}function L(R,S){S=S||1;const W=2*b.RANDOM()*Math.PI;R[0]=Math.cos(W)*S;R[1]=Math.sin(W)*S;return R}function K(R,S,W){const ja=S[0];S=S[1];R[0]=W[0]*ja+W[2]*S;R[1]=W[1]*ja+W[3]*S;return R}function N(R,S,W){const ja=S[0];S=S[1];R[0]=W[0]*
ja+W[2]*S+W[4];R[1]=W[1]*ja+W[3]*S+W[5];return R}function Y(R,S,W){const ja=S[0];S=S[1];R[0]=W[0]*ja+W[3]*S+W[6];R[1]=W[1]*ja+W[4]*S+W[7];return R}function da(R,S,W){const ja=S[0];S=S[1];R[0]=W[0]*ja+W[4]*S+W[12];R[1]=W[1]*ja+W[5]*S+W[13];return R}function fa(R,S,W,ja){const ma=S[0]-W[0];S=S[1]-W[1];const ca=Math.sin(ja);ja=Math.cos(ja);R[0]=ma*ja-S*ca+W[0];R[1]=ma*ca+S*ja+W[1];return R}function ka(R,S){var W=R[0];R=R[1];const ja=S[0];S=S[1];let ma=W*W+R*R;0<ma&&(ma=1/Math.sqrt(ma));let ca=ja*ja+
S*S;0<ca&&(ca=1/Math.sqrt(ca));W=(W*ja+R*S)*ma*ca;return 1<W?0:-1>W?Math.PI:Math.acos(W)}function x(R){return"vec2("+R[0]+", "+R[1]+")"}function G(R,S){return R[0]===S[0]&&R[1]===S[1]}function V(R,S){const W=R[0];R=R[1];const ja=S[0];S=S[1];return Math.abs(W-ja)<=b.EPSILON*Math.max(1,Math.abs(W),Math.abs(ja))&&Math.abs(R-S)<=b.EPSILON*Math.max(1,Math.abs(R),Math.abs(S))}var na=Object.freeze({__proto__:null,copy:k,set:p,add:D,subtract:l,multiply:u,divide:H,ceil:J,floor:w,min:r,max:n,round:A,scale:e,
scaleAndAdd:d,distance:c,squaredDistance:q,length:E,squaredLength:z,negate:F,inverse:B,normalize:y,dot:v,cross:m,lerp:t,random:L,transformMat2:K,transformMat2d:N,transformMat3:Y,transformMat4:da,rotate:fa,angle:ka,str:x,exactEquals:G,equals:V,len:E,sub:l,mul:u,div:H,dist:c,sqrDist:q,sqrLen:z});h.add=D;h.angle=ka;h.ceil=J;h.copy=k;h.cross=m;h.dist=c;h.distance=c;h.div=H;h.divide=H;h.dot=v;h.equals=V;h.exactEquals=G;h.floor=w;h.inverse=B;h.len=E;h.length=E;h.lerp=t;h.max=n;h.min=r;h.mul=u;h.multiply=
u;h.negate=F;h.normalize=y;h.random=L;h.rotate=fa;h.round=A;h.scale=e;h.scaleAndAdd=d;h.set=p;h.sqrDist=q;h.sqrLen=z;h.squaredDistance=q;h.squaredLength=z;h.str=x;h.sub=l;h.subtract=l;h.transformMat2=K;h.transformMat2d=N;h.transformMat3=Y;h.transformMat4=da;h.vec2=na})},"esri/chunks/mat2d":function(){define(["exports","./common"],function(h,b){function k(m,t){m[0]=t[0];m[1]=t[1];m[2]=t[2];m[3]=t[3];m[4]=t[4];m[5]=t[5];return m}function p(m){m[0]=1;m[1]=0;m[2]=0;m[3]=1;m[4]=0;m[5]=0;return m}function D(m,
t,L,K,N,Y,da){m[0]=t;m[1]=L;m[2]=K;m[3]=N;m[4]=Y;m[5]=da;return m}function l(m,t){const L=t[0],K=t[1],N=t[2],Y=t[3],da=t[4];t=t[5];let fa=L*Y-K*N;if(!fa)return null;fa=1/fa;m[0]=Y*fa;m[1]=-K*fa;m[2]=-N*fa;m[3]=L*fa;m[4]=(N*t-Y*da)*fa;m[5]=(K*da-L*t)*fa;return m}function u(m){return m[0]*m[3]-m[1]*m[2]}function H(m,t,L){const K=t[0],N=t[1],Y=t[2],da=t[3],fa=t[4];t=t[5];const ka=L[0],x=L[1],G=L[2],V=L[3],na=L[4];L=L[5];m[0]=K*ka+Y*x;m[1]=N*ka+da*x;m[2]=K*G+Y*V;m[3]=N*G+da*V;m[4]=K*na+Y*L+fa;m[5]=N*
na+da*L+t;return m}function J(m,t,L){const K=t[0],N=t[1],Y=t[2],da=t[3],fa=t[4];t=t[5];const ka=Math.sin(L);L=Math.cos(L);m[0]=K*L+Y*ka;m[1]=N*L+da*ka;m[2]=K*-ka+Y*L;m[3]=N*-ka+da*L;m[4]=fa;m[5]=t;return m}function w(m,t,L){const K=t[1],N=t[2],Y=t[3],da=t[4],fa=t[5],ka=L[0];L=L[1];m[0]=t[0]*ka;m[1]=K*ka;m[2]=N*L;m[3]=Y*L;m[4]=da;m[5]=fa;return m}function r(m,t,L){const K=t[0],N=t[1],Y=t[2],da=t[3],fa=t[4];t=t[5];const ka=L[0];L=L[1];m[0]=K;m[1]=N;m[2]=Y;m[3]=da;m[4]=K*ka+Y*L+fa;m[5]=N*ka+da*L+t;return m}
function n(m,t){const L=Math.sin(t);t=Math.cos(t);m[0]=t;m[1]=L;m[2]=-L;m[3]=t;m[4]=0;m[5]=0;return m}function A(m,t){m[0]=t[0];m[1]=0;m[2]=0;m[3]=t[1];m[4]=0;m[5]=0;return m}function e(m,t){m[0]=1;m[1]=0;m[2]=0;m[3]=1;m[4]=t[0];m[5]=t[1];return m}function d(m){return"mat2d("+m[0]+", "+m[1]+", "+m[2]+", "+m[3]+", "+m[4]+", "+m[5]+")"}function c(m){return Math.sqrt(m[0]**2+m[1]**2+m[2]**2+m[3]**2+m[4]**2+m[5]**2+1)}function q(m,t,L){m[0]=t[0]+L[0];m[1]=t[1]+L[1];m[2]=t[2]+L[2];m[3]=t[3]+L[3];m[4]=
t[4]+L[4];m[5]=t[5]+L[5];return m}function E(m,t,L){m[0]=t[0]-L[0];m[1]=t[1]-L[1];m[2]=t[2]-L[2];m[3]=t[3]-L[3];m[4]=t[4]-L[4];m[5]=t[5]-L[5];return m}function z(m,t,L){m[0]=t[0]*L;m[1]=t[1]*L;m[2]=t[2]*L;m[3]=t[3]*L;m[4]=t[4]*L;m[5]=t[5]*L;return m}function F(m,t,L,K){m[0]=t[0]+L[0]*K;m[1]=t[1]+L[1]*K;m[2]=t[2]+L[2]*K;m[3]=t[3]+L[3]*K;m[4]=t[4]+L[4]*K;m[5]=t[5]+L[5]*K;return m}function B(m,t){return m[0]===t[0]&&m[1]===t[1]&&m[2]===t[2]&&m[3]===t[3]&&m[4]===t[4]&&m[5]===t[5]}function y(m,t){const L=
m[0],K=m[1],N=m[2],Y=m[3],da=m[4];m=m[5];const fa=t[0],ka=t[1],x=t[2],G=t[3],V=t[4];t=t[5];return Math.abs(L-fa)<=b.EPSILON*Math.max(1,Math.abs(L),Math.abs(fa))&&Math.abs(K-ka)<=b.EPSILON*Math.max(1,Math.abs(K),Math.abs(ka))&&Math.abs(N-x)<=b.EPSILON*Math.max(1,Math.abs(N),Math.abs(x))&&Math.abs(Y-G)<=b.EPSILON*Math.max(1,Math.abs(Y),Math.abs(G))&&Math.abs(da-V)<=b.EPSILON*Math.max(1,Math.abs(da),Math.abs(V))&&Math.abs(m-t)<=b.EPSILON*Math.max(1,Math.abs(m),Math.abs(t))}var v=Object.freeze({__proto__:null,
copy:k,identity:p,set:D,invert:l,determinant:u,multiply:H,rotate:J,scale:w,translate:r,fromRotation:n,fromScaling:A,fromTranslation:e,str:d,frob:c,add:q,subtract:E,multiplyScalar:z,multiplyScalarAndAdd:F,exactEquals:B,equals:y,mul:H,sub:E});h.add=q;h.copy=k;h.determinant=u;h.equals=y;h.exactEquals=B;h.frob=c;h.fromRotation=n;h.fromScaling=A;h.fromTranslation=e;h.identity=p;h.invert=l;h.mat2d=v;h.mul=H;h.multiply=H;h.multiplyScalar=z;h.multiplyScalarAndAdd=F;h.rotate=J;h.scale=w;h.set=D;h.str=d;h.sub=
E;h.subtract=E;h.translate=r})},"esri/chunks/mat2df64":function(){define(["exports"],function(h){function b(){return[1,0,0,1,0,0]}function k(u){return[u[0],u[1],u[2],u[3],u[4],u[5]]}function p(u,H,J,w,r,n){return[u,H,J,w,r,n]}function D(u,H){return new Float64Array(u,H,6)}var l=Object.freeze({__proto__:null,create:b,clone:k,fromValues:p,createView:D});h.clone=k;h.create=b;h.createView=D;h.fromValues=p;h.mat2df64=l})},"esri/views/2d/AnimationManager":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/scheduling ../../core/Accessor ../../geometry/Point ../../geometry ../../Viewpoint ./unitBezier ../ViewAnimation ./viewpointUtils".split(" "),
function(h,b,k,p,D,l,u,H,J,w,r,n,A,e,d,c,q,E,z){let F=function(){function B(y,v,m,t){const L=y.targetGeometry,K=v.targetGeometry;t?"string"===typeof t&&(t=q.parse(t)||q.easingFunctions.ease):t=q.easingFunctions.ease;this.easing=t;this.duration=m;this.sCenterX=L.x;this.sCenterY=L.y;this.sScale=y.scale;this.sRotation=y.rotation;this.tCenterX=K.x;this.tCenterY=K.y;this.tScale=v.scale;this.tRotation=v.rotation;this.dCenterX=this.tCenterX-this.sCenterX;this.dCenterY=this.tCenterY-this.sCenterY;this.dScale=
this.tScale-this.sScale;this.dRotation=this.tRotation-this.sRotation;180<this.dRotation?this.dRotation-=360:-180>this.dRotation&&(this.dRotation+=360)}B.prototype.applyRatio=function(y,v){var m=this.easing(v);let t,L;1<=v?(v=this.tCenterX,t=this.tCenterY,L=this.tRotation,m=this.tScale):(v=this.sCenterX+m*this.dCenterX,t=this.sCenterY+m*this.dCenterY,L=this.sRotation+m*this.dRotation,m=this.sScale+m*this.dScale);y.targetGeometry.x=v;y.targetGeometry.y=t;y.scale=m;y.rotation=L};return B}();k=function(B){function y(m){m=
B.call(this,m)||this;m.duration=200;m.transition=null;m.easing=q.easingFunctions.ease;m.view=null;m.viewpoint=null;m.viewpoint=new c({targetGeometry:new e,scale:0,rotation:0});m._updateTask=n.addFrameTask({postRender:m._postRender.bind(h._assertThisInitialized(m))});m._updateTask.pause();return m}h._inheritsLoose(y,B);var v=y.prototype;v.destroy=function(){this._updateTask.remove();this._updateTask=null};v.animate=function(m,t,L){this.stop();z.copy(this.viewpoint,t);this.transition=new F(this.viewpoint,
m.target,L&&L.duration||this.duration,L&&L.easing||this.easing);t=()=>{this.animation===m&&this._updateTask&&("finished"===m.state&&(this.transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.updateFunction=this.animation=null)};m.when(t,t);this._startTime=performance.now();this._updateTask.resume();return this.animation=m};v.animateContinous=function(m,t){this.stop();this.updateFunction=t;this.viewpoint=m;const L=new E({target:m.clone()});
m=()=>{this.animation===L&&this._updateTask&&(this.updateFunction=this.animation=null)};L.when(m,m);this._startTime=performance.now();this._updateTask.resume();return this.animation=L};v.stop=function(){this.animation&&(this.animation.stop(),this.updateFunction=this.animation=null)};v._postRender=function(m){var t=this.animation;t&&t.state!==E.State.STOPPED?(this.updateFunction?this.updateFunction(this.viewpoint,m.deltaTime):(m=(performance.now()-this._startTime)/this.transition.duration,t=1<=m,this.transition.applyRatio(this.viewpoint,
m),t&&this.animation.finish()),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())):this._updateTask.pause()};return y}(A);b.__decorate([l.property()],k.prototype,"animation",void 0);b.__decorate([l.property()],k.prototype,"duration",void 0);b.__decorate([l.property()],k.prototype,"transition",void 0);b.__decorate([l.property()],k.prototype,"easing",void 0);b.__decorate([l.property()],k.prototype,"view",void 0);b.__decorate([l.property()],k.prototype,"viewpoint",void 0);return k=b.__decorate([H.subclass("esri.views.2d.AnimationManager")],
k)})},"esri/views/2d/unitBezier":function(){define(["exports"],function(h){function b(D,l,u,H){function J(c,q){var E;let z,F;z=c;for(E=0;8>E;E++){F=((n*z+r)*z+w)*z-c;if(Math.abs(F)<q)return z;var B=(3*n*z+2*r)*z+w;if(1E-6>Math.abs(B))break;z-=F/B}B=0;E=1;z=c;if(z<B)return B;if(z>E)return E;for(;B<E;){F=((n*z+r)*z+w)*z;if(Math.abs(F-c)<q)break;c>F?B=z:E=z;z=.5*(E-B)+B}return z}const w=3*D,r=3*(u-D)-w,n=1-w-r,A=3*l,e=3*(H-l)-A,d=1-A-e;return function(c,q=1E-6){c=J(c,q);return((d*c+e)*c+A)*c}}const k=
/^cubic-bezier\((.*)\)/,p={};p.ease=b(.25,.1,.25,1);p.linear=b(0,0,1,1);p.easeIn=p["ease-in"]=b(.42,0,1,1);p.easeOut=p["ease-out"]=b(0,0,.58,1);p.easeInOut=p["ease-in-out"]=b(.42,0,.58,1);h.easingFunctions=p;h.parse=function(D){let l=p[D]||null;!l&&(D=k.exec(D))&&(D=D[1].split(",").map(u=>parseFloat(u.trim())),4!==D.length||D.some(u=>isNaN(u))||(l=b.apply(b,D)));return l};h.unitBezier=b;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/views/2d/FrameTask":function(){define(["../../core/maybe",
"../../core/scheduling"],function(h,b){return function(){function k(D){this.view=D;this._frameTaskHandle=null;this._updateRequested=!1;this.updateEnabled=this.stationary=!0;this.animationInProgress=!1;this.prepare=()=>{this._updateParameters.state=this.view.state;this._updateParameters.stationary=this.view.stationary;this._updateParameters.pixelRatio=window.devicePixelRatio;this._updateParameters.renderingOptions=this.view.renderingOptions};this.update=()=>{this._updateRequested=!1;if(this.updateEnabled){var {basemapView:l,
graphicsView:u,labelManager:H,layerViews:J,state:{id:w}}=this.view;l.baseLayerViews.forEach(this._updateLayerView,this);J.forEach(this._updateLayerView,this);l.referenceLayerViews.forEach(this._updateLayerView,this);h.isSome(H)&&(H.lastUpdateId!==w&&(H.viewChange(),H.lastUpdateId=w),H.updateRequested&&H.processUpdate(this._updateParameters));h.isSome(u)&&(u.lastUpdateId!==w&&(u.viewChange(),u.lastUpdateId=w),u.updateRequested&&u.processUpdate(this._updateParameters));this.animationInProgress||this._updateRequested||
this._frameTaskHandle.pause()}}}var p=k.prototype;p.destroy=function(){this.stop()};p.start=function(){this.stationary=this.view.stationary;this._updateParameters={state:this.view.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:this.view.renderingOptions};this._stationaryHandle=this.view.watch("stationary",D=>{this.stationary=D;this.requestFrame()});this._frameTaskHandle=b.addFrameTask(this)};p.stop=function(){this._frameTaskHandle&&(this._stationaryHandle.remove(),
this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)};p.requestUpdate=function(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())};p.requestFrame=function(){this._frameTaskHandle&&this._frameTaskHandle.resume()};p._updateLayerView=function(D){const l=this.view.state,u=D.lastUpdateId;if(null==u||!this.stationary&&!D.moving)D.moving=!0,D.moveStart();u!==l.id&&D.viewChange();this.stationary&&
D.moving&&(D.moving=!1,D.moveEnd());D.lastUpdateId=l.id;D.updateRequested&&D.processUpdate(this._updateParameters);"layerViews"in D&&D.layerViews.forEach(this._updateLayerView,this)};return k}()})},"esri/views/2d/layerViewModuleImportUtils":function(){define(["require","exports","../../core/maybe","../../core/Error"],function(h,b,k,p){function D(w){return Object.freeze({__proto__:null,"default":w})}function l(){return Promise.all([new Promise(function(w,r){h(["../webgl"],w,r)}),new Promise(function(w,
r){h(["./mapViewDeps"],w,r)})])}const u=()=>l().then(()=>new Promise(function(w,r){h(["./layers/TileLayerView2D"],function(n){w(D(n))},r)})),H=()=>l().then(()=>new Promise(function(w,r){h(["./layers/FeatureLayerView2D"],function(n){w(D(n))},r)})),J={"base-dynamic":()=>l().then(()=>new Promise(function(w,r){h(["./layers/BaseDynamicLayerView2D"],function(n){w(D(n))},r)})),"base-tile":u,"bing-maps":u,csv:H,"geo-rss":()=>l().then(()=>new Promise(function(w,r){h(["./layers/GeoRSSLayerView2D"],function(n){w(D(n))},
r)})),feature:H,geojson:H,graphics:()=>l().then(()=>new Promise(function(w,r){h(["./layers/GraphicsLayerView2D"],function(n){w(D(n))},r)})),group:()=>l().then(()=>new Promise(function(w,r){h(["./layers/GroupLayerView2D"],function(n){w(D(n))},r)})),imagery:()=>l().then(()=>new Promise(function(w,r){h(["./layers/ImageryLayerView2D"],function(n){w(D(n))},r)})),"imagery-tile":()=>l().then(()=>new Promise(function(w,r){h(["./layers/ImageryTileLayerView2D"],function(n){w(D(n))},r)})),kml:()=>l().then(()=>
new Promise(function(w,r){h(["./layers/KMLLayerView2D"],function(n){w(D(n))},r)})),"map-image":()=>l().then(()=>new Promise(function(w,r){h(["./layers/MapImageLayerView2D"],function(n){w(D(n))},r)})),"map-notes":()=>l().then(()=>new Promise(function(w,r){h(["./layers/MapNotesLayerView2D"],function(n){w(D(n))},r)})),"ogc-feature":()=>l().then(()=>new Promise(function(w,r){h(["./layers/OGCFeatureLayerView2D"],function(n){w(D(n))},r)})),"open-street-map":u,route:()=>l().then(()=>new Promise(function(w,
r){h(["./layers/RouteLayerView2D"],function(n){w(D(n))},r)})),stream:()=>l().then(()=>new Promise(function(w,r){h(["./layers/StreamLayerView2D"],function(n){w(D(n))},r)})),tile:u,"vector-tile":()=>l().then(()=>new Promise(function(w,r){h(["./layers/VectorTileLayerView2D"],function(n){w(D(n))},r)})),wcs:()=>l().then(()=>new Promise(function(w,r){h(["./layers/ImageryTileLayerView2D"],function(n){w(D(n))},r)})),"web-tile":u,wms:()=>l().then(()=>new Promise(function(w,r){h(["./layers/WMSLayerView2D"],
function(n){w(D(n))},r)})),wmts:()=>l().then(()=>new Promise(function(w,r){h(["./layers/WMTSLayerView2D"],function(n){w(D(n))},r)})),"base-elevation":null,"building-scene":null,elevation:null,"integrated-mesh":null,"point-cloud":null,scene:null,unknown:null,unsupported:null};b.layerView2DImporter={hasLayerViewModule:w=>k.isSome(J[w.type]),importLayerView:w=>{var r=J[w.type];if(!k.isSome(r))throw w=w.declaredClass?w.declaredClass.slice(w.declaredClass.lastIndexOf(".")+1):"Unknown",r=w.replace(/([a-z])([A-Z])/g,
"$1-$2").toLowerCase(),w=new p(`${r}:view-not-supported`,`${w} is not supported in 2D`),w;return r(w)}};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/views/2d/MapViewConstraints":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../geometry/Extent ../../geometry/Polygon ../../geometry ../../core/Evented ../../layers/support/LOD ./constraints/GeometryConstraint ./constraints/RotationConstraint ./constraints/ZoomConstraint".split(" "),
function(h,b,k,p,D,l,u,H,J,w,r,n,A,e,d,c,q,E,z){k={base:null,key:"type",typeMap:{extent:n,polygon:A}};d=function(F){function B(){var v=F.apply(this,arguments)||this;v.lods=null;v.minScale=0;v.maxScale=0;v.minZoom=-1;v.maxZoom=-1;v.rotationEnabled=!0;v.snapToZoom=!0;return v}h._inheritsLoose(B,F);var y=B.prototype;y.initialize=function(){this.watch(["_zoom","_rotation"],this.emit.bind(this,"update"),!0)};y.destroy=function(){this.view=null;this._set("_zoom",null);this._set("_rotation",null)};y.canZoomInTo=
function(v){const m=this.effectiveMaxScale;return 0===m||v>=m};y.canZoomOutTo=function(v){const m=this.effectiveMinScale;return 0===m||v<=m};y.constrain=function(v,m){this._zoom.constrain(v,m);this._rotation.constrain(v,m);this._geometry.constrain(v,m);return v};y.constrainByGeometry=function(v){return this._geometry.constrain(v)};y.fit=function(v){return this._zoom.fit(v)};y.zoomToScale=function(v){return this._zoom.zoomToScale(v)};y.scaleToZoom=function(v){return this._zoom.scaleToZoom(v)};y.snapScale=
function(v){return this._zoom.snapToClosestScale(v)};y.snapToNextScale=function(v){return this._zoom.snapToNextScale(v)};y.snapToPreviousScale=function(v){return this._zoom.snapToPreviousScale(v)};h._createClass(B,[{key:"geometry",set:function(v){v?this._set("geometry",v):this._set("geometry",null)}},{key:"_defaultLODs",get:function(){const v=this.get("view.defaultsFromMap.tileInfo"),m=this.get("view.spatialReference");return v&&m&&v.spatialReference.equals(m)?v.lods:null}},{key:"_geometry",get:function(){return new q.GeometryConstraint({geometry:this.geometry,
spatialReference:this.view.spatialReference})}},{key:"_rotation",get:function(){return new E({rotationEnabled:this.rotationEnabled})}},{key:"_zoom",get:function(){return new z({lods:this.lods||this._defaultLODs,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale,snapToZoom:this.snapToZoom})}}]);return B}(d.EventedAccessor);b.__decorate([l.property({readOnly:!0,aliasOf:"_zoom.effectiveLODs"})],d.prototype,"effectiveLODs",void 0);b.__decorate([l.property({readOnly:!0,
aliasOf:"_zoom.effectiveMinScale"})],d.prototype,"effectiveMinScale",void 0);b.__decorate([l.property({readOnly:!0,aliasOf:"_zoom.effectiveMaxScale"})],d.prototype,"effectiveMaxScale",void 0);b.__decorate([l.property({readOnly:!0,aliasOf:"_zoom.effectiveMinZoom"})],d.prototype,"effectiveMinZoom",void 0);b.__decorate([l.property({readOnly:!0,aliasOf:"_zoom.effectiveMaxZoom"})],d.prototype,"effectiveMaxZoom",void 0);b.__decorate([l.property({types:k,value:null})],d.prototype,"geometry",null);b.__decorate([l.property({type:[c]})],
d.prototype,"lods",void 0);b.__decorate([l.property()],d.prototype,"minScale",void 0);b.__decorate([l.property()],d.prototype,"maxScale",void 0);b.__decorate([l.property()],d.prototype,"minZoom",void 0);b.__decorate([l.property()],d.prototype,"maxZoom",void 0);b.__decorate([l.property()],d.prototype,"rotationEnabled",void 0);b.__decorate([l.property()],d.prototype,"snapToZoom",void 0);b.__decorate([l.property()],d.prototype,"view",void 0);b.__decorate([l.property()],d.prototype,"_defaultLODs",null);
b.__decorate([l.property({type:q.GeometryConstraint})],d.prototype,"_geometry",null);b.__decorate([l.property({type:E})],d.prototype,"_rotation",null);b.__decorate([l.property({readOnly:!0,type:z})],d.prototype,"_zoom",null);return d=b.__decorate([H.subclass("esri.views.2d.MapViewConstraints")],d)})},"esri/views/2d/constraints/GeometryConstraint":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../../core/Accessor ../../../geometry/support/webMercatorUtils ../../../geometry/support/contains ../../../geometry/projection ../../../geometry/support/near".split(" "),
function(h,b,k,p,D,l,u,H,J,w,r,n,A,e,d,c,q){var E;const z=D.getLogger("esri.views.MapView");h.GeometryConstraint=E=function(F){function B(v){v=F.call(this,v)||this;v.geometry=null;v.spatialReference=null;return v}b._inheritsLoose(B,F);var y=B.prototype;y.constrain=function(v,m){if(!this.normalizedGeometry)return v;m=v.targetGeometry;if("extent"===this.normalizedGeometry.type?d.extentContainsPoint(this.normalizedGeometry,m):d.polygonContainsPoint(this.normalizedGeometry,m))return v;({coordinate:m}=
q.nearestCoordinate(this.normalizedGeometry,m));if(!m)return v;v.targetGeometry=m;return v};y.clone=function(){var v,m;return new E({geometry:null==(v=this.geometry)?void 0:v.clone(),spatialReference:null==(m=this.spatialReference)?void 0:m.clone()})};b._createClass(B,[{key:"normalizedGeometry",get:function(){if(!this.geometry||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference)){if(e.canProject(this.geometry,this.spatialReference))return e.project(this.geometry,
this.spatialReference);if(c.isLoaded())return c.project(this.geometry,this.spatialReference);z.error("#constraints.geometry","unsupported coordinate system. The source geometry cannot be projected to the view's coordinate system. The projection engine cannot be loaded.",{geometry:this.geometry});return null}return this.geometry}}]);return B}(A);k.__decorate([u.property({constructOnly:!0})],h.GeometryConstraint.prototype,"geometry",void 0);k.__decorate([u.property({readOnly:!0})],h.GeometryConstraint.prototype,
"normalizedGeometry",null);k.__decorate([u.property({constructOnly:!0})],h.GeometryConstraint.prototype,"spatialReference",void 0);h.GeometryConstraint=E=k.__decorate([J.subclass("esri.views.2d.constraints.GeometryConstraint")],h.GeometryConstraint);Object.defineProperty(h,"__esModule",{value:!0})})},"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/maybe ../core/Error ../core/promiseUtils ./support/spatialReferenceUtils ./support/Ellipsoid ./Point ./Extent ./Multipoint ./Polygon ./Polyline ../core/mathUtils ../chunks/vec3f64 ../chunks/vec3 ./projectionEllipsoid ../core/unitUtils ../chunks/mat4 ../chunks/pe ./support/aaBoundingRect ./support/geodesicConstants ./support/GeographicTransformation".split(" "),
function(h,b,k,p,D,l,u,H,J,w,r,n,A,e,d,c,q,E,z,F,B,y,v){function m(){return!!wa&&F.isLoaded()}function t(M){p.isNone(Aa)&&(Aa=Promise.all([F.load(),(new Promise(function(Q,P){h(["../chunks/geometryEngineBase"],Q,P)})).then(function(Q){return Q.geometryEngineBase}),new Promise(function(Q,P){h(["./geometryAdapters/hydrated"],Q,P)})]));return Aa.then(([,Q,{hydratedAdapter:P}])=>{l.throwIfAborted(M);za=P;wa=Q.default;wa._enableProjection(F.pe)})}function L(M,Q,P,Z,oa=null){if(p.isNone(P)||p.isNone(Z))return Q;
if(N(P,Z,oa))return Q.map(ra=>Y(ra,P,Z));if(p.isNone(oa)){const ra=v.cacheKey(P,Z);void 0!==Ba[ra]?oa=Ba[ra]:(oa=K(P,Z,null),p.isNone(oa)&&(oa=new v),Ba[ra]=oa)}if(p.isNone(wa))throw new Ma;return wa._project(M,Q,P,Z,oa)}function K(M,Q,P=null){if(p.isNone(wa))throw new Ma;if(p.isNone(M)||p.isNone(Q))return null;M=wa._getTransformation(za,M,Q,P,null==P?void 0:P.spatialReference);return null!==M?v.fromGE(M):null}function N(M,Q,P){return P?!1:u.equals(M,Q)?!0:u.isValid(M)&&u.isValid(Q)&&!!ta(M,Q,Na)}
function Y(M,Q,P){if(!M)return M;if("x"in M){var Z=new J;return da(M,Q,Z,P)?Z:null}return"xmin"in M?(Z=new w,G(M,Q,Z,P)?Z:null):"rings"in M?(Z=new n,x(M,Q,Z,P)?Z:null):"paths"in M?(Z=new A,ka(M,Q,Z,P)?Z:null):"points"in M?(Z=new r,fa(M,Q,Z,P)?Z:null):null}function da(M,Q,P,Z,oa=0){Ca[0]=M.x;Ca[1]=M.y;const ra=M.z;Ca[2]=void 0!==ra?ra:oa;if(!S(Ca,Q,0,Ca,Z,0,1))return!1;P.x=Ca[0];P.y=Ca[1];P.spatialReference=Z;void 0===ra?(P.z=void 0,P.hasZ=!1):(P.z=Ca[2],P.hasZ=!0);void 0===M.m?(P.m=void 0,P.hasM=
!1):(P.m=M.m,P.hasM=!0);return!0}function fa(M,Q,P,Z,oa=0){const {points:ra,hasZ:xa,hasM:ya}=M;M=[];const Ja=ra.length,Ia=[];for(var Ha of ra)Ia.push(Ha[0],Ha[1],xa?Ha[2]:oa);if(!S(Ia,Q,0,Ia,Z,0,Ja))return!1;for(Q=0;Q<Ja;++Q){oa=3*Q;Ha=Ia[oa];const Oa=Ia[oa+1];xa&&ya?M.push([Ha,Oa,Ia[oa+2],ra[Q][3]]):xa?M.push([Ha,Oa,Ia[oa+2]]):ya?M.push([Ha,Oa,ra[Q][2]]):M.push([Ha,Oa])}P.points=M;P.spatialReference=Z;P.hasZ=xa;P.hasM=ya;return!0}function ka(M,Q,P,Z,oa=0){const {paths:ra,hasZ:xa,hasM:ya}=M;M=[];
if(!W(ra,xa,ya,Q,M,Z,oa))return!1;P.paths=M;P.spatialReference=Z;P.hasZ=xa;P.hasM=ya;return!0}function x(M,Q,P,Z,oa=0){const {rings:ra,hasZ:xa,hasM:ya}=M;M=[];if(!W(ra,xa,ya,Q,M,Z,oa))return!1;P.rings=M;P.spatialReference=Z;P.hasZ=xa;P.hasM=ya;return!0}function G(M,Q,P,Z,oa=0){const {xmin:ra,ymin:xa,xmax:ya,ymax:Ja,hasZ:Ia,hasM:Ha}=M;if(!V(ra,xa,Ia?M.zmin:oa,Q,Ca,Z))return!1;P.xmin=Ca[0];P.ymin=Ca[1];Ia&&(P.zmin=Ca[2]);if(!V(ya,Ja,Ia?M.zmax:oa,Q,Ca,Z))return!1;P.xmax=Ca[0];P.ymax=Ca[1];Ia&&(P.zmax=
Ca[2]);Ha&&(P.mmin=M.mmin,P.mmax=M.mmax);P.spatialReference=Z;return!0}function V(M,Q,P,Z,oa,ra){Da[0]=M;Da[1]=Q;Da[2]=P;return S(Da,Z,0,oa,ra,0,1)}function na(M,Q,P,Z){if(p.isNone(Q)||p.isNone(Z)||2>M.length)return!1;2===M.length&&(Da[0]=M[0],Da[1]=M[1],Da[2]=0,M=Da);return S(M,Q,0,P,Z,0,1)}function R(M,Q,P){p.isNone(Q)?M=!1:(Q=ma(Q,La),Q=Ka[Q][6],p.isNone(Q)?M=!1:(Q(M,0,Da,0),P!==Da&&(P[0]=Da[0],P[1]=Da[1],2<P.length&&(P[2]=Da[2])),M=!0));return M}function S(M,Q,P,Z,oa,ra,xa=1){Q=ta(Q,oa,Na);if(p.isNone(Q))return!1;
if(Q===ca){if(M===Z&&P===ra)return!0;xa=P+3*xa;for(let ya=P,Ja=ra;ya<xa;ya++,Ja++)Z[Ja]=M[ya];return!0}xa=P+3*xa;for(let ya=P,Ja=ra;ya<xa;ya+=3,Ja+=3)Q(M,ya,Z,Ja);return!0}function W(M,Q,P,Z,oa,ra,xa=0){const ya=[];for(const Ja of M)for(const Ia of Ja)ya.push(Ia[0],Ia[1],Q?Ia[2]:xa);if(!S(ya,Z,0,ya,ra,0,ya.length/3))return!1;Z=0;oa.length=0;for(const Ja of M){M=[];for(const Ia of Ja)Q&&P?M.push([ya[Z++],ya[Z++],ya[Z++],Ia[3]]):Q?M.push([ya[Z++],ya[Z++],ya[Z++]]):(P?M.push([ya[Z++],ya[Z++],Ia[2]]):
M.push([ya[Z++],ya[Z++]]),Z++);oa.push(M)}return!0}function ja(M,Q,P){const Z=Math.sin(Q);Q=Math.cos(Q);const oa=Math.sin(M);M=Math.cos(M);P[0]=-Z;P[4]=-oa*Q;P[8]=M*Q;P[12]=0;P[1]=Q;P[5]=-oa*Z;P[9]=M*Z;P[13]=0;P[2]=0;P[6]=M;P[10]=oa;P[14]=0;P[3]=0;P[7]=0;P[11]=0;P[15]=1;return P}function ma(M,Q){if(Q.spatialReference===M)return Q.spatialReferenceId;Q.spatialReference=M;"metersPerUnit"in Q&&(Q.metersPerUnit=E.getMetersPerUnitForSR(M,1));return M.wkt===q.SphericalECEFSpatialReference.wkt?Q.spatialReferenceId=
1:u.isWGS84(M)?Q.spatialReferenceId=2:u.isWebMercator(M)?Q.spatialReferenceId=3:M.wkt===q.WGS84ECEFSpatialReference.wkt?Q.spatialReferenceId=4:4490===M.wkid?Q.spatialReferenceId=5:M.wkt===q.SphericalPCPFMars.wkt?Q.spatialReferenceId=7:M.wkt===q.SphericalPCPFMoon.wkt?Q.spatialReferenceId=9:u.isMars(M)?Q.spatialReferenceId=8:u.isMoon(M)?Q.spatialReferenceId=10:Q.spatialReferenceId=0}function ca(M,Q,P,Z){M!==P&&(P[Z++]=M[Q++],P[Z++]=M[Q++],P[Z]=M[Q])}function U(M,Q,P,Z){P[Z++]=Ea*(M[Q++]/H.earth.radius);
P[Z++]=Ea*(Math.PI/2-2*Math.atan(Math.exp(-1*M[Q++]/H.earth.radius)));P[Z]=M[Q]}function aa(M,Q,P,Z){U(M,Q,P,Z);I(P,Z,P,Z)}function sa(M,Q,P,Z){U(M,Q,P,Z);ia(P,Z,P,Z)}function la(M,Q,P,Z,oa){var ra=.4999999*Math.PI;ra=e.clamp(Ga*M[Q+1],-ra,ra);ra=Math.sin(ra);P[Z++]=Ga*M[Q]*oa.radius;P[Z++]=oa.halfSemiMajorAxis*Math.log((1+ra)/(1-ra));P[Z]=M[Q+2]}function a(M,Q,P,Z){la(M,Q,P,Z,H.earth)}function f(M,Q,P,Z,oa){oa+=M[Q+2];const ra=Ga*M[Q+1];M=Ga*M[Q];Q=Math.cos(ra);P[Z++]=Math.cos(M)*Q*oa;P[Z++]=Math.sin(M)*
Q*oa;P[Z]=Math.sin(ra)*oa}function g(M,Q,P,Z){f(M,Q,P,Z,H.moon.radius)}function C(M,Q,P,Z){f(M,Q,P,Z,H.mars.radius)}function I(M,Q,P,Z){f(M,Q,P,Z,H.earth.radius)}function O(M,Q,P,Z,oa){var ra=M[Q];const xa=M[Q+1];Q=M[Q+2];M=Math.sqrt(ra*ra+xa*xa+Q*Q);Q=e.asinClamped(Q/(0===M?1:M));ra=Math.atan2(xa,ra);P[Z++]=Ea*ra;P[Z++]=Ea*Q;P[Z]=M-oa}function T(M,Q,P,Z){O(M,Q,P,Z,H.moon.radius)}function X(M,Q,P,Z){O(M,Q,P,Z,H.mars.radius)}function ba(M,Q,P,Z){O(M,Q,P,Z,H.earth.radius)}function ha(M,Q,P,Z){ba(M,
Q,P,Z);a(P,Z,P,Z)}function ea(M,Q,P,Z){ba(M,Q,P,Z);ia(P,Z,P,Z)}function ia(M,Q,P,Z){{var oa=H.earth;const xa=Ga*M[Q];var ra=Ga*M[Q+1];M=M[Q+2];Q=Math.sin(ra);ra=Math.cos(ra);const ya=oa.radius/Math.sqrt(1-oa.eccentricitySquared*Q*Q);P[Z++]=(ya+M)*ra*Math.cos(xa);P[Z++]=(ya+M)*ra*Math.sin(xa);P[Z++]=(ya*(1-oa.eccentricitySquared)+M)*Q}}function pa(M,Q,P,Z){var oa=y.earthEllipsoidConstants,ra=M[Q],xa=M[Q+1];M=M[Q+2];let ya;Q=Math.abs(M);var Ja=ra*ra+xa*xa;var Ia=Math.sqrt(Ja);var Ha=Ja+M*M;var Oa=Math.sqrt(Ha);
ra=Math.atan2(xa,ra);var Sa=M*M/Ha;Ha=Ja/Ha;xa=oa.a2/Oa;Ja=oa.a3-oa.a4/Oa;.3<Ha?(Sa=Q/Oa*(1+Ha*(oa.a1+xa+Sa*Ja)/Oa),Oa=Math.asin(Sa),xa=Sa*Sa,Ha=Math.sqrt(1-xa)):(Ha=Ia/Oa*(1-Sa*(oa.a5-xa-Ha*Ja)/Oa),Oa=Math.acos(Ha),xa=1-Ha*Ha,Sa=Math.sqrt(xa));ya=1-H.earth.eccentricitySquared*xa;xa=H.earth.radius/Math.sqrt(ya);oa=oa.a6*xa;xa=Ia-xa*Ha;Ja=Q-oa*Sa;Q=Ha*xa+Sa*Ja;Ia=Ha*Ja-Sa*xa;oa=Ia/(oa/ya+Q);Oa+=oa;0>M&&(Oa=-Oa);P[Z++]=Ea*ra;P[Z++]=Ea*Oa;P[Z]=Q+Ia*oa/2}function qa(M,Q,P,Z){pa(M,Q,P,Z);I(P,Z,P,Z)}function va(M,
Q,P,Z){pa(M,Q,P,Z);a(P,Z,P,Z)}function ta(M,Q,P=Fa()){return p.isNone(M)||p.isNone(Q)?null:ua(M,Q,P).projector}function ua(M,Q,P){if(p.isNone(M)||p.isNone(Q)||P.source.spatialReference===M&&P.dest.spatialReference===Q)return P;const Z=ma(M,P.source),oa=ma(Q,P.dest);0===Z&&0===oa?u.equals(M,Q)?P.projector=ca:P.projector=null:P.projector=Ka[Z][oa];return P}function Fa(){return{source:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},
projector:ca}}let wa=null,za=null,Aa=null,Ba={},Ma=function(M){function Q(){return M.call(this,"projection:not-loaded","projection engine not fully loaded yet, please call load()")||this}k._inheritsLoose(Q,M);return Q}(D);const Ka={[2]:{[5]:null,[8]:null,[10]:null,[6]:ca,[1]:I,[7]:null,[9]:null,[0]:null,[3]:a,[2]:ca,[4]:ia},[5]:{[5]:ca,[8]:null,[10]:null,[6]:ca,[1]:I,[7]:null,[9]:null,[0]:null,[3]:null,[2]:null,[4]:ia},[8]:{[5]:null,[8]:ca,[10]:null,[6]:null,[1]:null,[7]:C,[9]:null,[0]:null,[3]:null,
[2]:null,[4]:null},[10]:{[5]:null,[8]:null,[10]:ca,[6]:null,[1]:null,[7]:null,[9]:g,[0]:null,[3]:null,[2]:null,[4]:null},[3]:{[5]:null,[8]:null,[10]:null,[6]:U,[1]:aa,[7]:null,[9]:null,[0]:null,[3]:ca,[2]:U,[4]:sa},[4]:{[5]:pa,[8]:null,[10]:null,[6]:pa,[1]:qa,[7]:null,[9]:null,[0]:null,[3]:va,[2]:pa,[4]:ca},[1]:{[5]:ba,[8]:null,[10]:null,[6]:ba,[1]:ca,[7]:null,[9]:null,[0]:null,[3]:ha,[2]:ba,[4]:ea},[7]:{[5]:null,[8]:X,[10]:null,[6]:null,[1]:null,[7]:ca,[9]:null,[0]:null,[3]:null,[2]:null,[4]:null},
[9]:{[5]:null,[8]:null,[10]:T,[6]:null,[1]:null,[7]:null,[9]:ca,[0]:null,[3]:null,[2]:null,[4]:null},[0]:{[5]:null,[8]:null,[10]:null,[6]:null,[1]:null,[7]:null,[9]:null,[0]:ca,[3]:null,[2]:null,[4]:null},[6]:{[5]:null,[8]:null,[10]:null,[6]:ca,[1]:I,[7]:null,[9]:null,[0]:null,[3]:null,[2]:ca,[4]:ia}},La={spatialReference:null,spatialReferenceId:0},Pa={spatialReference:null,spatialReferenceId:0},Na=Fa(),Qa=Fa(),Ga=e.deg2rad(1),Ea=e.rad2deg(1),Da=d.create(),Ra=d.create(),Ta=d.create(),Ca=d.create(),
Ua=d.create();b.canProjectToWGS84ComparableLonLat=function(M){if(p.isNone(M))return!1;M=ma(M,La);return!!Ka[M][6]};b.canProjectWithoutEngine=N;b.computeLatLonToENURotation=ja;b.computeLinearTransformation=function(M,Q,P,Z){if(p.isNone(M)||p.isNone(Z))return!1;var oa=ma(M,La),ra=ma(Z,Pa);if(oa===ra&&1!==ra&&(0!==oa||u.equals(M,Z)))return z.identity(P),z.translate(P,P,Q),!0;if(1===ra||7===ra||9===ra){Z=M=0;if(1===ra){oa=Ka[oa][6];ra=Ka[6][ra];if(p.isNone(oa)||p.isNone(ra))return!1;oa(Q,0,Ra,0);ra(Ra,
0,Ta,0);M=Ga*Ra[0];Z=Ga*Ra[1]}else if(7===ra||9===ra){ra=Ka[oa][ra];if(p.isNone(ra))return!1;ra(Q,0,Ta,0);M=Ga*Q[0];Z=Ga*Q[1]}ja(Z,M,P);P[12]=Ta[0];P[13]=Ta[1];P[14]=Ta[2];return!0}if(3===ra&&(2===oa||1===oa)){ra=Ka[oa][6];if(p.isNone(ra))return!1;ra(Q,0,Ra,0);Q=Ga*Ra[1];a(Ra,0,Ta,0);z.identity(P);z.translate(P,P,Ta);Q=1/Math.cos(Q);z.scale(P,P,[Q,Q,1]);return!0}return!1};b.getProjectorName=function(M,Q){switch(ta(M,Q,Na)){case ca:return"copy3";case I:return"wgs84ToSphericalECEF";case a:return"wgs84ToWebMercator";
case ia:return"wgs84ToWGS84ECEF";case U:return"webMercatorToWGS84";case aa:return"webMercatorToSphericalECEF";case sa:return"webMercatorToWGS84ECEF";case pa:return"wgs84ECEFToWGS84";case qa:return"wgs84ECEFToSphericalECEF";case va:return"wgs84ECEFToWebMercator";case ba:return"sphericalECEFToWGS84";case ha:return"sphericalECEFToWebMercator";case X:return"sphericalMarsPCPFToMars2000";case T:return"sphericalMoonPCPFToMoon2000";case ea:return"sphericalECEFToWGS84ECEF";case C:return"mars2000ToSphericalPCPF";
case g:return"moon2000ToSphericalPCPF";default:return null}};b.getTransformation=K;b.getTransformations=function(M,Q,P=null){if(p.isNone(wa))throw new Ma;M=wa._getTransformationBySuitability(za,M,Q,P,null==P?void 0:P.spatialReference);if(null!==M){Q=[];for(const Z of M)Q.push(v.fromGE(Z));return Q}return[]};b.initializeProjection=async function(M,Q){if(!m())for(const {source:P,dest:Z,geographicTransformation:oa}of M)if(!N(P,Z,oa))return t(Q)};b.isLoaded=m;b.isSupported=function(){return!0};b.load=
t;b.localLinearScaleFactors=function(M,Q,P,Z){if(p.isNone(Q)||p.isNone(Z))return!1;const oa=ma(Q,La);var ra=ma(Z,Pa);if(oa===ra&&0!==oa||u.equals(Q,Z))return P[0]=1,P[1]=1,P[2]=1,!0;if(1===oa){Q=c.length(M);M=Q/Math.sqrt(M[0]*M[0]+M[1]*M[1]);Q/=H.earth.radius;if(3===ra)return P[0]=M*Q,P[1]=M*Q,P[2]=1,!0;if(2===ra||5===ra)return ra=180/(H.earth.radius*Math.PI),P[0]=ra*M*Q,P[1]=ra*Q,P[2]=1,!0}return!1};b.lonLatToSphericalPCPF=function(M,Q,P,Z,oa=0){Z+=oa;oa=Math.cos(P);M[0]=Math.cos(Q)*oa*Z;M[1]=Math.sin(Q)*
oa*Z;M[2]=Math.sin(P)*Z};b.lonLatToWebMercatorComparable=la;b.project=function(M,Q,P=null){return Array.isArray(M)?0===M.length?[]:L(za,M,M[0].spatialReference,Q,P):L(za,[M],M.spatialReference,Q,P)[0]};b.projectBoundingRect=function(M,Q,P,Z){if(null==M)return!1;if(u.equals(Q,Z))return B.set(P,M),!0;Da[0]=M[0];Da[1]=M[1];Da[2]=0;if(!S(Da,Q,0,Da,Z,0,1))return!1;P[0]=Da[0];P[1]=Da[1];Da[0]=M[2];Da[1]=M[3];Da[2]=0;if(!S(Da,Q,0,Da,Z,0,1))return!1;P[2]=Da[0];P[3]=Da[1];return!0};b.projectBoundingSphere=
function(M,Q,P,Z){if(p.isNone(Q)||p.isNone(Z))return!1;Q=ua(Q,Z,Qa);if(Q.projector===ca)return P[0]=M[0],P[1]=M[1],P[2]=M[2],P[3]=M[3],!0;if(p.isNone(Q.projector))return!1;const {source:oa,dest:ra}=Q;if(3===ra.spatialReferenceId){Q=Ka[oa.spatialReferenceId][2];if(p.isNone(Q))return!1;Q(M,0,Ra,0);Q=Math.abs(Ga*Ra[1])+Math.asin(M[3]/(H.earth.radius+M[2]));a(Ra,0,P,0);P[3]=Q>.9999*Math.PI?Number.MAX_VALUE:1/Math.cos(Q)*M[3];return!0}Q.projector(M,0,P,0);P[3]=M[3]*oa.metersPerUnit/ra.metersPerUnit;return!0};
b.projectBuffer=S;b.projectDirection=function(M,Q,P,Z,oa){c.copy(Ca,M);c.add(Ua,M,Q);na(Ca,P,Ca,oa);na(Ua,P,Ua,oa);c.subtract(Z,Ua,Ca);c.normalize(Z,Z)};b.projectExtent=function(M,Q,P=Q.spatialReference,Z=0){return p.isNone(P)?!1:G(M,M.spatialReference,Q,P,Z)};b.projectMany=L;b.projectMultipoint=function(M,Q,P=Q.spatialReference,Z=0){return p.isNone(P)?!1:fa(M,M.spatialReference,Q,P,Z)};b.projectPoint=function(M,Q,P=Q.spatialReference,Z=0){return p.isNone(P)?!1:da(M,M.spatialReference,Q,P,Z)};b.projectPointToVector=
function(M,Q,P,Z=0){Ca[0]=M.x;Ca[1]=M.y;const oa=M.z;Ca[2]=void 0!==oa?oa:Z;return S(Ca,M.spatialReference,0,Q,P,0,1)};b.projectPointToWGS84ComparableLonLat=function(M,Q){Ca[0]=M.x;Ca[1]=M.y;const P=M.z;Ca[2]=void 0!==P?P:0;return R(Ca,M.spatialReference,Q)};b.projectPolygon=function(M,Q,P=Q.spatialReference,Z=0){return p.isNone(P)?!1:x(M,M.spatialReference,Q,P,Z)};b.projectPolyline=function(M,Q,P=Q.spatialReference,Z=0){return p.isNone(P)?!1:ka(M,M.spatialReference,Q,P,Z)};b.projectVectorToDehydratedPoint=
function(M,Q,P){return S(M,Q,0,Ca,P.spatialReference,0,1)?(P.x=Ca[0],P.y=Ca[1],P.z=Ca[2],P):null};b.projectVectorToPoint=function(M,Q,P){if(p.isNone(Q)||p.isNone(P))return null;const Z=new J({spatialReference:P});return S(M,Q,0,Ca,P,0,1)?(Z.x=Ca[0],Z.y=Ca[1],Z.z=Ca[2],Z):null};b.projectVectorToVector=na;b.projectVectorToWGS84ComparableLonLat=R;b.projectXYZToVector=V;b.sphericalPCPFtoLonLatElevation=O;b.unload=function(){Aa=za=wa=null;Ba={}};Object.defineProperty(b,"__esModule",{value:!0})})},"esri/chunks/mat4":function(){define(["exports",
"./vec3f64","./common"],function(h,b,k){function p(a,f){a[0]=f[0];a[1]=f[1];a[2]=f[2];a[3]=f[3];a[4]=f[4];a[5]=f[5];a[6]=f[6];a[7]=f[7];a[8]=f[8];a[9]=f[9];a[10]=f[10];a[11]=f[11];a[12]=f[12];a[13]=f[13];a[14]=f[14];a[15]=f[15];return a}function D(a,f,g,C,I,O,T,X,ba,ha,ea,ia,pa,qa,va,ta,ua){a[0]=f;a[1]=g;a[2]=C;a[3]=I;a[4]=O;a[5]=T;a[6]=X;a[7]=ba;a[8]=ha;a[9]=ea;a[10]=ia;a[11]=pa;a[12]=qa;a[13]=va;a[14]=ta;a[15]=ua;return a}function l(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=
0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function u(a,f){if(a===f){const g=f[1],C=f[2],I=f[3],O=f[6],T=f[7],X=f[11];a[1]=f[4];a[2]=f[8];a[3]=f[12];a[4]=g;a[6]=f[9];a[7]=f[13];a[8]=C;a[9]=O;a[11]=f[14];a[12]=I;a[13]=T;a[14]=X}else a[0]=f[0],a[1]=f[4],a[2]=f[8],a[3]=f[12],a[4]=f[1],a[5]=f[5],a[6]=f[9],a[7]=f[13],a[8]=f[2],a[9]=f[6],a[10]=f[10],a[11]=f[14],a[12]=f[3],a[13]=f[7],a[14]=f[11],a[15]=f[15];return a}function H(a,f){const g=f[0],C=f[1],I=f[2],O=f[3],T=f[4],X=f[5],ba=
f[6],ha=f[7],ea=f[8],ia=f[9],pa=f[10],qa=f[11],va=f[12],ta=f[13],ua=f[14];f=f[15];const Fa=g*X-C*T,wa=g*ba-I*T,za=g*ha-O*T,Aa=C*ba-I*X,Ba=C*ha-O*X,Ma=I*ha-O*ba,Ka=ea*ta-ia*va,La=ea*ua-pa*va,Pa=ea*f-qa*va,Na=ia*ua-pa*ta,Qa=ia*f-qa*ta,Ga=pa*f-qa*ua;let Ea=Fa*Ga-wa*Qa+za*Na+Aa*Pa-Ba*La+Ma*Ka;if(!Ea)return null;Ea=1/Ea;a[0]=(X*Ga-ba*Qa+ha*Na)*Ea;a[1]=(I*Qa-C*Ga-O*Na)*Ea;a[2]=(ta*Ma-ua*Ba+f*Aa)*Ea;a[3]=(pa*Ba-ia*Ma-qa*Aa)*Ea;a[4]=(ba*Pa-T*Ga-ha*La)*Ea;a[5]=(g*Ga-I*Pa+O*La)*Ea;a[6]=(ua*za-va*Ma-f*wa)*Ea;
a[7]=(ea*Ma-pa*za+qa*wa)*Ea;a[8]=(T*Qa-X*Pa+ha*Ka)*Ea;a[9]=(C*Pa-g*Qa-O*Ka)*Ea;a[10]=(va*Ba-ta*za+f*Fa)*Ea;a[11]=(ia*za-ea*Ba-qa*Fa)*Ea;a[12]=(X*La-T*Na-ba*Ka)*Ea;a[13]=(g*Na-C*La+I*Ka)*Ea;a[14]=(ta*wa-va*Aa-ua*Fa)*Ea;a[15]=(ea*Aa-ia*wa+pa*Fa)*Ea;return a}function J(a,f){const g=f[0],C=f[1],I=f[2],O=f[3],T=f[4],X=f[5],ba=f[6],ha=f[7],ea=f[8],ia=f[9],pa=f[10],qa=f[11],va=f[12],ta=f[13],ua=f[14];f=f[15];a[0]=X*(pa*f-qa*ua)-ia*(ba*f-ha*ua)+ta*(ba*qa-ha*pa);a[1]=-(C*(pa*f-qa*ua)-ia*(I*f-O*ua)+ta*(I*qa-
O*pa));a[2]=C*(ba*f-ha*ua)-X*(I*f-O*ua)+ta*(I*ha-O*ba);a[3]=-(C*(ba*qa-ha*pa)-X*(I*qa-O*pa)+ia*(I*ha-O*ba));a[4]=-(T*(pa*f-qa*ua)-ea*(ba*f-ha*ua)+va*(ba*qa-ha*pa));a[5]=g*(pa*f-qa*ua)-ea*(I*f-O*ua)+va*(I*qa-O*pa);a[6]=-(g*(ba*f-ha*ua)-T*(I*f-O*ua)+va*(I*ha-O*ba));a[7]=g*(ba*qa-ha*pa)-T*(I*qa-O*pa)+ea*(I*ha-O*ba);a[8]=T*(ia*f-qa*ta)-ea*(X*f-ha*ta)+va*(X*qa-ha*ia);a[9]=-(g*(ia*f-qa*ta)-ea*(C*f-O*ta)+va*(C*qa-O*ia));a[10]=g*(X*f-ha*ta)-T*(C*f-O*ta)+va*(C*ha-O*X);a[11]=-(g*(X*qa-ha*ia)-T*(C*qa-O*ia)+
ea*(C*ha-O*X));a[12]=-(T*(ia*ua-pa*ta)-ea*(X*ua-ba*ta)+va*(X*pa-ba*ia));a[13]=g*(ia*ua-pa*ta)-ea*(C*ua-I*ta)+va*(C*pa-I*ia);a[14]=-(g*(X*ua-ba*ta)-T*(C*ua-I*ta)+va*(C*ba-I*X));a[15]=g*(X*pa-ba*ia)-T*(C*pa-I*ia)+ea*(C*ba-I*X);return a}function w(a){const f=a[0],g=a[1],C=a[2],I=a[3],O=a[4],T=a[5],X=a[6],ba=a[7],ha=a[8],ea=a[9],ia=a[10],pa=a[11],qa=a[12],va=a[13],ta=a[14];a=a[15];return(f*T-g*O)*(ia*a-pa*ta)-(f*X-C*O)*(ea*a-pa*va)+(f*ba-I*O)*(ea*ta-ia*va)+(g*X-C*T)*(ha*a-pa*qa)-(g*ba-I*T)*(ha*ta-ia*
qa)+(C*ba-I*X)*(ha*va-ea*qa)}function r(a,f,g){const C=f[0],I=f[1],O=f[2],T=f[3],X=f[4],ba=f[5],ha=f[6],ea=f[7],ia=f[8],pa=f[9],qa=f[10],va=f[11],ta=f[12],ua=f[13],Fa=f[14];f=f[15];let wa=g[0],za=g[1],Aa=g[2],Ba=g[3];a[0]=wa*C+za*X+Aa*ia+Ba*ta;a[1]=wa*I+za*ba+Aa*pa+Ba*ua;a[2]=wa*O+za*ha+Aa*qa+Ba*Fa;a[3]=wa*T+za*ea+Aa*va+Ba*f;wa=g[4];za=g[5];Aa=g[6];Ba=g[7];a[4]=wa*C+za*X+Aa*ia+Ba*ta;a[5]=wa*I+za*ba+Aa*pa+Ba*ua;a[6]=wa*O+za*ha+Aa*qa+Ba*Fa;a[7]=wa*T+za*ea+Aa*va+Ba*f;wa=g[8];za=g[9];Aa=g[10];Ba=g[11];
a[8]=wa*C+za*X+Aa*ia+Ba*ta;a[9]=wa*I+za*ba+Aa*pa+Ba*ua;a[10]=wa*O+za*ha+Aa*qa+Ba*Fa;a[11]=wa*T+za*ea+Aa*va+Ba*f;wa=g[12];za=g[13];Aa=g[14];Ba=g[15];a[12]=wa*C+za*X+Aa*ia+Ba*ta;a[13]=wa*I+za*ba+Aa*pa+Ba*ua;a[14]=wa*O+za*ha+Aa*qa+Ba*Fa;a[15]=wa*T+za*ea+Aa*va+Ba*f;return a}function n(a,f,g){const C=g[0],I=g[1];g=g[2];let O=void 0,T=void 0,X=void 0,ba=void 0,ha=void 0,ea=void 0,ia=void 0,pa=void 0,qa=void 0,va=void 0,ta=void 0,ua=void 0;f===a?(a[12]=f[0]*C+f[4]*I+f[8]*g+f[12],a[13]=f[1]*C+f[5]*I+f[9]*
g+f[13],a[14]=f[2]*C+f[6]*I+f[10]*g+f[14],a[15]=f[3]*C+f[7]*I+f[11]*g+f[15]):(O=f[0],T=f[1],X=f[2],ba=f[3],ha=f[4],ea=f[5],ia=f[6],pa=f[7],qa=f[8],va=f[9],ta=f[10],ua=f[11],a[0]=O,a[1]=T,a[2]=X,a[3]=ba,a[4]=ha,a[5]=ea,a[6]=ia,a[7]=pa,a[8]=qa,a[9]=va,a[10]=ta,a[11]=ua,a[12]=O*C+ha*I+qa*g+f[12],a[13]=T*C+ea*I+va*g+f[13],a[14]=X*C+ia*I+ta*g+f[14],a[15]=ba*C+pa*I+ua*g+f[15]);return a}function A(a,f,g){const C=g[0],I=g[1];g=g[2];a[0]=f[0]*C;a[1]=f[1]*C;a[2]=f[2]*C;a[3]=f[3]*C;a[4]=f[4]*I;a[5]=f[5]*I;a[6]=
f[6]*I;a[7]=f[7]*I;a[8]=f[8]*g;a[9]=f[9]*g;a[10]=f[10]*g;a[11]=f[11]*g;a[12]=f[12];a[13]=f[13];a[14]=f[14];a[15]=f[15];return a}function e(a,f,g,C){let I=C[0],O=C[1];C=C[2];let T=Math.sqrt(I*I+O*O+C*C);var X=void 0,ba=void 0;let ha=void 0,ea=void 0,ia=void 0,pa=void 0,qa=void 0,va=void 0,ta=void 0,ua=void 0,Fa=void 0,wa=void 0,za=void 0,Aa=void 0,Ba=void 0,Ma=void 0,Ka=void 0,La=void 0,Pa=void 0,Na=void 0,Qa=void 0,Ga=void 0;ba=X=void 0;if(T<k.EPSILON)return null;T=1/T;I*=T;O*=T;C*=T;X=Math.sin(g);
ba=Math.cos(g);ha=1-ba;ea=f[0];ia=f[1];pa=f[2];qa=f[3];va=f[4];ta=f[5];ua=f[6];Fa=f[7];wa=f[8];za=f[9];Aa=f[10];Ba=f[11];Ma=I*I*ha+ba;Ka=O*I*ha+C*X;La=C*I*ha-O*X;Pa=I*O*ha-C*X;Na=O*O*ha+ba;Qa=C*O*ha+I*X;Ga=I*C*ha+O*X;X=O*C*ha-I*X;ba=C*C*ha+ba;a[0]=ea*Ma+va*Ka+wa*La;a[1]=ia*Ma+ta*Ka+za*La;a[2]=pa*Ma+ua*Ka+Aa*La;a[3]=qa*Ma+Fa*Ka+Ba*La;a[4]=ea*Pa+va*Na+wa*Qa;a[5]=ia*Pa+ta*Na+za*Qa;a[6]=pa*Pa+ua*Na+Aa*Qa;a[7]=qa*Pa+Fa*Na+Ba*Qa;a[8]=ea*Ga+va*X+wa*ba;a[9]=ia*Ga+ta*X+za*ba;a[10]=pa*Ga+ua*X+Aa*ba;a[11]=qa*
Ga+Fa*X+Ba*ba;f!==a&&(a[12]=f[12],a[13]=f[13],a[14]=f[14],a[15]=f[15]);return a}function d(a,f,g){const C=Math.sin(g);g=Math.cos(g);const I=f[4],O=f[5],T=f[6],X=f[7],ba=f[8],ha=f[9],ea=f[10],ia=f[11];f!==a&&(a[0]=f[0],a[1]=f[1],a[2]=f[2],a[3]=f[3],a[12]=f[12],a[13]=f[13],a[14]=f[14],a[15]=f[15]);a[4]=I*g+ba*C;a[5]=O*g+ha*C;a[6]=T*g+ea*C;a[7]=X*g+ia*C;a[8]=ba*g-I*C;a[9]=ha*g-O*C;a[10]=ea*g-T*C;a[11]=ia*g-X*C;return a}function c(a,f,g){const C=Math.sin(g);g=Math.cos(g);const I=f[0],O=f[1],T=f[2],X=
f[3],ba=f[8],ha=f[9],ea=f[10],ia=f[11];f!==a&&(a[4]=f[4],a[5]=f[5],a[6]=f[6],a[7]=f[7],a[12]=f[12],a[13]=f[13],a[14]=f[14],a[15]=f[15]);a[0]=I*g-ba*C;a[1]=O*g-ha*C;a[2]=T*g-ea*C;a[3]=X*g-ia*C;a[8]=I*C+ba*g;a[9]=O*C+ha*g;a[10]=T*C+ea*g;a[11]=X*C+ia*g;return a}function q(a,f,g){const C=Math.sin(g);g=Math.cos(g);const I=f[0],O=f[1],T=f[2],X=f[3],ba=f[4],ha=f[5],ea=f[6],ia=f[7];f!==a&&(a[8]=f[8],a[9]=f[9],a[10]=f[10],a[11]=f[11],a[12]=f[12],a[13]=f[13],a[14]=f[14],a[15]=f[15]);a[0]=I*g+ba*C;a[1]=O*g+
ha*C;a[2]=T*g+ea*C;a[3]=X*g+ia*C;a[4]=ba*g-I*C;a[5]=ha*g-O*C;a[6]=ea*g-T*C;a[7]=ia*g-X*C;return a}function E(a,f){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=f[0];a[13]=f[1];a[14]=f[2];a[15]=1;return a}function z(a,f){a[0]=f[0];a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=f[1];a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=f[2];a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function F(a,f,g){let C=g[0],I=g[1];g=g[2];let O=Math.sqrt(C*C+I*I+g*g),T=void 0,X=void 0,ba=void 0;
if(O<k.EPSILON)return null;O=1/O;C*=O;I*=O;g*=O;T=Math.sin(f);X=Math.cos(f);ba=1-X;a[0]=C*C*ba+X;a[1]=I*C*ba+g*T;a[2]=g*C*ba-I*T;a[3]=0;a[4]=C*I*ba-g*T;a[5]=I*I*ba+X;a[6]=g*I*ba+C*T;a[7]=0;a[8]=C*g*ba+I*T;a[9]=I*g*ba-C*T;a[10]=g*g*ba+X;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function B(a,f){const g=Math.sin(f);f=Math.cos(f);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=f;a[6]=g;a[7]=0;a[8]=0;a[9]=-g;a[10]=f;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function y(a,f){const g=Math.sin(f);f=
Math.cos(f);a[0]=f;a[1]=0;a[2]=-g;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=g;a[9]=0;a[10]=f;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function v(a,f){const g=Math.sin(f);f=Math.cos(f);a[0]=f;a[1]=g;a[2]=0;a[3]=0;a[4]=-g;a[5]=f;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function m(a,f,g){var C=f[0],I=f[1],O=f[2],T=f[3],X=C+C,ba=I+I;const ha=O+O;f=C*X;const ea=C*ba;C*=ha;const ia=I*ba;I*=ha;O*=ha;X*=T;ba*=T;T*=ha;a[0]=1-(ia+O);a[1]=ea+T;a[2]=C-ba;a[3]=
0;a[4]=ea-T;a[5]=1-(f+O);a[6]=I+X;a[7]=0;a[8]=C+ba;a[9]=I-X;a[10]=1-(f+ia);a[11]=0;a[12]=g[0];a[13]=g[1];a[14]=g[2];a[15]=1;return a}function t(a,f){const g=la,C=-f[0],I=-f[1],O=-f[2],T=f[3],X=f[4],ba=f[5],ha=f[6],ea=f[7],ia=C*C+I*I+O*O+T*T;0<ia?(g[0]=2*(X*T+ea*C+ba*O-ha*I)/ia,g[1]=2*(ba*T+ea*I+ha*C-X*O)/ia,g[2]=2*(ha*T+ea*O+X*I-ba*C)/ia):(g[0]=2*(X*T+ea*C+ba*O-ha*I),g[1]=2*(ba*T+ea*I+ha*C-X*O),g[2]=2*(ha*T+ea*O+X*I-ba*C));m(a,f,g);return a}function L(a,f){a[0]=f[12];a[1]=f[13];a[2]=f[14];return a}
function K(a,f){const g=f[0],C=f[1],I=f[2],O=f[4],T=f[5],X=f[6],ba=f[8],ha=f[9];f=f[10];a[0]=Math.sqrt(g*g+C*C+I*I);a[1]=Math.sqrt(O*O+T*T+X*X);a[2]=Math.sqrt(ba*ba+ha*ha+f*f);return a}function N(a,f){const g=f[0]+f[5]+f[10];let C=0;0<g?(C=2*Math.sqrt(g+1),a[3]=.25*C,a[0]=(f[6]-f[9])/C,a[1]=(f[8]-f[2])/C,a[2]=(f[1]-f[4])/C):f[0]>f[5]&&f[0]>f[10]?(C=2*Math.sqrt(1+f[0]-f[5]-f[10]),a[3]=(f[6]-f[9])/C,a[0]=.25*C,a[1]=(f[1]+f[4])/C,a[2]=(f[8]+f[2])/C):f[5]>f[10]?(C=2*Math.sqrt(1+f[5]-f[0]-f[10]),a[3]=
(f[8]-f[2])/C,a[0]=(f[1]+f[4])/C,a[1]=.25*C,a[2]=(f[6]+f[9])/C):(C=2*Math.sqrt(1+f[10]-f[0]-f[5]),a[3]=(f[1]-f[4])/C,a[0]=(f[8]+f[2])/C,a[1]=(f[6]+f[9])/C,a[2]=.25*C);return a}function Y(a,f,g,C){var I=f[0],O=f[1],T=f[2],X=f[3],ba=I+I,ha=O+O,ea=T+T;f=I*ba;const ia=I*ha;I*=ea;const pa=O*ha;O*=ea;T*=ea;ba*=X;ha*=X;X*=ea;ea=C[0];const qa=C[1];C=C[2];a[0]=(1-(pa+T))*ea;a[1]=(ia+X)*ea;a[2]=(I-ha)*ea;a[3]=0;a[4]=(ia-X)*qa;a[5]=(1-(f+T))*qa;a[6]=(O+ba)*qa;a[7]=0;a[8]=(I+ha)*C;a[9]=(O-ba)*C;a[10]=(1-(f+pa))*
C;a[11]=0;a[12]=g[0];a[13]=g[1];a[14]=g[2];a[15]=1;return a}function da(a,f,g,C,I){var O=f[0],T=f[1],X=f[2],ba=f[3],ha=O+O,ea=T+T,ia=X+X;f=O*ha;var pa=O*ea,qa=O*ia;O=T*ea;T*=ia;var va=X*ia;X=ba*ha;ea*=ba;const ta=ba*ia;var ua=C[0],Fa=C[1];ia=C[2];C=I[0];ba=I[1];I=I[2];ha=(1-(O+va))*ua;const wa=(pa+ta)*ua;ua*=qa-ea;pa=(pa-ta)*Fa;va=(1-(f+va))*Fa;Fa*=T+X;qa=(qa+ea)*ia;T=(T-X)*ia;f=(1-(f+O))*ia;a[0]=ha;a[1]=wa;a[2]=ua;a[3]=0;a[4]=pa;a[5]=va;a[6]=Fa;a[7]=0;a[8]=qa;a[9]=T;a[10]=f;a[11]=0;a[12]=g[0]+C-
(ha*C+pa*ba+qa*I);a[13]=g[1]+ba-(wa*C+va*ba+T*I);a[14]=g[2]+I-(ua*C+Fa*ba+f*I);a[15]=1;return a}function fa(a,f){var g=f[0],C=f[1],I=f[2];f=f[3];var O=g+g,T=C+C;const X=I+I;g*=O;const ba=C*O;C*=T;const ha=I*O,ea=I*T;I*=X;O*=f;T*=f;f*=X;a[0]=1-C-I;a[1]=ba+f;a[2]=ha-T;a[3]=0;a[4]=ba-f;a[5]=1-g-I;a[6]=ea+O;a[7]=0;a[8]=ha+T;a[9]=ea-O;a[10]=1-g-C;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function ka(a,f,g,C,I,O,T){const X=1/(g-f),ba=1/(I-C),ha=1/(O-T);a[0]=2*O*X;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=
2*O*ba;a[6]=0;a[7]=0;a[8]=(g+f)*X;a[9]=(I+C)*ba;a[10]=(T+O)*ha;a[11]=-1;a[12]=0;a[13]=0;a[14]=T*O*2*ha;a[15]=0;return a}function x(a,f,g,C,I){f=1/Math.tan(f/2);let O=void 0;a[0]=f/g;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=f;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[11]=-1;a[12]=0;a[13]=0;a[15]=0;null!=I&&Infinity!==I?(O=1/(C-I),a[10]=(I+C)*O,a[14]=2*I*C*O):(a[10]=-1,a[14]=-2*C);return a}function G(a,f,g,C){const I=Math.tan(f.upDegrees*Math.PI/180),O=Math.tan(f.downDegrees*Math.PI/180),T=Math.tan(f.leftDegrees*Math.PI/
180);f=Math.tan(f.rightDegrees*Math.PI/180);const X=2/(T+f),ba=2/(I+O);a[0]=X;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=ba;a[6]=0;a[7]=0;a[8]=-((T-f)*X*.5);a[9]=(I-O)*ba*.5;a[10]=C/(g-C);a[11]=-1;a[12]=0;a[13]=0;a[14]=C*g/(g-C);a[15]=0;return a}function V(a,f,g,C,I,O,T){const X=1/(f-g),ba=1/(C-I),ha=1/(O-T);a[0]=-2*X;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*ba;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*ha;a[11]=0;a[12]=(f+g)*X;a[13]=(I+C)*ba;a[14]=(T+O)*ha;a[15]=1;return a}function na(a,f,g,C){let I=void 0,O=void 0;var T=
void 0,X=void 0;let ba=void 0,ha=void 0;var ea=void 0,ia=void 0;let pa=void 0,qa=void 0;const va=f[0],ta=f[1];f=f[2];T=C[0];X=C[1];C=C[2];ea=g[0];ia=g[1];g=g[2];if(Math.abs(va-ea)<k.EPSILON&&Math.abs(ta-ia)<k.EPSILON&&Math.abs(f-g)<k.EPSILON)return l(a);ea=va-ea;ia=ta-ia;pa=f-g;qa=1/Math.sqrt(ea*ea+ia*ia+pa*pa);ea*=qa;ia*=qa;pa*=qa;I=X*pa-C*ia;O=C*ea-T*pa;T=T*ia-X*ea;(qa=Math.sqrt(I*I+O*O+T*T))?(qa=1/qa,I*=qa,O*=qa,T*=qa):T=O=I=0;X=ia*T-pa*O;ba=pa*I-ea*T;ha=ea*O-ia*I;(qa=Math.sqrt(X*X+ba*ba+ha*ha))?
(qa=1/qa,X*=qa,ba*=qa,ha*=qa):ha=ba=X=0;a[0]=I;a[1]=X;a[2]=ea;a[3]=0;a[4]=O;a[5]=ba;a[6]=ia;a[7]=0;a[8]=T;a[9]=ha;a[10]=pa;a[11]=0;a[12]=-(I*va+O*ta+T*f);a[13]=-(X*va+ba*ta+ha*f);a[14]=-(ea*va+ia*ta+pa*f);a[15]=1;return a}function R(a,f,g,C){const I=f[0],O=f[1];f=f[2];var T=C[0];const X=C[1];var ba=C[2];C=I-g[0];let ha=O-g[1];g=f-g[2];let ea=C*C+ha*ha+g*g;0<ea&&(ea=1/Math.sqrt(ea),C*=ea,ha*=ea,g*=ea);let ia=X*g-ba*ha;ba=ba*C-T*g;T=T*ha-X*C;ea=ia*ia+ba*ba+T*T;0<ea&&(ea=1/Math.sqrt(ea),ia*=ea,ba*=ea,
T*=ea);a[0]=ia;a[1]=ba;a[2]=T;a[3]=0;a[4]=ha*T-g*ba;a[5]=g*ia-C*T;a[6]=C*ba-ha*ia;a[7]=0;a[8]=C;a[9]=ha;a[10]=g;a[11]=0;a[12]=I;a[13]=O;a[14]=f;a[15]=1;return a}function S(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"}function W(a){return Math.sqrt(a[0]**2+a[1]**2+a[2]**2+a[3]**2+a[4]**2+a[5]**2+a[6]**2+a[7]**2+a[8]**2+a[9]**2+a[10]**2+a[11]**2+a[12]**2+a[13]**2+
a[14]**2+a[15]**2)}function ja(a,f,g){a[0]=f[0]+g[0];a[1]=f[1]+g[1];a[2]=f[2]+g[2];a[3]=f[3]+g[3];a[4]=f[4]+g[4];a[5]=f[5]+g[5];a[6]=f[6]+g[6];a[7]=f[7]+g[7];a[8]=f[8]+g[8];a[9]=f[9]+g[9];a[10]=f[10]+g[10];a[11]=f[11]+g[11];a[12]=f[12]+g[12];a[13]=f[13]+g[13];a[14]=f[14]+g[14];a[15]=f[15]+g[15];return a}function ma(a,f,g){a[0]=f[0]-g[0];a[1]=f[1]-g[1];a[2]=f[2]-g[2];a[3]=f[3]-g[3];a[4]=f[4]-g[4];a[5]=f[5]-g[5];a[6]=f[6]-g[6];a[7]=f[7]-g[7];a[8]=f[8]-g[8];a[9]=f[9]-g[9];a[10]=f[10]-g[10];a[11]=f[11]-
g[11];a[12]=f[12]-g[12];a[13]=f[13]-g[13];a[14]=f[14]-g[14];a[15]=f[15]-g[15];return a}function ca(a,f,g){a[0]=f[0]*g;a[1]=f[1]*g;a[2]=f[2]*g;a[3]=f[3]*g;a[4]=f[4]*g;a[5]=f[5]*g;a[6]=f[6]*g;a[7]=f[7]*g;a[8]=f[8]*g;a[9]=f[9]*g;a[10]=f[10]*g;a[11]=f[11]*g;a[12]=f[12]*g;a[13]=f[13]*g;a[14]=f[14]*g;a[15]=f[15]*g;return a}function U(a,f,g,C){a[0]=f[0]+g[0]*C;a[1]=f[1]+g[1]*C;a[2]=f[2]+g[2]*C;a[3]=f[3]+g[3]*C;a[4]=f[4]+g[4]*C;a[5]=f[5]+g[5]*C;a[6]=f[6]+g[6]*C;a[7]=f[7]+g[7]*C;a[8]=f[8]+g[8]*C;a[9]=f[9]+
g[9]*C;a[10]=f[10]+g[10]*C;a[11]=f[11]+g[11]*C;a[12]=f[12]+g[12]*C;a[13]=f[13]+g[13]*C;a[14]=f[14]+g[14]*C;a[15]=f[15]+g[15]*C;return a}function aa(a,f){return a[0]===f[0]&&a[1]===f[1]&&a[2]===f[2]&&a[3]===f[3]&&a[4]===f[4]&&a[5]===f[5]&&a[6]===f[6]&&a[7]===f[7]&&a[8]===f[8]&&a[9]===f[9]&&a[10]===f[10]&&a[11]===f[11]&&a[12]===f[12]&&a[13]===f[13]&&a[14]===f[14]&&a[15]===f[15]}function sa(a,f){const g=a[0],C=a[1],I=a[2],O=a[3],T=a[4],X=a[5],ba=a[6],ha=a[7],ea=a[8],ia=a[9],pa=a[10],qa=a[11],va=a[12],
ta=a[13],ua=a[14];a=a[15];const Fa=f[0],wa=f[1],za=f[2],Aa=f[3],Ba=f[4],Ma=f[5],Ka=f[6],La=f[7],Pa=f[8],Na=f[9],Qa=f[10],Ga=f[11],Ea=f[12],Da=f[13],Ra=f[14];f=f[15];return Math.abs(g-Fa)<=k.EPSILON*Math.max(1,Math.abs(g),Math.abs(Fa))&&Math.abs(C-wa)<=k.EPSILON*Math.max(1,Math.abs(C),Math.abs(wa))&&Math.abs(I-za)<=k.EPSILON*Math.max(1,Math.abs(I),Math.abs(za))&&Math.abs(O-Aa)<=k.EPSILON*Math.max(1,Math.abs(O),Math.abs(Aa))&&Math.abs(T-Ba)<=k.EPSILON*Math.max(1,Math.abs(T),Math.abs(Ba))&&Math.abs(X-
Ma)<=k.EPSILON*Math.max(1,Math.abs(X),Math.abs(Ma))&&Math.abs(ba-Ka)<=k.EPSILON*Math.max(1,Math.abs(ba),Math.abs(Ka))&&Math.abs(ha-La)<=k.EPSILON*Math.max(1,Math.abs(ha),Math.abs(La))&&Math.abs(ea-Pa)<=k.EPSILON*Math.max(1,Math.abs(ea),Math.abs(Pa))&&Math.abs(ia-Na)<=k.EPSILON*Math.max(1,Math.abs(ia),Math.abs(Na))&&Math.abs(pa-Qa)<=k.EPSILON*Math.max(1,Math.abs(pa),Math.abs(Qa))&&Math.abs(qa-Ga)<=k.EPSILON*Math.max(1,Math.abs(qa),Math.abs(Ga))&&Math.abs(va-Ea)<=k.EPSILON*Math.max(1,Math.abs(va),Math.abs(Ea))&&
Math.abs(ta-Da)<=k.EPSILON*Math.max(1,Math.abs(ta),Math.abs(Da))&&Math.abs(ua-Ra)<=k.EPSILON*Math.max(1,Math.abs(ua),Math.abs(Ra))&&Math.abs(a-f)<=k.EPSILON*Math.max(1,Math.abs(a),Math.abs(f))}const la=b.create();b=Object.freeze({__proto__:null,copy:p,set:D,identity:l,transpose:u,invert:H,adjoint:J,determinant:w,multiply:r,translate:n,scale:A,rotate:e,rotateX:d,rotateY:c,rotateZ:q,fromTranslation:E,fromScaling:z,fromRotation:F,fromXRotation:B,fromYRotation:y,fromZRotation:v,fromRotationTranslation:m,
fromQuat2:t,getTranslation:L,getScaling:K,getRotation:N,fromRotationTranslationScale:Y,fromRotationTranslationScaleOrigin:da,fromQuat:fa,frustum:ka,perspective:x,perspectiveFromFieldOfView:G,ortho:V,lookAt:na,targetTo:R,str:S,frob:W,add:ja,subtract:ma,multiplyScalar:ca,multiplyScalarAndAdd:U,exactEquals:aa,equals:sa,mul:r,sub:ma});h.add=ja;h.adjoint=J;h.copy=p;h.determinant=w;h.equals=sa;h.exactEquals=aa;h.frob=W;h.fromQuat=fa;h.fromQuat2=t;h.fromRotation=F;h.fromRotationTranslation=m;h.fromRotationTranslationScale=
Y;h.fromRotationTranslationScaleOrigin=da;h.fromScaling=z;h.fromTranslation=E;h.fromXRotation=B;h.fromYRotation=y;h.fromZRotation=v;h.frustum=ka;h.getRotation=N;h.getScaling=K;h.getTranslation=L;h.identity=l;h.invert=H;h.lookAt=na;h.mat4=b;h.mul=r;h.multiply=r;h.multiplyScalar=ca;h.multiplyScalarAndAdd=U;h.ortho=V;h.perspective=x;h.perspectiveFromFieldOfView=G;h.rotate=e;h.rotateX=d;h.rotateY=c;h.rotateZ=q;h.scale=A;h.set=D;h.str=S;h.sub=ma;h.subtract=ma;h.targetTo=R;h.translate=n;h.transpose=u})},
"esri/chunks/pe":function(){define(["require","exports","./_rollupPluginBabelHelpers","../core/has","../assets"],function(h,b,k,p,D){function l(){return!!b._pe}function u(){return!!p("esri-wasm")}function H(){return e?e:e=(new Promise(function(c,q){h(["./pe-wasm"],c,q)})).then(function(c){return c.peWasm}).then(({default:c})=>c({locateFile:q=>D.getAssetUrl(`esri/geometry/support/${q}`)})).then(c=>{J(c)})}function J(c){function q(F,B,y){F[B]=y(F[B])}b._pe=c;b.PeDefs.init();b.PeGTlistExtended.init();
b.PeNotationMgrs.init();b.PeNotationUtm.init();b.PePCSInfo.init();b.PeGCSExtent=function(F){function B(){return F.apply(this,arguments)||this}k._inheritsLoose(B,F);B.prototype.destroy=function(){b._pe.destroy(this)};return B}(b._pe.PeGCSExtent);c=[b._pe.PeDatum,b._pe.PeGeogcs,b._pe.PeGeogtran,b._pe.PeObject,b._pe.PeParameter,b._pe.PePrimem,b._pe.PeProjcs,b._pe.PeSpheroid,b._pe.PeUnit];for(var E of c)q(E.prototype,"getName",F=>function(){return F.call(this,Array(b.PeDefs.PE_NAME_MAX))});for(const F of[b._pe.PeGeogtran,
b._pe.PeProjcs])q(F.prototype,"getParameters",B=>function(){const y=Array(b.PeDefs.PE_PARM_MAX);let v=B.call(this);for(let m=0;m<y.length;m++){const t=b._pe.getValue(v,"*");y[m]=t?b._pe.wrapPointer(t,b._pe.PeParameter):null;v+=Int32Array.BYTES_PER_ELEMENT}return y});q(b._pe.PeHorizon.prototype,"getCoord",F=>function(){const B=this.getSize();if(!B)return null;const y=[],v=F.call(this);A(y,B,v);return y});q(b._pe.PeGTlistExtendedEntry.prototype,"getEntries",F=>{const B=b._pe._pe_getPeGTlistExtendedGTsSize();
return function(){let y=null;var v=F.call(this);if(!b._pe.compare(v,b._pe.NULL)){y=[v];const m=this.getSteps();if(1<m){v=b._pe.getPointer(v);for(let t=1;t<m;t++)y.push(b._pe.wrapPointer(v+B*t,b._pe.PeGTlistExtendedGTs))}}return y}});const z=b._pe._pe_getPeHorizonSize();E=F=>function(){let B=this._cache;B||(this._cache=B=new Map);if(B.has(F))return B.get(F);let y=null;var v=F.call(this);if(!b._pe.compare(v,b._pe.NULL)){y=[v];const m=v.getNump();if(1<m){v=b._pe.getPointer(v);for(let t=1;t<m;t++)y.push(b._pe.wrapPointer(v+
z*t,b._pe.PeHorizon))}}B.set(F,y);return y};q(b._pe.PeProjcs.prototype,"horizonGcsGenerate",E);q(b._pe.PeProjcs.prototype,"horizonPcsGenerate",E);b._pe.PeObject.prototype.toString=function(F=b.PeDefs.PE_STR_OPTS_NONE){b._pe.ensureCache.prepare();const B=b._pe.getPointer(this),y=b._pe.ensureInt8(Array(b.PeDefs.PE_BUFFER_MAX));return b._pe.UTF8ToString(b._pe._pe_object_to_string_ext(B,F,y))}}function w(c){if(c){var q=b._pe.getClass(c);q&&(q=b._pe.getCache(q))&&(c=b._pe.getPointer(c))&&delete q[c]}}
function r(c,q){const E=[];q=Array(q);for(let z=0;z<c;z++)E.push(b._pe.ensureInt8(q));return E}function n(c){let q;Array.isArray(c[0])?(q=[],c.forEach(E=>{q.push(E[0],E[1])})):q=c;return q}function A(c,q,E,z=!1){if(z)for(z=0;z<2*q;z++)c[z]=b._pe.getValue(E+z*Float64Array.BYTES_PER_ELEMENT,"double");else{z=0===c.length;for(let F=0;F<q;F++)z&&(c[F]=Array(2)),c[F][0]=b._pe.getValue(E,"double"),c[F][1]=b._pe.getValue(E+Float64Array.BYTES_PER_ELEMENT,"double"),E+=2*Float64Array.BYTES_PER_ELEMENT}}let e;
b._pe=null;(function(c){function q(F,B,y){b._pe.ensureCache.prepare();var v=n(y);const m=y===v;v=b._pe.ensureFloat64(v);(F=b._pe._pe_geog_to_proj(b._pe.getPointer(F),B,v))&&A(y,B,v,m);return F}function E(F,B,y){return z(F,B,y,0)}function z(F,B,y,v){b._pe.ensureCache.prepare();var m=n(y);const t=y===m;m=b._pe.ensureFloat64(m);(F=b._pe._pe_proj_to_geog_center(b._pe.getPointer(F),B,m,v))&&A(y,B,m,t);return F}c.geogToProj=q;c.projGeog=function(F,B,y,v){switch(v){case b.PeDefs.PE_TRANSFORM_P_TO_G:return E(F,
B,y);case b.PeDefs.PE_TRANSFORM_G_TO_P:return q(F,B,y)}return 0};c.projToGeog=E;c.projToGeogCenter=z})(b.PeCSTransformations||(b.PeCSTransformations={}));(function(c){c.init=function(){c.PE_BUFFER_MAX=b._pe.PeDefs.prototype.PE_BUFFER_MAX;c.PE_NAME_MAX=b._pe.PeDefs.prototype.PE_NAME_MAX;c.PE_MGRS_MAX=b._pe.PeDefs.prototype.PE_MGRS_MAX;c.PE_USNG_MAX=b._pe.PeDefs.prototype.PE_USNG_MAX;c.PE_DD_MAX=b._pe.PeDefs.prototype.PE_DD_MAX;c.PE_DDM_MAX=b._pe.PeDefs.prototype.PE_DDM_MAX;c.PE_DMS_MAX=b._pe.PeDefs.prototype.PE_DMS_MAX;
c.PE_UTM_MAX=b._pe.PeDefs.prototype.PE_UTM_MAX;c.PE_PARM_MAX=b._pe.PeDefs.prototype.PE_PARM_MAX;c.PE_TYPE_NONE=b._pe.PeDefs.prototype.PE_TYPE_NONE;c.PE_TYPE_GEOGCS=b._pe.PeDefs.prototype.PE_TYPE_GEOGCS;c.PE_TYPE_PROJCS=b._pe.PeDefs.prototype.PE_TYPE_PROJCS;c.PE_TYPE_GEOGTRAN=b._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;c.PE_TYPE_COORDSYS=b._pe.PeDefs.prototype.PE_TYPE_COORDSYS;c.PE_TYPE_UNIT=b._pe.PeDefs.prototype.PE_TYPE_UNIT;c.PE_TYPE_LINUNIT=b._pe.PeDefs.prototype.PE_TYPE_LINUNIT;c.PE_STR_OPTS_NONE=
b._pe.PeDefs.prototype.PE_STR_OPTS_NONE;c.PE_STR_AUTH_NONE=b._pe.PeDefs.prototype.PE_STR_AUTH_NONE;c.PE_STR_AUTH_TOP=b._pe.PeDefs.prototype.PE_STR_AUTH_TOP;c.PE_STR_NAME_CANON=b._pe.PeDefs.prototype.PE_STR_NAME_CANON;c.PE_PARM_X0=b._pe.PeDefs.prototype.PE_PARM_X0;c.PE_PARM_ND=b._pe.PeDefs.prototype.PE_PARM_ND;c.PE_TRANSFORM_1_TO_2=b._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;c.PE_TRANSFORM_2_TO_1=b._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;c.PE_TRANSFORM_P_TO_G=b._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;
c.PE_TRANSFORM_G_TO_P=b._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;c.PE_HORIZON_RECT=b._pe.PeDefs.prototype.PE_HORIZON_RECT;c.PE_HORIZON_POLY=b._pe.PeDefs.prototype.PE_HORIZON_POLY;c.PE_HORIZON_LINE=b._pe.PeDefs.prototype.PE_HORIZON_LINE;c.PE_HORIZON_DELTA=b._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(b.PeDefs||(b.PeDefs={}));(function(c){function q(B,y){let v=null,m=E[B];m||(m={},E[B]=m);m.hasOwnProperty(String(y))?v=m[y]:(B=b._pe.PeFactory.prototype.factoryByType(B,y),b._pe.compare(B,b._pe.NULL)||(v=
B,m[y]=v));return v=F(v)}const E={},z={},F=B=>{if(B){const y=B.getType();switch(y){case b.PeDefs.PE_TYPE_GEOGCS:B=b._pe.castObject(B,b._pe.PeGeogcs);break;case b.PeDefs.PE_TYPE_PROJCS:B=b._pe.castObject(B,b._pe.PeProjcs);break;case b.PeDefs.PE_TYPE_GEOGTRAN:B=b._pe.castObject(B,b._pe.PeGeogtran);break;default:y&b.PeDefs.PE_TYPE_UNIT&&(B=b._pe.castObject(B,b._pe.PeUnit))}}return B};c.initialize=function(){b._pe.PeFactory.prototype.initialize(null)};c.coordsys=function(B){return q(b.PeDefs.PE_TYPE_COORDSYS,
B)};c.factoryByType=q;c.fromString=function(B,y){let v=null,m=z[B];m||(m={},z[B]=m);m.hasOwnProperty(y)?v=m[y]:(B=b._pe.PeFactory.prototype.fromString(B,y),b._pe.compare(B,b._pe.NULL)||(v=B,m[y]=v));return v=F(v)};c.geogcs=function(B){return q(b.PeDefs.PE_TYPE_GEOGCS,B)};c.geogtran=function(B){return q(b.PeDefs.PE_TYPE_GEOGTRAN,B)};c.getCode=function(B){return b._pe.PeFactory.prototype.getCode(B)};c.projcs=function(B){return q(b.PeDefs.PE_TYPE_PROJCS,B)};c.unit=function(B){return q(b.PeDefs.PE_TYPE_UNIT,
B)}})(b.PeFactory||(b.PeFactory={}));b.PeGCSExtent=null;(function(c){let q;c.init=function(){c.PE_GTLIST_OPTS_COMMON=b._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;q=b._pe._pe_getPeGTlistExtendedEntrySize()};c.getGTlist=function(E,z,F,B,y,v){let m=null;const t=new b._pe.PeInteger(v);try{const L=b._pe.PeGTlistExtended.prototype.getGTlist(E,z,F,B,y,t);if(v=t.val)if(m=[L],1<v){const K=b._pe.getPointer(L);for(E=1;E<v;E++)m.push(b._pe.wrapPointer(K+q*E,b._pe.PeGTlistExtendedEntry))}}finally{b._pe.destroy(t)}return m}})(b.PeGTlistExtended||
(b.PeGTlistExtended={}));(function(c){c.destroy=function(q){if(q&&q.length){for(const E of q)w(E),E.getEntries().forEach(z=>{w(z);z=z.getGeogtran();w(z);z.getParameters().forEach(w);[z.getGeogcs1(),z.getGeogcs2()].forEach(F=>{w(F);const B=F.getDatum();w(B);w(B.getSpheroid());w(F.getPrimem());w(F.getUnit())})});b._pe.PeGTlistExtendedEntry.prototype.Delete(q[0])}}})(b.PeGTlistExtendedEntry||(b.PeGTlistExtendedEntry={}));(function(c){c.geogToGeog=function(q,E,z,F,B){b._pe.ensureCache.prepare();var y=
n(z);const v=z===y;y=b._pe.ensureFloat64(y);let m=0;F&&(m=b._pe.ensureFloat64(F));(q=b._pe._pe_geog_to_geog(b._pe.getPointer(q),E,y,m,B))&&A(z,E,y,v);return q}})(b.PeGTTransformations||(b.PeGTTransformations={}));(function(c){const q=(z,F,B,y,v,m)=>{b._pe.ensureCache.prepare();switch(z){case "dd":var t=b._pe._pe_geog_to_dd;var L=b.PeDefs.PE_DD_MAX;break;case "ddm":t=b._pe._pe_geog_to_ddm;L=b.PeDefs.PE_DDM_MAX;break;case "dms":t=b._pe._pe_geog_to_dms,L=b.PeDefs.PE_DMS_MAX}z=0;F&&(z=b._pe.getPointer(F));
F=n(y);F=b._pe.ensureFloat64(F);L=r(B,L);y=b._pe.ensureInt32(L);if(v=t(z,B,F,v,y))for(t=0;t<B;t++)m[t]=b._pe.UTF8ToString(L[t]);return v},E=(z,F,B,y,v)=>{b._pe.ensureCache.prepare();switch(z){case "dd":var m=b._pe._pe_dd_to_geog;break;case "ddm":m=b._pe._pe_ddm_to_geog;break;case "dms":m=b._pe._pe_dms_to_geog}z=0;F&&(z=b._pe.getPointer(F));F=y.map(t=>b._pe.ensureString(t));y=b._pe.ensureInt32(F);F=b._pe.ensureFloat64(Array(2*B));(m=m(z,B,y,F))&&A(v,B,F);return m};c.geog_to_dms=function(z,F,B,y,v){return q("dms",
z,F,B,y,v)};c.dms_to_geog=function(z,F,B,y){return E("dms",z,F,B,y)};c.geog_to_ddm=function(z,F,B,y,v){return q("ddm",z,F,B,y,v)};c.ddm_to_geog=function(z,F,B,y){return E("ddm",z,F,B,y)};c.geog_to_dd=function(z,F,B,y,v){return q("dd",z,F,B,y,v)};c.dd_to_geog=function(z,F,B,y){return E("dd",z,F,B,y)}})(b.PeNotationDms||(b.PeNotationDms={}));(function(c){c.init=function(){c.PE_MGRS_STYLE_NEW=b._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;c.PE_MGRS_STYLE_OLD=b._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;
c.PE_MGRS_STYLE_AUTO=b._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;c.PE_MGRS_180_ZONE_1_PLUS=b._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;c.PE_MGRS_ADD_SPACES=b._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};c.geog_to_mgrs_extended=function(q,E,z,F,B,y,v){b._pe.ensureCache.prepare();let m=0;q&&(m=b._pe.getPointer(q));q=n(z);z=b._pe.ensureFloat64(q);q=r(E,b.PeDefs.PE_MGRS_MAX);const t=b._pe.ensureInt32(q);if(F=b._pe._pe_geog_to_mgrs_extended(m,E,z,F,B,y,t))for(B=0;B<E;B++)v[B]=b._pe.UTF8ToString(q[B]);
return F};c.mgrs_to_geog_extended=function(q,E,z,F,B){b._pe.ensureCache.prepare();let y=0;q&&(y=b._pe.getPointer(q));q=z.map(v=>b._pe.ensureString(v));z=b._pe.ensureInt32(q);q=b._pe.ensureFloat64(Array(2*E));(F=b._pe._pe_mgrs_to_geog_extended(y,E,z,F,q))&&A(B,E,q);return F}})(b.PeNotationMgrs||(b.PeNotationMgrs={}));(function(c){c.geog_to_usng=function(q,E,z,F,B,y,v){b._pe.ensureCache.prepare();let m=0;q&&(m=b._pe.getPointer(q));q=n(z);z=b._pe.ensureFloat64(q);q=r(E,b.PeDefs.PE_MGRS_MAX);const t=
b._pe.ensureInt32(q);if(F=b._pe._pe_geog_to_usng(m,E,z,F,B,y,t))for(B=0;B<E;B++)v[B]=b._pe.UTF8ToString(q[B]);return F};c.usng_to_geog=function(q,E,z,F){b._pe.ensureCache.prepare();var B=0;q&&(B=b._pe.getPointer(q));q=z.map(y=>b._pe.ensureString(y));z=b._pe.ensureInt32(q);q=b._pe.ensureFloat64(Array(2*E));(B=b._pe._pe_usng_to_geog(B,E,z,q))&&A(F,E,q);return B}})(b.PeNotationUsng||(b.PeNotationUsng={}));(function(c){c.init=function(){c.PE_UTM_OPTS_NONE=b._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;
c.PE_UTM_OPTS_ADD_SPACES=b._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;c.PE_UTM_OPTS_NS=b._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};c.geog_to_utm=function(q,E,z,F,B){b._pe.ensureCache.prepare();var y=0;q&&(y=b._pe.getPointer(q));q=n(z);z=b._pe.ensureFloat64(q);q=r(E,b.PeDefs.PE_UTM_MAX);const v=b._pe.ensureInt32(q);if(F=b._pe._pe_geog_to_utm(y,E,z,F,v))for(y=0;y<E;y++)B[y]=b._pe.UTF8ToString(q[y]);return F};c.utm_to_geog=function(q,E,z,F,B){b._pe.ensureCache.prepare();let y=0;q&&(y=b._pe.getPointer(q));
q=z.map(v=>b._pe.ensureString(v));z=b._pe.ensureInt32(q);q=b._pe.ensureFloat64(Array(2*E));(F=b._pe._pe_utm_to_geog(y,E,z,F,q))&&A(B,E,q);return F}})(b.PeNotationUtm||(b.PeNotationUtm={}));(function(c){const q=new Map;c.init=function(){c.PE_PCSINFO_OPTION_NONE=b._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;c.PE_PCSINFO_OPTION_DOMAIN=b._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;c.PE_POLE_OUTSIDE_BOUNDARY=b._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;c.PE_POLE_POINT=b._pe.PePCSInfo.prototype.PE_POLE_POINT};
c.generate=function(E,z=c.PE_PCSINFO_OPTION_DOMAIN){let F,B;q.has(E)&&(B=q.get(E),B[z]&&(F=B[z]));F||(F=b._pe.PePCSInfo.prototype.generate(E,z),B||(B=[],q.set(E,B)),B[z]=F);return F}})(b.PePCSInfo||(b.PePCSInfo={}));(function(c){c.version_string=function(){return b._pe.PeVersion.prototype.version_string()}})(b.PeVersion||(b.PeVersion={}));var d=Object.freeze({__proto__:null,get _pe(){return b._pe},isLoaded:l,isSupported:u,load:H,get PeCSTransformations(){return b.PeCSTransformations},get PeDefs(){return b.PeDefs},
get PeFactory(){return b.PeFactory},get PeGCSExtent(){return b.PeGCSExtent},get PeGTlistExtended(){return b.PeGTlistExtended},get PeGTlistExtendedEntry(){return b.PeGTlistExtendedEntry},get PeGTTransformations(){return b.PeGTTransformations},get PeNotationDms(){return b.PeNotationDms},get PeNotationMgrs(){return b.PeNotationMgrs},get PeNotationUsng(){return b.PeNotationUsng},get PeNotationUtm(){return b.PeNotationUtm},get PePCSInfo(){return b.PePCSInfo},get PeVersion(){return b.PeVersion},_init:J});
b._init=J;b.isLoaded=l;b.isSupported=u;b.load=H;b.pe=d})},"esri/geometry/support/geodesicConstants":function(){define(["exports","./Ellipsoid"],function(h,b){const k=Math.PI/180;var p=b.earth.radius;const D=b.earth.eccentricitySquared;p={a1:p*D,a2:p*D*p*D,a3:p*D*D/2,a4:p*D*p*D*2.5,a5:p*D+p*D*D/2,a6:1-D};b={4326:{a:b.earth.radius,f:b.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,f:0},104902:{a:6051800,f:0},104903:{a:b.moon.radius,f:b.moon.flattening},104904:{a:3393400,f:.005207166853303471},
104905:{a:b.mars.radius,f:b.mars.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1E4,f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},104914:{a:4E4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,f:3},104922:{a:18E3,f:0},104923:{a:14E3,f:0},104924:{a:49300,f:0},104925:{a:60268E3,f:.09796243445941462},104926:{a:16E3,
f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,f:0},104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,f:0},104938:{a:11E4,f:0},104939:{a:50100,f:0},104940:{a:764E3,f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},104945:{a:578900,f:0},104946:{a:33E3,f:0},104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,f:0},
104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},104961:{a:74E3,f:0},104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,f:0},104968:{a:1352600,f:0},104969:{a:1195E3,f:0},104970:{a:593E3,f:0},104971:{a:b.mars.radius,f:0},
104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};h.WKT_SPHEROID_REGEX=/SPHEROID\[([^\]]+)]/i;h.earthEllipsoidConstants=p;h.spheroids=b;h.toRadians=k;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/geometry/support/GeographicTransformation":function(){define(["./GeographicTransformationStep"],function(h){return function(){function b(p){this.steps=[];this._cached_projection={};this._chain="";this._gtlistentry=null;if(p&&p.steps)for(const D of p.steps)D instanceof h?this.steps.push(D):
this.steps.push(new h({wkid:D.wkid,wkt:D.wkt,isInverse:D.isInverse}))}b.cacheKey=function(p,D){return[void 0!==p.wkid&&null!==p.wkid?p.wkid.toString():"-1",void 0!==p.wkt&&null!==p.wkt?p.wkt.toString():"",void 0!==D.wkid&&null!==D.wkid?D.wkid.toString():"-1",void 0!==D.wkt&&null!==D.wkt?D.wkt.toString():""].join()};b.fromGE=function(p){const D=new b;let l="";for(const u of p.steps)p=h.fromGE(u),D.steps.push(p),l+=p.uid.toString()+",";D._cached_projection={};D._gtlistentry=null;D._chain=l;return D};
var k=b.prototype;k.getInverse=function(){const p=new b;p.steps=[];for(let D=this.steps.length-1;0<=D;D--)p.steps.push(this.steps[D].getInverse());return p};k.getGTListEntry=function(){let p="";for(const D of this.steps)p+=D.uid.toString()+",";p!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=p);return this._gtlistentry};k.assignCachedGe=function(p,D,l){this._cached_projection[b.cacheKey(p,D)]=l};k.getCachedGeTransformation=function(p,D){let l="";for(const u of this.steps)l+=
u.uid.toString()+",";l!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=l);p=this._cached_projection[b.cacheKey(p,D)];return void 0===p?null:p};return b}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(h){let b=0;return function(){function k(p=null){this.uid=b++;p?(this._wkt=void 0!==p.wkt?p.wkt:null,this._wkid=void 0!==p.wkid?p.wkid:-1,this._isInverse=void 0!==p.isInverse?!0===p.isInverse:
!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}k.fromGE=function(p){const D=new k;D._wkt=p.wkt;D._wkid=p.wkid;D._isInverse=p.isInverse;return D};k.prototype.getInverse=function(){const p=new k;p._wkt=this.wkt;p._wkid=this._wkid;p._isInverse=!this.isInverse;return p};h._createClass(k,[{key:"wkt",get:function(){return this._wkt},set:function(p){this._wkt=p;this.uid=b++}},{key:"wkid",get:function(){return this._wkid},set:function(p){this._wkid=p;this.uid=b++}},{key:"isInverse",get:function(){return this._isInverse},
set:function(p){this._isInverse=p;this.uid=b++}}]);return k}()})},"esri/geometry/support/near":function(){define(["exports","../Point","./coordsUtils","../../geometry","../../chunks/vec2"],function(h,b,k,p,D){h.nearestCoordinate=function(l,u){const {spatialReference:H}=u;u=[u.x,u.y];let J=Number.POSITIVE_INFINITY,w=0,r=0;const n=[0,0];l="extent"===l.type?[[[l.xmin,l.ymin],[l.xmin,l.ymax],[l.xmax,l.ymax],[l.xmax,l.ymin],[l.xmin,l.ymin]]]:l.rings;for(const A of l)for(l=0;l<A.length-1;l++){k.projectPointOnLine(n,
u,A,l);const e=D.distance(u,n);e<J&&(J=e,w=n[0],r=n[1])}return{coordinate:new b({x:w,y:r,spatialReference:H}),distance:J}};Object.defineProperty(h,"__esModule",{value:!0})})},"esri/views/2d/constraints/RotationConstraint":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../../core/Accessor".split(" "),
function(h,b,k,p,D,l,u,H,J,w,r,n){var A;k=A=function(e){function d(){var q=e.apply(this,arguments)||this;q.enabled=!0;q.rotationEnabled=!0;return q}h._inheritsLoose(d,e);var c=d.prototype;c.constrain=function(q,E){if(!this.enabled||!E)return q;this.rotationEnabled||(q.rotation=E.rotation);return q};c.clone=function(){return new A({enabled:this.enabled,rotationEnabled:this.rotationEnabled})};return d}(n);b.__decorate([l.property()],k.prototype,"enabled",void 0);b.__decorate([l.property()],k.prototype,
"rotationEnabled",void 0);return k=A=b.__decorate([H.subclass("esri.views.2d.constraints.RotationConstraint")],k)})},"esri/views/2d/constraints/ZoomConstraint":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../../core/Accessor ../../../layers/support/LOD".split(" "),
function(h,b,k,p,D,l,u,H,J,w,r,n,A){var e;k=e=function(d){function c(E){E=d.call(this,E)||this;E._lodByScale={};E._scales=[];E.effectiveLODs=null;E.effectiveMinZoom=-1;E.effectiveMaxZoom=-1;E.effectiveMinScale=0;E.effectiveMaxScale=0;E.lods=null;E.minZoom=-1;E.maxZoom=-1;E.minScale=0;E.maxScale=0;E.snapToZoom=!0;return E}h._inheritsLoose(c,d);var q=c.prototype;q.initialize=function(){let {lods:E,minScale:z,maxScale:F,minZoom:B,maxZoom:y}=this,v=-1,m=-1,t=!1,L=!1;0!==z&&0!==F&&z<F&&([z,F]=[F,z]);if(E&&
E.length){E=E.map(N=>N.clone());E.sort((N,Y)=>Y.scale-N.scale);E.forEach((N,Y)=>N.level=Y);for(const N of E){!t&&0<z&&z>=N.scale&&(v=N.level,t=!0);!L&&0<F&&F>=N.scale&&(m=K?K.level:-1,L=!0);var K=N}-1===B&&(B=0===z?0:v);-1===y&&(y=0===F?E.length-1:m);B=Math.max(B,0);B=Math.min(B,E.length-1);y=Math.max(y,0);y=Math.min(y,E.length-1);B>y&&([B,y]=[y,B]);z=E[B].scale;F=E[y].scale;E.splice(0,B);E.splice(y-B+1,E.length);E.forEach((N,Y)=>{this._lodByScale[N.scale]=N;this._scales[Y]=N.scale});this._set("effectiveLODs",
E);this._set("effectiveMinZoom",B);this._set("effectiveMaxZoom",y)}this._set("effectiveMinScale",z);this._set("effectiveMaxScale",F)};q.constrain=function(E,z){if(z&&E.scale===z.scale)return E;var F=this.effectiveMinScale;const B=this.effectiveMaxScale,y=E.targetGeometry,v=z&&z.targetGeometry,m=0!==F&&E.scale>F;if(0!==B&&E.scale<B||m)F=m?F:B,v&&(z=(F-z.scale)/(E.scale-z.scale),y.x=v.x+(y.x-v.x)*z,y.y=v.y+(y.y-v.y)*z),E.scale=F;this.snapToZoom&&this.effectiveLODs&&(E.scale=this._getClosestScale(E.scale));
return E};q.fit=function(E){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(E,null);const z=this.scaleToZoom(E.scale);E.scale=this.zoomToScale(.99<Math.abs(z-Math.floor(z))?Math.round(z):Math.floor(z));return E};q.zoomToScale=function(E){if(!this.effectiveLODs)return 0;E-=this.effectiveMinZoom;E=Math.max(0,E);const z=this._scales;if(0>=E)return z[0];if(E>=z.length)return z[z.length-1];const F=Math.round(E);return z[F]+(F-E)*(z[Math.round(E-.5)]-z[F])};q.scaleToZoom=function(E){if(!this.effectiveLODs)return-1;
const z=this._scales;let F,B;if(E>=z[0])return this.effectiveMinZoom;if(E<=z[z.length-1])return this.effectiveMaxZoom;for(let y=0;y<z.length-1;y++){F=z[y];B=z[y+1];if(B===E)return y+this.effectiveMinZoom+1;if(F>E&&B<E)return y+this.effectiveMinZoom+1-(E-B)/(F-B)}};q.snapToClosestScale=function(E){if(!this.effectiveLODs)return E;E=this.scaleToZoom(E);return this.zoomToScale(Math.round(E))};q.snapToNextScale=function(E,z=.5){if(!this.effectiveLODs)return E*z;E=Math.round(this.scaleToZoom(E));return this.zoomToScale(E+
1)};q.snapToPreviousScale=function(E,z=2){if(!this.effectiveLODs)return E*z;E=Math.round(this.scaleToZoom(E));return this.zoomToScale(E-1)};q.clone=function(){return new e({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})};q._getClosestScale=function(E){if(this._lodByScale[E])return this._lodByScale[E].scale;E=this._scales.reduce((z,F)=>Math.abs(F-E)<=Math.abs(z-E)?F:z,this._scales[0]);return this._lodByScale[E].scale};return c}(n);b.__decorate([l.property({readOnly:!0})],
k.prototype,"effectiveLODs",void 0);b.__decorate([l.property({readOnly:!0})],k.prototype,"effectiveMinZoom",void 0);b.__decorate([l.property({readOnly:!0})],k.prototype,"effectiveMaxZoom",void 0);b.__decorate([l.property({readOnly:!0})],k.prototype,"effectiveMinScale",void 0);b.__decorate([l.property({readOnly:!0})],k.prototype,"effectiveMaxScale",void 0);b.__decorate([l.property({type:[A]})],k.prototype,"lods",void 0);b.__decorate([l.property()],k.prototype,"minZoom",void 0);b.__decorate([l.property()],
k.prototype,"maxZoom",void 0);b.__decorate([l.property()],k.prototype,"minScale",void 0);b.__decorate([l.property()],k.prototype,"maxScale",void 0);b.__decorate([l.property()],k.prototype,"snapToZoom",void 0);return k=e=b.__decorate([H.subclass("esri.views.2d.constraints.ZoomConstraint")],k)})},"esri/views/2d/PaddedViewState":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/Accessor ../../chunks/vec2f64 ../../chunks/vec2 ./viewpointUtils ./ViewState".split(" "),
function(h,b,k,p,D,l,u,H,J,w,r,n,A,e,d,c){let q=function(E){function z(){var F=E.apply(this,arguments)||this;F.left=0;F.top=0;F.right=0;F.bottom=0;return F}h._inheritsLoose(z,E);return z}(n);b.__decorate([l.property()],q.prototype,"left",void 0);b.__decorate([l.property()],q.prototype,"top",void 0);b.__decorate([l.property()],q.prototype,"right",void 0);b.__decorate([l.property()],q.prototype,"bottom",void 0);q=b.__decorate([H.subclass("esri.views.2d.PaddedViewState.Padding")],q);k=function(E){function z(...F){var B=
E.call(this,...F)||this;B.paddedViewState=new c;B._updateContent=(()=>{const y=A.create();return()=>{var v=B._get("size");const m=B._get("padding");if(v&&m){var t=B.paddedViewState;e.set(y,m.left+m.right,m.top+m.bottom);e.subtract(y,v,y);e.copy(t.size,y);if(v=t.viewpoint)B.viewpoint=v}}})();B.watch(["size","padding"],B._updateContent,!0);B.padding=new q;B.size=[0,0];return B}h._inheritsLoose(z,E);h._createClass(z,[{key:"padding",set:function(F){this._set("padding",F||new q)}},{key:"viewpoint",set:function(F){if(F){const B=
F.clone();this.paddedViewState.viewpoint=F;d.addPadding(B,F,this._get("size"),this._get("padding"));F=this._viewpoint2D;const y=B.targetGeometry;F.center[0]=y.x;F.center[1]=y.y;F.rotation=B.rotation;F.scale=B.scale;F.spatialReference=y.spatialReference;this._update()}}}]);return z}(c);b.__decorate([l.property()],k.prototype,"paddedViewState",void 0);b.__decorate([l.property({type:q})],k.prototype,"padding",null);b.__decorate([l.property()],k.prototype,"viewpoint",null);return k=b.__decorate([H.subclass("esri.views.2d.PaddedViewState")],
k)})},"esri/views/2d/ViewState":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../geometry/Point ../../geometry/Extent ../../geometry ../../chunks/common ../../Viewpoint ../../chunks/vec2f64 ../../chunks/mat3 ../../chunks/vec2 ../../chunks/mat2d ../../chunks/mat2df64 ./viewpointUtils ../../chunks/mat2df32 ../../chunks/mat3f32 ../../chunks/vec2f32 ../../core/libs/gl-matrix-2/types/vec2".split(" "),
function(h,b,k,p,D,l,u,H,J,w,r,n,A,e,d,c,q,E,z,F,B,y,v,m,t,L,K){var N;const Y=[0,0];k=N=function(da){function fa(...x){x=da.call(this,...x)||this;x._viewpoint2D={center:E.create(),rotation:0,scale:0,spatialReference:null};x.center=[0,0];x.extent=new e;x.id=0;x.inverseTransform=y.create();x.resolution=0;x.rotation=0;x.scale=0;x.transform=y.create();x.transformNoRotation=y.create();x.displayMat3=t.create();x.displayViewMat3=t.create();x.viewMat3=t.create();x.viewMat2d=m.create();x.worldScreenWidth=
0;x.size=[0,0];return x}h._inheritsLoose(fa,da);var ka=fa.prototype;ka.copy=function(x){const G=this.size,V=this.viewpoint;V&&G?(this.viewpoint=v.copy(V,x.viewpoint),this._set("size",F.copy(G,x.size))):(this.viewpoint=x.viewpoint.clone(),this._set("size",[x.size[0],x.size[1]]));this._set("pixelRatio",x.pixelRatio);return this};ka.clone=function(){return new N({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})};ka.toMap=function(x,G,V){if(K.isVec2(G))return F.transformMat2d(x,
G,this.inverseTransform);Y[0]=G;Y[1]=V;return F.transformMat2d(x,Y,this.inverseTransform)};ka.toScreen=function(x,G,V){if(K.isVec2(G))return F.transformMat2d(x,G,this.transform);Y[0]=G;Y[1]=V;return F.transformMat2d(x,Y,this.transform)};ka.toScreenNoRotation=function(x,G,V){if(K.isVec2(G))return F.transformMat2d(x,G,this.transformNoRotation);Y[0]=G;Y[1]=V;return F.transformMat2d(x,Y,this.transformNoRotation)};ka.getScreenTransform=function(x,G){const {center:V}=this._viewpoint2D,na=this._get("pixelRatio")||
1,R=this._get("size");v.getMatrix(x,V,R,G,0,na);return x};ka._update=function(){const {center:x,spatialReference:G,scale:V,rotation:na}=this._viewpoint2D,R=this._get("pixelRatio")||1,S=this._get("size"),W=new q({targetGeometry:new A(x[0],x[1],G),scale:V,rotation:na});this._set("viewpoint",W);if(S&&G&&V){this.resolution=v.getResolution(W);this.rotation=na;this.scale=V;this.spatialReference=G;F.copy(this.center,x);z.set(this.displayMat3,0!==S[0]?2/S[0]:0,0,0,0,0!==S[1]?-2/S[1]:0,0,-1,1,1);var ja=z.identity(this.viewMat3),
ma=L.fromValues(S[0]/2,S[1]/2),ca=L.fromValues(-S[0]/2,-S[1]/2),U=c.toRadian(na);z.translate(ja,ja,ma);z.rotate(ja,ja,U);z.translate(ja,ja,ca);z.multiply(this.displayViewMat3,this.displayMat3,ja);ja=B.identity(this.viewMat2d);B.translate(ja,ja,ma);B.rotate(ja,ja,U);B.translate(ja,ja,ca);v.getExtent(this.extent,W,S);v.getTransform(this.transform,W,S,R);B.invert(this.inverseTransform,this.transform);v.getTransformNoRotation(this.transformNoRotation,W,S,R);this.worldScreenWidth=v.getWorldScreenWidth(this.spatialReference,
this.resolution);this._set("id",this.id+1);return this}};h._createClass(fa,[{key:"pixelRatio",set:function(x){this._set("pixelRatio",x);this._update()}},{key:"size",set:function(x){this._set("size",x);this._update()}},{key:"viewpoint",set:function(x){if(x){const G=this._viewpoint2D,V=x.targetGeometry;G.center[0]=V.x;G.center[1]=V.y;G.rotation=x.rotation;G.scale=x.scale;G.spatialReference=V.spatialReference}this._update()}}]);return fa}(n.JSONSupport);b.__decorate([l.property({readOnly:!0})],k.prototype,
"id",void 0);b.__decorate([l.property({value:1,json:{write:!0}})],k.prototype,"pixelRatio",null);b.__decorate([l.property({json:{write:!0}})],k.prototype,"size",null);b.__decorate([l.property({type:q,json:{write:!0}})],k.prototype,"viewpoint",null);return k=N=b.__decorate([H.subclass("esri.views.2d.ViewState")],k)})},"esri/chunks/mat3":function(){define(["exports","./common"],function(h,b){function k(x,G){x[0]=G[0];x[1]=G[1];x[2]=G[2];x[3]=G[4];x[4]=G[5];x[5]=G[6];x[6]=G[8];x[7]=G[9];x[8]=G[10];return x}
function p(x,G){x[0]=G[0];x[1]=G[1];x[2]=G[2];x[3]=G[3];x[4]=G[4];x[5]=G[5];x[6]=G[6];x[7]=G[7];x[8]=G[8];return x}function D(x,G,V,na,R,S,W,ja,ma,ca){x[0]=G;x[1]=V;x[2]=na;x[3]=R;x[4]=S;x[5]=W;x[6]=ja;x[7]=ma;x[8]=ca;return x}function l(x){x[0]=1;x[1]=0;x[2]=0;x[3]=0;x[4]=1;x[5]=0;x[6]=0;x[7]=0;x[8]=1;return x}function u(x,G){if(x===G){const V=G[1],na=G[2],R=G[5];x[1]=G[3];x[2]=G[6];x[3]=V;x[5]=G[7];x[6]=na;x[7]=R}else x[0]=G[0],x[1]=G[3],x[2]=G[6],x[3]=G[1],x[4]=G[4],x[5]=G[7],x[6]=G[2],x[7]=G[5],
x[8]=G[8];return x}function H(x,G){const V=G[0],na=G[1],R=G[2],S=G[3],W=G[4],ja=G[5],ma=G[6],ca=G[7];G=G[8];const U=G*W-ja*ca,aa=-G*S+ja*ma,sa=ca*S-W*ma;let la=V*U+na*aa+R*sa;if(!la)return null;la=1/la;x[0]=U*la;x[1]=(-G*na+R*ca)*la;x[2]=(ja*na-R*W)*la;x[3]=aa*la;x[4]=(G*V-R*ma)*la;x[5]=(-ja*V+R*S)*la;x[6]=sa*la;x[7]=(-ca*V+na*ma)*la;x[8]=(W*V-na*S)*la;return x}function J(x,G){const V=G[0],na=G[1],R=G[2],S=G[3],W=G[4],ja=G[5],ma=G[6],ca=G[7];G=G[8];x[0]=W*G-ja*ca;x[1]=R*ca-na*G;x[2]=na*ja-R*W;x[3]=
ja*ma-S*G;x[4]=V*G-R*ma;x[5]=R*S-V*ja;x[6]=S*ca-W*ma;x[7]=na*ma-V*ca;x[8]=V*W-na*S;return x}function w(x){const G=x[3],V=x[4],na=x[5],R=x[6],S=x[7],W=x[8];return x[0]*(W*V-na*S)+x[1]*(-W*G+na*R)+x[2]*(S*G-V*R)}function r(x,G,V){const na=G[0],R=G[1],S=G[2],W=G[3],ja=G[4],ma=G[5],ca=G[6],U=G[7];G=G[8];const aa=V[0],sa=V[1],la=V[2],a=V[3],f=V[4],g=V[5],C=V[6],I=V[7];V=V[8];x[0]=aa*na+sa*W+la*ca;x[1]=aa*R+sa*ja+la*U;x[2]=aa*S+sa*ma+la*G;x[3]=a*na+f*W+g*ca;x[4]=a*R+f*ja+g*U;x[5]=a*S+f*ma+g*G;x[6]=C*na+
I*W+V*ca;x[7]=C*R+I*ja+V*U;x[8]=C*S+I*ma+V*G;return x}function n(x,G,V){const na=G[0],R=G[1],S=G[2],W=G[3],ja=G[4],ma=G[5],ca=G[6],U=G[7];G=G[8];const aa=V[0];V=V[1];x[0]=na;x[1]=R;x[2]=S;x[3]=W;x[4]=ja;x[5]=ma;x[6]=aa*na+V*W+ca;x[7]=aa*R+V*ja+U;x[8]=aa*S+V*ma+G;return x}function A(x,G,V){const na=G[0],R=G[1],S=G[2],W=G[3],ja=G[4],ma=G[5],ca=G[6],U=G[7];G=G[8];const aa=Math.sin(V);V=Math.cos(V);x[0]=V*na+aa*W;x[1]=V*R+aa*ja;x[2]=V*S+aa*ma;x[3]=V*W-aa*na;x[4]=V*ja-aa*R;x[5]=V*ma-aa*S;x[6]=ca;x[7]=
U;x[8]=G;return x}function e(x,G,V){const na=V[0],R=V[1];V=V[2];x[0]=na*G[0];x[1]=na*G[1];x[2]=na*G[2];x[3]=R*G[3];x[4]=R*G[4];x[5]=R*G[5];x[6]=V*G[6];x[7]=V*G[7];x[8]=V*G[8];return x}function d(x,G,V){const na=V[0];V=V[1];x[0]=na*G[0];x[1]=na*G[1];x[2]=na*G[2];x[3]=V*G[3];x[4]=V*G[4];x[5]=V*G[5];return x}function c(x,G){x[0]=1;x[1]=0;x[2]=0;x[3]=0;x[4]=1;x[5]=0;x[6]=G[0];x[7]=G[1];x[8]=1;return x}function q(x,G){const V=Math.sin(G);G=Math.cos(G);x[0]=G;x[1]=V;x[2]=0;x[3]=-V;x[4]=G;x[5]=0;x[6]=0;
x[7]=0;x[8]=1;return x}function E(x,G){x[0]=G[0];x[1]=0;x[2]=0;x[3]=0;x[4]=G[1];x[5]=0;x[6]=0;x[7]=0;x[8]=1;return x}function z(x,G){x[0]=G[0];x[1]=G[1];x[2]=0;x[3]=G[2];x[4]=G[3];x[5]=0;x[6]=G[4];x[7]=G[5];x[8]=1;return x}function F(x,G){var V=G[0],na=G[1],R=G[2];G=G[3];var S=V+V,W=na+na;const ja=R+R;V*=S;const ma=na*S;na*=W;const ca=R*S,U=R*W;R*=ja;S*=G;W*=G;G*=ja;x[0]=1-na-R;x[3]=ma-G;x[6]=ca+W;x[1]=ma+G;x[4]=1-V-R;x[7]=U-S;x[2]=ca-W;x[5]=U+S;x[8]=1-V-na;return x}function B(x,G){const V=G[0],na=
G[1],R=G[2],S=G[4],W=G[5],ja=G[6],ma=G[8],ca=G[9];G=G[10];const U=G*W-ja*ca,aa=-G*S+ja*ma,sa=ca*S-W*ma;var la=V*U+na*aa+R*sa;if(!la)return null;la=1/la;x[0]=U*la;x[1]=(-G*na+R*ca)*la;x[2]=(ja*na-R*W)*la;x[3]=aa*la;x[4]=(G*V-R*ma)*la;x[5]=(-ja*V+R*S)*la;x[6]=sa*la;x[7]=(-ca*V+na*ma)*la;x[8]=(W*V-na*S)*la;return x}function y(x,G){const V=G[0],na=G[1],R=G[2],S=G[3],W=G[4],ja=G[5],ma=G[6],ca=G[7];var U=G[8],aa=G[9],sa=G[10],la=G[11];const a=G[12],f=G[13],g=G[14];G=G[15];const C=V*ja-na*W,I=V*ma-R*W,O=
V*ca-S*W,T=na*ma-R*ja,X=na*ca-S*ja,ba=R*ca-S*ma,ha=U*f-aa*a,ea=U*g-sa*a;U=U*G-la*a;const ia=aa*g-sa*f;aa=aa*G-la*f;sa=sa*G-la*g;la=C*sa-I*aa+O*ia+T*U-X*ea+ba*ha;if(!la)return null;la=1/la;x[0]=(ja*sa-ma*aa+ca*ia)*la;x[1]=(ma*U-W*sa-ca*ea)*la;x[2]=(W*aa-ja*U+ca*ha)*la;x[3]=(R*aa-na*sa-S*ia)*la;x[4]=(V*sa-R*U+S*ea)*la;x[5]=(na*U-V*aa-S*ha)*la;x[6]=(f*ba-g*X+G*T)*la;x[7]=(g*O-a*ba-G*I)*la;x[8]=(a*X-f*O+G*C)*la;return x}function v(x,G,V){x[0]=2/G;x[1]=0;x[2]=0;x[3]=0;x[4]=-2/V;x[5]=0;x[6]=-1;x[7]=1;x[8]=
1;return x}function m(x){return"mat3("+x[0]+", "+x[1]+", "+x[2]+", "+x[3]+", "+x[4]+", "+x[5]+", "+x[6]+", "+x[7]+", "+x[8]+")"}function t(x){return Math.sqrt(x[0]**2+x[1]**2+x[2]**2+x[3]**2+x[4]**2+x[5]**2+x[6]**2+x[7]**2+x[8]**2)}function L(x,G,V){x[0]=G[0]+V[0];x[1]=G[1]+V[1];x[2]=G[2]+V[2];x[3]=G[3]+V[3];x[4]=G[4]+V[4];x[5]=G[5]+V[5];x[6]=G[6]+V[6];x[7]=G[7]+V[7];x[8]=G[8]+V[8];return x}function K(x,G,V){x[0]=G[0]-V[0];x[1]=G[1]-V[1];x[2]=G[2]-V[2];x[3]=G[3]-V[3];x[4]=G[4]-V[4];x[5]=G[5]-V[5];
x[6]=G[6]-V[6];x[7]=G[7]-V[7];x[8]=G[8]-V[8];return x}function N(x,G,V){x[0]=G[0]*V;x[1]=G[1]*V;x[2]=G[2]*V;x[3]=G[3]*V;x[4]=G[4]*V;x[5]=G[5]*V;x[6]=G[6]*V;x[7]=G[7]*V;x[8]=G[8]*V;return x}function Y(x,G,V,na){x[0]=G[0]+V[0]*na;x[1]=G[1]+V[1]*na;x[2]=G[2]+V[2]*na;x[3]=G[3]+V[3]*na;x[4]=G[4]+V[4]*na;x[5]=G[5]+V[5]*na;x[6]=G[6]+V[6]*na;x[7]=G[7]+V[7]*na;x[8]=G[8]+V[8]*na;return x}function da(x,G){return x[0]===G[0]&&x[1]===G[1]&&x[2]===G[2]&&x[3]===G[3]&&x[4]===G[4]&&x[5]===G[5]&&x[6]===G[6]&&x[7]===
G[7]&&x[8]===G[8]}function fa(x,G){const V=x[0],na=x[1],R=x[2],S=x[3],W=x[4],ja=x[5],ma=x[6],ca=x[7];x=x[8];const U=G[0],aa=G[1],sa=G[2],la=G[3],a=G[4],f=G[5],g=G[6],C=G[7];G=G[8];return Math.abs(V-U)<=b.EPSILON*Math.max(1,Math.abs(V),Math.abs(U))&&Math.abs(na-aa)<=b.EPSILON*Math.max(1,Math.abs(na),Math.abs(aa))&&Math.abs(R-sa)<=b.EPSILON*Math.max(1,Math.abs(R),Math.abs(sa))&&Math.abs(S-la)<=b.EPSILON*Math.max(1,Math.abs(S),Math.abs(la))&&Math.abs(W-a)<=b.EPSILON*Math.max(1,Math.abs(W),Math.abs(a))&&
Math.abs(ja-f)<=b.EPSILON*Math.max(1,Math.abs(ja),Math.abs(f))&&Math.abs(ma-g)<=b.EPSILON*Math.max(1,Math.abs(ma),Math.abs(g))&&Math.abs(ca-C)<=b.EPSILON*Math.max(1,Math.abs(ca),Math.abs(C))&&Math.abs(x-G)<=b.EPSILON*Math.max(1,Math.abs(x),Math.abs(G))}var ka=Object.freeze({__proto__:null,fromMat4:k,copy:p,set:D,identity:l,transpose:u,invert:H,adjoint:J,determinant:w,multiply:r,translate:n,rotate:A,scale:e,scaleByVec2:d,fromTranslation:c,fromRotation:q,fromScaling:E,fromMat2d:z,fromQuat:F,normalFromMat4Legacy:B,
normalFromMat4:y,projection:v,str:m,frob:t,add:L,subtract:K,multiplyScalar:N,multiplyScalarAndAdd:Y,exactEquals:da,equals:fa,mul:r,sub:K});h.add=L;h.adjoint=J;h.copy=p;h.determinant=w;h.equals=fa;h.exactEquals=da;h.frob=t;h.fromMat2d=z;h.fromMat4=k;h.fromQuat=F;h.fromRotation=q;h.fromScaling=E;h.fromTranslation=c;h.identity=l;h.invert=H;h.mat3=ka;h.mul=r;h.multiply=r;h.multiplyScalar=N;h.multiplyScalarAndAdd=Y;h.normalFromMat4=y;h.normalFromMat4Legacy=B;h.projection=v;h.rotate=A;h.scale=e;h.scaleByVec2=
d;h.set=D;h.str=m;h.sub=K;h.subtract=K;h.translate=n;h.transpose=u})},"esri/chunks/mat2df32":function(){define(["exports"],function(h){function b(){const J=new Float32Array(6);J[0]=1;J[3]=1;return J}function k(J){const w=new Float32Array(6);w[0]=J[0];w[1]=J[1];w[2]=J[2];w[3]=J[3];w[4]=J[4];w[5]=J[5];return w}function p(J,w,r,n,A,e){const d=new Float32Array(6);d[0]=J;d[1]=w;d[2]=r;d[3]=n;d[4]=A;d[5]=e;return d}function D(J,w){return new Float32Array(J,w,6)}function l(J,w,r,n){const A=w[n];w=w[n+1];
J[n]=r[0]*A+r[2]*w+r[4];J[n+1]=r[1]*A+r[3]*w+r[5]}function u(J,w,r,n=0,A=0,e=2){for(A=A||w.length/e;n<A;n++)l(J,w,r,n*e)}var H=Object.freeze({__proto__:null,create:b,clone:k,fromValues:p,createView:D,transform:l,transformMany:u});h.clone=k;h.create=b;h.createView=D;h.fromValues=p;h.mat2df32=H;h.transform=l;h.transformMany=u})},"esri/chunks/mat3f32":function(){define(["exports"],function(h){function b(){const u=new Float32Array(9);u[0]=1;u[4]=1;u[8]=1;return u}function k(u){const H=new Float32Array(9);
H[0]=u[0];H[1]=u[1];H[2]=u[2];H[3]=u[3];H[4]=u[4];H[5]=u[5];H[6]=u[6];H[7]=u[7];H[8]=u[8];return H}function p(u,H,J,w,r,n,A,e,d){const c=new Float32Array(9);c[0]=u;c[1]=H;c[2]=J;c[3]=w;c[4]=r;c[5]=n;c[6]=A;c[7]=e;c[8]=d;return c}function D(u,H){return new Float32Array(u,H,9)}var l=Object.freeze({__proto__:null,create:b,clone:k,fromValues:p,createView:D});h.clone=k;h.create=b;h.createView=D;h.fromValues=p;h.mat3f32=l})},"esri/chunks/vec2f32":function(){define(["exports"],function(h){function b(){return new Float32Array(2)}
function k(d){const c=new Float32Array(2);c[0]=d[0];c[1]=d[1];return c}function p(d,c){const q=new Float32Array(2);q[0]=d;q[1]=c;return q}function D(d,c){return new Float32Array(d,c,2)}function l(){return b()}function u(){return p(1,1)}function H(){return p(1,0)}function J(){return p(0,1)}const w=b(),r=u(),n=H(),A=J();var e=Object.freeze({__proto__:null,create:b,clone:k,fromValues:p,createView:D,zeros:l,ones:u,unitX:H,unitY:J,ZEROS:w,ONES:r,UNIT_X:n,UNIT_Y:A});h.ONES=r;h.UNIT_X=n;h.UNIT_Y=A;h.ZEROS=
w;h.clone=k;h.create=b;h.createView=D;h.fromValues=p;h.ones=u;h.unitX=H;h.unitY=J;h.vec2f32=e;h.zeros=l})},"esri/core/libs/gl-matrix-2/types/vec2":function(){define(["exports"],function(h){function b(p){return p instanceof Float32Array&&2<=p.length}function k(p){return Array.isArray(p)&&2<=p.length}h.isVec2=function(p){return b(p)||k(p)};h.isVec2f32=b;h.isVec2f64=k;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/views/2d/tiling/PagedTileQueue":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../../core/Accessor ../../../chunks/vec2 ../../support/QueueProcessor".split(" "),
function(h,b,k,p,D,l,u,H,J,w,r,n,A,e){function d(F,B){F.length=0;B.forEach(y=>F.push(y));return F}const c=new Set,q=[],E=new Map,z=[0,0];k=function(F){function B(v){v=F.call(this,v)||this;v._keyToItem=new Map;v.concurrency=6;v.strategy="scale-first";v.tileInfoView=null;return v}h._inheritsLoose(B,F);var y=B.prototype;y.initialize=function(){const {concurrency:v,process:m}=this;this._queue=new e.QueueProcessor({concurrency:v,process:(t,L)=>{t=this._keyToItem.get(t);return m(t,{signal:L})},peeker:t=>
t.values().next().value})};y.destroy=function(){this.clear();this._queue.destroy();this._queue=null};y.abort=function(v){this._queue.abort("string"===typeof v?v:v.id)};y.clear=function(){this._queue.clear();this._keyToItem.clear();this.notifyChange("updating")};y.has=function(v){return"string"===typeof v?this._keyToItem.has(v):this._keyToItem.has(v.id)};y.isOngoing=function(v){v="string"===typeof v?v:v.id;return this.has(v)&&this._queue.isOngoing(v)};y.pause=function(){this._queue.pause()};y.push=
function(v,m){const t=v.key.id+"-"+m;if(this.has(t))return this.get(t);m=this._queue.push(t);const L=()=>{this._keyToItem.delete(t);this.notifyChange("updating")};this._keyToItem.set(t,v);m.then(L,L);this.notifyChange("updating");return m};y.reset=function(){this._queue.reset();this.notifyChange("updating")};y.resume=function(){this._queue.resume()};y._peekByScaleFirst=function(v){if(!this.state)return v.values().next().value;const m=this.tileInfoView;let t=Number.NEGATIVE_INFINITY,L=Number.POSITIVE_INFINITY;
v.forEach(fa=>{fa=this._keyToItem.get(fa);const ka=this.tileInfoView.getTileScale(fa.key);E.has(ka)||(E.set(ka,[]),t=Math.max(ka,t),L=Math.min(ka,L));E.get(ka).push(fa.key);c.add(ka)});let K=this.state.scale;E.has(K)||(d(q,c),q.sort(),K=q.reduce((fa,ka)=>Math.abs(ka-K)<Math.abs(fa-K)?ka:fa,q[0]));K=Math.min(K,t);K=Math.max(K,L);v=E.get(K);const N=m.getClosestInfoForScale(K),Y=N.getColumnForX(this.state.center[0]),da=N.getRowForY(this.state.center[1]);v.sort((fa,ka)=>{const x=N.denormalizeCol(fa.col,
fa.world),G=N.denormalizeCol(ka.col,ka.world);return Math.sqrt((Y-x)*(Y-x)+(da-fa.row)*(da-fa.row))-Math.sqrt((Y-G)*(Y-G)+(da-ka.row)*(da-ka.row))});c.clear();E.clear();return v[0].id};y._peekByCenterFirst=function(v){if(!this.state)return v.values().next().value;const m=this.tileInfoView,t=this.state.center;let L=Number.POSITIVE_INFINITY,K=null;v.forEach(N=>{N=this._keyToItem.get(N);m.getTileCoords(z,N.key);const Y=A.distance(z,t);Y<L&&(L=Y,K=N.key)});return K.id};h._createClass(B,[{key:"length",
get:function(){return this._queue?this._queue.length:0}},{key:"onGoingCount",get:function(){return this._keyToItem.size}},{key:"updating",get:function(){return 0<this.length||0<this.onGoingCount}}]);return B}(n);b.__decorate([l.property({constructOnly:!0})],k.prototype,"concurrency",void 0);b.__decorate([l.property({constructOnly:!0})],k.prototype,"process",void 0);b.__decorate([l.property()],k.prototype,"state",void 0);b.__decorate([l.property({constructOnly:!0})],k.prototype,"strategy",void 0);
b.__decorate([l.property({constructOnly:!0})],k.prototype,"tileInfoView",void 0);b.__decorate([l.property({readOnly:!0})],k.prototype,"updating",null);return k=b.__decorate([H.subclass("esri.views.2d.tiling.PagedTileQueue")],k)})},"esri/views/support/QueueProcessor":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/maybe ../../core/promiseUtils ../../core/scheduling ../../core/Queue".split(" "),function(h,b,k,p,D,l){let u=function(J,w){this.item=J;this.controller=w;this.promise=
null},H=function(){function J(r){this._deferreds=new Map;this._controllers=new Map;this._processingItems=new Map;this._isPaused=!1;this._task=this._schedule=null;this.concurrency=1;r.concurrency&&(this.concurrency=r.concurrency);this._queue=new l(r.peeker);this.process=r.process;const n=r.scheduler;r.task&&k.isSome(n)&&(this._task=n.registerTask(r.task,A=>this.update(A),()=>this.needsUpdate()))}var w=J.prototype;w.destroy=function(){this.clear();this._schedule&&(this._schedule.remove(),this._schedule=
null);this._task&&(this._task.remove(),this._task=null)};w.abort=function(r){(r=this._controllers.get(r))&&r.abort()};w.clear=function(){this._queue.clear();const r=[];this._controllers.forEach(n=>r.push(n));this._controllers.clear();r.forEach(n=>n.abort());this._processingItems.clear();this._cancelNext()};w.forEach=function(r){this._deferreds.forEach((n,A)=>r(A))};w.get=function(r){return(r=this._deferreds.get(r))?r.promise:void 0};w.isOngoing=function(r){return this._processingItems.has(r)};w.has=
function(r){return this._deferreds.has(r)};w.pause=function(){this._isPaused||(this._isPaused=!0,this._cancelNext())};w.push=function(r,n){const A=this.get(r);if(A)return A;const e=p.createAbortController();let d=null;n&&(d=p.onAbort(n,()=>e.abort()));const c=()=>{q.remove();k.isSome(d)&&d.remove();this._deferreds.delete(r);this._controllers.delete(r);this._queue.remove(r);this._processingItems.delete(r);this._scheduleNext()},q=p.onAbortOrThrow(e.signal,()=>{const z=this._processingItems.get(r);z&&
z.controller.abort();c();E.reject(p.createAbortError())}),E=p.createDeferred();this._deferreds.set(r,E);this._controllers.set(r,e);E.promise.then(c,c);this._queue.push(r);this._scheduleNext();return E.promise};w.reset=function(){const r=[];this._processingItems.forEach(n=>r.push(n));this._processingItems.clear();for(const n of r)this._queue.push(n.item),n.controller.abort();this._scheduleNext()};w.resume=function(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())};w.takeAll=function(){const r=
[];for(;this._queue.length;)r.push(this._queue.pop());this.clear();return r};w.needsUpdate=function(){return!this._isPaused&&0<this._queue.length&&this._processingItems.size<this.concurrency};w.update=function(r){for(;!r.done&&0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),r.madeProgress()};w._scheduleNext=function(){this._task||this._isPaused||this._schedule||(this._schedule=D.schedule(()=>{this._schedule=null;this._next()}))};w._next=function(){for(;0<
this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())};w._cancelNext=function(){this._schedule&&(this._schedule.remove(),this._schedule=null)};w._processResult=function(r,n){this._canProcessFulfillment(r)&&(this._scheduleNext(),this._deferreds.get(r.item).resolve(n))};w._processError=function(r,n){this._canProcessFulfillment(r)&&(this._scheduleNext(),this._deferreds.get(r.item).reject(n))};w._canProcessFulfillment=function(r){return this._deferreds.get(r.item)&&
this._processingItems.get(r.item)===r?!0:!1};w._process=function(r){if(!k.isNone(r)){var n=p.createAbortController(),A=new u(r,n);this._processingItems.set(r,A);try{var e=this.process(r,n.signal)}catch(d){this._processError(A,d)}p.isPromiseLike(e)?(A.promise=e,e.then(d=>this._processResult(A,d),d=>this._processError(A,d))):this._processResult(A,e)}};b._createClass(J,[{key:"length",get:function(){return this._processingItems.size+this._queue.length}},{key:"test",get:function(){return{update:r=>this.update(r)}}}]);
return J}();h.QueueProcessor=H;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/views/2d/tiling/TileInfoView":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../geometry/support/spatialReferenceUtils ./TileKey ./LODInfo ./TileCoverage ./TileSpan".split(" "),function(h,b,k,p,D,l){const u=new k("0/0/0/0");let H=function(){function w(n,A,e,d,c,q,E,z){this.x=n;this.ymin=A;this.ymax=e;this.invM=d;this.leftAdjust=c;this.rightAdjust=q;this.leftBound=E;this.rightBound=z}w.create=
function(n,A){n[1]>A[1]&&([n,A]=[A,n]);const [e,d]=n,[c,q]=A;n=c-e;A=q-d;A=0!==A?n/A:0;const E=(Math.ceil(d)-d)*A,z=(Math.floor(d)-d)*A;return new w(e,Math.floor(d),Math.ceil(q),A,0>n?E:z,0>n?z:E,0>n?c:e,0>n?e:c)};var r=w.prototype;r.incrRow=function(){this.x+=this.invM};r.getLeftCol=function(){return Math.max(this.x+this.leftAdjust,this.leftBound)};r.getRightCol=function(){return Math.min(this.x+this.rightAdjust,this.rightBound)};return w}();const J=[[0,0],[0,0],[0,0],[0,0]];return function(){function w(n,
A){this.tileInfo=n;this.fullExtent=A;this.scales=[];this._lodInfos=null;this._infoByScale={};this._infoByLevel={};const e=n.lods.slice();e.sort(function(c,q){return q.scale-c.scale});const d=this._lodInfos=e.map(c=>p.create(n,c,A));e.forEach((c,q)=>{this._infoByLevel[c.level]=d[q];this._infoByScale[c.scale]=d[q];this.scales[q]=c.scale},this);this._wrap=n.isWrappable}var r=w.prototype;r.getLODInfoAt=function(n){return this._infoByLevel["number"===typeof n?n:n.level]};r.getTileBounds=function(n,A,e=
!1){u.set(A);return(A=this._infoByLevel[u.level])?A.getTileBounds(n,u,e):n};r.getTileCoords=function(n,A,e=!1){u.set(A);return(A=this._infoByLevel[u.level])?A.getTileCoords(n,u,e):n};r.getTileCoverage=function(n,A=192,e="closest"){e="closest"===e?this.getClosestInfoForScale(n.scale):this.getSmallestInfoForScale(n.scale);const d=D.pool.acquire(e),c=this._wrap;var q=Infinity;let E=-Infinity;const z=d.spans;J[0][0]=J[0][1]=J[1][1]=J[3][0]=-A;J[1][0]=J[2][0]=n.size[0]+A;J[2][1]=J[3][1]=n.size[1]+A;for(F of J)n.toMap(F,
F),F[0]=e.getColumnForX(F[0]),F[1]=e.getRowForY(F[1]);n=[];var F=3;for(A=0;4>A;A++)J[A][1]===J[F][1]?F=A:(F=H.create(J[A],J[F]),q=Math.min(F.ymin,q),E=Math.max(F.ymax,E),void 0===n[F.ymin]&&(n[F.ymin]=[]),n[F.ymin].push(F),F=A);if(null==q||null==E||100<E-q)return null;for(A=[];q<E;){null!=n[q]&&(A=A.concat(n[q]));F=Infinity;var B=-Infinity;for(var y=A.length-1;0<=y;y--){var v=A[y];F=Math.min(F,v.getLeftCol());B=Math.max(B,v.getRightCol())}F=Math.floor(F);B=Math.floor(B);if(q>=e.first[1]&&q<=e.last[1])if(c)if(e.size[0]<
e.worldSize[0])for(y=Math.floor(B/e.worldSize[0]),v=Math.floor(F/e.worldSize[0]);v<=y;v++)z.push(new l(q,Math.max(e.getFirstColumnForWorld(v),F),Math.min(e.getLastColumnForWorld(v),B)));else z.push(new l(q,F,B));else F>e.last[0]||B<e.first[0]||(F=Math.max(F,e.first[0]),B=Math.min(B,e.last[0]),z.push(new l(q,F,B)));q+=1;for(F=A.length-1;0<=F;F--)B=A[F],B.ymax>=q?B.incrRow():A.splice(F,1)}return d};r.getTileParentId=function(n){u.set(n);n=this._lodInfos.indexOf(this._infoByLevel[u.level])-1;if(0>n)return null;
this._getTileIdAtLOD(u,this._lodInfos[n],u);return u.id};r.getTileResolution=function(n){return(n=this._infoByLevel["object"===typeof n?n.level:n])?n.resolution:-1};r.getTileScale=function(n){return(n=this._infoByLevel[n.level])?n.scale:-1};r.intersects=function(n,A){u.set(A);A=this._infoByLevel[u.level];const e=n.lodInfo;if(e.resolution>A.resolution){this._getTileIdAtLOD(u,e,u);var d=e.denormalizeCol(u.col,u.world);for(var c of n.spans)if(c.row===u.row&&c.colFrom<=d&&c.colTo>=d)return!0}if(e.resolution<
A.resolution){const [E,z,F,B]=n.spans.reduce((y,v)=>{y[0]=Math.min(y[0],v.row);y[1]=Math.max(y[1],v.row);y[2]=Math.min(y[2],v.colFrom);y[3]=Math.max(y[3],v.colTo);return y},[Infinity,-Infinity,Infinity,-Infinity]);d=A.denormalizeCol(u.col,u.world);n=e.getColumnForX(A.getXForColumn(d));c=e.getRowForY(A.getYForRow(u.row));d=e.getColumnForX(A.getXForColumn(d+1))-1;A=e.getRowForY(A.getYForRow(u.row+1))-1;return!(n>B||d<F||c>z||A<E)}const q=e.denormalizeCol(u.col,u.world);return n.spans.some(E=>E.row===
u.row&&E.colFrom<=q&&E.colTo>=q)};r.normalizeBounds=function(n,A,e){n[0]=A[0];n[1]=A[1];n[2]=A[2];n[3]=A[3];this._wrap&&(A=b.getInfo(this.tileInfo.spatialReference),e=-e*(A.valid[1]-A.valid[0]),n[0]+=e,n[2]+=e);return n};r.getSmallestInfoForScale=function(n){const A=this.scales;if(this._infoByScale[n])return this._infoByScale[n];if(n>A[0])return this._infoByScale[A[0]];for(let e=1;e<A.length-1;e++)if(n>A[e]+1E-6)return this._infoByScale[A[e-1]];return this._infoByScale[A[A.length-1]]};r.getClosestInfoForScale=
function(n){const A=this.scales;if(this._infoByScale[n])return this._infoByScale[n];n=A.reduce((e,d)=>Math.abs(d-n)<Math.abs(e-n)?d:e,A[0]);return this._infoByScale[n]};r.scaleToLevel=function(n){const A=this.scales;if(this._infoByScale[n])return this._infoByScale[n].level;for(let e=A.length-1;0<=e;e--)if(n<A[e])return e===A.length-1?this._infoByScale[A[A.length-1]].level:this._infoByScale[A[e]].level+(A[e]-n)/(A[e]-A[e+1]);return this._infoByScale[A[0]].level};r.scaleToZoom=function(n){return this.tileInfo.scaleToZoom(n)};
r._getTileIdAtLOD=function(n,A,e){const d=this._infoByLevel[e.level];n.set(e);if(A.resolution<d.resolution)return null;if(A.resolution===d.resolution)return n;n.level=A.level;n.col=Math.floor(e.col*d.resolution/A.resolution+.01);n.row=Math.floor(e.row*d.resolution/A.resolution+.01);return n};h._createClass(w,[{key:"spatialReference",get:function(){return this.tileInfo.spatialReference}}]);return w}()})},"esri/views/2d/tiling/LODInfo":function(){define(["../../../geometry/support/spatialReferenceUtils",
"./TileKey"],function(h,b){function k(D,l,u){D[0]=l;D[1]=u;return D}const p=new b("0/0/0/0");return function(){function D(u,H,J,w,r,n,A,e,d,c,q,E){this.level=u;this.resolution=H;this.scale=J;this.origin=w;this.first=r;this.last=n;this.size=A;this.norm=e;this.worldStart=d;this.worldEnd=c;this.worldSize=q;this.wrap=E}D.create=function(u,H,J){var w=h.getInfo(u.spatialReference);const r=[u.origin.x,u.origin.y],n=[u.size[0]*H.resolution,u.size[1]*H.resolution],A=[-Infinity,-Infinity],e=[Infinity,Infinity],
d=[Infinity,Infinity];J&&(k(A,Math.max(0,Math.floor((J.xmin-r[0])/n[0])),Math.max(0,Math.floor((r[1]-J.ymax)/n[1]))),k(e,Math.max(0,Math.floor((J.xmax-r[0])/n[0])),Math.max(0,Math.floor((r[1]-J.ymin)/n[1]))),k(d,e[0]-A[0]+1,e[1]-A[1]+1));let c;u.isWrappable?(u=[Math.ceil(Math.round((w.valid[1]-w.valid[0])/H.resolution)/u.size[0]),d[1]],w=[Math.floor((w.origin[0]-r[0])/n[0]),A[1]],J=[u[0]+w[0]-1,e[1]],c=!0):(w=A,J=e,u=d,c=!1);return new D(H.level,H.resolution,H.scale,r,A,e,d,n,w,J,u,c)};var l=D.prototype;
l.normalizeCol=function(u){if(!this.wrap)return u;const H=this.worldSize[0];return 0>u?H-1-Math.abs((u+1)%H):u%H};l.denormalizeCol=function(u,H){return this.wrap?this.worldSize[0]*H+u:u};l.getWorldForColumn=function(u){return this.wrap?Math.floor(u/this.worldSize[0]):0};l.getFirstColumnForWorld=function(u){return u*this.worldSize[0]+this.first[0]};l.getLastColumnForWorld=function(u){return u*this.worldSize[0]+this.first[0]+this.size[0]-1};l.getColumnForX=function(u){return(u-this.origin[0])/this.norm[0]};
l.getXForColumn=function(u){return this.origin[0]+u*this.norm[0]};l.getRowForY=function(u){return(this.origin[1]-u)/this.norm[1]};l.getYForRow=function(u){return this.origin[1]-u*this.norm[1]};l.getTileBounds=function(u,H,J=!1){p.set(H);var w=J?p.col:this.denormalizeCol(p.col,p.world),r=p.row;H=this.getXForColumn(w);J=this.getYForRow(r+1);w=this.getXForColumn(w+1);r=this.getYForRow(r);u[0]=H;u[1]=J;u[2]=w;u[3]=r;return u};l.getTileCoords=function(u,H,J=!1){p.set(H);H=J?p.col:this.denormalizeCol(p.col,
p.world);Array.isArray(u)?k(u,this.getXForColumn(H),this.getYForRow(p.row)):(u.x=this.getXForColumn(H),u.y=this.getYForRow(p.row));return u};return D}()})},"esri/views/2d/tiling/TileCoverage":function(){define(["../../../core/ObjectPool"],function(h){let b=function(){function k(){this.spans=[]}var p=k.prototype;p.acquire=function(D){this.lodInfo=D};p.release=function(){this.lodInfo=null;this.spans.length=0};p.forEach=function(D,l){const {spans:u,lodInfo:H}=this,{level:J}=H;if(0!==u.length)for(const {row:w,
colFrom:r,colTo:n}of u)for(let A=r;A<=n;A++)D.call(l,J,w,H.normalizeCol(A),H.getWorldForColumn(A))};return k}();b.pool=new h(b);return b})},"esri/views/2d/tiling/TileSpan":function(){define(function(){return function(h,b,k){this.row=h;this.colFrom=b;this.colTo=k}})},"esri/views/2d/tiling/TileQueue":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../../core/Accessor ../../../chunks/vec2 ../../support/QueueProcessor".split(" "),
function(h,b,k,p,D,l,u,H,J,w,r,n,A,e){function d(F,B){F.length=0;B.forEach(y=>F.push(y));return F}const c=new Set,q=[],E=new Map,z=[0,0];k=function(F){function B(v){v=F.call(this,v)||this;v._keyToItem=new Map;v.concurrency=6;v.strategy="scale-first";v.tileInfoView=null;return v}h._inheritsLoose(B,F);var y=B.prototype;y.initialize=function(){const {concurrency:v,process:m,strategy:t}=this;this._queue=new e.QueueProcessor({concurrency:v,process:(L,K)=>{L=this._keyToItem.get(L);return m(L,{signal:K})},
peeker:"scale-first"===t?L=>this._peekByScaleFirst(L):L=>this._peekByCenterFirst(L)})};y.destroy=function(){this.clear();this._queue.destroy();this._queue=null};y.abort=function(v){this._queue.abort("string"===typeof v?v:v.id)};y.clear=function(){this._queue.clear();this._keyToItem.clear();this.notifyChange("updating")};y.has=function(v){return"string"===typeof v?this._keyToItem.has(v):this._keyToItem.has(v.id)};y.isOngoing=function(v){v="string"===typeof v?v:v.id;return this.has(v)&&this._queue.isOngoing(v)};
y.pause=function(){this._queue.pause()};y.push=function(v){const m=v.key.id;if(this.has(m))return this.get(m);const t=this._queue.push(m),L=()=>{this._keyToItem.delete(m);this.notifyChange("updating")};this._keyToItem.set(m,v);t.then(L,L);this.notifyChange("updating");return t};y.reset=function(){this._queue.reset();this.notifyChange("updating")};y.resume=function(){this._queue.resume()};y._peekByScaleFirst=function(v){if(!this.state)return v.values().next().value;const m=this.tileInfoView;let t=
Number.NEGATIVE_INFINITY,L=Number.POSITIVE_INFINITY;v.forEach(fa=>{fa=this._keyToItem.get(fa);const ka=this.tileInfoView.getTileScale(fa.key);E.has(ka)||(E.set(ka,[]),t=Math.max(ka,t),L=Math.min(ka,L));E.get(ka).push(fa.key);c.add(ka)});let K=this.state.scale;E.has(K)||(d(q,c),q.sort(),K=q.reduce((fa,ka)=>Math.abs(ka-K)<Math.abs(fa-K)?ka:fa,q[0]));K=Math.min(K,t);K=Math.max(K,L);v=E.get(K);const N=m.getClosestInfoForScale(K),Y=N.getColumnForX(this.state.center[0]),da=N.getRowForY(this.state.center[1]);
v.sort((fa,ka)=>{const x=N.denormalizeCol(fa.col,fa.world),G=N.denormalizeCol(ka.col,ka.world);return Math.sqrt((Y-x)*(Y-x)+(da-fa.row)*(da-fa.row))-Math.sqrt((Y-G)*(Y-G)+(da-ka.row)*(da-ka.row))});c.clear();E.clear();return v[0].id};y._peekByCenterFirst=function(v){if(!this.state)return v.values().next().value;const m=this.tileInfoView,t=this.state.center;let L=Number.POSITIVE_INFINITY,K=null;v.forEach(N=>{N=this._keyToItem.get(N);m.getTileCoords(z,N.key);const Y=A.distance(z,t);Y<L&&(L=Y,K=N.key)});
return K.id};h._createClass(B,[{key:"length",get:function(){return this._queue?this._queue.length:0}},{key:"onGoingCount",get:function(){return this._keyToItem.size}},{key:"updating",get:function(){return 0<this.length||0<this.onGoingCount}}]);return B}(n);b.__decorate([l.property({constructOnly:!0})],k.prototype,"concurrency",void 0);b.__decorate([l.property({constructOnly:!0})],k.prototype,"process",void 0);b.__decorate([l.property()],k.prototype,"state",void 0);b.__decorate([l.property({constructOnly:!0})],
k.prototype,"strategy",void 0);b.__decorate([l.property({constructOnly:!0})],k.prototype,"tileInfoView",void 0);b.__decorate([l.property({readOnly:!0})],k.prototype,"updating",null);return k=b.__decorate([H.subclass("esri.views.2d.tiling.TileQueue")],k)})},"esri/views/2d/tiling/TileStrategy":function(){define(["./TileKey","./TileCoverage","./TileCache"],function(h,b,k){const p=new h(0,0,0,0),D=new Map,l=[],u=[];return function(){function H(w){this._previousScale=Number.POSITIVE_INFINITY;this.cachePolicy=
"keep";this.coveragePolicy="closest";this.resampling=!0;this.tileIndex=new Map;this.tiles=[];this.buffer=192;this.acquireTile=w.acquireTile;this.releaseTile=w.releaseTile;this.tileInfoView=w.tileInfoView;this.resampling=null==w.resampling||!!w.resampling;w.cachePolicy&&(this.cachePolicy=w.cachePolicy);w.coveragePolicy&&(this.coveragePolicy=w.coveragePolicy);null!=w.buffer&&(this.buffer=w.buffer);w.cacheSize&&(this._tileCache=new k(w.cacheSize,this.tileInfoView,r=>{this.releaseTile(r)}))}var J=H.prototype;
J.destroy=function(){this.tileIndex.clear()};J.update=function(w){const {resampling:r,tileIndex:n}=this,A=this.tileInfoView.getTileCoverage(w.state,this.buffer,this.coveragePolicy);u.length=0;l.length=0;D.clear();if(A){var {minScale:e,maxScale:d}=this.tileInfoView.tileInfo,{spans:c,lodInfo:q}=A,{level:E}=q,{scale:z,center:F,resolution:B}=w.state,y=!w.stationary&&z>this._previousScale;this._previousScale=z;this.tiles.length=0;if(!r&&(z>e||z<d))return this.tiles.length=0,D.clear(),n.forEach(K=>{this.releaseTile(K)}),
n.clear(),u.length=0,l.length=0,D.clear(),b.pool.release(A),!0;n.forEach(K=>K.visible=!0);var v=w=0;if(0<c.length)for(const {row:K,colFrom:N,colTo:Y}of c)for(let da=N;da<=Y;da++){w++;const fa=p.set(E,K,q.normalizeCol(da),q.getWorldForColumn(da)).id;if(n.has(fa)){var m=n.get(fa);m.isReady?(D.set(fa,m),v++):y||this._addParentTile(fa,D)}else{if(this._tileCache&&this._tileCache.has(fa)){if(m=this._tileCache.pop(fa),this.tileIndex.set(fa,m),m.isReady){D.set(fa,m);v++;continue}}else m=this.acquireTile(p),
this.tileIndex.set(fa,m);y||this._addParentTile(fa,D)}}var t=v===w;n.forEach((K,N)=>{p.set(N);if(!D.has(N)){var Y=this.tileInfoView.intersects(A,p),da="purge"===this.cachePolicy?p.level!==E:p.level>E;!Y||!y&&t?!da&&Y||l.push(N):K.isReady?u.push(N):da&&l.push(N)}});for(var L of u)(w=n.get(L))&&w.isReady&&D.set(L,w);for(const K of l)L=n.get(K),this._tileCache?this._tileCache.add(L):this.releaseTile(L),n.delete(K);D.forEach(K=>this.tiles.push(K));n.forEach(K=>{D.has(K.key.id)||(K.visible=!1)});this._tileCache&&
this._tileCache.prune(E,F,B);b.pool.release(A);D.clear();return t}};J.clear=function(w=!0){const {tileIndex:r}=this;w&&r.forEach(n=>{this.releaseTile(n)});r.clear()};J.updateCacheSize=function(w){this._tileCache&&(this._tileCache.maxSize=w)};J._addParentTile=function(w,r){let n=null;for(;;){w=this.tileInfoView.getTileParentId(w);if(!w)break;if(this.tileIndex.has(w)){if((n=this.tileIndex.get(w))&&n.isReady){r.has(n.key.id)||r.set(n.key.id,n);break}}else if(this._tileCache&&this._tileCache.has(w)&&
(n=this._tileCache.pop(w),this.tileIndex.set(w,n),n&&n.isReady)){r.has(n.key.id)||r.set(n.key.id,n);break}}};return H}()})},"esri/views/2d/tiling/TileCache":function(){define(["../../../chunks/vec2"],function(h){return function(){function b(p,D,l){this.maxSize=p;this.tileInfoView=D;this.removedFunc=l;this._tilePerId=new Map;this._tileKeysPerLevel=[]}var k=b.prototype;k.has=function(p){return this._tilePerId.has(p)};k.get=function(p){return this._tilePerId.get(p)};k.pop=function(p){const D=this._tilePerId.get(p);
if(!D)return null;const l=this._tileKeysPerLevel[D.key.level];this._tilePerId["delete"](p);for(let u=0;u<l.length;u++)if(l[u].id===p){l.splice(u,1);break}D.visible=!0;return D};k.add=function(p){p.visible=!1;const D=p.key,l=D.id;this._tilePerId.has(l)||(this._tilePerId.set(l,p),p=D.level,this._tileKeysPerLevel[p]||(this._tileKeysPerLevel[p]=[]),this._tileKeysPerLevel[p].push(D))};k.prune=function(p,D,l){let u=this._tilePerId.size;if(!(u<=this.maxSize)){for(var H=this._tileKeysPerLevel.length-1;u>
this.maxSize&&0<=H;)H!==p&&(u=this._pruneAroundCenterTile(u,D,l,H)),H--;u>this.maxSize&&(u=this._pruneAroundCenterTile(u,D,l,p))}};k._pruneAroundCenterTile=function(p,D,l,u){u=this._tileKeysPerLevel[u];if(!u||0===u.length)return p;const {size:H,origin:J}=this.tileInfoView.tileInfo,w=l*H[0],r=l*H[1],n=[0,0],A=[0,0];for(u.sort((e,d)=>{n[0]=J.x+w*(e.col+.5);n[1]=J.y-r*(e.row+.5);A[0]=J.x+w*(d.col+.5);A[1]=J.y-r*(d.row+.5);return h.squaredDistance(n,D)-h.squaredDistance(A,D)});0<u.length&&(l=u.pop(),
this._removeTile(l.id),p--,p!==this.maxSize););return p};k._removeTile=function(p){const D=this._tilePerId.get(p);this.removedFunc&&this.removedFunc(D);this._tilePerId["delete"](p)};return b}()})},"esri/views/2d/support/Timeline":function(){define(["exports"],function(h){let b=function(){function k(){this._names=new Map}var p=k.prototype;p.begin=function(D){this._names.has(D)||(this._names.set(D,!1),-1!==D.indexOf("Brush")&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${D}.Start`))};p.end=
function(D){this._names.has(D)&&!this._names.get(D)&&(this._names.set(D,!0),performance.mark(`Esri.${D}.End`))};p.record=function(D){this._names.has(D)||(this._names.set(D,!0),performance.mark(`Esri.${D}`))};return k}();h.Timeline=b;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/views/2d/input/MapViewInputManager":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../../core/Accessor ../../../core/Handles ../../../core/watchUtils ../../input/InputManager ./handlers/DoubleClickZoom ./handlers/DoubleTapDragZoom ./handlers/DragPan ./handlers/DragRotate ./handlers/GamepadNavigation ./handlers/KeyPan ./handlers/KeyRotate ./handlers/KeyZoom ./handlers/MouseWheelZoom ./handlers/PinchAction ../../input/BrowserEventSource ../../input/handlers/PreventContextMenu ../../input/recognizers/SingleAndDoubleClick ../../input/recognizers/DoubleTapDrag ../../input/recognizers/Drag ../../input/recognizers/ImmediateDoubleClick ../../input/recognizers/PointerClickHoldAndDrag".split(" "),
function(h,b,k,p,D,l,u,H,J,w,r,n,A,e,d,c,q,E,z,F,B,y,v,m,t,L,K,N,Y,da,fa,ka){var x={left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},G={zoomIn:["\x3d","+"],zoomOut:["-","_"]},V={clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"};k=function(na){function R(){var W=na.apply(this,arguments)||this;W._handles=new A;return W}h._inheritsLoose(R,na);var S=R.prototype;S.initialize=function(){this._handles.add([e.whenNot(this.view,
"ready",()=>this._disconnect()),e.when(this.view,"ready",()=>this._connect())])};S.destroy=function(){this._handles&&(this._handles.removeAll(),this._handles=null);this._disconnect()};S._disconnect=function(){this._inputManager&&(this.view.viewEvents.disconnect(),this._inputManager.destroy(),this._inputManager=null,this._source.destroy(),this._source=null)};S._connect=function(){const W=new L.BrowserEventSource(this.view.surface,this.view.input);var ja=[new fa.ImmediateDoubleClick,new ka.PointerClickHoldAndDrag,
new N.SingleAndDoubleClick,new da.Drag(this.view.navigation),new Y.DoubleTapDrag];ja=new d.InputManager({eventSource:W,recognizers:ja});ja.installHandlers("prevent-context-menu",[new K.PreventContextMenu],d.ViewEventPriorities.INTERNAL);ja.installHandlers("navigation",[new t.PinchRotateAndZoom(this.view),new F.GamepadNavigation(this.view),new m.MouseWheelZoom(this.view),new c.DoubleClickZoom(this.view),new c.DoubleClickZoom(this.view,["Ctrl"]),new E.DragPan(this.view,"primary"),new B.KeyPan(this.view,
x),new v.KeyZoom(this.view,G),new y.KeyRotate(this.view,V),new z.DragRotate(this.view,"secondary"),new q.DoubleTapDragZoom(this.view,"touch")],d.ViewEventPriorities.INTERNAL);this.view.viewEvents.connect(ja);this._source=W;this._inputManager=ja;e.init(this.view.navigation,"browserTouchPanEnabled",ma=>{this._source.browserTouchPanningEnabled=!ma})};h._createClass(R,[{key:"test",get:function(){return{inputManager:this._inputManager}}}]);return R}(n);b.__decorate([l.property()],k.prototype,"view",void 0);
return k=b.__decorate([H.subclass("esri.views.2d.input.MapViewInputManager")],k)})},"esri/views/2d/input/handlers/DoubleClickZoom":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../input/InputHandler","../../../input/handlers/support"],function(h,b,k,p){k=function(D){function l(u,H){var J=D.call(this,!0)||this;J.view=u;J.registerIncoming("double-click",H,w=>J._handleDoubleClick(w,H));return J}b._inheritsLoose(l,D);l.prototype._handleDoubleClick=function(u,H){p.eventMatchesPointerAction(u.data,
"primary")&&(u.stopPropagation(),H?this.view.mapViewNavigation.zoomOut([u.data.x,u.data.y]):this.view.mapViewNavigation.zoomIn([u.data.x,u.data.y]))};return l}(k.InputHandler);h.DoubleClickZoom=k;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/views/input/handlers/support":function(){define(["exports"],function(h){h.eventMatchesMousePointerAction=function(b,k){if("touch"===b.pointerType)return!1;switch(k){case "primary":return 0===b.button;case "secondary":return 2===b.button;case "tertiary":return 1===
b.button}};h.eventMatchesPointerAction=function(b,k){switch(k){case "primary":return"touch"===b.pointerType||0===b.button;case "secondary":return"touch"!==b.pointerType&&2===b.button;case "tertiary":return"touch"!==b.pointerType&&1===b.button}};Object.defineProperty(h,"__esModule",{value:!0})})},"esri/views/2d/input/handlers/DoubleTapDragZoom":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../core/has","../../../input/InputHandler"],function(h,b,k,p){k=function(D){function l(u,
H,J){var w=D.call(this,!0)||this;w.view=u;w.pointerType=H;w.registerIncoming("double-tap-drag",J,r=>w._handleDoubleTapDrag(r));return w}b._inheritsLoose(l,D);l.prototype._handleDoubleTapDrag=function(u){var {data:H}=u,{pointerType:J}=H;if(J===this.pointerType){u.stopPropagation();var {action:w,delta:r}=H;({view:H}=this);({mapViewNavigation:u}=H);switch(w){case "begin":({scale:H}=H);this._currentScale=this._startScale=H;this._previousDelta=r;u.begin();break;case "update":if(this._previousDelta.y===
r.y)break;this._previousDelta=r;H=this._startScale*1.015**r.y;u.setViewpointImmediate(H/this._currentScale);this._currentScale=H;break;case "end":{({constraints:J}=H);const {effectiveLODs:n,snapToZoom:A}=J;A&&n?(H=J.snapScale(this._currentScale),H=(0<r.y?Math.max(H,J.snapToPreviousScale(this._startScale)):Math.min(H,J.snapToNextScale(this._startScale)))/this._currentScale,u.zoom(H)):u.end()}}}};return l}(p.InputHandler);h.DoubleTapDragZoom=k;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/views/2d/input/handlers/DragPan":function(){define(["exports",
"../../../../chunks/_rollupPluginBabelHelpers","../../../input/InputHandler","../../../input/handlers/support","../../../input/DragEventSeparator"],function(h,b,k,p,D){k=function(l){function u(J,w,r){var n=l.call(this,!0)||this;n.view=J;n.pointerAction=w;n.registerIncoming("drag",r,e=>n._handleDrag(e));n.registerIncoming("pointer-down",()=>n.stopMomentumNavigation());const A=n.view.mapViewNavigation;n.dragEventSeparator=new D.DragEventSeparator({start:(e,d)=>{A.pan.begin(n.view,d.data);d.stopPropagation()},
update:(e,d)=>{A.pan.update(n.view,d.data);d.stopPropagation()},end:(e,d)=>{A.pan.end(n.view,d.data);d.stopPropagation()},condition:(e,d)=>1===e&&p.eventMatchesPointerAction(d.data,n.pointerAction)});return n}b._inheritsLoose(u,l);var H=u.prototype;H._handleDrag=function(J){const w=this.view.mapViewNavigation;w.pinch.zoomMomentum||w.pinch.rotateMomentum?this.stopMomentumNavigation():this.dragEventSeparator.handle(J)};H.stopMomentumNavigation=function(){this.view.mapViewNavigation.pan.stopMomentumNavigation()};
return u}(k.InputHandler);h.DragPan=k;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/views/input/DragEventSeparator":function(){define(["exports"],function(h){let b=function(){function k(D){this.callbacks=D;this.currentCount=0;this.callbacks.condition||(this.callbacks.condition=()=>!0)}var p=k.prototype;p.handle=function(D){const l=D.data,u=l.pointers.size;switch(l.action){case "start":this.currentCount=u;this.emitStart(D);break;case "added":this.emitEnd(this.previousEvent);this.currentCount=
u;this.emitStart(D);break;case "update":this.emitUpdate(D);break;case "removed":this.startEvent&&this.emitEnd(this.previousEvent);this.currentCount=u;this.emitStart(D);break;case "end":this.emitEnd(D),this.currentCount=0}this.previousEvent=D};p.emitStart=function(D){this.startEvent=D;this.callbacks.condition(this.currentCount,D)&&this.callbacks.start(this.currentCount,D,this.startEvent)};p.emitUpdate=function(D){this.callbacks.condition(this.currentCount,D)&&this.callbacks.update(this.currentCount,
D,this.startEvent)};p.emitEnd=function(D){this.callbacks.condition(this.currentCount,D)&&this.callbacks.end(this.currentCount,D,this.startEvent);this.startEvent=null};return k}();h.DragEventSeparator=b;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/views/2d/input/handlers/DragRotate":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../input/InputHandler","../../../input/handlers/support","../../../input/DragEventSeparator"],function(h,b,k,p,D){k=function(l){function u(H,
J,w){var r=l.call(this,!0)||this;r.view=H;r.pointerAction=J;const n=r.view.mapViewNavigation;r.dragEventSeparator=new D.DragEventSeparator({start:(A,e)=>{n.rotate.begin(r.view,e.data);e.stopPropagation()},update:(A,e)=>{n.rotate.update(r.view,e.data);e.stopPropagation()},end:(A,e)=>{n.rotate.end();e.stopPropagation()},condition:(A,e)=>1===A&&p.eventMatchesPointerAction(e.data,r.pointerAction)});r.registerIncoming("drag",w,A=>r.dragEventSeparator.handle(A));return r}b._inheritsLoose(u,l);return u}(k.InputHandler);
h.DragRotate=k;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/views/2d/input/handlers/GamepadNavigation":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/scheduling ../../../../core/Handles ../../../../core/watchUtils ../../../input/InputHandler ../../viewpointUtils ../../../navigation/gamepadAndKeyboardUtils".split(" "),function(h,b,k,p,D,l,u,H){l=function(J){function w(n){var A=J.call(this,!0)||this;A.view=n;A.frameTask=null;A.watchHandles=new p;
A.currentDevice=null;A.transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0};A.handle=A.registerIncoming("gamepad",e=>A.handleEvent(e));A.handle.pause();return A}b._inheritsLoose(w,J);var r=w.prototype;r.onInstall=function(n){J.prototype.onInstall.call(this,n);this.watchHandles.add([D.init(this.view.navigation.gamepad,"enabled",A=>{A?(this.handle.resume(),this.frameTask||(this.frameTask=k.addFrameTask({update:e=>this.frameUpdate(e.deltaTime)}))):(this.handle.pause(),this.frameTask&&(this.frameTask.remove(),
this.frameTask=null))})])};r.onUninstall=function(){this.watchHandles.removeAll();this.frameTask&&(this.frameTask.remove(),this.frameTask=null);J.prototype.onUninstall.call(this)};r.handleEvent=function(n){const A=this.view.navigation.gamepad.device;A&&n.data.device!==A||this.currentDevice&&this.currentDevice!==n.data.device||("end"===n.data.action?(this.currentDevice=null,H.resetTransformation(this.transformation)):(this.currentDevice=n.data.device,H.extractTransformation(n.data,this.view.navigation.gamepad,
this.transformation)))};r.frameUpdate=function(n){const A=this.transformation;if(!H.isZeroTransformation(A)){var e=this.view.viewpoint.clone(),d=.7*this.view.navigation.gamepad.velocityFactor*n;u.translateBy(e,e,[A.translation[0]*d,-A.translation[1]*d]);d=this.view.size;u.scaleAndRotateBy(e,e,1+6E-4*A.translation[2]*n,this.view.constraints.rotationEnabled?.06*-A.heading*n:0,[d[0]/2,d[1]],d);n=this.view.constraints.constrain(e,this.view.viewpoint);this.view.viewpoint=n}};return w}(l.InputHandler);
h.GamepadNavigation=l;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/views/navigation/gamepadAndKeyboardUtils":function(){define(["exports","../../chunks/vec3"],function(h,b){function k(p){let D=p*p;0>p&&(D*=-1);return D}h.extractTransformation=function(p,D,l){const u=p.state;p=p.device;D="forward-down"===D.tiltDirection?1:-1;"standard"===p.deviceType?(l.translation[0]=k(u.axes[0]),l.translation[1]=k(u.axes[1]),l.translation[2]=k(u.buttons[7])-k(u.buttons[6]),l.heading=k(u.axes[2]),l.tilt=
k(u.axes[3])):"spacemouse"===p.deviceType&&(l.translation[0]=1.2*k(u.axes[0]),l.translation[1]=1.2*k(u.axes[1]),l.translation[2]=2*-k(u.axes[2]),l.heading=1.2*k(u.axes[5]),l.tilt=1.2*k(u.axes[3]));l.tilt*=D;b.scale(l.translation,l.translation,1);return l};h.extractTransformationKeyboard=function(p,D){D.translation[0]=p[1]-p[0];D.translation[1]=p[3]-p[2];D.translation[2]=p[4]-p[5];D.heading=p[7]-p[6];D.tilt=p[8]-p[9];D.zoom=p[10]-p[11];return D};h.isZeroTransformation=function(p){return 0===p.translation[0]&&
0===p.translation[1]&&0===p.translation[2]&&0===p.heading&&0===p.tilt&&0===p.zoom};h.quadraticAccentuation=k;h.resetTransformation=function(p){p.translation[0]=0;p.translation[1]=0;p.translation[2]=0;p.heading=0;p.tilt=0;return p};Object.defineProperty(h,"__esModule",{value:!0})})},"esri/views/2d/input/handlers/KeyPan":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../input/InputHandler"],function(h,b,k){k=function(p){function D(u,H,J){var w=p.call(this,!0)||this;
w.view=u;w.keys=H;w._pressed=!1;w._keyMap={[H.left]:"left",[H.right]:"right",[H.up]:"up",[H.down]:"down"};w.registerIncoming("key-down",J,r=>w._handleKeyDown(r));w.registerIncoming("key-up",J,r=>w._handleKeyUp(r));w.registerIncoming("blur",J,()=>w._handleBlur());return w}b._inheritsLoose(D,p);var l=D.prototype;l._handleKeyDown=function(u){u.data.repeat||this._handleKey(u,!0)};l._handleKeyUp=function(u){this._handleKey(u,!1)};l._handleBlur=function(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())};
l._handleKey=function(u,H){const J=this._keyMap[u.data.key];if(this._pressed=null!=J){if(H)switch(this.view.mapViewNavigation.begin(),J){case "left":this.view.mapViewNavigation.continousPanLeft();break;case "right":this.view.mapViewNavigation.continousPanRight();break;case "up":this.view.mapViewNavigation.continousPanUp();break;case "down":this.view.mapViewNavigation.continousPanDown()}else this._pressed=!1,this.view.mapViewNavigation.stop();u.stopPropagation()}};return D}(k.InputHandler);h.KeyPan=
k;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/views/2d/input/handlers/KeyRotate":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../input/InputHandler"],function(h,b,k){k=function(p){function D(u,H,J){var w=p.call(this,!0)||this;w.view=u;w.keys=H;w._pressed=!1;w._keyToDirection={[H.clockwiseOption1]:"clockwise",[H.clockwiseOption2]:"clockwise",[H.counterClockwiseOption1]:"counterClockwise",[H.counterClockwiseOption2]:"counterClockwise",[H.resetOption1]:"reset",
[H.resetOption2]:"reset"};w.registerIncoming("key-down",J,r=>w._handleKeyDown(r));w.registerIncoming("key-up",J,r=>w._handleKeyUp(r));w.registerIncoming("blur",J,()=>w._handleBlur());return w}b._inheritsLoose(D,p);var l=D.prototype;l._handleKeyDown=function(u){u.data.repeat||this._handleKey(u,!0)};l._handleKeyUp=function(u){this._handleKey(u,!1)};l._handleBlur=function(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())};l._handleKey=function(u,H){var J=u.modifiers;if(!(0<J.size&&
!J.has("Shift")||!this.view.constraints.rotationEnabled)&&(J=this._keyToDirection[u.data.key],this._pressed=null!=J)){if(H)switch(this.view.mapViewNavigation.begin(),J){case "clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;case "counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case "reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();u.stopPropagation()}};return D}(k.InputHandler);
h.KeyRotate=k;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/views/2d/input/handlers/KeyZoom":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../core/has","../../../input/InputHandler"],function(h,b,k,p){k=function(D){function l(H,J,w){var r=D.call(this,!0)||this;r.view=H;r.keys=J;r._keysToZoomAction={};r.registerIncoming("key-down",w,n=>r._handleKeyDown(n));J.zoomIn.forEach(n=>r._keysToZoomAction[n]=0);J.zoomOut.forEach(n=>r._keysToZoomAction[n]=1);
return r}b._inheritsLoose(l,D);var u=l.prototype;u._handleKeyDown=function(H){this._handleKey(H)};u._handleKey=function(H){var J=H.modifiers;if(!(0<J.size)||J.has("Shift"))if({key:J}=H.data,J in this._keysToZoomAction){J=this._keysToZoomAction[J];var {mapViewNavigation:w}=this.view,r=null;switch(J){case 0:r=w.zoomIn();break;case 1:r=w.zoomOut();break;default:return}w.begin();r.then(()=>w.end());H.stopPropagation()}};return l}(p.InputHandler);h.KeyZoom=k;Object.defineProperty(h,"__esModule",{value:!0})})},
"esri/views/2d/input/handlers/MouseWheelZoom":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../input/InputHandler"],function(h,b,k){k=function(p){function D(l,u){var H=p.call(this,!0)||this;H.view=l;H._canZoom=!0;H.registerIncoming("mouse-wheel",u,J=>H._handleMouseWheel(J));return H}b._inheritsLoose(D,p);D.prototype._handleMouseWheel=function(l){if(this.view.navigation.mouseWheelZoomEnabled&&(l.preventDefault(),l.stopPropagation(),this._canZoom)){var u=this.view.mapViewNavigation,
{x:H,y:J,deltaY:w}=l.data;if(l=u.zoom(1/.6**(1/60*w),[H,J]))this._canZoom=!1,l.catch(()=>{}).then(()=>{this._canZoom=!0;u.end()})}};return D}(k.InputHandler);h.MouseWheelZoom=k;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/views/2d/input/handlers/PinchAction":function(){define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../input/InputHandler","../../../input/DragEventSeparator"],function(h,b,k,p){k=function(D){function l(H){var J=D.call(this,!0)||this;J.view=H;J.registerIncoming("drag",
r=>J._handleDrag(r));J.registerIncoming("pointer-down",()=>J.stopMomentumNavigation());const w=J.view.mapViewNavigation;J.dragEventSeparator=new p.DragEventSeparator({start:(r,n)=>{w.pinch.begin(J.view,n.data);n.stopPropagation()},update:(r,n)=>{w.pinch.update(J.view,n.data);n.stopPropagation()},end:(r,n)=>{w.pinch.end(J.view);n.stopPropagation()},condition:r=>2<=r});return J}b._inheritsLoose(l,D);var u=l.prototype;u._handleDrag=function(H){this.dragEventSeparator.handle(H)};u.stopMomentumNavigation=
function(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()};return l}(k.InputHandler);h.PinchRotateAndZoom=k;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/views/input/BrowserEventSource":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/has ./keys ../support/screenUtils ./gamepad/GamepadSource".split(" "),function(h,b,k,p,D,l){const u=k("trident"),H=k("edge"),J=k("chrome"),w=k("ff"),r=k("safari");k=function(){function A(d,c){this.input=c;this._active=
{};this._activePointerCaptures=new Set;this._keyDownState=new Set;this._eventId=1;this._browserTouchPanningEnabled=!1;this._element=d;d.getAttribute("tabindex")||d.setAttribute("tabindex","0");this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,
"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost};this._updateTouchAction();this._element.addEventListener("keydown",this._preventAltKeyDefault);this._gamepadSource=new l.GamepadSource(d,this.input);this._gamepadSource.onEvent=q=>this._callback("gamepad",q)}var e=A.prototype;e.destroy=function(){this.activeEvents=this._callback=null;this._activePointerCaptures.forEach(d=>{this._releasePointerCaptureSafe(d)});this._gamepadSource&&(this._gamepadSource.destroy(),
this._gamepadSource=null);this._activePointerCaptures=null;this._removeTouchAction();this._element.removeEventListener("keydown",this._preventAltKeyDefault)};e.setPointerCapture=function(d,c){c?(this._element.setPointerCapture(d.pointerId),this._activePointerCaptures.add(d.pointerId)):(this._releasePointerCaptureSafe(d.pointerId),this._activePointerCaptures.delete(d.pointerId))};e._updateTouchAction=function(){this._element.classList.remove(this._browserTouchPanningEnabled?"esri-view-surface--touch-none":
"esri-view-surface--touch-pan");this._element.classList.add(this._browserTouchPanningEnabled?"esri-view-surface--touch-pan":"esri-view-surface--touch-none")};e._updateTouchEventHandling=function(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)};e._removeTouchAction=function(){this._element.classList.remove("esri-view-surface--touch-none");this._element.classList.remove("esri-view-surface--touch-pan");
this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)};e._releasePointerCaptureSafe=function(d){try{this._element.hasPointerCapture&&!this._element.hasPointerCapture(d)||this._element.releasePointerCapture(d)}catch(c){}};e._updateNormalizedPointerLikeEvent=function(d,c){d=D.createScreenPointFromNativeEvent(this._element,d);A.test.disableSubpixelCoordinates&&(d.x=Math.round(d.x),d.y=Math.round(d.y));c.x=d.x;c.y=d.y;return c};e._handleKey=function(d,c){const q=p.eventKey(c);
q&&"key-up"===d&&this._keyDownState.delete(q);c={native:c,key:q,repeat:q&&this._keyDownState.has(q)};q&&"key-down"===d&&this._keyDownState.add(c.key);this._callback(d,c)};e._handlePointer=function(d,c){c=this._updateNormalizedPointerLikeEvent(c,{native:c,x:0,y:0,pointerType:c.pointerType,button:c.button,buttons:c.buttons,eventId:this._eventId++});this._callback(d,c)};e._handlePointerPreventDefault=function(d,c){const q=this._updateNormalizedPointerLikeEvent(c,{native:c,x:0,y:0,pointerType:c.pointerType,
button:c.button,buttons:c.buttons,eventId:this._eventId++});c.preventDefault();this._callback(d,q)};e._handleMouseWheel=function(d,c){let q=c.deltaY;switch(c.deltaMode){case 0:if(u||H)q=q/document.documentElement.clientHeight*600;break;case 1:q*=30;break;case 2:q*=900}u||H?q*=.7:J||r?q*=.6:w&&(q*=1.375);const E=Math.abs(q);100<E&&(q=q/E*200/(1+Math.exp(-.02*(E-100))));c=this._updateNormalizedPointerLikeEvent(c,{native:c,x:0,y:0,deltaY:q});this._callback(d,c)};e._handlePointerCaptureLost=function(d,
c){this._activePointerCaptures.delete(c.pointerId);this._handleDefault(d,c)};e._handleDefault=function(d,c){const q={native:c};c.preventDefault();this._callback(d,q)};e._preventAltKeyDefault=function(d){"Alt"===d.key&&d.preventDefault()};e._preventMultiTouchPanning=function(d){1<d.touches.length&&d.preventDefault()};b._createClass(A,[{key:"browserTouchPanningEnabled",get:function(){return this._browserTouchPanningEnabled},set:function(d){this._browserTouchPanningEnabled=d;this._updateTouchAction();
this._updateTouchEventHandling()}},{key:"onEventReceived",set:function(d){this._callback=d}},{key:"activeEvents",set:function(d){for(const c in this._active)d&&d.has(c)||(this._element.removeEventListener(n[c],this._active[c]),delete this._active[c]);d&&d.forEach(c=>{if(!this._active[c]&&n[c]){const q=(this._eventHandlers[c]||this._handleDefault).bind(this,c);this._element.addEventListener(n[c],q);this._active[c]=q}});this._gamepadSource.hasEventListeners=d&&d.has("gamepad")}}]);return A}();k.test=
{disableSubpixelCoordinates:!1};const n={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};h.BrowserEventSource=k;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/views/input/gamepad/GamepadSource":function(){define(["exports",
"../../../chunks/_rollupPluginBabelHelpers","../../../core/scheduling","./GamepadInputDevice","./GamepadState"],function(h,b,k,p,D){let l=function(){function u(J,w){this.element=J;this.input=w;this._hasEventListeners=!1;this.onConnectGamepad=r=>{this.connectGamepad(r.gamepad)};this.onDisconnectGamepad=r=>{r=r.gamepad;const n=r.index,A=this.inputDevices[n];A&&(this.emitGamepadEvent(r,D.extractState(A),!1),this.inputDevices.splice(n,1),this.latestUpdate.splice(n,1),this.input.gamepad.devices.remove(A),
this.ensurePollingState())};this.frameTask=null;this.latestUpdate=[];this.inputDevices=[];this.callback=null;J=window.isSecureContext;if(this.supported="getGamepads"in window.navigator&&J)this.forEachGamepad(this.connectGamepad),window.addEventListener("gamepadconnected",this.onConnectGamepad),window.addEventListener("gamepaddisconnected",this.onDisconnectGamepad),this.ensurePollingState()}var H=u.prototype;H.destroy=function(){this.hasEventListeners=!1;this.supported&&(window.removeEventListener("gamepadconnected",
this.onConnectGamepad),window.removeEventListener("gamepaddisconnected",this.onDisconnectGamepad))};H.connectGamepad=function(J){const w=new p(J);"unknown"!==w.deviceType&&(this.inputDevices[J.index]=w,this.input.gamepad.devices.add(w));this.ensurePollingState()};H.ensurePollingState=function(){this.eventsEnabled?this.startPolling():this.stopPolling()};H.startPolling=function(){null==this.frameTask&&(this.frameTask=k.addFrameTask({update:()=>this.readGamepadState()}))};H.stopPolling=function(){null!=
this.frameTask&&(this.frameTask.remove(),this.frameTask=null,this.latestUpdate=[])};H.readGamepadState=function(){const J=document.hasFocus(),w=this.element.contains(document.activeElement),r="document"===this.input.gamepad.enabledFocusMode&&!J||"view"===this.input.gamepad.enabledFocusMode&&!w;this.forEachGamepad(n=>{var A=this.inputDevices[n.index];if(A){var e=this.latestUpdate[n.index];A=D.extractState(A);var d=r||D.stateIdle(A);e&&(e.timestamp===n.timestamp||!e.active&&d||D.stateEqual(e.state,
A))||this.emitGamepadEvent(n,A,!d)}})};H.forEachGamepad=function(J){const w=window.navigator.getGamepads();for(let r=0;r<w.length;r++){const n=w[r];this.validate(n)&&J(n)}};H.emitGamepadEvent=function(J,w,r){var n=this.latestUpdate[J.index];if((n=n&&n.active)||r)this.latestUpdate[J.index]={timestamp:J.timestamp,state:w,active:r},this.callback&&this.callback({device:this.inputDevices[J.index],state:w,action:!n&&r?"start":n&&r?"update":"end"})};H.validate=function(J){if(!J||!J.connected)return!1;for(let w=
0;w<J.axes.length;w++)if(isNaN(J.axes[w]))return!1;return!0};b._createClass(u,[{key:"hasEventListeners",set:function(J){this._hasEventListeners!==J&&(this._hasEventListeners=J,this.ensurePollingState())}},{key:"eventsEnabled",get:function(){return this.supported&&0<this.inputDevices.length&&this._hasEventListeners}},{key:"onEvent",set:function(J){this.callback=J}}]);return u}();h.GamepadSource=l;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/views/input/gamepad/GamepadState":function(){define(["exports",
"../../../core/mathUtils"],function(h,b){h.extractState=function(k){const p=k.native;return p?{buttons:p.buttons.map(D=>D.pressed?D.value?D.value:1:0),axes:p.axes.map(D=>{{var l=k.axisThreshold;const u=Math.abs(D);D=u<l?0:b.sign(D)*(u-l)/(1-l)}return D})}:{buttons:[],axes:[]}};h.stateEqual=function(k,p){if(k.axes.length!==p.axes.length||k.buttons.length!==p.buttons.length)return!1;for(var D=0;D<k.axes.length;D++)if(k.axes[D]!==p.axes[D])return!1;for(D=0;D<k.buttons.length;D++)if(k.buttons[D]!==p.buttons[D])return!1;
return!0};h.stateIdle=function(k){for(var p=0;p<k.axes.length;p++)if(0!==k.axes[p])return!1;for(p=0;p<k.buttons.length;p++)if(0!==k.buttons[p])return!1;return!0};Object.defineProperty(h,"__esModule",{value:!0})})},"esri/views/input/handlers/PreventContextMenu":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../InputHandler"],function(h,b,k){k=function(p){function D(){var l=p.call(this,!0)||this;l.registerIncoming("context-menu",u=>{u.data.native.preventDefault()});return l}
b._inheritsLoose(D,p);return D}(k.InputHandler);h.PreventContextMenu=k;h.default=k;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/views/input/recognizers/SingleAndDoubleClick":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/clock ../../../core/MapUtils ../InputHandler ./support".split(" "),function(h,b,k,p,D,l){const u={maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};D=function(H){function J(r=
u.maximumDoubleClickDelay,n=u.maximumDoubleClickDistance,A=u.maximumDoubleTouchDelay,e=u.maximumDoubleTouchDistance,d=k["default"]){var c=H.call(this,!1)||this;c.maximumDoubleClickDelay=r;c.maximumDoubleClickDistance=n;c.maximumDoubleTouchDelay=A;c.maximumDoubleTouchDistance=e;c._clock=d;c._pointerState=new Map;c._click=c.registerOutgoing("click");c._doubleClick=c.registerOutgoing("double-click");c.registerIncoming("immediate-click",c._handleImmediateClick.bind(b._assertThisInitialized(c)));c.registerIncoming("pointer-drag",
c._handlePointerDrag.bind(b._assertThisInitialized(c)));c.registerIncoming("drag",c._handleDrag.bind(b._assertThisInitialized(c)));return c}b._inheritsLoose(J,H);var w=J.prototype;w.onUninstall=function(){this._pointerState.forEach(r=>{null!=r.doubleClickTimeout&&(r.doubleClickTimeout.remove(),r.doubleClickTimeout=null)})};w._pointerId=function(r){r=r.native;return"mouse"===r.pointerType?`${r.pointerId}:${r.button}`:`${r.pointerType}`};w._handleImmediateClick=function(r){const n=r.data,A=this._pointerId(n),
e=this._pointerState.get(A);if(e){const d="touch"===n.native.pointerType?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;l.manhattanDistance(e.event.data,n)>d?(this._clearDoubleClickTimeout(A,!0),this._startClick(r)):(this._clearDoubleClickTimeout(A,!1),this._doubleClick.emit(e.event.data,void 0,e.event.modifiers))}else this._startClick(r)};w._startClick=function(r){const n=this._pointerId(r.data);this._pointerState.set(n,{event:r,doubleClickTimeout:this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(n),
"touch"===r.data.native.pointerType?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay)});this.refreshHasPendingInputs()};w._handlePointerDrag=function(r){r=this._pointerId(r.data.currentEvent);this._clearDoubleClickTimeout(r,!0)};w._handleDrag=function(r){r=this._pointerId(r.data.pointer);this._clearDoubleClickTimeout(r,!0)};w._clearDoubleClickTimeout=function(r,n){const A=this._pointerState.get(r);A&&(A.doubleClickTimeout.remove(),A.doubleClickTimeout=null,n&&this._doubleClickTimeoutExceeded(r),
this._pointerState.delete(r),this.refreshHasPendingInputs())};w._doubleClickTimeoutExceeded=function(r){const n=this._pointerState.get(r);this._click.emit(n.event.data,void 0,n.event.modifiers);n.doubleClickTimeout=null;this._pointerState.delete(r);this.refreshHasPendingInputs()};b._createClass(J,[{key:"hasPendingInputs",get:function(){return p.someMap(this._pointerState,r=>null!=r.doubleClickTimeout)}}]);return J}(D.InputHandler);h.DefaultParameters=u;h.SingleAndDoubleClick=D;Object.defineProperty(h,
"__esModule",{value:!0})})},"esri/views/input/recognizers/support":function(){define(["exports","../../../core/screenUtils"],function(h,b){h.euclideanDistance=function(k,p){const D=p.x-k.x;k=p.y-k.y;return Math.sqrt(D*D+k*k)};h.fitCircleLSQ=function(k,p){p?(p.radius=0,p.center.x=0,p.center.y=0):p={radius:0,center:b.createScreenPoint()};if(0===k.length)return p;if(1===k.length)return p.center.x=k[0].x,p.center.y=k[0].y,p;if(2===k.length){const [c,q]=k,[E,z]=[q.x-c.x,q.y-c.y];p.radius=Math.sqrt(E*E+
z*z)/2;p.center.x=(c.x+q.x)/2;p.center.y=(c.y+q.y)/2;return p}let D=0,l=0;for(p=0;p<k.length;p++)D+=k[p].x,l+=k[p].y;D/=k.length;l/=k.length;var u=k.map(c=>c.x-D),H=k.map(c=>c.y-l);let J=p=0;var w=0,r=0,n=0,A=0,e=0;for(var d=0;d<u.length;d++){const c=u[d],q=H[d],E=c*c,z=q*q;p+=E;J+=z;w+=c*q;r+=E*c;n+=z*q;A+=c*z;e+=q*E}u=p;H=w;d=J;r=.5*(r+A);n=.5*(n+e);e=u*d-w*H;A=(r*d-n*H)/e;n=(u*n-w*r)/e;e=b.createScreenPoint(A+D,n+l);return{radius:Math.sqrt(A*A+n*n+(p+J)/k.length),center:e}};h.manhattanDistance=
function(k,p){return Math.abs(p.x-k.x)+Math.abs(p.y-k.y)};Object.defineProperty(h,"__esModule",{value:!0})})},"esri/views/input/recognizers/DoubleTapDrag":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/clock ../../../core/screenUtils ../../../core/MapUtils ../InputHandler ../DragEventSeparator ./support ./SingleAndDoubleClick".split(" "),function(h,b,k,p,D,l,u,H,J){l=function(w){function r(A=J.DefaultParameters.maximumDoubleClickDelay,e=J.DefaultParameters.maximumDoubleClickDistance,
d=J.DefaultParameters.maximumDoubleTouchDelay,c=J.DefaultParameters.maximumDoubleTouchDistance,q=k["default"]){var E=w.call(this,!1)||this;E.maximumDoubleClickDelay=A;E.maximumDoubleClickDistance=e;E.maximumDoubleTouchDelay=d;E.maximumDoubleTouchDistance=c;E._clock=q;E._doubleTapDragReady=!1;E._doubleTapDragActive=!1;E._dragStartCenter=p.createScreenPoint(0,0);E._pointerState=new Map;E._doubleTapDrag=E.registerOutgoing("double-tap-drag");E._dragEventSeparator=new u.DragEventSeparator({start:(z,F)=>
E._dragStart(z,F),update:(z,F)=>E._dragUpdate(F),end:(z,F)=>E._dragEnd(F)});E.registerIncoming("drag",z=>E._dragEventSeparator.handle(z));E.registerIncoming("pointer-down",z=>E._handlePointerDown(z));E.registerIncoming("pointer-up",()=>E._handlePointerUp());return E}b._inheritsLoose(r,w);var n=r.prototype;n.onUninstall=function(){this._pointerState.forEach(A=>{null!=A.doubleTapTimeout&&(A.doubleTapTimeout.remove(),A.doubleTapTimeout=null)})};n._clearPointerDown=function(A){const e=this._pointerState.get(A);
e&&(e.doubleTapTimeout.remove(),e.doubleTapTimeout=null,this._pointerState.delete(A),this.refreshHasPendingInputs())};n._createDoubleTapDragData=function(A,e,d){const {button:c,buttons:q,pointer:E,pointers:z,pointerType:F,timestamp:B}=d;return{action:A,delta:e,button:c,buttons:q,pointer:E,pointers:z,pointerType:F,timestamp:B}};n._dragStart=function(A,e){if(this._doubleTapDragReady&&1===A){this._doubleTapDragReady=!1;this._doubleTapDragActive=!0;var {data:d,modifiers:c}=e;({center:A}=d);this._dragStartCenter=
A;A=this._createDoubleTapDragData("begin",p.createScreenPoint(0,0),d);this._doubleTapDrag.emit(A,void 0,c);e.stopPropagation()}};n._dragUpdate=function(A){if(this._doubleTapDragActive){var {data:e,modifiers:d}=A,{center:c}=e;c=p.createScreenPoint(c.x-this._dragStartCenter.x,c.y-this._dragStartCenter.y);c=this._createDoubleTapDragData("update",c,e);this._doubleTapDrag.emit(c,void 0,d);A.stopPropagation()}};n._dragEnd=function(A){if(this._doubleTapDragActive){var {data:e,modifiers:d}=A,{center:c}=e;
c=p.createScreenPoint(c.x-this._dragStartCenter.x,c.y-this._dragStartCenter.y);c=this._createDoubleTapDragData("end",c,e);this._doubleTapDrag.emit(c,void 0,d);this._doubleTapDragActive=!1;A.stopPropagation()}};n._handlePointerDown=function(A){const {data:e}=A,d=this._pointerId(e),c=this._pointerState.get(d);var {pointerType:q}=e.native;c?(q="touch"===q?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance,this._clearPointerDown(d),H.manhattanDistance(c.event.data,e)>q?this._storePointerDown(A):
this._doubleTapDragReady=!0):this._storePointerDown(A)};n._handlePointerUp=function(){this._doubleTapDragReady=!1};n._pointerId=function(A){({native:A}=A);const {pointerId:e,button:d,pointerType:c}=A;return"mouse"===c?`${e}:${d}`:`${c}`};n._storePointerDown=function(A){var {data:e}=A;const {pointerType:d}=e.native,c=this._pointerId(e);e=this._clock.setTimeout(()=>this._clearPointerDown(c),"touch"===d?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay);this._pointerState.set(c,{event:A,doubleTapTimeout:e});
this.refreshHasPendingInputs()};b._createClass(r,[{key:"hasPendingInputs",get:function(){return D.someMap(this._pointerState,A=>null!=A.doubleTapTimeout)}}]);return r}(l.InputHandler);h.DoubleTapDrag=l;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/views/input/recognizers/Drag":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/screenUtils ../../../layers/support/timeUtils ../InputHandler ./support".split(" "),function(h,b,k,p,D,l){function u(r){const n=
[];r.forEach(A=>{n.push(k.createScreenPoint(A.event.x,A.event.y))});return l.fitCircleLSQ(n)}function H(r){const n=u(r);let A=0;r.forEach(e=>{var d=w(e,n);for(d-=e.lastAngle;d>Math.PI;)d-=2*Math.PI;for(;d<-Math.PI;)d+=2*Math.PI;d=e.lastAngle+d;e.lastAngle=d;A+=d-e.initialAngle});A/=r.size||1;return{angle:A,radius:n.radius,center:n.center}}function J(r){const n=new Map;r.forEach((A,e)=>n.set(e,A.event));return n}function w(r,n){r=r.event;return Math.atan2(r.y-n.center.y,r.x-n.center.x)}D=function(r){function n(e){var d=
r.call(this,!1)||this;d.navigationTouch=e;d.startStateModifiers=new Set;d.activePointerMap=new Map;d.isDragging=!1;d.isCurrentDragSuppressed=!1;d.drag=d.registerOutgoing("drag");d.registerIncoming("pointer-drag",d.handlePointerDrag.bind(b._assertThisInitialized(d)));d.registerIncoming("pointer-up",d.handlePointerUpAndPointerLost.bind(b._assertThisInitialized(d)));d.registerIncoming("pointer-capture-lost",d.handlePointerUpAndPointerLost.bind(b._assertThisInitialized(d)));d.registerIncoming("pointer-cancel",
d.handlePointerUpAndPointerLost.bind(b._assertThisInitialized(d)));return d}b._inheritsLoose(n,r);var A=n.prototype;A.createPayload=function(e,d,c,q){return{action:e,pointerType:this.pointerType,button:this.mouseButton,buttons:d.buttons,timestamp:q,pointers:J(this.activePointerMap),pointer:d,angle:c.angle,radius:c.radius,center:c.center}};A.addPointer=function(e){var d=e.native.pointerId;const c=H(this.activePointerMap).angle;e={event:e,initialAngle:0,lastAngle:0};this.activePointerMap.set(d,e);d=
w(e,u(this.activePointerMap));e.initialAngle=d;e.lastAngle=d;this.updatePointerAngles(c)};A.updatePointer=function(e){if(!e||null!=e.x||null!=e.y){var d=this.activePointerMap.get(e.native.pointerId);d?d.event=e:this.addPointer(e)}};A.removePointer=function(e){const d=H(this.activePointerMap).angle;this.activePointerMap.delete(e);this.updatePointerAngles(d)};A.updatePointerAngles=function(e){const d=H(this.activePointerMap);this.activePointerMap.forEach(c=>{c.initialAngle=w(c,d)-e;c.lastAngle=w(c,
d)-e})};A.emitEvent=function(e,d,c){const q=H(this.activePointerMap);this.drag.emit(this.createPayload(e,d,q,c),void 0,this.startStateModifiers)};A.handlePointerUpAndPointerLost=function(e){const d=e.data.native.pointerId,c=p.Milliseconds(e.timestamp);this.activePointerMap.get(d)&&(1===this.activePointerMap.size?(this.updatePointer(e.data),!this.isCurrentDragSuppressed&&this.emitEvent("end",e.data,c),this.isCurrentDragSuppressed=this.isDragging=!1,this.removePointer(d)):(this.removePointer(d),this.emitEvent("removed",
e.data,p.Milliseconds(e.timestamp))))};A.handlePointerDrag=function(e){const d=e.data,c=d.currentEvent,q=p.Milliseconds(e.timestamp);switch(d.action){case "start":case "update":this.isDragging?this.activePointerMap.has(c.native.pointerId)?(this.updatePointer(c),!this.isCurrentDragSuppressed&&this.emitEvent("update",c,q)):(this.addPointer(c),this.emitEvent("added",c,q),this.isCurrentDragSuppressed=this.isSuppressed):(this.updatePointer(c),this.pointerType=e.data.startEvent.pointerType,this.mouseButton=
e.data.startEvent.button,this.startStateModifiers=e.modifiers,this.isDragging=!0,this.isCurrentDragSuppressed=this.isSuppressed,!this.isCurrentDragSuppressed&&this.emitEvent("start",c,q))}};b._createClass(n,[{key:"isSuppressed",get:function(){return this.navigationTouch&&!this.navigationTouch.browserTouchPanEnabled&&"touch"===this.pointerType&&1===this.activePointerMap.size}}]);return n}(D.InputHandler);(function(r){r[r.Left=0]="Left";r[r.Middle=1]="Middle";r[r.Right=2]="Right";r[r.Back=3]="Back";
r[r.Forward=4]="Forward";r[r.Undefined=-1]="Undefined"})(h.Button||(h.Button={}));h.Drag=D;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/views/input/recognizers/ImmediateDoubleClick":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/clock ../InputHandler ./support ./SingleAndDoubleClick".split(" "),function(h,b,k,p,D,l){p=function(u){function H(w=l.DefaultParameters.maximumDoubleClickDelay,r=l.DefaultParameters.maximumDoubleClickDistance,n=l.DefaultParameters.maximumDoubleTouchDelay,
A=l.DefaultParameters.maximumDoubleTouchDistance,e=k["default"]){var d=u.call(this,!1)||this;d.maximumDoubleClickDelay=w;d.maximumDoubleClickDistance=r;d.maximumDoubleTouchDelay=n;d.maximumDoubleTouchDistance=A;d._clock=e;d._pointerState=new Map;d._immediateDoubleClick=d.registerOutgoing("immediate-double-click");d.registerIncoming("pointer-down",d._handlePointerDown.bind(b._assertThisInitialized(d)));d.registerIncoming("pointer-up",c=>{d._handlePointerLoss(c,"pointer-up")});d.registerIncoming("pointer-capture-lost",
c=>{d._handlePointerLoss(c,"pointer-capture-lost")});d.registerIncoming("pointer-cancel",c=>{d._handlePointerLoss(c,"pointer-cancel")});return d}b._inheritsLoose(H,u);var J=H.prototype;J.onUninstall=function(){this._pointerState.forEach(w=>{w.immediateDoubleClick&&w.immediateDoubleClick.timeoutHandle.remove()});u.prototype.onUninstall.call(this)};J._handlePointerDown=function(w){w=w.data;const r=this._pointerId(w);this._pointerState.has(r)||(this._pointerState.set(r,{downButton:w.native.button,immediateDoubleClick:null}),
this.startCapturingPointer(w.native))};J._handlePointerLoss=function(w,r){const n=w.data;var A=this._pointerId(n);if((A=this._pointerState.get(A))&&"pointer-up"===r&&A.downButton===n.native.button)if(r=A.immediateDoubleClick){r.timeoutHandle.remove();const e="touch"===w.data.native.pointerType?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;D.manhattanDistance(r,w.data)>e?this._startImmediateDoubleClick(w,A):(this._immediateDoubleClick.emit(w.data,void 0,r.modifiers),this._removeState(n))}else this._startImmediateDoubleClick(w,
A)};J._startImmediateDoubleClick=function(w,r){r.immediateDoubleClick={x:w.data.x,y:w.data.y,modifiers:w.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(w.data),"touch"===w.data.native.pointerType?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay)}};J._pointerId=function(w){w=w.native;return"mouse"===w.pointerType?`${w.pointerId}:${w.button}`:`${w.pointerType}`};J._removeState=function(w){const r=this._pointerId(w);this._pointerState.delete(r);this.stopCapturingPointer(w.native);
this.refreshHasPendingInputs()};return H}(p.InputHandler);h.ImmediateDoubleClick=p;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/views/input/recognizers/PointerClickHoldAndDrag":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../core/clock","../InputHandler","./support"],function(h,b,k,p,D){const l={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500};p=function(u){function H(w=l.maximumClickDelay,
r=l.movementUntilMouseDrag,n=l.movementUntilPenDrag,A=l.movementUntilTouchDrag,e=l.holdDelay,d=k["default"]){var c=u.call(this,!1)||this;c.maximumClickDelay=w;c.movementUntilMouseDrag=r;c.movementUntilPenDrag=n;c.movementUntilTouchDrag=A;c.holdDelay=e;c._clock=d;c._pointerState=new Map;c._pointerDrag=c.registerOutgoing("pointer-drag");c._immediateClick=c.registerOutgoing("immediate-click");c._pointerHold=c.registerOutgoing("hold");c.registerIncoming("pointer-down",c._handlePointerDown.bind(b._assertThisInitialized(c)));
c.registerIncoming("pointer-up",q=>{c._handlePointerLoss(q,"pointer-up")});c.registerIncoming("pointer-capture-lost",q=>{c._handlePointerLoss(q,"pointer-capture-lost")});c.registerIncoming("pointer-cancel",q=>{c._handlePointerLoss(q,"pointer-cancel")});c._moveHandle=c.registerIncoming("pointer-move",c._handlePointerMove.bind(b._assertThisInitialized(c)));c._moveHandle.pause();return c}b._inheritsLoose(H,u);var J=H.prototype;J.onUninstall=function(){this._pointerState.forEach(w=>{null!=w.holdTimeout&&
(w.holdTimeout.remove(),w.holdTimeout=null)});u.prototype.onUninstall.call(this)};J._handlePointerDown=function(w){const r=w.data,n=r.native.pointerId;var A=null;0===this._pointerState.size&&(A=this._clock.setTimeout(()=>{const e=this._pointerState.get(n);e&&(e.isDragging||(this._pointerHold.emit(e.previousEvent,void 0,w.modifiers),e.holdEmitted=!0),e.holdTimeout=null)},this.holdDelay));A={startEvent:r,previousEvent:r,startTimestamp:w.timestamp,isDragging:!1,downButton:r.native.button,holdTimeout:A,
modifiers:new Set};this._pointerState.set(n,A);this.startCapturingPointer(r.native);this._moveHandle.resume();1<this._pointerState.size&&this.startDragging(w)};J._createPointerDragData=function(w,r,n){return{action:w,startEvent:r.startEvent,previousEvent:r.previousEvent,currentEvent:n}};J._handlePointerMove=function(w){const r=w.data,n=this._pointerState.get(r.native.pointerId);if(n){if(n.isDragging)this._pointerDrag.emit(this._createPointerDragData("update",n,r),void 0,n.modifiers);else{const A=
D.euclideanDistance(r,n.startEvent),e=this._getDragThreshold(r.native.pointerType);A>e&&this.startDragging(w)}n.previousEvent=r}};J._getDragThreshold=function(w){switch(w){case "touch":return this.movementUntilTouchDrag;case "pen":return this.movementUntilPenDrag;default:return this.movementUntilMouseDrag}};J.startDragging=function(w){const r=w.data,n=r.native.pointerId;this._pointerState.forEach(A=>{null!=A.holdTimeout&&(A.holdTimeout.remove(),A.holdTimeout=null);A.isDragging||(A.modifiers=w.modifiers,
A.isDragging=!0,n===A.startEvent.native.pointerId?this._pointerDrag.emit(this._createPointerDragData("start",A,r)):this._pointerDrag.emit(this._createPointerDragData("start",A,A.previousEvent),w.timestamp))})};J._handlePointerLoss=function(w,r){const n=w.data,A=n.native.pointerId,e=this._pointerState.get(A);e&&(null!=e.holdTimeout&&(e.holdTimeout.remove(),e.holdTimeout=null),e.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",e,"pointer-up"===r?n:e.previousEvent),void 0,e.modifiers):
"pointer-up"===r&&e.downButton===n.native.button&&w.timestamp-e.startTimestamp<=this.maximumClickDelay&&!e.holdEmitted&&this._immediateClick.emit(n),this._pointerState.delete(A),this.stopCapturingPointer(n.native),0===this._pointerState.size&&this._moveHandle.pause())};return H}(p.InputHandler);h.DefaultParameters=l;h.PointerClickHoldAndDrag=p;Object.defineProperty(h,"__esModule",{value:!0})})},"esri/views/2d/support/HighlightOptions":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../../core/Accessor ../../../Color".split(" "),
function(h,b,k,p,D,l,u,H,J,w,r,n,A){let e=0;k=function(d){function c(){var q=d.apply(this,arguments)||this;q.color=new A([0,255,255]);q.haloOpacity=1;q.fillOpacity=.25;return q}h._inheritsLoose(c,d);h._createClass(c,[{key:"version",get:function(){return e++}}]);return c}(n);b.__decorate([l.property({readOnly:!0})],k.prototype,"version",null);b.__decorate([l.property({type:A})],k.prototype,"color",void 0);b.__decorate([l.property({type:A})],k.prototype,"haloColor",void 0);b.__decorate([l.property()],
k.prototype,"haloOpacity",void 0);b.__decorate([l.property()],k.prototype,"fillOpacity",void 0);return k=b.__decorate([H.subclass("esri.views.2d.support.HighlightOptions")],k)})},"esri/views/support/WebGLRequirements":function(){define(["exports","../../core/Error","../webgl/capabilities"],function(h,b,k){const p={checkMajorWebPerformanceCaveat:!0};h.check=function(D){D={...p,...D};const l=k();return l.available?D.checkMajorWebPerformanceCaveat&&l.majorPerformanceCaveat?new b("webgl:major-performance-caveat-detected",
"Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist."):l.supportsHighPrecisionFragment?l.supportsVertexShaderSamplers?l.supportsElementIndexUint?l.supportsStandardDerivatives?l.supportsInstancedArrays?null:new b("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported."):new b("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported."):
new b("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported."):new b("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new b("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new b("webgl:required","WebGL is required but not supported.")};Object.defineProperty(h,"__esModule",{value:!0})})},"esri/views/webgl/capabilities":function(){define(["./context-util"],
function(h){function b(){const p={available:!1,version:0,majorPerformanceCaveat:!1,maxTextureSize:0,supportsHighPrecisionFragment:!1,supportsVertexShaderSamplers:!1,supportsElementIndexUint:!1,supportsStandardDerivatives:!1,supportsInstancedArrays:!1,supportsTextureFloat:!1,supportsColorBufferFloat:!1};var D=document.createElement("canvas");if(!D)return p;var l=h.createContext(D,{failIfMajorPerformanceCaveat:!0},"webgl");!l&&(l=h.createContext(D,{},"webgl"))&&(p.majorPerformanceCaveat=!0);if(!l)return p;
D=l.getParameter(l.VERSION);if(!D)return p;if(D=D.match(/^WebGL\s+([\d.]*)/)){D=parseFloat(D[1]);p.available=.94<=D;if(D=l.getShaderPrecisionFormat(l.FRAGMENT_SHADER,l.HIGH_FLOAT))p.supportsHighPrecisionFragment=0<D.precision;p.supportsVertexShaderSamplers=0<l.getParameter(l.MAX_VERTEX_TEXTURE_IMAGE_UNITS);p.supportsElementIndexUint=null!==l.getExtension("OES_element_index_uint");p.supportsStandardDerivatives=null!==l.getExtension("OES_standard_derivatives");p.supportsInstancedArrays=null!==l.getExtension("ANGLE_instanced_arrays");
p.supportsTextureFloat=null!==l.getExtension("OES_texture_float");p.supportsColorBufferFloat=null!==l.getExtension("WEBGL_color_buffer_float")&&null!==l.getExtension("EXT_float_blend")}p.maxTextureSize=l.getParameter(l.MAX_TEXTURE_SIZE);l=(l=document.createElement("canvas"))&&h.createContext(l,{},"webgl2")?!0:!1;p.version=l?2:1;return p}let k;return function(){k||(k=b());return k}})},"esri/views/webgl/context-util":function(){define(["exports"],function(h){function b(p,D={},l){switch(l){case "webgl":l=
["webgl","experimental-webgl","webkit-3d","moz-webgl"];break;case "webgl2":l=["webgl2"];break;default:l=["webgl","experimental-webgl","webkit-3d","moz-webgl"]}let u=null;for(const H of l){try{u=p.getContext(H,D)}catch(J){}if(u)break}return u}function k(p,D){(p=p.parentNode)&&(p.innerHTML='\x3ctable style\x3d"background-color: #8CE; width: 100%; height: 100%;"\x3e\x3ctr\x3e\x3ctd align\x3d"center"\x3e\x3cdiv style\x3d"display: table-cell; vertical-align: middle;"\x3e\x3cdiv style\x3d""\x3e'+D+"\x3c/div\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e")}
h.createContext=b;h.createContextOrErrorHTML=function(p,D={},l){if(!window.WebGLRenderingContext)return k(p,'This page requires a browser that supports WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org"\x3eClick here to upgrade your browser.\x3c/a\x3e'),null;D=b(p,D,l);return D?D:(k(p,'It doesn\'t appear your computer can support WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org/troubleshooting/"\x3eClick here for more information.\x3c/a\x3e'),null)};Object.defineProperty(h,"__esModule",{value:!0})})},
"esri/views/ui/2d/DefaultUI2D":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../DefaultUI".split(" "),function(h,b,k,p,D,l,u,H,J,w,r,n){k=function(A){function e(d){d=A.call(this,
d)||this;d.components=["attribution","zoom"];return d}h._inheritsLoose(e,A);return e}(n);b.__decorate([l.property()],k.prototype,"components",void 0);return k=b.__decorate([H.subclass("esri.views.ui.2d.DefaultUI2D")],k)})},"esri/views/ui/DefaultUI":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/watchUtils ./Component ./UI ../../widgets/Attribution ../../widgets/Compass ../../widgets/NavigationToggle ../../widgets/Zoom".split(" "),
function(h,b,k,p,D,l,u,H,J,w,r,n,A,e,d,c,q,E){p.getLogger("esri.views.ui.DefaultUI");k=function(z){function F(y){y=z.call(this,y)||this;y._defaultPositionLookup={attribution:"manual",compass:"top-leading","navigation-toggle":"top-leading",zoom:"top-leading"};y.components=[];return y}h._inheritsLoose(F,z);var B=F.prototype;B.initialize=function(){this._handles.add([n.init(this,"components",this._componentsWatcher.bind(this)),n.init(this,"view",this._updateViewAwareWidgets.bind(this))])};B._add=function(y,
v,m,t){if("string"===typeof y&&this._defaultPositionLookup[y]){if(this._find(y))return;y=this._createComponent(y)}z.prototype._add.call(this,y,v,m,t)};B._removeComponents=function(y){y.forEach(v=>{if(v=this._find(v))this.remove(v),v.destroy()})};B._updateViewAwareWidgets=function(y){this.components.forEach(v=>{(v=(v=this._find(v))&&v.widget)&&void 0!==v.view&&(v.view=y)})};B._componentsWatcher=function(y,v){this._removeComponents(v);this._addComponents(y);this._adjustPadding(y)};B._adjustPadding=
function(y){-1!==y.indexOf("attribution")||this._isOverridden("padding")||({top:y}=this.padding,this.padding=y)};B._addComponents=function(y){this.initialized&&y.forEach(v=>this.add(this._createComponent(v),this._defaultPositionLookup[v]))};B._createComponent=function(y){const v=this._createWidget(y);if(v)return new A({id:y,node:v})};B._createWidget=function(y){if("attribution"===y)return this._createAttribution();if("compass"===y)return this._createCompass();if("navigation-toggle"===y)return this._createNavigationToggle();
if("zoom"===y)return this._createZoom()};B._createAttribution=function(){return new d({view:this.view})};B._createCompass=function(){return new c({view:this.view})};B._createNavigationToggle=function(){return new q({view:this.view})};B._createZoom=function(){return new E({view:this.view})};return F}(e);b.__decorate([l.property()],k.prototype,"components",void 0);return k=b.__decorate([H.subclass("esri.views.ui.DefaultUI")],k)})},"esri/views/ui/Component":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/Accessor ../../core/domUtils".split(" "),
function(h,b,k,p,D,l,u,H,J,w,r,n,A){k=function(e){function d(){var q=e.apply(this,arguments)||this;q.widget=null;return q}h._inheritsLoose(d,e);var c=d.prototype;c.destroy=function(){this.widget&&this.widget.destroy();this.node=null};c.castNode=function(q){if(!q)return this._set("widget",null),null;if("string"===typeof q||q&&"nodeType"in q)return this._set("widget",null),A.byId(q);q&&"function"===typeof q.render&&!q.domNode&&(q.domNode=document.createElement("div"));this._set("widget",q);return q.domNode};
h._createClass(d,[{key:"id",get:function(){return this.get("widget.id")||this.get("node.id")}},{key:"node",set:function(q){const E=this._get("node");q!==E&&(q&&q.classList.add("esri-component"),E&&E.classList.remove("esri-component"),this._set("node",q))}}]);return d}(n);b.__decorate([D.property({dependsOn:[]})],k.prototype,"id",null);b.__decorate([D.property()],k.prototype,"node",null);b.__decorate([l.cast("node")],k.prototype,"castNode",null);b.__decorate([D.property({readOnly:!0})],k.prototype,
"widget",void 0);return k=b.__decorate([H.subclass("esri.views.ui.Component")],k)})},"esri/views/ui/UI":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/Evented ../../core/Handles ../../core/watchUtils ../../core/domUtils ../../widgets/support/widgetUtils ./Component".split(" "),
function(h,b,k,p,D,l,u,H,J,w,r,n,A,e,d,c,q){function E(y){return"object"!==typeof y||y instanceof q||"declaredClass"in y||!("component"in y||"index"in y||"position"in y)?null:y}function z(y,{top:v,bottom:m,left:t,right:L}){y.style.top=v;y.style.bottom=m;y.style.left=t;y.style.right=L}const F={left:0,top:0,bottom:0,right:0},B={bottom:30,top:15,right:15,left:15};k=function(y){function v(t){t=y.call(this,t)||this;t._cornerNameToContainerLookup={};t._positionNameToContainerLookup={};t._components=[];
t._componentToKey=new Map;t._handles=new A;t.view=null;t._initContainers();return t}h._inheritsLoose(v,y);var m=v.prototype;m.initialize=function(){this._handles.add([e.init(this,"view.padding, container",this._applyViewPadding.bind(this)),e.init(this,"padding",this._applyUIPadding.bind(this))])};m.destroy=function(){this.container=null;for(const t of this._components)t.destroy();this._components.length=0;this._handles.destroy();this._componentToKey.clear()};m.castPadding=function(t){return"number"===
typeof t?{bottom:t,top:t,right:t,left:t}:{...B,...t}};m.add=function(t,L){let K,N;if(Array.isArray(t))t.forEach(da=>this.add(da,L));else{var Y=E(t);Y&&({index:K,position:L,component:t,key:N}=Y);L&&"object"===typeof L&&({index:K,key:N,position:L}=L);!t||L&&!this._isValidPosition(L)||this._add(t,L,K,N)}};m.remove=function(t,L){if(t){if(Array.isArray(t))return t.map(Y=>this.remove(Y,L));var K=this._find(t);if(K){var N=this._componentToKey;if(!N.has(t)||N.get(t)===L)return N=this._components.indexOf(K),
K.node.parentNode&&K.node.parentNode.removeChild(K.node),this._componentToKey.delete(t),this._components.splice(N,1)[0]}}};m.empty=function(t){if(Array.isArray(t))return t.map(L=>this.empty(L)).reduce((L,K)=>L.concat(K));t=t||"manual";return"manual"===t?Array.prototype.slice.call(this._manualContainer.children).filter(L=>!L.classList.contains("esri-ui-corner")).map(L=>this.remove(L)):this._isValidPosition(t)?Array.prototype.slice.call(this._cornerNameToContainerLookup[t].children).map(this.remove,
this):null};m.move=function(t,L){Array.isArray(t)&&t.forEach(Y=>this.move(Y,L));if(t){var K=E(t)||E(L);if(K){var N=K.index;L=K.position;t=K.component||t}(!L||this._isValidPosition(L))&&(t=this.remove(t))&&this.add(t,{position:L,index:N})}};m.find=function(t){return t?(t=this._findById(t))&&(t.widget||t.node):null};m.getPosition=function(t){for(const L in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[L].contains(t))return L;return null};m._add=function(t,L,K,N){t instanceof
q||(t=new q({node:t}));this._place({component:t,position:L,index:K});this._components.push(t);N&&this._componentToKey.set(t,N)};m._find=function(t){return t?t instanceof q?this._findByComponent(t):"string"===typeof t?this._findById(t):this._findByNode(t.domNode||t):null};m._getViewPadding=function(){return this.get("view.padding")||F};m._attachContainers=function(t){t.appendChild(this._innerContainer);t.appendChild(this._manualContainer)};m._initContainers=function(){var t=document.createElement("div");
t.classList.add("esri-ui-inner-container");t.classList.add("esri-ui-corner-container");const L=document.createElement("div");L.classList.add("esri-ui-inner-container");L.classList.add("esri-ui-manual-container");const K=document.createElement("div");K.classList.add("esri-ui-top-left");K.classList.add("esri-ui-corner");t.appendChild(K);const N=document.createElement("div");N.classList.add("esri-ui-top-right");N.classList.add("esri-ui-corner");t.appendChild(N);const Y=document.createElement("div");
Y.classList.add("esri-ui-bottom-left");Y.classList.add("esri-ui-corner");t.appendChild(Y);const da=document.createElement("div");da.classList.add("esri-ui-bottom-right");da.classList.add("esri-ui-corner");t.appendChild(da);this._innerContainer=t;this._manualContainer=L;t=c.isRTL();this._cornerNameToContainerLookup={"top-left":K,"top-right":N,"bottom-left":Y,"bottom-right":da,"top-leading":t?N:K,"top-trailing":t?K:N,"bottom-leading":t?da:Y,"bottom-trailing":t?Y:da};this._positionNameToContainerLookup=
{manual:L,...this._cornerNameToContainerLookup}};m._isValidPosition=function(t){return!!this._positionNameToContainerLookup[t]};m._place=function(t){const L=t.component,K=t.index;t=this._positionNameToContainerLookup[t.position||"manual"];var N=-1<K,Y=L.widget;Y&&!Y._started&&"function"===typeof Y.postMixInProperties&&"function"===typeof Y.buildRendering&&"function"===typeof Y.postCreate&&"function"===typeof Y.startup&&L.widget.startup();N?(N=Array.prototype.slice.call(t.children),0===K?t.firstChild?
d.insertBefore(L.node,t.firstChild):t.appendChild(L.node):K>=N.length?t.appendChild(L.node):d.insertBefore(L.node,N[K])):t.appendChild(L.node)};m._applyViewPadding=function(){const t=this.container;t&&z(t,this._toPxPosition(this._getViewPadding()))};m._applyUIPadding=function(){const t=this._innerContainer;t&&z(t,this._toPxPosition(this.padding))};m._toPxPosition=function(t){return{top:this._toPxUnit(t.top),left:this._toPxUnit(t.left),right:this._toPxUnit(t.right),bottom:this._toPxUnit(t.bottom)}};
m._toPxUnit=function(t){return 0===t?"0":t+"px"};m._findByComponent=function(t){let L=null,K;this._components.some(N=>{(K=N===t)&&(L=N);return K});return L};m._findById=function(t){let L=null,K;this._components.some(N=>{(K=N.id===t)&&(L=N);return K});return L};m._findByNode=function(t){let L=null,K;this._components.some(N=>{(K=N.node===t)&&(L=N);return K});return L};h._createClass(v,[{key:"container",set:function(t){const L=this._get("container");t!==L&&(t&&(t.classList.add("esri-ui"),this._attachContainers(t)),
L&&(L.classList.remove("esri-ui"),z(L,{top:"",bottom:"",left:"",right:""}),d.empty(L)),this._set("container",t))}},{key:"height",get:function(){const t=this.get("view.height")||0;if(0===t)return t;const L=this._getViewPadding();return Math.max(t-(L.top+L.bottom),0)}},{key:"padding",get:function(){return this._get("padding")},set:function(t){t?this._override("padding",t):this._clearOverride("padding")}},{key:"width",get:function(){const t=this.get("view.width")||0;if(0===t)return t;const L=this._getViewPadding();
return Math.max(t-(L.left+L.right),0)}}]);return v}(n.EventedAccessor);b.__decorate([D.property()],k.prototype,"container",null);b.__decorate([D.property()],k.prototype,"height",null);b.__decorate([D.property({value:B})],k.prototype,"padding",null);b.__decorate([l.cast("padding")],k.prototype,"castPadding",null);b.__decorate([D.property()],k.prototype,"view",void 0);b.__decorate([D.property()],k.prototype,"width",null);return k=b.__decorate([H.subclass("esri.views.ui.UI")],k)})},"esri/widgets/Attribution":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/aliasOf ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/watchUtils ./support/widgetUtils ./support/decorators/accessibleHandler ./support/decorators/messageBundle ../chunks/index ./Widget ./Attribution/AttributionViewModel".split(" "),
function(h,b,k,p,D,l,u,H,J,w,r,n,A,e,d,c,q,E,z){k=function(F){function B(v,m){v=F.call(this,v,m)||this;v._isOpen=!1;v._attributionTextOverflowed=!1;v._prevSourceNodeHeight=0;v.iconClass="esri-icon-description";v.itemDelimiter=" | ";v.label=void 0;v.messages=null;v.view=null;v.viewModel=new z;return v}h._inheritsLoose(B,F);var y=B.prototype;y.initialize=function(){this.own(A.on(this,"viewModel.items","change",()=>this.scheduleRender()))};y.render=function(){return q.jsx("div",{bind:this,class:this.classes("esri-attribution esri-widget",
{["esri-attribution--open"]:this._isOpen}),onclick:this._toggleState,onkeydown:this._toggleState},this.renderSourcesNode(),this.renderPoweredBy())};y.renderPoweredBy=function(){return q.jsx("div",{class:"esri-attribution__powered-by"},"Powered by"," ",q.jsx("a",{class:this.classes("esri-attribution__link","esri-widget__anchor"),href:"http://www.esri.com/",target:"_blank",rel:"noreferrer"},"Esri"))};y.renderSourcesNode=function(){const v=this._isOpen,m=this._isInteractive(),t=m?0:-1,{attributionText:L}=
this,K=m?"button":void 0;return q.jsx("div",{afterCreate:this._afterSourcesNodeCreate,afterUpdate:this._afterSourcesNodeUpdate,bind:this,class:this.classes("esri-attribution__sources",{["esri-attribution__sources--open"]:v,["esri-interactive"]:m}),innerHTML:L,role:K,tabIndex:t})};y._afterSourcesNodeCreate=function(v){this._prevSourceNodeHeight=v.clientWidth};y._afterSourcesNodeUpdate=function(v){let m=!1;const {clientHeight:t,clientWidth:L,scrollWidth:K}=v;v=K>=L;const N=this._attributionTextOverflowed!==
v;this._attributionTextOverflowed=v;N&&(m=!0);this._isOpen&&(v=t<this._prevSourceNodeHeight,this._prevSourceNodeHeight=t,v&&(this._isOpen=!1,m=!0));m&&this.scheduleRender()};y._toggleState=function(){this._isInteractive()&&(this._isOpen=!this._isOpen)};y._isInteractive=function(){return this._isOpen||this._attributionTextOverflowed};h._createClass(B,[{key:"attributionText",get:function(){return this.viewModel.items.reduce((v,m)=>{-1===v.indexOf(m.text)&&v.push(m.text);return v},[]).join(this.itemDelimiter)}}]);
return B}(E);b.__decorate([l.property({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],k.prototype,"attributionText",null);b.__decorate([l.property()],k.prototype,"iconClass",void 0);b.__decorate([l.property()],k.prototype,"itemDelimiter",void 0);b.__decorate([l.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],k.prototype,"label",void 0);b.__decorate([l.property(),c.messageBundle("esri/widgets/Attribution/t9n/Attribution")],k.prototype,"messages",void 0);b.__decorate([u.aliasOf("viewModel.view")],
k.prototype,"view",void 0);b.__decorate([l.property({type:z})],k.prototype,"viewModel",void 0);b.__decorate([d.accessibleHandler()],k.prototype,"_toggleState",null);return k=b.__decorate([J.subclass("esri.widgets.Attribution")],k)})},"esri/widgets/Attribution/AttributionViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../geometry/SpatialReference ../../geometry/support/webMercatorUtils ../../geometry/support/contains ../../geometry ../../core/Collection ../../core/asyncUtils ../../core/watchUtils ../../core/HandleOwner".split(" "),
function(h,b,k,p,D,l,u,H,J,w,r,n,A,e,d,c,q,E,z){function F(m,t){return m&&"copyright"in m&&(!t||"function"===typeof m.originOf&&"user"===m.originOf("copyright"))}function B(m,t){return m.length!==t.length||m.some((L,K)=>L.text!==t[K].text)}function y(m,t,L){L&&t&&(m.find(K=>K.layerView===t&&K.text===L)||m.push({text:L,layerView:t}))}const v=[];k=function(m){function t(K){var N=m.call(this,K)||this;N.clear=()=>{N._fetchedAttributionData.clear();N._pendingAttributions.clear();N.handles.remove("suspension");
N.notifyChange("state")};N._pendingAttributions=new Set;N._fetchedAttributionData=new Map;N.items=new c;N.view=null;N._allLayerViewsChange=Y=>{N.handles.remove("suspension");const da=N.get("view.allLayerViews");da&&N.handles.add(da.map(fa=>fa.watch(["suspended","attributionVisible"],N._updateAttributionItems)),"suspension");Y&&Y.removed&&Y.removed.forEach(fa=>{N._pendingAttributions.delete(fa);N._fetchedAttributionData.delete(fa)});N._updateAttributionItems()};N._updateAttributionItems=()=>{const Y=
N.get("view.allLayerViews");v.length=0;Y?(Y.forEach(da=>{if(!da.suspended&&da.get("layer.attributionVisible")){var fa=da.layer;if(F(fa,"user"))y(v,da,fa.copyright);else if(fa.hasAttributionData)if(N._fetchedAttributionData.has(da)){var ka=N._fetchedAttributionData.get(da);ka?y(v,da,N._getDynamicAttribution(ka,N.view,fa)):F(fa)&&y(v,da,fa.copyright)}else N._fetchAttributionData(da);else(ka=fa.get("portalItem.accessInformation"))?y(v,da,ka):y(v,da,fa.copyright)}}),B(N.items,v)&&(N.items.removeAll(),
N.items.addMany(v)),v.length=0,N.notifyChange("state")):N.clear()};N.handles.add([E.on(h._assertThisInitialized(N),"view.allLayerViews","change",N._allLayerViewsChange,N._allLayerViewsChange,N.clear),E.whenTrue(h._assertThisInitialized(N),"view.stationary",()=>N._updateAttributionItems())]);return N}h._inheritsLoose(t,m);var L=t.prototype;L.destroy=function(){this.view=null;this._fetchedAttributionData.clear();this._pendingAttributions.clear();this.items.removeAll()};L._fetchAttributionData=async function(K){if(!this._pendingAttributions.has(K)){this._pendingAttributions.add(K);
var N=await q.result(K.layer.fetchAttributionData());this._pendingAttributions.has(K)&&(N=N.ok?this._createContributionIndex(N.value,"bing-maps"===K.layer.type):null,this._pendingAttributions.delete(K),this._fetchedAttributionData.set(K,N));this._updateAttributionItems()}};L._createContributionIndex=function(K,N){K=K.contributors;const Y={};if(!K)return Y;for(let x=0;x<K.length;x++){const G=K[x];var da=G.coverageAreas;if(!da)return;for(const V of da){var fa=V.bbox,ka=V.zoomMin-(N&&V.zoomMin?1:0);
da=V.zoomMax-(N&&V.zoomMax?1:0);for(fa={extent:A.geographicToWebMercator({xmin:fa[1],ymin:fa[0],xmax:fa[3],ymax:fa[2],spatialReference:n.WGS84}),attribution:G.attribution||"",score:null!=V.score?V.score:100,id:x};ka<=da;ka++)Y[ka]=Y[ka]||[],Y[ka].push(fa)}}Y.maxKey=Math.max.apply(null,Object.keys(Y));return Y};L._getDynamicAttribution=function(K,N,Y){const {extent:da,scale:fa}=N;Y=Y.tileInfo.scaleToZoom(fa);Y=Math.min(K.maxKey,Math.round(Y));if(!da||null==Y||-1>=Y)return"";K=K[Y];const ka=A.project(da.center.clone().normalize(),
N.spatialReference),x={};return K?K.filter(G=>{const V=!x[G.id]&&ka&&e.extentContainsPoint(G.extent,ka);V&&(x[G.id]=!0);return V}).sort((G,V)=>V.score-G.score||G.objectId-V.objectId).map(G=>G.attribution).join(", "):""};h._createClass(t,[{key:"state",get:function(){return this.get("view.ready")?0<this._pendingAttributions.size?"loading":"ready":"disabled"}}]);return t}(z.HandleOwner);b.__decorate([l.property({readOnly:!0,type:c})],k.prototype,"items",void 0);b.__decorate([l.property({readOnly:!0})],
k.prototype,"state",null);b.__decorate([l.property()],k.prototype,"view",void 0);return k=b.__decorate([H.subclass("esri.widgets.Attribution.AttributionViewModel")],k)})},"esri/widgets/Compass":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/aliasOf ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ./support/widgetUtils ./support/decorators/accessibleHandler ./support/decorators/messageBundle ../chunks/index ./Widget ./Compass/CompassViewModel".split(" "),
function(h,b,k,p,D,l,u,H,J,w,r,n,A,e,d,c,q,E){k=function(z){function F(y,v){y=z.call(this,y,v)||this;y.goToOverride=null;y.iconClass="esri-icon-locate-circled";y.label=void 0;y.messages=null;y.view=null;y.viewModel=new E;return y}h._inheritsLoose(F,z);var B=F.prototype;B.reset=function(){return this.viewModel.reset()};B.render=function(){const {orientation:y,state:v}=this.viewModel;var m="disabled"===v,t="compass"===("rotation"===v?"rotation":"compass");const L=m?-1:0;m={["esri-disabled"]:m,["esri-interactive"]:!m};
t={["esri-icon-compass"]:t,["esri-icon-dial"]:!t};const {messages:K}=this;return c.jsx("div",{bind:this,class:this.classes("esri-compass esri-widget--button esri-widget",m),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:L,"aria-label":K.reset,title:K.reset},c.jsx("span",{"aria-hidden":"true",class:this.classes("esri-compass__icon",t),styles:this._toRotationTransform(y)}),c.jsx("span",{class:"esri-icon-font-fallback-text"},K.reset))};B._reset=function(){this.viewModel.reset()};B._toRotationTransform=
function(y){return{transform:`rotateZ(${y.z}deg)`}};return F}(q);b.__decorate([u.aliasOf("viewModel.goToOverride")],k.prototype,"goToOverride",void 0);b.__decorate([l.property()],k.prototype,"iconClass",void 0);b.__decorate([l.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],k.prototype,"label",void 0);b.__decorate([l.property(),d.messageBundle("esri/widgets/Compass/t9n/Compass")],k.prototype,"messages",void 0);b.__decorate([u.aliasOf("viewModel.view")],k.prototype,"view",void 0);
b.__decorate([l.property({type:E})],k.prototype,"viewModel",void 0);b.__decorate([e.accessibleHandler()],k.prototype,"_reset",null);return k=b.__decorate([J.subclass("esri.widgets.Compass")],k)})},"esri/widgets/Compass/CompassViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/Accessor ../../core/Handles ../../core/watchUtils ../support/GoTo".split(" "),
function(h,b,k,p,D,l,u,H,J,w,r,n,A,e,d){k=function(c){function q(z){z=c.call(this,z)||this;z._handles=new A;z.orientation={x:0,y:0,z:0};z.view=null;z._updateForCamera=z._updateForCamera.bind(h._assertThisInitialized(z));z._updateForRotation=z._updateForRotation.bind(h._assertThisInitialized(z));z._updateRotationWatcher=z._updateRotationWatcher.bind(h._assertThisInitialized(z));return z}h._inheritsLoose(q,c);var E=q.prototype;E.initialize=function(){this._handles.add(e.init(this,"view",this._updateRotationWatcher))};
E.destroy=function(){this._handles.destroy();this.view=this._handles=null};E.reset=function(){if(this.get("view.ready")){var z={};"2d"===this.view.type?z.rotation=0:z.heading=0;this.callGoTo({target:z})}};E._updateForRotation=function(z){void 0!==z&&null!==z&&(this.orientation={z})};E._updateForCamera=function(z){z&&(this.orientation={x:0,y:0,z:-z.heading})};E._updateRotationWatcher=function(z){this._handles.removeAll();z&&("2d"===z.type?this._handles.add(e.init(this,"view.rotation",this._updateForRotation)):
this._handles.add(e.init(this,"view.camera",this._updateForCamera)))};h._createClass(q,[{key:"canShowNorth",get:function(){const z=this.get("view.spatialReference");return!(!z||!z.isWebMercator&&!z.isGeographic)}},{key:"state",get:function(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"}}]);return q}(d.GoToMixin(n));b.__decorate([l.property({readOnly:!0})],k.prototype,"canShowNorth",null);b.__decorate([l.property()],k.prototype,"orientation",void 0);b.__decorate([l.property({readOnly:!0})],
k.prototype,"state",null);b.__decorate([l.property()],k.prototype,"view",void 0);return k=b.__decorate([H.subclass("esri.widgets.CompassViewModel")],k)})},"esri/widgets/NavigationToggle":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/aliasOf ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ./support/widgetUtils ./support/decorators/accessibleHandler ./support/decorators/messageBundle ../chunks/index ./Widget ./NavigationToggle/NavigationToggleViewModel".split(" "),
function(h,b,k,p,D,l,u,H,J,w,r,n,A,e,d,c,q,E){k=function(z){function F(y,v){y=z.call(this,y,v)||this;y.iconClass="esri-icon-pan2";y.label=void 0;y.messages=null;y.view=null;y.viewModel=new E;return y}h._inheritsLoose(F,z);var B=F.prototype;B.toggle=function(){return this.viewModel.toggle()};B.render=function(){const y="disabled"===this.get("viewModel.state");var v="pan"===this.get("viewModel.navigationMode");const m={["esri-navigation-toggle__button--active"]:v};v={["esri-navigation-toggle__button--active"]:!v};
const t=y?-1:0,L=this.messages.toggle;return c.jsx("div",{bind:this,class:this.classes("esri-navigation-toggle esri-widget",{["esri-disabled"]:y,["esri-navigation-toggle--horizontal"]:"horizontal"===this.layout}),onclick:this._toggle,onkeydown:this._toggle,tabIndex:t,"aria-label":L,title:L},c.jsx("div",{class:this.classes("esri-navigation-toggle__button esri-widget--button","esri-navigation-toggle__button--pan",m)},c.jsx("span",{class:"esri-icon-pan"})),c.jsx("div",{class:this.classes("esri-navigation-toggle__button esri-widget--button",
"esri-navigation-toggle__button--rotate",v)},c.jsx("span",{class:"esri-icon-rotate"})))};B._toggle=function(){this.toggle()};h._createClass(F,[{key:"layout",set:function(y){"horizontal"!==y&&(y="vertical");this._set("layout",y)}}]);return F}(q);b.__decorate([l.property()],k.prototype,"iconClass",void 0);b.__decorate([l.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],k.prototype,"label",void 0);b.__decorate([l.property({value:"vertical"})],k.prototype,"layout",null);b.__decorate([l.property(),
d.messageBundle("esri/widgets/NavigationToggle/t9n/NavigationToggle")],k.prototype,"messages",void 0);b.__decorate([u.aliasOf("viewModel.view")],k.prototype,"view",void 0);b.__decorate([l.property({type:E})],k.prototype,"viewModel",void 0);b.__decorate([e.accessibleHandler()],k.prototype,"_toggle",null);return k=b.__decorate([J.subclass("esri.widgets.NavigationToggle")],k)})},"esri/widgets/NavigationToggle/NavigationToggleViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/Accessor ../../core/Handles ../../core/watchUtils".split(" "),
function(h,b,k,p,D,l,u,H,J,w,r,n,A,e){k=function(d){function c(E){E=d.call(this,E)||this;E._handles=new A;E.navigationMode="pan";E.view=null;return E}h._inheritsLoose(c,d);var q=c.prototype;q.initialize=function(){this._handles.add(e.when(this,"view.inputManager",this._setNavigationMode.bind(this)))};q.destroy=function(){this._handles.destroy();this.view=this._handles=null};q.toggle=function(){"disabled"!==this.state&&(this.navigationMode="pan"!==this.navigationMode?"pan":"rotate",this._setNavigationMode())};
q._setNavigationMode=function(){this.get("view.inputManager").primaryDragAction="pan"===this.navigationMode?"pan":"rotate"};h._createClass(c,[{key:"state",get:function(){return this.get("view.ready")&&"3d"===this.view.type?"ready":"disabled"}}]);return c}(n);b.__decorate([l.property({readOnly:!0})],k.prototype,"state",null);b.__decorate([l.property()],k.prototype,"navigationMode",void 0);b.__decorate([l.property()],k.prototype,"view",void 0);return k=b.__decorate([H.subclass("esri.widgets.NavigationToggleViewModel")],
k)})},"esri/widgets/Zoom":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/aliasOf ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ./support/widgetUtils ./support/decorators/messageBundle ../chunks/index ./Widget ./Zoom/IconButton ./Zoom/ZoomViewModel".split(" "),
function(h,b,k,p,D,l,u,H,J,w,r,n,A,e,d,c,q,E){k=function(z){function F(y,v){y=z.call(this,y,v)||this;y.iconClass="esri-icon-zoom-in-magnifying-glass";y.label=void 0;y.messages=null;y.view=null;y.viewModel=new E;return y}h._inheritsLoose(F,z);var B=F.prototype;B.initialize=function(){this._zoomInButton=new q({action:this.zoomIn.bind(this),iconClass:"esri-icon-plus"});this._zoomOutButton=new q({action:this.zoomOut.bind(this),iconClass:"esri-icon-minus"})};B.destroy=function(){this._zoomInButton.destroy();
this._zoomOutButton.destroy();this._zoomOutButton=this._zoomInButton=null};B.render=function(){const y=this.viewModel,v={["esri-zoom--horizontal"]:"horizontal"===this.layout};this._zoomInButton.enabled="ready"===y.state&&y.canZoomIn;this._zoomOutButton.enabled="ready"===y.state&&y.canZoomOut;this._zoomInButton.title=this.messages.zoomIn;this._zoomOutButton.title=this.messages.zoomOut;return d.jsx("div",{class:this.classes("esri-zoom esri-widget",v)},this._zoomInButton.render(),this._zoomOutButton.render())};
B.zoomIn=function(){return this.viewModel.zoomIn()};B.zoomOut=function(){return this.viewModel.zoomOut()};h._createClass(F,[{key:"layout",set:function(y){"horizontal"!==y&&(y="vertical");this._set("layout",y)}}]);return F}(c);b.__decorate([l.property()],k.prototype,"iconClass",void 0);b.__decorate([l.property({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],k.prototype,"label",void 0);b.__decorate([l.property({value:"vertical"})],k.prototype,"layout",null);b.__decorate([l.property(),e.messageBundle("esri/widgets/Zoom/t9n/Zoom")],
k.prototype,"messages",void 0);b.__decorate([u.aliasOf("viewModel.view")],k.prototype,"view",void 0);b.__decorate([l.property({type:E})],k.prototype,"viewModel",void 0);return k=b.__decorate([J.subclass("esri.widgets.Zoom")],k)})},"esri/widgets/Zoom/IconButton":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../support/widgetUtils ../support/decorators/accessibleHandler ../../chunks/index ../Widget".split(" "),
function(h,b,k,p,D,l,u,H,J,w,r,n,A,e,d){k=function(c){function q(){var z=c.apply(this,arguments)||this;z.enabled=!0;z.iconClass="";z.title="";return z}h._inheritsLoose(q,c);var E=q.prototype;E.render=function(){const z=this.enabled?0:-1,F={[this.iconClass]:!!this.iconClass};return e.jsx("div",{bind:this,class:this.classes("esri-widget--button esri-widget",{["esri-disabled"]:!this.enabled,["esri-interactive"]:this.enabled}),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:z,
title:this.title},e.jsx("span",{"aria-hidden":"true",role:"presentation",class:this.classes("esri-icon",F)}),e.jsx("span",{class:"esri-icon-font-fallback-text"},this.title))};E._triggerAction=function(){this.action.call(this)};return q}(d);b.__decorate([l.property()],k.prototype,"action",void 0);b.__decorate([l.property()],k.prototype,"enabled",void 0);b.__decorate([l.property()],k.prototype,"iconClass",void 0);b.__decorate([l.property()],k.prototype,"title",void 0);b.__decorate([A.accessibleHandler()],
k.prototype,"_triggerAction",null);return k=b.__decorate([H.subclass("esri.widgets.IconButton")],k)})},"esri/widgets/Zoom/ZoomViewModel":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/promiseUtils ../../core/Accessor ./ZoomConditions2D ./ZoomConditions3D".split(" "),
function(h,b,k,p,D,l,u,H,J,w,r,n,A,e,d){k=function(c){function q(z){z=c.call(this,z)||this;z.canZoomIn=!1;z.canZoomOut=!1;return z}h._inheritsLoose(q,c);var E=q.prototype;E.destroy=function(){this.view=null};E.zoomIn=function(){if(this.canZoomIn){var z=this.view;"2d"===z.type?z.mapViewNavigation.zoomIn():n.ignoreAbortErrors(z.goTo({zoomFactor:2}))}};E.zoomOut=function(){if(this.canZoomOut){var z=this.view;"2d"===z.type?z.mapViewNavigation.zoomOut():n.ignoreAbortErrors(z.goTo({zoomFactor:.5}))}};h._createClass(q,
[{key:"state",get:function(){return this.get("view.ready")?"ready":"disabled"}},{key:"view",set:function(z){z?"2d"===z.type?this._zoomConditions=new e({view:z}):"3d"===z.type&&(this._zoomConditions=new d({view:z})):this._zoomConditions=null;this._set("view",z)}}]);return q}(A);b.__decorate([l.property()],k.prototype,"_zoomConditions",void 0);b.__decorate([l.property({aliasOf:"_zoomConditions.canZoomIn",readOnly:!0})],k.prototype,"canZoomIn",void 0);b.__decorate([l.property({aliasOf:"_zoomConditions.canZoomOut",
readOnly:!0})],k.prototype,"canZoomOut",void 0);b.__decorate([l.property({readOnly:!0})],k.prototype,"state",null);b.__decorate([l.property()],k.prototype,"view",null);return k=b.__decorate([H.subclass("esri.widgets.Zoom.ZoomViewModel")],k)})},"esri/widgets/Zoom/ZoomConditions2D":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/Accessor".split(" "),
function(h,b,k,p,D,l,u,H,J,w,r,n){k=function(A){function e(){return A.apply(this,arguments)||this}h._inheritsLoose(e,A);h._createClass(e,[{key:"canZoomIn",get:function(){if(!this.get("view.ready"))return!1;const d=this.get("view.animation.target.scale")||this.get("view.scale"),c=this.get("view.constraints.effectiveMaxScale");return 0===c||d>c}},{key:"canZoomOut",get:function(){if(!this.get("view.ready"))return!1;const d=this.get("view.animation.target.scale")||this.get("view.scale"),c=this.get("view.constraints.effectiveMinScale");
return 0===c||d<c}}]);return e}(n);b.__decorate([l.property({readOnly:!0})],k.prototype,"canZoomIn",null);b.__decorate([l.property({readOnly:!0})],k.prototype,"canZoomOut",null);b.__decorate([l.property()],k.prototype,"view",void 0);return k=b.__decorate([H.subclass("esri.widgets.Zoom.ZoomConditions2D")],k)})},"esri/widgets/Zoom/ZoomConditions3D":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/Accessor".split(" "),
function(h,b,k,p,D,l,u,H,J,w,r,n){k=function(A){function e(){return A.apply(this,arguments)||this}h._inheritsLoose(e,A);h._createClass(e,[{key:"canZoomIn",get:function(){return!!this.get("view.ready")}},{key:"canZoomOut",get:function(){return!!this.get("view.ready")}}]);return e}(n);b.__decorate([l.property({readOnly:!0})],k.prototype,"canZoomIn",null);b.__decorate([l.property({readOnly:!0})],k.prototype,"canZoomOut",null);b.__decorate([l.property()],k.prototype,"view",void 0);return k=b.__decorate([H.subclass("esri.widgets.Zoom.ZoomConditions3D")],
k)})},"*noref":1}});
define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/maybe ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/Error ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/Collection ../Graphic ../core/CollectionFlattener ../core/watchUtils ../webmap/background/ColorBackground ../core/workers/workers ./support/screenshotUtils ./BreakpointsOwner ./DOMContainer ./support/screenUtils ./MapViewBase ./2d/input/MapViewInputManager ./2d/support/HighlightOptions ./support/WebGLRequirements ./ui/2d/DefaultUI2D".split(" "),function(h,
b,k,p,D,l,u,H,J,w,r,n,A,e,d,c,q,E,z,F,B,y,v,m,t,L,K,N,Y){async function da(){const [,{GraphicsView2D:W,GraphicContainer:ja,LabelManager:ma,MapViewNavigation:ca,MagnifierView2D:U,Stage:aa}]=await Promise.all([new Promise(function(sa,la){h(["./webgl"],sa,la)}),new Promise(function(sa,la){h(["./2d/mapViewDeps"],sa,la)})]);G=W;V=ja;na=ma;R=ca;S=U;x=aa}function fa(W,ja,ma){W&&(Array.isArray(W)||d.isCollection(W)?0!==W.length&&W.forEach(ca=>fa(ca,ja,ma)):W instanceof c?ja.add(W):ma.add(W))}const ka=l.getLogger("esri.views.MapView");
let x,G,V,na,R,S;l=function(W){function ja(ca){ca=W.call(this,ca)||this;ca._magnifierView=null;ca._stage=null;ca._resolveWhenReady=[];ca.rootLayerViews=new q({root:b._assertThisInitialized(ca),rootCollectionNames:["basemapView.baseLayerViews","layerViews","basemapView.referenceLayerViews"],getChildrenFunction:U=>null});ca.floors=new d;ca.graphicsView=null;ca.highlightOptions=new K;ca.inputManager=new L({view:b._assertThisInitialized(ca)});ca.mapViewNavigation=null;ca.supersampleScreenhotsEnabled=
!0;ca.ui=new Y;ca.rendering=!1;F.initialize();return ca}b._inheritsLoose(ja,W);var ma=ja.prototype;ma.destroy=function(){this.rootLayerViews.destroy();this.inputManager.destroy();this._set("inputManager",null)};ma.toMap=function(ca){return m.isSupportedScreenPointEvent(ca)?(ca=m.createScreenPointFromSupportedEvent(this,ca),W.prototype.toMap.call(this,ca)):W.prototype.toMap.call(this,ca)};ma.hitTest=function(ca,U){const aa=m.isSupportedScreenPointEvent(ca)?m.createScreenPointFromSupportedEvent(this,
ca):ca;if(!this.ready||isNaN(aa.x)||isNaN(aa.y))return Promise.resolve({screenPoint:aa,results:[]});const sa=this.toMap(aa);ca=[this.graphicsView];ca.push.apply(ca,this.allLayerViews.toArray().reverse());const la=new Set,a=new Set,f=new Set,g=new Set;U&&(fa(U&&U.include,la,f),fa(U&&U.exclude,a,g));return Promise.all(ca.map(C=>!C||!C.hitTest||0<f.size&&!C.layer||0<f.size&&C.layer&&!f.has(C.layer)||0<g.size&&C.layer&&g.has(C.layer)?null:C.hitTest(aa.x,aa.y))).then(C=>({screenPoint:aa,results:C.filter(I=>
null!=I&&(0<la.size?la.has(I):!0)&&(0<a.size?!a.has(I):!0)).map(I=>({mapPoint:sa,graphic:I}))}))};ma.takeScreenshot=function(ca){return this.ready?this._stage.takeScreenshot(B.toRenderSettings(ca,this),this.allLayerViews):Promise.reject("Map view cannot be used before it is ready")};ma.on=function(ca,U,aa,sa){return(aa=this.inputManager&&this.viewEvents.on(ca,U,aa,sa))?aa:W.prototype.on.call(this,ca,U)};ma.hasEventListener=function(ca){return W.prototype.hasEventListener.call(this,ca)||this.viewEvents.hasHandler(ca)};
ma.whenLayerView=function(ca){return W.prototype.whenLayerView.call(this,ca)};ma.graphicChanged=function(ca){this.graphicsView&&this.graphicsView.graphicUpdateHandler(ca)};ma.whenReady=function(){return new Promise(ca=>{this.ready?ca(this):this._resolveWhenReady.push(ca)})};ma.forceDOMReadyCycle=function(){this.forceReadyCycle()};ma.validate=function(){let ca=N.check({checkMajorWebPerformanceCaveat:!1});p("safari")&&9>p("safari")&&(ca=new r("mapview:browser-not-supported","This browser is not supported by MapView (Safari \x3c 9)",
{type:"safari",requiredVersion:9,detectedVersion:p("safari")}));return D.isSome(ca)?(ka.warn("#validate()",ca.message),Promise.reject(ca)):da()};ma._startup=function(){this.timeline.begin("MapView Startup");W.prototype._startup.call(this);this.graphics.owner=this;const ca=new x(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenhotsEnabled,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,
timeline:this.timeline});var U=new G({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new V(this.featuresTilingScheme)});const aa=new R({view:this,animationManager:this.animationManager}),sa=new na({view:this});this._magnifierView=new S;this._magnifierView.magnifier=this.magnifier;this._stage=ca;this.frameTask.graphicsView=U;this._set("graphicsView",U);this._set("mapViewNavigation",aa);this._set("labelManager",sa);this.handles.add([this.rootLayerViews.on("change",
()=>this._updateStageChildren()),ca.on("post-render",()=>this._set("rendering",ca.renderRequested)),ca.on("will-render",()=>this._set("rendering",ca.renderRequested)),ca.on("webgl-error",la=>this.fatalError=la.error),E.init(this,"stationary",la=>ca.stationary=la,!0),E.init(this,"state.id",()=>ca.state=this.state,!0),E.init(this,"background",la=>{ca.background=la;this._magnifierView.background=la},!0),E.init(this,"magnifier",la=>this._magnifierView.magnifier=la,!0),E.init(this,"renderingOptions",la=>
ca.renderingOptions=la,!0),E.init(this,"highlightOptions",()=>ca.highlightOptions=this.highlightOptions,!0)],"map-view");ca.state=this.state;this._updateStageChildren();U=this._resolveWhenReady;this._resolveWhenReady=[];U.forEach(la=>la(this));this.timeline.end("MapView Startup")};ma._teardown=function(){this.handles.remove("map-view");this.layerViewManager.clear();this.labelManager.destroy();this._magnifierView.destroy();this._stage.destroy();this.graphicsView.destroy();this.mapViewNavigation.destroy();
this._stage=null;this._set("graphicsView",null);this._magnifierView=null;this._set("labelManager",null);this._set("mapViewNavigation",null);this.graphics.owner=null;W.prototype._teardown.call(this)};ma._updateStageChildren=function(){this._stage.removeAllChildren();this.rootLayerViews.forEach(ca=>{this._stage.addChild(ca.container)});this._stage.addChild(this.graphicsView.container);this._stage.addChild(this._magnifierView)};b._createClass(ja,[{key:"background",get:function(){return this.get("map.initialViewProperties.background")||
null},set:function(ca){void 0===ca?this._clearOverride("background"):this._override("background",ca)}},{key:"textureManager",get:function(){return this._stage.painter.textureManager}},{key:"navigating",get:function(){return!(!this.mapViewNavigation||!this.mapViewNavigation.interacting)}}]);return ja}(y.BreakpointsOwner(v.DOMContainer(t)));k.__decorate([H.property({type:z})],l.prototype,"background",null);k.__decorate([H.property()],l.prototype,"floors",void 0);k.__decorate([H.property()],l.prototype,
"graphicsView",void 0);k.__decorate([H.property({type:K})],l.prototype,"highlightOptions",void 0);k.__decorate([H.property({readOnly:!0})],l.prototype,"inputManager",void 0);k.__decorate([H.property({readOnly:!0})],l.prototype,"textureManager",null);k.__decorate([H.property({readOnly:!0})],l.prototype,"mapViewNavigation",void 0);k.__decorate([H.property({type:Boolean})],l.prototype,"navigating",null);k.__decorate([H.property({type:Boolean,constructOnly:!0})],l.prototype,"supersampleScreenhotsEnabled",
void 0);k.__decorate([H.property({type:Y})],l.prototype,"ui",void 0);k.__decorate([H.property({readOnly:!0})],l.prototype,"rendering",void 0);k.__decorate([H.property({constructOnly:!0})],l.prototype,"renderCanvas",void 0);k.__decorate([H.property({constructOnly:!0})],l.prototype,"deactivatedWebGLExtensions",void 0);k.__decorate([H.property({constructOnly:!0})],l.prototype,"debugWebGLExtensions",void 0);return l=k.__decorate([w.subclass("esri.views.MapView")],l)});