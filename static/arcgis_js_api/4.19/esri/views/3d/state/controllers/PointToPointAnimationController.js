// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.19/esri/copyright.txt for details.
//>>built
define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/has ../../../../core/Logger ../../../../core/accessorSupport/ensureType ../../../../core/accessorSupport/decorators/property ../../../../core/jsonMap ../../../../core/accessorSupport/decorators/subclass ../../../../core/urlUtils ../../../../core/uuid ../../../../portal/support/resourceExtension ../../../../chunks/vec3f64 ../../../ViewAnimation ../../webgl-engine/lib/Intersector ../../webgl-engine/lib/Camera ../../animation/pointToPoint/Animation ./AnimationController".split(" "),
function(b,k,h,x,y,z,l,A,n,B,C,D,p,q,r,t,u,v){b.PointToPointAnimationController=function(e){function f(a){a=e.call(this,a)||this;a.view=null;a.mode="interaction";a.hasTarget=!1;return a}k._inheritsLoose(f,e);var c=f.prototype;c.initialize=function(){this.animation=new u.Animation(this.view.state.mode);this.viewAnimation="interaction"===this.mode?null:new q};c.begin=function(a,d){this.hasTarget=!0;d=this.animationSettings(d);g.copyFrom(this.view.state.camera);const w=new r.Intersector(this.view.state.mode);
this.intersectionHelper.intersectRay(g.ray,w,m)&&(g.center=m);this.animation.update(g,a,d);this.animation.finished&&this.finish()};c.finish=function(){this.animation.currentTime=this.animation.time;e.prototype.finish.call(this)};c.stepController=function(a,d){this.hasTarget&&this.animation.step(a,d)};c.onControllerEnd=function(a){this.hasTarget&&(this.animation.cameraAt(this.animation.currentTime/this.animation.time,a),this.animation.currentTime=this.animation.time);e.prototype.onControllerEnd.call(this,
a)};c.animationSettings=function(a={}){return{apex:{maximumDistance:this.view.state.constraints.clampAltitude(Infinity)/6,ascensionFactor:void 0,descensionFactor:void 0},speedFactor:a.speedFactor,duration:a.duration,maxDuration:a.maxDuration,easing:a.easing}};k._createClass(f,[{key:"intersectionHelper",get:function(){return this.view.sceneIntersectionHelper}},{key:"isInteractive",get:function(){return"interaction"===this.mode}},{key:"steppingFinished",get:function(){return this.hasTarget&&this.animation.finished}}]);
return f}(v.AnimationController);h.__decorate([l.property({constructOnly:!0})],b.PointToPointAnimationController.prototype,"view",void 0);h.__decorate([l.property({constructOnly:!0})],b.PointToPointAnimationController.prototype,"mode",void 0);b.PointToPointAnimationController=h.__decorate([n.subclass("esri.views.3d.state.controllers.PointToPointAnimationController")],b.PointToPointAnimationController);const g=new t,m=p.create();Object.defineProperty(b,"__esModule",{value:!0})});