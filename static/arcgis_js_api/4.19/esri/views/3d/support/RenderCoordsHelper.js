// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.19/esri/copyright.txt for details.
//>>built
define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/SpatialReference ../../../chunks/vec3 ../../../core/unitUtils ../../../chunks/mat4 ../../../geometry/projection ../../../layers/graphics/dehydratedFeatures ./stack ./geometryUtils ./geometryUtils/coordinateSystem".split(" "),function(l,p,q,r,m,t,u,h,n,k,v,d){let w=function(){function f(a,b,c,g){this.viewingMode=a;this.spatialReference=b;this.unitInMeters=c;this.coordinateSystem=g;this._coordinateSystem=
d.create(g)}var e=f.prototype;e.getAltitude=function(a){return d.altitudeAt(this.coordinateSystem,a)};e.setAltitude=function(a,b){d.setAltitudeAt(this.coordinateSystem,b,a,b)};e.setAltitudeOfTransformation=function(a,b){d.setAltitudeOfTransformation(this.coordinateSystem,b,a,b)};e.worldUpAtPosition=function(a,b){return d.normalAt(this.coordinateSystem,a,b)};e.worldBasisAtPosition=function(a,b,c){return d.axisAt(this.coordinateSystem,a,b,c)};e.basisMatrixAtPosition=function(a,b){const c=this.worldBasisAtPosition(a,
0,k.sv3d.get()),g=this.worldBasisAtPosition(a,1,k.sv3d.get());a=this.worldBasisAtPosition(a,2,k.sv3d.get());u.set(b,c[0],c[1],c[2],0,g[0],g[1],g[2],0,a[0],a[1],a[2],0,0,0,0,1);return b};e.intersectManifoldClosestSilhouette=function(a,b,c){d.elevate(this.coordinateSystem,b,this._coordinateSystem);d.intersectRayClosestSilhouette(this._coordinateSystem,a,c);return c};e.intersectManifold=function(a,b,c){d.elevate(this.coordinateSystem,b,this._coordinateSystem);b=k.sv3d.get();return d.intersectRay(this._coordinateSystem,
a,b)?(m.copy(c,b),!0):!1};e.intersectInfiniteManifold=function(a,b,c){if(1===this.viewingMode)return this.intersectManifold(a,b,c);d.elevate(this.coordinateSystem,b,this._coordinateSystem);b=this._coordinateSystem.value;const g=k.sv3d.get();return v.plane.intersectRay(b.plane,a,g)?(m.copy(c,g),!0):!1};e.toRenderCoords=function(a,b,c){return n.isDehydratedPoint(a)?h.projectPointToVector(a,b,this.spatialReference):h.projectVectorToVector(a,b,c,this.spatialReference)};e.fromRenderCoords=function(a,b,
c=null){return n.isDehydratedPoint(b)?(q.isSome(c)&&(b.spatialReference=c),h.projectVectorToDehydratedPoint(a,this.spatialReference,b)):b instanceof r?h.projectVectorToPoint(a,this.spatialReference,b):h.projectVectorToVector(a,this.spatialReference,b,c)?b:null};f.createGlobal=function(a){return new f(1,a,1,d.createGlobal(a))};f.createLocal=function(a){return new f(2,a,t.getMetersPerUnitForSR(a),d.createLocal())};f.createMode=function(a,b){switch(a){case 2:return f.createLocal(b);case 1:return f.createGlobal(b)}};
p._createClass(f,[{key:"extent",set:function(a){a&&d.setExtent(this.coordinateSystem,a,this.coordinateSystem)}}]);return f}();l.RenderCoordsHelper=w;Object.defineProperty(l,"__esModule",{value:!0})});