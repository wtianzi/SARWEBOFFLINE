// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.19/esri/copyright.txt for details.
//>>built
define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../geometry/SpatialReference ../../../Graphic ../../support/Scheduler ../../../layers/support/Field ../../../core/workers/WorkerHandle".split(" "),function(h,l,k,m,n,p,q){let t=function(){function e(a){this._handle=new r(a);this._frameTask=a.registerTask(n.Task.REMOTE_CLIENT,f=>this._frameTask.processQueue(f),()=>!1)}var c=e.prototype;c.destroy=function(){this._frameTask.remove();this._handle.destroy()};c.invoke=function(a,f){if(!a.buffer||
0===a.buffer.byteLength)return Promise.resolve(null);a.options.sourceSpatialReference&&a.options.sourceSpatialReference instanceof k&&(a.options={...a.options,sourceSpatialReference:a.options.sourceSpatialReference.toJSON()});return this._handle.invoke(a,f).then(b=>this._frameTask.schedule(()=>{b.spatialReference=k.fromJSON(b.spatialReference);if(b.fields)for(var d=0;d<b.fields.length;d++)b.fields[d]=p.fromJSON(b.fields[d]);d=b.spatialReference;for(const g of b.features)g.uid=m.generateUID(),g.geometry&&
(g.geometry.spatialReference=d);return b}))};return e}(),r=function(e){function c(a){return e.call(this,"PBFDecoderWorker","_parseFeatureQuery",a)||this}l._inheritsLoose(c,e);c.prototype.getTransferList=function(a){return[a.buffer]};return c}(q.WorkerHandle);h.PBFDecoder=t;Object.defineProperty(h,"__esModule",{value:!0})});