// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.19/esri/copyright.txt for details.
//>>built
define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/has ../../../../core/maybe ../../../../core/Logger ../../../../core/accessorSupport/ensureType ../../../../core/accessorSupport/decorators/property ../../../../core/jsonMap ../../../../core/accessorSupport/decorators/subclass ../../../../core/urlUtils ../../../../core/uuid ../../../../portal/support/resourceExtension ../../../../layers/support/fieldUtils ../../../../core/AsyncUpdate ../../../../core/HandleOwner".split(" "),
function(b,n,d,x,h,p,y,f,z,q,A,B,C,l,r,t){async function m(k){const e=new Set;try{return await k(e),Array.from(e).sort()}catch(a){return u.error(a),null}}const u=p.getLogger("esri.views.3d.layers.support.SceneLayerViewRequiredFields");b.SceneLayerViewRequiredFields=function(k){function e(a){return k.call(this,a)||this}n._inheritsLoose(e,k);e.prototype.initialize=function(){this.layer=this.layerView.layer;this.handles.add([this.autoUpdateAsync("rendererFields",()=>{const {fields:a,renderer:c}=this.layer;
return c?m(g=>c.collectRequiredFields(g,a)):null}),this.autoUpdateAsync("labelingFields",()=>{const {layer:a}=this;return a.labelsVisible?m(c=>l.collectLabelingFields(c,a)):null}),this.autoUpdateAsync("viewFilterFields",()=>{const {layer:a,filter:c}=this.layerView;return m(g=>l.collectFilterFields(g,a,c))})])};n._createClass(e,[{key:"requiredFields",get:function(){const {layerView:{layer:{fields:a},definitionExpressionFields:c},rendererFields:g,labelingFields:v,viewFilterFields:w}=this;return l.fixFields(a,
[...h.unwrapOr(c,[]),...h.unwrapOr(g,[]),...h.unwrapOr(v,[]),...h.unwrapOr(w,[])])}}]);return e}(r.AsyncUpdateMixin(t.HandleOwner));d.__decorate([f.property()],b.SceneLayerViewRequiredFields.prototype,"layerView",void 0);d.__decorate([f.property()],b.SceneLayerViewRequiredFields.prototype,"layer",void 0);d.__decorate([f.property()],b.SceneLayerViewRequiredFields.prototype,"requiredFields",null);d.__decorate([f.property()],b.SceneLayerViewRequiredFields.prototype,"rendererFields",void 0);d.__decorate([f.property()],
b.SceneLayerViewRequiredFields.prototype,"labelingFields",void 0);d.__decorate([f.property()],b.SceneLayerViewRequiredFields.prototype,"viewFilterFields",void 0);b.SceneLayerViewRequiredFields=d.__decorate([q.subclass("esri.views.3d.layers.support.SceneLayerViewRequiredFields")],b.SceneLayerViewRequiredFields);Object.defineProperty(b,"__esModule",{value:!0})});