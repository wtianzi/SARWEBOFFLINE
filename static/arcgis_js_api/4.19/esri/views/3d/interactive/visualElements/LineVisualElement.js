// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.19/esri/copyright.txt for details.
//>>built
define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../chunks/vec3f64 ../../../../chunks/vec3 ../../../../chunks/mat4 ../../../../chunks/mat4f64 ../../../../chunks/vec4 ../../../../chunks/vec4f32 ../../webgl-engine/materials/RibbonLineMaterial ../../layers/graphics/lineUtils ./Object3DVisualElement".split(" "),function(u,v,g,p,k,m,x,l,q,y,z,r){r=function(w){function n(a){var b=w.call(this,a)||this;b._renderOccluded=4;b._width=1;b._color=q.fromValues(1,0,1,
1);b._innerWidth=1;b._innerColor=null;b._stipplePattern=null;b._stippleOffColor=null;b._stippleIntegerRepeats=!1;b._writeDepthEnabled=!0;b._falloff=0;b._polygonOffset=!1;b.applyProps(a);return b}v._inheritsLoose(n,w);var f=n.prototype;f.setGeometryFromExtent=function(a){const b=this.view.spatialReference,d=p.create(),c=p.create(),e=[];k.set(d,a[0],a[1],100);this.view.renderCoordsHelper.toRenderCoords(d,b,c);e.push([c[0],c[1],c[2]]);k.set(d,a[2],a[1],100);this.view.renderCoordsHelper.toRenderCoords(d,
b,c);e.push([c[0],c[1],c[2]]);k.set(d,a[2],a[3],100);this.view.renderCoordsHelper.toRenderCoords(d,b,c);e.push([c[0],c[1],c[2]]);k.set(d,a[0],a[3],100);this.view.renderCoordsHelper.toRenderCoords(d,b,c);e.push([c[0],c[1],c[2]]);k.set(d,a[0],a[1],100);this.view.renderCoordsHelper.toRenderCoords(d,b,c);e.push([c[0],c[1],c[2]]);k.set(d,a[0],a[1],100);this.view.renderCoordsHelper.toRenderCoords(d,b,c);e.push([c[0],c[1],c[2]]);this.geometry=[e]};f.setGeometryFromFrustum=function(a){const b=[];a.lines.forEach(d=>
{b.push([d.origin[0],d.origin[1],d.origin[2]]);b.push([d.endpoint[0],d.endpoint[1],d.endpoint[2]])});this.geometry=[b]};f.setGeometryFromSegment=function(a){const b=a.endRenderSpace;m.identity(h);m.translate(h,h,b);this.transform=h;({points:a}=a.createRenderGeometry(b,this.view.renderCoordsHelper));this.geometry=[a]};f.setGeometryFromSegments=function(a,b=p.ZEROS){m.identity(h);m.translate(h,h,b);this.transform=h;this.geometry=a.map(d=>d.createRenderGeometry(b,this.view.renderCoordsHelper).points)};
f.createExternalResources=function(){this._material=new y.RibbonLineMaterial(this.materialParameters)};f.destroyExternalResources=function(){this._material=null};f.createGeometries=function(a){const b=this._createLineGeometries();if(0!==b.length)for(let d=0;d<b.length;++d){const c=z.createGeometry(b[d]);a.addGeometry(c,this._material)}};f.forEachExternalMaterial=function(a){a(this._material)};f._updateMaterial=function(){this.attached&&this._material.setParameterValues(this.materialParameters)};f._createLineGeometries=
function(){const a=this.geometry;if(g.isNone(a)||0===a.length)return[];const b=[];a.forEach(d=>{const c=new Float64Array(3*d.length);d.forEach((e,t)=>{c[3*t]=e[0];c[3*t+1]=e[1];c[3*t+2]=e[2]});b.push({attributeData:{position:c},removeDuplicateStartEnd:0})});return b};v._createClass(n,[{key:"renderOccluded",get:function(){return this._renderOccluded},set:function(a){a!==this._renderOccluded&&(this._renderOccluded=a,this._updateMaterial())}},{key:"geometry",get:function(){return this._geometry},set:function(a){this._geometry=
a;this.recreateGeometry()}},{key:"width",get:function(){return this._width},set:function(a){a!==this._width&&(this._width=a,this._updateMaterial())}},{key:"color",get:function(){return this._color},set:function(a){l.exactEquals(a,this._color)||(l.copy(this._color,a),this._updateMaterial())}},{key:"innerWidth",get:function(){return this._innerWidth},set:function(a){a!==this._innerWidth&&(this._innerWidth=a,this._updateMaterial())}},{key:"innerColor",get:function(){return this._innerColor},set:function(a){if(g.isSome(a)){if(g.isNone(this._innerColor)||
!l.exactEquals(a,this._innerColor))this._innerColor=l.copy(q.create(),a),this._updateMaterial()}else g.isSome(this._innerColor)&&(this._innerColor=null,this._updateMaterial())}},{key:"stipplePattern",get:function(){return this._stipplePattern},set:function(a){const b=g.isSome(a)!==g.isSome(this._stipplePattern);this._stipplePattern=a;b?this.recreate():this._updateMaterial()}},{key:"stippleOffColor",get:function(){return this._stippleOffColor},set:function(a){if(g.isNone(a)||g.isNone(this._stippleOffColor)||
!l.exactEquals(a,this._stippleOffColor))this._stippleOffColor=g.isSome(a)?q.clone(a):null,this._updateMaterial()}},{key:"stippleIntegerRepeats",get:function(){return this._stippleIntegerRepeats},set:function(a){this._stippleIntegerRepeats!==a&&(this._stippleIntegerRepeats=a,this._updateMaterial())}},{key:"writeDepthEnabled",get:function(){return this._writeDepthEnabled},set:function(a){this._writeDepthEnabled!==a&&(this._writeDepthEnabled=a,this._updateMaterial())}},{key:"falloff",get:function(){return this._falloff},
set:function(a){a!==this._falloff&&(this._falloff=a,this._updateMaterial())}},{key:"polygonOffset",get:function(){return this._polygonOffset},set:function(a){a!==this._polygonOffset&&(this._polygonOffset=a,this._updateMaterial())}},{key:"materialParameters",get:function(){return{width:this._width,color:this._color,stippleOffColor:this._stippleOffColor,stipplePattern:this._stipplePattern,isClosed:!1,falloff:this._falloff,innerColor:this._innerColor,innerWidth:this._innerWidth,stippleIntegerRepeats:this._stippleIntegerRepeats,
polygonOffset:this._polygonOffset,renderOccluded:this._renderOccluded,writeDepth:this._writeDepthEnabled}}}]);return n}(r.Object3DVisualElement);const h=x.create();u.LineVisualElement=r;Object.defineProperty(u,"__esModule",{value:!0})});