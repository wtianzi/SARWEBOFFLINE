// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.19/esri/copyright.txt for details.
//>>built
define("../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/has ../../../../../core/maybe ../../../../../core/Logger ../../../../../core/accessorSupport/ensureType ../../../../../core/accessorSupport/decorators/property ../../../../../core/accessorSupport/decorators/aliasOf ../../../../../core/jsonMap ../../../../../core/accessorSupport/decorators/subclass ../../../../../core/urlUtils ../../../../../core/uuid ../../../../../portal/support/resourceExtension ../../../../../core/Accessor ../../../../../geometry/Point ../../../../../core/Handles ../../../support/PropertiesPool ../../graphics/DirectLineMeasurement3D/DirectLineMeasurement3D".split(" "),
function(h,c,b,k,v,w,d,l,x,p,y,z,A,q,m,r,t,u){b=function(n){function g(){var a=n.apply(this,arguments)||this;a._handles=new r;a._propertiesPool=new t.PropertiesPool({startPoint:m,endPoint:m},h._assertThisInitialized(a));a.model=new u.DirectLineMeasurement3D;a.cursorPoint=null;a.state="initial";a.active=!1;a.geodesicMeasurementDistanceThreshold=1E5;return a}h._inheritsLoose(g,n);var e=g.prototype;e.initialize=function(){this.sceneView.analyses.add(this.model);this.reset()};e.destroy=function(){this._handles.destroy();
this._handles=null;this.sceneView.analyses.remove(this.model);this._propertiesPool.destroy();this._propertiesPool=null;this.model.destroy()};e.reset=function(){this.clearMeasurement()};e.clearMeasurement=function(){this.state="initial";this.cursorPoint=this.endPoint=this.startPoint=null;this._clearOverride("measurementSurfaceLocation")};e.finishMeasurement=function(){if(!this._isOverridden("measurementSurfaceLocation")){const a=this.measurementSurfaceLocation;this._override("measurementSurfaceLocation",
"camera-dependent"===a?this.sceneView.state.camera.aboveGround?"above-the-surface":"below-the-surface":a)}this.state="measured"};h._createClass(g,[{key:"startPointSurfaceLocation",set:function(a){this._set("startPointSurfaceLocation",a)}},{key:"endPointSurfaceLocation",set:function(a){this._set("endPointSurfaceLocation",a)}},{key:"measurementSurfaceLocation",get:function(){const a=this.startPointSurfaceLocation,f=this.endPointSurfaceLocation;return null==a||null==f||"above-the-surface"===a&&"below-the-surface"===
f||"below-the-surface"===a&&"above-the-surface"===f||"on-the-surface"===a&&"on-the-surface"===f?"camera-dependent":"above-the-surface"===a||"above-the-surface"===f?"above-the-surface":"below-the-surface"}},{key:"validMeasurement",get:function(){return k.isSome(this.model.startPoint)&&k.isSome(this.model.endPoint)}},{key:"isMeasuring",get:function(){return!!this.startPoint}},{key:"geodesicDistanceExceeded",get:function(){return k.isSome(this.model.measurement)&&this.model.measurement.horizontalDistance&&
this.model.measurement.horizontalDistance.value>this.geodesicMeasurementDistanceThreshold}}]);return g}(q);c.__decorate([d.property()],b.prototype,"messages",void 0);c.__decorate([d.property({constructOnly:!0})],b.prototype,"sceneView",void 0);c.__decorate([d.property()],b.prototype,"model",void 0);c.__decorate([l.aliasOf("model.startPoint")],b.prototype,"startPoint",void 0);c.__decorate([d.property({value:null})],b.prototype,"startPointSurfaceLocation",null);c.__decorate([l.aliasOf("model.endPoint")],
b.prototype,"endPoint",void 0);c.__decorate([d.property({value:null})],b.prototype,"endPointSurfaceLocation",null);c.__decorate([d.property()],b.prototype,"measurementSurfaceLocation",null);c.__decorate([d.property()],b.prototype,"cursorPoint",void 0);c.__decorate([d.property()],b.prototype,"state",void 0);c.__decorate([l.aliasOf("model.settings.unit")],b.prototype,"unit",void 0);c.__decorate([d.property()],b.prototype,"active",void 0);c.__decorate([d.property({readOnly:!0})],b.prototype,"validMeasurement",
null);c.__decorate([d.property({readOnly:!0})],b.prototype,"isMeasuring",null);c.__decorate([d.property()],b.prototype,"geodesicMeasurementDistanceThreshold",void 0);c.__decorate([d.property({readOnly:!0})],b.prototype,"geodesicDistanceExceeded",null);return b=c.__decorate([p.subclass("esri.views.3d.interactive.measurementTools.directLineMeasurement3D.DirectLineMeasurement3DModel")],b)});