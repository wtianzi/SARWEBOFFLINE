// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.19/esri/copyright.txt for details.
//>>built
define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/maybe ../../../../../geometry/Point ../../../../../geometry ../../../../../core/Evented ../../../../../core/Handles ../../../../../core/watchUtils ../../../../interactive/coordinateHelper ../../../../interactive/editGeometry/EditGeometry ../../../../interactive/editGeometry/operations/AppendVertex ../../../../interactive/editGeometry/operations/UpdateVertices ../../../../interactive/editGeometry/operations/RemoveVertices ../../../../interactive/editGeometry/operations/SplitEdge ../../../../interactive/editGeometry/operations/SetVertexPosition".split(" "),
function(g,l,e,q,m,r,t,u,v,f,w,z,A,B,x){m=function(n){function h(){var a=n.call(this)||this;a._handles=new t;a._dirty=!0;a._model=null;a._view=null;a._version=0;a._internalGeometryChange=!1;return a}l._inheritsLoose(h,n);var d=h.prototype;d._initialize=function(a,b){this._handles.removeAll();this._handles.add(u.init(a,"geometry",()=>this._updateEditGeometryFromModelGeometry(a,b),!0))};d._updateEditGeometryFromModelGeometry=function(a,b){this._version++;this._internalGeometryChange||(this._handles.remove("EditGeometry"),
this._editGeometry=e.isSome(a.geometry)?f.EditGeometry.fromGeometry(a.geometry,b.viewingMode):new f.EditGeometry(v.createCoordinateHelper(!0,!1,b.spatialReference,b.viewingMode)),this.emit("clear",{type:"clear"}),this._handles.add(this._editGeometry.on("change",c=>{this._internalGeometryChange=!0;a.geometry=0<this.numVertices?this._editGeometry.toPolygon():null;this._internalGeometryChange=!1}),"EditGeometry"))};d.getVertex=function(a){if(!this.initialized||0===this._editGeometry.components.length||
0===this._editGeometry.components[0].vertices.length)return null;const b=this._editGeometry.components[0].vertices[0];let c=b;do{if(c.index===a)return c;c=c.right.right}while(c!==b&&null!=c);return null};d.getVertexPositionAsPoint=function(a){return this._editGeometry.coordinateHelper.createPoint(a.pos)};d.getVertexPositionAsPointFromIndex=function(a){return this._editGeometry.coordinateHelper.createPoint(this.getVertex(a).pos)};d.forEachVertex=function(a){this.initialized&&0<this._editGeometry.components.length&&
this._editGeometry.components[0].iterateVertices(a)};d.forEachVertexPosition=function(a){const b=this._editGeometry.coordinateHelper;this.forEachVertex((c,k)=>{b.toPoint(c.pos,p);a(p,k)})};d.clear=function(){e.isSome(this.model)&&(this.model.geometry=null)};d.add=function(a){if(!this.initialized)return null;0===this._editGeometry.components.length&&this._editGeometry.components.push(new f.Component(this._editGeometry));a=new w.AppendVertex(this._editGeometry,this._editGeometry.components[0],this._editGeometry.coordinateHelper.fromPoint(a));
this._editGeometry.apply(a);this.emit("vertex-update",{type:"vertex-update"});return a};d.ensureContains=function(a,b=""){let c=!1;this._editGeometry.components.forEach(k=>{k.iterateVertices(y=>{y===a&&(c=!0)})});if(!c)throw Error(`vertex doesnt exist ${b}`);return c};d.setVertexPosition=function(a,b){if(!this.initialized)return null;a=new x.SetVertexPosition(this._editGeometry,a,this._editGeometry.coordinateHelper.fromPoint(b));this._editGeometry.apply(a);this.emit("vertex-update",{type:"vertex-update"});
return a};l._createClass(h,[{key:"model",get:function(){return this._model},set:function(a){this._model=a;e.isSome(this._model)&&e.isSome(this._view)&&this._initialize(this._model,this._view)}},{key:"view",get:function(){return this._view},set:function(a){this._view=a;e.isSome(this._model)&&e.isSome(this._view)&&this._initialize(this._model,this._view)}},{key:"initialized",get:function(){return e.isSome(this._model)&&e.isSome(this._view)}},{key:"version",get:function(){return this._version}},{key:"vertices",
get:function(){const a=[];this.forEachVertex(b=>{a.push(b)});return a}},{key:"numVertices",get:function(){return this.initialized&&0<this._editGeometry.components.length?this._editGeometry.components[0].vertices.length:0}},{key:"lastPoint",get:function(){if(this.initialized&&0<this._editGeometry.components.length){const a=this._editGeometry.components[0].getLastVertex();if(e.isSome(a))return this._editGeometry.coordinateHelper.createPoint(a.pos)}return null}}]);return h}(r);const p=new q;g.Component=
f.Component;g.Edge=f.Edge;g.EditGeometry=f.EditGeometry;g.Vertex=f.Vertex;g.AreaMeasurement3DPathHelper=m;Object.defineProperty(g,"__esModule",{value:!0})});