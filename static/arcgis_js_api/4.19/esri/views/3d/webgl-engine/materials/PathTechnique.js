// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.19/esri/copyright.txt for details.
//>>built
define("require exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../core/shaderTechnique/ReloadableShaderModule ../core/shaderTechnique/ShaderTechnique ../core/shaderTechnique/ShaderTechniqueConfiguration ../../../webgl/Program ../../../webgl/renderState ../core/shaderLibrary/util/View.glsl ../core/shaderLibrary/Slice.glsl ../lib/OrderIndependentTransparency ../core/shaderLibrary/shading/MultipassTerrainTest.glsl ../lib/StencilUtils ../core/shaderLibrary/shading/ReadShadowMap.glsl ../core/shaderLibrary/attributes/VertexNormal.glsl ../core/shaderLibrary/attributes/PathVertexPosition.glsl ../../../../chunks/Path.glsl".split(" "),
function(w,l,r,g,d,m,f,x,q,n,y,p,z,t,A,B,C,D){const u={position:0,profileRight:1,profileUp:2,profileVertexAndNormal:3,featureValue:4};m=function(k){function h(){return k.apply(this,arguments)||this}r._inheritsLoose(h,k);var c=h.prototype;c.initializeProgram=function(e){var b=h.shader.get();const a=this.configuration;b=b.build({OITEnabled:0===a.transparencyPassType,output:a.output,viewingMode:e.viewingMode,slicePlaneEnabled:a.slicePlaneEnabled,sliceHighlightDisabled:!1,sliceEnabledForVertexPrograms:!1,
receiveShadows:a.receiveShadows,vvSize:a.vvSize,vvColor:a.vvColor,vvInstancingEnabled:!0,vvOpacity:a.vvOpacity,useOldSceneLightInterface:!1,pbrMode:0,useCustomDTRExponentForWater:!1,receiveAmbientOcclusion:a.receiveSSAO,doubleSidedMode:a.doubleSidedMode,multipassTerrainEnabled:a.multipassTerrainEnabled,cullAboveGround:a.cullAboveGround});return new x(e.rctx,b.generateSource("vertex"),b.generateSource("fragment"),u)};c.bindPass=function(e,b,a){n.View.bindProjectionMatrix(this.program,a.camera.projectionMatrix);
this.program.setUniform3fv("size",b.size);a.multipassTerrainEnabled&&(this.program.setUniform2fv("cameraNearFar",a.camera.nearFar),this.program.setUniform2fv("inverseViewport",a.inverseViewport),z.bindMultipassTerrainUniforms(this.program,e,a));0!==this.configuration.output&&7!==this.configuration.output||this.program.setUniform1f("opacity",b.opacity);0===this.configuration.output?(a.lighting.setUniforms(this.program,!1),this.program.setUniform3fv("ambient",b.ambient),this.program.setUniform3fv("diffuse",
b.diffuse),this.program.setUniform3fv("specular",b.specular),this.program.setUniform1f("opacity",b.opacity)):1!==this.configuration.output&&3!==this.configuration.output||n.View.bindNearFar(this.program,a.camera.nearFar);C.setVVUniforms(this.program,b)};c.bindDraw=function(e){n.View.bindView(this.program,e);y.Slice.bindUniformsWithOrigin(this.program,this.configuration,e);0!==this.configuration.output&&7!==this.configuration.output||n.View.bindCamPosition(this.program,e.origin,e.camera.viewInverseTransposeMatrix);
0===this.configuration.output&&A.ReadShadowMap.bindView(this.program,e);2===this.configuration.output&&B.VertexNormal.bindUniforms(this.program,e.camera.viewInverseTransposeMatrix)};c.setPipelineState=function(e){const b=this.configuration,a=3===e,v=2===e;return q.makePipelineState({blending:0!==b.output&&7!==b.output||!b.transparent?null:a?p.blendingDefault:p.OITBlending(e),culling:(b.slicePlaneEnabled?!1:!b.transparent&&0!==b.doubleSidedMode)&&{face:1028,mode:2305},depthTest:{func:p.OITDepthTest(e)},
depthWrite:a||v?q.defaultDepthWriteParams:null,colorWrite:q.defaultColorWriteParams,stencilWrite:b.sceneHasOcludees?t.stencilWriteMaskOn:null,stencilTest:b.sceneHasOcludees?t.stencilBaseAllZerosParams:null,polygonOffset:a||v?null:p.OITPolygonOffset})};c.initializePipeline=function(){return this.setPipelineState(this.configuration.transparencyPassType)};return h}(m.ShaderTechnique);m.shader=new d.ReloadableShaderModule(D.PathShader,()=>new Promise(function(k,h){w(["../shaders/Path.glsl"],k,h)}));d=
function(k){function h(){var c=k.apply(this,arguments)||this;c.output=0;c.doubleSidedMode=0;c.receiveShadows=!1;c.receiveSSAO=!1;c.vvSize=!1;c.vvColor=!1;c.vvOpacity=!1;c.slicePlaneEnabled=!1;c.transparent=!1;c.sceneHasOcludees=!1;c.transparencyPassType=3;c.multipassTerrainEnabled=!1;c.cullAboveGround=!0;return c}r._inheritsLoose(h,k);return h}(f.ShaderTechniqueConfiguration);g.__decorate([f.parameter({count:8})],d.prototype,"output",void 0);g.__decorate([f.parameter({count:3})],d.prototype,"doubleSidedMode",
void 0);g.__decorate([f.parameter()],d.prototype,"receiveShadows",void 0);g.__decorate([f.parameter()],d.prototype,"receiveSSAO",void 0);g.__decorate([f.parameter()],d.prototype,"vvSize",void 0);g.__decorate([f.parameter()],d.prototype,"vvColor",void 0);g.__decorate([f.parameter()],d.prototype,"vvOpacity",void 0);g.__decorate([f.parameter()],d.prototype,"slicePlaneEnabled",void 0);g.__decorate([f.parameter()],d.prototype,"transparent",void 0);g.__decorate([f.parameter()],d.prototype,"sceneHasOcludees",
void 0);g.__decorate([f.parameter({count:4})],d.prototype,"transparencyPassType",void 0);g.__decorate([f.parameter()],d.prototype,"multipassTerrainEnabled",void 0);g.__decorate([f.parameter()],d.prototype,"cullAboveGround",void 0);l.PathTechnique=m;l.PathTechniqueConfiguration=d;l.pathVertexAttributeLocations=u;Object.defineProperty(l,"__esModule",{value:!0})});