// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.19/esri/copyright.txt for details.
//>>built
define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/has ../../../../../core/Logger ../../../../../core/accessorSupport/ensureType ../../../../../core/accessorSupport/decorators/property ../../../../../core/jsonMap ../../../../../core/accessorSupport/decorators/subclass ../../../../../core/urlUtils ../../../../../core/uuid ../../../../../portal/support/resourceExtension ../../../../../core/Accessor ../../../../../assets ../../../../../support/requestImageUtils ../../../../webgl/Texture".split(" "),
function(d,k,g,x,p,y,l,z,q,A,B,C,r,m,t,u){const v=p.getLogger("esri.views.3d.webgl-engine.materials.internal.waterMaterialUtils");d.WaterTextureRepository=function(n){function e(){var a=n.apply(this,arguments)||this;a.data=[];a.loadingState=0;return a}k._inheritsLoose(e,n);var f=e.prototype;f.dispose=function(){this.loadingState=0;this.data.forEach(a=>{a.dispose();a=null});this.data=null};f.getTextureProps=function(a,b,c=!1){return{target:3553,pixelFormat:6408,dataType:5121,wrapMode:10497,samplingMode:9987,
hasMipmap:c,maxAnisotropy:8,width:a,height:b}};f.loadTextures=function(a){const b=[m.getAssetUrl("esri/images/materials/water/normals.jpg"),m.getAssetUrl("esri/images/materials/water/perturbation.jpg")];this.loadingState=1;Promise.all(b.map(c=>t.requestImage(c))).then(c=>{c.forEach((h,w)=>{this.data[w]=new u(a,this.getTextureProps(h.width,h.height,!0),h)});this.loadingState=2}).catch(c=>{v.error("Failed to load textures for water material.",c);this.loadingState=0})};f.bindRepo=function(a){for(let b=
0;b<this.data.length;b++)a.bindTexture(this.data[b],b)};k._createClass(e,[{key:"updating",get:function(){return 1===this.loadingState}},{key:"ready",get:function(){return 2===this.loadingState}}]);return e}(r);g.__decorate([l.property()],d.WaterTextureRepository.prototype,"loadingState",void 0);g.__decorate([l.property({type:Boolean,readOnly:!0})],d.WaterTextureRepository.prototype,"updating",null);d.WaterTextureRepository=g.__decorate([q.subclass("esri.views.3d.webgl-engine.materials.internal.WaterTextureRepository")],
d.WaterTextureRepository);Object.defineProperty(d,"__esModule",{value:!0})});