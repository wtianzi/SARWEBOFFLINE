// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.19/esri/copyright.txt for details.
//>>built
define(["exports","../../../../chunks/_commonjsHelpers","../../../webgl/capabilities/isWebGL2Context"],function(q,R,S){var Q=R.createCommonjsModule(function(p){(function(t){t=t();void 0!==t&&(p.exports=t)})(function(){function t(a){if(null==B){B={};H={};for(var e in a)"number"==typeof a[e]&&(B[a[e]]=e,H[e]=a[e])}}function F(){if(null==B)throw"WebGLDebugUtils.init(ctx) not called";}function D(a){F();var e=B[a];return void 0!==e?"gl."+e:"/*UNKNOWN WebGL ENUM*/ 0x"+a.toString(16)}function I(a,e,g,d){a=
T[a];if(void 0!==a&&(a=a[e],void 0!==a&&a[g])){if("object"===typeof a[g]&&void 0!==a[g].enumBitwiseOr){e=a[g].enumBitwiseOr;g=0;a=[];for(var r=0;r<e.length;++r){var u=H[e[r]];0!==(d&u)&&(g|=u,a.push(D(u)))}return g===d?a.join(" | "):D(d)}return D(d)}return null===d?"null":void 0===d?"undefined":d.toString()}function N(a,e,g){a.__defineGetter__(g,function(){return e[g]});a.__defineSetter__(g,function(d){e[g]=d})}function O(a,e,g,d){function r(n,f){return function(){g&&g(f,arguments);var x=n[f].apply(n,
arguments),k=d.getError();0!=k&&(u[k]=!0,e(k,f,arguments));return x}}d=d||a;t(a);e=e||function(n,f,x){for(var k="",C=x.length,w=0;w<C;++w)k+=(0==w?"":", ")+I(f,C,w,x[w]);n="WebGL error "+D(n)+" in "+f+"("+k+")";window.console&&window.console.error?window.console.error(n):window.console&&window.console.log&&window.console.log(n)};var u={},y={},h;for(h in a)if("function"==typeof a[h])if("getExtension"!=h)y[h]=r(a,h);else{var G=r(a,h);y[h]=function(){var n=G.apply(a,arguments);return O(n,e,g,d)}}else N(y,
a,h);y.getError=function(){for(var n in u)if(u.hasOwnProperty(n)&&u[n])return u[n]=!1,n;return a.NO_ERROR};return y}function P(a){var e=a.getParameter(a.MAX_VERTEX_ATTRIBS),g=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,g);for(var d=0;d<e;++d)a.disableVertexAttribArray(d),a.vertexAttribPointer(d,4,a.FLOAT,!1,0,0),a.vertexAttrib1f(d,0);a.deleteBuffer(g);e=a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS);for(d=0;d<e;++d)a.activeTexture(a.TEXTURE0+d),a.bindTexture(a.TEXTURE_CUBE_MAP,null),a.bindTexture(a.TEXTURE_2D,
null);a.activeTexture(a.TEXTURE0);a.useProgram(null);a.bindBuffer(a.ARRAY_BUFFER,null);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,null);a.bindFramebuffer(a.FRAMEBUFFER,null);a.bindRenderbuffer(a.RENDERBUFFER,null);a.disable(a.BLEND);a.disable(a.CULL_FACE);a.disable(a.DEPTH_TEST);a.disable(a.DITHER);a.disable(a.SCISSOR_TEST);a.blendColor(0,0,0,0);a.blendEquation(a.FUNC_ADD);a.blendFunc(a.ONE,a.ZERO);a.clearColor(0,0,0,0);a.clearDepth(1);a.clearStencil(-1);a.colorMask(!0,!0,!0,!0);a.cullFace(a.BACK);a.depthFunc(a.LESS);
a.depthMask(!0);a.depthRange(0,1);a.frontFace(a.CCW);a.hint(a.GENERATE_MIPMAP_HINT,a.DONT_CARE);a.lineWidth(1);a.pixelStorei(a.PACK_ALIGNMENT,4);a.pixelStorei(a.UNPACK_ALIGNMENT,4);a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1);a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);a.UNPACK_COLORSPACE_CONVERSION_WEBGL&&a.pixelStorei(a.UNPACK_COLORSPACE_CONVERSION_WEBGL,a.BROWSER_DEFAULT_WEBGL);a.polygonOffset(0,0);a.sampleCoverage(1,!1);a.scissor(0,0,a.canvas.width,a.canvas.height);a.stencilFunc(a.ALWAYS,0,
4294967295);a.stencilMask(4294967295);a.stencilOp(a.KEEP,a.KEEP,a.KEEP);a.viewport(0,0,a.canvas.width,a.canvas.height);for(a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT|a.STENCIL_BUFFER_BIT);a.getError(););}var T={enable:{1:{0:!0}},disable:{1:{0:!0}},getParameter:{1:{0:!0}},drawArrays:{3:{0:!0}},drawElements:{4:{0:!0,2:!0}},createShader:{1:{0:!0}},getShaderParameter:{2:{1:!0}},getProgramParameter:{2:{1:!0}},getShaderPrecisionFormat:{2:{0:!0,1:!0}},getVertexAttrib:{2:{1:!0}},vertexAttribPointer:{6:{2:!0}},
bindTexture:{2:{0:!0}},activeTexture:{1:{0:!0}},getTexParameter:{2:{0:!0,1:!0}},texParameterf:{3:{0:!0,1:!0}},texParameteri:{3:{0:!0,1:!0,2:!0}},texImage2D:{9:{0:!0,2:!0,6:!0,7:!0},6:{0:!0,2:!0,3:!0,4:!0}},texSubImage2D:{9:{0:!0,6:!0,7:!0},7:{0:!0,4:!0,5:!0}},copyTexImage2D:{8:{0:!0,2:!0}},copyTexSubImage2D:{8:{0:!0}},generateMipmap:{1:{0:!0}},compressedTexImage2D:{7:{0:!0,2:!0}},compressedTexSubImage2D:{8:{0:!0,6:!0}},bindBuffer:{2:{0:!0}},bufferData:{3:{0:!0,2:!0}},bufferSubData:{3:{0:!0}},getBufferParameter:{2:{0:!0,
1:!0}},pixelStorei:{2:{0:!0,1:!0}},readPixels:{7:{4:!0,5:!0}},bindRenderbuffer:{2:{0:!0}},bindFramebuffer:{2:{0:!0}},checkFramebufferStatus:{1:{0:!0}},framebufferRenderbuffer:{4:{0:!0,1:!0,2:!0}},framebufferTexture2D:{5:{0:!0,1:!0,2:!0}},getFramebufferAttachmentParameter:{3:{0:!0,1:!0,2:!0}},getRenderbufferParameter:{2:{0:!0,1:!0}},renderbufferStorage:{4:{0:!0,1:!0}},clear:{1:{0:{enumBitwiseOr:["COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT"]}}},depthFunc:{1:{0:!0}},blendFunc:{2:{0:!0,
1:!0}},blendFuncSeparate:{4:{0:!0,1:!0,2:!0,3:!0}},blendEquation:{1:{0:!0}},blendEquationSeparate:{2:{0:!0,1:!0}},stencilFunc:{3:{0:!0}},stencilFuncSeparate:{4:{0:!0,1:!0}},stencilMaskSeparate:{2:{0:!0}},stencilOp:{3:{0:!0,1:!0,2:!0}},stencilOpSeparate:{4:{0:!0,1:!0,2:!0,3:!0}},cullFace:{1:{0:!0}},frontFace:{1:{0:!0}},drawArraysInstancedANGLE:{4:{0:!0}},drawElementsInstancedANGLE:{5:{0:!0,2:!0}},blendEquationEXT:{1:{0:!0}}},B=null,H=null;return{init:t,mightBeEnum:function(a){F();return void 0!==B[a]},
glEnumToString:D,glFunctionArgToString:I,glFunctionArgsToString:function(a,e){for(var g="",d=e.length,r=0;r<d;++r)g+=(0==r?"":", ")+I(a,d,r,e[r]);return g},makeDebugContext:O,makeLostContextSimulatingCanvas:function(a){function e(c){return"function"==typeof c?c:function(b){c.handleEvent(b)}}function g(){for(var c=Object.keys(z),b=0;b<c.length;++b)delete z[c]}function d(){++E;k||w==E&&a.loseContext()}function r(c,b){var l=c[b];return function(){d();if(!k)return l.apply(c,arguments)}}function u(c){return{statusMessage:c,
preventDefault:function(){J=!0}}}function y(c){for(var b in c)"function"==typeof c[b]?f[b]=r(c,b):N(f,c,b);f.getError=function(){d();if(!k)for(var m;m=h.getError();)z[m]=!0;for(m in z)if(z[m])return delete z[m],m;return f.NO_ERROR};var l="createBuffer createFramebuffer createProgram createRenderbuffer createShader createTexture".split(" ");for(b=0;b<l.length;++b){var v=l[b];f[v]=function(m){return function(){d();if(k)return null;var K=m.apply(c,arguments);K.__webglDebugContextLostId__=x;C.push(K);
return K}}(c[v])}l="getActiveAttrib getActiveUniform getBufferParameter getContextAttributes getAttachedShaders getFramebufferAttachmentParameter getParameter getProgramParameter getProgramInfoLog getRenderbufferParameter getShaderParameter getShaderInfoLog getShaderSource getTexParameter getUniform getUniformLocation getVertexAttrib".split(" ");for(b=0;b<l.length;++b)v=l[b],f[v]=function(m){return function(){d();return k?null:m.apply(c,arguments)}}(f[v]);l="isBuffer isEnabled isFramebuffer isProgram isRenderbuffer isShader isTexture".split(" ");
for(b=0;b<l.length;++b)v=l[b],f[v]=function(m){return function(){d();return k?!1:m.apply(c,arguments)}}(f[v]);f.checkFramebufferStatus=function(m){return function(){d();return k?f.FRAMEBUFFER_UNSUPPORTED:m.apply(c,arguments)}}(f.checkFramebufferStatus);f.getAttribLocation=function(m){return function(){d();return k?-1:m.apply(c,arguments)}}(f.getAttribLocation);f.getVertexAttribOffset=function(m){return function(){d();return k?0:m.apply(c,arguments)}}(f.getVertexAttribOffset);f.isContextLost=function(){return k};
return f}var h,G=[],n=[];var f={};var x=1,k=!1,C=[],w=0,E=0,J=!1,L=0,z={};a.getContext=function(c){return function(){var b=c.apply(a,arguments);if(b instanceof WebGLRenderingContext){if(b!=h){if(h)throw"got different context";h=b;f=y(h)}return f}return b}}(a.getContext);(function(c){var b=c.addEventListener;c.addEventListener=function(l,v,m){switch(l){case "webglcontextlost":G.push(e(v));break;case "webglcontextrestored":n.push(e(v));break;default:b.apply(c,arguments)}}})(a);a.loseContext=function(){if(!k){k=
!0;w=0;for(++x;h.getError(););g();z[h.CONTEXT_LOST_WEBGL]=!0;var c=u("context lost"),b=G.slice();setTimeout(function(){for(var l=0;l<b.length;++l)b[l](c);0<=L&&setTimeout(function(){a.restoreContext()},L)},0)}};a.restoreContext=function(){k&&n.length&&setTimeout(function(){if(!J)throw"can not restore. webglcontestlost listener did not call event.preventDefault";for(var c=0;c<C.length;++c){var b=C[c];b instanceof WebGLBuffer?h.deleteBuffer(b):b instanceof WebGLFramebuffer?h.deleteFramebuffer(b):b instanceof
WebGLProgram?h.deleteProgram(b):b instanceof WebGLRenderbuffer?h.deleteRenderbuffer(b):b instanceof WebGLShader?h.deleteShader(b):b instanceof WebGLTexture&&h.deleteTexture(b)}P(h);k=!1;E=0;J=!1;c=n.slice();b=u("context restored");for(var l=0;l<c.length;++l)c[l](b)},0)};a.loseContextInNCalls=function(c){if(k)throw"You can not ask a lost contet to be lost";w=E+c};a.getNumCalls=function(){return E};a.setRestoreTimeout=function(c){L=c};return a},resetToInitialState:P}})});let A=null;const M=[];q.enabled=
!1;q.begin=function(){q.enabled&&(A=[])};q.end=function(){if(q.enabled){const p=A;A=null;p&&(M.forEach(t=>t(p)),M.length=0);return p}return null};q.instrumentContext=function(p){return q.enabled?S(p)?(console.warn("WebGL tracer is not supported on a WebGL2 Context"),p):Q.makeDebugContext(p,void 0,(t,F)=>{q.enabled&&A&&A.push("gl."+t+"("+Q.glFunctionArgsToString(t,F)+")")}):p};q.request=function(p){M.push(p)};q.setEnabled=function(p){q.enabled=p};q.trace=function(p){q.enabled&&null!=A&&A.push(p)};
Object.defineProperty(q,"__esModule",{value:!0})});