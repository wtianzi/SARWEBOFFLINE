// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.19/esri/copyright.txt for details.
//>>built
define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/maybe ../../../../chunks/vec3 ../../support/mathUtils ../../../../chunks/mat4 ../../../../chunks/mat4f64 ../../../../chunks/vec4f64 ./geometryDataUtils ./Object3DStateID ../materials/renderers/utils".split(" "),function(k,n,c,f,p,q,g,r,t,u,l){let A=function(){function h(a,b,e=null,v=null,w,m,x,y,z){this.data=a;this.material=b;this.layerUid=e;this.graphicUid=v;this.boundingSphere=r.create();this.instanceParameters={highlights:null,
occludees:null,visible:!0};this.shaderTransformationDirty=!0;this.boundingInfo=w;this.material=b;this.transformation=this.origin=null;this.calculateShaderTransformation=x;m&&this.updateTransformation(m,y);this.castShadow=z}var d=h.prototype;d.updateTransformation=function(a,b){this.transformation=a;this.shaderTransformationDirty=!0;this.computeBoundingSphere(a,b,this.boundingSphere)};d.shaderTransformationChanged=function(){this.shaderTransformationDirty=!0};d.computeBoundingSphere=function(a,b,e){c.isNone(this.boundingInfo)||
(b=b||p.maxScale(a),f.transformMat4(e,this.boundingInfo.getCenter(),a),e[3]=this.boundingInfo.getBSRadius()*b)};d.getShaderTransformation=function(){if(c.isNone(this.calculateShaderTransformation))return c.unwrapOr(this.transformation,g.IDENTITY);this.shaderTransformationDirty&&(this.shaderTransformation||(this.shaderTransformation=g.create()),q.copy(this.shaderTransformation,this.calculateShaderTransformation(c.unwrapOr(this.transformation,g.IDENTITY))),this.shaderTransformationDirty=!1);return this.shaderTransformation};
d.computeAttachmentOrigin=function(a){if(this.material.computeAttachmentOrigin)return this.material.computeAttachmentOrigin(this,a)?(c.isSome(this.transformation)&&f.transformMat4(a,a,this.transformation),!0):!1;const b=this.indices.get("position"),e=this.vertexAttributes.get("position");return t.computeAttachmentOriginTriangles(e,b,a)?(c.isSome(this.transformation)&&f.transformMat4(a,a,this.transformation),!0):!1};d.addHighlight=function(){const a=new u.Object3DStateID(0),b=this.instanceParameters;
b.highlights=l.addObject3DStateID(b.highlights,a);return a};d.removeHighlight=function(a){const b=this.instanceParameters;b.highlights=l.removeObject3DStateID(b.highlights,a)};n._createClass(h,[{key:"hasShaderTransformation",get:function(){return c.isSome(this.calculateShaderTransformation)}},{key:"primitiveType",get:function(){return this.data.primitiveType}},{key:"indices",get:function(){return this.data.indices}},{key:"vertexAttributes",get:function(){return this.data.vertexAttributes}}]);return h}();
k.RenderGeometry=A;Object.defineProperty(k,"__esModule",{value:!0})});