// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.19/esri/copyright.txt for details.
//>>built
define("require exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../core/shaderTechnique/ReloadableShaderModule ../core/shaderTechnique/ShaderTechnique ../core/shaderTechnique/ShaderTechniqueConfiguration ../lib/DefaultVertexAttributeLocations ../../../webgl/Program ../../../webgl/renderState ../../../webgl/BufferObject ../../../webgl/Texture ../../../webgl/VertexArrayObject ../../../webgl/Renderbuffer ../../../webgl/FramebufferObject ../../../webgl/ProgramCache ../../../webgl/RenderingContext ../../../webgl/ShaderCompiler ../../../../chunks/ShadowHighlight.glsl".split(" "),
function(p,h,k,n,e,g,l,q,r,m,u,v,w,x,y,z,A,B,t){g=function(c){function b(){return c.apply(this,arguments)||this}k._inheritsLoose(b,c);var d=b.prototype;d.initializeProgram=function(f){const a=b.shader.get().build(this.configuration);return new r(f.rctx,a.generateSource("vertex"),a.generateSource("fragment"),q.Default3D)};d.initializePipeline=function(f){return m.makePipelineState({blending:m.separateBlendingParams(770,1,771,771),colorWrite:m.defaultColorWriteParams,depthTest:null,depthWrite:null})};
d.bindPass=function(f,a,C){f.bindTexture(a.depthMap,2);f.bindTexture(a.highlightMap,3);this.program.setUniform4fv("color",a.color);this.program.setUniform1f("opacity",a.opacity);this.program.setUniform1f("occludedOpacity",a.occludedOpacity);this.program.setUniform1f("terminationFactor",a.terminationFactor);this.program.setUniform2fv("nearFar",a.nearFar);this.program.setUniformMatrix4fv("inverseView",a.inverseView);this.program.setUniform4fv("projInfo",a.projInfo);this.program.setUniform2fv("zScale",
a.zScale);this.program.setUniform1i("depthMap",2);this.program.setUniform3fv("lightingMainDirectionView",a.lightDirView);this.program.setUniform1i("highlightMap",3);this.program.setUniform2fv("texelSize",a.texelSize);a.shadowMap.setUniforms(this.program);a.shadowMap.bindView(this.program,a.origin);a.shadowMap.bindSnapshot(a.highlightSnapshotSlot,6);this.program.setUniform1i("highlightDepthTex",6);a.shadowMap.bindSnapshot(a.defaultSnapshotSlot,7);this.program.setUniform1i("defaultDepthTex",7)};k._createClass(b,
[{key:"primitiveType",get:function(){return 5}}]);return b}(g.ShaderTechnique);g.shader=new e.ReloadableShaderModule(t.ShadowHighlightShader,()=>new Promise(function(c,b){p(["./ShadowHighlight.glsl"],c,b)}));e=function(c){function b(){var d=c.apply(this,arguments)||this;d.highlightedThreshold=.99999;d.selfShadowThreshold=.025;return d}k._inheritsLoose(b,c);return b}(l.ShaderTechniqueConfiguration);n.__decorate([l.parameter()],e.prototype,"highlightedThreshold",void 0);n.__decorate([l.parameter()],
e.prototype,"selfShadowThreshold",void 0);h.ShadowHighlightTechnique=g;h.ShadowHighlightTechniqueConfiguration=e;Object.defineProperty(h,"__esModule",{value:!0})});