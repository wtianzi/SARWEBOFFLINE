// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.19/esri/copyright.txt for details.
//>>built
define("require exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../core/shaderTechnique/ReloadableShaderModule ../core/shaderTechnique/ShaderTechnique ../core/shaderTechnique/ShaderTechniqueConfiguration ../lib/DefaultVertexAttributeLocations ../../../webgl/Program ../../../webgl/renderState ../core/shaderLibrary/util/View.glsl ../lib/OrderIndependentTransparency ../core/shaderLibrary/shading/MultipassTerrainTest.glsl ../../../../chunks/CheckerBoard.glsl".split(" "),
function(t,n,q,k,e,l,g,u,v,m,r,p,w,x){l=function(h){function f(){return h.apply(this,arguments)||this}q._inheritsLoose(f,h);var a=f.prototype;a.initializeProgram=function(d){var c=f.shader.get();const b=this.configuration;c=c.build({OITEnabled:0===b.transparencyPassType,multipassTerrainEnabled:b.multipassTerrainEnabled,cullAboveGround:b.cullAboveGround});return new v(d.rctx,c.generateSource("vertex"),c.generateSource("fragment"),u.Default3D)};a.bindPass=function(d,c,b){r.View.bindProjectionMatrix(this.program,
b.camera.projectionMatrix);this.program.setUniform2fv("size",c.size);this.program.setUniform4fv("color1",c.color1);this.program.setUniform4fv("color2",c.color2);b.multipassTerrainEnabled&&(this.program.setUniform2fv("cameraNearFar",b.camera.nearFar),this.program.setUniform2fv("inverseViewport",b.inverseViewport),w.bindMultipassTerrainUniforms(this.program,d,b))};a.bindDraw=function(d){r.View.bindView(this.program,d)};a.setPipelineState=function(d){const c=this.configuration,b=3===d,y=2===d;return m.makePipelineState({blending:c.transparent?
b?z:p.OITBlending(d):null,depthTest:{func:p.OITDepthTest(d)},depthWrite:b?c.writeDepth&&m.defaultDepthWriteParams:p.OITDepthWrite(d),colorWrite:m.defaultColorWriteParams,polygonOffset:b||y?c.polygonOffset&&A:{factor:-1,units:-25}})};a.initializePipeline=function(){return this.setPipelineState(this.configuration.transparencyPassType)};return f}(l.ShaderTechnique);l.shader=new e.ReloadableShaderModule(x.CheckerBoardShader,()=>new Promise(function(h,f){t(["./CheckerBoard.glsl"],h,f)}));const A={factor:0,
units:-25},z=m.separateBlendingParams(770,1,771,771);e=function(h){function f(){var a=h.apply(this,arguments)||this;a.transparent=!1;a.writeDepth=!0;a.polygonOffset=!1;a.transparencyPassType=3;a.multipassTerrainEnabled=!1;a.cullAboveGround=!0;return a}q._inheritsLoose(f,h);return f}(g.ShaderTechniqueConfiguration);k.__decorate([g.parameter()],e.prototype,"transparent",void 0);k.__decorate([g.parameter()],e.prototype,"writeDepth",void 0);k.__decorate([g.parameter()],e.prototype,"polygonOffset",void 0);
k.__decorate([g.parameter({count:4})],e.prototype,"transparencyPassType",void 0);k.__decorate([g.parameter()],e.prototype,"multipassTerrainEnabled",void 0);k.__decorate([g.parameter()],e.prototype,"cullAboveGround",void 0);n.CheckerBoardTechnique=l;n.CheckerBoardTechniqueConfiguration=e;Object.defineProperty(n,"__esModule",{value:!0})});