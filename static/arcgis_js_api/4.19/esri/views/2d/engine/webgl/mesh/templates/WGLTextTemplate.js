// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.19/esri/copyright.txt for details.
//>>built
define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/screenUtils ../../alignmentUtils ../../util/BidiText ../../materialKey/MaterialKey ../../color ./WGLBaseTextTemplate ./WGLMeshTemplate".split(" "),function(r,e,k,m,t,h,u,v){return function(n){function f(a,d,c,g,l,p,q,w,x,y,z,A,B,C,D,E,F,G=!1){var b=n.call(this)||this;b._xOffset=e.pt2px(A);b._yOffset=e.pt2px(B);b._decoration=x||"none";b._color=g;b._haloColor=l;b._haloSize=Math.min(Math.floor(5*e.pt2px(e.toPt(c))),127);
b._size=Math.min(Math.round(e.pt2px(d)),127);d=Math.min(Math.round(e.pt2px(d)),127);b._referenceSize=Math.round(Math.sqrt(256*d));b._scale=b._size/24;b._angle=z;b._justify=k.getJustification(p||"center");b._xAlignD=k.getXAnchorDirection(p||"center");b._yAlignD=k.getYAnchorDirection(q||"baseline");b._baseline="baseline"===(q||"baseline");b._bitset=(1===w?1:0)|(y?1:0)<<1;a=t.MaterialKeyBase.load(a);a.sdf=!0;b._materialKey=a.data;b._lineWidth=e.pt2px(C)||512;b._lineHeight=D||1;b._textPlacement=E;b._effects=
F;b._isCIM=G;return b}r._inheritsLoose(f,n);f.fromText=function(a,d){const c=new f(a.materialKey,a.font.size,a.haloSize||0,a.color&&h.premultiplyAlphaRGBAArray(a.color)||0,a.haloColor&&h.premultiplyAlphaRGBAArray(a.haloColor)||0,a.horizontalAlignment,a.verticalAlignment,0,a.font.decoration,!1,a.angle||0,a.xoffset,a.yoffset,a.lineWidth,a.lineHeight,null,null,!1),[,g]=m.bidiText(a.text);c.bindTextInfo(d,g);c._vertexBoundsScale=a.maxVVSize?a.maxVVSize/a.font.size:1;return c};f.fromCIMText=function(a,
d){var c=a.scaleFactor||1;const g=a.size*a.sizeRatio*c;c=new f(a.materialKey,g,a.outlineSize*a.sizeRatio,h.premultiplyAlphaRGBA(a.color),h.premultiplyAlphaRGBA(a.outlineColor),a.horizontalAlignment,a.verticalAlignment,a.alignment,a.decoration,a.colorLocked,a.angle,a.offsetX*a.sizeRatio*c,a.offsetY*a.sizeRatio*c,512,1,a.markerPlacement,a.effects,!0);const [,l]=m.bidiText(a.text);c.bindTextInfo(d,l);c._vertexBoundsScale=a.maxVVSize?a.maxVVSize/g:1;return c};return f}(u(v))});