// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.19/esri/copyright.txt for details.
//>>built
require({cache:{"esri/core/HandleOwner":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass ./Accessor ./Handles ../views/support/WatchUpdatingTracking".split(" "),function(t,k,m,z,y,x,f,h){const e=l=>{l=function(q){function p(){return q.apply(this,arguments)||this}k._inheritsLoose(p,q);p.prototype.destroy=function(){this.destroyed||(this.handles.destroy(),this.updatingHandles.destroy())};k._createClass(p,
[{key:"handles",get:function(){return this._get("handles")||new f}},{key:"updatingHandles",get:function(){return this._get("updatingHandles")||new h.WatchUpdatingTracking}}]);return p}(l);m.__decorate([z.property({readOnly:!0})],l.prototype,"handles",null);m.__decorate([z.property({readOnly:!0})],l.prototype,"updatingHandles",null);return l=m.__decorate([y.subclass("esri.core.HandleOwner")],l)};t.HandleOwner=function(l){function q(){return l.apply(this,arguments)||this}k._inheritsLoose(q,l);return q}(e(x));
t.HandleOwner=m.__decorate([y.subclass("esri.core.HandleOwner")],t.HandleOwner);t.HandleOwnerMixin=e;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/core/Handles":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./maybe ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass ./Accessor ./Collection".split(" "),function(t,k,m,z,y,x,f){x=function(h){function e(q){q=h.call(this,q)||this;q._groups=new Map;return q}t._inheritsLoose(e,h);var l=e.prototype;
l.destroy=function(){this.removeAll()};l.add=function(q,p){if(!this._isHandle(q)&&!Array.isArray(q)&&!f.isCollection(q))return this;const n=this._getOrCreateGroup(p);Array.isArray(q)||f.isCollection(q)?q.forEach(d=>this._isHandle(d)&&n.push(d)):n.push(q);this.notifyChange("size");return this};l.forEach=function(q,p){if("function"===typeof q)this._groups.forEach(n=>n.forEach(q));else{const n=this._getGroup(q);n&&p&&n.forEach(p)}};l.has=function(q){return this._groups.has(this._ensureGroupKey(q))};
l.remove=function(q){if(Array.isArray(q)||f.isCollection(q))return q.forEach(this.remove,this),this;if(!this.has(q))return this;const p=this._getGroup(q);for(let n=0;n<p.length;n++)p[n].remove();this._deleteGroup(q);this.notifyChange("size");return this};l.removeAll=function(){this._groups.forEach(q=>{for(let p=0;p<q.length;p++)q[p].remove()});this._groups.clear();this.notifyChange("size");return this};l._isHandle=function(q){return q&&!!q.remove};l._getOrCreateGroup=function(q){if(this.has(q))return this._getGroup(q);
const p=[];this._groups.set(this._ensureGroupKey(q),p);return p};l._getGroup=function(q){return m.assumeNonNull(this._groups.get(this._ensureGroupKey(q)))};l._deleteGroup=function(q){return this._groups.delete(this._ensureGroupKey(q))};l._ensureGroupKey=function(q){return q||"_default_"};t._createClass(e,[{key:"size",get:function(){let q=0;this._groups.forEach(p=>{q+=p.length});return q}}]);return e}(x);k.__decorate([z.property({readOnly:!0})],x.prototype,"size",null);return x=k.__decorate([y.subclass("esri.core.Handles")],
x)})},"esri/core/Collection":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./lang ./maybe ./accessorSupport/ensureType ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass ./ObjectPool ./accessorSupport/tracking ./ArrayPool ./scheduling ./Evented ./accessorSupport/tracking/SimpleObservable".split(" "),function(t,k,m,z,y,x,f,h,e,l,q,p,n){function d(E){return E?E instanceof A?E.toArray():E.length?Array.prototype.slice.apply(E):[]:[]}function b(E){if(E&&
E.length)return E[0]}function a(E,G,H,K){G&&G.forEach((J,F,N)=>{E.push(J);a(E,H.call(K,J,F,N),H,K)})}var c;let g=function(){function E(){this.target=null;this.defaultPrevented=this.cancellable=!1;this.type=this.item=void 0}var G=E.prototype;G.preventDefault=function(){this.cancellable&&(this.defaultPrevented=!0)};G.reset=function(H){this.defaultPrevented=!1;this.item=H};return E}();const r=new h(g,void 0,E=>{E.item=null;E.target=null;E.defaultPrevented=!1;E.cancellable=!1}),u=()=>{},w=new Set,v=new Set,
D=new Set,B=new Map;let C=0,A=c=function(E){function G(K){K=E.call(this,K)||this;K._chgListeners=[];K._notifications=null;K._timer=null;K._observable=new n.SimpleObservable;K.length=0;K._items=[];Object.defineProperty(t._assertThisInitialized(K),"uid",{value:C++});return K}t._inheritsLoose(G,E);G.isCollection=function(K){return null!=K&&K instanceof c};var H=G.prototype;H.normalizeCtorArgs=function(K){return K?Array.isArray(K)||K instanceof c?{items:K}:K:{}};H[Symbol.iterator]=function*(){yield*this.items};
H.hasEventListener=function(K){return"change"===K?0<this._chgListeners.length:this._emitter.hasEventListener(K)};H.on=function(K,J){if("change"===K){const F=this._chgListeners,N={removed:!1,callback:J};F.push(N);this._notifications&&this._notifications.push({listeners:F.slice(),items:this._items.slice(),changes:[]});return{remove(){this.remove=u;N.removed=!0;F.splice(F.indexOf(N),1)}}}return this._emitter.on(K,J)};H.once=function(K,J){const F=this.on(K,J);return{remove(){F.remove()}}};H.add=function(K,
J){e.trackAccess(this._observable);if(this._emitBeforeChanges(1))return this;J=this.getNextIndex(null!=J?J:null);this._splice(J,0,K);this._emitAfterChanges(1);return this};H.addMany=function(K,J=this._items.length){e.trackAccess(this._observable);if(!K||!K.length||this._emitBeforeChanges(1))return this;J=this.getNextIndex(J);this._splice(J,0,...d(K));this._emitAfterChanges(1);return this};H.removeAll=function(){e.trackAccess(this._observable);if(!this.length||this._emitBeforeChanges(2))return[];const K=
this._splice(0,this.length)||[];this._emitAfterChanges(2);return K};H.clone=function(){e.trackAccess(this._observable);return this._createNewInstance({items:this._items.map(m.clone)})};H.concat=function(...K){e.trackAccess(this._observable);K=K.map(d);return this._createNewInstance({items:this._items.concat(...K)})};H.drain=function(K,J){e.trackAccess(this._observable);if(this.length&&!this._emitBeforeChanges(2)){var F=z.assumeNonNull(this._splice(0,this.length)),N=F.length;for(let L=0;L<N;L++)K.call(J,
F[L],L,F);this._emitAfterChanges(2)}};H.every=function(K,J){e.trackAccess(this._observable);return this._items.every(K,J)};H.filter=function(K,J){e.trackAccess(this._observable);let F;F=2===arguments.length?this._items.filter(K,J):this._items.filter(K);return this._createNewInstance({items:F})};H.find=function(K,J){e.trackAccess(this._observable);return this._items.find(K,J)};H.findIndex=function(K,J){e.trackAccess(this._observable);return this._items.findIndex(K,J)};H.flatten=function(K,J){e.trackAccess(this._observable);
const F=[];a(F,this,K,J);return new c(F)};H.forEach=function(K,J){e.trackAccess(this._observable);return this._items.forEach(K,J)};H.getItemAt=function(K){e.trackAccess(this._observable);return this._items[K]};H.getNextIndex=function(K){e.trackAccess(this._observable);const J=this.length;K=null==K?J:K;0>K?K=0:K>J&&(K=J);return K};H.includes=function(K,J=0){e.trackAccess(this._observable);return this._items.includes(K,J)};H.indexOf=function(K,J=0){e.trackAccess(this._observable);return this._items.indexOf(K,
J)};H.join=function(K=","){e.trackAccess(this._observable);return this._items.join(K)};H.lastIndexOf=function(K,J=this.length-1){e.trackAccess(this._observable);return this._items.lastIndexOf(K,J)};H.map=function(K,J){e.trackAccess(this._observable);K=this._items.map(K,J);return new c({items:K})};H.reorder=function(K,J=this.length-1){e.trackAccess(this._observable);const F=this.indexOf(K);if(-1!==F){0>J?J=0:J>=this.length&&(J=this.length-1);if(F!==J){if(this._emitBeforeChanges(4))return K;this._splice(F,
1);this._splice(J,0,K);this._emitAfterChanges(4)}return K}};H.pop=function(){e.trackAccess(this._observable);if(this.length&&!this._emitBeforeChanges(2)){var K=b(this._splice(this.length-1,1));this._emitAfterChanges(2);return K}};H.push=function(...K){e.trackAccess(this._observable);if(this._emitBeforeChanges(1))return this.length;this._splice(this.length,0,...K);this._emitAfterChanges(1);return this.length};H.reduce=function(K,J){e.trackAccess(this._observable);const F=this._items;return 2===arguments.length?
F.reduce(K,J):F.reduce(K)};H.reduceRight=function(K,J){e.trackAccess(this._observable);const F=this._items;return 2===arguments.length?F.reduceRight(K,J):F.reduceRight(K)};H.remove=function(K){e.trackAccess(this._observable);return this.removeAt(this.indexOf(K))};H.removeAt=function(K){e.trackAccess(this._observable);if(!(0>K||K>=this.length||this._emitBeforeChanges(2)))return K=b(this._splice(K,1)),this._emitAfterChanges(2),K};H.removeMany=function(K){e.trackAccess(this._observable);if(!K||!K.length||
this._emitBeforeChanges(2))return[];K=K instanceof c?K.toArray():K;const J=this._items,F=[],N=K.length;for(let Q=0;Q<N;Q++){var L=J.indexOf(K[Q]);if(-1<L){{var M=Q+1;var S=L+1;const U=Math.min(K.length-M,J.length-S);let W=0;for(;W<U&&K[M+W]===J[S+W];)W++;M=W}M=1+M;(L=this._splice(L,M))&&0<L.length&&F.push.apply(F,L);Q+=M-1}}this._emitAfterChanges(2);return F};H.reverse=function(){e.trackAccess(this._observable);if(this._emitBeforeChanges(4))return this;const K=this._splice(0,this.length);K&&(K.reverse(),
this._splice(0,0,...K));this._emitAfterChanges(4);return this};H.shift=function(){e.trackAccess(this._observable);if(this.length&&!this._emitBeforeChanges(2)){var K=b(this._splice(0,1));this._emitAfterChanges(2);return K}};H.slice=function(K=0,J=this.length){e.trackAccess(this._observable);return this._createNewInstance({items:this._items.slice(K,J)})};H.some=function(K,J){e.trackAccess(this._observable);return this._items.some(K,J)};H.sort=function(K){e.trackAccess(this._observable);if(!this.length||
this._emitBeforeChanges(4))return this;const J=z.assumeNonNull(this._splice(0,this.length));arguments.length?J.sort(K):J.sort();this._splice(0,0,...J);this._emitAfterChanges(4);return this};H.splice=function(K,J,...F){e.trackAccess(this._observable);const N=(J?2:0)|(F.length?1:0);if(this._emitBeforeChanges(N))return[];K=this._splice(K,J,...F)||[];this._emitAfterChanges(N);return K};H.toArray=function(){e.trackAccess(this._observable);return this._items.slice()};H.toJSON=function(){e.trackAccess(this._observable);
return this.toArray()};H.toLocaleString=function(){e.trackAccess(this._observable);return this._items.toLocaleString()};H.toString=function(){e.trackAccess(this._observable);return this._items.toString()};H.unshift=function(...K){e.trackAccess(this._observable);if(!K.length||this._emitBeforeChanges(1))return this.length;this._splice(0,0,...K);this._emitAfterChanges(1);return this.length};H._createNewInstance=function(K){return new this.constructor(K)};H._splice=function(K,J,...F){const N=this._items;
var L=this.constructor.prototype.itemType;let M=void 0;!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=q.schedule(()=>this._dispatchChange()));if(J){M=N.splice(K,J);if(this.hasEventListener("before-remove")){var S=r.acquire();S.target=this;S.cancellable=!0;for(let W=0,fa=M.length;W<fa;W++)J=M[W],S.reset(J),this.emit("before-remove",S),S.defaultPrevented&&
(M.splice(W,1),N.splice(K,0,J),K+=1,--W,--fa);r.release(S)}this.length=this._items.length;if(this.hasEventListener("after-remove")){J=r.acquire();J.target=this;J.cancellable=!1;S=M.length;for(let W=0;W<S;W++)J.reset(M[W]),this.emit("after-remove",J);r.release(J)}}if(F&&F.length){if(L){J=[];for(var Q of F)F=L.ensureType(Q),null==F&&null!=Q||J.push(F);F=J}L=this.hasEventListener("before-add");Q=this.hasEventListener("after-add");J=K===this.length;if(L||Q){var U=r.acquire();U.target=this;U.cancellable=
!0;S=r.acquire();S.target=this;S.cancellable=!1;for(const W of F)L?(U.reset(W),this.emit("before-add",U),U.defaultPrevented||(J?N.push(W):N.splice(K++,0,W),this._set("length",N.length),Q&&(S.reset(W),this.emit("after-add",S)))):(J?N.push(W):N.splice(K++,0,W),this._set("length",N.length),S.reset(W),this.emit("after-add",S));r.release(S);r.release(U)}else{if(J)for(U of F)N.push(U);else N.splice(K,0,...F);this._set("length",N.length)}}(F&&F.length||M&&M.length)&&this._notifyChangeEvent(F,M);return M};
H._emitBeforeChanges=function(K){let J=!1;if(this.hasEventListener("before-changes")){const F=r.acquire();F.target=this;F.cancellable=!0;F.type=K;this.emit("before-changes",F);J=F.defaultPrevented;r.release(F)}return J};H._emitAfterChanges=function(K){if(this.hasEventListener("after-changes")){const J=r.acquire();J.target=this;J.cancellable=!1;J.type=K;this.emit("after-changes",J);r.release(J)}this._observable.notify()};H._notifyChangeEvent=function(K,J){this.hasEventListener("change")&&this._notifications&&
this._notifications[this._notifications.length-1].changes.push({added:K,removed:J})};H._dispatchChange=function(){this._timer&&(this._timer.remove(),this._timer=null);if(this._notifications){var K=this._notifications;this._notifications=null;for(const J of K){K=J.changes;w.clear();v.clear();D.clear();for(const {added:Q,removed:U}of K){if(Q)if(0===D.size&&0===v.size)for(const W of Q)w.add(W);else for(const W of Q)v.has(W)?(D.add(W),v.delete(W)):D.has(W)||w.add(W);if(U)if(0===D.size&&0===w.size)for(const W of U)v.add(W);
else for(const W of U)w.has(W)?w.delete(W):(D.delete(W),v.add(W))}const F=l.acquire();w.forEach(Q=>{F.push(Q)});const N=l.acquire();v.forEach(Q=>{N.push(Q)});const L=this._items,M=J.items,S=l.acquire();D.forEach(Q=>{M.indexOf(Q)!==L.indexOf(Q)&&S.push(Q)});if(J.listeners&&(F.length||N.length||S.length)){K={target:this,added:F,removed:N,moved:S};const Q=J.listeners.length;for(let U=0;U<Q;U++){const W=J.listeners[U];W.removed||W.callback.call(this,K)}}l.release(F);l.release(N);l.release(S)}w.clear();
v.clear();D.clear()}};t._createClass(G,[{key:"items",get:function(){e.trackAccess(this._observable);return this._items},set:function(K){this._emitBeforeChanges(1)||(this._splice(0,this.length,...d(K)),this._emitAfterChanges(1))}}]);return G}(p.EventedAccessor);A.ofType=E=>{if(!E)return c;if(B.has(E))return B.get(E);var G=null;if("function"===typeof E)G=E.prototype.declaredClass;else if(E.base)G=E.base.prototype.declaredClass;else for(var H in E.typeMap){const K=E.typeMap[H].prototype.declaredClass;
G=G?G+` | ${K}`:K}H=function(K){function J(){return K.apply(this,arguments)||this}t._inheritsLoose(J,K);return J}(c);H=k.__decorate([f.subclass(`esri.core.Collection<${G}>`)],H);G={Type:E,ensureType:"function"===typeof E?y.ensureType(E):y.ensureOneOfType(E)};Object.defineProperty(H.prototype,"itemType",{value:G});B.set(E,H);return H};k.__decorate([x.property()],A.prototype,"length",void 0);k.__decorate([x.property()],A.prototype,"items",null);return A=c=k.__decorate([f.subclass("esri.core.Collection")],
A)})},"esri/core/Evented":function(){define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","./handleUtils","./accessorSupport/decorators/subclass","./Accessor"],function(t,k,m,z,y){let x=function(){function f(){this._emitter=new f.EventEmitter(this)}var h=f.prototype;h.emit=function(e,l){return this._emitter.emit(e,l)};h.on=function(e,l){return this._emitter.on(e,l)};h.once=function(e,l){return this._emitter.once(e,l)};h.hasEventListener=function(e){return this._emitter.hasEventListener(e)};
return f}();(function(f){let h=function(){function l(p=null){this.target=p;this._listenersMap=null}var q=l.prototype;q.clear=function(){this._listenersMap&&this._listenersMap.clear()};q.emit=function(p,n){p=this._listenersMap&&this._listenersMap.get(p);if(!p)return!1;const d=this.target||this;[...p].forEach(b=>{b.call(d,n)});return 0<p.length};q.on=function(p,n){if(Array.isArray(p)){var d=p.map(b=>this.on(b,n));return m.handlesGroup(d)}if(-1<p.indexOf(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");
this._listenersMap||(this._listenersMap=new Map);d=this._listenersMap.get(p)||[];d.push(n);this._listenersMap.set(p,d);return{remove:()=>{const b=this._listenersMap&&this._listenersMap.get(p)||[],a=b.indexOf(n);0<=a&&b.splice(a,1)}}};q.once=function(p,n){const d=this.on(p,b=>{d.remove();n.call(null,b)});return d};q.hasEventListener=function(p){p=this._listenersMap&&this._listenersMap.get(p);return null!=p&&0<p.length};return l}();f.EventEmitter=h;f.EventedMixin=l=>{l=function(q){function p(){var d=
q.apply(this,arguments)||this;d._emitter=new h;return d}t._inheritsLoose(p,q);var n=p.prototype;n.destroy=function(){this._emitter.clear()};n.emit=function(d,b){return this._emitter.emit(d,b)};n.on=function(d,b){return this._emitter.on(d,b)};n.once=function(d,b){return this._emitter.once(d,b)};n.hasEventListener=function(d){return this._emitter.hasEventListener(d)};return p}(l);return l=k.__decorate([z.subclass("esri.core.Evented")],l)};let e=function(l){function q(){var n=l.apply(this,arguments)||
this;n._emitter=new x.EventEmitter(t._assertThisInitialized(n));return n}t._inheritsLoose(q,l);var p=q.prototype;p.emit=function(n,d){return this._emitter.emit(n,d)};p.on=function(n,d){return this._emitter.on(n,d)};p.once=function(n,d){return this._emitter.once(n,d)};p.hasEventListener=function(n){return this._emitter.hasEventListener(n)};return q}(y);e=k.__decorate([z.subclass("esri.core.Evented")],e);f.EventedAccessor=e})(x||(x={}));return x})},"esri/core/accessorSupport/tracking/SimpleObservable":function(){define(["exports",
"./ObservationHandle"],function(t,k){let m=function(){function z(){this._observers=new Set}var y=z.prototype;y.observe=function(x){return new k.ObservationHandle(this._observers.add(x),x)};y.notify=function(){var x=this._observers;const f=this._observers.size,h=Array(f);let e=0;for(const l of x)h[e++]=l;for(x=0;x<f;x++)h[x].notify()};return z}();t.SimpleObservable=m;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/views/support/WatchUpdatingTracking":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/maybe ../../core/accessorSupport/get ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../../core/scheduling ../../core/accessorSupport/trackingUtils ../../core/Accessor ../../core/Handles ../../core/watchUtils".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p){t.WatchUpdatingTracking=function(n){function d(){var a=n.apply(this,arguments)||this;a.updating=!1;a.handleId=0;a.handles=new q;a.scheduleHandleId=0;a.pendingPromises=new Set;return a}k._inheritsLoose(d,n);var b=d.prototype;b.destroy=function(){this.removeAll();this.handles.destroy()};b.add=function(a,c,g,r=0){const u=0!==(r&1),w=++this.handleId;u||this.installSyncUpdatingWatch(a,c,w);a=0!==(r&2)?p.init(a,c,g,u):a.watch(c,g,u);this.handles.add(a,w);return{remove:()=>
{this.handles.remove(w)}}};b.addOnCollectionPropertyChange=function(a,c,g,r=0){r=0!==(r&2);const u=++this.handleId;this.handles.add([p.on(a,c,"after-changes",this.createSyncUpdatingCallback()),p.on(a,c,"change",g,r?w=>{g({added:w.items,removed:[],moved:[],target:w})}:void 0)],u);return{remove:()=>{this.handles.remove(u)}}};b.addOnCollectionChange=function(a,c,g=0){g=0!==(g&2);const r=++this.handleId;this.handles.add([a.on("after-changes",this.createSyncUpdatingCallback()),a.on("change",c)],r);g&&
c({added:a.items,removed:[],moved:[],target:a});return{remove:()=>{this.handles.remove(r)}}};b.addPromise=function(a){if(z.isNone(a))return a;const c=++this.handleId;this.handles.add({remove:()=>{this.pendingPromises.delete(a)&&(0!==this.pendingPromises.size||this.handles.has(-42)||this._set("updating",!1))}},c);this.pendingPromises.add(a);this._set("updating",!0);const g=()=>this.handles.remove(c);a.then(g,g);return a};b.removeAll=function(){this.pendingPromises.clear();this.handles.removeAll();
this._set("updating",!1)};b.installSyncUpdatingWatch=function(a,c,g){var r=this.createSyncUpdatingCallback();r=e.reaction(()=>y.valueOf(a,c),r);this.handles.add(r,g);return r};b.createSyncUpdatingCallback=function(){return()=>{this.handles.remove(-42);++this.scheduleHandleId;const a=this.scheduleHandleId;this._get("updating")||this._set("updating",!0);this.handles.add(h.schedule(()=>{a===this.scheduleHandleId&&(this._set("updating",0<this.pendingPromises.size),this.handles.remove(-42))}),-42)}};return d}(l);
m.__decorate([x.property({readOnly:!0})],t.WatchUpdatingTracking.prototype,"updating",void 0);t.WatchUpdatingTracking=m.__decorate([f.subclass("esri.views.support.WatchUpdatingTracking")],t.WatchUpdatingTracking);Object.defineProperty(t,"__esModule",{value:!0})})},"esri/layers/support/TileInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../geometry/support/spatialReferenceUtils ../../geometry/SpatialReference ../../geometry/support/webMercatorUtils ../../geometry/Point ../../geometry ../../core/unitUtils ../../geometry/support/aaBoundingRect ./LOD".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d,b,a,c,g,r,u,w,v){var D;m=new f.JSONMap({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});d=D=function(B){function C(E){E=B.call(this,E)||this;E.dpi=96;E.format=null;E.origin=null;E.minScale=0;E.maxScale=0;E.size=null;E.spatialReference=null;return E}t._inheritsLoose(C,B);C.create=function(E=
{size:256,spatialReference:a.WebMercator}){var G=E.resolutionFactor||1,H=E.scales;const K=E.size||256,J=E.spatialReference||a.WebMercator;if(!b.isValid(J)){G=[];if(H)for(E=0;E<H.length;E++){var F=H[E];G.push({level:E,scale:F,resolution:F})}else for(H=5E-4,E=23;0<=E;E--)G.unshift({level:E,scale:H,resolution:H}),H*=2;return new D({dpi:96,lods:G,origin:new g(0,0,J),size:[K,K],spatialReference:J})}F=b.getInfo(J);E=E.origin?new g({x:E.origin.x,y:E.origin.y,spatialReference:J}):F?new g({x:F.origin[0],y:F.origin[1],
spatialReference:J}):new g({x:0,y:0,spatialReference:J});F=1/(39.37*u.getMetersPerUnitForSR(J)*96);const N=[];if(H)for(G=0;G<H.length;G++){var L=H[G];N.push({level:G,scale:L,resolution:L*F})}else{var M=b.isGeographic(J)?512/K*5.916575275917094E8:256/K*5.91657527591555E8;H=Math.ceil(24/G);N.push({level:0,scale:M,resolution:M*F});for(L=1;L<H;L++)M/=2**G,N.push({level:L,scale:M,resolution:M*F})}return new D({dpi:96,lods:N,origin:E,size:[K,K],spatialReference:J})};var A=C.prototype;A.readOrigin=function(E,
G){return g.fromJSON({spatialReference:G.spatialReference,...E})};A.readSize=function(E,G){return[G.cols,G.rows]};A.writeSize=function(E,G){G.cols=E[0];G.rows=E[0]};A.zoomToScale=function(E){const G=this.scales;if(0>=E)return G[0];if(E>=G.length)return G[G.length-1];{const H=Math.round(E);return G[H]+(H-E)*(G[Math.round(E-.5)]-G[H])}};A.scaleToZoom=function(E){const G=this.scales,H=G.length-1;let K=0;for(;K<H;K++){const J=G[K],F=G[K+1];if(J<=E)break;if(F===E)return K+1;if(J>E&&F<E)return K+1-(E-F)/
(J-F)}return K};A.snapScale=function(E,G=.95){E=this.scaleToZoom(E);return E%Math.floor(E)>=G?this.zoomToScale(Math.ceil(E)):this.zoomToScale(Math.floor(E))};A.tileAt=function(E,G,H,K){var J=this.lodAt(E);if(!J)return null;let F;if("number"===typeof G)F=G,G=H;else{if(b.equals(G.spatialReference,this.spatialReference))F=G.x,G=G.y;else{K=c.project(G,this.spatialReference);if(!K)return null;F=K.x;G=K.y}K=H}H=J.resolution*this.size[0];J=J.resolution*this.size[1];K||(K={id:null,level:0,row:0,col:0,extent:w.create()});
K.level=E;K.row=Math.floor((this.origin.y-G)/J+.001);K.col=Math.floor((F-this.origin.x)/H+.001);this.updateTileInfo(K);return K};A.updateTileInfo=function(E,G=0){var H=this.lodAt(E.level);H||1!==G||(G=this.lods[this.lods.length-1],G.level<E.level&&(H=G));if(H){var K=E.level-H.level;G=H.resolution*this.size[0]/2**K;H=H.resolution*this.size[1]/2**K;E.id=`${E.level}/${E.row}/${E.col}`;E.extent||(E.extent=w.create());E.extent[0]=this.origin.x+E.col*G;E.extent[1]=this.origin.y-(E.row+1)*H;E.extent[2]=
E.extent[0]+G;E.extent[3]=E.extent[1]+H}};A.upsampleTile=function(E){const G=this._upsampleLevels[E.level];if(!G||-1===G.parentLevel)return!1;E.level=G.parentLevel;E.row=Math.floor(E.row/G.factor+.001);E.col=Math.floor(E.col/G.factor+.001);this.updateTileInfo(E);return!0};A.getTileBounds=function(E,G){var {resolution:H}=this.lodAt(G.level);const K=H*this.size[0];H*=this.size[1];E[0]=this.origin.x+G.col*K;E[1]=this.origin.y-(G.row+1)*H;E[2]=E[0]+K;E[3]=E[1]+H;return E};A.lodAt=function(E){return this._levelToLOD&&
this._levelToLOD[E]||null};A.clone=function(){return D.fromJSON(this.write({}))};A._initializeUpsampleLevels=function(){const E=this.lods;this._upsampleLevels=[];let G=null;for(let H=0;H<E.length;H++){const K=E[H];this._upsampleLevels[K.level]={parentLevel:G?G.level:-1,factor:G?G.resolution/K.resolution:0};G=K}};t._createClass(C,[{key:"isWrappable",get:function(){const {spatialReference:E,origin:G}=this;if(E&&G){const H=b.getInfo(E);return E.isWrappable&&Math.abs(H.origin[0]-G.x)<=H.dx}return!1}},
{key:"lods",set:function(E){let G=0,H=0;const K=[];this._levelToLOD={};E&&(G=-Infinity,H=Infinity,E.forEach(J=>{K.push(J.scale);G=J.scale>G?J.scale:G;H=J.scale<H?J.scale:H;this._levelToLOD[J.level]=J}));this._set("scales",K);this._set("minScale",G);this._set("maxScale",H);this._set("lods",E);this._initializeUpsampleLevels()}}]);return C}(d.JSONSupport);k.__decorate([x.property({type:Number,json:{write:!0}})],d.prototype,"compressionQuality",void 0);k.__decorate([x.property({type:Number,json:{write:!0}})],
d.prototype,"dpi",void 0);k.__decorate([x.property({type:String,json:{read:m.read,write:m.write,origins:{"web-scene":{read:!1,write:!1}}}})],d.prototype,"format",void 0);k.__decorate([x.property({readOnly:!0})],d.prototype,"isWrappable",null);k.__decorate([x.property({type:g,json:{write:!0}})],d.prototype,"origin",void 0);k.__decorate([h.reader("origin")],d.prototype,"readOrigin",null);k.__decorate([x.property({type:[v],value:null,json:{write:!0}})],d.prototype,"lods",null);k.__decorate([x.property({readOnly:!0})],
d.prototype,"minScale",void 0);k.__decorate([x.property({readOnly:!0})],d.prototype,"maxScale",void 0);k.__decorate([x.property({readOnly:!0})],d.prototype,"scales",void 0);k.__decorate([x.property({cast:B=>Array.isArray(B)?B:"number"===typeof B?[B,B]:[256,256]})],d.prototype,"size",void 0);k.__decorate([h.reader("size",["rows","cols"])],d.prototype,"readSize",null);k.__decorate([l.writer("size",{cols:{type:y.Integer},rows:{type:y.Integer}})],d.prototype,"writeSize",null);k.__decorate([x.property({type:a,
json:{write:!0}})],d.prototype,"spatialReference",void 0);return d=D=k.__decorate([e.subclass("esri.layers.support.TileInfo")],d)})},"esri/core/unitUtils":function(){define("exports ./has ./jsonMap ../geometry/support/WKIDUnitConversion ../geometry/support/spatialReferenceUtils ../geometry/SpatialReference ../geometry/support/Ellipsoid ../geometry/projectionEllipsoid".split(" "),function(t,k,m,z,y,x,f,h){function e(J){if(J=G[J])return J;throw Error("unknown measure");}function l(J){return E[J].baseUnit}
function q(J,F=null){F=F||e(J);return E[F].baseUnit===J}function p(J,F,N){if(F===N)return J;const L=e(F);if(L!==e(N))throw Error("incompatible units");J=q(F,L)?J:J*E[L].units[F].inBaseUnits;return q(N,L)?J:J/E[L].units[N].inBaseUnits}function n(J,F){return 3E3>p(J,F,"meters")?"meters":"kilometers"}function d(J,F){return 1E5>p(J,F,"meters")?"meters":"kilometers"}function b(J,F){return 1E3>p(J,F,"feet")?"feet":"miles"}function a(J,F){return 1E5>p(J,F,"feet")?"feet":"miles"}function c(J){return A.fromJSON(J.toLowerCase())||
null}function g(J,F=f.earth.metersPerDegree){return r(J,!0)||F}function r(J,F=!1){let N,L,M=null;null!=J&&("object"===typeof J?(N=J.wkid,L=J.wkt):"number"===typeof J?N=J:"string"===typeof J&&(L=J));if(N){if(y.isWKIDFromMars(N))return f.mars.metersPerDegree;if(y.isWKIDFromMoon(N))return f.moon.metersPerDegree;M=D.values[D[N]];!M&&F&&C.has(N)&&(M=w)}else L&&(-1!==L.search(/^PROJCS/i)?(J=v.exec(L))&&J[1]&&(M=parseFloat(J[1].split(",")[1])):-1!==L.search(/^GEOCCS/i)&&(J=B.exec(L))&&J[1]&&(M=parseFloat(J[1].split(",")[1])));
return M}function u(J){let F,N,L=null;null!=J&&("object"===typeof J?(F=J.wkid,N=J.wkt):"number"===typeof J?F=J:"string"===typeof J&&(N=J));F?L=D.units[D[F]]:N&&-1!==N.search(/^PROJCS/i)&&(J=v.exec(N))&&J[1]&&(L=(J=/[\\"\\']{1}([^\\"\\']+)/.exec(J[1]))&&J[1]);return L?c(L):null}const w=f.earth.radius*Math.PI/200,v=/UNIT\[([^\]]+)\]\]$/i,D=z,B=/UNIT\[([^\]]+)\]/i,C=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),A=m.strict()({meter:"meters",foot:"feet",foot_us:"us-feet",
foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"});k={millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},
meters:{inBaseUnits:1},kilometers:{inBaseUnits:1E3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}};z={"square-millimeters":{inBaseUnits:1E-6},"square-centimeters":{inBaseUnits:1E-4},"square-decimeters":{inBaseUnits:.1*.1},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:1E6},"square-inches":{inBaseUnits:6.4516E-4},"square-feet":{inBaseUnits:.09290304},
"square-yards":{inBaseUnits:.83612736},"square-miles":{inBaseUnits:2589988.110336},"square-us-feet":{inBaseUnits:(J=>J*J)(1200/3937)},acres:{inBaseUnits:4046.8564224},ares:{inBaseUnits:100},hectares:{inBaseUnits:1E4}};const E={length:{baseUnit:"meters",units:k},area:{baseUnit:"square-meters",units:z},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1E3*1E-9},"cubic-centimeters":{inBaseUnits:.001},"cubic-decimeters":{inBaseUnits:1},"cubic-meters":{inBaseUnits:1E3},
"cubic-kilometers":{inBaseUnits:1E12},"cubic-inches":{inBaseUnits:.016387064},"cubic-feet":{inBaseUnits:.09290304*304.8},"cubic-yards":{inBaseUnits:764.554857984},"cubic-miles":{inBaseUnits:4.16818182544058E12}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},G=function(){const J={};for(const F in E)for(const N in E[F].units)J[N]=F;return J}(),H={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",
esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},K={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",
esriYards:"yards"};k=m.strict()(H);z=m.strict()(K);m=m.strict()({...H,...K});t.areaUnitsJSONMap=k;t.baseUnitForMeasure=l;t.baseUnitForUnit=function(J){return l(e(J))};t.convertUnit=p;t.getDefaultUnitSystem=function(J){if(!J)return null;switch(u(J)){case "feet":case "us-feet":case "clarke-feet":case "clarke-yards":case "clarke-links":case "sears-yards":case "sears-feet":case "sears-chains":case "benoit-1895-b-chains":case "indian-yards":case "indian-1937-yards":case "gold-coast-feet":case "sears-1922-truncated-chains":return"imperial";
case "50-kilometers":case "150-kilometers":case "meters":return"metric"}return null};t.getMetersPerUnit=r;t.getMetersPerUnitForSR=g;t.getMetersPerVerticalUnitForSR=function(J){if(J&&"object"===typeof J&&!y.isEarth(J))return 1;J=g(J);return 1E5<J?1:J};t.getUnitString=u;t.getVerticalUnitStringForSR=function(J){const F=g(J),N=J instanceof x?h.getReferenceEllipsoid(J).metersPerDegree:1E5;return F>=N?"meters":u(J)};t.inchesPerMeter=39.37;t.isBaseUnit=q;t.isMeasurementSystem=function(J){return"imperial"===
J||"metric"===J};t.lengthToDegrees=function(J,F,N){return p(J,F,"meters")/(N*Math.PI/180)};t.lengthUnitsJSONMap=z;t.measureForUnit=e;t.measurementAreaUnits="metric imperial square-inches square-feet square-yards square-miles square-us-feet square-meters square-kilometers acres ares hectares".split(" ");t.measurementLengthUnits="metric imperial inches feet yards miles nautical-miles us-feet meters kilometers".split(" ");t.preferredImperialAreaUnit=function(J,F){return 1E6>p(J,F,"square-feet")?"square-feet":
"square-miles"};t.preferredImperialLengthUnit=b;t.preferredImperialVerticalLengthUnit=a;t.preferredLengthUnit=function(J,F,N){switch(N){case "metric":return n(J,F);case "imperial":return b(J,F);default:return N}};t.preferredMetricAreaUnit=function(J,F){return 3E6>p(J,F,"square-meters")?"square-meters":"square-kilometers"};t.preferredMetricLengthUnit=n;t.preferredMetricVerticalLengthUnit=d;t.preferredVerticalLengthUnit=function(J,F,N){switch(N){case "metric":return d(J,F);case "imperial":return a(J,
F);default:return N}};t.unitFromRESTJSON=c;t.unitToRESTJSON=function(J){return A.toJSON(J)||null};t.unitsJSONMap=m;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/geometry/projectionEllipsoid":function(){define(["exports","./support/spatialReferenceUtils","./SpatialReference","./support/Ellipsoid"],function(t,k,m,z){function y(l){return new m({wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${l.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`})}const x=y(z.earth),f=y(z.mars),h=y(z.moon),e=new m({wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${z.earth.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`});t.SphericalECEFSpatialReference=x;t.SphericalPCPFMars=f;t.SphericalPCPFMoon=h;t.WGS84ECEFSpatialReference=e;t.createSphericalPCPF=y;t.getReferenceEllipsoid=function(l){return l&&(k.isMars(l)||l===f)?z.mars:l&&(k.isMoon(l)||l===h)?z.moon:z.earth};t.getReferenceEllipsoidFromWKID=function(l){return k.isWKIDFromMars(l)?z.mars:k.isWKIDFromMoon(l)?z.moon:z.earth};t.getSphericalPCPF=function(l){return l&&(k.isMars(l)||l===f)?f:l&&(k.isMoon(l)||l===h)?h:x};t.getSphericalPCPFForEllipsoid=function(l){return l&&
l===z.mars?f:l&&l===z.moon?h:x};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/geometry/support/aaBoundingRect":function(){define(["exports","../../core/has","../../core/maybe","../Extent"],function(t,k,m,z){function y(d=n){return[d[0],d[1],d[2],d[3]]}function x(d){return d[0]>=d[2]?0:d[2]-d[0]}function f(d){return d[1]>=d[3]?0:d[3]-d[1]}function h(d,b,a){return b>=d[0]&&a>=d[1]&&b<=d[2]&&a<=d[3]}function e(d,b){d[0]=b[0];d[1]=b[1];d[2]=b[2];d[3]=b[3];return d}function l(d){return 4===
d.length}function q(d,b,a){return d<b?b:d>a?a:d}const p=[Infinity,Infinity,-Infinity,-Infinity],n=[0,0,0,0];t.NEGATIVE_INFINITY=p;t.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];t.UNIT=[0,0,1,1];t.ZERO=n;t.allFinite=function(d){for(let b=0;4>b;b++)if(!isFinite(d[b]))return!1;return!0};t.area=function(d){return x(d)*f(d)};t.center=function(d,b=[0,0]){b[0]=(d[0]+d[2])/2;b[1]=(d[1]+d[3])/2;return b};t.clone=function(d){return[d[0],d[1],d[2],d[3]]};t.contains=function(d,b){return b[0]>=d[0]&&
b[2]<=d[2]&&b[1]>=d[1]&&b[3]<=d[3]};t.containsPoint=function(d,b){return h(d,b[0],b[1])};t.containsPointObject=function(d,b){return h(d,b.x,b.y)};t.containsPointWithMargin=function(d,b,a){return b[0]>=d[0]-a&&b[1]>=d[1]-a&&b[0]<=d[2]+a&&b[1]<=d[3]+a};t.containsXY=h;t.create=y;t.diameter=function(d){const b=x(d);d=f(d);return Math.sqrt(b*b+d*d)};t.distance=function(d,b){const a=(d[1]+d[3])/2,c=Math.max(Math.abs(b[0]-(d[0]+d[2])/2)-x(d)/2,0);d=Math.max(Math.abs(b[1]-a)-f(d)/2,0);return Math.sqrt(c*
c+d*d)};t.empty=function(d){return d?e(d,p):y(p)};t.equals=function(d,b,a){if(m.isNone(d)||m.isNone(b))return d===b;if(!l(d)||!l(b))return!1;if(a)for(let c=0;c<d.length;c++){if(!a(d[c],b[c]))return!1}else for(a=0;a<d.length;a++)if(d[a]!==b[a])return!1;return!0};t.expand=function(d,b,a=d){if("length"in b)if(l(b))a[0]=Math.min(d[0],b[0]),a[1]=Math.min(d[1],b[1]),a[2]=Math.max(d[2],b[2]),a[3]=Math.max(d[3],b[3]);else{if(2===b.length||3===b.length)a[0]=Math.min(d[0],b[0]),a[1]=Math.min(d[1],b[1]),a[2]=
Math.max(d[2],b[0]),a[3]=Math.max(d[3],b[1])}else switch(b.type){case "extent":a[0]=Math.min(d[0],b.xmin);a[1]=Math.min(d[1],b.ymin);a[2]=Math.max(d[2],b.xmax);a[3]=Math.max(d[3],b.ymax);break;case "point":a[0]=Math.min(d[0],b.x),a[1]=Math.min(d[1],b.y),a[2]=Math.max(d[2],b.x),a[3]=Math.max(d[3],b.y)}return a};t.expandPointInPlace=function(d,b){b[0]<d[0]&&(d[0]=b[0]);b[0]>d[2]&&(d[2]=b[0]);b[1]<d[1]&&(d[1]=b[1]);b[1]>d[3]&&(d[3]=b[1])};t.expandWithNestedArray=function(d,b,a=d){const c=b.length;let g=
d[0],r=d[1],u=d[2];d=d[3];for(let w=0;w<c;w++){const v=b[w];g=Math.min(g,v[0]);r=Math.min(r,v[1]);u=Math.max(u,v[0]);d=Math.max(d,v[1])}a[0]=g;a[1]=r;a[2]=u;a[3]=d;return a};t.fromExtent=function(d,b=y()){b[0]=d.xmin;b[1]=d.ymin;b[2]=d.xmax;b[3]=d.ymax;return b};t.fromValues=function(d,b,a,c,g=y()){g[0]=d;g[1]=b;g[2]=a;g[3]=c;return g};t.height=f;t.intersection=function(d,b,a=d){const c=b[0],g=b[1],r=b[2];b=b[3];a[0]=q(d[0],c,r);a[1]=q(d[1],g,b);a[2]=q(d[2],c,r);a[3]=q(d[3],g,b);return a};t.intersects=
function(d,b){return Math.max(b[0],d[0])<=Math.min(b[2],d[2])&&Math.max(b[1],d[1])<=Math.min(b[3],d[3])};t.is=l;t.isPoint=function(d){return(0===x(d)||!isFinite(d[0]))&&(0===f(d)||!isFinite(d[1]))};t.offset=function(d,b,a,c=d){c[0]=d[0]+b;c[1]=d[1]+a;c[2]=d[2]+b;c[3]=d[3]+a;return c};t.pad=function(d,b,a=d){a[0]=d[0]-b;a[1]=d[1]-b;a[2]=d[2]+b;a[3]=d[3]+b;return a};t.set=e;t.setMax=function(d,b,a=d){a[2]=b[0];a[3]=b[1];a!==d&&(a[0]=d[0],a[1]=d[1]);return d};t.setMin=function(d,b,a=d){a[0]=b[0];a[1]=
b[1];a!==d&&(a[2]=d[2],a[3]=d[3]);return a};t.size=function(d,b){b[0]=d[2]-d[0];b[1]=d[3]-d[1]};t.toExtent=function(d,b){return new z({xmin:d[0],ymin:d[1],xmax:d[2],ymax:d[3],spatialReference:b})};t.width=x;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/layers/support/LOD":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p){var n;m=n=function(d){function b(a){a=d.call(this,a)||this;a.level=0;a.levelValue=null;a.resolution=0;a.scale=0;return a}t._inheritsLoose(b,d);b.prototype.clone=function(){return new n({level:this.level,levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})};return b}(p.JSONSupport);k.__decorate([x.property({type:y.Integer,json:{write:!0}})],m.prototype,"level",void 0);k.__decorate([x.property({type:String,json:{write:!0}})],m.prototype,"levelValue",
void 0);k.__decorate([x.property({type:Number,json:{write:!0}})],m.prototype,"resolution",void 0);k.__decorate([x.property({type:Number,json:{write:!0}})],m.prototype,"scale",void 0);return m=n=k.__decorate([h.subclass("esri.layers.support.LOD")],m)})},"esri/views/2d/tiling/TileInfoView":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../geometry/support/spatialReferenceUtils ./TileKey ./LODInfo ./TileCoverage ./TileSpan".split(" "),function(t,k,m,z,y,x){const f=new m("0/0/0/0");
let h=function(){function l(p,n,d,b,a,c,g,r){this.x=p;this.ymin=n;this.ymax=d;this.invM=b;this.leftAdjust=a;this.rightAdjust=c;this.leftBound=g;this.rightBound=r}l.create=function(p,n){p[1]>n[1]&&([p,n]=[n,p]);const [d,b]=p,[a,c]=n;p=a-d;n=c-b;n=0!==n?p/n:0;const g=(Math.ceil(b)-b)*n,r=(Math.floor(b)-b)*n;return new l(d,Math.floor(b),Math.ceil(c),n,0>p?g:r,0>p?r:g,0>p?a:d,0>p?d:a)};var q=l.prototype;q.incrRow=function(){this.x+=this.invM};q.getLeftCol=function(){return Math.max(this.x+this.leftAdjust,
this.leftBound)};q.getRightCol=function(){return Math.min(this.x+this.rightAdjust,this.rightBound)};return l}();const e=[[0,0],[0,0],[0,0],[0,0]];return function(){function l(p,n){this.tileInfo=p;this.fullExtent=n;this.scales=[];this._lodInfos=null;this._infoByScale={};this._infoByLevel={};const d=p.lods.slice();d.sort(function(a,c){return c.scale-a.scale});const b=this._lodInfos=d.map(a=>z.create(p,a,n));d.forEach((a,c)=>{this._infoByLevel[a.level]=b[c];this._infoByScale[a.scale]=b[c];this.scales[c]=
a.scale},this);this._wrap=p.isWrappable}var q=l.prototype;q.getLODInfoAt=function(p){return this._infoByLevel["number"===typeof p?p:p.level]};q.getTileBounds=function(p,n,d=!1){f.set(n);return(n=this._infoByLevel[f.level])?n.getTileBounds(p,f,d):p};q.getTileCoords=function(p,n,d=!1){f.set(n);return(n=this._infoByLevel[f.level])?n.getTileCoords(p,f,d):p};q.getTileCoverage=function(p,n=192,d="closest"){d="closest"===d?this.getClosestInfoForScale(p.scale):this.getSmallestInfoForScale(p.scale);const b=
y.pool.acquire(d),a=this._wrap;var c=Infinity;let g=-Infinity;const r=b.spans;e[0][0]=e[0][1]=e[1][1]=e[3][0]=-n;e[1][0]=e[2][0]=p.size[0]+n;e[2][1]=e[3][1]=p.size[1]+n;for(u of e)p.toMap(u,u),u[0]=d.getColumnForX(u[0]),u[1]=d.getRowForY(u[1]);p=[];var u=3;for(n=0;4>n;n++)e[n][1]===e[u][1]?u=n:(u=h.create(e[n],e[u]),c=Math.min(u.ymin,c),g=Math.max(u.ymax,g),void 0===p[u.ymin]&&(p[u.ymin]=[]),p[u.ymin].push(u),u=n);if(null==c||null==g||100<g-c)return null;for(n=[];c<g;){null!=p[c]&&(n=n.concat(p[c]));
u=Infinity;var w=-Infinity;for(var v=n.length-1;0<=v;v--){var D=n[v];u=Math.min(u,D.getLeftCol());w=Math.max(w,D.getRightCol())}u=Math.floor(u);w=Math.floor(w);if(c>=d.first[1]&&c<=d.last[1])if(a)if(d.size[0]<d.worldSize[0])for(v=Math.floor(w/d.worldSize[0]),D=Math.floor(u/d.worldSize[0]);D<=v;D++)r.push(new x(c,Math.max(d.getFirstColumnForWorld(D),u),Math.min(d.getLastColumnForWorld(D),w)));else r.push(new x(c,u,w));else u>d.last[0]||w<d.first[0]||(u=Math.max(u,d.first[0]),w=Math.min(w,d.last[0]),
r.push(new x(c,u,w)));c+=1;for(u=n.length-1;0<=u;u--)w=n[u],w.ymax>=c?w.incrRow():n.splice(u,1)}return b};q.getTileParentId=function(p){f.set(p);p=this._lodInfos.indexOf(this._infoByLevel[f.level])-1;if(0>p)return null;this._getTileIdAtLOD(f,this._lodInfos[p],f);return f.id};q.getTileResolution=function(p){return(p=this._infoByLevel["object"===typeof p?p.level:p])?p.resolution:-1};q.getTileScale=function(p){return(p=this._infoByLevel[p.level])?p.scale:-1};q.intersects=function(p,n){f.set(n);n=this._infoByLevel[f.level];
const d=p.lodInfo;if(d.resolution>n.resolution){this._getTileIdAtLOD(f,d,f);var b=d.denormalizeCol(f.col,f.world);for(var a of p.spans)if(a.row===f.row&&a.colFrom<=b&&a.colTo>=b)return!0}if(d.resolution<n.resolution){const [g,r,u,w]=p.spans.reduce((v,D)=>{v[0]=Math.min(v[0],D.row);v[1]=Math.max(v[1],D.row);v[2]=Math.min(v[2],D.colFrom);v[3]=Math.max(v[3],D.colTo);return v},[Infinity,-Infinity,Infinity,-Infinity]);b=n.denormalizeCol(f.col,f.world);p=d.getColumnForX(n.getXForColumn(b));a=d.getRowForY(n.getYForRow(f.row));
b=d.getColumnForX(n.getXForColumn(b+1))-1;n=d.getRowForY(n.getYForRow(f.row+1))-1;return!(p>w||b<u||a>r||n<g)}const c=d.denormalizeCol(f.col,f.world);return p.spans.some(g=>g.row===f.row&&g.colFrom<=c&&g.colTo>=c)};q.normalizeBounds=function(p,n,d){p[0]=n[0];p[1]=n[1];p[2]=n[2];p[3]=n[3];this._wrap&&(n=k.getInfo(this.tileInfo.spatialReference),d=-d*(n.valid[1]-n.valid[0]),p[0]+=d,p[2]+=d);return p};q.getSmallestInfoForScale=function(p){const n=this.scales;if(this._infoByScale[p])return this._infoByScale[p];
if(p>n[0])return this._infoByScale[n[0]];for(let d=1;d<n.length-1;d++)if(p>n[d]+1E-6)return this._infoByScale[n[d-1]];return this._infoByScale[n[n.length-1]]};q.getClosestInfoForScale=function(p){const n=this.scales;if(this._infoByScale[p])return this._infoByScale[p];p=n.reduce((d,b)=>Math.abs(b-p)<Math.abs(d-p)?b:d,n[0]);return this._infoByScale[p]};q.scaleToLevel=function(p){const n=this.scales;if(this._infoByScale[p])return this._infoByScale[p].level;for(let d=n.length-1;0<=d;d--)if(p<n[d])return d===
n.length-1?this._infoByScale[n[n.length-1]].level:this._infoByScale[n[d]].level+(n[d]-p)/(n[d]-n[d+1]);return this._infoByScale[n[0]].level};q.scaleToZoom=function(p){return this.tileInfo.scaleToZoom(p)};q._getTileIdAtLOD=function(p,n,d){const b=this._infoByLevel[d.level];p.set(d);if(n.resolution<b.resolution)return null;if(n.resolution===b.resolution)return p;p.level=n.level;p.col=Math.floor(d.col*b.resolution/n.resolution+.01);p.row=Math.floor(d.row*b.resolution/n.resolution+.01);return p};t._createClass(l,
[{key:"spatialReference",get:function(){return this.tileInfo.spatialReference}}]);return l}()})},"esri/views/2d/tiling/TileKey":function(){define(["../../../chunks/_rollupPluginBabelHelpers","../../../core/ObjectPool"],function(t,k){let m=function(){function z(x,f,h,e){this.set(x,f,h,e)}z.getId=function(x,f,h,e){return"object"===typeof x?`${x.level}/${x.row}/${x.col}/${x.world}`:`${x}/${f}/${h}/${e}`};var y=z.prototype;y.acquire=function(x,f,h,e){this.set(x,f,h,e)};y.contains=function(x){const f=
x.level-this.level;return this.row===x.row>>f&&this.col===x.col>>f&&this.world===x.world};y.equals=function(x){return this.level===x.level&&this.row===x.row&&this.col===x.col&&this.world===x.world};y.clone=function(){return new z(this)};y.release=function(){this.world=this.col=this.row=this.level=0};y.set=function(x,f,h,e){if(null==x)this.world=this.col=this.row=this.level=0;else if("object"===typeof x)this.level=x.level||0,this.row=x.row||0,this.col=x.col||0,this.world=x.world||0;else if("string"===
typeof x){const [l,q,p,n]=x.split("/");this.level=parseFloat(l);this.row=parseFloat(q);this.col=parseFloat(p);this.world=parseFloat(n)}else this.level=+x,this.row=+f,this.col=+h,this.world=+e||0;return this};y.toString=function(){return`${this.level}/${this.row}/${this.col}/${this.world}`};y.getParentKey=function(){return 0>=this.level?null:new z(this.level-1,this.row>>1,this.col>>1,this.world)};y.getChildKeys=function(){const x=this.level+1,f=this.row<<1,h=this.col<<1,e=this.world;return[new z(x,
f,h,e),new z(x,f,h+1,e),new z(x,f+1,h,e),new z(x,f+1,h+1,e)]};y.compareRowMajor=function(x){return this.row<x.row?-1:this.row>x.row?1:this.col<x.col?-1:this.col>x.col?1:0};t._createClass(z,[{key:"key",get:function(){return this}},{key:"id",get:function(){return this.toString()},set:function(x){this.set(x)}}]);return z}();m.pool=new k(m,null,null,25,50);return m})},"esri/views/2d/tiling/LODInfo":function(){define(["../../../geometry/support/spatialReferenceUtils","./TileKey"],function(t,k){function m(y,
x,f){y[0]=x;y[1]=f;return y}const z=new k("0/0/0/0");return function(){function y(f,h,e,l,q,p,n,d,b,a,c,g){this.level=f;this.resolution=h;this.scale=e;this.origin=l;this.first=q;this.last=p;this.size=n;this.norm=d;this.worldStart=b;this.worldEnd=a;this.worldSize=c;this.wrap=g}y.create=function(f,h,e){var l=t.getInfo(f.spatialReference);const q=[f.origin.x,f.origin.y],p=[f.size[0]*h.resolution,f.size[1]*h.resolution],n=[-Infinity,-Infinity],d=[Infinity,Infinity],b=[Infinity,Infinity];e&&(m(n,Math.max(0,
Math.floor((e.xmin-q[0])/p[0])),Math.max(0,Math.floor((q[1]-e.ymax)/p[1]))),m(d,Math.max(0,Math.floor((e.xmax-q[0])/p[0])),Math.max(0,Math.floor((q[1]-e.ymin)/p[1]))),m(b,d[0]-n[0]+1,d[1]-n[1]+1));let a;f.isWrappable?(f=[Math.ceil(Math.round((l.valid[1]-l.valid[0])/h.resolution)/f.size[0]),b[1]],l=[Math.floor((l.origin[0]-q[0])/p[0]),n[1]],e=[f[0]+l[0]-1,d[1]],a=!0):(l=n,e=d,f=b,a=!1);return new y(h.level,h.resolution,h.scale,q,n,d,b,p,l,e,f,a)};var x=y.prototype;x.normalizeCol=function(f){if(!this.wrap)return f;
const h=this.worldSize[0];return 0>f?h-1-Math.abs((f+1)%h):f%h};x.denormalizeCol=function(f,h){return this.wrap?this.worldSize[0]*h+f:f};x.getWorldForColumn=function(f){return this.wrap?Math.floor(f/this.worldSize[0]):0};x.getFirstColumnForWorld=function(f){return f*this.worldSize[0]+this.first[0]};x.getLastColumnForWorld=function(f){return f*this.worldSize[0]+this.first[0]+this.size[0]-1};x.getColumnForX=function(f){return(f-this.origin[0])/this.norm[0]};x.getXForColumn=function(f){return this.origin[0]+
f*this.norm[0]};x.getRowForY=function(f){return(this.origin[1]-f)/this.norm[1]};x.getYForRow=function(f){return this.origin[1]-f*this.norm[1]};x.getTileBounds=function(f,h,e=!1){z.set(h);var l=e?z.col:this.denormalizeCol(z.col,z.world),q=z.row;h=this.getXForColumn(l);e=this.getYForRow(q+1);l=this.getXForColumn(l+1);q=this.getYForRow(q);f[0]=h;f[1]=e;f[2]=l;f[3]=q;return f};x.getTileCoords=function(f,h,e=!1){z.set(h);h=e?z.col:this.denormalizeCol(z.col,z.world);Array.isArray(f)?m(f,this.getXForColumn(h),
this.getYForRow(z.row)):(f.x=this.getXForColumn(h),f.y=this.getYForRow(z.row));return f};return y}()})},"esri/views/2d/tiling/TileCoverage":function(){define(["../../../core/ObjectPool"],function(t){let k=function(){function m(){this.spans=[]}var z=m.prototype;z.acquire=function(y){this.lodInfo=y};z.release=function(){this.lodInfo=null;this.spans.length=0};z.forEach=function(y,x){const {spans:f,lodInfo:h}=this,{level:e}=h;if(0!==f.length)for(const {row:l,colFrom:q,colTo:p}of f)for(let n=q;n<=p;n++)y.call(x,
e,l,h.normalizeCol(n),h.getWorldForColumn(n))};return m}();k.pool=new t(k);return k})},"esri/views/2d/tiling/TileSpan":function(){define(function(){return function(t,k,m){this.row=t;this.colFrom=k;this.colTo=m}})},"esri/views/2d/layers/features/support/TileStore":function(){define("../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/has ../../../../../core/Evented ../../../tiling/TileKey ../../../tiling/TileCoverage ./Tile ../../../../../chunks/rbush".split(" "),function(t,k,m,z,y,
x,f){const h={added:[],removed:[]},e=new Set,l=new z(0,0,0,0);return function(q){function p(d){var b=q.call(this)||this;b._tiles=new Map;b._index=f.rbush(9,k("csp-restrictions")?a=>({minX:a.bounds[0],minY:a.bounds[1],maxX:a.bounds[2],maxY:a.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]);b.tiles=[];b.tileScheme=d;return b}t._inheritsLoose(p,q);var n=p.prototype;n.destroy=function(){this.clear()};n.clear=function(){this.tiles.length=0;this._tiles.clear();this._index.clear()};n.has=
function(d){return this._tiles.has(d)};n.get=function(d){return this._tiles.get(d)};n.findByKey=function(d){return this._tiles.get(d.id)};n.minLOD=function(){return Math.min(...this.tiles.map(d=>d.level))};n.intersections=function(d,b){var a="string"===typeof d?this.get(d):d;if(!a)return[];var c=b*a.resolution;b=a.bounds[0]-c;d=a.bounds[1]-c;const g=a.bounds[2]+c;a=a.bounds[3]+c;c=[];for(const r of this._index.search({minX:b,minY:d,maxX:g,maxY:a})){const u=r.bounds.slice();u[0]=Math.max(u[0],b);u[1]=
Math.max(u[1],d);u[2]=Math.min(u[2],g);u[3]=Math.min(u[3],a);0<u[2]-u[0]&&0<u[3]-u[1]&&c.push({bounds:u,tile:r})}return c};n.boundsIntersections=function(d){return this._index.search({minX:d[0],minY:d[1],maxX:d[2],maxY:d[3]})};n.updateTiles=function(d){const b={added:[],removed:[]};for(const a of d.added)if(!this.has(a)){const c=new x.Tile(this.tileScheme,a);this._tiles.set(a,c);this._index.insert(c);b.added.push(c)}for(const a of d.removed)this.has(a)&&(d=this.get(a),this._tiles.delete(a),this._index.remove(d),
b.removed.push(d));this.tiles.length=0;this._tiles.forEach(a=>this.tiles.push(a));(b.added.length||b.removed.length)&&this.emit("update",b)};n.setViewState=function(d){if(d=this.tileScheme.getTileCoverage(d,0)){var {spans:b,lodInfo:a}=d,{level:c}=a;if(0<b.length)for(const {row:r,colFrom:u,colTo:w}of b)for(var g=u;g<=w;g++){const v=l.set(c,r,a.normalizeCol(g),a.getWorldForColumn(g)).id;e.add(v);if(!this.has(v)){const D=new x.Tile(this.tileScheme,v);this._tiles.set(v,D);this._index.insert(D);this.tiles.push(D);
h.added.push(D)}}for(c=this.tiles.length-1;0<=c;c--)g=this.tiles[c],e.has(g.id)||(this._tiles.delete(g.id),this.tiles.splice(c,1),this._index.remove(g),h.removed.push(g));(h.added.length||h.removed.length)&&this.emit("update",h);y.pool.release(d);e.clear();h.added.length=0;h.removed.length=0}};return p}(m)})},"esri/views/2d/layers/features/support/Tile":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/ArrayPool ../../../../../geometry/Extent ../../../../../geometry/support/aaBoundingRect ../../../../../tasks/support/QuantizationParameters ../../../tiling/TileKey".split(" "),
function(t,k,m,z,y,x,f){function h(l,q){const p=l.bounds,n=q.bounds;return l.key.id!==q.key.id&&l.key.world===q.key.world&&p[0]<=n[0]&&p[1]<=n[1]&&p[2]>=n[2]&&p[3]>=n[3]}let e=function(){function l(p,n){this.key=new f(0,0,0,0);this.bounds=y.create();this.objectIds=new Set;this.key.set(n);n=p.getLODInfoAt(this.key);this.tileInfoView=p;this.tileInfoView.getTileBounds(this.bounds,this.key,!0);this.resolution=n.resolution;this.scale=n.scale;this.level=n.level;this.needsClear=!0}var q=l.prototype;q.clone=
function(){return new l(this.tileInfoView,this.key)};q.createChildTiles=function(){const p=this.key.getChildKeys(),n=m.acquire();for(let d=0;d<p.length;d++)n[d]=new l(this.tileInfoView,p[d]);return n};q.getQuantizationParameters=function(){return x.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})};k._createClass(l,[{key:"id",
get:function(){return this.key.id}},{key:"extent",get:function(){return z.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}},{key:"transform",get:function(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}},{key:"bbox",get:function(){const p=this.bounds;return{minX:p[0],minY:p[1],maxX:p[2],maxY:p[3]}}}]);return l}();t.Tile=e;t.default=e;t.isChildOf=function(l,q){return h(q,l)};t.isParentOf=h;Object.defineProperty(t,
"__esModule",{value:!0})})},"esri/tasks/support/QuantizationParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/lang ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../geometry/Extent ../../geometry".split(" "),function(t,
k,m,z,y,x,f,h,e,l,q,p,n,d,b){var a;m=new h.JSONMap({upperLeft:"upper-left",lowerLeft:"lower-left"});n=a=function(c){function g(r){r=c.call(this,r)||this;r.extent=null;r.mode="view";r.originPosition="upper-left";r.tolerance=1;return r}t._inheritsLoose(g,c);g.prototype.clone=function(){return new a(z.clone({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))};return g}(n.JSONSupport);k.__decorate([f.property({type:d,json:{write:{overridePolicy(){return{enabled:"view"===
this.mode}}}}})],n.prototype,"extent",void 0);k.__decorate([f.property({type:["view","edit"],json:{write:!0}})],n.prototype,"mode",void 0);k.__decorate([f.property({type:String,json:{read:m.read,write:m.write}})],n.prototype,"originPosition",void 0);k.__decorate([f.property({type:Number,json:{write:{overridePolicy(){return{enabled:"view"===this.mode}}}}})],n.prototype,"tolerance",void 0);return n=a=k.__decorate([e.subclass("esri.tasks.support.QuantizationParameters")],n)})},"esri/chunks/rbush":function(){define(["exports",
"./quickselect"],function(t,k){function m(b,a){if(!(this instanceof m))return new m(b,a);this._maxEntries=Math.max(4,b||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));a&&("function"===typeof a?this.toBBox=a:this._initFormat(a));this.clear()}function z(b,a){y(b,0,b.children.length,a,b)}function y(b,a,c,g,r){r||(r=n(null));r.minX=Infinity;r.minY=Infinity;r.maxX=-Infinity;r.maxY=-Infinity;for(var u;a<c;a++)u=b.children[a],x(r,b.leaf?g(u):u);return r}function x(b,a){b.minX=Math.min(b.minX,
a.minX);b.minY=Math.min(b.minY,a.minY);b.maxX=Math.max(b.maxX,a.maxX);b.maxY=Math.max(b.maxY,a.maxY);return b}function f(b,a){return b.minX-a.minX}function h(b,a){return b.minY-a.minY}function e(b){return(b.maxX-b.minX)*(b.maxY-b.minY)}function l(b){return b.maxX-b.minX+(b.maxY-b.minY)}function q(b,a){return b.minX<=a.minX&&b.minY<=a.minY&&a.maxX<=b.maxX&&a.maxY<=b.maxY}function p(b,a){return a.minX<=b.maxX&&a.minY<=b.maxY&&a.maxX>=b.minX&&a.maxY>=b.minY}function n(b){return{children:b,height:1,leaf:!0,
minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity}}function d(b,a,c,g,r){for(var u=[a,c],w;u.length;)c=u.pop(),a=u.pop(),c-a<=g||(w=a+Math.ceil((c-a)/g/2)*g,k.quickselect(b,w,a,c,r),u.push(a,w,w,c))}m.prototype={all:function(){return this._all(this.data,[])},search:function(b){var a=this.data,c=[],g=this.toBBox;if(!p(b,a))return c;for(var r=[],u,w,v,D;a;){u=0;for(w=a.children.length;u<w;u++)v=a.children[u],D=a.leaf?g(v):v,p(b,D)&&(a.leaf?c.push(v):q(b,D)?this._all(v,c):r.push(v));a=r.pop()}return c},
collides:function(b){var a=this.data,c=this.toBBox;if(!p(b,a))return!1;for(var g=[],r,u,w,v;a;){r=0;for(u=a.children.length;r<u;r++)if(w=a.children[r],v=a.leaf?c(w):w,p(b,v)){if(a.leaf||q(b,v))return!0;g.push(w)}a=g.pop()}return!1},load:function(b){if(!b||!b.length)return this;if(b.length<this._minEntries){for(var a=0,c=b.length;a<c;a++)this.insert(b[a]);return this}b=this._build(b.slice(),0,b.length-1,0);this.data.children.length?this.data.height===b.height?this._splitRoot(this.data,b):(this.data.height<
b.height&&(a=this.data,this.data=b,b=a),this._insert(b,this.data.height-b.height-1,!0)):this.data=b;return this},insert:function(b){b&&this._insert(b,this.data.height-1);return this},clear:function(){this.data=n([]);return this},remove:function(b,a){if(!b)return this;for(var c=this.data,g=this.toBBox(b),r=[],u=[],w,v,D,B;c||r.length;){c||(c=r.pop(),v=r[r.length-1],w=u.pop(),B=!0);if(c.leaf){a:{D=b;var C=c.children,A=a;if(A){for(var E=0;E<C.length;E++)if(A(D,C[E])){D=E;break a}D=-1}else D=C.indexOf(D)}if(-1!==
D){c.children.splice(D,1);r.push(c);this._condense(r);break}}B||c.leaf||!q(c,g)?v?(w++,c=v.children[w],B=!1):c=null:(r.push(c),u.push(w),w=0,v=c,c=c.children[0])}return this},toBBox:function(b){return b},compareMinX:f,compareMinY:h,toJSON:function(){return this.data},fromJSON:function(b){this.data=b;return this},_all:function(b,a){for(var c=[];b;)b.leaf?a.push.apply(a,b.children):c.push.apply(c,b.children),b=c.pop();return a},_build:function(b,a,c,g){var r=c-a+1,u=this._maxEntries;if(r<=u){var w=
n(b.slice(a,c+1));z(w,this.toBBox);return w}g||(g=Math.ceil(Math.log(r)/Math.log(u)),u=Math.ceil(r/Math.pow(u,g-1)));w=n([]);w.leaf=!1;w.height=g;r=Math.ceil(r/u);u=r*Math.ceil(Math.sqrt(u));var v;for(d(b,a,c,u,this.compareMinX);a<=c;a+=u){var D=Math.min(a+u-1,c);d(b,a,D,r,this.compareMinY);for(v=a;v<=D;v+=r){var B=Math.min(v+r-1,D);w.children.push(this._build(b,v,B,g-1))}}z(w,this.toBBox);return w},_chooseSubtree:function(b,a,c,g){for(var r,u,w,v,D,B,C,A;;){g.push(a);if(a.leaf||g.length-1===c)break;
C=A=Infinity;r=0;for(u=a.children.length;r<u;r++)w=a.children[r],D=e(w),B=(Math.max(w.maxX,b.maxX)-Math.min(w.minX,b.minX))*(Math.max(w.maxY,b.maxY)-Math.min(w.minY,b.minY))-D,B<A?(A=B,C=D<C?D:C,v=w):B===A&&D<C&&(C=D,v=w);a=v||a.children[0]}return a},_insert:function(b,a,c){var g=this.toBBox;c=c?b:g(b);g=[];var r=this._chooseSubtree(c,this.data,a,g);r.children.push(b);for(x(r,c);0<=a;)if(g[a].children.length>this._maxEntries)this._split(g,a),a--;else break;this._adjustParentBBoxes(c,g,a)},_split:function(b,
a){var c=b[a],g=c.children.length,r=this._minEntries;this._chooseSplitAxis(c,r,g);g=this._chooseSplitIndex(c,r,g);g=n(c.children.splice(g,c.children.length-g));g.height=c.height;g.leaf=c.leaf;z(c,this.toBBox);z(g,this.toBBox);a?b[a-1].children.push(g):this._splitRoot(c,g)},_splitRoot:function(b,a){this.data=n([b,a]);this.data.height=b.height+1;this.data.leaf=!1;z(this.data,this.toBBox)},_chooseSplitIndex:function(b,a,c){var g,r;var u=r=Infinity;for(g=a;g<=c-a;g++){var w=y(b,0,g,this.toBBox);var v=
y(b,g,c,this.toBBox);var D=Math.max(0,Math.min(w.maxX,v.maxX)-Math.max(w.minX,v.minX))*Math.max(0,Math.min(w.maxY,v.maxY)-Math.max(w.minY,v.minY));w=e(w)+e(v);if(D<u){u=D;var B=g;r=w<r?w:r}else D===u&&w<r&&(r=w,B=g)}return B},_chooseSplitAxis:function(b,a,c){var g=b.leaf?this.compareMinX:f,r=b.leaf?this.compareMinY:h,u=this._allDistMargin(b,a,c,g);a=this._allDistMargin(b,a,c,r);u<a&&b.children.sort(g)},_allDistMargin:function(b,a,c,g){b.children.sort(g);g=this.toBBox;var r=y(b,0,a,g),u=y(b,c-a,c,
g),w=l(r)+l(u),v;for(v=a;v<c-a;v++){var D=b.children[v];x(r,b.leaf?g(D):D);w+=l(r)}for(v=c-a-1;v>=a;v--)D=b.children[v],x(u,b.leaf?g(D):D),w+=l(u);return w},_adjustParentBBoxes:function(b,a,c){for(;0<=c;c--)x(a[c],b)},_condense:function(b){for(var a=b.length-1,c;0<=a;a--)0===b[a].children.length?0<a?(c=b[a-1].children,c.splice(c.indexOf(b[a]),1)):this.clear():z(b[a],this.toBBox)},_initFormat:function(b){var a=["return a"," - b",";"];this.compareMinX=new Function("a","b",a.join(b[0]));this.compareMinY=
new Function("a","b",a.join(b[1]));this.toBBox=new Function("a","return {minX: a"+b[0]+", minY: a"+b[1]+", maxX: a"+b[2]+", maxY: a"+b[3]+"};")}};t.rbush=m})},"esri/chunks/quickselect":function(){define(["exports","./_commonjsHelpers"],function(t,k){k=k.createCommonjsModule(function(m){(function(z){z=z();void 0!==z&&(m.exports=z)})(function(){function z(f,h,e,l,q){for(;l>e;){if(600<l-e){var p=l-e+1,n=h-e+1,d=Math.log(p),b=.5*Math.exp(2*d/3);d=.5*Math.sqrt(d*b*(p-b)/p)*(0>n-p/2?-1:1);z(f,h,Math.max(e,
Math.floor(h-n*b/p+d)),Math.min(l,Math.floor(h+(p-n)*b/p+d)),q)}p=f[h];n=e;b=l;y(f,e,h);for(0<q(f[l],p)&&y(f,e,l);n<b;){y(f,n,b);n++;for(b--;0>q(f[n],p);)n++;for(;0<q(f[b],p);)b--}0===q(f[e],p)?y(f,e,b):(b++,y(f,b,l));b<=h&&(e=b+1);h<=b&&(l=b-1)}}function y(f,h,e){var l=f[h];f[h]=f[e];f[e]=l}function x(f,h){return f<h?-1:f>h?1:0}return function(f,h,e,l,q){z(f,h,e||0,l||f.length-1,q||x)}})});t.quickselect=k})},"esri/views/2d/layers/features/processors":function(){define(["require","exports"],function(t,
k){k.loadProcessorModule=function(m){return"heatmap"===m?new Promise(function(z,y){t(["./processors/HeatmapProcessor"],function(x){z(Object.freeze({__proto__:null,"default":x}))},y)}):new Promise(function(z,y){t(["./processors/SymbolProcessor"],function(x){z(Object.freeze({__proto__:null,"default":x}))},y)})};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/views/2d/layers/features/support/UpdateToken":function(){define(["exports"],function(t){let k=function(){function m(){this.source=!1;
this.targets={feature:!1,aggregate:!1};this.storage={filters:!1,data:!1};this.queryFilter=this.mesh=!1;this.why={mesh:[],source:[]}}m.create=function(y){const x=new m;for(const f in y){const h=y[f];if("object"===typeof h)for(const e in h)x[f][e]=h[e];x[f]=h}return x};m.empty=function(){return m.create({})};m.all=function(){return m.create({source:!0,targets:{feature:!0,aggregate:!0},storage:{filters:!0,data:!0},mesh:!0})};var z=m.prototype;z.unset=function(y){y.source&&(this.source=!1);y.targets.feature&&
(this.targets.feature=!1);y.targets.aggregate&&(this.targets.aggregate=!1);y.storage.filters&&(this.storage.filters=!1);y.storage.data&&(this.storage.data=!1);y.mesh&&(this.mesh=!1);y.queryFilter&&(this.queryFilter=!1)};z.any=function(){return this.source||this.mesh||this.storage.filters||this.storage.data||this.targets.feature||this.targets.aggregate||this.queryFilter};z.describe=function(){let y=0,x="";if(this.mesh){y+=20;x+="-\x3e (20) Mesh needs update\n";for(const f of this.why.mesh)x+=`    + ${f}\n`}if(this.source){y+=
10;x+="-\x3e (10) The source needs update\n";for(const f of this.why.source)x+=`    + ${f}\n`}this.targets.feature&&(y+=5,x+="-\x3e (5) Feature target parameters changed\n");this.storage.filters&&(y+=5,x+="-\x3e (5) Feature filter parameters changed\n");this.targets.aggregate&&(y+=4,x+="-\x3e (4) Aggregate target parameters changed\n");this.storage.data&&(y+=1,x+="-\x3e (1) Texture storage parameters changed");console.debug(`Applying ${5>y?"Fastest":10>y?"Fast":15>y?"Moderate":20>y?"Slow":"Very Slow"} update of cost ${y}/45 `);
console.debug(x)};z.toJSON=function(){return{queryFilter:this.queryFilter,source:this.source,targets:this.targets,storage:this.storage,mesh:this.mesh}};return m}();t.UpdateToken=k;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/views/2d/layers/features/controllers/FeatureController2D":function(){define("../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/has ../../../../../core/maybe ../../../../../core/Logger ../../../../../core/accessorSupport/ensureType ../../../../../core/accessorSupport/decorators/property ../../../../../core/jsonMap ../../../../../core/accessorSupport/decorators/subclass ../../../../../core/urlUtils ../../../../../core/uuid ../../../../../portal/support/resourceExtension ../../../../../core/promiseUtils ../../../../../core/watchUtils ../../../../../layers/graphics/featureConversionUtils ../../../../../layers/support/FieldsIndex ../../../../../core/HandleOwner ../support/FeatureSetReaderJSON ../../../../support/QueueProcessor ../support/AttributeStore ../support/ComputedAttributeStorage ../FeatureStore2D ../../../../../layers/graphics/data/QueryEngine ../support/UpdateToken ../sources/createSource ../support/ClusterStore".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d,b,a,c,g,r,u,w,v,D,B,C,A){function E(H){if(!n.isAbortError(H)&&"worker:port-closed"!==H.name)throw H;}function G(H){return"feature"===H.type&&"snapshot"===H.mode}y=function(H){function K(){var F=H.apply(this,arguments)||this;F._storage=new w.ComputedAttributeStorage;F._markedIdsBufId=F._storage.createBitset();F._lastCleanup=performance.now();F._cleanupNeeded=!1;F._invalidated=!1;F._tileToResolver=new Map;F.tileStore=null;F.config=null;F.processor=null;F.remoteClient=
null;F.service=null;return F}t._inheritsLoose(K,H);var J=K.prototype;J.initialize=function(){this._initAttributeStore();this._initStores();this._initQueryEngine();this._initSource();this._updateQueue=new r.QueueProcessor({concurrency:"geoevent"===this._source.type?1:4,process:(F,N)=>this._onTileMessage(F,{signal:N})});this.handles.add([this.tileStore.on("update",this.onTileUpdate.bind(this)),this.watch("updating",F=>!F&&this.onIdle())]);this._checkUpdating=setInterval(()=>this.notifyChange("updating"),
300)};J.startup=async function(){this._initAttributeStore();this.tileStore.tiles.forEach(F=>this._source.subscribe(F))};J._initSource=function(){this._source=C.createSource(this.service,this.spatialReference,this.tileStore.tileScheme,(F,N)=>{this._invalidated=!0;return this._patchTile(F,N)},()=>50>this._updateQueue.length,this.featureStore);this._proxyEvents()};J._proxyEvents=function(){if("geoevent"===this._source.type){const F=this._source.events;this.handles.add([F.on("connectionStatus",N=>this.remoteClient.invoke("setProperty",
{propertyName:"connectionStatus",value:N}).catch(E)),F.on("errorString",N=>this.remoteClient.invoke("setProperty",{propertyName:"errorString",value:N}).catch(E)),F.on("feature",N=>this.remoteClient.invoke("emitEvent",{name:"data-received",event:{attributes:N.attributes,centroid:N.centroid,geometry:N.geometry}}).catch(E)),F.on("updateRate",N=>this.remoteClient.invoke("emitEvent",{name:"update-rate",event:{...N}}).catch(E))])}};J._initAttributeStore=function(){this.attributeStore?this.attributeStore.invalidateResources():
this.attributeStore=new u["default"]({type:"remote",initialize:(F,N)=>n.ignoreAbortErrors(this.remoteClient.invoke("tileRenderer.featuresView.attributeView.initialize",F,{signal:N}).catch(E)),update:(F,N)=>n.ignoreAbortErrors(this.remoteClient.invoke("tileRenderer.featuresView.attributeView.requestUpdate",F,{signal:N}).catch(E)),render:F=>n.ignoreAbortErrors(this.remoteClient.invoke("tileRenderer.featuresView.requestRender",void 0,{signal:F}).catch(E))},this.config)};J._initStores=function(){const F=
{geometryInfo:{geometryType:this.service.geometryType,hasM:!1,hasZ:!1},spatialReference:this.spatialReference,fieldsIndex:this.fieldsIndex,fields:this.service.fields};this.featureStore=new v.FeatureStore2D(F,this._storage,"snapshot"===this.service.type?"snapshot":"on-demand");this.aggregateStore=new A.ClusterStore(F,this.spatialReference,this._storage);this.handles.add(this.aggregateStore.events.on("valueRangesChanged",N=>{this.remoteClient.invoke("emitEvent",{name:"valueRangesChanged",event:{valueRanges:N.valueRanges}}).catch(E)}))};
J._initQueryEngine=function(){var F;const N=this;null==(F=this.queryEngine)?void 0:F.destroy();this.queryEngine=new D["default"]({definitionExpression:this.config.definitionExpression,fields:this.service.fields,geometryType:this.service.geometryType,objectIdField:this.service.objectIdField,hasM:!1,hasZ:!1,spatialReference:this.spatialReference.toJSON(),cacheSpatialQueries:!0,featureStore:this.featureStore,aggregateAdapter:{getFeatureObjectIds(L){return N.aggregateStore.getFeatureDisplayIdsForAggregate(L).map(M=>
N.getObjectId(M))}},timeInfo:this.service.timeInfo})};J.destroy=function(){this._updateQueue.destroy();this._source.destroy();this.queryEngine.destroy();this.attributeStore&&this.attributeStore.destroy();clearInterval(this._checkUpdating)};J.isUpdating=function(){return this._source.updating||!!this._updateQueue.length};J.enableEvent=function(F){this._source.enableEvent(F.name,F.value)};J.pause=function(){this._updateQueue.pause();this._updateQueue.clear()};J.update=async function(F,N){this._set("config",
N);this._schema=N.schema;this._initQueryEngine();await Promise.all([this._source.update(F,N.schema.source),this.featureStore.updateSchema(F,N.schema.targets.feature),this.attributeStore.update(F,N),this.attributeStore.updateFilters(F,this)]);await this.aggregateStore.updateSchema(F,N.schema.targets.aggregate);m("esri-2d-update-debug")&&F.describe()};J.applyUpdate=async function(F){F.mesh&&this.clearTiles();this._updateQueue.clear();this._updateQueue.resume();await this._source.applyUpdate(F);this.notifyChange("updating");
await d.whenFalseOnce(this,"updating",!0);this.hasAggregates&&(await n.after(10),await d.whenFalseOnce(this,"updating",!0))};J.onEdits=async function(F){try{const N=F.deletedFeatures.map(L=>({...L,objectId:L.objectId&&-1!==L.objectId?L.objectId:this._lookupObjectIdByGlobalId(L.globalId)}));this.featureStore.invalidate();await this._source.edit({...F,deletedFeatures:N})}catch(N){}};J.refresh=async function(){this.featureStore.invalidate();this.clearTiles();this._source.refresh();this._cleanupNeeded=
!0;this.notifyChange("updating");await d.whenFalseOnce(this,"updating",!0)};J.clearTiles=function(){for(const F of this.tileStore.tiles)this.processor.onTileClear(F)};J.onTileUpdate=function(F){this.aggregateStore.onTileUpdate(F);for(const N of F.added)this._source.subscribe(N),this._level=N.level;for(const N of F.removed)this._source.unsubscribe(N),this._cleanupNeeded=!0,this._tileToResolver.has(N.id)&&(this._tileToResolver.get(N.id).resolve(),this._tileToResolver.delete(N.id));this.notifyChange("updating")};
J.onIdle=function(){this._invalidated&&((this.hasAggregates||"heatmap"===this.processor.type)&&this._repushTiles(),this._invalidated=!1);this._markAndSweep()};J.queryExtent=function(F){return this.queryEngine.executeQueryForExtent(F)};J.queryFeatures=function(F){return this.queryEngine.executeQuery(F)};J.queryFeatureCount=function(F){return this.queryEngine.executeQueryForCount(F)};J.queryLatestObservations=function(F){return this.queryEngine.executeQueryForLatestObservations(F)};J.queryObjectIds=
function(F){return this.queryEngine.executeQueryForIds(F)};J.queryStatistics=async function(){return{...this.featureStore.storeStatistics,displayedFeatureCount:0,displayedVertexCount:0,displayPreProcessTime:0}};J.getObjectId=function(F){return this.featureStore.lookupObjectId(F,this._storage)};J.getDisplayId=function(F){if(this._schema.targets.aggregate){const N=this.aggregateStore.getDisplayId(F);return z.isNone(N)?(F=this.featureStore.lookupDisplayId(F),this.aggregateStore.getDisplayIdForReferenceId(F)):
N}return this.featureStore.lookupDisplayId(F)};J.getFeature=function(F){F=this.featureStore.lookupFeatureByDisplayId(F,this._storage);if(z.isNone(F))return null;var N=F.readHydratedGeometry();N=b.convertToGeometry(N,F.geometryType,F.hasZ,F.hasM);return{attributes:F.readAttributes(),geometry:N}};J.getAggregate=function(F){return this.aggregateStore.getAggregate(F)};J.setHighlight=async function(F){const N=F.map(L=>this.getDisplayId(L));return this.attributeStore.setHighlight(F,N)};J._lookupObjectIdByGlobalId=
function(F){const N=this.service.globalIdField;if(z.isNone(N))throw Error("Expected globalIdField to be defined");let L=null;this.featureStore.forEach(M=>{F===M.readAttribute(N)&&(L=M.getObjectId())});if(z.isNone(L))throw Error(`Expected to find a feature with globalId ${F}`);return L};J._repushTiles=function(){for(const F of this.tileStore.tiles)this._patchTile({type:"append",id:F.key.id,addOrUpdate:g.FeatureSetReaderJSON.fromOptimizedFeatures([],this.service.geometryType),remove:[],end:!0,status:B.UpdateToken.empty()})};
J._maybeForceCleanup=function(){5E3<performance.now()-this._lastCleanup&&this._markAndSweep()};J._patchTile=function(F,N){F=this._updateQueue.push(F,N).then(()=>{this.notifyChange("updating")}).catch(L=>{this.notifyChange("updating")});this.notifyChange("updating");return F};J._onTileMessage=async function(F,N){n.throwIfAborted(N);const L=this.tileStore.get(F.id);if(L){if(F.clear)return this.processor.onTileClear(L);var M=F.status;F.remove.length&&(this._cleanupNeeded=!0);var S=[];for(const Q of F.remove)S.push(this.featureStore.lookupDisplayId(Q));
F.remove=S;try{if(z.isNone(F.addOrUpdate))this.processor.onTileMessage(L,{...F,addOrUpdate:null},this.hasAggregates,N).catch(n.throwIfNotAbortError);else{F.addOrUpdate.setArcadeSpatialReference(this.spatialReference);this.featureStore.hasInstance(F.addOrUpdate.instance)&&M.targets.feature||(M.targets.feature=!0,this.featureStore.onTileData(L,F));M.storage.data&&M.storage.filters||(M.storage.data=!0,M.storage.filters=!0,this.attributeStore.onTileData(L,F),"geoevent"===this._source.type?(await this.attributeStore.sendUpdates(),
n.throwIfAborted(N)):this.attributeStore.sendUpdates());if(this.hasAggregates&&!M.targets.aggregate){M.targets.aggregate=!0;const Q=G(this._source)&&this._source.loading,U=!G(this._source)||Q||F.end;this.aggregateStore.onTileData(L,F,this._storage,this.attributeStore,U);if(!U)return;M.mesh||(this.attributeStore.onTileData(L,F),this.attributeStore.sendUpdates(),this.processor.onTileClear(L))}M.mesh||(M.mesh=!0,await this.processor.onTileMessage(L,F,this.hasAggregates,N),n.throwIfAborted(N));this._maybeForceCleanup()}}catch(Q){n.throwIfNotAbortError(Q)}}};
J._mark=function(F,N,L){const M=this._storage.getInstanceId(F);F&&(N.add((4294901760&M)>>>16),L.set(F))};J._markAndSweep=function(){this._lastCleanup=performance.now();if(!("feature"===this._source.type&&"snapshot"===this._source.mode||"geoevent"!==this._source.type&&!this._cleanupNeeded)){this._cleanupNeeded=!1;var F=this._storage.getBitset(this._markedIdsBufId),N=new Set;F.clear();for(const L of this.tileStore.tiles)this._source.forEachRequest(L.key.id,M=>{if(!z.isNone(M.addOrUpdate))for(M=M.addOrUpdate.getCursor();M.next();){var S=
M.getDisplayId();S||(S=M.getObjectId(),S=this.featureStore.lookupDisplayId(S));this._mark(S,N,F)}});this._source.forEachPendingEdit(L=>{L=this.featureStore.lookupDisplayId(L);this._mark(L,N,F)});this._updateQueue.forEach(L=>{for(const M of L.remove)L=this.featureStore.lookupDisplayId(M),this._mark(L,N,F)});this.config.schema.targets.aggregate&&(this.aggregateStore.sweepFeatures(F,this.featureStore),this.aggregateStore.sweepClusters(this._storage,this.attributeStore,this._level));this.featureStore.sweepFeatures(F,
this._storage,this.attributeStore);this.featureStore.sweepFeatureSets(N)}};t._createClass(K,[{key:"fieldsIndex",get:function(){return new a(this.service.fields)}},{key:"hasAggregates",get:function(){return!!this.config.schema.targets.aggregate}},{key:"spatialReference",get:function(){return this.tileStore.tileScheme.spatialReference}},{key:"updating",get:function(){return this.isUpdating()}}]);return K}(c.HandleOwner);k.__decorate([f.property({constructOnly:!0})],y.prototype,"tileStore",void 0);k.__decorate([f.property()],
y.prototype,"config",void 0);k.__decorate([f.property({readOnly:!0})],y.prototype,"fieldsIndex",null);k.__decorate([f.property()],y.prototype,"processor",void 0);k.__decorate([f.property({constructOnly:!0})],y.prototype,"remoteClient",void 0);k.__decorate([f.property({constructOnly:!0})],y.prototype,"service",void 0);k.__decorate([f.property()],y.prototype,"spatialReference",null);k.__decorate([f.property()],y.prototype,"updating",null);return y=k.__decorate([e.subclass("esri.views.2d.layers.features.controllers.FeatureController2D")],
y)})},"esri/layers/graphics/featureConversionUtils":function(){define("exports ../../core/Logger ../../core/Error ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),function(t,k,m,z,y,x,f){function h(R,Y){return R?Y?4:3:Y?3:2}function e(R,Y,aa,ca){if(R){if(aa)return Y&&ca?O:sa;if(Y&&ca)return ua}else if(Y&&ca)return sa;return ha}function l({scale:R,translate:Y},aa){return Math.round((aa-Y[0])/R[0])}function q({scale:R,translate:Y},aa){return Math.round((Y[1]-
aa)/R[1])}function p({scale:R,translate:Y},aa){return aa*R[0]+Y[0]}function n({scale:R,translate:Y},aa){return Y[1]-aa*R[1]}function d(R){R=R.coords;return{x:R[0],y:R[1]}}function b(R,Y){R.coords[0]=Y.x;R.coords[1]=Y.y;return R}function a(R){R=R.coords;return{x:R[0],y:R[1],z:R[2]}}function c(R,Y){R.coords[0]=Y.x;R.coords[1]=Y.y;R.coords[2]=Y.z;return R}function g(R){R=R.coords;return{x:R[0],y:R[1],m:R[2]}}function r(R,Y){R.coords[0]=Y.x;R.coords[1]=Y.y;R.coords[2]=Y.m;return R}function u(R){R=R.coords;
return{x:R[0],y:R[1],z:R[2],m:R[3]}}function w(R,Y){R.coords[0]=Y.x;R.coords[1]=Y.y;R.coords[2]=Y.z;R.coords[3]=Y.m;return R}function v(R,Y){return R&&Y?w:R?c:Y?r:b}function D(R,Y,aa,ca,ka){aa=v(aa,ca);for(const ia of Y){const {geometry:na,attributes:qa}=ia;let ra;na&&(ra=aa(new f,na));R.push(new y(ra,qa,null,qa[ka]))}return R}function B(R,Y,aa,ca){for(const ka of Y){const {geometry:ia,attributes:na}=ka;let qa;ia&&(qa=C(ia,aa,ca));R.push({attributes:na,geometry:qa})}return R}function C(R,Y,aa){if(!R)return null;
const ca=h(Y,aa),ka=[];for(let ia=0;ia<R.coords.length;ia+=ca){const na=[];for(let qa=0;qa<ca;qa++)na.push(R.coords[ia+qa]);ka.push(na)}return Y?aa?{points:ka,hasZ:Y,hasM:aa}:{points:ka,hasZ:Y}:aa?{points:ka,hasM:aa}:{points:ka}}function A(R,Y,aa,ca,ka){aa=h(aa,ca);for(const ia of Y){Y=ia.geometry;ca=ia.attributes;let na;Y&&(na=E(new f,Y,aa));R.push(new y(na,ca,null,ca[ka]))}return R}function E(R,Y,aa=h(Y.hasZ,Y.hasM)){R.lengths[0]=Y.points.length;const ca=R.coords;let ka=0;for(const ia of Y.points)for(Y=
0;Y<aa;Y++)ca[ka++]=ia[Y];return R}function G(R,Y,aa){if(!R)return null;const ca=h(Y,aa),{coords:ka,lengths:ia}=R;R=[];let na=0;for(const qa of ia){const ra=[];for(let xa=0;xa<qa;xa++){const ya=[];for(let Aa=0;Aa<ca;Aa++)ya.push(ka[na++]);ra.push(ya)}R.push(ra)}return Y?aa?{paths:R,hasZ:Y,hasM:aa}:{paths:R,hasZ:Y}:aa?{paths:R,hasM:aa}:{paths:R}}function H(R,Y,aa,ca,ka){aa=h(aa,ca);for(const ia of Y){Y=ia.geometry;ca=ia.attributes;let na;Y&&(na=K(new f,Y,aa));R.push(new y(na,ca,null,ca[ka]))}return R}
function K(R,Y,aa=h(Y.hasZ,Y.hasM)){const {lengths:ca,coords:ka}=R;let ia=0;for(const na of Y.paths){for(const qa of na)for(Y=0;Y<aa;Y++)ka[ia++]=qa[Y];ca.push(na.length)}return R}function J(R,Y,aa){if(!R)return null;const ca=h(Y,aa),{coords:ka,lengths:ia}=R;R=[];let na=0;for(const qa of ia){const ra=[];for(let xa=0;xa<qa;xa++){const ya=[];for(let Aa=0;Aa<ca;Aa++)ya.push(ka[na++]);ra.push(ya)}R.push(ra)}return Y?aa?{rings:R,hasZ:Y,hasM:aa}:{rings:R,hasZ:Y}:aa?{rings:R,hasM:aa}:{rings:R}}function F(R,
Y,aa,ca,ka){for(const ia of Y){Y=ia.geometry;const na=ia.centroid,qa=ia.attributes;let ra;Y&&(ra=N(new f,Y,aa,ca));na?R.push(new y(ra,qa,b(new f,na),qa[ka])):R.push(new y(ra,qa,null,qa[ka]))}return R}function N(R,Y,aa=Y.hasZ,ca=Y.hasM){L(R,Y.rings,aa,ca);return R}function L(R,Y,aa,ca){aa=h(aa,ca);const {lengths:ka,coords:ia}=R;ca=0;ka.length=ia.length=0;for(const na of Y){for(const qa of na)for(Y=0;Y<aa;Y++)ia[ca++]=qa[Y];ka.push(na.length)}return R}function M(R,Y,aa,ca,ka,ia){R.length=0;if(!aa){for(const na of Y)R.push(new y(null,
na.attributes,null,na.attributes[ia]));return R}switch(aa){case "esriGeometryPoint":return D(R,Y,ca,ka,ia);case "esriGeometryMultipoint":return A(R,Y,ca,ka,ia);case "esriGeometryPolyline":return H(R,Y,ca,ka,ia);case "esriGeometryPolygon":return F(R,Y,ca,ka,ia);default:T.error("convertToFeatureSet:unknown-geometry",new m(`Unable to parse unknown geometry type '${aa}'`)),R.length=0}return R}function S(R,Y,aa,ca){R=R&&("coords"in R?R:R.geometry);if(!R)return null;switch(Y){case "esriGeometryPoint":return Y=
d,aa&&ca?Y=u:aa?Y=a:ca&&(Y=g),Y(R);case "esriGeometryMultipoint":return C(R,aa,ca);case "esriGeometryPolyline":return G(R,aa,ca);case "esriGeometryPolygon":return J(R,aa,ca);default:T.error("convertToGeometry:unknown-geometry",new m(`Unable to parse unknown geometry type '${Y}'`))}}function Q(R,Y,aa,ca,ka){R.length=0;switch(aa){case "esriGeometryPoint":var ia=d;ca&&ka?ia=u:ca?ia=a:ka&&(ia=g);for(var na of Y){const {geometry:qa,attributes:ra}=na;ca=qa?ia(qa):null;R.push({attributes:ra,geometry:ca})}break;
case "esriGeometryMultipoint":return B(R,Y,ca,ka);case "esriGeometryPolyline":for(const qa of Y){const {geometry:ra,attributes:xa}=qa;let ya;ra&&(ya=G(ra,ca,ka));R.push({attributes:xa,geometry:ya})}break;case "esriGeometryPolygon":for(ia of Y){const {geometry:qa,attributes:ra,centroid:xa}=ia;let ya;qa&&(ya=J(qa,ca,ka));xa?(na=d(xa),R.push({attributes:ra,centroid:na,geometry:ya})):R.push({attributes:ra,geometry:ya})}break;default:T.error("convertToFeatureSet:unknown-geometry",new m(`Unable to parse unknown geometry type '${aa}'`))}return R}
function U(R,Y,aa,ca,ka,ia,na=aa,qa=ca){R.lengths.length&&(R.lengths.length=0);R.coords.length&&(R.coords.length=0);if(!Y||!Y.coords.length)return null;ka=ba[ka];const {coords:ra,lengths:xa}=Y;Y=h(aa,ca);const ya=h(aa&&na,ca&&qa);aa=e(aa,ca,na,qa);if(!xa.length)return aa(R.coords,ra,0,0,l(ia,ra[0]),q(ia,ra[1])),R.lengths.length&&(R.lengths.length=0),R.coords.length=Y,R;let Aa,Ba=0,Ca,Ka=0;for(const Ga of xa){if(Ga<ka)continue;let Ja=0;Ca=Ka;qa=ca=l(ia,ra[Ba]);Aa=na=q(ia,ra[Ba+1]);aa(R.coords,ra,Ca,
Ba,qa,Aa);Ja++;Ba+=Y;Ca+=ya;for(let Ha=1;Ha<Ga;Ha++,Ba+=Y)if(qa=l(ia,ra[Ba]),Aa=q(ia,ra[Ba+1]),qa!==ca||Aa!==na)aa(R.coords,ra,Ca,Ba,qa-ca,Aa-na),Ca+=ya,Ja++,ca=qa,na=Aa;Ja>=ka&&(R.lengths.push(Ja),Ka=Ca)}R.coords.length=Ka;return R.coords.length?R:null}function W(R,Y,aa,ca,ka,ia,na){let qa=ca,ra=0;for(let ya=ia+aa;ya<na;ya+=aa){{var xa=Y[ya];const Aa=Y[ya+1],Ba=Y[na],Ca=Y[na+1];let Ka=Y[ia],Ga=Y[ia+1],Ja=Ba-Ka,Ha=Ca-Ga;if(0!==Ja||0!==Ha){const Ia=((xa-Ka)*Ja+(Aa-Ga)*Ha)/(Ja*Ja+Ha*Ha);1<Ia?(Ka=Ba,
Ga=Ca):0<Ia&&(Ka+=Ja*Ia,Ga+=Ha*Ia)}Ja=xa-Ka;Ha=Aa-Ga;xa=Ja*Ja+Ha*Ha}xa>qa&&(ra=ya,qa=xa)}qa>ca&&(ra-ia>aa&&W(R,Y,aa,ca,ka,ia,ra),ka(R,Y,R.length,ra,Y[ra],Y[ra+1]),na-ra>aa&&W(R,Y,aa,ca,ka,ra,na))}function fa(R,Y,aa,ca,ka){const {coords:ia,lengths:na}=Y,qa=aa?ca?O:sa:ca?sa:ha;aa=h(aa,ca);if(!ia.length)return R!==Y&&(R.lengths.length=0,R.coords.length=0),R;if(!na.length)return qa(R.coords,ia,0,0,p(ka,ia[0]),n(ka,ia[1])),R!==Y&&(R.lengths.length=0,R.coords.length=aa),R;const [ra,xa]=ka.scale;ca=0;for(let ya=
0;ya<na.length;ya++){const Aa=na[ya];R.lengths[ya]=Aa;let Ba=p(ka,ia[ca]),Ca=n(ka,ia[ca+1]);qa(R.coords,ia,ca,ca,Ba,Ca);ca+=aa;for(let Ka=1;Ka<Aa;Ka++,ca+=aa)Ba+=ia[ca]*ra,Ca-=ia[ca+1]*xa,qa(R.coords,ia,ca,ca,Ba,Ca)}R!==Y&&(R.lengths.length=na.length,R.coords.length=ia.length);return R}function Z(R,Y,aa,ca){let ka=0,ia=R[ca*Y],na=R[ca*(Y+1)];for(let qa=1;qa<aa;qa++){const ra=ia+R[ca*(Y+qa)],xa=na+R[ca*(Y+qa)+1],ya=(ra-ia)*(xa+na);ia=ra;na=xa;ka+=ya}return.5*ka}const T=k.getLogger("esri.tasks.support.optimizedFeatureSet"),
ba={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},ha=(R,Y,aa,ca,ka,ia)=>{R[aa]=ka;R[aa+1]=ia},sa=(R,Y,aa,ca,ka,ia)=>{R[aa]=ka;R[aa+1]=ia;R[aa+2]=Y[ca+2]},ua=(R,Y,aa,ca,ka,ia)=>{R[aa]=ka;R[aa+1]=ia;R[aa+2]=Y[ca+3]},O=(R,Y,aa,ca,ka,ia)=>{R[aa]=ka;R[aa+1]=ia;R[aa+2]=Y[ca+2];R[aa+3]=Y[ca+3]},V=[],ja=[];t.convertFromFeature=function(R,Y,aa,ca,ka){V[0]=R;[R]=M(ja,V,Y,aa,ca,ka);V.length=ja.length=0;return R};t.convertFromFeatureSet=function(R,Y){const aa=new x,
{hasM:ca,hasZ:ka,features:ia,objectIdFieldName:na,spatialReference:qa,geometryType:ra,exceededTransferLimit:xa,transform:ya,fields:Aa}=R;Aa&&(aa.fields=Aa);aa.geometryType=ra;aa.objectIdFieldName=na||Y;aa.spatialReference=qa;if(!aa.objectIdFieldName)return T.error(new m("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),aa;ia&&M(aa.features,ia,ra,ka,ca,aa.objectIdFieldName);xa&&(aa.exceededTransferLimit=xa);ca&&(aa.hasM=ca);ka&&(aa.hasZ=ka);ya&&(aa.transform=ya);return aa};
t.convertFromFeatures=M;t.convertFromGeometry=function(R,Y,aa){if(!R)return null;const ca=new f;"hasZ"in R&&null==Y&&(Y=R.hasZ);"hasM"in R&&null==aa&&(aa=R.hasM);if(z.isPoint(R))return v(null!=Y?Y:null!=R.z,null!=aa?aa:null!=R.m)(ca,R);if(z.isPolygon(R))return N(ca,R,Y,aa);if(z.isPolyline(R))return K(ca,R,h(Y,aa));if(z.isMultipoint(R))return E(ca,R,h(Y,aa));T.error("convertFromGeometry:unknown-geometry",new m(`Unable to parse unknown geometry type '${R}'`))};t.convertFromGraphics=function(R,Y,aa,
ca,ka,ia){const na=R.length;switch(aa){case "esriGeometryPoint":D(R,Y,ca,ka,ia);break;case "esriGeometryMultipoint":A(R,Y,ca,ka,ia);break;case "esriGeometryPolyline":H(R,Y,ca,ka,ia);break;case "esriGeometryPolygon":F(R,Y,ca,ka,ia);break;default:T.error("convertToFeatureSet:unknown-geometry",new m(`Unable to parse unknown geometry type '${aa}'`))}for(ca=0;ca<Y.length;ca++)R[ca+na].geometryType=aa,R[ca+na].insertAfter=Y[ca].insertAfter,R[ca+na].groupId=Y[ca].groupId;return R};t.convertFromMultipoint=
E;t.convertFromMultipointFeatures=A;t.convertFromNestedArray=L;t.convertFromPoint=function(R,Y,aa=v(null!=Y.z,null!=Y.m)){return aa(R,Y)};t.convertFromPointFeatures=D;t.convertFromPolygon=N;t.convertFromPolyline=K;t.convertFromPolylineFeatures=H;t.convertToFeature=function(R,Y,aa,ca){ja[0]=R;Q(V,ja,Y,aa,ca);R=V[0];V.length=ja.length=0;return R};t.convertToFeatureSet=function(R){const {objectIdFieldName:Y,spatialReference:aa,transform:ca,fields:ka,hasM:ia,hasZ:na,features:qa,geometryType:ra,exceededTransferLimit:xa,
uniqueIdField:ya,queryGeometry:Aa,queryGeometryType:Ba}=R;R=Q([],qa,ra,na,ia);const Ca=S(Aa,Ba,!1,!1);R={features:R,fields:ka,geometryType:ra,objectIdFieldName:Y,spatialReference:aa,uniqueIdField:ya,queryGeometry:Ca};ca&&(R.transform=ca);xa&&(R.exceededTransferLimit=xa);ia&&(R.hasM=ia);na&&(R.hasZ=na);return R};t.convertToFeatures=Q;t.convertToGeometry=S;t.convertToMultipoint=C;t.convertToMultipointFeatures=B;t.convertToPoint=function(R,Y,aa){return R?Y?aa?u(R):a(R):aa?g(R):d(R):null};t.convertToPolygon=
J;t.convertToPolyline=G;t.deltaDecodeGeometry=function(R,Y){const aa=R.clone(),ca=R.coords;R=R.lengths;let ka=0;for(let qa=0;qa<R.length;qa++){const ra=R[qa];var ia=ca[Y*ka],na=ca[Y*ka+1];for(let xa=1;xa<ra;xa++)ia+=ca[Y*(ka+xa)],na+=ca[Y*(ka+xa)+1],aa.coords[Y*(ka+xa)]=ia,aa.coords[Y*(ka+xa)+1]=na;ka+=ra}return aa};t.deltaEncodeGeometry=function(R,Y){const aa=R.clone(),ca=R.coords;R=R.lengths;let ka=0;for(let na=0;na<R.length;na++){const qa=R[na];let ra=ca[Y*ka];var ia=ca[Y*ka+1];for(let xa=1;xa<
qa;xa++){const ya=ca[Y*(ka+xa)],Aa=ca[Y*(ka+xa)+1];ia=Aa-ia;aa.coords[Y*(ka+xa)]=ya-ra;aa.coords[Y*(ka+xa)+1]=ia;ra=ya;ia=Aa}ka+=qa}return aa};t.generalizeOptimizedGeometry=function(R,Y,aa,ca,ka,ia,na=aa,qa=ca){R.lengths.length&&(R.lengths.length=0);R.coords.length&&(R.coords.length=0);if(!Y||!Y.coords.length)return null;ka=ba[ka];const {coords:ra,lengths:xa}=Y;Y=h(aa,ca);const ya=h(aa&&na,ca&&qa);aa=e(aa,ca,na,qa);if(!xa.length)return aa(R.coords,ra,0,0,ra[0],ra[1]),R.lengths.length&&(R.lengths.length=
0),R.coords.length=Y,R;ca=0;ia*=ia;for(const Aa of xa){if(Aa<ka){ca+=Aa*Y;continue}na=R.coords.length/ya;qa=ca;const Ba=ca+(Aa-1)*Y;aa(R.coords,ra,R.coords.length,qa,ra[qa],ra[qa+1]);W(R.coords,ra,Y,ia,aa,qa,Ba);aa(R.coords,ra,R.coords.length,Ba,ra[Ba],ra[Ba+1]);qa=R.coords.length/ya-na;qa>=ka?R.lengths.push(qa):R.coords.length=na*ya;ca+=Aa*Y}return R.coords.length?R:null};t.getBoundsOptimizedGeometry=function(R,Y,aa,ca){if(!Y||!Y.coords||!Y.coords.length)return null;aa=h(aa,ca);let ka=ca=Number.POSITIVE_INFINITY,
ia=Number.NEGATIVE_INFINITY,na=Number.NEGATIVE_INFINITY;if(Y&&Y.coords){Y=Y.coords;for(let qa=0;qa<Y.length;qa+=aa){const ra=Y[qa],xa=Y[qa+1];ca=Math.min(ca,ra);ia=Math.max(ia,ra);ka=Math.min(ka,xa);na=Math.max(na,xa)}}R[0]=ca;R[1]=ka;R[2]=ia;R[3]=na;return R};t.getQuantizedArea=function(R,Y){const {coords:aa,lengths:ca}=R;let ka=R=0;for(let ia=0;ia<ca.length;ia++)ka+=Z(aa,R,ca[ia],Y),R+=ia;return Math.abs(ka)};t.getQuantizedBoundsOptimizedGeometry=function(R,Y,aa,ca){aa=h(aa,ca);const {lengths:ka,
coords:ia}=Y;ca=Y=Number.POSITIVE_INFINITY;let na=Number.NEGATIVE_INFINITY,qa=Number.NEGATIVE_INFINITY,ra=0;for(const xa of ka){let ya=ia[ra],Aa=ia[ra+1];Y=Math.min(ya,Y);ca=Math.min(Aa,ca);na=Math.max(ya,na);qa=Math.max(Aa,qa);ra+=aa;for(let Ba=1;Ba<xa;Ba++,ra+=aa){const Ca=ia[ra],Ka=ia[ra+1];ya+=Ca;Aa+=Ka;0>Ca&&(Y=Math.min(Y,ya));0<Ca&&(na=Math.max(na,ya));0>Ka?ca=Math.min(ca,Aa):0<Ka&&(qa=Math.max(qa,Aa))}}R[0]=Y;R[1]=ca;R[2]=na;R[3]=qa;return R};t.getSignedQuantizedRingArea=Z;t.quantizeOptimizedFeatureSet=
function(R,Y){const {geometryType:aa,features:ca,hasM:ka,hasZ:ia}=Y;if(!R)return Y;for(let na=0;na<ca.length;na++){const qa=ca[na],ra=qa.weakClone();ra.geometry=new f;U(ra.geometry,qa.geometry,ka,ia,aa,R);qa.centroid&&(ra.centroid=new f,U(ra.centroid,qa.centroid,ka,ia,"esriGeometryPoint",R));ca[na]=ra}Y.transform=R;return Y};t.quantizeOptimizedGeometry=U;t.quantizeX=l;t.quantizeY=q;t.removeCollinearVectices=function(R,Y,aa,ca,ka){if(!Y||!Y.coords||!Y.coords.length)return null;aa=ba[aa];const {coords:ia,
lengths:na}=Y;Y=e(ca,ka,ca,ka);ca=h(ca,ka);let qa=ka=0,ra=0,xa=0;for(const Ba of na){qa=xa;Y(R.coords,ia,qa,ka,ia[ka],ia[ka+1]);ka+=ca;var ya=ia[ka];let Ca=ia[ka+1],Ka=ya,Ga=Ca;var Aa=Ca/ya;qa+=ca;Y(R.coords,ia,qa,ka,Ka,Ga);ka+=ca;for(let Ja=2;Ja<Ba;Ja++){ya=ia[ka];Ca=ia[ka+1];const Ha=Ca/ya,Ia=Aa===Ha||!isFinite(Aa)&&!isFinite(Ha);Aa=Ia&&isFinite(Ha)?0<=Aa&&0<=Ha||0>=Aa&&0>=Ha:0<=Ga&&0<=Ca||0>=Ga&&0>=Ca;Ia&&Aa?(Ka+=ya,Ga+=Ca):(Ka=ya,Ga=Ca,qa+=ca);Y(R.coords,ia,qa,ka,Ka,Ga);ka+=ca;Aa=Ha}qa+=ca;ya=
(qa-xa)/ca;ya>=aa&&(R.lengths[ra]=ya,xa=qa,ra++)}R.coords.length>xa&&(R.coords.length=xa);R.lengths.length>ra&&(R.lengths.length=ra);return R.coords.length&&R.lengths.length?R:null};t.removeZMValues=function(R,Y,aa,ca,ka,ia){const na=h(aa,ca);aa=e(aa,ca,ka,ia);ca=Y.coords;R.coords.length=0;R.lengths.length=0;R.lengths.push(...Y.lengths);for(Y=0;Y<ca.length;Y+=na)aa(R.coords,ca,R.coords.length,Y,ca[Y],ca[Y+1]);return R};t.unquantizeOptimizedFeatureSet=function(R){const {transform:Y,features:aa,hasM:ca,
hasZ:ka}=R;if(!Y)return R;for(const ia of aa)ia.geometry&&fa(ia.geometry,ia.geometry,ca,ka,Y),ia.centroid&&fa(ia.centroid,ia.centroid,ca,ka,Y);R.transform=null;return R};t.unquantizeOptimizedGeometry=fa;t.unquantizeX=p;t.unquantizeY=n;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/layers/graphics/OptimizedFeature":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(t){return function(){function k(m=null,z={},y,x){this.geohashY=this.geohashX=this.displayId=0;this.geometry=
m;z&&(this.attributes=z);y&&(this.centroid=y);null!=x&&(this.objectId=x)}k.prototype.weakClone=function(){const m=new k(this.geometry,this.attributes,this.centroid,this.objectId);m.displayId=this.displayId;m.geohashX=this.geohashX;m.geohashY=this.geohashY;return m};t._createClass(k,[{key:"hasGeometry",get:function(){return!(!this.geometry||!this.geometry.coords||!this.geometry.coords.length)}}]);return k}()})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(function(){return function(){function t(){this.spatialReference=
this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=null;this.hasM=this.hasZ=!1;this.features=[];this.fields=[];this.transform=null;this.exceededTransferLimit=!1;this.queryGeometry=this.queryGeometryType=this.uniqueIdField=null}t.prototype.weakClone=function(){const k=new t;k.objectIdFieldName=this.objectIdFieldName;k.globalIdFieldName=this.globalIdFieldName;k.geohashFieldName=this.geohashFieldName;k.geometryProperties=this.geometryProperties;
k.geometryType=this.geometryType;k.spatialReference=this.spatialReference;k.hasZ=this.hasZ;k.hasM=this.hasM;k.features=this.features;k.fields=this.fields;k.transform=this.transform;k.exceededTransferLimit=this.exceededTransferLimit;k.uniqueIdField=this.uniqueIdField;k.queryGeometry=this.queryGeometry;k.queryGeometryType=this.queryGeometryType;return k};return t}()})},"esri/layers/graphics/OptimizedGeometry":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(t){return function(){function k(z=
[],y=[],x=!1){this.lengths=null!=z?z:[];this.coords=null!=y?y:[];this.hasIndeterminateRingOrder=x}var m=k.prototype;m.forEachVertex=function(z){let y=0;this.lengths.length||z(this.coords[0],this.coords[1]);for(let x=0;x<this.lengths.length;x++){const f=this.lengths[x];for(let h=0;h<f;h++)z(this.coords[2*(h+y)],this.coords[2*(h+y)+1]);y+=f}};m.clone=function(){return new k(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)};t._createClass(k,[{key:"isPoint",get:function(){return 0===
this.lengths.length}}]);return k}()})},"esri/layers/support/FieldsIndex":function(){define(function(){return function(){function t(m){this.fields=m;this._fieldsMap=new Map;this._dateFieldsSet=new Set;this.dateFields=[];if(m){var z=[];for(const y of m)if(m=y&&y.name){const x=m.toLowerCase().trim();this._fieldsMap.set(m,y);this._fieldsMap.set(x,y);z.push(x);if("date"===y.type||"esriFieldTypeDate"===y.type)this.dateFields.push(y),this._dateFieldsSet.add(y)}z.sort();this.uid=z.join(",")}}var k=t.prototype;
k.destroy=function(){this._fieldsMap.clear()};k.has=function(m){return null!=this.get(m)};k.get=function(m){return null!=m?this._fieldsMap.get(m)||this._fieldsMap.get(m.toLowerCase().trim()):void 0};k.isDateField=function(m){return this._dateFieldsSet.has(this.get(m))};k.normalizeFieldName=function(m){if(m=this.get(m))return m.name};return t}()})},"esri/views/2d/layers/features/support/FeatureSetReaderJSON":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../../../../../core/maybe",
"../../../../../layers/graphics/featureConversionUtils","./FeatureSetReader"],function(t,k,m,z,y){function x({coords:h,lengths:e}){let l=0;for(const q of e){for(e=1;e<q;e++)h[2*(l+e)]+=h[2*(l+e)-2],h[2*(l+e)+1]+=h[2*(l+e)-1];l+=q}}let f=function(h){function e(q,p,n){q=h.call(this,q)||this;q._featureIndex=-1;q._dateFields=new Set;q._geometryType=n;q._features=p;return q}k._inheritsLoose(e,h);e.fromFeatures=function(q,p,n){n=z.convertFromFeatures([],q,p,!1,!1,n);for(let d=0;d<n.length;d++)n[d].displayId=
q[d].displayId;return e.fromOptimizedFeatures(n,p)};e.fromFeatureSet=function(q,p){q=z.convertFromFeatureSet(q,p);return e.fromOptimizedFeatureSet(q)};e.fromOptimizedFeatureSet=function(q){const {features:p,geometryType:n}=q,d=e.fromOptimizedFeatures(p,n);d._exceededTransferLimit=q.exceededTransferLimit;d._transform=q.transform;for(const b of q.fields)"esriFieldTypeDate"===b.type&&d._dateFields.add(b.name);return d};e.fromOptimizedFeatures=function(q,p,n){const d=y.FeatureSetReader.createInstance();
q=new e(d,q,p);q._transform=n;return q};var l=e.prototype;l.getApproximateSize=function(){return this._features.length};l.getCursor=function(){return this.copy()};l.getQuantizationTransform=function(){return this._transform};l.getAttributeHash=function(){let q="";for(const p in this._current.attributes)q+=this._current.attributes[p];return q};l.getIndex=function(){return this._featureIndex};l.setIndex=function(q){this._featureIndex=q};l.getObjectId=function(){return this._current.objectId};l.getDisplayId=
function(){return this._current.displayId};l.setDisplayId=function(q){this._current.displayId=q};l.getGroupId=function(){return this._current.groupId};l.setGroupId=function(q){this._current.groupId=q};l.copy=function(){const q=new e(this.instance,this._features,this.geometryType);this.copyInto(q);return q};l.next=function(){for(;++this._featureIndex<this._features.length&&!this._passesFilter()&&!this._getExists(););return this._featureIndex<this._features.length};l.readLegacyFeature=function(){return z.convertToFeature(this._current,
this.geometryType,this.hasZ,this.hasM)};l.readOptimizedFeature=function(){return this._current};l.readLegacyPointGeometry=function(){return this.readGeometry()?{x:this.getX(),y:this.getY()}:null};l.readLegacyGeometry=function(){const q=this.readGeometry();return z.convertToGeometry(q,this.geometryType,this.hasZ,this.hasM)};l.readLegacyCentroid=function(){const q=this.readCentroid();return q?{x:q.coords[0]*this._sx+this._tx,y:q.coords[1]*this._sy+this._ty}:null};l.readGeometryArea=function(){return z.getQuantizedArea(this._current.geometry,
2)};l.readUnquantizedGeometry=function(){var q=this.readGeometry();if("esriGeometryPoint"===this.geometryType||!q)return q;q=q.clone();x(q);return q};l.readHydratedGeometry=function(){var q=this._current.geometry;if(!q)return null;q=q.clone();m.isSome(this._transform)&&z.unquantizeOptimizedGeometry(q,q,this.hasZ,this.hasM,this._transform);return q};l.getXHydrate=function(){const q=this._current.geometry.coords[0],p=this.getQuantizationTransform();return m.isNone(p)?q:q*p.scale[0]+p.translate[0]};
l.getYHydrate=function(){const q=this._current.geometry.coords[1],p=this.getQuantizationTransform();return m.isNone(p)?q:p.translate[1]-q*p.scale[1]};l.getX=function(){return this._current.geometry.coords[0]*this._sx+this._tx};l.getY=function(){return this._current.geometry.coords[1]*this._sy+this._ty};l.readGeometry=function(){if(!this._current.hasGeometry)return null;const q=this._current.geometry.clone();if(q.isPoint)return q.coords[0]=q.coords[0]*this._sx+this._tx,q.coords[1]=q.coords[1]*this._sy+
this._ty,q;let p=0;for(const n of q.lengths)q.coords[2*p]=q.coords[2*p]*this._sx+this._tx,q.coords[2*p+1]=q.coords[2*p+1]*this._sy+this._ty,p+=n;return q};l.readCentroid=function(){if(!this._current.hasGeometry)return null;if(!this._current.centroid){var q=this._computeCentroid();if(!q)return null;q.coords[0]=(q.coords[0]-this._tx)/this._sx;q.coords[1]=(q.coords[1]-this._ty)/this._sy;this._current.centroid=q}q=this._current.centroid.clone();q.coords[0]=q.coords[0]*this._sx+this._tx;q.coords[1]=q.coords[1]*
this._sx+this._ty;return q};l._readAttribute=function(q,p){var n=this._current.attributes[q];if(void 0!==n)return null!=n&&p&&this._dateFields.has(q)?new Date(n):n;n=this.readAttributes();q=q.toLocaleLowerCase().trim();for(const d in n)if(d.toLocaleLowerCase().trim()===q)return q=this._current.attributes[d],null!=q&&p&&this._dateFields.has(d)?new Date(q):q};l.copyInto=function(q){h.prototype.copyInto.call(this,q);q._featureIndex=this._featureIndex;q._transform=this._transform;q._dateFields=this._dateFields};
l._readAttributes=function(){return this._current.attributes};l._passesFilter=function(){if(!this._hasFilter)return!0;var q=0;let p=0;switch(this.geometryType){case "esriGeometryPoint":q=this._current.geometry;if(!q)return!1;[q,p]=q.coords;break;case "esriGeometryPolygon":q=this.readCentroid();if(!q)return!1;[q,p]=q.coords;q-=this._tx;p-=this._ty;break;default:return!1}return q>=this._xmin&&q<=this._xmax&&p>=this._ymin&&p<=this._ymax?!0:!1};k._createClass(e,[{key:"_current",get:function(){return this._features[this._featureIndex]}},
{key:"geometryType",get:function(){return this._geometryType}},{key:"hasFeatures",get:function(){return!!this._features.length}},{key:"hasNext",get:function(){return this._featureIndex+1<this._features.length}},{key:"exceededTransferLimit",get:function(){return this._exceededTransferLimit}},{key:"hasZ",get:function(){return!1}},{key:"hasM",get:function(){return!1}}]);return e}(y.FeatureSetReader);t.FeatureSetReaderJSON=f;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/views/2d/layers/features/support/FeatureSetReader":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/has ../../../../../core/maybe ../../../../../geometry/support/jsonUtils ../../../../../geometry ../../../../../layers/graphics/OptimizedGeometry ../../../../../layers/graphics/featureConversionUtils ../../../../../layers/graphics/centroid ./StaticBitSet".split(" "),
function(t,k,m,z,y,x,f,h,e,l){let q=0;m=function(){function p(d){this.type="FeatureSetReader";this.seen=!1;this._ty=this._tx=this.instance=0;this._sy=this._sx=1;this._xmin=-1;this._ymax=this._ymin=this._xmax=0;this._deleted=null;this._joined=[];this.instance=d}p.createInstance=function(){q++;return q=65535<q?0:q};var n=p.prototype;n.setArcadeSpatialReference=function(d){this._arcadeSpatialReference=d};n.attachStorage=function(d){this._storage=d};n.getQuantizationTransform=function(){throw Error("Unable to find transform for featureSet");
};n.getStorage=function(){return this._storage};n.getComputedNumeric=function(d){return this.getComputedNumericAtIndex(0)};n.setComputedNumeric=function(d,b){return this.setComputedNumericAtIndex(b,0)};n.getComputedString=function(d){return this.getComputedStringAtIndex(0)};n.setComputedString=function(d,b){return this.setComputedStringAtIndex(0,b)};n.getComputedNumericAtIndex=function(d){return this._storage.getComputedNumericAtIndex(this.getDisplayId(),d)};n.setComputedNumericAtIndex=function(d,
b){this._storage.setComputedNumericAtIndex(this.getDisplayId(),d,b)};n.getComputedStringAtIndex=function(d){return this._storage.getComputedStringAtIndex(this.getDisplayId(),d)};n.setComputedStringAtIndex=function(d,b){return this._storage.setComputedStringAtIndex(this.getDisplayId(),d,b)};n.transform=function(d,b,a,c){const g=this.copy();g._tx+=d;g._ty+=b;g._sx*=a;g._sy*=c;return g};n.extent=function(d,b,a,c){const g=this.copy();g._xmin=d;g._xmax=a;g._ymin=b;g._ymax=c;return g};n.hasFilter=function(){return this._hasFilter};
n.readAttribute=function(d,b=!1){var a=this._readAttribute(d,b);if(void 0!==a)return a;for(const c of this._joined)if(c.setIndex(this.getIndex()),a=c._readAttribute(d,b),void 0!==a)return a};n.readAttributes=function(){return this._readAttributes()};n.joinAttributes=function(d){this._joined.push(d)};n.readArcadeFeature=function(){return this};n.geometry=function(){var d=this.readHydratedGeometry();d=h.convertToGeometry(d,this.geometryType,this.hasZ,this.hasM);d=y.fromJSON(d);d.spatialReference=this._arcadeSpatialReference;
return d};n.field=function(d){return this.readAttribute(d,!0)};n.hasField=function(d){return!0};n.setField=function(d,b){};n.keys=function(){return[]};n.castToText=function(){return""};n.removeAtIndex=function(d){z.isNone(this._deleted)&&(this._deleted=l.StaticBitSet.create(this.getApproximateSize()));this._deleted.set(d)};n._getExists=function(){return z.isNone(this._deleted)||!this._deleted.has(this.getIndex())};n._computeCentroid=function(){if("esriGeometryPolygon"!==this.geometryType)return null;
const d=this.readUnquantizedGeometry();if(!d||d.hasIndeterminateRingOrder)return null;const b=z.unwrapOr(this.getQuantizationTransform(),null);return e.getCentroidOptimizedGeometry(new f,d,this.hasM,this.hasZ,b)};n.copyInto=function(d){d.seen=this.seen;d._storage=this._storage;d._arcadeSpatialReference=this._arcadeSpatialReference;d._joined=this._joined;d._tx=this._tx;d._ty=this._ty;d._sx=this._sx;d._sy=this._sy;d._xmin=this._xmin;d._xmax=this._xmax;d._ymin=this._ymin;d._ymax=this._ymax};k._createClass(p,
[{key:"isEmpty",get:function(){return z.isSome(this._deleted)&&this._deleted.countSet()===this.getApproximateSize()}},{key:"_hasFilter",get:function(){return-1!==this._xmin}}]);return p}();t.FeatureSetReader=m;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/layers/graphics/centroid":function(){define(["exports"],function(t){function k(z,y,x,f,h,e,l=1){e=h?e?4:3:e?3:2;let q=x,p=x+e,n=0,d=0,b=x=0,a=0;for(let c=0,g=f-1;c<g;c++,q+=e,p+=e){f=y[q];const r=y[q+1],u=y[q+2],w=y[p],v=y[p+1],D=y[p+
2];let B=f*v-w*r;b+=B;n+=(f+w)*B;d+=(r+v)*B;h&&(B=f*D-w*u,x+=(u+D)*B,a+=B);f<z[0]&&(z[0]=f);f>z[1]&&(z[1]=f);r<z[2]&&(z[2]=r);r>z[3]&&(z[3]=r);h&&(u<z[4]&&(z[4]=u),u>z[5]&&(z[5]=u))}0<b*l&&(b*=-1);0<a*l&&(a*=-1);if(!b)return null;z=[n,d,.5*b];h&&(z[3]=x,z[4]=.5*a);return z}function m(z,y,x,f,h){h=f?h?4:3:h?3:2;let e=y,l=y+h,q=0,p=0,n=0,d=0;for(let g=0,r=x-1;g<r;g++,e+=h,l+=h){var b=z[e];const u=z[e+1],w=z[e+2],v=z[l],D=z[l+1],B=z[l+2];if(f){{var a=v-b;var c=D-u;const C=B-w;a=Math.sqrt(a*a+c*c+C*C)}}else a=
v-b,c=D-u,a=Math.sqrt(a*a+c*c);a&&(q+=a,f?(b=[b+.5*(v-b),u+.5*(D-u),w+.5*(B-w)],p+=a*b[0],n+=a*b[1],d+=a*b[2]):(b=[b+.5*(v-b),u+.5*(D-u)],p+=a*b[0],n+=a*b[1]))}return 0<q?f?[p/q,n/q,d/q]:[p/q,n/q]:0<x?f?[z[y],z[y+1],z[y+2]]:[z[y],z[y+1]]:null}t.getCentroidOptimizedGeometry=function(z,y,x,f,h){if(!y||!y.lengths.length)return null;const e="upperLeft"===(null==h?void 0:h.originPosition)?-1:1;z.lengths.length&&(z.lengths.length=0);z.coords.length&&(z.coords.length=0);h=z.coords;const l=[],q=x?[Number.POSITIVE_INFINITY,
Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:p,coords:n}=y,d=x?f?4:3:f?3:2;let b=0;for(var a of p){const c=k(q,n,b,a,x,f,e);c&&l.push(c);b+=a*d}l.sort((c,g)=>{let r=e*c[2]-e*g[2];0===r&&x&&(r=c[4]-g[4]);return r});l.length&&(a=6*l[0][2],h[0]=l[0][0]/a,h[1]=l[0][1]/a,x&&(a=6*l[0][4],h[2]=0!==a?l[0][3]/a:0),h[0]<
q[0]||h[0]>q[1]||h[1]<q[2]||h[1]>q[3]||x&&(h[2]<q[4]||h[2]>q[5]))&&(h.length=0);if(!h.length)if(y=y.lengths[0]?m(n,0,p[0],x,f):null)h[0]=y[0],h[1]=y[1],x&&2<y.length&&(h[2]=y[2]);else return null;return z};t.lineCentroid=m;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/views/2d/layers/features/support/StaticBitSet":function(){define(["exports"],function(t){let k=function(){function m(y,x){this._mask=0;this._buf=y;this._mask=x}m.fromBuffer=function(y,x){return new m(y,x)};m.create=function(y,
x=4294967295){y=new Uint32Array(Math.ceil(y/32));return new m(y,x)};var z=m.prototype;z._getIndex=function(y){return Math.floor(y/32)};z.has=function(y){y&=this._mask;return!!(this._buf[this._getIndex(y)]&1<<y%32)};z.hasRange=function(y,x){for(;y%32&&y!==x;){if(this.has(y))return!0;y++}for(;x%32&&y!==x;){if(this.has(y))return!0;x--}if(y===x)return!1;for(y/=32;y!==x/32;y++)if(this._buf[y])return!0;return!1};z.set=function(y){y&=this._mask;const x=this._getIndex(y);this._buf[x]|=1<<y%32};z.setRange=
function(y,x){for(;y%32&&y!==x;)this.set(y++);for(;x%32&&y!==x;)this.set(x--);if(y!==x)for(y/=32;y!==x/32;y++)this._buf[y]=4294967295};z.unset=function(y){y&=this._mask;const x=this._getIndex(y);this._buf[x]&=4294967295^1<<y%32};z.resize=function(y){const x=this._buf;y=new Uint32Array(Math.ceil(y/32));y.set(x);this._buf=y};z.or=function(y){for(let x=0;x<this._buf.length;x++)this._buf[x]|=y._buf[x];return this};z.and=function(y){for(let x=0;x<this._buf.length;x++)this._buf[x]&=y._buf[x];return this};
z.xor=function(y){for(let x=0;x<this._buf.length;x++)this._buf[x]^=y._buf[x];return this};z.ior=function(y){for(let x=0;x<this._buf.length;x++)this._buf[x]|=~y._buf[x];return this};z.iand=function(y){for(let x=0;x<this._buf.length;x++)this._buf[x]&=~y._buf[x];return this};z.ixor=function(y){for(let x=0;x<this._buf.length;x++)this._buf[x]^=~y._buf[x];return this};z.any=function(){for(let y=0;y<this._buf.length;y++)if(this._buf[y])return!0;return!1};z.copy=function(y){for(let x=0;x<this._buf.length;x++)this._buf[x]=
y._buf[x];return this};z.clone=function(){return new m(this._buf.slice(),this._mask)};z.clear=function(){for(let y=0;y<this._buf.length;y++)this._buf[y]=0};z.forEachSet=function(y){for(let x=0;x<this._buf.length;x++){let f=this._buf[x],h=32*x;if(f)for(;f;)f&1&&y(h),f>>>=1,h++}};z.countSet=function(){let y=0;this.forEachSet(x=>{y++});return y};return m}();t.StaticBitSet=k;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/views/support/QueueProcessor":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/maybe ../../core/promiseUtils ../../core/scheduling ../../core/Queue".split(" "),
function(t,k,m,z,y,x){let f=function(e,l){this.item=e;this.controller=l;this.promise=null},h=function(){function e(q){this._deferreds=new Map;this._controllers=new Map;this._processingItems=new Map;this._isPaused=!1;this._task=this._schedule=null;this.concurrency=1;q.concurrency&&(this.concurrency=q.concurrency);this._queue=new x(q.peeker);this.process=q.process;const p=q.scheduler;q.task&&m.isSome(p)&&(this._task=p.registerTask(q.task,n=>this.update(n),()=>this.needsUpdate()))}var l=e.prototype;
l.destroy=function(){this.clear();this._schedule&&(this._schedule.remove(),this._schedule=null);this._task&&(this._task.remove(),this._task=null)};l.abort=function(q){(q=this._controllers.get(q))&&q.abort()};l.clear=function(){this._queue.clear();const q=[];this._controllers.forEach(p=>q.push(p));this._controllers.clear();q.forEach(p=>p.abort());this._processingItems.clear();this._cancelNext()};l.forEach=function(q){this._deferreds.forEach((p,n)=>q(n))};l.get=function(q){return(q=this._deferreds.get(q))?
q.promise:void 0};l.isOngoing=function(q){return this._processingItems.has(q)};l.has=function(q){return this._deferreds.has(q)};l.pause=function(){this._isPaused||(this._isPaused=!0,this._cancelNext())};l.push=function(q,p){const n=this.get(q);if(n)return n;const d=z.createAbortController();let b=null;p&&(b=z.onAbort(p,()=>d.abort()));const a=()=>{c.remove();m.isSome(b)&&b.remove();this._deferreds.delete(q);this._controllers.delete(q);this._queue.remove(q);this._processingItems.delete(q);this._scheduleNext()},
c=z.onAbortOrThrow(d.signal,()=>{const r=this._processingItems.get(q);r&&r.controller.abort();a();g.reject(z.createAbortError())}),g=z.createDeferred();this._deferreds.set(q,g);this._controllers.set(q,d);g.promise.then(a,a);this._queue.push(q);this._scheduleNext();return g.promise};l.reset=function(){const q=[];this._processingItems.forEach(p=>q.push(p));this._processingItems.clear();for(const p of q)this._queue.push(p.item),p.controller.abort();this._scheduleNext()};l.resume=function(){this._isPaused&&
(this._isPaused=!1,this._scheduleNext())};l.takeAll=function(){const q=[];for(;this._queue.length;)q.push(this._queue.pop());this.clear();return q};l.needsUpdate=function(){return!this._isPaused&&0<this._queue.length&&this._processingItems.size<this.concurrency};l.update=function(q){for(;!q.done&&0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),q.madeProgress()};l._scheduleNext=function(){this._task||this._isPaused||this._schedule||(this._schedule=
y.schedule(()=>{this._schedule=null;this._next()}))};l._next=function(){for(;0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())};l._cancelNext=function(){this._schedule&&(this._schedule.remove(),this._schedule=null)};l._processResult=function(q,p){this._canProcessFulfillment(q)&&(this._scheduleNext(),this._deferreds.get(q.item).resolve(p))};l._processError=function(q,p){this._canProcessFulfillment(q)&&(this._scheduleNext(),this._deferreds.get(q.item).reject(p))};
l._canProcessFulfillment=function(q){return this._deferreds.get(q.item)&&this._processingItems.get(q.item)===q?!0:!1};l._process=function(q){if(!m.isNone(q)){var p=z.createAbortController(),n=new f(q,p);this._processingItems.set(q,n);try{var d=this.process(q,p.signal)}catch(b){this._processError(n,b)}z.isPromiseLike(d)?(n.promise=d,d.then(b=>this._processResult(n,b),b=>this._processError(n,b))):this._processResult(n,d)}};k._createClass(e,[{key:"length",get:function(){return this._processingItems.size+
this._queue.length}},{key:"test",get:function(){return{update:q=>this.update(q)}}}]);return e}();t.QueueProcessor=h;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/core/Queue":function(){define(["../chunks/_rollupPluginBabelHelpers","./maybe"],function(t,k){return function(){function m(y=x=>x.values().next().value){this._peeker=y;this._items=new Set}var z=m.prototype;z.clear=function(){this._items.clear()};z.peek=function(){if(0!==this._items.size)return this._peeker(this._items)};z.push=
function(y){this.contains(y)||this._items.add(y)};z.contains=function(y){return this._items.has(y)};z.pop=function(){if(0!==this.length){var y=this.peek();this._items.delete(k.assumeNonNull(y));return y}};z.remove=function(y){this._items.delete(y)};z.filter=function(y){this._items.forEach(x=>{y(x)||this._items.delete(x)});return this};t._createClass(m,[{key:"length",get:function(){return this._items.size}}]);return m}()})},"esri/views/2d/layers/features/support/AttributeStore":function(){define("require exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/has ../../../../../core/maybe ../../../../../core/Logger ../../../../../core/Error ../../../../../core/promiseUtils ../../../../../core/mathUtils ../../../../../core/accessorSupport/diffUtils ../../../../../layers/support/FieldsIndex ../../../engine/webgl/definitions ../../../engine/webgl/Utils ../../../engine/webgl/util/debug ../tileRenderers/support/visualVariablesUtils".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d,b){function a(D,B){return C=>B(D(C))}const c=x.getLogger("esri.views.layers.2d.features.support.AttributeStore"),g=d.createDebugLogger(d.DEBUG_ATTR_UPDATES,c),r=D=>1===(D&2147483648)>>>31?254:255;var u=z("esri-shared-array-buffer"),w=z("esri-atomics");let v=function(){function D(C,A,E,G){this.size=0;this.texelSize=4;const {pixelType:H,layout:K,textureOnly:J}=G;this.textureOnly=J||!1;this.pixelType=H;this._ctype=A;this.layout=K;this._resetRange();this._shared=C;
this.size=E;J||(this.data=this._initData(H,E,C,A))}var B=D.prototype;B.unsetComponentAllTexels=function(C,A){const E=y.unwrap(this.data);for(let G=0;G<this.size*this.size;G++)E[G*this.texelSize+C]&=~A;this.dirtyStart=0;this.dirtyEnd=this.size*this.size-1};B.setComponentAllTexels=function(C,A){const E=y.unwrap(this.data);for(let G=0;G<this.size*this.size;G++)E[G*this.texelSize+C]|=255&A;this.dirtyStart=0;this.dirtyEnd=this.size*this.size-1};B.setComponent=function(C,A,E){const G=y.unwrap(this.data);
for(const H of E)G[H*this.texelSize+C]|=A,this.dirtyStart=Math.min(this.dirtyStart,H),this.dirtyEnd=Math.max(this.dirtyEnd,H)};B.setComponentTexel=function(C,A,E){y.unwrap(this.data)[E*this.texelSize+C]|=A;this.dirtyStart=Math.min(this.dirtyStart,E);this.dirtyEnd=Math.max(this.dirtyEnd,E)};B.unsetComponentTexel=function(C,A,E){y.unwrap(this.data)[E*this.texelSize+C]&=~A;this.dirtyStart=Math.min(this.dirtyStart,E);this.dirtyEnd=Math.max(this.dirtyEnd,E)};B.getData=function(C,A){C&=2147483647;return y.unwrap(this.data)[C*
this.texelSize+A]};B.setData=function(C,A,E){C&=2147483647;0===(this.layout&1<<A)?c.error("mapview-attributes-store","Tried to set a value for a texel's readonly component"):(this.data[C*this.texelSize+A]=E,this.dirtyStart=Math.min(this.dirtyStart,C),this.dirtyEnd=Math.max(this.dirtyEnd,C))};B.lock=function(){5121===this.pixelType&&this._shared&&w&&"local"!==this._ctype&&Atomics.store(this.data,0,1)};B.unlock=function(){5121===this.pixelType&&this._shared&&w&&"local"!==this._ctype&&Atomics.store(this.data,
0,0)};B.expand=function(C){this.size=C;if(!this.textureOnly){C=this._initData(this.pixelType,C,this._shared,this._ctype);const A=y.unwrap(this.data);C.set(A);this.data=C}};B.toMessage=function(){const C=this.dirtyStart,A=this.dirtyEnd;var E=this.texelSize;if(C>A)return null;this._resetRange();const G=!this._shared&&"local"!==this._ctype,H=this.pixelType,K=this.layout,J=y.unwrap(this.data);if(!J.slice){if(!G)return{start:C,end:A,data:null,pixelType:H,layout:K};E=new (n.getPixelArrayCtor(this.pixelType))(Array.prototype.slice.call(this.data,
C*E,(A+1)*E));return{start:C,end:A,data:E,pixelType:H,layout:K}}E=G&&J.slice(C*E,(A+1)*E)||null;return{start:C,end:A,data:E,pixelType:H,layout:K}};B._initData=function(C,A,E,G){E=E&&"local"!==G?SharedArrayBuffer:ArrayBuffer;C=n.getPixelArrayCtor(C);A=new C(new E(A*A*4*C.BYTES_PER_ELEMENT));for(C=0;C<A.length;C+=4)A[C+1]=255;return A};B._resetRange=function(){this.dirtyStart=2147483647;this.dirtyEnd=0};m._createClass(D,[{key:"buffer",get:function(){return y.andThen(this.data,C=>C.buffer)}}]);return D}();
x=function(){function D(C,A){this._client=C;this.config=A;this._attributeComputeMap=new Map;this._blocks=[];this._filters=Array(p.MAX_FILTERS);this._targetType=0;this._abortController=h.createAbortController();this._hasScaleExpr=!1;this._size=32;this._idsToHighlight=new Set;C=A.supportsTextureFloat?5126:5121;g(`Creating AttributeStore ${u?"with":"without"} shared memory`);this._blockDescriptors=[{pixelType:5121,layout:1},{pixelType:5121,layout:15,textureOnly:!0},{pixelType:C,layout:15},{pixelType:C,
layout:15}];this._blocks=this._blockDescriptors.map(()=>null)}var B=D.prototype;B.destroy=function(){this._abortController.abort()};B.update=function(C,A){this.config=A;A=A.schema.processors[0].storage;const E=l.diff(this._schema,A);if(C.targets.feature||C.targets.aggregate)C.storage.data=!0;if(E&&(z("esri-2d-update-debug")&&console.debug("Applying Update - AttributeStore:",E),C.storage.data=!0,this._schema=A,this._attributeComputeMap.clear(),!y.isNone(A))){switch(A.target){case "feature":this._targetType=
0;break;case "aggregate":this._targetType=1}for(const G of A.mapping)this._bindAttribute(G)}};B.onTileData=function(C,A){if(!y.isNone(A.addOrUpdate))for(C=A.addOrUpdate.getCursor();C.next();)A=C.getDisplayId(),this.setAttributeData(A,C)};B.invalidateResources=function(){this._createResourcesPromise=null;this._abortController.abort();this._abortController=h.createAbortController()};B.setHighlight=async function(C,A){const E=this._getBlock(0);A=A.map(G=>G&2147483647);E.lock();E.unsetComponentAllTexels(0,
1);E.setComponent(0,1,A);E.unlock();this._idsToHighlight.clear();for(const G of C)this._idsToHighlight.add(G);await this.sendUpdates()};B.updateFilters=async function(C,A){const {config:E,service:G,spatialReference:H}=A;({filters:A}=E);A=A.map((K,J)=>this._updateFilter(K,J,G,H));(await Promise.all(A)).some(K=>K)&&(C.storage.filters=!0,z("esri-2d-update-debug")&&console.debug("Applying Update - AttributeStore:","Filters changed"))};B.setData=function(C,A,E,G){this._ensureSizeForTexel(C&2147483647);
this._getBlock(A).setData(C,E,G)};B.getData=function(C,A,E){return this._getBlock(A).getData(C,E)};B.getHighlightFlag=function(C){return this._idsToHighlight.has(C)?p.HIGHLIGHT_FLAG:0};B.unsetAttributeData=function(C){C&=2147483647;this._getBlock(0).setData(C,0,0)};B.setAttributeData=function(C,A){const E=C&2147483647;this._ensureSizeForTexel(E);this._getBlock(0).setData(E,0,this.getFilterFlags(A));if(this._targetType===(C&2147483648)>>>31){C=this._attributeComputeMap;var G=this.config.supportsTextureFloat?
1:2;C.size&&C.forEach((H,K)=>{const J=K*G%4;K=this._getBlock(Math.floor(K*G/4)+p.ATTRIBUTE_DATA_VV);H=H(A);if(this.config.supportsTextureFloat)K.setData(E,J,H);else if(H===p.NAN_MAGIC_NUMBER)K.setData(E,J,255),K.setData(E,J+1,255);else{H=e.clamp(Math.round(H),-32767,32766)+32768;const F=(H&65280)>>8;K.setData(E,J,H&255);K.setData(E,J+1,F)}})}};B.sendUpdates=function(){if(this._nextUpdate)return this._nextUpdate.promise;if(this._currUpdate)return this._nextUpdate=h.createResolver(),this._nextUpdate.promise;
const C={blocks:this._blocks.map(A=>y.isSome(A)?A.toMessage():null)};return this._currUpdate=this._createResources().then(()=>{var A=()=>{this._currUpdate=null;if(this._nextUpdate){const E=this._nextUpdate;this._nextUpdate=null;this.sendUpdates().then(()=>E.resolve())}};A=this._client.update(C,this._signal).then(A).catch(A);this._client.render(this._signal);return A}).catch(A=>{if(h.isAbortError(A))return this._createResourcesPromise=null,this._createResources();c.error(new f("mapview-attribute-store",
"Encountered an error during client update",A));return Promise.resolve()})};B._ensureSizeForTexel=function(C){for(;C>=this._size*this._size&&!this._expand(););};B._bindAttribute=function(C){function A(){return C.normalizationField?H=>{const K=H.readAttribute(C.normalizationField);return K?H.readAttribute(C.field)/K:null}:H=>H.readAttribute(C.field)}function E(){C.normalizationField&&c.warn("mapview-arcade","Ignoring normalizationField specified with an arcade expression which is not supported.");
return H=>H.getComputedNumericAtIndex(C.fieldIndex)}let G;if(null!=C.fieldIndex)G=E();else if(C.field)G=A();else return;C.valueRepresentation&&(G=a(G,H=>b.getVisualVariableSizeValueRepresentationRatio(H,C.valueRepresentation)));this._attributeComputeMap.set(C.binding,a(G,H=>null===H||isNaN(H)||Infinity===H?p.NAN_MAGIC_NUMBER:H))};B._createResources=function(){if(y.isSome(this._createResourcesPromise))return this._createResourcesPromise;this._getBlock(p.ATTRIBUTE_DATA_ANIMATION);g("Initializing AttributeStore");
var C={shared:u&&"local"!==this._client.type,size:this._size,blocks:y.mapMany(this._blocks,A=>({textureOnly:A.textureOnly,buffer:A.buffer,pixelType:A.pixelType}))};this._createResourcesPromise=C=this._client.initialize(C,this._signal).catch(A=>{h.isAbortError(A)?this._createResourcesPromise=null:c.error(new f("mapview-attribute-store","Encountered an error during client initialization",A))});C.then(()=>y.isNone(this._createResourcesPromise)?this._createResources():void 0);return C};B._getBlock=function(C){var A=
this._blocks[C];if(y.isSome(A))return A;g(`Initializing AttributeBlock at index ${C}`);A=new v(u,this._client.type,this._size,this._blockDescriptors[C]);this._blocks[C]=A;this._createResourcesPromise=null;return A};B._expand=function(){if(this._size<this.config.maxTextureSize){const C=this._size<<=1;g("Expanding block size to",C,this._blocks);y.forEachSome(this._blocks,A=>A.expand(C));this._createResourcesPromise=null;this._size=C;return 0}c.error(new f("mapview-limitations","Maximum number of onscreen features exceeded."));
return-1};B._updateFilter=async function(C,A,E,G){const H=this._filters[A],K=y.isSome(H)&&H.hash;if(!H&&!C||K===JSON.stringify(C))return!1;if(y.isNone(C))return C=1<<A+1,E=this._getBlock(0),this._filters[A]=null,E.setComponentAllTexels(0,C),this.sendUpdates(),!0;await (await this._getFilter(A,E)).update(C,G);return!0};B._getFilter=async function(C,A){var E=this._filters[C];if(y.isSome(E))return E;({default:E}=await new Promise(function(G,H){t(["../../../../../layers/graphics/data/FeatureFilter"],
function(K){G(Object.freeze({__proto__:null,"default":K}))},H)}));A=new E({geometryType:A.geometryType,hasM:!1,hasZ:!1,timeInfo:A.timeInfo,fieldsIndex:new q(A.fields)});return this._filters[C]=A};B.isVisible=function(C){return!!(this._getBlock(0).getData(C,0)&2)};B.getFilterFlags=function(C){let A=0;var E=r(C.getDisplayId());for(let H=0;H<this._filters.length;H++){var G=this._filters[H];G=!(E&1<<H)||y.isNone(G)||G.check(C);A|=(G?1:0)<<H}E=0;this._idsToHighlight.size&&(C=C.getObjectId(),E=this.getHighlightFlag(C));
return A<<1|E};m._createClass(D,[{key:"hasScaleExpr",get:function(){return this._hasScaleExpr}},{key:"_signal",get:function(){return this._abortController.signal}}]);return D}();k.DISPLAY_ID_TYPE_AGGREGATE=1;k.DISPLAY_ID_TYPE_FEATURE=0;k.default=x;k.getDisplayIdFilterMask=r;k.getDisplayIdTexel=D=>D&2147483647;k.getDisplayIdType=D=>(D&2147483648)>>>31;k.isAggregateId=function(D){return 1===(D&2147483648)>>>31};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/core/accessorSupport/diffUtils":function(){define(["exports",
"../maybe","./utils","../Accessor","../Collection"],function(t,k,m,z,y){function x(d){return d instanceof y?Object.keys(d.items):d instanceof z?m.getProperties(d).keys():d?Object.keys(d):[]}function f(d,b){return d instanceof y?d.items[b]:d[b]}function h(d,b){return Array.isArray(d)&&Array.isArray(b)?d.length!==b.length:!1}function e(d){return d?d.declaredClass:null}function l(d,b){const a=d.diff;if(a&&"function"===typeof a)return a(d,b);const c=x(d),g=x(b);if(0!==c.length||0!==g.length){if(!c.length||
!g.length||h(d,b))return{type:"complete",oldValue:d,newValue:b};var r=g.filter(v=>-1===c.indexOf(v)),u=c.filter(v=>-1===g.indexOf(v));u=c.filter(v=>-1<g.indexOf(v)&&f(d,v)!==f(b,v)).concat(r,u).sort();if((r=e(d))&&-1<n.indexOf(r)&&u.length)return{type:"complete",oldValue:d,newValue:b};var w;r=d instanceof z&&b instanceof z;for(const v of u){u=f(d,v);const D=f(b,v);!(r||"function"!==typeof u&&"function"!==typeof D)||u===D||null==u&&null==D||(u=a&&a[v]&&"function"===typeof a[v]?a[v](u,D):"object"===
typeof u&&"object"===typeof D&&e(u)===e(D)?l(u,D):{type:"complete",oldValue:u,newValue:D},k.isSome(u)&&(k.isSome(w)?w.diff[v]=u:w={type:"partial",diff:{[v]:u}}))}return w}}function q(d,b){if(k.isNone(d))return!1;b=b.split(".");for(const a of b){if("complete"===d.type)break;if("partial"===d.type){if(d=d.diff[a],!d)return!1}else return!1}return!0}function p(d){if(k.isNone(d))return!0;switch(d.type){case "complete":return!1;case "collection":for(const b of d.added)if(!p(b))return!1;for(const b of d.removed)if(!p(b))return!1;
for(const b of d.changed)if(!p(b))return!1;return!0;case "partial":for(const b in d.diff)if(!p(d.diff[b]))return!1;return!0}}const n=["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"];t.diff=function(d,b){if("function"!==typeof d&&"function"!==typeof b&&(d||b))return!d||!b||"object"===typeof d&&"object"===typeof b&&e(d)!==e(b)?{type:"complete",oldValue:d,newValue:b}:l(d,b)};t.hasDiff=q;t.hasDiffAny=function(d,b){for(const a of b)if(q(d,
a))return!0;return!1};t.isEmpty=p;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/Utils":function(){define("exports ../../../../core/Logger ../../../../core/Error ../../../../core/mathUtils ../../../../core/screenUtils ../../../webgl/Program ../../../webgl/BufferObject ../../../webgl/Texture ../../../webgl/VertexArrayObject ../../../webgl/Renderbuffer ../../../webgl/FramebufferObject ../../../webgl/ProgramCache ../../../webgl/RenderingContext ../../../webgl/ShaderCompiler ./enums ./color ./SymbolProperties".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d,b,a,c){function g(S){const Q={};for(const U of S)Q[U.name]=U.strideInBytes;return Q}function r(S){switch(S){case b.WGLGeometryType.MARKER:return K;case b.WGLGeometryType.FILL:return J;case b.WGLGeometryType.LINE:return F;case b.WGLGeometryType.TEXT:return N;case b.WGLGeometryType.LABEL:return L}}function u(S){switch(S%4){case 0:case 2:return 4;case 1:case 3:return 1}}function w(S){switch(S){case 5120:case 5121:return 1;case 5122:case 5123:return 2;case 5126:case 5124:case 5125:return 4}}
function v(S){const Q={};for(const U in S){let W=0;Q[U]=S[U].map(fa=>{const Z={...fa,normalized:fa.normalized||!1,divisor:fa.divisor||0,offset:W,stride:0};W+=fa.count*w(fa.type);return Z});Q[U].forEach(fa=>fa.stride=W)}return Q}const D=k.getLogger("esri.views.2d.engine.webgl.Utils");k=[{name:"geometry",strideInBytes:32,divisor:0}];x=[{name:"geometry",strideInBytes:32,divisor:0}];f=[{name:"geometry",strideInBytes:12,divisor:0}];e=[{name:"geometry",strideInBytes:36,divisor:0}];l=[{name:"geometry",strideInBytes:32,
divisor:0}];q=[{name:"geometry",strideInBytes:36,divisor:0}];const B=g(k),C=g(x),A=g(f),E=g(e),G=g(l),H=g(q),K=["geometry"],J=["geometry"],F=["geometry"],N=["geometry"],L=["geometry"],M=new Map;t.C_FILL_STRIDE_SPEC=C;t.C_FILL_STRIDE_SPEC_DD=A;t.C_FILL_VERTEX_DEF=x;t.C_FILL_VERTEX_DEF_DD=f;t.C_ICON_STRIDE_SPEC=B;t.C_ICON_VERTEX_DEF=k;t.C_LABEL_STRIDE_SPEC=H;t.C_LABEL_VERTEX_DEF=q;t.C_LINE_STRIDE_SPEC=E;t.C_LINE_VERTEX_DEF=e;t.C_TEXT_STRIDE_SPEC=G;t.C_TEXT_VERTEX_DEF=l;t.C_VBO_GEOMETRY="geometry";t.C_VBO_INFO=
{["geometry"]:35044};t.C_VBO_PERINSTANCE="per_instance";t.C_VBO_PERINSTANCE_VV="per_instance_vv";t.allocateTypedArrayBuffer=function(S,Q){switch(Q%4){case 0:case 2:return new Uint32Array(Math.floor(S*Q/4));case 1:case 3:return new Uint8Array(S*Q)}};t.allocateTypedArrayBufferwithData=function(S,Q){switch(Q%4){case 0:case 2:return new Uint32Array(S);case 1:case 3:return new Uint8Array(S)}};t.copyMeshData=function(S,Q,U,W,fa,Z,T){for(const sa in Z){var ba=Z[sa].stride,ha=u(ba);const ua=Z[sa].data,O=
U[sa].data,V=ba*fa.vertexCount/ha,ja=ba*S/ha;ba=ba*fa.vertexFrom/ha;for(ha=0;ha<V;++ha)O[ha+ja]=ua[ha+ba]}U=fa.indexCount;for(Z=0;Z<U;++Z)W[Z+Q]=T[Z+fa.indexFrom]-fa.vertexFrom+S};t.createGeometryData=function(S,Q){const U=[];for(let W=0;5>W;++W){const fa=r(W),Z={};for(const T of fa)Z[T]={data:Q(W,T)};U.push({data:S(W),buffers:Z})}return U};t.createProgramDescriptor=(S,Q)=>{if(!M.has(S)){const fa=v(Q);var U=fa;var W={};for(const Z in U){const T=U[Z];W[Z]=T.length?T[0].stride:0}U=W;W={};for(const Z in Q)for(const T of Q[Z])W[T.name]=
T.location;Q=W;M.set(S,{strides:U,bufferLayouts:fa,attributes:Q})}return M.get(S)};t.createTextureFromTexelData=function(S,Q){let U,W;z.isPowerOfTwo(Q.width)&&z.isPowerOfTwo(Q.height)?(U=!0,W=9987):(U=!1,W=9729);return new h(S,{target:3553,pixelFormat:6408,internalFormat:6408,dataType:5121,hasMipmap:U,samplingMode:W,wrapMode:33071,flipped:!0},Q)};t.forEachGeometryType=function(S){S(b.WGLGeometryType.MARKER);S(b.WGLGeometryType.FILL);S(b.WGLGeometryType.LINE);S(b.WGLGeometryType.TEXT);S(b.WGLGeometryType.LABEL)};
t.geometryToMappedGeometry=function(S){return{vertexFrom:void 0,vertexTo:void 0,geometry:S}};t.getBytes=w;t.getCapType=function(S,Q){switch(S){case "butt":return 0;case "round":return Q?2:1;case "square":return 2;default:return D.error(new m("mapview-invalid-type",`Cap type ${S} is not a valid option. Defaulting to round`)),1}};t.getJoinType=function(S){switch(S){case "miter":return 2;case "bevel":return 0;case "round":return 1;default:return D.error(new m("mapview-invalid-type",`Join type ${S} is not a valid option. Defaulting to round`)),
1}};t.getNamedBuffers=r;t.getPixelArrayCtor=function(S){switch(S){case 5121:return Uint8Array;case 32819:return Uint16Array;case 5126:return Float32Array;default:D.error(new m("webgl-utils",`Unable to handle type ${S}`))}};t.getPixelBytes=function(S){switch(S){case 5121:return 1;case 32819:return 2;case 5126:return 4;default:D.error(new m("webgl-utils",`Unable to handle type ${S}`))}};t.getStrides=function(S,Q){switch(S){case b.WGLGeometryType.MARKER:return B;case b.WGLGeometryType.FILL:return Q?
A:C;case b.WGLGeometryType.LINE:return E;case b.WGLGeometryType.TEXT:return G;case b.WGLGeometryType.LABEL:return H}};t.getTextProperties=function(S){return c.TextProperties.pool.acquire(S.color?a.copyAndPremultiply(S.color):[255,255,255,255],S.haloColor?a.copyAndPremultiply(S.haloColor):[255,255,255,255],y.pt2px(S.haloSize),y.pt2px(S.font.size),S.angle*Math.PI/180,S.xoffset/S.font.size,S.yoffset/S.font.size,"left"===S.horizontalAlignment?0:"right"===S.horizontalAlignment?1:.5,"top"===S.verticalAlignment?
0:"bottom"===S.verticalAlignment?1:.5)};t.getTransformParams=function(S){const {transform:Q,hasZ:U,hasM:W}=S;return{transform:Q,hasZ:U,hasM:W}};t.getVVType=function(S){switch(S){case "opacity":return b.VVType.OPACITY;case "color":return b.VVType.COLOR;case "rotation":return b.VVType.ROTATION;case "size":return b.VVType.SIZE;default:return D.error(`Cannot interpret unknown vv: ${S}`),null}};t.isDefined=function(S){return null!=S};t.isNumber=function(S){return"number"===typeof S};t.strideToPackingFactor=
u;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/core/screenUtils":function(){define(["exports"],function(t){function k(z){return z?72*z/96:0}const m=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i;t.castRenderScreenPointArray=function(z){return z};t.castRenderScreenPointArray3=function(z){return z};t.castScreenPointArray=function(z){return z};t.createRenderScreenPoint=function(z=0,y=0){return{x:z,y}};t.createRenderScreenPointArray=function(z=0,y=0){return[z,y]};t.createRenderScreenPointArray3=function(z=
0,y=0,x=0){return[z,y,x]};t.createScreenPoint=function(z=0,y=0){return{x:z,y}};t.createScreenPointArray=function(z=0,y=0){return[z,y]};t.pt2px=function(z){return z?z/72*96:0};t.px2pt=k;t.screenPointArrayToObject=function(z,y){return y?(y.x=z[0],y.y=z[1],y):{x:z[0],y:z[1]}};t.screenPointObjectToArray=function(z,y){return y?(y[0]=z.x,y[1]=z.y,2<y.length&&(y[2]=0),y):[z.x,z.y]};t.toPt=function(z){if("string"===typeof z){if(m.test(z)){var y=z.match(m),x=Number(y[1]);y=y[3]&&y[3].toLowerCase();z="-"===
z.charAt(0);x="px"===y?k(x):x;return z?-x:x}console.warn("screenUtils.toPt: input not recognized!");return null}return z};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/views/webgl/Program":function(){define(["../../chunks/_rollupPluginBabelHelpers","../../core/has","../../core/maybe","./ShaderTranspiler"],function(t,k,m,z){function y(x,f){if(m.isNone(x)||x.length!==f.length)return!0;for(let h=0;h<x.length;++h)if(x[h]!==f[h])return!0;return!1}return function(){function x(h,e,l,q,p={}){this._glName=
this._context=null;this._locations={};this._initialized=!1;this._fShader=this._vShader=null;this._defines={};this._nameToUniformLocation={};this._nameToAttribLocation={};this._nameToUniform1={};this._nameToUniform1v={};this._nameToUniform2={};this._nameToUniform3={};this._nameToUniform4={};this._nameToUniformMatrix3={};this._nameToUniformMatrix4={};h||console.error("RenderingContext isn't initialized!");0===e.length&&console.error("Shaders source should not be empty!");h.instanceCounter.increment(3,
this);this._context=h;this._vertexShaderSource=e;this._fragmentShaderSource=l;if(Array.isArray(p))for(const n of p)this._defines[n]="1";else this._defines=p;this._locations=q}var f=x.prototype;f.getDefine=function(h){return this._defines[h]};f.dispose=function(){if(this._context){var h=this._context.gl;this._vShader&&(h.deleteShader(this._vShader),this._vShader=null);this._fShader&&(h.deleteShader(this._fShader),this._fShader=null);this._glName&&(h.deleteProgram(this._glName),this._glName=null);this._context.instanceCounter.decrement(3,
this);this._context=null}};f.initialize=function(){if(!this._initialized){this._vShader=this._loadShader(35633);this._fShader=this._loadShader(35632);this._vShader&&this._fShader||console.error("Error loading shaders!");var h=this._context.gl,e=h.createProgram();h.attachShader(e,this._vShader);h.attachShader(e,this._fShader);for(const l in this._locations)h.bindAttribLocation(e,this._locations[l],l);h.linkProgram(e);this._glName=e;this._initialized=!0}};f.getUniformLocation=function(h){this.initialize();
void 0===this._nameToUniformLocation[h]&&(this._nameToUniformLocation[h]=this._context.gl.getUniformLocation(this._glName,h));return this._nameToUniformLocation[h]};f.hasUniform=function(h){return null!==this.getUniformLocation(h)};f.getAttribLocation=function(h){this.initialize();void 0===this._nameToAttribLocation[h]&&(this._nameToAttribLocation[h]=this._context.gl.getAttribLocation(this._glName,h));return this._nameToAttribLocation[h]};f.setUniform1i=function(h,e){const l=this._nameToUniform1[h];
if(void 0===l||e!==l)this._context.bindProgram(this),this._context.gl.uniform1i(this.getUniformLocation(h),e),this._nameToUniform1[h]=e};f.setUniform1iv=function(h,e){const l=this._nameToUniform1v[h];y(l,e)&&(this._context.bindProgram(this),this._context.gl.uniform1iv(this.getUniformLocation(h),e),void 0===l?this._nameToUniform1v[h]=x._arrayCopy(e):x._arrayAssign(e,l))};f.setUniform2iv=function(h,e){const l=this._nameToUniform2[h];y(l,e)&&(this._context.bindProgram(this),this._context.gl.uniform2iv(this.getUniformLocation(h),
e),void 0===l?this._nameToUniform2[h]=x._arrayCopy(e):x._arrayAssign(e,l))};f.setUniform3iv=function(h,e){const l=this._nameToUniform3[h];y(l,e)&&(this._context.bindProgram(this),this._context.gl.uniform3iv(this.getUniformLocation(h),e),void 0===l?this._nameToUniform3[h]=x._arrayCopy(e):x._arrayAssign(e,l))};f.setUniform4iv=function(h,e){const l=this._nameToUniform4[h];y(l,e)&&(this._context.bindProgram(this),this._context.gl.uniform4iv(this.getUniformLocation(h),e),void 0===l?this._nameToUniform4[h]=
x._arrayCopy(e):x._arrayAssign(e,l))};f.setUniform1f=function(h,e){const l=this._nameToUniform1[h];if(void 0===l||e!==l)this._context.bindProgram(this),this._context.gl.uniform1f(this.getUniformLocation(h),e),this._nameToUniform1[h]=e};f.setUniform1fv=function(h,e){const l=this._nameToUniform1v[h];y(l,e)&&(this._context.bindProgram(this),this._context.gl.uniform1fv(this.getUniformLocation(h),e),void 0===l?this._nameToUniform1v[h]=x._arrayCopy(e):x._arrayAssign(e,l))};f.setUniform2f=function(h,e,l){const q=
this._nameToUniform2[h];if(void 0===q||e!==q[0]||l!==q[1])this._context.bindProgram(this),this._context.gl.uniform2f(this.getUniformLocation(h),e,l),void 0===q?this._nameToUniform2[h]=[e,l]:(q[0]=e,q[1]=l)};f.setUniform2fv=function(h,e){const l=this._nameToUniform2[h];y(l,e)&&(this._context.bindProgram(this),this._context.gl.uniform2fv(this.getUniformLocation(h),e),void 0===l?this._nameToUniform2[h]=x._arrayCopy(e):x._arrayAssign(e,l))};f.setUniform3f=function(h,e,l,q){const p=this._nameToUniform3[h];
if(void 0===p||e!==p[0]||l!==p[1]||q!==p[2])this._context.bindProgram(this),this._context.gl.uniform3f(this.getUniformLocation(h),e,l,q),void 0===p?this._nameToUniform3[h]=[e,l,q]:(p[0]=e,p[1]=l,p[2]=q)};f.setUniform3fv=function(h,e){const l=this._nameToUniform3[h];y(l,e)&&(this._context.bindProgram(this),this._context.gl.uniform3fv(this.getUniformLocation(h),e),void 0===l?this._nameToUniform3[h]=x._arrayCopy(e):x._arrayAssign(e,l))};f.setUniform4f=function(h,e,l,q,p){const n=this._nameToUniform4[h];
if(void 0===n||e!==n[0]||l!==n[1]||q!==n[2]||p!==n[3])this._context.bindProgram(this),this._context.gl.uniform4f(this.getUniformLocation(h),e,l,q,p),void 0===n?this._nameToUniform4[h]=[e,l,q,p]:(n[0]=e,n[1]=l,n[2]=q,n[3]=p)};f.setUniform4fv=function(h,e){const l=this._nameToUniform4[h];y(l,e)&&(this._context.bindProgram(this),this._context.gl.uniform4fv(this.getUniformLocation(h),e),void 0===l?this._nameToUniform4[h]=x._arrayCopy(e):x._arrayAssign(e,l))};f.setUniformMatrix3fv=function(h,e,l=!1){const q=
this._nameToUniformMatrix3[h];var p=m.isNone(q)?!0:9!==q.length?y(q,e):9!==q.length||q[0]!==e[0]||q[1]!==e[1]||q[2]!==e[2]||q[3]!==e[3]||q[4]!==e[4]||q[5]!==e[5]||q[6]!==e[6]||q[7]!==e[7]||q[8]!==e[8];p&&(this._context.bindProgram(this),this._context.gl.uniformMatrix3fv(this.getUniformLocation(h),l,e),void 0===q?this._nameToUniformMatrix3[h]=x._arrayCopy(e):x._arrayAssign(e,q))};f.setUniformMatrix4fv=function(h,e,l=!1){const q=this._nameToUniformMatrix4[h];var p=m.isNone(q)?!0:16!==q.length?y(q,e):
16!==q.length||q[0]!==e[0]||q[1]!==e[1]||q[2]!==e[2]||q[3]!==e[3]||q[4]!==e[4]||q[5]!==e[5]||q[6]!==e[6]||q[7]!==e[7]||q[8]!==e[8]||q[9]!==e[9]||q[10]!==e[10]||q[11]!==e[11]||q[12]!==e[12]||q[13]!==e[13]||q[14]!==e[14]||q[15]!==e[15];p&&(this._context.bindProgram(this),this._context.gl.uniformMatrix4fv(this.getUniformLocation(h),l,e),void 0===q?this._nameToUniformMatrix4[h]=x._arrayCopy(e):x._arrayAssign(e,q))};f.assertCompatibleVertexAttributeLocations=function(h){(h=h.locations===this.locations)||
console.error("VertexAttributeLocations are incompatible");return h};x._padToThree=function(h){let e=h.toString();1E3>h&&(e=("  "+h).slice(-3));return e};f._addLineNumbers=function(h){let e=2;return h.replace(/\n/g,()=>"\n"+x._padToThree(e++)+":")};f._loadShader=function(h){var e=35633===h,l=e?this._vertexShaderSource:this._fragmentShaderSource;let q="";for(const p in this._defines)q+=`#define ${p} ${this._defines[p]}\n`;l=q+l;"webgl2"===this._context.contextVersion&&(l=z.transpileShader(l,e?"vertex":
"fragment"));e=this._context.gl;h=e.createShader(h);e.shaderSource(h,l);e.compileShader(h);return h};x._arrayCopy=function(h){const e=[];for(let l=0;l<h.length;++l)e.push(h[l]);return e};x._arrayAssign=function(h,e){for(let l=0;l<h.length;++l)e[l]=h[l]};t._createClass(x,[{key:"glName",get:function(){return this._glName}},{key:"locations",get:function(){return this._locations}}]);return x}()})},"esri/views/webgl/ShaderTranspiler":function(){define(["exports","../../chunks/_commonjsHelpers","./reservedWordsGLSL3"],
function(t,k,m){function z(){function a(Q){Q.length&&H.push({type:d[C],data:Q,position:F,line:K,column:J})}function c(){G=G.length?[]:G;if("/"===E&&"*"===A)return F=B+D-1,C=0,E=A,D+1;if("/"===E&&"/"===A)return F=B+D-1,C=1,E=A,D+1;if("#"===A)return C=2,F=B+D,D;if(/\s/.test(A))return C=9,F=B+D,D;N=/\d/.test(A);L=/[^\w_]/.test(A);F=B+D;C=N?4:L?3:9999;return D}function g(){if(("\r"===A||"\n"===A)&&"\\"!==E)return a(G.join("")),C=999,D;G.push(A);E=A;return D+1}function r(){if("."===E&&/\d/.test(A))return C=
5,D;if("/"===E&&"*"===A)return C=0,D;if("/"===E&&"/"===A)return C=1,D;if("."===A&&G.length){for(;u(G););C=5;return D}if(";"===A||")"===A||"("===A){if(G.length)for(;u(G););a(A);C=999;return D+1}var Q=2===G.length&&"\x3d"!==A;if(/[\w_\d\s]/.test(A)||Q){for(;u(G););C=999;return D}G.push(A);E=A;return D+1}function u(Q){var U=0;do{var W=p.indexOf(Q.slice(0,Q.length+U).join(""));var fa=p[W];if(-1===W){if(0<U--+Q.length)continue;fa=Q.slice(0,1).join("")}a(fa);F+=fa.length;G=G.slice(fa.length);return G.length}while(1)}
function w(){if("."===A||/[eE]/.test(A))return G.push(A),C=5,E=A,D+1;if("x"===A&&1===G.length&&"0"===G[0])return C=11,G.push(A),E=A,D+1;if(/[^\d]/.test(A))return a(G.join("")),C=999,D;G.push(A);E=A;return D+1}function v(){"f"===A&&(G.push(A),E=A,D+=1);if(/[eE]/.test(A)||"-"===A&&/[eE]/.test(E))return G.push(A),E=A,D+1;if(/[^\d]/.test(A))return a(G.join("")),C=999,D;G.push(A);E=A;return D+1}var D=0,B=0,C=999,A,E,G=[],H=[],K=1,J=0,F=0,N=!1,L=!1,M="",S;return function(Q){H=[];if(null!==Q){Q=Q.replace?
Q.replace(/\r\n/g,"\n"):Q;D=0;M+=Q;for(S=M.length;A=M[D],D<S;){Q=D;switch(C){case 0:"/"===A&&"*"===E?(G.push(A),a(G.join("")),C=999):(G.push(A),E=A);D+=1;break;case 1:D=g();break;case 2:D=g();break;case 3:D=r();break;case 4:D=w();break;case 11:/[^a-fA-F0-9]/.test(A)?(a(G.join("")),C=999):(G.push(A),E=A,D+=1);break;case 5:D=v();break;case 9999:if(/[^\d\w_]/.test(A)){var U=G.join("");C=-1<q.indexOf(U)?8:-1<n.indexOf(U)?7:6;a(G.join(""));C=999}else G.push(A),E=A,D+=1;break;case 9:/[^\s]/g.test(A)?(a(G.join("")),
C=999):(G.push(A),E=A,D+=1);break;case 999:D=c()}if(Q!==D)switch(M[Q]){case "\n":J=0;++K;break;default:++J}}B+=D;M=M.slice(D);return H}G.length&&a(G.join(""));C=10;a("(eof)");return H}}function y(a){return a.map(c=>"eof"!==c.type?c.data:"").join("")}function x(a,c="100",g="300 es"){const r=/^\s*#version\s+([0-9]+(\s+[a-zA-Z]+)?)\s*/;for(const u of a)if("preprocessor"===u.type){const w=r.exec(u.data);if(w){a=w[1].replace(/\s\s+/g," ");if(a===g)return a;if(a===c)return u.data="#version "+g,c;throw Error("unknown glsl version: "+
a);}}a.splice(0,0,{type:"preprocessor",data:"#version "+g},{type:"whitespace",data:"\n"});return null}function f(a,c,g,r){r=r||g;for(const u of a)if("ident"===u.type&&u.data===g)return r in c?c[r]++:c[r]=0,f(a,c,r+"_"+c[r],r);return g}function h(a,c,g="afterVersion"){const r={data:"\n",type:"whitespace"},u=v=>v<a.length?/[^\r\n]$/.test(a[v].data):!1;let w=function(v){let D=-1,B=0,C=-1;for(let E=0;E<v.length;E++){var A=v[E];"preprocessor"===A.type&&(A.data.match(/#(if|ifdef|ifndef)\s+.+/)?++B:A.data.match(/#endif\s*.*/)&&
--B);("afterVersion"===g||"afterPrecision"===g)&&"preprocessor"===A.type&&/^#version/.test(A.data)&&(C=Math.max(C,E));if("afterPrecision"===g&&"keyword"===A.type&&"precision"===A.data){a:{for(A=E;A<v.length;A++){const G=v[A];if("operator"===G.type&&";"===G.data)break a}A=null}if(null===A)throw Error("precision statement not followed by any semicolons!");C=Math.max(C,A)}D<C&&0===B&&(D=E)}return D+1}(a);u(w-1)&&a.splice(w++,0,r);for(const v of c)a.splice(w++,0,v);u(w-1)&&u(w)&&a.splice(w,0,r)}function e(a,
c,g,r="lowp"){h(a,[{type:"keyword",data:"out"},{type:"whitespace",data:" "},{type:"keyword",data:r},{type:"whitespace",data:" "},{type:"keyword",data:g},{type:"whitespace",data:" "},{type:"ident",data:c},{type:"operator",data:";"}],"afterPrecision")}function l(a,c,g,r,u="lowp"){h(a,[{type:"keyword",data:"layout"},{type:"operator",data:"("},{type:"keyword",data:"location"},{type:"whitespace",data:" "},{type:"operator",data:"\x3d"},{type:"whitespace",data:" "},{type:"integer",data:r.toString()},{type:"operator",
data:")"},{type:"whitespace",data:" "},{type:"keyword",data:"out"},{type:"whitespace",data:" "},{type:"keyword",data:u},{type:"whitespace",data:" "},{type:"keyword",data:g},{type:"whitespace",data:" "},{type:"ident",data:c},{type:"operator",data:";"}],"afterPrecision")}var q=k.createCommonjsModule(function(a){(function(c){c=c();void 0!==c&&(a.exports=c)})(function(){return"precision highp mediump lowp attribute const uniform varying break continue do for while if else in out inout float int void bool true false discard return mat2 mat3 mat4 vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadow struct asm class union enum typedef template this packed goto switch default inline noinline volatile public static extern external interface long short double half fixed unsigned input output hvec2 hvec3 hvec4 dvec2 dvec3 dvec4 fvec2 fvec3 fvec4 sampler2DRect sampler3DRect sampler2DRectShadow sizeof cast namespace using".split(" ")})}),
p=k.createCommonjsModule(function(a){(function(c){c=c();void 0!==c&&(a.exports=c)})(function(){"use strict;";return"\x3c\x3c\x3d \x3e\x3e\x3d ++ -- \x3c\x3c \x3e\x3e \x3c\x3d \x3e\x3d \x3d\x3d !\x3d \x26\x26 || +\x3d -\x3d *\x3d /\x3d %\x3d \x26\x3d ^^ ^\x3d |\x3d ( ) [ ] . ! ~ * / % + - \x3c \x3e \x26 ^ | ? : \x3d , ; { }".split(" ")})}),n=k.createCommonjsModule(function(a){(function(c){c=c();void 0!==c&&(a.exports=c)})(function(){return"abs acos all any asin atan ceil clamp cos cross dFdx dFdy degrees distance dot equal exp exp2 faceforward floor fract gl_BackColor gl_BackLightModelProduct gl_BackLightProduct gl_BackMaterial gl_BackSecondaryColor gl_ClipPlane gl_ClipVertex gl_Color gl_DepthRange gl_DepthRangeParameters gl_EyePlaneQ gl_EyePlaneR gl_EyePlaneS gl_EyePlaneT gl_Fog gl_FogCoord gl_FogFragCoord gl_FogParameters gl_FragColor gl_FragCoord gl_FragData gl_FragDepth gl_FragDepthEXT gl_FrontColor gl_FrontFacing gl_FrontLightModelProduct gl_FrontLightProduct gl_FrontMaterial gl_FrontSecondaryColor gl_LightModel gl_LightModelParameters gl_LightModelProducts gl_LightProducts gl_LightSource gl_LightSourceParameters gl_MaterialParameters gl_MaxClipPlanes gl_MaxCombinedTextureImageUnits gl_MaxDrawBuffers gl_MaxFragmentUniformComponents gl_MaxLights gl_MaxTextureCoords gl_MaxTextureImageUnits gl_MaxTextureUnits gl_MaxVaryingFloats gl_MaxVertexAttribs gl_MaxVertexTextureImageUnits gl_MaxVertexUniformComponents gl_ModelViewMatrix gl_ModelViewMatrixInverse gl_ModelViewMatrixInverseTranspose gl_ModelViewMatrixTranspose gl_ModelViewProjectionMatrix gl_ModelViewProjectionMatrixInverse gl_ModelViewProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixTranspose gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_Normal gl_NormalMatrix gl_NormalScale gl_ObjectPlaneQ gl_ObjectPlaneR gl_ObjectPlaneS gl_ObjectPlaneT gl_Point gl_PointCoord gl_PointParameters gl_PointSize gl_Position gl_ProjectionMatrix gl_ProjectionMatrixInverse gl_ProjectionMatrixInverseTranspose gl_ProjectionMatrixTranspose gl_SecondaryColor gl_TexCoord gl_TextureEnvColor gl_TextureMatrix gl_TextureMatrixInverse gl_TextureMatrixInverseTranspose gl_TextureMatrixTranspose gl_Vertex greaterThan greaterThanEqual inversesqrt length lessThan lessThanEqual log log2 matrixCompMult max min mix mod normalize not notEqual pow radians reflect refract sign sin smoothstep sqrt step tan texture2D texture2DLod texture2DProj texture2DProjLod textureCube textureCubeLod texture2DLodEXT texture2DProjLodEXT textureCubeLodEXT texture2DGradEXT texture2DProjGradEXT textureCubeGradEXT".split(" ")})}),
d="block-comment line-comment preprocessor operator integer float ident builtin keyword whitespace eof integer".split(" ");const b=["GL_OES_standard_derivatives","GL_EXT_frag_depth","GL_EXT_draw_buffers","GL_EXT_shader_texture_lod"];t.transpileShader=function(a,c){var g=z(),r=[];r=r.concat(g(a));a=r=r.concat(g(null));if("300 es"===x(a,"100","300 es"))throw Error("shader is already glsl 300 es");r=g=null;const u={},w={};for(let C=0;C<a.length;++C){const A=a[C];switch(A.type){case "keyword":"vertex"===
c&&"attribute"===A.data?A.data="in":"varying"===A.data&&(A.data="vertex"===c?"out":"in");break;case "builtin":/^texture(2D|Cube)(Proj)?(Lod|Grad)?(EXT)?$/.test(A.data.trim())&&(A.data=A.data.replace(/(2D|Cube|EXT)/g,""));"fragment"===c&&"gl_FragColor"===A.data&&(g||(g=f(a,u,"fragColor"),e(a,g,"vec4")),A.data=g);if("fragment"===c&&"gl_FragData"===A.data){{var v=void 0;let E=void 0;var D=a;var B=C+1;let G=-1;for(;B<D.length;B++){const H=D[B];if("operator"===H.type&&("["===H.data&&(E=B),"]"===H.data)){v=
B;break}"integer"===H.type&&(G=parseInt(H.data,10))}E&&v&&D.splice(E,v-E+1);D=G}v=f(a,u,"fragData");l(a,v,"vec4",D,"mediump");A.data=v}else"fragment"===c&&"gl_FragDepthEXT"===A.data&&(r||(r=f(a,u,"gl_FragDepth")),A.data=r);break;case "ident":if(0<=m.indexOf(A.data)){if(D="vertex"===c)a:{for(D=C-1;0<=D;D--)if(v=a[D],"whitespace"!==v.type&&"block-comment"!==v.type)if("keyword"===v.type){if("attribute"===v.data||"in"===v.data){D=!0;break a}}else break;D=!1}if(D)throw Error("attribute in vertex shader uses a name that is a reserved word in glsl 300 es");
A.data in w||(w[A.data]=f(a,u,A.data));A.data=w[A.data]}}}for(c=a.length-1;0<=c;--c)g=a[c],"preprocessor"===g.type&&((r=g.data.match(/#extension\s+(.*):/))&&r[1]&&0<=b.indexOf(r[1].trim())&&(r=a[c+1],a.splice(c,r&&"whitespace"===r.type?2:1)),(r=g.data.match(/#ifdef\s+(.*)/))&&r[1]&&0<=b.indexOf(r[1].trim())&&(g.data="#if 1"),(r=g.data.match(/#ifndef\s+(.*)/))&&r[1]&&0<=b.indexOf(r[1].trim())&&(g.data="#if 0"));return y(a)};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/views/webgl/reservedWordsGLSL3":function(){define(function(){return"layout centroid smooth case mat2x2 mat2x3 mat2x4 mat3x2 mat3x3 mat3x4 mat4x2 mat4x3 mat4x4 uint uvec2 uvec3 uvec4 samplerCubeShadow sampler2DArray sampler2DArrayShadow isampler2D isampler3D isamplerCube isampler2DArray usampler2D usampler3D usamplerCube usampler2DArray coherent restrict readonly writeonly resource atomic_uint noperspective patch sample subroutine common partition active filter image1D image2D image3D imageCube iimage1D iimage2D iimage3D iimageCube uimage1D uimage2D uimage3D uimageCube image1DArray image2DArray iimage1DArray iimage2DArray uimage1DArray uimage2DArray image1DShadow image2DShadow image1DArrayShadow image2DArrayShadow imageBuffer iimageBuffer uimageBuffer sampler1DArray sampler1DArrayShadow isampler1D isampler1DArray usampler1D usampler1DArray isampler2DRect usampler2DRect samplerBuffer isamplerBuffer usamplerBuffer sampler2DMS isampler2DMS usampler2DMS sampler2DMSArray isampler2DMSArray usampler2DMSArray trunc round roundEven isnan isinf floatBitsToInt floatBitsToUint intBitsToFloat uintBitsToFloat packSnorm2x16 unpackSnorm2x16 packUnorm2x16 unpackUnorm2x16 packHalf2x16 unpackHalf2x16 outerProduct transpose determinant inverse texture textureSize textureProj textureLod textureOffset texelFetch texelFetchOffset textureProjOffset textureLodOffset textureProjLod textureProjLodOffset textureGrad textureGradOffset textureProjGrad textureProjGradOffset".split(" ")})},
"esri/views/webgl/BufferObject":function(){define(["../../chunks/_rollupPluginBabelHelpers","../../core/typedArrayUtil","./checkWebGLError"],function(t,k,m){return function(){function z(x,f,h,e,l){this._context=x;this.bufferType=f;this.usage=h;this._glName=null;this._size=-1;this._indexType=void 0;x.instanceCounter.increment(1,this);this._glName=this._context.gl.createBuffer();m.checkWebGLError(this._context.gl);e&&this.setData(e,l)}z.createIndex=function(x,f,h,e){return new z(x,34963,f,h,e)};z.createVertex=
function(x,f,h){return new z(x,34962,f,h)};var y=z.prototype;y.dispose=function(){this._context&&(this._glName&&(this._context.gl.deleteBuffer(this._glName),this._glName=null),this._context.instanceCounter.decrement(1,this),this._context=null)};y.setData=function(x,f){if(x){if("number"===typeof x){if(0>x&&console.error("Buffer size cannot be negative!"),34963===this.bufferType&&f)switch(this._indexType=f,this._size=x,f){case 5123:x*=2;break;case 5125:x*=4}}else f=x.byteLength,k.isUint16Array(x)&&
(f/=2,this._indexType=5123),k.isUint32Array(x)&&(f/=4,this._indexType=5125),this._size=f;f=this._context.getBoundVAO();this._context.bindVAO(null);this._context.bindBuffer(this);this._context.gl.bufferData(this.bufferType,x,this.usage);this._context.bindVAO(f)}};y.setSubData=function(x,f=0,h=0,e=x.byteLength){if(x){(0>f||f>=this._size)&&console.error("offset is out of range!");var l=f,q=h,p=e,n=x.byteLength;k.isUint16Array(x)&&(n/=2,l*=2,q*=2,p*=2);k.isUint32Array(x)&&(n/=4,l*=4,q*=4,p*=4);void 0===
e&&(e=n-1);h>=e&&console.error("end must be bigger than start!");f+h-e>this._size&&console.error("An attempt to write beyond the end of the buffer!");f=this._context.getBoundVAO();this._context.bindVAO(null);this._context.bindBuffer(this);h=this._context.gl;e=ArrayBuffer.isView(x)?x.buffer:x;x=0===q&&p===x.byteLength?e:e.slice(q,p);h.bufferSubData(this.bufferType,l,x);this._context.bindVAO(f)}};t._createClass(z,[{key:"glName",get:function(){return this._glName}},{key:"size",get:function(){return this._size}},
{key:"indexType",get:function(){return this._indexType}},{key:"byteSize",get:function(){return 34962===this.bufferType?this._size:5125===this._indexType?4*this._size:2*this._size}}]);return z}()})},"esri/views/webgl/checkWebGLError":function(){define(["exports","../../core/has","../../core/Logger","../../core/Error"],function(t,k,m,z){m.getLogger("esri/views/webgl");t.checkWebGLError=function(y){};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/views/webgl/Texture":function(){define(["../../chunks/_rollupPluginBabelHelpers",
"../../core/maybe","../../core/mathUtils","./capabilities/isWebGL2Context"],function(t,k,m,z){return function(){function y(f,h,e=null){this._glName=this._context=null;this._descriptor=void 0;this._wrapModeDirty=this._samplingModeDirty=!1;f.instanceCounter.increment(0,this);this._context=f;this._descriptor={target:3553,samplingMode:9729,wrapMode:10497,flipped:!1,hasMipmap:!1,isOpaque:!1,unpackAlignment:4,preMultiplyAlpha:!1,...h};this.setData(e)}var x=y.prototype;x.dispose=function(){if(this._context&&
this._context.gl){if(this._glName){const f=this._context.gl;this._context.unbindTextureAllUnits(this);f.deleteTexture(this._glName);this._glName=null}this._context.instanceCounter.decrement(0,this);this._context=null}};x.release=function(){this.dispose()};x.resize=function(f,h){const e=this._descriptor;if(e.width!==f||e.height!==h)e.width=f,e.height=h,this.setData(null)};x.setData=function(f){if(this._context&&this._context.gl){var h=this._context.gl;this._glName||(this._glName=h.createTexture());
void 0===f&&(f=null);null===f&&(this._descriptor.width=this._descriptor.width||4,this._descriptor.height=this._descriptor.height||4);var e=this._context.getBoundTexture(0);this._context.bindTexture(this,0);var l=this._descriptor;y._validateTexture(this._context,l);h.pixelStorei(h.UNPACK_ALIGNMENT,l.unpackAlignment);h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,l.flipped?1:0);h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,l.preMultiplyAlpha?1:0);var q=l.pixelFormat,p=l.internalFormat?l.internalFormat:q;if(f instanceof
ImageData||f instanceof HTMLImageElement||f instanceof HTMLCanvasElement||f instanceof HTMLVideoElement){var n=f.width,d=f.height;f instanceof HTMLVideoElement&&(n=f.videoWidth,d=f.videoHeight);l.width&&l.height&&console.assert(n===l.width&&d===l.height);h.texImage2D(h.TEXTURE_2D,0,p,q,l.dataType,f);l.hasMipmap&&this.generateMipmap();void 0===l.width&&(l.width=n);void 0===l.height&&(l.height=d)}else{null!=l.width&&null!=l.height||console.error("Width and height must be specified!");h.DEPTH24_STENCIL8&&
p===h.DEPTH_STENCIL&&(p=h.DEPTH24_STENCIL8);n=l.width;d=l.height;var b=f;if(k.isSome(b)&&"type"in b&&"compressed"===b.type)for(q=Math.round(Math.log(Math.max(n,d))/Math.LN2)+1,l.hasMipmap=l.hasMipmap&&q===f.levels.length,q=0;;++q){h.compressedTexImage2D(h.TEXTURE_2D,q,p,n,d,0,f.levels[Math.min(q,f.levels.length-1)]);if(1===n&&1===d||!l.hasMipmap)break;n=Math.max(1,n>>1);d=Math.max(1,d>>1)}else if(k.isSome(f))h.texImage2D(h.TEXTURE_2D,0,p,n,d,0,q,l.dataType,f),l.hasMipmap&&this.generateMipmap();else for(f=
0;;++f){h.texImage2D(h.TEXTURE_2D,f,p,n,d,0,q,l.dataType,null);if(1===n&&1===d||!l.hasMipmap)break;n=Math.max(1,n>>1);d=Math.max(1,d>>1)}}y._applySamplingMode(h,this._descriptor);y._applyWrapMode(h,this._descriptor);y._applyAnisotropicFilteringParameters(this._context,this._descriptor);e&&this._context.bindTexture(e,0)}};x.updateData=function(f,h,e,l,q,p){p||console.error("An attempt to use uninitialized data!");this._glName||console.error("An attempt to update uninitialized texture!");const n=this._context.gl,
d=this._descriptor,b=this._context.getBoundTexture(0);this._context.bindTexture(this,0);(0>h||0>e||l>d.width||q>d.height||h+l>d.width||e+q>d.height)&&console.error("An attempt to update out of bounds of the texture!");n.pixelStorei(n.UNPACK_ALIGNMENT,d.unpackAlignment);n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,d.flipped?1:0);n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,d.preMultiplyAlpha?1:0);p instanceof ImageData||p instanceof HTMLImageElement||p instanceof HTMLCanvasElement||p instanceof HTMLVideoElement?
n.texSubImage2D(n.TEXTURE_2D,f,h,e,d.pixelFormat,d.dataType,p):n.texSubImage2D(n.TEXTURE_2D,f,h,e,l,q,d.pixelFormat,d.dataType,p);this._context.bindTexture(b,0)};x.generateMipmap=function(){var f=this._descriptor;f.hasMipmap||(this._samplingModeDirty=f.hasMipmap=!0,y._validateTexture(this._context,f));9729===f.samplingMode?(this._samplingModeDirty=!0,f.samplingMode=9985):9728===f.samplingMode&&(this._samplingModeDirty=!0,f.samplingMode=9984);f=this._context.getBoundTexture(0);this._context.bindTexture(this,
0);const h=this._context.gl;h.generateMipmap(h.TEXTURE_2D);this._context.bindTexture(f,0)};x.setSamplingMode=function(f){f!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=f,y._validateTexture(this._context,this._descriptor),this._samplingModeDirty=!0)};x.setWrapMode=function(f){f!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=f,y._validateTexture(this._context,this._descriptor),this._wrapModeDirty=!0)};x.applyChanges=function(){const f=this._context.gl,h=this._descriptor;
this._samplingModeDirty&&(y._applySamplingMode(f,h),this._samplingModeDirty=!1);this._wrapModeDirty&&(y._applyWrapMode(f,h),this._wrapModeDirty=!1)};y._validateTexture=function(f,h){(0>h.width||0>h.height)&&console.error("Negative dimension parameters are not allowed!");const e=m.isPowerOfTwo(h.width)&&m.isPowerOfTwo(h.height);z(f.gl)||e||("number"===typeof h.wrapMode?33071!==h.wrapMode&&console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"):(33071!==h.wrapMode.s||33071!==
h.wrapMode.t)&&console.error("Non-power-of-two textures must have a wrap mode of CLAMP_TO_EDGE!"),h.hasMipmap&&console.error("Mipmapping requires power-of-two textures!"))};y._applySamplingMode=function(f,h){let e=h.samplingMode,l=h.samplingMode;if(9985===e||9987===e)e=9729,h.hasMipmap||(l=9729);else if(9984===e||9986===e)e=9728,h.hasMipmap||(l=9728);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,e);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,l)};y._applyWrapMode=function(f,h){"number"===
typeof h.wrapMode?(f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,h.wrapMode),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,h.wrapMode)):(f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,h.wrapMode.s),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,h.wrapMode.t))};y._applyAnisotropicFilteringParameters=function(f,h){if(null!=h.maxAnisotropy){var e=f.capabilities.textureFilterAnisotropic;e&&(f=f.gl,f.texParameterf(f.TEXTURE_2D,e.TEXTURE_MAX_ANISOTROPY,h.maxAnisotropy))}};t._createClass(y,[{key:"glName",
get:function(){return this._glName}},{key:"descriptor",get:function(){return this._descriptor}}]);return y}()})},"esri/views/webgl/capabilities/isWebGL2Context":function(){define(function(){return function(t){return window.WebGL2RenderingContext&&t instanceof window.WebGL2RenderingContext}})},"esri/views/webgl/VertexArrayObject":function(){define(["../../chunks/_rollupPluginBabelHelpers","../../core/maybe","./Util"],function(t,k,m){return function(){function z(x,f,h,e,l){this._context=x;this._locations=
f;this._layout=h;this._buffers=e;this._indexBuffer=l;this._glName=null;this._initialized=!1;x.instanceCounter.increment(2,this)}var y=z.prototype;y.dispose=function(x=!0){if(this._context){var f=this._context.capabilities.vao;f&&this._glName&&(f.deleteVertexArray(this._glName),this._glName=null);this._context.getBoundVAO()===this&&this._context.bindVAO(null);if(x){for(const h in this._buffers)this._buffers[h].dispose(),delete this._buffers[h];this._indexBuffer=k.disposeMaybe(this._indexBuffer)}this._context.instanceCounter.decrement(2,
this);this._context=null}};y.initialize=function(){if(!this._initialized){var x=this._context.capabilities.vao;if(x){const f=x.createVertexArray();x.bindVertexArray(f);this._bindLayout();x.bindVertexArray(null);this._glName=f}this._initialized=!0}};y.bind=function(){this.initialize();const x=this._context.capabilities.vao;x?x.bindVertexArray(this.glName):(this._context.bindVAO(null),this._bindLayout())};y._bindLayout=function(){const x=this._buffers,f=!!this._context.capabilities.vao,h=this._layout,
e=this._indexBuffer;x||console.error("Vertex buffer dictionary is empty!");const l=this._context.gl;for(const q in x){const p=x[q];p||console.error("Vertex buffer is uninitialized!");const n=h[q];n||console.error("Vertex element descriptor is empty!");m.bindVertexBufferLayout(this._context,this._locations,p,n)}e&&(f?l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,e.glName):this._context.bindBuffer(e))};y.unbind=function(){this.initialize();const x=this._context.capabilities.vao;x?x.bindVertexArray(null):this._unbindLayout()};
y._unbindLayout=function(){const x=this._buffers,f=this._layout;x||console.error("Vertex buffer dictionary is empty!");for(const h in x){const e=x[h];e||console.error("Vertex buffer is uninitialized!");m.unbindVertexBufferLayout(this._context,this._locations,e,f[h])}this._indexBuffer&&this._context.unbindBuffer(this._indexBuffer.bufferType)};t._createClass(z,[{key:"glName",get:function(){return this._glName}},{key:"vertexBuffers",get:function(){return this._buffers}},{key:"indexBuffer",get:function(){return this._indexBuffer}},
{key:"size",get:function(){return Object.keys(this._buffers).reduce((x,f)=>x+this._buffers[f].size,this._indexBuffer?this._indexBuffer.size:0)}},{key:"layout",get:function(){return this._layout}},{key:"locations",get:function(){return this._locations}}]);return z}()})},"esri/views/webgl/Util":function(){define(["exports","../../core/has","../../core/maybe"],function(t,k,m){function z(h){return h[0].stride}function y(h){switch(h){case 5126:return 4;case 5124:return 4;case 5125:return 4;case 5122:return 2;
case 5123:return 2;case 5120:return 1;case 5121:return 1;default:throw Error("Unknown data type");}}function x(h){switch(h){case 6406:case 6409:case 36168:return 1;case 6410:case 32854:case 33325:case 32854:case 33189:return 2;case 6407:case 6402:return 3;case 6408:case 34041:case 33326:case 35898:case 33327:case 34041:return 4;case 33328:case 34842:return 8;case 34836:return 16;case 33776:case 33777:return.5;case 33778:case 33779:return 1;case 37488:case 37489:case 37492:case 37493:case 37494:case 37495:return.5;
case 37490:case 37491:case 37496:case 37497:return 1}return 0}function f(h){if(m.isNone(h))return 0;if("colorAttachment"in h)return h.glName?f(h.colorAttachment)+f(h.depthStencilAttachment):0;if("descriptor"in h)return h.glName?f(h.descriptor):0;const e=h.internalFormat||"pixelFormat"in h&&h.pixelFormat;if(!e)return 0;const l="hasMipmap"in h&&h.hasMipmap?1.3:1;h=h.width*h.height;return x(e)*h*l}t.addDescriptor=function(h,e,l,q,p,n){const d=y(q);if(0<h.length){const b=h[0].stride,a=b+d*l;h.forEach(c=>
c.stride=a);h.push({name:e,count:l,type:q,offset:b,stride:a,normalized:p,divisor:n})}else h.push({name:e,count:l,type:q,offset:0,stride:d*l,normalized:p,divisor:n})};t.bindVertexBufferLayout=function(h,e,l,q,p){const n=h.gl,d=h.capabilities.instancing;h.bindBuffer(l);for(const b of q)if(h=e[b.name],l=(p?p:0+b.baseInstance?b.baseInstance:0)*b.stride,void 0===h&&console.error(`There is no location for vertex attribute '${b.name}' defined.`),b.baseInstance&&!b.divisor&&console.error(`Vertex attribute '${b.name}' uses baseInstanceOffset without divisor.`),
4>=b.count)n.vertexAttribPointer(h,b.count,b.type,b.normalized,b.stride,b.offset+l),n.enableVertexAttribArray(h),b.divisor&&0<b.divisor&&d&&d.vertexAttribDivisor(h,b.divisor);else if(9===b.count)for(q=0;3>q;q++)n.vertexAttribPointer(h+q,3,b.type,b.normalized,b.stride,b.offset+12*q+l),n.enableVertexAttribArray(h+q),b.divisor&&0<b.divisor&&d&&d.vertexAttribDivisor(h+q,b.divisor);else if(16===b.count)for(q=0;4>q;q++)n.vertexAttribPointer(h+q,4,b.type,b.normalized,b.stride,b.offset+16*q+l),n.enableVertexAttribArray(h+
q),b.divisor&&0<b.divisor&&d&&d.vertexAttribDivisor(h+q,b.divisor);else console.error("Unsupported vertex attribute element count: "+b.count)};t.copyFramebufferToTexture=function(h,e,l,q,p=0){const n=h.getBoundFramebufferObject(),d=h.getBoundTexture(0);h.bindFramebuffer(e);h.bindTexture(l,0);h.gl.copyTexImage2D(h.gl.TEXTURE_2D,p,l.descriptor.pixelFormat,q[0],q[1],q[2],q[3],0);h.gl.flush();h.bindFramebuffer(n);h.bindTexture(d,0)};t.findAttribute=function(h,e){for(let l=0;l<h.length;l++)if(h[l].name===
e)return h[l];return null};t.getBytesPerElement=y;t.getBytesPerElementFormat=x;t.getGpuMemoryUsage=f;t.getStride=z;t.getTypedArrayConstructor=function(h){switch(h){case 5120:return Int8Array;case 5126:return Float32Array;case 5124:return Int32Array;case 5122:return Int16Array;case 5121:return Uint8Array;case 5125:return Uint32Array;case 5123:return Uint16Array;default:throw Error("Unknown data type");}};t.hasAttribute=function(h,e){for(let l=0;l<h.length;l++)if(h[l].name===e)return!0;return!1};t.setBaseInstanceOffset=
function(h,e){const l={};for(const q in h)l[q]=h[q].map(p=>p.divisor?{...p,baseInstance:e}:p);return l};t.unbindVertexBufferLayout=function(h,e,l,q){const p=h.gl,n=h.capabilities.instancing;h.bindBuffer(l);for(const d of q)if(l=e[d.name],4>=d.count)p.disableVertexAttribArray(l),d.divisor&&0<d.divisor&&n&&n.vertexAttribDivisor(l,0);else if(9===d.count)for(q=0;3>q;q++)p.disableVertexAttribArray(l+q),d.divisor&&0<d.divisor&&n&&n.vertexAttribDivisor(l+q,0);else if(16===d.count)for(q=0;4>q;q++)p.disableVertexAttribArray(l+
q),d.divisor&&0<d.divisor&&n&&n.vertexAttribDivisor(l+q,0);else console.error("Unsupported vertex attribute element count: "+d.count);h.unbindBuffer(34962)};t.vertexCount=function(h,e){return h.vertexBuffers[e].size/z(h.layout[e])};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/views/webgl/Renderbuffer":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(t){return function(){function k(z,y){this._context=z;this._desc=y;this._context.instanceCounter.increment(5,this);z=
this._context.gl;this.glName=z.createRenderbuffer();this._context.bindRenderbuffer(this);z.renderbufferStorage(z.RENDERBUFFER,y.internalFormat,y.width,y.height)}var m=k.prototype;m.resize=function(z,y){const x=this._desc;if(x.width!==z||x.height!==y)x.width=z,x.height=y,z=this._context.gl,this._context.bindRenderbuffer(this),z.renderbufferStorage(z.RENDERBUFFER,x.internalFormat,x.width,x.height)};m.dispose=function(){this._context&&(this._context.gl.deleteRenderbuffer(this.glName),this._context.instanceCounter.decrement(5,
this),this._context=null)};t._createClass(k,[{key:"descriptor",get:function(){return this._desc}}]);return k}()})},"esri/views/webgl/FramebufferObject":function(){define(["../../chunks/_rollupPluginBabelHelpers","../../core/has","../../core/Logger","./Texture","./Renderbuffer"],function(t,k,m,z,y){const x=m.getLogger("esri.views.webgl.FrameBufferObject");k=function(){function f(e,l,q,p){this._context=e;this._stencilAttachment=this._depthAttachment=this._glName=null;this._colorAttachments=new Map;
this._initialized=!1;this._desc={...l};e.instanceCounter.increment(4,this);if(q)if(Array.isArray(q))for(const b of q){const {attachmentPoint:a,texture:c}=b;q=c instanceof z?c:new z(e,c);l=q.descriptor;this._colorAttachments.set(a,q);this._validateColorAttachmentPoint(a);this._validateTextureDimensions(l,this._desc)}else{var n;q instanceof z?(l=q.descriptor,this._colorAttachments.set(36064,q)):(l=q,this._colorAttachments.set(36064,new z(e,q)));0!==(null==(n=this._desc)?void 0:n.colorTarget)&&console.error("Framebuffer is initialized with a texture however the descriptor indicates using a renderbuffer color attachment!");
this._validateTextureDimensions(l,this._desc)}if(p instanceof y){var d;e=null!=(d=this._desc.depthStencilTarget)?d:3;2===e?this._stencilAttachment=p:1===e||3===e?this._depthAttachment=p:console.error('If a Renderbuffer is provided, "depthStencilTarget" must be one of STENCIL_RENDER_BUFFER, DEPTH_RENDER_BUFFER or DEPTH_STENCIL_RENDER_BUFFER');f._validateBufferDimensions(p.descriptor,this._desc)}else p&&(this._context.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture as an attachment!"),
p instanceof z?(this._depthStencilTexture=p,p=this._depthStencilTexture.descriptor):this._depthStencilTexture=new z(this._context,p),this._validateTextureDimensions(p,this._desc))}var h=f.prototype;h.dispose=function(){if(this._desc){var e=this._context.getBoundFramebufferObject();this._disposeColorAttachments();this._disposeDepthStencilAttachments();this._glName&&(this._context.gl.deleteFramebuffer(this._glName),this._glName=null);this._context.bindFramebuffer(e);this._context.instanceCounter.decrement(4,
this);this._desc=null}};h.getColorTexture=function(e){return(e=this._colorAttachments.get(e))&&e instanceof z?e:null};h.attachColorTexture=function(e,l=36064){if(e){this._validateColorAttachmentPoint(l);this._validateTextureDimensions(e.descriptor,this._desc);this._disposeColorAttachments();if(this._initialized){this._context.bindFramebuffer(this);const q=this._context.gl;q.framebufferTexture2D(q.FRAMEBUFFER,l,q.TEXTURE_2D,e.glName,0)}this._colorAttachments.set(l,e)}};h.detachColorTexture=function(e=
36064){const l=this._colorAttachments.get(e);if(l instanceof z){if(this._initialized){this._context.bindFramebuffer(this);const q=this._context.gl;q.framebufferTexture2D(q.FRAMEBUFFER,e,q.TEXTURE_2D,null,0)}this._colorAttachments.delete(e);return l}};h.attachDepthStencilTexture=function(e){if(e){var l=e.descriptor;34041!==l.pixelFormat&&console.error("Depth/Stencil texture must have a pixel type of DEPTH_STENCIL!");34042!==l.dataType&&console.error("Depth/Stencil texture must have data type of UNSIGNED_INT_24_8!");
this._context.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture!");this._validateTextureDimensions(l,this._desc);this._desc.depthStencilTarget&&4!==this._desc.depthStencilTarget&&(this._desc.depthStencilTarget=4);this._disposeDepthStencilAttachments();this._initialized&&(this._context.bindFramebuffer(this),l=this._context.gl,l.framebufferTexture2D(l.FRAMEBUFFER,l.DEPTH_STENCIL_ATTACHMENT,l.TEXTURE_2D,
e.glName,0));this._depthStencilTexture=e}};h.detachDepthStencilTexture=function(){const e=this._depthStencilTexture;if(e&&this._initialized){this._context.bindFramebuffer(this);const l=this._context.gl;this._context.gl.framebufferTexture2D(l.FRAMEBUFFER,l.DEPTH_STENCIL_ATTACHMENT,l.TEXTURE_2D,null,0)}this._depthStencilTexture=null;return e};h.attachDepthStencilBuffer=function(e){if(e){var l=e.descriptor;34041!==l.internalFormat&&33189!==l.internalFormat&&console.error("Depth/Stencil buffer must have correct internalFormat");
f._validateBufferDimensions(l,this._desc);this._disposeDepthStencilAttachments();this._desc.depthStencilTarget=34041===l.internalFormat?3:1;this._initialized&&(this._context.bindFramebuffer(this),l=this._context.gl,l.framebufferRenderbuffer(l.FRAMEBUFFER,1===this._desc.depthStencilTarget?l.DEPTH_ATTACHMENT:l.DEPTH_STENCIL_ATTACHMENT,l.RENDERBUFFER,e.glName));this._depthAttachment=e}};h.detachDepthStencilBuffer=function(){const e=this._context.gl,l=this._depthAttachment;l&&this._initialized&&(this._context.bindFramebuffer(this),
e.framebufferRenderbuffer(e.FRAMEBUFFER,1===this._desc.depthStencilTarget?e.DEPTH_ATTACHMENT:e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,null));this._depthAttachment=null;return l};h.copyToTexture=function(e,l,q,p,n,d,b){(0>e||0>l||0>n||0>d)&&console.error("Offsets cannot be negative!");(0>=q||0>=p)&&console.error("Copy width and height must be greater than zero!");var a=this._desc;const c=b.descriptor;3553!==b.descriptor.target&&console.error("Texture target must be TEXTURE_2D!");(e+q>a.width||l+p>
a.height||n+q>c.width||d+p>c.height)&&console.error("Bad dimensions, the current input values will attempt to read or copy out of bounds!");a=this._context;a.bindTexture(b,0);a.bindFramebuffer(this);a.gl.copyTexSubImage2D(3553,0,n,d,e,l,q,p)};h.readPixels=function(e,l,q,p,n,d,b){(0>=q||0>=p)&&console.error("Copy width and height must be greater than zero!");b||console.error("Target memory is not initialized!");this._context.bindFramebuffer(this);this._context.gl.readPixels(e,l,q,p,n,d,b)};h.resize=
function(e,l){const q=this._desc;if(q.width!==e||q.height!==l)if(this._initialized){q.width=e;q.height=l;this._colorAttachments.forEach(p=>{p&&p.resize(e,l)});if(null!=this._depthStencilTexture)this._depthStencilTexture.resize(e,l);else if(this._depthAttachment||this._stencilAttachment)this._depthAttachment&&this._depthAttachment.resize(e,l),this._stencilAttachment&&this._stencilAttachment.resize(e,l);this._context.getBoundFramebufferObject()===this&&this._context.bindFramebuffer(null);this._initialized=
!1}else q.width=e,q.height=l,this._colorAttachments.forEach(p=>{p&&p.resize(e,l)}),this._depthStencilTexture&&this._depthStencilTexture.resize(e,l)};h.initializeAndBind=function(){var e,l,q,p;const n=this._context.gl;if(this._initialized)n.bindFramebuffer(n.FRAMEBUFFER,this.glName);else{this._glName&&n.deleteFramebuffer(this._glName);var d=this._context,b=n.createFramebuffer(),a=this._desc,c=null!=(e=a.colorTarget)?e:1;e=null!=(l=a.width)?l:1;l=null!=(q=a.height)?q:1;n.bindFramebuffer(n.FRAMEBUFFER,
b);0===this._colorAttachments.size&&(0===c?this._colorAttachments.set(36064,new z(d,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,wrapMode:33071,width:a.width,height:a.height})):(q=new y(d,{internalFormat:32854,width:e,height:l}),this._colorAttachments.set(36064,q)));this._colorAttachments.forEach((g,r)=>{g&&(g instanceof z?n.framebufferTexture2D(n.FRAMEBUFFER,r,n.TEXTURE_2D,g.glName,0):n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,g.glName))});q=null!=
(p=a.depthStencilTarget)?p:0;switch(q){case 1:case 3:this._depthAttachment||(this._depthAttachment=new y(d,{internalFormat:1===a.depthStencilTarget?33189:34041,width:e,height:l}));n.framebufferRenderbuffer(n.FRAMEBUFFER,1===q?n.DEPTH_ATTACHMENT:n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,this._depthAttachment.glName);break;case 2:this._stencilAttachment||(this._stencilAttachment=new y(d,{internalFormat:36168,width:e,height:l}));n.framebufferRenderbuffer(n.FRAMEBUFFER,n.STENCIL_ATTACHMENT,n.RENDERBUFFER,
this._stencilAttachment.glName);break;case 4:this._depthStencilTexture||(d.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture as an attachment!"),this._depthStencilTexture=new z(d,{target:3553,pixelFormat:34041,dataType:34042,samplingMode:9728,wrapMode:33071,width:e,height:l})),n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,this._depthStencilTexture.glName,0)}this._glName=
b;this._initialized=!0}};h._disposeColorAttachments=function(){this._colorAttachments.forEach((e,l)=>{if(e instanceof z){if(this._initialized){this._context.bindFramebuffer(this);var q=this._context.gl;q.framebufferTexture2D(q.FRAMEBUFFER,l,q.TEXTURE_2D,null,0)}e.dispose()}else e instanceof WebGLRenderbuffer&&(q=this._context.gl,this._initialized&&(this._context.bindFramebuffer(this),q.framebufferRenderbuffer(q.FRAMEBUFFER,l,q.RENDERBUFFER,null)),this._context.gl.deleteRenderbuffer(e))});this._colorAttachments.clear()};
h._disposeDepthStencilAttachments=function(){const e=this._context.gl;this._depthAttachment&&(this._initialized&&(this._context.bindFramebuffer(this),e.framebufferRenderbuffer(e.FRAMEBUFFER,1===this._desc.depthStencilTarget?e.DEPTH_ATTACHMENT:e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,null)),this._depthAttachment.dispose(),this._depthAttachment=null);this._stencilAttachment&&(this._initialized&&(this._context.bindFramebuffer(this),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.STENCIL_ATTACHMENT,e.RENDERBUFFER,
null)),this._stencilAttachment.dispose(),this._stencilAttachment=null);this._depthStencilTexture&&(this._initialized&&(this._context.bindFramebuffer(this),e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,null,0)),this._depthStencilTexture.dispose(),this._depthStencilTexture=null)};f._validateBufferDimensions=function(e,l){console.assert(0<=e.width&&0<=e.height);void 0!==l.width&&0<=l.width&&void 0!==l.height&&0<=l.height?l.width===e.width&&l.height===e.height||console.error("Renderbuffer dimensions must match the framebuffer's!"):
(l.width=e.width,l.height=e.height)};h._validateTextureDimensions=function(e,l){console.assert(0<=e.width&&0<=e.height);3553!==e.target&&console.error("Texture type must be TEXTURE_2D!");void 0!==l.width&&0<=l.width&&void 0!==l.height&&0<=l.height?l.width===e.width&&l.height===e.height||console.error("Color attachment texture must match the framebuffer's!"):(l.width=e.width,l.height=e.height)};h._validateColorAttachmentPoint=function(e){if(-1===f._MAX_COLOR_ATTACHMENTS){const l=this._context.capabilities.drawBuffers;
f._MAX_COLOR_ATTACHMENTS=l?this._context.gl.getParameter(l.MAX_COLOR_ATTACHMENTS):1}e-=36064;e+1>f._MAX_COLOR_ATTACHMENTS&&x.error("esri.FrameBufferObject",`illegal attachment point for color attachment: ${e+1}. Implementation supports up to ${f._MAX_COLOR_ATTACHMENTS} color attachments`)};t._createClass(f,[{key:"glName",get:function(){return this._glName}},{key:"descriptor",get:function(){return this._desc}},{key:"colorTexture",get:function(){const e=this._colorAttachments.get(36064);return e&&e instanceof
z?e:null}},{key:"colorAttachment",get:function(){return this._colorAttachments.get(36064)}},{key:"depthStencilAttachment",get:function(){return this._depthStencilTexture||this._depthAttachment||this._stencilAttachment}},{key:"depthStencilTexture",get:function(){return this._depthStencilTexture}},{key:"width",get:function(){return this._desc.width}},{key:"height",get:function(){return this._desc.height}}]);return f}();k._MAX_COLOR_ATTACHMENTS=-1;return k})},"esri/views/webgl/ProgramCache":function(){define(["./programUtils"],
function(t){return function(){function k(z){this._programCacheByTemplate=new Map;this._rctx=z}var m=k.prototype;m.dispose=function(){this._programCacheByTemplate.forEach(z=>{z.programs.forEach(y=>{y.dispose()})});this._programCacheByTemplate=null};m.getProgram=function(z,y){this._programCacheByTemplate.has(z)||this.addProgramTemplate(z,x=>t.createProgram(this._rctx,z,x));return this.getProgramTemplateInstance(z,y)};m.addProgramTemplate=function(z,y){this._programCacheByTemplate.set(z,{constructor:y,
programs:new Map})};m.getProgramTemplateInstance=function(z,y){if(z=this._programCacheByTemplate.get(z)){const x=y?JSON.stringify(y):"default";z.programs.has(x)||(y=z.constructor(y),z.programs.set(x,y));return z.programs.get(x)}return null};return k}()})},"esri/views/webgl/programUtils":function(){define(["exports","./Program"],function(t,k){t.createProgram=function(m,z,y,x){y=y||{};x=x||"";y="function"===typeof z.shaders?z.shaders(y):z.shaders;return new k(m,x+y.vertexShader,x+y.fragmentShader,z.attributes)};
t.glslifyDefineMap=function(m){let z="";for(const y in m){const x=m[y];if("boolean"===typeof x)x&&(z+=`#define ${y}\n`);else if("number"===typeof x)z+=`#define ${y} ${x.toFixed()}\n`;else if("object"===typeof x){const f=x.options;let h=0;for(const e in f)z+=`#define ${f[e]} ${(h++).toFixed()}\n`;z+=`#define ${y} ${f[x.value]}\n`}}return z};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/views/webgl/RenderingContext":function(){define("../../chunks/_rollupPluginBabelHelpers ../../core/has ../../core/maybe ./renderState ./capabilities/isWebGL2Context ./enums ./InstanceCounter ./capabilities/load".split(" "),
function(t,k,m,z,y,x,f,h){function e(l,q,p,n){q?n!==q&&l.bindBuffer(p,q.glName):l.bindBuffer(p,null);return q}return function(){function l(p,n){this.gl=null;this.instanceCounter=new f.InstanceCounter;this._blendEnabled=!1;this._blendColorState={r:0,g:0,b:0,a:0};this._blendFunctionState={srcRGB:1,dstRGB:0,srcAlpha:1,dstAlpha:0};this._blendEquationState={mode:32774,modeAlpha:32774};this._colorMaskState={r:!0,g:!0,b:!0,a:!0};this._polygonCullingEnabled=!1;this._cullFace=1029;this._frontFace=2305;this._scissorTestEnabled=
!1;this._scissorRect={x:0,y:0,width:0,height:0};this._depthTestEnabled=!1;this._depthFunction=513;this._clearDepth=1;this._depthWriteEnabled=!0;this._depthRange={zNear:0,zFar:1};this._viewport=null;this._polygonOffsetFillEnabled=this._stencilTestEnabled=!1;this._polygonOffset=[0,0];this._stencilFunction={face:1032,func:519,ref:0,mask:1};this._clearStencil=0;this._stencilWriteMask=1;this._stencilOperation={face:1032,fail:7680,zFail:7680,zPass:7680};this._clearColor={r:0,g:0,b:0,a:0};this._activeRenderbuffer=
this._activeFramebuffer=this._activeIndexBuffer=this._activeVertexBuffer=this._activeShaderProgram=null;this._activeTextureUnit=0;this._textureUnitMap=[];this._numOfTriangles=this._numOfDrawCalls=0;this.contextVersion=y(p)?"webgl2":"webgl";this.gl=p;p instanceof WebGLRenderingContext&&this.gl.getExtension("OES_element_index_uint");this._capabilities=h.loadCapabilities(p,n);p=this.gl.getParameter(this.gl.VIEWPORT);this._viewport={x:p[0],y:p[1],width:p[2],height:p[3]};this._stateTracker=new z.StateTracker({setBlending:d=>
{d?(this.setBlendingEnabled(!0),this.setBlendEquationSeparate(d.opRgb,d.opAlpha),this.setBlendFunctionSeparate(d.srcRgb,d.dstRgb,d.srcAlpha,d.dstAlpha),d=d.color,this.setBlendColor(d.r,d.g,d.b,d.a)):this.setBlendingEnabled(!1)},setCulling:d=>{d?(this.setFaceCullingEnabled(!0),this.setCullFace(d.face),this.setFrontFace(d.mode)):this.setFaceCullingEnabled(!1)},setPolygonOffset:d=>{d?(this.setPolygonOffsetFillEnabled(!0),this.setPolygonOffset(d.factor,d.units)):this.setPolygonOffsetFillEnabled(!1)},
setDepthTest:d=>{d?(this.setDepthTestEnabled(!0),this.setDepthFunction(d.func)):this.setDepthTestEnabled(!1)},setStencilTest:d=>{if(d){this.setStencilTestEnabled(!0);const b=d.function;this.setStencilFunction(b.func,b.ref,b.mask);d=d.operation;this.setStencilOp(d.fail,d.zFail,d.zPass)}else this.setStencilTestEnabled(!1)},setDepthWrite:d=>{d?(this.setDepthWriteEnabled(!0),this.setDepthRange(d.zNear,d.zFar)):this.setDepthWriteEnabled(!1)},setColorWrite:d=>{d?this.setColorMask(d.r,d.g,d.b,d.a):this.setColorMask(!1,
!1,!1,!1)},setStencilWrite:d=>{d?this.setStencilWriteMask(d.mask):this.setStencilWriteMask(0)}});this.enforceState()}var q=l.prototype;q.isWebGL2Context=function(){return"webgl2"===this.contextVersion};q.dispose=function(){this.bindVAO(null);this.unbindBuffer(34962);this.unbindBuffer(34963);this._textureUnitMap=[];this._capabilities=this.gl=null};q.setPipelineState=function(p){this._stateTracker.setPipeline(p)};q.setBlendingEnabled=function(p){this._blendEnabled!==p&&(!0===p?this.gl.enable(this.gl.BLEND):
this.gl.disable(this.gl.BLEND),this._blendEnabled=p,this._stateTracker.invalidateBlending())};q.setBlendColor=function(p,n,d,b){if(p!==this._blendColorState.r||n!==this._blendColorState.g||d!==this._blendColorState.b||b!==this._blendColorState.a)this.gl.blendColor(p,n,d,b),this._blendColorState.r=p,this._blendColorState.g=n,this._blendColorState.b=d,this._blendColorState.a=b,this._stateTracker.invalidateBlending()};q.setBlendFunction=function(p,n){if(p!==this._blendFunctionState.srcRGB||n!==this._blendFunctionState.dstRGB)this.gl.blendFunc(p,
n),this._blendFunctionState.srcRGB=p,this._blendFunctionState.srcAlpha=p,this._blendFunctionState.dstRGB=n,this._blendFunctionState.dstAlpha=n,this._stateTracker.invalidateBlending()};q.setBlendFunctionSeparate=function(p,n,d,b){if(this._blendFunctionState.srcRGB!==p||this._blendFunctionState.srcAlpha!==d||this._blendFunctionState.dstRGB!==n||this._blendFunctionState.dstAlpha!==b)this.gl.blendFuncSeparate(p,n,d,b),this._blendFunctionState.srcRGB=p,this._blendFunctionState.srcAlpha=d,this._blendFunctionState.dstRGB=
n,this._blendFunctionState.dstAlpha=b,this._stateTracker.invalidateBlending()};q.setBlendEquation=function(p){this._blendEquationState.mode!==p&&(this.gl.blendEquation(p),this._blendEquationState.mode=p,this._blendEquationState.modeAlpha=p,this._stateTracker.invalidateBlending())};q.setBlendEquationSeparate=function(p,n){if(this._blendEquationState.mode!==p||this._blendEquationState.modeAlpha!==n)this.gl.blendEquationSeparate(p,n),this._blendEquationState.mode=p,this._blendEquationState.modeAlpha=
n,this._stateTracker.invalidateBlending()};q.setColorMask=function(p,n,d,b){if(this._colorMaskState.r!==p||this._colorMaskState.g!==n||this._colorMaskState.b!==d||this._colorMaskState.a!==b)this.gl.colorMask(p,n,d,b),this._colorMaskState.r=p,this._colorMaskState.g=n,this._colorMaskState.b=d,this._colorMaskState.a=b,this._stateTracker.invalidateColorWrite()};q.setClearColor=function(p,n,d,b){if(this._clearColor.r!==p||this._clearColor.g!==n||this._clearColor.b!==d||this._clearColor.a!==b)this.gl.clearColor(p,
n,d,b),this._clearColor.r=p,this._clearColor.g=n,this._clearColor.b=d,this._clearColor.a=b};q.setFaceCullingEnabled=function(p){this._polygonCullingEnabled!==p&&(!0===p?this.gl.enable(this.gl.CULL_FACE):this.gl.disable(this.gl.CULL_FACE),this._polygonCullingEnabled=p,this._stateTracker.invalidateCulling())};q.setPolygonOffsetFillEnabled=function(p){this._polygonOffsetFillEnabled!==p&&(!0===p?this.gl.enable(this.gl.POLYGON_OFFSET_FILL):this.gl.disable(this.gl.POLYGON_OFFSET_FILL),this._polygonOffsetFillEnabled=
p,this._stateTracker.invalidatePolygonOffset())};q.setPolygonOffset=function(p,n){if(this._polygonOffset[0]!==p||this._polygonOffset[1]!==n)this._polygonOffset[0]=p,this._polygonOffset[1]=n,this.gl.polygonOffset(p,n),this._stateTracker.invalidatePolygonOffset()};q.setCullFace=function(p){this._cullFace!==p&&(this.gl.cullFace(p),this._cullFace=p,this._stateTracker.invalidateCulling())};q.setFrontFace=function(p){this._frontFace!==p&&(this.gl.frontFace(p),this._frontFace=p,this._stateTracker.invalidateCulling())};
q.setScissorTestEnabled=function(p){this._scissorTestEnabled!==p&&(!0===p?this.gl.enable(this.gl.SCISSOR_TEST):this.gl.disable(this.gl.SCISSOR_TEST),this._scissorTestEnabled=p)};q.setScissorRect=function(p,n,d,b){if(this._scissorRect.x!==p||this._scissorRect.y!==n||this._scissorRect.width!==d||this._scissorRect.height!==b)this.gl.scissor(p,n,d,b),this._scissorRect.x=p,this._scissorRect.y=n,this._scissorRect.width=d,this._scissorRect.height=b};q.setDepthTestEnabled=function(p){this._depthTestEnabled!==
p&&(!0===p?this.gl.enable(this.gl.DEPTH_TEST):this.gl.disable(this.gl.DEPTH_TEST),this._depthTestEnabled=p,this._stateTracker.invalidateDepthTest())};q.setClearDepth=function(p){this._clearDepth!==p&&(this.gl.clearDepth(p),this._clearDepth=p)};q.setDepthFunction=function(p){this._depthFunction!==p&&(this.gl.depthFunc(p),this._depthFunction=p,this._stateTracker.invalidateDepthTest())};q.setDepthWriteEnabled=function(p){this._depthWriteEnabled!==p&&(this.gl.depthMask(p),this._depthWriteEnabled=p,this._stateTracker.invalidateDepthWrite())};
q.setDepthRange=function(p,n){if(this._depthRange.zNear!==p||this._depthRange.zFar!==n)this.gl.depthRange(p,n),this._depthRange.zNear=p,this._depthRange.zFar=n,this._stateTracker.invalidateDepthWrite()};q.setStencilTestEnabled=function(p){this._stencilTestEnabled!==p&&(!0===p?this.gl.enable(this.gl.STENCIL_TEST):this.gl.disable(this.gl.STENCIL_TEST),this._stencilTestEnabled=p,this._stateTracker.invalidateStencilTest())};q.setClearStencil=function(p){p!==this._clearStencil&&(this.gl.clearStencil(p),
this._clearStencil=p)};q.setStencilFunction=function(p,n,d){if(this._stencilFunction.func!==p||this._stencilFunction.ref!==n||this._stencilFunction.mask!==d)this.gl.stencilFunc(p,n,d),this._stencilFunction.face=1032,this._stencilFunction.func=p,this._stencilFunction.ref=n,this._stencilFunction.mask=d,this._stateTracker.invalidateStencilTest()};q.setStencilFunctionSeparate=function(p,n,d,b){if(this._stencilFunction.face!==p||this._stencilFunction.func!==n||this._stencilFunction.ref!==d||this._stencilFunction.mask!==
b)this.gl.stencilFuncSeparate(p,n,d,b),this._stencilFunction.face=p,this._stencilFunction.func=n,this._stencilFunction.ref=d,this._stencilFunction.mask=b,this._stateTracker.invalidateStencilTest()};q.setStencilWriteMask=function(p){this._stencilWriteMask!==p&&(this.gl.stencilMask(p),this._stencilWriteMask=p,this._stateTracker.invalidateStencilWrite())};q.setStencilOp=function(p,n,d){if(this._stencilOperation.fail!==p||this._stencilOperation.zFail!==n||this._stencilOperation.zPass!==d)this.gl.stencilOp(p,
n,d),this._stencilOperation.face=1032,this._stencilOperation.fail=p,this._stencilOperation.zFail=n,this._stencilOperation.zPass=d,this._stateTracker.invalidateStencilTest()};q.setStencilOpSeparate=function(p,n,d,b){if(this._stencilOperation.face!==p||this._stencilOperation.fail!==n||this._stencilOperation.zFail!==d||this._stencilOperation.zPass!==b)this.gl.stencilOpSeparate(p,n,d,b),this._stencilOperation.face=p,this._stencilOperation.face=p,this._stencilOperation.fail=n,this._stencilOperation.zFail=
d,this._stencilOperation.zPass=b,this._stateTracker.invalidateStencilTest()};q.setActiveTexture=function(p){const n=this._activeTextureUnit;0<=p&&p!==this._activeTextureUnit&&(this.gl.activeTexture(x.BASE_TEXTURE_UNIT+p),this._activeTextureUnit=p);return n};q.clear=function(p){p&&this.gl.clear(p)};q.clearSafe=function(p,n=255){p&&(p&16384&&this.setColorMask(!0,!0,!0,!0),p&256&&this.setDepthWriteEnabled(!0),p&1024&&this.setStencilWriteMask(n),this.gl.clear(p))};q.drawArrays=function(p,n,d){this.gl.drawArrays(p,
n,d)};q.drawElements=function(p,n,d,b){5123===d?this.gl.drawElements(p,n,d,b):5125===d&&this.gl.drawElements(p,n,d,b)};q.logIno=function(){};q.setViewport=function(p,n,d,b){const a=this._viewport;if(a.x!==p||a.y!==n||a.width!==d||a.height!==b)a.x=p,a.y=n,a.width=d,a.height=b,this.gl.viewport(p,n,d,b)};q.getViewport=function(){return{x:this._viewport.x,y:this._viewport.y,width:this._viewport.width,height:this._viewport.height}};q.bindProgram=function(p){p?this._activeShaderProgram!==p&&(p.initialize(),
this.gl.useProgram(p.glName),this._activeShaderProgram=p):(this.gl.useProgram(null),this._activeShaderProgram=null)};q.bindTexture=function(p,n){(n>=this.parameters.maxTextureImageUnits||0>n)&&console.error("Input texture unit is out of range of available units!");const d=this._textureUnitMap[n];this.setActiveTexture(n);null==p||null==p.glName?(null!=d&&this.gl.bindTexture(d.descriptor.target,null),this._textureUnitMap[n]=null):d===p?p.applyChanges():(this.gl.bindTexture(p.descriptor.target,p.glName),
p.applyChanges(),this._textureUnitMap[n]=p)};q.unbindTextureAllUnits=function(p){for(let n=0;n<this.parameters.maxTextureImageUnits;n++)this._textureUnitMap[n]===p&&this.bindTexture(null,n)};q.bindFramebuffer=function(p){m.isNone(p)?(this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this._activeFramebuffer=null):this._activeFramebuffer!==p&&(p.initializeAndBind(),this._activeFramebuffer=p)};q.bindBuffer=function(p){p&&(34962===p.bufferType?this._activeVertexBuffer=e(this.gl,p,p.bufferType,this._activeVertexBuffer):
this._activeIndexBuffer=e(this.gl,p,p.bufferType,this._activeIndexBuffer))};q.bindRenderbuffer=function(p){const n=this.gl;p||(n.bindRenderbuffer(n.RENDERBUFFER,null),this._activeRenderbuffer=null);this._activeRenderbuffer!==p&&(n.bindRenderbuffer(n.RENDERBUFFER,p.glName),this._activeRenderbuffer=p)};q.unbindBuffer=function(p){34962===p?this._activeVertexBuffer=e(this.gl,null,p,this._activeVertexBuffer):this._activeIndexBuffer=e(this.gl,null,p,this._activeIndexBuffer)};q.bindVAO=function(p){p?this._activeVertexArrayObject&&
this._activeVertexArrayObject===p||(p.bind(),this._activeVertexArrayObject=p):this._activeVertexArrayObject&&(this._activeVertexArrayObject.unbind(),this._activeVertexArrayObject=null)};q.getBoundTexture=function(p){return this._textureUnitMap[p]};q.getBoundFramebufferObject=function(){return this._activeFramebuffer};q.getBoundVAO=function(){return this._activeVertexArrayObject};q.resetState=function(){this.bindProgram(null);this.bindVAO(null);this.bindFramebuffer(null);this.unbindBuffer(34962);this.unbindBuffer(34963);
for(let p=0;p<this.parameters.maxTextureImageUnits;p++)this.bindTexture(null,p);this.setBlendingEnabled(!1);this.setBlendFunction(1,0);this.setBlendEquation(32774);this.setBlendColor(0,0,0,0);this.setFaceCullingEnabled(!1);this.setCullFace(1029);this.setFrontFace(2305);this.setPolygonOffsetFillEnabled(!1);this.setPolygonOffset(0,0);this.setScissorTestEnabled(!1);this.setScissorRect(0,0,this.gl.canvas.width,this.gl.canvas.height);this.setDepthTestEnabled(!1);this.setDepthFunction(513);this.setDepthRange(0,
1);this.setStencilTestEnabled(!1);this.setStencilFunction(519,0,0);this.setStencilOp(7680,7680,7680);this.setClearColor(0,0,0,0);this.setClearDepth(1);this.setClearStencil(0);this.setColorMask(!0,!0,!0,!0);this.setStencilWriteMask(4294967295);this.setDepthWriteEnabled(!0);this.setViewport(0,0,this.gl.canvas.width,this.gl.canvas.height)};q.enforceState=function(){const p=this.gl;var n=this.capabilities.vao;n&&n.bindVertexArray(null);for(var d=0;d<this.parameters.maxVertexAttributes;d++)p.disableVertexAttribArray(d);
this._activeVertexBuffer?p.bindBuffer(this._activeVertexBuffer.bufferType,this._activeVertexBuffer.glName):p.bindBuffer(34962,null);this._activeIndexBuffer?p.bindBuffer(this._activeIndexBuffer.bufferType,this._activeIndexBuffer.glName):p.bindBuffer(34963,null);if(n&&this._activeVertexArrayObject){if(n=this._activeVertexArrayObject)this._activeVertexArrayObject.unbind(),this._activeVertexArrayObject=null;this.bindVAO(n)}p.bindFramebuffer(p.FRAMEBUFFER,this._activeFramebuffer?this._activeFramebuffer.glName:
null);p.useProgram(this._activeShaderProgram?this._activeShaderProgram.glName:null);p.blendColor(this._blendColorState.r,this._blendColorState.g,this._blendColorState.b,this._blendColorState.a);p.bindRenderbuffer(p.RENDERBUFFER,this._activeRenderbuffer?this._activeRenderbuffer.glName:null);!0===this._blendEnabled?p.enable(this.gl.BLEND):p.disable(this.gl.BLEND);p.blendEquationSeparate(this._blendEquationState.mode,this._blendEquationState.modeAlpha);p.blendFuncSeparate(this._blendFunctionState.srcRGB,
this._blendFunctionState.dstRGB,this._blendFunctionState.srcAlpha,this._blendFunctionState.dstAlpha);p.clearColor(this._clearColor.r,this._clearColor.g,this._clearColor.b,this._clearColor.a);p.clearDepth(this._clearDepth);p.clearStencil(this._clearStencil);p.colorMask(this._colorMaskState.r,this._colorMaskState.g,this._colorMaskState.b,this._colorMaskState.a);p.cullFace(this._cullFace);p.depthFunc(this._depthFunction);p.depthRange(this._depthRange.zNear,this._depthRange.zFar);!0===this._depthTestEnabled?
p.enable(p.DEPTH_TEST):p.disable(p.DEPTH_TEST);p.depthMask(this._depthWriteEnabled);p.frontFace(this._frontFace);p.lineWidth(1);!0===this._polygonCullingEnabled?p.enable(p.CULL_FACE):p.disable(p.CULL_FACE);p.polygonOffset(this._polygonOffset[0],this._polygonOffset[1]);!0===this._polygonOffsetFillEnabled?p.enable(p.POLYGON_OFFSET_FILL):p.disable(p.POLYGON_OFFSET_FILL);p.scissor(this._scissorRect.x,this._scissorRect.y,this._scissorRect.width,this._scissorRect.height);!0===this._scissorTestEnabled?p.enable(p.SCISSOR_TEST):
p.disable(p.SCISSOR_TEST);p.stencilFunc(this._stencilFunction.func,this._stencilFunction.ref,this._stencilFunction.mask);p.stencilOpSeparate(this._stencilOperation.face,this._stencilOperation.fail,this._stencilOperation.zFail,this._stencilOperation.zPass);!0===this._stencilTestEnabled?p.enable(p.STENCIL_TEST):p.disable(p.STENCIL_TEST);p.stencilMask(this._stencilWriteMask);for(n=0;n<this.parameters.maxTextureImageUnits;n++)p.activeTexture(x.BASE_TEXTURE_UNIT+n),p.bindTexture(3553,null),(d=this._textureUnitMap[n])&&
p.bindTexture(d.descriptor.target,d.glName);p.activeTexture(x.BASE_TEXTURE_UNIT+this._activeTextureUnit);p.viewport(this._viewport.x,this._viewport.y,this._viewport.width,this._viewport.height)};t._createClass(l,[{key:"contextAttributes",get:function(){return this.gl.getContextAttributes()}},{key:"parameters",get:function(){if(!this._parameters){const p=this.capabilities.textureFilterAnisotropic;this._parameters={versionString:this.gl.getParameter(this.gl.VERSION),maxVertexTextureImageUnits:this.gl.getParameter(this.gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS),
maxVertexAttributes:this.gl.getParameter(this.gl.MAX_VERTEX_ATTRIBS),maxMaxAnisotropy:p?this.gl.getParameter(p.MAX_TEXTURE_MAX_ANISOTROPY):void 0,maxTextureImageUnits:this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS),maxTextureSize:this.gl.getParameter(this.gl.MAX_TEXTURE_SIZE)}}return this._parameters}},{key:"capabilities",get:function(){return this._capabilities}}]);return l}()})},"esri/views/webgl/renderState":function(){define(["exports"],function(t){function k(H){return u.intern(H)}function m(H){return w.intern(H)}
function z(H){return v.intern(H)}function y(H){return D.intern(H)}function x(H){return B.intern(H)}function f(H){return C.intern(H)}function h(H){return A.intern(H)}function e(H){return E.intern(H)}function l(H){return"["+H.join(",")+"]"}function q(H){return H?l([H.srcRgb,H.srcAlpha,H.dstRgb,H.dstAlpha,H.opRgb,H.opAlpha,H.color.r,H.color.g,H.color.b,H.color.a]):null}function p(H){return H?l([H.face,H.mode]):null}function n(H){return H?l([H.factor,H.units]):null}function d(H){return H?l([H.func]):
null}function b(H){return H?l([H.function.func,H.function.ref,H.function.mask,H.operation.fail,H.operation.zFail,H.operation.zPass]):null}function a(H){return H?l([H.zNear,H.zFar]):null}function c(H){return H?l([H.r,H.g,H.b,H.a]):null}function g(H){return H?l([H.mask]):null}var r=function(){function H(K,J){this.makeKey=K;this.makeRef=J;this.interns=new Map}H.prototype.intern=function(K){if(!K)return null;const J=this.makeKey(K),F=this.interns;F.has(J)||F.set(J,this.makeRef(K));return F.get(J)};return H}();
const u=new r(q,H=>({__tag:"Blending",...H})),w=new r(p,H=>({__tag:"Culling",...H})),v=new r(n,H=>({__tag:"PolygonOffset",...H})),D=new r(d,H=>({__tag:"DepthTest",...H})),B=new r(b,H=>({__tag:"StencilTest",...H})),C=new r(a,H=>({__tag:"DepthWrite",...H})),A=new r(c,H=>({__tag:"ColorWrite",...H})),E=new r(g,H=>({__tag:"StencilWrite",...H})),G=new r(function(H){return H?l([q(H.blending),p(H.culling),n(H.polygonOffset),d(H.depthTest),b(H.stencilTest),a(H.depthWrite),c(H.colorWrite),g(H.stencilWrite)]):
null},H=>({blending:k(H.blending),culling:m(H.culling),polygonOffset:z(H.polygonOffset),depthTest:y(H.depthTest),stencilTest:x(H.stencilTest),depthWrite:f(H.depthWrite),colorWrite:h(H.colorWrite),stencilWrite:e(H.stencilWrite)}));r=function(){function H(J){this._stencilWriteInvalid=this._colorWriteInvalid=this._depthWriteInvalid=this._stencilTestInvalid=this._depthTestInvalid=this._polygonOffsetInvalid=this._cullingInvalid=this._blendingInvalid=this._pipelineInvalid=!0;this._stateSetters=J}var K=
H.prototype;K.setPipeline=function(J){if(this._pipelineInvalid||J!==this._pipeline)this.setBlending(J.blending),this.setCulling(J.culling),this.setPolygonOffset(J.polygonOffset),this.setDepthTest(J.depthTest),this.setStencilTest(J.stencilTest),this.setDepthWrite(J.depthWrite),this.setColorWrite(J.colorWrite),this.setStencilWrite(J.stencilWrite),this._pipeline=J;this._pipelineInvalid=!1};K.invalidateBlending=function(){this._pipelineInvalid=this._blendingInvalid=!0};K.invalidateCulling=function(){this._pipelineInvalid=
this._cullingInvalid=!0};K.invalidatePolygonOffset=function(){this._pipelineInvalid=this._polygonOffsetInvalid=!0};K.invalidateDepthTest=function(){this._pipelineInvalid=this._depthTestInvalid=!0};K.invalidateStencilTest=function(){this._pipelineInvalid=this._stencilTestInvalid=!0};K.invalidateDepthWrite=function(){this._pipelineInvalid=this._depthWriteInvalid=!0};K.invalidateColorWrite=function(){this._pipelineInvalid=this._colorWriteInvalid=!0};K.invalidateStencilWrite=function(){this._pipelineInvalid=
this._stencilTestInvalid=!0};K.setBlending=function(J){this._blending=this.setSubState(J,this._blending,this._blendingInvalid,this._stateSetters.setBlending);this._blendingInvalid=!1};K.setCulling=function(J){this._culling=this.setSubState(J,this._culling,this._cullingInvalid,this._stateSetters.setCulling);this._cullingInvalid=!1};K.setPolygonOffset=function(J){this._polygonOffset=this.setSubState(J,this._polygonOffset,this._polygonOffsetInvalid,this._stateSetters.setPolygonOffset);this._polygonOffsetInvalid=
!1};K.setDepthTest=function(J){this._depthTest=this.setSubState(J,this._depthTest,this._depthTestInvalid,this._stateSetters.setDepthTest);this._depthTestInvalid=!1};K.setStencilTest=function(J){this._stencilTest=this.setSubState(J,this._stencilTest,this._stencilTestInvalid,this._stateSetters.setStencilTest);this._stencilTestInvalid=!1};K.setDepthWrite=function(J){this._depthWrite=this.setSubState(J,this._depthWrite,this._depthWriteInvalid,this._stateSetters.setDepthWrite);this._depthWriteInvalid=
!1};K.setColorWrite=function(J){this._colorWrite=this.setSubState(J,this._colorWrite,this._colorWriteInvalid,this._stateSetters.setColorWrite);this._colorWriteInvalid=!1};K.setStencilWrite=function(J){this._stencilWrite=this.setSubState(J,this._stencilWrite,this._stencilWriteInvalid,this._stateSetters.setStencilWrite);this._stencilTestInvalid=!1};K.setSubState=function(J,F,N,L){if(N||J!==F)L(J),this._pipelineInvalid=!0;return J};return H}();t.StateTracker=r;t.backFaceCullingParams={face:1029,mode:2305};
t.defaultColorWriteParams={r:!0,g:!0,b:!0,a:!0};t.defaultDepthWriteParams={zNear:0,zFar:1};t.makeBlending=k;t.makeColorWrite=h;t.makeCulling=m;t.makeDepthTest=y;t.makeDepthWrite=f;t.makePipelineState=function(H){return G.intern(H)};t.makePolygonOffset=z;t.makeStencilTest=x;t.makeStencilWrite=e;t.separateBlendingParams=function(H,K,J,F,N=32774,L=32774,M=[0,0,0,0]){return{srcRgb:H,srcAlpha:K,dstRgb:J,dstAlpha:F,opRgb:N,opAlpha:L,color:{r:M[0],g:M[1],b:M[2],a:M[3]}}};t.simpleBlendingParams=function(H,
K,J=32774,F=[0,0,0,0]){return{srcRgb:H,srcAlpha:H,dstRgb:K,dstAlpha:K,opRgb:J,opAlpha:J,color:{r:F[0],g:F[1],b:F[2],a:F[3]}}};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/views/webgl/enums":function(){define(["exports"],function(t){t.BASE_TEXTURE_UNIT=33984;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/views/webgl/InstanceCounter":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers"],function(t,k){let m=function(){function z(){this._current=[];this._max=[];
for(this._allocations=new Map;6>this._current.length;)this._current.push(0),this._max.push(0)}var y=z.prototype;y.resetMax=function(){for(this._max.length=0;this._max.length<this._current.length;)this._max.push(0)};y.increment=function(x,f){f=++this._current[x];this._max[x]=Math.max(f,this._max[x])};y.decrement=function(x,f){--this._current[x]};y.printResourceCount=function(){console.log("Live objects:");console.log(`Textures: ${this._current[0]}`);console.log(`Buffers: ${this._current[1]}`);console.log(`VAOs: ${this._current[2]}`);
console.log(`Programs: ${this._current[3]}`);console.log(`Framebuffers: ${this._current[4]}`);console.log(`Renderbuffers: ${this._current[5]}`);if(0<this._allocations.size){console.log(`${this._allocations.size} live object allocations:`);const x=new Map;this._allocations.forEach(f=>{var h;x.set(f,(null!=(h=x.get(f))?h:0)+1)});x.forEach((f,h)=>console.log(f," : ",h))}};k._createClass(z,[{key:"max",get:function(){return this._max}},{key:"current",get:function(){return this._current}}]);return z}();
t.InstanceCounter=m;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/views/webgl/capabilities/load":function(){define("exports ./isWebGL2Context ./DisjointTimerQuery ./DrawBuffers ./Instancing ./LoseContext ./VertexArrayObjects".split(" "),function(t,k,m,z,y,x,f){function h(e,l,q,p,n){if(p&&k(e))return!0;if(l[q])return!1;for(const d of n)if(e.getExtension(d))return!0;return!1}t.loadCapabilities=function(e,l){const q=l&&l.disabledExtensions||{},p=l&&l.debugWebGLExtensions||{};let n,d,b,a,
c,g,r,u,w,v,D,B=null,C=null,A=null,E=null;return{get drawBuffers(){D||(D=z.load(e,q));return D},get instancing(){n||(n=y.load(e));return n},get vao(){d||(d=f.load(e,q));return d},get compressedTextureETC(){if(!b)if(q.compressedTextureETC)b=null;else{var G=e.getExtension("WEBGL_compressed_texture_etc");b=G?{COMPRESSED_R11_EAC:G.COMPRESSED_R11_EAC,COMPRESSED_SIGNED_R11_EAC:G.COMPRESSED_SIGNED_R11_EAC,COMPRESSED_RG11_EAC:G.COMPRESSED_RG11_EAC,COMPRESSED_SIGNED_RG11_EAC:G.COMPRESSED_SIGNED_RG11_EAC,COMPRESSED_RGB8_ETC2:G.COMPRESSED_RGB8_ETC2,
COMPRESSED_SRGB8_ETC2:G.COMPRESSED_SRGB8_ETC2,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:G.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:G.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2,COMPRESSED_RGBA8_ETC2_EAC:G.COMPRESSED_RGBA8_ETC2_EAC,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:G.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC}:null}return b},get compressedTextureS3TC(){if(!a)if(q.compressedTextureS3TC)a=null;else{var G=e.getExtension("WEBGL_compressed_texture_s3tc");a=G?{COMPRESSED_RGB_S3TC_DXT1:G.COMPRESSED_RGB_S3TC_DXT1_EXT,
COMPRESSED_RGBA_S3TC_DXT1:G.COMPRESSED_RGBA_S3TC_DXT1_EXT,COMPRESSED_RGBA_S3TC_DXT3:G.COMPRESSED_RGBA_S3TC_DXT3_EXT,COMPRESSED_RGBA_S3TC_DXT5:G.COMPRESSED_RGBA_S3TC_DXT5_EXT}:null}return a},get textureFilterAnisotropic(){if(!c)if(q.textureFilterAnisotropic)c=null;else{var G=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");c=G?{MAX_TEXTURE_MAX_ANISOTROPY:G.MAX_TEXTURE_MAX_ANISOTROPY_EXT,TEXTURE_MAX_ANISOTROPY:G.TEXTURE_MAX_ANISOTROPY_EXT}:
null}return c},get disjointTimerQuery(){g||(g=m.createDisjointTimerQuery(e,q));return g},get textureFloat(){if(!r)if(k(e))r={textureFloat:!0,textureFloatLinear:!q.textureFloatLinear&&!!e.getExtension("OES_texture_float_linear"),textureHalfFloat:!0,textureHalfFloatLinear:!q.textureHalfFloatLinear&&!!e.getExtension("OES_texture_half_float_linear"),HALF_FLOAT:e.HALF_FLOAT};else if(e instanceof WebGLRenderingContext){const G=!q.textureHalfFloat&&e.getExtension("OES_texture_half_float");r={textureFloat:!q.textureFloat&&
!!e.getExtension("OES_texture_float"),textureFloatLinear:!q.textureFloatLinear&&!!e.getExtension("OES_texture_float_linear"),textureHalfFloat:!!G,textureHalfFloatLinear:!q.textureHalfFloatLinear&&!!e.getExtension("OES_texture_half_float_linear"),HALF_FLOAT:G?G.HALF_FLOAT_OES:void 0}}else r=null;return r},get colorBufferFloat(){if(!u)if(k(e)){var G=!q.colorBufferFloat&&e.getExtension("EXT_color_buffer_half_float"),H=!q.colorBufferFloat&&e.getExtension("EXT_color_buffer_float"),K=!q.colorBufferFloat&&
e.getExtension("EXT_float_blend");u=G||H||K?{textureFloat:!!H,textureHalfFloat:!!G,R16F:e.R16F,RG16F:e.RG16F,RGBA16F:e.RGBA16F,R32F:e.R32F,RG32F:e.RG32F,RGBA32F:e.RGBA32F,R11F_G11F_B10F:e.R11F_G11F_B10F,RGB16F:e.RGB16F}:null}else e instanceof WebGLRenderingContext?(G=!q.colorBufferFloat&&e.getExtension("EXT_color_buffer_half_float"),H=!q.colorBufferFloat&&e.getExtension("WEBGL_color_buffer_float"),K=!q.colorBufferFloat&&e.getExtension("EXT_float_blend"),u=G||H||K?{textureFloat:!!H,textureHalfFloat:!!G,
RGBA16F:G?G.RGBA16F_EXT:void 0,RGB16F:G?G.RGB16F_EXT:void 0,RGBA32F:H?H.RGBA32F_EXT:void 0}:null):u=null;return u},get blendMinMax(){if(!w)if(k(e))w={MIN:e.MIN,MAX:e.MAX};else if(q.blendMinMax)w=null;else{{const G=e.getExtension("EXT_blend_minmax");w=G?{MIN:G.MIN_EXT,MAX:G.MAX_EXT}:null}}return w},get depthTexture(){null===B&&(B=h(e,q,"depthTexture",!0,["WEBGL_depth_texture","MOZ_WEBGL_depth_texture","WEBKIT_WEBGL_depth_texture"]));return B},get standardDerivatives(){null===C&&(C=h(e,q,"standardDerivatives",
!0,["OES_standard_derivatives"]));return C},get shaderTextureLOD(){null===A&&(A=h(e,q,"shaderTextureLOD",!0,["EXT_shader_texture_lod"]));return A},get fragDepth(){null===E&&(E=h(e,q,"fragDepth",!0,["EXT_frag_depth"]));return E},get loseContext(){v||(v=x.load(e,p));return v},enable(G){return this[G]}}};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/views/webgl/capabilities/DisjointTimerQuery":function(){define(["exports","./isWebGL2Context"],function(t,k){let m=function(z,y,x,f,h,e,l,q){this.createQuery=
z;this.resultAvailable=y;this.getResult=x;this.disjoint=f;this.beginTimeElapsed=h;this.endTimeElapsed=e;this.createTimestamp=l;this.timestampBits=q};t.DisjointTimerQuery=m;t.createDisjointTimerQuery=function(z,y){if(y.disjointTimerQuery)return null;let x=z.getExtension("EXT_disjoint_timer_query_webgl2");return x&&k(z)?new m(()=>z.createQuery(),f=>z.getQueryParameter(f,z.QUERY_RESULT_AVAILABLE),f=>z.getQueryParameter(f,z.QUERY_RESULT),()=>z.getParameter(x.GPU_DISJOINT_EXT),f=>z.beginQuery(x.TIME_ELAPSED_EXT,
f),()=>z.endQuery(x.TIME_ELAPSED_EXT),f=>x.queryCounterEXT(f,x.TIMESTAMP_EXT),()=>z.getQuery(x.TIMESTAMP_EXT,x.QUERY_COUNTER_BITS_EXT)):(x=z.getExtension("EXT_disjoint_timer_query"))?new m(()=>x.createQueryEXT(),f=>x.getQueryObjectEXT(f,x.QUERY_RESULT_AVAILABLE_EXT),f=>x.getQueryObjectEXT(f,x.QUERY_RESULT_EXT),()=>z.getParameter(x.GPU_DISJOINT_EXT),f=>x.beginQueryEXT(x.TIME_ELAPSED_EXT,f),()=>x.endQueryEXT(x.TIME_ELAPSED_EXT),f=>x.queryCounterEXT(f,x.TIMESTAMP_EXT),()=>x.getQueryEXT(x.TIMESTAMP_EXT,
x.QUERY_COUNTER_BITS_EXT)):null};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/views/webgl/capabilities/DrawBuffers":function(){define(["exports","./isWebGL2Context"],function(t,k){t.load=function(m,z){return z.disjointTimerQuery?null:k(m)?{drawBuffers:m.drawBuffers.bind(m),MAX_DRAW_BUFFERS:m.MAX_DRAW_BUFFERS,MAX_COLOR_ATTACHMENTS:m.MAX_COLOR_ATTACHMENTS}:z.drawBuffers?null:(m=m.getExtension("WEBGL_draw_buffers"))?{drawBuffers:m.drawBuffersWEBGL.bind(m),MAX_DRAW_BUFFERS:m.MAX_DRAW_BUFFERS_WEBGL,
MAX_COLOR_ATTACHMENTS:m.MAX_COLOR_ATTACHMENTS_WEBGL}:null};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/views/webgl/capabilities/Instancing":function(){define(["exports","./isWebGL2Context"],function(t,k){t.load=function(m){return k(m)?{drawArraysInstanced:m.drawArraysInstanced.bind(m),drawElementsInstanced:m.drawElementsInstanced.bind(m),vertexAttribDivisor:m.vertexAttribDivisor.bind(m)}:(m=m.getExtension("ANGLE_instanced_arrays"))?{drawArraysInstanced:m.drawArraysInstancedANGLE.bind(m),
drawElementsInstanced:m.drawElementsInstancedANGLE.bind(m),vertexAttribDivisor:m.vertexAttribDivisorANGLE.bind(m)}:null};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/views/webgl/capabilities/LoseContext":function(){define(["exports"],function(t){t.load=function(k,m){const z=m.loseContext&&k.getExtension("WEBGL_lose_context");return z?{loseRenderingContext:()=>z.loseContext()}:null};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/views/webgl/capabilities/VertexArrayObjects":function(){define(["exports",
"./isWebGL2Context"],function(t,k){t.load=function(m,z){return k(m)?{createVertexArray:m.createVertexArray.bind(m),deleteVertexArray:m.deleteVertexArray.bind(m),bindVertexArray:m.bindVertexArray.bind(m)}:z.vao?null:(m=m.getExtension("OES_vertex_array_object")||m.getExtension("MOZ_OES_vertex_array_object")||m.getExtension("WEBKIT_OES_vertex_array_object"))?{createVertexArray:m.createVertexArrayOES.bind(m),deleteVertexArray:m.deleteVertexArrayOES.bind(m),bindVertexArray:m.bindVertexArrayOES.bind(m)}:
null};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/views/webgl/ShaderCompiler":function(){define(function(){return function(){function t(m){this.readFile=m}var k=t.prototype;k.resolveIncludes=function(m){return this.resolve(m)};k.resolve=function(m,z=new Map){if(z.has(m))return z.get(m);const y=this.read(m);if(!y)throw Error(`cannot find shader file ${m}`);const x=/^[^\S\n]*#include\s+<(\S+)>[^\S\n]?/gm;let f=x.exec(y);const h=[];for(;null!=f;)h.push({path:f[1],start:f.index,length:f[0].length}),
f=x.exec(y);let e=0,l="";h.forEach(q=>{l+=y.slice(e,q.start);l+=z.has(q.path)?"":this.resolve(q.path,z);e=q.start+q.length});l+=y.slice(e);z.set(m,l);return l};k.read=function(m){return this.readFile(m)};return t}()})},"esri/views/2d/engine/webgl/enums":function(){define(["exports"],function(t){(function(k){k[k.FILL=0]="FILL";k[k.LINE=1]="LINE";k[k.MARKER=2]="MARKER";k[k.TEXT=3]="TEXT";k[k.LABEL=4]="LABEL"})(t.WGLGeometryType||(t.WGLGeometryType={}));(function(k){k[k.SUCCEEDED=0]="SUCCEEDED";k[k.FAILED_OUT_OF_MEMORY=
1]="FAILED_OUT_OF_MEMORY"})(t.WGLGeometryTransactionStatus||(t.WGLGeometryTransactionStatus={}));(function(k){k[k.NONE=0]="NONE";k[k.MAP=1]="MAP";k[k.LABEL=2]="LABEL";k[k.LABEL_ALPHA=4]="LABEL_ALPHA";k[k.HITTEST=8]="HITTEST";k[k.HIGHLIGHT=16]="HIGHLIGHT";k[k.CLIP=32]="CLIP";k[k.DEBUG=64]="DEBUG";k[k.NUM_DRAW_PHASES=9]="NUM_DRAW_PHASES"})(t.WGLDrawPhase||(t.WGLDrawPhase={}));(function(k){k[k.SIZE=0]="SIZE";k[k.COLOR=1]="COLOR";k[k.OPACITY=2]="OPACITY";k[k.ROTATION=3]="ROTATION"})(t.VVType||(t.VVType=
{}));(function(k){k[k.NONE=0]="NONE";k[k.OPACITY=1]="OPACITY";k[k.COLOR=2]="COLOR";k[k.ROTATION=4]="ROTATION";k[k.SIZE_MINMAX_VALUE=8]="SIZE_MINMAX_VALUE";k[k.SIZE_SCALE_STOPS=16]="SIZE_SCALE_STOPS";k[k.SIZE_FIELD_STOPS=32]="SIZE_FIELD_STOPS";k[k.SIZE_UNIT_VALUE=64]="SIZE_UNIT_VALUE"})(t.WGLVVFlag||(t.WGLVVFlag={}));(function(k){k[k.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE";k[k.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE";k[k.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE";k[k.UNIT_TARGETS_OUTLINE=
1024]="UNIT_TARGETS_OUTLINE"})(t.WGLVVTarget||(t.WGLVVTarget={}));(function(k){k[k.SPRITE=0]="SPRITE";k[k.GLYPH=1]="GLYPH"})(t.MosaicType||(t.MosaicType={}));Object.defineProperty(t,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/color":function(){define(["exports","./number"],function(t,k){function m(x,f){Array.isArray(f)?(x[0]=f[0],x[1]=f[1],x[2]=f[2],x[3]=f[3]):(x[0]=f.r,x[1]=f.g,x[2]=f.b,x[3]=f.a);return x}function z(x,f=0,h=!1){const e=x[f+3];x[f+0]*=e;x[f+1]*=e;x[f+2]*=e;h||(x[f+3]*=
255);return x}const y=[0,0,0,0];t.copyAndPremultiply=function(x){return z(m([],x))};t.premultiplyAlpha=z;t.premultiplyAlphaRGBA=function(x){if(!x)return 0;const {r:f,g:h,b:e,a:l}=x;return k.i8888to32(f*l,h*l,e*l,255*l)};t.premultiplyAlphaRGBAArray=function(x){if(!x)return 0;const [f,h,e,l]=x;return k.i8888to32(l/255*f,l/255*h,l/255*e,l)};t.premultiplyAlphaUint32=function(x){z(m(y,x));return k.i8888to32(y[0],y[1],y[2],y[3])};t.white=[255,255,255,1];Object.defineProperty(t,"__esModule",{value:!0})})},
"esri/views/2d/engine/webgl/number":function(){define(["exports"],function(t){function k(y,x,f){return Math.round(Math.max(Math.min(y,f),x))}const m=new Float32Array(1),z=new Uint32Array(m.buffer);t.i16=function(y){return k(y,-32768,32767)};t.i1616to32=function(y,x){return 65535&y|x<<16};t.i32=function(y){return k(y,-2147483648,2147483647)};t.i8=function(y){return k(y,-128,127)};t.i8816to32=function(y,x,f){return y&255|(x&255)<<8|f<<16};t.i8888to32=function(y,x,f,h){return y&255|(x&255)<<8|(f&255)<<
16|h<<24};t.numTo32=function(y){return y|0};t.toFloat32=function(y){z[0]=y;return m[0]};t.toUint32=function(y){m[0]=y;return z[0]};t.u16=function(y){return k(y,0,65535)};t.u32=function(y){return k(y,0,4294967295)};t.u32to4Xu8=function(y){return[y&255,(y&65280)>>>8,(y&16711680)>>>16,(y&4278190080)>>>24]};t.u8=function(y){return k(y,0,255)};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/SymbolProperties":function(){define(["exports","../../../../core/ObjectPool"],function(t,
k){let m=function(){function z(){this.color=[0,0,0,0];this.haloColor=[0,0,0,0];this.haloSize=0;this.size=12;this.vAnchor=this.hAnchor=this.offsetY=this.offsetX=this.angle=0}var y=z.prototype;y.acquire=function(x,f,h,e,l,q,p,n,d){this.color=x;this.haloColor=f;this.haloSize=h;this.size=e;this.angle=l;this.offsetX=q;this.offsetY=p;this.hAnchor=n;this.vAnchor=d};y.release=function(){this.color[0]=this.color[1]=this.color[2]=this.color[3]=0;this.vAnchor=this.hAnchor=this.offsetY=this.offsetX=this.angle=
this.size=this.haloSize=this.haloColor[0]=this.haloColor[1]=this.haloColor[2]=this.haloColor[3]=0};return z}();m.pool=new k(m);t.TextProperties=m;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/util/debug":function(){define(["exports"],function(t){t.DEBUG_ATTR_UPDATES=!1;t.createDebugLogger=(k,m)=>k&&((...z)=>m.warn("DEBUG:",...z))||(()=>null);Object.defineProperty(t,"__esModule",{value:!0})})},"esri/views/2d/layers/features/tileRenderers/support/visualVariablesUtils":function(){define("exports ../../../../../../core/maybe ../../../../../../core/screenUtils ../../../../engine/webgl/definitions ../../../../engine/webgl/enums ../../../../engine/webgl/color ../../../../engine/webgl/visualVariablesUtils".split(" "),
function(t,k,m,z,y,x,f){function h(b){return{value:b.value,size:m.toPt(b.size)}}function e(b){return b.map(a=>h(a))}function l(b){return"string"===typeof b||"number"===typeof b?m.toPt(b):{type:"size",expression:b.expression,stops:e(b.stops)}}function q(b){const a={values:[0,0,0,0,0,0,0,0],opacities:[0,0,0,0,0,0,0,0]};if("string"===typeof b.field)if(b.stops){if(8<b.stops.length)return null;b=b.stops;for(var c=0;8>c;++c){const g=b[Math.min(c,b.length-1)];a.values[c]=g.value;a.opacities[c]=g.opacity}}else return null;
else if(b.stops&&0<=b.stops.length)for(b=b.stops&&0<=b.stops.length&&b.stops[0].opacity,c=0;8>c;c++)a.values[c]=Infinity,a.opacities[c]=b;else return null;return a}function p(b,a,c){b[4*a]=c.r/255;b[4*a+1]=c.g/255;b[4*a+2]=c.b/255;b[4*a+3]=c.a}function n(b){if(k.isNone(b)||b.normalizationField)return null;const a={field:null,values:[0,0,0,0,0,0,0,0],colors:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]};if("string"===typeof b.field)if(b.stops){if(8<b.stops.length)return null;a.field=
b.field;b=b.stops;for(var c=0;8>c;++c){const g=b[Math.min(c,b.length-1)];a.values[c]=g.value;p(a.colors,c,g.color)}}else return null;else if(b.stops&&0<=b.stops.length)for(b=b.stops&&0<=b.stops.length&&b.stops[0].color,c=0;8>c;c++)a.values[c]=Infinity,p(a.colors,c,b);else return null;for(b=0;32>b;b+=4)x.premultiplyAlpha(a.colors,b,!0);return a}const d=b=>{const a=[],c=[];b=e(b);const g=b.length;for(let r=0;6>r;r++){const u=b[Math.min(r,g-1)];a.push(u.value);c.push(null==u.size?z.NAN_MAGIC_NUMBER:
m.pt2px(u.size))}return{values:new Float32Array(a),sizes:new Float32Array(c)}};t.convertColorVariable=n;t.convertVisualVariables=function(b){const a=b&&0<b.length?{}:null,c=a?{}:null;if(!a)return{vvFields:a,vvRanges:c};for(const g of b)if(g.field&&(a[g.type]=g.field),"size"===g.type)switch(c.size||(c.size={}),b=g,f.getTypeOfSizeVisualVariable(b)){case y.WGLVVFlag.SIZE_MINMAX_VALUE:c.size.minMaxValue={minDataValue:b.minDataValue,maxDataValue:b.maxDataValue,minSize:l(b.minSize),maxSize:l(b.maxSize)};
break;case y.WGLVVFlag.SIZE_SCALE_STOPS:c.size.scaleStops={stops:e(b.stops)};break;case y.WGLVVFlag.SIZE_FIELD_STOPS:if(b.levels){const r={};for(const u in b.levels)r[u]=d(b.levels[u]);c.size.fieldStops={type:"level-dependent",levels:r}}else c.size.fieldStops={type:"static",...d(b.stops)};break;case y.WGLVVFlag.SIZE_UNIT_VALUE:c.size.unitValue={unit:b.valueUnit,valueRepresentation:b.valueRepresentation}}else"color"===g.type?c.color=n(g):"opacity"===g.type?c.opacity=q(g):"rotation"===g.type&&(c.rotation=
{type:g.rotationType});return{vvFields:a,vvRanges:c}};t.getVisualVariableSizeValueRepresentationRatio=function(b,a){if(!b||!a)return b;switch(a){case "radius":case "distance":return 2*b;case "area":return Math.sqrt(b)}return b};t.getVisualVariablesFields=function(b){const a=b&&0<b.length?{}:null;a&&b.forEach(c=>{const g=c.type;c.field&&(a[g]=c.field)});return a};t.normalizeSizeElement=l;t.normalizeSizeStops=e;t.stopToSizeStop=h;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/visualVariablesUtils":function(){define(["exports",
"../../../../core/Logger","../../../../core/Error","./enums","./Utils"],function(t,k,m,z,y){const x=k.getLogger("esri.views.2d.engine.webgl");t.getTypeOfSizeVisualVariable=function(f){if(y.isNumber(f.minDataValue)&&y.isNumber(f.maxDataValue)&&null!=f.minSize&&null!=f.maxSize)return z.WGLVVFlag.SIZE_MINMAX_VALUE;if((f.expression&&"view.scale"===f.expression||f.valueExpression&&"$view.scale"===f.valueExpression)&&Array.isArray(f.stops))return z.WGLVVFlag.SIZE_SCALE_STOPS;if((null!=f.field||f.expression&&
"view.scale"!==f.expression||f.valueExpression&&"$view.scale"!==f.valueExpression)&&(Array.isArray(f.stops)||"levels"in f&&f.levels))return z.WGLVVFlag.SIZE_FIELD_STOPS;if((null!=f.field||f.expression&&"view.scale"!==f.expression||f.valueExpression&&"$view.scale"!==f.valueExpression)&&null!=f.valueUnit)return z.WGLVVFlag.SIZE_UNIT_VALUE;x.error(new m("mapview-bad-type","Found invalid size VisualVariable",f));return z.WGLVVFlag.NONE};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/views/2d/layers/features/support/ComputedAttributeStorage":function(){define(["exports",
"./StaticBitSet","./displayIdUtils"],function(t,k,m){function z(x,f,h){if(!(x.length>f))for(;x.length<=f;)x.push(h)}let y=function(){function x(){this._numerics=[];this._strings=[];this._idGenerator=new m.DisplayIdGenerator;this._allocatedSize=256;this._bitsets=[];this._instanceIds=[];this._bounds=[]}var f=x.prototype;f.createBitset=function(){const h=this._bitsets.length;this._bitsets.push(k.StaticBitSet.create(this._allocatedSize,2147483647));return h+1};f.getBitset=function(h){return this._bitsets[h-
1]};f._expand=function(){this._allocatedSize<<=1;for(const h of this._bitsets)h.resize(this._allocatedSize)};f._ensureNumeric=function(h,e){this._numerics[h]||(this._numerics[h]=[]);z(this._numerics[h],e,0)};f._ensureInstanceId=function(h){z(this._instanceIds,h,0)};f._ensureString=function(h,e){this._strings[h]||(this._strings[h]=[]);z(this._strings[h],e,null)};f.createDisplayId=function(h=!1){const e=this._idGenerator.createId();e>this._allocatedSize&&this._expand();return((h?2147483648:0)|e)>>>
0};f.releaseDisplayId=function(h){for(const e of this._bitsets)e.unset(h);return this._idGenerator.releaseId(h&2147483647)};f.getComputedNumeric=function(h,e){return this.getComputedNumericAtIndex(h&2147483647,0)};f.setComputedNumeric=function(h,e,l){return this.setComputedNumericAtIndex(h&2147483647,l,0)};f.getComputedString=function(h,e){return this.getComputedStringAtIndex(h&2147483647,0)};f.setComputedString=function(h,e,l){return this.setComputedStringAtIndex(h&2147483647,0,l)};f.getComputedNumericAtIndex=
function(h,e){h&=2147483647;this._ensureNumeric(e,h);return this._numerics[e][h]};f.setComputedNumericAtIndex=function(h,e,l){h&=2147483647;this._ensureNumeric(e,h);this._numerics[e][h]=l};f.getInstanceId=function(h){h&=2147483647;this._ensureInstanceId(h);return this._instanceIds[h]};f.setInstanceId=function(h,e){h&=2147483647;this._ensureInstanceId(h);this._instanceIds[h]=e};f.getComputedStringAtIndex=function(h,e){h&=2147483647;this._ensureString(e,h);return this._strings[e][h]};f.setComputedStringAtIndex=
function(h,e,l){h&=2147483647;this._ensureString(e,h);this._strings[e][h]=l};f.getXMin=function(h){return this._bounds[4*(h&2147483647)]};f.getYMin=function(h){return this._bounds[4*(h&2147483647)+1]};f.getXMax=function(h){return this._bounds[4*(h&2147483647)+2]};f.getYMax=function(h){return this._bounds[4*(h&2147483647)+3]};f.setBounds=function(h,e){e=e.readHydratedGeometry();if(!e||!e.coords.length)return!1;let l=Infinity,q=Infinity,p=-Infinity,n=-Infinity;e.forEachVertex((d,b)=>{l=Math.min(l,d);
q=Math.min(q,b);p=Math.max(p,d);n=Math.max(n,b)});h&=2147483647;z(this._bounds,4*h+4,0);this._bounds[4*h]=l;this._bounds[4*h+1]=q;this._bounds[4*h+2]=p;this._bounds[4*h+3]=n;return!0};return x}();t.ComputedAttributeStorage=y;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/views/2d/layers/features/support/displayIdUtils":function(){define(["exports"],function(t){let k=function(){function m(){this._freeIds=[];this._idCounter=1}var z=m.prototype;z.createId=function(y=!1){var x=this._getFreeId();
return((y?2147483648:0)|x)>>>0};z.releaseId=function(y){this._freeIds.push(y)};z._getFreeId=function(){return this._freeIds.length?this._freeIds.pop():this._idCounter++};return m}();t.DISPLAY_ID_TYPE_AGGREGATE=1;t.DISPLAY_ID_TYPE_FEATURE=0;t.DisplayIdGenerator=k;t.getDisplayIdIndex=function(m){return m&2147483647};t.getDisplayIdType=function(m){return(m&2147483648)>>>31};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/views/2d/layers/features/FeatureStore2D":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../core/has ../../../../core/maybe ../../../../core/Evented ../../../../core/CircularArray ../../../../geometry/support/aaBoundingBox ../../../../chunks/rbush ./Store2D ./support/FeatureSetReaderPBFIndirect".split(" "),
function(t,k,m,z,y,x,f,h,e,l){const q={getObjectId(p){return p.getObjectId()},getAttributes(p){return p.readAttributes()},getAttribute(p,n){return p.readAttribute(n)},cloneWithGeometry(p,n){return p},getGeometry(p){return p.readHydratedGeometry()},getCentroid(p,n){return p.readCentroid()}};m=function(p){function n(b,a,c){var g=p.call(this,b,a)||this;g.featureAdapter=q;g.events=new y;g._featureSetsByInstance=new Map;g._objectIdToDisplayId=new Map;g._spatialIndexInvalid=!0;g._indexSearchCache=new x(50);
g._index=h.rbush(9,r=>({minX:g._storage.getXMin(r),minY:g._storage.getYMin(r),maxX:g._storage.getXMax(r),maxY:g._storage.getYMax(r)}));g._storage=a;g.mode=c;return g}k._inheritsLoose(n,p);var d=n.prototype;d.hasInstance=function(b){return this._featureSetsByInstance.has(b)};d.onTileData=function(b,a){if(z.isNone(a.addOrUpdate))return a;a.addOrUpdate.attachStorage(this._storage);if("snapshot"===this.mode){for(var c=a.addOrUpdate.getCursor();c.next();){const g=c.getDisplayId();this.setComputedAttributes(this._storage,
c,g,b.scale)}return a}this._featureSetsByInstance.set(a.addOrUpdate.instance,a.addOrUpdate);for(c=a.addOrUpdate.getCursor();c.next();)this._insertFeature(c,b.scale);this._spatialIndexInvalid=!0;this.events.emit("changed");return a};d.search=function(b){this._rebuildIndex();const a=b.id;var c=this._indexSearchCache.find(u=>u.tileId===a);if(z.isSome(c))return c.readers;c=new Map;b=this._searchIndex(b.bounds);const g=[];for(const u of b){var r=this._storage.getInstanceId(u);b=(4294901760&r)>>>16;r&=
65535;c.has(b)||c.set(b,[]);c.get(b).push(r)}c.forEach((u,w)=>{w=this._featureSetsByInstance.get(w);g.push(l.FeatureSetReaderIndirect.from(w,u))});this._indexSearchCache.enqueue({tileId:a,readers:g});return g};d.insert=function(b){const a=b.getCursor(),c=this._storage;for(;a.next();){var g,r=a.getIndex();r|=a.instance<<16;const u=a.getObjectId(),w=null!=(g=this._objectIdToDisplayId.get(u))?g:this._storage.createDisplayId();a.setDisplayId(w);c.setInstanceId(w,r);this._objectIdToDisplayId.set(u,w)}this._featureSetsByInstance.set(b.instance,
b);this._spatialIndexInvalid=!0};d.remove=function(b){const a=this._objectIdToDisplayId.get(b);if(a){var c=this._storage.getInstanceId(a),g=65535&c;c=(4294901760&c)>>>16;var r=this._featureSetsByInstance.get(c);this._objectIdToDisplayId.delete(b);this._storage.releaseDisplayId(a);r.removeAtIndex(g);r.isEmpty&&this._featureSetsByInstance.delete(c);this._spatialIndexInvalid=!0}};d.forEach=function(b){this._objectIdToDisplayId.forEach(a=>{a=this._storage.getInstanceId(a);a=this._lookupFeature(a);b(a)})};
d.forEachUnsafe=function(b){this._objectIdToDisplayId.forEach(a=>{var c=this._storage.getInstanceId(a);a=65535&c;c=this._getFeatureSet((4294901760&c)>>>16);c.setIndex(a);b(c)})};d.forEachInBounds=function(b,a){b=this._searchIndex(b);for(const c of b)b=this.lookupFeatureByDisplayId(c,this._storage),a(z.unwrap(b))};d.forEachBounds=function(b,a,c){this._rebuildIndex();const g=[0,0,0,0];for(const r of b)r.readGeometry()&&(b=r.getDisplayId(),g[0]=this._storage.getXMin(b),g[1]=this._storage.getYMin(b),
g[2]=this._storage.getXMax(b),g[3]=this._storage.getYMax(b),a(f.fromRect(c,g)))};d.sweepFeatures=function(b,a,c){this._spatialIndexInvalid=!0;this._objectIdToDisplayId.forEach((g,r)=>{b.has(g)||(a.releaseDisplayId(g),c&&c.unsetAttributeData(g),this._objectIdToDisplayId.delete(r))});this.events.emit("changed")};d.sweepFeatureSets=function(b){this._spatialIndexInvalid=!0;this._featureSetsByInstance.forEach((a,c)=>{b.has(c)||this._featureSetsByInstance.delete(c)})};d.lookupObjectId=function(b,a){b=this.lookupFeatureByDisplayId(b,
a);return z.isNone(b)?null:b.getObjectId()};d.lookupDisplayId=function(b){return this._objectIdToDisplayId.get(b)};d.lookupFeatureByDisplayId=function(b,a){b=a.getInstanceId(b);return this._lookupFeature(b)};d.lookupByDisplayIdUnsafe=function(b){var a=this._storage.getInstanceId(b);b=65535&a;a=this._getFeatureSet((4294901760&a)>>>16);if(!a)return null;a.setIndex(b);return a};d._insertFeature=function(b,a){const c=this._storage,g=b.getObjectId();var r=b.getIndex();r|=b.instance<<16;c.getInstanceId(b.getDisplayId());
let u=this._objectIdToDisplayId.get(g);u||(u=c.createDisplayId(),this._objectIdToDisplayId.set(g,u),this._spatialIndexInvalid=!0);b.setDisplayId(u);c.setInstanceId(u,r);this.setComputedAttributes(c,b,u,a)};d._searchIndex=function(b){this._rebuildIndex();return this._index.search({minX:b[0],minY:b[1],maxX:b[2],maxY:b[3]})};d._rebuildIndex=function(){if(this._spatialIndexInvalid){var b=[];"snapshot"===this.mode?this._featureSetsByInstance.forEach(a=>{for(a=a.getCursor();a.next();){const c=a.getDisplayId();
this._storage.setBounds(c,a)&&b.push(c)}}):this._objectIdToDisplayId.forEach(a=>{const c=this._storage.getInstanceId(a);this._storage.setBounds(a,this._lookupFeature(c))&&b.push(a)});this._index.clear();this._index.load(b);this._indexSearchCache.clear();this._spatialIndexInvalid=!1}};d._lookupFeature=function(b){const a=65535&b;b=this._getFeatureSet((4294901760&b)>>>16);if(!b)return null;b=b.getCursor();b.setIndex(a);return b};d._getFeatureSet=function(b){return this._featureSetsByInstance.get(b)};
k._createClass(n,[{key:"storage",get:function(){return this._storage}},{key:"storeStatistics",get:function(){return{featureCount:0,vertexCount:0}}}]);return n}(e.Store2D);t.FeatureStore2D=m;t.featureAdapter=q;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/core/CircularArray":function(){define(["../chunks/_rollupPluginBabelHelpers","./maybe"],function(t,k){return function(){function m(y=Number.POSITIVE_INFINITY){this._start=this.size=0;this.maxSize=y;this._buffer=isFinite(y)?Array(y):[]}
var z=m.prototype;z.enqueue=function(y){if(this.size===this.maxSize){const x=this._buffer[this._start];this._buffer[this._start]=y;this._start=(this._start+1)%this.maxSize;return x}isFinite(this.maxSize)?this._buffer[(this._start+this.size++)%this.maxSize]=y:this._buffer[this._start+this.size++]=y;return null};z.dequeue=function(){if(0===this.size)return null;const y=this._buffer[this._start];this._buffer[this._start]=null;this.size--;this._start=(this._start+1)%this.maxSize;return y};z.peek=function(){return 0===
this.size?null:this._buffer[this._start]};z.find=function(y){if(0===this.size)return null;for(const x of this._buffer)if(k.isSome(x)&&y(x))return x;return null};z.clear=function(y){let x=this.dequeue();for(;k.isSome(x);)y&&y(x),x=this.dequeue()};t._createClass(m,[{key:"entries",get:function(){return this._buffer}}]);return m}()})},"esri/geometry/support/aaBoundingBox":function(){define(["exports","../../core/maybe","../Extent","./aaBoundingRect"],function(t,k,m,z){function y(a=d){return[a[0],a[1],
a[2],a[3],a[4],a[5]]}function x(a,c,g,r,u,w,v=y()){v[0]=a;v[1]=c;v[2]=g;v[3]=r;v[4]=u;v[5]=w;return v}function f(a){return a[0]>=a[3]?0:a[3]-a[0]}function h(a){return a[1]>=a[4]?0:a[4]-a[1]}function e(a){return a[2]>=a[5]?0:a[5]-a[2]}function l(a,c){return Math.max(c[0],a[0])<=Math.min(c[3],a[3])&&Math.max(c[1],a[1])<=Math.min(c[4],a[4])&&Math.max(c[2],a[2])<=Math.min(c[5],a[5])}function q(a,c){a[0]=c[0];a[1]=c[1];a[2]=c[2];a[3]=c[3];a[4]=c[4];a[5]=c[5];return a}function p(a){return 6===a.length}
const n=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity],d=[0,0,0,0,0,0],b=y();t.NEGATIVE_INFINITY=n;t.POSITIVE_INFINITY=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];t.ZERO=d;t.allFinite=function(a){for(let c=0;6>c;c++)if(!isFinite(a[c]))return!1;return!0};t.center=function(a,c=[0,0,0]){c[0]=a[0]+f(a)/2;c[1]=a[1]+h(a)/2;c[2]=a[2]+e(a)/2;return c};t.contains=function(a,c){return c[0]>=a[0]&&c[1]>=a[1]&&c[2]>=a[2]&&c[3]<=a[3]&&c[4]<=a[4]&&c[5]<=a[5]};t.containsPoint=function(a,
c){return c[0]>=a[0]&&c[1]>=a[1]&&c[2]>=a[2]&&c[0]<=a[3]&&c[1]<=a[4]&&c[2]<=a[5]};t.containsPointWithMargin=function(a,c,g){return c[0]>=a[0]-g&&c[1]>=a[1]-g&&c[2]>=a[2]-g&&c[0]<=a[3]+g&&c[1]<=a[4]+g&&c[2]<=a[5]+g};t.create=y;t.depth=h;t.diameter=function(a){const c=f(a),g=e(a);a=h(a);return Math.sqrt(c*c+g*g+a*a)};t.empty=function(a){return a?q(a,n):y(n)};t.equals=function(a,c,g){if(k.isNone(a)||k.isNone(c))return a===c;if(!p(a)||!p(c))return!1;if(g)for(let r=0;r<a.length;r++){if(!g(a[r],c[r]))return!1}else for(g=
0;g<a.length;g++)if(a[g]!==c[g])return!1;return!0};t.expandWithAABB=function(a,c){a[0]=Math.min(a[0],c[0]);a[1]=Math.min(a[1],c[1]);a[2]=Math.min(a[2],c[2]);a[3]=Math.max(a[3],c[3]);a[4]=Math.max(a[4],c[4]);a[5]=Math.max(a[5],c[5])};t.expandWithBuffer=function(a,c,g=0,r=c.length/3){let u=a[0],w=a[1],v=a[2],D=a[3],B=a[4],C=a[5];for(let A=0;A<r;A++)u=Math.min(u,c[g+3*A]),w=Math.min(w,c[g+3*A+1]),v=Math.min(v,c[g+3*A+2]),D=Math.max(D,c[g+3*A]),B=Math.max(B,c[g+3*A+1]),C=Math.max(C,c[g+3*A+2]);a[0]=u;
a[1]=w;a[2]=v;a[3]=D;a[4]=B;a[5]=C};t.expandWithNestedArray=function(a,c,g){const r=c.length;let u=a[0],w=a[1],v=a[2],D=a[3],B=a[4],C=a[5];if(g)for(g=0;g<r;g++){var A=c[g];u=Math.min(u,A[0]);w=Math.min(w,A[1]);v=Math.min(v,A[2]);D=Math.max(D,A[0]);B=Math.max(B,A[1]);C=Math.max(C,A[2])}else for(g=0;g<r;g++)A=c[g],u=Math.min(u,A[0]),w=Math.min(w,A[1]),D=Math.max(D,A[0]),B=Math.max(B,A[1]);a[0]=u;a[1]=w;a[2]=v;a[3]=D;a[4]=B;a[5]=C};t.expandWithOffset=function(a,c,g,r){a[0]=Math.min(a[0],a[0]+c);a[3]=
Math.max(a[3],a[3]+c);a[1]=Math.min(a[1],a[1]+g);a[4]=Math.max(a[4],a[4]+g);a[2]=Math.min(a[2],a[2]+r);a[5]=Math.max(a[5],a[5]+r)};t.expandWithRect=function(a,c){a[0]=Math.min(a[0],c[0]);a[1]=Math.min(a[1],c[1]);a[3]=Math.max(a[3],c[2]);a[4]=Math.max(a[4],c[3])};t.expandWithVec3=function(a,c){a[0]=Math.min(a[0],c[0]);a[1]=Math.min(a[1],c[1]);a[2]=Math.min(a[2],c[2]);a[3]=Math.max(a[3],c[0]);a[4]=Math.max(a[4],c[1]);a[5]=Math.max(a[5],c[2])};t.fromExtent=function(a,c=y()){c[0]=a.xmin;c[1]=a.ymin;c[2]=
a.zmin;c[3]=a.xmax;c[4]=a.ymax;c[5]=a.zmax;return c};t.fromMinMax=function(a,c,g=y()){g[0]=a[0];g[1]=a[1];g[2]=a[2];g[3]=c[0];g[4]=c[1];g[5]=c[2];return g};t.fromRect=function(a,c){a[0]=c[0];a[1]=c[1];a[2]=Number.NEGATIVE_INFINITY;a[3]=c[2];a[4]=c[3];a[5]=Number.POSITIVE_INFINITY;return a};t.fromValues=x;t.getMax=function(a,c){c[0]=a[3];c[1]=a[4];c[2]=a[5];return c};t.getMin=function(a,c){c[0]=a[0];c[1]=a[1];c[2]=a[2];return c};t.height=e;t.intersects=l;t.intersectsClippingArea=function(a,c){return k.isNone(c)?
!0:l(a,c)};t.is=p;t.isPoint=function(a){return 0===f(a)&&0===h(a)&&0===e(a)};t.maximumDimension=function(a){return Math.max(f(a),e(a),h(a))};t.offset=function(a,c,g,r,u=a){u[0]=a[0]+c;u[1]=a[1]+g;u[2]=a[2]+r;u[3]=a[3]+c;u[4]=a[4]+g;u[5]=a[5]+r;return u};t.scale=function(a,c,g=a){const r=a[0]+f(a)/2,u=a[1]+h(a)/2,w=a[2]+e(a)/2;g[0]=r+(a[0]-r)*c;g[1]=u+(a[1]-u)*c;g[2]=w+(a[2]-w)*c;g[3]=r+(a[3]-r)*c;g[4]=u+(a[4]-u)*c;g[5]=w+(a[5]-w)*c;return g};t.set=q;t.setMax=function(a,c,g=a){g[3]=c[0];g[4]=c[1];
g[5]=c[2];g!==a&&(g[0]=a[0],g[1]=a[1],g[2]=a[2]);return a};t.setMin=function(a,c,g=a){g[0]=c[0];g[1]=c[1];g[2]=c[2];g!==a&&(g[3]=a[3],g[4]=a[4],g[5]=a[5]);return g};t.size=function(a,c=[0,0,0]){c[0]=f(a);c[1]=h(a);c[2]=e(a);return c};t.toExtent=function(a,c){return isFinite(a[2])||isFinite(a[5])?new m({xmin:a[0],xmax:a[3],ymin:a[1],ymax:a[4],zmin:a[2],zmax:a[5],spatialReference:c}):new m({xmin:a[0],xmax:a[3],ymin:a[1],ymax:a[4],spatialReference:c})};t.toRect=function(a,c){c||(c=z.create());c[0]=a[0];
c[1]=a[1];c[2]=a[3];c[3]=a[4];return c};t.width=f;t.wrap=function(a,c,g,r,u,w){return x(a,c,g,r,u,w,b)};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/views/2d/layers/features/Store2D":function(){define("require exports ../../../../core/has ../../../../core/maybe ../../../../support/arcadeOnDemand ../../../../core/accessorSupport/diffUtils ../../arcade/callExpressionWithCursor".split(" "),function(t,k,m,z,y,x,f){const h=new Promise(function(l,q){t(["../../../../layers/support/labelFormatUtils"],
l,q)});let e=function(){function l(p,n){this._canCacheExpressionValue=!1;this._sourceInfo=p;this._bitsets={computed:n.getBitset(n.createBitset())}}var q=l.prototype;q.invalidate=function(){this._bitsets.computed.clear()};q.updateSchema=async function(p,n){var d=x.diff(this._schema,n);if((this._schema=n)&&!z.isNone(d)&&x.hasDiff(d,"attributes")){m("esri-2d-update-debug")&&console.debug("Applying Update - Store:",d);this._bitsets.computed.clear();p.targets[n.name]=!0;p=n.attributes;n=[];d=[];for(const b in p){const a=
p[b];switch(a.type){case "expression":n.push(this._createArcadeComputedField(a));break;case "label-expression":n.push(this._createLabelArcadeComputedField(a));break;case "statistic":d.push(a)}}this._computedFields=await Promise.all(n);this._canCacheExpressionValue=!this._computedFields.some(b=>"expression"===b.type&&b.expression.referencesScale());this._statisticFields=d}};q.setComputedAttributes=function(p,n,d,b){var a=this._bitsets.computed;if(!this._canCacheExpressionValue||!a.has(d)){a.set(d);
for(const c of this._computedFields)switch(a=this._evaluateField(n,c,b),c.resultType){case "numeric":p.setComputedNumericAtIndex(d,c.fieldIndex,a);break;case "string":p.setComputedStringAtIndex(d,c.fieldIndex,a)}}};q._createArcadeComputedField=async function(p){return{...p,expression:await y.createRendererExpression(p.valueExpression,this._sourceInfo.spatialReference,this._sourceInfo.fieldsIndex)}};q._createLabelArcadeComputedField=async function(p){var n=this._sourceInfo.spatialReference;const d=
this._sourceInfo.fields,{createLabelFunction:b}=await h;n=await b(p.label,d,n);return{...p,builder:n}};q._evaluateField=function(p,n,d){switch(n.type){case "label-expression":return p=p.readArcadeFeature(),n.builder.evaluate(p)||"";case "expression":return{expression:n}=n,f(n,p,{$view:{scale:d}})}};return l}();k.Store2D=e;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/support/arcadeOnDemand":function(){define(["require","exports","../core/maybe","../geometry/SpatialReference","../geometry"],
function(t,k,m,z,y){async function x(){f||(f=(async()=>{const e=await new Promise(function(l,q){t(["./arcadeUtils"],l,q)});await e.arcade.load();return{arcade:e.arcade,arcadeUtils:e,Dictionary:e.Dictionary,Feature:e.arcadeFeature}})());return f}let f;y=(e,l,q)=>h.create(e,l,q,null,["$feature","$view"]);let h=function(){function e(q,p,n,d,b,a,c,g){this.script=q;this.evaluate=b;this.fields=c;this._syntaxTree=d;this._arcade=p;this._arcadeDictionary=n;this._arcadeFeature=a;this._spatialReference=g;this._referencesGeometry=
p.scriptTouchesGeometry(this._syntaxTree);this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}e.create=async function(q,p,n,d,b,a){const {arcade:c,Feature:g,Dictionary:r}=await x(),u=z.fromJSON(p);p=c.parseScript(q,a);b=b.reduce((C,A)=>({...C,[A]:null}),{});let w=null;m.isSome(d)&&(w=new r(d),w.immutable=!0,b.$config=null);d=c.scriptUsesGeometryEngine(p)&&c.enableGeometrySupport();a=c.scriptUsesFeatureSet(p)&&c.enableFeatureSetSupport();const v=c.scriptIsAsync(p)&&c.enableAsyncSupport();
b={vars:b,spatialReference:u,useAsync:!!v};const D=new r;D.immutable=!1;D.setField("scale",0);const B=c.compileScript(p,b);await Promise.all([d,a,v]);return new e(q,c,r,p,C=>{"$view"in C&&C.$view&&(D.setField("scale",C.$view.scale),C.$view=D);w&&(C.$config=w);return B({vars:C,spatialReference:u})},new g,n,u)};var l=e.prototype;l.repurposeFeature=function(q){q.geometry&&!q.geometry.spatialReference&&(q.geometry.spatialReference=this._spatialReference);this._arcadeFeature.repurposeFromGraphicLikeObject(q.geometry,
q.attributes,{fields:this.fields});return this._arcadeFeature};l.repurposeAdapter=function(q){this._arcadeFeature.repurposeFromAdapter(q,{fields:this.fields});return this._arcadeFeature};l.createDictionary=function(){return new this._arcadeDictionary};l.referencesMember=function(q){return this._arcade.referencesMember(this._syntaxTree,q)};l.referencesFunction=function(q){return this._arcade.referencesFunction(this._syntaxTree,q)};l.referencesGeometry=function(){return this._referencesGeometry};l.referencesScale=
function(){return this._referencesScale};l.extractFieldLiterals=function(q){return this._arcade.extractFieldLiterals(this._syntaxTree,q)};return e}();k.ArcadeExpression=h;k.createDictionaryExpression=(e,l,q,p)=>h.create(e,l,q,p,["$feature","$view"]);k.createLabelExpression=(e,l,q)=>h.create(e,l,q,null,["$feature"]);k.createRendererExpression=y;k.createVVExpression=y;k.default=h;k.loadArcade=x;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/views/2d/arcade/callExpressionWithCursor":function(){define(["../../../core/Logger"],
function(t){return function(k,m,z){k.referencesGeometry();m=m.readArcadeFeature();try{return k.evaluate({...z,$feature:m})}catch(y){return t.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",y),null}}})},"esri/views/2d/layers/features/support/FeatureSetReaderPBFIndirect":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","./FeatureSetReader"],function(t,k,m){let z=function(y){function x(h,e){var l=y.call(this,m.FeatureSetReader.createInstance())||
this;l._currentIndex=-1;l._reader=h;l._indices=e;return l}k._inheritsLoose(x,y);x.from=function(h,e){return new x(h.copy(),e)};var f=x.prototype;f.getApproximateSize=function(){return this._indices.length};f.getCursor=function(){return this.copy()};f.copy=function(){const h=new x(this._reader.copy(),this._indices);h._currentIndex=this._currentIndex;return h};f.next=function(){for(;this._nextIndex()&&!this._reader._passesFilter()&&!this._reader._getExists(););return this._currentIndex<this._indices.length};
f._nextIndex=function(){return++this._currentIndex<this._indices.length?(this._reader.setIndex(this._indices[this._currentIndex]),!0):!1};f.setArcadeSpatialReference=function(h){this._reader.setArcadeSpatialReference(h)};f.attachStorage=function(h){this._reader.attachStorage(h)};f.getStorage=function(){return this._reader.getStorage()};f.getComputedNumeric=function(h){return this._reader.getComputedNumericAtIndex(0)};f.setComputedNumeric=function(h,e){return this._reader.setComputedNumericAtIndex(e,
0)};f.getComputedString=function(h){return this._reader.getComputedStringAtIndex(0)};f.setComputedString=function(h,e){return this._reader.setComputedStringAtIndex(0,e)};f.getComputedNumericAtIndex=function(h){return this._reader.getComputedNumericAtIndex(h)};f.setComputedNumericAtIndex=function(h,e){this._reader.setComputedNumericAtIndex(h,e)};f.getComputedStringAtIndex=function(h){return this._reader.getComputedStringAtIndex(h)};f.setComputedStringAtIndex=function(h,e){return this._reader.setComputedStringAtIndex(h,
e)};f.transform=function(h,e,l,q){const p=this.copy();p._reader=this._reader.transform(h,e,l,q);return p};f.extent=function(h,e,l,q){const p=this.copy();p._reader=this._reader.extent(h,e,l,q);return p};f.hasFilter=function(){return this._reader.hasFilter()};f.readAttribute=function(h,e=!1){return this._reader.readAttribute(h,e)};f.readAttributes=function(){return this._reader.readAttributes()};f.joinAttributes=function(h){return this._reader.joinAttributes(h)};f.readArcadeFeature=function(){return this._reader.readArcadeFeature()};
f.geometry=function(){return this._reader.geometry()};f.field=function(h){return this.readAttribute(h,!0)};f.hasField=function(h){return this._reader.hasField(h)};f.setField=function(h,e){return this._reader.setField(h,e)};f.keys=function(){return this._reader.keys()};f.castToText=function(){return this._reader.castToText()};f.getQuantizationTransform=function(){return this._reader.getQuantizationTransform()};f.getAttributeHash=function(){return this._reader.getAttributeHash()};f.getObjectId=function(){return this._reader.getObjectId()};
f.getDisplayId=function(){return this._reader.getDisplayId()};f.setDisplayId=function(h){return this._reader.setDisplayId(h)};f.getGroupId=function(){return this._reader.getGroupId()};f.setGroupId=function(h){return this._reader.setGroupId(h)};f.getXHydrate=function(){return this._reader.getXHydrate()};f.getYHydrate=function(){return this._reader.getYHydrate()};f.getX=function(){return this._reader.getX()};f.getY=function(){return this._reader.getY()};f.setIndex=function(h){return this._reader.setIndex(h)};
f.getIndex=function(){return this._reader.getIndex()};f.readLegacyFeature=function(){return this._reader.readLegacyFeature()};f.readOptimizedFeature=function(){return this._reader.readOptimizedFeature()};f.readLegacyPointGeometry=function(){return this._reader.readLegacyPointGeometry()};f.readLegacyGeometry=function(){return this._reader.readLegacyGeometry()};f.readLegacyCentroid=function(){return this._reader.readLegacyCentroid()};f.readGeometryArea=function(){return this._reader.readGeometryArea()};
f.readUnquantizedGeometry=function(){return this._reader.readUnquantizedGeometry()};f.readHydratedGeometry=function(){return this._reader.readHydratedGeometry()};f.readGeometry=function(){return this._reader.readGeometry()};f.readCentroid=function(){return this._reader.readCentroid()};f._passesFilter=function(){return this._reader._passesFilter()};f._readAttribute=function(h,e){throw Error("Error: Should not be called. Underlying _reader should be used instead");};f._readAttributes=function(){throw Error("Error: Should not be called. Underlying _reader should be used instead");
};k._createClass(x,[{key:"hasNext",get:function(){return this._currentIndex+1<this._indices.length}},{key:"geometryType",get:function(){return this._reader.geometryType}},{key:"hasFeatures",get:function(){return this._reader.hasFeatures}},{key:"exceededTransferLimit",get:function(){return this._reader.exceededTransferLimit}},{key:"hasZ",get:function(){return this._reader.hasZ}},{key:"hasM",get:function(){return this._reader.hasM}}]);return x}(m.FeatureSetReader);t.FeatureSetReaderIndirect=z;Object.defineProperty(t,
"__esModule",{value:!0})})},"esri/layers/graphics/data/QueryEngine":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/lang ../../../core/maybe ../../../core/Error ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/boundsUtils ../../../geometry/support/jsonUtils ../../../core/unitUtils ../../../geometry/support/normalizeUtils ../../../core/MemCache ../../../geometry/support/aaBoundingRect ../../support/PromiseQueue ../../support/FieldsIndex ./QueryEngineCapabilities ../../../geometry/support/aaBoundingBox ./projectionSupport ./attributeSupport ./utils ./spatialQuerySupport ./timeSupport ./QueryEngineResult".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d,b,a,c,g,r,u,w,v){function D(K){return K.every(J=>"exceedslimit"!==J.statisticType)}const B=new Set,C=new q.MemCacheStorage(2E6);let A=0,E=function(){function K(F){this.capabilities={query:b.queryCapabilities};this.geometryType=F.geometryType;this.hasM=F.hasM;this.hasZ=F.hasZ;this.objectIdField=F.objectIdField;this.spatialReference=F.spatialReference;this.definitionExpression=F.definitionExpression;this.featureStore=F.featureStore;this.aggregateAdapter=F.aggregateAdapter;
this._changeHandle=this.featureStore.events.on("changed",()=>this.clearCache());this.timeInfo=F.timeInfo;F.cacheSpatialQueries&&(this._geometryQueryCache=new q.MemCache(A++ +"$$",C));this.fieldsIndex=new d(F.fields);F.scheduler&&F.task&&(this._frameQueue=new n,this._frameTask=F.scheduler.registerTask(F.task,N=>this._update(N),()=>0<this._frameQueue.length))}var J=K.prototype;J.destroy=function(){this._frameTask&&(this._frameTask.remove(),this._frameTask=null,this._frameQueue.cancelAll(),this._frameQueue=
null);this.clearCache();this._geometryQueryCache&&this._geometryQueryCache.destroy();this._changeHandle&&(this._changeHandle.remove(),this._changeHandle=null);this.fieldsIndex.destroy()};J.clearCache=function(){this._geometryQueryCache&&this._geometryQueryCache.clear();this._timeExtent=this._allItems=null};J.executeQuery=async function(F={},N){let L=m.clone(F),M;try{L=await this._schedule(()=>r.normalizeQuery(L,this.definitionExpression,this.spatialReference),N),L=await this._reschedule(()=>this._checkQuerySupport(L),
N),M=await this._reschedule(()=>this._executeGeometryQuery(L,N),N),M=await this._reschedule(()=>M.executeAggregateIdsQuery(L),N),M=await this._reschedule(()=>M.executeObjectIdsQuery(L),N),M=await this._reschedule(()=>M.executeTimeQuery(L),N),M=await this._reschedule(()=>M.executeAttributesQuery(L),N)}catch(S){if(S!==r.QUERY_ENGINE_EMPTY_RESULT)throw S;M=new v([],null,this)}return M.createQueryResponse(L)};J.executeQueryForCount=async function(F={},N){let L=m.clone(F),M;L.returnGeometry=!1;L.returnCentroid=
!1;L.outSR=null;try{L=await this._schedule(()=>r.normalizeQuery(L,this.definitionExpression,this.spatialReference),N),L=await this._reschedule(()=>this._checkQuerySupport(L),N),M=await this._reschedule(()=>this._executeGeometryQuery(L,N),N),M=await this._reschedule(()=>M.executeAggregateIdsQuery(L),N),M=await this._reschedule(()=>M.executeObjectIdsQuery(L),N),M=await this._reschedule(()=>M.executeTimeQuery(L),N),M=await this._reschedule(()=>M.executeAttributesQuery(L),N)}catch(S){if(S!==r.QUERY_ENGINE_EMPTY_RESULT)throw S;
return 0}return M.createQueryResponseForCount(L)};J.executeQueryForExtent=async function(F={},N){let L=m.clone(F),M;F=L.outSR;try{L=await this._schedule(()=>r.normalizeQuery(L,this.definitionExpression,this.spatialReference),N);L=await this._reschedule(()=>this._checkQuerySupport(L),N);L.returnGeometry=!0;L.returnCentroid=!1;L.outSR=null;M=await this._reschedule(()=>this._executeGeometryQuery(L,N),N);M=await this._reschedule(()=>M.executeAggregateIdsQuery(L),N);M=await this._reschedule(()=>M.executeObjectIdsQuery(L),
N);M=await this._reschedule(()=>M.executeTimeQuery(L),N);M=await this._reschedule(()=>M.executeAttributesQuery(L),N);const S=M.size;if(!S)return{count:S,extent:null};a.set(H,a.NEGATIVE_INFINITY);this.featureStore.forEachBounds(M.items,W=>a.expandWithAABB(H,W),G);const Q={xmin:H[0],ymin:H[1],xmax:H[3],ymax:H[4],spatialReference:r.cleanFromGeometryEngine(this.spatialReference)};this.hasZ&&isFinite(H[2])&&isFinite(H[5])&&(Q.zmin=H[2],Q.zmax=H[5]);const U=c.project(Q,M.spatialReference,F);U.spatialReference=
r.cleanFromGeometryEngine(F||this.spatialReference);if(0===U.xmax-U.xmin){const W=e.getMetersPerUnitForSR(U.spatialReference);U.xmin-=W;U.xmax+=W}if(0===U.ymax-U.ymin){const W=e.getMetersPerUnitForSR(U.spatialReference);U.ymin-=W;U.ymax+=W}if(this.hasZ&&null!=U.zmin&&null!=U.zmax&&0===U.zmax-U.zmin){const W=e.getMetersPerUnitForSR(U.spatialReference);U.zmin-=W;U.zmax+=W}return{count:S,extent:U}}catch(S){if(S===r.QUERY_ENGINE_EMPTY_RESULT)return{count:0,extent:null};throw S;}};J.executeQueryForIds=
async function(F={},N){return this.executeQueryForIdSet(F,N).then(L=>Array.from(L))};J.executeQueryForIdSet=async function(F={},N){let L=m.clone(F),M;L.returnGeometry=!1;L.returnCentroid=!1;L.outSR=null;try{L=await this._schedule(()=>r.normalizeQuery(L,this.definitionExpression,this.spatialReference),N);L=await this._reschedule(()=>this._checkQuerySupport(L),N);M=await this._reschedule(()=>this._executeGeometryQuery(L,N),N);M=await this._reschedule(()=>M.executeAggregateIdsQuery(L),N);M=await this._reschedule(()=>
M.executeObjectIdsQuery(L),N);M=await this._reschedule(()=>M.executeTimeQuery(L),N);M=await this._reschedule(()=>M.executeAttributesQuery(L),N);const S=M.items,Q=new Set;await this._reschedule(()=>{for(const U of S)Q.add(M.featureAdapter.getObjectId(U))},N);return Q}catch(S){if(S===r.QUERY_ENGINE_EMPTY_RESULT)return new Set;throw S;}};J.executeQueryForSnapping=async function(F,N){const {point:L,distance:M,types:S}=F;if(0===S)return{candidates:[]};const Q=await this._reschedule(()=>this._checkQuerySupport(F.query),
N),U=!x.equals(L.spatialReference,this.spatialReference);U&&await c.checkProjectionSupport(L.spatialReference,this.spatialReference);var W="number"===typeof M?M:M.x,fa="number"===typeof M?M:M.y;W={xmin:L.x-W,xmax:L.x+W,ymin:L.y-fa,ymax:L.y+fa,spatialReference:L.spatialReference};W=U?c.project(W,this.spatialReference):W;if(!W)return{candidates:[]};fa=(await l.normalizeCentralMeridian(h.fromJSON(L),null,{signal:N}))[0];const Z=(await l.normalizeCentralMeridian(h.fromJSON(W),null,{signal:N}))[0];if(z.isNone(fa)||
z.isNone(Z))return{candidates:[]};let T=new v(this._searchFeatures(this._getQueryBBoxes(Z.toJSON())),null,this);T=await this._reschedule(()=>T.executeObjectIdsQuery(Q),N);T=await this._reschedule(()=>T.executeTimeQuery(Q),N);T=await this._reschedule(()=>T.executeAttributesQuery(Q),N);N=fa.toJSON();N=U?c.project(N,this.spatialReference):N;return T.createSnappingResponse({...F,point:N,distance:U?Math.max(W.xmax-W.xmin,W.ymax-W.ymin)/2:M},L.spatialReference)};J.executeQueryForLatestObservations=async function(F=
{},N){if(!this.timeInfo||!this.timeInfo.trackIdField)throw new y("feature-store:unsupported-query","Missing timeInfo or timeInfo.trackIdField",{query:F,timeInfo:this.timeInfo});let L=m.clone(F),M;try{L=await this._schedule(()=>r.normalizeQuery(L,this.definitionExpression,this.spatialReference),N),L=await this._reschedule(()=>this._checkQuerySupport(L),N),M=await this._reschedule(()=>this._executeGeometryQuery(L,N),N),M=await this._reschedule(()=>M.executeAggregateIdsQuery(L),N),M=await this._reschedule(()=>
M.executeObjectIdsQuery(L),N),M=await this._reschedule(()=>M.executeTimeQuery(L),N),M=await this._reschedule(()=>M.executeAttributesQuery(L),N),M=await this._reschedule(()=>M.filterLatest(),N)}catch(S){if(S!==r.QUERY_ENGINE_EMPTY_RESULT)throw S;M=new v([],null,this)}return M.createQueryResponse(L)};J._schedule=async function(F,N){return this._frameQueue?this._frameQueue.push(F,N):F()};J._reschedule=async function(F,N){return this._frameQueue?this._frameQueue.unshift(F,N):F()};J._update=function(F){for(this._budget=
F;!F.done&&this._frameQueue&&this._frameQueue.process();)F.madeProgress();this._budget=null};J._getAll=function(){if(!this._allItems){const F=[];this.featureStore.forEach(N=>F.push(N));this._allItems=new v(F,null,this)}return this._allItems};J._executeGeometryQuery=async function(F,N){const {geometry:L,outSR:M,spatialRel:S,returnGeometry:Q,returnCentroid:U}=F,W=Q||U,fa=x.isValid(M)&&!x.equals(this.spatialReference,M),Z=this._geometryQueryCache?fa&&W?JSON.stringify({geometry:L,spatialRelationship:S,
outSpatialReference:M}):JSON.stringify({geometry:L,spatialRelationship:S}):null;if(Z){var T=this._geometryQueryCache.get(Z);if(!z.isUndefined(T))return T}T=async ua=>{if(fa&&W)return ua=await ua.project(M),Z&&this._geometryQueryCache.put(Z,ua,ua.size||1),ua;Z&&this._geometryQueryCache.put(Z,ua,ua.size||1);return ua};if(!L)return T(this._getAll());const ba=this.featureAdapter;if("esriSpatialRelDisjoint"===S){F=this._searchFeatures(this._getQueryBBoxes(L));if(!F.length)return T(this._getAll());let ua,
O;const V=new Set;for(var ha of F)V.add(ba.getObjectId(ha));await this._reschedule(()=>{let ja=0;ua=Array(V.size);this.featureStore.forEach(R=>ua[ja++]=R);O=V},N);F=await this._reschedule(async()=>{const ja=await u.getSpatialQueryOperator(S,L,this.geometryType,this.hasZ,this.hasM);return new v(await this._runSpatialFilter(ua,R=>!O.has(ba.getObjectId(R))||ja(ba.getGeometry(R)),N),L,this)},N);return T(F)}ha=this._searchFeatures(this._getQueryBBoxes(L));if(!ha.length)return T=new v([],L,this),Z&&this._geometryQueryCache.put(Z,
T,T.size||1),T;if(this._canExecuteSoloPass(L,F))return T(new v(ha,L,this));const sa=await u.getSpatialQueryOperator(S,L,this.geometryType,this.hasZ,this.hasM);F=await this._runSpatialFilter(ha,ua=>sa(ba.getGeometry(ua)),N);return T(new v(F,L,this))};J._runSpatialFilter=async function(F,N,L){if(!N)return F;if(!this._budget)return F.filter(U=>N(U));let M=0;const S=[],Q=async()=>{for(;M<F.length;){const U=F[M];N(U)&&S.push(U);this._budget.done&&await this._reschedule(()=>Q(),L);++M}};return this._reschedule(()=>
Q(),L).then(()=>S)};J._canExecuteSoloPass=function(F,N){const {geometryType:L}=this;({spatialRel:N}=N);return u.canQueryWithRBush(F)&&("esriSpatialRelEnvelopeIntersects"===N||"esriGeometryPoint"===L&&("esriSpatialRelIntersects"===N||"esriSpatialRelContains"===N||"esriSpatialRelWithin"===N))};J._getQueryBBoxes=function(F){if(u.canQueryWithRBush(F)){if(h.isExtent(F))return[p.fromValues(F.xmin,F.ymin,F.xmax,F.ymax)];if(h.isPolygon(F))return F.rings.map(N=>p.fromValues(Math.min(N[0][0],N[2][0]),Math.min(N[0][1],
N[2][1]),Math.max(N[0][0],N[2][0]),Math.max(N[0][1],N[2][1])))}return[f.getBoundsXY(p.create(),F)]};J._searchFeatures=function(F){for(const M of F)this.featureStore.forEachInBounds(M,S=>{B.add(S)});const N=Array(B.size);let L=0;B.forEach(M=>N[L++]=M);B.clear();return N};J._checkQuerySupport=async function(F){if(0>F.distance||null!=F.geometryPrecision||F.multipatchOption||F.pixelSize||F.relationParam||F.text)throw new y("feature-store:unsupported-query","Unsupported query options",{query:F});return Promise.all([this._checkAttributesQuerySupport(F),
this._checkStatisticsQuerySupport(F),u.checkSpatialQuerySupport(F,this.geometryType,this.spatialReference),c.checkProjectionSupport(this.spatialReference,F.outSR)]).then(()=>F)};J._checkAttributesQuerySupport=function(F){const {outFields:N,orderByFields:L,returnDistinctValues:M,outStatistics:S}=F,Q=S?S.map(U=>U.outStatisticFieldName&&U.outStatisticFieldName.toLowerCase()):[];if(L&&0<L.length){const U=L.map(W=>{const fa=W.toLowerCase();return-1<fa.indexOf(" asc")?fa.split(" asc")[0]:-1<fa.indexOf(" desc")?
fa.split(" desc")[0]:W}).filter(W=>-1===Q.indexOf(W));g.validateFields(this.fieldsIndex,U,"orderByFields contains missing fields")}if(N&&0<N.length)g.validateFields(this.fieldsIndex,N,"outFields contains missing fields");else if(M)throw new y("feature-store:unsupported-query","outFields should be specified for returnDistinctValues",{query:F});g.validateWhere(this.fieldsIndex,F.where)};J._checkStatisticsQuerySupport=async function(F){const {outStatistics:N,groupByFieldsForStatistics:L,having:M}=F;
var S=L&&L.length,Q=N&&N.length;if(M){if(!S||!Q)throw new y("feature-store:unsupported-query","outStatistics and groupByFieldsForStatistics should be specified with having",{query:F});g.validateHaving(this.fieldsIndex,M,N)}if(Q&&D(N)){Q=N.map(U=>U.onStatisticField);g.validateFields(this.fieldsIndex,Q,"onStatisticFields contains missing fields");S&&g.validateFields(this.fieldsIndex,L,"groupByFieldsForStatistics contains missing fields");for(const U of N){const {onStatisticField:W,statisticType:fa}=
U;if(("percentile_disc"===fa||"percentile_cont"===fa)&&"statisticParameters"in U){if({statisticParameters:S}=U,!S)throw new y("feature-store:unsupported-query","statisticParamters should be set for percentile type",{definition:U,query:F});}else if("count"!==fa&&W&&g.hasInvalidFieldType(W,this.fieldsIndex))throw new y("feature-store:unsupported-query","outStatistics contains non-numeric fields",{definition:U,query:F});}}};k._createClass(K,[{key:"featureAdapter",get:function(){return this.featureStore.featureAdapter}},
{key:"fullExtent",get:function(){const F=this.featureStore.fullBounds;return F?{xmin:F[0],ymin:F[1],xmax:F[2],ymax:F[3],spatialReference:r.cleanFromGeometryEngine(this.spatialReference)}:null}},{key:"timeExtent",get:function(){return this.timeInfo?this._timeExtent?this._timeExtent:this._timeExtent=w.getTimeExtent(this.timeInfo,this.featureStore):null}}]);return K}();const G=a.create(),H=a.create();t.Feature=function(K,J=null,F,N,L){this.attributes=K;this.geometry=F;this.centroid=N;this.filterFlags=
L;this.groupId=-1;this.displayId=J};t.default=E;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/geometry/support/normalizeUtils":function(){define("exports ../../config ../../core/maybe ../../core/Logger ../../core/Error ./spatialReferenceUtils ./webMercatorUtils ../Polygon ../Polyline ./normalizeUtilsCommon ../../tasks/geometry/cut ../../tasks/geometry/simplify".split(" "),function(t,k,m,z,y,x,f,h,e,l,q,p){function n(u){const w=[];let v=0,D=0;for(let B=0;B<u.length;B++){const C=u[B];let A=
null;for(let E=0;E<C.length;E++)A=C[E],w.push(A),0===E?D=v=A[0]:(v=Math.min(v,A[0]),D=Math.max(D,A[0]));A&&w.push([(v+D)/2,0])}return w}function d(u,w){if(!(u instanceof e||u instanceof h))throw r.error("straightLineDensify: the input geometry is neither polyline nor polygon"),new y("straightLineDensify: the input geometry is neither polyline nor polygon");var v=l.getGeometryParts(u);const D=[];for(const C of v){v=[];D.push(v);v.push([C[0][0],C[0][1]]);for(let A=0;A<C.length-1;A++){const E=C[A][0],
G=C[A][1],H=C[A+1][0],K=C[A+1][1];var B=Math.sqrt((H-E)*(H-E)+(K-G)*(K-G));const J=(K-G)/B,F=(H-E)/B,N=B/w;if(1<N){for(let L=1;L<=N-1;L++){const M=L*w;v.push([F*M+E,J*M+G])}B=(B+Math.floor(N-1)*w)/2;v.push([F*B+E,J*B+G])}v.push([H,K])}}return"polygon"===u.type?new h({rings:D,spatialReference:u.spatialReference}):new e({paths:D,spatialReference:u.spatialReference})}function b(u,w,v){w&&(u=d(u,1E6),u=f.webMercatorToGeographic(u,!0));v&&(u=l.updatePolyGeometry(u,v));return u}function a(u,w,v){if(Array.isArray(u)){var D=
u[0];D>w?(v=l.offsetMagnitude(D,w),u[0]=D+-2*v*w):D<v&&(w=l.offsetMagnitude(D,v),u[0]=D+-2*w*v)}else D=u.x,D>w?(v=l.offsetMagnitude(D,w),u=u.clone().offset(-2*v*w,0)):D<v&&(w=l.offsetMagnitude(D,v),u=u.clone().offset(-2*w*v,0));return u}function c(u,w){let v=-1;for(let D=0;D<w.cutIndexes.length;D++){const B=w.cutIndexes[D],C=w.geometries[D],A=l.getGeometryParts(C);for(let E=0;E<A.length;E++){const G=A[E];G.some(H=>{if(180>H[0])return!0;H=0;for(var K=0;K<G.length;K++){var J=G[K][0];H=J>H?J:H}H=Number(H.toFixed(9));
H=-360*l.offsetMagnitude(H,180);for(K=0;K<G.length;K++)J=C.getPoint(E,K),C.setPoint(E,K,J.clone().offset(H,0));return!0})}if(B===v)if("polygon"===u[0].type)for(const E of l.getGeometryParts(C))u[B]=u[B].addRing(E);else{if("polyline"===u[0].type)for(const E of l.getGeometryParts(C))u[B]=u[B].addPath(E)}else v=B,u[B]=C}return u}async function g(u,w,v){if(!Array.isArray(u))return g([u],w);var D=w?w.url:k.geometryServiceUrl;let B,C,A;let E=0;var G=[];w=[];for(var H of u)if(m.isNone(H))w.push(H);else{if(!K){var K=
H.spatialReference;var J=x.getInfo(K);var F=(B=K.isWebMercator)?102100:4326;C=l.cutParams[F].maxX;A=l.cutParams[F].minX;var N=l.cutParams[F].plus180Line;F=l.cutParams[F].minus180Line}if(J)if("mesh"===H.type)w.push(H);else if("point"===H.type)w.push(a(H.clone(),C,A));else if("multipoint"===H.type){var L=H.clone();L.points=L.points.map(M=>a(M,C,A));w.push(L)}else if("extent"===H.type)L=H.clone()._normalize(!1,!1,J),w.push(L.rings?new h(L):L);else if(H.extent){L=H.extent;const M=2*l.offsetMagnitude(L.xmin,
A)*C;let S=0===M?H.clone():l.updatePolyGeometry(H.clone(),M);L.offset(M,0);L.intersects(N)&&L.xmax!==C?(E=L.xmax>E?L.xmax:E,S=b(S,B),G.push(S),w.push("cut")):L.intersects(F)&&L.xmin!==A?(E=2*L.xmax*C>E?2*L.xmax*C:E,S=b(S,B,360),G.push(S),w.push("cut")):w.push(S)}else w.push(H.clone());else w.push(H)}K=l.offsetMagnitude(E,C);J=-90;N=K;for(H=new e;0<K;)F=-180+360*K,H.addPath([[F,J],[F,-1*J]]),J*=-1,K--;if(0<G.length&&0<N){K=await q.cut(D,G,H,v);K=c(G,K);J=[];G=[];for(N=0;N<w.length;N++)H=w[N],"cut"!==
H?G.push(H):(H=K.shift(),F=u[N],m.isSome(F)&&"polygon"===F.type&&F.rings&&1<F.rings.length&&H.rings.length>=F.rings.length?(J.push(H),G.push("simplify")):G.push(B?f.geographicToWebMercator(H):H));if(!J.length)return G;w=await p.simplify(D,J,v);u=[];for(v=0;v<G.length;v++)D=G[v],"simplify"!==D?u.push(D):u.push(B?f.geographicToWebMercator(w.shift()):w.shift());return u}u=[];for(v=0;v<w.length;v++)D=w[v],"cut"!==D?u.push(D):(D=G.shift(),u.push(!0===B?f.geographicToWebMercator(D):D));return Promise.resolve(u)}
const r=z.getLogger("esri.geometry.support.normalizeUtils");t.getDenormalizedExtent=function(u){if(!u)return null;const w=u.extent;if(!w)return null;var v=u.spatialReference&&x.getInfo(u.spatialReference);if(!v)return w;const [D,B]=v.valid;({width:v}=w);let {xmin:C,xmax:A}=w;[C,A]=[A,C];if("extent"===u.type||0===v||v<=B||v>2*B||C<D||A>B)return w;let E;switch(u.type){case "polygon":if(1<u.rings.length)E=n(u.rings);else return w;break;case "polyline":if(1<u.paths.length)E=n(u.paths);else return w;break;
case "multipoint":E=u.points}u=w.clone();for(let G=0;G<E.length;G++){let H=E[G][0];0>H?(H+=B,A=Math.max(H,A)):(H-=B,C=Math.min(H,C))}u.xmin=C;u.xmax=A;return u.width<v?(u.xmin-=B,u.xmax-=B,u):w};t.normalizeCentralMeridian=g;t.normalizeMapX=function(u,w){if(w=x.getInfo(w)){const [v,D]=w.valid;w=D-v;if(u<v)for(;u<v;)u+=w;if(u>D)for(;u>D;)u-=w}return u};t.straightLineDensify=d;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/geometry/support/normalizeUtilsCommon":function(){define(["exports",
"../SpatialReference","../Polyline","./jsonUtils"],function(t,k,m,z){function y(f){return z.isPolygon(f)?f.rings:f.paths}const x={102100:{maxX:2.0037508342788905E7,minX:-2.0037508342788905E7,plus180Line:new m({paths:[[[2.0037508342788905E7,-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:k.WebMercator}),minus180Line:new m({paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:k.WebMercator})},4326:{maxX:180,
minX:-180,plus180Line:new m({paths:[[[180,-180],[180,180]]],spatialReference:k.WGS84}),minus180Line:new m({paths:[[[-180,-180],[-180,180]]],spatialReference:k.WGS84})}};t.cutParams=x;t.getGeometryParts=y;t.getSpatialReferenceMinMaxX=function(f){f=(null==f?0:f.isWebMercator)?102100:4326;return[x[f].minX,x[f].maxX]};t.offsetMagnitude=function(f,h){return Math.ceil((f-h)/(2*h))};t.updatePolyGeometry=function(f,h){const e=y(f);for(const l of e)for(const q of l)q[0]+=h;return f};Object.defineProperty(t,
"__esModule",{value:!0})})},"esri/tasks/geometry/cut":function(){define(["exports","../../core/urlUtils","../../geometry/support/jsonUtils","../../geometry","../../request"],function(t,k,m,z,y){t.cut=async function(x,f,h,e){x="string"===typeof x?k.urlToObject(x):x;const l=f[0].spatialReference;f={...e,query:{...x.query,f:"json",sr:JSON.stringify(l),target:JSON.stringify({geometryType:m.getJsonType(f[0]),geometries:f}),cutter:JSON.stringify(h)}};f=await y(x.path+"/cut",f);const {cutIndexes:q,geometries:p=
[]}=f.data;return{cutIndexes:q,geometries:p.map(n=>{n=m.fromJSON(n);n.spatialReference=l;return n})}};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/request":function(){define("require ./core/global ./core/has ./core/lang ./config ./core/maybe ./core/Error ./core/urlUtils ./core/promiseUtils ./kernel ./support/apiKeyUtils ./support/requestUtils".split(" "),function(t,k,m,z,y,x,f,h,e,l,q,p){async function n(M,S){var Q=h.isDataProtocol(M);const U=h.isBlobProtocol(M);U||Q||(M=h.normalize(M));
const W={url:M,requestOptions:{...x.unwrap(S)}};let fa=h.getInterceptor(M);if(fa){M=await v(fa,W);if(null!=M)return{data:M,getHeader:L,requestOptions:W.requestOptions,url:W.url};fa.after||fa.error||(fa=null)}M=W.url;S=W.requestOptions;if("image"===S.responseType){if(m("host-webworker")||m("host-node"))throw a("request:invalid-parameters",Error("responseType 'image' is not supported in Web Workers or Node environment"),W);}else if(Q)throw a("request:invalid-parameters",Error("Data URLs are not supported for responseType \x3d "+
S.responseType),W);if("head"===S.method){if(S.body)throw a("request:invalid-parameters",Error("body parameter cannot be set when method is 'head'"),W);if(Q||U)throw a("request:invalid-parameters",Error("data and blob URLs are not supported for method 'head'"),W);}await c();if(G)return G.execute(M,S);const Z=e.createAbortController();e.onAbort(S,()=>Z.abort());Q=await C({controller:Z,credential:null,credentialToken:null,fetchOptions:null,hasToken:!1,interceptor:fa,params:W,redoRequest:!1,useIdentity:H.useIdentity,
useProxy:!1,useSSL:!1,withCredentials:!1});fa&&fa.after&&fa.after(Q);return Q}function d(M){h.isBlobProtocol(M)||h.isDataProtocol(M)||(M=h.getOrigin(M))&&-1===n._corsServers.indexOf(M)&&n._corsServers.push(M)}function b(M){M=h.getOrigin(M);return!M||M.endsWith(".arcgis.com")||-1!==n._corsServers.indexOf(M)||h.isTrustedServer(M)}function a(M,S,Q,U){let W="Error";const fa={url:Q.url,requestOptions:Q.requestOptions,getHeader:L,ssl:!1};if(S instanceof f)return S.details?(S.details=z.clone(S.details),
S.details.url=Q.url,S.details.requestOptions=Q.requestOptions):S.details=fa,S;if(S){Q=U&&(ba=>U.headers.get(ba));const Z=U&&U.status,T=S.message;T&&(W=T);Q&&(fa.getHeader=Q);fa.httpStatus=(null!=S.httpCode?S.httpCode:S.code)||Z||0;fa.subCode=S.subcode;fa.messageCode=S.messageCode;fa.messages="string"===typeof S.details?[S.details]:S.details}return e.isAbortError(S)?e.createAbortError():new f(M,W,fa)}async function c(){m("host-webworker")?G||(G=await new Promise(function(M,S){t(["./core/workers/request"],
M,S)})):n._abortableFetch||(n._abortableFetch=k.fetch.bind(k))}async function g(){l.id||await new Promise(function(M,S){t(["./identity/IdentityManager"],function(Q){M(Object.freeze({__proto__:null,"default":Q}))},S)})}async function r(M){const S=M.params.url,Q=M.params.requestOptions,U=M.controller.signal,W=Q.body;let fa=null,Z=null,T=null;K&&"HTMLFormElement"in k&&(W instanceof FormData?fa=W:W instanceof HTMLFormElement&&(Z=W,fa=new FormData(Z)));"string"===typeof W&&(T=W);M.fetchOptions={cache:Q.cacheBust&&
!n._abortableFetch.polyfill?"no-cache":"default",credentials:"same-origin",headers:Q.headers||{},method:"head"===Q.method?"HEAD":"GET",mode:"cors",redirect:"follow",signal:U};if(fa||T)M.fetchOptions.body=fa||T;"anonymous"===Q.authMode&&(M.useIdentity=!1);M.hasToken=!!(/token=/i.test(S)||Q.query&&Q.query.token||fa&&fa.get&&fa.get("token")||Z&&Z.elements.token);!M.hasToken&&y.apiKey&&q.supportsApiKey(S)&&(Q.query||(Q.query={}),Q.query.token=y.apiKey,M.hasToken=!0);if(M.useIdentity&&!M.hasToken&&!M.credentialToken&&
!u(S)&&!e.isAborted(U)){let ba;"immediate"===Q.authMode?(await g(),ba=await l.id.getCredential(S,{signal:U}),M.credential=ba):"no-prompt"===Q.authMode?(await g(),ba=await l.id.getCredential(S,{prompt:!1,signal:U}).catch(()=>{}),M.credential=ba):l.id&&(ba=l.id.findCredential(S));ba&&(M.credentialToken=ba.token,M.useSSL=!!ba.ssl)}}function u(M){return N.some(S=>S.test(M))}async function w(M){let S=M.params.url;const Q=M.params.requestOptions,U=M.fetchOptions,W=h.isBlobProtocol(S)||h.isDataProtocol(S),
fa=Q.responseType||"json",Z=W?0:null!=Q.timeout?Q.timeout:H.timeout;var T=!1;if(!W){M.useSSL&&(S=h.toHTTPS(S));Q.cacheBust&&"default"===U.cache&&(S=h.addQueryParameter(S,"request.preventCache",Date.now()));var ba={...Q.query};M.credentialToken&&(ba.token=M.credentialToken);T=h.objectToQuery(ba);m("esri-url-encodes-apostrophe")&&(T=T.replace(/'/g,"%27"));const V=S.length+1+T.length;T="delete"===Q.method||"post"===Q.method||"put"===Q.method||!!Q.body||V>H.maxUrlLength;const ja=Q.useProxy||!!h.getProxyRule(S);
if(ja){const R=h.getProxyUrl(S);var ha=R.path;!T&&ha.length+1+V>H.maxUrlLength&&(T=!0);R.query&&(ba={...R.query,...ba})}if("HEAD"===U.method&&(T||ja)){if(T){if(V>H.maxUrlLength)throw a("request:invalid-parameters",Error("URL exceeds maximum length"),M.params);throw a("request:invalid-parameters",Error("cannot use POST request when method is 'head'"),M.params);}if(ja)throw a("request:invalid-parameters",Error("cannot use proxy when method is 'head'"),M.params);}T?(U.method="delete"===Q.method?"DELETE":
"put"===Q.method?"PUT":"POST",Q.body?S=h.addQueryParameters(S,ba):(U.body=h.objectToQuery(ba),U.headers["Content-Type"]="application/x-www-form-urlencoded")):S=h.addQueryParameters(S,ba);ja&&(M.useProxy=!0,S=`${ha}?${S}`);ba.token&&K&&U.body instanceof FormData&&(ha=U.body,ha.set?ha.set("token",ba.token):ha.append("token",ba.token));Q.hasOwnProperty("withCredentials")?M.withCredentials=Q.withCredentials:h.hasSameOrigin(S,h.appUrl)||(h.isTrustedServer(S)?M.withCredentials=!0:l.id&&(ba=l.id.findServerInfo(S))&&
ba.webTierAuth&&(M.withCredentials=!0));M.withCredentials&&(U.credentials="include")}ba=0;let sa=!1;0<Z&&(ba=setTimeout(()=>{sa=!0;M.controller.abort()},Z));let ua,O;try{if("image"!==Q.responseType||"default"!==U.cache||"GET"!==U.method||T||D(Q.headers)||!W&&!M.useProxy&&H.proxyUrl&&!b(S)){if(ua=await n._abortableFetch(S,U),M.useProxy||d(S),ua.ok&&"HEAD"!==U.method){switch(fa){case "array-buffer":O=await ua.arrayBuffer();break;case "blob":case "image":O=await ua.blob();break;default:O=await ua.text()}ba&&
(clearTimeout(ba),ba=0);if("json"===fa||"xml"===fa||"document"===fa)if(O)switch(fa){case "json":O=JSON.parse(O);break;case "xml":O=B(O,"application/xml");break;case "document":O=B(O,"text/html")}else O=null;if(O){if("array-buffer"===fa||"blob"===fa){const V=ua.headers.get("Content-Type");if(/application\/json|text\/plain/i.test(V)&&750>=O["blob"===fa?"size":"byteLength"])try{const ja=await (new Response(O)).json();ja.error&&(O=ja)}catch{}}"image"===fa&&O instanceof Blob&&(O=await E(URL.createObjectURL(O),
M,!0))}}}else O=await E(S,M)}catch(V){if("AbortError"===V.name){if(sa)throw Error("Timeout exceeded");throw e.createAbortError("Request canceled");}if(!ua&&V instanceof TypeError&&H.proxyUrl&&!Q.body&&"delete"!==Q.method&&"head"!==Q.method&&"post"!==Q.method&&"put"!==Q.method&&!M.useProxy)M.redoRequest=!0,h.addProxyRule({proxyUrl:H.proxyUrl,urlPrefix:h.removeFile(h.urlToObject(S).path)});else throw V;}finally{ba&&clearTimeout(ba)}return[ua,O]}async function v(M,S){if(null!=M.responseData)return M.responseData;
M.headers&&(S.requestOptions.headers={...S.requestOptions.headers,...M.headers});M.query&&(S.requestOptions.query={...S.requestOptions.query,...M.query});if(M.before){let Q,U;try{U=await M.before(S)}catch(W){Q=a("request:interceptor",W,S)}if(U instanceof Error||U instanceof f)Q=a("request:interceptor",U,S);if(Q)throw M.error&&M.error(Q),Q;return U}}function D(M){if(M)for(const S of Object.getOwnPropertyNames(M))if(M[S])return!0;return!1}function B(M,S){let Q;try{Q=(new DOMParser).parseFromString(M,
S)}catch{}if(!Q||Q.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return Q}async function C(M){await r(M);let S;try{do[S,Q]=await w(M);while(!await A(M,S,Q))}catch(fa){var Q=a("request:server",fa,M.params,S);Q.details.ssl=M.useSSL;M.interceptor&&M.interceptor.error&&M.interceptor.error(Q);throw Q;}var U=M.params.url;/\/sharing\/rest\/(accounts|portals)\/self/i.test(U)&&!M.hasToken&&!M.credentialToken&&Q&&Q.user&&Q.user.username&&!h.isTrustedServer(U)&&(U=h.getOrigin(U,
!0))&&H.trustedServers.push(U);if((U=M.credential)&&l.id){var W=l.id.findServerInfo(U.server);if(W=W&&W.owningSystemUrl)W=W.replace(/\/?$/,"/sharing"),(U=l.id.findCredential(W,U.userId))&&-1===l.id._getIdenticalSvcIdx(W,U)&&U.resources.unshift(W)}return{data:Q,getHeader:S?fa=>S.headers.get(fa):L,requestOptions:M.params.requestOptions,ssl:M.useSSL,url:M.params.url}}async function A(M,S,Q){if(M.redoRequest)return M.redoRequest=!1;if(!S)return!0;if(!S.ok)throw Error(`Unable to load ${S.url} status: ${S.status}`);
let U;Q&&Q.error&&(U=Object.assign(Error(),Q.error));let W,fa,Z;U&&(W=Number(U.code),fa=U.hasOwnProperty("subcode")?Number(U.subcode):null,Z=(Z=U.messageCode)&&Z.toUpperCase());S=M.params.requestOptions.authMode;if(403===W&&(4===fa||U.message&&-1<U.message.toLowerCase().indexOf("ssl")&&-1===U.message.toLowerCase().indexOf("permission"))){if(!M.useSSL)return M.useSSL=!0,!1}else if(!M.hasToken&&M.useIdentity&&("no-prompt"!==S||498===W)&&-1!==J.indexOf(W)&&!u(M.params.url)&&(403!==W||-1===F.indexOf(Z)&&
(null==fa||2===fa&&M.credentialToken))){await g();try{const T=await l.id.getCredential(M.params.url,{error:a("request:server",U,M.params),prompt:"no-prompt"!==S,signal:M.controller.signal,token:M.credentialToken});M.credential=T;M.credentialToken=T.token;M.useSSL=M.useSSL||T.ssl;return!1}catch(T){if("no-prompt"===S)return M.credential=null,M.credentialToken=null,!1;U=T}}if(U)throw U;return!0}function E(M,S,Q=!1){const U=S.controller.signal,W=new Image;W.crossOrigin=S.withCredentials?"use-credentials":
"anonymous";W.alt="";W.src=M;return p.loadImageAsync(W,M,Q,U)}let G;const H=y.request,K="FormData"in k,J=[499,498,403,401],F=["COM_0056","COM_0057","SB_0008"],N=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],L=()=>null;n._abortableFetch=null;n._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"];return n})},"esri/support/apiKeyUtils":function(){define(["exports","../core/urlUtils"],function(t,k){const m=["elevation3d.arcgis.com","js.arcgis.com",
"jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"];t.isApiKey=function(z){return z&&4<z.length&&z.startsWith("AAPK")};t.supportsApiKey=function(z){const y=k.getOrigin(z,!0);return y&&y.endsWith(".arcgis.com")&&!m.includes(y)&&!z.endsWith("/sharing/rest/generateToken")};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/support/requestUtils":function(){define(["exports","../core/has","../core/maybe","../core/promiseUtils"],function(t,k,m,z){function y(){try{return new DOMException("Aborted",
"AbortError")}catch{const x=Error();x.name="AbortError";return x}}t.loadImageAsync=function(x,f,h=!1,e){return new Promise((l,q)=>{if(z.isAborted(e))q(y());else{var p=()=>{b();q(Error(`Unable to load ${f}`))},n=()=>{const a=x;b();l(a)},d=()=>{if(x){var a=x;b();a.src="";q(y())}},b=()=>{k("esri-image-decode")||(x.removeEventListener("error",p),x.removeEventListener("load",n));x=n=p=null;m.isSome(e)&&e.removeEventListener("abort",d);d=null;h&&URL.revokeObjectURL(f)};m.isSome(e)&&e.addEventListener("abort",
d);k("esri-image-decode")?x.decode().then(n,p):(x.addEventListener("error",p),x.addEventListener("load",n))}})};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/tasks/geometry/simplify":function(){define(["exports","../../core/urlUtils","../../geometry/support/jsonUtils","../../request"],function(t,k,m,z){function y(f){return{geometryType:m.getJsonType(f[0]),geometries:f.map(h=>h.toJSON())}}function x(f,h,e){const l=m.getGeometryType(h);return f.map(q=>{q=l.fromJSON(q);q.spatialReference=
e;return q})}t.simplify=async function(f,h,e){const l="string"===typeof f?k.urlToObject(f):f;f=h[0].spatialReference;const q=m.getJsonType(h[0]);h={...e,query:{...l.query,f:"json",sr:f.wkid?f.wkid:JSON.stringify(f),geometries:JSON.stringify(y(h))}};h=await z(l.path+"/simplify",h);return x(h.data,q,f)};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/core/MemCache":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","./PooledArray"],function(t,k,m){let z=function(){function x(h,
e,l){this._namespace=h;this._storage=e;this._removeFunc=!1;this._miss=this._hit=0;this._storage.register(this);this._namespace+=":";l&&(this._storage.registerRemoveFunc(this._namespace,l),this._removeFunc=!0)}var f=x.prototype;f.destroy=function(){this._storage.clear(this._namespace);this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace);this._storage.deregister(this);this._storage=null};f.resetHitRate=function(){this._hit=this._miss=0};f.put=function(h,e,l,q=0){this._storage.put(this._namespace+
h,e,l,q)};f.get=function(h){h=this._storage.get(this._namespace+h);void 0===h?++this._miss:++this._hit;return h};f.pop=function(h){h=this._storage.pop(this._namespace+h);void 0===h?++this._miss:++this._hit;return h};f.updateSize=function(h,e,l){this._storage.updateSize(this._namespace+h,e,l)};f.clear=function(){this._storage.clear(this._namespace)};f.clearAll=function(){this._storage.clearAll()};f.getStats=function(){return this._storage.getStats()};f.resetStats=function(){this._storage.resetStats()};
k._createClass(x,[{key:"namespace",get:function(){return this._namespace.slice(0,-1)}},{key:"hitRate",get:function(){return this._hit/(this._hit+this._miss)}},{key:"size",get:function(){return this._storage.size}},{key:"maxSize",get:function(){return this._storage.maxSize}}]);return x}(),y=function(){function x(h=10485760){this._maxSize=h;this._db=new Map;this._miss=this._hit=this._size=0;this._removeFuncs=new m;this._users=new m}var f=x.prototype;f.destroy=function(){this.clearAll();this._removeFuncs.clear();
this._users.clear();this._db=null};f.register=function(h){this._users.push(h)};f.deregister=function(h){this._users.removeUnordered(h)};f.registerRemoveFunc=function(h,e){this._removeFuncs.push([h,e])};f.deregisterRemoveFunc=function(h){this._removeFuncs.filterInPlace(e=>e[0]!==h)};f.put=function(h,e,l,q){const p=this._db.get(h);p&&(this._size-=p.size,this._db.delete(h),p.entry!==e&&this._notifyRemoved(h,p.entry));l>this._maxSize?this._notifyRemoved(h,e):void 0===e?console.warn("Refusing to cache undefined entry "):
!l||0>l?console.warn("Refusing to cache entry with invalid size "+l):(q=1+Math.max(q,-3)- -3,this._db.set(h,{entry:e,size:l,lifetime:q,lives:q}),this._size+=l,this._checkSizeLimit())};f.updateSize=function(h,e,l){const q=this._db.get(h);q&&q.entry===e&&(this._size-=q.size,l>this._maxSize?(this._db.delete(h),this._notifyRemoved(h,e)):(q.size=l,this._size+=l,this._checkSizeLimit()))};f.pop=function(h){const e=this._db.get(h);if(e)return this._size-=e.size,this._db.delete(h),++this._hit,e.entry;++this._miss};
f.get=function(h){const e=this._db.get(h);if(void 0===e)++this._miss;else return this._db.delete(h),e.lives=e.lifetime,this._db.set(h,e),++this._hit,e.entry};f.getStats=function(){const h={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},e={},l=[];this._db.forEach((n,d)=>{const b=n.lifetime;l[b]=(l[b]||0)+n.size;this._users.forAll(a=>{a=a.namespace;d.startsWith(a)&&(e[a]=(e[a]||0)+n.size)})});
const q={};this._users.forAll(n=>{const d=n.namespace;!isNaN(n.hitRate)&&0<n.hitRate?(e[d]=e[d]||0,q[d]=Math.round(100*n.hitRate)+"%"):q[d]="0%"});var p=Object.keys(e);p.forEach(n=>e[n]=e[n]/this._size*100);p.sort((n,d)=>e[d]-e[n]);p.forEach(n=>h[n]=Math.round(e[n])+"% / "+q[n]);for(p=l.length-1;0<=p;--p){const n=l[p];n&&(h["Priority "+(p+-3-1)]=Math.round(n/this.size*100)+"%")}return h};f.resetStats=function(){this._hit=this._miss=0;this._users.forAll(h=>h.resetHitRate())};f.clear=function(h){this._db.forEach((e,
l)=>{l.startsWith(h)&&(this._size-=e.size,this._db.delete(l),this._notifyRemoved(l,e.entry))})};f.clearAll=function(){this._db.forEach((h,e)=>this._notifyRemoved(e,h.entry));this._size=0;this._db.clear()};f._getHitRate=function(){return this._hit/(this._hit+this._miss)};f._notifyRemoved=function(h,e){this._removeFuncs.forAll(l=>{if(h.startsWith(l[0]))l[1](e)})};f._checkSizeLimit=function(){if(!(this._size<=this._maxSize))for(const [h,e]of this._db)if(this._db.delete(h),1>=e.lives?(this._size-=e.size,
this._notifyRemoved(h,e.entry)):(--e.lives,this._db.set(h,e)),this._size<=.9*this.maxSize)break};k._createClass(x,[{key:"size",get:function(){return this._size}},{key:"maxSize",get:function(){return this._maxSize},set:function(h){this._maxSize=Math.max(h,0);this._checkSizeLimit()}}]);return x}();t.MIN_PRIORITY=-3;t.MemCache=z;t.MemCacheStorage=y;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/layers/graphics/data/QueryEngineCapabilities":function(){define(["exports"],function(t){t.queryCapabilities=
{supportsStatistics:!0,supportsPercentileStatistics:!0,supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,
supportsDisjointSpatialRelationship:!0,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/layers/graphics/data/projectionSupport":function(){define(["exports","../../../geometry/support/spatialReferenceUtils","../../../geometry/support/webMercatorUtils","../../../geometry/projection","../../../geometry/geometryAdapters/json"],function(t,k,m,z,y){function x(n,d){if(!d)return null;if("x"in
d){var b={x:0,y:0};[b.x,b.y]=n(d.x,d.y,e);null!=d.z&&(b.z=d.z);null!=d.m&&(b.m=d.m);return b}if("xmin"in d)return b={xmin:0,ymin:0,xmax:0,ymax:0},[b.xmin,b.ymin]=n(d.xmin,d.ymin,e),[b.xmax,b.ymax]=n(d.xmax,d.ymax,e),d.hasZ&&(b.zmin=d.zmin,b.zmax=d.zmax,b.hasZ=!0),d.hasM&&(b.mmin=d.mmin,b.mmax=d.mmax,b.hasM=!0),b;if("rings"in d)return{rings:f(d.rings,n),hasM:d.hasM,hasZ:d.hasZ};if("paths"in d)return{paths:f(d.paths,n),hasM:d.hasM,hasZ:d.hasZ};if("points"in d)return{points:h(d.points,n),hasM:d.hasM,
hasZ:d.hasZ}}function f(n,d){const b=[];for(const a of n)b.push(h(a,d));return b}function h(n,d){const b=[];for(const a of n)n=d(a[0],a[1],[0,0]),b.push(n),2<a.length&&n.push(a[2]),3<a.length&&n.push(a[3]);return b}const e=[0,0],l=x.bind(null,m.lngLatToXY),q=x.bind(null,m.xyToLngLat),p=new (function(){function n(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}var d=n.prototype;d.push=async function(b,a,c){b&&b.length&&a&&c&&k.equals(a,c);const g={geometries:b,inSpatialReference:a,
outSpatialReference:c,resolve:null};this._jobs.push(g);return new Promise(r=>{g.resolve=r;null===this._timer&&(this._timer=setTimeout(this._process,10))})};d._process=function(){this._timer=null;const b=this._jobs.shift();if(b){var {geometries:a,inSpatialReference:c,outSpatialReference:g,resolve:r}=b;m.canProject(c,g)?k.isWebMercator(g)?r(a.map(l)):r(a.map(q)):r(z.projectMany(y.jsonAdapter,a,c,g,null));0<this._jobs.length&&(this._timer=setTimeout(this._process,10))}};return n}());t.checkProjectionSupport=
async function(n,d){d&&(n=Array.isArray(n)?n.map(b=>{var a;return null==(a=b.geometry)?void 0:a.spatialReference}):[n],await z.initializeProjection(n.map(b=>({source:b,dest:d}))))};t.project=function(n,d,b){if(!n)return n;b||(b=d,d=n.spatialReference);return k.isValid(d)&&k.isValid(b)&&!k.equals(d,b)?m.canProject(d,b)?k.isWebMercator(b)?l(n):q(n):z.projectMany(y.jsonAdapter,[n],d,b,null)[0]:n};t.projectMany=async function(n,d,b){return p.push(n,d,b)};Object.defineProperty(t,"__esModule",{value:!0})})},
"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/maybe ../core/Error ../core/promiseUtils ./support/spatialReferenceUtils ./support/Ellipsoid ./Point ./Extent ./Multipoint ./Polygon ./Polyline ../core/mathUtils ../chunks/vec3f64 ../chunks/vec3 ./projectionEllipsoid ../core/unitUtils ../chunks/mat4 ../chunks/pe ./support/aaBoundingRect ./support/geodesicConstants ./support/GeographicTransformation".split(" "),function(t,k,m,z,y,x,f,h,e,l,q,p,
n,d,b,a,c,g,r,u,w,v,D){function B(){return!!Ga&&u.isLoaded()}function C(ma){z.isNone(Ha)&&(Ha=Promise.all([u.load(),(new Promise(function(pa,oa){t(["../chunks/geometryEngineBase"],pa,oa)})).then(function(pa){return pa.geometryEngineBase}),new Promise(function(pa,oa){t(["./geometryAdapters/hydrated"],pa,oa)})]));return Ha.then(([,pa,{hydratedAdapter:oa}])=>{x.throwIfAborted(ma);Ja=oa;Ga=pa.default;Ga._enableProjection(u.pe)})}function A(ma,pa,oa,ta,Da=null){if(z.isNone(oa)||z.isNone(ta))return pa;
if(G(oa,ta,Da))return pa.map(Ea=>H(Ea,oa,ta));if(z.isNone(Da)){const Ea=D.cacheKey(oa,ta);void 0!==Ia[Ea]?Da=Ia[Ea]:(Da=E(oa,ta,null),z.isNone(Da)&&(Da=new D),Ia[Ea]=Da)}if(z.isNone(Ga))throw new Sa;return Ga._project(ma,pa,oa,ta,Da)}function E(ma,pa,oa=null){if(z.isNone(Ga))throw new Sa;if(z.isNone(ma)||z.isNone(pa))return null;ma=Ga._getTransformation(Ja,ma,pa,oa,null==oa?void 0:oa.spatialReference);return null!==ma?D.fromGE(ma):null}function G(ma,pa,oa){return oa?!1:f.equals(ma,pa)?!0:f.isValid(ma)&&
f.isValid(pa)&&!!Ba(ma,pa,cb)}function H(ma,pa,oa){if(!ma)return ma;if("x"in ma){var ta=new e;return K(ma,pa,ta,oa)?ta:null}return"xmin"in ma?(ta=new l,L(ma,pa,ta,oa)?ta:null):"rings"in ma?(ta=new p,N(ma,pa,ta,oa)?ta:null):"paths"in ma?(ta=new n,F(ma,pa,ta,oa)?ta:null):"points"in ma?(ta=new q,J(ma,pa,ta,oa)?ta:null):null}function K(ma,pa,oa,ta,Da=0){Qa[0]=ma.x;Qa[1]=ma.y;const Ea=ma.z;Qa[2]=void 0!==Ea?Ea:Da;if(!U(Qa,pa,0,Qa,ta,0,1))return!1;oa.x=Qa[0];oa.y=Qa[1];oa.spatialReference=ta;void 0===Ea?
(oa.z=void 0,oa.hasZ=!1):(oa.z=Qa[2],oa.hasZ=!0);void 0===ma.m?(oa.m=void 0,oa.hasM=!1):(oa.m=ma.m,oa.hasM=!0);return!0}function J(ma,pa,oa,ta,Da=0){const {points:Ea,hasZ:Na,hasM:Oa}=ma;ma=[];const ab=Ea.length,Za=[];for(var $a of Ea)Za.push($a[0],$a[1],Na?$a[2]:Da);if(!U(Za,pa,0,Za,ta,0,ab))return!1;for(pa=0;pa<ab;++pa){Da=3*pa;$a=Za[Da];const gb=Za[Da+1];Na&&Oa?ma.push([$a,gb,Za[Da+2],Ea[pa][3]]):Na?ma.push([$a,gb,Za[Da+2]]):Oa?ma.push([$a,gb,Ea[pa][2]]):ma.push([$a,gb])}oa.points=ma;oa.spatialReference=
ta;oa.hasZ=Na;oa.hasM=Oa;return!0}function F(ma,pa,oa,ta,Da=0){const {paths:Ea,hasZ:Na,hasM:Oa}=ma;ma=[];if(!W(Ea,Na,Oa,pa,ma,ta,Da))return!1;oa.paths=ma;oa.spatialReference=ta;oa.hasZ=Na;oa.hasM=Oa;return!0}function N(ma,pa,oa,ta,Da=0){const {rings:Ea,hasZ:Na,hasM:Oa}=ma;ma=[];if(!W(Ea,Na,Oa,pa,ma,ta,Da))return!1;oa.rings=ma;oa.spatialReference=ta;oa.hasZ=Na;oa.hasM=Oa;return!0}function L(ma,pa,oa,ta,Da=0){const {xmin:Ea,ymin:Na,xmax:Oa,ymax:ab,hasZ:Za,hasM:$a}=ma;if(!M(Ea,Na,Za?ma.zmin:Da,pa,Qa,
ta))return!1;oa.xmin=Qa[0];oa.ymin=Qa[1];Za&&(oa.zmin=Qa[2]);if(!M(Oa,ab,Za?ma.zmax:Da,pa,Qa,ta))return!1;oa.xmax=Qa[0];oa.ymax=Qa[1];Za&&(oa.zmax=Qa[2]);$a&&(oa.mmin=ma.mmin,oa.mmax=ma.mmax);oa.spatialReference=ta;return!0}function M(ma,pa,oa,ta,Da,Ea){Ta[0]=ma;Ta[1]=pa;Ta[2]=oa;return U(Ta,ta,0,Da,Ea,0,1)}function S(ma,pa,oa,ta){if(z.isNone(pa)||z.isNone(ta)||2>ma.length)return!1;2===ma.length&&(Ta[0]=ma[0],Ta[1]=ma[1],Ta[2]=0,ma=Ta);return U(ma,pa,0,oa,ta,0,1)}function Q(ma,pa,oa){z.isNone(pa)?
ma=!1:(pa=Z(pa,fb),pa=va[pa][6],z.isNone(pa)?ma=!1:(pa(ma,0,Ta,0),oa!==Ta&&(oa[0]=Ta[0],oa[1]=Ta[1],2<oa.length&&(oa[2]=Ta[2])),ma=!0));return ma}function U(ma,pa,oa,ta,Da,Ea,Na=1){pa=Ba(pa,Da,cb);if(z.isNone(pa))return!1;if(pa===T){if(ma===ta&&oa===Ea)return!0;Na=oa+3*Na;for(let Oa=oa,ab=Ea;Oa<Na;Oa++,ab++)ta[ab]=ma[Oa];return!0}Na=oa+3*Na;for(let Oa=oa,ab=Ea;Oa<Na;Oa+=3,ab+=3)pa(ma,Oa,ta,ab);return!0}function W(ma,pa,oa,ta,Da,Ea,Na=0){const Oa=[];for(const ab of ma)for(const Za of ab)Oa.push(Za[0],
Za[1],pa?Za[2]:Na);if(!U(Oa,ta,0,Oa,Ea,0,Oa.length/3))return!1;ta=0;Da.length=0;for(const ab of ma){ma=[];for(const Za of ab)pa&&oa?ma.push([Oa[ta++],Oa[ta++],Oa[ta++],Za[3]]):pa?ma.push([Oa[ta++],Oa[ta++],Oa[ta++]]):(oa?ma.push([Oa[ta++],Oa[ta++],Za[2]]):ma.push([Oa[ta++],Oa[ta++]]),ta++);Da.push(ma)}return!0}function fa(ma,pa,oa){const ta=Math.sin(pa);pa=Math.cos(pa);const Da=Math.sin(ma);ma=Math.cos(ma);oa[0]=-ta;oa[4]=-Da*pa;oa[8]=ma*pa;oa[12]=0;oa[1]=pa;oa[5]=-Da*ta;oa[9]=ma*ta;oa[13]=0;oa[2]=
0;oa[6]=ma;oa[10]=Da;oa[14]=0;oa[3]=0;oa[7]=0;oa[11]=0;oa[15]=1;return oa}function Z(ma,pa){if(pa.spatialReference===ma)return pa.spatialReferenceId;pa.spatialReference=ma;"metersPerUnit"in pa&&(pa.metersPerUnit=g.getMetersPerUnitForSR(ma,1));return ma.wkt===c.SphericalECEFSpatialReference.wkt?pa.spatialReferenceId=1:f.isWGS84(ma)?pa.spatialReferenceId=2:f.isWebMercator(ma)?pa.spatialReferenceId=3:ma.wkt===c.WGS84ECEFSpatialReference.wkt?pa.spatialReferenceId=4:4490===ma.wkid?pa.spatialReferenceId=
5:ma.wkt===c.SphericalPCPFMars.wkt?pa.spatialReferenceId=7:ma.wkt===c.SphericalPCPFMoon.wkt?pa.spatialReferenceId=9:f.isMars(ma)?pa.spatialReferenceId=8:f.isMoon(ma)?pa.spatialReferenceId=10:pa.spatialReferenceId=0}function T(ma,pa,oa,ta){ma!==oa&&(oa[ta++]=ma[pa++],oa[ta++]=ma[pa++],oa[ta]=ma[pa])}function ba(ma,pa,oa,ta){oa[ta++]=Ua*(ma[pa++]/h.earth.radius);oa[ta++]=Ua*(Math.PI/2-2*Math.atan(Math.exp(-1*ma[pa++]/h.earth.radius)));oa[ta]=ma[pa]}function ha(ma,pa,oa,ta){ba(ma,pa,oa,ta);Y(oa,ta,oa,
ta)}function sa(ma,pa,oa,ta){ba(ma,pa,oa,ta);ra(oa,ta,oa,ta)}function ua(ma,pa,oa,ta,Da){var Ea=.4999999*Math.PI;Ea=d.clamp(Va*ma[pa+1],-Ea,Ea);Ea=Math.sin(Ea);oa[ta++]=Va*ma[pa]*Da.radius;oa[ta++]=Da.halfSemiMajorAxis*Math.log((1+Ea)/(1-Ea));oa[ta]=ma[pa+2]}function O(ma,pa,oa,ta){ua(ma,pa,oa,ta,h.earth)}function V(ma,pa,oa,ta,Da){Da+=ma[pa+2];const Ea=Va*ma[pa+1];ma=Va*ma[pa];pa=Math.cos(Ea);oa[ta++]=Math.cos(ma)*pa*Da;oa[ta++]=Math.sin(ma)*pa*Da;oa[ta]=Math.sin(Ea)*Da}function ja(ma,pa,oa,ta){V(ma,
pa,oa,ta,h.moon.radius)}function R(ma,pa,oa,ta){V(ma,pa,oa,ta,h.mars.radius)}function Y(ma,pa,oa,ta){V(ma,pa,oa,ta,h.earth.radius)}function aa(ma,pa,oa,ta,Da){var Ea=ma[pa];const Na=ma[pa+1];pa=ma[pa+2];ma=Math.sqrt(Ea*Ea+Na*Na+pa*pa);pa=d.asinClamped(pa/(0===ma?1:ma));Ea=Math.atan2(Na,Ea);oa[ta++]=Ua*Ea;oa[ta++]=Ua*pa;oa[ta]=ma-Da}function ca(ma,pa,oa,ta){aa(ma,pa,oa,ta,h.moon.radius)}function ka(ma,pa,oa,ta){aa(ma,pa,oa,ta,h.mars.radius)}function ia(ma,pa,oa,ta){aa(ma,pa,oa,ta,h.earth.radius)}function na(ma,
pa,oa,ta){ia(ma,pa,oa,ta);O(oa,ta,oa,ta)}function qa(ma,pa,oa,ta){ia(ma,pa,oa,ta);ra(oa,ta,oa,ta)}function ra(ma,pa,oa,ta){{var Da=h.earth;const Na=Va*ma[pa];var Ea=Va*ma[pa+1];ma=ma[pa+2];pa=Math.sin(Ea);Ea=Math.cos(Ea);const Oa=Da.radius/Math.sqrt(1-Da.eccentricitySquared*pa*pa);oa[ta++]=(Oa+ma)*Ea*Math.cos(Na);oa[ta++]=(Oa+ma)*Ea*Math.sin(Na);oa[ta++]=(Oa*(1-Da.eccentricitySquared)+ma)*pa}}function xa(ma,pa,oa,ta){var Da=v.earthEllipsoidConstants,Ea=ma[pa],Na=ma[pa+1];ma=ma[pa+2];let Oa;pa=Math.abs(ma);
var ab=Ea*Ea+Na*Na;var Za=Math.sqrt(ab);var $a=ab+ma*ma;var gb=Math.sqrt($a);Ea=Math.atan2(Na,Ea);var kb=ma*ma/$a;$a=ab/$a;Na=Da.a2/gb;ab=Da.a3-Da.a4/gb;.3<$a?(kb=pa/gb*(1+$a*(Da.a1+Na+kb*ab)/gb),gb=Math.asin(kb),Na=kb*kb,$a=Math.sqrt(1-Na)):($a=Za/gb*(1-kb*(Da.a5-Na-$a*ab)/gb),gb=Math.acos($a),Na=1-$a*$a,kb=Math.sqrt(Na));Oa=1-h.earth.eccentricitySquared*Na;Na=h.earth.radius/Math.sqrt(Oa);Da=Da.a6*Na;Na=Za-Na*$a;ab=pa-Da*kb;pa=$a*Na+kb*ab;Za=$a*ab-kb*Na;Da=Za/(Da/Oa+pa);gb+=Da;0>ma&&(gb=-gb);oa[ta++]=
Ua*Ea;oa[ta++]=Ua*gb;oa[ta]=pa+Za*Da/2}function ya(ma,pa,oa,ta){xa(ma,pa,oa,ta);Y(oa,ta,oa,ta)}function Aa(ma,pa,oa,ta){xa(ma,pa,oa,ta);O(oa,ta,oa,ta)}function Ba(ma,pa,oa=Ka()){return z.isNone(ma)||z.isNone(pa)?null:Ca(ma,pa,oa).projector}function Ca(ma,pa,oa){if(z.isNone(ma)||z.isNone(pa)||oa.source.spatialReference===ma&&oa.dest.spatialReference===pa)return oa;const ta=Z(ma,oa.source),Da=Z(pa,oa.dest);0===ta&&0===Da?f.equals(ma,pa)?oa.projector=T:oa.projector=null:oa.projector=va[ta][Da];return oa}
function Ka(){return{source:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},projector:T}}let Ga=null,Ja=null,Ha=null,Ia={},Sa=function(ma){function pa(){return ma.call(this,"projection:not-loaded","projection engine not fully loaded yet, please call load()")||this}m._inheritsLoose(pa,ma);return pa}(y);const va={[2]:{[5]:null,[8]:null,[10]:null,[6]:T,[1]:Y,[7]:null,[9]:null,[0]:null,[3]:O,[2]:T,[4]:ra},[5]:{[5]:T,[8]:null,
[10]:null,[6]:T,[1]:Y,[7]:null,[9]:null,[0]:null,[3]:null,[2]:null,[4]:ra},[8]:{[5]:null,[8]:T,[10]:null,[6]:null,[1]:null,[7]:R,[9]:null,[0]:null,[3]:null,[2]:null,[4]:null},[10]:{[5]:null,[8]:null,[10]:T,[6]:null,[1]:null,[7]:null,[9]:ja,[0]:null,[3]:null,[2]:null,[4]:null},[3]:{[5]:null,[8]:null,[10]:null,[6]:ba,[1]:ha,[7]:null,[9]:null,[0]:null,[3]:T,[2]:ba,[4]:sa},[4]:{[5]:xa,[8]:null,[10]:null,[6]:xa,[1]:ya,[7]:null,[9]:null,[0]:null,[3]:Aa,[2]:xa,[4]:T},[1]:{[5]:ia,[8]:null,[10]:null,[6]:ia,
[1]:T,[7]:null,[9]:null,[0]:null,[3]:na,[2]:ia,[4]:qa},[7]:{[5]:null,[8]:ka,[10]:null,[6]:null,[1]:null,[7]:T,[9]:null,[0]:null,[3]:null,[2]:null,[4]:null},[9]:{[5]:null,[8]:null,[10]:ca,[6]:null,[1]:null,[7]:null,[9]:T,[0]:null,[3]:null,[2]:null,[4]:null},[0]:{[5]:null,[8]:null,[10]:null,[6]:null,[1]:null,[7]:null,[9]:null,[0]:T,[3]:null,[2]:null,[4]:null},[6]:{[5]:null,[8]:null,[10]:null,[6]:T,[1]:Y,[7]:null,[9]:null,[0]:null,[3]:null,[2]:T,[4]:ra}},fb={spatialReference:null,spatialReferenceId:0},
hb={spatialReference:null,spatialReferenceId:0},cb=Ka(),I=Ka(),Va=d.deg2rad(1),Ua=d.rad2deg(1),Ta=b.create(),jb=b.create(),rb=b.create(),Qa=b.create(),xb=b.create();k.canProjectToWGS84ComparableLonLat=function(ma){if(z.isNone(ma))return!1;ma=Z(ma,fb);return!!va[ma][6]};k.canProjectWithoutEngine=G;k.computeLatLonToENURotation=fa;k.computeLinearTransformation=function(ma,pa,oa,ta){if(z.isNone(ma)||z.isNone(ta))return!1;var Da=Z(ma,fb),Ea=Z(ta,hb);if(Da===Ea&&1!==Ea&&(0!==Da||f.equals(ma,ta)))return r.identity(oa),
r.translate(oa,oa,pa),!0;if(1===Ea||7===Ea||9===Ea){ta=ma=0;if(1===Ea){Da=va[Da][6];Ea=va[6][Ea];if(z.isNone(Da)||z.isNone(Ea))return!1;Da(pa,0,jb,0);Ea(jb,0,rb,0);ma=Va*jb[0];ta=Va*jb[1]}else if(7===Ea||9===Ea){Ea=va[Da][Ea];if(z.isNone(Ea))return!1;Ea(pa,0,rb,0);ma=Va*pa[0];ta=Va*pa[1]}fa(ta,ma,oa);oa[12]=rb[0];oa[13]=rb[1];oa[14]=rb[2];return!0}if(3===Ea&&(2===Da||1===Da)){Ea=va[Da][6];if(z.isNone(Ea))return!1;Ea(pa,0,jb,0);pa=Va*jb[1];O(jb,0,rb,0);r.identity(oa);r.translate(oa,oa,rb);pa=1/Math.cos(pa);
r.scale(oa,oa,[pa,pa,1]);return!0}return!1};k.getProjectorName=function(ma,pa){switch(Ba(ma,pa,cb)){case T:return"copy3";case Y:return"wgs84ToSphericalECEF";case O:return"wgs84ToWebMercator";case ra:return"wgs84ToWGS84ECEF";case ba:return"webMercatorToWGS84";case ha:return"webMercatorToSphericalECEF";case sa:return"webMercatorToWGS84ECEF";case xa:return"wgs84ECEFToWGS84";case ya:return"wgs84ECEFToSphericalECEF";case Aa:return"wgs84ECEFToWebMercator";case ia:return"sphericalECEFToWGS84";case na:return"sphericalECEFToWebMercator";
case ka:return"sphericalMarsPCPFToMars2000";case ca:return"sphericalMoonPCPFToMoon2000";case qa:return"sphericalECEFToWGS84ECEF";case R:return"mars2000ToSphericalPCPF";case ja:return"moon2000ToSphericalPCPF";default:return null}};k.getTransformation=E;k.getTransformations=function(ma,pa,oa=null){if(z.isNone(Ga))throw new Sa;ma=Ga._getTransformationBySuitability(Ja,ma,pa,oa,null==oa?void 0:oa.spatialReference);if(null!==ma){pa=[];for(const ta of ma)pa.push(D.fromGE(ta));return pa}return[]};k.initializeProjection=
async function(ma,pa){if(!B())for(const {source:oa,dest:ta,geographicTransformation:Da}of ma)if(!G(oa,ta,Da))return C(pa)};k.isLoaded=B;k.isSupported=function(){return!0};k.load=C;k.localLinearScaleFactors=function(ma,pa,oa,ta){if(z.isNone(pa)||z.isNone(ta))return!1;const Da=Z(pa,fb);var Ea=Z(ta,hb);if(Da===Ea&&0!==Da||f.equals(pa,ta))return oa[0]=1,oa[1]=1,oa[2]=1,!0;if(1===Da){pa=a.length(ma);ma=pa/Math.sqrt(ma[0]*ma[0]+ma[1]*ma[1]);pa/=h.earth.radius;if(3===Ea)return oa[0]=ma*pa,oa[1]=ma*pa,oa[2]=
1,!0;if(2===Ea||5===Ea)return Ea=180/(h.earth.radius*Math.PI),oa[0]=Ea*ma*pa,oa[1]=Ea*pa,oa[2]=1,!0}return!1};k.lonLatToSphericalPCPF=function(ma,pa,oa,ta,Da=0){ta+=Da;Da=Math.cos(oa);ma[0]=Math.cos(pa)*Da*ta;ma[1]=Math.sin(pa)*Da*ta;ma[2]=Math.sin(oa)*ta};k.lonLatToWebMercatorComparable=ua;k.project=function(ma,pa,oa=null){return Array.isArray(ma)?0===ma.length?[]:A(Ja,ma,ma[0].spatialReference,pa,oa):A(Ja,[ma],ma.spatialReference,pa,oa)[0]};k.projectBoundingRect=function(ma,pa,oa,ta){if(null==ma)return!1;
if(f.equals(pa,ta))return w.set(oa,ma),!0;Ta[0]=ma[0];Ta[1]=ma[1];Ta[2]=0;if(!U(Ta,pa,0,Ta,ta,0,1))return!1;oa[0]=Ta[0];oa[1]=Ta[1];Ta[0]=ma[2];Ta[1]=ma[3];Ta[2]=0;if(!U(Ta,pa,0,Ta,ta,0,1))return!1;oa[2]=Ta[0];oa[3]=Ta[1];return!0};k.projectBoundingSphere=function(ma,pa,oa,ta){if(z.isNone(pa)||z.isNone(ta))return!1;pa=Ca(pa,ta,I);if(pa.projector===T)return oa[0]=ma[0],oa[1]=ma[1],oa[2]=ma[2],oa[3]=ma[3],!0;if(z.isNone(pa.projector))return!1;const {source:Da,dest:Ea}=pa;if(3===Ea.spatialReferenceId){pa=
va[Da.spatialReferenceId][2];if(z.isNone(pa))return!1;pa(ma,0,jb,0);pa=Math.abs(Va*jb[1])+Math.asin(ma[3]/(h.earth.radius+ma[2]));O(jb,0,oa,0);oa[3]=pa>.9999*Math.PI?Number.MAX_VALUE:1/Math.cos(pa)*ma[3];return!0}pa.projector(ma,0,oa,0);oa[3]=ma[3]*Da.metersPerUnit/Ea.metersPerUnit;return!0};k.projectBuffer=U;k.projectDirection=function(ma,pa,oa,ta,Da){a.copy(Qa,ma);a.add(xb,ma,pa);S(Qa,oa,Qa,Da);S(xb,oa,xb,Da);a.subtract(ta,xb,Qa);a.normalize(ta,ta)};k.projectExtent=function(ma,pa,oa=pa.spatialReference,
ta=0){return z.isNone(oa)?!1:L(ma,ma.spatialReference,pa,oa,ta)};k.projectMany=A;k.projectMultipoint=function(ma,pa,oa=pa.spatialReference,ta=0){return z.isNone(oa)?!1:J(ma,ma.spatialReference,pa,oa,ta)};k.projectPoint=function(ma,pa,oa=pa.spatialReference,ta=0){return z.isNone(oa)?!1:K(ma,ma.spatialReference,pa,oa,ta)};k.projectPointToVector=function(ma,pa,oa,ta=0){Qa[0]=ma.x;Qa[1]=ma.y;const Da=ma.z;Qa[2]=void 0!==Da?Da:ta;return U(Qa,ma.spatialReference,0,pa,oa,0,1)};k.projectPointToWGS84ComparableLonLat=
function(ma,pa){Qa[0]=ma.x;Qa[1]=ma.y;const oa=ma.z;Qa[2]=void 0!==oa?oa:0;return Q(Qa,ma.spatialReference,pa)};k.projectPolygon=function(ma,pa,oa=pa.spatialReference,ta=0){return z.isNone(oa)?!1:N(ma,ma.spatialReference,pa,oa,ta)};k.projectPolyline=function(ma,pa,oa=pa.spatialReference,ta=0){return z.isNone(oa)?!1:F(ma,ma.spatialReference,pa,oa,ta)};k.projectVectorToDehydratedPoint=function(ma,pa,oa){return U(ma,pa,0,Qa,oa.spatialReference,0,1)?(oa.x=Qa[0],oa.y=Qa[1],oa.z=Qa[2],oa):null};k.projectVectorToPoint=
function(ma,pa,oa){if(z.isNone(pa)||z.isNone(oa))return null;const ta=new e({spatialReference:oa});return U(ma,pa,0,Qa,oa,0,1)?(ta.x=Qa[0],ta.y=Qa[1],ta.z=Qa[2],ta):null};k.projectVectorToVector=S;k.projectVectorToWGS84ComparableLonLat=Q;k.projectXYZToVector=M;k.sphericalPCPFtoLonLatElevation=aa;k.unload=function(){Ha=Ja=Ga=null;Ia={}};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/chunks/vec3f64":function(){define(["exports"],function(t){function k(){return[0,0,0]}function m(g){return[g[0],
g[1],g[2]]}function z(g,r,u){return[g,r,u]}function y(g){const r=k(),u=Math.min(3,g.length);for(let w=0;w<u;++w)r[w]=g[w];return r}function x(g,r){return new Float64Array(g,r,3)}function f(){return k()}function h(){return[1,1,1]}function e(){return[1,0,0]}function l(){return[0,1,0]}function q(){return[0,0,1]}const p=k(),n=h(),d=e(),b=l(),a=q();var c=Object.freeze({__proto__:null,create:k,clone:m,fromValues:z,fromArray:y,createView:x,zeros:f,ones:h,unitX:e,unitY:l,unitZ:q,ZEROS:p,ONES:n,UNIT_X:d,UNIT_Y:b,
UNIT_Z:a});t.ONES=n;t.UNIT_X=d;t.UNIT_Y=b;t.UNIT_Z=a;t.ZEROS=p;t.clone=m;t.create=k;t.createView=x;t.fromArray=y;t.fromValues=z;t.ones=h;t.unitX=e;t.unitY=l;t.unitZ=q;t.vec3f64=c;t.zeros=f})},"esri/chunks/vec3":function(){define(["exports","./vec3f64","./common"],function(t,k,m){function z(T){const ba=T[0],ha=T[1];T=T[2];return Math.sqrt(ba*ba+ha*ha+T*T)}function y(T,ba){T[0]=ba[0];T[1]=ba[1];T[2]=ba[2];return T}function x(T,ba,ha,sa){T[0]=ba;T[1]=ha;T[2]=sa;return T}function f(T,ba,ha){T[0]=ba[0]+
ha[0];T[1]=ba[1]+ha[1];T[2]=ba[2]+ha[2];return T}function h(T,ba,ha){T[0]=ba[0]-ha[0];T[1]=ba[1]-ha[1];T[2]=ba[2]-ha[2];return T}function e(T,ba,ha){T[0]=ba[0]*ha[0];T[1]=ba[1]*ha[1];T[2]=ba[2]*ha[2];return T}function l(T,ba,ha){T[0]=ba[0]/ha[0];T[1]=ba[1]/ha[1];T[2]=ba[2]/ha[2];return T}function q(T,ba){T[0]=Math.ceil(ba[0]);T[1]=Math.ceil(ba[1]);T[2]=Math.ceil(ba[2]);return T}function p(T,ba){T[0]=Math.floor(ba[0]);T[1]=Math.floor(ba[1]);T[2]=Math.floor(ba[2]);return T}function n(T,ba,ha){T[0]=
Math.min(ba[0],ha[0]);T[1]=Math.min(ba[1],ha[1]);T[2]=Math.min(ba[2],ha[2]);return T}function d(T,ba,ha){T[0]=Math.max(ba[0],ha[0]);T[1]=Math.max(ba[1],ha[1]);T[2]=Math.max(ba[2],ha[2]);return T}function b(T,ba){T[0]=Math.round(ba[0]);T[1]=Math.round(ba[1]);T[2]=Math.round(ba[2]);return T}function a(T,ba,ha){T[0]=ba[0]*ha;T[1]=ba[1]*ha;T[2]=ba[2]*ha;return T}function c(T,ba,ha,sa){T[0]=ba[0]+ha[0]*sa;T[1]=ba[1]+ha[1]*sa;T[2]=ba[2]+ha[2]*sa;return T}function g(T,ba){const ha=ba[0]-T[0],sa=ba[1]-T[1];
T=ba[2]-T[2];return Math.sqrt(ha*ha+sa*sa+T*T)}function r(T,ba){const ha=ba[0]-T[0],sa=ba[1]-T[1];T=ba[2]-T[2];return ha*ha+sa*sa+T*T}function u(T){const ba=T[0],ha=T[1];T=T[2];return ba*ba+ha*ha+T*T}function w(T,ba){T[0]=-ba[0];T[1]=-ba[1];T[2]=-ba[2];return T}function v(T,ba){T[0]=1/ba[0];T[1]=1/ba[1];T[2]=1/ba[2];return T}function D(T,ba){var ha=ba[0];const sa=ba[1],ua=ba[2];ha=ha*ha+sa*sa+ua*ua;0<ha&&(ha=1/Math.sqrt(ha),T[0]=ba[0]*ha,T[1]=ba[1]*ha,T[2]=ba[2]*ha);return T}function B(T,ba){return T[0]*
ba[0]+T[1]*ba[1]+T[2]*ba[2]}function C(T,ba,ha){const sa=ba[0],ua=ba[1];ba=ba[2];const O=ha[0],V=ha[1];ha=ha[2];T[0]=ua*ha-ba*V;T[1]=ba*O-sa*ha;T[2]=sa*V-ua*O;return T}function A(T,ba,ha,sa){const ua=ba[0],O=ba[1];ba=ba[2];T[0]=ua+sa*(ha[0]-ua);T[1]=O+sa*(ha[1]-O);T[2]=ba+sa*(ha[2]-ba);return T}function E(T,ba,ha,sa,ua,O){const V=O*O,ja=V*(2*O-3)+1,R=V*(O-2)+O,Y=V*(O-1);O=V*(3-2*O);T[0]=ba[0]*ja+ha[0]*R+sa[0]*Y+ua[0]*O;T[1]=ba[1]*ja+ha[1]*R+sa[1]*Y+ua[1]*O;T[2]=ba[2]*ja+ha[2]*R+sa[2]*Y+ua[2]*O;return T}
function G(T,ba,ha,sa,ua,O){var V=1-O,ja=V*V;const R=O*O,Y=ja*V;ja*=3*O;V*=3*R;O*=R;T[0]=ba[0]*Y+ha[0]*ja+sa[0]*V+ua[0]*O;T[1]=ba[1]*Y+ha[1]*ja+sa[1]*V+ua[1]*O;T[2]=ba[2]*Y+ha[2]*ja+sa[2]*V+ua[2]*O;return T}function H(T,ba){ba=ba||1;const ha=2*m.RANDOM()*Math.PI,sa=2*m.RANDOM()-1,ua=Math.sqrt(1-sa*sa)*ba;T[0]=Math.cos(ha)*ua;T[1]=Math.sin(ha)*ua;T[2]=sa*ba;return T}function K(T,ba,ha){const sa=ba[0],ua=ba[1];ba=ba[2];T[0]=ha[0]*sa+ha[4]*ua+ha[8]*ba+ha[12];T[1]=ha[1]*sa+ha[5]*ua+ha[9]*ba+ha[13];T[2]=
ha[2]*sa+ha[6]*ua+ha[10]*ba+ha[14];return T}function J(T,ba,ha){const sa=ba[0],ua=ba[1];ba=ba[2];T[0]=sa*ha[0]+ua*ha[3]+ba*ha[6];T[1]=sa*ha[1]+ua*ha[4]+ba*ha[7];T[2]=sa*ha[2]+ua*ha[5]+ba*ha[8];return T}function F(T,ba,ha){const sa=ha[0],ua=ha[1],O=ha[2],V=ba[0],ja=ba[1];ba=ba[2];let R=ua*ba-O*ja,Y=O*V-sa*ba,aa=sa*ja-ua*V;ha=2*ha[3];T[0]=V+R*ha+2*(ua*aa-O*Y);T[1]=ja+Y*ha+2*(O*R-sa*aa);T[2]=ba+aa*ha+2*(sa*Y-ua*R);return T}function N(T,ba,ha,sa){const ua=[],O=[];ua[0]=ba[0]-ha[0];ua[1]=ba[1]-ha[1];ua[2]=
ba[2]-ha[2];O[0]=ua[0];O[1]=ua[1]*Math.cos(sa)-ua[2]*Math.sin(sa);O[2]=ua[1]*Math.sin(sa)+ua[2]*Math.cos(sa);T[0]=O[0]+ha[0];T[1]=O[1]+ha[1];T[2]=O[2]+ha[2];return T}function L(T,ba,ha,sa){const ua=[],O=[];ua[0]=ba[0]-ha[0];ua[1]=ba[1]-ha[1];ua[2]=ba[2]-ha[2];O[0]=ua[2]*Math.sin(sa)+ua[0]*Math.cos(sa);O[1]=ua[1];O[2]=ua[2]*Math.cos(sa)-ua[0]*Math.sin(sa);T[0]=O[0]+ha[0];T[1]=O[1]+ha[1];T[2]=O[2]+ha[2];return T}function M(T,ba,ha,sa){const ua=[],O=[];ua[0]=ba[0]-ha[0];ua[1]=ba[1]-ha[1];ua[2]=ba[2]-
ha[2];O[0]=ua[0]*Math.cos(sa)-ua[1]*Math.sin(sa);O[1]=ua[0]*Math.sin(sa)+ua[1]*Math.cos(sa);O[2]=ua[2];T[0]=O[0]+ha[0];T[1]=O[1]+ha[1];T[2]=O[2]+ha[2];return T}function S(T,ba){y(fa,T);y(Z,ba);D(fa,fa);D(Z,Z);T=B(fa,Z);return 1<T?0:-1>T?Math.PI:Math.acos(T)}function Q(T){return"vec3("+T[0]+", "+T[1]+", "+T[2]+")"}function U(T,ba){return T[0]===ba[0]&&T[1]===ba[1]&&T[2]===ba[2]}function W(T,ba){const ha=T[0],sa=T[1];T=T[2];const ua=ba[0],O=ba[1];ba=ba[2];return Math.abs(ha-ua)<=m.EPSILON*Math.max(1,
Math.abs(ha),Math.abs(ua))&&Math.abs(sa-O)<=m.EPSILON*Math.max(1,Math.abs(sa),Math.abs(O))&&Math.abs(T-ba)<=m.EPSILON*Math.max(1,Math.abs(T),Math.abs(ba))}const fa=k.create(),Z=k.create();k=Object.freeze({__proto__:null,length:z,copy:y,set:x,add:f,subtract:h,multiply:e,divide:l,ceil:q,floor:p,min:n,max:d,round:b,scale:a,scaleAndAdd:c,distance:g,squaredDistance:r,squaredLength:u,negate:w,inverse:v,normalize:D,dot:B,cross:C,lerp:A,hermite:E,bezier:G,random:H,transformMat4:K,transformMat3:J,transformQuat:F,
rotateX:N,rotateY:L,rotateZ:M,angle:S,str:Q,exactEquals:U,equals:W,sub:h,mul:e,div:l,dist:g,sqrDist:r,len:z,sqrLen:u});t.add=f;t.angle=S;t.bezier=G;t.ceil=q;t.copy=y;t.cross=C;t.dist=g;t.distance=g;t.div=l;t.divide=l;t.dot=B;t.equals=W;t.exactEquals=U;t.floor=p;t.hermite=E;t.inverse=v;t.len=z;t.length=z;t.lerp=A;t.max=d;t.min=n;t.mul=e;t.multiply=e;t.negate=w;t.normalize=D;t.random=H;t.rotateX=N;t.rotateY=L;t.rotateZ=M;t.round=b;t.scale=a;t.scaleAndAdd=c;t.set=x;t.sqrDist=r;t.sqrLen=u;t.squaredDistance=
r;t.squaredLength=u;t.str=Q;t.sub=h;t.subtract=h;t.transformMat3=J;t.transformMat4=K;t.transformQuat=F;t.vec3=k})},"esri/chunks/common":function(){define(["exports"],function(t){function k(e){return e*x}function m(e){return e*f}function z(e,l){return Math.abs(e-l)<=1E-6*Math.max(1,Math.abs(e),Math.abs(l))}const y=Math.random,x=Math.PI/180,f=180/Math.PI;var h=Object.freeze({__proto__:null,EPSILON:1E-6,RANDOM:y,toRadian:k,toDegree:m,equals:z});t.EPSILON=1E-6;t.RANDOM=y;t.common=h;t.equals=z;t.toDegree=
m;t.toRadian=k})},"esri/chunks/mat4":function(){define(["exports","./vec3f64","./common"],function(t,k,m){function z(O,V){O[0]=V[0];O[1]=V[1];O[2]=V[2];O[3]=V[3];O[4]=V[4];O[5]=V[5];O[6]=V[6];O[7]=V[7];O[8]=V[8];O[9]=V[9];O[10]=V[10];O[11]=V[11];O[12]=V[12];O[13]=V[13];O[14]=V[14];O[15]=V[15];return O}function y(O,V,ja,R,Y,aa,ca,ka,ia,na,qa,ra,xa,ya,Aa,Ba,Ca){O[0]=V;O[1]=ja;O[2]=R;O[3]=Y;O[4]=aa;O[5]=ca;O[6]=ka;O[7]=ia;O[8]=na;O[9]=qa;O[10]=ra;O[11]=xa;O[12]=ya;O[13]=Aa;O[14]=Ba;O[15]=Ca;return O}
function x(O){O[0]=1;O[1]=0;O[2]=0;O[3]=0;O[4]=0;O[5]=1;O[6]=0;O[7]=0;O[8]=0;O[9]=0;O[10]=1;O[11]=0;O[12]=0;O[13]=0;O[14]=0;O[15]=1;return O}function f(O,V){if(O===V){const ja=V[1],R=V[2],Y=V[3],aa=V[6],ca=V[7],ka=V[11];O[1]=V[4];O[2]=V[8];O[3]=V[12];O[4]=ja;O[6]=V[9];O[7]=V[13];O[8]=R;O[9]=aa;O[11]=V[14];O[12]=Y;O[13]=ca;O[14]=ka}else O[0]=V[0],O[1]=V[4],O[2]=V[8],O[3]=V[12],O[4]=V[1],O[5]=V[5],O[6]=V[9],O[7]=V[13],O[8]=V[2],O[9]=V[6],O[10]=V[10],O[11]=V[14],O[12]=V[3],O[13]=V[7],O[14]=V[11],O[15]=
V[15];return O}function h(O,V){const ja=V[0],R=V[1],Y=V[2],aa=V[3],ca=V[4],ka=V[5],ia=V[6],na=V[7],qa=V[8],ra=V[9],xa=V[10],ya=V[11],Aa=V[12],Ba=V[13],Ca=V[14];V=V[15];const Ka=ja*ka-R*ca,Ga=ja*ia-Y*ca,Ja=ja*na-aa*ca,Ha=R*ia-Y*ka,Ia=R*na-aa*ka,Sa=Y*na-aa*ia,va=qa*Ba-ra*Aa,fb=qa*Ca-xa*Aa,hb=qa*V-ya*Aa,cb=ra*Ca-xa*Ba,I=ra*V-ya*Ba,Va=xa*V-ya*Ca;let Ua=Ka*Va-Ga*I+Ja*cb+Ha*hb-Ia*fb+Sa*va;if(!Ua)return null;Ua=1/Ua;O[0]=(ka*Va-ia*I+na*cb)*Ua;O[1]=(Y*I-R*Va-aa*cb)*Ua;O[2]=(Ba*Sa-Ca*Ia+V*Ha)*Ua;O[3]=(xa*
Ia-ra*Sa-ya*Ha)*Ua;O[4]=(ia*hb-ca*Va-na*fb)*Ua;O[5]=(ja*Va-Y*hb+aa*fb)*Ua;O[6]=(Ca*Ja-Aa*Sa-V*Ga)*Ua;O[7]=(qa*Sa-xa*Ja+ya*Ga)*Ua;O[8]=(ca*I-ka*hb+na*va)*Ua;O[9]=(R*hb-ja*I-aa*va)*Ua;O[10]=(Aa*Ia-Ba*Ja+V*Ka)*Ua;O[11]=(ra*Ja-qa*Ia-ya*Ka)*Ua;O[12]=(ka*fb-ca*cb-ia*va)*Ua;O[13]=(ja*cb-R*fb+Y*va)*Ua;O[14]=(Ba*Ga-Aa*Ha-Ca*Ka)*Ua;O[15]=(qa*Ha-ra*Ga+xa*Ka)*Ua;return O}function e(O,V){const ja=V[0],R=V[1],Y=V[2],aa=V[3],ca=V[4],ka=V[5],ia=V[6],na=V[7],qa=V[8],ra=V[9],xa=V[10],ya=V[11],Aa=V[12],Ba=V[13],Ca=
V[14];V=V[15];O[0]=ka*(xa*V-ya*Ca)-ra*(ia*V-na*Ca)+Ba*(ia*ya-na*xa);O[1]=-(R*(xa*V-ya*Ca)-ra*(Y*V-aa*Ca)+Ba*(Y*ya-aa*xa));O[2]=R*(ia*V-na*Ca)-ka*(Y*V-aa*Ca)+Ba*(Y*na-aa*ia);O[3]=-(R*(ia*ya-na*xa)-ka*(Y*ya-aa*xa)+ra*(Y*na-aa*ia));O[4]=-(ca*(xa*V-ya*Ca)-qa*(ia*V-na*Ca)+Aa*(ia*ya-na*xa));O[5]=ja*(xa*V-ya*Ca)-qa*(Y*V-aa*Ca)+Aa*(Y*ya-aa*xa);O[6]=-(ja*(ia*V-na*Ca)-ca*(Y*V-aa*Ca)+Aa*(Y*na-aa*ia));O[7]=ja*(ia*ya-na*xa)-ca*(Y*ya-aa*xa)+qa*(Y*na-aa*ia);O[8]=ca*(ra*V-ya*Ba)-qa*(ka*V-na*Ba)+Aa*(ka*ya-na*ra);
O[9]=-(ja*(ra*V-ya*Ba)-qa*(R*V-aa*Ba)+Aa*(R*ya-aa*ra));O[10]=ja*(ka*V-na*Ba)-ca*(R*V-aa*Ba)+Aa*(R*na-aa*ka);O[11]=-(ja*(ka*ya-na*ra)-ca*(R*ya-aa*ra)+qa*(R*na-aa*ka));O[12]=-(ca*(ra*Ca-xa*Ba)-qa*(ka*Ca-ia*Ba)+Aa*(ka*xa-ia*ra));O[13]=ja*(ra*Ca-xa*Ba)-qa*(R*Ca-Y*Ba)+Aa*(R*xa-Y*ra);O[14]=-(ja*(ka*Ca-ia*Ba)-ca*(R*Ca-Y*Ba)+Aa*(R*ia-Y*ka));O[15]=ja*(ka*xa-ia*ra)-ca*(R*xa-Y*ra)+qa*(R*ia-Y*ka);return O}function l(O){const V=O[0],ja=O[1],R=O[2],Y=O[3],aa=O[4],ca=O[5],ka=O[6],ia=O[7],na=O[8],qa=O[9],ra=O[10],
xa=O[11],ya=O[12],Aa=O[13],Ba=O[14];O=O[15];return(V*ca-ja*aa)*(ra*O-xa*Ba)-(V*ka-R*aa)*(qa*O-xa*Aa)+(V*ia-Y*aa)*(qa*Ba-ra*Aa)+(ja*ka-R*ca)*(na*O-xa*ya)-(ja*ia-Y*ca)*(na*Ba-ra*ya)+(R*ia-Y*ka)*(na*Aa-qa*ya)}function q(O,V,ja){const R=V[0],Y=V[1],aa=V[2],ca=V[3],ka=V[4],ia=V[5],na=V[6],qa=V[7],ra=V[8],xa=V[9],ya=V[10],Aa=V[11],Ba=V[12],Ca=V[13],Ka=V[14];V=V[15];let Ga=ja[0],Ja=ja[1],Ha=ja[2],Ia=ja[3];O[0]=Ga*R+Ja*ka+Ha*ra+Ia*Ba;O[1]=Ga*Y+Ja*ia+Ha*xa+Ia*Ca;O[2]=Ga*aa+Ja*na+Ha*ya+Ia*Ka;O[3]=Ga*ca+Ja*
qa+Ha*Aa+Ia*V;Ga=ja[4];Ja=ja[5];Ha=ja[6];Ia=ja[7];O[4]=Ga*R+Ja*ka+Ha*ra+Ia*Ba;O[5]=Ga*Y+Ja*ia+Ha*xa+Ia*Ca;O[6]=Ga*aa+Ja*na+Ha*ya+Ia*Ka;O[7]=Ga*ca+Ja*qa+Ha*Aa+Ia*V;Ga=ja[8];Ja=ja[9];Ha=ja[10];Ia=ja[11];O[8]=Ga*R+Ja*ka+Ha*ra+Ia*Ba;O[9]=Ga*Y+Ja*ia+Ha*xa+Ia*Ca;O[10]=Ga*aa+Ja*na+Ha*ya+Ia*Ka;O[11]=Ga*ca+Ja*qa+Ha*Aa+Ia*V;Ga=ja[12];Ja=ja[13];Ha=ja[14];Ia=ja[15];O[12]=Ga*R+Ja*ka+Ha*ra+Ia*Ba;O[13]=Ga*Y+Ja*ia+Ha*xa+Ia*Ca;O[14]=Ga*aa+Ja*na+Ha*ya+Ia*Ka;O[15]=Ga*ca+Ja*qa+Ha*Aa+Ia*V;return O}function p(O,V,ja){const R=
ja[0],Y=ja[1];ja=ja[2];let aa=void 0,ca=void 0,ka=void 0,ia=void 0,na=void 0,qa=void 0,ra=void 0,xa=void 0,ya=void 0,Aa=void 0,Ba=void 0,Ca=void 0;V===O?(O[12]=V[0]*R+V[4]*Y+V[8]*ja+V[12],O[13]=V[1]*R+V[5]*Y+V[9]*ja+V[13],O[14]=V[2]*R+V[6]*Y+V[10]*ja+V[14],O[15]=V[3]*R+V[7]*Y+V[11]*ja+V[15]):(aa=V[0],ca=V[1],ka=V[2],ia=V[3],na=V[4],qa=V[5],ra=V[6],xa=V[7],ya=V[8],Aa=V[9],Ba=V[10],Ca=V[11],O[0]=aa,O[1]=ca,O[2]=ka,O[3]=ia,O[4]=na,O[5]=qa,O[6]=ra,O[7]=xa,O[8]=ya,O[9]=Aa,O[10]=Ba,O[11]=Ca,O[12]=aa*R+
na*Y+ya*ja+V[12],O[13]=ca*R+qa*Y+Aa*ja+V[13],O[14]=ka*R+ra*Y+Ba*ja+V[14],O[15]=ia*R+xa*Y+Ca*ja+V[15]);return O}function n(O,V,ja){const R=ja[0],Y=ja[1];ja=ja[2];O[0]=V[0]*R;O[1]=V[1]*R;O[2]=V[2]*R;O[3]=V[3]*R;O[4]=V[4]*Y;O[5]=V[5]*Y;O[6]=V[6]*Y;O[7]=V[7]*Y;O[8]=V[8]*ja;O[9]=V[9]*ja;O[10]=V[10]*ja;O[11]=V[11]*ja;O[12]=V[12];O[13]=V[13];O[14]=V[14];O[15]=V[15];return O}function d(O,V,ja,R){let Y=R[0],aa=R[1];R=R[2];let ca=Math.sqrt(Y*Y+aa*aa+R*R);var ka=void 0,ia=void 0;let na=void 0,qa=void 0,ra=void 0,
xa=void 0,ya=void 0,Aa=void 0,Ba=void 0,Ca=void 0,Ka=void 0,Ga=void 0,Ja=void 0,Ha=void 0,Ia=void 0,Sa=void 0,va=void 0,fb=void 0,hb=void 0,cb=void 0,I=void 0,Va=void 0;ia=ka=void 0;if(ca<m.EPSILON)return null;ca=1/ca;Y*=ca;aa*=ca;R*=ca;ka=Math.sin(ja);ia=Math.cos(ja);na=1-ia;qa=V[0];ra=V[1];xa=V[2];ya=V[3];Aa=V[4];Ba=V[5];Ca=V[6];Ka=V[7];Ga=V[8];Ja=V[9];Ha=V[10];Ia=V[11];Sa=Y*Y*na+ia;va=aa*Y*na+R*ka;fb=R*Y*na-aa*ka;hb=Y*aa*na-R*ka;cb=aa*aa*na+ia;I=R*aa*na+Y*ka;Va=Y*R*na+aa*ka;ka=aa*R*na-Y*ka;ia=
R*R*na+ia;O[0]=qa*Sa+Aa*va+Ga*fb;O[1]=ra*Sa+Ba*va+Ja*fb;O[2]=xa*Sa+Ca*va+Ha*fb;O[3]=ya*Sa+Ka*va+Ia*fb;O[4]=qa*hb+Aa*cb+Ga*I;O[5]=ra*hb+Ba*cb+Ja*I;O[6]=xa*hb+Ca*cb+Ha*I;O[7]=ya*hb+Ka*cb+Ia*I;O[8]=qa*Va+Aa*ka+Ga*ia;O[9]=ra*Va+Ba*ka+Ja*ia;O[10]=xa*Va+Ca*ka+Ha*ia;O[11]=ya*Va+Ka*ka+Ia*ia;V!==O&&(O[12]=V[12],O[13]=V[13],O[14]=V[14],O[15]=V[15]);return O}function b(O,V,ja){const R=Math.sin(ja);ja=Math.cos(ja);const Y=V[4],aa=V[5],ca=V[6],ka=V[7],ia=V[8],na=V[9],qa=V[10],ra=V[11];V!==O&&(O[0]=V[0],O[1]=V[1],
O[2]=V[2],O[3]=V[3],O[12]=V[12],O[13]=V[13],O[14]=V[14],O[15]=V[15]);O[4]=Y*ja+ia*R;O[5]=aa*ja+na*R;O[6]=ca*ja+qa*R;O[7]=ka*ja+ra*R;O[8]=ia*ja-Y*R;O[9]=na*ja-aa*R;O[10]=qa*ja-ca*R;O[11]=ra*ja-ka*R;return O}function a(O,V,ja){const R=Math.sin(ja);ja=Math.cos(ja);const Y=V[0],aa=V[1],ca=V[2],ka=V[3],ia=V[8],na=V[9],qa=V[10],ra=V[11];V!==O&&(O[4]=V[4],O[5]=V[5],O[6]=V[6],O[7]=V[7],O[12]=V[12],O[13]=V[13],O[14]=V[14],O[15]=V[15]);O[0]=Y*ja-ia*R;O[1]=aa*ja-na*R;O[2]=ca*ja-qa*R;O[3]=ka*ja-ra*R;O[8]=Y*R+
ia*ja;O[9]=aa*R+na*ja;O[10]=ca*R+qa*ja;O[11]=ka*R+ra*ja;return O}function c(O,V,ja){const R=Math.sin(ja);ja=Math.cos(ja);const Y=V[0],aa=V[1],ca=V[2],ka=V[3],ia=V[4],na=V[5],qa=V[6],ra=V[7];V!==O&&(O[8]=V[8],O[9]=V[9],O[10]=V[10],O[11]=V[11],O[12]=V[12],O[13]=V[13],O[14]=V[14],O[15]=V[15]);O[0]=Y*ja+ia*R;O[1]=aa*ja+na*R;O[2]=ca*ja+qa*R;O[3]=ka*ja+ra*R;O[4]=ia*ja-Y*R;O[5]=na*ja-aa*R;O[6]=qa*ja-ca*R;O[7]=ra*ja-ka*R;return O}function g(O,V){O[0]=1;O[1]=0;O[2]=0;O[3]=0;O[4]=0;O[5]=1;O[6]=0;O[7]=0;O[8]=
0;O[9]=0;O[10]=1;O[11]=0;O[12]=V[0];O[13]=V[1];O[14]=V[2];O[15]=1;return O}function r(O,V){O[0]=V[0];O[1]=0;O[2]=0;O[3]=0;O[4]=0;O[5]=V[1];O[6]=0;O[7]=0;O[8]=0;O[9]=0;O[10]=V[2];O[11]=0;O[12]=0;O[13]=0;O[14]=0;O[15]=1;return O}function u(O,V,ja){let R=ja[0],Y=ja[1];ja=ja[2];let aa=Math.sqrt(R*R+Y*Y+ja*ja),ca=void 0,ka=void 0,ia=void 0;if(aa<m.EPSILON)return null;aa=1/aa;R*=aa;Y*=aa;ja*=aa;ca=Math.sin(V);ka=Math.cos(V);ia=1-ka;O[0]=R*R*ia+ka;O[1]=Y*R*ia+ja*ca;O[2]=ja*R*ia-Y*ca;O[3]=0;O[4]=R*Y*ia-ja*
ca;O[5]=Y*Y*ia+ka;O[6]=ja*Y*ia+R*ca;O[7]=0;O[8]=R*ja*ia+Y*ca;O[9]=Y*ja*ia-R*ca;O[10]=ja*ja*ia+ka;O[11]=0;O[12]=0;O[13]=0;O[14]=0;O[15]=1;return O}function w(O,V){const ja=Math.sin(V);V=Math.cos(V);O[0]=1;O[1]=0;O[2]=0;O[3]=0;O[4]=0;O[5]=V;O[6]=ja;O[7]=0;O[8]=0;O[9]=-ja;O[10]=V;O[11]=0;O[12]=0;O[13]=0;O[14]=0;O[15]=1;return O}function v(O,V){const ja=Math.sin(V);V=Math.cos(V);O[0]=V;O[1]=0;O[2]=-ja;O[3]=0;O[4]=0;O[5]=1;O[6]=0;O[7]=0;O[8]=ja;O[9]=0;O[10]=V;O[11]=0;O[12]=0;O[13]=0;O[14]=0;O[15]=1;return O}
function D(O,V){const ja=Math.sin(V);V=Math.cos(V);O[0]=V;O[1]=ja;O[2]=0;O[3]=0;O[4]=-ja;O[5]=V;O[6]=0;O[7]=0;O[8]=0;O[9]=0;O[10]=1;O[11]=0;O[12]=0;O[13]=0;O[14]=0;O[15]=1;return O}function B(O,V,ja){var R=V[0],Y=V[1],aa=V[2],ca=V[3],ka=R+R,ia=Y+Y;const na=aa+aa;V=R*ka;const qa=R*ia;R*=na;const ra=Y*ia;Y*=na;aa*=na;ka*=ca;ia*=ca;ca*=na;O[0]=1-(ra+aa);O[1]=qa+ca;O[2]=R-ia;O[3]=0;O[4]=qa-ca;O[5]=1-(V+aa);O[6]=Y+ka;O[7]=0;O[8]=R+ia;O[9]=Y-ka;O[10]=1-(V+ra);O[11]=0;O[12]=ja[0];O[13]=ja[1];O[14]=ja[2];
O[15]=1;return O}function C(O,V){const ja=ua,R=-V[0],Y=-V[1],aa=-V[2],ca=V[3],ka=V[4],ia=V[5],na=V[6],qa=V[7],ra=R*R+Y*Y+aa*aa+ca*ca;0<ra?(ja[0]=2*(ka*ca+qa*R+ia*aa-na*Y)/ra,ja[1]=2*(ia*ca+qa*Y+na*R-ka*aa)/ra,ja[2]=2*(na*ca+qa*aa+ka*Y-ia*R)/ra):(ja[0]=2*(ka*ca+qa*R+ia*aa-na*Y),ja[1]=2*(ia*ca+qa*Y+na*R-ka*aa),ja[2]=2*(na*ca+qa*aa+ka*Y-ia*R));B(O,V,ja);return O}function A(O,V){O[0]=V[12];O[1]=V[13];O[2]=V[14];return O}function E(O,V){const ja=V[0],R=V[1],Y=V[2],aa=V[4],ca=V[5],ka=V[6],ia=V[8],na=V[9];
V=V[10];O[0]=Math.sqrt(ja*ja+R*R+Y*Y);O[1]=Math.sqrt(aa*aa+ca*ca+ka*ka);O[2]=Math.sqrt(ia*ia+na*na+V*V);return O}function G(O,V){const ja=V[0]+V[5]+V[10];let R=0;0<ja?(R=2*Math.sqrt(ja+1),O[3]=.25*R,O[0]=(V[6]-V[9])/R,O[1]=(V[8]-V[2])/R,O[2]=(V[1]-V[4])/R):V[0]>V[5]&&V[0]>V[10]?(R=2*Math.sqrt(1+V[0]-V[5]-V[10]),O[3]=(V[6]-V[9])/R,O[0]=.25*R,O[1]=(V[1]+V[4])/R,O[2]=(V[8]+V[2])/R):V[5]>V[10]?(R=2*Math.sqrt(1+V[5]-V[0]-V[10]),O[3]=(V[8]-V[2])/R,O[0]=(V[1]+V[4])/R,O[1]=.25*R,O[2]=(V[6]+V[9])/R):(R=2*
Math.sqrt(1+V[10]-V[0]-V[5]),O[3]=(V[1]-V[4])/R,O[0]=(V[8]+V[2])/R,O[1]=(V[6]+V[9])/R,O[2]=.25*R);return O}function H(O,V,ja,R){var Y=V[0],aa=V[1],ca=V[2],ka=V[3],ia=Y+Y,na=aa+aa,qa=ca+ca;V=Y*ia;const ra=Y*na;Y*=qa;const xa=aa*na;aa*=qa;ca*=qa;ia*=ka;na*=ka;ka*=qa;qa=R[0];const ya=R[1];R=R[2];O[0]=(1-(xa+ca))*qa;O[1]=(ra+ka)*qa;O[2]=(Y-na)*qa;O[3]=0;O[4]=(ra-ka)*ya;O[5]=(1-(V+ca))*ya;O[6]=(aa+ia)*ya;O[7]=0;O[8]=(Y+na)*R;O[9]=(aa-ia)*R;O[10]=(1-(V+xa))*R;O[11]=0;O[12]=ja[0];O[13]=ja[1];O[14]=ja[2];
O[15]=1;return O}function K(O,V,ja,R,Y){var aa=V[0],ca=V[1],ka=V[2],ia=V[3],na=aa+aa,qa=ca+ca,ra=ka+ka;V=aa*na;var xa=aa*qa,ya=aa*ra;aa=ca*qa;ca*=ra;var Aa=ka*ra;ka=ia*na;qa*=ia;const Ba=ia*ra;var Ca=R[0],Ka=R[1];ra=R[2];R=Y[0];ia=Y[1];Y=Y[2];na=(1-(aa+Aa))*Ca;const Ga=(xa+Ba)*Ca;Ca*=ya-qa;xa=(xa-Ba)*Ka;Aa=(1-(V+Aa))*Ka;Ka*=ca+ka;ya=(ya+qa)*ra;ca=(ca-ka)*ra;V=(1-(V+aa))*ra;O[0]=na;O[1]=Ga;O[2]=Ca;O[3]=0;O[4]=xa;O[5]=Aa;O[6]=Ka;O[7]=0;O[8]=ya;O[9]=ca;O[10]=V;O[11]=0;O[12]=ja[0]+R-(na*R+xa*ia+ya*Y);
O[13]=ja[1]+ia-(Ga*R+Aa*ia+ca*Y);O[14]=ja[2]+Y-(Ca*R+Ka*ia+V*Y);O[15]=1;return O}function J(O,V){var ja=V[0],R=V[1],Y=V[2];V=V[3];var aa=ja+ja,ca=R+R;const ka=Y+Y;ja*=aa;const ia=R*aa;R*=ca;const na=Y*aa,qa=Y*ca;Y*=ka;aa*=V;ca*=V;V*=ka;O[0]=1-R-Y;O[1]=ia+V;O[2]=na-ca;O[3]=0;O[4]=ia-V;O[5]=1-ja-Y;O[6]=qa+aa;O[7]=0;O[8]=na+ca;O[9]=qa-aa;O[10]=1-ja-R;O[11]=0;O[12]=0;O[13]=0;O[14]=0;O[15]=1;return O}function F(O,V,ja,R,Y,aa,ca){const ka=1/(ja-V),ia=1/(Y-R),na=1/(aa-ca);O[0]=2*aa*ka;O[1]=0;O[2]=0;O[3]=
0;O[4]=0;O[5]=2*aa*ia;O[6]=0;O[7]=0;O[8]=(ja+V)*ka;O[9]=(Y+R)*ia;O[10]=(ca+aa)*na;O[11]=-1;O[12]=0;O[13]=0;O[14]=ca*aa*2*na;O[15]=0;return O}function N(O,V,ja,R,Y){V=1/Math.tan(V/2);let aa=void 0;O[0]=V/ja;O[1]=0;O[2]=0;O[3]=0;O[4]=0;O[5]=V;O[6]=0;O[7]=0;O[8]=0;O[9]=0;O[11]=-1;O[12]=0;O[13]=0;O[15]=0;null!=Y&&Infinity!==Y?(aa=1/(R-Y),O[10]=(Y+R)*aa,O[14]=2*Y*R*aa):(O[10]=-1,O[14]=-2*R);return O}function L(O,V,ja,R){const Y=Math.tan(V.upDegrees*Math.PI/180),aa=Math.tan(V.downDegrees*Math.PI/180),ca=
Math.tan(V.leftDegrees*Math.PI/180);V=Math.tan(V.rightDegrees*Math.PI/180);const ka=2/(ca+V),ia=2/(Y+aa);O[0]=ka;O[1]=0;O[2]=0;O[3]=0;O[4]=0;O[5]=ia;O[6]=0;O[7]=0;O[8]=-((ca-V)*ka*.5);O[9]=(Y-aa)*ia*.5;O[10]=R/(ja-R);O[11]=-1;O[12]=0;O[13]=0;O[14]=R*ja/(ja-R);O[15]=0;return O}function M(O,V,ja,R,Y,aa,ca){const ka=1/(V-ja),ia=1/(R-Y),na=1/(aa-ca);O[0]=-2*ka;O[1]=0;O[2]=0;O[3]=0;O[4]=0;O[5]=-2*ia;O[6]=0;O[7]=0;O[8]=0;O[9]=0;O[10]=2*na;O[11]=0;O[12]=(V+ja)*ka;O[13]=(Y+R)*ia;O[14]=(ca+aa)*na;O[15]=1;
return O}function S(O,V,ja,R){let Y=void 0,aa=void 0;var ca=void 0,ka=void 0;let ia=void 0,na=void 0;var qa=void 0,ra=void 0;let xa=void 0,ya=void 0;const Aa=V[0],Ba=V[1];V=V[2];ca=R[0];ka=R[1];R=R[2];qa=ja[0];ra=ja[1];ja=ja[2];if(Math.abs(Aa-qa)<m.EPSILON&&Math.abs(Ba-ra)<m.EPSILON&&Math.abs(V-ja)<m.EPSILON)return x(O);qa=Aa-qa;ra=Ba-ra;xa=V-ja;ya=1/Math.sqrt(qa*qa+ra*ra+xa*xa);qa*=ya;ra*=ya;xa*=ya;Y=ka*xa-R*ra;aa=R*qa-ca*xa;ca=ca*ra-ka*qa;(ya=Math.sqrt(Y*Y+aa*aa+ca*ca))?(ya=1/ya,Y*=ya,aa*=ya,ca*=
ya):ca=aa=Y=0;ka=ra*ca-xa*aa;ia=xa*Y-qa*ca;na=qa*aa-ra*Y;(ya=Math.sqrt(ka*ka+ia*ia+na*na))?(ya=1/ya,ka*=ya,ia*=ya,na*=ya):na=ia=ka=0;O[0]=Y;O[1]=ka;O[2]=qa;O[3]=0;O[4]=aa;O[5]=ia;O[6]=ra;O[7]=0;O[8]=ca;O[9]=na;O[10]=xa;O[11]=0;O[12]=-(Y*Aa+aa*Ba+ca*V);O[13]=-(ka*Aa+ia*Ba+na*V);O[14]=-(qa*Aa+ra*Ba+xa*V);O[15]=1;return O}function Q(O,V,ja,R){const Y=V[0],aa=V[1];V=V[2];var ca=R[0];const ka=R[1];var ia=R[2];R=Y-ja[0];let na=aa-ja[1];ja=V-ja[2];let qa=R*R+na*na+ja*ja;0<qa&&(qa=1/Math.sqrt(qa),R*=qa,na*=
qa,ja*=qa);let ra=ka*ja-ia*na;ia=ia*R-ca*ja;ca=ca*na-ka*R;qa=ra*ra+ia*ia+ca*ca;0<qa&&(qa=1/Math.sqrt(qa),ra*=qa,ia*=qa,ca*=qa);O[0]=ra;O[1]=ia;O[2]=ca;O[3]=0;O[4]=na*ca-ja*ia;O[5]=ja*ra-R*ca;O[6]=R*ia-na*ra;O[7]=0;O[8]=R;O[9]=na;O[10]=ja;O[11]=0;O[12]=Y;O[13]=aa;O[14]=V;O[15]=1;return O}function U(O){return"mat4("+O[0]+", "+O[1]+", "+O[2]+", "+O[3]+", "+O[4]+", "+O[5]+", "+O[6]+", "+O[7]+", "+O[8]+", "+O[9]+", "+O[10]+", "+O[11]+", "+O[12]+", "+O[13]+", "+O[14]+", "+O[15]+")"}function W(O){return Math.sqrt(O[0]**
2+O[1]**2+O[2]**2+O[3]**2+O[4]**2+O[5]**2+O[6]**2+O[7]**2+O[8]**2+O[9]**2+O[10]**2+O[11]**2+O[12]**2+O[13]**2+O[14]**2+O[15]**2)}function fa(O,V,ja){O[0]=V[0]+ja[0];O[1]=V[1]+ja[1];O[2]=V[2]+ja[2];O[3]=V[3]+ja[3];O[4]=V[4]+ja[4];O[5]=V[5]+ja[5];O[6]=V[6]+ja[6];O[7]=V[7]+ja[7];O[8]=V[8]+ja[8];O[9]=V[9]+ja[9];O[10]=V[10]+ja[10];O[11]=V[11]+ja[11];O[12]=V[12]+ja[12];O[13]=V[13]+ja[13];O[14]=V[14]+ja[14];O[15]=V[15]+ja[15];return O}function Z(O,V,ja){O[0]=V[0]-ja[0];O[1]=V[1]-ja[1];O[2]=V[2]-ja[2];O[3]=
V[3]-ja[3];O[4]=V[4]-ja[4];O[5]=V[5]-ja[5];O[6]=V[6]-ja[6];O[7]=V[7]-ja[7];O[8]=V[8]-ja[8];O[9]=V[9]-ja[9];O[10]=V[10]-ja[10];O[11]=V[11]-ja[11];O[12]=V[12]-ja[12];O[13]=V[13]-ja[13];O[14]=V[14]-ja[14];O[15]=V[15]-ja[15];return O}function T(O,V,ja){O[0]=V[0]*ja;O[1]=V[1]*ja;O[2]=V[2]*ja;O[3]=V[3]*ja;O[4]=V[4]*ja;O[5]=V[5]*ja;O[6]=V[6]*ja;O[7]=V[7]*ja;O[8]=V[8]*ja;O[9]=V[9]*ja;O[10]=V[10]*ja;O[11]=V[11]*ja;O[12]=V[12]*ja;O[13]=V[13]*ja;O[14]=V[14]*ja;O[15]=V[15]*ja;return O}function ba(O,V,ja,R){O[0]=
V[0]+ja[0]*R;O[1]=V[1]+ja[1]*R;O[2]=V[2]+ja[2]*R;O[3]=V[3]+ja[3]*R;O[4]=V[4]+ja[4]*R;O[5]=V[5]+ja[5]*R;O[6]=V[6]+ja[6]*R;O[7]=V[7]+ja[7]*R;O[8]=V[8]+ja[8]*R;O[9]=V[9]+ja[9]*R;O[10]=V[10]+ja[10]*R;O[11]=V[11]+ja[11]*R;O[12]=V[12]+ja[12]*R;O[13]=V[13]+ja[13]*R;O[14]=V[14]+ja[14]*R;O[15]=V[15]+ja[15]*R;return O}function ha(O,V){return O[0]===V[0]&&O[1]===V[1]&&O[2]===V[2]&&O[3]===V[3]&&O[4]===V[4]&&O[5]===V[5]&&O[6]===V[6]&&O[7]===V[7]&&O[8]===V[8]&&O[9]===V[9]&&O[10]===V[10]&&O[11]===V[11]&&O[12]===
V[12]&&O[13]===V[13]&&O[14]===V[14]&&O[15]===V[15]}function sa(O,V){const ja=O[0],R=O[1],Y=O[2],aa=O[3],ca=O[4],ka=O[5],ia=O[6],na=O[7],qa=O[8],ra=O[9],xa=O[10],ya=O[11],Aa=O[12],Ba=O[13],Ca=O[14];O=O[15];const Ka=V[0],Ga=V[1],Ja=V[2],Ha=V[3],Ia=V[4],Sa=V[5],va=V[6],fb=V[7],hb=V[8],cb=V[9],I=V[10],Va=V[11],Ua=V[12],Ta=V[13],jb=V[14];V=V[15];return Math.abs(ja-Ka)<=m.EPSILON*Math.max(1,Math.abs(ja),Math.abs(Ka))&&Math.abs(R-Ga)<=m.EPSILON*Math.max(1,Math.abs(R),Math.abs(Ga))&&Math.abs(Y-Ja)<=m.EPSILON*
Math.max(1,Math.abs(Y),Math.abs(Ja))&&Math.abs(aa-Ha)<=m.EPSILON*Math.max(1,Math.abs(aa),Math.abs(Ha))&&Math.abs(ca-Ia)<=m.EPSILON*Math.max(1,Math.abs(ca),Math.abs(Ia))&&Math.abs(ka-Sa)<=m.EPSILON*Math.max(1,Math.abs(ka),Math.abs(Sa))&&Math.abs(ia-va)<=m.EPSILON*Math.max(1,Math.abs(ia),Math.abs(va))&&Math.abs(na-fb)<=m.EPSILON*Math.max(1,Math.abs(na),Math.abs(fb))&&Math.abs(qa-hb)<=m.EPSILON*Math.max(1,Math.abs(qa),Math.abs(hb))&&Math.abs(ra-cb)<=m.EPSILON*Math.max(1,Math.abs(ra),Math.abs(cb))&&Math.abs(xa-
I)<=m.EPSILON*Math.max(1,Math.abs(xa),Math.abs(I))&&Math.abs(ya-Va)<=m.EPSILON*Math.max(1,Math.abs(ya),Math.abs(Va))&&Math.abs(Aa-Ua)<=m.EPSILON*Math.max(1,Math.abs(Aa),Math.abs(Ua))&&Math.abs(Ba-Ta)<=m.EPSILON*Math.max(1,Math.abs(Ba),Math.abs(Ta))&&Math.abs(Ca-jb)<=m.EPSILON*Math.max(1,Math.abs(Ca),Math.abs(jb))&&Math.abs(O-V)<=m.EPSILON*Math.max(1,Math.abs(O),Math.abs(V))}const ua=k.create();k=Object.freeze({__proto__:null,copy:z,set:y,identity:x,transpose:f,invert:h,adjoint:e,determinant:l,multiply:q,
translate:p,scale:n,rotate:d,rotateX:b,rotateY:a,rotateZ:c,fromTranslation:g,fromScaling:r,fromRotation:u,fromXRotation:w,fromYRotation:v,fromZRotation:D,fromRotationTranslation:B,fromQuat2:C,getTranslation:A,getScaling:E,getRotation:G,fromRotationTranslationScale:H,fromRotationTranslationScaleOrigin:K,fromQuat:J,frustum:F,perspective:N,perspectiveFromFieldOfView:L,ortho:M,lookAt:S,targetTo:Q,str:U,frob:W,add:fa,subtract:Z,multiplyScalar:T,multiplyScalarAndAdd:ba,exactEquals:ha,equals:sa,mul:q,sub:Z});
t.add=fa;t.adjoint=e;t.copy=z;t.determinant=l;t.equals=sa;t.exactEquals=ha;t.frob=W;t.fromQuat=J;t.fromQuat2=C;t.fromRotation=u;t.fromRotationTranslation=B;t.fromRotationTranslationScale=H;t.fromRotationTranslationScaleOrigin=K;t.fromScaling=r;t.fromTranslation=g;t.fromXRotation=w;t.fromYRotation=v;t.fromZRotation=D;t.frustum=F;t.getRotation=G;t.getScaling=E;t.getTranslation=A;t.identity=x;t.invert=h;t.lookAt=S;t.mat4=k;t.mul=q;t.multiply=q;t.multiplyScalar=T;t.multiplyScalarAndAdd=ba;t.ortho=M;t.perspective=
N;t.perspectiveFromFieldOfView=L;t.rotate=d;t.rotateX=b;t.rotateY=a;t.rotateZ=c;t.scale=n;t.set=y;t.str=U;t.sub=Z;t.subtract=Z;t.targetTo=Q;t.translate=p;t.transpose=f})},"esri/chunks/pe":function(){define(["require","exports","./_rollupPluginBabelHelpers","../core/has","../assets"],function(t,k,m,z,y){function x(){return!!k._pe}function f(){return!!z("esri-wasm")}function h(){return d?d:d=(new Promise(function(a,c){t(["./pe-wasm"],a,c)})).then(function(a){return a.peWasm}).then(({default:a})=>a({locateFile:c=>
y.getAssetUrl(`esri/geometry/support/${c}`)})).then(a=>{e(a)})}function e(a){function c(u,w,v){u[w]=v(u[w])}k._pe=a;k.PeDefs.init();k.PeGTlistExtended.init();k.PeNotationMgrs.init();k.PeNotationUtm.init();k.PePCSInfo.init();k.PeGCSExtent=function(u){function w(){return u.apply(this,arguments)||this}m._inheritsLoose(w,u);w.prototype.destroy=function(){k._pe.destroy(this)};return w}(k._pe.PeGCSExtent);a=[k._pe.PeDatum,k._pe.PeGeogcs,k._pe.PeGeogtran,k._pe.PeObject,k._pe.PeParameter,k._pe.PePrimem,k._pe.PeProjcs,
k._pe.PeSpheroid,k._pe.PeUnit];for(var g of a)c(g.prototype,"getName",u=>function(){return u.call(this,Array(k.PeDefs.PE_NAME_MAX))});for(const u of[k._pe.PeGeogtran,k._pe.PeProjcs])c(u.prototype,"getParameters",w=>function(){const v=Array(k.PeDefs.PE_PARM_MAX);let D=w.call(this);for(let B=0;B<v.length;B++){const C=k._pe.getValue(D,"*");v[B]=C?k._pe.wrapPointer(C,k._pe.PeParameter):null;D+=Int32Array.BYTES_PER_ELEMENT}return v});c(k._pe.PeHorizon.prototype,"getCoord",u=>function(){const w=this.getSize();
if(!w)return null;const v=[],D=u.call(this);n(v,w,D);return v});c(k._pe.PeGTlistExtendedEntry.prototype,"getEntries",u=>{const w=k._pe._pe_getPeGTlistExtendedGTsSize();return function(){let v=null;var D=u.call(this);if(!k._pe.compare(D,k._pe.NULL)){v=[D];const B=this.getSteps();if(1<B){D=k._pe.getPointer(D);for(let C=1;C<B;C++)v.push(k._pe.wrapPointer(D+w*C,k._pe.PeGTlistExtendedGTs))}}return v}});const r=k._pe._pe_getPeHorizonSize();g=u=>function(){let w=this._cache;w||(this._cache=w=new Map);if(w.has(u))return w.get(u);
let v=null;var D=u.call(this);if(!k._pe.compare(D,k._pe.NULL)){v=[D];const B=D.getNump();if(1<B){D=k._pe.getPointer(D);for(let C=1;C<B;C++)v.push(k._pe.wrapPointer(D+r*C,k._pe.PeHorizon))}}w.set(u,v);return v};c(k._pe.PeProjcs.prototype,"horizonGcsGenerate",g);c(k._pe.PeProjcs.prototype,"horizonPcsGenerate",g);k._pe.PeObject.prototype.toString=function(u=k.PeDefs.PE_STR_OPTS_NONE){k._pe.ensureCache.prepare();const w=k._pe.getPointer(this),v=k._pe.ensureInt8(Array(k.PeDefs.PE_BUFFER_MAX));return k._pe.UTF8ToString(k._pe._pe_object_to_string_ext(w,
u,v))}}function l(a){if(a){var c=k._pe.getClass(a);c&&(c=k._pe.getCache(c))&&(a=k._pe.getPointer(a))&&delete c[a]}}function q(a,c){const g=[];c=Array(c);for(let r=0;r<a;r++)g.push(k._pe.ensureInt8(c));return g}function p(a){let c;Array.isArray(a[0])?(c=[],a.forEach(g=>{c.push(g[0],g[1])})):c=a;return c}function n(a,c,g,r=!1){if(r)for(r=0;r<2*c;r++)a[r]=k._pe.getValue(g+r*Float64Array.BYTES_PER_ELEMENT,"double");else{r=0===a.length;for(let u=0;u<c;u++)r&&(a[u]=Array(2)),a[u][0]=k._pe.getValue(g,"double"),
a[u][1]=k._pe.getValue(g+Float64Array.BYTES_PER_ELEMENT,"double"),g+=2*Float64Array.BYTES_PER_ELEMENT}}let d;k._pe=null;(function(a){function c(u,w,v){k._pe.ensureCache.prepare();var D=p(v);const B=v===D;D=k._pe.ensureFloat64(D);(u=k._pe._pe_geog_to_proj(k._pe.getPointer(u),w,D))&&n(v,w,D,B);return u}function g(u,w,v){return r(u,w,v,0)}function r(u,w,v,D){k._pe.ensureCache.prepare();var B=p(v);const C=v===B;B=k._pe.ensureFloat64(B);(u=k._pe._pe_proj_to_geog_center(k._pe.getPointer(u),w,B,D))&&n(v,
w,B,C);return u}a.geogToProj=c;a.projGeog=function(u,w,v,D){switch(D){case k.PeDefs.PE_TRANSFORM_P_TO_G:return g(u,w,v);case k.PeDefs.PE_TRANSFORM_G_TO_P:return c(u,w,v)}return 0};a.projToGeog=g;a.projToGeogCenter=r})(k.PeCSTransformations||(k.PeCSTransformations={}));(function(a){a.init=function(){a.PE_BUFFER_MAX=k._pe.PeDefs.prototype.PE_BUFFER_MAX;a.PE_NAME_MAX=k._pe.PeDefs.prototype.PE_NAME_MAX;a.PE_MGRS_MAX=k._pe.PeDefs.prototype.PE_MGRS_MAX;a.PE_USNG_MAX=k._pe.PeDefs.prototype.PE_USNG_MAX;a.PE_DD_MAX=
k._pe.PeDefs.prototype.PE_DD_MAX;a.PE_DDM_MAX=k._pe.PeDefs.prototype.PE_DDM_MAX;a.PE_DMS_MAX=k._pe.PeDefs.prototype.PE_DMS_MAX;a.PE_UTM_MAX=k._pe.PeDefs.prototype.PE_UTM_MAX;a.PE_PARM_MAX=k._pe.PeDefs.prototype.PE_PARM_MAX;a.PE_TYPE_NONE=k._pe.PeDefs.prototype.PE_TYPE_NONE;a.PE_TYPE_GEOGCS=k._pe.PeDefs.prototype.PE_TYPE_GEOGCS;a.PE_TYPE_PROJCS=k._pe.PeDefs.prototype.PE_TYPE_PROJCS;a.PE_TYPE_GEOGTRAN=k._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;a.PE_TYPE_COORDSYS=k._pe.PeDefs.prototype.PE_TYPE_COORDSYS;
a.PE_TYPE_UNIT=k._pe.PeDefs.prototype.PE_TYPE_UNIT;a.PE_TYPE_LINUNIT=k._pe.PeDefs.prototype.PE_TYPE_LINUNIT;a.PE_STR_OPTS_NONE=k._pe.PeDefs.prototype.PE_STR_OPTS_NONE;a.PE_STR_AUTH_NONE=k._pe.PeDefs.prototype.PE_STR_AUTH_NONE;a.PE_STR_AUTH_TOP=k._pe.PeDefs.prototype.PE_STR_AUTH_TOP;a.PE_STR_NAME_CANON=k._pe.PeDefs.prototype.PE_STR_NAME_CANON;a.PE_PARM_X0=k._pe.PeDefs.prototype.PE_PARM_X0;a.PE_PARM_ND=k._pe.PeDefs.prototype.PE_PARM_ND;a.PE_TRANSFORM_1_TO_2=k._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;
a.PE_TRANSFORM_2_TO_1=k._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;a.PE_TRANSFORM_P_TO_G=k._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;a.PE_TRANSFORM_G_TO_P=k._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;a.PE_HORIZON_RECT=k._pe.PeDefs.prototype.PE_HORIZON_RECT;a.PE_HORIZON_POLY=k._pe.PeDefs.prototype.PE_HORIZON_POLY;a.PE_HORIZON_LINE=k._pe.PeDefs.prototype.PE_HORIZON_LINE;a.PE_HORIZON_DELTA=k._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(k.PeDefs||(k.PeDefs={}));(function(a){function c(w,v){let D=null,B=g[w];B||
(B={},g[w]=B);B.hasOwnProperty(String(v))?D=B[v]:(w=k._pe.PeFactory.prototype.factoryByType(w,v),k._pe.compare(w,k._pe.NULL)||(D=w,B[v]=D));return D=u(D)}const g={},r={},u=w=>{if(w){const v=w.getType();switch(v){case k.PeDefs.PE_TYPE_GEOGCS:w=k._pe.castObject(w,k._pe.PeGeogcs);break;case k.PeDefs.PE_TYPE_PROJCS:w=k._pe.castObject(w,k._pe.PeProjcs);break;case k.PeDefs.PE_TYPE_GEOGTRAN:w=k._pe.castObject(w,k._pe.PeGeogtran);break;default:v&k.PeDefs.PE_TYPE_UNIT&&(w=k._pe.castObject(w,k._pe.PeUnit))}}return w};
a.initialize=function(){k._pe.PeFactory.prototype.initialize(null)};a.coordsys=function(w){return c(k.PeDefs.PE_TYPE_COORDSYS,w)};a.factoryByType=c;a.fromString=function(w,v){let D=null,B=r[w];B||(B={},r[w]=B);B.hasOwnProperty(v)?D=B[v]:(w=k._pe.PeFactory.prototype.fromString(w,v),k._pe.compare(w,k._pe.NULL)||(D=w,B[v]=D));return D=u(D)};a.geogcs=function(w){return c(k.PeDefs.PE_TYPE_GEOGCS,w)};a.geogtran=function(w){return c(k.PeDefs.PE_TYPE_GEOGTRAN,w)};a.getCode=function(w){return k._pe.PeFactory.prototype.getCode(w)};
a.projcs=function(w){return c(k.PeDefs.PE_TYPE_PROJCS,w)};a.unit=function(w){return c(k.PeDefs.PE_TYPE_UNIT,w)}})(k.PeFactory||(k.PeFactory={}));k.PeGCSExtent=null;(function(a){let c;a.init=function(){a.PE_GTLIST_OPTS_COMMON=k._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;c=k._pe._pe_getPeGTlistExtendedEntrySize()};a.getGTlist=function(g,r,u,w,v,D){let B=null;const C=new k._pe.PeInteger(D);try{const A=k._pe.PeGTlistExtended.prototype.getGTlist(g,r,u,w,v,C);if(D=C.val)if(B=[A],1<D){const E=
k._pe.getPointer(A);for(g=1;g<D;g++)B.push(k._pe.wrapPointer(E+c*g,k._pe.PeGTlistExtendedEntry))}}finally{k._pe.destroy(C)}return B}})(k.PeGTlistExtended||(k.PeGTlistExtended={}));(function(a){a.destroy=function(c){if(c&&c.length){for(const g of c)l(g),g.getEntries().forEach(r=>{l(r);r=r.getGeogtran();l(r);r.getParameters().forEach(l);[r.getGeogcs1(),r.getGeogcs2()].forEach(u=>{l(u);const w=u.getDatum();l(w);l(w.getSpheroid());l(u.getPrimem());l(u.getUnit())})});k._pe.PeGTlistExtendedEntry.prototype.Delete(c[0])}}})(k.PeGTlistExtendedEntry||
(k.PeGTlistExtendedEntry={}));(function(a){a.geogToGeog=function(c,g,r,u,w){k._pe.ensureCache.prepare();var v=p(r);const D=r===v;v=k._pe.ensureFloat64(v);let B=0;u&&(B=k._pe.ensureFloat64(u));(c=k._pe._pe_geog_to_geog(k._pe.getPointer(c),g,v,B,w))&&n(r,g,v,D);return c}})(k.PeGTTransformations||(k.PeGTTransformations={}));(function(a){const c=(r,u,w,v,D,B)=>{k._pe.ensureCache.prepare();switch(r){case "dd":var C=k._pe._pe_geog_to_dd;var A=k.PeDefs.PE_DD_MAX;break;case "ddm":C=k._pe._pe_geog_to_ddm;
A=k.PeDefs.PE_DDM_MAX;break;case "dms":C=k._pe._pe_geog_to_dms,A=k.PeDefs.PE_DMS_MAX}r=0;u&&(r=k._pe.getPointer(u));u=p(v);u=k._pe.ensureFloat64(u);A=q(w,A);v=k._pe.ensureInt32(A);if(D=C(r,w,u,D,v))for(C=0;C<w;C++)B[C]=k._pe.UTF8ToString(A[C]);return D},g=(r,u,w,v,D)=>{k._pe.ensureCache.prepare();switch(r){case "dd":var B=k._pe._pe_dd_to_geog;break;case "ddm":B=k._pe._pe_ddm_to_geog;break;case "dms":B=k._pe._pe_dms_to_geog}r=0;u&&(r=k._pe.getPointer(u));u=v.map(C=>k._pe.ensureString(C));v=k._pe.ensureInt32(u);
u=k._pe.ensureFloat64(Array(2*w));(B=B(r,w,v,u))&&n(D,w,u);return B};a.geog_to_dms=function(r,u,w,v,D){return c("dms",r,u,w,v,D)};a.dms_to_geog=function(r,u,w,v){return g("dms",r,u,w,v)};a.geog_to_ddm=function(r,u,w,v,D){return c("ddm",r,u,w,v,D)};a.ddm_to_geog=function(r,u,w,v){return g("ddm",r,u,w,v)};a.geog_to_dd=function(r,u,w,v,D){return c("dd",r,u,w,v,D)};a.dd_to_geog=function(r,u,w,v){return g("dd",r,u,w,v)}})(k.PeNotationDms||(k.PeNotationDms={}));(function(a){a.init=function(){a.PE_MGRS_STYLE_NEW=
k._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;a.PE_MGRS_STYLE_OLD=k._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;a.PE_MGRS_STYLE_AUTO=k._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;a.PE_MGRS_180_ZONE_1_PLUS=k._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;a.PE_MGRS_ADD_SPACES=k._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};a.geog_to_mgrs_extended=function(c,g,r,u,w,v,D){k._pe.ensureCache.prepare();let B=0;c&&(B=k._pe.getPointer(c));c=p(r);r=k._pe.ensureFloat64(c);c=q(g,k.PeDefs.PE_MGRS_MAX);
const C=k._pe.ensureInt32(c);if(u=k._pe._pe_geog_to_mgrs_extended(B,g,r,u,w,v,C))for(w=0;w<g;w++)D[w]=k._pe.UTF8ToString(c[w]);return u};a.mgrs_to_geog_extended=function(c,g,r,u,w){k._pe.ensureCache.prepare();let v=0;c&&(v=k._pe.getPointer(c));c=r.map(D=>k._pe.ensureString(D));r=k._pe.ensureInt32(c);c=k._pe.ensureFloat64(Array(2*g));(u=k._pe._pe_mgrs_to_geog_extended(v,g,r,u,c))&&n(w,g,c);return u}})(k.PeNotationMgrs||(k.PeNotationMgrs={}));(function(a){a.geog_to_usng=function(c,g,r,u,w,v,D){k._pe.ensureCache.prepare();
let B=0;c&&(B=k._pe.getPointer(c));c=p(r);r=k._pe.ensureFloat64(c);c=q(g,k.PeDefs.PE_MGRS_MAX);const C=k._pe.ensureInt32(c);if(u=k._pe._pe_geog_to_usng(B,g,r,u,w,v,C))for(w=0;w<g;w++)D[w]=k._pe.UTF8ToString(c[w]);return u};a.usng_to_geog=function(c,g,r,u){k._pe.ensureCache.prepare();var w=0;c&&(w=k._pe.getPointer(c));c=r.map(v=>k._pe.ensureString(v));r=k._pe.ensureInt32(c);c=k._pe.ensureFloat64(Array(2*g));(w=k._pe._pe_usng_to_geog(w,g,r,c))&&n(u,g,c);return w}})(k.PeNotationUsng||(k.PeNotationUsng=
{}));(function(a){a.init=function(){a.PE_UTM_OPTS_NONE=k._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;a.PE_UTM_OPTS_ADD_SPACES=k._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;a.PE_UTM_OPTS_NS=k._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};a.geog_to_utm=function(c,g,r,u,w){k._pe.ensureCache.prepare();var v=0;c&&(v=k._pe.getPointer(c));c=p(r);r=k._pe.ensureFloat64(c);c=q(g,k.PeDefs.PE_UTM_MAX);const D=k._pe.ensureInt32(c);if(u=k._pe._pe_geog_to_utm(v,g,r,u,D))for(v=0;v<g;v++)w[v]=k._pe.UTF8ToString(c[v]);
return u};a.utm_to_geog=function(c,g,r,u,w){k._pe.ensureCache.prepare();let v=0;c&&(v=k._pe.getPointer(c));c=r.map(D=>k._pe.ensureString(D));r=k._pe.ensureInt32(c);c=k._pe.ensureFloat64(Array(2*g));(u=k._pe._pe_utm_to_geog(v,g,r,u,c))&&n(w,g,c);return u}})(k.PeNotationUtm||(k.PeNotationUtm={}));(function(a){const c=new Map;a.init=function(){a.PE_PCSINFO_OPTION_NONE=k._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;a.PE_PCSINFO_OPTION_DOMAIN=k._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;a.PE_POLE_OUTSIDE_BOUNDARY=
k._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;a.PE_POLE_POINT=k._pe.PePCSInfo.prototype.PE_POLE_POINT};a.generate=function(g,r=a.PE_PCSINFO_OPTION_DOMAIN){let u,w;c.has(g)&&(w=c.get(g),w[r]&&(u=w[r]));u||(u=k._pe.PePCSInfo.prototype.generate(g,r),w||(w=[],c.set(g,w)),w[r]=u);return u}})(k.PePCSInfo||(k.PePCSInfo={}));(function(a){a.version_string=function(){return k._pe.PeVersion.prototype.version_string()}})(k.PeVersion||(k.PeVersion={}));var b=Object.freeze({__proto__:null,get _pe(){return k._pe},
isLoaded:x,isSupported:f,load:h,get PeCSTransformations(){return k.PeCSTransformations},get PeDefs(){return k.PeDefs},get PeFactory(){return k.PeFactory},get PeGCSExtent(){return k.PeGCSExtent},get PeGTlistExtended(){return k.PeGTlistExtended},get PeGTlistExtendedEntry(){return k.PeGTlistExtendedEntry},get PeGTTransformations(){return k.PeGTTransformations},get PeNotationDms(){return k.PeNotationDms},get PeNotationMgrs(){return k.PeNotationMgrs},get PeNotationUsng(){return k.PeNotationUsng},get PeNotationUtm(){return k.PeNotationUtm},
get PePCSInfo(){return k.PePCSInfo},get PeVersion(){return k.PeVersion},_init:e});k._init=e;k.isLoaded=x;k.isSupported=f;k.load=h;k.pe=b})},"esri/assets":function(){define("exports ./config ./core/Logger ./core/Error ./core/urlUtils ./request".split(" "),function(t,k,m,z,y,x){function f(e){if(!k.assetsPath)throw h.errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new z("assets:path-not-set","config.assetsPath is not set");return y.join(k.assetsPath,
e)}const h=m.getLogger("esri.assets");t.fetchAsset=function(e,l){return x(f(e),l)};t.getAssetUrl=f;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/geometry/support/geodesicConstants":function(){define(["exports","./Ellipsoid"],function(t,k){const m=Math.PI/180;var z=k.earth.radius;const y=k.earth.eccentricitySquared;z={a1:z*y,a2:z*y*z*y,a3:z*y*y/2,a4:z*y*z*y*2.5,a5:z*y+z*y*y/2,a6:1-y};k={4326:{a:k.earth.radius,f:k.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,f:0},104902:{a:6051800,
f:0},104903:{a:k.moon.radius,f:k.moon.flattening},104904:{a:3393400,f:.005207166853303471},104905:{a:k.mars.radius,f:k.mars.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1E4,f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},104914:{a:4E4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,f:3},104922:{a:18E3,
f:0},104923:{a:14E3,f:0},104924:{a:49300,f:0},104925:{a:60268E3,f:.09796243445941462},104926:{a:16E3,f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,f:0},104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,f:0},104938:{a:11E4,f:0},104939:{a:50100,f:0},104940:{a:764E3,f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},
104945:{a:578900,f:0},104946:{a:33E3,f:0},104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,f:0},104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},104961:{a:74E3,f:0},104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,
f:0},104968:{a:1352600,f:0},104969:{a:1195E3,f:0},104970:{a:593E3,f:0},104971:{a:k.mars.radius,f:0},104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};t.WKT_SPHEROID_REGEX=/SPHEROID\[([^\]]+)]/i;t.earthEllipsoidConstants=z;t.spheroids=k;t.toRadians=m;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/geometry/support/GeographicTransformation":function(){define(["./GeographicTransformationStep"],function(t){return function(){function k(z){this.steps=[];this._cached_projection=
{};this._chain="";this._gtlistentry=null;if(z&&z.steps)for(const y of z.steps)y instanceof t?this.steps.push(y):this.steps.push(new t({wkid:y.wkid,wkt:y.wkt,isInverse:y.isInverse}))}k.cacheKey=function(z,y){return[void 0!==z.wkid&&null!==z.wkid?z.wkid.toString():"-1",void 0!==z.wkt&&null!==z.wkt?z.wkt.toString():"",void 0!==y.wkid&&null!==y.wkid?y.wkid.toString():"-1",void 0!==y.wkt&&null!==y.wkt?y.wkt.toString():""].join()};k.fromGE=function(z){const y=new k;let x="";for(const f of z.steps)z=t.fromGE(f),
y.steps.push(z),x+=z.uid.toString()+",";y._cached_projection={};y._gtlistentry=null;y._chain=x;return y};var m=k.prototype;m.getInverse=function(){const z=new k;z.steps=[];for(let y=this.steps.length-1;0<=y;y--)z.steps.push(this.steps[y].getInverse());return z};m.getGTListEntry=function(){let z="";for(const y of this.steps)z+=y.uid.toString()+",";z!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=z);return this._gtlistentry};m.assignCachedGe=function(z,y,x){this._cached_projection[k.cacheKey(z,
y)]=x};m.getCachedGeTransformation=function(z,y){let x="";for(const f of this.steps)x+=f.uid.toString()+",";x!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=x);z=this._cached_projection[k.cacheKey(z,y)];return void 0===z?null:z};return k}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(t){let k=0;return function(){function m(z=null){this.uid=k++;z?(this._wkt=void 0!==z.wkt?z.wkt:null,this._wkid=
void 0!==z.wkid?z.wkid:-1,this._isInverse=void 0!==z.isInverse?!0===z.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}m.fromGE=function(z){const y=new m;y._wkt=z.wkt;y._wkid=z.wkid;y._isInverse=z.isInverse;return y};m.prototype.getInverse=function(){const z=new m;z._wkt=this.wkt;z._wkid=this._wkid;z._isInverse=!this.isInverse;return z};t._createClass(m,[{key:"wkt",get:function(){return this._wkt},set:function(z){this._wkt=z;this.uid=k++}},{key:"wkid",get:function(){return this._wkid},
set:function(z){this._wkid=z;this.uid=k++}},{key:"isInverse",get:function(){return this._isInverse},set:function(z){this._isInverse=z;this.uid=k++}}]);return m}()})},"esri/geometry/geometryAdapters/json":function(){define(["exports"],function(t){let k=function(f,h,e){this.x=f;this.y=h;this.spatialReference=e;this.m=this.z=void 0},m=function(f,h,e,l){this.rings=f;this.spatialReference=h;this.hasM=this.hasZ=void 0;e&&(this.hasZ=e);l&&(this.hasM=l)},z=function(f,h,e,l){this.paths=f;this.spatialReference=
h;this.hasM=this.hasZ=void 0;e&&(this.hasZ=e);l&&(this.hasM=l)},y=function(f,h,e,l){this.points=f;this.spatialReference=h;this.hasM=this.hasZ=void 0;e&&(this.hasZ=e);l&&(this.hasM=l)},x=function(f,h,e,l,q){this.xmin=f;this.ymin=h;this.xmax=e;this.ymax=l;this.spatialReference=q;this.mmax=this.mmin=this.zmax=this.zmin=void 0};t.jsonAdapter={convertToGEGeometry:function(f,h){return null==h?null:f.convertJSONToGeometry(h)},exportPoint:function(f,h,e){e=new k(f.getPointX(h),f.getPointY(h),e);const l=f.hasZ(h),
q=f.hasM(h);l&&(e.z=f.getPointZ(h));q&&(e.m=f.getPointM(h));return e},exportPolygon:function(f,h,e){return new m(f.exportPaths(h),e,f.hasZ(h),f.hasM(h))},exportPolyline:function(f,h,e){return new z(f.exportPaths(h),e,f.hasZ(h),f.hasM(h))},exportMultipoint:function(f,h,e){return new y(f.exportPoints(h),e,f.hasZ(h),f.hasM(h))},exportExtent:function(f,h,e){var l=f.hasZ(h);const q=f.hasM(h);e=new x(f.getXMin(h),f.getYMin(h),f.getXMax(h),f.getYMax(h),e);l&&(l=f.getZExtent(h),e.zmin=l.vmin,e.zmax=l.vmax);
q&&(f=f.getMExtent(h),e.mmin=f.vmin,e.mmax=f.vmax);return e}};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/layers/graphics/data/attributeSupport":function(){define(["exports","../../../core/Error","../../../core/sql/WhereClauseCache"],function(t,k,m){function z(e,l){return e?f.get(e,l):null}function y(e,l,q,p=!0){const n=[];for(const d of l)if("*"!==d&&!e.has(d))if(p){l=x(d);try{const b=z(l,e);if(!b)throw new k("feature-store:unsupported-query","invalid SQL expression",{where:l});if(!b.isStandardized)throw new k("feature-store:unsupported-query",
"expression is not standard",{clause:b});y(e,b.fieldNames,"expression contains missing fields")}catch(b){if((l=b&&b.details)&&(l.clause||l.where))throw b;l&&l.missingFields?n.push(...l.missingFields):n.push(d)}}else n.push(d);if(n.length)throw new k("feature-store:unsupported-query",q,{missingFields:n});}function x(e){return e.split(" as ")[0]}const f=new m.WhereClauseCache(50,500),h=new Set("esriFieldTypeOID esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong esriFieldTypeDate".split(" "));
t.getAliasFromFieldName=function(e){return e.split(" as ")[1]};t.getExpressionFromFieldName=x;t.getWhereClause=z;t.hasInvalidFieldType=function(e,l){return(e=l.get(e))?!h.has(e.type):!1};t.validateFields=y;t.validateHaving=function(e,l,q){if(!l)return!0;const p=f.get(l,e);if(!p)throw new k("feature-store:unsupported-query","invalid SQL expression",{having:l});if(!p.isAggregate)throw new k("feature-store:unsupported-query","having does not contain a valid aggregate function",{having:l});y(e,p.fieldNames,
"having contains missing fields");if(!p.getExpressions().every(n=>{const {aggregateType:d,field:b}=n,a=e.has(b)&&e.get(b).name;return q.some(c=>{const {onStatisticField:g,statisticType:r}=c;return(e.has(g)&&e.get(g).name)===a&&r.toLowerCase().trim()===d})}))throw new k("feature-store:unsupported-query","expressions in having should also exist in outStatistics",{having:l});return!0};t.validateWhere=function(e,l){if(!l)return!0;const q=f.get(l,e);if(!q)throw new k("feature-store:unsupported-query",
"invalid SQL expression",{where:l});if(!q.isStandardized)throw new k("feature-store:unsupported-query","where clause is not standard",{where:l});y(e,q.fieldNames,"where clause contains missing fields");return!0};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/core/sql/WhereClauseCache":function(){define(["exports","../ItemCache","./WhereClause"],function(t,k,m){let z=function(){function y(x,f){this._cache=new k(x);this._invalidCache=new k(f)}y.prototype.get=function(x,f){const h=`${f.uid}:${x}`,
e=this._cache.get(h);if(e)return e;if(void 0!==this._invalidCache.get(h))return null;try{const l=m.WhereClause.create(x,f);this._cache.put(h,l);return l}catch{return this._invalidCache.put(h,null),null}};return y}();t.WhereClauseCache=z;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/core/ItemCache":function(){define(["./MemCache"],function(t){return function(){function k(z,y){this._storage=new t.MemCacheStorage;this._storage.maxSize=z;y&&this._storage.registerRemoveFunc("",y)}var m=k.prototype;
m.put=function(z,y){this._storage.put(z,y,1,1)};m.pop=function(z){return this._storage.pop(z)};m.get=function(z){return this._storage.get(z)};m.clear=function(){this._storage.clearAll()};m.destroy=function(){this._storage.destroy()};return k}()})},"esri/core/sql/WhereClause":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../has ./AggregateFunctions ./StandardizedFunctions ./WhereGrammar".split(" "),function(t,k,m,z,y,x){function f(K,J){K+="";return K.length>=J?K:Array(J-K.length+
1).join("0")+K}function h(K,J,F="0",N="0",L="0",M="0",S="",Q="0",U="0"){return"+"===S||"-"===S?(K=`${f(parseInt(K,10),4)}-${f(parseInt(J,10),2)}-${f(parseInt(F,10),2)}`,J="",10>parseFloat(M)&&(J="0"),N=`${f(parseInt(N,10),2)}:${f(parseInt(L,10),2)}:${J+parseFloat(M).toString()}`,S=`${S}${f(parseInt(Q,10),2)}:${f(parseInt(U,10),2)}`,new Date(K+"T"+N+S)):new Date(parseInt(K,10),parseInt(J,10)-1,parseInt(F,10),parseInt(N,10),parseInt(L,10),parseFloat(M))}function e(K){let J=D.exec(K);if(null!==J){const [,
F,N,L,M,S,Q]=J;return h(F,N,L,M,S,Q)}J=B.exec(K);if(null!==J){const [,F,N,L,M,S,Q,U,W,fa]=J;return h(F,N,L,M,S,Q,U,W,fa)}J=C.exec(K);if(null!==J){const [,F,N,L,M,S,Q,U,W]=J;return h(F,N,L,M,S,"0",Q,U,W)}J=A.exec(K);if(null!==J){const [,F,N,L,M,S]=J;return h(F,N,L,M,S)}J=v.exec(K);if(null!==J){const [,F,N,L]=J;return h(F,N,L)}throw Error("SQL Invalid Timestamp");}function l(K){K=v.exec(K);if(null===K)throw Error("SQL Invalid Date");const [,J,F,N]=K;return new Date(parseInt(J,10),parseInt(F,10)-1,parseInt(N,
10))}function q(K){return Array.isArray(K)?K:[K]}function p(K){return null!==K?!0!==K:null}function n(K,J){return null!=K&&null!=J?!0===K&&!0===J:!1===K||!1===J?!1:null}function d(K,J){return null!=K&&null!=J?!0===K||!0===J:!0===K||!0===J?!0:null}function b(K,J){if(null==K)return null;let F=!1;for(const N of J)if(null==N)F=null;else if(K===N){F=!0;break}return F}function a(K,J,F){if(null==K)return null;let N="",L=0;for(let M=0;M<J.length;M++){const S=J.charAt(M);switch(L){case 0:S===F?L=1:N=0<="-[]/{}()*+?.\\^$|".indexOf(S)?
N+("\\"+S):"%"===S?N+".*":"_"===S?N+".":N+S;break;case 1:N=0<="-[]/{}()*+?.\\^$|".indexOf(S)?N+("\\"+S):N+S,L=0}}return(new RegExp("^"+N+"$")).test(K)}function c(K){return K instanceof Date?K.valueOf():K}function g(K,J,F){if(null==J||null==F)return null;J=c(J);F=c(F);switch(K){case "\x3c\x3e":return J!==F;case "\x3d":return J===F;case "\x3e":return J>F;case "\x3c":return J<F;case "\x3e\x3d":return J>=F;case "\x3c\x3d":return J<=F}}function r(K){const J=[],F={};for(const N of K)K=N.toLowerCase(),void 0===
F[K]&&(J.push(N),F[K]=1);return J}function u(K,J,F){if(J instanceof y.SqlInterval)if(F instanceof Date)switch(K){case "+":return new Date(J.valueInMilliseconds()+F.getTime());case "-":return J.valueInMilliseconds()-F.getTime();case "*":return J.valueInMilliseconds()*F.getTime();case "/":return J.valueInMilliseconds()/F.getTime()}else if(F instanceof y.SqlInterval)switch(K){case "+":return y.SqlInterval.createFromMilliseconds(J.valueInMilliseconds()+F.valueInMilliseconds());case "-":return y.SqlInterval.createFromMilliseconds(J.valueInMilliseconds()-
F.valueInMilliseconds());case "*":return J.valueInMilliseconds()*F.valueInMilliseconds();case "/":return J.valueInMilliseconds()/F.valueInMilliseconds()}else J=J.valueInMilliseconds();else if(F instanceof y.SqlInterval)if(J instanceof Date)switch(K){case "+":return new Date(F.valueInMilliseconds()+J.getTime());case "-":return new Date(J.getTime()-F.valueInMilliseconds());case "*":return J.getTime()*F.valueInMilliseconds();case "/":return J.getTime()/F.valueInMilliseconds()}else F=F.valueInMilliseconds();
else if(J instanceof Date&&"number"===typeof F)switch(F*=864E5,J=J.getTime(),K){case "+":return new Date(J+F);case "-":return new Date(J-F);case "*":return new Date(J*F);case "/":return new Date(J/F)}else if(F instanceof Date&&"number"===typeof J)switch(J*=864E5,F=F.getTime(),K){case "+":return new Date(J+F);case "-":return new Date(J-F);case "*":return new Date(J*F);case "/":return new Date(J/F)}switch(K){case "+":return J+F;case "-":return J-F;case "*":return J*F;case "/":return J/F}}function w(K,
J,F,N){K=N.getAttribute(K,J);return null!=K&&1===F[J]?new Date(K):K}const v=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,D=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,B=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,C=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,A=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/;let E=function(){function K(){}K.makeBool=function(J){return!0===J};K.featureValue=
function(J,F,N,L){return w(J,F,N,L)};K.equalsNull=function(J){return null===J};K.applyLike=function(J,F,N){return a(J,F,N)};K.ensureArray=function(J){return q(J)};K.applyIn=function(J,F){return b(J,F)};K.currentDate=function(){const J=new Date;J.setHours(0,0,0,0);return J};K.makeSqlInterval=function(J,F,N){return y.SqlInterval.createFromValueAndQualifer(J,F,N)};K.convertInterval=function(J){return J instanceof y.SqlInterval?J.valueInMilliseconds():J};K.currentTimestamp=function(){return new Date};
K.compare=function(J,F,N){return g(J,F,N)};K.calculate=function(J,F,N){return u(J,F,N)};K.makeComparable=function(J){return c(J)};K.evaluateFunction=function(J,F){return y.evaluateFunction(J,F)};K.lookup=function(J,F){J=F[J];return void 0===J?null:J};K.between=function(J,F){return null==J||null==F[0]||null==F[1]?null:J>=F[0]&&J<=F[1]};K.notbetween=function(J,F){return null==J||null==F[0]||null==F[1]?null:J<F[0]||J>F[1]};K.ternaryNot=function(J){return p(J)};K.ternaryAnd=function(J,F){return n(J,F)};
K.ternaryOr=function(J,F){return d(J,F)};return K}(),G=function(){function K(F,N){this.fieldsIndex=N;this.datefields={};this.parameters={};this.parseTree=x.WhereGrammar.parse(F);const {isStandardized:L,isAggregate:M,referencedFieldNames:S}=this.extractExpressionInfo(N);this.referencedFieldNames=S;this.isStandardized=L;this.isAggregate=M}K.create=function(F,N){return new K(F,N)};var J=K.prototype;J.testSet=function(F,N=H){const L={};for(const M of this.fieldNames)L[M]=F.map(S=>N.getAttribute(S,M));
return!!this.evaluateNode(this.parseTree,{attributes:L},H)};J.calculateValue=function(F,N=H){F=this.evaluateNode(this.parseTree,F,N);return F instanceof y.SqlInterval?F.valueInMilliseconds()/864E5:F};J.calculateValueCompiled=function(F,N=H){if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(F,this.parameters,N,this.datefields);if(m("csp-restrictions"))return this.calculateValue(F,N);this.compileMe();return this.parseTree._compiledVersion(F,this.parameters,N,this.datefields)};
J.testFeature=function(F,N=H){return!!this.evaluateNode(this.parseTree,F,N)};J.testFeatureCompiled=function(F,N=H){if(null!=this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(F,this.parameters,N,this.datefields);if(m("csp-restrictions"))return this.testFeature(F,N);this.compileMe();return!!this.parseTree._compiledVersion(F,this.parameters,N,this.datefields)};J.getFunctions=function(){const F=[];this.visitAll(this.parseTree,N=>{"function"===N.type&&F.push(N.name.toLowerCase())});
return r(F)};J.getExpressions=function(){const F=new Map;this.visitAll(this.parseTree,N=>{if("function"===N.type){const L=N.name.toLowerCase();N=N.args.value[0];if("column_ref"===N.type){N=N.column;const M=`${L}-${N}`;F.has(M)||F.set(M,{aggregateType:L,field:N})}}});return[...F.values()]};J.getVariables=function(){const F=[];this.visitAll(this.parseTree,N=>{"param"===N.type&&F.push(N.value.toLowerCase())});return r(F)};J.compileMe=function(){const F="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+
")";this.parseTree._compiledVersion=(new Function("feature","lookups","attributeAdapter","datefields",F)).bind(E)};J.extractExpressionInfo=function(F){const N=[];let L=!0,M=!0;this.visitAll(this.parseTree,S=>{switch(S.type){case "column_ref":{const Q=F.get(S.column),U=Q&&Q.name;!Q||"date"!==Q.type&&"esriFieldTypeDate"!==Q.type||(this.datefields[Q.name]=1);void 0!==U?(N.push(U),S.column=U):N.push(S.column);break}case "function":{const {name:Q,args:U}=S;S=U.value.length;L&&(L=y.isStandardized(Q,S));
M&&(M=z.isAggregate(Q,S))}}});return{referencedFieldNames:r(N),isStandardized:L,isAggregate:M}};J.visitAll=function(F,N){if(null!=F)switch(N(F),F.type){case "when_clause":this.visitAll(F.operand,N);this.visitAll(F.value,N);break;case "case_expression":for(const L of F.clauses)this.visitAll(L,N);"simple"===F.format&&this.visitAll(F.operand,N);null!==F.else&&this.visitAll(F.else,N);break;case "expr_list":for(const L of F.value)this.visitAll(L,N);break;case "unary_expr":this.visitAll(F.expr,N);break;
case "binary_expr":this.visitAll(F.left,N);this.visitAll(F.right,N);break;case "function":this.visitAll(F.args,N)}};J.evaluateNodeToJavaScript=function(F){switch(F.type){case "interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(F.value)+", "+JSON.stringify(F.qualifier)+","+JSON.stringify(F.op)+")";case "case_expression":var N="";if("simple"===F.format){var L="this.makeComparable("+this.evaluateNodeToJavaScript(F.operand)+")";N="( ";for(let M=0;M<F.clauses.length;M++)N+=" ("+L+" \x3d\x3d\x3d this.makeComparable("+
this.evaluateNodeToJavaScript(F.clauses[M].operand)+")) ? ("+this.evaluateNodeToJavaScript(F.clauses[M].value)+") : "}else for(N="( ",L=0;L<F.clauses.length;L++)N+=" this.makeBool("+this.evaluateNodeToJavaScript(F.clauses[L].operand)+")\x3d\x3d\x3dtrue ? ("+this.evaluateNodeToJavaScript(F.clauses[L].value)+") : ";N=null!==F.else?N+this.evaluateNodeToJavaScript(F.else):N+"null";return N+=" )";case "param":return"this.lookup("+JSON.stringify(F.value.toLowerCase())+",lookups)";case "expr_list":N="[";
for(L of F.value)"["!==N&&(N+=","),N+=this.evaluateNodeToJavaScript(L);return N+="]";case "unary_expr":return"this.ternaryNot("+this.evaluateNodeToJavaScript(F.expr)+")";case "binary_expr":switch(F.operator){case "AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(F.left)+","+this.evaluateNodeToJavaScript(F.right)+" )";case "OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(F.left)+","+this.evaluateNodeToJavaScript(F.right)+" )";case "IS":if("null"!==F.right.type)throw Error("Unsupported RHS for IS");
return"this.equalsNull("+this.evaluateNodeToJavaScript(F.left)+")";case "ISNOT":if("null"!==F.right.type)throw Error("Unsupported RHS for IS");return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(F.left)+")))";case "IN":return"this.applyIn("+this.evaluateNodeToJavaScript(F.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(F.right)+"))";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(F.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(F.right)+")))";
case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(F.left)+","+this.evaluateNodeToJavaScript(F.right)+")";case "NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(F.left)+","+this.evaluateNodeToJavaScript(F.right)+")";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(F.left)+","+this.evaluateNodeToJavaScript(F.right)+","+JSON.stringify(F.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(F.left)+","+this.evaluateNodeToJavaScript(F.right)+
","+JSON.stringify(F.escape)+"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+JSON.stringify(F.operator)+","+this.evaluateNodeToJavaScript(F.left)+","+this.evaluateNodeToJavaScript(F.right)+")";case "*":case "-":case "+":case "/":return"this.calculate("+JSON.stringify(F.operator)+","+this.evaluateNodeToJavaScript(F.left)+","+this.evaluateNodeToJavaScript(F.right)+")"}throw Error("Not Supported Operator "+F.operator);case "null":case "bool":case "string":case "number":return JSON.stringify(F.value);
case "date":return"(new Date("+l(F.value).getTime().toString()+"))";case "timestamp":return"(new Date("+e(F.value).getTime().toString()+"))";case "current_time":return"date"===F.mode?"this.currentDate()":"this.currentTimestamp()";case "column_ref":return"this.featureValue(feature,"+JSON.stringify(F.column)+",datefields,attributeAdapter)";case "function":return"this.evaluateFunction("+JSON.stringify(F.name)+","+this.evaluateNodeToJavaScript(F.args)+")"}throw Error("Unsupported sql syntax "+F.type);
};J.evaluateNode=function(F,N,L){switch(F.type){case "interval":return N=this.evaluateNode(F.value,N,L),y.SqlInterval.createFromValueAndQualifer(N,F.qualifier,F.op);case "case_expression":if("simple"===F.format){var M=c(this.evaluateNode(F.operand,N,L));for(var S=0;S<F.clauses.length;S++)if(M===c(this.evaluateNode(F.clauses[S].operand,N,L)))return this.evaluateNode(F.clauses[S].value,N,L)}else for(M=0;M<F.clauses.length;M++)if(!0===this.evaluateNode(F.clauses[M].operand,N,L))return this.evaluateNode(F.clauses[M].value,
N,L);return null!==F.else?this.evaluateNode(F.else,N,L):null;case "param":return this.parameters[F.value.toLowerCase()];case "expr_list":M=[];for(S of F.value)M.push(this.evaluateNode(S,N,L));return M;case "unary_expr":return p(this.evaluateNode(F.expr,N,L));case "binary_expr":switch(F.operator){case "AND":return n(this.evaluateNode(F.left,N,L),this.evaluateNode(F.right,N,L));case "OR":return d(this.evaluateNode(F.left,N,L),this.evaluateNode(F.right,N,L));case "IS":if("null"!==F.right.type)throw Error("Unsupported RHS for IS");
return null===this.evaluateNode(F.left,N,L);case "ISNOT":if("null"!==F.right.type)throw Error("Unsupported RHS for IS");return null!==this.evaluateNode(F.left,N,L);case "IN":return M=q(this.evaluateNode(F.right,N,L)),b(this.evaluateNode(F.left,N,L),M);case "NOT IN":return M=q(this.evaluateNode(F.right,N,L)),p(b(this.evaluateNode(F.left,N,L),M));case "BETWEEN":return M=this.evaluateNode(F.left,N,L),F=this.evaluateNode(F.right,N,L),null==M||null==F[0]||null==F[1]?null:M>=c(F[0])&&M<=c(F[1]);case "NOTBETWEEN":return M=
this.evaluateNode(F.left,N,L),F=this.evaluateNode(F.right,N,L),null==M||null==F[0]||null==F[1]?null:M<c(F[0])||M>c(F[1]);case "LIKE":return a(this.evaluateNode(F.left,N,L),this.evaluateNode(F.right,N,L),F.escape);case "NOT LIKE":return p(a(this.evaluateNode(F.left,N,L),this.evaluateNode(F.right,N,L),F.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return g(F.operator,this.evaluateNode(F.left,N,L),this.evaluateNode(F.right,N,L));case "-":case "+":case "*":case "/":return u(F.operator,
this.evaluateNode(F.left,N,L),this.evaluateNode(F.right,N,L))}case "null":case "bool":case "string":case "number":return F.value;case "date":return l(F.value);case "timestamp":return e(F.value);case "current_time":return N=new Date,"date"===F.mode&&N.setHours(0,0,0,0),N;case "column_ref":return w(N,F.column,this.datefields,L);case "function":return N=this.evaluateNode(F.args,N,L),this.isAggregate?z.aggregateFunction(F.name,N):y.evaluateFunction(F.name,N)}throw Error("Unsupported sql syntax "+F.type);
};k._createClass(K,[{key:"fieldNames",get:function(){return this.referencedFieldNames}}]);return K}();const H={getAttribute(K,J){return(K&&"object"===typeof K.attributes?K.attributes:K)[J]}};t.WhereClause=G;t.defaultAttributeAdapter=H;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/core/sql/AggregateFunctions":function(){define(["exports"],function(t){function k(y){let x=0;for(let f=0;f<y.length;f++)x+=y[f];return x/y.length}function m(y){const x=k(y),f=y.length;let h=0;for(const e of y)h+=
(e-x)**2;return 1<f?h/(f-1):0}const z={min:{minParams:1,maxParams:1,evaluate:y=>null==y[0]?null:Math.min.apply(Math,y[0])},max:{minParams:1,maxParams:1,evaluate:y=>null==y[0]?null:Math.max.apply(Math,y[0])},avg:{minParams:1,maxParams:1,evaluate:y=>null==y[0]?null:k(y[0])},sum:{minParams:1,maxParams:1,evaluate:y=>{if(null==y[0])y=null;else{{y=y[0];let x=0;for(let f=0;f<y.length;f++)x+=y[f];y=x}}return y}},stddev:{minParams:1,maxParams:1,evaluate:y=>null==y[0]?null:Math.sqrt(m(y[0]))},count:{minParams:1,
maxParams:1,evaluate:y=>null==y[0]?null:y[0].length},var:{minParams:1,maxParams:1,evaluate:y=>null==y[0]?null:m(y[0])}};t.aggregateFunction=function(y,x){const f=z[y.toLowerCase()];if(null==f)throw Error("Function Not Recognised");if(x.length<f.minParams||x.length>f.maxParams)throw Error(`Invalid Parameter count for call to ${y.toUpperCase()}`);return f.evaluate(x)};t.isAggregate=function(y,x){y=z[y.toLowerCase()];return null!=y&&x>=y.minParams&&x<=y.maxParams};Object.defineProperty(t,"__esModule",
{value:!0})})},"esri/core/sql/StandardizedFunctions":function(){define(["exports","../string"],function(t,k){let m=function(){function y(){this.op="+";this.minute=this.year=this.month=this.hour=this.second=this.day=0}y.fixDefaults=function(x){if(null!==x.precision||null!==x.secondary)throw Error("Primary and Secondary SqlInterval qualifiers not supported");};y.createFromMilliseconds=function(x){const f=new y;f.second=x/1E3;return f};y.createFromValueAndQualifer=function(x,f,h){let e=null;const l=
new y;l.op="-"===h?"-":"+";if("interval-period"===f.type){y.fixDefaults(f);if("year"===f.period||"month"===f.period)throw Error("Year-Month Intervals not supported");if(/^[0-9]{1,}$/.test(x))l[f.period]=parseFloat(x);else throw Error("Illegal Interval");}else{y.fixDefaults(f.start);y.fixDefaults(f.end);if("year"===f.start.period||"month"===f.start.period)throw Error("Year-Month Intervals not supported");if("year"===f.end.period||"month"===f.end.period)throw Error("Year-Month Intervals not supported");
switch(f.start.period){case "day":switch(f.end.period){case "hour":e=/^[0-9]{1,} [0-9]{1,}$/;if(e.test(x))l[f.start.period]=parseFloat(x.split(" ")[0]),l[f.end.period]=parseFloat(x.split(" ")[1]);else throw Error("Illegal Interval");break;case "minute":e=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$/;if(e.test(x))l[f.start.period]=parseFloat(x.split(" ")[0]),x=x.split(" ")[1].split(":"),l.hour=parseFloat(x[0]),l.minute=parseFloat(x[1]);else throw Error("Illegal Interval");break;case "second":e=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;
if(e.test(x))l[f.start.period]=parseFloat(x.split(" ")[0]),x=x.split(" ")[1].split(":"),l.hour=parseFloat(x[0]),l.minute=parseFloat(x[1]),l.second=parseFloat(x[2]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;case "hour":switch(f.end.period){case "minute":e=/^[0-9]{1,}:[0-9]{1,}$/;if(e.test(x))l.hour=parseFloat(x.split(":")[0]),l.minute=parseFloat(x.split(":")[1]);else throw Error("Illegal Interval");break;case "second":e=/^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;
if(e.test(x))x=x.split(":"),l.hour=parseFloat(x[0]),l.minute=parseFloat(x[1]),l.second=parseFloat(x[2]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;case "minute":switch(f.end.period){case "second":e=/^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(e.test(x))x=x.split(":"),l.minute=parseFloat(x[0]),l.second=parseFloat(x[1]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;default:throw"Invalid Interval.";}}return l};y.prototype.valueInMilliseconds=
function(){return("-"===this.op?-1:1)*(1E3*this.second+6E4*this.minute+36E5*this.hour+864E5*this.day+365/12*this.month*864E5+31536E6*this.year)};return y}();const z={extract:{minParams:2,maxParams:2,evaluate:([y,x])=>{if(null==x)return null;if(x instanceof Date)switch(y.toUpperCase()){case "SECOND":return x.getSeconds();case "MINUTE":return x.getMinutes();case "HOUR":return x.getHours();case "DAY":return x.getDate();case "MONTH":return x.getMonth()+1;case "YEAR":return x.getFullYear()}throw Error("Invalid Parameter for call to EXTRACT");
}},substring:{minParams:2,maxParams:3,evaluate:y=>{if(2===y.length){const [x,f]=y;return null==x||null==f?null:x.toString().substring(f-1)}if(3===y.length){const [x,f,h]=y;return null==x||null==f||null==h?null:0>=h?"":x.toString().substring(f-1,f+h-1)}}},position:{minParams:2,maxParams:2,evaluate:([y,x])=>null==y||null==x?null:x.indexOf(y)+1},trim:{minParams:2,maxParams:3,evaluate:y=>{var x=3===y.length,f=x?y[1]:" ";x=x?y[2]:y[1];if(null==f||null==x)return null;f=`(${k.escapeRegExpString(f)})`;switch(y[0]){case "BOTH":return x.replace(new RegExp(`^${f}*|${f}*$`,
"g"),"");case "LEADING":return x.replace(new RegExp(`^${f}*`,"g"),"");case "TRAILING":return x.replace(new RegExp(`${f}*$`,"g"),"")}throw Error("Invalid Parameter for call to TRIM");}},abs:{minParams:1,maxParams:1,evaluate:y=>null==y[0]?null:Math.abs(y[0])},ceiling:{minParams:1,maxParams:1,evaluate:y=>null==y[0]?null:Math.ceil(y[0])},floor:{minParams:1,maxParams:1,evaluate:y=>null==y[0]?null:Math.floor(y[0])},log:{minParams:1,maxParams:1,evaluate:y=>null==y[0]?null:Math.log(y[0])},log10:{minParams:1,
maxParams:1,evaluate:y=>null==y[0]?null:Math.log(y[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:y=>null==y[0]?null:Math.sin(y[0])},cos:{minParams:1,maxParams:1,evaluate:y=>null==y[0]?null:Math.cos(y[0])},tan:{minParams:1,maxParams:1,evaluate:y=>null==y[0]?null:Math.tan(y[0])},asin:{minParams:1,maxParams:1,evaluate:y=>null==y[0]?null:Math.asin(y[0])},acos:{minParams:1,maxParams:1,evaluate:y=>null==y[0]?null:Math.acos(y[0])},atan:{minParams:1,maxParams:1,evaluate:y=>null==y[0]?null:Math.atan(y[0])},
sign:{minParams:1,maxParams:1,evaluate:y=>null==y[0]?null:0<y[0]?1:0>y[1]?-1:0},power:{minParams:2,maxParams:2,evaluate:y=>null==y[0]||null==y[1]?null:y[0]**y[1]},mod:{minParams:2,maxParams:2,evaluate:y=>null==y[0]||null==y[1]?null:y[0]%y[1]},round:{minParams:1,maxParams:2,evaluate:y=>{const x=y[0];y=2===y.length?10**y[1]:1;return null==x?null:Math.round(x*y)/y}},truncate:{minParams:1,maxParams:2,evaluate:y=>null==y[0]?null:1===y.length?parseInt(y[0].toFixed(0),10):parseFloat(y[0].toFixed(y[1]))},
char_length:{minParams:1,maxParams:1,evaluate:y=>"string"===typeof y[0]||y[0]instanceof String?y[0].length:0},concat:{minParams:1,maxParams:Infinity,evaluate:y=>{let x="";for(let f=0;f<y.length;f++){if(null==y[f])return null;x+=y[f].toString()}return x}},lower:{minParams:1,maxParams:1,evaluate:y=>null==y[0]?null:y[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:y=>null==y[0]?null:y[0].toString().toUpperCase()}};t.SqlInterval=m;t.evaluateFunction=function(y,x){const f=z[y.toLowerCase()];
if(null==f)throw Error("Function Not Recognised");if(x.length<f.minParams||x.length>f.maxParams)throw Error(`Invalid Parameter count for call to ${y.toUpperCase()}`);return f.evaluate(x)};t.isStandardized=function(y,x){y=z[y.toLowerCase()];return null!=y&&x>=y.minParams&&x<=y.maxParams};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/core/sql/WhereGrammar":function(){define(["exports","../../chunks/_commonjsHelpers"],function(t,k){var m=k.createCommonjsModule(function(y){(function(x,f){y.exports&&
(y.exports=f())})(k.commonjsGlobal,function(){function x(f,h,e,l){this.message=f;this.expected=h;this.found=e;this.location=l;this.name="SyntaxError";"function"===typeof Error.captureStackTrace&&Error.captureStackTrace(this,x)}(function(f,h){function e(){this.constructor=f}e.prototype=h.prototype;f.prototype=new e})(x,Error);x.buildMessage=function(f,h){function e(n){return n.charCodeAt(0).toString(16).toUpperCase()}function l(n){return n.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,
"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(d){return"\\x0"+e(d)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(d){return"\\x"+e(d)})}function q(n){return n.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(d){return"\\x0"+e(d)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(d){return"\\x"+e(d)})}var p={literal:function(n){return'"'+
l(n.text)+'"'},"class":function(n){var d="",b;for(b=0;b<n.parts.length;b++)d+=n.parts[b]instanceof Array?q(n.parts[b][0])+"-"+q(n.parts[b][1]):q(n.parts[b]);return"["+(n.inverted?"^":"")+d+"]"},any:function(n){return"any character"},end:function(n){return"end of input"},other:function(n){return n.description}};return"Expected "+function(n){var d=Array(n.length),b;for(b=0;b<n.length;b++){var a=b;var c=n[b];c=p[c.type](c);d[a]=c}d.sort();if(0<d.length){for(n=b=1;b<d.length;b++)d[b-1]!==d[b]&&(d[n]=
d[b],n++);d.length=n}switch(d.length){case 1:return d[0];case 2:return d[0]+" or "+d[1];default:return d.slice(0,-1).join(", ")+", or "+d[d.length-1]}}(f)+" but "+(h?'"'+l(h)+'"':"end of input")+" found."};return{SyntaxError:x,parse:function(f,h){function e(X,ea){return{type:"literal",text:X,ignoreCase:ea}}function l(X,ea,da){return{type:"class",parts:X,inverted:ea,ignoreCase:da}}function q(X){var ea=Zb[X],da;if(!ea){for(da=X-1;!Zb[da];)da--;ea=Zb[da];for(ea={line:ea.line,column:ea.column};da<X;)10===
f.charCodeAt(da)?(ea.line++,ea.column=1):ea.column++,da++;Zb[X]=ea}return ea}function p(X,ea){var da=q(X),la=q(ea);return{start:{offset:X,line:da.line,column:da.column},end:{offset:ea,line:la.line,column:la.column}}}function n(X){P<sb||(P>sb&&(sb=P,oc=[]),oc.push(X))}function d(){var X=P;var ea=va();if(ea!==I)if(ea=a(),ea!==I){var da=va();da!==I?X=ea:(P=X,X=I)}else P=X,X=I;else P=X,X=I;return X}function b(){var X=P;var ea=a();if(ea!==I){var da=[];var la=P;var za=va();if(za!==I){var Fa=Ha();if(Fa!==
I){var La=va();if(La!==I){var Pa=a();Pa!==I?la=za=[za,Fa,La,Pa]:(P=la,la=I)}else P=la,la=I}else P=la,la=I}else P=la,la=I;for(;la!==I;)da.push(la),la=P,za=va(),za!==I?(Fa=Ha(),Fa!==I?(La=va(),La!==I?(Pa=a(),Pa!==I?la=za=[za,Fa,La,Pa]:(P=la,la=I)):(P=la,la=I)):(P=la,la=I)):(P=la,la=I);if(da!==I){X={type:"expr_list"};ea=[ea];for(la=0;la<da.length;la++)ea.push(da[la][3]);X.value=ea}else P=X,X=I}else P=X,X=I;return X}function a(){var X=P;var ea=c();if(ea!==I){var da=[];var la=P;var za=va();if(za!==I){var Fa=
aa();if(Fa!==I){var La=va();if(La!==I){var Pa=c();Pa!==I?la=za=[za,Fa,La,Pa]:(P=la,la=I)}else P=la,la=I}else P=la,la=I}else P=la,la=I;for(;la!==I;)da.push(la),la=P,za=va(),za!==I?(Fa=aa(),Fa!==I?(La=va(),La!==I?(Pa=c(),Pa!==I?la=za=[za,Fa,La,Pa]:(P=la,la=I)):(P=la,la=I)):(P=la,la=I)):(P=la,la=I);da!==I?X=ea=cb(ea,da):(P=X,X=I)}else P=X,X=I;return X}function c(){var X=P;var ea=g();if(ea!==I){var da=[];var la=P;var za=va();if(za!==I){var Fa=Y();if(Fa!==I){var La=va();if(La!==I){var Pa=g();Pa!==I?la=
za=[za,Fa,La,Pa]:(P=la,la=I)}else P=la,la=I}else P=la,la=I}else P=la,la=I;for(;la!==I;)da.push(la),la=P,za=va(),za!==I?(Fa=Y(),Fa!==I?(La=va(),La!==I?(Pa=g(),Pa!==I?la=za=[za,Fa,La,Pa]:(P=la,la=I)):(P=la,la=I)):(P=la,la=I)):(P=la,la=I);da!==I?X=ea=cb(ea,da):(P=X,X=I)}else P=X,X=I;return X}function g(){var X=P;var ea=R();if(ea===I){ea=P;if(33===f.charCodeAt(P)){var da=Ta;P++}else da=I,0===wa&&n(jb);if(da!==I){var la=P;wa++;if(61===f.charCodeAt(P)){var za=rb;P++}else za=I,0===wa&&n(Qa);wa--;za===I?
la=void 0:(P=la,la=I);la!==I?ea=da=[da,la]:(P=ea,ea=I)}else P=ea,ea=I}ea!==I?(da=va(),da!==I?(la=g(),la!==I?X=ea={type:"unary_expr",operator:"NOT",expr:la}:(P=X,X=I)):(P=X,X=I)):(P=X,X=I);if(X===I)if(X=P,ea=v(),ea!==I)if(da=va(),da!==I){da=[];la=P;za=va();if(za!==I){var Fa=r();if(Fa!==I){var La=va();if(La!==I){var Pa=v();Pa!==I?la=za=[za,Fa,La,Pa]:(P=la,la=I)}else P=la,la=I}else P=la,la=I}else P=la,la=I;if(la!==I)for(;la!==I;)da.push(la),la=P,za=va(),za!==I?(Fa=r(),Fa!==I?(La=va(),La!==I?(Pa=v(),
Pa!==I?la=za=[za,Fa,La,Pa]:(P=la,la=I)):(P=la,la=I)):(P=la,la=I)):(P=la,la=I);else da=I;da!==I&&(da={type:"arithmetic",tail:da});da===I&&(da=P,la=w(),la!==I?(za=va(),za!==I?(za=Ia(),za!==I?(za=va(),za!==I?(za=b(),za!==I?(Fa=va(),Fa!==I?(Fa=Sa(),Fa!==I?da=la={op:la,right:za}:(P=da,da=I)):(P=da,da=I)):(P=da,da=I)):(P=da,da=I)):(P=da,da=I)):(P=da,da=I)):(P=da,da=I),da===I&&(da=P,la=w(),la!==I?(za=va(),za!==I?(za=Ia(),za!==I?(za=va(),za!==I?(za=Sa(),za!==I?da=la={op:la,right:{type:"expr_list",value:[]}}:
(P=da,da=I)):(P=da,da=I)):(P=da,da=I)):(P=da,da=I)):(P=da,da=I),da===I&&(da=P,la=w(),la!==I?(za=va(),za!==I?(za=J(),za!==I?da=la={op:la,right:za}:(P=da,da=I)):(P=da,da=I)):(P=da,da=I))),da===I&&(da=P,za=R(),za!==I?(la=va(),la!==I?(la=ca(),la!==I?(Fa=va(),Fa!==I?(Fa=v(),Fa!==I?(La=va(),La!==I?(La=Y(),La!==I?(za=va(),za!==I?(za=v(),za!==I?da=za={op:"NOT"+la,right:{type:"expr_list",value:[Fa,za]}}:(P=da,da=I)):(P=da,da=I)):(P=da,da=I)):(P=da,da=I)):(P=da,da=I)):(P=da,da=I)):(P=da,da=I)):(P=da,da=I)):
(P=da,da=I),da===I&&(da=P,za=ca(),za!==I?(la=va(),la!==I?(la=v(),la!==I?(Fa=va(),Fa!==I?(Fa=Y(),Fa!==I?(La=va(),La!==I?(La=v(),La!==I?da=za={op:za,right:{type:"expr_list",value:[la,La]}}:(P=da,da=I)):(P=da,da=I)):(P=da,da=I)):(P=da,da=I)):(P=da,da=I)):(P=da,da=I)):(P=da,da=I)),da===I&&(da=P,la=V(),la!==I?(za=va(),za!==I?(za=R(),za!==I?(za=va(),za!==I?(za=v(),za!==I?da=la={op:la+"NOT",right:za}:(P=da,da=I)):(P=da,da=I)):(P=da,da=I)):(P=da,da=I)):(P=da,da=I),da===I&&(da=P,la=V(),la!==I?(za=va(),za!==
I?(za=v(),za!==I?da=la={op:la,right:za}:(P=da,da=I)):(P=da,da=I)):(P=da,da=I)),da===I&&(da=P,la=u(),la!==I?(za=va(),za!==I?(za=Q(),za!==I?(Fa=va(),Fa!==I?(Fa=P,f.substr(P,6).toLowerCase()===ud?(La=f.substr(P,6),P+=6):(La=I,0===wa&&n(vd)),La!==I?(La=P,wa++,Pa=H(),wa--,Pa===I?La=void 0:(P=La,La=I),La!==I?Fa="ESCAPE":(P=Fa,Fa=I)):(P=Fa,Fa=I),Fa!==I?(Fa=va(),Fa!==I?(Fa=U(),Fa!==I?da=la={op:la,right:za,escape:Fa.value}:(P=da,da=I)):(P=da,da=I)):(P=da,da=I)):(P=da,da=I)):(P=da,da=I)):(P=da,da=I)):(P=da,
da=I),da===I&&(da=P,la=u(),la!==I?(za=va(),za!==I?(za=Q(),za!==I?da=la={op:la,right:za,escape:""}:(P=da,da=I)):(P=da,da=I)):(P=da,da=I))))));da===I&&(da=null);da!==I?(X=ea,ea=da,""==ea||void 0==ea||null==ea?ea=X:(da=null,ea=da="arithmetic"==ea.type?cb(X,ea.tail):hb(ea.op,X,ea.right,ea.escape)),X=ea):(P=X,X=I)}else P=X,X=I;else P=X,X=I;return X}function r(){if(f.substr(P,2)===xb){var X=xb;P+=2}else X=I,0===wa&&n(ma);X===I&&(62===f.charCodeAt(P)?(X=pa,P++):(X=I,0===wa&&n(oa)),X===I&&(f.substr(P,2)===
ta?(X=ta,P+=2):(X=I,0===wa&&n(Da)),X===I&&(f.substr(P,2)===Ea?(X=Ea,P+=2):(X=I,0===wa&&n(Na)),X===I&&(60===f.charCodeAt(P)?(X=Oa,P++):(X=I,0===wa&&n(ab)),X===I&&(61===f.charCodeAt(P)?(X=rb,P++):(X=I,0===wa&&n(Qa)),X===I&&(f.substr(P,2)===Za?(X=Za,P+=2):(X=I,0===wa&&n($a))))))));return X}function u(){var X=X=P;var ea=R();if(ea!==I){var da=va();if(da!==I){var la=ja();la!==I?X=ea=[ea,da,la]:(P=X,X=I)}else P=X,X=I}else P=X,X=I;X!==I&&(X=X[0]+" "+X[2]);X===I&&(X=ja());return X}function w(){var X=X=P;var ea=
R();if(ea!==I){var da=va();if(da!==I){var la=O();la!==I?X=ea=[ea,da,la]:(P=X,X=I)}else P=X,X=I}else P=X,X=I;X!==I&&(X=X[0]+" "+X[2]);X===I&&(X=O());return X}function v(){var X=P;var ea=B();if(ea!==I){var da=[];var la=P;var za=va();if(za!==I){var Fa=D();if(Fa!==I){var La=va();if(La!==I){var Pa=B();Pa!==I?la=za=[za,Fa,La,Pa]:(P=la,la=I)}else P=la,la=I}else P=la,la=I}else P=la,la=I;for(;la!==I;)da.push(la),la=P,za=va(),za!==I?(Fa=D(),Fa!==I?(La=va(),La!==I?(Pa=B(),Pa!==I?la=za=[za,Fa,La,Pa]:(P=la,la=
I)):(P=la,la=I)):(P=la,la=I)):(P=la,la=I);da!==I?X=ea=cb(ea,da):(P=X,X=I)}else P=X,X=I;return X}function D(){if(43===f.charCodeAt(P)){var X=gb;P++}else X=I,0===wa&&n(kb);X===I&&(45===f.charCodeAt(P)?(X=pc,P++):(X=I,0===wa&&n(qc)));return X}function B(){var X=P;var ea=A();if(ea!==I){var da=[];var la=P;var za=va();if(za!==I){var Fa=C();if(Fa!==I){var La=va();if(La!==I){var Pa=A();Pa!==I?la=za=[za,Fa,La,Pa]:(P=la,la=I)}else P=la,la=I}else P=la,la=I}else P=la,la=I;for(;la!==I;)da.push(la),la=P,za=va(),
za!==I?(Fa=C(),Fa!==I?(La=va(),La!==I?(Pa=A(),Pa!==I?la=za=[za,Fa,La,Pa]:(P=la,la=I)):(P=la,la=I)):(P=la,la=I)):(P=la,la=I);da!==I?X=ea=cb(ea,da):(P=X,X=I)}else P=X,X=I;return X}function C(){if(42===f.charCodeAt(P)){var X=wd;P++}else X=I,0===wa&&n(xd);X===I&&(47===f.charCodeAt(P)?(X=yd,P++):(X=I,0===wa&&n(zd)));return X}function A(){var X=U();if(X===I){var ea=P;var da=P;var la=T();if(la!==I){var za=ba();if(za!==I){var Fa=ha();Fa!==I?da=la=parseFloat(la+za+Fa):(P=da,da=I)}else P=da,da=I}else P=da,
da=I;da===I&&(da=P,la=T(),la!==I?(za=ba(),za!==I?da=la=parseFloat(la+za):(P=da,da=I)):(P=da,da=I),da===I&&(da=P,la=T(),la!==I?(za=ha(),za!==I?da=la=parseFloat(la+za):(P=da,da=I)):(P=da,da=I),da===I&&(da=P,la=T(),la!==I&&(la=parseFloat(la)),da=la)));var La=da;if(La!==I){var Pa=P;wa++;var Ad=G();wa--;Ad===I?Pa=void 0:(P=Pa,Pa=I);Pa!==I?ea=La={type:"number",value:La}:(P=ea,ea=I)}else P=ea,ea=I;X=ea;if(X===I){var Lb=P;var Bb=P;if(f.substr(P,4).toLowerCase()===Bd){var $b=f.substr(P,4);P+=4}else $b=I,0===
wa&&n(Cd);if($b!==I){var Mb=P;wa++;var Dd=H();wa--;Dd===I?Mb=void 0:(P=Mb,Mb=I);Mb!==I?Bb=$b=[$b,Mb]:(P=Bb,Bb=I)}else P=Bb,Bb=I;var yb=Bb;yb!==I&&(yb={type:"bool",value:!0});Lb=yb;if(Lb===I){Lb=P;var Cb=P;if(f.substr(P,5).toLowerCase()===Ed){var ac=f.substr(P,5);P+=5}else ac=I,0===wa&&n(Fd);if(ac!==I){var Nb=P;wa++;var Gd=H();wa--;Gd===I?Nb=void 0:(P=Nb,Nb=I);Nb!==I?Cb=ac=[ac,Nb]:(P=Cb,Cb=I)}else P=Cb,Cb=I;yb=Cb;yb!==I&&(yb={type:"bool",value:!1});Lb=yb}X=Lb;if(X===I){var Db=P;if(f.substr(P,4).toLowerCase()===
Hd){var bc=f.substr(P,4);P+=4}else bc=I,0===wa&&n(Id);if(bc!==I){var Ob=P;wa++;var Jd=H();wa--;Jd===I?Ob=void 0:(P=Ob,Ob=I);Ob!==I?Db=bc=[bc,Ob]:(P=Db,Db=I)}else P=Db,Db=I;var rc=Db;rc!==I&&(rc={type:"null",value:null});X=rc;if(X===I){var vb=P;var Eb=P;if(f.substr(P,4).toLowerCase()===Kd){var sc=f.substr(P,4);P+=4}else sc=I,0===wa&&n(Ld);if(sc!==I){var cc=P;wa++;var Md=H();wa--;Md===I?cc=void 0:(P=cc,cc=I);cc!==I?Eb=sc="DATE":(P=Eb,Eb=I)}else P=Eb,Eb=I;var Rc=Eb;if(Rc!==I){var Nd=va();if(Nd!==I){var Sc=
Q();Sc!==I?vb=Rc={type:"date",value:Sc.value}:(P=vb,vb=I)}else P=vb,vb=I}else P=vb,vb=I;X=vb;if(X===I){var wb=P;var Fb=P;if(f.substr(P,9).toLowerCase()===Od){var tc=f.substr(P,9);P+=9}else tc=I,0===wa&&n(Pd);if(tc!==I){var dc=P;wa++;var Qd=H();wa--;Qd===I?dc=void 0:(P=dc,dc=I);dc!==I?Fb=tc="TIMESTAMP":(P=Fb,Fb=I)}else P=Fb,Fb=I;var Tc=Fb;if(Tc!==I){var Rd=va();if(Rd!==I){var Uc=Q();Uc!==I?wb=Tc={type:"timestamp",value:Uc.value}:(P=wb,wb=I)}else P=wb,wb=I}else P=wb,wb=I;X=wb;if(X===I){var Xa=P;var Pb=
na();if(Pb!==I){var uc=va();if(uc!==I){if(45===f.charCodeAt(P)){var tb=pc;P++}else tb=I,0===wa&&n(qc);tb===I&&(43===f.charCodeAt(P)?(tb=gb,P++):(tb=I,0===wa&&n(kb)));if(tb!==I){var vc=va();if(vc!==I){var Qb=Q();if(Qb!==I){var Sd=va();if(Sd!==I){var Vc=N();Vc!==I?Xa=Pb={type:"interval",value:Qb,qualifier:Vc,op:tb}:(P=Xa,Xa=I)}else P=Xa,Xa=I}else P=Xa,Xa=I}else P=Xa,Xa=I}else P=Xa,Xa=I}else P=Xa,Xa=I}else P=Xa,Xa=I;Xa===I&&(Xa=P,Pb=na(),Pb!==I?(uc=va(),uc!==I?(tb=Q(),tb!==I?(vc=va(),vc!==I?(Qb=N(),
Qb!==I?Xa=Pb={type:"interval",value:tb,qualifier:Qb,op:""}:(P=Xa,Xa=I)):(P=Xa,Xa=I)):(P=Xa,Xa=I)):(P=Xa,Xa=I)):(P=Xa,Xa=I));X=Xa}}}}}}var Wa=X;if(Wa===I){var db=P;var Gb=P;if(f.substr(P,7).toLowerCase()===Td){var wc=f.substr(P,7);P+=7}else wc=I,0===wa&&n(Ud);if(wc!==I){var ec=P;wa++;var Vd=H();wa--;Vd===I?ec=void 0:(P=ec,ec=I);ec!==I?Gb=wc="EXTRACT":(P=Gb,Gb=I)}else P=Gb,Gb=I;var Wc=Gb;if(Wc!==I){var Wd=va();if(Wd!==I){var Xd=Ia();if(Xd!==I){var Yd=va();if(Yd!==I){var ob=qa();ob===I&&(ob=ra(),ob===
I&&(ob=xa(),ob===I&&(ob=ya(),ob===I&&(ob=Aa(),ob===I&&(ob=Ba())))));var Xc=ob;if(Xc!==I){var Zd=va();if(Zd!==I){var $d=ka();if($d!==I){var ae=va();if(ae!==I){var Yc=a();if(Yc!==I){var be=va();if(be!==I){var ce=Sa();ce!==I?db=Wc={type:"function",name:"extract",args:{type:"expr_list",value:[{type:"string",value:Xc},Yc]}}:(P=db,db=I)}else P=db,db=I}else P=db,db=I}else P=db,db=I}else P=db,db=I}else P=db,db=I}else P=db,db=I}else P=db,db=I}else P=db,db=I}else P=db,db=I}else P=db,db=I;Wa=db;if(Wa===I){var bb=
P;var Hb=P;if(f.substr(P,9).toLowerCase()===de){var xc=f.substr(P,9);P+=9}else xc=I,0===wa&&n(ee);if(xc!==I){var fc=P;wa++;var fe=H();wa--;fe===I?fc=void 0:(P=fc,fc=I);fc!==I?Hb=xc="SUBSTRING":(P=Hb,Hb=I)}else P=Hb,Hb=I;var Zc=Hb;if(Zc!==I){var ge=va();if(ge!==I){var he=Ia();if(he!==I){var ie=va();if(ie!==I){var yc=a();if(yc!==I){var je=va();if(je!==I){var ke=ka();if(ke!==I){var le=va();if(le!==I){var zc=a();if(zc!==I){var me=va();if(me!==I){var lb=P;var Ib=P;if(f.substr(P,3).toLowerCase()===ne){var Ac=
f.substr(P,3);P+=3}else Ac=I,0===wa&&n(oe);if(Ac!==I){var gc=P;wa++;var pe=H();wa--;pe===I?gc=void 0:(P=gc,gc=I);gc!==I?Ib=Ac="FOR":(P=Ib,Ib=I)}else P=Ib,Ib=I;var Rb=Ib;if(Rb!==I){var $c=va();if($c!==I){var ad=a();if(ad!==I){var bd=va();bd!==I?lb=Rb=[Rb,$c,ad,bd]:(P=lb,lb=I)}else P=lb,lb=I}else P=lb,lb=I}else P=lb,lb=I;lb===I&&(lb=null);lb!==I?(Rb=Sa(),Rb!==I?bb=Zc={type:"function",name:"substring",args:{type:"expr_list",value:lb?[yc,zc,lb[2]]:[yc,zc]}}:(P=bb,bb=I)):(P=bb,bb=I)}else P=bb,bb=I}else P=
bb,bb=I}else P=bb,bb=I}else P=bb,bb=I}else P=bb,bb=I}else P=bb,bb=I}else P=bb,bb=I}else P=bb,bb=I}else P=bb,bb=I}else P=bb,bb=I;Wa=bb;if(Wa===I){var Ma=P;var Sb=ia();if(Sb!==I){var Bc=va();if(Bc!==I){var Cc=Ia();if(Cc!==I){var Dc=va();if(Dc!==I){var pb=F();pb===I&&(pb=null);if(pb!==I){var Ec=va();if(Ec!==I){var Tb=a();if(Tb!==I){var Fc=va();if(Fc!==I){var Gc=ka();if(Gc!==I){var qe=va();if(qe!==I){var cd=a();if(cd!==I){var re=va();if(re!==I){var se=Sa();se!==I?Ma=Sb={type:"function",name:"trim",args:{type:"expr_list",
value:[{type:"string",value:null==pb?"BOTH":pb},Tb,cd]}}:(P=Ma,Ma=I)}else P=Ma,Ma=I}else P=Ma,Ma=I}else P=Ma,Ma=I}else P=Ma,Ma=I}else P=Ma,Ma=I}else P=Ma,Ma=I}else P=Ma,Ma=I}else P=Ma,Ma=I}else P=Ma,Ma=I}else P=Ma,Ma=I}else P=Ma,Ma=I}else P=Ma,Ma=I;Ma===I&&(Ma=P,Sb=ia(),Sb!==I?(Bc=va(),Bc!==I?(Cc=Ia(),Cc!==I?(Dc=va(),Dc!==I?(pb=F(),pb===I&&(pb=null),pb!==I?(Ec=va(),Ec!==I?(Tb=a(),Tb!==I?(Fc=va(),Fc!==I?(Gc=Sa(),Gc!==I?Ma=Sb={type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",
value:null==pb?"BOTH":pb},Tb]}}:(P=Ma,Ma=I)):(P=Ma,Ma=I)):(P=Ma,Ma=I)):(P=Ma,Ma=I)):(P=Ma,Ma=I)):(P=Ma,Ma=I)):(P=Ma,Ma=I)):(P=Ma,Ma=I)):(P=Ma,Ma=I));Wa=Ma;if(Wa===I){var eb=P;var Jb=P;if(f.substr(P,8).toLowerCase()===te){var Hc=f.substr(P,8);P+=8}else Hc=I,0===wa&&n(ue);if(Hc!==I){var hc=P;wa++;var ve=H();wa--;ve===I?hc=void 0:(P=hc,hc=I);hc!==I?Jb=Hc="POSITION":(P=Jb,Jb=I)}else P=Jb,Jb=I;var dd=Jb;if(dd!==I){var we=va();if(we!==I){var xe=Ia();if(xe!==I){var ye=va();if(ye!==I){var ed=a();if(ed!==
I){var ze=va();if(ze!==I){var Ae=O();if(Ae!==I){var Be=va();if(Be!==I){var fd=a();if(fd!==I){var Ce=va();if(Ce!==I){var De=Sa();De!==I?eb=dd={type:"function",name:"position",args:{type:"expr_list",value:[ed,fd]}}:(P=eb,eb=I)}else P=eb,eb=I}else P=eb,eb=I}else P=eb,eb=I}else P=eb,eb=I}else P=eb,eb=I}else P=eb,eb=I}else P=eb,eb=I}else P=eb,eb=I}else P=eb,eb=I}else P=eb,eb=I;Wa=eb;if(Wa===I){var ib=P;var Ub;var qb=P;qb=Ub=E();if(qb===I)if(qb=P,96===f.charCodeAt(P)?(Ub=gd,P++):(Ub=I,0===wa&&n(hd)),Ub!==
I){var ic=[];if(id.test(f.charAt(P))){var ub=f.charAt(P);P++}else ub=I,0===wa&&n(jd);if(ub!==I)for(;ub!==I;)ic.push(ub),id.test(f.charAt(P))?(ub=f.charAt(P),P++):(ub=I,0===wa&&n(jd));else ic=I;ic!==I?(96===f.charCodeAt(P)?(ub=gd,P++):(ub=I,0===wa&&n(hd)),ub!==I?qb=Ub=ic.join(""):(P=qb,qb=I)):(P=qb,qb=I)}else P=qb,qb=I;var Ic=qb;if(Ic!==I){var Ee=va();if(Ee!==I){var Fe=Ia();if(Fe!==I){var Ge=va();if(Ge!==I){var Vb=b();Vb===I&&(Vb=null);if(Vb!==I){var He=va();if(He!==I){var Ie=Sa();Ie!==I?ib=Ic={type:"function",
name:Ic,args:Vb?Vb:{type:"expr_list",value:[]}}:(P=ib,ib=I)}else P=ib,ib=I}else P=ib,ib=I}else P=ib,ib=I}else P=ib,ib=I}else P=ib,ib=I}else P=ib,ib=I;Wa=ib;if(Wa===I){var mb;var Ra=P;var Wb=Ca();if(Wb!==I){var Jc=va();if(Jc!==I){var Xb=a();if(Xb!==I){var Kc=va();if(Kc!==I){var zb=[];for(mb=fa();mb!==I;)zb.push(mb),mb=fa();if(zb!==I)if(mb=va(),mb!==I){var jc=Ka();jc!==I?Ra=Wb={type:"case_expression",format:"simple",operand:Xb,clauses:zb,else:null}:(P=Ra,Ra=I)}else P=Ra,Ra=I;else P=Ra,Ra=I}else P=Ra,
Ra=I}else P=Ra,Ra=I}else P=Ra,Ra=I}else P=Ra,Ra=I;if(Ra===I)if(Ra=P,Wb=Ca(),Wb!==I)if(Jc=va(),Jc!==I)if(Xb=a(),Xb!==I)if(Kc=va(),Kc!==I){zb=[];for(mb=fa();mb!==I;)zb.push(mb),mb=fa();if(zb!==I)if(mb=va(),mb!==I)if(jc=Z(),jc!==I){var Je=va();if(Je!==I){var Ke=Ka();Ke!==I?Ra=Wb={type:"case_expression",format:"simple",operand:Xb,clauses:zb,else:jc.value}:(P=Ra,Ra=I)}else P=Ra,Ra=I}else P=Ra,Ra=I;else P=Ra,Ra=I;else P=Ra,Ra=I}else P=Ra,Ra=I;else P=Ra,Ra=I;else P=Ra,Ra=I;else P=Ra,Ra=I;var Lc=Ra;if(Lc===
I){var nb;var Ya=P;var Yb=Ca();if(Yb!==I){var Mc=va();if(Mc!==I){var Ab=[];for(nb=W();nb!==I;)Ab.push(nb),nb=W();if(Ab!==I)if(nb=va(),nb!==I){var kc=Ka();kc!==I?Ya=Yb={type:"case_expression",format:"searched",clauses:Ab,else:null}:(P=Ya,Ya=I)}else P=Ya,Ya=I;else P=Ya,Ya=I}else P=Ya,Ya=I}else P=Ya,Ya=I;if(Ya===I)if(Ya=P,Yb=Ca(),Yb!==I)if(Mc=va(),Mc!==I){Ab=[];for(nb=W();nb!==I;)Ab.push(nb),nb=W();if(Ab!==I)if(nb=va(),nb!==I)if(kc=Z(),kc!==I){var Le=va();if(Le!==I){var Me=Ka();Me!==I?Ya=Yb={type:"case_expression",
format:"searched",clauses:Ab,else:kc.value}:(P=Ya,Ya=I)}else P=Ya,Ya=I}else P=Ya,Ya=I;else P=Ya,Ya=I;else P=Ya,Ya=I}else P=Ya,Ya=I;else P=Ya,Ya=I;Lc=Ya}Wa=Lc;if(Wa===I){var lc;var Kb=P;var kd=G();if(kd!==I){var Nc=[];for(lc=K();lc!==I;)Nc.push(lc),lc=K();Nc!==I?Kb=kd+=Nc.join(""):(P=Kb,Kb=I)}else P=Kb,Kb=I;var mc=Kb;if(mc!==I){var Oc=mc;mc=/^CURRENT_DATE$/i.test(Oc)?{type:"current_time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(Oc)?{type:"current_time",mode:"timestamp"}:{type:"column_ref",table:"",
column:Oc}}Wa=mc;if(Wa===I&&(Wa=J(),Wa===I)){Wa=P;var ld=Ia();if(ld!==I){var Ne=va();if(Ne!==I){var Pc=a();if(Pc!==I){var Oe=va();if(Oe!==I){var Pe=Sa();Pe!==I?(Pc.paren=!0,Wa=ld=Pc):(P=Wa,Wa=I)}else P=Wa,Wa=I}else P=Wa,Wa=I}else P=Wa,Wa=I}else P=Wa,Wa=I}}}}}}}}return Wa}function E(){var X;var ea=P;var da=G();if(da!==I){var la=[];for(X=H();X!==I;)la.push(X),X=H();la!==I?ea=da+=la.join(""):(P=ea,ea=I)}else P=ea,ea=I;return ea}function G(){if(Qe.test(f.charAt(P))){var X=f.charAt(P);P++}else X=I,0===
wa&&n(Re);return X}function H(){if(Se.test(f.charAt(P))){var X=f.charAt(P);P++}else X=I,0===wa&&n(Te);return X}function K(){if(Ue.test(f.charAt(P))){var X=f.charAt(P);P++}else X=I,0===wa&&n(Ve);return X}function J(){var X=P;if(64===f.charCodeAt(P)){var ea=We;P++}else ea=I,0===wa&&n(Xe);if(ea!==I){var da=E();da!==I?X=ea=[ea,da]:(P=X,X=I)}else P=X,X=I;X!==I&&(X={type:"param",value:X[1]});return X}function F(){var X=P;if(f.substr(P,7).toLowerCase()===Ye){var ea=f.substr(P,7);P+=7}else ea=I,0===wa&&n(Ze);
if(ea!==I){ea=P;wa++;var da=H();wa--;da===I?ea=void 0:(P=ea,ea=I);ea!==I?X="LEADING":(P=X,X=I)}else P=X,X=I;X===I&&(X=P,f.substr(P,8).toLowerCase()===$e?(ea=f.substr(P,8),P+=8):(ea=I,0===wa&&n(af)),ea!==I?(ea=P,wa++,da=H(),wa--,da===I?ea=void 0:(P=ea,ea=I),ea!==I?X="TRAILING":(P=X,X=I)):(P=X,X=I),X===I&&(X=P,f.substr(P,4).toLowerCase()===bf?(ea=f.substr(P,4),P+=4):(ea=I,0===wa&&n(cf)),ea!==I?(ea=P,wa++,da=H(),wa--,da===I?ea=void 0:(P=ea,ea=I),ea!==I?X="BOTH":(P=X,X=I)):(P=X,X=I)));return X}function N(){var X=
P;var ea=P;var da=L();if(da!==I){var la=va();if(la!==I)if(la=Ia(),la!==I)if(la=va(),la!==I)if(la=S(),la!==I){var za=va();za!==I?(za=Sa(),za!==I?ea=da={type:"interval-period",period:da.value,precision:la,secondary:null}:(P=ea,ea=I)):(P=ea,ea=I)}else P=ea,ea=I;else P=ea,ea=I;else P=ea,ea=I;else P=ea,ea=I}else P=ea,ea=I;ea===I&&(ea=P,da=L(),da!==I&&(da=md(da)),ea=da);if(ea!==I)if(da=va(),da!==I)if(da=P,f.substr(P,2).toLowerCase()===df?(la=f.substr(P,2),P+=2):(la=I,0===wa&&n(ef)),la!==I?(la=P,wa++,za=
H(),wa--,za===I?la=void 0:(P=la,la=I),la!==I?da="TO":(P=da,da=I)):(P=da,da=I),da!==I)if(da=va(),da!==I){da=P;la=L();la!==I&&(la={type:"interval-period",period:la.value,precision:null,secondary:null});da=la;if(da===I){da=P;la=Ba();if(la!==I)if(la=va(),la!==I)if(la=Ia(),la!==I)if(la=va(),la!==I)if(la=S(),la!==I)if(za=va(),za!==I)if(za=Ha(),za!==I)if(za=va(),za!==I)if(za=M(),za!==I){var Fa=va();Fa!==I?(Fa=Sa(),Fa!==I?da=la=nd(la,za):(P=da,da=I)):(P=da,da=I)}else P=da,da=I;else P=da,da=I;else P=da,da=
I;else P=da,da=I;else P=da,da=I;else P=da,da=I;else P=da,da=I;else P=da,da=I;else P=da,da=I;da===I&&(da=P,la=Ba(),la!==I?(la=va(),la!==I?(la=Ia(),la!==I?(la=va(),la!==I?(la=S(),la!==I?(za=va(),za!==I?(za=Sa(),za!==I?da=la={type:"interval-period",period:"second",precision:la,secondary:null}:(P=da,da=I)):(P=da,da=I)):(P=da,da=I)):(P=da,da=I)):(P=da,da=I)):(P=da,da=I)):(P=da,da=I),da===I&&(da=P,la=Ba(),la!==I&&(la={type:"interval-period",period:"second",precision:null,secondary:null}),da=la))}da!==I?
X=ea={type:"interval-qualifier",start:ea,end:da}:(P=X,X=I)}else P=X,X=I;else P=X,X=I;else P=X,X=I;else P=X,X=I;X===I&&(X=P,da=L(),da!==I?(ea=va(),ea!==I?(ea=Ia(),ea!==I?(ea=va(),ea!==I?(ea=M(),ea!==I?(la=va(),la!==I?(la=Sa(),la!==I?X=da={type:"interval-period",period:da.value,precision:ea,secondary:null}:(P=X,X=I)):(P=X,X=I)):(P=X,X=I)):(P=X,X=I)):(P=X,X=I)):(P=X,X=I)):(P=X,X=I),X===I&&(X=P,da=L(),da!==I&&(da=md(da)),X=da,X===I&&(X=P,da=Ba(),da!==I?(ea=va(),ea!==I?(ea=Ia(),ea!==I?(ea=va(),ea!==I?
(ea=S(),ea!==I?(la=va(),la!==I?(la=Ha(),la!==I?(da=va(),da!==I?(da=M(),da!==I?(la=va(),la!==I?(la=Sa(),la!==I?X=da=nd(ea,da):(P=X,X=I)):(P=X,X=I)):(P=X,X=I)):(P=X,X=I)):(P=X,X=I)):(P=X,X=I)):(P=X,X=I)):(P=X,X=I)):(P=X,X=I)):(P=X,X=I)):(P=X,X=I),X===I&&(X=P,da=Ba(),da!==I?(ea=va(),ea!==I?(ea=Ia(),ea!==I?(ea=va(),ea!==I?(ea=M(),ea!==I?(la=va(),la!==I?(la=Sa(),la!==I?X=da={type:"interval-period",period:"second",precision:ea,secondary:null}:(P=X,X=I)):(P=X,X=I)):(P=X,X=I)):(P=X,X=I)):(P=X,X=I)):(P=X,
X=I)):(P=X,X=I),X===I&&(X=P,da=Ba(),da!==I&&(da={type:"interval-period",period:"second",precision:null,secondary:null}),X=da)))));return X}function L(){var X=P;X=xa();X!==I&&(X={type:"string",value:"day"});X===I&&(X=P,X=ya(),X!==I&&(X={type:"string",value:"hour"}),X===I&&(X=P,X=Aa(),X!==I&&(X={type:"string",value:"minute"}),X===I&&(X=P,X=ra(),X!==I&&(X={type:"string",value:"month"}),X===I&&(X=P,X=qa(),X!==I&&(X={type:"string",value:"year"})))));return X}function M(){var X=sa();X!==I&&(X=parseFloat(X));
return X}function S(){var X=sa();X!==I&&(X=parseFloat(X));return X}function Q(){var X=U();X===I&&(X=J());return X}function U(){var X=P;if(39===f.charCodeAt(P)){var ea=od;P++}else ea=I,0===wa&&n(pd);ea===I&&(f.substr(P,2)===qd?(ea=qd,P+=2):(ea=I,0===wa&&n(ff)));if(ea!==I){ea=[];var da=P;f.substr(P,2)===nc?(da=nc,P+=2):(da=I,0===wa&&n(rd));da!==I&&(da="'");da===I&&(sd.test(f.charAt(P))?(da=f.charAt(P),P++):(da=I,0===wa&&n(td)));for(;da!==I;)ea.push(da),da=P,f.substr(P,2)===nc?(da=nc,P+=2):(da=I,0===
wa&&n(rd)),da!==I&&(da="'"),da===I&&(sd.test(f.charAt(P))?(da=f.charAt(P),P++):(da=I,0===wa&&n(td)));ea!==I?(39===f.charCodeAt(P)?(da=od,P++):(da=I,0===wa&&n(pd)),da!==I?X=ea={type:"string",value:ea.join("")}:(P=X,X=I)):(P=X,X=I)}else P=X,X=I;return X}function W(){var X=P;var ea=Ga();if(ea!==I)if(ea=va(),ea!==I)if(ea=a(),ea!==I){var da=va();da!==I?(da=Ja(),da!==I?(da=va(),da!==I?(da=a(),da!==I?X=ea={type:"when_clause",operand:ea,value:da}:(P=X,X=I)):(P=X,X=I)):(P=X,X=I)):(P=X,X=I)}else P=X,X=I;else P=
X,X=I;else P=X,X=I;return X}function fa(){var X=P;var ea=Ga();if(ea!==I)if(ea=va(),ea!==I)if(ea=a(),ea!==I){var da=va();da!==I?(da=Ja(),da!==I?(da=va(),da!==I?(da=a(),da!==I?X=ea={type:"when_clause",operand:ea,value:da}:(P=X,X=I)):(P=X,X=I)):(P=X,X=I)):(P=X,X=I)}else P=X,X=I;else P=X,X=I;else P=X,X=I;return X}function Z(){var X=P;var ea=P;if(f.substr(P,4).toLowerCase()===gf){var da=f.substr(P,4);P+=4}else da=I,0===wa&&n(hf);if(da!==I){da=P;wa++;var la=H();wa--;la===I?da=void 0:(P=da,da=I);da!==I?
ea="ELSE":(P=ea,ea=I)}else P=ea,ea=I;ea!==I?(ea=va(),ea!==I?(ea=a(),ea!==I?X={type:"else_clause",value:ea}:(P=X,X=I)):(P=X,X=I)):(P=X,X=I);return X}function T(){var X=sa();if(X===I){X=P;if(45===f.charCodeAt(P)){var ea=pc;P++}else ea=I,0===wa&&n(qc);ea===I&&(43===f.charCodeAt(P)?(ea=gb,P++):(ea=I,0===wa&&n(kb)));if(ea!==I){var da=sa();da!==I?X=ea=ea[0]+da:(P=X,X=I)}else P=X,X=I}return X}function ba(){var X=P;if(46===f.charCodeAt(P)){var ea=jf;P++}else ea=I,0===wa&&n(kf);ea!==I?(ea=sa(),ea===I&&(ea=
null),ea!==I?X="."+(null!=ea?ea:""):(P=X,X=I)):(P=X,X=I);return X}function ha(){var X;var ea=X=P;if(lf.test(f.charAt(P))){var da=f.charAt(P);P++}else da=I,0===wa&&n(mf);da!==I?(nf.test(f.charAt(P))?(da=f.charAt(P),P++):(da=I,0===wa&&n(of)),da===I&&(da=null),da!==I?ea="e"+(null===da?"":da):(P=ea,ea=I)):(P=ea,ea=I);ea!==I?(da=sa(),da!==I?X=ea+da:(P=X,X=I)):(P=X,X=I);return X}function sa(){var X=[];var ea=ua();if(ea!==I)for(;ea!==I;)X.push(ea),ea=ua();else X=I;X!==I&&(X=X.join(""));return X}function ua(){if(pf.test(f.charAt(P))){var X=
f.charAt(P);P++}else X=I,0===wa&&n(qf);return X}function O(){var X=P;if(f.substr(P,2).toLowerCase()===rf){var ea=f.substr(P,2);P+=2}else ea=I,0===wa&&n(sf);if(ea!==I){ea=P;wa++;var da=H();wa--;da===I?ea=void 0:(P=ea,ea=I);ea!==I?X="IN":(P=X,X=I)}else P=X,X=I;return X}function V(){var X=P;if(f.substr(P,2).toLowerCase()===tf){var ea=f.substr(P,2);P+=2}else ea=I,0===wa&&n(uf);if(ea!==I){ea=P;wa++;var da=H();wa--;da===I?ea=void 0:(P=ea,ea=I);ea!==I?X="IS":(P=X,X=I)}else P=X,X=I;return X}function ja(){var X=
P;if(f.substr(P,4).toLowerCase()===vf){var ea=f.substr(P,4);P+=4}else ea=I,0===wa&&n(wf);if(ea!==I){ea=P;wa++;var da=H();wa--;da===I?ea=void 0:(P=ea,ea=I);ea!==I?X="LIKE":(P=X,X=I)}else P=X,X=I;return X}function R(){var X=P;if(f.substr(P,3).toLowerCase()===xf){var ea=f.substr(P,3);P+=3}else ea=I,0===wa&&n(yf);if(ea!==I){ea=P;wa++;var da=H();wa--;da===I?ea=void 0:(P=ea,ea=I);ea!==I?X="NOT":(P=X,X=I)}else P=X,X=I;return X}function Y(){var X=P;if(f.substr(P,3).toLowerCase()===zf){var ea=f.substr(P,3);
P+=3}else ea=I,0===wa&&n(Af);if(ea!==I){ea=P;wa++;var da=H();wa--;da===I?ea=void 0:(P=ea,ea=I);ea!==I?X="AND":(P=X,X=I)}else P=X,X=I;return X}function aa(){var X=P;if(f.substr(P,2).toLowerCase()===Bf){var ea=f.substr(P,2);P+=2}else ea=I,0===wa&&n(Cf);if(ea!==I){ea=P;wa++;var da=H();wa--;da===I?ea=void 0:(P=ea,ea=I);ea!==I?X="OR":(P=X,X=I)}else P=X,X=I;return X}function ca(){var X=P;if(f.substr(P,7).toLowerCase()===Df){var ea=f.substr(P,7);P+=7}else ea=I,0===wa&&n(Ef);if(ea!==I){ea=P;wa++;var da=H();
wa--;da===I?ea=void 0:(P=ea,ea=I);ea!==I?X="BETWEEN":(P=X,X=I)}else P=X,X=I;return X}function ka(){var X=P;if(f.substr(P,4).toLowerCase()===Ff){var ea=f.substr(P,4);P+=4}else ea=I,0===wa&&n(Gf);if(ea!==I){ea=P;wa++;var da=H();wa--;da===I?ea=void 0:(P=ea,ea=I);ea!==I?X="FROM":(P=X,X=I)}else P=X,X=I;return X}function ia(){var X=P;if(f.substr(P,4).toLowerCase()===Hf){var ea=f.substr(P,4);P+=4}else ea=I,0===wa&&n(If);if(ea!==I){ea=P;wa++;var da=H();wa--;da===I?ea=void 0:(P=ea,ea=I);ea!==I?X="TRIM":(P=
X,X=I)}else P=X,X=I;return X}function na(){var X=P;if(f.substr(P,8).toLowerCase()===Jf){var ea=f.substr(P,8);P+=8}else ea=I,0===wa&&n(Kf);if(ea!==I){ea=P;wa++;var da=H();wa--;da===I?ea=void 0:(P=ea,ea=I);ea!==I?X="INTERVAL":(P=X,X=I)}else P=X,X=I;return X}function qa(){var X=P;if(f.substr(P,4).toLowerCase()===Lf){var ea=f.substr(P,4);P+=4}else ea=I,0===wa&&n(Mf);if(ea!==I){ea=P;wa++;var da=H();wa--;da===I?ea=void 0:(P=ea,ea=I);ea!==I?X="YEAR":(P=X,X=I)}else P=X,X=I;return X}function ra(){var X=P;
if(f.substr(P,5).toLowerCase()===Nf){var ea=f.substr(P,5);P+=5}else ea=I,0===wa&&n(Of);if(ea!==I){ea=P;wa++;var da=H();wa--;da===I?ea=void 0:(P=ea,ea=I);ea!==I?X="MONTH":(P=X,X=I)}else P=X,X=I;return X}function xa(){var X=P;if(f.substr(P,3).toLowerCase()===Pf){var ea=f.substr(P,3);P+=3}else ea=I,0===wa&&n(Qf);if(ea!==I){ea=P;wa++;var da=H();wa--;da===I?ea=void 0:(P=ea,ea=I);ea!==I?X="DAY":(P=X,X=I)}else P=X,X=I;return X}function ya(){var X=P;if(f.substr(P,4).toLowerCase()===Rf){var ea=f.substr(P,
4);P+=4}else ea=I,0===wa&&n(Sf);if(ea!==I){ea=P;wa++;var da=H();wa--;da===I?ea=void 0:(P=ea,ea=I);ea!==I?X="HOUR":(P=X,X=I)}else P=X,X=I;return X}function Aa(){var X=P;if(f.substr(P,6).toLowerCase()===Tf){var ea=f.substr(P,6);P+=6}else ea=I,0===wa&&n(Uf);if(ea!==I){ea=P;wa++;var da=H();wa--;da===I?ea=void 0:(P=ea,ea=I);ea!==I?X="MINUTE":(P=X,X=I)}else P=X,X=I;return X}function Ba(){var X=P;if(f.substr(P,6).toLowerCase()===Vf){var ea=f.substr(P,6);P+=6}else ea=I,0===wa&&n(Wf);if(ea!==I){ea=P;wa++;
var da=H();wa--;da===I?ea=void 0:(P=ea,ea=I);ea!==I?X="SECOND":(P=X,X=I)}else P=X,X=I;return X}function Ca(){var X=P;if(f.substr(P,4).toLowerCase()===Xf){var ea=f.substr(P,4);P+=4}else ea=I,0===wa&&n(Yf);if(ea!==I){ea=P;wa++;var da=H();wa--;da===I?ea=void 0:(P=ea,ea=I);ea!==I?X="CASE":(P=X,X=I)}else P=X,X=I;return X}function Ka(){var X=P;if(f.substr(P,3).toLowerCase()===Zf){var ea=f.substr(P,3);P+=3}else ea=I,0===wa&&n($f);if(ea!==I){ea=P;wa++;var da=H();wa--;da===I?ea=void 0:(P=ea,ea=I);ea!==I?X=
"END":(P=X,X=I)}else P=X,X=I;return X}function Ga(){var X=P;if(f.substr(P,4).toLowerCase()===ag){var ea=f.substr(P,4);P+=4}else ea=I,0===wa&&n(bg);if(ea!==I){ea=P;wa++;var da=H();wa--;da===I?ea=void 0:(P=ea,ea=I);ea!==I?X="WHEN":(P=X,X=I)}else P=X,X=I;return X}function Ja(){var X=P;if(f.substr(P,4).toLowerCase()===cg){var ea=f.substr(P,4);P+=4}else ea=I,0===wa&&n(dg);if(ea!==I){ea=P;wa++;var da=H();wa--;da===I?ea=void 0:(P=ea,ea=I);ea!==I?X="THEN":(P=X,X=I)}else P=X,X=I;return X}function Ha(){if(44===
f.charCodeAt(P)){var X=eg;P++}else X=I,0===wa&&n(fg);return X}function Ia(){if(40===f.charCodeAt(P)){var X=gg;P++}else X=I,0===wa&&n(hg);return X}function Sa(){if(41===f.charCodeAt(P)){var X=ig;P++}else X=I,0===wa&&n(jg);return X}function va(){var X;var ea=[];for(X=fb();X!==I;)ea.push(X),X=fb();return ea}function fb(){if(kg.test(f.charAt(P))){var X=f.charAt(P);P++}else X=I,0===wa&&n(lg);return X}function hb(X,ea,da,la){X={type:"binary_expr",operator:X,left:ea,right:da};void 0!==la&&(X.escape=la);
return X}function cb(X,ea){for(var da=0;da<ea.length;da++)X=hb(ea[da][1],X,ea[da][3]);return X}h=void 0!==h?h:{};var I={},Va={start:d},Ua=d,Ta="!",jb=e("!",!1),rb="\x3d",Qa=e("\x3d",!1),xb="\x3e\x3d",ma=e("\x3e\x3d",!1),pa="\x3e",oa=e("\x3e",!1),ta="\x3c\x3d",Da=e("\x3c\x3d",!1),Ea="\x3c\x3e",Na=e("\x3c\x3e",!1),Oa="\x3c",ab=e("\x3c",!1),Za="!\x3d",$a=e("!\x3d",!1),gb="+",kb=e("+",!1),pc="-",qc=e("-",!1),wd="*",xd=e("*",!1),yd="/",zd=e("/",!1),Qe=/^[A-Za-z_\x80-\uFFFF]/,Re=l([["A","Z"],["a","z"],
"_",["\u0080","\uffff"]],!1,!1),Se=/^[A-Za-z0-9_]/,Te=l([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),Ue=/^[A-Za-z0-9_.\x80-\uFFFF]/,Ve=l([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],!1,!1),We="@",Xe=e("@",!1),md=function(X){return{type:"interval-period",period:X.value,precision:null,secondary:null}},nd=function(X,ea){return{type:"interval-period",period:"second",precision:X,secondary:ea}},od="'",pd=e("'",!1),qd="N'",ff=e("N'",!1),nc="''",rd=e("''",!1),sd=/^[^']/,td=l(["'"],!0,!1),jf=
".",kf=e(".",!1),pf=/^[0-9]/,qf=l([["0","9"]],!1,!1),lf=/^[eE]/,mf=l(["e","E"],!1,!1),nf=/^[+\-]/,of=l(["+","-"],!1,!1),Hd="null",Id=e("NULL",!0),Bd="true",Cd=e("TRUE",!0),Ed="false",Fd=e("FALSE",!0),rf="in",sf=e("IN",!0),tf="is",uf=e("IS",!0),vf="like",wf=e("LIKE",!0),ud="escape",vd=e("ESCAPE",!0),xf="not",yf=e("NOT",!0),zf="and",Af=e("AND",!0),Bf="or",Cf=e("OR",!0),Df="between",Ef=e("BETWEEN",!0),Ff="from",Gf=e("FROM",!0),ne="for",oe=e("FOR",!0),de="substring",ee=e("SUBSTRING",!0),Td="extract",
Ud=e("EXTRACT",!0),Hf="trim",If=e("TRIM",!0),te="position",ue=e("POSITION",!0),Od="timestamp",Pd=e("TIMESTAMP",!0),Kd="date",Ld=e("DATE",!0),Ye="leading",Ze=e("LEADING",!0),$e="trailing",af=e("TRAILING",!0),bf="both",cf=e("BOTH",!0),df="to",ef=e("TO",!0),Jf="interval",Kf=e("INTERVAL",!0),Lf="year",Mf=e("YEAR",!0),Nf="month",Of=e("MONTH",!0),Pf="day",Qf=e("DAY",!0),Rf="hour",Sf=e("HOUR",!0),Tf="minute",Uf=e("MINUTE",!0),Vf="second",Wf=e("SECOND",!0),Xf="case",Yf=e("CASE",!0),Zf="end",$f=e("END",!0),
ag="when",bg=e("WHEN",!0),cg="then",dg=e("THEN",!0),gf="else",hf=e("ELSE",!0),eg=",",fg=e(",",!1),gg="(",hg=e("(",!1),ig=")",jg=e(")",!1),kg=/^[ \t\n\r]/,lg=l([" ","\t","\n","\r"],!1,!1),gd="`",hd=e("`",!1),id=/^[^`]/,jd=l(["`"],!0,!1),P=0,Zb=[{line:1,column:1}],sb=0,oc=[],wa=0;if("startRule"in h){if(!(h.startRule in Va))throw Error("Can't start parsing from rule \""+h.startRule+'".');Ua=Va[h.startRule]}var Qc=Ua();if(Qc!==I&&P===f.length)return Qc;Qc!==I&&P<f.length&&n({type:"end"});throw function(X,
ea,da){return new x(x.buildMessage(X,ea),X,ea,da)}(oc,sb<f.length?f.charAt(sb):null,sb<f.length?p(sb,sb+1):p(sb,sb));}}})});let z=function(){function y(){}y.parse=function(x){return m.parse(x)};return y}();t.WhereGrammar=z;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/layers/graphics/data/utils":function(){define("require exports ../../../core/maybe ../../../core/jsonMap ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/extentUtils ../../../geometry/support/jsonUtils ../../../core/unitUtils ../../../geometry/support/normalizeUtils ../OptimizedGeometry ../featureConversionUtils ../centroid ./projectionSupport".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n){function d(C,A,E,G=C.hasZ,H=C.hasM){const K=C.hasZ&&G,J=C.hasM&&H;return E?(C=q.quantizeOptimizedGeometry(v,A,C.hasZ,C.hasM,"esriGeometryPoint",E,G,H),q.convertToPoint(C,K,J)):q.convertToPoint(A,K,J)}async function b(C,A,E){if(!C)return null;var {where:G}=C;C.where=G=G&&G.trim();if(!G||/^1 *= *1$/.test(G)||A&&A===G)C.where=null;if(!C.geometry)return C;A=await a(C);C.distance=0;C.units=null;"esriSpatialRelEnvelopeIntersects"===C.spatialRel&&({spatialReference:G}=
C.geometry,A=x.getGeometryExtent(A),A.spatialReference=G);C.geometry=A;await n.checkProjectionSupport(A.spatialReference,E);A=(await e.normalizeCentralMeridian(f.fromJSON(A)))[0];if(m.isNone(A))throw r;A=A.toJSON();A=await n.project(A,A.spatialReference,E);if(!A)throw r;A.spatialReference=E;C.geometry=A;return C}async function a(C){const {geometry:A,distance:E,units:G}=C;if(null==E||"vertexAttributes"in A)return A;var H=A.spatialReference;C=G?g.fromJSON(G):h.getUnitString(H);H=H&&(y.isGeographic(H)||
y.isWebMercator(H))?A:await n.checkProjectionSupport(H,y.WGS84).then(()=>n.project(A,y.WGS84));return(await c())(H.spatialReference,H,E,C)}async function c(){return(await new Promise(function(C,A){t(["../../../geometry/geometryEngineJSON"],C,A)})).geodesicBuffer}const g=new z.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),r=Object.freeze({}),
u=new l,w=new l,v=new l,D={esriGeometryPoint:q.convertToPoint,esriGeometryPolyline:q.convertToPolyline,esriGeometryPolygon:q.convertToPolygon,esriGeometryMultipoint:q.convertToMultipoint},B=(C,A)=>"_geVersion"!==C?A:void 0;k.QUERY_ENGINE_EMPTY_RESULT=r;k.cleanFromGeometryEngine=function(C){return C&&"_geVersion"in C?JSON.parse(JSON.stringify(C,B)):C};k.getCentroid=function(C,A,E){if("esriGeometryPolygon"!==C.geometryType||!A||!A.centroid&&!A.geometry)return null;A.centroid||(A.centroid=p.getCentroidOptimizedGeometry(new l,
A.geometry,C.hasZ,C.hasM));return d(C,A.centroid,E)};k.getGeometry=function(C,A,E,G,H,K,J=A,F=E){const N=A&&J,L=E&&F;G=G?"coords"in G?G:G.geometry:null;if(!G)return null;if(H)return A=q.generalizeOptimizedGeometry(w,G,A,E,C,H,J,F),K&&(A=q.quantizeOptimizedGeometry(v,A,N,L,C,K)),D[C](A,N,L);if(K)return K=q.quantizeOptimizedGeometry(v,G,A,E,C,K,J,F),D[C](K,N,L);q.removeZMValues(u,G,A,E,J,F);return D[C](u,N,L)};k.normalizeFilter=async function(C,A,E){return b(C,A,E)};k.normalizeQuery=async function(C,
A,E){const {outFields:G,orderByFields:H,groupByFieldsForStatistics:K,outStatistics:J}=C;if(G)for(var F=0;F<G.length;F++)G[F]=G[F].trim();if(H)for(F=0;F<H.length;F++)H[F]=H[F].trim();if(K)for(F=0;F<K.length;F++)K[F]=K[F].trim();if(J)for(F=0;F<J.length;F++)J[F].onStatisticField&&(J[F].onStatisticField=J[F].onStatisticField.trim());C.geometry&&!C.outSR&&(C.outSR=C.geometry.spatialReference);return b(C,A,E)};k.normalizeQueryLike=b;k.transformCentroid=d;Object.defineProperty(k,"__esModule",{value:!0})})},
"esri/layers/graphics/data/spatialQuerySupport":function(){define("require exports ../../../core/Error ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/contains ../../../geometry/support/intersects ../../../geometry/support/jsonUtils ../OptimizedGeometry ../featureConversionUtils ../contains ./projectionSupport ./utils".split(" "),function(t,k,m,z,y,x,f,h,e,l,q,p){function n(){return new Promise(function(g,r){t(["../../../geometry/geometryEngineJSON"],g,r)})}const d={esriSpatialRelIntersects:"intersects",
esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null};var b={esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,
esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},a={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},c={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1};k.canQueryWithRBush=function(g){if(f.isExtent(g))return!0;if(f.isPolygon(g)){for(const r of g.rings)if(5!==r.length||r[0][0]!==r[1][0]||r[0][0]!==r[4][0]||r[2][0]!==r[3][0]||r[0][1]!==r[3][1]||r[0][1]!==
r[4][1]||r[1][1]!==r[2][1])return!1;return!0}return!1};k.checkSpatialQuerySupport=async function(g,r,u){const {spatialRel:w,geometry:v}=g;if(v){if(!0!==b[w])throw new m("feature-store:unsupported-query","Unsupported query spatial relationship",{query:g});if(z.isValid(v.spatialReference)&&z.isValid(u)){if(!0!==a[f.getJsonType(v)])throw new m("feature-store:unsupported-query","Unsupported query geometry type",{query:g});if(!0!==c[r])throw new m("feature-store:unsupported-query","Unsupported layer geometry type",
{query:g});if(g.outSR)return q.checkProjectionSupport(g.geometry&&g.geometry.spatialReference,g.outSR)}}};k.getSpatialQueryOperator=function(g,r,u,w,v){if(f.isPolygon(r)&&"esriGeometryPoint"===u&&("esriSpatialRelIntersects"===g||"esriSpatialRelContains"===g)){const D=e.convertFromPolygon(new h,r,!1,!1);return Promise.resolve(B=>l.polygonContainsPoint(D,!1,!1,B))}if(f.isPolygon(r)&&"esriGeometryMultipoint"===u){const D=e.convertFromPolygon(new h,r,!1,!1);if("esriSpatialRelContains"===g)return Promise.resolve(B=>
l.polygonContainsMultipoint(D,!1,!1,B,w,v))}if(f.isExtent(r)&&"esriGeometryPoint"===u&&("esriSpatialRelIntersects"===g||"esriSpatialRelContains"===g))return Promise.resolve(D=>y.extentContainsPoint(r,p.getGeometry(u,w,v,D)));if(f.isExtent(r)&&"esriGeometryMultipoint"===u&&"esriSpatialRelContains"===g)return Promise.resolve(D=>y.extentContainsMultipoint(r,p.getGeometry(u,w,v,D)));if(f.isExtent(r)&&"esriSpatialRelIntersects"===g){const D=x.getExtentIntersector(u);return Promise.resolve(B=>D(r,p.getGeometry(u,
w,v,B)))}return n().then(D=>{const B=D[d[g]].bind(null,r.spatialReference,r);return C=>B(p.getGeometry(u,w,v,C))})};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/layers/graphics/contains":function(){define(["exports"],function(t){function k(m,z,y,x,f){if(!m)return!1;z=z?y?4:3:y?3:2;const {coords:h,lengths:e}=m;y=!1;m=0;for(const q of e){var l=m;for(let p=m,n=m+q*z;p<n;p+=z){l=p+z;l===n&&(l=m);const d=h[p],b=h[p+1],a=h[l];l=h[l+1];(b<f&&l>=f||l<f&&b>=f)&&d+(f-b)/(l-b)*(a-d)<x&&(y=!y)}m+=
q*z}return y}t.polygonContainsCoords=k;t.polygonContainsMultipoint=function(m,z,y,x,f,h){f=f?h?4:3:h?3:2;const {coords:e,lengths:l}=x;if(!l)return!1;for(let q=0,p=0;q<l.length;q++,p+=f)if(!k(m,z,y,e[p],e[p+1]))return!1;return!0};t.polygonContainsPoint=function(m,z,y,x){return k(m,z,y,x.coords[0],x.coords[1])};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/layers/graphics/data/timeSupport":function(){define(["exports"],function(t){function k(y,x,f,h,e){if(null!=h&&null!=e)return l=>{const q=
y.getAttribute(l,x);l=y.getAttribute(l,f);return(null==q||q<=e)&&(null==l||l>=h)};if(null!=h)return l=>{l=y.getAttribute(l,f);return null==l||l>=h};if(null!=e)return l=>{l=y.getAttribute(l,x);return null==l||l<=e}}function m(y,x,f,h){if(null!=f&&null!=h&&f===h)return e=>y.getAttribute(e,x)===f;if(null!=f&&null!=h)return e=>{e=y.getAttribute(e,x);return e>=f&&e<=h};if(null!=f)return e=>y.getAttribute(e,x)>=f;if(null!=h)return e=>y.getAttribute(e,x)<=h}function z(){return()=>!1}t.getTimeExtent=function(y,
x){if(!y)return null;const f=x.featureAdapter,{startTimeField:h,endTimeField:e}=y;let l=Number.POSITIVE_INFINITY,q=Number.NEGATIVE_INFINITY;if(h&&e)x.forEach(p=>{const n=f.getAttribute(p,h);p=f.getAttribute(p,e);null==n||isNaN(n)||(l=Math.min(l,n));null==p||isNaN(p)||(q=Math.max(q,p))});else{const p=h||e;x.forEach(n=>{n=f.getAttribute(n,p);null==n||isNaN(n)||(l=Math.min(l,n),q=Math.max(q,n))})}return{start:l,end:q}};t.getTimeOperator=function(y,x,f){if(!x||!y)return null;const {startTimeField:h,endTimeField:e}=
y;if(!h&&!e)return null;const {start:l,end:q}=x;return null===l&&null===q?null:void 0===l&&void 0===q?z():h&&e?k(f,h,e,l,q):m(f,h||e,l,q)};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/layers/graphics/data/QueryEngineResult":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ../../../geometry/support/quantizationUtils ./projectionSupport ./attributeSupport ./AttributesBuilder ./utils ./timeSupport".split(" "),
function(t,k,m,z,y,x,f,h,e,l){function q(b){return b.substr(24,12)+b.substr(19,4)+b.substr(16,2)+b.substr(14,2)+b.substr(11,2)+b.substr(9,2)+b.substr(6,2)+b.substr(4,2)+b.substr(2,2)+b.substr(0,2)}function p(b,a,c,g){if(c&&"esriFieldTypeDate"===c.type){const r=(new Date(b)).getTime(),u=(new Date(a)).getTime();if(!isNaN(r)&&!isNaN(u))return g?u-r:r-u}return"number"===typeof b&&"number"===typeof a?g?a-b:b-a:"string"===typeof b&&"string"===typeof a?(b=b.toUpperCase(),a=a.toUpperCase(),!c||"esriFieldTypeGUID"!==
c.type&&"esriFieldTypeGlobalID"!==c.type?g=(g?b>a:b<a)?-1:(g?b<a:b>a)?1:0:(c=q(b),a=q(a),g=(g?c>a:c<a)?-1:(g?c<a:c>a)?1:0),g):g?1:-1}function n(b,a,c,g,r,u){r-=c;u-=g;b=Math.min(1,Math.max(0,((b-c)*r+(a-g)*u)/(r*r+u*u)));return{x:c+r*b,y:g+u*b}}function d(b,a){return b?a?4:3:a?3:2}return function(){function b(c,g,r){this.items=c;this.queryGeometry=g;this.definitionExpression=r.definitionExpression;this.geometryType=r.geometryType;this.hasM=r.hasM;this.hasZ=r.hasZ;this.objectIdField=r.objectIdField;
this.spatialReference=r.spatialReference;this.fieldsIndex=r.fieldsIndex;this.timeInfo=r.timeInfo;this.featureAdapter=r.featureAdapter;this.aggregateAdapter=r.aggregateAdapter}var a=b.prototype;a.createQueryResponseForCount=function(c){const g=new h(c,this.featureAdapter,this.fieldsIndex);if(!c.outStatistics)return g.countDistinctValues(this.items);const {groupByFieldsForStatistics:r,having:u}=c;if(null==r||!r.length)return 1;const w=new Map,v=new Map,D=new Set;c=c.outStatistics;for(const C of c){({statisticType:c}=
C);c="exceedslimit"!==c?C.onStatisticField:void 0;if(!v.has(c)){var B=[];for(const A of r){const E=this._getAttributeValues(g,A,w);B.push(E)}v.set(c,this._calculateUniqueValues(B))}c=v.get(c);for(const A in c){const {data:E,items:G}=c[A];B=E.join(",");u&&!g.validateItems(G,u)||D.add(B)}}return D.size};a.createQueryResponse=function(c){let g;g=c.outStatistics?c.outStatistics.some(r=>"exceedslimit"===r.statisticType)?this._createExceedsLimitQueryResponse(c):this._createStatisticsQueryResponse(c):this._createFeatureQueryResponse(c);
c.returnQueryGeometry&&(m.isValid(c.outSR)&&!m.equals(this.queryGeometry.spatialReference,c.outSR)?g.queryGeometry=e.cleanFromGeometryEngine({spatialReference:c.outSR,...x.project(this.queryGeometry,this.queryGeometry.spatialReference,c.outSR)}):g.queryGeometry=e.cleanFromGeometryEngine({spatialReference:c.outSR,...this.queryGeometry}));return g};a.createSnappingResponse=function(c,g){const r=this.featureAdapter,u=d(this.hasZ,this.hasM),{x:w,y:v}=c.point,D="number"===typeof c.distance?c.distance:
c.distance.x,B="number"===typeof c.distance?c.distance:c.distance.y,C={candidates:[]},A="esriGeometryPolygon"===this.geometryType;g=this.getPointCreator(c.point,this.spatialReference,g);for(const L of this.items){var E=r.getGeometry(L);if(!E)continue;const {coords:M,lengths:S}=E;if(c.types&1){E=0;for(var G=0;G<S.length;G++){var H=S[G];for(var K=0;K<H;K++,E+=u){var J=M[E],F=M[E+1];if(K!==H-1){const Q=M[E+u],U=M[E+u+1],{x:W,y:fa}=n(w,v,J,F,Q,U);var N=(w-W)/D;const Z=(v-fa)/B;N=N*N+Z*Z;1>=N&&C.candidates.push({type:"edge",
objectId:r.getObjectId(L),distance:Math.sqrt(N),target:g(W,fa),start:g(J,F),end:g(Q,U)})}}}}if(c.types&2)for(E=A?M.length-u:M.length,G=0;G<E;G+=u)H=M[G],K=M[G+1],J=(w-H)/D,F=(v-K)/B,J=J*J+F*F,1>=J&&C.candidates.push({type:"vertex",objectId:r.getObjectId(L),distance:Math.sqrt(J),target:g(H,K)})}C.candidates.sort((L,M)=>L.distance-M.distance);return C};a.getPointCreator=function(c,g,r){const u=k.isSome(r)&&!m.equals(g,r)?w=>x.project(w,g,r):w=>w;return null!=c.z&&null!=c.m?(w,v)=>u({x:w,y:v,z:c.z,m:c.m}):
null!=c.z?(w,v)=>u({x:w,y:v,z:c.z}):null!=c.m?(w,v)=>u({x:w,y:v,m:c.m}):(w,v)=>u({x:w,y:v})};a.executeAttributesQuery=function(c){var g=f.getWhereClause(c.where,this.fieldsIndex);if(!g)return Promise.resolve(this);if(g.isStandardized){let r=0;const u=[];for(const w of this.items)g.testFeature(w,this.featureAdapter)&&(u[r++]=w);g=new b(u,this.queryGeometry,this);g.definitionExpression=c.where;return Promise.resolve(g)}return Promise.reject(new TypeError("Where clause is not standardized"))};a.executeAggregateIdsQuery=
function(c){if(!c.aggregateIds||!c.aggregateIds.length||k.isNone(this.aggregateAdapter))return Promise.resolve(this);const g=new Set;for(const u of c.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(u).forEach(w=>g.add(w));const r=this.featureAdapter.getObjectId;return Promise.resolve(new b(this.items.filter(u=>g.has(r(u))),this.queryGeometry,this))};a.executeObjectIdsQuery=function(c){if(!c.objectIds||!c.objectIds.length)return Promise.resolve(this);const g=new Set(c.objectIds),r=this.featureAdapter.getObjectId;
return Promise.resolve(new b(this.items.filter(u=>g.has(r(u))),this.queryGeometry,this))};a.executeTimeQuery=function(c){c=l.getTimeOperator(this.timeInfo,c.timeExtent,this.featureAdapter);if(!k.isSome(c))return Promise.resolve(this);c=this.items.filter(c);return Promise.resolve(new b(c,this.queryGeometry,this))};a.filterLatest=function(){const {trackIdField:c,startTimeField:g,endTimeField:r}=this.timeInfo;var u=r||g;const w=new Map,v=this.featureAdapter.getAttribute;for(const D of this.items){const B=
v(D,c),C=v(D,u),A=w.get(B);(!A||C>v(A,u))&&w.set(B,D)}u=Array.from(w.values());return Promise.resolve(new b(u,this.queryGeometry,this))};a.project=async function(c){if(!c||m.equals(this.spatialReference,c))return this;const g=this.featureAdapter,r=(await x.projectMany(this.items.map(u=>e.getGeometry(this.geometryType,this.hasZ,this.hasM,g.getGeometry(u))),this.spatialReference,c)).map((u,w)=>g.cloneWithGeometry(this.items[w],z.convertFromGeometry(u,this.hasZ,this.hasM)));return new b(r,this.queryGeometry,
{definitionExpression:this.definitionExpression,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,objectIdField:this.objectIdField,spatialReference:c,fieldsIndex:this.fieldsIndex,timeInfo:this.timeInfo,featureAdapter:this.featureAdapter})};a._sortFeatures=function(c,g,r){if(1<c.length&&g&&g.length)for(const u of g.reverse()){g=u.split(" ");const w=g[0],v=this.fieldsIndex.get(w),D=g[1]&&"desc"===g[1].toLowerCase();c.sort((B,C)=>{B=r(B,w,v);C=r(C,w,v);return p(B,C,v,D)})}};a._createFeatureQueryResponse=
function(c){const g=this.items,{geometryType:r,hasM:u,hasZ:w,objectIdField:v,spatialReference:D}=this,{outFields:B,outSR:C,quantizationParameters:A,resultRecordCount:E,resultOffset:G,returnZ:H,returnM:K}=c,J=null!=E?g.length>(G||0)+E:!1,F=B&&(-1<B.indexOf("*")?[...this.fieldsIndex.fields]:B.map(N=>this.fieldsIndex.get(N)));return{exceededTransferLimit:J,features:this._createFeatures(c,g),fields:F,geometryType:r,hasM:u&&K,hasZ:w&&H,objectIdFieldName:v,spatialReference:e.cleanFromGeometryEngine(C?C:
D),transform:A&&y.toQuantizationTransform(A)||null}};a._createFeatures=function(c,g){const r=new h(c,this.featureAdapter,this.fieldsIndex),{hasM:u,hasZ:w}=this,{orderByFields:v,quantizationParameters:D,returnGeometry:B,returnCentroid:C,maxAllowableOffset:A,resultOffset:E,resultRecordCount:G,returnZ:H=!1,returnM:K=!1}=c,J=w&&H,F=u&&K;c=[];var N=0;g=[...g];this._sortFeatures(g,v,(S,Q,U)=>r.getFieldValue(S,Q,U));if(B||C){var L=y.toQuantizationTransform(D);if(B&&!C)for(var M of g)c[N++]={attributes:r.getAttributes(M),
geometry:e.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(M),A,L,J,F)};else if(!B&&C)for(const S of g)c[N++]={attributes:r.getAttributes(S),centroid:e.transformCentroid(this,this.featureAdapter.getCentroid(S,this),L)};else for(const S of g)c[N++]={attributes:r.getAttributes(S),centroid:e.transformCentroid(this,this.featureAdapter.getCentroid(S,this),L),geometry:e.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(S),A,L,J,F)}}else for(L of g)(M=
r.getAttributes(L))&&(c[N++]={attributes:M});N=E||0;null!=G&&(c=c.slice(N,Math.min(c.length,N+G)));return c};a._createExceedsLimitQueryResponse=function(c){var g=!1;let r=Number.POSITIVE_INFINITY,u=Number.POSITIVE_INFINITY;g=Number.POSITIVE_INFINITY;for(const w of c.outStatistics)if("exceedslimit"===w.statisticType){r=null!=w.maxPointCount?w.maxPointCount:Number.POSITIVE_INFINITY;u=null!=w.maxRecordCount?w.maxRecordCount:Number.POSITIVE_INFINITY;g=null!=w.maxVertexCount?w.maxVertexCount:Number.POSITIVE_INFINITY;
break}if("esriGeometryPoint"===this.geometryType)g=this.items.length>r;else if(this.items.length>u)g=!0;else{c=this.hasZ?this.hasM?4:3:this.hasM?3:2;const w=this.featureAdapter;g=this.items.reduce((v,D)=>{D=w.getGeometry(D);return v+(D&&D.coords.length||0)},0)/c>g}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(g)}}]}};a._createStatisticsQueryResponse=function(c){var g=
{attributes:{}};const r=[],u=new Map,w=new Map,v=new Map,D=new Map,B=new h(c,this.featureAdapter,this.fieldsIndex);var C=c.outStatistics;const {groupByFieldsForStatistics:A,having:E,orderByFields:G}=c;c=A&&A.length;const H=!!c,K=H&&A[0],J=H&&!this.fieldsIndex.get(K);for(const S of C){const {outStatisticFieldName:Q,statisticType:U}=S;C=S;var F="exceedslimit"!==U?S.onStatisticField:void 0;const W="percentile_disc"===U||"percentile_cont"===U,fa=H&&1===c&&(F===K||J)&&"count"===U;if(H){if(!v.has(F)){var N=
[];for(const Z of A){var L=this._getAttributeValues(B,Z,u);N.push(L)}v.set(F,this._calculateUniqueValues(N,B.returnDistinctValues))}N=v.get(F);for(const Z in N){const {count:T,data:ba,items:ha,itemPositions:sa}=N[Z];L=ba.join(",");if(!E||B.validateItems(ha,E)){const ua=D.get(L)||{attributes:{}};var M=null;if(fa)M=T;else{const O=this._getAttributeValues(B,F,u);M=sa.map(V=>O[V]);M=W&&"statisticParameters"in C?this._getPercentileValue(C,M):this._getStatisticValue(C,M)}ua.attributes[Q]=M;A.forEach((O,
V)=>ua.attributes[this.fieldsIndex.get(O)?O:`EXPR_${V+1}`]=ba[V]);D.set(L,ua)}}}else F=this._getAttributeValues(B,F,u),g.attributes[Q]=W&&"statisticParameters"in C?this._getPercentileValue(C,F):this._getStatisticValue(C,F,w);r.push({name:Q,alias:Q,type:"esriFieldTypeDouble"})}g=H?Array.from(D.values()):[g];this._sortFeatures(g,G,(S,Q)=>S.attributes[Q]);return{fields:r,features:g}};a._getStatisticValue=function(c,g,r){const {onStatisticField:u,statisticType:w}=c;c=r&&r.has(u)?r.get(u):this._calculateStatistics(g);
r&&r.set(u,c);return c["var"===w?"variance":w]};a._getPercentileValue=function(c,g){const {onStatisticField:r,statisticParameters:u,statisticType:w}=c,{value:v,orderBy:D}=u,B="desc"===D,C=this.fieldsIndex.get(r);c=[...g].filter(A=>null!=A).sort((A,E)=>p(A,E,C,B));return this._calculatePercentile(c,v,"percentile_disc"===w)};a._getAttributeValues=function(c,g,r){if(r.has(g))return r.get(g);const u=this.fieldsIndex.get(g),w=this.items.map(v=>c.getFieldValue(v,g,u));r.set(g,w);return w};a._calculateStatistics=
function(c){let g=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,u=null,w=null,v=null,D=null;const B=[];let C=0;for(const A of c)"string"===typeof A?C++:null==A||isNaN(A)||(u+=A,g=Math.min(g,A),r=Math.max(r,A),B.push(A),C++);if(C){w=u/C;c=0;for(const A of B)c+=(A-w)**2;D=1<C?c/(C-1):0;v=Math.sqrt(D)}else r=g=null;return{avg:w,count:C,max:r,min:g,stddev:v,sum:u,variance:D}};a._calculateUniqueValues=function(c,g){const r={},u=this.items,w=u.length;for(let v=0;v<w;v++){const D=u[v],B=[];for(const A of c)B.push(A[v]);
const C=B.join(",");g?null==r[C]&&(r[C]={count:1,data:B,items:[D],itemPositions:[v]}):null==r[C]?r[C]={count:1,data:B,items:[D],itemPositions:[v]}:(r[C].count++,r[C].items.push(D),r[C].itemPositions.push(v))}return r};a._calculatePercentile=function(c,g,r){if(0===c.length)return null;if(0>=g)return c[0];if(1<=g)return c[c.length-1];var u=(c.length-1)*g,w=Math.floor(u);g=w+1;u%=1;w=c[w];const v=c[g];return g>=c.length||r||"string"===typeof w||"string"===typeof v?w:w*(1-u)+v*u};t._createClass(b,[{key:"size",
get:function(){return this.items.length}}]);return b}()})},"esri/geometry/support/quantizationUtils":function(){define(["exports","./jsonUtils"],function(t,k){function m({scale:A,translate:E},G){return Math.round((G-E[0])/A[0])}function z({scale:A,translate:E},G){return Math.round((E[1]-G)/A[1])}function y(A,E,G){const H=[];let K,J,F,N;for(let L=0;L<G.length;L++){const M=G[L];if(0<L){if(F=m(A,M[0]),N=z(A,M[1]),F!==K||N!==J)H.push(E(M,F-K,N-J)),K=F,J=N}else K=m(A,M[0]),J=z(A,M[1]),H.push(E(M,K,J))}return 0<
H.length?H:null}function x(A,E,G,H){return y(A,G?H?C:B:H?B:D,E)}function f(A,E,G,H){const K=[];G=G?H?C:B:H?B:D;for(H=0;H<E.length;H++){const J=y(A,G,E[H]);J&&3<=J.length&&K.push(J)}return K.length?K:null}function h(A,E,G,H){const K=[];G=G?H?C:B:H?B:D;for(H=0;H<E.length;H++){const J=y(A,G,E[H]);J&&2<=J.length&&K.push(J)}return K.length?K:null}function e({scale:A,translate:E},G){return G*A[0]+E[0]}function l({scale:A,translate:E},G){return E[1]-G*A[1]}function q(A,E,G){const H=Array(G.length);if(!G.length)return H;
const [K,J]=A.scale;let F=e(A,G[0][0]);A=l(A,G[0][1]);H[0]=E(G[0],F,A);for(let N=1;N<G.length;N++){const L=G[N];F+=L[0]*K;A-=L[1]*J;H[N]=E(L,F,A)}return H}function p(A,E,G){const H=Array(G.length);for(let K=0;K<G.length;K++)H[K]=q(A,E,G[K]);return H}function n(A,E,G,H){return q(A,G?H?C:B:H?B:D,E)}function d(A,E,G,H){return p(A,G?H?C:B:H?B:D,E)}function b(A,E,G,H){return p(A,G?H?C:B:H?B:D,E)}function a(A,E,G){let [H,K]=G[0],J=Math.min(H,E[0]),F=Math.min(K,E[1]),N=Math.max(H,E[2]);E=Math.max(K,E[3]);
for(let L=1;L<G.length;L++){const [M,S]=G[L];H+=M;K+=S;0>M&&(J=Math.min(J,H));0<M&&(N=Math.max(N,H));0>S?F=Math.min(F,K):0<S&&(E=Math.max(E,K))}A[0]=J;A[1]=F;A[2]=N;A[3]=E;return A}function c(A,E){if(!E.length)return null;A[0]=A[1]=Number.POSITIVE_INFINITY;A[2]=A[3]=Number.NEGATIVE_INFINITY;for(let G=0;G<E.length;G++)a(A,A,E[G]);return A}function g(A,E,G,H,K){E.xmin=m(A,G.xmin);E.ymin=z(A,G.ymin);E.xmax=m(A,G.xmax);E.ymax=z(A,G.ymax);E!==G&&(H&&(E.zmin=G.zmin,E.zmax=G.zmax),K&&(E.mmin=G.mmin,E.mmax=
G.mmax));return E}function r(A,E,G,H,K){E.points=x(A,G.points,H,K);return E}function u(A,E,G,H,K){E.x=m(A,G.x);E.y=z(A,G.y);E!==G&&(H&&(E.z=G.z),K&&(E.m=G.m));return E}function w(A,E,G,H,K){A=f(A,G.rings,H,K);if(!A)return null;E.rings=A;return E}function v(A,E,G,H,K){A=h(A,G.paths,H,K);if(!A)return null;E.paths=A;return E}const D=(A,E,G)=>[E,G],B=(A,E,G)=>[E,G,A[2]],C=(A,E,G)=>[E,G,A[2],A[3]];t.equals=function(A,E){if(A===E||null==A&&null==E)return!0;if(null==A||null==E)return!1;let G,H,K,J;A&&"upperLeft"===
A.originPosition?(G=A.translate[0],H=A.translate[1],A=A.scale[0]):(G=A.extent.xmin,H=A.extent.ymax,A=A.tolerance);E&&"upperLeft"===E.originPosition?(K=E.translate[0],J=E.translate[1],E=E.scale[0]):(K=E.extent.xmin,J=E.extent.ymax,E=E.tolerance);return G===K&&H===J&&A===E};t.getQuantizedBoundsCoordsArray=a;t.getQuantizedBoundsCoordsArrayArray=c;t.getQuantizedBoundsPaths=function(A){return c([0,0,0,0],A)};t.getQuantizedBoundsPoints=function(A){const E=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,
Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return a(E,E,A)};t.getQuantizedBoundsRings=function(A){return c([0,0,0,0],A)};t.quantizeBounds=function(A,E,G){E[0]=m(A,G[0]);E[3]=z(A,G[1]);E[2]=m(A,G[2]);E[1]=z(A,G[3]);return E};t.quantizeExtent=g;t.quantizeGeometry=function(A,E){return A&&E?k.isPoint(E)?u(A,{},E,!1,!1):k.isPolyline(E)?v(A,{},E,!1,!1):k.isPolygon(E)?w(A,{},E,!1,!1):k.isMultipoint(E)?r(A,{},E,!1,!1):k.isExtent(E)?g(A,{},E,!1,!1):null:null};t.quantizeMultipoint=r;t.quantizePaths=
h;t.quantizePoint=u;t.quantizePoints=x;t.quantizePolygon=w;t.quantizePolyline=v;t.quantizeRings=f;t.quantizeX=m;t.quantizeY=z;t.toQuantizationTransform=function(A){return A?{originPosition:"upper-left"===A.originPosition?"upperLeft":"lower-left"===A.originPosition?"lowerLeft":A.originPosition,scale:A.tolerance?[A.tolerance,A.tolerance]:[1,1],translate:A.extent?[A.extent.xmin,A.extent.ymax]:[0,0]}:null};t.unquantizeBounds=function(A,E,G){return G?(E[0]=e(A,G[0]),E[1]=l(A,G[3]),E[2]=e(A,G[2]),E[3]=
l(A,G[1]),E):[e(A,E[0]),l(A,E[3]),e(A,E[2]),l(A,E[1])]};t.unquantizeCoordsArray=q;t.unquantizeCoordsArrayArray=p;t.unquantizeExtent=function(A,E,G,H,K){E.xmin=e(A,G.xmin);E.ymin=l(A,G.ymin);E.xmax=e(A,G.xmax);E.ymax=l(A,G.ymax);E!==G&&(H&&(E.zmin=G.zmin,E.zmax=G.zmax),K&&(E.mmin=G.mmin,E.mmax=G.mmax));return E};t.unquantizeMultipoint=function(A,E,G,H,K){E.points=n(A,G.points,H,K);return E};t.unquantizePaths=d;t.unquantizePoint=function(A,E,G,H,K){E.x=e(A,G.x);E.y=l(A,G.y);E!==G&&(H&&(E.z=G.z),K&&
(E.m=G.m));return E};t.unquantizePoints=n;t.unquantizePolygon=function(A,E,G,H,K){E.rings=b(A,G.rings,H,K);return E};t.unquantizePolyline=function(A,E,G,H,K){E.paths=d(A,G.paths,H,K);return E};t.unquantizeRings=b;t.unquantizeX=e;t.unquantizeY=l;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/layers/graphics/data/AttributesBuilder":function(){define(["../../../core/maybe","./attributeSupport"],function(t,k){return function(){function m(y,x,f){this._fieldDataCache=new Map;this._returnDistinctMap=
new Map;this.returnDistinctValues=y.returnDistinctValues;this.fieldsIndex=f;this.featureAdapter=x;if((x=y.outFields)&&-1===x.indexOf("*")){this.outFields=x;y=0;for(const e of x){var h=k.getExpressionFromFieldName(e);h=(x=this.fieldsIndex.get(h))?null:k.getWhereClause(h,f);x=x?x.name:k.getAliasFromFieldName(e)||`FIELD_EXP_${y++}`;this._fieldDataCache.set(e,{alias:x,clause:h})}}}var z=m.prototype;z.countDistinctValues=function(y){if(!this.returnDistinctValues)return y.length;y.forEach(x=>this.getAttributes(x));
return this._returnDistinctMap.size};z.getAttributes=function(y){y=this._processAttributesForOutFields(y);return this._processAttributesForDistinctValues(y)};z.getFieldValue=function(y,x,f){const h=f?f.name:x;let e=null;this._fieldDataCache.has(h)?e=this._fieldDataCache.get(h).clause:f||(e=k.getWhereClause(x,this.fieldsIndex),this._fieldDataCache.set(h,{alias:h,clause:e}));return f?this.featureAdapter.getAttribute(y,h):e.calculateValue(y,this.featureAdapter)};z.validateItem=function(y,x){this._fieldDataCache.has(x)||
this._fieldDataCache.set(x,{alias:x,clause:k.getWhereClause(x,this.fieldsIndex)});return this._fieldDataCache.get(x).clause.testFeature(y,this.featureAdapter)};z.validateItems=function(y,x){this._fieldDataCache.has(x)||this._fieldDataCache.set(x,{alias:x,clause:k.getWhereClause(x,this.fieldsIndex)});return this._fieldDataCache.get(x).clause.testSet(y,this.featureAdapter)};z._processAttributesForOutFields=function(y){const x=this.outFields;if(!x||!x.length)return this.featureAdapter.getAttributes(y);
const f={};for(const h of x){const {alias:e,clause:l}=this._fieldDataCache.get(h);f[e]=l?l.calculateValue(y,this.featureAdapter):this.featureAdapter.getAttribute(y,e)}return f};z._processAttributesForDistinctValues=function(y){if(t.isNone(y)||!this.returnDistinctValues)return y;var x=this.outFields,f=[];if(x)for(const e of x){var {alias:h}=this._fieldDataCache.get(e);f.push(y[h])}else for(h in y)f.push(y[h]);x=`${(x||["*"]).join(",")}=${f.join(",")}`;f=this._returnDistinctMap.get(x)||0;this._returnDistinctMap.set(x,
++f);return 1<f?null:y};return m}()})},"esri/views/2d/layers/features/sources/createSource":function(){define("exports ../../../../../core/maybe ../../../../../layers/support/arcgisLayerUrl ./DrillDownFeatureSource ./GeoEventSource ./PagedFeatureSource ./SnapshotFeatureSource".split(" "),function(t,k,m,z,y,x,f){t.createSource=function(h,e,l,q,p,n){a:{switch(h.type){case "snapshot":h={type:"feature",origin:"snapshot",featureCount:k.unwrapOr(h.featureCount,0),serviceInfo:h,onMessage:q,outSR:e,tileInfoView:l,
canAcceptRequest:p,store:n};break a;case "stream":h={type:"geoevent",serviceInfo:h,onMessage:q,outSR:e,canAcceptRequest:p};break a;case "memory":case "on-demand":n=h.source;n=Array.isArray(n)?"local":"path"in n&&m.isHostedAgolService(n.path)?"hosted":"unknown";h={type:"feature",serviceInfo:h,onMessage:q,outSR:e,origin:n,tileInfoView:l,canAcceptRequest:p};break a}h=void 0}switch(h.type){case "feature":switch(h.origin){case "hosted":case "local":return new x.PagedFeatureSource(h);case "snapshot":return new f.SnapshotFeatureSource(h);
case "unknown":return new z.DrillDownFeatureSource(h)}case "geoevent":return new y.GeoEventSource(h)}};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/layers/support/arcgisLayerUrl":function(){define(["exports","../../core/maybe","../../core/urlUtils","../../chunks/persistableUrlUtils"],function(t,k,m,z){function y(p){p=m.urlToObject(p);p=p.path.match(e)||p.path.match(l);if(!p)return null;const [,n,d,b,a]=p;p=d.indexOf("/");return{title:f(-1!==p?d.slice(p+1):d),serverType:b,sublayer:null!=
a&&""!==a?parseInt(a,10):null,url:{path:n}}}function x(p){return(p=m.urlToObject(p).path.match(q))?{serviceUrl:p[1],sublayerId:Number(p[2])}:null}function f(p){p=p.replace(/\s*[/_]+\s*/g," ");return p[0].toUpperCase()+p.slice(1)}const h="MapServer ImageServer FeatureServer SceneServer StreamServer VectorTileServer".split(" "),e=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${h.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),l=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${h.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,
"i"),q=/(.*)\/(\d+)\/?$/i;t.cleanTitle=f;t.isArcGISUrl=function(p){return!!e.test(p)};t.isHostedAgolService=function(p){if(!p)return!1;p=p.toLowerCase();const n=-1!==p.indexOf(".arcgis.com/");p=-1!==p.indexOf("//services")||-1!==p.indexOf("//tiles")||-1!==p.indexOf("//features");return n&&p};t.isHostedSecuredProxyService=function(p,n){return n&&p&&-1!==p.toLowerCase().indexOf(n.toLowerCase())};t.isServerOrServicesAGOLUrl=function(p){if(!p)return!1;p=(new m.Url(m.makeAbsolute(p))).authority.toLowerCase();
return"server.arcgisonline.com"===p||"services.arcgisonline.com"===p};t.isWmsServer=function(p){if(!p)return!1;var n=p.toLowerCase();p=-1!==n.indexOf("/services/");const d=-1!==n.indexOf("/mapserver/wmsserver"),b=-1!==n.indexOf("/imageserver/wmsserver");n=-1!==n.indexOf("/wmsserver");return p&&(d||b||n)};t.parse=y;t.parseNonStandardSublayerUrl=x;t.sanitizeUrl=function(p,n){return p?m.removeTrailingSlash(m.removeQueryParameters(p,n)):p};t.sanitizeUrlWithLayerId=function(p){let {url:n}=p;if(!n)return{url:n};
n=m.removeQueryParameters(n,p.logger);const d=m.urlToObject(n),b=y(d.path);let a;k.isSome(b)?(null!=b.sublayer&&null==p.layer.layerId&&(a=b.sublayer),n=b.url.path):p.nonStandardUrlAllowed&&(p=x(d.path),k.isSome(p)&&(n=p.serviceUrl,a=p.sublayerId));return{url:m.removeTrailingSlash(n),layerId:a}};t.serverTypes=h;t.titleFromUrlAndName=function(p,n){const d=[];p&&(p=y(p),k.isSome(p)&&p.title&&d.push(p.title));n&&(n=f(n),d.push(n));if(2===d.length){if(-1!==d[0].toLowerCase().indexOf(d[1].toLowerCase()))return d[0];
if(-1!==d[1].toLowerCase().indexOf(d[0].toLowerCase()))return d[1]}return d.join(" - ")};t.writeUrlWithLayerId=function(p,n,d,b,a){z.write(n,b,"url",a);b.url&&null!=p.layerId&&(b.url=m.join(b.url,d,p.layerId.toString()))};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/chunks/persistableUrlUtils":function(){define(["exports","../core/maybe","../core/urlUtils"],function(t,k,m){function z(n,d){var b=d&&d.url&&d.url.path;n&&b&&(n=m.makeAbsolute(n,b,{preserveProtocolRelative:!0}),d.portalItem&&
d.readResourcePaths&&(b=m.makeRelative(n,d.portalItem.itemUrl),q.test(b)&&d.readResourcePaths.push(d.portalItem.resourceFromPath(b).path)));return e(n,d&&d.portal)}function y(n,d,b=0){if(!n)return n;!m.isAbsolute(n)&&d&&d.blockedRelativeUrls&&d.blockedRelativeUrls.push(n);var a=m.makeAbsolute(n);if(d){var c=d.verifyItemRelativeUrls&&d.verifyItemRelativeUrls.rootPath||d.url&&d.url.path;c&&(c=e(c,d.portal),a=m.makeRelative(e(a,d.portal),c,c),a!==n&&d.verifyItemRelativeUrls&&d.verifyItemRelativeUrls.writtenUrls.push(a))}n=
a;a=(a=d&&d.portal)&&!a.isPortal&&a.urlKey&&a.customBaseUrl?m.changeDomain(n,`${a.urlKey}.${a.customBaseUrl}`,a.portalHostname):n;m.isAbsolute(a)&&(a=m.normalize(a));null!=d&&d.resources&&null!=d&&d.portalItem&&!m.isAbsolute(a)&&!m.isDataProtocol(a)&&0===b&&d.resources.toKeep.push({resource:d.portalItem.resourceFromPath(a)});return a}function x(n,d,b){return z(n,b)}function f(n,d,b,a){n=y(n,a);void 0!==n&&(d[b]=n)}function h(n){n=k.isSome(n)?n.match(l):null;return k.isSome(n)?n[1]:null}function e(n,
d){if(!d||d.isPortal||!d.urlKey||!d.customBaseUrl)return n;const b=`${d.urlKey}.${d.customBaseUrl}`;return m.hasSameOrigin(m.appUrl,`${m.appUrl.scheme}://${b}`)?m.changeDomain(n,d.portalHostname,b):m.changeDomain(n,b,d.portalHostname)}const l=/\/items\/([^\/]+)\/resources\//,q=/^\.\/resources\//;var p=Object.freeze({__proto__:null,fromJSON:z,toJSON:y,read:x,write:f,itemIdFromResourceUrl:h});t.fromJSON=z;t.itemIdFromResourceUrl=h;t.persistableUrlUtils=p;t.read=x;t.toJSON=y;t.write=f})},"esri/views/2d/layers/features/sources/DrillDownFeatureSource":function(){define(["exports",
"../../../../../chunks/_rollupPluginBabelHelpers","../../../../../core/has","../../../../../core/promiseUtils","./BaseFeatureSource"],function(t,k,m,z,y){var x=(m=m("esri-mobile"))?1:4,f=m?1:3;y=function(h){function e(l){return h.call(this,l)||this}k._inheritsLoose(e,h);e.prototype._fetchDataTile=async function(l){const q=this._serviceInfo.capabilities.query.supportsMaxRecordCountFactor,p=this._subscriptions.get(l.key.id),n=p.signal,d=l.getQuantizationParameters();let b=0;const a=async(c,g)=>{const r=
this._queryInfo,u=this._createQuery(c,{maxRecordCountFactor:q?f:void 0,returnExceededLimitFeatures:!1,quantizationParameters:d});b++;try{const v=await this._queue.push({tile:l,query:u,signal:n,depth:g});b--;z.throwIfAborted(n);if(v)if(r!==this._queryInfo)a(c,g);else if(v.exceededTransferLimit&&g<x)for(const D of c.createChildTiles())a(D,g+1);else{var w={id:l.id,addOrUpdate:v,end:0===b,type:"append"};p.add({query:u,message:w});this._onMessage(w)}}catch(v){z.isAbortError(v)||this._onMessage({id:l.id,
addOrUpdate:null,end:!0,type:"append"})}};a(l,0)};return e}(y.BaseFeatureSource);t.DrillDownFeatureSource=y;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/views/2d/layers/features/sources/BaseFeatureSource":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/has ../../../../../core/maybe ../../../../../core/Logger ../../../../../core/Error ../../../../../core/promiseUtils ../../../../../request ../../../../../tasks/support/Query ../../../../support/QueueProcessor ../controllers/support/sourceAdapters ./DataTileSource".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p){const n=y.getLogger("esri.views.2d.layers.features.sources.BaseFeatureSource");y=function(d){function b(c){var g=d.call(this,c)||this;g.type="feature";g.mode="on-demand";g._adapter=q.createSourceAdapter(c.serviceInfo);g._queue=new l.QueueProcessor({concurrency:8,process:async r=>{f.throwIfAborted(r);if(z.isSome(r.tile)){var u=r.tile.key.id;const {tile:w,signal:v}=r;u={query:m("esri-tiles-debug")?{tile:u.replace(/\//g,"."),depth:r.depth}:void 0,signal:v,transform:w.transform};
return g._adapter.executeQuery(r.query,u)}return g._adapter.executeQuery(r.query,r)}});g._patchQueue=new l.QueueProcessor({concurrency:8,process:async r=>{f.throwIfAborted(r);if(z.isSome(r.tile)){var u=r.tile.key.id;const {tile:w,signal:v}=r;u={query:m("esri-tiles-debug")?{tile:u.replace(/\//g,"."),depth:r.depth}:void 0,signal:v,transform:w.transform};return g._adapter.executeQuery(r.query,u)}return g._adapter.executeQuery(r.query,r)}});return g}k._inheritsLoose(b,d);var a=b.prototype;a.destroy=function(){d.prototype.destroy.call(this);
this._adapter.destroy();this._queue.destroy();this._patchQueue.destroy()};a.enableEvent=function(c,g){};a.subscribe=function(c){d.prototype.subscribe.call(this,c);this._fetchDataTile(c).catch(g=>{f.isAbortError(g)||n.error(new x("mapview-query-error","Encountered error when fetching tile",{tile:c,error:g}))})};a.unsubscribe=function(c){d.prototype.unsubscribe.call(this,c)};a.resume=function(){this._queue.resume()};a.forEachRequest=function(c,g){c=this._subscriptions.get(c);const {requests:r,signal:u}=
c;for(const w of r.done)g(w.message,{signal:u})};a.query=async function(c,g){return this._adapter.executeQuery(c,g)};a.queryLastEditDate=async function(){const c=this._serviceInfo.source;return(await h(c.path,{query:{...c.query,f:"json"},responseType:"json"})).data.editingInfo.lastEditDate};a.createTileQuery=function(c){const g=this.createQuery();g.quantizationParameters=c.getQuantizationParameters();g.resultType="tile";g.geometry=c.extent;"esriGeometryPolyline"===this._serviceInfo.geometryType&&
(g.maxAllowableOffset=c.resolution);this._serviceInfo.capabilities.query.supportsQuantization||(g.quantizationParameters=null,g.maxAllowableOffset=c.resolution);return g};a._createQuery=function(c,g){const r=new e({...this._queryInfo,...g});this._serviceInfo.capabilities.query.supportsQuantization||(g.quantizationParameters=null,r.maxAllowableOffset=c.resolution);g.quantizationParameters&&"esriGeometryPolyline"===this._serviceInfo.geometryType&&(r.maxAllowableOffset=c.resolution);r.resultType="tile";
r.geometry=c.extent;return r};a._executePatchQuery=async function(c,g,r,u){g=g.clone();g.outFields=[this._serviceInfo.objectIdField,...r];g.returnCentroid=!1;g.returnGeometry=!1;r=z.isSome(g.start)?g.start/8E3:0;return this._patchQueue.push({tile:c,query:g,signal:u.signal,depth:r})};a._resend=async function(c,g){const {query:r,message:u}=c,w=z.isSome(r.outFields)?r.outFields:[];c=this._queryInfo.outFields;const v=c.filter(D=>-1===w.indexOf(D));if(!z.isNone(u.addOrUpdate))if(v.length)try{const D=this._subscriptions.get(u.id).tile,
B=await this._executePatchQuery(D,r,v,g);f.throwIfAborted(g);r.outFields=c;u.addOrUpdate.joinAttributes(B);this._onMessage({...u,end:u.end,type:"append"})}catch(D){}else this._onMessage({...u,end:u.end,type:"append"})};a.resend=async function(){let c=0,g=!1;const r=[];for(this._subscriptions.forEach(u=>{u.requests.done.length||this._onMessage({id:u.tile.id,addOrUpdate:null,end:!1,type:"append"})});!g;)g=!0,this._subscriptions.forEach(({requests:u,signal:w})=>{u.done.length>c&&(g=!1,r.push(this._resend(u.done[c],
{signal:w})))}),c++;await Promise.all(r)};k._createClass(b,[{key:"updating",get:function(){return!!this._queue.length}},{key:"maxRecordCountFactor",get:function(){const {query:c}=this._serviceInfo.capabilities;return c.supportsMaxRecordCountFactor?4:null}},{key:"maxPageSize",get:function(){var c,{query:g}=this._serviceInfo.capabilities;g=null!=(c=g.maxRecordCount)?c:8E3;c=z.unwrapOr(this.maxRecordCountFactor,1);return g*c}},{key:"pageSize",get:function(){return Math.min(8E3,this.maxPageSize)}}]);
return b}(p.DataTileSource);t.BaseFeatureSource=y;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/tasks/support/Query":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/lang ../../core/maybe ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../geometry/SpatialReference ../../geometry/Point ../../geometry/support/jsonUtils ../../geometry ../../TimeExtent ../../layers/support/source/DataLayerSource ./QuantizationParameters ./StatisticDefinition".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d,b,a,c,g,r,u,w,v,D,B){var C;m=new l.JSONMap({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"});l=new l.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",
esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});a=C=function(A){function E(H){H=A.call(this,H)||this;H.aggregateIds=null;H.cacheHint=void 0;H.datumTransformation=null;H.distance=void 0;H.dynamicDataSource=void 0;H.gdbVersion=null;H.geometry=null;H.geometryPrecision=void 0;H.groupByFieldsForStatistics=null;H.having=null;H.historicMoment=null;H.maxAllowableOffset=void 0;H.maxRecordCountFactor=1;H.multipatchOption=
null;H.num=void 0;H.objectIds=null;H.orderByFields=null;H.outFields=null;H.outSpatialReference=null;H.outStatistics=null;H.parameterValues=null;H.pixelSize=null;H.quantizationParameters=null;H.rangeValues=null;H.relationParameter=null;H.resultType=null;H.returnCentroid=!1;H.returnDistinctValues=!1;H.returnExceededLimitFeatures=!0;H.returnGeometry=!1;H.returnQueryGeometry=!1;H.returnM=void 0;H.returnZ=void 0;H.sourceSpatialReference=null;H.spatialRelationship="intersects";H.start=void 0;H.sqlFormat=
null;H.text=null;H.timeExtent=null;H.units=null;H.where=null;return H}t._inheritsLoose(E,A);E.from=function(H){return f.ensureClass(C,H)};var G=E.prototype;G.castDatumTransformation=function(H){return"number"===typeof H||"object"===typeof H?H:null};G.writeHistoricMoment=function(H,K){K.historicMoment=H&&H.getTime()};G.writeParameterValues=function(H,K){if(H){const J={};for(const F in H){const N=H[F];Array.isArray(N)?J[F]=N.map(L=>L instanceof Date?L.getTime():L):J[F]=N instanceof Date?N.getTime():
N}K.parameterValues=J}};G.writeStart=function(H,K){K.resultOffset=this.start;K.resultRecordCount=this.num||10;K.where="1\x3d1"};G.writeWhere=function(H,K){K.where=H||"1\x3d1"};G.clone=function(){return new C(z.clone({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,datumTransformation:this.datumTransformation,distance:this.distance,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,
historicMoment:y.isSome(this.historicMoment)?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,
rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,
sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,units:this.units,where:this.where}))};return E}(a.JSONSupport);a.MAX_MAX_RECORD_COUNT_FACTOR=5;k.__decorate([h.property({json:{write:!0}})],a.prototype,"aggregateIds",void 0);k.__decorate([h.property({type:Boolean,json:{write:{writer:(A,E)=>{null!=A&&(E.cacheHint=A)}}}})],a.prototype,"cacheHint",void 0);k.__decorate([h.property({json:{write:!0}})],a.prototype,"datumTransformation",void 0);k.__decorate([e.cast("datumTransformation")],
a.prototype,"castDatumTransformation",null);k.__decorate([h.property({type:Number,json:{write:{overridePolicy(A){return{enabled:0<A}}}}})],a.prototype,"distance",void 0);k.__decorate([h.property({type:v.DataLayerSource,json:{write:!0}})],a.prototype,"dynamicDataSource",void 0);k.__decorate([h.property({type:String,json:{write:!0}})],a.prototype,"gdbVersion",void 0);k.__decorate([h.property({types:u.geometryTypes,json:{read:r.fromJSON,write:!0}})],a.prototype,"geometry",void 0);k.__decorate([h.property({type:Number,
json:{write:!0}})],a.prototype,"geometryPrecision",void 0);k.__decorate([h.property({type:[String],json:{write:!0}})],a.prototype,"groupByFieldsForStatistics",void 0);k.__decorate([h.property({type:String,json:{write:!0}})],a.prototype,"having",void 0);k.__decorate([h.property({type:Date})],a.prototype,"historicMoment",void 0);k.__decorate([p.writer("historicMoment")],a.prototype,"writeHistoricMoment",null);k.__decorate([h.property({type:Number,json:{write:!0}})],a.prototype,"maxAllowableOffset",
void 0);k.__decorate([h.property({type:Number,cast(A){return 1>A?1:A>C.MAX_MAX_RECORD_COUNT_FACTOR?C.MAX_MAX_RECORD_COUNT_FACTOR:A},json:{write:{overridePolicy(A){return{enabled:1<A}}}}})],a.prototype,"maxRecordCountFactor",void 0);k.__decorate([h.property({type:String,json:{write:!0}})],a.prototype,"multipatchOption",void 0);k.__decorate([h.property({type:Number,json:{read:{source:"resultRecordCount"}}})],a.prototype,"num",void 0);k.__decorate([h.property({json:{write:!0}})],a.prototype,"objectIds",
void 0);k.__decorate([h.property({type:[String],json:{write:!0}})],a.prototype,"orderByFields",void 0);k.__decorate([h.property({type:[String],json:{write:!0}})],a.prototype,"outFields",void 0);k.__decorate([h.property({type:c,json:{read:{source:"outSR"},write:{target:"outSR"}}})],a.prototype,"outSpatialReference",void 0);k.__decorate([h.property({type:[B],json:{write:{enabled:!0,overridePolicy(){return{enabled:y.isSome(this.outStatistics)&&0<this.outStatistics.length}}}}})],a.prototype,"outStatistics",
void 0);k.__decorate([h.property({json:{write:!0}})],a.prototype,"parameterValues",void 0);k.__decorate([p.writer("parameterValues")],a.prototype,"writeParameterValues",null);k.__decorate([h.property({type:g,json:{write:!0}})],a.prototype,"pixelSize",void 0);k.__decorate([h.property({type:D,json:{write:!0}})],a.prototype,"quantizationParameters",void 0);k.__decorate([h.property({type:[Object],json:{write:!0}})],a.prototype,"rangeValues",void 0);k.__decorate([h.property({type:String,json:{read:{source:"relationParam"},
write:{target:"relationParam",overridePolicy(){return{enabled:"relation"===this.spatialRelationship}}}}})],a.prototype,"relationParameter",void 0);k.__decorate([h.property({type:String,json:{write:!0}})],a.prototype,"resultType",void 0);k.__decorate([h.property({type:Boolean,json:{write:{overridePolicy(A){return{enabled:A}}}}})],a.prototype,"returnCentroid",void 0);k.__decorate([h.property({type:Boolean,json:{write:{overridePolicy(A){return{enabled:A}}}}})],a.prototype,"returnDistinctValues",void 0);
k.__decorate([h.property({type:Boolean,json:{write:{overridePolicy(A){return{enabled:!A}}}}})],a.prototype,"returnExceededLimitFeatures",void 0);k.__decorate([h.property({type:Boolean,json:{write:!0}})],a.prototype,"returnGeometry",void 0);k.__decorate([h.property({type:Boolean,json:{write:{overridePolicy(A){return{enabled:A}}}}})],a.prototype,"returnQueryGeometry",void 0);k.__decorate([h.property({type:Boolean,json:{write:{overridePolicy(A){return{enabled:A}}}}})],a.prototype,"returnM",void 0);k.__decorate([h.property({type:Boolean,
json:{write:{overridePolicy(A){return{enabled:A}}}}})],a.prototype,"returnZ",void 0);k.__decorate([h.property({type:c,json:{write:!0}})],a.prototype,"sourceSpatialReference",void 0);k.__decorate([h.property({type:String,json:{read:{source:"spatialRel",reader:m.read},write:{target:"spatialRel",writer:m.write}}})],a.prototype,"spatialRelationship",void 0);k.__decorate([h.property({type:Number,json:{read:{source:"resultOffset"}}})],a.prototype,"start",void 0);k.__decorate([p.writer("start"),p.writer("num")],
a.prototype,"writeStart",null);k.__decorate([h.property({type:String,json:{write:!0}})],a.prototype,"sqlFormat",void 0);k.__decorate([h.property({type:String,json:{write:!0}})],a.prototype,"text",void 0);k.__decorate([h.property({type:w,json:{write:!0}})],a.prototype,"timeExtent",void 0);k.__decorate([h.property({type:String,json:{read:l.read,write:{writer:l.write,overridePolicy(A){return{enabled:A&&0<this.distance}}}}})],a.prototype,"units",void 0);k.__decorate([h.property({type:String,json:{write:{overridePolicy(A){return{enabled:null!=
A||0<this.start}}}}})],a.prototype,"where",void 0);k.__decorate([p.writer("where")],a.prototype,"writeWhere",null);return a=C=k.__decorate([q.subclass("esri.tasks.support.Query")],a)})},"esri/TimeExtent":function(){define("./chunks/_rollupPluginBabelHelpers ./chunks/tslib.es6 ./core/has ./core/Logger ./core/accessorSupport/ensureType ./core/accessorSupport/decorators/property ./core/jsonMap ./core/accessorSupport/decorators/reader ./core/accessorSupport/decorators/subclass ./core/accessorSupport/decorators/writer ./core/urlUtils ./core/uuid ./portal/support/resourceExtension ./core/JSONSupport ./layers/support/timeUtils".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d,b){var a;m=a=function(r){function u(v){v=r.call(this,v)||this;v.end=null;v.start=null;return v}t._inheritsLoose(u,r);var w=u.prototype;w.readEnd=function(v,D){return null!=D.end?new Date(D.end):null};w.writeEnd=function(v,D){D.end=v?v.getTime():null};w.readStart=function(v,D){return null!=D.start?new Date(D.start):null};w.writeStart=function(v,D){D.start=v?v.getTime():null};w.clone=function(){return new a({end:this.end,start:this.start})};w.expandTo=function(v){if(this.isEmpty||
this.isAllTime)return this.clone();const D=this.start?b.truncateDate(this.start,v):null;v=this.end?b.offsetDate(b.truncateDate(this.end,v),1,v):null;return new a({start:D,end:v})};w.intersection=function(v){var D,B,C,A,E,G,H,K;if(!v)return this.clone();if(this.isEmpty||v.isEmpty)return a.empty;if(this.isAllTime)return v.clone();if(v.isAllTime)return this.clone();const J=null!=(D=null==(B=this.start)?void 0:B.getTime())?D:-Infinity;D=null!=(C=null==(A=this.end)?void 0:A.getTime())?C:Infinity;C=null!=
(E=null==(G=v.start)?void 0:G.getTime())?E:-Infinity;v=null!=(H=null==(K=v.end)?void 0:K.getTime())?H:Infinity;let F,N;C>=J&&C<=D?F=C:J>=C&&J<=v&&(F=J);D>=C&&D<=v?N=D:v>=J&&v<=D&&(N=v);return isNaN(F)||isNaN(N)?a.empty:(H=new a,H.start=-Infinity===F?null:new Date(F),H.end=Infinity===N?null:new Date(N),H)};w.offset=function(v,D){if(this.isEmpty||this.isAllTime)return this.clone();const B=new a,{start:C,end:A}=this;C&&(B.start=b.offsetDate(C,v,D));A&&(B.end=b.offsetDate(A,v,D));return B};w.equals=function(v){if(!v)return!1;
const D=this.start?this.start.getTime():this.start,B=this.end?this.end.getTime():this.end,C=v.start?v.start.getTime():v.start;v=v.end?v.end.getTime():v.end;return D===C&&B===v};w.union=function(v){if(!v||v.isEmpty)return this.clone();if(this.isEmpty)return v.clone();if(this.isAllTime||v.isAllTime)return c.clone();const D=this.start&&v.start?new Date(Math.min(this.start.getTime(),v.start.getTime())):null;v=this.end&&v.end?new Date(Math.max(this.end.getTime(),v.end.getTime())):null;return new a({start:D,
end:v})};t._createClass(u,[{key:"isAllTime",get:function(){return this.equals(a.allTime)}},{key:"isEmpty",get:function(){return this.equals(a.empty)}}],[{key:"allTime",get:function(){return c}},{key:"empty",get:function(){return g}}]);return u}(d.JSONSupport);k.__decorate([x.property({type:Date,json:{write:{allowNull:!0}}})],m.prototype,"end",void 0);k.__decorate([h.reader("end")],m.prototype,"readEnd",null);k.__decorate([l.writer("end")],m.prototype,"writeEnd",null);k.__decorate([x.property({readOnly:!0,
json:{read:!1}})],m.prototype,"isAllTime",null);k.__decorate([x.property({readOnly:!0,json:{read:!1}})],m.prototype,"isEmpty",null);k.__decorate([x.property({type:Date,json:{write:{allowNull:!0}}})],m.prototype,"start",void 0);k.__decorate([h.reader("start")],m.prototype,"readStart",null);k.__decorate([l.writer("start")],m.prototype,"writeStart",null);m=a=k.__decorate([e.subclass("esri.TimeExtent")],m);const c=new m,g=new m({start:void 0,end:void 0});return m})},"esri/layers/support/timeUtils":function(){define(["exports",
"../../core/has","../../core/jsonMap"],function(t,k,m){const z={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",
setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}};k=m.strict()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:null});
t.Milliseconds=function(y){return y};t.millisecondsPerTimeUnit={milliseconds:1,seconds:1E3,minutes:6E4,hours:36E5,days:864E5,weeks:6048E5,months:26784E5,years:31536E6,decades:31536E7,centuries:31536E8};t.offsetDate=function(y,x,f){y=new Date(y.getTime());if(x&&f){const {getter:h,setter:e,multiplier:l}=z[f];y[e](y[h]()+x*l)}return y};t.timeUnitKebabDictionary=k;t.truncateDate=function(y,x){switch(x){case "milliseconds":return new Date(y.getTime());case "seconds":return new Date(y.getFullYear(),y.getMonth(),
y.getDate(),y.getHours(),y.getMinutes(),y.getSeconds());case "minutes":return new Date(y.getFullYear(),y.getMonth(),y.getDate(),y.getHours(),y.getMinutes());case "hours":return new Date(y.getFullYear(),y.getMonth(),y.getDate(),y.getHours());case "days":return new Date(y.getFullYear(),y.getMonth(),y.getDate());case "weeks":return new Date(y.getFullYear(),y.getMonth(),y.getDate()-y.getDay());case "months":return new Date(y.getFullYear(),y.getMonth(),1);case "years":return new Date(y.getFullYear(),0,
1);case "decades":return new Date(y.getFullYear()-y.getFullYear()%10,0,1);case "centuries":return new Date(y.getFullYear()-y.getFullYear()%100,0,1);default:return null}};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/layers/support/source/DataLayerSource":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/decorators/cast ../../../core/jsonMap ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/reader ../../../core/accessorSupport/extensions/serializableProperty/reader ../../../core/accessorSupport/decorators/subclass ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../../core/JSONSupport ../Field ./MapLayerSource ./QueryTableDataSource ./RasterDataSource ./TableDataSource".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d,b,a,c,g,r,u,w,v){function D(){E||(E=p.createTypeReader({types:B()}));return E}function B(){G||(G={key:"type",base:null,typeMap:{"data-layer":t.DataLayerSource,"map-layer":r.MapLayerSource}});return G}var C,A;z=e.strict()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});t.JoinTableDataSource=C=function(H){function K(F){F=H.call(this,F)||this;F.type="join-table";return F}k._inheritsLoose(K,H);var J=K.prototype;J.readLeftTableSource=function(F,
N,L){return D()(F,N,L)};J.castLeftTableSource=function(F){return x.ensureOneOfType(B(),F)};J.readRightTableSource=function(F,N,L){return D()(F,N,L)};J.castRightTableSource=function(F){return x.ensureOneOfType(B(),F)};J.clone=function(){var F,N;const {leftTableKey:L,rightTableKey:M,leftTableSource:S,rightTableSource:Q,joinType:U}=this,W={leftTableKey:L,rightTableKey:M,leftTableSource:null!=(F=null==S?void 0:S.clone())?F:void 0,rightTableSource:null!=(N=null==Q?void 0:Q.clone())?N:void 0,joinType:U};
return new C(W)};return K}(c.JSONSupport);m.__decorate([l.enumeration({joinTable:"join-table"})],t.JoinTableDataSource.prototype,"type",void 0);m.__decorate([f.property({type:String,json:{write:!0}})],t.JoinTableDataSource.prototype,"leftTableKey",void 0);m.__decorate([f.property({type:String,json:{write:!0}})],t.JoinTableDataSource.prototype,"rightTableKey",void 0);m.__decorate([f.property({json:{write:!0}})],t.JoinTableDataSource.prototype,"leftTableSource",void 0);m.__decorate([q.reader("leftTableSource")],
t.JoinTableDataSource.prototype,"readLeftTableSource",null);m.__decorate([h.cast("leftTableSource")],t.JoinTableDataSource.prototype,"castLeftTableSource",null);m.__decorate([f.property({json:{write:!0}})],t.JoinTableDataSource.prototype,"rightTableSource",void 0);m.__decorate([q.reader("rightTableSource")],t.JoinTableDataSource.prototype,"readRightTableSource",null);m.__decorate([h.cast("rightTableSource")],t.JoinTableDataSource.prototype,"castRightTableSource",null);m.__decorate([l.enumeration(z)],
t.JoinTableDataSource.prototype,"joinType",void 0);t.JoinTableDataSource=C=m.__decorate([n.subclass("esri.layers.support.source.JoinTableDataSource")],t.JoinTableDataSource);let E=null,G=null;h={key:"type",base:null,typeMap:{"join-table":t.JoinTableDataSource,"query-table":u.QueryTableDataSource,raster:w.RasterDataSource,table:v.TableDataSource}};t.DataLayerSource=A=function(H){function K(J){J=H.call(this,J)||this;J.type="data-layer";return J}k._inheritsLoose(K,H);K.prototype.clone=function(){const {fields:J,
dataSource:F}=this;return new A({fields:J,dataSource:F})};return K}(c.JSONSupport);m.__decorate([l.enumeration({dataLayer:"data-layer"})],t.DataLayerSource.prototype,"type",void 0);m.__decorate([f.property({type:[g],json:{write:!0}})],t.DataLayerSource.prototype,"fields",void 0);m.__decorate([f.property({types:h,json:{write:!0}})],t.DataLayerSource.prototype,"dataSource",void 0);t.DataLayerSource=A=m.__decorate([n.subclass("esri.layers.support.source.DataLayerSource")],t.DataLayerSource);t.DataLayerSource.from=
x.ensureType(t.DataLayerSource);Object.defineProperty(t,"__esModule",{value:!0})})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports","./property","../../jsonMap"],function(t,k,m){t.enumeration=function(z,y={ignoreUnknown:!0}){z=z instanceof m.JSONMap?z:new m.JSONMap(z,y);z={type:null!=y&&y.ignoreUnknown?z.apiValues:String,readOnly:null==y?void 0:y.readOnly,json:{type:z.jsonValues,read:null!=y&&y.readOnly?!1:{reader:z.read},write:{writer:z.write}}};void 0!==(null==y?
void 0:y.default)&&(z.json.default=y.default);return k.property(z)};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/layers/support/Field":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ./domains ./fieldType".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d,b,a){var c;const g=new f.JSONMap({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});m=c=function(r){function u(v){v=r.call(this,
v)||this;v.alias=null;v.defaultValue=void 0;v.description=null;v.domain=null;v.editable=!0;v.length=-1;v.name=null;v.nullable=!0;v.type=null;v.valueType=null;return v}t._inheritsLoose(u,r);var w=u.prototype;w.readDescription=function(v,{description:D}){let B;try{B=JSON.parse(D)}catch(C){}return B?B.value:null};w.readValueType=function(v,{description:D}){let B;try{B=JSON.parse(D)}catch(C){}return B?g.fromJSON(B.fieldValueType):null};w.clone=function(){return new c({alias:this.alias,defaultValue:this.defaultValue,
description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType})};return u}(d.JSONSupport);k.__decorate([x.property({type:String,json:{write:!0}})],m.prototype,"alias",void 0);k.__decorate([x.property({type:[String,Number],json:{write:{allowNull:!0}}})],m.prototype,"defaultValue",void 0);k.__decorate([x.property()],m.prototype,"description",void 0);k.__decorate([e.reader("description")],
m.prototype,"readDescription",null);k.__decorate([x.property({types:b.types,json:{read:{reader:b.fromJSON},write:!0}})],m.prototype,"domain",void 0);k.__decorate([x.property({type:Boolean,json:{write:!0}})],m.prototype,"editable",void 0);k.__decorate([x.property({type:y.Integer,json:{write:!0}})],m.prototype,"length",void 0);k.__decorate([x.property({type:String,json:{write:!0}})],m.prototype,"name",void 0);k.__decorate([x.property({type:Boolean,json:{write:!0}})],m.prototype,"nullable",void 0);k.__decorate([h.enumeration(a.kebabDict)],
m.prototype,"type",void 0);k.__decorate([x.property()],m.prototype,"valueType",void 0);k.__decorate([e.reader("valueType",["description"])],m.prototype,"readValueType",null);return m=c=k.__decorate([l.subclass("esri.layers.support.Field")],m)})},"esri/layers/support/domains":function(){define("exports ../../core/has ./Domain ./CodedValueDomain ./InheritedDomain ./RangeDomain".split(" "),function(t,k,m,z,y,x){function f(h,e){switch(h.type){case "range":{const l="range"in h?h.range[1]:h.maxValue;if(+e<
("range"in h?h.range[0]:h.minValue)||+e>l)return t.DomainValidationError.VALUE_OUT_OF_RANGE;break}case "coded-value":case "codedValue":if(null==h.codedValues||h.codedValues.every(l=>null==l||l.code!==e))return t.DomainValidationError.INVALID_CODED_VALUE}return null}(function(h){h.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range";h.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(t.DomainValidationError||(t.DomainValidationError={}));k={key:"type",base:m,typeMap:{range:x,
"coded-value":z,inherited:y}};t.DomainBase=m;t.CodedValueDomain=z;t.InheritedDomain=y;t.RangeDomain=x;t.fromJSON=function(h){if(!h||!h.type)return null;switch(h.type){case "range":return x.fromJSON(h);case "codedValue":return z.fromJSON(h);case "inherited":return y.fromJSON(h)}return null};t.getDomainRange=function(h){if(h&&"range"===h.type)return{min:"range"in h?h.range[0]:h.minValue,max:"range"in h?h.range[1]:h.maxValue}};t.isValidDomainValue=function(h,e){return null===f(h,e)};t.types=k;t.validateDomainValue=
f;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/layers/support/Domain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n){m=new f.JSONMap({inherited:"inherited",codedValue:"coded-value",range:"range"});n=function(d){function b(a){a=d.call(this,a)||this;a.name=null;a.type=null;return a}t._inheritsLoose(b,d);return b}(n.JSONSupport);k.__decorate([x.property({type:String,json:{write:!0}})],n.prototype,"name",void 0);k.__decorate([h.enumeration(m)],n.prototype,"type",void 0);return n=k.__decorate([e.subclass("esri.layers.support.Domain")],n)})},"esri/layers/support/CodedValueDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/lang ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ./CodedValue ./Domain".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d){var b;m=b=function(a){function c(r){r=a.call(this,r)||this;r.codedValues=null;r.type="coded-value";return r}t._inheritsLoose(c,a);var g=c.prototype;g.getName=function(r){let u=null;if(this.codedValues){const w=String(r);this.codedValues.some(v=>{String(v.code)===w&&(u=v.name);return!!u})}return u};g.clone=function(){return new b({codedValues:z.clone(this.codedValues),name:this.name})};return c}(d);k.__decorate([f.property({type:[n["default"]],json:{write:!0}})],
m.prototype,"codedValues",void 0);k.__decorate([h.enumeration({codedValue:"coded-value"})],m.prototype,"type",void 0);return m=b=k.__decorate([e.subclass("esri.layers.support.CodedValueDomain")],m)})},"esri/layers/support/CodedValue":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n){var d;t.CodedValue=d=function(b){function a(c){c=b.call(this,c)||this;c.name=null;c.code=null;return c}k._inheritsLoose(a,b);a.prototype.clone=function(){return new d({name:this.name,code:this.code})};return a}(n.JSONSupport);m.__decorate([f.property({type:String,json:{write:!0}})],t.CodedValue.prototype,"name",void 0);m.__decorate([f.property({type:[String,Number],json:{write:!0}})],t.CodedValue.prototype,"code",void 0);t.CodedValue=d=m.__decorate([e.subclass("esri.layers.support.CodedValue")],
t.CodedValue);t.default=t.CodedValue;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/layers/support/InheritedDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ./Domain".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p){var n;m=n=function(d){function b(a){a=d.call(this,a)||this;a.type="inherited";return a}t._inheritsLoose(b,d);b.prototype.clone=function(){return new n};return b}(p);k.__decorate([f.enumeration({inherited:"inherited"})],m.prototype,"type",void 0);return m=n=k.__decorate([h.subclass("esri.layers.support.InheritedDomain")],m)})},"esri/layers/support/RangeDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ./Domain".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p){var n;m=n=function(d){function b(a){a=d.call(this,a)||this;a.maxValue=null;a.minValue=null;a.type="range";return a}t._inheritsLoose(b,d);b.prototype.clone=function(){return new n({maxValue:this.maxValue,minValue:this.minValue,name:this.name})};return b}(p);k.__decorate([x.property({type:Number,json:{type:[Number],read:{source:"range",reader(d,b){return b.range&&b.range[1]}},write:{enabled:!1,overridePolicy(){return{enabled:null!=this.maxValue&&null==this.minValue}},
target:"range",writer(d,b,a){b[a]=[this.minValue||0,d]}}}})],m.prototype,"maxValue",void 0);k.__decorate([x.property({type:Number,json:{type:[Number],read:{source:"range",reader(d,b){return b.range&&b.range[0]}},write:{target:"range",writer(d,b,a){b[a]=[d,this.maxValue||0]}}}})],m.prototype,"minValue",void 0);k.__decorate([f.enumeration({range:"range"})],m.prototype,"type",void 0);return m=n=k.__decorate([h.subclass("esri.layers.support.RangeDomain")],m)})},"esri/layers/support/fieldType":function(){define(["exports",
"../../core/jsonMap"],function(t,k){k=new k.JSONMap({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"});t.kebabDict=k;Object.defineProperty(t,"__esModule",
{value:!0})})},"esri/layers/support/source/MapLayerSource":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../../core/JSONSupport".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n){var d;t.MapLayerSource=d=function(b){function a(c){c=b.call(this,c)||this;c.type="map-layer";return c}k._inheritsLoose(a,b);a.prototype.clone=function(){const {mapLayerId:c,gdbVersion:g}=this;return new d({mapLayerId:c,gdbVersion:g})};return a}(n.JSONSupport);m.__decorate([h.enumeration({mapLayer:"map-layer"})],t.MapLayerSource.prototype,"type",void 0);m.__decorate([f.property({type:x.Integer,json:{write:!0}})],t.MapLayerSource.prototype,"mapLayerId",void 0);m.__decorate([f.property({type:String,
json:{write:!0}})],t.MapLayerSource.prototype,"gdbVersion",void 0);t.MapLayerSource=d=m.__decorate([e.subclass("esri.layers.support.source.MapLayerSource")],t.MapLayerSource);Object.defineProperty(t,"__esModule",{value:!0})})},"esri/layers/support/source/QueryTableDataSource":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../../core/JSONSupport ../../../geometry/SpatialReference ../../../geometry/support/typeUtils ../../../geometry".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d,b,a){var c;t.QueryTableDataSource=c=function(g){function r(u){u=g.call(this,u)||this;u.type="query-table";return u}k._inheritsLoose(r,g);r.prototype.clone=function(){var u;const {workspaceId:w,query:v,oidFields:D,spatialReference:B,geometryType:C}=this,A={workspaceId:w,query:v,oidFields:D,spatialReference:null!=(u=null==B?void 0:B.clone())?u:void 0,geometryType:C};return new c(A)};return r}(n.JSONSupport);m.__decorate([h.enumeration({queryTable:"query-table"})],
t.QueryTableDataSource.prototype,"type",void 0);m.__decorate([f.property({type:String,json:{write:!0}})],t.QueryTableDataSource.prototype,"workspaceId",void 0);m.__decorate([f.property({type:String,json:{write:!0}})],t.QueryTableDataSource.prototype,"query",void 0);m.__decorate([f.property({type:String,json:{write:!0}})],t.QueryTableDataSource.prototype,"oidFields",void 0);m.__decorate([f.property({type:d,json:{write:!0}})],t.QueryTableDataSource.prototype,"spatialReference",void 0);m.__decorate([h.enumeration(b.featureGeometryTypeKebabDictionary)],
t.QueryTableDataSource.prototype,"geometryType",void 0);t.QueryTableDataSource=c=m.__decorate([e.subclass("esri.layers.support.source.QueryTableDataSource")],t.QueryTableDataSource);Object.defineProperty(t,"__esModule",{value:!0})})},"esri/layers/support/source/RasterDataSource":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../../core/JSONSupport".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n){var d;t.RasterDataSource=d=function(b){function a(c){c=b.call(this,c)||this;c.type="raster";return c}k._inheritsLoose(a,b);a.prototype.clone=function(){const {workspaceId:c,dataSourceName:g}=this;return new d({workspaceId:c,dataSourceName:g})};return a}(n.JSONSupport);m.__decorate([h.enumeration({raster:"raster"})],t.RasterDataSource.prototype,"type",void 0);m.__decorate([f.property({type:String,json:{write:!0}})],t.RasterDataSource.prototype,"dataSourceName",void 0);
m.__decorate([f.property({type:String,json:{write:!0}})],t.RasterDataSource.prototype,"workspaceId",void 0);t.RasterDataSource=d=m.__decorate([e.subclass("esri.layers.support.source.RasterDataSource")],t.RasterDataSource);Object.defineProperty(t,"__esModule",{value:!0})})},"esri/layers/support/source/TableDataSource":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../../core/JSONSupport".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n){var d;t.TableDataSource=d=function(b){function a(c){c=b.call(this,c)||this;c.type="table";return c}k._inheritsLoose(a,b);a.prototype.clone=function(){const {workspaceId:c,gdbVersion:g,dataSourceName:r}=this;return new d({workspaceId:c,gdbVersion:g,dataSourceName:r})};return a}(n.JSONSupport);m.__decorate([h.enumeration({table:"table"})],t.TableDataSource.prototype,"type",void 0);m.__decorate([f.property({type:String,json:{write:!0}})],t.TableDataSource.prototype,
"workspaceId",void 0);m.__decorate([f.property({type:String,json:{write:!0}})],t.TableDataSource.prototype,"gdbVersion",void 0);m.__decorate([f.property({type:String,json:{write:!0}})],t.TableDataSource.prototype,"dataSourceName",void 0);t.TableDataSource=d=m.__decorate([e.subclass("esri.layers.support.source.TableDataSource")],t.TableDataSource);Object.defineProperty(t,"__esModule",{value:!0})})},"esri/tasks/support/StatisticDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/lang ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d){var b;m=new h.JSONMap({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete"});d=b=function(a){function c(r){r=a.call(this,r)||this;r.maxPointCount=void 0;r.maxRecordCount=void 0;r.maxVertexCount=void 0;r.onStatisticField=null;r.outStatisticFieldName=null;r.statisticType=null;r.statisticParameters=null;return r}t._inheritsLoose(c,
a);var g=c.prototype;g.writeStatisticParameters=function(r,u){if("percentile-continuous"===this.statisticType||"percentile-discrete"===this.statisticType)u.statisticParameters=z.clone(r)};g.clone=function(){return new b({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:z.clone(this.statisticParameters)})};
return c}(d.JSONSupport);k.__decorate([f.property({type:Number,json:{write:!0}})],d.prototype,"maxPointCount",void 0);k.__decorate([f.property({type:Number,json:{write:!0}})],d.prototype,"maxRecordCount",void 0);k.__decorate([f.property({type:Number,json:{write:!0}})],d.prototype,"maxVertexCount",void 0);k.__decorate([f.property({type:String,json:{write:!0}})],d.prototype,"onStatisticField",void 0);k.__decorate([f.property({type:String,json:{write:!0}})],d.prototype,"outStatisticFieldName",void 0);
k.__decorate([f.property({type:String,json:{read:{source:"statisticType",reader:m.read},write:{target:"statisticType",writer:m.write}}})],d.prototype,"statisticType",void 0);k.__decorate([f.property({type:Object})],d.prototype,"statisticParameters",void 0);k.__decorate([l.writer("statisticParameters")],d.prototype,"writeStatisticParameters",null);return d=b=k.__decorate([e.subclass("esri.tasks.support.StatisticDefinition")],d)})},"esri/views/2d/layers/features/controllers/support/sourceAdapters":function(){define("exports ../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/has ../../../../../../core/maybe ../../../../../../layers/graphics/featureConversionUtils ../../../../../../core/workers/workers ../../../../../../rest/query/operations/query ../../support/FeatureSetReaderJSON ../../../../../../layers/ogc/ogcFeatureUtils ../../support/FeatureSetReaderPBF".split(" "),
function(t,k,m,z,y,x,f,h,e,l){let q=function(){function a(c){this.service=c}a.prototype.destroy=function(){};return a}(),p=function(a){function c(r){var u=a.call(this,r)||this;u._portsOpen=x.openWithPorts(r.source).then(w=>u.client=w);return u}k._inheritsLoose(c,a);var g=c.prototype;g.destroy=function(){this.client.close();this.client=null};g.executeQuery=async function(r,u){await this._portsOpen;r=await this.client.invoke("queryFeatures",r.toJSON(),u);return h.FeatureSetReaderJSON.fromFeatureSet(r,
this.service.objectIdField)};return c}(q),n=function(a){function c(){return a.apply(this,arguments)||this}k._inheritsLoose(c,a);c.prototype.executeQuery=async function(g,r){({data:r}=await f.executeQueryPBFBuffer(this.service.source,g,{...r,query:{...this.service.customParameters,...null==r?void 0:r.query}}));return l.FeatureSetReaderPBF.fromBuffer(r,this.service.geometryType,!g.quantizationParameters)};return c}(q),d=function(a){function c(){return a.apply(this,arguments)||this}k._inheritsLoose(c,
a);c.prototype.executeQuery=async function(g,r){const {source:u,capabilities:w,spatialReference:v,objectIdField:D}=this.service;if(g.quantizationParameters&&!w.query.supportsQuantization)return g=g.clone(),g.quantizationParameters=null,{data:g}=await f.executeQuery(u,g,v,{...r,query:{...this.service.customParameters,...null==r?void 0:r.query}}),g=y.convertFromFeatureSet(g,D),y.quantizeOptimizedFeatureSet(r.transform,g),h.FeatureSetReaderJSON.fromOptimizedFeatureSet(g);({data:r}=await f.executeQuery(u,
g,this.service.spatialReference,{...r,query:{...z.unwrap(this.service.customParameters),...null==r?void 0:r.query}}));return h.FeatureSetReaderJSON.fromFeatureSet(r,this.service.objectIdField)};return c}(q),b=function(a){function c(){return a.apply(this,arguments)||this}k._inheritsLoose(c,a);c.prototype.executeQuery=async function(g,r){const {capabilities:u}=this.service;if(g.quantizationParameters&&!u.query.supportsQuantization)return g.clone().quantizationParameters=null,g=await e.queryOptimizedFeatureSet(this.service.source,
g,r),y.quantizeOptimizedFeatureSet(r.transform,g),h.FeatureSetReaderJSON.fromOptimizedFeatureSet(g);r=await e.queryOptimizedFeatureSet(this.service.source,g,r);return h.FeatureSetReaderJSON.fromOptimizedFeatureSet(r)};return c}(q);t.SourceAdapter=q;t.createSourceAdapter=function(a){const {capabilities:c}=a;var g=a.source;return g&&g.capabilities&&g.collectionId&&g.layerDefinition&&g.url?new b(a):Array.isArray(a.source)?new p(a):c.query.supportsFormatPBF&&m("featurelayer-pbf")?new n(a):new d(a)};Object.defineProperty(t,
"__esModule",{value:!0})})},"esri/core/workers/workers":function(){define("require exports ../has ../Error ../promiseUtils ./RemoteClient ./Connection ./WorkerOwner".split(" "),function(t,k,m,z,y,x,f,h){function e(c){if(c&&c.__esModule)return c;var g=Object.create(null);c&&Object.keys(c).forEach(function(r){if("default"!==r){var u=Object.getOwnPropertyDescriptor(c,r);Object.defineProperty(g,r,u.get?u:{enumerable:!0,get:function(){return c[r]}})}});g["default"]=c;return Object.freeze(g)}async function l(c,
g){const r=new f;await r.open(c,g);return r}async function q(){if(b)return b;a=y.createAbortController();const c=[];for(let g=0;g<p;g++){const r=h.create(g).then(u=>d[g]=u);c.push(r)}return b=Promise.all(c)}let p=m("esri-workers-debug")?1:m("host-browser")?navigator.hardwareConcurrency-1:0;p||(p=m("safari")&&m("mac")||m("trident")?7:2);let n=0;const d=[];let b=null,a;k.RemoteClient=x;k.Connection=f;k.initialize=function(){q()};k.open=async function(c,g={}){if("string"!==typeof c)throw new z("workers:undefined-module",
"modulePath is missing");var r=g.strategy||"distributed";m("host-webworker")&&!m("esri-workers")&&(r="local");if("local"===r){var u=await x.loadWorker(c);u||(u=await new Promise(function(w,v){t([c],function(D){w(e(D))},v)}));y.throwIfAborted(g.signal);r=g.client||u;u=x.connect(u);return l([u],{...g,client:r})}await q();y.throwIfAborted(g.signal);if("dedicated"===r)return r=n++%p,r=await d[r].open(c,g),l([r],g);if(g.maxNumWorkers&&0<g.maxNumWorkers&&(r=Math.min(g.maxNumWorkers,p),r<p)){u=Array(r);
for(let w=0;w<r;++w){const v=n++%p;u[w]=d[v].open(c,g)}return l(u,g)}r=d.map(w=>w.open(c,g));return l(r,g)};k.openWithPorts=function(c,g){return l(c,{client:g})};k.terminate=function(){b&&(a.abort(),b=null);for(let c=0;c<d.length;c++)d[c]&&d[c].terminate();d.length=0};Object.defineProperty(k,"__esModule",{value:!0})})},"esri/core/workers/Connection":function(){define(["../../chunks/_rollupPluginBabelHelpers","../Logger","../handleUtils","../promiseUtils","./RemoteClient"],function(t,k,m,z,y){const x=
k.getLogger("esri.core.workers.Connection");return function(){function f(){this._clients=[];this._clientPromises=[];this._clientIdx=0}var h=f.prototype;h.destroy=function(){this.close()};h.open=function(e,l){return new Promise((q,p)=>{let n=!0;const d=b=>{z.throwIfAborted(l.signal);n&&(n=!1,b())};this._clients.length=e.length;this._clientPromises.length=e.length;for(let b=0;b<e.length;++b){const a=e[b];z.isPromiseLike(a)?this._clientPromises[b]=a.then(c=>{this._clients[b]=new y(c,l);d(q);return this._clients[b]},
()=>{d(p);return null}):(this._clients[b]=new y(a,l),this._clientPromises[b]=Promise.resolve(this._clients[b]),d(q))}})};h.broadcast=function(e,l,q){const p=Array(this._clientPromises.length);for(let n=0;n<this._clientPromises.length;++n)p[n]=this._clientPromises[n].then(d=>d.invoke(e,l,q));return p};h.close=function(){for(const e of this._clientPromises)e.then(l=>l.close());this._clients.length=0;this._clientPromises.length=0};h.getAvailableClient=function(){let e;for(let l=0;l<this._clients.length;++l){const q=
this._clients[l];if(!q)e=e||[],e.push(this._clientPromises[l]);else if(!q.isBusy())return Promise.resolve(q)}return e?Promise.race(e):(this._clientIdx=(this._clientIdx+1)%this._clients.length,Promise.resolve(this._clients[this._clientIdx]))};h.invoke=function(e,l,q){let p=null;Array.isArray(q)?(x.warn("invoke()","The transferList parameter is deprecated, use the options object instead"),p={transferList:q}):p=q;return this.closed?Promise.reject(Error("Connection closed")):this.getAvailableClient().then(n=>
n.invoke(e,l,p))};h.on=function(e,l){return Promise.all(this._clientPromises).then(()=>m.handlesGroup(this._clients.map(q=>q.on(e,l))))};h.openPorts=function(){return new Promise(e=>{const l=Array(this._clientPromises.length);let q=l.length;for(let p=0;p<this._clientPromises.length;++p)this._clientPromises[p].then(n=>{l[p]=n.openPort();0===--q&&e(l)})})};t._createClass(f,[{key:"closed",get:function(){return!this._clients||!this._clients.length}},{key:"test",get:function(){return{numClients:this._clients.length}}}]);
return f}()})},"esri/core/workers/WorkerOwner":function(){define("../Logger ../Error ../promiseUtils ../../kernel ./utils ./workerFactory".split(" "),function(t,k,m,z,y,x){const f=t.getLogger("esri.core.workers"),{ABORT:h,INVOKE:e,OPEN:l,OPENED:q,RESPONSE:p}=y.MessageType;return function(){function n(b,a){this._outJobs=new Map;this._inJobs=new Map;this.worker=b;this.id=a;b.addEventListener("message",this._onMessage.bind(this));b.addEventListener("error",c=>{c.preventDefault();f.error(c)})}n.create=
async function(b){const a=await x.createWorker();return new n(a,b)};var d=n.prototype;d.terminate=function(){this.worker.terminate()};d.open=async function(b,a={}){const {signal:c}=a,g=y.newJobId();return new Promise((r,u)=>{const w=m.onAbortOrThrow(c,()=>{this._outJobs.delete(g);this._post({type:h,jobId:g})});this._outJobs.set(g,{resolve:r,reject:u,abortHandle:w});this._post({type:l,jobId:g,modulePath:b})})};d._onMessage=function(b){if(b=y.receiveMessage(b))switch(b.type){case q:this._onOpenedMessage(b);
break;case p:this._onResponseMessage(b);break;case h:this._onAbortMessage(b);break;case e:this._onInvokeMessage(b)}};d._onAbortMessage=function(b){const a=this._inJobs;b=b.jobId;const c=a.get(b);c&&(c.controller&&c.controller.abort(),a.delete(b))};d._onInvokeMessage=function(b){const {methodName:a,jobId:c,data:g,abortable:r}=b;b=r?m.createAbortController():null;const u=this._inJobs,w=z.workerMessages[a];let v;try{if("function"!==typeof w)throw new TypeError(`${a} is not a function`);v=w.call(null,
g,{signal:b?b.signal:null})}catch(D){this._post({type:p,jobId:c,error:y.toInvokeError(D)});return}m.isPromiseLike(v)?(u.set(c,{controller:b,promise:v}),v.then(D=>{u.has(c)&&(u.delete(c),this._post({type:p,jobId:c},D))},D=>{u.has(c)&&(u.delete(c),D||(D={message:"Error encountered at method"+a}),m.isAbortError(D)||this._post({type:p,jobId:c,error:y.toInvokeError(D||{message:`Error encountered at method ${a}`})}))})):this._post({type:p,jobId:c},v)};d._onOpenedMessage=function(b){var a;const {jobId:c,
data:g}=b;if(b=this._outJobs.get(c))this._outJobs.delete(c),null==(a=b.abortHandle)?void 0:a.remove(),b.resolve(g)};d._onResponseMessage=function(b){var a;const {jobId:c,error:g,data:r}=b;if(b=this._outJobs.get(c))this._outJobs.delete(c),null==(a=b.abortHandle)?void 0:a.remove(),g?b.reject(k.fromJSON(JSON.parse(g))):b.resolve(r)};d._post=function(b,a,c){return y.postMessage(this.worker,b,a,c)};return n}()})},"esri/core/workers/workerFactory":function(){define("exports ../has ../../support/revision ../../config ../Logger ../urlUtils ../../intl/locale ../../kernel ../../assets ../../intl ./utils ./loaderConfig ./WorkerFallback".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n){async function d(w){return new Promise(v=>{function D(C){(C=q.receiveMessage(C))&&C.type===c&&(w.removeEventListener("message",D),w.removeEventListener("error",B),v(w))}function B(C){C.preventDefault();w.removeEventListener("message",D);w.removeEventListener("error",B);a.warn("Failed to create Worker. Fallback to execute module in main thread",C);w=new n;w.addEventListener("message",D);w.addEventListener("error",B)}w.addEventListener("message",D);w.addEventListener("error",
B)})}function b(){if(null!=z["default"]){var w={...z};delete w["default"];w=JSON.parse(JSON.stringify(w))}else w=JSON.parse(JSON.stringify(z));w.assetsPath=x.makeAbsolute(w.assetsPath);w.request.interceptors=[];w.log.interceptors=[];w.locale=f.getLocale();w.has={"csp-restrictions":k("csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":k("esri-2d-update-debug"),"esri-2d-query-centroid-enabled":k("esri-2d-query-centroid-enabled"),"featurelayer-pbf":k("featurelayer-pbf"),"featurelayer-snapshot-point-threshold":k("featurelayer-snapshot-point-threshold"),
"esri-atomics":k("esri-atomics"),"esri-shared-array-buffer":k("esri-shared-array-buffer"),"esri-tiles-debug":k("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":k("esri-workers-arraybuffer-transfer"),"host-webworker":1};w.workers.loaderUrl?w.workers.loaderUrl=x.makeAbsolute(w.workers.loaderUrl):p.DEFAULT_LOADER_URL&&(w.workers.loaderUrl=p.DEFAULT_LOADER_URL);w.workers.workerPath=w.workers.workerPath?x.makeAbsolute(w.workers.workerPath):"esri/core/workers/RemoteClient";var v=z.workers.loaderConfig;
v=p["default"]({baseUrl:null==v?void 0:v.baseUrl,locale:f.getLocale(),has:{"csp-restrictions":k("csp-restrictions"),"dojo-test-sniff":0,"host-webworker":1,...null==v?void 0:v.has},map:{...null==v?void 0:v.map},paths:{...null==v?void 0:v.paths},packages:(null==v?void 0:v.packages)||[]});return JSON.stringify({esriConfig:w,loaderConfig:v,kernelInfo:{version:h.version,buildDate:m.buildDate,revision:m.commitHash}})}const a=y.getLogger("esri.core.workers");k.add("esri-workers-arraybuffer-transfer",!k("safari")||
12<=k("safari"));const {HANDSHAKE:c}=q.MessageType;let g,r,u=0;t.createWorker=async function(){if(!k("esri-workers"))return d(new n);if(!g&&!r)try{const v='let globalId\x3d0;const outgoing\x3dnew Map,configuration\x3dJSON.parse("{CONFIGURATION}");self.esriConfig\x3dconfiguration.esriConfig;const workerPath\x3dself.esriConfig.workers.workerPath,HANDSHAKE\x3d0,OPEN\x3d1,OPENED\x3d2,RESPONSE\x3d3,INVOKE\x3d4,ABORT\x3d5;function createAbortError(){const e\x3dnew Error("Aborted");return e.name\x3d"AbortError",e}function receiveMessage(e){return e\x26\x26e.data?"string"\x3d\x3dtypeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t\x3dr\x26\x26r.signal,n\x3dglobalId++;return new Promise(((r,i)\x3d\x3e{if(t){if(t.aborted)return i(createAbortError());t.addEventListener("abort",(()\x3d\x3e{outgoing.get(n)\x26\x26(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))}))}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!\x3dt,data:o})}))}let workerRevisionChecked\x3d!1;function checkWorkerRevision(e){if(!workerRevisionChecked\x26\x26e.kernelInfo){workerRevisionChecked\x3d!0;const{revision:o,buildDate:r,version:t}\x3dconfiguration.kernelInfo,{revision:n,buildDate:i,version:s}\x3de.kernelInfo;o!\x3d\x3dn\x26\x26console.warn(`[esri.core.workers] Version mismatch detected between ArcGIS API for JavaScript and assets:\nAPI version: ${t} [Date: ${r}, Revision: ${o.slice(0,8)}]\nAssets version: ${s} [Date: ${i}, Revision: ${n.slice(0,8)}]`)}}function messageHandler(e){const o\x3dreceiveMessage(e);if(!o)return;const r\x3do.jobId;switch(o.type){case 1:let e;function t(o){const t\x3de.connect(o);self.postMessage({type:2,jobId:r,data:t},[t])}"function"\x3d\x3dtypeof define\x26\x26define.amd?require([workerPath],(r\x3d\x3e{e\x3dr.default||r,checkWorkerRevision(e),e.loadWorker(o.modulePath).then((e\x3d\x3ee||new Promise((e\x3d\x3e{require([o.modulePath],e)})))).then(t)})):"System"in self\x26\x26"function"\x3d\x3dtypeof System.import?System.import(workerPath).then((r\x3d\x3e(e\x3dr.default,checkWorkerRevision(e),e.loadWorker(o.modulePath)))).then((e\x3d\x3ee||System.import(o.modulePath))).then(t):(self.RemoteClient||importScripts(workerPath),e\x3dself.RemoteClient.default||self.RemoteClient,checkWorkerRevision(e),e.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const e\x3doutgoing.get(r);outgoing.delete(r),o.error?e.reject(JSON.parse(o.error)):e.resolve(o.data)}}}self.dojoConfig\x3dconfiguration.loaderConfig,esriConfig.workers.loaderUrl\x26\x26(self.importScripts(esriConfig.workers.loaderUrl),"function"\x3d\x3dtypeof require\x26\x26"function"\x3d\x3dtypeof require.config\x26\x26require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});'.replace('"{CONFIGURATION}"',
`'${b()}'`);g=URL.createObjectURL(new Blob([v],{type:"text/javascript"}))}catch(v){r=v||{}}let w;if(g)try{w=new Worker(g,{name:`esri-worker-${u++}`})}catch(v){a.warn("Failed to create Worker. Fallback to execute module in main thread",r),w=new n}else a.warn("Failed to create Worker. Fallback to execute module in main thread",r),w=new n;return d(w)};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/intl/locale":function(){define(["exports","../core/global"],function(t,k){function m(){var b,
a;return null!=(b=null!=q?q:null==(a=k.navigator)?void 0:a.language)?b:"en"}function z(){void 0===l&&(l=m());return l}function y(){var b;const a=null!=(b=e)?b:m();l!==a&&(l=a,[...d].forEach(c=>{c.call(null,a)}),[...n].forEach(c=>{c.call(null,a)}))}var x,f,h;let e=void 0,l=void 0;const q=null!=(x=null==(f=k.esriConfig)?void 0:f.locale)?x:null==(h=k.dojoConfig)?void 0:h.locale,p={he:!0,ar:!0},n=[],d=[];null==k.addEventListener?void 0:k.addEventListener("languagechange",y);t.beforeLocaleChange=function(b){d.push(b);
return{remove(){n.splice(d.indexOf(b),1)}}};t.getDefaultLocale=m;t.getLocale=z;t.onLocaleChange=function(b){n.push(b);return{remove(){n.splice(n.indexOf(b),1)}}};t.prefersRTL=function(b=z()){b=/^([a-zA-Z]{2,3})(?:[_\-]\w+)*$/.exec(b);b=null==b?void 0:b[1].toLowerCase();return void 0!==b&&(p[b]||!1)};t.setLocale=function(b){e=b?b:void 0;y()};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/intl":function(){define("exports ./intl/locale ./intl/date ./intl/number ./intl/substitute ./intl/messages ./intl/t9n ./assets".split(" "),
function(t,k,m,z,y,x,f,h){x.registerMessageBundleLoader(f.createJSONLoader({pattern:"esri/",location:h.getAssetUrl}));t.getLocale=k.getLocale;t.onLocaleChange=k.onLocaleChange;t.prefersRTL=k.prefersRTL;t.setLocale=k.setLocale;t.convertDateFormatToIntlOptions=m.convertDateFormatToIntlOptions;t.formatDate=m.formatDate;t.convertNumberFormatToIntlOptions=z.convertNumberFormatToIntlOptions;t.formatNumber=z.formatNumber;t.substitute=y.substitute;t.fetchMessageBundle=x.fetchMessageBundle;t.normalizeMessageBundleLocale=
x.normalizeMessageBundleLocale;t.registerMessageBundleLoader=x.registerMessageBundleLoader;t.createJSONLoader=f.createJSONLoader;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/intl/date":function(){define(["exports","../core/jsonMap","./locale"],function(t,k,m){function z(b){b=b||d;if(!n.has(b)){var a=m.getLocale();a=p[m.getLocale()]||a;n.set(b,new Intl.DateTimeFormat(a,b))}return n.get(b)}var y={year:"numeric",month:"numeric",day:"numeric"},x={year:"numeric",month:"long",day:"numeric"},
f={year:"numeric",month:"short",day:"numeric"};const h={year:"numeric",month:"long",weekday:"long",day:"numeric"},e={hour:"numeric",minute:"numeric"},l={...e,second:"numeric"},q={"short-date":y,"short-date-short-time":{...y,...e},"short-date-short-time-24":{...y,...e,hour12:!1},"short-date-long-time":{...y,...l},"short-date-long-time-24":{...y,...l,hour12:!1},"short-date-le":y,"short-date-le-short-time":{...y,...e},"short-date-le-short-time-24":{...y,...e,hour12:!1},"short-date-le-long-time":{...y,
...l},"short-date-le-long-time-24":{...y,...l,hour12:!1},"long-month-day-year":x,"long-month-day-year-short-time":{...x,...e},"long-month-day-year-short-time-24":{...x,...e,hour12:!1},"long-month-day-year-long-time":{...x,...l},"long-month-day-year-long-time-24":{...x,...l,hour12:!1},"day-short-month-year":f,"day-short-month-year-short-time":{...f,...e},"day-short-month-year-short-time-24":{...f,...e,hour12:!1},"day-short-month-year-long-time":{...f,...l},"day-short-month-year-long-time-24":{...f,
...l,hour12:!1},"long-date":h,"long-date-short-time":{...h,...e},"long-date-short-time-24":{...h,...e,hour12:!1},"long-date-long-time":{...h,...l},"long-date-long-time-24":{...h,...l,hour12:!1},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":e,"long-time":l};k=k.strict()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",
shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",
dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",
shortMonthYear:"short-month-year",year:"year"});y=k.apiValues;x=k.toJSON.bind(k);f=k.fromJSON.bind(k);const p={ar:"ar-u-nu-latn-ca-gregory"};let n=new WeakMap,d=q["short-date-short-time"];m.beforeLocaleChange(()=>{n=new WeakMap;d=q["short-date-short-time"]});t.convertDateFormatToIntlOptions=function(b){return q[b]||null};t.dateFormats=y;t.dictionary=k;t.formatDate=function(b,a){return z(a).format(b)};t.fromJSON=f;t.getDateTimeFormatter=z;t.toJSON=x;Object.defineProperty(t,"__esModule",{value:!0})})},
"esri/intl/number":function(){define(["exports","../core/maybe","./locale"],function(t,k,m){function z(h){const e=h||f;if(!x.has(e)){var l=m.getLocale();l=y[m.getLocale()]||l;x.set(e,new Intl.NumberFormat(l,h))}return k.assumeNonNull(x.get(e))}const y={ar:"ar-u-nu-latn"};let x=new WeakMap,f={};m.beforeLocaleChange(()=>{x=new WeakMap;f={}});t.convertNumberFormatToIntlOptions=function(h={}){const e={};null!=h.digitSeparator&&(e.useGrouping=h.digitSeparator);null!=h.places&&(e.minimumFractionDigits=
e.maximumFractionDigits=h.places);return e};t.formatNumber=function(h,e){return z(e).format(h)};t.getFormatter=z;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/intl/substitute":function(){define("exports ../core/object ../core/string ../core/Logger ./date ./number".split(" "),function(t,k,m,z,y,x){function f(e){switch(typeof e){case "string":return e;case "number":return x.formatNumber(e);case "boolean":return""+e;default:return e instanceof Date?y.formatDate(e):""}}const h=z.getLogger("esri.intl");
t.substitute=function(e,l,q={}){const {format:p={}}=q;return m.replace(e,n=>{{const a=n.indexOf(":");if(-1===a)var d=n.trim();else{d=n.slice(0,a).trim();var b=n.slice(a+1).trim()}if(d)if(n=k.getDeepValue(d,l),null==n)b="";else if(d=p[b]||p[d])b:switch(d.type){case "date":b=y.formatDate(n,d.intlOptions);break b;case "number":b=x.formatNumber(n,d.intlOptions);break b;default:h.warn("missing format descriptor for key {key}"),b=f(n)}else if(b)b:switch(b.toLowerCase()){case "dateformat":b=y.formatDate(n);
break b;case "numberformat":b=x.formatNumber(n);break b;default:h.warn(`inline format is unsupported since 4.12: ${b}`),b=/^(dateformat|datestring)/i.test(b)?y.formatDate(n):/^numberformat/i.test(b)?x.formatNumber(n):f(n)}else b=f(n);else b=""}return b})};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/intl/messages":function(){define(["exports","../core/Error","../core/promiseUtils","./locale"],function(t,k,m,z){async function y(n,d){const b=[];for(const a of e)if(x(a.pattern,n))try{return await a.fetchMessageBundle(n,
d)}catch(c){b.push(c)}if(b.length)throw new k("intl:message-bundle-error",`Errors occurred while loading "${n}"`,{errors:b});throw new k("intl:no-message-bundle-loader",`No loader found for message bundle "${n}"`);}function x(n,d){return"string"===typeof n?d.startsWith(n):n.test(d)}const f=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,h=new Set("ar bs ca cs da de el en es et fi fr he hi hr hu id it ja ko lt lv nb nl pl pt-BR pt-PT ro ru sk sl sr sv th tr uk vi zh-CN zh-HK zh-TW".split(" ")),e=[],l=new Map;
z.beforeLocaleChange(()=>{l.clear()});const q=new (function(){function n(){this._numLoading=0}var d=n.prototype;d.waitForAll=async function(){this._dfd&&await this._dfd.promise};d.add=function(b){this._increase();b.then(()=>this._decrease(),()=>this._decrease());return this.waitForAll()};d._increase=function(){this._numLoading++;this._dfd||(this._dfd=m.createDeferred())};d._decrease=function(){this._numLoading=Math.max(this._numLoading-1,0);this._dfd&&0===this._numLoading&&(this._dfd.resolve(),this._dfd=
null)};return n}()),p={cache:l,loaders:e};t.fetchMessageBundle=async function(n){const d=z.getLocale();l.has(n)||l.set(n,y(n,d));n=l.get(n);await q.add(n);return n};t.normalizeMessageBundleLocale=function(n){if(!f.test(n))return null;const [,d,b]=f.exec(n);n=d+(b?"-"+b.toUpperCase():"");return h.has(n)?n:h.has(d)?d:null};t.registerMessageBundleLoader=function(n){if(!e.includes(n)){for(const d of l.keys())x(n.pattern,d)&&l.delete(d);e.unshift(n)}};t.test=p;Object.defineProperty(t,"__esModule",{value:!0})})},
"esri/intl/t9n":function(){define("exports ../core/global ../core/maybe ../core/Error ./messages ../request".split(" "),function(t,k,m,z,y,x){async function f(q,p,n,d){var b=p.exec(n);if(!b)throw new z("esri-intl:invalid-bundle",`Bundle id "${n}" is not compatible with the pattern "${p}"`);p=b[1]?`${b[1]}/`:"";b=b[2];const a=y.normalizeMessageBundleLocale(d);d=`${p}${b}.json`;p=a?`${p}${b}_${a}.json`:d;let c;try{c=await h(q(p))}catch(g){if(p===d)throw new z("intl:unknown-bundle",`Bundle "${n}" cannot be loaded`,
{error:g});try{c=await h(q(d))}catch(r){throw new z("intl:unknown-bundle",`Bundle "${n}" cannot be loaded`,{error:r});}}return c}async function h(q){if(m.isSome(l.fetchBundleAsset))return l.fetchBundleAsset(q);q=await x(q,{responseType:"text"});return JSON.parse(q.data)}let e=function(){function q({base:p="",pattern:n,location:d=new URL(window.location.href)}){let b;b="string"===typeof d?a=>(new URL(a,new URL(d,k.location))).href:d instanceof URL?a=>(new URL(a,d)).href:d;this.pattern="string"===typeof n?
new RegExp(`^${n}`):n;this.getAssetUrl=b;p=p?p.endsWith("/")?p:p+"/":"";this.matcher=new RegExp(`^${p}(?:(.*)\/)?(.*)$`)}q.prototype.fetchMessageBundle=function(p,n){return f(this.getAssetUrl,this.matcher,p,n)};return q}();const l={};t.JSONLoader=e;t.createJSONLoader=function(q){return new e(q)};t.test=l;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/core/workers/loaderConfig":function(){define(["exports","../has","../urlUtils","../../assets"],function(t,k,m,z){t.DEFAULT_LOADER_URL=null;
t.DEFAULT_LOADER_URL=m.makeAbsolute(z.getAssetUrl("esri/core/workers/init.js"));var y=m.makeAbsolute(z.getAssetUrl("dojo/"));var x=[{name:"esri",location:"../esri"}];t.default=function(f){const h={async:f.async,isDebug:f.isDebug,locale:f.locale,baseUrl:f.baseUrl,has:{...f.has},map:{...f.map},packages:f.packages&&f.packages.concat()||[],paths:{...f.paths}};f.hasOwnProperty("async")||(h.async=!0);f.hasOwnProperty("isDebug")||(h.isDebug=!1);f.baseUrl||(h.baseUrl=y);null==x?void 0:x.forEach(e=>{a:{var l=
h.packages;for(const q of l)if(q.name===e.name)break a;l.push(e)}});return h};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/core/workers/WorkerFallback":function(){define(["require","../../chunks/_rollupPluginBabelHelpers","../global","./utils","./RemoteClient"],function(t,k,m,z,y){function x(q){if(q&&q.__esModule)return q;var p=Object.create(null);q&&Object.keys(q).forEach(function(n){if("default"!==n){var d=Object.getOwnPropertyDescriptor(q,n);Object.defineProperty(p,n,d.get?d:{enumerable:!0,
get:function(){return q[n]}})}});p["default"]=q;return Object.freeze(p)}let f=function(){const q=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(p=>{this[p]=(...n)=>q[p](...n)})};const h=m.MutationObserver||m.WebKitMutationObserver,e=function(){let q;if(m.process&&m.process.nextTick)q=p=>{m.process.nextTick(p)};else if(m.Promise)q=p=>{m.Promise.resolve().then(p)};else if(h){const p=[],n=document.createElement("div");(new h(()=>{for(;0<p.length;)p.shift()()})).observe(n,
{attributes:!0});q=d=>{p.push(d);n.setAttribute("queueStatus","1")}}return q}(),l=(()=>{const q=m.MessageEvent;try{new q("message",{data:null})}catch{return(p,n={})=>{const {data:d,bubbles:b=!1,cancelable:a=!1}=n;n=document.createEvent("Event");n.initEvent(p,b,a);n.data=d;return n}}return(p,n)=>new q(p,n)})();return function(){function q(){this._dispatcher=new f;this._workerPostMessage({type:z.MessageType.HANDSHAKE})}var p=q.prototype;p.terminate=function(){};p.postMessage=function(n){e(()=>{this._workerMessageHandler(l("message",
{data:n}))})};p.dispatchEvent=function(n){return this._dispatcher.dispatchEvent(n)};p.addEventListener=function(n,d,b){this._dispatcher.addEventListener(n,d,b)};p.removeEventListener=function(n,d,b){this._dispatcher.removeEventListener(n,d,b)};p._workerPostMessage=function(n){e(()=>{this.dispatchEvent(l("message",{data:n}))})};p._workerMessageHandler=async function(n){if((n=z.receiveMessage(n))&&n.type===z.MessageType.OPEN){const {modulePath:d,jobId:b}=n;(n=await y.loadWorker(d))||(n=await new Promise(function(a,
c){t([d],function(g){a(x(g))},c)}));n=y.connect(n);this._workerPostMessage({type:z.MessageType.OPENED,jobId:b,data:n})}};k._createClass(q,[{key:"onmessage",get:function(){return this._onmessageHandler},set:function(n){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler);(this._onmessageHandler=n)&&this.addEventListener("message",n)}},{key:"onmessageerror",get:function(){return this._onmessageerrorHandler},set:function(n){this._onmessageerrorHandler&&this.removeEventListener("messageerror",
this._onmessageerrorHandler);(this._onmessageerrorHandler=n)&&this.addEventListener("messageerror",n)}},{key:"onerror",get:function(){return this._onerrorHandler},set:function(n){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler);(this._onerrorHandler=n)&&this.addEventListener("error",n)}}]);return q}()})},"esri/rest/query/operations/query":function(){define("exports ../../../core/maybe ../../../core/urlUtils ../../../geometry/support/jsonUtils ../../../request ../../../geometry/support/normalizeUtils ./queryZScale ../../../tasks/operations/urlUtils ./pbfQueryUtils".split(" "),
function(t,k,m,z,y,x,f,h,e){function l(n,d){const b=n.geometry;n=n.toJSON();k.isSome(b)&&(n.geometry=JSON.stringify(b),n.geometryType=z.getJsonType(b),n.inSR=b.spatialReference.wkid||JSON.stringify(b.spatialReference));n.groupByFieldsForStatistics&&(n.groupByFieldsForStatistics=n.groupByFieldsForStatistics.join(","));n.objectIds&&(n.objectIds=n.objectIds.join(","));n.orderByFields&&(n.orderByFields=n.orderByFields.join(","));!n.outFields||!n.returnDistinctValues&&(null!=d&&d.returnCountOnly||null!=
d&&d.returnExtentOnly||null!=d&&d.returnIdsOnly)?delete n.outFields:-1!==n.outFields.indexOf("*")?n.outFields="*":n.outFields=n.outFields.join(",");n.outSR?n.outSR=n.outSR.wkid||JSON.stringify(n.outSR):b&&(n.returnGeometry||n.returnCentroid)&&(n.outSR=n.inSR);n.returnGeometry&&delete n.returnGeometry;n.outStatistics&&(n.outStatistics=JSON.stringify(n.outStatistics));n.pixelSize&&(n.pixelSize=JSON.stringify(n.pixelSize));n.quantizationParameters&&(n.quantizationParameters=JSON.stringify(n.quantizationParameters));
n.parameterValues&&(n.parameterValues=JSON.stringify(n.parameterValues));n.rangeValues&&(n.rangeValues=JSON.stringify(n.rangeValues));n.dynamicDataSource&&(n.layer=JSON.stringify({source:n.dynamicDataSource}),delete n.dynamicDataSource);if(n.timeExtent){const {start:a,end:c}=n.timeExtent;if(null!=a||null!=c)n.time=a===c?a:`${null==a?"null":a},${null==c?"null":c}`;delete n.timeExtent}return n}function q(n,d,b){return p(n,d,"pbf",b)}function p(n,d,b,a={},c={}){const g="string"===typeof n?m.urlToObject(n):
n;n=d.geometry?[d.geometry]:[];a.responseType="pbf"===b?"array-buffer":"json";return x.normalizeCentralMeridian(n,null,a).then(r=>{r=r&&r[0];k.isSome(r)&&(d=d.clone(),d.geometry=r);r=h.mapParameters({...g.query,f:b,...c,...l(d,c)});return y(m.join(g.path,"query"),{...a,query:{...r,...a.query}})})}t.executeQuery=async function(n,d,b,a){n=k.isSome(d.timeExtent)&&d.timeExtent.isEmpty?{data:{features:[]}}:await p(n,d,"json",a);f.applyFeatureSetZUnitScaling(d,b,n.data);return n};t.executeQueryForCount=
function(n,d,b){return k.isSome(d.timeExtent)&&d.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):p(n,d,"json",b,{returnIdsOnly:!0,returnCountOnly:!0})};t.executeQueryForExtent=function(n,d,b){return k.isSome(d.timeExtent)&&d.timeExtent.isEmpty?Promise.resolve({data:{count:0,extent:null}}):p(n,d,"json",b,{returnExtentOnly:!0,returnCountOnly:!0}).then(a=>{const c=a.data;if(c.hasOwnProperty("extent"))return a;if(c.features)throw Error("Layer does not support extent calculation.");if(c.hasOwnProperty("count"))throw Error("Layer does not support extent calculation.");
return a})};t.executeQueryForIds=function(n,d,b){return k.isSome(d.timeExtent)&&d.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):p(n,d,"json",b,{returnIdsOnly:!0})};t.executeQueryPBF=async function(n,d,b,a){if(k.isSome(d.timeExtent)&&d.timeExtent.isEmpty)return Promise.resolve({data:b.createFeatureResult()});n=await q(n,d,a);n.data=e.parsePBFFeatureQuery(n.data,b);return n};t.executeQueryPBFBuffer=q;t.queryToQueryStringParameters=l;t.runQuery=p;Object.defineProperty(t,"__esModule",{value:!0})})},
"esri/rest/query/operations/queryZScale":function(){define(["exports","./zscale"],function(t,k){t.applyFeatureSetZUnitScaling=function(m,z,y){if(y&&y.features&&y.hasZ&&(m=k.getGeometryZScaler(y.geometryType,z,m.outSpatialReference)))for(const x of y.features)m(x.geometry)};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/rest/query/operations/zscale":function(){define(["exports","../../../core/maybe","../../../geometry/support/spatialReferenceUtils","../../../core/unitUtils"],function(t,
k,m,z){function y(f,h,e){if(null==f.hasM||f.hasZ)for(const l of h)for(const q of l)2<q.length&&(q[2]*=e)}function x(f,h,e){if(f)for(const q of f){f=q.geometry;var l=e;if(f&&f.spatialReference&&!m.equals(f.spatialReference,h)&&(l=z.getMetersPerVerticalUnitForSR(f.spatialReference)/l,1!==l))if("x"in f)null!=f.z&&(f.z*=l);else if("rings"in f)y(f,f.rings,l);else if("paths"in f)y(f,f.paths,l);else if("points"in f&&(null==f.hasM||f.hasZ))for(const p of f.points)2<p.length&&(p[2]*=l)}}t.getGeometryZScaler=
function(f,h,e){if(k.isNone(h)||k.isNone(e)||e.vcsWkid||m.equals(h,e))return null;h=z.getMetersPerVerticalUnitForSR(h);e=z.getMetersPerVerticalUnitForSR(e);const l=h/e;if(1===l)return null;switch(f){case "point":case "esriGeometryPoint":return q=>{q&&null!=q.z&&(q.z*=l)};case "polyline":case "esriGeometryPolyline":return q=>{if(q)for(const p of q.paths)for(const n of p)2<n.length&&(n[2]*=l)};case "polygon":case "esriGeometryPolygon":return q=>{if(q)for(const p of q.rings)for(const n of p)2<n.length&&
(n[2]*=l)};case "multipoint":case "esriGeometryMultipoint":return q=>{if(q)for(const p of q.points)2<p.length&&(p[2]*=l)};default:return null}};t.unapplyEditsZUnitScaling=function(f,h,e){if((f||h)&&e){var l=z.getMetersPerVerticalUnitForSR(e);x(f,e,l);x(h,e,l)}};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/tasks/operations/urlUtils":function(){define(["exports"],function(t){function k(m){const z={};for(const y in m){if("declaredClass"===y)continue;const x=m[y];if(null!=x&&"function"!==
typeof x)if(Array.isArray(x)){z[y]=[];for(let f=0;f<x.length;f++)z[y][f]=k(x[f])}else"object"===typeof x?x.toJSON&&(z[y]=JSON.stringify(x)):z[y]=x}return z}t.mapParameters=k;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/rest/query/operations/pbfQueryUtils":function(){define(["exports","./pbfFeatureServiceParser"],function(t,k){t.parsePBFFeatureQuery=function(m,z){var y=k.parseFeatureQuery(m,z);m=y.queryResult.featureResult;z=y.queryResult.queryGeometry;y=y.queryResult.queryGeometryType;
if(m&&m.features&&m.features.length&&m.objectIdFieldName){const x=m.objectIdFieldName;for(const f of m.features)f.attributes&&(f.objectId=f.attributes[x])}m&&(m.queryGeometry=z,m.queryGeometryType=y);return m};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/rest/query/operations/pbfFeatureServiceParser":function(){define("exports ../../../core/maybe ../../../core/Logger ../../../core/Error ../../../layers/graphics/OptimizedGeometry ./pbfOptimizedFeatureSet ../../../core/pbf".split(" "),
function(t,k,m,z,y,x,f){function h(E){return E>=B.length?null:B[E]}function e(E,G,H){for(H=G.createPointGeometry(H);E.next();)switch(E.tag()){case 3:{var K=E.getUInt32();K=E.pos()+K;let J=0;for(;E.pos()<K;)G.addCoordinatePoint(H,E.getSInt64(),J++);break}default:E.skip()}return H}function l(E,G,H){const K=G.createGeometry(H);for(H=2+(H.hasZ?1:0)+(H.hasM?1:0);E.next();)switch(E.tag()){case 2:var J=E.getUInt32();J=E.pos()+J;for(var F=0;E.pos()<J;)G.addLength(K,E.getUInt32(),F++);break;case 3:J=E.getUInt32();
J=E.pos()+J;F=0;for(G.allocateCoordinates(K);E.pos()<J;)G.addCoordinate(K,E.getSInt64(),F),F++,F===H&&(F=0);break;default:E.skip()}return K}function q(E){const G=new y;let H="esriGeometryPoint";for(;E.next();)switch(E.tag()){case 2:var K=E.getUInt32();for(K=E.pos()+K;E.pos()<K;)G.lengths.push(E.getUInt32());break;case 3:K=E.getUInt32();for(K=E.pos()+K;E.pos()<K;)G.coords.push(E.getSInt64());break;case 1:H=x.OPTIMIZED_GEOMETRY_TYPES[E.getEnum()];break;default:E.skip()}return{queryGeometry:G,queryGeometryType:H}}
function p(E){for(;E.next();)switch(E.tag()){case 1:return E.getString();case 2:return E.getFloat();case 3:return E.getDouble();case 4:return E.getSInt32();case 5:return E.getUInt32();case 6:return E.getInt64();case 7:return E.getUInt64();case 8:return E.getSInt64();case 9:return E.getBool();default:return E.skip(),null}return null}function n(E){const G={type:h(0)};for(;E.next();)switch(E.tag()){case 1:G.name=E.getString();break;case 2:G.type=h(E.getEnum());break;case 3:G.alias=E.getString();break;
case 4:var H=E.getEnum();H=H>=C.length?null:C[H];G.sqlType=H;break;case 5:try{G.domain=JSON.parse(E.getString())}catch(K){D.error(new z("query:parsing-pbf","Failed to parse domain",{error:K})),G.domain=null}break;case 6:G.defaultValue=E.getString();break;default:E.skip()}return G}function d(E){const G={};for(;E.next();)switch(E.tag()){case 1:G.name=E.getString();break;case 2:G.isSystemMaintained=E.getBool();break;default:E.skip()}return G}function b(E,G,H,K){const J=G.createFeature(H);let F=0;for(;E.next();)switch(E.tag()){case 1:{const N=
K[F++].name;J.attributes[N]=E.processMessage(p);break}case 2:J.geometry=E.processMessageWithArgs(l,G,H);break;case 4:J.centroid=E.processMessageWithArgs(e,G,H);break;default:E.skip()}return J}function a(E){const G=[1,1,1,1];for(;E.next();)switch(E.tag()){case 1:G[0]=E.getDouble();break;case 2:G[1]=E.getDouble();break;case 4:G[2]=E.getDouble();break;case 3:G[3]=E.getDouble();break;default:E.skip()}return G}function c(E){const G=[0,0,0,0];for(;E.next();)switch(E.tag()){case 1:G[0]=E.getDouble();break;
case 2:G[1]=E.getDouble();break;case 4:G[2]=E.getDouble();break;case 3:G[3]=E.getDouble();break;default:E.skip()}return G}function g(E){const G={originPosition:0>=A.length?null:A[0]};for(;E.next();)switch(E.tag()){case 1:var H=E.getEnum();G.originPosition=H>=A.length?null:A[H];break;case 2:G.scale=E.processMessage(a);break;case 3:G.translate=E.processMessage(c);break;default:E.skip()}return G}function r(E){const G={};for(;E.next();)switch(E.tag()){case 1:G.shapeAreaFieldName=E.getString();break;case 2:G.shapeLengthFieldName=
E.getString();break;case 3:G.units=E.getString();break;default:E.skip()}return G}function u(E,G){for(G=G.createSpatialReference();E.next();)switch(E.tag()){case 1:G.wkid=E.getUInt32();break;case 5:G.wkt=E.getString();break;case 2:G.latestWkid=E.getUInt32();break;case 3:G.vcsWkid=E.getUInt32();break;case 4:G.latestVcsWkid=E.getUInt32();break;default:E.skip()}return G}function w(E,G){const H=G.createFeatureResult();H.geometryType=0>=G.geometryTypes.length?null:G.geometryTypes[0];let K=!1;for(;E.next();)switch(E.tag()){case 1:H.objectIdFieldName=
E.getString();break;case 3:H.globalIdFieldName=E.getString();break;case 4:H.geohashFieldName=E.getString();break;case 5:H.geometryProperties=E.processMessage(r);break;case 7:var J=E.getEnum();H.geometryType=J>=G.geometryTypes.length?null:G.geometryTypes[J];break;case 8:H.spatialReference=E.processMessageWithArgs(u,G);break;case 10:H.hasZ=E.getBool();break;case 11:H.hasM=E.getBool();break;case 12:H.transform=E.processMessage(g);break;case 9:J=E.getBool();H.exceededTransferLimit=J;break;case 13:G.addField(H,
E.processMessage(n));break;case 15:K||(G.prepareFeatures(H),K=!0);G.addFeature(H,E.processMessageWithArgs(b,G,H,H.fields));break;case 2:H.uniqueIdField=E.processMessage(d);break;default:E.skip()}G.finishFeatureResult(H);return H}function v(E,G){const H={};let K=null;for(;E.next();)switch(E.tag()){case 4:K=E.processMessageWithArgs(q);break;case 1:H.featureResult=E.processMessageWithArgs(w,G);break;default:E.skip()}k.isSome(K)&&H.featureResult&&G.addQueryGeometry(H,K);return H}const D=m.getLogger("esri.tasks.operations.pbfFeatureServiceParser"),
B="esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeString esriFieldTypeDate esriFieldTypeOID esriFieldTypeGeometry esriFieldTypeBlob esriFieldTypeRaster esriFieldTypeGUID esriFieldTypeGlobalID esriFieldTypeXML".split(" "),C="sqlTypeBigInt sqlTypeBinary sqlTypeBit sqlTypeChar sqlTypeDate sqlTypeDecimal sqlTypeDouble sqlTypeFloat sqlTypeGeometry sqlTypeGUID sqlTypeInteger sqlTypeLongNVarchar sqlTypeLongVarbinary sqlTypeLongVarchar sqlTypeNChar sqlTypeNVarchar sqlTypeOther sqlTypeReal sqlTypeSmallInt sqlTypeSqlXml sqlTypeTime sqlTypeTimestamp sqlTypeTimestamp2 sqlTypeTinyInt sqlTypeVarbinary sqlTypeVarchar".split(" "),
A=["upperLeft","lowerLeft"];t.parseFeatureQuery=function(E,G){try{const H=new f(new Uint8Array(E),new DataView(E));for(E={};H.next();)switch(H.tag()){case 2:E.queryResult=H.processMessageWithArgs(v,G);break;default:H.skip()}return E}catch(H){throw new z("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:H});}};t.parseFieldType=h;t.parseTransform=g;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/rest/query/operations/pbfOptimizedFeatureSet":function(){define("exports ../../../geometry/support/spatialReferenceUtils ../../../core/unitUtils ../../../layers/graphics/OptimizedFeature ../../../layers/graphics/OptimizedFeatureSet ../../../layers/graphics/OptimizedGeometry".split(" "),
function(t,k,m,z,y,x){const f=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];let h=function(){function e(q){this.options=q;this.geometryTypes=f;this._vertexDimension=this._coordinatePtr=0}var l=e.prototype;l.createFeatureResult=function(){return new y};l.prepareFeatures=function(q){this._vertexDimension=2;q.hasZ&&this._vertexDimension++;q.hasM&&this._vertexDimension++};l.finishFeatureResult=function(q){if(q&&q.features&&q.hasZ&&this.options.sourceSpatialReference&&
q.spatialReference&&!k.equals(q.spatialReference,this.options.sourceSpatialReference)&&!q.spatialReference.vcsWkid){var p=m.getMetersPerVerticalUnitForSR(this.options.sourceSpatialReference),n=m.getMetersPerVerticalUnitForSR(q.spatialReference);p/=n;if(1!==p)for(const d of q.features)if(d.geometry&&d.geometry.coords)for(q=d.geometry.coords,n=2;n<q.length;n+=3)q[n]*=p}};l.addFeature=function(q,p){q.features.push(p)};l.createFeature=function(){return new z};l.createSpatialReference=function(){return{wkid:0}};
l.createGeometry=function(){return new x};l.addField=function(q,p){q.fields.push(p)};l.allocateCoordinates=function(q){q.coords.length=q.lengths.reduce((p,n)=>p+n,0)*this._vertexDimension;this._coordinatePtr=0};l.addCoordinate=function(q,p){q.coords[this._coordinatePtr++]=p};l.addCoordinatePoint=function(q,p){q.coords.push(p)};l.addLength=function(q,p){q.lengths.push(p)};l.addQueryGeometry=function(q,p){q.queryGeometry=p.queryGeometry;q.queryGeometryType=p.queryGeometryType};l.createPointGeometry=
function(){return new x};return e}();t.OPTIMIZED_GEOMETRY_TYPES=f;t.OptimizedFeatureSetParserContext=h;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/layers/ogc/ogcFeatureUtils":function(){define("exports ../../core/maybe ../../core/Logger ../../core/Error ../../geometry/support/spatialReferenceUtils ../../geometry/SpatialReference ../../geometry/support/webMercatorUtils ../../geometry ../../request ../support/fieldType ../graphics/OptimizedFeatureSet ../graphics/featureConversionUtils ../support/FieldsIndex ../../tasks/support/FeatureSet ../graphics/sources/geojson/geojson ../graphics/sources/support/clientSideDefaults".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d,b,a){function c(A){A=/^http:\/\/www\.opengis\.net\/def\/crs\/(.+)\/(.+)\/(.+)$/i.exec(A);if(!A)return null;const [,E,,G]=A;switch(E.toLowerCase()){case "ogc":switch(G.toLowerCase()){case "crs27":return x.GCS_NAD_1927;case "crs83":return new x({wkid:4269});case "crs84":case "crs84h":return x.WGS84;default:return null}case "esri":case "epsg":return A=Number.parseInt(G,10),Number.isNaN(A)?null:900913===A?x.WebMercator:new x({wkid:A});default:return null}}async function g(A,
E,G){A=await r(A,E,G);return p.convertToFeatureSet(A)}async function r(A,E,G){const {capabilities:{query:{maxRecordCount:H}},collectionId:K,layerDefinition:J,spatialReference:F,supportedCrs:N,url:L}=A;var M=`${L}/collections/${K}/items`;const {geometry:S,num:Q,start:U,timeExtent:W,where:fa}=E;if(E.objectIds)throw new z("ogc-feature-layer:query-by-objectids-not-supported","Queries with objectids are not supported");A=x.fromJSON(F);E=k.unwrapOr(E.outSpatialReference,A);A=E.isWGS84?null:u(E,N);var Z=
B(S,N),T=v(W);const ba=D(fa);({data:Z}=await e(M,{...G,query:{...Z,crs:A,datetime:T,query:ba,limit:null!=Q?Q:null!=U&&void 0!==U?10:H,startindex:U,f:"json"}}));G=!1;Z.links&&(G=!!Z.links.find(Y=>"next"===Y.rel));!G&&Number.isInteger(Z.numberMatched)&&Number.isInteger(Z.numberReturned)&&(G=Z.numberReturned<Z.numberMatched);const {fields:ha,globalIdField:sa,hasM:ua,hasZ:O,objectIdField:V}=J;M=J.geometryType;Z=b.createOptimizedFeatures(Z,{geometryType:M,hasZ:O,objectIdFieldName:V});if(!A&&E.isWebMercator)for(var ja of Z)ja.geometry&&
(T=p.convertToGeometry(ja.geometry,M,O,!1),T.spatialReference=x.WGS84,ja.geometry=p.convertFromGeometry(f.project(T,E)));for(var R of Z)R.objectId=R.attributes[V];ja=A||!A&&E.isWebMercator?E.toJSON():y.WGS84;R=new q;R.exceededTransferLimit=G;R.features=Z;R.fields=ha;R.geometryType=M;R.globalIdFieldName=sa;R.hasM=ua;R.hasZ=O;R.objectIdFieldName=V;R.spatialReference=ja;return R}function u(A,E){return E.find(G=>{G=c(G);return y.equals(G,A)})}function w(A){const {xmin:E,ymin:G,xmax:H,ymax:K}=A;return`${E},${G},${H},${K}`}
function v(A){if(k.isNone(A))return null;const {start:E,end:G}=A;return`${E?E.toISOString():".."}/${G?G.toISOString():".."}`}function D(A){return k.isNone(A)||!A||"1\x3d1"===A?null:A}function B(A,E){if(!k.isSome(A)||"extent"!==A.type)return null;const {spatialReference:G}=A;return!G||G.isWGS84?{bbox:w(A)}:(E=u(G,E))?{bbox:w(A),"bbox-crs":E}:G.isWebMercator?{bbox:w(f.project(A,x.WGS84))}:null}const C=m.getLogger("esri.layers.graphics.sources.ogcfeature");t.getCollectionDefinition=async function(A,
E,G,H,K=5){({data:A}=await e(`${A}/collections/${E}/items`,{signal:H,query:{limit:K,f:"json"}}));await b.validateGeoJSON(A);const J=b.inferLayerProperties(A,{geometryType:G.geometryType});A=G.fields||J.fields||[];E=null!=G.hasZ?G.hasZ:J.hasZ;H=J.geometryType;const F=G.objectIdField||J.objectIdFieldName||"OBJECTID";G=G.timeInfo;if(K=A.find(L=>L.name===F))K.type="esriFieldTypeOID",K.editable=!1,K.nullable=!1;else{if(!J.objectIdFieldType)throw new z("ogc-feature-layer:missing-feature-id","Collection geojson require a feature id as a unique identifier");
A.unshift({name:F,alias:F,type:"esriFieldTypeOID",editable:!1,nullable:!1})}F!==J.objectIdFieldName&&(K=A.find(L=>L.name===J.objectIdFieldName))&&(K.type="esriFieldTypeInteger");if(!H)throw new z("ogc-feature-layer:missing-property","geometryType not set and couldn't be inferred from the provided features");A===J.fields&&0<J.unknownFields.length&&C.warn({name:"ogc-feature-layer:unknown-field-types",message:"Some fields types couldn't be inferred from the features and were dropped",details:{unknownFields:J.unknownFields}});
for(var N of A){null==N.name&&(N.name=N.alias);null==N.alias&&(N.alias=N.name);"esriFieldTypeOID"!==N.type&&"esriFieldTypeGlobalID"!==N.type&&(N.editable=null==N.editable?!0:!!N.editable,N.nullable=null==N.nullable?!0:!!N.nullable);if(!N.name)throw new z("ogc-feature-layer:invalid-field-name","field name is missing",{field:N});if(-1===l.kebabDict.jsonValues.indexOf(N.type))throw new z("ogc-feature-layer:invalid-field-type",`invalid type for field "${N.name}"`,{field:N});}G&&(N=new n(A),G.startTimeField&&
((K=N.get(G.startTimeField))?(G.startTimeField=K.name,K.type="esriFieldTypeDate"):G.startTimeField=null),G.endTimeField&&((K=N.get(G.endTimeField))?(G.endTimeField=K.name,K.type="esriFieldTypeDate"):G.endTimeField=null),G.trackIdField&&((N=N.get(G.trackIdField))?G.trackIdField=N.name:(G.trackIdField=null,C.warn({name:"ogc-feature-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:G}}))),G.startTimeField||G.endTimeField||(C.warn({name:"ogc-feature-layer:invalid-timeInfo",
message:"startTimeField and endTimeField are missing",details:{timeInfo:G}}),G=null));return{drawingInfo:a.createDrawingInfo(H),geometryType:H,fields:A,hasZ:!!E,objectIdField:F,timeInfo:G}};t.getServerCollection=async function(A,E,G){({data:A}=await e(`${A}/collections/${E}`,{signal:G,query:{f:"json"}}));return A};t.getServerCollections=async function(A,E){({data:A}=await e(`${A}/collections`,{signal:E,query:{f:"json"}}));return A};t.getServerConformance=async function(A,E){({data:A}=await e(`${A}/conformance`,
{signal:E,query:{f:"json"}}));return A};t.getServerLandingPage=async function(A,E){({data:A}=await e(A,{signal:E,query:{f:"json"}}));return A};t.getSpatialReference=c;t.queryFeatureSet=async function(A,E,G){A=await g(A,E,G);return d.fromJSON(A)};t.queryFeatureSetJSON=g;t.queryOptimizedFeatureSet=r;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/tasks/support/FeatureSet":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/maybe ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../geometry/SpatialReference ../../geometry/support/jsonUtils ../../geometry ../../Graphic ../../layers/support/Field".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d,b,a,c,g,r,u){const w=new h.JSONMap({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});m=function(v){function D(C){C=v.call(this,C)||this;C.displayFieldName=null;C.exceededTransferLimit=!1;C.features=[];C.fields=null;C.geometryType=null;C.hasM=!1;C.hasZ=!1;C.queryGeometry=null;C.spatialReference=null;return C}t._inheritsLoose(D,v);var B=
D.prototype;B.readFeatures=function(C,A){A=a.fromJSON(A.spatialReference);const E=[];for(let H=0;H<C.length;H++){var G=C[H];const K=r.fromJSON(G);G=G.geometry&&G.geometry.spatialReference;z.isSome(K.geometry)&&!G&&(K.geometry.spatialReference=A);E.push(K)}return E};B.writeGeometryType=function(C,A,E,G){if(C)w.write(C,A,E,G);else if({features:C}=this,C)for(const H of C)if(H&&z.isSome(H.geometry)){w.write(H.geometry.type,A,E,G);break}};B.readQueryGeometry=function(C,A){if(!C)return null;const E=!!C.spatialReference;
C=c.fromJSON(C);!E&&A.spatialReference&&(C.spatialReference=a.fromJSON(A.spatialReference));return C};B.writeSpatialReference=function(C,A){if(C)A.spatialReference=C.toJSON();else if({features:C}=this,C)for(const E of C)if(E&&z.isSome(E.geometry)&&E.geometry.spatialReference){A.spatialReference=E.geometry.spatialReference.toJSON();break}};B.toJSON=function(C){const A=this.write(null);if(A.features&&Array.isArray(C)&&0<C.length)for(let E=0;E<A.features.length;E++){const G=A.features[E];if(G.geometry){const H=
C&&C[E];G.geometry=H&&H.toJSON()||G.geometry}}return A};B.quantize=function(C){const {scale:[A,E],translate:[G,H]}=C,K=this.features,J=this._getQuantizationFunction(this.geometryType,F=>Math.round((F-G)/A),F=>Math.round((H-F)/E));for(let F=0,N=K.length;F<N;F++)J(z.unwrap(K[F].geometry))||(K.splice(F,1),F--,N--);this.transform=C;return this};B.unquantize=function(){const {geometryType:C,features:A,transform:E}=this;if(!E)return this;const {translate:[G,H],scale:[K,J]}=E,F=this._getHydrationFunction(C,
N=>N*K+G,N=>H-N*J);for(const {geometry:N}of A)z.isSome(N)&&F(N);this.transform=null;return this};B._quantizePoints=function(C,A,E){let G,H;const K=[];for(let F=0,N=C.length;F<N;F++){var J=C[F];if(0<F){const L=A(J[0]);J=E(J[1]);if(L!==G||J!==H)K.push([L-G,J-H]),G=L,H=J}else G=A(J[0]),H=E(J[1]),K.push([G,H])}return 0<K.length?K:null};B._getQuantizationFunction=function(C,A,E){return"point"===C?G=>{G.x=A(G.x);G.y=E(G.y);return G}:"polyline"===C||"polygon"===C?G=>{const H=c.isPolygon(G)?G.rings:G.paths,
K=[];for(let J=0,F=H.length;J<F;J++){const N=this._quantizePoints(H[J],A,E);N&&K.push(N)}return 0<K.length?(c.isPolygon(G)?G.rings=K:G.paths=K,G):null}:"multipoint"===C?G=>{const H=this._quantizePoints(G.points,A,E);return 0<H.length?(G.points=H,G):null}:"extent"===C?G=>G:null};B._getHydrationFunction=function(C,A,E){if("point"===C)return G=>{G.x=A(G.x);G.y=E(G.y)};if("polyline"===C||"polygon"===C)return G=>{G=c.isPolygon(G)?G.rings:G.paths;let H,K;for(let J=0,F=G.length;J<F;J++){const N=G[J];for(let L=
0,M=N.length;L<M;L++){const S=N[L];0<L?(H+=S[0],K+=S[1]):(H=S[0],K=S[1]);S[0]=A(H);S[1]=E(K)}}};if("extent"===C)return G=>{G.xmin=A(G.xmin);G.ymin=E(G.ymin);G.xmax=A(G.xmax);G.ymax=E(G.ymax)};if("multipoint"===C)return G=>{G=G.points;let H,K;for(let J=0,F=G.length;J<F;J++){const N=G[J];0<J?(H+=N[0],K+=N[1]):(H=N[0],K=N[1]);N[0]=A(H);N[1]=E(K)}}};return D}(b.JSONSupport);k.__decorate([f.property({type:String,json:{write:!0}})],m.prototype,"displayFieldName",void 0);k.__decorate([f.property({type:Boolean,
json:{write:{overridePolicy(v){return{enabled:v}}}}})],m.prototype,"exceededTransferLimit",void 0);k.__decorate([f.property({type:[r],json:{write:!0}})],m.prototype,"features",void 0);k.__decorate([e.reader("features")],m.prototype,"readFeatures",null);k.__decorate([f.property({type:[u],json:{write:!0}})],m.prototype,"fields",void 0);k.__decorate([f.property({type:"point multipoint polyline polygon extent mesh".split(" "),json:{read:{reader:w.read}}})],m.prototype,"geometryType",void 0);k.__decorate([q.writer("geometryType")],
m.prototype,"writeGeometryType",null);k.__decorate([f.property({type:Boolean,json:{write:{overridePolicy(v){return{enabled:v}}}}})],m.prototype,"hasM",void 0);k.__decorate([f.property({type:Boolean,json:{write:{overridePolicy(v){return{enabled:v}}}}})],m.prototype,"hasZ",void 0);k.__decorate([f.property({types:g.geometryTypes,json:{write:!0}})],m.prototype,"queryGeometry",void 0);k.__decorate([e.reader("queryGeometry")],m.prototype,"readQueryGeometry",null);k.__decorate([f.property({type:a,json:{write:!0}})],
m.prototype,"spatialReference",void 0);k.__decorate([q.writer("spatialReference")],m.prototype,"writeSpatialReference",null);k.__decorate([f.property({json:{write:!0}})],m.prototype,"transform",void 0);m=k.__decorate([l.subclass("esri.tasks.support.FeatureSet")],m);m.prototype.toJSON.isDefaultToJSON=!0;(function(v){})(m||(m={}));return m})},"esri/Graphic":function(){define("./chunks/_rollupPluginBabelHelpers ./chunks/tslib.es6 ./core/has ./core/lang ./core/maybe ./core/Logger ./core/accessorSupport/ensureType ./core/accessorSupport/decorators/property ./core/jsonMap ./core/accessorSupport/decorators/subclass ./core/urlUtils ./core/uuid ./portal/support/resourceExtension ./core/JSONSupport ./geometry/support/jsonUtils ./geometry ./PopupTemplate ./symbols ./core/uid".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d,b,a,c,g,r){var u;m=u=function(w){function v(...B){B=w.call(this,...B)||this;B.isAggregate=!1;B.layer=null;B.popupTemplate=null;B.sourceLayer=null;Object.defineProperty(t._assertThisInitialized(B),"uid",{value:r.generateUID(),configurable:!0});return B}t._inheritsLoose(v,w);var D=v.prototype;D.normalizeCtorArgs=function(B,C,A,E){return B&&!B.declaredClass?B:{geometry:B,symbol:C,attributes:A,popupTemplate:E}};D.getEffectivePopupTemplate=function(B=!1){return this.popupTemplate?
this.popupTemplate:this.sourceLayer?"popupTemplate"in this.sourceLayer&&this.sourceLayer.popupTemplate?this.sourceLayer.popupTemplate:B&&"defaultPopupTemplate"in this.sourceLayer&&y.isSome(this.sourceLayer.defaultPopupTemplate)?this.sourceLayer.defaultPopupTemplate:null:null};D.getAttribute=function(B){return this.attributes&&this.attributes[B]};D.setAttribute=function(B,C){if(this.attributes){const A=this.getAttribute(B);this.attributes[B]=C;this._notifyLayer("attributes",A,C,B)}else this.attributes=
{[B]:C},this._notifyLayer("attributes",void 0,C,B)};D.getObjectId=function(){return this.sourceLayer?"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null:null};D.toJSON=function(){return{geometry:y.isSome(this.geometry)?this.geometry.toJSON():null,symbol:y.isSome(this.symbol)?this.symbol.toJSON():null,attributes:{...this.attributes},popupTemplate:this.popupTemplate&&this.popupTemplate.toJSON()}};D.clone=function(){return new u(this.cloneProperties())};
D.cloneProperties=function(){return{attributes:z.clone(this.attributes),geometry:z.clone(this.geometry),layer:this.layer,popupTemplate:this.popupTemplate&&this.popupTemplate.clone(),sourceLayer:this.sourceLayer,symbol:z.clone(this.symbol),visible:this.visible}};D._notifyLayer=function(B,C,A,E){this.layer&&"graphicChanged"in this.layer&&(C={graphic:this,property:B,oldValue:C,newValue:A},"attributes"===B&&(C.attributeName=E),this.layer.graphicChanged(C))};t._createClass(v,[{key:"attributes",set:function(B){const C=
this._get("attributes");C!==B&&(this._set("attributes",B),this._notifyLayer("attributes",C,B))}},{key:"geometry",set:function(B){const C=this._get("geometry");C!==B&&(this._set("geometry",B),this._notifyLayer("geometry",C,B))}},{key:"symbol",set:function(B){const C=this._get("symbol");C!==B&&(this._set("symbol",B),this._notifyLayer("symbol",C,B))}},{key:"visible",set:function(B){const C=this._get("visible");C!==B&&(this._set("visible",B),this._notifyLayer("visible",C,B))}}]);return v}(d.JSONSupport);
k.__decorate([h.property({value:null})],m.prototype,"attributes",null);k.__decorate([h.property({value:null,types:a.geometryTypes,json:{read:b.fromJSON}})],m.prototype,"geometry",null);k.__decorate([h.property({type:Boolean})],m.prototype,"isAggregate",void 0);k.__decorate([h.property()],m.prototype,"layer",void 0);k.__decorate([h.property({type:c})],m.prototype,"popupTemplate",void 0);k.__decorate([h.property()],m.prototype,"sourceLayer",void 0);k.__decorate([h.property({value:null,types:g.symbolTypes})],
m.prototype,"symbol",null);k.__decorate([h.property({type:Boolean,value:!0})],m.prototype,"visible",null);m=u=k.__decorate([l.subclass("esri.Graphic")],m);(m||(m={})).generateUID=r.generateUID;return m})},"esri/PopupTemplate":function(){define("./chunks/_rollupPluginBabelHelpers ./chunks/tslib.es6 ./core/has ./core/lang ./core/Logger ./core/accessorSupport/ensureType ./core/accessorSupport/decorators/property ./core/accessorSupport/decorators/cast ./core/jsonMap ./core/accessorSupport/decorators/reader ./core/accessorSupport/decorators/subclass ./core/accessorSupport/decorators/writer ./core/urlUtils ./core/uuid ./portal/support/resourceExtension ./core/promiseUtils ./core/JSONSupport ./core/Collection ./layers/support/fieldUtils ./popup/content/Content ./popup/content/AttachmentsContent ./popup/content/CustomContent ./popup/FieldInfo ./popup/content/FieldsContent ./popup/content/support/mediaInfoTypes ./popup/content/MediaContent ./popup/content/TextContent ./popup/content ./popup/ExpressionInfo ./popup/LayerOptions ./popup/RelatedRecordsInfo ./support/actions/ActionBase ./support/actions/ActionButton ./support/actions/ActionToggle".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d,b,a,c,g,r,u,w,v,D,B,C,A,E,G,H,K,J,F,N,L){var M;m=g.ofType({key:"type",defaultKeyValue:"button",base:F,typeMap:{button:N,toggle:L}});const S={base:u,key:"type",typeMap:{media:A,custom:v,text:E,attachments:w,fields:B}},Q=y.getLogger("esri.PopupTemplate"),U=["attachments","fields","media","text"];y=M=function(W){function fa(){var T=W.apply(this,arguments)||this;T.actions=null;T.content="";T.expressionInfos=null;T.fieldInfos=null;T.layerOptions=null;T.lastEditInfoEnabled=
!0;T.outFields=null;T.overwriteActions=!1;T.returnGeometry=!1;T.title="";T.relatedRecordsInfo=null;return T}t._inheritsLoose(fa,W);var Z=fa.prototype;Z.castContent=function(T){if(Array.isArray(T))return T.map(ba=>x.ensureOneOfType(S,ba));if("string"===typeof T||"function"===typeof T||T instanceof HTMLElement||a.isPromiseLike(T))return T;Q.error("content error","unsupported content value",{value:T});return null};Z.readContent=function(T,ba){({popupElements:T}=ba);return Array.isArray(T)&&0<T.length?
this._readPopupInfoElements(ba):this._readPopupInfo(ba)};Z.writeContent=function(T,ba,ha,sa){"string"===typeof T?ba.description=T:Array.isArray(T)&&(ba.popupElements=T.filter(ua=>-1!==U.indexOf(ua.type)).map(ua=>ua&&ua.toJSON(sa)),ba.popupElements.forEach(ua=>{"attachments"===ua.type?this._writeAttachmentContent(ba):"media"===ua.type?this._writeMediaContent(ua,ba):"text"===ua.type&&this._writeTextContent(ua,ba)}))};Z.writeFieldInfos=function(T,ba,ha,sa){({content:ha}=this);ha=Array.isArray(ha)?ha:
null;if(T){const ua=ha?ha.filter(V=>"fields"===V.type):[],O=ua.length&&ua.every(V=>{var ja;return null==(ja=V.fieldInfos)?void 0:ja.length});ba.fieldInfos=T.filter(Boolean).map(V=>{V=V.toJSON(sa);O&&(V.visible=!1);return V})}if(ha)for(const ua of ha)"fields"===ua.type&&this._writeFieldsContent(ua,ba)};Z.writeLayerOptions=function(T,ba,ha,sa){ba[ha]=!T||null===T.showNoDataRecords&&null===T.returnTopmostRaster?null:T.toJSON(sa)};Z.writeTitle=function(T,ba){ba.title=T||""};Z.clone=function(){var {actions:T}=
this;T=T?z.clone(T.toArray()):[];return new M({actions:T,content:Array.isArray(this.content)?z.clone(this.content):this.content,expressionInfos:Array.isArray(this.expressionInfos)?z.clone(this.expressionInfos):null,fieldInfos:Array.isArray(this.fieldInfos)?z.clone(this.fieldInfos):null,layerOptions:this.layerOptions?z.clone(this.layerOptions):null,lastEditInfoEnabled:this.lastEditInfoEnabled,outFields:Array.isArray(this.outFields)?z.clone(this.outFields):null,overwriteActions:this.overwriteActions,
returnGeometry:this.returnGeometry,title:this.title,relatedRecordsInfo:this.relatedRecordsInfo?z.clone(this.relatedRecordsInfo):null})};Z.collectRequiredFields=async function(T,ba){await this._collectExpressionInfoFields(T,ba,this.expressionInfos);r.collectFields(T,ba,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])};Z.getRequiredFields=async function(T){const ba=new Set;await this.collectRequiredFields(ba,
T);return[...ba].sort()};Z._writeFieldsContent=function(T,ba){Array.isArray(T.fieldInfos)&&T.fieldInfos.length&&(T=z.clone(T.fieldInfos),Array.isArray(ba.fieldInfos)?T.forEach(ha=>{const sa=ba.fieldInfos.find(ua=>ua.fieldName.toLowerCase()===ha.fieldName.toLowerCase());sa?sa.visible=!0:ba.fieldInfos.push(ha)}):ba.fieldInfos=T)};Z._writeAttachmentContent=function(T){T.showAttachments||(T.showAttachments=!0)};Z._writeTextContent=function(T,ba){!ba.description&&T.text&&(ba.description=T.text)};Z._writeMediaContent=
function(T,ba){Array.isArray(T.mediaInfos)&&T.mediaInfos.length&&(T=z.clone(T.mediaInfos),Array.isArray(ba.mediaInfos)?ba.mediaInfos=[...ba.mediaInfos,...T]:ba.mediaInfos=T)};Z._readPopupInfoElements=function({description:T,mediaInfos:ba,popupElements:ha}){var sa=!1,ua=!1;return ha.map(O=>{if("media"===O.type)return O.mediaInfos||!ba||ua||(O.mediaInfos=ba,ua=!0),A.fromJSON(O);if("text"===O.type)return O.text||!T||sa||(O.text=T,sa=!0),E.fromJSON(O);if("attachments"===O.type)return w.fromJSON(O);if("fields"===
O.type)return B.fromJSON(O)}).filter(Boolean)};Z._readPopupInfo=function({description:T,mediaInfos:ba,showAttachments:ha}){const sa=[];T?sa.push(new E({text:T})):sa.push(new B);Array.isArray(ba)&&ba.length&&sa.push(A.fromJSON({mediaInfos:ba}));ha&&sa.push(w.fromJSON({displayType:"list"}));return sa.length?sa:T};Z._getContentElementFields=function(T){if(!T||"attachments"===T.type)return[];if("custom"===T.type)return T.outFields||[];if("fields"===T.type)return this._getFieldInfoFields(T.fieldInfos||
this.fieldInfos);if("media"===T.type)return(T.mediaInfos||[]).reduce((ba,ha)=>[...ba,...this._getMediaInfoFields(ha)],[]);if("text"===T.type)return this._extractFieldNames(T.text)};Z._getMediaInfoFields=function(T){const {caption:ba,title:ha,value:sa}=T,{fields:ua=[],normalizeField:O,tooltipField:V,sourceURL:ja,linkURL:R}=sa||{};T=[...this._extractFieldNames(ha),...this._extractFieldNames(ba),...this._extractFieldNames(ja),...this._extractFieldNames(R),...ua];O&&T.push(O);V&&T.push(V);return T};Z._getContentFields=
function(T){return"string"===typeof T?this._extractFieldNames(T):Array.isArray(T)?T.reduce((ba,ha)=>[...ba,...this._getContentElementFields(ha)],[]):[]};Z._collectExpressionInfoFields=async function(T,ba,ha){ha&&await Promise.all(ha.map(sa=>r.collectArcadeFieldNames(T,ba,sa.expression)))};Z._getFieldInfoFields=function(T){return T?T.filter(ba=>"undefined"===typeof ba.visible?!0:!!ba.visible).map(ba=>ba.fieldName).filter(ba=>-1===ba.indexOf("relationships/")&&-1===ba.indexOf("expression/")):[]};Z._getActionsFields=
function(T){return T?T.toArray().reduce((ba,ha)=>[...ba,...this._getActionFields(ha)],[]):[]};Z._getActionFields=function(T){const {className:ba,title:ha,type:sa}=T;T="button"===sa||"toggle"===sa?T.image:"";return[...this._extractFieldNames(ha),...this._extractFieldNames(ba),...this._extractFieldNames(T)]};Z._getTitleFields=function(T){return"string"===typeof T?this._extractFieldNames(T):[]};Z._extractFieldNames=function(T){if(!T||"string"!==typeof T)return[];T=T.match(/{[^}]*}/g);if(!T)return[];
const ba=/\{(\w+):.+\}/;return(T=T.filter(ha=>!(0===ha.indexOf("{relationships/")||0===ha.indexOf("{expression/"))).map(ha=>ha.replace(ba,"{$1}")))?T.map(ha=>ha.slice(1,-1)):[]};return fa}(c.JSONSupport);k.__decorate([f.property({type:m})],y.prototype,"actions",void 0);k.__decorate([f.property()],y.prototype,"content",void 0);k.__decorate([h.cast("content")],y.prototype,"castContent",null);k.__decorate([l.reader("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments"])],
y.prototype,"readContent",null);k.__decorate([p.writer("content",{popupElements:{type:g.ofType(G.persistableTypes)},showAttachments:{type:Boolean},mediaInfos:{type:g.ofType(C.types)},description:{type:String}})],y.prototype,"writeContent",null);k.__decorate([f.property({type:[H],json:{write:!0}})],y.prototype,"expressionInfos",void 0);k.__decorate([f.property({type:[D]})],y.prototype,"fieldInfos",void 0);k.__decorate([p.writer("fieldInfos")],y.prototype,"writeFieldInfos",null);k.__decorate([f.property({type:K})],
y.prototype,"layerOptions",void 0);k.__decorate([p.writer("layerOptions")],y.prototype,"writeLayerOptions",null);k.__decorate([f.property({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],y.prototype,"lastEditInfoEnabled",void 0);k.__decorate([f.property()],y.prototype,"outFields",void 0);k.__decorate([f.property()],y.prototype,"overwriteActions",void 0);k.__decorate([f.property()],y.prototype,"returnGeometry",void 0);k.__decorate([f.property({json:{type:String}})],
y.prototype,"title",void 0);k.__decorate([p.writer("title")],y.prototype,"writeTitle",null);k.__decorate([f.property({type:J,json:{write:!0}})],y.prototype,"relatedRecordsInfo",void 0);return y=M=k.__decorate([q.subclass("esri.PopupTemplate")],y)})},"esri/layers/support/fieldUtils":function(){define("require exports ../../core/object ../../core/maybe ../../core/Error ./domains ../../support/arcadeOnDemand".split(" "),function(t,k,m,z,y,x,f){function h(Z,T,ba){if(Z)for(const ha of Z)(Z=(Z=m.getDeepValue(ha,
T))&&"function"!==typeof Z&&p(ba,Z))&&m.setDeepValue(ha,Z.name,T)}function e(Z,T){if(!Z||!T)return[];N.clear();l(N,Z,T);return Array.from(N).sort()}function l(Z,T,ba){if(ba)if(T&&T.length)if(ba.includes("*"))for(const {name:ha}of T)Z.add(ha);else for(const ha of ba)q(Z,T,ha);else if(ba.includes("*"))Z.clear(),Z.add("*");else for(const ha of ba)Z.add(ha)}function q(Z,T,ba){T&&T.length?(T=p(T,ba))&&Z.add(T.name):"string"===typeof ba&&Z.add(ba)}function p(Z,T){if("string"!==typeof T)return null;if(null!=
Z){T=T.toLowerCase();for(const ba of Z)if(ba&&ba.name.toLowerCase()===T)return ba}return null}async function n(Z,T,ba){if(ba){var {arcadeUtils:ha}=await f.loadArcade();ba=ha.extractFieldNames(ba);for(const sa of ba)q(Z,T,sa)}}function d(Z,T){for(const ba of Z)if(ba&&ba.valueType&&ba.valueType===T)return ba.name;return null}async function b(Z,T){if(T){var {fields:ba}=T;if(T=m.getDeepValue("elevationInfo.featureExpressionInfo",T))return T.collectRequiredFields(Z,ba)}}async function a(Z,T,ba){ba.outStatistic.onStatisticValueExpression?
n(Z,T,ba.outStatistic.onStatisticValueExpression):Z.add(ba.outStatistic.onStatisticField)}async function c(Z,T){const {labelingInfo:ba,fields:ha}=T;ba&&ba.length&&await Promise.all(ba.map(sa=>g(Z,ha,sa)))}async function g(Z,T,ba){if(ba){var ha=ba.getLabelExpression();ba=ba.where;"arcade"===ha.type?await n(Z,T,ha.expression):(ha=ha.expression.match(/{[^}]*}/g))&&ha.forEach(sa=>{q(Z,T,sa.slice(1,-1))});ha=/['"]+/g;ba&&(ba=ba.split(" "),3===ba.length&&q(Z,T,ba[0].replace(ha,"")),7===ba.length&&(q(Z,
T,ba[0].replace(ha,"")),q(Z,T,ba[4].replace(ha,""))))}}function r(Z){return"number"===typeof Z&&!isNaN(Z)&&isFinite(Z)}function u(Z){return null===Z||r(Z)}function w(Z){return null===Z||L(Z)}function v(Z){return null!=Z&&"string"===typeof Z}function D(Z){return null===Z||v(Z)}function B(){return!0}function C(Z,T){let ba;switch(Z.type){case "date":case "integer":case "long":case "small-integer":case "esriFieldTypeDate":case "esriFieldTypeInteger":case "esriFieldTypeLong":case "esriFieldTypeSmallInteger":ba=
Z.nullable?w:L;break;case "double":case "single":case "esriFieldTypeSingle":case "esriFieldTypeDouble":ba=Z.nullable?u:r;break;case "string":case "esriFieldTypeString":ba=Z.nullable?D:v;break;default:ba=B}return 1===arguments.length?ba:ba(T)}function A(Z){return null!=Z&&S.has(Z.type)}function E(Z,T){return Z.nullable&&null===T?null:A(Z)&&!G(Z.type,Number(T))?k.NumericRangeValidationError.OUT_OF_RANGE:C(Z,T)?Z.domain?x.validateDomainValue(Z.domain,T):null:k.TypeValidationError.INVALID_TYPE}function G(Z,
T){return(Z="string"===typeof Z?H(Z):Z)?Z.isInteger?L(T)&&T>=Z.min&&T<=Z.max:T>=Z.min&&T<=Z.max:!1}function H(Z){switch(Z){case "esriFieldTypeSmallInteger":case "small-integer":return Q;case "esriFieldTypeInteger":case "integer":return U;case "esriFieldTypeSingle":case "single":return W;case "esriFieldTypeDouble":case "double":return fa}}function K(Z,T,ba){if(!T||!T.attributes||!Z){if(z.isSome(ba))for(var ha of Z)ba.add(ha);return!0}T=T.attributes;ha=!1;for(const sa of Z)if(!(sa in T))if(ha=!0,z.isSome(ba))ba.add(sa);
else break;return ha}const J="field field2 field3 normalizationField rotationInfo.field proportionalSymbolInfo.field proportionalSymbolInfo.normalizationField colorInfo.field colorInfo.normalizationField".split(" "),F=["field","normalizationField"],N=new Set,L=(()=>"isInteger"in Number?Number.isInteger:Z=>"number"===typeof Z&&isFinite(Z)&&Math.floor(Z)===Z)(),M=["integer","small-integer","single","double"],S=new Set([...M,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);
(k.NumericRangeValidationError||(k.NumericRangeValidationError={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range";(k.TypeValidationError||(k.TypeValidationError={})).INVALID_TYPE="type-validation-error::invalid-type";const Q={min:-32768,max:32767,isInteger:!0},U={min:-2147483648,max:2147483647,isInteger:!0},W={min:-3.4E38,max:1.2E38,isInteger:!1},fa={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};k.collectArcadeFieldNames=n;k.collectElevationFields=b;k.collectFeatureReductionFields=
async function(Z,T,ba){T&&ba&&"cluster"===ba.type&&ba.fields&&await Promise.all(ba.fields.map(ha=>a(Z,T.fields,ha)))};k.collectField=q;k.collectFields=l;k.collectFilterFields=async function(Z,T,ba){if(T&&(T.timeInfo&&z.isSome(ba)&&ba.timeExtent&&l(Z,T.fields,[T.timeInfo.startField,T.timeInfo.endField]),T.floorInfo&&l(Z,T.fields,[T.floorInfo.floorField]),z.isSome(ba)&&z.isSome(ba.where)&&ba.where&&"1\x3d1"!==ba.where)){ba=(await new Promise(function(ha,sa){t(["../../core/sql/WhereClause"],ha,sa)})).WhereClause.create(ba.where,
T.fieldsIndex);if(!ba.isStandardized)throw new y("fieldUtils:collectFilterFields","Where clause is not standardized");l(Z,T.fields,ba.fieldNames)}};k.collectLabelingFields=c;k.doubleRange=fa;k.featureHasFields=function(Z,T){return!K(Z,T,null)};k.fixFields=e;k.fixRendererFields=function(Z,T){if(null!=Z&&null!=T)for(const ba of Array.isArray(Z)?Z:[Z])if(h(J,ba,T),"visualVariables"in ba&&ba.visualVariables)for(const ha of ba.visualVariables)h(F,ha,T)};k.fixTimeInfoFields=function(Z,T){if(null!=Z&&null!=
T)if("startField"in Z){var ba=p(T,Z.startField);T=p(T,Z.endField);Z.startField=ba&&ba.name||null;Z.endField=T&&T.name||null}else ba=p(T,Z.startTimeField),T=p(T,Z.endTimeField),Z.startTimeField=ba&&ba.name||null,Z.endTimeField=T&&T.name||null};k.getDisplayFieldName=function({displayField:Z,fields:T}){if(Z)return Z;if(!T||!T.length)return null;if(!(Z=d(T,"name-or-title")||d(T,"unique-identifier")||d(T,"type-or-category")))a:{for(const ba of T)if(ba&&ba.name&&(T=ba.name.toLowerCase(),-1<T.indexOf("name")||
-1<T.indexOf("title"))){Z=ba.name;break a}Z=null}return Z};k.getElevationFields=async function(Z){if(!Z)return[];const T=new Set;await b(T,Z);return Array.from(T).sort()};k.getExpressionFields=async function(Z,T){const ba=new Set;for(const ha of T)await n(ba,Z.fields,ha);return Array.from(ba).sort()};k.getFeatureEditFields=function(Z){if(!Z)return[];const T="editFieldsInfo"in Z&&Z.editFieldsInfo;return T?e(Z.fields,[T&&T.creatorField,T&&T.creationDateField,T&&T.editorField,T&&T.editDateField]):[]};
k.getFeatureGeometryFields=function(Z){if(!Z)return[];const T=Z.geometryFieldsInfo;return T?e(Z.fields,[T.shapeAreaField,T.shapeLengthField]):[]};k.getField=p;k.getFieldDefaultValue=function(Z){const T=Z.defaultValue;if(void 0!==T&&C(Z,T))return T;if(Z.nullable)return null};k.getFieldRange=function(Z){const T=x.getDomainRange(Z.domain);if(T)return T;if(A(Z))return H(Z.type)};k.getLabelingFields=async function(Z){if(!Z)return[];const T=new Set;await c(T,Z);return Array.from(T).sort()};k.getNumericTypeForValue=
function(Z){if(!r(Z))return null;if(L(Z)){if(Z>=Q.min&&Z<=Q.max)return"esriFieldTypeSmallInteger";if(Z>=U.min&&Z<=U.max)return"esriFieldTypeInteger"}return Z>=W.min&&Z<=W.max?"esriFieldTypeSingle":"esriFieldTypeDouble"};k.getTimeFields=async function(Z){if(!Z)return[];const T="timeInfo"in Z&&Z.timeInfo;return T?e(Z.fields,[Z.trackIdField,T.startField,T.endField]):[]};k.hasField=function(Z,T){if(!Z||!T||"string"!==typeof T)return!1;T=T.toLowerCase();for(const ba of Z)if(ba&&ba.name.toLowerCase()===
T)return!0;return!1};k.integerRange=U;k.isDateField=function(Z){return null!=Z&&("date"===Z.type||"esriFieldTypeDate"===Z.type)};k.isNumberInRange=G;k.isNumericField=A;k.isStringField=function(Z){return null!=Z&&("string"===Z.type||"esriFieldTypeString"===Z.type)};k.isValidFieldValue=function(Z,T){return null===E(Z,T)};k.isValueMatchingFieldType=C;k.numericTypes=M;k.packFields=function(Z,T,ba=1){if(!T||!Z)return[];if(T.includes("*"))return["*"];T=e(Z,T);return T.length/Z.length>=ba?["*"]:T};k.populateMissingFields=
K;k.rendererFields=J;k.sanitizeNullFieldValue=function(Z){return null==Z||"number"===typeof Z&&isNaN(Z)?null:Z};k.singleRange=W;k.smallIntegerRange=Q;k.unpackFieldNames=function(Z,T){return z.isNone(T)||z.isNone(Z)?[]:T.includes("*")?Z.map(ba=>ba.name):T};k.validateFieldValue=E;k.validationErrorToString=function(Z,T,ba){switch(Z){case x.DomainValidationError.INVALID_CODED_VALUE:return`Value ${ba} is not in the coded domain - field: ${T.name}, domain: ${JSON.stringify(T.domain)}`;case x.DomainValidationError.VALUE_OUT_OF_RANGE:return`Value ${ba} is out of the range of valid values - field: ${T.name}, domain: ${JSON.stringify(T.domain)}`;
case k.TypeValidationError.INVALID_TYPE:return`Value ${ba} is not a valid value for the field type - field: ${T.name}, type: ${T.type}, nullable: ${T.nullable}`;case k.NumericRangeValidationError.OUT_OF_RANGE:{const {min:ha,max:sa}=H(T.type);return`Value ${ba} is out of range for the number type - field: ${T.name}, type: ${T.type}, value range is ${ha} to ${sa}`}}};k.visualVariableFields=F;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/popup/content/Content":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p){m=function(n){function d(b){b=n.call(this,b)||this;b.type=null;return b}t._inheritsLoose(d,n);return d}(p.JSONSupport);k.__decorate([x.property({type:["attachments","custom","fields","media","text"],readOnly:!0,json:{read:!1,write:!0}})],m.prototype,"type",void 0);return m=k.__decorate([h.subclass("esri.popup.content.Content")],m)})},"esri/popup/content/AttachmentsContent":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ./Content".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p){var n;m=n=function(d){function b(a){a=d.call(this,a)||this;a.description=null;a.displayType=null;a.title=null;a.type="attachments";return a}t._inheritsLoose(b,d);b.prototype.clone=function(){return new n({description:this.description,displayType:this.displayType,title:this.title})};return b}(p);k.__decorate([x.property({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],m.prototype,"description",void 0);k.__decorate([x.property({type:["preview","list"],json:{write:!0}})],
m.prototype,"displayType",void 0);k.__decorate([x.property({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],m.prototype,"title",void 0);k.__decorate([x.property({type:["attachments"],readOnly:!0,json:{read:!1,write:!0}})],m.prototype,"type",void 0);return m=n=k.__decorate([h.subclass("esri.popup.content.AttachmentsContent")],m)})},"esri/popup/content/CustomContent":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/lang ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ./Content".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n){var d;m=d=function(b){function a(c){c=b.call(this,c)||this;c.creator=null;c.destroyer=null;c.outFields=null;c.type="custom";return c}t._inheritsLoose(a,b);a.prototype.clone=function(){return new d({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?z.clone(this.outFields):null})};return a}(n);k.__decorate([f.property()],m.prototype,"creator",void 0);k.__decorate([f.property()],m.prototype,"destroyer",void 0);k.__decorate([f.property()],
m.prototype,"outFields",void 0);k.__decorate([f.property({type:["custom"],readOnly:!0})],m.prototype,"type",void 0);return m=d=k.__decorate([e.subclass("esri.popup.content.CustomContent")],m)})},"esri/popup/FieldInfo":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/lang ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/JSONSupport ./support/FieldInfoFormat".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d,b){var a;m=a=function(c){function g(r){r=c.call(this,r)||this;r.fieldName=null;r.format=null;r.isEditable=!1;r.label=null;r.stringFieldOption="text-box";r.statisticType=null;r.tooltip=null;r.visible=!0;return r}t._inheritsLoose(g,c);g.prototype.clone=function(){return new a({fieldName:this.fieldName,format:this.format?z.clone(this.format):null,isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,
tooltip:this.tooltip,visible:this.visible})};return g}(d.JSONSupport);k.__decorate([f.property({type:String,json:{write:!0}})],m.prototype,"fieldName",void 0);k.__decorate([f.property({type:b,json:{write:!0}})],m.prototype,"format",void 0);k.__decorate([f.property({type:Boolean,json:{write:!0,default:!1}})],m.prototype,"isEditable",void 0);k.__decorate([f.property({type:String,json:{write:!0}})],m.prototype,"label",void 0);k.__decorate([e.enumeration(new h.JSONMap({richtext:"rich-text",textarea:"text-area",
textbox:"text-box"}),{default:"text-box"})],m.prototype,"stringFieldOption",void 0);k.__decorate([f.property({type:"count sum min max avg stddev var".split(" "),json:{write:!0}})],m.prototype,"statisticType",void 0);k.__decorate([f.property({type:String,json:{write:!0}})],m.prototype,"tooltip",void 0);k.__decorate([f.property({type:Boolean,json:{write:!0}})],m.prototype,"visible",void 0);return m=a=k.__decorate([l.subclass("esri.popup.FieldInfo")],m)})},"esri/popup/support/FieldInfoFormat":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../core/date ../../intl/date ../../intl/number".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d,b){var a;m=a=function(c){function g(u){u=c.call(this,u)||this;u.dateFormat=null;u.digitSeparator=!1;u.places=null;return u}t._inheritsLoose(g,c);var r=g.prototype;r.clone=function(){return new a({dateFormat:this.dateFormat,digitSeparator:this.digitSeparator,places:this.places})};r.format=function(u){return this.dateFormat?d.formatDate(u,d.convertDateFormatToIntlOptions(this.dateFormat)):b.formatNumber(u,b.convertNumberFormatToIntlOptions(this))};return g}(p.JSONSupport);
k.__decorate([f.enumeration(n.dictionary)],m.prototype,"dateFormat",void 0);k.__decorate([x.property({type:Boolean,json:{write:!0}})],m.prototype,"digitSeparator",void 0);k.__decorate([x.property({type:y.Integer,json:{write:!0}})],m.prototype,"places",void 0);return m=a=k.__decorate([h.subclass("esri.popup.support.FieldInfoFormat")],m)})},"esri/core/date":function(){define(["exports","./jsonMap"],function(t,k){const m={"short-date":"(datePattern: 'M/d/y', selector: 'date')","short-date-short-time":"(datePattern: 'M/d/y', timePattern: 'h:mm a', selector: 'date and time')",
"short-date-short-time-24":"(datePattern: 'M/d/y', timePattern: 'H:mm', selector: 'date and time')","short-date-long-time":"(datePattern: 'M/d/y', timePattern: 'h:mm:ss a', selector: 'date and time')","short-date-long-time-24":"(datePattern: 'M/d/y', timePattern: 'H:mm:ss', selector: 'date and time')","short-date-le":"(datePattern: 'd/M/y', selector: 'date')","short-date-le-short-time":"(datePattern: 'd/M/y', timePattern: 'h:mm a', selector: 'date and time')","short-date-le-short-time-24":"(datePattern: 'd/M/y', timePattern: 'H:mm', selector: 'date and time')",
"short-date-le-long-time":"(datePattern: 'd/M/y', timePattern: 'h:mm:ss a', selector: 'date and time')","short-date-le-long-time-24":"(datePattern: 'd/M/y', timePattern: 'H:mm:ss', selector: 'date and time')","long-month-day-year":"(datePattern: 'MMMM d, y', selector: 'date')","long-month-day-year-short-time":"(datePattern: 'MMMM d, y', timePattern: 'h:mm a', selector: 'date and time')","long-month-day-year-short-time-24":"(datePattern: 'MMMM d, y', timePattern: 'H:mm', selector: 'date and time')",
"long-month-day-year-long-time":"(datePattern: 'MMMM d, y', timePattern: 'h:mm:ss a', selector: 'date and time')","long-month-day-year-long-time-24":"(datePattern: 'MMMM d, y', timePattern: 'H:mm:ss', selector: 'date and time')","day-short-month-year":"(datePattern: 'd MMM y', selector: 'date')","day-short-month-year-short-time":"(datePattern: 'd MMM y', timePattern: 'h:mm a', selector: 'date and time')","day-short-month-year-short-time-24":"(datePattern: 'd MMM y', timePattern: 'H:mm', selector: 'date and time')",
"day-short-month-year-long-time":"(datePattern: 'd MMM y', timePattern: 'h:mm:ss a', selector: 'date and time')","day-short-month-year-long-time-24":"(datePattern: 'd MMM y', timePattern: 'H:mm:ss', selector: 'date and time')","long-date":"(datePattern: 'EEEE, MMMM d, y', selector: 'date')","long-date-short-time":"(datePattern: 'EEEE, MMMM d, y', timePattern: 'h:mm a', selector: 'date and time')","long-date-short-time-24":"(datePattern: 'EEEE, MMMM d, y', timePattern: 'H:mm', selector: 'date and time')",
"long-date-long-time":"(datePattern: 'EEEE, MMMM d, y', timePattern: 'h:mm:ss a', selector: 'date and time')","long-date-long-time-24":"(datePattern: 'EEEE, MMMM d, y', timePattern: 'H:mm:ss', selector: 'date and time')","long-month-year":"(datePattern: 'MMMM y', selector: 'date')","short-month-year":"(datePattern: 'MMM y', selector: 'date')",year:"(datePattern: 'y', selector: 'date')"};k=k.strict()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",
shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",
longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",
longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"});const z=k.toJSON.bind(k),y=k.fromJSON.bind(k);t.dictionary=k;t.formats=m;t.fromJSON=y;t.getFormat=function(x){return m[x]};t.toJSON=z;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/popup/content/FieldsContent":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/lang ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ./Content ../FieldInfo".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d,b){var a;m=a=function(c){function g(u){u=c.call(this,u)||this;u.description=null;u.fieldInfos=null;u.title=null;u.type="fields";return u}t._inheritsLoose(g,c);var r=g.prototype;r.writeFieldInfos=function(u,w){w.fieldInfos=u&&u.map(v=>v.toJSON())};r.clone=function(){return new a({description:this.description,fieldInfos:Array.isArray(this.fieldInfos)?z.clone(this.fieldInfos):null,title:this.title})};return g}(d);k.__decorate([f.property({json:{write:!0,origins:{"web-scene":{write:!1,
read:!1}}}})],m.prototype,"description",void 0);k.__decorate([f.property({type:[b]})],m.prototype,"fieldInfos",void 0);k.__decorate([l.writer("fieldInfos")],m.prototype,"writeFieldInfos",null);k.__decorate([f.property({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],m.prototype,"title",void 0);k.__decorate([f.property({type:["fields"],readOnly:!0,json:{read:!1,write:!0}})],m.prototype,"type",void 0);return m=a=k.__decorate([e.subclass("esri.popup.content.FieldsContent")],m)})},"esri/popup/content/support/mediaInfoTypes":function(){define("exports ../mixins/MediaInfo ../BarChartMediaInfo ../ColumnChartMediaInfo ../ImageMediaInfo ../LineChartMediaInfo ../PieChartMediaInfo".split(" "),
function(t,k,m,z,y,x,f){k={base:k,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":m,"column-chart":z,"line-chart":x,"pie-chart":f,image:y}};t.default=k;t.types=k;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/popup/content/mixins/MediaInfo":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../../core/JSONSupport".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p){m=function(n){function d(b){b=n.call(this,b)||this;b.altText=null;b.caption="";b.title="";b.type=null;return b}t._inheritsLoose(d,n);return d}(p.JSONSupport);k.__decorate([x.property({type:String,json:{write:!0}})],m.prototype,"altText",void 0);k.__decorate([x.property({type:String,json:{write:!0}})],m.prototype,"caption",void 0);k.__decorate([x.property({type:String,json:{write:!0}})],m.prototype,"title",void 0);k.__decorate([x.property({type:["image","bar-chart",
"column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],m.prototype,"type",void 0);return m=k.__decorate([h.subclass("esri.popup.content.mixins.MediaInfo")],m)})},"esri/popup/content/BarChartMediaInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ./mixins/ChartMediaInfo ./support/chartMediaInfoUtils".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n){var d;m=d=function(b){function a(c){c=b.call(this,c)||this;c.type="bar-chart";return c}t._inheritsLoose(a,b);a.prototype.clone=function(){return new d({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})};return a}(p);k.__decorate([x.property({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:n.chartTypeKebabDict.write}})],m.prototype,"type",void 0);return m=d=k.__decorate([h.subclass("esri.popup.content.BarChartMediaInfo")],
m)})},"esri/popup/content/mixins/ChartMediaInfo":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ./MediaInfo ../support/ChartMediaInfoValue".split(" "),function(t,k,m,z,y,x,f,h,
e,l,q,p,n){m=function(d){function b(a){a=d.call(this,a)||this;a.type=null;a.value=null;return a}t._inheritsLoose(b,d);return b}(p);k.__decorate([x.property({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],m.prototype,"type",void 0);k.__decorate([x.property({type:n,json:{write:!0}})],m.prototype,"value",void 0);return m=k.__decorate([h.subclass("esri.popup.content.mixins.ChartMediaInfo")],m)})},"esri/popup/content/support/ChartMediaInfoValue":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/lang ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../../core/JSONSupport ./ChartMediaInfoValueSeries".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d){var b;m=b=function(a){function c(g){g=a.call(this,g)||this;g.fields=[];g.normalizeField=null;g.series=[];g.tooltipField=null;return g}t._inheritsLoose(c,a);c.prototype.clone=function(){return new b({fields:z.clone(this.fields),normalizeField:this.normalizeField,tooltipField:this.tooltipField})};return c}(n.JSONSupport);k.__decorate([f.property({type:[String],json:{write:!0}})],m.prototype,"fields",void 0);k.__decorate([f.property({type:String,json:{write:!0}})],
m.prototype,"normalizeField",void 0);k.__decorate([f.property({type:[d],json:{read:!1}})],m.prototype,"series",void 0);k.__decorate([f.property({type:String,json:{write:!0}})],m.prototype,"tooltipField",void 0);return m=b=k.__decorate([e.subclass("esri.popup.content.support.ChartMediaInfoValue")],m)})},"esri/popup/content/support/ChartMediaInfoValueSeries":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/decorators/aliasOf ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../../core/Accessor".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n){var d;m=d=function(b){function a(c){c=b.call(this,c)||this;c.tooltip=null;c.value=null;c.x=null;c.y=null;return c}t._inheritsLoose(a,b);a.prototype.clone=function(){return new d({tooltip:this.tooltip,value:this.value})};return a}(n);k.__decorate([x.property()],m.prototype,"tooltip",void 0);k.__decorate([x.property()],m.prototype,"value",void 0);k.__decorate([f.aliasOf("value")],m.prototype,"x",void 0);k.__decorate([f.aliasOf("tooltip")],m.prototype,"y",void 0);
return m=d=k.__decorate([e.subclass("esri.popup.content.support.ChartMediaInfoValueSeries")],m)})},"esri/core/accessorSupport/decorators/aliasOf":function(){define(["exports","./property"],function(t,k){t.aliasOf=function(m,z){return k.property({aliasOf:z?{...z,source:m}:m})};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/popup/content/support/chartMediaInfoUtils":function(){define(["exports","../../../core/jsonMap"],function(t,k){k=k.strict()({barchart:"bar-chart",columnchart:"column-chart",
linechart:"line-chart",piechart:"pie-chart"});t.chartTypeKebabDict=k;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/popup/content/ColumnChartMediaInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ./mixins/ChartMediaInfo ./support/chartMediaInfoUtils".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n){var d;m=d=function(b){function a(c){c=b.call(this,c)||this;c.type="column-chart";return c}t._inheritsLoose(a,b);a.prototype.clone=function(){return new d({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})};return a}(p);k.__decorate([x.property({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:n.chartTypeKebabDict.write}})],m.prototype,"type",void 0);return m=d=k.__decorate([h.subclass("esri.popup.content.ColumnChartMediaInfo")],
m)})},"esri/popup/content/ImageMediaInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ./mixins/MediaInfo ./support/ImageMediaInfoValue".split(" "),function(t,k,m,z,y,x,f,h,e,l,q,p,n){var d;m=d=function(b){function a(c){c=
b.call(this,c)||this;c.refreshInterval=null;c.type="image";c.value=null;return c}t._inheritsLoose(a,b);a.prototype.clone=function(){return new d({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?this.value.clone():null})};return a}(p);k.__decorate([x.property({type:Number,json:{write:!0}})],m.prototype,"refreshInterval",void 0);k.__decorate([x.property({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],m.prototype,"type",void 0);
k.__decorate([x.property({type:n,json:{write:!0}})],m.prototype,"value",void 0);return m=d=k.__decorate([h.subclass("esri.popup.content.ImageMediaInfo")],m)})},"esri/popup/content/support/ImageMediaInfoValue":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../../core/JSONSupport".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p){var n;m=n=function(d){function b(a){a=d.call(this,a)||this;a.linkURL=null;a.sourceURL=null;return a}t._inheritsLoose(b,d);b.prototype.clone=function(){return new n({linkURL:this.linkURL,sourceURL:this.sourceURL})};return b}(p.JSONSupport);k.__decorate([x.property({type:String,json:{write:!0}})],m.prototype,"linkURL",void 0);k.__decorate([x.property({type:String,json:{write:!0}})],m.prototype,"sourceURL",void 0);return m=n=k.__decorate([h.subclass("esri.popup.content.support.ImageMediaInfoValue")],
m)})},"esri/popup/content/LineChartMediaInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ./mixins/ChartMediaInfo ./support/chartMediaInfoUtils".split(" "),function(t,k,m,z,y,x,f,h,e,l,q,p,n){var d;m=d=function(b){function a(c){c=
b.call(this,c)||this;c.type="line-chart";return c}t._inheritsLoose(a,b);a.prototype.clone=function(){return new d({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})};return a}(p);k.__decorate([x.property({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:n.chartTypeKebabDict.write}})],m.prototype,"type",void 0);return m=d=k.__decorate([h.subclass("esri.popup.content.LineChartMediaInfo")],m)})},"esri/popup/content/PieChartMediaInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ./mixins/ChartMediaInfo ./support/chartMediaInfoUtils".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n){var d;m=d=function(b){function a(c){c=b.call(this,c)||this;c.type="pie-chart";return c}t._inheritsLoose(a,b);a.prototype.clone=function(){return new d({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})};return a}(p);k.__decorate([x.property({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:n.chartTypeKebabDict.write}})],m.prototype,"type",void 0);return m=d=k.__decorate([h.subclass("esri.popup.content.PieChartMediaInfo")],
m)})},"esri/popup/content/MediaContent":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/lang ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ./Content ./BarChartMediaInfo ./ColumnChartMediaInfo ./ImageMediaInfo ./LineChartMediaInfo ./PieChartMediaInfo ./support/mediaInfoTypes".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d,b,a,c,g,r,u,w){var v;m=v=function(D){function B(A){A=D.call(this,A)||this;A.activeMediaInfoIndex=null;A.description=null;A.mediaInfos=null;A.title=null;A.type="media";return A}t._inheritsLoose(B,D);var C=B.prototype;C.readMediaInfos=function(A){return A&&A.map(E=>{if("image"===E.type)return g.fromJSON(E);if("barchart"===E.type)return a.fromJSON(E);if("columnchart"===E.type)return c.fromJSON(E);if("linechart"===E.type)return r.fromJSON(E);if("piechart"===E.type)return u.fromJSON(E)}).filter(Boolean)};
C.writeMediaInfos=function(A,E){E.mediaInfos=A&&A.map(G=>G.toJSON())};C.clone=function(){return new v({activeMediaInfoIndex:this.activeMediaInfoIndex,description:this.description,mediaInfos:this.mediaInfos?z.clone(this.mediaInfos):null,title:this.title})};return B}(b);k.__decorate([f.property()],m.prototype,"activeMediaInfoIndex",void 0);k.__decorate([f.property({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],m.prototype,"description",void 0);k.__decorate([f.property({types:[w.types]})],
m.prototype,"mediaInfos",void 0);k.__decorate([e.reader("mediaInfos")],m.prototype,"readMediaInfos",null);k.__decorate([q.writer("mediaInfos")],m.prototype,"writeMediaInfos",null);k.__decorate([f.property({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],m.prototype,"title",void 0);k.__decorate([f.property({type:["media"],readOnly:!0,json:{read:!1,write:!0}})],m.prototype,"type",void 0);return m=v=k.__decorate([l.subclass("esri.popup.content.MediaContent")],m)})},"esri/popup/content/TextContent":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ./Content".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p){var n;m=n=function(d){function b(a){a=d.call(this,a)||this;a.text=null;a.type="text";return a}t._inheritsLoose(b,d);b.prototype.clone=function(){return new n({text:this.text})};return b}(p);k.__decorate([x.property({type:String,json:{write:!0}})],m.prototype,"text",void 0);k.__decorate([x.property({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],m.prototype,"type",void 0);return m=n=k.__decorate([h.subclass("esri.popup.content.TextContent")],m)})},"esri/popup/content":function(){define("exports ./content/Content ./content/AttachmentsContent ./content/CustomContent ./content/FieldsContent ./content/MediaContent ./content/TextContent".split(" "),
function(t,k,m,z,y,x,f){const h={base:null,key:"type",typeMap:{attachment:m,media:x,text:f,field:y}};t.BaseContent=k;t.AttachmentsContent=m;t.CustomContent=z;t.FieldsContent=y;t.MediaContent=x;t.TextContent=f;t.isContent=function(e){return e instanceof k};t.persistableTypes=h;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/popup/ExpressionInfo":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/JSONSupport".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p){var n;m=n=function(d){function b(a){a=d.call(this,a)||this;a.name=null;a.title=null;a.expression=null;a.returnType=null;return a}t._inheritsLoose(b,d);b.prototype.clone=function(){return new n({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})};return b}(p.JSONSupport);k.__decorate([x.property({type:String,json:{write:!0}})],m.prototype,"name",void 0);k.__decorate([x.property({type:String,json:{write:!0}})],m.prototype,"title",
void 0);k.__decorate([x.property({type:String,json:{write:!0}})],m.prototype,"expression",void 0);k.__decorate([x.property({type:["string","number"],json:{write:!0}})],m.prototype,"returnType",void 0);return m=n=k.__decorate([h.subclass("esri.popup.ExpressionInfo")],m)})},"esri/popup/LayerOptions":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/JSONSupport".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p){var n;m=n=function(d){function b(a){a=d.call(this,a)||this;a.returnTopmostRaster=null;a.showNoDataRecords=null;return a}t._inheritsLoose(b,d);b.prototype.clone=function(){return new n({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})};return b}(p.JSONSupport);k.__decorate([x.property({type:Boolean,json:{write:!0}})],m.prototype,"returnTopmostRaster",void 0);k.__decorate([x.property({type:Boolean,json:{write:!0}})],m.prototype,
"showNoDataRecords",void 0);return m=n=k.__decorate([h.subclass("esri.popup.LayerOptions")],m)})},"esri/popup/RelatedRecordsInfo":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/lang ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/JSONSupport ./support/RelatedRecordsInfoFieldOrder".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d){var b;m=b=function(a){function c(g){g=a.call(this,g)||this;g.showRelatedRecords=null;g.orderByFields=null;return g}t._inheritsLoose(c,a);c.prototype.clone=function(){return new b({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?z.clone(this.orderByFields):null})};return c}(n.JSONSupport);k.__decorate([f.property({type:Boolean,json:{write:!0}})],m.prototype,"showRelatedRecords",void 0);k.__decorate([f.property({type:[d],json:{write:!0}})],
m.prototype,"orderByFields",void 0);return m=b=k.__decorate([e.subclass("esri.popup.RelatedRecordsInfo")],m)})},"esri/popup/support/RelatedRecordsInfoFieldOrder":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p){var n;m=n=function(d){function b(a){a=d.call(this,a)||this;a.field=null;a.order=null;return a}t._inheritsLoose(b,d);b.prototype.clone=function(){return new n({field:this.field,order:this.order})};return b}(p.JSONSupport);k.__decorate([x.property({type:String,json:{write:!0}})],m.prototype,"field",void 0);k.__decorate([x.property({type:["asc","desc"],json:{write:!0}})],m.prototype,"order",void 0);return m=n=k.__decorate([h.subclass("esri.popup.support.RelatedRecordsInfoFieldOrder")],
m)})},"esri/support/actions/ActionBase":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/Accessor ../../core/Identifiable".split(" "),function(t,k,m,z,y,x,f,h,e,l,q,p,n){var d;m=d=function(b){function a(c){c=
b.call(this,c)||this;c.active=!1;c.className=null;c.disabled=!1;c.id=null;c.indicator=!1;c.title=null;c.type=null;c.visible=!0;return c}t._inheritsLoose(a,b);a.prototype.clone=function(){return new d({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})};return a}(n.IdentifiableMixin(p));k.__decorate([x.property()],m.prototype,"active",void 0);k.__decorate([x.property()],m.prototype,"className",void 0);k.__decorate([x.property()],
m.prototype,"disabled",void 0);k.__decorate([x.property()],m.prototype,"id",void 0);k.__decorate([x.property()],m.prototype,"indicator",void 0);k.__decorate([x.property()],m.prototype,"title",void 0);k.__decorate([x.property()],m.prototype,"type",void 0);k.__decorate([x.property()],m.prototype,"visible",void 0);return m=d=k.__decorate([h.subclass("esri.support.actions.ActionBase")],m)})},"esri/core/Identifiable":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6",
"./accessorSupport/decorators/subclass"],function(t,k,m,z){let y=0;const x=f=>{f=function(h){function e(...l){l=h.call(this,...l)||this;Object.defineProperty(k._assertThisInitialized(l),"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+y++});return l}k._inheritsLoose(e,h);return e}(f);return f=m.__decorate([z.subclass("esri.core.Identifiable")],f)};t.Identifiable=function(f){function h(){return f.apply(this,arguments)||this}k._inheritsLoose(h,f);return h}(x(function(){return function(){}}()));
t.Identifiable=m.__decorate([z.subclass("esri.core.Identifiable")],t.Identifiable);t.IdentifiableMixin=x;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/support/actions/ActionButton":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ./ActionBase".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p){var n;m=n=function(d){function b(a){a=d.call(this,a)||this;a.image=null;a.type="button";return a}t._inheritsLoose(b,d);b.prototype.clone=function(){return new n({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})};return b}(p);k.__decorate([x.property()],m.prototype,"image",void 0);return m=n=k.__decorate([h.subclass("esri.support.Action.ActionButton")],m)})},
"esri/support/actions/ActionToggle":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ./ActionBase".split(" "),function(t,k,m,z,y,x,f,h,e,l,q,p){var n;m=n=function(d){function b(a){a=d.call(this,a)||this;a.image=
null;a.type="toggle";a.value=!1;return a}t._inheritsLoose(b,d);b.prototype.clone=function(){return new n({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})};return b}(p);k.__decorate([x.property()],m.prototype,"image",void 0);k.__decorate([x.property()],m.prototype,"value",void 0);return m=n=k.__decorate([h.subclass("esri.support.Action.ActionToggle")],m)})},"esri/symbols":function(){define("exports ./core/accessorSupport/ensureType ./core/accessorSupport/extensions/serializableProperty/reader ./symbols/Symbol ./symbols/CIMSymbol ./symbols/Symbol3DLayer ./symbols/ExtrudeSymbol3DLayer ./symbols/SimpleLineSymbol ./symbols/FillSymbol ./symbols/FillSymbol3DLayer ./symbols/Font ./symbols/IconSymbol3DLayer ./symbols/LineSymbol3DLayer ./symbols/ObjectSymbol3DLayer ./symbols/PathSymbol3DLayer ./symbols/TextSymbol3DLayer ./symbols/WaterSymbol3DLayer ./symbols/Symbol3D ./chunks/LineCallout3DBorder ./symbols/callouts/LineCallout3D ./symbols/support/Symbol3DVerticalOffset ./symbols/LabelSymbol3D ./symbols/LineSymbol3D ./symbols/MarkerSymbol ./symbols/MeshSymbol3D ./symbols/PictureFillSymbol ./symbols/PictureMarkerSymbol ./symbols/PointSymbol3D ./symbols/PolygonSymbol3D ./symbols/SimpleFillSymbol ./symbols/SimpleMarkerSymbol ./symbols/TextSymbol ./symbols/WebStyleSymbol".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d,b,a,c,g,r,u,w,v,D,B,C,A,E,G,H,K,J,F,N){const L={base:z,key:"type",typeMap:{"simple-fill":K,"picture-fill":A,"picture-marker":E,"simple-line":h,"simple-marker":J,text:F,"label-3d":v,"line-3d":D,"mesh-3d":C,"point-3d":G,"polygon-3d":H,"web-style":N,cim:y},errorContext:"symbol"},M={base:z,key:"type",typeMap:{"picture-marker":E,"simple-marker":J,text:F,"web-style":N,cim:y},errorContext:"symbol"};m=m.createTypeReader({types:L});const S={base:z,key:"type",typeMap:{"simple-fill":K,
"picture-fill":A,"picture-marker":E,"simple-line":h,"simple-marker":J,text:F,"line-3d":D,"mesh-3d":C,"point-3d":G,"polygon-3d":H,"web-style":N,cim:y},errorContext:"symbol"},Q={base:z,key:"type",typeMap:{text:F,"label-3d":v},errorContext:"symbol"},U={base:z,key:"type",typeMap:{"label-3d":v,"line-3d":D,"mesh-3d":C,"point-3d":G,"polygon-3d":H,"web-style":N},errorContext:"symbol"},W={base:z,key:"type",typeMap:{"line-3d":D,"mesh-3d":C,"point-3d":G,"polygon-3d":H,"web-style":N},errorContext:"symbol"},fa=
{base:z,key:"type",typeMap:{"label-3d":v},errorContext:"symbol"};k=k.ensureOneOfType(L);t.BaseSymbol=z;t.CIMSymbol=y;t.BaseSymbol3DLayer=x;t.ExtrudeSymbol3DLayer=f;t.SimpleLineSymbol=h;t.BaseFillSymbol=e;t.FillSymbol3DLayer=l;t.Font=q;t.IconSymbol3DLayer=p;t.LineSymbol3DLayer=n;t.ObjectSymbol3DLayer=d;t.PathSymbol3DLayer=b;t.TextSymbol3DLayer=a;t.WaterSymbol3DLayer=c;t.BaseSymbol3D=g;t.LineCallout3DBorder=r.LineCallout3DBorder;t.LineCallout3D=u;Object.defineProperty(t,"Symbol3DVerticalOffset",{enumerable:!0,
get:function(){return w.Symbol3DVerticalOffset}});t.LabelSymbol3D=v;t.LineSymbol3D=D;t.BaseMarkerSymbol=B;t.MeshSymbol3D=C;t.PictureFillSymbol=A;t.PictureMarkerSymbol=E;t.PointSymbol3D=G;t.PolygonSymbol3D=H;t.SimpleFillSymbol=K;t.SimpleMarkerSymbol=J;t.TextSymbol=F;t.WebStyleSymbol=N;t.ensureType=k;t.isSymbol=function(Z){return Z instanceof z};t.isSymbol2D=function(Z){if(!Z)return!1;switch(Z.type){case "picture-fill":case "picture-marker":case "simple-fill":case "simple-line":case "simple-marker":case "text":case "cim":return!0;
default:return!1}};t.isSymbol3D=function(Z){if(!Z)return!1;switch(Z.type){case "label-3d":case "line-3d":case "mesh-3d":case "point-3d":case "polygon-3d":return!0;default:return!1}};t.readSymbol=m;t.symbolTypes=L;t.symbolTypes3D=U;t.symbolTypesCluster=M;t.symbolTypesLabel=Q;t.symbolTypesLabel3D=fa;t.symbolTypesRenderer=S;t.symbolTypesRenderer3D=W;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/symbols/Symbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/JSONSupport ../Color".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d){m=new f.JSONMap({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let b=0;n=function(a){function c(r){r=a.call(this,r)||this;r.id=`sym${b++}`;r.type=null;return r}t._inheritsLoose(c,
a);var g=c.prototype;g.readColor=function(r){return r&&null!=r[0]?[r[0],r[1],r[2],r[3]/255]:r};g.collectRequiredFields=async function(r,u){};g.hash=function(){return JSON.stringify(this.toJSON())};g.clone=function(){};t._createClass(c,[{key:"color",set:function(r){this._set("color",r)}}]);return c}(n.JSONSupport);k.__decorate([x.property({type:m.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:m.write}}})],n.prototype,"type",void 0);k.__decorate([x.property({type:d,value:new d([0,
0,0,1]),json:{write:{allowNull:!0}}})],n.prototype,"color",null);k.__decorate([h.reader("color")],n.prototype,"readColor",null);return n=k.__decorate([e.subclass("esri.symbols.Symbol")],n)})},"esri/symbols/CIMSymbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/lang ../core/string ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../layers/support/fieldUtils ./Symbol".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d,b,a,c){var g;m=g=function(r){function u(v){v=r.call(this,v)||this;v.data=null;v.type="cim";return v}t._inheritsLoose(u,r);var w=u.prototype;w.readData=function(v,D){return D};w.writeData=function(v,D){if(v)for(const B in v)D[B]=v[B]};w.collectRequiredFields=async function(v,D){if("CIMSymbolReference"===this.data.type){var B=this.data.primitiveOverrides;B&&(B=B.map(C=>a.collectArcadeFieldNames(v,D,C.valueExpressionInfo.expression)),await Promise.all(B))}};w.clone=
function(){return new g({data:z.clone(this.data)})};w.hash=function(){return y.numericHash(JSON.stringify(this.data)).toString()};return u}(c);k.__decorate([h.property({json:{write:!1}})],m.prototype,"color",void 0);k.__decorate([h.property({json:{write:!0}})],m.prototype,"data",void 0);k.__decorate([l.reader("data",["symbol"])],m.prototype,"readData",null);k.__decorate([p.writer("data")],m.prototype,"writeData",null);k.__decorate([e.enumeration({CIMSymbolReference:"cim"},{readOnly:!0})],m.prototype,
"type",void 0);return m=g=k.__decorate([q.subclass("esri.symbols.CIMSymbol")],m)})},"esri/symbols/Symbol3DLayer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/JSONSupport".split(" "),function(t,
k,m,z,y,x,f,h,e,l,q,p,n){m=function(d){function b(a){a=d.call(this,a)||this;a.enabled=!0;a.type=null;return a}t._inheritsLoose(b,d);b.prototype.writeEnabled=function(a,c,g){a||(c[g]=a)};return b}(n.JSONSupport);k.__decorate([x.property({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],m.prototype,"enabled",void 0);k.__decorate([e.writer("enabled")],m.prototype,"writeEnabled",null);k.__decorate([x.property({type:"icon object line path fill water extrude text".split(" "),readOnly:!0})],
m.prototype,"type",void 0);return m=k.__decorate([h.subclass("esri.symbols.Symbol3DLayer")],m)})},"esri/symbols/ExtrudeSymbol3DLayer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/maybe ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ./Symbol3DLayer ./edges/utils ./support/Symbol3DMaterial".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d,b){var a;m=a=function(c){function g(r){r=c.call(this,r)||this;r.type="extrude";r.size=1;r.material=null;r.castShadows=!0;r.edges=null;return r}t._inheritsLoose(g,c);g.prototype.clone=function(){return new a({edges:this.edges&&this.edges.clone(),enabled:this.enabled,material:z.isSome(this.material)?this.material.clone():null,castShadows:this.castShadows,size:this.size})};return g}(n);k.__decorate([h.enumeration({Extrude:"extrude"},{readOnly:!0})],m.prototype,"type",
void 0);k.__decorate([f.property({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],m.prototype,"size",void 0);k.__decorate([f.property({type:b["default"],json:{write:!0}})],m.prototype,"material",void 0);k.__decorate([f.property({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],m.prototype,"castShadows",void 0);k.__decorate([f.property(d.symbol3dEdgesProperty)],m.prototype,"edges",void 0);return m=a=k.__decorate([e.subclass("esri.symbols.ExtrudeSymbol3DLayer")],m)})},
"esri/symbols/edges/utils":function(){define(["exports","./Edges3D","./SketchEdges3D","./SolidEdges3D"],function(t,k,m,z){t.symbol3dEdgesProperty={types:{key:"type",base:k,typeMap:{solid:z,sketch:m}},json:{write:!0}};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/symbols/edges/Edges3D":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/lang ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../Color ../../core/screenUtils ../support/materialUtils".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d,b,a){m=function(c){function g(u){u=c.call(this,u)||this;u.color=new d([0,0,0,1]);u.extensionLength=0;u.size=b.px2pt(1);return u}t._inheritsLoose(g,c);var r=g.prototype;r.clone=function(){};r.cloneProperties=function(){return{color:z.clone(this.color),size:this.size,extensionLength:this.extensionLength}};return g}(n.JSONSupport);k.__decorate([f.property({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],m.prototype,"type",void 0);k.__decorate([f.property(a.colorAndTransparencyProperty)],
m.prototype,"color",void 0);k.__decorate([f.property({...a.screenSizeProperty,json:{write:{overridePolicy(c){return{enabled:!!c}}}}})],m.prototype,"extensionLength",void 0);k.__decorate([f.property(a.screenSizeProperty)],m.prototype,"size",void 0);return m=k.__decorate([e.subclass("esri.symbols.edges.Edges3D")],m)})},"esri/symbols/support/materialUtils":function(){define(["exports","../../core/accessorSupport/ensureType","../../Color","../../core/screenUtils","../../webdoc/support/opacityUtils"],
function(t,k,m,z,y){const x={type:Number,cast:z.toPt,json:{write:!0}},f={type:[Number],cast(h){return null!=h?h:Array.isArray(h)?h.map(z.toPt):null},json:{read:!1,write:!1}};t.colorAndTransparencyProperty={type:m,json:{type:[k.Integer],default:null,read:{source:["color","transparency"],reader:function(h,e){h=null!=e.transparency?y.transparencyToOpacity(e.transparency):1;return(e=e.color)&&Array.isArray(e)?new m([e[0]||0,e[1]||0,e[2]||0,h]):null}},write:{target:{color:{type:[k.Integer]},transparency:{type:k.Integer}},
writer:function(h,e){e.color=h.toJSON().slice(0,3);h=y.opacityToTransparency(h.a);0!==h&&(e.transparency=h)}}}};t.screenSizeProperty=x;t.stipplePatternProperty=f;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/webdoc/support/opacityUtils":function(){define(["exports","../../core/accessorSupport/ensureType"],function(t,k){t.opacityToTransparency=function(m){m=k.ensureInteger(100*(1-m));return Math.max(0,Math.min(m,100))};t.transparencyToOpacity=function(m){return Math.max(0,Math.min(1-m/
100,1))};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/symbols/edges/SketchEdges3D":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ./Edges3D".split(" "),function(t,k,
m,z,y,x,f,h,e,l,q,p){var n;m=n=function(d){function b(a){a=d.call(this,a)||this;a.type="sketch";return a}t._inheritsLoose(b,d);b.prototype.clone=function(){return new n(this.cloneProperties())};return b}(p);k.__decorate([f.enumeration({sketch:"sketch"},{readOnly:!0})],m.prototype,"type",void 0);return m=n=k.__decorate([h.subclass("esri.symbols.edges.SketchEdges3D")],m)})},"esri/symbols/edges/SolidEdges3D":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ./Edges3D".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p){var n;m=n=function(d){function b(a){a=d.call(this,a)||this;a.type="solid";return a}t._inheritsLoose(b,d);b.prototype.clone=function(){return new n(this.cloneProperties())};return b}(p);k.__decorate([f.enumeration({solid:"solid"},{readOnly:!0})],m.prototype,"type",void 0);return m=n=k.__decorate([h.subclass("esri.symbols.support.SolidEdges3D")],m)})},"esri/symbols/support/Symbol3DMaterial":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/maybe ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ./materialUtils".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d,b){var a;t.Symbol3DMaterial=a=function(c){function g(){var r=c.apply(this,arguments)||this;r.color=null;return r}k._inheritsLoose(g,c);g.prototype.clone=function(){return new a({color:y.isSome(this.color)?this.color.clone():null})};return g}(d.JSONSupport);m.__decorate([h.property(b.colorAndTransparencyProperty)],t.Symbol3DMaterial.prototype,"color",void 0);t.Symbol3DMaterial=a=m.__decorate([l.subclass("esri.symbols.support.Symbol3DMaterial")],t.Symbol3DMaterial);
t.default=t.Symbol3DMaterial;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/symbols/SimpleLineSymbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/lang ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/screenUtils ./LineSymbol ./LineSymbolMarker".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d,b,a){var c;m=new h.JSONMap({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSInsideFrame:"inside-frame",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});b=c=function(g){function r(...w){w=g.call(this,...w)||this;
w.type="simple-line";w.style="solid";w.cap="round";w.join="round";w.marker=null;w.miterLimit=2;return w}t._inheritsLoose(r,g);var u=r.prototype;u.normalizeCtorArgs=function(w,v,D,B,C,A){if(w&&"string"!==typeof w)return w;const E={};null!=w&&(E.style=w);null!=v&&(E.color=v);null!=D&&(E.width=d.toPt(D));null!=B&&(E.cap=B);null!=C&&(E.join=C);null!=A&&(E.miterLimit=d.toPt(A));return E};u.clone=function(){var w;return new c({color:z.clone(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,
miterLimit:this.miterLimit,marker:null==(w=this.marker)?void 0:w.clone()})};u.hash=function(){var w,v;return`${g.prototype.hash.call(this)}.${null==(w=this.color)?void 0:w.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${null==(v=this.marker)?void 0:v.hash()}`};return r}(b);k.__decorate([e.enumeration({esriSLS:"simple-line"},{readOnly:!0})],b.prototype,"type",void 0);k.__decorate([f.property({type:m.apiValues,json:{read:m.read,write:m.write}})],b.prototype,"style",void 0);k.__decorate([f.property({type:["butt",
"round","square"],json:{write:{overridePolicy:(g,r,u)=>({enabled:"round"!==g&&(null==u||null==u.origin)})}}})],b.prototype,"cap",void 0);k.__decorate([f.property({type:["miter","round","bevel"],json:{write:{overridePolicy:(g,r,u)=>({enabled:"round"!==g&&(null==u||null==u.origin)})}}})],b.prototype,"join",void 0);k.__decorate([f.property({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":a}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],b.prototype,"marker",void 0);
k.__decorate([f.property({type:Number,json:{read:!1,write:!1}})],b.prototype,"miterLimit",void 0);return b=c=k.__decorate([l.subclass("esri.symbols.SimpleLineSymbol")],b)})},"esri/symbols/LineSymbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ./Symbol ../core/screenUtils".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n){m=function(d){function b(a){a=d.call(this,a)||this;a.type="simple-line";a.width=.75;return a}t._inheritsLoose(b,d);b.prototype.hash=function(){return`${this.type}.${this.width}`};return b}(p);k.__decorate([f.enumeration({esriSLS:"simple-line"},{readOnly:!0})],m.prototype,"type",void 0);k.__decorate([x.property({type:Number,cast:n.toPt,json:{write:!0}})],m.prototype,"width",void 0);return m=k.__decorate([h.subclass("esri.symbols.LineSymbol")],m)})},"esri/symbols/LineSymbolMarker":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/lang ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/JSONSupport ../Color".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d,b,a){var c;m=c=function(g){function r(w){w=g.call(this,w)||this;w.placement="begin-end";w.type="line-marker";w.style="arrow";return w}t._inheritsLoose(r,g);var u=r.prototype;u.writeStyle=function(w,v,D,B){v[D]="web-map"===(null==B?void 0:B.origin)?"arrow":w};u.readColor=function(w){return w&&null!=w[0]?[w[0],w[1],w[2],w[3]/255]:w};u.writeColor=function(w,v,D,B){"web-map"!==(null==B?void 0:B.origin)&&(v[D]=w)};u.clone=function(){return new c({color:z.clone(this.color),
placement:this.placement,style:this.style})};u.hash=function(){var w;return`${this.placement}.${null==(w=this.color)?void 0:w.hash()}.${this.style}`};t._createClass(r,[{key:"color",set:function(w){this._set("color",w)}}]);return r}(b.JSONSupport);k.__decorate([f.property({type:["begin","end","begin-end"],json:{write:!0}})],m.prototype,"placement",void 0);k.__decorate([h.enumeration({"line-marker":"line-marker"},{readOnly:!0}),f.property({json:{origins:{"web-map":{write:!1}}}})],m.prototype,"type",
void 0);k.__decorate([f.property({type:"arrow circle square diamond cross x".split(" ")})],m.prototype,"style",void 0);k.__decorate([q.writer("style")],m.prototype,"writeStyle",null);k.__decorate([f.property({type:a,value:null,json:{write:{allowNull:!0}}})],m.prototype,"color",null);k.__decorate([e.reader("color")],m.prototype,"readColor",null);k.__decorate([q.writer("color")],m.prototype,"writeColor",null);return m=c=k.__decorate([l.subclass("esri.symbols.LineSymbolMarker")],m)})},"esri/symbols/FillSymbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ./Symbol ./SimpleLineSymbol".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n){m=function(d){function b(a){a=d.call(this,a)||this;a.outline=null;a.type=null;return a}t._inheritsLoose(b,d);b.prototype.hash=function(){return`${this.type}.${this.outline&&this.outline.hash()}`};return b}(p);k.__decorate([x.property({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":n}},json:{default:null,write:!0}})],m.prototype,"outline",void 0);k.__decorate([x.property({type:["simple-fill","picture-fill"],readOnly:!0})],m.prototype,
"type",void 0);return m=k.__decorate([h.subclass("esri.symbols.FillSymbol")],m)})},"esri/symbols/FillSymbol3DLayer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/maybe ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ./Symbol3DLayer ./edges/utils ./patterns/StylePattern3D ./patterns/utils ./support/colors ./support/Symbol3DFillMaterial ./support/Symbol3DOutline".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d,b,a,c,g,r){var u;m=u=function(w){function v(D){D=w.call(this,D)||this;D.type="fill";D.material=null;D.pattern=null;D.castShadows=!0;D.outline=null;D.edges=null;return D}t._inheritsLoose(v,w);v.prototype.clone=function(){return new u({edges:z.isSome(this.edges)?this.edges.clone():null,enabled:this.enabled,material:z.isSome(this.material)?this.material.clone():null,pattern:z.isSome(this.pattern)?this.pattern.clone():null,castShadows:this.castShadows,outline:z.isSome(this.outline)?
this.outline.clone():null})};v.fromSimpleFillSymbol=function(D){return new u({material:{color:(D.color||c.transparentWhite).clone()},pattern:D.style&&"solid"!==D.style?new b({style:D.style}):null,outline:D.outline?new r["default"]({size:D.outline.width||0,color:(D.outline.color||c.white).clone()}):null})};return v}(n);k.__decorate([h.enumeration({Fill:"fill"},{readOnly:!0})],m.prototype,"type",void 0);k.__decorate([f.property({type:g["default"],json:{write:!0}})],m.prototype,"material",void 0);k.__decorate([f.property(a.symbol3dPatternProperty)],
m.prototype,"pattern",void 0);k.__decorate([f.property({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],m.prototype,"castShadows",void 0);k.__decorate([f.property({type:r["default"],json:{write:!0}})],m.prototype,"outline",void 0);k.__decorate([f.property(d.symbol3dEdgesProperty)],m.prototype,"edges",void 0);return m=u=k.__decorate([e.subclass("esri.symbols.FillSymbol3DLayer")],m)})},"esri/symbols/patterns/StylePattern3D":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ./Pattern3D ./styles".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n){var d;m=d=function(b){function a(c){c=b.call(this,c)||this;c.type="style";c.style="solid";return c}t._inheritsLoose(a,b);a.prototype.clone=function(){return new d({style:this.style})};return a}(p);k.__decorate([x.property({type:["style"]})],m.prototype,"type",void 0);k.__decorate([x.property({type:n,json:{read:!0,write:!0}})],m.prototype,"style",void 0);return m=d=k.__decorate([h.subclass("esri.symbols.patterns.StylePattern3D")],m)})},"esri/symbols/patterns/Pattern3D":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p){m=function(n){function d(b){return n.call(this,b)||this}t._inheritsLoose(d,n);d.prototype.clone=function(){};return d}(p.JSONSupport);k.__decorate([x.property({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],m.prototype,"type",void 0);return m=k.__decorate([h.subclass("esri.symbols.patterns.Pattern3D")],m)})},"esri/symbols/patterns/styles":function(){define(function(){return"backward-diagonal cross diagonal-cross forward-diagonal horizontal none solid vertical".split(" ")})},
"esri/symbols/patterns/utils":function(){define(["exports","./Pattern3D","./StylePattern3D"],function(t,k,m){function z(y,x,f){if(!y)return y;switch(y.type){case "style":return x=new m,x.read(y,f),x}}k={types:{key:"type",base:k,typeMap:{style:m}},json:{read:z,write:!0}};t.read=z;t.symbol3dPatternProperty=k;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/symbols/support/colors":function(){define(["exports","../../Color"],function(t,k){const m=new k("white"),z=new k("black");k=new k([255,
255,255,0]);t.black=z;t.isBlack=function(y){return 0===y.r&&0===y.g&&0===y.b};t.transparentWhite=k;t.white=m;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/symbols/support/Symbol3DFillMaterial":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/maybe ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ./Symbol3DMaterial".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d){var b;t.Symbol3DFillMaterial=b=function(a){function c(){return a.apply(this,arguments)||this}k._inheritsLoose(c,a);c.prototype.clone=function(){return new b({color:y.isSome(this.color)?this.color.clone():null,colorMixMode:this.colorMixMode})};return c}(d["default"]);m.__decorate([e.enumeration({multiply:"multiply",replace:"replace",tint:"tint"})],t.Symbol3DFillMaterial.prototype,"colorMixMode",void 0);t.Symbol3DFillMaterial=b=m.__decorate([l.subclass("esri.symbols.support.Symbol3DFillMaterial")],
t.Symbol3DFillMaterial);t.default=t.Symbol3DFillMaterial;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/symbols/support/Symbol3DOutline":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/maybe ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../Color ../../core/screenUtils ./materialUtils".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d,b,a,c){var g;t.Symbol3DOutline=g=function(r){function u(){var w=r.apply(this,arguments)||this;w.color=new b([0,0,0,1]);w.size=a.px2pt(1);w.stipplePattern=null;w.stippleOffColor=null;return w}k._inheritsLoose(u,r);u.prototype.clone=function(){return new g({color:y.isSome(this.color)?this.color.clone():null,size:this.size,stipplePattern:this.stipplePattern?this.stipplePattern.slice():null,stippleOffColor:this.stippleOffColor?this.stippleOffColor.clone():null})};
return u}(d.JSONSupport);m.__decorate([h.property(c.colorAndTransparencyProperty)],t.Symbol3DOutline.prototype,"color",void 0);m.__decorate([h.property(c.screenSizeProperty)],t.Symbol3DOutline.prototype,"size",void 0);m.__decorate([h.property(c.stipplePatternProperty)],t.Symbol3DOutline.prototype,"stipplePattern",void 0);m.__decorate([h.property({type:b})],t.Symbol3DOutline.prototype,"stippleOffColor",void 0);t.Symbol3DOutline=g=m.__decorate([l.subclass("esri.symbols.support.Symbol3DOutline")],t.Symbol3DOutline);
t.default=t.Symbol3DOutline;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/symbols/Font":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/JSONSupport ../core/screenUtils".split(" "),function(t,k,m,z,y,x,f,h,e,l,q,p,n){var d;
m=d=function(b){function a(g){g=b.call(this,g)||this;g.decoration="none";g.family="sans-serif";g.size=9;g.style="normal";g.weight="normal";return g}t._inheritsLoose(a,b);var c=a.prototype;c.castSize=function(g){return n.toPt(g)};c.clone=function(){return new d({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})};c.hash=function(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`};return a}(p.JSONSupport);k.__decorate([y.property({type:["underline",
"line-through","none"],json:{default:"none",write:!0}})],m.prototype,"decoration",void 0);k.__decorate([y.property({type:String,json:{write:!0}})],m.prototype,"family",void 0);k.__decorate([y.property({type:Number,json:{write:{overridePolicy(b,a,c){return{enabled:!c||!c.textSymbol3D}}}}})],m.prototype,"size",void 0);k.__decorate([x.cast("size")],m.prototype,"castSize",null);k.__decorate([y.property({type:["normal","italic","oblique"],json:{default:"normal",write:!0}})],m.prototype,"style",void 0);
k.__decorate([y.property({type:["normal","bold","bolder","lighter"],json:{default:"normal",write:!0}})],m.prototype,"weight",void 0);return m=d=k.__decorate([h.subclass("esri.symbols.Font")],m)})},"esri/symbols/IconSymbol3DLayer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/maybe ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ./Symbol3DLayer ./support/materialUtils ./support/Symbol3DMaterial ./support/colors ./support/Symbol3DOutline ./support/IconSymbol3DLayerResource ./support/Symbol3DAnchorPosition2D".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d,b,a,c,g,r){function u(C){const A="width"in C?C.width:C.size,E="height"in C?C.height:C.size,G=w(C.xoffset);C=w(C.yoffset);return(G||C)&&A&&E?{x:-G/A,y:C/E}:null}function w(C){return isFinite(C)?C:0}var v;const D=y.getLogger("esri.symbols.IconSymbol3DLayer");m=v=function(C){function A(E){E=C.call(this,E)||this;E.material=null;E.resource=null;E.type="icon";E.size=12;E.anchor="center";E.anchorPosition=void 0;E.outline=void 0;return E}t._inheritsLoose(A,C);A.prototype.clone=
function(){return new v({anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),enabled:this.enabled,material:z.isSome(this.material)?this.material.clone():null,outline:z.isSome(this.outline)?this.outline.clone():null,resource:this.resource&&this.resource.clone(),size:this.size})};A.fromSimpleMarkerSymbol=function(E){const G=E.color||a.white,H=u(E),K=E.outline&&0<E.outline.width?{size:E.outline.width,color:(E.outline.color||a.white).clone()}:null;var J=v,F=E.size;{E=E.style;
const N=B[E];N?E=N:(D.warn(`${E} cannot be mapped to Icon symbol. Fallback to "circle"`),E="circle")}return new J({size:F,resource:{primitive:E},material:{color:G},outline:K,anchor:H?"relative":void 0,anchorPosition:H})};A.fromPictureMarkerSymbol=function(E){const G=!E.color||a.isBlack(E.color)?a.white:E.color,H=u(E);return new v({size:E.width<=E.height?E.height:E.width,resource:{href:E.url},material:{color:G.clone()},anchor:H?"relative":void 0,anchorPosition:H})};A.fromCIMSymbol=function(E){return new v({resource:{href:l.makeData({mediaType:"application/json",
data:JSON.stringify(E.data)})}})};return A}(n);k.__decorate([f.property({type:b["default"],json:{write:!0}})],m.prototype,"material",void 0);k.__decorate([f.property({type:g["default"],json:{write:!0}})],m.prototype,"resource",void 0);k.__decorate([h.enumeration({Icon:"icon"},{readOnly:!0})],m.prototype,"type",void 0);k.__decorate([f.property(d.screenSizeProperty)],m.prototype,"size",void 0);k.__decorate([h.enumeration({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",
topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"}),f.property({json:{default:"center"}})],m.prototype,"anchor",void 0);k.__decorate([f.property({type:r.Symbol3DAnchorPosition2D,json:{type:[Number],read:{reader:C=>new r.Symbol3DAnchorPosition2D({x:C[0],y:C[1]})},write:{writer:(C,A)=>{A.anchorPosition=[C.x,C.y]},overridePolicy(){return{enabled:"relative"===this.anchor}}}}})],m.prototype,"anchorPosition",void 0);k.__decorate([f.property({type:c["default"],
json:{write:!0}})],m.prototype,"outline",void 0);m=v=k.__decorate([e.subclass("esri.symbols.IconSymbol3DLayer")],m);const B={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};return m})},"esri/symbols/support/IconSymbol3DLayerResource":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../chunks/persistableUrlUtils ../../core/JSONSupport".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d,b,a,c){var g;z=h.strict()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});t.IconSymbol3DLayerResource=g=function(r){function u(v){return r.call(this,v)||this}k._inheritsLoose(u,r);var w=u.prototype;w.readHref=function(v,D,B){return v?a.fromJSON(v,B):D.dataURI};w.writeHref=function(v,D,B,C){v&&(n.isDataProtocol(v)?D.dataURI=v:(D.href=a.toJSON(v,C),n.isAbsolute(D.href)&&(D.href=n.normalize(D.href))))};w.clone=function(){return new g({href:this.href,
primitive:this.primitive})};return u}(c.JSONSupport);m.__decorate([f.property({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],t.IconSymbol3DLayerResource.prototype,"href",void 0);m.__decorate([l.reader("href")],t.IconSymbol3DLayerResource.prototype,"readHref",null);m.__decorate([p.writer("href",{href:{type:String},dataURI:{type:String}})],t.IconSymbol3DLayerResource.prototype,"writeHref",null);m.__decorate([e.enumeration(z)],t.IconSymbol3DLayerResource.prototype,"primitive",void 0);
t.IconSymbol3DLayerResource=g=m.__decorate([q.subclass("esri.symbols.support.IconSymbol3DLayerResource")],t.IconSymbol3DLayerResource);t.default=t.IconSymbol3DLayerResource;t.defaultPrimitive="circle";Object.defineProperty(t,"__esModule",{value:!0})})},"esri/symbols/support/Symbol3DAnchorPosition2D":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/Accessor".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n){var d;t.Symbol3DAnchorPosition2D=d=function(b){function a(){var c=b.apply(this,arguments)||this;c.x=0;c.y=0;return c}k._inheritsLoose(a,b);a.prototype.clone=function(){return new d({x:this.x,y:this.y})};return a}(n);m.__decorate([f.property({type:Number})],t.Symbol3DAnchorPosition2D.prototype,"x",void 0);m.__decorate([f.property({type:Number})],t.Symbol3DAnchorPosition2D.prototype,"y",void 0);t.Symbol3DAnchorPosition2D=d=m.__decorate([e.subclass("esri.symbols.support.Symbol3DAnchorPosition2D")],
t.Symbol3DAnchorPosition2D);t.default=t.Symbol3DAnchorPosition2D;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/symbols/LineSymbol3DLayer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/maybe ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../Color ./Symbol3DLayer ../core/screenUtils ./support/materialUtils ./support/Symbol3DMaterial ./support/colors".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d,b,a,c,g){var r;m=r=function(u){function w(v){v=u.call(this,v)||this;v.material=null;v.type="line";v.join="miter";v.cap="butt";v.size=b.px2pt(1);v.stipplePattern=null;v.stippleOffColor=null;return v}t._inheritsLoose(w,u);w.prototype.clone=function(){return new r({enabled:this.enabled,material:z.isSome(this.material)?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,stipplePattern:this.stipplePattern?this.stipplePattern.slice():null,stippleOffColor:this.stippleOffColor?
this.stippleOffColor.clone():null})};w.fromSimpleLineSymbol=function(v){return new r({size:v.width||1,cap:v.cap||"butt",join:v.join||"miter",material:{color:(v.color||g.white).clone()}})};return w}(d);k.__decorate([f.property({type:c["default"],json:{write:!0}})],m.prototype,"material",void 0);k.__decorate([h.enumeration({Line:"line"},{readOnly:!0})],m.prototype,"type",void 0);k.__decorate([f.property({type:["miter","bevel","round"],json:{write:!0,default:"miter"}})],m.prototype,"join",void 0);k.__decorate([f.property({type:["butt",
"square","round"],json:{write:!0,default:"butt"}})],m.prototype,"cap",void 0);k.__decorate([f.property(a.screenSizeProperty)],m.prototype,"size",void 0);k.__decorate([f.property(a.stipplePatternProperty)],m.prototype,"stipplePattern",void 0);k.__decorate([f.property({type:n})],m.prototype,"stippleOffColor",void 0);return m=r=k.__decorate([e.subclass("esri.symbols.LineSymbol3DLayer")],m)})},"esri/symbols/ObjectSymbol3DLayer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/maybe ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ./Symbol3DLayer ./support/Symbol3DMaterial ./support/ObjectSymbol3DLayerResource ./support/Symbol3DAnchorPosition3D".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d,b,a){var c;m=c=function(g){function r(u){u=g.call(this,u)||this;u.material=null;u.castShadows=!0;u.resource=null;u.type="object";u.width=void 0;u.height=void 0;u.depth=void 0;u.anchor=void 0;u.anchorPosition=void 0;u.heading=void 0;u.tilt=void 0;u.roll=void 0;return u}t._inheritsLoose(r,g);r.prototype.clone=function(){return new c({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),
depth:this.depth,enabled:this.enabled,height:this.height,material:z.isSome(this.material)?this.material.clone():null,castShadows:this.castShadows,resource:this.resource&&this.resource.clone(),width:this.width})};t._createClass(r,[{key:"isPrimitive",get:function(){return!this.resource||"string"!==typeof this.resource.href}}]);return r}(n);k.__decorate([f.property({type:d["default"],json:{write:!0}})],m.prototype,"material",void 0);k.__decorate([f.property({type:Boolean,nonNullable:!0,json:{write:!0,
default:!0}})],m.prototype,"castShadows",void 0);k.__decorate([f.property({type:b["default"],json:{write:!0}})],m.prototype,"resource",void 0);k.__decorate([h.enumeration({Object:"object"},{readOnly:!0})],m.prototype,"type",void 0);k.__decorate([f.property({type:Number,json:{write:!0}})],m.prototype,"width",void 0);k.__decorate([f.property({type:Number,json:{write:!0}})],m.prototype,"height",void 0);k.__decorate([f.property({type:Number,json:{write:!0}})],m.prototype,"depth",void 0);k.__decorate([h.enumeration({center:"center",
top:"top",bottom:"bottom",origin:"origin",relative:"relative"}),f.property({json:{default:"origin"}})],m.prototype,"anchor",void 0);k.__decorate([f.property({type:a.Symbol3DAnchorPosition3D,json:{type:[Number],read:{reader:g=>new a.Symbol3DAnchorPosition3D({x:g[0],y:g[1],z:g[2]})},write:{writer:(g,r)=>{r.anchorPosition=[g.x,g.y,g.z]},overridePolicy(){return{enabled:"relative"===this.anchor}}}}})],m.prototype,"anchorPosition",void 0);k.__decorate([f.property({type:Number,json:{write:!0}})],m.prototype,
"heading",void 0);k.__decorate([f.property({type:Number,json:{write:!0}})],m.prototype,"tilt",void 0);k.__decorate([f.property({type:Number,json:{write:!0}})],m.prototype,"roll",void 0);k.__decorate([f.property({readOnly:!0})],m.prototype,"isPrimitive",null);return m=c=k.__decorate([e.subclass("esri.symbols.ObjectSymbol3DLayer")],m)})},"esri/symbols/support/ObjectSymbol3DLayerResource":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../chunks/persistableUrlUtils ../../core/JSONSupport".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d,b){var a;z=h.strict()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});t.ObjectSymbol3DLayerResource=a=function(c){function g(){return c.apply(this,arguments)||this}k._inheritsLoose(g,c);g.prototype.clone=function(){return new a({href:this.href,primitive:this.primitive})};return g}(b.JSONSupport);m.__decorate([f.property({type:String,json:{read:d.read,write:d.write}})],t.ObjectSymbol3DLayerResource.prototype,
"href",void 0);m.__decorate([e.enumeration(z)],t.ObjectSymbol3DLayerResource.prototype,"primitive",void 0);t.ObjectSymbol3DLayerResource=a=m.__decorate([l.subclass("esri.symbols.support.ObjectSymbol3DLayerResource")],t.ObjectSymbol3DLayerResource);t.default=t.ObjectSymbol3DLayerResource;t.defaultPrimitive="sphere";Object.defineProperty(t,"__esModule",{value:!0})})},"esri/symbols/support/Symbol3DAnchorPosition3D":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/Accessor".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n){var d;t.Symbol3DAnchorPosition3D=d=function(b){function a(){var c=b.apply(this,arguments)||this;c.x=0;c.y=0;c.z=0;return c}k._inheritsLoose(a,b);a.prototype.clone=function(){return new d({x:this.x,y:this.y,z:this.z})};return a}(n);m.__decorate([f.property({type:Number})],t.Symbol3DAnchorPosition3D.prototype,"x",void 0);m.__decorate([f.property({type:Number})],t.Symbol3DAnchorPosition3D.prototype,"y",void 0);m.__decorate([f.property({type:Number})],t.Symbol3DAnchorPosition3D.prototype,
"z",void 0);t.Symbol3DAnchorPosition3D=d=m.__decorate([e.subclass("esri.symbols.support.Symbol3DAnchorPosition3D")],t.Symbol3DAnchorPosition3D);t.default=t.Symbol3DAnchorPosition3D;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/symbols/PathSymbol3DLayer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/maybe ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ./Symbol3DLayer ./support/Symbol3DMaterial".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d,b){var a;m=a=function(c){function g(u){u=c.call(this,u)||this;u.material=null;u.castShadows=!0;u.type="path";u.profile="circle";u.join="miter";u.cap="butt";u.width=void 0;u.height=void 0;u.anchor="center";u.profileRotation="all";return u}t._inheritsLoose(g,c);var r=g.prototype;r.readSize=function(u,w){return w.height||w.width?u:w.size};r.clone=function(){return new a({enabled:this.enabled,material:z.isSome(this.material)?this.material.clone():null,castShadows:this.castShadows,
size:this.size,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})};t._createClass(g,[{key:"size",get:function(){if(this.width&&this.height){if(this.width===this.height)return this.width}else{if(this.width)return this.width;if(this.height)return this.height}},set:function(u){this.height=this.width=u}}]);return g}(d);k.__decorate([f.property({type:b["default"],json:{write:!0}})],m.prototype,"material",void 0);
k.__decorate([f.property({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],m.prototype,"castShadows",void 0);k.__decorate([h.enumeration({Path:"path"},{readOnly:!0})],m.prototype,"type",void 0);k.__decorate([f.property({type:Number})],m.prototype,"size",null);k.__decorate([e.reader("size")],m.prototype,"readSize",null);k.__decorate([f.property({type:["circle","quad"],json:{write:!0,default:"circle"}})],m.prototype,"profile",void 0);k.__decorate([f.property({type:["miter","bevel","round"],
json:{write:!0,default:"miter"}})],m.prototype,"join",void 0);k.__decorate([f.property({type:["none","butt","square","round"],json:{write:!0,default:"butt"}})],m.prototype,"cap",void 0);k.__decorate([f.property({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],m.prototype,"width",void 0);k.__decorate([f.property({type:Number,json:{write:!0}})],m.prototype,"height",void 0);k.__decorate([f.property({type:["center","bottom","top"],json:{write:!0,default:"center"}})],
m.prototype,"anchor",void 0);k.__decorate([f.property({type:["heading","all"],json:{write:!0,default:"all"}})],m.prototype,"profileRotation",void 0);return m=a=k.__decorate([l.subclass("esri.symbols.PathSymbol3DLayer")],m)})},"esri/symbols/TextSymbol3DLayer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/lang ../core/maybe ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ./Symbol3DLayer ./support/materialUtils ./support/Symbol3DMaterial ./Font ./support/Symbol3DHalo".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d,b,a,c,g,r){var u;m=u=function(w){function v(B){B=w.call(this,B)||this;B._userSize=void 0;B.halo=null;B.material=null;B.text=void 0;B.type="text";return B}t._inheritsLoose(v,w);var D=v.prototype;D.writeFont=function(B,C,A,E){C.font=B.write({},{...E,textSymbol3D:!0});delete C.font.size};D.clone=function(){return new u({enabled:this.enabled,font:this.font&&z.clone(this.font),halo:this.halo&&z.clone(this.halo),material:y.isSome(this.material)?this.material.clone():
null,size:this.size,text:this.text})};v.fromTextSymbol=function(B){var C=B.haloColor;var A=B.haloSize;C=C&&0<A?{color:z.clone(C),size:A}:null;A=B.font?B.font.clone():new g;return new u({size:A.size,font:A,halo:C,material:B.color?{color:B.color.clone()}:null,text:B.text})};t._createClass(v,[{key:"font",get:function(){return this._get("font")||null},set:function(B){B&&this._userSize&&(B.size=this._userSize);this._set("font",B)}},{key:"size",get:function(){return null!=this._userSize?this._userSize:
this.font&&null!=this.font.size?this.font.size:9},set:function(B){this._userSize=B;this.font&&(this.font.size=this._userSize);this.notifyChange("size")}}]);return v}(b);k.__decorate([h.property({type:g,json:{write:!0}})],m.prototype,"font",null);k.__decorate([q.writer("font")],m.prototype,"writeFont",null);k.__decorate([h.property({type:r["default"],json:{write:!0}})],m.prototype,"halo",void 0);k.__decorate([h.property({type:c["default"],json:{write:!0}})],m.prototype,"material",void 0);k.__decorate([h.property(a.screenSizeProperty),
h.property()],m.prototype,"size",null);k.__decorate([h.property({type:String,json:{write:!0}})],m.prototype,"text",void 0);k.__decorate([e.enumeration({Text:"text"},{readOnly:!0})],m.prototype,"type",void 0);return m=u=k.__decorate([l.subclass("esri.symbols.TextSymbol3DLayer")],m)})},"esri/symbols/support/Symbol3DHalo":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/lang ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../Color ./materialUtils".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d,b,a){var c;t.Symbol3DHalo=c=function(g){function r(){var u=g.apply(this,arguments)||this;u.color=new b([0,0,0,1]);u.size=0;return u}k._inheritsLoose(r,g);r.prototype.clone=function(){return new c({color:y.clone(this.color),size:this.size})};return r}(d.JSONSupport);m.__decorate([h.property(a.colorAndTransparencyProperty)],t.Symbol3DHalo.prototype,"color",void 0);m.__decorate([h.property(a.screenSizeProperty)],t.Symbol3DHalo.prototype,"size",void 0);t.Symbol3DHalo=
c=m.__decorate([l.subclass("esri.symbols.support.Symbol3DHalo")],t.Symbol3DHalo);t.default=t.Symbol3DHalo;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/symbols/WaterSymbol3DLayer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/lang ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../Color ./Symbol3DLayer".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d){var b;m=b=function(c){function g(r){r=c.call(this,r)||this;r.color=a.clone();r.type="water";r.waterbodySize="medium";r.waveDirection=null;r.waveStrength="moderate";return r}t._inheritsLoose(g,c);g.prototype.clone=function(){return new b({color:z.clone(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})};return g}(d);k.__decorate([f.property({type:n,nonNullable:!0,json:{type:[x.Integer],write:(c,g,r)=>
g[r]=c.toArray(1),default:()=>a.clone(),defaultEquals:c=>c.toCss(!0)===a.toCss(!0)}})],m.prototype,"color",void 0);k.__decorate([h.enumeration({Water:"water"},{readOnly:!0})],m.prototype,"type",void 0);k.__decorate([f.property({type:["small","medium","large"],json:{write:!0,default:"medium"}})],m.prototype,"waterbodySize",void 0);k.__decorate([f.property({type:Number,json:{write:!0,default:null}})],m.prototype,"waveDirection",void 0);k.__decorate([f.property({type:["calm","rippled","slight","moderate"],
json:{write:!0,default:"moderate"}})],m.prototype,"waveStrength",void 0);m=b=k.__decorate([e.subclass("esri.symbols.WaterSymbol3DLayer")],m);const a=new n([0,119,190]);return m})},"esri/symbols/Symbol3D":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/jsonMap ../core/accessorSupport/decorators/reader ../core/Warning ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../chunks/persistableUrlUtils ../core/Collection ./Symbol ./Symbol3DLayer ./ExtrudeSymbol3DLayer ./FillSymbol3DLayer ./IconSymbol3DLayer ../core/collectionUtils ../portal/Portal ./LineSymbol3DLayer ./ObjectSymbol3DLayer ./PathSymbol3DLayer ./TextSymbol3DLayer ./WaterSymbol3DLayer ./support/StyleOrigin ./support/Thumbnail".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d,b,a,c,g,r,u,w,v,D,B,C,A,E,G,H,K){const J={icon:w,object:C,line:B,path:A,fill:u,extrude:r,text:E,water:G};m=a.ofType({base:g,key:"type",typeMap:J,errorContext:"symbol-layer"});const F=z.getLogger("esri.symbols.Symbol3D");z=function(N){function L(S){S=N.call(this,S)||this;S.styleOrigin=null;S.thumbnail=null;S.type=null;const Q=S.__accessor__&&S.__accessor__.metadatas&&S.__accessor__.metadatas.symbolLayers;S._set("symbolLayers",new (Q&&Q.type||a));return S}t._inheritsLoose(L,
N);var M=L.prototype;M.readStyleOrigin=function(S,Q,U){if(S.styleUrl&&S.name)return Q=b.fromJSON(S.styleUrl,U),new H({styleUrl:Q,name:S.name});if(S.styleName&&S.name)return new H({portal:U&&U.portal||D.getDefault(),styleName:S.styleName,name:S.name});U&&U.messages&&U.messages.push(new e("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:U,definition:S}))};M.writeStyleOrigin=function(S,Q,U,W){S.styleUrl&&S.name?(U=b.toJSON(S.styleUrl,
W),p.isAbsolute(U)&&(U=p.normalize(U)),Q.styleOrigin={styleUrl:U,name:S.name}):S.styleName&&S.name&&(S.portal&&W&&W.portal&&!p.hasSamePortal(S.portal.restUrl,W.portal.restUrl)?W&&W.messages&&W.messages.push(new e("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):Q.styleOrigin={styleName:S.styleName,name:S.name})};M.normalizeCtorArgs=function(S){return S instanceof g||S&&J[S.type]?{symbolLayers:[S]}:
Array.isArray(S)?{symbolLayers:S}:S};t._createClass(L,[{key:"color",get:function(){return null},set:function(S){F.error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}},{key:"symbolLayers",set:function(S){v.referenceSetter(S,this._get("symbolLayers"))}}]);return L}(c);k.__decorate([y.property({json:{read:!1,write:!1}})],z.prototype,"color",null);k.__decorate([y.property({type:m,nonNullable:!0,json:{write:!0}}),x.cast(v.castForReferenceSetter)],
z.prototype,"symbolLayers",null);k.__decorate([y.property({type:H})],z.prototype,"styleOrigin",void 0);k.__decorate([h.reader("styleOrigin")],z.prototype,"readStyleOrigin",null);k.__decorate([q.writer("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],z.prototype,"writeStyleOrigin",null);k.__decorate([y.property({type:K["default"],json:{read:!1}})],z.prototype,"thumbnail",void 0);k.__decorate([y.property({type:["point-3d",
"line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],z.prototype,"type",void 0);return z=k.__decorate([l.subclass("esri.symbols.Symbol3D")],z)})},"esri/core/collectionUtils":function(){define(["exports","./Collection"],function(t,k){t.castForReferenceSetter=function(m){return m};t.referenceSetter=function(m,z,y=k){z||(z=new y);if(z===m)return z;z.removeAll();m&&(Array.isArray(m)||"items"in m&&Array.isArray(m.items))?z.addMany(m):m&&z.add(m);return z};Object.defineProperty(t,"__esModule",{value:!0})})},
"esri/portal/Portal":function(){define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../config ../core/maybe ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/Error ../core/urlUtils ../core/uuid ./support/resourceExtension ../core/promiseUtils ../core/JSONSupport ../geometry/Extent ../intl/locale ../kernel ../request ../intl ../core/Loadable ./PortalQueryParams ./PortalQueryResult ./PortalUser".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d,b,a,c,g,r,u,w,v,D,B,C,A,E){function G(F){return Object.freeze({__proto__:null,"default":F})}var H;let K;const J={PortalGroup:()=>new Promise(function(F,N){t(["./PortalGroup"],function(L){F(G(L))},N)}),PortalItem:()=>new Promise(function(F,N){t(["./PortalItem"],function(L){F(G(L))},N)}),PortalUser:()=>new Promise(function(F,N){t(["./PortalUser"],function(L){F(G(L))},N)})};z=H=function(F){function N(M){M=F.call(this,M)||this;M.access=null;M.allSSL=!1;M.authMode=
"auto";M.authorizedCrossOriginDomains=null;M.basemapGalleryGroupQuery=null;M.bingKey=null;M.canListApps=!1;M.canListData=!1;M.canListPreProvisionedItems=!1;M.canProvisionDirectPurchase=!1;M.canSearchPublic=!0;M.canShareBingPublic=!1;M.canSharePublic=!1;M.canSignInArcGIS=!1;M.canSignInIDP=!1;M.colorSetsGroupQuery=null;M.commentsEnabled=!1;M.created=null;M.culture=null;M.customBaseUrl=null;M.defaultBasemap=null;M.defaultExtent=null;M.defaultVectorBasemap=null;M.description=null;M.eueiEnabled=null;M.featuredGroups=
null;M.featuredItemsGroupQuery=null;M.galleryTemplatesGroupQuery=null;M.livingAtlasGroupQuery=null;M.hasCategorySchema=!1;M.helperServices=null;M.homePageFeaturedContent=null;M.homePageFeaturedContentCount=null;M.httpPort=null;M.httpsPort=null;M.id=null;M.ipCntryCode=null;M.isPortal=!1;M.isReadOnly=!1;M.layerTemplatesGroupQuery=null;M.maxTokenExpirationMinutes=null;M.modified=null;M.name=null;M.portalHostname=null;M.portalMode=null;M.portalProperties=null;M.region=null;M.rotatorPanels=null;M.showHomePageDescription=
!1;M.sourceJSON=null;M.supportsHostedServices=!1;M.symbolSetsGroupQuery=null;M.templatesGroupQuery=null;M.units=null;M.url=y.portalUrl;M.urlKey=null;M.user=null;M.useStandardizedQuery=!1;M.useVectorBasemaps=!1;M.vectorBasemapGalleryGroupQuery=null;return M}k._inheritsLoose(N,F);var L=N.prototype;L.normalizeCtorArgs=function(M){return"string"===typeof M?{url:M}:M};L.destroy=function(){this._esriId_credentialCreateHandle&&(this._esriId_credentialCreateHandle.remove(),this._esriId_credentialCreateHandle=
null)};L.readAuthorizedCrossOriginDomains=function(M){if(M)for(const S of M)-1===y.request.trustedServers.indexOf(S)&&y.request.trustedServers.push(S);return M};L.readDefaultBasemap=function(M){return M?(M=K.fromJSON(M),M.portalItem={portal:this},M):null};L.readDefaultVectorBasemap=function(M){return M?(M=K.fromJSON(M),M.portalItem={portal:this},M):null};L.readUrlKey=function(M){return M?M.toLowerCase():M};L.readUser=function(M){let S=null;M&&(S=E.fromJSON(M),S.portal=this);return S};L.load=function(M){const S=
(new Promise(function(Q,U){t(["../Basemap"],function(W){Q(G(W))},U)})).then(({default:Q})=>{c.throwIfAborted(M);K=Q}).then(()=>this.sourceJSON?this.sourceJSON:this._fetchSelf(this.authMode,!1,M)).then(Q=>{if(w.id){const U=w.id;this.credential=U.findCredential(this.restUrl);this.credential||this.authMode!==H.AUTH_MODE_AUTO||(this._esriId_credentialCreateHandle=U.on("credential-create",()=>{U.findCredential(this.restUrl)&&this._signIn()}))}this.sourceJSON=Q;this.read(Q)});this.addResolvingPromise(S);
return Promise.resolve(this)};L.createClosestFacilityTask=async function(){await this.load();const M=this._getHelperServiceUrl("closestFacility");return new (await new Promise(function(S,Q){t(["../tasks/ClosestFacilityTask"],function(U){S(G(U))},Q)})).default(M)};L.createElevationLayers=async function(){await this.load();const M=this._getHelperService("defaultElevationLayers"),S=(await new Promise(function(Q,U){t(["../layers/ElevationLayer"],function(W){Q(G(W))},U)})).default;return M?M.map(Q=>new S({id:Q.id,
url:Q.url})):[]};L.createGeometryService=async function(){await this.load();const M=this._getHelperServiceUrl("geometry");return new (await new Promise(function(S,Q){t(["../tasks/GeometryService"],function(U){S(G(U))},Q)})).default({url:M})};L.createPrintTask=async function(){await this.load();const M=this._getHelperServiceUrl("printTask");return new (await new Promise(function(S,Q){t(["../tasks/PrintTask"],function(U){S(G(U))},Q)})).default(M)};L.createRouteTask=async function(){await this.load();
const M=this._getHelperServiceUrl("route");return new (await new Promise(function(S,Q){t(["../tasks/RouteTask"],function(U){S(G(U))},Q)})).default(M)};L.createServiceAreaTask=async function(){await this.load();const M=this._getHelperServiceUrl("serviceArea");return new (await new Promise(function(S,Q){t(["../tasks/ServiceAreaTask"],function(U){S(G(U))},Q)})).default(M)};L.fetchBasemaps=function(M,S){const Q=new C;Q.query=M||(this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery);
Q.disableExtraQuery=!0;return this.queryGroups(Q,S).then(U=>{Q.num=100;Q.query='type:"Web Map" -type:"Web Application"';return U.total?(U=U.results[0],Q.sortField=U.sortField||"name",Q.sortOrder=U.sortOrder||"desc",U.queryItems(Q,S)):null}).then(U=>U&&U.total?U.results.filter(W=>"Web Map"===W.type).map(W=>new K({portalItem:W})):[])};L.fetchCategorySchema=function(M){return this.hasCategorySchema?this._request(this.restUrl+"/portals/self/categorySchema",M).then(S=>S.categorySchema):c.isAborted(M)?
Promise.reject(c.createAbortError()):Promise.resolve([])};L.fetchFeaturedGroups=function(M){const S=this.featuredGroups,Q=new C;Q.num=100;Q.sortField="title";if(S&&S.length){const U=[];for(const W of S)U.push(`(title:"${W.title}" AND owner:${W.owner})`);Q.query=U.join(" OR ");return this.queryGroups(Q,M).then(W=>W.results)}return c.isAborted(M)?Promise.reject(c.createAbortError()):Promise.resolve([])};L.fetchRegions=function(M){const S=this.user&&this.user.culture||this.culture||u.getLocale();return this._request(this.restUrl+
"/portals/regions",{...M,query:{culture:S}})};N.getDefault=function(){if(!H._default||H._default.destroyed)H._default=new H;return H._default};L.queryGroups=function(M,S){return this._queryPortal("/community/groups",M,"PortalGroup",S)};L.queryItems=function(M,S){return this._queryPortal("/search",M,"PortalItem",S)};L.queryUsers=function(M,S){M.sortField||(M.sortField="username");return this._queryPortal("/community/users",M,"PortalUser",S)};L.toJSON=function(){throw new n("internal:not-yet-implemented",
"Portal.toJSON is not yet implemented");};N.fromJSON=function(M){if(!M)return null;if(M.declaredClass)throw Error("JSON object is already hydrated");return new H({sourceJSON:M})};L._getHelperService=function(M){const S=this.helperServices&&this.helperServices[M];if(!S)throw new n("portal:service-not-found",`The \`helperServices\` do not include an entry named "${M}"`);return S};L._getHelperServiceUrl=function(M){const S=this._getHelperService(M);if(!S.url)throw new n("portal:service-url-not-found",
`The \`helperServices\` entry "${M}" does not include a \`url\` value`);return S.url};L._fetchSelf=function(M=this.authMode,S=!1,Q){const U=this.restUrl+"/portals/self";M={authMode:M,query:{culture:u.getLocale().toLowerCase()},...Q};"auto"===M.authMode&&(M.authMode="no-prompt");S&&(M.query.default=!0);return this._request(U,M)};L._queryPortal=function(M,S,Q,U){const W=h.ensureType(C,S),fa=Z=>this._request(this.restUrl+M,{...W.toRequestOptions(this),...U}).then(T=>{const ba=W.clone();ba.start=T.nextStart;
return new A({nextQueryParams:ba,queryParams:W,total:T.total,results:H._resultsToTypedArray(Z,{portal:this},T,U)})}).then(T=>Promise.all(T.results.map(ba=>"function"===typeof ba.when?ba.when():T)).then(()=>T,ba=>{c.throwIfAbortError(ba);return T}));return Q&&J[Q]?J[Q]().then(({default:Z})=>{c.throwIfAborted(U);return fa(Z)}):fa()};L._signIn=function(){if(this.authMode===H.AUTH_MODE_ANONYMOUS)return Promise.reject(new n("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if("failed"===
this.loadStatus)return Promise.reject(this.loadError);const M=S=>Promise.resolve().then(()=>{if("not-loaded"===this.loadStatus)return S||(this.authMode="immediate"),this.load().then(()=>null);if("loading"===this.loadStatus)return this.load().then(()=>{if(this.credential)return null;this.credential=S;return this._fetchSelf("immediate")});if(this.user&&this.credential===S)return null;this.credential=S;return this._fetchSelf("immediate")}).then(Q=>{Q&&(this.sourceJSON=Q,this.read(Q))});return w.id?w.id.getCredential(this.restUrl).then(S=>
M(S)):M(this.credential)};L._normalizeSSL=function(M){return M.replace(/^http:/i,"https:").replace(":7080",":7443")};L._normalizeUrl=function(M){const S=this.credential&&this.credential.token;return this._normalizeSSL(S?M+(-1<M.indexOf("?")?"\x26":"?")+"token\x3d"+S:M)};L._requestToTypedArray=function(M,S,Q){return this._request(M,S).then(U=>{const W=H._resultsToTypedArray(Q,{portal:this},U);return Promise.all(W.map(fa=>"function"===typeof fa.when?fa.when():U)).then(()=>W,()=>W)})};L._request=function(M,
S={}){const Q={f:"json",...S.query},{authMode:U=this.authMode===H.AUTH_MODE_ANONYMOUS?"anonymous":"auto",body:W=null,cacheBust:fa=!1,method:Z="auto",responseType:T="json",signal:ba}=S;S={authMode:U,body:W,cacheBust:fa,method:Z,query:Q,responseType:T,timeout:0,signal:ba};return v(this._normalizeSSL(M),S).then(ha=>ha.data)};N._resultsToTypedArray=function(M,S,Q,U){if(Q){const W=x.isSome(U)?U.signal:null;Q=Q.listings||Q.notifications||Q.userInvitations||Q.tags||Q.items||Q.groups||Q.comments||Q.provisions||
Q.results||Q.relatedItems||Q;if(M||S)Q=Q.map(fa=>{fa=Object.assign(M?M.fromJSON(fa):fa,S);"function"===typeof fa.load&&fa.load(W);return fa})}else Q=[];return Q};k._createClass(N,[{key:"extraQuery",get:function(){const M=!(this.user&&this.user.orgId)||this.canSearchPublic;return this.id&&!M?` AND orgid:${this.id}`:null}},{key:"isOrganization",get:function(){return!!this.access}},{key:"restUrl",get:function(){let M=this.url;if(M){const S=M.indexOf("/sharing");M=0<S?M.substring(0,S):this.url.replace(/\/+$/,
"");M+="/sharing/rest"}return M}},{key:"thumbnailUrl",get:function(){const M=this.restUrl,S=this.thumbnail;return M&&S?this._normalizeSSL(M+"/portals/self/resources/"+S):null}}]);return N}(g.JSONSupportMixin(B));z.AUTH_MODE_ANONYMOUS="anonymous";z.AUTH_MODE_AUTO="auto";z.AUTH_MODE_IMMEDIATE="immediate";m.__decorate([e.property()],z.prototype,"access",void 0);m.__decorate([e.property()],z.prototype,"allSSL",void 0);m.__decorate([e.property()],z.prototype,"authMode",void 0);m.__decorate([e.property()],
z.prototype,"authorizedCrossOriginDomains",void 0);m.__decorate([q.reader("authorizedCrossOriginDomains")],z.prototype,"readAuthorizedCrossOriginDomains",null);m.__decorate([e.property()],z.prototype,"basemapGalleryGroupQuery",void 0);m.__decorate([e.property()],z.prototype,"bingKey",void 0);m.__decorate([e.property()],z.prototype,"canListApps",void 0);m.__decorate([e.property()],z.prototype,"canListData",void 0);m.__decorate([e.property()],z.prototype,"canListPreProvisionedItems",void 0);m.__decorate([e.property()],
z.prototype,"canProvisionDirectPurchase",void 0);m.__decorate([e.property()],z.prototype,"canSearchPublic",void 0);m.__decorate([e.property()],z.prototype,"canShareBingPublic",void 0);m.__decorate([e.property()],z.prototype,"canSharePublic",void 0);m.__decorate([e.property()],z.prototype,"canSignInArcGIS",void 0);m.__decorate([e.property()],z.prototype,"canSignInIDP",void 0);m.__decorate([e.property()],z.prototype,"colorSetsGroupQuery",void 0);m.__decorate([e.property()],z.prototype,"commentsEnabled",
void 0);m.__decorate([e.property({type:Date})],z.prototype,"created",void 0);m.__decorate([e.property()],z.prototype,"credential",void 0);m.__decorate([e.property()],z.prototype,"culture",void 0);m.__decorate([e.property()],z.prototype,"currentVersion",void 0);m.__decorate([e.property()],z.prototype,"customBaseUrl",void 0);m.__decorate([e.property()],z.prototype,"defaultBasemap",void 0);m.__decorate([q.reader("defaultBasemap")],z.prototype,"readDefaultBasemap",null);m.__decorate([e.property({type:r})],
z.prototype,"defaultExtent",void 0);m.__decorate([e.property()],z.prototype,"defaultVectorBasemap",void 0);m.__decorate([q.reader("defaultVectorBasemap")],z.prototype,"readDefaultVectorBasemap",null);m.__decorate([e.property()],z.prototype,"description",void 0);m.__decorate([e.property()],z.prototype,"eueiEnabled",void 0);m.__decorate([e.property({readOnly:!0})],z.prototype,"extraQuery",null);m.__decorate([e.property()],z.prototype,"featuredGroups",void 0);m.__decorate([e.property()],z.prototype,
"featuredItemsGroupQuery",void 0);m.__decorate([e.property()],z.prototype,"galleryTemplatesGroupQuery",void 0);m.__decorate([e.property()],z.prototype,"livingAtlasGroupQuery",void 0);m.__decorate([e.property()],z.prototype,"hasCategorySchema",void 0);m.__decorate([e.property()],z.prototype,"helpBase",void 0);m.__decorate([e.property()],z.prototype,"helperServices",void 0);m.__decorate([e.property()],z.prototype,"helpMap",void 0);m.__decorate([e.property()],z.prototype,"homePageFeaturedContent",void 0);
m.__decorate([e.property()],z.prototype,"homePageFeaturedContentCount",void 0);m.__decorate([e.property()],z.prototype,"httpPort",void 0);m.__decorate([e.property()],z.prototype,"httpsPort",void 0);m.__decorate([e.property()],z.prototype,"id",void 0);m.__decorate([e.property()],z.prototype,"ipCntryCode",void 0);m.__decorate([e.property({readOnly:!0})],z.prototype,"isOrganization",null);m.__decorate([e.property()],z.prototype,"isPortal",void 0);m.__decorate([e.property()],z.prototype,"isReadOnly",
void 0);m.__decorate([e.property()],z.prototype,"layerTemplatesGroupQuery",void 0);m.__decorate([e.property()],z.prototype,"maxTokenExpirationMinutes",void 0);m.__decorate([e.property({type:Date})],z.prototype,"modified",void 0);m.__decorate([e.property()],z.prototype,"name",void 0);m.__decorate([e.property()],z.prototype,"portalHostname",void 0);m.__decorate([e.property()],z.prototype,"portalMode",void 0);m.__decorate([e.property()],z.prototype,"portalProperties",void 0);m.__decorate([e.property()],
z.prototype,"region",void 0);m.__decorate([e.property({readOnly:!0})],z.prototype,"restUrl",null);m.__decorate([e.property()],z.prototype,"rotatorPanels",void 0);m.__decorate([e.property()],z.prototype,"showHomePageDescription",void 0);m.__decorate([e.property()],z.prototype,"sourceJSON",void 0);m.__decorate([e.property()],z.prototype,"staticImagesUrl",void 0);m.__decorate([e.property()],z.prototype,"stylesGroupQuery",void 0);m.__decorate([e.property()],z.prototype,"supportsHostedServices",void 0);
m.__decorate([e.property()],z.prototype,"symbolSetsGroupQuery",void 0);m.__decorate([e.property()],z.prototype,"templatesGroupQuery",void 0);m.__decorate([e.property()],z.prototype,"thumbnail",void 0);m.__decorate([e.property({readOnly:!0})],z.prototype,"thumbnailUrl",null);m.__decorate([e.property()],z.prototype,"units",void 0);m.__decorate([e.property()],z.prototype,"url",void 0);m.__decorate([e.property()],z.prototype,"urlKey",void 0);m.__decorate([q.reader("urlKey")],z.prototype,"readUrlKey",
null);m.__decorate([e.property()],z.prototype,"user",void 0);m.__decorate([q.reader("user")],z.prototype,"readUser",null);m.__decorate([e.property()],z.prototype,"useStandardizedQuery",void 0);m.__decorate([e.property()],z.prototype,"useVectorBasemaps",void 0);m.__decorate([e.property()],z.prototype,"vectorBasemapGalleryGroupQuery",void 0);return z=H=m.__decorate([p.subclass("esri.portal.Portal")],z)})},"esri/core/Loadable":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./accessorSupport/decorators/property ./Warning ./accessorSupport/decorators/subclass ./Error ./promiseUtils ./Promise".split(" "),
function(t,k,m,z,y,x,f,h){const e=l=>{l=function(q){function p(...d){var b=q.call(this,...d)||this;b._loadController=null;b.loadError=null;b.loadStatus="not-loaded";b._set("loadWarnings",[]);b.addResolvingPromise(new Promise(a=>{const c=b.load.bind(t._assertThisInitialized(b));b.load=g=>{const r=new Promise((u,w)=>{const v=f.onAbortOrThrow(g,w);b.destroyed&&w(new x("load:instance-destroyed",`Instance of '${b.declaredClass||b.constructor.name}' is already destroyed`,{instance:t._assertThisInitialized(b)}));
b._promiseProps.when(u,w).finally(()=>{v&&v.remove()})});if("not-loaded"===b.loadStatus){b._set("loadStatus","loading");const u=b._loadController=f.createAbortController();c({signal:u.signal});f.onAbort(u.signal,()=>{b._promiseProps.abort()})}a();return r}}));b.when(()=>{b._set("loadStatus","loaded");b._loadController=null},a=>{b._set("loadStatus","failed");b._set("loadError",a);b._loadController=null});return b}t._inheritsLoose(p,q);var n=p.prototype;n.load=function(){return null};n.cancelLoad=function(){var d;
if(this.isFulfilled())return this;this._set("loadError",new x("load:cancelled","Cancelled"));null==(d=this._loadController)?void 0:d.abort();return this};t._createClass(p,[{key:"loaded",get:function(){return"loaded"===this.loadStatus}},{key:"loadWarnings",get:function(){return this._get("loadWarnings")}}]);return p}(l);k.__decorate([m.property({readOnly:!0})],l.prototype,"loaded",null);k.__decorate([m.property({readOnly:!0})],l.prototype,"loadError",void 0);k.__decorate([m.property()],l.prototype,
"loadStatus",void 0);k.__decorate([m.property({type:[z],readOnly:!0})],l.prototype,"loadWarnings",null);return l=k.__decorate([y.subclass("esri.core.Loadable")],l)};h=function(l){function q(){return l.apply(this,arguments)||this}t._inheritsLoose(q,l);return q}(e(h.EsriPromise));h=k.__decorate([y.subclass("esri.core.Loadable")],h);(function(l){l.LoadableMixin=e;l.isLoadable=function(q){return!(!q||!q.load)}})(h||(h={}));return h})},"esri/core/Promise":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./maybe ./accessorSupport/decorators/subclass ./promiseUtils ./Accessor".split(" "),
function(t,k,m,z,y,x,f){let h=function(){function l(p){this.instance=p;this._resolver=x.createDeferred();this._status=0;this._resolvingPromises=[];this._resolver.promise.then(()=>{this._status=1;this._cleanUp()},()=>{this._status=2;this._cleanUp()})}var q=l.prototype;q.addResolvingPromise=function(p){this._resolvingPromises.push(p);this._tryResolve()};q.isResolved=function(){return 1===this._status};q.isRejected=function(){return 2===this._status};q.isFulfilled=function(){return 0!==this._status};
q.abort=function(){this._resolver.reject(x.createAbortError())};q.when=function(p,n){return this._resolver.promise.then(p,n)};q._cleanUp=function(){this._allPromise=this._resolvingPromises=this._allPromise=null};q._tryResolve=function(){if(!this.isFulfilled()){var p=x.createDeferred(),n=[...this._resolvingPromises,z.assumeNonNull(p.promise)],d=this._allPromise=Promise.all(n);d.then(()=>{this.isFulfilled()||this._allPromise!==d||this._resolver.resolve(this.instance)},b=>{this.isFulfilled()||this._allPromise!==
d||x.isAbortError(b)||this._resolver.reject(b)});p.resolve()}};return l}();const e=l=>{l=function(q){function p(...d){d=q.call(this,...d)||this;d._promiseProps=new h(k._assertThisInitialized(d));d.addResolvingPromise(Promise.resolve());return d}k._inheritsLoose(p,q);var n=p.prototype;n.isResolved=function(){return this._promiseProps.isResolved()};n.isRejected=function(){return this._promiseProps.isRejected()};n.isFulfilled=function(){return this._promiseProps.isFulfilled()};n.when=function(d,b){return(new Promise((a,
c)=>{this._promiseProps.when(a,c)})).then(d,b)};n.catch=function(d){return this.when(null,d)};n.addResolvingPromise=function(d){d&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in d?d.when():d)};return p}(l);return l=m.__decorate([y.subclass("esri.core.Promise")],l)};t.EsriPromise=function(l){function q(){return l.apply(this,arguments)||this}k._inheritsLoose(q,l);return q}(e(f));t.EsriPromise=m.__decorate([y.subclass("esri.core.Promise")],t.EsriPromise);
t.EsriPromiseMixin=e;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/portal/PortalQueryParams":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/lang ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ./support/resourceExtension ../core/Accessor ../geometry/SpatialReference ../geometry/support/webMercatorUtils ../geometry/Extent".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d,b,a){var c;const g=new h.JSONMap({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});m=c=function(r){function u(v){v=r.call(this,v)||this;v.categories=null;v.disableExtraQuery=!1;v.extent=null;v.num=10;v.query=null;v.sortField=null;v.start=1;return v}t._inheritsLoose(u,r);var w=u.prototype;w.clone=function(){return new c({categories:this.categories?z.clone(this.categories):null,disableExtraQuery:this.disableExtraQuery,
extent:this.extent?this.extent.clone():null,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})};w.toRequestOptions=function(v,D){let B;this.categories&&(B=this.categories.map(E=>Array.isArray(E)?JSON.stringify(E):E));let C;if(this.extent){var A=b.project(this.extent,d.WGS84);A&&(C=`${A.xmin},${A.ymin},${A.xmax},${A.ymax}`)}A=this.query;!this.disableExtraQuery&&v.extraQuery&&(A="("+A+")"+v.extraQuery);v={categories:B,bbox:C,q:A,num:this.num,sortField:null,
sortOrder:null,start:this.start};this.sortField&&(v.sortField=this.sortField.split(",").map(E=>g.toJSON(E.trim())).join(","),v.sortOrder=this.sortOrder);return{query:{...D,...v}}};t._createClass(u,[{key:"sortOrder",get:function(){return this._get("sortOrder")||"asc"},set:function(v){"asc"!==v&&"desc"!==v||this._set("sortOrder",v)}}]);return u}(n);k.__decorate([f.property()],m.prototype,"categories",void 0);k.__decorate([f.property()],m.prototype,"disableExtraQuery",void 0);k.__decorate([f.property({type:a})],
m.prototype,"extent",void 0);k.__decorate([f.property()],m.prototype,"num",void 0);k.__decorate([f.property()],m.prototype,"query",void 0);k.__decorate([f.property()],m.prototype,"sortField",void 0);k.__decorate([f.property()],m.prototype,"sortOrder",null);k.__decorate([f.property()],m.prototype,"start",void 0);return m=c=k.__decorate([e.subclass("esri.portal.PortalQueryParams")],m)})},"esri/portal/PortalQueryResult":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ./support/resourceExtension ../core/Accessor".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p){m=function(n){function d(b){b=n.call(this,b)||this;b.nextQueryParams=null;b.queryParams=null;b.results=null;b.total=null;return b}t._inheritsLoose(d,n);return d}(p);k.__decorate([x.property()],m.prototype,"nextQueryParams",void 0);k.__decorate([x.property()],m.prototype,"queryParams",void 0);k.__decorate([x.property()],m.prototype,"results",void 0);k.__decorate([x.property()],m.prototype,"total",void 0);return m=k.__decorate([h.subclass("esri.portal.PortalQueryResult")],
m)})},"esri/portal/PortalUser":function(){define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/Error ../core/urlUtils ../core/uuid ./support/resourceExtension ../core/JSONSupport ./PortalFolder ./PortalGroup".split(" "),function(t,k,m,z,y,x,f,h,e,l,q,p,n,d,b,a){var c;z=c=function(g){function r(...w){w=g.call(this,
...w)||this;w.access=null;w.created=null;w.culture=null;w.description=null;w.email=null;w.fullName=null;w.modified=null;w.orgId=null;w.portal=null;w.preferredView=null;w.privileges=null;w.region=null;w.role=null;w.roleId=null;w.sourceJSON=null;w.units=null;w.username=null;w.userType=null;return w}k._inheritsLoose(r,g);var u=r.prototype;u.addItem=function(w){const v=w&&w.item;var D=w&&w.data;w=w&&w.folder;const B={method:"post"};v&&(B.query=v.createPostQuery(),null!=D&&("string"===typeof D?B.query.text=
D:"object"===typeof D&&(B.query.text=JSON.stringify(D))));D=this.userContentUrl;w&&(D+="/"+("string"===typeof w?w:w.id));return this.portal._request(D+"/addItem",B).then(C=>{v.id=C.id;v.portal=this.portal;return v.loaded?v.reload():v.load()})};u.deleteItem=function(w){let v=this.userContentUrl;w.ownerFolder&&(v+="/"+w.ownerFolder);return this.portal._request(v+`/items/${w.id}/delete`,{method:"post"}).then(()=>{w.id=null;w.portal=null})};u.deleteItems=function(w){const v=this.userContentUrl+"/deleteItems";
var D=w.map(B=>B.id);return D.length?(D={method:"post",query:{items:D.join(",")}},this.portal._request(v,D).then(()=>{w.forEach(B=>{B.id=null;B.portal=null})})):Promise.resolve(void 0)};u.fetchFolders=function(){return this.portal._request(this.userContentUrl,{query:{num:1}}).then(w=>w&&w.folders?w.folders.map(v=>{v=b.fromJSON(v);v.portal=this.portal;return v}):[])};u.fetchGroups=function(){return this.portal._request(this.url).then(w=>w&&w.groups?w.groups.map(v=>{v=a.fromJSON(v);v.portal=this.portal;
return v}):[])};u.fetchItems=function(w){w||(w={});let v=this.userContentUrl;w.folder&&(v+="/"+w.folder.id);let D;return(new Promise(function(B,C){t(["./PortalItem"],function(A){B(Object.freeze({__proto__:null,"default":A}))},C)})).then(({default:B})=>{D=B;return this.portal._request(v,{query:{folders:!1,num:w.num||10,start:w.start||1,sortField:w.sortField||"created",sortOrder:w.sortOrder||"asc"}})}).then(B=>{let C;return B&&B.items?(C=B.items.map(A=>{A=D.fromJSON(A);A.portal=this.portal;return A}),
Promise.all(C.map(A=>A.load())).catch(A=>A).then(()=>({items:C,nextStart:B.nextStart,total:B.total}))):{items:[],nextStart:-1,total:0}})};u.fetchTags=function(){return this.portal._request(this.url+"/tags").then(w=>w.tags)};u.getThumbnailUrl=function(w){let v=this.thumbnailUrl;v&&w&&(v+=`&w=${w}`);return v};u.queryFavorites=function(w){return this.favGroupId?(this._favGroup||(this._favGroup=new a({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(w)):Promise.reject(new l("internal:unknown",
"Unknown internal error",{internalError:"Unknown favGroupId"}))};u.toJSON=function(){throw new l("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented");};r.fromJSON=function(w){if(!w)return null;if(w.declaredClass)throw Error("JSON object is already hydrated");const v=new c;v.sourceJSON=w;v.read(w);return v};k._createClass(r,[{key:"thumbnailUrl",get:function(){const w=this.url,v=this.thumbnail;return w&&v?this.portal._normalizeUrl(`${w}/info/${v}?f=json`):null}},{key:"userContentUrl",
get:function(){const w=this.get("portal.restUrl");return w?`${w}/content/users/${this.username}`:null}},{key:"url",get:function(){const w=this.get("portal.restUrl");return w?`${w}/community/users/${this.username}`:null}}]);return r}(d.JSONSupport);m.__decorate([f.property()],z.prototype,"access",void 0);m.__decorate([f.property({type:Date})],z.prototype,"created",void 0);m.__decorate([f.property()],z.prototype,"culture",void 0);m.__decorate([f.property()],z.prototype,"description",void 0);m.__decorate([f.property()],
z.prototype,"email",void 0);m.__decorate([f.property()],z.prototype,"favGroupId",void 0);m.__decorate([f.property()],z.prototype,"fullName",void 0);m.__decorate([f.property({type:Date})],z.prototype,"modified",void 0);m.__decorate([f.property()],z.prototype,"orgId",void 0);m.__decorate([f.property()],z.prototype,"portal",void 0);m.__decorate([f.property()],z.prototype,"preferredView",void 0);m.__decorate([f.property()],z.prototype,"privileges",void 0);m.__decorate([f.property()],z.prototype,"region",
void 0);m.__decorate([f.property()],z.prototype,"role",void 0);m.__decorate([f.property()],z.prototype,"roleId",void 0);m.__decorate([f.property()],z.prototype,"sourceJSON",void 0);m.__decorate([f.property()],z.prototype,"thumbnail",void 0);m.__decorate([f.property({readOnly:!0})],z.prototype,"thumbnailUrl",null);m.__decorate([f.property()],z.prototype,"units",void 0);m.__decorate([f.property({readOnly:!0})],z.prototype,"userContentUrl",null);m.__decorate([f.property({readOnly:!0})],z.prototype,"url",
null);m.__decorate([f.property()],z.prototype,"username",void 0);m.__decorate([f.property()],z.prototype,"userType",void 0);return z=c=m.__decorate([e.subclass("esri.portal.PortalUser")],z)})},"esri/portal/PortalFolder":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/Error ../core/urlUtils ../core/uuid ./support/resourceExtension ../core/JSONSupport".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n){m=function(d){function b(a){a=d.call(this,a)||this;a.created=null;a.id=null;a.portal=null;a.title=null;a.username=null;return a}t._inheritsLoose(b,d);b.prototype.toJSON=function(){throw new e("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented");};t._createClass(b,[{key:"url",get:function(){const a=this.get("portal.restUrl");return a?`${a}/content/users/${this.username}/${this.id}`:null}}]);return b}(n.JSONSupport);k.__decorate([x.property({type:Date})],
m.prototype,"created",void 0);k.__decorate([x.property()],m.prototype,"id",void 0);k.__decorate([x.property()],m.prototype,"portal",void 0);k.__decorate([x.property()],m.prototype,"title",void 0);k.__decorate([x.property({readOnly:!0})],m.prototype,"url",null);k.__decorate([x.property()],m.prototype,"username",void 0);return m=k.__decorate([h.subclass("esri.portal.PortalFolder")],m)})},"esri/portal/PortalGroup":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/Error ../core/urlUtils ../core/uuid ./support/resourceExtension ../core/JSONSupport ./PortalQueryParams".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d){m=function(b){function a(g){g=b.call(this,g)||this;g.access=null;g.created=null;g.description=null;g.id=null;g.isInvitationOnly=!1;g.modified=null;g.owner=null;g.portal=null;g.snippet=null;g.sortField=null;g.sortOrder=null;g.tags=null;g.title=null;return g}t._inheritsLoose(a,b);var c=a.prototype;c.fetchCategorySchema=function(g){return this.portal._request(this.url+"/categorySchema",g).then(r=>{r=r.categorySchema||[];return r.some(u=>"contentCategorySetsGroupQuery.LivingAtlas"===
u.source)?this._fetchCategorySchemaSet("LivingAtlas",g):r})};c.fetchMembers=function(g){return this.portal._request(this.url+"/users",g)};c.getThumbnailUrl=function(g){let r=this.thumbnailUrl;r&&g&&(r+=`&w=${g}`);return r};c.toJSON=function(){throw new e("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented");};c.queryItems=function(g,r){g=y.ensureType(d,g);if(5<parseFloat(this.portal.currentVersion))return g=g||new d,this.portal._queryPortal(`/content/groups/${this.id}/search`,
g,"PortalItem",r);g=g?g.clone():new d;g.query="group:"+this.id+(g.query?" "+g.query:"");return this.portal.queryItems(g,r)};c._fetchCategorySchemaSet=function(g,r){return this.portal._fetchSelf(this.portal.authMode,!0,r).then(u=>{if(u=u.contentCategorySetsGroupQuery){const w=new d;w.disableExtraQuery=!0;w.num=1;w.query=u;return this.portal.queryGroups(w,r)}throw new e("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found");}).then(u=>{if(u.total){u=u.results[0];const w=
new d;w.num=1;w.query=`typekeywords:"${g}"`;return u.queryItems(w,r)}throw new e("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found");}).then(u=>u.total?u.results[0].fetchData("json",r).then(w=>(w=w&&w.categorySchema)&&w.length?w:[]):[])};t._createClass(a,[{key:"thumbnailUrl",get:function(){const g=this.url,r=this.thumbnail;return g&&r?this.portal._normalizeUrl(`${g}/info/${r}?f=json`):null}},{key:"url",get:function(){const g=this.get("portal.restUrl");return g?g+"/community/groups/"+
this.id:null}}]);return a}(n.JSONSupport);k.__decorate([x.property()],m.prototype,"access",void 0);k.__decorate([x.property({type:Date})],m.prototype,"created",void 0);k.__decorate([x.property()],m.prototype,"description",void 0);k.__decorate([x.property()],m.prototype,"id",void 0);k.__decorate([x.property()],m.prototype,"isInvitationOnly",void 0);k.__decorate([x.property({type:Date})],m.prototype,"modified",void 0);k.__decorate([x.property()],m.prototype,"owner",void 0);k.__decorate([x.property()],
m.prototype,"portal",void 0);k.__decorate([x.property()],m.prototype,"snippet",void 0);k.__decorate([x.property()],m.prototype,"sortField",void 0);k.__decorate([x.property()],m.prototype,"sortOrder",void 0);k.__decorate([x.property()],m.prototype,"tags",void 0);k.__decorate([x.property()],m.prototype,"thumbnail",void 0);k.__decorate([x.property({readOnly:!0})],m.prototype,"thumbnailUrl",null);k.__decorate([x.property()],m.prototype,"title",void 0);k.__decorate([x.property({readOnly:!0})],m.prototype,
"url",null);return m=k.__decorate([h.subclass("esri.portal.PortalGroup")],m)})},"esri/symbols/support/StyleOrigin":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/Accessor ../../portal/Portal".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n){var d;m=d=function(b){function a(){var c=b.apply(this,arguments)||this;c.portal=null;return c}t._inheritsLoose(a,b);a.prototype.clone=function(){return new d({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})};return a}(p);k.__decorate([x.property({type:String})],m.prototype,"name",void 0);k.__decorate([x.property({type:String})],m.prototype,"styleUrl",void 0);k.__decorate([x.property({type:String})],m.prototype,"styleName",void 0);
k.__decorate([x.property({type:n})],m.prototype,"portal",void 0);return m=d=k.__decorate([h.subclass("esri.symbols.support.StyleOrigin")],m)})},"esri/symbols/support/Thumbnail":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/Accessor".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n){var d;t.Thumbnail=d=function(b){function a(){return b.apply(this,arguments)||this}k._inheritsLoose(a,b);a.prototype.clone=function(){return new d({url:this.url})};return a}(n);m.__decorate([f.property({type:String})],t.Thumbnail.prototype,"url",void 0);t.Thumbnail=d=m.__decorate([e.subclass("esri.symbols.support.Thumbnail")],t.Thumbnail);t.default=t.Thumbnail;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/chunks/LineCallout3DBorder":function(){define("exports ./_rollupPluginBabelHelpers ./tslib.es6 ../core/has ../core/lang ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/JSONSupport ../Color ../symbols/support/materialUtils".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d,b,a){var c;t.LineCallout3DBorder$2=c=function(g){function r(){var u=g.apply(this,arguments)||this;u.color=new b("white");return u}k._inheritsLoose(r,g);r.prototype.clone=function(){return new c({color:y.clone(this.color)})};return r}(d.JSONSupport);m.__decorate([h.property(a.colorAndTransparencyProperty)],t.LineCallout3DBorder$2.prototype,"color",void 0);t.LineCallout3DBorder$2=c=m.__decorate([l.subclass("esri.symbols.callouts.LineCallout3DBorder")],t.LineCallout3DBorder$2);
m=t.LineCallout3DBorder$2;z=Object.freeze({__proto__:null,get LineCallout3DBorder(){return t.LineCallout3DBorder$2},"default":m});t.LineCallout3DBorder=z;t.LineCallout3DBorder$1=m})},"esri/symbols/callouts/LineCallout3D":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/lang ../../core/maybe ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../Color ../../core/screenUtils ../support/materialUtils ./Callout3D ../../chunks/LineCallout3DBorder".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d,b,a,c,g){var r;m=r=function(u){function w(v){v=u.call(this,v)||this;v.type="line";v.color=new d([0,0,0,1]);v.size=b.px2pt(1);v.border=null;return v}t._inheritsLoose(w,u);w.prototype.clone=function(){return new r({color:z.clone(this.color),size:this.size,border:z.clone(this.border)})};t._createClass(w,[{key:"visible",get:function(){return 0<this.size&&y.isSome(this.color)&&0<this.color.a}}]);return w}(c);k.__decorate([e.enumeration({line:"line"},{readOnly:!0})],
m.prototype,"type",void 0);k.__decorate([h.property(a.colorAndTransparencyProperty)],m.prototype,"color",void 0);k.__decorate([h.property(a.screenSizeProperty)],m.prototype,"size",void 0);k.__decorate([h.property({type:g.LineCallout3DBorder$1,json:{write:!0}})],m.prototype,"border",void 0);k.__decorate([h.property({readOnly:!0})],m.prototype,"visible",null);return m=r=k.__decorate([l.subclass("esri.symbols.callouts.LineCallout3D")],m)})},"esri/symbols/callouts/Callout3D":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p){m=function(n){function d(b){b=n.call(this,b)||this;b.visible=!0;return b}t._inheritsLoose(d,n);d.prototype.clone=function(){};return d}(p.JSONSupport);k.__decorate([x.property({type:["line"],readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],m.prototype,"type",void 0);k.__decorate([x.property({readOnly:!0})],m.prototype,"visible",void 0);return m=k.__decorate([h.subclass("esri.symbols.callouts.Callout3D")],m)})},"esri/symbols/support/Symbol3DVerticalOffset":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ./materialUtils".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d){var b;t.Symbol3DVerticalOffset=b=function(a){function c(){var g=a.apply(this,arguments)||this;g.screenLength=0;g.minWorldLength=0;return g}k._inheritsLoose(c,a);c.prototype.clone=function(){return new b({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})};return c}(n.JSONSupport);m.__decorate([f.property(d.screenSizeProperty)],t.Symbol3DVerticalOffset.prototype,"screenLength",void 0);m.__decorate([f.property({type:Number,
json:{write:!0,default:0}})],t.Symbol3DVerticalOffset.prototype,"minWorldLength",void 0);m.__decorate([f.property({type:Number,json:{write:!0}})],t.Symbol3DVerticalOffset.prototype,"maxWorldLength",void 0);t.Symbol3DVerticalOffset=b=m.__decorate([e.subclass("esri.symbols.support.Symbol3DVerticalOffset")],t.Symbol3DVerticalOffset);t.default=t.Symbol3DVerticalOffset;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/symbols/LabelSymbol3D":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/lang ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/Collection ./TextSymbol3DLayer ./Symbol3D ./callouts/calloutUtils ./support/Symbol3DVerticalOffset".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d,b,a,c){var g;const r=n.ofType({base:null,key:"type",typeMap:{text:d}});m=g=function(u){function w(D){D=u.call(this,D)||this;D.verticalOffset=null;D.callout=null;D.styleOrigin=null;D.symbolLayers=new r;D.type="label-3d";return D}t._inheritsLoose(w,u);var v=w.prototype;v.supportsCallout=function(){return!0};v.hasVisibleCallout=function(){return a.hasVisibleCallout(this)};v.hasVisibleVerticalOffset=function(){return a.hasVisibleVerticalOffset(this)};v.clone=function(){return new g({styleOrigin:z.clone(this.styleOrigin),
symbolLayers:z.clone(this.symbolLayers),thumbnail:z.clone(this.thumbnail),callout:z.clone(this.callout),verticalOffset:z.clone(this.verticalOffset)})};w.fromTextSymbol=function(D){return new g({symbolLayers:[d.fromTextSymbol(D)]})};return w}(b);k.__decorate([f.property({type:c["default"],json:{write:!0}})],m.prototype,"verticalOffset",void 0);k.__decorate([f.property(a.calloutProperty)],m.prototype,"callout",void 0);k.__decorate([f.property({json:{read:!1,write:!1}})],m.prototype,"styleOrigin",void 0);
k.__decorate([f.property({type:r})],m.prototype,"symbolLayers",void 0);k.__decorate([h.enumeration({LabelSymbol3D:"label-3d"},{readOnly:!0})],m.prototype,"type",void 0);return m=g=k.__decorate([e.subclass("esri.symbols.LabelSymbol3D")],m)})},"esri/symbols/callouts/calloutUtils":function(){define(["exports","./Callout3D","./LineCallout3D"],function(t,k,m){function z(y){if(!y)return!1;y=y.verticalOffset;return!y||0>=y.screenLength||0>=y.maxWorldLength?!1:!0}t.calloutProperty={types:{key:"type",base:k,
typeMap:{line:m}},json:{write:!0}};t.hasVisibleCallout=function(y){if(!y||!y.supportsCallout||!y.supportsCallout())return!1;const x=y.callout;return x&&x.visible?z(y)?!0:!1:!1};t.hasVisibleVerticalOffset=z;t.isCalloutSupport=function(y){return"point-3d"===y.type||"label-3d"===y.type};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/symbols/LineSymbol3D":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/lang ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/Collection ./LineSymbol3DLayer ./PathSymbol3DLayer ./Symbol3D".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d,b,a){var c;const g=n.ofType({base:null,key:"type",typeMap:{line:d,path:b}});m=n.ofType({base:null,key:"type",typeMap:{line:d,path:b}});a=c=function(r){function u(w){w=r.call(this,w)||this;w.symbolLayers=new g;w.type="line-3d";return w}t._inheritsLoose(u,r);u.prototype.clone=function(){return new c({styleOrigin:z.clone(this.styleOrigin),symbolLayers:z.clone(this.symbolLayers),thumbnail:z.clone(this.thumbnail)})};u.fromSimpleLineSymbol=function(w){return new c({symbolLayers:[d.fromSimpleLineSymbol(w)]})};
return u}(a);k.__decorate([f.property({type:g,json:{type:m}})],a.prototype,"symbolLayers",void 0);k.__decorate([h.enumeration({LineSymbol3D:"line-3d"},{readOnly:!0})],a.prototype,"type",void 0);return a=c=k.__decorate([e.subclass("esri.symbols.LineSymbol3D")],a)})},"esri/symbols/MarkerSymbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ./Symbol ../core/screenUtils".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n){m=function(d){function b(a){a=d.call(this,a)||this;a.angle=0;a.type=null;a.xoffset=0;a.yoffset=0;a.size=9;return a}t._inheritsLoose(b,d);b.prototype.hash=function(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`};return b}(p);k.__decorate([x.property({type:Number,json:{read:d=>d&&-1*d,write:(d,b)=>b.angle=d&&-1*d}})],m.prototype,"angle",void 0);k.__decorate([x.property({type:["simple-marker","picture-marker"],readOnly:!0})],m.prototype,
"type",void 0);k.__decorate([x.property({type:Number,cast:n.toPt,json:{write:!0}})],m.prototype,"xoffset",void 0);k.__decorate([x.property({type:Number,cast:n.toPt,json:{write:!0}})],m.prototype,"yoffset",void 0);k.__decorate([x.property({type:Number,cast:d=>"auto"===d?d:n.toPt(d),json:{write:!0}})],m.prototype,"size",void 0);return m=k.__decorate([h.subclass("esri.symbols.MarkerSymbol")],m)})},"esri/symbols/MeshSymbol3D":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/lang ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/Collection ./FillSymbol3DLayer ./Symbol3D".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d,b){var a;const c=n.ofType({base:null,key:"type",typeMap:{fill:d}});m=a=function(g){function r(u){u=g.call(this,u)||this;u.symbolLayers=new c;u.type="mesh-3d";return u}t._inheritsLoose(r,g);r.prototype.clone=function(){return new a({styleOrigin:z.clone(this.styleOrigin),symbolLayers:z.clone(this.symbolLayers),thumbnail:z.clone(this.thumbnail)})};return r}(b);k.__decorate([f.property({type:c})],m.prototype,"symbolLayers",void 0);k.__decorate([h.enumeration({MeshSymbol3D:"mesh-3d"},
{readOnly:!0})],m.prototype,"type",void 0);return m=a=k.__decorate([e.subclass("esri.symbols.MeshSymbol3D")],m)})},"esri/symbols/PictureFillSymbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/lang ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/screenUtils ./FillSymbol ./support/urlUtils".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d,b){var a;m=a=function(c){function g(...u){u=c.call(this,...u)||this;u.type="picture-fill";u.url=null;u.xscale=1;u.yscale=1;u.width=12;u.height=12;u.xoffset=0;u.yoffset=0;u.source=null;return u}t._inheritsLoose(g,c);var r=g.prototype;r.normalizeCtorArgs=function(u,w,v,D){if(u&&"string"!==typeof u&&null==u.imageData)return u;const B={};u&&(B.url=u);w&&(B.outline=w);null!=v&&(B.width=n.toPt(v));null!=D&&(B.height=n.toPt(D));return B};r.clone=function(){const u=new a({color:z.clone(this.color),
height:this.height,outline:this.outline&&this.outline.clone(),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});u._set("source",z.clone(this.source));return u};r.hash=function(){var u;return`${c.prototype.hash.call(this)}.${null==(u=this.color)?void 0:u.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`};return g}(d);k.__decorate([h.enumeration({esriPFS:"picture-fill"},{readOnly:!0})],
m.prototype,"type",void 0);k.__decorate([f.property(b.urlPropertyDefinition)],m.prototype,"url",void 0);k.__decorate([f.property({type:Number,json:{write:!0}})],m.prototype,"xscale",void 0);k.__decorate([f.property({type:Number,json:{write:!0}})],m.prototype,"yscale",void 0);k.__decorate([f.property({type:Number,cast:n.toPt,json:{write:!0}})],m.prototype,"width",void 0);k.__decorate([f.property({type:Number,cast:n.toPt,json:{write:!0}})],m.prototype,"height",void 0);k.__decorate([f.property({type:Number,
cast:n.toPt,json:{write:!0}})],m.prototype,"xoffset",void 0);k.__decorate([f.property({type:Number,cast:n.toPt,json:{write:!0}})],m.prototype,"yoffset",void 0);k.__decorate([f.property(b.sourcePropertyDefinition)],m.prototype,"source",void 0);return m=a=k.__decorate([e.subclass("esri.symbols.PictureFillSymbol")],m)})},"esri/symbols/support/urlUtils":function(){define(["exports","../../core/urlUtils","../../chunks/persistableUrlUtils"],function(t,k,m){function z(h,e,l){return e.imageData?k.makeData({mediaType:e.contentType||
"image/png",isBase64:!0,data:e.imageData}):y(e.url,l)}function y(h,e){return!e||"service"!==e.origin&&"portal-item"!==e.origin||!e.layer||"feature"!==e.layer.type&&"stream"!==e.layer.type||k.isAbsolute(h)||!e.layer.parsedUrl?m.fromJSON(h,e):k.join(e.layer.parsedUrl.path,"images",h)}function x(h,e,l,q){k.isDataProtocol(h)?(h=k.dataComponents(h),e.contentType=h.mediaType,e.imageData=h.data,l&&l.imageData===e.imageData&&l.url&&m.write(l.url,e,"url",q)):m.write(h,e,"url",q)}const f={json:{read:{source:["imageData",
"url"],reader:z},write:{writer(h,e,l,q){x(h,e,this.source,q)}}}};t.read=y;t.readImageDataOrUrl=z;t.sourcePropertyDefinition={readOnly:!0,json:{read:{source:["imageData","url"],reader(h,e,l){h={};e.imageData&&(h.imageData=e.imageData);e.contentType&&(h.contentType=e.contentType);e.url&&(h.url=y(e.url,l));return h}}}};t.urlPropertyDefinition=f;t.writeImageDataAndUrl=x;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/symbols/PictureMarkerSymbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/lang ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/screenUtils ./MarkerSymbol ./support/urlUtils".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d,b,a){var c;m=c=function(g){function r(...w){w=g.call(this,...w)||this;w.color=null;w.type="picture-marker";w.url=null;w.source=null;w.height=12;w.width=12;w.size=null;return w}t._inheritsLoose(r,g);var u=r.prototype;u.normalizeCtorArgs=function(w,v,D){if(w&&"string"!==typeof w&&null==w.imageData)return w;const B={};w&&(B.url=w);null!=v&&(B.width=d.toPt(v));null!=D&&(B.height=d.toPt(D));return B};u.readHeight=function(w,v){return v.size||w};u.readWidth=function(w,
v){return v.size||w};u.clone=function(){const w=new c({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});w._set("source",z.clone(this.source));return w};u.hash=function(){return`${g.prototype.hash.call(this)}.${this.height}.${this.url}.${this.width}`};return r}(b);k.__decorate([f.property({json:{write:!1}})],m.prototype,"color",void 0);k.__decorate([h.enumeration({esriPMS:"picture-marker"},{readOnly:!0})],m.prototype,"type",void 0);k.__decorate([f.property(a.urlPropertyDefinition)],
m.prototype,"url",void 0);k.__decorate([f.property(a.sourcePropertyDefinition)],m.prototype,"source",void 0);k.__decorate([f.property({type:Number,cast:d.toPt,json:{write:!0}})],m.prototype,"height",void 0);k.__decorate([e.reader("height",["height","size"])],m.prototype,"readHeight",null);k.__decorate([f.property({type:Number,cast:d.toPt,json:{write:!0}})],m.prototype,"width",void 0);k.__decorate([f.property({json:{write:!1}})],m.prototype,"size",void 0);return m=c=k.__decorate([l.subclass("esri.symbols.PictureMarkerSymbol")],
m)})},"esri/symbols/PointSymbol3D":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/lang ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ../core/Error ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/Collection ./IconSymbol3DLayer ./ObjectSymbol3DLayer ./TextSymbol3DLayer ./Symbol3D ./callouts/calloutUtils ./support/Symbol3DVerticalOffset".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d,b,a,c,g,r,u,w){var v;const D=b.ofType({base:null,key:"type",typeMap:{icon:a,object:c,text:g}});m=b.ofType({base:null,key:"type",typeMap:{icon:a,object:c}});r=v=function(B){function C(E){E=B.call(this,E)||this;E.verticalOffset=null;E.callout=null;E.symbolLayers=new D;E.type="point-3d";return E}t._inheritsLoose(C,B);var A=C.prototype;A.writeSymbolLayers=function(E,G,H,K){const J=E.filter(F=>"text"!==F.type);K&&K.messages&&J.length<E.length&&(E=E.find(F=>"text"===
F.type),K.messages.push(new q("symbol-layer:unsupported","Symbol layers of type 'text' cannot be persisted in PointSymbol3D",{symbolLayer:E})));G[H]=J.map(F=>F.write({},K)).toArray()};A.supportsCallout=function(){if(1>(this.symbolLayers?this.symbolLayers.length:0))return!1;for(const E of this.symbolLayers.items)switch(E.type){case "icon":case "text":case "object":continue;default:return!1}return!0};A.hasVisibleCallout=function(){return u.hasVisibleCallout(this)};A.hasVisibleVerticalOffset=function(){return u.hasVisibleVerticalOffset(this)};
A.clone=function(){return new v({verticalOffset:z.clone(this.verticalOffset),callout:z.clone(this.callout),styleOrigin:z.clone(this.styleOrigin),symbolLayers:z.clone(this.symbolLayers),thumbnail:z.clone(this.thumbnail)})};C.fromSimpleMarkerSymbol=function(E){return new v({symbolLayers:[a.fromSimpleMarkerSymbol(E)]})};C.fromPictureMarkerSymbol=function(E){return new v({symbolLayers:[a.fromPictureMarkerSymbol(E)]})};C.fromCIMSymbol=function(E){if(E.data&&E.data.symbol){const G=E.data.symbol;if("CIMPointSymbol"===
G.type&&G.callout)return new v({symbolLayers:[a.fromCIMSymbol(E)],callout:{type:"line",size:.5,color:[0,0,0]},verticalOffset:{screenLength:40}})}return new v({symbolLayers:[a.fromCIMSymbol(E)]})};C.fromTextSymbol=function(E){return new v({symbolLayers:[g.fromTextSymbol(E)]})};return C}(r);k.__decorate([f.property({type:w["default"],json:{write:!0}})],r.prototype,"verticalOffset",void 0);k.__decorate([f.property(u.calloutProperty)],r.prototype,"callout",void 0);k.__decorate([f.property({type:D,json:{type:m,
origins:{"web-scene":{type:m}}}})],r.prototype,"symbolLayers",void 0);k.__decorate([l.writer("web-scene","symbolLayers")],r.prototype,"writeSymbolLayers",null);k.__decorate([h.enumeration({PointSymbol3D:"point-3d"},{readOnly:!0})],r.prototype,"type",void 0);return r=v=k.__decorate([e.subclass("esri.symbols.PointSymbol3D")],r)})},"esri/symbols/PolygonSymbol3D":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/lang ../core/maybe ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ../core/Error ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/Collection ./ExtrudeSymbol3DLayer ./FillSymbol3DLayer ./IconSymbol3DLayer ./LineSymbol3DLayer ./ObjectSymbol3DLayer ./TextSymbol3DLayer ./WaterSymbol3DLayer ./Symbol3D".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d,b,a,c,g,r,u,w,v,D,B){var C;const A=a.ofType({base:null,key:"type",typeMap:{extrude:c,fill:g,icon:r,line:u,object:w,text:v,water:D}});m=a.ofType({base:null,key:"type",typeMap:{extrude:c,fill:g,icon:r,line:u,object:w,water:D}});B=C=function(E){function G(K){K=E.call(this,K)||this;K.symbolLayers=new A;K.type="polygon-3d";return K}t._inheritsLoose(G,E);var H=G.prototype;H.writeSymbolLayers=function(K,J,F,N){const L=K.filter(M=>"text"!==M.type);N&&N.messages&&L.length<
K.length&&(K=K.find(M=>"text"===M.type),N.messages.push(new p("symbol-layer:unsupported","Symbol layers of type 'text' cannot be persisted in PolygonSymbol3D",{symbolLayer:K})));J[F]=L.map(M=>M.write({},N)).toArray()};H.clone=function(){return new C({styleOrigin:z.clone(this.styleOrigin),symbolLayers:z.clone(this.symbolLayers),thumbnail:z.clone(this.thumbnail)})};G.fromJSON=function(K){const J=new C;J.read(K);if(2===J.symbolLayers.length&&"fill"===J.symbolLayers.getItemAt(0).type&&"line"===J.symbolLayers.getItemAt(1).type){const F=
J.symbolLayers.getItemAt(0),N=J.symbolLayers.getItemAt(1);!N.enabled||K.symbolLayers&&K.symbolLayers[1]&&!1===K.symbolLayers[1].enable||(F.outline={size:N.size,color:y.isSome(N.material)?N.material.color:null});J.symbolLayers.removeAt(1)}return J};G.fromSimpleFillSymbol=function(K){return new C({symbolLayers:[g.fromSimpleFillSymbol(K)]})};return G}(B);k.__decorate([h.property({type:A,json:{type:m}})],B.prototype,"symbolLayers",void 0);k.__decorate([q.writer("web-scene","symbolLayers")],B.prototype,
"writeSymbolLayers",null);k.__decorate([e.enumeration({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],B.prototype,"type",void 0);return B=C=k.__decorate([l.subclass("esri.symbols.PolygonSymbol3D")],B)})},"esri/symbols/SimpleFillSymbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/lang ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../Color ./SimpleLineSymbol ./FillSymbol".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d,b,a){var c;m=new h.JSONMap({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});a=c=function(g){function r(...w){w=g.call(this,...w)||this;w.color=new d([0,0,0,.25]);w.outline=new b;w.type="simple-fill";w.style="solid";return w}t._inheritsLoose(r,g);var u=r.prototype;u.normalizeCtorArgs=
function(w,v,D){if(w&&"string"!==typeof w)return w;const B={};w&&(B.style=w);v&&(B.outline=v);D&&(B.color=D);return B};u.clone=function(){return new c({color:z.clone(this.color),outline:this.outline&&this.outline.clone(),style:this.style})};u.hash=function(){return`${g.prototype.hash.call(this)}${this.style}.${this.color&&this.color.hash()}`};return r}(a);k.__decorate([f.property()],a.prototype,"color",void 0);k.__decorate([f.property()],a.prototype,"outline",void 0);k.__decorate([e.enumeration({esriSFS:"simple-fill"},
{readOnly:!0})],a.prototype,"type",void 0);k.__decorate([f.property({type:m.apiValues,json:{read:m.read,write:m.write}})],a.prototype,"style",void 0);return a=c=k.__decorate([l.subclass("esri.symbols.SimpleFillSymbol")],a)})},"esri/symbols/SimpleMarkerSymbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/lang ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../Color ../core/screenUtils ./SimpleLineSymbol ./MarkerSymbol".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d,b,a,c,g){var r;m=new h.JSONMap({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});g=r=function(u){function w(...D){D=u.call(this,...D)||this;D.color=new b([255,255,255,.25]);D.type="simple-marker";D.size=12;D.style="circle";D.outline=new c;return D}t._inheritsLoose(w,u);var v=w.prototype;v.normalizeCtorArgs=function(D,B,C,A){if(D&&"string"!==typeof D)return D;
const E={};D&&(E.style=D);null!=B&&(E.size=a.toPt(B));C&&(E.outline=C);A&&(E.color=A);return E};v.writeColor=function(D,B){D&&"x"!==this.style&&"cross"!==this.style&&(B.color=D.toJSON());null===D&&(B.color=null)};v.clone=function(){return new r({angle:this.angle,color:z.clone(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})};v.hash=function(){var D;return`${u.prototype.hash.call(this)}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${null==
(D=this.outline)?void 0:D.hash()}`};t._createClass(w,[{key:"path",set:function(D){this.style="path";this._set("path",D)}}]);return w}(g);k.__decorate([f.property()],g.prototype,"color",void 0);k.__decorate([q.writer("color")],g.prototype,"writeColor",null);k.__decorate([e.enumeration({esriSMS:"simple-marker"},{readOnly:!0})],g.prototype,"type",void 0);k.__decorate([f.property()],g.prototype,"size",void 0);k.__decorate([f.property({type:m.apiValues,json:{read:m.read,write:m.write}})],g.prototype,"style",
void 0);k.__decorate([f.property({type:String,json:{write:!0}})],g.prototype,"path",null);k.__decorate([f.property({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":c}},json:{default:null,write:!0}})],g.prototype,"outline",void 0);return g=r=k.__decorate([l.subclass("esri.symbols.SimpleMarkerSymbol")],g)})},"esri/symbols/TextSymbol":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/lang ../core/Logger ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../Color ./Symbol ../core/screenUtils ./Font".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d,b,a,c){var g;m=g=function(r){function u(...v){v=r.call(this,...v)||this;v.backgroundColor=null;v.borderLineColor=null;v.borderLineSize=null;v.font=new c;v.horizontalAlignment="center";v.kerning=!0;v.haloColor=null;v.haloSize=null;v.rightToLeft=null;v.rotated=!1;v.text="";v.type="text";v.verticalAlignment=null;v.xoffset=0;v.yoffset=0;v.angle=0;v.width=null;v.lineWidth=192;v.lineHeight=1;return v}t._inheritsLoose(u,r);var w=u.prototype;w.normalizeCtorArgs=function(v,
D,B){if(v&&"string"!==typeof v)return v;const C={};v&&(C.text=v);D&&(C.font=D);B&&(C.color=B);return C};w.writeLineWidth=function(v,D,B,C){C&&"string"!==typeof C||(D[B]=v)};w.castLineWidth=function(v){return a.toPt(v)};w.writeLineHeight=function(v,D,B,C){C&&"string"!==typeof C||(D[B]=v)};w.clone=function(){return new g({angle:this.angle,backgroundColor:z.clone(this.backgroundColor),borderLineColor:z.clone(this.borderLineColor),borderLineSize:this.borderLineSize,color:z.clone(this.color),font:this.font&&
this.font.clone(),haloColor:z.clone(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})};w.hash=function(){return`${this.backgroundColor&&this.backgroundColor.hash()}.${this.borderLineColor}.${this.borderLineSize}.${this.color.hash()}.${this.font&&
this.font.hash()}.${this.haloColor&&this.haloColor.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`};return u}(b);k.__decorate([x.property({type:d,json:{write:!0}})],m.prototype,"backgroundColor",void 0);k.__decorate([x.property({type:d,json:{write:!0}})],m.prototype,"borderLineColor",void 0);k.__decorate([x.property({type:Number,
json:{write:!0}})],m.prototype,"borderLineSize",void 0);k.__decorate([x.property({type:c,json:{write:!0}})],m.prototype,"font",void 0);k.__decorate([x.property({type:["left","right","center","justify"],json:{write:!0}})],m.prototype,"horizontalAlignment",void 0);k.__decorate([x.property({type:Boolean,json:{write:!0}})],m.prototype,"kerning",void 0);k.__decorate([x.property({type:d,json:{write:!0}})],m.prototype,"haloColor",void 0);k.__decorate([x.property({type:Number,cast:a.toPt,json:{write:!0}})],
m.prototype,"haloSize",void 0);k.__decorate([x.property({type:Boolean,json:{write:!0}})],m.prototype,"rightToLeft",void 0);k.__decorate([x.property({type:Boolean,json:{write:!0}})],m.prototype,"rotated",void 0);k.__decorate([x.property({type:String,json:{write:!0}})],m.prototype,"text",void 0);k.__decorate([h.enumeration({esriTS:"text"},{readOnly:!0})],m.prototype,"type",void 0);k.__decorate([x.property({type:["baseline","top","middle","bottom"],json:{write:!0}})],m.prototype,"verticalAlignment",
void 0);k.__decorate([x.property({type:Number,cast:a.toPt,json:{write:!0}})],m.prototype,"xoffset",void 0);k.__decorate([x.property({type:Number,cast:a.toPt,json:{write:!0}})],m.prototype,"yoffset",void 0);k.__decorate([x.property({type:Number,json:{read:r=>r&&-1*r,write:(r,u)=>u.angle=r&&-1*r}})],m.prototype,"angle",void 0);k.__decorate([x.property({type:Number,json:{write:!0}})],m.prototype,"width",void 0);k.__decorate([x.property({type:Number})],m.prototype,"lineWidth",void 0);k.__decorate([l.writer("lineWidth")],
m.prototype,"writeLineWidth",null);k.__decorate([f.cast("lineWidth")],m.prototype,"castLineWidth",null);k.__decorate([x.property({type:Number})],m.prototype,"lineHeight",void 0);k.__decorate([l.writer("lineHeight")],m.prototype,"writeLineHeight",null);return m=g=k.__decorate([e.subclass("esri.symbols.TextSymbol")],m)})},"esri/symbols/WebStyleSymbol":function(){define("require ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../chunks/persistableUrlUtils ../core/promiseUtils ./Symbol ../portal/Portal ./support/Thumbnail".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d,b,a,c){function g(){return new Promise(function(w,v){t(["./support/styleUtils"],w,v)})}var r;const u=y.getLogger("esri.symbols.WebStyleSymbol");z=r=function(w){function v(B){B=w.call(this,B)||this;B.styleName=null;B.portal=null;B.styleUrl=null;B.thumbnail=null;B.name=null;B.type="web-style";return B}k._inheritsLoose(v,w);var D=v.prototype;D.read=function(B,C){this.portal=C?C.portal:void 0;w.prototype.read.call(this,B,C)};D.clone=function(){return new r({name:this.name,
styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})};D.fetchSymbol=function(B){return this._fetchSymbol("webRef",B)};D.fetchCIMSymbol=function(B){return this._fetchSymbol("cimRef",B)};D._fetchSymbol=async function(B,C){const A=await g();d.throwIfAborted(C);B=A.resolveWebStyleSymbol(this,{portal:this.portal},B,C);B.catch(E=>{u.error("#fetchSymbol()","Failed to create symbol from style",E)});return B};return v}(b);m.__decorate([f.property({json:{write:!1}})],z.prototype,"color",void 0);
m.__decorate([f.property({type:String,json:{write:!0}})],z.prototype,"styleName",void 0);m.__decorate([f.property({type:a,json:{write:!1}})],z.prototype,"portal",void 0);m.__decorate([f.property({type:String,json:{read:n.read,write:n.write}})],z.prototype,"styleUrl",void 0);m.__decorate([f.property({type:c["default"],json:{read:!1}})],z.prototype,"thumbnail",void 0);m.__decorate([f.property({type:String,json:{write:!0}})],z.prototype,"name",void 0);m.__decorate([h.enumeration({styleSymbolReference:"web-style"},
{readOnly:!0})],z.prototype,"type",void 0);return z=r=m.__decorate([e.subclass("esri.symbols.WebStyleSymbol")],z)})},"esri/core/uid":function(){define(["exports"],function(t){let k=0;t.NullUID=0;t.generateUID=function(){return++k};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/layers/graphics/sources/geojson/geojson":function(){define(["exports","../../../../core/Error","../../OptimizedFeature","../../OptimizedGeometry"],function(t,k,m,z){function y(r){const u=[];r.forEach(w=>u.push(w));
return u}function*x(r){switch(r.type){case "Feature":yield r;break;case "FeatureCollection":for(const u of r.features)u&&(yield u)}}function*f(r){if(!r)return null;switch(r.type){case "Point":yield r.coordinates;break;case "LineString":case "MultiPoint":yield*r.coordinates;break;case "MultiLineString":case "Polygon":for(const u of r.coordinates)yield*u;break;case "MultiPolygon":for(const u of r.coordinates)for(const w of u)yield*w}}function*h(r,u={}){const {geometryType:w,objectIdFieldName:v}=u;for(;;){const {value:D,
done:B}=r.next();if(B)break;const {geometry:C,properties:A,id:E}=D;if(C&&g[C.type]!==w)continue;const G=A||{};v&&null!=E&&!G[v]&&(G[v]=E);yield new m(C?p(new z,C,u):null,G)}}function e(r){for(;;){const {value:u,done:w}=r.next();if(w)return!1;if(2<u.length)return!0}}function l(r){let u=0;for(let w=0;w<r.length;w++){const v=r[w],D=r[(w+1)%r.length];u+=v[0]*D[1]-D[0]*v[1]}return 0>=u}function q(r){const u=r[0],w=r[r.length-1];u[0]===w[0]&&u[1]===w[1]&&u[2]===w[2]||r.push(u);return r}function p(r,u,w){switch(u.type){case "LineString":return b(r,
u.coordinates,w),r;case "MultiLineString":for(const D of u.coordinates)b(r,D,w);return r;case "MultiPoint":return b(r,u.coordinates,w),r;case "MultiPolygon":for(var v of u.coordinates)for(n(r,v[0],w),u=1;u<v.length;u++)d(r,v[u],w);return r;case "Point":return c(r,u.coordinates,w),r;case "Polygon":v=u.coordinates;n(r,v[0],w);for(u=1;u<v.length;u++)d(r,v[u],w);return r}}function n(r,u,w){u=q(u);l(u)?b(r,u,w):a(r,u,w)}function d(r,u,w){u=q(u);l(u)?a(r,u,w):b(r,u,w)}function b(r,u,w){for(const v of u)c(r,
v,w);r.lengths.push(u.length)}function a(r,u,w){for(let v=u.length-1;0<=v;v--)c(r,u[v],w);r.lengths.push(u.length)}function c(r,u,w){const [v,D,B]=u;r.coords.push(v,D);w.hasZ&&r.coords.push(B||0)}const g={LineString:"esriGeometryPolyline",MultiLineString:"esriGeometryPolyline",MultiPoint:"esriGeometryMultipoint",Point:"esriGeometryPoint",Polygon:"esriGeometryPolygon",MultiPolygon:"esriGeometryPolygon"};t.createOptimizedFeatures=function(r,u){a:for(r=h(x(r),u),u=[];;){const {value:w,done:v}=r.next();
if(v){r=u;break a}u.push(w)}return r};t.inferLayerProperties=function(r,u={}){const w=x(r);r=[];const v=new Set,D=new Set;var B=!1;let C=Number.NEGATIVE_INFINITY,A=null,E=!1,G=void 0;({geometryType:u=null}=u);for(var H=!1;;){const {value:F,done:N}=w.next();if(N){var K=A&&1===A.length&&A[0]||null;if(K)for(const Q of r)Q.name===K&&(Q.type="esriFieldTypeOID");return{fields:r,geometryType:u,hasZ:B,maxObjectId:Math.max(0,C),objectIdFieldName:K,objectIdFieldType:G,unknownFields:y(D)}}const {geometry:L,
properties:M,id:S}=F;if(L&&(u||(u=g[L.type]),g[L.type]!==u))continue;B||(B=f(L),B=e(B));!E&&(E=null!=S)&&(G=typeof S,"number"===G&&(A=Object.keys(M).filter(Q=>M[Q]===S)));E&&"number"===G&&null!=S&&(C=Math.max(C,S),1<A.length?A=A.filter(Q=>M[Q]===S):1===A.length&&(A=M[A[0]]===S?A:[]));if(!H&&M)for(K in H=!0,M)if(!v.has(K)){var J=M[K];if(null==J)H=!1,D.add(K);else{a:switch(typeof J){case "string":J="esriFieldTypeString";break a;case "number":J="esriFieldTypeDouble";break a;default:J="unknown"}"unknown"===
J?D.add(K):(D.delete(K),v.add(K),r.push({name:K,alias:K,type:J}))}}}};t.validateGeoJSON=function(r){if(!r)throw new k("geojson-layer:empty","GeoJSON data is empty");if("Feature"!==r.type&&"FeatureCollection"!==r.type)throw new k("geojson-layer:unsupported-geojson-object","missing or not supported GeoJSON object type",{data:r});({crs:r}=r);if(r){var u="string"===typeof r?r:"name"===r.type?r.properties.name:null,w=/.*(CRS84H?|4326)$/i;if(!u||!w.test(u))throw new k("geojson-layer:unsupported-crs","unsupported GeoJSON 'crs' member",
{crs:r});}};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/layers/graphics/sources/support/clientSideDefaults":function(){define(["exports","../../../../core/has","../../../../core/lang","../../../../symbols/support/defaultsJSON"],function(t,k,m,z){t.createDefaultAttributesFunction=function(y,x){if(k("csp-restrictions"))return()=>({[x]:null,...y});try{let f=`this.${x} = null;`;for(const e in y){const l=e.indexOf(".")?`["${e}"]`:`.${e}`;f+=`this${l} = ${JSON.stringify(y[e])};`}const h=new Function(f);
return()=>new h}catch(f){return()=>({[x]:null,...y})}};t.createDefaultTemplate=function(y={}){return[{name:"New Feature",description:"",prototype:{attributes:m.clone(y)}}]};t.createDrawingInfo=function(y){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===y||"esriGeometryMultipoint"===y?z.defaultPointSymbolJSON:"esriGeometryPolyline"===y?z.defaultPolylineSymbolJSON:z.defaultPolygonSymbolJSON}}};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/symbols/support/defaultsJSON":function(){define(["exports"],
function(t){const k=[252,146,31,255],m={type:"esriSMS",style:"esriSMSCircle",size:6,color:k,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},z={type:"esriSLS",style:"esriSLSSolid",width:.75,color:k};t.defaultColor=k;t.defaultOutlineColor=[153,153,153,255];t.defaultPointSymbolJSON=m;t.defaultPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}};t.defaultPolylineSymbolJSON=
z;t.defaultTextSymbolJSON={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0};t.errorPointSymbolJSON={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5};t.errorPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null};t.errorPolylineSymbolJSON={type:"esriSLS",style:"esriSLSSolid",
color:[0,0,0,255],width:1.5};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/views/2d/layers/features/support/FeatureSetReaderPBF":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/maybe ../../../../../core/Logger ../../../../../core/Error ../../../../../layers/graphics/OptimizedFeature ../../../../../layers/graphics/OptimizedGeometry ../../../../../layers/graphics/featureConversionUtils ./FeatureSetReader ../../../../../core/pbf ./FeatureSetReaderPBFHeader".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q){function p(d){var b=d.getLength();for(b=d.pos()+b;d.pos()<b&&d.next();)switch(d.tag()){case 1:return d=d.getString(),""===d?null:d;case 2:return d.getFloat();case 3:return d.getDouble();case 4:return d.getSInt32();case 5:return d.getUInt32();case 6:return d.getInt64();case 7:return d.getUInt64();case 8:return d.getSInt64();case 9:return d.getBool();default:return d.skip(),null}return null}const n=z.getLogger("esri.view.2d.layers.features.support.FeatureSetReaderPBF");
z=function(d){function b(c,g,r,u){c=d.call(this,c)||this;c._hasNext=!1;c._isPoints=!1;c._isPolygons=!1;c._featureIndex=-1;c._featureOffset=0;c._cache={area:0,unquantGeometry:void 0,geometry:void 0,centroid:void 0,legacyFeature:void 0,optFeature:void 0};c._geometryType=u;c._reader=g;c._header=r;c._hasNext=r.hasFeatures;c._isPoints="esriGeometryPoint"===u;c._isPolygons="esriGeometryPolygon"===u;return c}k._inheritsLoose(b,d);b.fromBuffer=function(c,g,r=!1){a:{try{const v=new l(new Uint8Array(c),new DataView(c));
for(;v.next();)switch(v.tag()){case 2:b:{for(var u=v.getMessage();u.next();)switch(u.tag()){case 1:var w=u.getMessage();break b;default:u.skip()}w=null}break a;default:v.skip()}}catch(v){c=new y("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:v}),n.error(c)}w=null}c=w;r=q.parseHeader(c,"esriGeometryPoint"===g,r);w=e.FeatureSetReader.createInstance();return new b(w,c,r,g)};var a=b.prototype;a.getApproximateSize=function(){return this._hasFilter?Math.max(Math.round(this.size*
Math.abs(this._xmax-this._xmin)*Math.abs(this._ymax-this._ymin)/262144),0):this.size};a.getQuantizationTransform=function(){return this._header.transform};a.getCursor=function(){return this.copy()};a.getIndex=function(){return this._featureIndex};a.setIndex=function(c){this._cache.area=0;this._cache.unquantGeometry=void 0;this._cache.geometry=void 0;this._cache.centroid=void 0;this._cache.legacyFeature=void 0;this._cache.optFeature=void 0;this._featureIndex=c};a.getAttributeHash=function(){let c=
"";this._header.fields.forEach(({index:g})=>{c+=this._readAttributeAtIndex(g)+"."});return c};a.getObjectId=function(){return this._readAttributeAtIndex(this._header.objectIdFieldIndex)};a.getDisplayId=function(){return this._header.displayIds[this._featureIndex]};a.setDisplayId=function(c){this._header.displayIds[this._featureIndex]=c};a.getGroupId=function(){return this._header.groupIds[this._featureIndex]};a.setGroupId=function(c){this._header.groupIds[this._featureIndex]=c};a.readLegacyFeature=
function(){if(void 0===this._cache.legacyFeature){var c,g=this.readCentroid();g={attributes:this.readAttributes(),geometry:this._isPoints?this.readLegacyPointGeometry():this.readLegacyGeometry(),centroid:null!=(c=g&&{x:g.coords[0],y:g.coords[1]})?c:null};return this._cache.legacyFeature=g}return this._cache.legacyFeature};a.readOptimizedFeature=function(){if(void 0===this._cache.optFeature){const c=new x(this.readGeometry(),this.readAttributes(),this.readCentroid());c.objectId=this.getObjectId();
c.displayId=this.getDisplayId();return this._cache.optFeature=c}return this._cache.optFeature};a.getXHydrate=function(){const c=this._header.centroid[2*this._featureIndex],g=this.getQuantizationTransform();return m.isNone(g)?c:c*g.scale[0]+g.translate[0]};a.getYHydrate=function(){const c=this._header.centroid[2*this._featureIndex+1],g=this.getQuantizationTransform();return m.isNone(g)?c:g.translate[1]-c*g.scale[1]};a.getX=function(){return this._header.centroid[2*this._featureIndex]*this._sx+this._tx};
a.getY=function(){return this._header.centroid[2*this._featureIndex+1]*this._sy+this._ty};a.readLegacyPointGeometry=function(){const c=this.getX(),g=this.getY();return{x:c,y:g}};a.readLegacyGeometry=function(){const c=this.readGeometry();return h.convertToGeometry(c,this.geometryType,!1,!1)};a.readLegacyCentroid=function(){const c=this.readCentroid();if(!c)return null;const [g,r]=c.coords;return{x:g,y:r}};a.readGeometryArea=function(){this._cache.area||this.readGeometry();return this._cache.area};
a.readUnquantizedGeometry=function(){if(void 0===this._cache.unquantGeometry){var c=this.readGeometry();if(!c)return this._cache.unquantGeometry=null;c=c.clone();const g=c.lengths,r=c.coords;for(let u=0,w=2;u<g.length;u++,w+=2){const v=g[u];for(let D=1;D<v;D+=1,w+=2)r[w]+=r[w-2],r[w+1]+=r[w-1]}return this._cache.unquantGeometry=c}return this._cache.unquantGeometry};a.readHydratedGeometry=function(){if(this._isPoints){var c=this.getXHydrate(),g=this.getYHydrate();return new f([],[c,g])}c=this.readGeometry();
if(!c)return null;c=c.clone();g=this.getQuantizationTransform();m.isSome(g)&&h.unquantizeOptimizedGeometry(c,c,this.hasZ,this.hasM,g);return c};a.readGeometry=function(){if(void 0===this._cache.geometry){var c=null;if(this._isPoints){c=this.getX();var g=this.getY();c=new f([],[c,g])}else{g=this._header.offsets.geometry[this._featureIndex];const r=this._reader;if(0===g)return null;r.move(g);try{c=this._parseGeometry(r)}catch(u){return console.error("Failed to parse geometry!",u),null}}return this._cache.geometry=
c}return this._cache.geometry};a.readCentroid=function(){if(void 0===this._cache.centroid){var c=null;c=this._header.centroid[2*this._featureIndex]+this._tx;const g=this._header.centroid[2*this._featureIndex+1]+this._ty;if(268435455===c){if(c=this._computeCentroid())this._header.centroid[2*this._featureIndex]=c.coords[0]-this._tx,this._header.centroid[2*this._featureIndex+1]=c.coords[1]-this._ty}else c=new f([],[c,g]);return this._cache.centroid=c}return this._cache.centroid};a.copy=function(){var c=
this._reader.clone();c=new b(this.instance,c,this._header,this.geometryType);this.copyInto(c);return c};a.next=function(){this._cache.area=0;this._cache.unquantGeometry=void 0;this._cache.geometry=void 0;this._cache.centroid=void 0;this._cache.legacyFeature=void 0;for(this._cache.optFeature=void 0;++this._featureIndex<this.size&&!this._passesFilter()&&!this._getExists(););return this._featureIndex<this.size};a._readAttribute=function(c,g){c=this._header.hasField(c)?c:c.toLowerCase().trim();var r=
this._header.getFieldIndex(c);if(null!=r)return r=this._readAttributeAtIndex(r),g&&null!=r?this._header.isDateField(c)?new Date(r):r:r};a._readAttributes=function(){const c={};this._header.fields.forEach(({fieldName:g,index:r})=>{c[g]=this._readAttributeAtIndex(r)});return c};a.copyInto=function(c){d.prototype.copyInto.call(this,c);c._featureIndex=this._featureIndex;c._featureOffset=this._featureOffset;c._hasNext=this._hasNext};a._passesFilter=function(){if(!this._hasFilter)return!0;let c=this._header.centroid[2*
this._featureIndex],g=this._header.centroid[2*this._featureIndex+1];if(268435455===c){if(this._isPolygons&&!this.readCentroid())return!1;c=this._header.centroid[2*this._featureIndex];g=this._header.centroid[2*this._featureIndex+1]}return c>=this._xmin&&c<=this._xmax&&g>=this._ymin&&g<=this._ymax?!0:!1};a._readAttributeAtIndex=function(c){const g=this._reader;g.move(this._header.offsets.attributes[this._featureIndex*this._header.fieldCount+c]);return p(g)};a._preprocessPolygon=function(c,g){let r=
0,u=0,w=0;var v=!1,D=!1;let B=!1,C=-1;const A=[];let E=0,G=!1;for(let N=0;N<g.length;N++){const L=g[N];var H=c[2*r],K=c[2*r+1],J=0;for(var F=1;F<L;F++){const M=H+c[2*(r+F)],S=K+c[2*(r+F)+1],Q=(M-H)*(S+K);H=M;K=S;J+=.5*Q}(H=0<J)&&G&&(u+=L);H||(C++,G=!1);if(1E6<=C)break;E+=J;v&&H&&D&&(B=!0);c[2*w]=c[2*u];c[2*w++ +1]=c[2*u++ +1];v=1;D=c[2*u];J=c[2*u++ +1];for(H=2;H<L;H++)K=c[2*u],F=c[2*u++ +1],0===D*F-K*J&&0<D*K+J*F?(D+=K,J+=F):(c[2*w]=D,c[2*w++ +1]=J,v++,D=K,J=F);c[2*w]=D;c[2*w++ +1]=J;v++;A.push(v);
v=!1;D=!0;r+=L}return A.length?(this._cache.area=Math.abs(E),new f(A,c,B)):null};a._parseGeometry=function(c){var g=c.getLength();const r=c.pos()+g;g=[];const u=[];for(;c.pos()<r&&c.next();)switch(c.tag()){case 2:var w=c.getUInt32();for(w=c.pos()+w;c.pos()<w;)u.push(c.getUInt32());break;case 3:w=c.getUInt32();for(w=c.pos()+w;c.pos()<w;)g.push(c.getSInt32()),g.push(c.getSInt32()),this.hasZ&&c.getSInt32(),this.hasM&&c.getSInt32();break;default:c.skip()}c=0;for(const v of u)g[2*c]+=this._tx,g[2*c+1]+=
this._ty,c+=v;return this._isPolygons?this._preprocessPolygon(g,u):new f(u,g)};k._createClass(b,[{key:"geometryType",get:function(){return this._geometryType}},{key:"size",get:function(){return this._header.featureCount}},{key:"hasZ",get:function(){return!1}},{key:"hasM",get:function(){return!1}},{key:"stride",get:function(){return 2+(this.hasZ?1:0)+(this.hasM?1:0)}},{key:"hasFeatures",get:function(){return this._header.hasFeatures}},{key:"hasNext",get:function(){return this._hasNext}},{key:"exceededTransferLimit",
get:function(){return this._header.exceededTransferLimit}}]);return b}(e.FeatureSetReader);t.FeatureSetReaderPBF=z;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/views/2d/layers/features/support/FeatureSetReaderPBFHeader":function(){define(["exports","../../../../../core/Error","../../../../../rest/query/operations/pbfFeatureServiceParser"],function(t,k,m){let z=function(){function y(){this.fieldMap=new Map;this.fields=[];this.hasFeatures=!1;this.objectIdFieldIndex=this.featureCount=this.fieldCount=
0;this.offsets={attributes:[],geometry:[]};this.centroid=[]}var x=y.prototype;x.hasField=function(f){return this.fieldMap.has(f)};x.isDateField=function(f){var h;return null==(h=this.fieldMap.get(f))?void 0:h.isDate};x.getFieldIndex=function(f){var h;return null==(h=this.fieldMap.get(f))?void 0:h.index};return y}();t.FeatureSetHeader=z;t.parseHeader=function(y,x,f=!1){const h=y.pos(),e=new z;let l=0,q=0,p=null,n=null,d=null,b=!1;for(;y.next();)switch(y.tag()){case 1:p=y.getString();break;case 3:n=
y.getString();break;case 12:d=y.processMessage(m.parseTransform);break;case 9:e.exceededTransferLimit=y.getBool();if(e.exceededTransferLimit){e.offsets.geometry=f?new Float64Array(8E3):new Int32Array(8E3);e.centroid=f?new Float64Array(16E3):new Int32Array(16E3);for(var a=0;a<e.centroid.length;a++)e.centroid[a]=268435455}break;case 13:a=y;var c=a.getLength();c=a.pos()+c;for(var g={name:"",isDate:!1};a.pos()<c&&a.next();)switch(a.tag()){case 1:g.name=a.getString();break;case 2:"esriFieldTypeDate"===
m.parseFieldType(a.getEnum())&&(g.isDate=!0);break;default:a.skip()}a=g;g=a.name;c=a.name.toLowerCase().trim();g={fieldName:g,index:l++,isDate:a.isDate};e.fields.push(g);e.fieldMap.set(a.name,g);e.fieldMap.set(c,g);break;case 15:a=y.getLength();a=y.pos()+a;e.exceededTransferLimit||(c=e.centroid,e.offsets.geometry.push(0),c.push(268435455),c.push(268435455));!b&&e.exceededTransferLimit&&(b=!0,e.offsets.attributes=f?new Float64Array(8E3*l):new Uint32Array(8E3*l));for(c=q*l;y.pos()<a&&y.next();)switch(y.tag()){case 1:b?
e.offsets.attributes[c++]=y.pos():e.offsets.attributes.push(y.pos());g=y.getLength();y.skipLen(g);break;case 2:if(x)for(g=y.getLength(),g=y.pos()+g;y.pos()<g&&y.next();)switch(y.tag()){case 3:y.getUInt32();var r=y.getSInt64(),u=y.getSInt64();e.centroid[2*q]=r;e.centroid[2*q+1]=u;break;default:y.skip()}else e.offsets.geometry[q]=y.pos(),g=y.getLength(),y.skipLen(g);break;case 4:g=y.getLength();for(g=y.pos()+g;y.pos()<g&&y.next();)switch(y.tag()){case 3:y.getUInt32();r=y.getSInt64();u=y.getSInt64();
e.centroid[2*q]=r;e.centroid[2*q+1]=u;break;default:y.skip()}break;default:y.skip()}q++;e.hasFeatures=!0;break;default:y.skip()}x=p||n;if(!x)throw new k("FeatureSet has no objectId or globalId field name");e.featureCount=q;e.fieldCount=l;e.objectIdFieldIndex=e.getFieldIndex(x);e.transform=d;e.displayIds=new Uint32Array(e.featureCount);e.groupIds=new Uint16Array(e.featureCount);y.move(h);return e};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/views/2d/layers/features/sources/DataTileSource":function(){define("exports ../../../../../core/has ../../../../../core/maybe ../../../../../core/promiseUtils ../../../../../core/Evented ../../../../../core/accessorSupport/diffUtils ../../../../../TimeExtent ../../../../../tasks/support/Query ../controllers/EditsQueue ../support/UpdateToken ./DataTileSubscription".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q){function p(d,b){const a=new Set;d&&d.forEach(c=>a.add(c));b&&b.forEach(c=>a.add(c));return a.has("*")?["*"]:Array.from(a)}let n=function(){function d(a){this.events=new y;this._pendingEdits=new Set;this._resolver=z.createResolver();this._editsQueue=new e.EditsQueue({processEdits:(c,g)=>this._processEdit(c,g)});this._subscriptions=new Map;this._outSR=a.outSR;this._serviceInfo=a.serviceInfo;this._onTileUpdateMessage=a.onMessage}var b=d.prototype;b.destroy=function(){this._editsQueue.clear()};
b._onMessage=async function(a){var c;const g=this._subscriptions.get(a.id);if(g)return a={...a,remove:null!=(c=a.remove)?c:[],status:a.status},this._onTileUpdateMessage(a,g.options)};b.update=function(a,c){var g,r=c.fields.length;c.outFields=p(null==(g=this._schema)?void 0:g.outFields,c.outFields);c.outFields=c.outFields.length>=.75*r?["*"]:c.outFields;c.outFields.sort();if(g=x.diff(this._schema,c)){k("esri-2d-update-debug")&&console.debug("Applying Update - Source:",g);r={returnCentroid:k("esri-2d-query-centroid-enabled")&&
"esriGeometryPolygon"===this._serviceInfo.geometryType,returnGeometry:!0,outFields:c.outFields,outSpatialReference:this._outSR,orderByFields:[`${this._serviceInfo.objectIdField} ASC`],where:c.definitionExpression||"1\x3d1",gdbVersion:c.gdbVersion,historicMoment:c.historicMoment?new Date(c.historicMoment):null,timeExtent:f.fromJSON(c.timeExtent)};var u=this._schema&&x.hasDiff(g,"outFields");this._schema&&x.hasDiffAny(g,["timeExtent","definitionExpression","gdbVersion","historicMoment"])&&(a.why.mesh.push("Layer filter changed"),
a.why.source.push("Layer filter changed"),a.mesh=!0,a.source=!0,a.queryFilter=!0,this._invalidate("all"));u&&(a.why.source.push("Layer required fields changed"),a.source=!0,this._invalidate("fields"));x.diff(r,this._queryInfo)&&(this._queryInfo=r);this._schema=c;this._resolver.resolve()}};b.whenInitialized=function(){return this._resolver.promise};b.applyUpdate=async function(a){a.queryFilter?this.refresh():(this._subscriptions.forEach(c=>c.applyUpdate(a)),await this.resend())};b.refresh=function(){for(const a of this._tiles())this.unsubscribe(a),
this.subscribe(a)};b._tiles=function(){const a=[];this._subscriptions.forEach(c=>a.push(c.tile));return a};b.pause=function(){this._subscriptions.forEach(a=>a.abort())};b.subscribe=function(a){const c=new q.DataTileSubscription(a);this._subscriptions.set(a.id,c)};b.unsubscribe=function(a){const c=this.get(a.id);m.isSome(c)&&c.abort();this._subscriptions.delete(a.id)};b.forEachPendingEdit=function(a){Array.from(this._subscriptions.values()).some(c=>"none"!==c.invalid)?this._pendingEdits.forEach(a):
this._pendingEdits.clear()};b.edit=async function(a){return this._editsQueue.push(a)};b.createQuery=function(a={}){return new h({...this._queryInfo,...a})};b.get=function(a){return this._subscriptions.has(a)?this._subscriptions.get(a):null};b.queryLastEditDate=async function(){throw Error("Service does not support query type");};b.query=async function(a,c){throw Error("Service does not support query");};b._invalidate=function(a){this._subscriptions.forEach(c=>c.invalidate(a))};b._processEdit=async function(a,
c){c.forEach(r=>{this._pendingEdits.has(r)&&this._pendingEdits.delete(r)});a.forEach(r=>this._pendingEdits.add(r));var g=Array.from(this._subscriptions.values()).map(({tile:r})=>r).map(r=>{const u=this.createTileQuery(r);u.objectIds=a;return{tile:r,query:u}}).map(async({tile:r,query:u})=>({tile:r,result:await this.query(u)}));g=(await z.all(g)).map(async({tile:r,result:u})=>{if((u.hasFeatures||c.length||a.length)&&this._subscriptions.get(r.key.id))return this._onMessage({type:"update",id:r.key.id,
addOrUpdate:u,remove:[...a,...c],end:!0,status:l.UpdateToken.empty()})});await Promise.all(g);this._invalidate("all")};return d}();t.DataTileSource=n;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/views/2d/layers/features/controllers/EditsQueue":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/has ../../../../../core/Logger ../../../../../core/accessorSupport/ensureType ../../../../../core/accessorSupport/decorators/property ../../../../../core/jsonMap ../../../../../core/accessorSupport/decorators/subclass ../../../../../core/urlUtils ../../../../../core/uuid ../../../../../portal/support/resourceExtension ../../../../../core/promiseUtils ../../../../../core/Accessor".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d){t.EditsQueue=function(b){function a(g){g=b.call(this,g)||this;g._queue=[];g._onGoingRequest=null;g._abortController=n.createAbortController();return g}k._inheritsLoose(a,b);var c=a.prototype;c.destroy=function(){this.clear()};c.clear=function(){if(this.destroyed)throw Error("instance is already destroyed");let g=this._queue.pop();for(;g;)g.resolver.reject(n.createAbortError()),g=this._queue.pop();this._queue.length=0;this._abortController.abort();this._abortController=
n.createAbortController()};c.push=async function(g){if(this.destroyed)throw Error("instance is already destroyed");const r=n.createResolver();this._queue.push({event:g,resolver:r});this.notifyChange("updating");Promise.resolve().then(()=>{this._processNext()});return r.promise};c._processNext=async function(){if(!this._onGoingRequest){for(var g=[],r=new Set,u=new Set,w=new Set,v=this._queue.shift();v;){const {event:{addedFeatures:C,deletedFeatures:A,updatedFeatures:E},resolver:G}=v;g.push(G);for(const {objectId:H,
error:K}of C)K||(r.add(H),u.add(H),w.delete(H));for(const {objectId:H,error:K}of E)K||(u.add(H),w.delete(H));for(const {objectId:H,error:K}of A)K||(r.has(H)?r.delete(H):w.add(H),u.delete(H));v=this._queue.shift()}if(u.size||w.size){var D=[],B=[];u.size&&u.forEach(C=>{D.push(C)});w.size&&w.forEach(C=>{B.push(C)});this._onGoingRequest=Promise.resolve().then(()=>this.processEdits(D,B,{signal:this._abortController.signal})).catch(()=>{});this.notifyChange("updating");await this._onGoingRequest;this._onGoingRequest=
null;this.notifyChange("updating");g.forEach(C=>C());0<this._queue.length&&this._processNext()}else this.notifyChange("updating"),g.forEach(C=>C())}};k._createClass(a,[{key:"updating",get:function(){return!this.destroyed&&(0<this._queue.length||null!=this._onGoingRequest)}}]);return a}(d);m.__decorate([f.property({constructOnly:!0})],t.EditsQueue.prototype,"processEdits",void 0);m.__decorate([f.property({readOnly:!0})],t.EditsQueue.prototype,"updating",null);t.EditsQueue=m.__decorate([e.subclass("esri.views.2d.layers.features.controllers.EditsQueue")],
t.EditsQueue);Object.defineProperty(t,"__esModule",{value:!0})})},"esri/views/2d/layers/features/sources/DataTileSubscription":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../../../../../core/CircularArray","../support/UpdateToken"],function(t,k,m,z){let y=function(){function x(h){this.requests={done:[],stream:new m(10)};this._abortController=new AbortController;this.didSend=!1;this.tile=h}var f=x.prototype;f.sentEnd=function(){return this.requests.done.some(h=>
h.message.end)};f.clear=function(){this.requests.done=[]};f.applyUpdate=function(h){this.requests.done.forEach(e=>e.message.status.unset(h))};f.invalidate=function(h){switch(h){case "fields":"none"===this._invalid&&(this._invalid="fields");break;case "all":this._invalid="all"}};f.done=function(){this._invalid="none"};f.add=function(h){var e;h.message.status=null!=(e=h.message.status)?e:z.UpdateToken.empty();this.requests.done.push(h);h.message.end&&(this.resolved=!0)};f.abort=function(){this._abortController.abort()};
k._createClass(x,[{key:"invalid",get:function(){return this._invalid}},{key:"signal",get:function(){return this._abortController.signal}},{key:"options",get:function(){return{signal:this._abortController.signal}}}]);return x}();t.DataTileSubscription=y;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/views/2d/layers/features/sources/GeoEventSource":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/has ../../../../../core/maybe ../../../../../layers/graphics/OptimizedGeometry ../../../../../layers/graphics/featureConversionUtils ../support/FeatureSetReaderJSON ../../../../../chunks/rbush ../../../../../layers/graphics/data/StreamFeatureManager ../../../../../layers/graphics/sources/connections/createConnection ../support/UpdateToken ./DataTileSource".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p){function n(c,g){const r=c.weakClone(),u=x.quantizeX(g,c.geometry.coords[0]);c=x.quantizeY(g,c.geometry.coords[1]);r.geometry=new y([],[u,c]);return r}function d(c){switch(c){case "esriGeometryPoint":return n;default:return(g,r)=>{const u=g.weakClone(),w=new y;g=x.quantizeOptimizedGeometry(w,g.geometry,!1,!1,c,r,!1,!1);u.geometry=g;return u}}}function b(c){switch(c){case "esriGeometryPoint":return g=>({minX:g.geometry.coords[0],minY:g.geometry.coords[1],maxX:g.geometry.coords[0],
maxY:g.geometry.coords[1]});default:return g=>{let r=Infinity,u=Infinity,w=-Infinity,v=-Infinity;g.geometry.forEachVertex((D,B)=>{r=Math.min(r,D);u=Math.min(u,B);w=Math.max(w,D);v=Math.max(v,B)});return{minX:r,minY:u,maxX:w,maxY:v}}}}let a=function(){function c(r,u){this.onUpdate=r;this._geometryType=u;this._objectIdToFeature=new Map}var g=c.prototype;g.add=function(r){this._objectIdToFeature.set(r.objectId,r);this._index=null};g.get=function(r){return this._objectIdToFeature.has(r)?this._objectIdToFeature.get(r):
null};g.forEach=function(r){this._objectIdToFeature.forEach(r)};g.search=function(r){if(!this._index){{var u=this._features;const w=h.rbush(9,b(this._geometryType));w.load(u);u=w}this._index=u}return this._index.search({minX:r.bounds[0],minY:r.bounds[1],maxX:r.bounds[2],maxY:r.bounds[3]})};g.removeById=function(r){const u=this._objectIdToFeature.get(r);return u?(this._objectIdToFeature.delete(r),this._index=null,u):null};g.update=function(r,u){this.onUpdate(r,u)};k._createClass(c,[{key:"_features",
get:function(){const r=[];this._objectIdToFeature.forEach(u=>r.push(u));return r}},{key:"size",get:function(){return this._objectIdToFeature.size}}]);return c}();m=function(c){function g(u){var w=c.call(this,u)||this;w.type="geoevent";w._dataReceiveEventEnabled=!1;w._level=0;w._updateInfo={websocket:0,client:0};var {outSR:v}=u;const {geometryType:D,objectIdField:B,timeInfo:C,purgeOptions:A,source:E,spatialReference:G,serviceFilter:H,maxReconnectionAttempts:K,maxReconnectionInterval:J,updateInterval:F}=
u.serviceInfo,N=new a(w._onUpdate.bind(k._assertThisInitialized(w)),D),L=new e["default"](N,B,C,A);v=l.createConnection(E,G,v,D,H,K,J);w._store=N;w._manager=L;w._connection=v;w._quantize=d(D);w._handles=[w._connection.on("feature",S=>w._onFeature(S)),w._connection.watch("connectionStatus",S=>w.events.emit("connectionStatus",S)),w._connection.watch("errorString",S=>w.events.emit("errorString",S))];let M=performance.now();w._updateIntervalId=setInterval(()=>{var S=performance.now(),Q=S-M;2500<Q&&(M=
S,S=Math.round(w._updateInfo.client/(Q/1E3)),Q=Math.round(w._updateInfo.websocket/(Q/1E3)),w._updateInfo.client=0,w._updateInfo.websocket=0,w.events.emit("updateRate",{client:S,websocket:Q}));u.canAcceptRequest()&&w._manager.checkForUpdates()},F);return w}k._inheritsLoose(g,c);var r=g.prototype;r.destroy=function(){c.prototype.destroy.call(this);clearInterval(this._updateIntervalId);this._handles.forEach(u=>u.remove());this._connection.destroy()};r._fetchDataTile=function(){};r.resume=function(){};
r.enableEvent=function(u,w){"data-received"===u&&(this._dataReceiveEventEnabled=w)};r.subscribe=function(u){c.prototype.subscribe.call(this,u);const w=this._subscriptions.get(u.id);this._level=u.level;const v=this._getTileFeatures(u);this._onMessage({type:"append",id:u.key.id,addOrUpdate:v,end:!0});w.didSend=!0};r.unsubscribe=function(u){c.prototype.unsubscribe.call(this,u)};r.forEachRequest=function(u,w){const v=this._subscriptions.get(u),{tile:D,signal:B}=v;u={type:"append",tile:D,id:u,addOrUpdate:this._getTileFeatures(D),
end:!0};w(u,{signal:B});v.requests.stream.entries.forEach(C=>{z.isSome(C)&&w(C,{signal:B})})};r.createTileQuery=function(u){throw Error("Service does not support tile  queries");};r.resend=async function(){this._subscriptions.forEach(u=>{({tile:u}=u);u={type:"append",id:u.id,addOrUpdate:this._getTileFeatures(u),end:!0};this._onMessage(u)})};r._getTileFeatures=function(u){const w=this._store.search(u).map(v=>this._quantize(v,u.transform));return f.FeatureSetReaderJSON.fromOptimizedFeatures(w,this._serviceInfo.geometryType,
u.transform)};r._onFeature=function(u){this._updateInfo.websocket++;try{this._dataReceiveEventEnabled&&this.events.emit("feature",u);const w=x.convertFromFeature(u,this._serviceInfo.geometryType,!1,!1,this._serviceInfo.objectIdField);this._manager.add(w)}catch(w){}};r._onUpdate=function(u,w){z.isSome(u)&&(this._updateInfo.client+=u.length);this._subscriptions.forEach((v,D)=>{v.didSend&&v.tile.level===this._level&&this._onMessage({type:"append",id:D,addOrUpdate:null,clear:!0,end:!1})});this._subscriptions.forEach((v,
D)=>{if(v.didSend&&v.tile.level===this._level){var B=this._getTileFeatures(v.tile);D={type:"append",id:D,addOrUpdate:B,remove:[],end:!0,status:q.UpdateToken.empty()};v.requests.stream.enqueue(D);this._onMessage(D)}})};k._createClass(g,[{key:"updating",get:function(){return!1}}]);return g}(p.DataTileSource);t.GeoEventSource=m;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/layers/graphics/data/StreamFeatureManager":function(){define(["exports","../../../core/maybe","../../../core/mathUtils",
"../../../core/CircularArray"],function(t,k,m,z){let y=function(){function x(h,e,l,q,p=128){this._trackIdToObservations=new Map;this._idCounter=0;this._lastPurge=performance.now();this._addOrUpdated=new Map;this._removed=[];this._maxAge=0;this._timeInfo=l;this._purgeOptions=q;this.store=h;this.objectIdField=e;this.purgeInterval=p;this._useGeneratedIds="__esri_stream_id__"===this.objectIdField}var f=x.prototype;f.add=function(h){if(this._useGeneratedIds){var e=this._nextId();h.attributes[this.objectIdField]=
e;h.objectId=e}else h.objectId=h.attributes[this.objectIdField];this._addOrUpdated.set(h.objectId,h);this._maxAge=Math.max(this._maxAge,h.attributes[this._timeInfo.startTimeField]);if(this._timeInfo.trackIdField){e=h.attributes[this._timeInfo.trackIdField];if(!this._trackIdToObservations.has(e)){var l=k.isSome(this._purgeOptions)&&null!=this._purgeOptions.maxObservations?this._purgeOptions.maxObservations:1E3;l=m.clamp(l,0,1E3);this._trackIdToObservations.set(e,new z(l))}h=this._trackIdToObservations.get(e).enqueue(h.objectId);
k.isSome(h)&&(this._addOrUpdated.has(h)?this._addOrUpdated.delete(h):this._removed.push(h))}else k.isNone(this._trackIdLessObservations)&&(this._trackIdLessObservations=new z(1E5)),this._trackIdLessObservations.enqueue(h.objectId)};f.checkForUpdates=function(){const h=this._getToAdd();var e=this._getToRemove();const l=performance.now();l-this._lastPurge>=this.purgeInterval&&(this._purge(l),this._lastPurge=l);const q=[];if(k.isSome(e))for(const p of e)e=this.store.removeById(p),k.isSome(e)&&q.push(e);
if(k.isSome(h))for(const p of h)p.attributes.__esri_timestamp__=l,this.store.add(p);(h||q)&&this.store.update(h,q)};f._getToAdd=function(){if(!this._addOrUpdated.size)return null;const h=Array(this._addOrUpdated.size);let e=0;this._addOrUpdated.forEach(l=>h[e++]=l);this._addOrUpdated.clear();return h};f._getToRemove=function(){const h=this._removed;if(!this._removed.length)return null;this._removed=[];return h};f._nextId=function(){const h=this._idCounter;this._idCounter=(this._idCounter+1)%4294967294+
1;return h};f._purge=function(h){const e=this._purgeOptions;k.isSome(e)&&(this._purgeSomeByDisplayCount(e),this._purgeByAge(e),this._purgeByAgeReceived(h,e),this._purgeTracks())};f._purgeSomeByDisplayCount=function(h){if(h.displayCount){var e=this.store.size;if(e>h.displayCount){if(this._timeInfo.trackIdField)for(const l of this._trackIdToObservations.values())if(e>h.displayCount&&l.size){const q=k.unwrap(l.dequeue());this._removed.push(q);e--}if(k.isSome(this._trackIdLessObservations))for(h=e-h.displayCount;0<
h--;)e=this._trackIdLessObservations.dequeue(),k.isSome(e)&&this._removed.push(e)}}};f._purgeByAge=function(h){var e;if(h.age&&null!=(e=this._timeInfo)&&e.startTimeField){var l=this._maxAge-6E4*h.age;this.store.forEach(q=>{q.attributes[this._timeInfo.startTimeField]<l&&this._removed.push(q.objectId)})}};f._purgeByAgeReceived=function(h,e){if(e.ageReceived){var l=h+6E4*e.ageReceived;this.store.forEach(q=>{q.attributes.__esri_timestamp__<l&&this._removed.push(q.objectId)})}};f._purgeTracks=function(){this._trackIdToObservations.forEach((h,
e)=>{0===h.size&&this._trackIdToObservations.delete(e)})};return x}();t.DEFAULT_STREAM_ID_FIELD="__esri_stream_id__";t.ESRI_TIMESTAMP="__esri_timestamp__";t.default=y;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/layers/graphics/sources/connections/createConnection":function(){define(["exports","./WebSocketConnection","./GeoEventConnection"],function(t,k,m){t.createConnection=function(z,y,x,f,h,e,l){const q=0===z.path.indexOf("wss://")||0===z.path.indexOf("ws://");z={source:z,sourceSpatialReference:y,
spatialReference:x,geometryType:f,filter:h,maxReconnectionAttempts:e,maxReconnectionInterval:l};return q?new k.WebSocketConnection(z):new m(z)};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/layers/graphics/sources/connections/WebSocketConnection":function(){define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/has ../../../../core/maybe ../../../../core/Logger ../../../../core/accessorSupport/ensureType ../../../../core/accessorSupport/decorators/property ../../../../core/jsonMap ../../../../core/accessorSupport/decorators/subclass ../../../../core/Error ../../../../core/urlUtils ../../../../core/uuid ../../../../portal/support/resourceExtension ../../../../core/promiseUtils ../../../../rest/query/operations/zscale ./StreamConnection".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d,b,a,c){const g=x.getLogger("esri.layers.graphics.sources.connections.WebSocketConnection");(function(r){r[r.CONNECTING=0]="CONNECTING";r[r.OPEN=1]="OPEN";r[r.CLOSING=2]="CLOSING";r[r.CLOSED=3]="CLOSED"})(t.ReadyState||(t.ReadyState={}));t.WebSocketConnection=function(r){function u(v){var D=r.call(this)||this;D.errorString=null;const {geometryType:B,spatialReference:C,sourceSpatialReference:A}=v;D._config=v;D._featureZScaler=a.getGeometryZScaler(B,A,C);D._open();
return D}k._inheritsLoose(u,r);var w=u.prototype;w._open=async function(){await this._tryCreateWebSocket();this.destroyed||await this._handshake()};w.destroy=function(){y.isSome(this._websocket)&&(this._websocket.onopen=null,this._websocket.onclose=null,this._websocket.onerror=null,this._websocket.onmessage=null,this._websocket.close());this._websocket=null};w._tryCreateWebSocket=async function(v=this._config.source.path,D=1E3,B=0){try{this.destroyed||(this._websocket=await this._createWebSocket(v),
this.notifyChange("connectionStatus"))}catch(C){const A=D/1E3;if(this._config.maxReconnectionAttempts&&B>=this._config.maxReconnectionAttempts)g.error(new q("websocket-connection","Exceeded maxReconnectionAttempts attempts. No further attempts will be made")),this.destroy();else return g.error(new q("websocket-connection",`Failed to connect. Attempting to reconnect in ${A}s`,C)),await b.after(D),this._tryCreateWebSocket(v,Math.min(1.5*D,1E3*this._config.maxReconnectionInterval),B+1)}};w._createWebSocket=
function(v){const D=new WebSocket(v);v=new Promise((B,C)=>{D.onopen=()=>B(D);D.onclose=A=>C(A)});v.then(()=>{this.destroyed?(D.onclose=()=>{},D.close()):(D.onclose=B=>this._onClose(B),D.onerror=B=>this._onError(B),D.onmessage=B=>this._onMessage(B))});return v};w._handshake=async function(v=1E4){const D=this._websocket;if(!y.isNone(D)){var B=b.createResolver(),C=D.onmessage,{filter:A,outFields:E,spatialReference:G}=this._config;B.timeout(v);D.onmessage=H=>{var K;let J=null;try{J=JSON.parse(H.data)}catch(F){}J&&
"object"===typeof J||(g.error(new q("websocket-connection","Protocol violation. Handshake failed - malformed message",H.data)),B.reject(),this.destroy());(null==(K=J.spatialReference)?void 0:K.wkid)!==(null==G?void 0:G.wkid)&&(g.error(new q("websocket-connection",`Protocol violation. Handshake failed - expected wkid of ${G.wkid}`,H.data)),B.reject(),this.destroy());"json"!==J.format&&(g.error(new q("websocket-connection","Protocol violation. Handshake failed - format is not set",H.data)),B.reject(),
this.destroy());A&&J.filter!==A&&g.error(new q("websocket-connection","Tried to set filter, but server doesn't support it"));E&&J.outFields!==E&&g.error(new q("websocket-connection","Tried to set outFields, but server doesn't support it"));D.onmessage=C;B.resolve()};D.send(JSON.stringify({filter:A,outFields:E,format:"json",spatialReference:{wkid:G.wkid}}));return B.promise}};w._onMessage=function(v){try{const D=JSON.parse(v.data);if("featureResult"!==D.type)throw new q("websocket-connection","Protocol violation - Expected to find message of type 'featureResult'",
D);for(const B of D.features)this._featureZScaler&&this._featureZScaler(B.geometry),this.onFeature(B)}catch(D){g.error(new q("websocket-connection","Failed to parse message",D)),this.destroy()}};w._onError=function(v){this._set("errorString","Encountered an error over WebSocket connection");g.error("websocket-connection","Encountered an error over WebSocket connection")};w._onClose=function(v){this._websocket=null;this.notifyChange("connectionStatus");1E3!==v.code&&g.error("websocket-connection",
`WebSocket closed unexpectedly with error code ${v.code}`);this.destroyed||this._open()};k._createClass(u,[{key:"connectionStatus",get:function(){if(y.isNone(this._websocket))return"disconnected";switch(this._websocket.readyState){case t.ReadyState.CONNECTING:case t.ReadyState.OPEN:return"connected";case t.ReadyState.CLOSING:case t.ReadyState.CLOSED:return"disconnected"}}}]);return u}(c);m.__decorate([h.property()],t.WebSocketConnection.prototype,"connectionStatus",null);m.__decorate([h.property()],
t.WebSocketConnection.prototype,"errorString",void 0);t.WebSocketConnection=m.__decorate([l.subclass("esri.layers.graphics.sources.connections.WebSocketConnection")],t.WebSocketConnection);Object.defineProperty(t,"__esModule",{value:!0})})},"esri/layers/graphics/sources/connections/StreamConnection":function(){define("../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/has ../../../../core/Logger ../../../../core/accessorSupport/ensureType ../../../../core/accessorSupport/decorators/property ../../../../core/jsonMap ../../../../core/accessorSupport/decorators/subclass ../../../../core/urlUtils ../../../../core/uuid ../../../../portal/support/resourceExtension ../../../../core/Evented ../../../../core/HandleOwner".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n){m=function(d){function b(){return d.apply(this,arguments)||this}t._inheritsLoose(b,d);b.prototype.onFeature=function(a){this.emit("feature",a)};return b}(p.EventedMixin(n.HandleOwner));return m=k.__decorate([h.subclass("esri.layers.graphics.sources.connections.StreamConnection")],m)})},"esri/layers/graphics/sources/connections/GeoEventConnection":function(){define("require ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/has ../../../../core/maybe ../../../../core/Logger ../../../../core/accessorSupport/ensureType ../../../../core/accessorSupport/decorators/property ../../../../core/jsonMap ../../../../core/accessorSupport/decorators/subclass ../../../../core/Error ../../../../core/urlUtils ../../../../core/uuid ../../../../portal/support/resourceExtension ../../../../core/promiseUtils ../../../../geometry/SpatialReference ../../../../geometry/support/jsonUtils ../../../../geometry ../../../../request ../../../../tasks/support/Query ../../../../rest/query/operations/query ./WebSocketConnection".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d,b,a,c,g,r,u,w,v){const D=x.getLogger("esri.layers.graphics.sources.connections.GeoEventConnection"),B={maxQueryDepth:5,maxRecordCountFactor:3};z=function(C){function A(G){return C.call(this,{...B,...G})||this}k._inheritsLoose(A,C);var E=A.prototype;E._open=async function(){var G=await this._fetchServiceDefinition(this._config.source);G.timeInfo.trackIdField||D.warn("GeoEvent service was configured without a TrackIdField. This may result in certain functionality being disabled. The purgeOptions.maxObservations property will have no effect.");
G=await this._fetchWebSocketUrl(G.streamUrls,this._config.spatialReference);this._buddyServicesQuery||(this._buddyServicesQuery=this._queryBuddyServices());await this._buddyServicesQuery;await this._tryCreateWebSocket(G);const {filter:H,outFields:K}=this._config;this.destroyed||this._setFilter(H,K)};E._onMessage=function(G){let H;try{H=this._enrich(JSON.parse(G.data)),this._featureZScaler&&this._featureZScaler(H.geometry)}catch(K){D.error(new q("geoevent-connection","Failed to parse message",K));
return}this.onFeature(H)};E._fetchServiceDefinition=async function(G){return this._serviceDefinition=G=(await r(G.path,{query:{f:"json"},responseType:"json"})).data};E._fetchWebSocketUrl=async function(G,H){const {urls:K,token:J}=G[0];return`${this._inferWebSocketBaseUrl(K)}/subscribe?outSR=${H.wkid}${J?"\x26token\x3d"+J:""}`};E._inferWebSocketBaseUrl=function(G){if(1===G.length)return G[0];for(const H of G)if(-1!==H.indexOf("wss"))return H;D.error(new q("geoevent-connection","Unable to infer WebSocket url",
G));return null};E._setFilter=async function(G,H){const K=this._websocket;if(!(y.isNone(K)||y.isNone(G)&&y.isNone(H))){G=JSON.stringify({filter:this._serializeFilter(G,H)});var J=!1,F=b.createResolver();K.onmessage=N=>{N=JSON.parse(N.data);N.filter&&(N.error&&(D.error(new q("geoevent-connection","Failed to set service filter",N.error)),this._set("errorString",`Could not set service filter - ${N.error}`),F.reject(N.error)),K.onmessage=this._onMessage.bind(this),J=!0,F.resolve())};K.send(G);setTimeout(()=>
{J||(this.destroyed||this._websocket!==K||D.error(new q("geoevent-connection","Server timed out when setting filter")),F.reject())},1E4);return F.promise}};E._serializeFilter=function(G,H){const K={};if(y.isNone(G)&&y.isNone(H))return K;if(y.isSome(G)&&G.geometry)try{const J=c.fromJSON(G.geometry);if("extent"!==J.type)throw new q(`Expected extent but found type ${J.type}`);K.geometry=JSON.stringify(J.shiftCentralMeridian())}catch(J){D.error(new q("geoevent-connection","Encountered an error when setting connection geometryDefinition",
J))}y.isSome(G)&&G.where&&"1 \x3d 1"!==G.where&&(K.where=G.where);y.isSome(H)&&(K.outFields=H.join(","));return K};E._enrich=function(G){if(!this._relatedFeatures)return G;const H=G.attributes[this._serviceDefinition.relatedFeatures.joinField];if(!this._relatedFeatures.has(H))return D.warn("geoevent-connection","Feature join failed. Is the join field configured correctly?",G),G;const {attributes:K,geometry:J}=this._relatedFeatures.get(H);for(const F in K)G.attributes[F]=K[F];J&&(G.geometry=J);G.geometry||
G.centroid||D.error(new q("geoevent-connection","Found malformed feature - no geometry found",G));return G};E._queryBuddyServices=async function(){try{const {relatedFeatures:G,keepLatestArchive:H}=this._serviceDefinition,K=this._queryRelatedFeatures(G),J=this._queryArchive(H);await K;const F=await J;if(F)for(const N of F.features)this.onFeature(this._enrich(N))}catch(G){D.error(new q("geoevent-connection","Encountered an error when querying buddy services",{error:G}))}};E._queryRelatedFeatures=async function(G){G&&
(G=await this._queryBuddy(G.featuresUrl),this._addRelatedFeatures(G))};E._queryArchive=async function(G){if(G)return this._queryBuddy(G.featuresUrl)};E._queryBuddy=async function(G){const H=new (await new Promise(function(S,Q){t(["../../../FeatureLayer"],function(U){S(Object.freeze({__proto__:null,"default":U}))},Q)})).default({url:G});var {capabilities:K}=await H.load();const J=K.query.supportsMaxRecordCountFactor,F=K.query.supportsPagination;K=K.query.supportsCentroid;const N=this._config.maxRecordCountFactor;
var L=H.capabilities.query.maxRecordCount;L=J?L*N:L;const M=new u;M.outFields=y.unwrapOr(this._config.outFields,["*"]);M.where=y.unwrapOr(y.get(this._config.filter,"where"),"1\x3d1");M.returnGeometry=!0;M.returnExceededLimitFeatures=!0;M.outSpatialReference=a.fromJSON(this._config.spatialReference);K&&(M.returnCentroid=!0);J&&(M.maxRecordCountFactor=N);if(F)return M.num=L,H.destroy(),this._queryPages(G,M);G=await w.executeQuery(G,M,this._config.sourceSpatialReference);H.destroy();return G.data};E._queryPages=
async function(G,H,K=[],J=0){H.start=y.isSome(H.num)?J*H.num:null;const {data:F}=await w.executeQuery(G,H,this._config.sourceSpatialReference);if(F.exceededTransferLimit&&J<this._config.maxQueryDepth)return F.features.forEach(N=>K.push(N)),this._queryPages(G,H,K,J+1);K.forEach(N=>F.features.push(N));return F};E._addRelatedFeatures=function(G){const H=new Map;G=G.features;const K=this._serviceDefinition.relatedFeatures.joinField;for(const J of G)H.set(J.attributes[K],J);this._relatedFeatures=H};return A}(v.WebSocketConnection);
return z=m.__decorate([l.subclass("esri.layers.graphics.sources.connections.GeoEventConnection")],z)})},"esri/views/2d/layers/features/sources/PagedFeatureSource":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/maybe ../../../../../core/Logger ../../../../../core/Error ../../../../../core/promiseUtils ./BaseFeatureSource".split(" "),function(t,k,m,z,y,x,f){const h=z.getLogger("esri.views.2d.layers.features.sources.FeatureSource");z=function(e){function l(p){return e.call(this,
p)||this}k._inheritsLoose(l,e);var q=l.prototype;q._fetchDataTile=async function(p){const n=this._subscriptions.get(p.key.id);let d=!1,b=0,a=0;const c=(u,w)=>{a--;x.throwIfAborted(n);const v=p.id,D=u.reader;u=u.query;D.exceededTransferLimit?(w={id:v,addOrUpdate:D,end:d&&0===a,type:"append"},n.add({message:w,query:u}),this._onMessage(w)):(d=!0,w={id:v,addOrUpdate:D,end:0===a,type:"append"},n.add({message:w,query:u}),this._onMessage(w))};let g=0,r=0;for(;!d&&20>r++;){let u;for(let w=0;w<g+1;w++){const v=
b++;a++;u=this._fetchDataTilePage(p,v,n).then(D=>D&&c(D,v)).catch(D=>{d=!0;x.isAbortError(D)||(h.error(new y("mapview-query-error","Encountered error when fetching tile",{tile:p,error:D})),this._onMessage({id:p.id,addOrUpdate:null,end:d,type:"append"}))})}await u;x.throwIfAborted(n);g=Math.min(g+2,6)}};q._fetchDataTilePage=async function(p,n,d){const b=this._queryInfo;var a={start:this.pageSize*n,num:this.pageSize,returnExceededLimitFeatures:!0,quantizationParameters:p.getQuantizationParameters()};
m.isSome(this.maxRecordCountFactor)&&(a.maxRecordCountFactor=this.maxRecordCountFactor);a=this._createQuery(p,a);try{const c=await this._queue.push({tile:p,query:a,signal:d.signal,depth:n});x.throwIfAborted(d);return c?b!==this._queryInfo?this._fetchDataTilePage(p,n,d):{reader:c,query:a}:null}catch(c){return x.throwIfNotAbortError(c),null}};return l}(f.BaseFeatureSource);t.PagedFeatureSource=z;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/views/2d/layers/features/sources/SnapshotFeatureSource":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/has ../../../../../core/maybe ../../../../../core/Logger ../../../../../core/RandomLCG ../../../../../core/promiseUtils ../support/FeatureSetReaderPBFIndirect ../support/UpdateToken ./BaseFeatureSource".split(" "),
function(t,k,m,z,y,x,f,h,e,l){function q(d,b,a){var c=d.getXHydrate();d=d.getYHydrate();c=b.getColumnForX(c);c=Math.floor(b.normalizeCol(c));b=Math.floor(b.getRowForY(d));return`${a}/${b}/${c}`}function p(d,b){if(z.isNone(d))return null;b=b.transform;const a=d.getQuantizationTransform();if(z.isNone(a)){const [C,A]=b.scale,[E,G]=b.translate;return d.transform(-E/C,G/A,1/C,1/-A)}const [c,g]=a.scale,[r,u]=a.translate,[w,v]=b.scale,[D,B]=b.translate;return d.transform((r-D)/w,(-u+B)/v,c/w,g/v)}const n=
y.getLogger("esri.views.2d.layers.features.sources.SnapshotFeatureSource");m=function(d){function b(c){var g=d.call(this,c)||this;g.mode="snapshot";g._loading=!0;g._controller=new AbortController;g._downloadPromise=null;g._didSendEnd=!1;g._queries=[];g._invalidated=!1;g._hasAggregates=!1;g._random=new x(1E3);g._featureCount=c.featureCount;g._store=c.store;g._markedIdsBufId=g._store.storage.createBitset();return g}k._inheritsLoose(b,d);var a=b.prototype;a.destroy=function(){d.prototype.destroy.call(this);
this._controller.abort()};a.update=function(c,g){d.prototype.update.call(this,c,g);this._hasAggregates=c.targets.aggregate};a.resend=async function(c=!1){await this._downloadPromise;this._invalidated||c?(this._invalidated=!1,this._subscriptions.forEach(g=>g.clear()),this._downloadPromise=this._download(this._featureCount),await this._downloadPromise):(c=this._queries.map(({query:g,reader:r})=>this._sendPatchQuery(g,r)),await Promise.all(c),this._subscriptions.forEach(g=>{g.requests.done.forEach(r=>
this._onMessage(r.message))}))};a.refresh=async function(){await this.resend(!0)};a.edit=async function(c){const g=this._signal;var r=c.addedFeatures.filter(v=>!v.error).map(v=>v.objectId),u=c.updatedFeatures.filter(v=>!v.error).map(v=>v.objectId);c=c.deletedFeatures.filter(v=>!v.error).map(v=>v.objectId);r=[...r,...u];u=[...c,...r];for(var w of u)this._store.remove(w);w=this.createQuery();w.objectIds=r;w=await this._queue.push({query:w,depth:0,signal:g});f.throwIfAborted({signal:g});this._store.insert(w);
this._send(w);this._invalidateQueries()};a._invalidateQueries=function(){this._invalidated=!0};a._sendPatchQuery=async function(c,g){const r=z.isSome(c.outFields)?c.outFields:[],u=this._queryInfo.outFields,w=u.filter(B=>-1===r.indexOf(B));if(w.length){var v=c.clone(),D=this._signal;v.returnGeometry=!1;v.returnCentroid=!1;v.outFields=w;c.outFields=u;c=await this._queue.push({query:v,depth:0,signal:D});f.throwIfAborted({signal:D});g.joinAttributes(c)}};a._fetchDataTile=async function(c){this._downloadPromise||
(this._downloadPromise=this._download(this._featureCount));var g=this._store.search(c);const r=this._subscriptions.get(c.key.id),u=g.length-1;for(let v=0;v<u;v++){var w=p(g[v],c);w={type:"append",id:c.id,addOrUpdate:w,end:!1,status:e.UpdateToken.empty()};r.add({query:null,message:w});this._hasAggregates||await f.after(1);this._onMessage(w)}g=p(0<=u?g[u]:null,c);c={type:"append",id:c.id,addOrUpdate:g,end:this._didSendEnd,status:e.UpdateToken.empty()};r.add({query:null,message:c});this._onMessage(c)};
a._download=async function(c){try{await this.whenInitialized();const g=this._store.storage.getBitset(this._markedIdsBufId),r=new Set;g.clear();const u=Array.from({length:Math.ceil(c/this.pageSize)},(w,v)=>v).sort((w,v)=>this._random.getInt()-this._random.getInt()).map(w=>this._downloadPage(w,g,r));await Promise.all(u);this._store.sweepFeatures(g,this._store.storage);this._store.sweepFeatureSets(r)}catch(g){n.error("mapview-snapshot-source","Encountered and error when downloading feature snapshot",
g)}this._sendEnd();this._loading=!1};a._downloadPage=async function(c,g,r){var u=this.pageSize;u={start:c*u,num:u,cacheHint:!0};z.isSome(this.maxRecordCountFactor)&&(u.maxRecordCountFactor=this.maxRecordCountFactor);u=this.createQuery(u);const w=this._signal;c=await this._queue.push({query:u,depth:c,signal:w});f.throwIfAborted({signal:w});this._queries.push({query:u,reader:c});this._store.insert(c);r.add(c.instance);for(r=c.getCursor();r.next();)g.set(r.getDisplayId());this._send(c)};a._send=function(c){if(this._subscriptions.size){var g=
null,r=new Map,u=new Set,w=new Map;this._subscriptions.forEach(D=>{var B,C=D.tile;r.set(C.key.id,null);g=C.tileInfoView;u.add(C.level);const {row:A,col:E}=C.key;C=`${C.level}/${A}/${E}`;const G=null!=(B=w.get(C))?B:[];G.push(D);w.set(C,G)});for(const D of u){const B=g.getLODInfoAt(D),C=c.getCursor();for(;C.next();){var v=q(C,B,D);const A=C.getIndex();if(w.has(v))for(const E of w.get(v)){v=E.tile.id;let G=r.get(v);z.isNone(G)&&(G=[],r.set(v,G));G.push(A)}}}r.forEach((D,B)=>{if(z.isSome(D)){const C=
this._subscriptions.get(B);D=p(h.FeatureSetReaderIndirect.from(c,D),C.tile);B={type:"append",id:B,addOrUpdate:D,end:!1,status:e.UpdateToken.empty()};C.add({query:null,message:B});this._onMessage(B)}})}};a._sendEnd=function(){this._subscriptions.forEach(c=>{const g={type:"append",id:c.tile.id,addOrUpdate:null,end:!0,status:e.UpdateToken.empty()};c.add({query:null,message:g});this._onMessage(g)});this._didSendEnd=!0};k._createClass(b,[{key:"loading",get:function(){return this._loading}},{key:"_signal",
get:function(){return this._controller.signal}}]);return b}(l.BaseFeatureSource);t.SnapshotFeatureSource=m;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/views/2d/layers/features/support/ClusterStore":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/has ../../../../../core/maybe ../../../../../geometry/support/spatialReferenceUtils ../../../../../geometry/SpatialReference ../../../../../geometry/support/Ellipsoid ../../../../../geometry ../../../../../core/Evented ../../../../../core/accessorSupport/diffUtils ../../../../../layers/graphics/OptimizedFeature ../../../../../layers/graphics/OptimizedGeometry ../../../../../layers/graphics/featureConversionUtils ../../../../../geohash/geohashUtils ./FeatureSetReaderJSON ../../../../../geohash/GeohashTree ../../../engine/webgl/definitions ../../../../../layers/graphics/data/projectionSupport ../Store2D".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d,b,a,c,g,r){let u=function(w){function v(B,C,A,E,G){C=new p([],[C,A]);B=w.call(this,C,E,null,B)||this;B.geohashBoundsInfo=G;return B}k._inheritsLoose(v,w);v.create=function(B,C,A,E,G,H,K,J){C=new v(C,A,E,H,K);C.displayId=B.createDisplayId(!0);C.referenceId=J;C.tileLevel=G;return C};var D=v.prototype;D.update=function(B,C,A,E,G,H){this.geometry.coords[0]=B;this.geometry.coords[1]=C;this.tileLevel=A;this.attributes=E;this.geohashBoundsInfo=G;this.referenceId=null;
this.referenceId=H;return this};D.toJSON=function(){return{objectId:this.objectId,referenceId:1===this.attributes.cluster_count?this.referenceId:null,attributes:{...this.attributes,clusterId:this.objectId},geometry:{x:this.geometry.coords[0],y:this.geometry.coords[1]}}};k._createClass(v,[{key:"count",get:function(){return this.attributes.cluster_count}}]);return v}(q);h=function(w){function v(B,C,A){var E=w.call(this,B,A)||this;E.events=new e;E._geohashLevel=0;E._aggregateValueRanges={};E._aggregateValueRangesChanged=
!1;E._geohashBuf=[];E._clusters=new Map;E._tiles=new Map;E.geometryInfo=B.geometryInfo;E._spatialReference=C;E._projectionSupportCheck=g.checkProjectionSupport(C,x.WGS84);E._bitsets.geohash=A.getBitset(A.createBitset());E._bitsets.inserted=A.getBitset(A.createBitset());return E}k._inheritsLoose(v,w);var D=v.prototype;D.updateSchema=async function(B,C){const A=this._schema;try{await w.prototype.updateSchema.call(this,B,C),await this._projectionSupportCheck}catch(G){}const E=l.diff(A,C);if(!C||z.isNone(E)&&
!B.source&&!B.storage.filters)A&&(B.mesh=!0);else{if(l.hasDiff(E,"params.fields")||!this._tree||B.source)this._tree=new a.GeohashTree(this._statisticFields),this._rebuildTree(),m("esri-2d-update-debug")&&console.debug("Aggregate mesh needs update due to tree changing");m("esri-2d-update-debug")&&console.debug("Applying Update - ClusterStore:",E);B.targets[C.name]=!0;B.mesh=!1;this._aggregateValueRanges={}}};D.sweepFeatures=function(B,C){this._bitsets.inserted.forEachSet(A=>{B.has(A)||(A=C.lookupByDisplayIdUnsafe(A),
this._remove(A))})};D.sweepClusters=function(B,C,A){this._clusters.forEach((E,G)=>{E&&E.tileLevel!==A&&(B.releaseDisplayId(E.displayId),C.unsetAttributeData(E.displayId),this._clusters.delete(G))})};D.onTileData=function(B,C,A,E,G=!0){if(!this._schema||z.isNone(C.addOrUpdate))return C;var H=this._tree,K=this._getTransforms(B,this._spatialReference);{const J=C.addOrUpdate.getCursor();for(;J.next();)this._update(J,E,H)}if(C.status.mesh||!G)return C;E=[];this._getClustersForTile(E,B,this._schema.params.clusterRadius,
A,H,K);C.addOrUpdate=b.FeatureSetReaderJSON.fromOptimizedFeatures(E,"esriGeometryPoint");C.addOrUpdate.attachStorage(A);C.end=!0;for(H=C.addOrUpdate.getCursor();H.next();)K=H.getDisplayId(),this._bitsets.computed.unset(K),this.setComputedAttributes(A,H,K,B.scale);this._aggregateValueRangesChanged&&C.end&&(this.events.emit("valueRangesChanged",{valueRanges:this._aggregateValueRanges}),this._aggregateValueRangesChanged=!1);return C};D.onTileUpdate=function({added:B,removed:C}){B.length&&this._setGeohashLevel(B[0].level);
if(this._schema){var A=this._schema.params.clusterRadius;C.forEach(E=>{this._tiles.delete(E.key.id);this._markTileClustersForDeletion(E,A)})}};D.getAggregate=function(B){let C=null;this._clusters.forEach(A=>{A&&A.displayId===B&&(C=A.toJSON())});return C};D.getDisplayId=function(B){return(B=this._clusters.get(B))?B.displayId:null};D.getFeatureDisplayIdsForAggregate=function(B){B=this._clusters.get(B);if(!B)return[];B=B.geohashBoundsInfo;return this._tree.getRegionDisplayIds(B.xLL,B.yLL,B.xTR,B.yTR,
B.level)};D.getDisplayIdForReferenceId=function(B){let C;this._clusters.forEach(A=>{A&&A.referenceId===B&&(C=A.displayId)});return C};D.getAggregateValueRanges=function(){return this._aggregateValueRanges};D.forEach=function(B){this._clusters.forEach((C,A)=>{C&&B(C,A)})};D.size=function(){let B=0;this.forEach(C=>B++);return B};D._rebuildTree=function(){this._bitsets.computed.clear();this._bitsets.inserted.clear();this._tree&&this._tree.clear()};D._remove=function(B){const C=B.getDisplayId(),A=B.getXHydrate(),
E=B.getYHydrate(),G=this._geohashBuf[2*C],H=this._geohashBuf[2*C+1];this._bitsets.inserted.has(C)&&(this._bitsets.inserted.unset(C),this._tree.removeCursor(B,A,E,G,H,this._geohashLevel))};D._update=function(B,C,A){const E=B.getDisplayId(),G=this._bitsets.inserted;C=C.isVisible(E);var H=G.has(E);C!==H&&(C?(C=B.getXHydrate(),H=B.getYHydrate(),this._setGeohash(E,C,H)&&(A.insertCursor(B,E,C,H,this._geohashBuf[2*E],this._geohashBuf[2*E+1],this._geohashLevel),G.set(E))):this._remove(B))};D._setGeohash=
function(B,C,A){if(this._bitsets.geohash.has(B))return!0;const E=this._geohashBuf;if(this._spatialReference.isWebMercator)C=C/f.earth.radius*57.29577951308232,d.setGeohashBuf(E,B,57.29577951308232*(Math.PI/2-2*Math.atan(Math.exp(-1*A/f.earth.radius))),C-360*Math.floor((C+180)/360),12);else{A=g.project({x:C,y:A},this._spatialReference,x.WGS84);if(!A)return!1;d.setGeohashBuf(E,B,A.y,A.x,12)}this._bitsets.geohash.set(B);return!0};D._getClustersForTile=function(B,C,A,E,G,H,K=!0){var J=this._schema.params.clusterPixelBuffer,
F=2*A;A=this._getGeohashLevel(C.key.level);const N=Math.ceil(2**C.key.level*c.TILE_SIZE/F);var L=Math.ceil(J/F)+0,M=Math.ceil(c.TILE_SIZE/F);const {row:S,col:Q}=C.key;var U=Math.floor(Q*c.TILE_SIZE/F)-L;F=Math.floor(S*c.TILE_SIZE/F)-L;J=U+M+2*L;L=F+M+2*L;for(M=C.tileInfoView.getLODInfoAt(C.key.level);U<=J;U++)for(let Z=F;Z<=L;Z++){var W=U;M.wrap&&(W=0>U?U+N:U%N);const T=M.wrap&&0>U,ba=M.wrap&&U%N!==U;W=this._lookupCluster(E,M,C.key.level,W,Z,A,G);if(z.isSome(W)){var fa=z.andThen(H,ha=>T?ha.left:ba?
ha.right:ha.tile);if((!K||!z.isNone(fa))&&W.count&&z.isSome(fa)&&K){const ha=W.geometry.clone();let sa=W.attributes;ha.coords[0]=n.quantizeX(fa,ha.coords[0]);ha.coords[1]=n.quantizeY(fa,ha.coords[1]);1===W.count&&z.isSome(W.referenceId)&&(sa={...W.attributes,referenceId:W.referenceId});fa=new q(ha,sa);fa.displayId=W.displayId;B.push(fa)}}}};D._getGeohashLevel=function(B){return Math.min(Math.ceil(B/2+2),12)};D._setGeohashLevel=function(B){B=this._getGeohashLevel(B);B=1*(Math.floor(B/1)+1)-1;this._geohashLevel!==
B&&(this._geohashLevel=B,this._rebuildTree(),this._bitsets.geohash.clear())};D._getTransforms=function(B,C){const A={originPosition:"upperLeft",scale:[B.resolution,B.resolution],translate:[B.bounds[0],B.bounds[3]]};C=y.getInfo(C);if(!C)return{tile:A,left:null,right:null};const [E,G]=C.valid;return{tile:A,left:{...A,translate:[G,B.bounds[3]]},right:{...A,translate:[E-G+B.bounds[0],B.bounds[3]]}}};D._getClusterId=function(B,C,A){return(B&15)<<28|(C&16383)<<14|A&16383};D._markForDeletion=function(B,
C,A){B=this._getClusterId(B,C,A);this._clusters.delete(B)};D._getClusterBounds=function(B,C,A){var E=this._schema.params.clusterRadius,G=2*E;C=A%2?C*G:C*G-E;const H=A*G;E=C+G;A=2**B.level*c.TILE_SIZE;B.wrap&&0>C&&(C=0);B.wrap&&E>A&&(E=A);A=H/c.TILE_SIZE;E/=c.TILE_SIZE;G=(H-G)/c.TILE_SIZE;C=B.getXForColumn(C/c.TILE_SIZE);A=B.getYForRow(A);E=B.getXForColumn(E);B=B.getYForRow(G);return[C,A,E,B]};D._lookupCluster=function(B,C,A,E,G,H,K){const J=this._getClusterId(A,E,G),F=this._clusters.get(J),[N,L,M,
S]=this._getClusterBounds(C,E,G);var Q={x:N,y:L};G={x:M,y:S};var U=E=C=0,W=0;if(this._spatialReference.isWebMercator)C=Q.x/f.earth.radius*57.29577951308232,C-=360*Math.floor((C+180)/360),E=57.29577951308232*(Math.PI/2-2*Math.atan(Math.exp(-1*Q.y/f.earth.radius))),U=G.x/f.earth.radius*57.29577951308232,U-=360*Math.floor((U+180)/360),W=57.29577951308232*(Math.PI/2-2*Math.atan(Math.exp(-1*G.y/f.earth.radius)));else{E=g.project(Q,this._spatialReference,x.WGS84);G=g.project(G,this._spatialReference,x.WGS84);
if(!E||!G)return null;C=E.x;E=E.y;U=G.x;W=G.y}Q={geohashX:0,geohashY:0};G={geohashX:0,geohashY:0};d.setGeohashXY(Q,E,C,H);d.setGeohashXY(G,W,U,H);E=Q.geohashX;U=Q.geohashY;W=G.geohashX;G=G.geohashY;C={xLL:E,yLL:U,xTR:W,yTR:G,level:H};E=K.getRegionStatistics(E,U,W,G,H);const {count:fa,xTotal:Z,yTotal:T,referenceId:ba}=E;H=fa?Z/fa:0;K=fa?T/fa:0;if(0===fa)return this._clusters.set(J,null),null;E={cluster_count:fa,...E.attributes};B=z.isSome(F)?F.update(H,K,A,E,C,ba):u.create(B,J,H,K,A,E,C,ba);0===fa&&
(B.geometry.coords[0]=(N+M)/2,B.geometry.coords[1]=(L+S)/2);this._clusters.set(J,B);this._updateAggregateValueRangeForCluster(B,B.tileLevel);return B};D._updateAggregateValueRangeForCluster=function(B,C){const A=this._aggregateValueRanges[C]||{minValue:Infinity,maxValue:0},E=A.minValue,G=A.maxValue;A.minValue=Math.min(E,B.count);A.maxValue=Math.max(G,B.count);this._aggregateValueRanges[C]=A;if(E!==A.minValue||G!==A.maxValue)this._aggregateValueRangesChanged=!0};D._markTileClustersForDeletion=function(B,
C){var A=2*C;C=Math.ceil(c.TILE_SIZE/A);const {row:E,col:G}=B.key,H=Math.floor(G*c.TILE_SIZE/A);A=Math.floor(E*c.TILE_SIZE/A);for(let K=H;K<H+C;K++)for(let J=A;J<A+C;J++)this._markForDeletion(B.key.level,K,J)};return v}(r.Store2D);t.ClusterInfo=u;t.ClusterStore=h;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/geohash/geohashUtils":function(){define(["exports"],function(t){function k(b){return 57>=b?b-48:104>=b?b-88:107>=b?b-89:110>=b?b-90:b-91}function m(b,a,c){b[0]=a;b[1]=c;return b}function z(b,
a){const c=(b[0]+b[1])/2,g=!a;b[0]=g*b[0]+a*c;b[1]=g*c+a*b[1]}function y(b,a){a=a>(b[0]+b[1])/2;z(b,a);return a}function x(b,a){const c=m(n,-90,90),g=m(d,-180,180);for(let u=0;u<a.length;u++){var r=a.charCodeAt(u);r=k(r);0===u%2?(z(g,!!(16&r)),z(g,!!(4&r)),z(g,!!(1&r)),z(c,!!(8&r)),z(c,!!(2&r))):(z(c,!!(16&r)),z(c,!!(4&r)),z(c,!!(1&r)),z(g,!!(8&r)),z(g,!!(2&r)))}b[0]=(c[0]+c[1])/2;b[1]=(g[0]+g[1])/2;return b}function f(b,a,c){let g="";const r=m(n,-90,90),u=m(d,-180,180);for(let w=0;w<c;w++){let v=
0;w%2?(v|=y(r,b)<<4,v|=y(u,a)<<3,v|=y(r,b)<<2,v|=y(u,a)<<1,v|=y(r,b)<<0):(v|=y(u,a)<<4,v|=y(r,b)<<3,v|=y(u,a)<<2,v|=y(r,b)<<1,v|=y(u,a)<<0);g+="0123456789bcdefghjkmnpqrstuvwxyz"[v]}return g}function h(b){return 180/2**Math.floor(5*b/2)}function e(b){return 360/2**Math.ceil(5*b/2)}function l(b,a){return a?1&b|(4&b)>>1|(16&b)>>2:(2&b)>>1|(8&b)>>2}function q(b,a){return a?(2&b)>>1|(8&b)>>2:1&b|(4&b)>>1|(16&b)>>2}function p(b,a,c){var g=!((b.length-1)%2);const r=b.substring(0,b.length-1);var u=k(b.charCodeAt(b.length-
1)),w=0,v=0;let D=0;var B=0;g?(w=8,v=4,D=1&u|(4&u)>>1|(16&u)>>2,B=(2&u)>>1|(8&u)>>2):(w=4,v=8,B=1&u|(4&u)>>1|(16&u)>>2,D=(2&u)>>1|(8&u)>>2);a=D+a;u=B+c;c=Math.floor(a/w);B=Math.floor(u/v);w=a-c*w;v=u-B*v;g="0123456789bcdefghjkmnpqrstuvwxyz"[g?w&1|(v&1)<<1|(w&2)<<1|(v&2)<<2|(w&4)<<2:v&1|(w&1)<<1|(v&2)<<1|(w&2)<<2|(v&4)<<2];return 1<b.length&&(c||B)?p(r,c,B)+g:r+g}const n=new Float64Array(2),d=new Float64Array(2);t.convertGeohash32ToXY=function(b,a){let c=b=0,g=30,r=30;for(let v=0;v<a.length;v++){var u=
a.charCodeAt(v),w=k(u);u=0===v%2;const D=l(w,u);w=q(w,u);g-=u?3:2;r-=u?2:3;b|=D<<g;c|=w<<r}return{geohashX:b,geohashY:c}};t.decodeBase32Char=k;t.decodeGeohash=x;t.decodeGeohashXY=function(b,a){let c=-90,g=90,r=-180,u=180;for(let A=0;A<a;A++){var w=Math.ceil((A+1)/2),v=Math.floor((A+1)/2),D=1-A%2,B=30-(3*w+2*v),C=30-(2*w+3*v);v=3*D+2*(1-D);w=2*D+3*(1-D);B=(7*D+3*(1-D)<<B&b.geohashX)>>B;D=(3*D+7*(1-D)<<C&b.geohashY)>>C;for(--v;0<=v;v--){C=(r+u)/2;const E=B&1<<v?1:0;r=(1-E)*r+E*C;u=(1-E)*C+E*u}for(--w;0<=
w;w--)B=(c+g)/2,v=D&1<<w?1:0,c=(1-v)*c+v*B,g=(1-v)*B+v*g}return[r,c,u,g]};t.encodeBase32Char=function(b){return"0123456789bcdefghjkmnpqrstuvwxyz"[b]};t.encodeGeohash=f;t.forEachIntersectingGeohash=function(b,a,c,g,r,u){var w=Math.abs(c-b),v=Math.abs(g-a);const D=h(r),B=e(r);v=Math.ceil(v/B);w=Math.ceil(w/D);r=f(b,a,r);for(let C=0;C<v;C++)for(let A=0;A<w;A++){const E=p(r,C,A),[G,H]=x([0,0],E);u(E,Math.abs((Math.min(c,G+D/2)-Math.max(b,G-D/2))*(Math.min(g,H+B/2)-Math.max(a,H-B/2)))/(D*B))}};t.getIntersectingGeohashes=
function(b,a,c,g,r){c=Math.abs(c-b);g=Math.abs(g-a);var u=h(r);const w=e(r);g=Math.ceil(g/w);c=Math.ceil(c/u);b=f(b,a,r);a=[];for(r=0;r<g;r++)for(u=0;u<c;u++)a.push(p(b,r,u));return a};t.getRelativeGeohash=p;t.latDistPerGeohash=h;t.lonDistPerGeohash=e;t.setGeohashBuf=function(b,a,c,g,r){r%2&&(r+=1);let u=0,w=0,v=-90,D=90,B=-180,C=180;for(let H=0;H<r/2;H++){for(var A=0;5>A;A++){var E=(B+C)/2,G=g>E?1:0;u|=G<<29-(A+5*H);B=(1-G)*B+G*E;C=(1-G)*E+G*C}for(A=0;5>A;A++)E=(v+D)/2,G=c>E?1:0,w|=G<<29-(A+5*H),
v=(1-G)*v+G*E,D=(1-G)*E+G*D}b[2*a]=u;b[2*a+1]=w};t.setGeohashXY=function(b,a,c,g){g%2&&(g+=1);let r=0,u=0,w=-90,v=90,D=-180,B=180;for(let G=0;G<g/2;G++){for(var C=0;5>C;C++){var A=(D+B)/2,E=c>A?1:0;r|=E<<29-(C+5*G);D=(1-E)*D+E*A;B=(1-E)*A+E*B}for(C=0;5>C;C++)A=(w+v)/2,E=a>A?1:0,u|=E<<29-(C+5*G),w=(1-E)*w+E*A,v=(1-E)*A+E*v}b.geohashX=r;b.geohashY=u};t.unpackXBits=l;t.unpackYBits=q;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/geohash/GeohashTree":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../core/maybe ../core/CircularArray ./geohashUtils ../views/2d/layers/features/support/FeatureSetReaderJSON".split(" "),
function(t,k,m,z,y,x){let f=function(){function e(q=[],p=8096){this._nodes=0;this._root=new h(0,0,0);this._statisticFields=q;this._pool=p?new z(8096):null}var l=e.prototype;l._acquire=function(q,p,n){this._nodes++;let d=null;m.isSome(this._pool)&&(d=this._pool.dequeue());return m.isSome(d)?d.realloc(q,p,n):new h(q,p,n)};l._release=function(q){this._nodes--;m.isSome(this._pool)&&this._pool.enqueue(q)};l.dropLevels=function(q){this._forEachNode(p=>{if(p.depth>=q)for(let n=0;n<p.children.length;n++){const d=
p.children[n];p.children[n]=null;d&&this._release(d)}})};l.clear=function(){this.dropLevels(0)};l.insert=function(q,p,n=0){const d=x.FeatureSetReaderJSON.fromOptimizedFeatures([q],"esriGeometryPoint").getCursor();d.next();const b=d.readGeometry();if(b){var [a,c]=b.coords;this.insertCursor(d,q.displayId,a,c,q.geohashX,q.geohashY,p,n)}};l.insertCursor=function(q,p,n,d,b,a,c,g=0){let r=this._root,u=0,w=0,v=0;for(;null!==r;){r.depth>=g&&(r.count+=1,r.xTotal+=n,r.yTotal+=d,r.xGeohashTotal+=b,r.yGeohashTotal+=
a,r.displayId=p,this._updateStatisticsCursor(q,r,1));if(u>=c){r.add(p);break}var D=Math.ceil((u+1)/2),B=Math.floor((u+1)/2);const A=1-u%2;var C=30-(3*D+2*B);D=30-(2*D+3*B);C=(b&7*A+3*(1-A)<<C)>>C;D=(a&3*A+7*(1-A)<<D)>>D;B=C+D*(8*A+4*(1-A));const E=2*A+3*(1-A);w=w<<3*A+2*(1-A)|C;v=v<<E|D;null==r.children[B]&&(r.children[B]=this._acquire(w,v,u+1));u+=1;r=r.children[B]}};l.remove=function(q,p){const n=x.FeatureSetReaderJSON.fromOptimizedFeatures([q],"esriGeometryPoint").getCursor();n.next();const d=
n.readGeometry();if(d){var [b,a]=d.coords;this.removeCursor(n,b,a,q.geohashX,q.geohashY,p)}};l.removeCursor=function(q,p,n,d,b,a){let c=this._root,g=0;for(;null!==c;){--c.count;c.xTotal-=p;c.yTotal-=n;c.xGeohashTotal-=d;c.yGeohashTotal-=b;this._updateStatisticsCursor(q,c,-1);if(g>=a){c.remove(q.getDisplayId());break}var r=Math.ceil((g+1)/2);const v=Math.floor((g+1)/2);var u=1-g%2,w=30-(3*r+2*v);r=30-(2*r+3*v);u=((d&7*u+3*(1-u)<<w)>>w)+((b&3*u+7*(1-u)<<r)>>r)*(8*u+4*(1-u));w=c.children[u];1===w.count&&
(this._release(w),c.children[u]=null);g+=1;c=w}};l.find=function(q,p,n){return this._root.find(q,p,n,0,0,0)};l.findSingleOccupancyNode=function(q,p,n,d,b){let a=this._root;for(;null!==a;){var c=a.depth,g=a.xNode,r=a.yNode;const C=1-c%2;var u=a.xGeohashTotal/a.count,w=a.yGeohashTotal/a.count;if(1===a.count&&q<u&&u<=n&&p<w&&w<=d)return a;if(c>=b)a=a.next;else{w=Math.ceil((c+1)/2);c=Math.floor((c+1)/2);u=30-(3*w+2*c);var v=30-(2*w+3*c),D=~((1<<u)-1),B=~((1<<v)-1);g<<=3*C+2*(1-C);r<<=2*C+3*(1-C);c=Math.max(g,
(q&D)>>u);w=Math.max(r,(p&B)>>v);u=Math.min(g+8*C+4*(1-C),(n&D)>>u);v=Math.min(r+4*C+8*(1-C),(d&B)>>v);for(D=B=null;w<=v;w++)for(let A=c;A<=u;A++){const E=a.children[A-g+(w-r)*(8*C+4*(1-C))];E&&(B||(B=E,B.next=a.next),D&&(D.next=E),D=E,E.next=a.next)}a=B||a.next}}return null};l.getRegionDisplayIds=function(q,p,n,d,b){let a=this._root;const c=[];for(;null!==a;){var g=a.depth,r=a.xNode,u=a.yNode;if(g>=b)g=a.xGeohashTotal/a.count,r=a.yGeohashTotal/a.count,q<=g&&g<=n&&p<=r&&r<=d&&a.displayIds.forEach(E=>
c.push(E)),a=a.next;else{var w=Math.ceil((g+1)/2),v=Math.floor((g+1)/2);g=1-g%2;var D=30-(3*w+2*v),B=30-(2*w+3*v),C=~((1<<D)-1),A=~((1<<B)-1);r<<=3*g+2*(1-g);u<<=2*g+3*(1-g);w=Math.max(r,(q&C)>>D);v=Math.max(u,(p&A)>>B);D=Math.min(r+8*g+4*(1-g),(n&C)>>D);B=Math.min(u+4*g+8*(1-g),(d&A)>>B);for(C=A=null;v<=B;v++)for(let E=w;E<=D;E++){const G=a.children[E-r+(v-u)*(8*g+4*(1-g))];G&&(A||(A=G,A.next=a.next),C&&(C.next=G),C=G,G.next=a.next)}a=A||a.next}}return c};l.getRegionStatistics=function(q,p,n,d,b){let a=
this._root,c=0,g=0,r=0;const u={};let w=0;for(;null!==a;){var v=a.depth,D=a.xNode,B=a.yNode;if(v>=b)v=a.xGeohashTotal/a.count,D=a.yGeohashTotal/a.count,q<v&&v<=n&&p<D&&D<=d&&(c+=a.count,g+=a.xTotal,r+=a.yTotal,1===a.count&&(w=a.displayId),this._aggregateStatistics(u,a.statistics)),a=a.next;else{var C=Math.ceil((v+1)/2),A=Math.floor((v+1)/2);v=1-v%2;var E=30-(3*C+2*A),G=30-(2*C+3*A),H=~((1<<E)-1),K=~((1<<G)-1);D<<=3*v+2*(1-v);B<<=2*v+3*(1-v);C=Math.max(D,(q&H)>>E);A=Math.max(B,(p&K)>>G);E=Math.min(D+
8*v+4*(1-v),(n&H)>>E);G=Math.min(B+4*v+8*(1-v),(d&K)>>G);H=K=null;for(let J=A;J<=G;J++)for(let F=C;F<=E;F++){const N=a.children[F-D+(J-B)*(8*v+4*(1-v))];if(N)if(J!==A&&J!==G&&F!==C&&F!==E){const L=N.xGeohashTotal/N.count,M=N.yGeohashTotal/N.count;q<L&&L<=n&&p<M&&M<=d&&(c+=N.count,g+=N.xTotal,r+=N.yTotal,1===N.count&&(w=N.displayId),this._aggregateStatistics(u,N.statistics))}else K||(K=N,K.next=a.next),H&&(H.next=N),H=N,N.next=a.next}a=K||a.next}}q=this._normalizeStatistics(u,c);return{count:c,attributes:q,
xTotal:g,yTotal:r,referenceId:w}};l._forEachNode=function(q){let p=this._root;for(;null!==p;){const n=this._linkChildren(p)||p.next;q(p);p=n}};l._linkChildren=function(q){let p=null,n=null;for(let d=0;d<=q.children.length;d++){const b=q.children[d];b&&(p||(p=b,p.next=q.next),n&&(n.next=b),n=b,b.next=q.next)}return p};l._updateStatisticsCursor=function(q,p,n){for(const c of this._statisticFields){const g=c.name,r=c.inField?q.readAttribute(c.inField):q.getComputedNumericAtIndex(c.inFieldIndex);switch(c.statisticType){case "norm":p.statistics[g]||
(p.statistics[g]={});var d=q.readAttribute(c.inNormalizationField),b=p.statistics[g].onStatisticField||0,a=p.statistics[g].onStatisticNormalizationField||0;null==r||isNaN(r)||null==d||0===d||isNaN(d)||(p.statistics[g].onStatisticField=b+n*r,p.statistics[g].onStatisticNormalizationField=a+n*d);break;case "sum":case "avg":p.statistics[g]||(p.statistics[g]={value:0,nanCount:0});d=p.statistics[g].value;b=p.statistics[g].nanCount;null==r||isNaN(r)?p.statistics[g].nanCount=b+n:p.statistics[g].value=d+n*
r;break;case "avg_angle":{p.statistics[g]||(p.statistics[g]={x:0,y:0,nanCount:0});d=p.statistics[g].x;b=p.statistics[g].y;a=p.statistics[g].nanCount;const u=Math.PI/180;null==r||isNaN(r)?p.statistics[g].nanCount=a+n:(p.statistics[g].x=d+n*Math.cos(r*u),p.statistics[g].y=b+n*Math.sin(r*u));break}case "mode":p.statistics[g]||(p.statistics[g]={}),p.statistics[g][r]=(p.statistics[g][r]||0)+n}}};l._aggregateStatistics=function(q,p){for(const n of this._statisticFields){const d=n.name;switch(n.statisticType){case "sum":case "avg":case "avg_angle":case "mode":case "norm":q[d]||
(q[d]={});for(const b in p[d])q[d][b]=(q[d][b]||0)+p[d][b]}}};l._normalizeStatistics=function(q,p){const n={};for(const b of this._statisticFields){const a=b.name;switch(b.statisticType){case "norm":var d=q[a];if(p&&null==d.onStatisticNormalizationField)break;if(p&&d.onStatisticNormalizationField){n[a]=d.onStatisticField/d.onStatisticNormalizationField;break}n[a]=0;break;case "sum":{if(!p)break;const {value:c,nanCount:g}=q[a];if(!(p-g))break;n[a]=c;break}case "avg":{if(!p)break;const {value:c,nanCount:g}=
q[a];if(!(p-g))break;n[a]=c/(p-g);break}case "avg_angle":{if(!p)break;const {x:c,y:g,nanCount:r}=q[a];if(!(p-r))break;n[a]=180/Math.PI*Math.atan2(g/(p-r),c/(p-r));break}case "mode":{d=q[a];let c=0,g=null;for(const r in d){const u=d[r];u>c&&(c=u,g=r)}n[a]="null"===g?null:g}}}return n};k._createClass(e,[{key:"count",get:function(){return this._root.count}},{key:"size",get:function(){return this._nodes}},{key:"poolSize",get:function(){return m.mapOr(this._pool,0,q=>q.size)}},{key:"depth",get:function(){let q=
0;this._forEachNode(p=>q=Math.max(q,p.depth));return q}}]);return e}(),h=function(){function e(q,p,n){this.yTotal=this.xTotal=this.count=0;this.statistics={};this.displayId=0;this.displayIds=new Set;this.next=null;this.yGeohashTotal=this.xGeohashTotal=this.yNode=this.xNode=this.depth=0;this.children=Array(32);for(let d=0;d<this.children.length;d++)this.children[d]=null;this.xNode=q;this.yNode=p;this.depth=n}var l=e.prototype;l.realloc=function(q,p,n){for(let d=0;d<this.children.length;d++)this.children[d]=
null;this.xNode=q;this.yNode=p;this.depth=n;this.next=null;this.count=this.yTotal=this.xTotal=this.yGeohashTotal=this.xGeohashTotal=0;this.statistics={};this.displayIds.clear();return this};l.add=function(q){this.displayIds.add(q)};l.remove=function(q){this.displayIds.delete(q)};l.getLngLatBounds=function(){var q=this.depth;const p=Math.ceil(q/2);q=Math.floor(q/2);return y.decodeGeohashXY({geohashX:this.xNode<<30-(3*p+2*q),geohashY:this.yNode<<30-(2*p+3*q)},this.depth)};l.find=function(q,p,n,d,b,
a){if(d>=n)return this;var c=1-d%2;const g=3*c+2*(1-c),r=2*c+3*(1-c),u=30-b-g,w=30-a-r;c=this.children[((q&7*c+3*(1-c)<<u)>>u)+((p&3*c+7*(1-c)<<w)>>w)*(8*c+4*(1-c))];return null==c?null:c.find(q,p,n,d+1,b+g,a+r)};return e}();t.GeohashTree=f;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/views/2d/layers/features/processors/SymbolProcessor":function(){define("../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/has ../../../../../core/maybe ../../../../../core/Logger ../../../../../core/accessorSupport/ensureType ../../../../../core/accessorSupport/decorators/property ../../../../../core/jsonMap ../../../../../core/accessorSupport/decorators/subclass ../../../../../core/Error ../../../../../core/urlUtils ../../../../../core/uuid ../../../../../portal/support/resourceExtension ../../../../../core/promiseUtils ../../../../../geometry/SpatialReference ../../../../../core/accessorSupport/diffUtils ../../../engine/webgl/definitions ../../../engine/webgl/util/BidiText ../../../engine/webgl/collisions/CollisionGrid ../../../engine/webgl/Utils ../../../engine/webgl/cpuMapped/DisplayRecordReader ../support/AttributeStore ../../../engine/webgl/mesh/MeshData ../../../engine/webgl/mesh/factories/matcherUtils ../textUtils ../../../engine/webgl/mesh/templates/WGLTemplateStore ../../../engine/webgl/mesh/factories/WGLMeshFactory ./BaseProcessor".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d,b,a,c,g,r,u,w,v,D,B,C,A,E,G){function H(K){K=K.message;const J={message:{data:{},tileKey:K.tileKey},transferList:[]};for(const L in K.data){var F=K.data[L];J.message.data[L]=null;if(z.isSome(F)){var N=F.stride;const M=F.indices.slice(0),S=F.vertices.slice(0),Q=F.records.slice(0);F=z.andThen(F.metrics,U=>U.slice(0));N={stride:N,indices:M,vertices:S,records:Q,metrics:F};J.transferList.push(M,S,Q);J.message.data[L]=N}}return J}y.getLogger("esri.views.2d.layers.features.processors.SymbolProcessor");
y=function(K){function J(){var N=K.apply(this,arguments)||this;N.type="symbol";N._matchers={feature:null,aggregate:null};N._bufferData=new Map;return N}t._inheritsLoose(J,K);var F=J.prototype;F.initialize=function(){this.handles.add([this.tileStore.on("update",this.onTileUpdate.bind(this))])};F.destroy=function(){};F.update=async function(N,L){L=L.schema.processors[0];if("symbol"===L.type){var M=a.diff(this._schema,L);a.hasDiff(M,"mesh")&&(m("esri-2d-update-debug")&&console.debug("Applying Update - Processor:",
M),N.mesh=!0,N.why.mesh.push("Symbology changed"),this._schema=L,this._factory=this._createFactory(L),this._factory.update(L,this.tileStore.tileScheme.tileInfo))}};F.onTileMessage=function(N,L,M,S){d.throwIfAborted(S);return this._onTileData(N,L,M,S)};F.onTileClear=function(N){this._bufferData.delete(N.key.id);return this.remoteClient.invoke("tileRenderer.onTileData",{tileKey:N.id,data:{clear:!0}})};F.onTileError=function(N,L,M){return this.remoteClient.invoke("tileRenderer.onTileError",{tileKey:N.id,
error:L},{signal:M.signal})};F.onTileUpdate=function(N){for(const L of N.removed)this._bufferData.has(L.key.id)&&(this._bufferData.get(L.key.id).forEach(M=>{const S=new Set;u.forEachGeometryType(Q=>{Q=M.message.data[Q];if(z.isSome(Q))for(Q=w.DisplayRecordReader.from(Q.records).getCursor();Q.next();)S.add(Q.id)});return this.remoteClient.invoke("tileRenderer.onTileData",{tileKey:M.message.tileKey,data:{type:"update",addOrUpdate:null}})}),this._bufferData.delete(L.key.id));for(const L of N.added)this._bufferData.forEach(M=>
{for(const S of M)S.message.tileKey===L.id&&this._updateTileMesh("append",L,H(S),[],!1,!1,null)})};F._addBufferData=function(N,L){this._bufferData.has(N)||this._bufferData.set(N,[]);this._bufferData.get(N).push(H(L))};F._createFactory=function(N){const {geometryType:L,objectIdField:M,fields:S}=this.service,Q=b.fromJSON(this.spatialReference),U={geometryType:L,fields:S,spatialReference:Q},W=new A.WGLTemplateStore((T,ba)=>this.remoteClient.invoke("tileRenderer.getMaterialItems",T,ba),!1),{matcher:fa,
aggregateMatcher:Z}=N.mesh;this._store=W;this._matchers.feature=B.createMatcher(fa,W,U);this._matchers.aggregate=z.andThen(Z,T=>B.createMatcher(T,W,U));return new E.WGLMeshFactory(L,M,W)};F._onTileData=async function(N,L,M,S){const {type:Q,addOrUpdate:U,remove:W}=L,fa=L.end;if(!U)return this.remoteClient.invoke("tileRenderer.onTileData",{tileKey:N.id,data:{type:Q,addOrUpdate:null,remove:W,clear:!1,end:fa}},S);M=this._processFeatures(N,U,M,S);try{const Z=await M;if(z.isNone(Z))return this.remoteClient.invoke("tileRenderer.onTileData",
{tileKey:N.id,data:{type:Q,addOrUpdate:null,remove:W,clear:!1,end:fa}},S);for(const T of Z)N.key.id!==T.message.tileKey&&this._addBufferData(N.key.id,T);await d.all(Z.map(T=>{const ba=N.key.id===T.message.tileKey;return this._updateTileMesh(Q,N,T,ba?L.remove:[],ba&&L.end,L.clear,S.signal)}))}catch(Z){this._handleError(N,Z,S)}};F._updateTileMesh=async function(N,L,M,S,Q,U,W){U=M.message.tileKey;U!==L.key.id&&(Q=!1);L=z.andThen(M,fa=>fa.message);M=z.andThen(M,fa=>fa.transferList)||[];N={type:N,addOrUpdate:L,
remove:S,clear:!1,end:Q};W={transferList:z.unwrap(M)||[],signal:W};d.throwIfAborted(W);return this.remoteClient.invoke("tileRenderer.onTileData",{tileKey:U,data:N},W)};F._processFeatures=async function(N,L,M,S){if(z.isNone(L)||!L.hasFeatures)return null;const Q={transform:N.transform,hasZ:!1,hasM:!1},U=this._factory,W={viewingMode:"",scale:N.scale},fa=await this._matchers.feature,Z=await this._matchers.aggregate;d.throwIfAborted(S);const T=this._getLabelInfos(N,L);await U.analyze(L.getCursor(),fa,
Z,Q,W);d.throwIfAborted(S);return this._writeFeatureSet(N,L,Q,T,U,M)};F._writeFeatureSet=function(N,L,M,S,Q,U){var W=L.getApproximateSize();U=new D.MeshData(N.key.id,{features:W,records:W,metrics:0},"simple"===this._schema.mesh.matcher.type&&this._schema.mesh.matcher.isDotDensity,U,!0);W={viewingMode:"",scale:N.scale};for(L=L.getCursor();L.next();)try{const fa=L.getDisplayId(),Z=z.isSome(S)?S.get(fa):null;Q.writeCursor(U,L,M,W,N.level,Z)}catch(fa){}return U.serialize(N.tileInfoView.tileInfo.isWrappable)};
F._handleError=function(N,L,M){if(!d.isAbortError(L))return this.remoteClient.invoke("tileRenderer.onTileError",{tileKey:N.id,error:L.message},{signal:M.signal})};F._getLabelInfos=function(N,L){const M=z.andThen(this._schema.mesh.labels,U=>U.filter(W=>{var fa=N.scale;return(!W.minScale||W.minScale>=fa)&&(!W.maxScale||W.maxScale<=fa)}));if(z.isNone(M)||0===M.length)return null;const S=new Map;new r.CollisionGrid(c.COLLISION_EARLY_REJECT_BUCKET_SIZE);for(L=L.getCursor();L.next();){const U=L.getDisplayId(),
W=[],fa=v.isAggregateId(U),Z=fa&&1!==L.readAttribute("cluster_count")?"aggregate":"feature";for(const T of M){if(T.target!==Z)continue;var Q=L.getStorage();Q=fa&&"feature"===Z?Q.getComputedStringAtIndex(L.readAttribute("referenceId"),T.fieldIndex):Q.getComputedStringAtIndex(U,T.fieldIndex);if(!Q)continue;Q=g.bidiText(Q.toString());const ba=Q[1];this._store.getMosaicItem(T.symbol,C.codepoints(Q[0])).then(ha=>{W[T.index]={glyphs:ha.glyphMosaicItems,rtl:ba,index:T.index}})}S.set(U,W)}return S};F._shouldDiscard=
function(N,L){switch(this.service.geometryType){case "esriGeometryPoint":return L=L.readLegacyPointGeometry(),!L||N.checkOverlap(L.x,L.y);case "esriGeometryPolygon":return L=L.readLegacyCentroid(),!L||N.checkOverlap(L.x,L.y);default:return!1}};F._markUsed=function(N,L){switch(this.service.geometryType){case "esriGeometryPoint":{const {x:M,y:S}=L.readLegacyPointGeometry();return N.markUsed(M,S)}case "esriGeometryPolygon":{const {x:M,y:S}=L.readLegacyCentroid();return N.markUsed(M,S)}}};t._createClass(J,
[{key:"supportsTileUpdates",get:function(){return!0}}]);return J}(G);return y=k.__decorate([e.subclass("esri.views.2d.layers.features.processors.SymbolProcessor")],y)})},"esri/views/2d/engine/webgl/util/BidiText":function(){define(["exports","../../../../../core/BidiEngine"],function(t,k){const m=new k;t.bidiText=function(z){if(!m.hasBidiChar(z))return[z,!1];let y;y="rtl"===m.checkContextual(z)?"IDNNN":"ICNNN";return[m.bidiTransform(z,y,"VLYSN"),!0]};Object.defineProperty(t,"__esModule",{value:!0})})},
"esri/views/2d/engine/webgl/collisions/CollisionGrid":function(){define(["exports","../../../../../core/mathUtils","../../../layers/features/support/StaticBitSet","../definitions"],function(t,k,m,z){let y=function(){function f(e,l){this.width=e;this.height=l;e=Math.ceil(e/1);l=Math.ceil(l/1);this._cols=e;this._rows=l;this._cells=m.StaticBitSet.create(e*l)}var h=f.prototype;h.insertMetrics=function(e){const l=this._hasCollision(e);0===l&&this._markMetrics(e);return l};h.getCellId=function(e,l){return e+
l*this._cols};h.has=function(e){return this._cells.has(e)};h.hasRange=function(e,l){return this._cells.hasRange(e,l)};h.set=function(e){this._cells.set(e)};h.setRange=function(e,l){this._cells.setRange(e,l)};h._hasCollision=function(e){const l=e.id;let q=0,p=0;e.save();do{const n=e.boundsCount;q+=n;for(let d=0;d<n;d++){const b=e.boundsComputedAnchorX(d),a=e.boundsComputedAnchorY(d),c=e.boundsWidth(d)+2,g=e.boundsHeight(d)+2;switch(this._collide(b,a,c,g)){case 2:return 2;case 1:p++}}}while(e.peekId()===
l&&e.next());e.restore();return q===p?1:0};h._collide=function(e,l,q,p){var n=e-q/2;e+=q/2;q=l-p/2;l+=p/2;if(0>e||0>l||n>this.width||q>this.height)return 1;n=k.clamp(Math.floor(n/1),0,this._cols);p=k.clamp(Math.floor(q/1),0,this._rows);e=k.clamp(Math.ceil(e/1),0,this._cols);for(l=k.clamp(Math.ceil(l/1),0,this._rows);p<=l;p++)for(q=n;q<=e;q++){const d=this.getCellId(q,p);if(this.has(d))return 2}return 0};h._mark=function(e,l,q,p){var n=e+q/2,d=l-p/2;l+=p/2;e=k.clamp(Math.floor(e-q/2),0,this._cols);
q=k.clamp(Math.floor(d/1),0,this._rows);n=k.clamp(Math.ceil(n/1),0,this._cols);d=k.clamp(Math.ceil(l/1),0,this._rows);for(l=q;l<=d;l++)for(q=e;q<=n;q++)p=this.getCellId(q,l),this.set(p);return!1};h._markMetrics=function(e){const l=e.id;do{const q=e.boundsCount;for(let p=0;p<q;p++){const n=e.boundsComputedAnchorX(p),d=e.boundsComputedAnchorY(p),b=e.boundsWidth(p)+2,a=e.boundsHeight(p)+2;this._mark(n,d,b,a)}}while(e.peekId()===l&&e.next())};return f}(),x=function(){function f(e,l=2){this._bucketSize=
e;this._rowsLength=z.TILE_SIZE/e;this._colsLength=z.TILE_SIZE/e;this._elementsPerBucket=l;this._grid=this._initGrid()}var h=f.prototype;h.checkOverlap=function(e,l){e=Math.floor(e/this._bucketSize);l=Math.floor(l/this._bucketSize);return 0>e||e>=this._rowsLength||0>l||l>=this._colsLength?!0:this._grid[l*this._colsLength+e]>=this._elementsPerBucket};h.markUsed=function(e,l){this._grid[Math.floor(l/this._bucketSize)*this._colsLength+Math.floor(e/this._bucketSize)]+=1};h.reset=function(){this._grid=
this._initGrid()};h._initGrid=function(){return new Uint8Array(this._rowsLength*this._colsLength)};return f}();t.CollisionBitsetGrid=y;t.CollisionGrid=x;t.HAS_COLLISION=2;t.NONE=0;t.OUTSIDE_EXTENT=1;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/cpuMapped/DisplayRecordReader":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../../../../../core/maybe","../definitions"],function(t,k,m,z){let y=function(){function f(e){this._cursor=this._head=
e}f.from=function(e,l=0,q=e.byteLength/x.BYTES_PER_RECORD-l){e=new x(new Int32Array(e,l*x.BYTES_PER_RECORD,q*x.ELEMENTS_PER_RECORD));return new f(e)};var h=f.prototype;h.size=function(){var e,l;return null!=(e=null==(l=this._cursor)?void 0:l.size())?e:0};h.link=function(e){if(this._head){for(var l=this._head;l._link;)l=l._link;l._link=e._head}else this._head=e._head};h.getCursor=function(){return this.copy()};h.lookup=function(e){for(this._cursor=this._head;this._cursor&&!this._cursor.lookup(e);){if(!this._cursor._link)return!1;
this._cursor=this._cursor._link}return!!this._cursor};h.copy=function(){var e;const l=new f(null==(e=this._head)?void 0:e.copy());if(!l._head)return l;e=l._head;let q=l._head._link;for(;q;)e._link=q.copy(),e=q,q=e._link;return l};h.next=function(){if(!this._cursor)return!1;if(!this._cursor.next()){if(!this._cursor._link)return!1;this._cursor=this._cursor._link;return this.next()}return!0};h.peekId=function(){var e;return null!=(e=this._cursor.peekId())?e:this._cursor._link.peekId()};h.delete=function(e){let l=
this._head,q=null;for(;l;){if(l.delete(e))return l.isEmpty()&&(m.isSome(q)&&(q._link=l._link),l===this._head&&(this._head=l._link),l===this._cursor&&(this._cursor=l._link)),!0;q=l;l=l._link}return!1};k._createClass(f,[{key:"id",get:function(){return this._cursor.id},set:function(e){this._cursor.id=e}},{key:"materialKey",get:function(){return this._cursor.materialKey},set:function(e){this._cursor.materialKey=e}},{key:"insertAfter",get:function(){return this._cursor.insertAfter}},{key:"indexFrom",get:function(){return this._cursor.indexFrom},
set:function(e){this._cursor.indexFrom=e}},{key:"indexCount",get:function(){return this._cursor.indexCount},set:function(e){this._cursor.indexCount=e}},{key:"vertexFrom",get:function(){return this._cursor.vertexFrom},set:function(e){this._cursor.vertexFrom=e}},{key:"vertexCount",get:function(){return this._cursor.vertexCount},set:function(e){this._cursor.vertexCount=e}},{key:"index",get:function(){return this._cursor._index}}]);return f}();y.ELEMENTS_PER_RECORD=z.DISPLAY_RECORD_INT_PER_ELEMENT;y.BYTES_PER_RECORD=
y.ELEMENTS_PER_RECORD*Int32Array.BYTES_PER_ELEMENT;let x=function(){function f(e){this._link=null;this._index=-1;this._deletedCount=0;this._offsets={instance:null};this._packedRecords=e}f.from=function(e,l=0,q=e.byteLength/this.BYTES_PER_RECORD-l){return new f(new Int32Array(e,l*this.BYTES_PER_RECORD,q*this.ELEMENTS_PER_RECORD))};var h=f.prototype;h.delete=function(e){const l=this._index,q=this.lookup(e);if(q)for(this.id=2147483647,++this._deletedCount;this.next()&&this.id===e;)this.id=2147483647,
++this._deletedCount;this._index=l;return q};h.isEmpty=function(){return this._deletedCount===this.size()};h.link=function(e){this._link?this._link.link(e):this._link=e};h.lookup=function(e){if(m.isNone(this._offsets.instance)){this._offsets.instance=new Map;var l=this.copy();l._index=-1;let q=0;for(;l.next();)l.id!==q&&(this._offsets.instance.set(l.id,l._index),q=l.id)}if(!this._offsets.instance.has(e))return!1;l=this._index;this._index=this._offsets.instance.get(e);return 2147483647===this.id?(this._index=
l,!1):!0};h.size=function(){return this._packedRecords.length/f.ELEMENTS_PER_RECORD};h.next=function(){for(;++this._index<this.size()&&2147483647===this.id;);return this._index<this.size()};h.peekId=function(){const e=(this._index+1)*f.ELEMENTS_PER_RECORD;return e>=this._packedRecords.length?0:this._packedRecords[e]};h.getCursor=function(){return this.copy()};h.copy=function(){const e=new f(this._packedRecords);e._link=this._link;e._index=this._index;e._offsets=this._offsets;e._deletedCount=this._deletedCount;
return e};k._createClass(f,[{key:"id",get:function(){return this._packedRecords[this._index*f.ELEMENTS_PER_RECORD]},set:function(e){this._packedRecords[this._index*f.ELEMENTS_PER_RECORD]=e}},{key:"materialKey",get:function(){return this._packedRecords[this._index*f.ELEMENTS_PER_RECORD+1]},set:function(e){this._packedRecords[this._index*f.ELEMENTS_PER_RECORD+1]=e}},{key:"insertAfter",get:function(){return this._packedRecords[this._index*f.ELEMENTS_PER_RECORD+2]}},{key:"indexFrom",get:function(){return this._packedRecords[this._index*
f.ELEMENTS_PER_RECORD+3]},set:function(e){this._packedRecords[this._index*f.ELEMENTS_PER_RECORD+3]=e}},{key:"indexCount",get:function(){return this._packedRecords[this._index*f.ELEMENTS_PER_RECORD+4]},set:function(e){this._packedRecords[this._index*f.ELEMENTS_PER_RECORD+4]=e}},{key:"vertexFrom",get:function(){return this._packedRecords[this._index*f.ELEMENTS_PER_RECORD+5]},set:function(e){this._packedRecords[this._index*f.ELEMENTS_PER_RECORD+5]=e}},{key:"vertexCount",get:function(){return this._packedRecords[this._index*
f.ELEMENTS_PER_RECORD+6]},set:function(e){this._packedRecords[this._index*f.ELEMENTS_PER_RECORD+6]=e}},{key:"index",get:function(){return this._index}}]);return f}();x.ELEMENTS_PER_RECORD=z.DISPLAY_RECORD_INT_PER_ELEMENT;x.BYTES_PER_RECORD=x.ELEMENTS_PER_RECORD*Int32Array.BYTES_PER_ELEMENT;t.DisplayRecordReader=y;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/mesh/MeshData":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../tiling/TileKey ../definitions ../../../tiling/PagedTileQueue ../../../tiling/TileInfoView ../../../tiling/TileQueue ../../../tiling/TileStrategy ../enums ../Utils ./VertexDataWriter ../../../layers/features/support/AttributeStore ../../../layers/features/support/tileUtils".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n){function d(a){switch(a){case 1:case 8:case 32:return-1;case 2:case 64:return 0;case 4:case 16:case 128:return 1}}function b(a){switch(a){case 1:case 2:case 4:return-1;case 8:case 16:return 0;case 32:case 64:case 128:return 1}}y=function(){function a(g,r,u,w,v){this.hasRecords=this._hasAggregate=this._hasDotDensity=!1;this._data={self:new Map,neighbors:[]};this._current={geometryType:0,writer:null,overlaps:0,start:0,insertAfter:0,id:0,materialKey:0,indexStart:0,
vertStart:0,isDotDensity:!1,bufferingEnabled:!1,metricBoxLenPointer:0};this.hint=r;this.tileKey=g;this._hasDotDensity=u;this._hasAggregate=w;this._pixelBufferEnabled=v}var c=a.prototype;c.serialize=function(g){const r=[];r.push(this._serializeTileVertexData(this.tileKey,this._data.self));this._data.neighbors.forEach((u,w)=>{var v=1<<w;w=d(v);v=b(v);w=n.getPow2NeighborKey(new m(this.tileKey),w,v,g);r.push(this._serializeTileVertexData(w.id,u))});return r};c._serializeTileVertexData=function(g,r){var u,
w,v,D,B;const C=[];r={[e.WGLGeometryType.MARKER]:null==(u=r.get(e.WGLGeometryType.MARKER))?void 0:u.serialize(C),[e.WGLGeometryType.FILL]:null==(w=r.get(e.WGLGeometryType.FILL))?void 0:w.serialize(C),[e.WGLGeometryType.LINE]:null==(v=r.get(e.WGLGeometryType.LINE))?void 0:v.serialize(C),[e.WGLGeometryType.TEXT]:null==(D=r.get(e.WGLGeometryType.TEXT))?void 0:D.serialize(C),[e.WGLGeometryType.LABEL]:null==(B=r.get(e.WGLGeometryType.LABEL))?void 0:B.serialize(C)};return{message:{tileKey:g,data:r},transferList:C}};
c.featureStart=function(g=0){this._current.insertAfter=g};c.featureEnd=function(){};c.recordStart=function(g,r,u,w,v){this._current.writer=this._getVertexWriter(u,w);this._current.overlaps=0;this._current.indexStart=this._current.writer.indexCount;this._current.vertStart=this._current.writer.vertexCount;this._current.bufferingEnabled=v;this._current.id=g;this._current.materialKey=r;this._current.geometryType=u;this._current.isDotDensity=!1;this._current.writer.recordStart()};c.recordCount=function(){return this._current.writer.recordCount};
c.vertexCount=function(){return this._current.writer.vertexCount};c.indexCount=function(){return this._current.writer.indexCount};c.vertexBounds=function(g,r,u,w){this._current.bufferingEnabled&&this._addOverlap(g,r,u,w)};c.vertexWrite=function(g){this._current.writer.writeVertex(g)};c.vertexWriteF32=function(g){this._current.writer.writeVertexF32(g)};c.vertexEnd=function(){};c.vertexWriter=function(){return this._current.writer.vertexWriter};c.indexWrite=function(g){this._current.writer.writeIndex(g)};
c.indexWriter=function(){return this._current.writer.indexWriter};c.metricWriter=function(){return this._current.writer.metricWriter};c.metricStart=function(g,r,u,w,v,D,B,C){this._current.writer=this._getVertexWriter(e.WGLGeometryType.LABEL,!1);const A=this._current.writer.metricWriter;A.push(p.getDisplayIdTexel(g));A.push(r);A.push(u);A.push(w);A.push(v);A.push(D);A.push(B);A.push(C);A.push(255);this._current.metricBoxLenPointer=A.push(0)};c.metricEnd=function(){const g=this._current.writer.metricWriter;
0===g.getValue(this._current.metricBoxLenPointer)&&g.seek(g.length-10)};c.metricBoxWrite=function(g,r,u,w){const v=this._current.writer.metricWriter;v.incr(this._current.metricBoxLenPointer);v.push(0);v.push(0);v.push(g);v.push(r);v.push(u);v.push(w)};c.recordEnd=function(){var g=this._current.indexStart,r=this._current.writer.indexCount;if(g===r)return!1;this.hasRecords=!0;var u=this._current.vertStart;this._current.writer.recordEnd(this._current.id,this._current.materialKey,this._current.insertAfter,
g,r-g,u,this._current.writer.vertexCount-u);if(!this._pixelBufferEnabled||this._hasAggregate||0===this._current.overlaps||this._current.geometryType===e.WGLGeometryType.LABEL)return!0;g=this._current.writer;for(r=0;8>r;r++)if(u=1<<r,this._current.overlaps&u){if(!this._data.neighbors[r]){var w=new Map;this._data.neighbors[r]=w}w=this._data.neighbors[r];var v=this._current.geometryType;if(!w.has(v)){const D=l.getStrides(v,this._current.isDotDensity).geometry;w.set(v,new q.VertexDataWriter(v,D,z.PATCH_PIXEL_BUFFER_ALLOC_SIZE))}w=
w.get(this._current.geometryType);v=4096*-d(u);u=4096*-b(u);w.copyLastFrom(g,v,u)}return!0};c._addOverlap=function(g,r,u,w){this._current.overlaps|=255^((g<0+u?148:g>=z.TILE_SIZE-u?41:189)|(r<0+w?224:r>=z.TILE_SIZE-w?7:231))};c._getVertexWriter=function(g,r){if(!this._data.self.has(g)){r=this._data.self;const u=l.getStrides(g,this._hasDotDensity).geometry;r.set(g,new q.VertexDataWriter(g,u,8E3))}return this._data.self.get(g)};k._createClass(a,[{key:"hasAggregates",get:function(){return this._hasAggregate}},
{key:"hasPixelBufferEnabled",get:function(){return this._pixelBufferEnabled}}]);return a}();t.MeshData=y;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/views/2d/tiling/PagedTileQueue":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../../core/Accessor ../../../chunks/vec2 ../../support/QueueProcessor".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d){function b(u,w){u.length=0;w.forEach(v=>u.push(v));return u}const a=new Set,c=[],g=new Map,r=[0,0];m=function(u){function w(D){D=u.call(this,D)||this;D._keyToItem=new Map;D.concurrency=6;D.strategy="scale-first";D.tileInfoView=null;return D}t._inheritsLoose(w,u);var v=w.prototype;v.initialize=function(){const {concurrency:D,process:B}=this;this._queue=new d.QueueProcessor({concurrency:D,process:(C,A)=>{C=this._keyToItem.get(C);return B(C,{signal:A})},peeker:C=>
C.values().next().value})};v.destroy=function(){this.clear();this._queue.destroy();this._queue=null};v.abort=function(D){this._queue.abort("string"===typeof D?D:D.id)};v.clear=function(){this._queue.clear();this._keyToItem.clear();this.notifyChange("updating")};v.has=function(D){return"string"===typeof D?this._keyToItem.has(D):this._keyToItem.has(D.id)};v.isOngoing=function(D){D="string"===typeof D?D:D.id;return this.has(D)&&this._queue.isOngoing(D)};v.pause=function(){this._queue.pause()};v.push=
function(D,B){const C=D.key.id+"-"+B;if(this.has(C))return this.get(C);B=this._queue.push(C);const A=()=>{this._keyToItem.delete(C);this.notifyChange("updating")};this._keyToItem.set(C,D);B.then(A,A);this.notifyChange("updating");return B};v.reset=function(){this._queue.reset();this.notifyChange("updating")};v.resume=function(){this._queue.resume()};v._peekByScaleFirst=function(D){if(!this.state)return D.values().next().value;const B=this.tileInfoView;let C=Number.NEGATIVE_INFINITY,A=Number.POSITIVE_INFINITY;
D.forEach(J=>{J=this._keyToItem.get(J);const F=this.tileInfoView.getTileScale(J.key);g.has(F)||(g.set(F,[]),C=Math.max(F,C),A=Math.min(F,A));g.get(F).push(J.key);a.add(F)});let E=this.state.scale;g.has(E)||(b(c,a),c.sort(),E=c.reduce((J,F)=>Math.abs(F-E)<Math.abs(J-E)?F:J,c[0]));E=Math.min(E,C);E=Math.max(E,A);D=g.get(E);const G=B.getClosestInfoForScale(E),H=G.getColumnForX(this.state.center[0]),K=G.getRowForY(this.state.center[1]);D.sort((J,F)=>{const N=G.denormalizeCol(J.col,J.world),L=G.denormalizeCol(F.col,
F.world);return Math.sqrt((H-N)*(H-N)+(K-J.row)*(K-J.row))-Math.sqrt((H-L)*(H-L)+(K-F.row)*(K-F.row))});a.clear();g.clear();return D[0].id};v._peekByCenterFirst=function(D){if(!this.state)return D.values().next().value;const B=this.tileInfoView,C=this.state.center;let A=Number.POSITIVE_INFINITY,E=null;D.forEach(G=>{G=this._keyToItem.get(G);B.getTileCoords(r,G.key);const H=n.distance(r,C);H<A&&(A=H,E=G.key)});return E.id};t._createClass(w,[{key:"length",get:function(){return this._queue?this._queue.length:
0}},{key:"onGoingCount",get:function(){return this._keyToItem.size}},{key:"updating",get:function(){return 0<this.length||0<this.onGoingCount}}]);return w}(p);k.__decorate([x.property({constructOnly:!0})],m.prototype,"concurrency",void 0);k.__decorate([x.property({constructOnly:!0})],m.prototype,"process",void 0);k.__decorate([x.property()],m.prototype,"state",void 0);k.__decorate([x.property({constructOnly:!0})],m.prototype,"strategy",void 0);k.__decorate([x.property({constructOnly:!0})],m.prototype,
"tileInfoView",void 0);k.__decorate([x.property({readOnly:!0})],m.prototype,"updating",null);return m=k.__decorate([h.subclass("esri.views.2d.tiling.PagedTileQueue")],m)})},"esri/chunks/vec2":function(){define(["exports","./common"],function(t,k){function m(Q,U){Q[0]=U[0];Q[1]=U[1];return Q}function z(Q,U,W){Q[0]=U;Q[1]=W;return Q}function y(Q,U,W){Q[0]=U[0]+W[0];Q[1]=U[1]+W[1];return Q}function x(Q,U,W){Q[0]=U[0]-W[0];Q[1]=U[1]-W[1];return Q}function f(Q,U,W){Q[0]=U[0]*W[0];Q[1]=U[1]*W[1];return Q}
function h(Q,U,W){Q[0]=U[0]/W[0];Q[1]=U[1]/W[1];return Q}function e(Q,U){Q[0]=Math.ceil(U[0]);Q[1]=Math.ceil(U[1]);return Q}function l(Q,U){Q[0]=Math.floor(U[0]);Q[1]=Math.floor(U[1]);return Q}function q(Q,U,W){Q[0]=Math.min(U[0],W[0]);Q[1]=Math.min(U[1],W[1]);return Q}function p(Q,U,W){Q[0]=Math.max(U[0],W[0]);Q[1]=Math.max(U[1],W[1]);return Q}function n(Q,U){Q[0]=Math.round(U[0]);Q[1]=Math.round(U[1]);return Q}function d(Q,U,W){Q[0]=U[0]*W;Q[1]=U[1]*W;return Q}function b(Q,U,W,fa){Q[0]=U[0]+W[0]*
fa;Q[1]=U[1]+W[1]*fa;return Q}function a(Q,U){const W=U[0]-Q[0];Q=U[1]-Q[1];return Math.sqrt(W*W+Q*Q)}function c(Q,U){const W=U[0]-Q[0];Q=U[1]-Q[1];return W*W+Q*Q}function g(Q){const U=Q[0];Q=Q[1];return Math.sqrt(U*U+Q*Q)}function r(Q){const U=Q[0];Q=Q[1];return U*U+Q*Q}function u(Q,U){Q[0]=-U[0];Q[1]=-U[1];return Q}function w(Q,U){Q[0]=1/U[0];Q[1]=1/U[1];return Q}function v(Q,U){var W=U[0];const fa=U[1];W=W*W+fa*fa;0<W&&(W=1/Math.sqrt(W),Q[0]=U[0]*W,Q[1]=U[1]*W);return Q}function D(Q,U){return Q[0]*
U[0]+Q[1]*U[1]}function B(Q,U,W){U=U[0]*W[1]-U[1]*W[0];Q[0]=Q[1]=0;Q[2]=U;return Q}function C(Q,U,W,fa){const Z=U[0];U=U[1];Q[0]=Z+fa*(W[0]-Z);Q[1]=U+fa*(W[1]-U);return Q}function A(Q,U){U=U||1;const W=2*k.RANDOM()*Math.PI;Q[0]=Math.cos(W)*U;Q[1]=Math.sin(W)*U;return Q}function E(Q,U,W){const fa=U[0];U=U[1];Q[0]=W[0]*fa+W[2]*U;Q[1]=W[1]*fa+W[3]*U;return Q}function G(Q,U,W){const fa=U[0];U=U[1];Q[0]=W[0]*fa+W[2]*U+W[4];Q[1]=W[1]*fa+W[3]*U+W[5];return Q}function H(Q,U,W){const fa=U[0];U=U[1];Q[0]=W[0]*
fa+W[3]*U+W[6];Q[1]=W[1]*fa+W[4]*U+W[7];return Q}function K(Q,U,W){const fa=U[0];U=U[1];Q[0]=W[0]*fa+W[4]*U+W[12];Q[1]=W[1]*fa+W[5]*U+W[13];return Q}function J(Q,U,W,fa){const Z=U[0]-W[0];U=U[1]-W[1];const T=Math.sin(fa);fa=Math.cos(fa);Q[0]=Z*fa-U*T+W[0];Q[1]=Z*T+U*fa+W[1];return Q}function F(Q,U){var W=Q[0];Q=Q[1];const fa=U[0];U=U[1];let Z=W*W+Q*Q;0<Z&&(Z=1/Math.sqrt(Z));let T=fa*fa+U*U;0<T&&(T=1/Math.sqrt(T));W=(W*fa+Q*U)*Z*T;return 1<W?0:-1>W?Math.PI:Math.acos(W)}function N(Q){return"vec2("+
Q[0]+", "+Q[1]+")"}function L(Q,U){return Q[0]===U[0]&&Q[1]===U[1]}function M(Q,U){const W=Q[0];Q=Q[1];const fa=U[0];U=U[1];return Math.abs(W-fa)<=k.EPSILON*Math.max(1,Math.abs(W),Math.abs(fa))&&Math.abs(Q-U)<=k.EPSILON*Math.max(1,Math.abs(Q),Math.abs(U))}var S=Object.freeze({__proto__:null,copy:m,set:z,add:y,subtract:x,multiply:f,divide:h,ceil:e,floor:l,min:q,max:p,round:n,scale:d,scaleAndAdd:b,distance:a,squaredDistance:c,length:g,squaredLength:r,negate:u,inverse:w,normalize:v,dot:D,cross:B,lerp:C,
random:A,transformMat2:E,transformMat2d:G,transformMat3:H,transformMat4:K,rotate:J,angle:F,str:N,exactEquals:L,equals:M,len:g,sub:x,mul:f,div:h,dist:a,sqrDist:c,sqrLen:r});t.add=y;t.angle=F;t.ceil=e;t.copy=m;t.cross=B;t.dist=a;t.distance=a;t.div=h;t.divide=h;t.dot=D;t.equals=M;t.exactEquals=L;t.floor=l;t.inverse=w;t.len=g;t.length=g;t.lerp=C;t.max=p;t.min=q;t.mul=f;t.multiply=f;t.negate=u;t.normalize=v;t.random=A;t.rotate=J;t.round=n;t.scale=d;t.scaleAndAdd=b;t.set=z;t.sqrDist=c;t.sqrLen=r;t.squaredDistance=
c;t.squaredLength=r;t.str=N;t.sub=x;t.subtract=x;t.transformMat2=E;t.transformMat2d=G;t.transformMat3=H;t.transformMat4=K;t.vec2=S})},"esri/views/2d/tiling/TileQueue":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../../core/Accessor ../../../chunks/vec2 ../../support/QueueProcessor".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d){function b(u,w){u.length=0;w.forEach(v=>u.push(v));return u}const a=new Set,c=[],g=new Map,r=[0,0];m=function(u){function w(D){D=u.call(this,D)||this;D._keyToItem=new Map;D.concurrency=6;D.strategy="scale-first";D.tileInfoView=null;return D}t._inheritsLoose(w,u);var v=w.prototype;v.initialize=function(){const {concurrency:D,process:B,strategy:C}=this;this._queue=new d.QueueProcessor({concurrency:D,process:(A,E)=>{A=this._keyToItem.get(A);return B(A,{signal:E})},
peeker:"scale-first"===C?A=>this._peekByScaleFirst(A):A=>this._peekByCenterFirst(A)})};v.destroy=function(){this.clear();this._queue.destroy();this._queue=null};v.abort=function(D){this._queue.abort("string"===typeof D?D:D.id)};v.clear=function(){this._queue.clear();this._keyToItem.clear();this.notifyChange("updating")};v.has=function(D){return"string"===typeof D?this._keyToItem.has(D):this._keyToItem.has(D.id)};v.isOngoing=function(D){D="string"===typeof D?D:D.id;return this.has(D)&&this._queue.isOngoing(D)};
v.pause=function(){this._queue.pause()};v.push=function(D){const B=D.key.id;if(this.has(B))return this.get(B);const C=this._queue.push(B),A=()=>{this._keyToItem.delete(B);this.notifyChange("updating")};this._keyToItem.set(B,D);C.then(A,A);this.notifyChange("updating");return C};v.reset=function(){this._queue.reset();this.notifyChange("updating")};v.resume=function(){this._queue.resume()};v._peekByScaleFirst=function(D){if(!this.state)return D.values().next().value;const B=this.tileInfoView;let C=
Number.NEGATIVE_INFINITY,A=Number.POSITIVE_INFINITY;D.forEach(J=>{J=this._keyToItem.get(J);const F=this.tileInfoView.getTileScale(J.key);g.has(F)||(g.set(F,[]),C=Math.max(F,C),A=Math.min(F,A));g.get(F).push(J.key);a.add(F)});let E=this.state.scale;g.has(E)||(b(c,a),c.sort(),E=c.reduce((J,F)=>Math.abs(F-E)<Math.abs(J-E)?F:J,c[0]));E=Math.min(E,C);E=Math.max(E,A);D=g.get(E);const G=B.getClosestInfoForScale(E),H=G.getColumnForX(this.state.center[0]),K=G.getRowForY(this.state.center[1]);D.sort((J,F)=>
{const N=G.denormalizeCol(J.col,J.world),L=G.denormalizeCol(F.col,F.world);return Math.sqrt((H-N)*(H-N)+(K-J.row)*(K-J.row))-Math.sqrt((H-L)*(H-L)+(K-F.row)*(K-F.row))});a.clear();g.clear();return D[0].id};v._peekByCenterFirst=function(D){if(!this.state)return D.values().next().value;const B=this.tileInfoView,C=this.state.center;let A=Number.POSITIVE_INFINITY,E=null;D.forEach(G=>{G=this._keyToItem.get(G);B.getTileCoords(r,G.key);const H=n.distance(r,C);H<A&&(A=H,E=G.key)});return E.id};t._createClass(w,
[{key:"length",get:function(){return this._queue?this._queue.length:0}},{key:"onGoingCount",get:function(){return this._keyToItem.size}},{key:"updating",get:function(){return 0<this.length||0<this.onGoingCount}}]);return w}(p);k.__decorate([x.property({constructOnly:!0})],m.prototype,"concurrency",void 0);k.__decorate([x.property({constructOnly:!0})],m.prototype,"process",void 0);k.__decorate([x.property()],m.prototype,"state",void 0);k.__decorate([x.property({constructOnly:!0})],m.prototype,"strategy",
void 0);k.__decorate([x.property({constructOnly:!0})],m.prototype,"tileInfoView",void 0);k.__decorate([x.property({readOnly:!0})],m.prototype,"updating",null);return m=k.__decorate([h.subclass("esri.views.2d.tiling.TileQueue")],m)})},"esri/views/2d/tiling/TileStrategy":function(){define(["./TileKey","./TileCoverage","./TileCache"],function(t,k,m){const z=new t(0,0,0,0),y=new Map,x=[],f=[];return function(){function h(l){this._previousScale=Number.POSITIVE_INFINITY;this.cachePolicy="keep";this.coveragePolicy=
"closest";this.resampling=!0;this.tileIndex=new Map;this.tiles=[];this.buffer=192;this.acquireTile=l.acquireTile;this.releaseTile=l.releaseTile;this.tileInfoView=l.tileInfoView;this.resampling=null==l.resampling||!!l.resampling;l.cachePolicy&&(this.cachePolicy=l.cachePolicy);l.coveragePolicy&&(this.coveragePolicy=l.coveragePolicy);null!=l.buffer&&(this.buffer=l.buffer);l.cacheSize&&(this._tileCache=new m(l.cacheSize,this.tileInfoView,q=>{this.releaseTile(q)}))}var e=h.prototype;e.destroy=function(){this.tileIndex.clear()};
e.update=function(l){const {resampling:q,tileIndex:p}=this,n=this.tileInfoView.getTileCoverage(l.state,this.buffer,this.coveragePolicy);f.length=0;x.length=0;y.clear();if(n){var {minScale:d,maxScale:b}=this.tileInfoView.tileInfo,{spans:a,lodInfo:c}=n,{level:g}=c,{scale:r,center:u,resolution:w}=l.state,v=!l.stationary&&r>this._previousScale;this._previousScale=r;this.tiles.length=0;if(!q&&(r>d||r<b))return this.tiles.length=0,y.clear(),p.forEach(E=>{this.releaseTile(E)}),p.clear(),f.length=0,x.length=
0,y.clear(),k.pool.release(n),!0;p.forEach(E=>E.visible=!0);var D=l=0;if(0<a.length)for(const {row:E,colFrom:G,colTo:H}of a)for(let K=G;K<=H;K++){l++;const J=z.set(g,E,c.normalizeCol(K),c.getWorldForColumn(K)).id;if(p.has(J)){var B=p.get(J);B.isReady?(y.set(J,B),D++):v||this._addParentTile(J,y)}else{if(this._tileCache&&this._tileCache.has(J)){if(B=this._tileCache.pop(J),this.tileIndex.set(J,B),B.isReady){y.set(J,B);D++;continue}}else B=this.acquireTile(z),this.tileIndex.set(J,B);v||this._addParentTile(J,
y)}}var C=D===l;p.forEach((E,G)=>{z.set(G);if(!y.has(G)){var H=this.tileInfoView.intersects(n,z),K="purge"===this.cachePolicy?z.level!==g:z.level>g;!H||!v&&C?!K&&H||x.push(G):E.isReady?f.push(G):K&&x.push(G)}});for(var A of f)(l=p.get(A))&&l.isReady&&y.set(A,l);for(const E of x)A=p.get(E),this._tileCache?this._tileCache.add(A):this.releaseTile(A),p.delete(E);y.forEach(E=>this.tiles.push(E));p.forEach(E=>{y.has(E.key.id)||(E.visible=!1)});this._tileCache&&this._tileCache.prune(g,u,w);k.pool.release(n);
y.clear();return C}};e.clear=function(l=!0){const {tileIndex:q}=this;l&&q.forEach(p=>{this.releaseTile(p)});q.clear()};e.updateCacheSize=function(l){this._tileCache&&(this._tileCache.maxSize=l)};e._addParentTile=function(l,q){let p=null;for(;;){l=this.tileInfoView.getTileParentId(l);if(!l)break;if(this.tileIndex.has(l)){if((p=this.tileIndex.get(l))&&p.isReady){q.has(p.key.id)||q.set(p.key.id,p);break}}else if(this._tileCache&&this._tileCache.has(l)&&(p=this._tileCache.pop(l),this.tileIndex.set(l,
p),p&&p.isReady)){q.has(p.key.id)||q.set(p.key.id,p);break}}};return h}()})},"esri/views/2d/tiling/TileCache":function(){define(["../../../chunks/vec2"],function(t){return function(){function k(z,y,x){this.maxSize=z;this.tileInfoView=y;this.removedFunc=x;this._tilePerId=new Map;this._tileKeysPerLevel=[]}var m=k.prototype;m.has=function(z){return this._tilePerId.has(z)};m.get=function(z){return this._tilePerId.get(z)};m.pop=function(z){const y=this._tilePerId.get(z);if(!y)return null;const x=this._tileKeysPerLevel[y.key.level];
this._tilePerId["delete"](z);for(let f=0;f<x.length;f++)if(x[f].id===z){x.splice(f,1);break}y.visible=!0;return y};m.add=function(z){z.visible=!1;const y=z.key,x=y.id;this._tilePerId.has(x)||(this._tilePerId.set(x,z),z=y.level,this._tileKeysPerLevel[z]||(this._tileKeysPerLevel[z]=[]),this._tileKeysPerLevel[z].push(y))};m.prune=function(z,y,x){let f=this._tilePerId.size;if(!(f<=this.maxSize)){for(var h=this._tileKeysPerLevel.length-1;f>this.maxSize&&0<=h;)h!==z&&(f=this._pruneAroundCenterTile(f,y,
x,h)),h--;f>this.maxSize&&(f=this._pruneAroundCenterTile(f,y,x,z))}};m._pruneAroundCenterTile=function(z,y,x,f){f=this._tileKeysPerLevel[f];if(!f||0===f.length)return z;const {size:h,origin:e}=this.tileInfoView.tileInfo,l=x*h[0],q=x*h[1],p=[0,0],n=[0,0];for(f.sort((d,b)=>{p[0]=e.x+l*(d.col+.5);p[1]=e.y-q*(d.row+.5);n[0]=e.x+l*(b.col+.5);n[1]=e.y-q*(b.row+.5);return t.squaredDistance(p,y)-t.squaredDistance(n,y)});0<f.length&&(x=f.pop(),this._removeTile(x.id),z--,z!==this.maxSize););return z};m._removeTile=
function(z){const y=this._tilePerId.get(z);this.removedFunc&&this.removedFunc(y);this._tilePerId["delete"](z)};return k}()})},"esri/views/2d/engine/webgl/mesh/VertexDataWriter":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../definitions","./heuristics","../util/Writer"],function(t,k,m,z,y){let x=function(){function f(e,l,q){this._start={index:0,vertex:0};q=z.getMeshSizeHint(e,l,q);l/=4;this.geometryType=e;this._records=new y(Int32Array,q.recordBytes);this._indices=
new y(Uint32Array,q.indexBytes);this._vertices=new y(Uint32Array,q.vertexBytes);this._metrics=new y(Float32Array,0);this._strideInt=l}var h=f.prototype;h.serialize=function(e){const l=this._records.buffer(),q=this._indices.buffer(),p=this._vertices.buffer(),n=this._metrics.length?this._metrics.buffer():null,d=4*this._strideInt;e.push(l,q,p);return{stride:d,records:l,indices:q,vertices:p,metrics:n}};h.recordStart=function(){this._start.index=this._indices.length;this._start.vertex=this._vertices.length};
h.recordEnd=function(e,l,q,p,n,d,b){this._records.push(e);this._records.push(l);this._records.push(q);this._records.push(p);this._records.push(n);this._records.push(d);this._records.push(b)};h.writeIndex=function(e){this._indices.push(e)};h.writeVertex=function(e){this._vertices.push(e)};h.writeVertexF32=function(e){this._vertices.writeF32(e)};h.copyLastFrom=function(e,l,q){var p=e._records.length-7;const n=e._records.getValue(p),d=e._records.getValue(p+1),b=e._records.getValue(p+2),a=e._records.getValue(p+
4);p=e._records.getValue(p+6);const c=this._vertices.length;var g=(e._start.vertex-this._vertices.length)/this._strideInt;const r=this._indices.length,u=this.vertexCount;for(var w=e._start.index;w!==e._indices.length;w++){const v=e._indices.getValue(w);this._indices.push(v-g)}for(g=e._start.vertex;g!==e._vertices.length;g++)w=e._vertices.getValue(g),this._vertices.push(w);for(e=c;e<=this._vertices.length;e+=this._strideInt)this._vertices.i1616Add(e,l,q);this._records.push(n);this._records.push(d);
this._records.push(b);this._records.push(r);this._records.push(a);this._records.push(u);this._records.push(p)};k._createClass(f,[{key:"strideInt",get:function(){return this._strideInt}},{key:"recordCount",get:function(){return this._records.length/m.DISPLAY_RECORD_INT_PER_ELEMENT}},{key:"vertexCount",get:function(){return this._vertices.length/this._strideInt}},{key:"indexCount",get:function(){return this._indices.length}},{key:"indexWriter",get:function(){return this._indices}},{key:"vertexWriter",
get:function(){return this._vertices}},{key:"metricWriter",get:function(){return this._metrics}}]);return f}();t.VertexDataWriter=x;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/mesh/heuristics":function(){define(["exports","../definitions","../enums"],function(t,k,m){const z=new Map;z.set(m.WGLGeometryType.MARKER,{multiplier:1,indicesPerRecord:6,verticesPerRecord:4});z.set(m.WGLGeometryType.LINE,{multiplier:1,indicesPerRecord:24,verticesPerRecord:8});z.set(m.WGLGeometryType.FILL,
{multiplier:1,indicesPerRecord:10,verticesPerRecord:10});z.set(m.WGLGeometryType.TEXT,{multiplier:8,indicesPerRecord:6,verticesPerRecord:4});z.set(m.WGLGeometryType.LABEL,{multiplier:8,indicesPerRecord:6,verticesPerRecord:4});t.getMeshHeuristic=function(y){return z.get(y)};t.getMeshSizeHint=function(y,x,f){const {indicesPerRecord:h,multiplier:e,verticesPerRecord:l}=z.get(y);return{recordBytes:f*k.DISPLAY_RECORD_INT_PER_ELEMENT*Uint32Array.BYTES_PER_ELEMENT,indexBytes:e*h*f*Uint32Array.BYTES_PER_ELEMENT,
vertexBytes:e*l*f*x}};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/util/Writer":function(){define(["../../../../../chunks/_rollupPluginBabelHelpers"],function(t){return function(){function k(z,y){this._pos=0;y=y?this._roundToNearest(y,z.BYTES_PER_ELEMENT):40;this._array=new ArrayBuffer(y);this._buffer=new z(this._array);this._ctor=z;this._i16View=new Int16Array(this._array)}var m=k.prototype;m._roundToNearest=function(z,y){z=Math.round(z);return z+(y-z%y)};m._ensureSize=
function(z){if(this._pos+z>=this._buffer.length){z=this._roundToNearest(1.5*(this._array.byteLength+z*this._buffer.BYTES_PER_ELEMENT),this._buffer.BYTES_PER_ELEMENT);z=new ArrayBuffer(z);const y=new this._ctor(z);y.set(this._buffer,0);this._array=z;this._buffer=y;this._i16View=new Int16Array(this._array)}};m.writeF32=function(z){this._ensureSize(1);const y=this._pos;(new Float32Array(this._array,4*this._pos,1))[0]=z;this._pos++;return y};m.push=function(z){this._ensureSize(1);const y=this._pos;this._buffer[this._pos++]=
z;return y};m.writeFixed=function(z){this._buffer[this._pos++]=z};m.setValue=function(z,y){this._buffer[z]=y};m.i1616Add=function(z,y,x){this._i16View[2*z]+=y;this._i16View[2*z+1]+=x};m.getValue=function(z){return this._buffer[z]};m.incr=function(z){if(this._buffer.length<z)throw Error("Increment index overflows the target buffer");this._buffer[z]++};m.decr=function(z){this._buffer[z]--};m.writeRegion=function(z){this._ensureSize(z.length);const y=this._pos;this._buffer.set(z,this._pos);this._pos+=
z.length;return y};m.writeManyFrom=function(z,y,x){for(this._ensureSize(x-y);y!==x;y++)this.writeFixed(z._buffer[y])};m.buffer=function(){const z=this._array.slice(0,4*this._pos);this.destroy();return z};m.toArray=function(){const z=this._array,y=[];for(let x=0;x<z.byteLength/4;x++)y.push(z[x]);return y};m.seek=function(z){this._pos=z};m.destroy=function(){this._buffer=this._array=null};t._createClass(k,[{key:"length",get:function(){return this._pos}}]);return k}()})},"esri/views/2d/layers/features/support/tileUtils":function(){define(["exports",
"./Tile"],function(t,k){function m(z,y,x,f){z=z.clone();const h=1<<z.level;y=z.col+y;x=z.row+x;f&&0>y?(z.col=y+h,--z.world):y>=h?(z.col=y-h,z.world+=1):z.col=y;z.row=x;return z}t.getPow2NeighborKey=m;t.getPow2NeighborTile=function(z,y,x){y=m(z.key,y,x,z.tileInfoView.tileInfo.isWrappable);return new k.Tile(z.tileInfoView,y)};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/mesh/factories/matcherUtils":function(){define(["exports","../../../../../../core/Logger","../../../../../../core/Error",
"../../util/Matcher"],function(t,k,m,z){const y=k.getLogger("esri/views/2d/engine/webgl/mesh/factories/matcherUtils");t.createMatcher=async function(x,f,h){switch(x.type){case "simple":return z.FeatureMatcher.fromBasicRenderer(x,f,h);case "map":return z.MapMatcher.fromUVRenderer(x,f,h);case "interval":return z.IntervalMatcher.fromCBRenderer(x,f,h);case "dictionary":return z.DictionaryMatcher.fromDictionaryRenderer(x,f,h);default:return y.error(new m("mapview-mesh:invalid-renderer","Unable to handle unknown renderer type")),
null}};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/util/Matcher":function(){define("require exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/Logger ../../../../../core/Error ../../../../../support/arcadeOnDemand ../../../../../symbols/cim/utils ../../../../../core/LRUCache ../../../arcade/callExpressionWithFeature ../../../../../symbols/cim/cimSymbolUtils ../../../layers/features/schemaUtils".split(" "),function(t,k,m,z,y,x,f,h,e,l,q){async function p(c,
g){const r=c||1;if("number"===typeof r)return(w,v,D)=>r;const u=await x.createRendererExpression(r,g.spatialReference,g.fields);return(w,v,D)=>e(u,w,{$view:D},g.geometryType,v)||1}const n=z.getLogger("esri/views/2d/engine/webgl/util/Matcher");z=function(){function c(){this.type="feature";this._defaultResult=null}c.fromBasicRenderer=async function(r,u,w){const v=new c;r.symbol&&(r=await l.expandSymbol(r.symbol,w),u=u.createTemplateGroup(r,null),v.setDefault(u));return v};var g=c.prototype;g.size=function(){return 1};
g.getDefault=function(){return this._defaultResult};g.setDefault=function(r){this._defaultResult=r};g.match=function(r,u,w,v,D){return this.getDefault()};g.analyze=async function(r,u,w,v,D){return null};return c}();let d=function(c){function g(u,w,v,D){var B=c.call(this)||this;B.type="interval";B._intervals=[];B._isMaxInclusive=w;B._fieldIndex=D;B._field=u;B._normalizationInfo=v;return B}m._inheritsLoose(g,c);g.fromCBRenderer=async function(u,w,v){const {isMaxInclusive:D,normalizationField:B,normalizationTotal:C,
normalizationType:A}=u,E=new g(u.field,D,{normalizationField:B,normalizationTotal:C,normalizationType:A},u.fieldIndex),G=await l.expandSymbol(u.backgroundFillSymbol,v);await Promise.all(u.intervals.map(async H=>{var K=await l.expandSymbol(H.symbol,v);K=await w.createTemplateGroup(K,G);E.add({min:H.min,max:H.max},K)}));if(u=await l.expandSymbol(u.defaultSymbol,v))u=await w.createTemplateGroup(u,G),E.setDefault(u);return E};var r=g.prototype;r.add=function(u,w){this._intervals.push({interval:u,result:w});
this._intervals.sort((v,D)=>v.interval.min-D.interval.min)};r.size=function(){return c.prototype.size.call(this)+this._intervals.length};r.match=function(u,w,v,D,B){if(null==this._fieldIndex&&!this._field)return this.getDefault();u=null!=this._fieldIndex?w.getComputedNumericAtIndex(this._fieldIndex):this._getValueFromField(w);if(!u&&(null===u||void 0===u||isNaN(u)))return this.getDefault();for(w=0;w<this._intervals.length;w++){const {interval:C,result:A}=this._intervals[w];v=this._isMaxInclusive?
u<=C.max:u<C.max;if(u>=C.min&&v)return A}return this.getDefault()};r._needsNormalization=function(){const u=this._normalizationInfo;return u&&(u.normalizationField||u.normalizationTotal||u.normalizationType)};r._getValueFromField=function(u){const w=u.readAttribute(this._field);if(!this._needsNormalization()||null==w)return w;const {normalizationField:v,normalizationTotal:D,normalizationType:B}=this._normalizationInfo;u=!!v&&u.readAttribute(v);if(B)switch(B){case "esriNormalizeByField":return(u||
void 0)&&w/u;case "esriNormalizeByLog":return Math.log(w)*Math.LOG10E;case "esriNormalizeByPercentOfTotal":return w/D*100;default:n.error(`Found unknown normalization type: ${B}`)}else n.error("Normalization is required, but no type was set!")};return g}(z),b=function(c){function g(u,w,v){var D=c.call(this)||this;D.type="map";D._nullResult=null;D._resultsMap=new Map;D._fieldsIndex=v;D._fields=u;D._seperator=w||"";return D}m._inheritsLoose(g,c);g.fromUVRenderer=async function(u,w,v){const D=u.fieldDelimiter,
B=[u.field];u.field2&&B.push(u.field2);u.field3&&B.push(u.field3);const C=await l.expandSymbol(u.backgroundFillSymbol,v),A=new g(B,D,u.fieldIndex);await Promise.all(u.map.map(async E=>{var G=await l.expandSymbol(E.symbol,v);G=await w.createTemplateGroup(G,C);"\x3cNull\x3e"===E.value?A.setNullResult(G):A.add(E.value,G)}));if(u=await l.expandSymbol(u.defaultSymbol,v))u=await w.createTemplateGroup(u,C),A.setDefault(u);return A};var r=g.prototype;r.setNullResult=function(u){this._nullResult=u};r.add=
function(u,w){this._resultsMap.set(u.toString(),w)};r.size=function(){return c.prototype.size.call(this)+this._resultsMap.size};r.match=function(u,w,v,D,B){if(null==this._fieldsIndex&&!this._fields)return this.getDefault();u=null!=this._fieldsIndex?w.getComputedStringAtIndex(this._fieldsIndex):this._getValueFromFields(w);if(null!==this._nullResult&&(null==u||""===u||"\x3cNull\x3e"===u))return this._nullResult;if(!u&&null==u)return this.getDefault();u=u.toString();return this._resultsMap.has(u)?this._resultsMap.get(u):
this.getDefault()};r._getValueFromFields=function(u){const w=[];for(const v of this._fields){const D=u.readAttribute(v);w.push(D)}return w.join(this._seperator)};return g}(z),a=function(c){function g(u,w,v,D){var B=c.call(this)||this;B.type="dictionary";B._groupIdCache=new h(100);B._renderer=u;B._fieldMap=u.fieldMap;B._symbolFields=u.getSymbolFields();B._templates=w;B._info=v;B._scaleFn=D;return B}m._inheritsLoose(g,c);g.fromDictionaryRenderer=async function(u,w,v){u=(await new Promise(function(B,
C){t(["../../../../../renderers/DictionaryRenderer"],function(A){B(Object.freeze({__proto__:null,"default":A}))},C)})).default.fromJSON(u.renderer);await u.fetchResources({spatialReference:v.spatialReference,fields:v.fields});const D=await p(u.scaleExpression,v);return new g(u,w,v,D)};var r=g.prototype;r._analyzeFeature=async function(u,w,v,D){u=u.readLegacyFeature();const B=this._scaleFn(u,w,v);w=this._attributeHash(u)+"-"+B;const C=this._groupIdCache.get(w);if(C)return C;v=await this._renderer.getSymbolAsync(u,
{...v,spatialReference:this._info.spatialReference,abortOptions:D,fields:this._info.fields});v=q.createSymbolSchema(v,this._renderer);D=l.expandSymbol(v,this._info,D).then(A=>{if("expanded-cim"!==A.type)return n.error(new y("mapview-bad-type",`Found unexpected type ${A.type} in dictionary response`)),null;A.hash+="-"+B;for(const E of A.layers)E.scaleFactor=B,E.templateHash+="-"+B,"text"===E.type&&"string"===typeof E.text&&-1<E.text.indexOf("[")&&(E.text=f.createLabelOverrideFunction(this._fieldMap,
E.text,E.cim.textCase));return this._templates.createTemplateGroup(A,null)});this._groupIdCache.put(w,D,1);return D};r.analyze=async function(u,w,v,D,B){u=w.getCursor();for(w=[];u.next();)w.push(this._analyzeFeature(u,v,D,B));return Promise.all(w)};r.match=function(u,w,v,D,B){return null};r._attributeHash=function(u){let w="";for(const v of this._symbolFields){const D=this._fieldMap[v];D&&(w+=u.attributes[D]+"-")}return w};return g}(z);k.DictionaryMatcher=a;k.FeatureMatcher=z;k.IntervalMatcher=d;
k.MapMatcher=b;Object.defineProperty(k,"__esModule",{value:!0})})},"esri/symbols/cim/utils":function(){define(["exports"],function(t){function k(m,z){"string"!==typeof m&&(m=String(m));switch(z){case "LowerCase":return m.toLowerCase();case "Allcaps":return m.toUpperCase();default:return m}}t._adjustTextCase=k;t.colorToArray=function(m){return[m.r,m.g,m.b,m.a]};t.createLabelOverrideFunction=function(m,z,y){const x=l=>{let q=l.length;for(;q--;)if(-1===" /-,\n".indexOf(l.charAt(q)))return!1;return!0},
f=[];var h=0;let e=-1;do e=z.indexOf("[",h),e>=h&&(e>h&&(h=z.substr(h,e-h),f.push([h,null,x(h)])),h=e+1,e=z.indexOf("]",h),e>=h&&(e>h&&(h=z.substr(h,e-h),(h=m[h])&&f.push([null,h,!1])),h=e+1));while(-1!==e);h<z.length-1&&(m=z.substr(h),f.push([m,null,x(m)]));return l=>{let q="",p=null;for(const n of f){const [d,b,a]=n;if(d)a?p=d:(p&&(q+=p,p=null),q+=d);else{const c=l.attributes[b];c&&(p&&(q+=p,p=null),q+=c)}}return k(q,y)}};t.evaluateValueOrFunction=function(m,z,y,x){return"function"===typeof m?m(z,
y,x):m};t.fromCIMColor=function(m){return m?{r:m[0],g:m[1],b:m[2],a:m[3]/255}:{r:0,g:0,b:0,a:0}};t.isCIMFill=function(m){return"CIMGradientFill"===m.type||"CIMHatchFill"===m.type||"CIMPictureFill"===m.type||"CIMSolidFill"===m.type||"CIMWaterFill"===m.type};t.isCIMMarker=function(m){return"CIMVectorMarker"===m.type||"CIMPictureMarker"===m.type||"CIMBarChartMarker"===m.type||"CIMCharacterMarker"===m.type||"CIMPieChartMarker"===m.type||"CIMStackedBarChartMarker"===m.type};t.isCIMMarkerStrokePlacement=
function(m){return"CIMMarkerPlacementAlongLineRandomSize"===m.type||"CIMMarkerPlacementAlongLineSameSize"===m.type||"CIMMarkerPlacementAlongLineVariableSize"===m.type||"CIMMarkerPlacementAtExtremities"===m.type||"CIMMarkerPlacementAtMeasuredUnits"===m.type||"CIMMarkerPlacementAtRatioPositions"===m.type||"CIMMarkerPlacementOnLine"===m.type||"CIMMarkerPlacementOnVertices"===m.type};t.isCIMStroke=function(m){return"CIMGradientStroke"===m.type||"CIMPictureStroke"===m.type||"CIMSolidStroke"===m.type};
t.resampleHermite=function(m,z,y,x,f,h,e=!0){const l=z/f;y/=h;const q=Math.ceil(l/2),p=Math.ceil(y/2);for(let b=0;b<h;b++)for(let a=0;a<f;a++){const c=4*(a+(e?h-b-1:b)*f);var n=0;let g=0,r=0,u=0,w=0,v=0,D=0;const B=(b+.5)*y;for(let C=Math.floor(b*y);C<(b+1)*y;C++){var d=Math.abs(B-(C+.5))/p;const A=(a+.5)*l;d*=d;for(let E=Math.floor(a*l);E<(a+1)*l;E++){let G=Math.abs(A-(E+.5))/q;n=Math.sqrt(d+G*G);-1<=n&&1>=n&&(n=2*n*n*n-3*n*n+1,0<n&&(G=4*(E+C*z),D+=n*m[G+3],r+=n,255>m[G+3]&&(n=n*m[G+3]/250),u+=n*
m[G],w+=n*m[G+1],v+=n*m[G+2],g+=n))}}x[c]=u/g;x[c+1]=w/g;x[c+2]=v/g;x[c+3]=D/r}};t.toCIMSymbolJSON=function(m){var z;return null==(z=m.data)?void 0:z.symbol};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/core/LRUCache":function(){define(["../chunks/_rollupPluginBabelHelpers","./MemCache"],function(t,k){return function(){function m(y,x){this._storage=new k.MemCacheStorage;this._storage.maxSize=y;x&&this._storage.registerRemoveFunc("",x)}var z=m.prototype;z.put=function(y,x,f){this._storage.put(y,
x,f,1)};z.pop=function(y){return this._storage.pop(y)};z.get=function(y){return this._storage.get(y)};z.clear=function(){this._storage.clearAll()};z.destroy=function(){this._storage.destroy()};t._createClass(m,[{key:"maxSize",get:function(){return this._storage.maxSize},set:function(y){this._storage.maxSize=y}}]);return m}()})},"esri/views/2d/arcade/callExpressionWithFeature":function(){define(["../../../core/Logger","../../../core/Error","../../../geometry/support/quantizationUtils"],function(t,
k,m){function z(x){const f={};switch(x){case "esriGeometryPoint":return(h,e,l,q)=>m.unquantizePoint(e,f,h,l,q);case "esriGeometryPolygon":return(h,e,l,q)=>m.unquantizePolygon(e,f,h,l,q);case "esriGeometryPolyline":return(h,e,l,q)=>m.unquantizePolyline(e,f,h,l,q);case "esriGeometryMultipoint":return(h,e,l,q)=>m.unquantizeMultipoint(e,f,h,l,q);default:return t.getLogger("esri.views.2d.support.arcadeOnDemand").error(new k("mapview-arcade",`Unable to handle geometryType: ${x}`)),h=>h}}const y=new Map;
return function(x,f,h,e,l){if(x.referencesGeometry()&&l){{const {transform:q,hasZ:p,hasM:n}=l;y.has(e)||y.set(e,z(e));e=y.get(e)(f.geometry,q,p,n);f={...f,geometry:e}}}f=x.repurposeFeature(f);try{return x.evaluate({...h,$feature:f})}catch(q){return t.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",q),null}}})},"esri/symbols/cim/cimSymbolUtils":function(){define(["exports","../WebStyleSymbol","../../symbols","./cimAnalyzer","./ExpandedCIM"],function(t,k,m,
z,y){const x=async(h,e)=>new y.ExpandedCIM(await z.analyzeCIMSymbol(h.data,e),h.data,h.rendererKey,h.maxVVSize),f=async(h,e,l)=>h?"cim"===h.type?x(h,e):"web-style"===h.type?(h={type:"cim",data:(await k.fromJSON(h).fetchCIMSymbol(l)).data,rendererKey:h.rendererKey,maxVVSize:h.maxVVSize},x(h,e)):h:null;t.expandSymbol=f;t.expandSymbols=async(h,e,l)=>Promise.all(h.map(q=>f(q,e,l)));Object.defineProperty(t,"__esModule",{value:!0})})},"esri/symbols/cim/cimAnalyzer":function(){define("exports ../../core/string ../../core/Logger ../../support/arcadeOnDemand ../../Color ../../core/screenUtils ./utils ../../views/2d/arcade/callExpressionWithFeature ./CIMSymbolHelper ./SDFHelper".split(" "),
function(t,k,m,z,y,x,f,h,e,l){function q(L){switch(L){case "Butt":return 0;case "Square":return 2;default:return 1}}function p(L){switch(L){case "Bevel":return 0;case "Miter":return 2;default:return 1}}function n(L){switch(L){default:return"left";case "Right":return"right";case "Center":return"center";case "Justify":return"justify"}}function d(L){switch(L){default:return"top";case "Center":return"middle";case "Baseline":return"baseline";case "Bottom":return"bottom"}}function b(L){let M="normal",S=
"normal";L&&(L=L.toLowerCase(),-1!==L.indexOf("italic")?M="italic":-1!==L.indexOf("oblique")&&(M="oblique"),-1!==L.indexOf("bold")?S="bold":-1!==L.indexOf("light")&&(S="lighter"));return{style:M,weight:S}}function a(L,M,S,Q){let U;L[M]?U=L[M]:(U={},L[M]=U);U[S]=Q}function c(L){return(L=L.markerPlacement)&&L.angleToLine?1:0}function g(L,M,S,Q,U,W){if(L){var fa=L.symbolLayers;if(fa){var Z,T=e.CIMSymbolHelper.getSize(L);"CIMPointSymbol"===L.type&&"Map"===L.angleAlignment&&(Z=1);for(var ba=fa.length;ba--;){var ha=
fa[ba];if(ha&&!1!==ha.enable){var sa=[];e.OverrideHelper.findApplicableOverrides(ha,M,sa);switch(ha.type){case "CIMSolidFill":r(ha,S,sa,Q,U);break;case "CIMPictureFill":u(ha,S,sa,Q,U);break;case "CIMHatchFill":w(ha,S,sa,Q,U);break;case "CIMGradientFill":var ua=S,O=Q,V=U,ja=k.numericHash(JSON.stringify(ha)).toString();V.push({type:"fill",templateHash:ja,materialHash:0===sa.length?ja:F(ja,ua,sa,O),cim:ha,materialOverrides:null,colorLocked:ha.colorLocked,effects:ha.effects,color:{r:128,g:128,b:128,a:1},
height:0,angle:0,offsetX:0,offsetY:0,scaleX:1});break;case "CIMSolidStroke":v(ha,S,sa,Q,U,"CIMPolygonSymbol"===L.type,T);break;case "CIMPictureStroke":D(ha,S,sa,Q,U,"CIMPolygonSymbol"===L.type,T);break;case "CIMGradientStroke":{ua=S;O=Q;V=U;ja="CIMPolygonSymbol"===L.type;var R=T,Y=ha.primitiveName,aa=void 0!==ha.width?ha.width:4,ca=q(ha.capStyle),ka=p(ha.joinStyle);const ia=ha.miterLimit,na=k.numericHash(JSON.stringify(ha)).toString();V.push({type:"line",templateHash:na,materialHash:0===sa.length?
na:F(na,ua,sa,O),cim:ha,materialOverrides:null,isOutline:ja,colorLocked:ha.colorLocked,effects:ha.effects,color:{r:128,g:128,b:128,a:1},width:J(Y,ua,"Width",O,aa),cap:J(Y,ua,"CapStyle",O,ca),join:J(Y,ua,"JoinStyle",O,ka),miterLimit:J(Y,ua,"MiterLimit",O,ia),referenceWidth:R,zOrder:H(ha.name),isDashed:!1})}break;case "CIMCharacterMarker":B(ha,S,sa,Q,U);break;case "CIMPictureMarker":if(B(ha,S,sa,Q,U))break;"CIMLineSymbol"===L.type&&(Z=c(ha));C(ha,S,sa,Q,U,Z,T);break;case "CIMVectorMarker":if(B(ha,S,
sa,Q,U))break;"CIMLineSymbol"===L.type&&(Z=c(ha));ua=S;O=Q;V=U;ja=Z;R=T;Y=W;if(ca=ha.markerGraphics){aa=0;ha.scaleSymbolsProportionally&&(ka=ha.frame)&&(aa=ka.ymax-ka.ymin);for(const ia of ca)if(ia&&(ca=ia.symbol))switch(ca.type){case "CIMPointSymbol":case "CIMLineSymbol":case "CIMPolygonSymbol":E(ha,ia,sa,ua,O,V,ja,R,aa,Y);break;case "CIMTextSymbol":A(ha,ia,ua,sa,O,V,ja,R,aa)}}break;default:N.error("Cannot analyze CIM layer",ha.type)}}}}}}function r(L,M,S,Q,U){const W=L.primitiveName,fa=f.fromCIMColor(L.color),
Z=k.numericHash(JSON.stringify(L)).toString();U.push({type:"fill",templateHash:Z,materialHash:0===S.length?Z:()=>Z,cim:L,materialOverrides:null,colorLocked:L.colorLocked,color:J(W,M,"Color",Q,fa,K),height:0,angle:0,offsetX:0,offsetY:0,scaleX:1,effects:L.effects})}function u(L,M,S,Q,U){const W=L.primitiveName,fa=L.tintColor?f.fromCIMColor(L.tintColor):{r:255,g:255,b:255,a:1},Z=k.numericHash(JSON.stringify(L)).toString(),T=k.numericHash(`${L.url}${JSON.stringify(L.colorSubstitutions)}`).toString();
U.push({type:"fill",templateHash:Z,materialHash:0===S.length?T:()=>T,cim:L,materialOverrides:null,colorLocked:L.colorLocked,effects:L.effects,color:J(W,M,"TintColor",Q,fa,K),height:J(W,M,"Height",Q,L.height),scaleX:J(W,M,"ScaleX",Q,L.scaleX),angle:J(W,M,"Rotation",Q,L.rotation),offsetX:J(W,M,"OffsetX",Q,L.offsetX),offsetY:J(W,M,"OffsetY",Q,L.offsetY)})}function w(L,M,S,Q,U){const W=["Rotation","OffsetX","OffsetY"],fa=S.filter(ha=>ha.primitiveName!==L.primitiveName&&-1===W.indexOf(ha.propertyName)),
Z=L.primitiveName,T=k.numericHash(JSON.stringify(L)).toString(),ba=k.numericHash(`${L.separation}${JSON.stringify(L.lineSymbol)}`).toString();U.push({type:"fill",templateHash:T,materialHash:0===S.length?ba:F(ba,M,fa,Q),cim:L,materialOverrides:fa,colorLocked:L.colorLocked,effects:L.effects,color:{r:255,g:255,b:255,a:1},height:J(Z,M,"Separation",Q,L.separation),scaleX:1,angle:J(Z,M,"Rotation",Q,L.rotation),offsetX:J(Z,M,"OffsetX",Q,L.offsetX),offsetY:J(Z,M,"OffsetY",Q,L.offsetY)})}function v(L,M,S,
Q,U,W,fa){const Z=k.numericHash(JSON.stringify(L)).toString(),T=L.primitiveName,ba=f.fromCIMColor(L.color),ha=void 0!==L.width?L.width:4,sa=q(L.capStyle),ua=p(L.joinStyle),O=L.miterLimit;U.push({type:"line",templateHash:Z,materialHash:0===S.length?Z:()=>Z,cim:L,materialOverrides:null,isOutline:W,colorLocked:L.colorLocked,effects:L.effects,color:J(T,M,"Color",Q,ba,K),width:J(T,M,"Width",Q,ha),cap:J(T,M,"CapStyle",Q,sa),join:J(T,M,"JoinStyle",Q,ua),miterLimit:J(T,M,"MiterLimit",Q,O),referenceWidth:fa,
zOrder:H(L.name),isDashed:!1})}function D(L,M,S,Q,U,W,fa){const Z=k.numericHash(`${L.url}${JSON.stringify(L.colorSubstitutions)}`).toString(),T=L.primitiveName,ba=f.fromCIMColor(L.tintColor),ha=void 0!==L.width?L.width:4,sa=q(L.capStyle),ua=p(L.joinStyle),O=L.miterLimit,V=k.numericHash(JSON.stringify(L)).toString();U.push({type:"line",templateHash:V,materialHash:0===S.length?Z:()=>Z,cim:L,materialOverrides:null,isOutline:W,colorLocked:L.colorLocked,effects:L.effects,color:J(T,M,"TintColor",Q,ba,K),
width:J(T,M,"Width",Q,ha),cap:J(T,M,"CapStyle",Q,sa),join:J(T,M,"JoinStyle",Q,ua),miterLimit:J(T,M,"MiterLimit",Q,O),referenceWidth:fa,zOrder:H(L.name),isDashed:!1})}function B(L,M,S,Q,U){const W=L.markerPlacement;if(!W||"CIMMarkerPlacementInsidePolygon"!==W.type)return!1;const fa=["Rotation","OffsetX","OffsetY"],Z=S.filter(ba=>ba.primitiveName!==L.primitiveName&&-1===fa.indexOf(ba.propertyName)),T=k.numericHash(JSON.stringify(L)).toString();U.push({type:"fill",templateHash:T,materialHash:0===S.length?
T:F(T,M,Z,Q),cim:L,materialOverrides:Z,colorLocked:L.colorLocked,effects:L.effects,color:{r:255,g:255,b:255,a:1},height:J(W.primitiveName,M,"StepY",Q,W.stepY),scaleX:1,angle:J(W.primitiveName,M,"GridAngle",Q,W.gridAngle),offsetX:J(W.primitiveName,M,"OffsetX",Q,W.offsetX),offsetY:J(W.primitiveName,M,"OffsetY",Q,W.offsetY)});return!0}function C(L,M,S,Q,U,W,fa){const Z=L.primitiveName,T=L.size,ba=L.scaleX,ha=L.rotation,sa=L.offsetX,ua=L.offsetY,O=f.fromCIMColor(L.tintColor),V=k.numericHash(`${L.url}${JSON.stringify(L.colorSubstitutions)}`).toString();
let ja=!1,R="";for(const Y of S)Y.primitiveName===Z&&(void 0!==Y.value?R+=`-${Y.primitiveName}-${Y.propertyName}-${JSON.stringify(Y.value)}`:Y.valueExpressionInfo&&(ja=!0));U.push({type:"marker",templateHash:k.numericHash(JSON.stringify(L)+R).toString(),materialHash:ja?()=>V:V,cim:L,materialOverrides:null,colorLocked:L.colorLocked,effects:L.effects,scaleSymbolsProportionally:!1,alignment:W,size:J(Z,M,"Size",Q,T),scaleX:J(Z,M,"ScaleX",Q,ba),rotation:J(Z,M,"Rotation",Q,ha),offsetX:J(Z,M,"OffsetX",Q,
sa),offsetY:J(Z,M,"OffsetY",Q,ua),color:J(Z,M,"TintColor",Q,O,K),anchorPoint:L.anchorPoint,isAbsoluteAnchorPoint:"Relative"!==L.anchorPointUnits,outlineColor:{r:0,g:0,b:0,a:0},outlineWidth:0,frameHeight:0,rotateClockwise:L.rotateClockwise,referenceSize:fa,sizeRatio:1,markerPlacement:L.markerPlacement})}function A(L,M,S,Q,U,W,fa,Z,T){e.OverrideHelper.findApplicableOverrides(M,Q,[]);var ba=M.geometry;if("x"in ba&&"y"in ba){var ha=M.symbol;var sa=ha.underline?"underline":ha.strikethrough?"line-through":
"none";var ua=b(ha.fontStyleName);ha.font={family:ha.fontFamilyName,decoration:sa,...ua};var O=L.frame,V=L.size/T;T=L.primitiveName;sa=(ha.height||0)*V;ua=ha.angle||0;var ja=((ha.offsetX||0)+(ba.x-.5*(O.xmin+O.xmax)))*V;ba=((ha.offsetY||0)+(ba.y-.5*(O.ymin+O.ymax)))*V;O=f.fromCIMColor(e.CIMSymbolHelper.getFillColor(ha));var R=f.fromCIMColor(e.CIMSymbolHelper.getStrokeColor(ha)),Y=e.CIMSymbolHelper.getStrokeWidth(ha);Y||(R=f.fromCIMColor(e.CIMSymbolHelper.getFillColor(ha.haloSymbol)),Y=ha.haloSize*
V);V="";for(const aa of Q)aa.primitiveName===T&&void 0!==aa.value&&(V+=`-${aa.primitiveName}-${aa.propertyName}-${JSON.stringify(aa.value)}`);Q=JSON.stringify(L.effects)+Number(L.colorLocked)+JSON.stringify(L.anchorPoint)+L.anchorPointUnits+JSON.stringify(L.markerPlacement);Q=k.numericHash(JSON.stringify(M)+Q+V).toString();W.push({type:"text",templateHash:Q,materialHash:()=>k.numericHash(JSON.stringify(ha.font)).toString(),cim:ha,materialOverrides:null,colorLocked:L.colorLocked,effects:L.effects,
alignment:fa,anchorPoint:{x:L.anchorPoint?L.anchorPoint.x:0,y:L.anchorPoint?L.anchorPoint.y:0},isAbsoluteAnchorPoint:"Relative"!==L.anchorPointUnits,fontName:ha.fontFamilyName,decoration:"none",weight:"normal",style:"normal",size:J(T,S,"Size",U,sa),angle:J(T,S,"Rotation",U,ua),offsetX:J(T,S,"OffsetX",U,ja),offsetY:J(T,S,"OffsetY",U,ba),horizontalAlignment:n(ha.horizontalAlignment),verticalAlignment:d(ha.verticalAlignment),text:J(M.primitiveName,S,"TextString",U,M.textString,f._adjustTextCase,ha.textCase),
color:O,outlineColor:R,outlineSize:Y,referenceSize:Z,sizeRatio:1,markerPlacement:L.markerPlacement})}}function E(L,M,S,Q,U,W,fa,Z,T,ba){const ha=M.geometry;if(ha){var sa=M.symbol.symbolLayers;if(sa)if(ba)G(L,M,Q,S,U,W,fa,Z,T);else for(ba=sa.length;ba--;){var ua=sa[ba];if(ua&&!1!==ua.enable)switch(ua.type){case "CIMSolidFill":case "CIMSolidStroke":{var O=l.getExtent(ha);if(!O)continue;const [R,Y,aa]=l.getSDFMetrics(O,L.frame,L.size,L.anchorPoint,"Relative"!==L.anchorPointUnits);var V="CIMSolidFill"===
ua.type;O={type:"sdf",geom:ha,asFill:V};var ja=L.primitiveName;const ca=L.size,ka=L.rotation||0,ia=L.offsetX,na=L.offsetY,qa=ua.primitiveName,ra=V?f.fromCIMColor(e.CIMSymbolHelper.getFillColor(ua)):f.fromCIMColor(e.CIMSymbolHelper.getStrokeColor(ua)),xa=V?{r:0,g:0,b:0,a:0}:f.fromCIMColor(e.CIMSymbolHelper.getStrokeColor(ua)),ya=e.CIMSymbolHelper.getStrokeWidth(ua);if(!V&&!ya)break;V=!1;let Aa="";for(const Ca of S)if(Ca.primitiveName===qa||Ca.primitiveName===ja)void 0!==Ca.value?Aa+=`-${Ca.primitiveName}-${Ca.propertyName}-${JSON.stringify(Ca.value)}`:
Ca.valueExpressionInfo&&(V=!0);ja=JSON.stringify({...L,markerGraphics:null});const Ba=k.numericHash(JSON.stringify(O)).toString();ua={type:"marker",templateHash:k.numericHash(JSON.stringify(M)+JSON.stringify(ua)+ja+Aa).toString(),materialHash:V?()=>Ba:Ba,cim:O,materialOverrides:null,colorLocked:L.colorLocked,effects:L.effects,scaleSymbolsProportionally:L.scaleSymbolsProportionally,alignment:fa,anchorPoint:{x:Y,y:aa},isAbsoluteAnchorPoint:!1,size:J(L.primitiveName,Q,"Size",U,ca),rotation:J(L.primitiveName,
Q,"Rotation",U,ka),offsetX:J(L.primitiveName,Q,"OffsetX",U,ia),offsetY:J(L.primitiveName,Q,"OffsetY",U,na),scaleX:1,frameHeight:T,rotateClockwise:L.rotateClockwise,referenceSize:Z,sizeRatio:R,color:J(qa,Q,"Color",U,ra,K),outlineColor:J(qa,Q,"Color",U,xa,K),outlineWidth:J(qa,Q,"Width",U,ya),markerPlacement:L.markerPlacement};W.push(ua);break}default:G(L,M,Q,S,U,W,fa,Z,T)}}}}function G(L,M,S,Q,U,W,fa,Z,T){M={type:L.type,enable:!0,name:L.name,colorLocked:L.colorLocked,primitiveName:L.primitiveName,anchorPoint:L.anchorPoint,
anchorPointUnits:L.anchorPointUnits,offsetX:0,offsetY:0,rotateClockwise:L.rotateClockwise,rotation:0,size:L.size,billboardMode3D:L.billboardMode3D,depth3D:L.depth3D,frame:L.frame,markerGraphics:[M],scaleSymbolsProportionally:L.scaleSymbolsProportionally,respectFrame:L.respectFrame,clippingPath:L.clippingPath,effects:L.effects};let ba=[];const ha=["Rotation","OffsetX","OffsetY"];ba=Q.filter(aa=>aa.primitiveName!==L.primitiveName||-1===ha.indexOf(aa.propertyName));var sa="";for(var ua of Q)void 0!==
ua.value&&(sa+=`-${ua.primitiveName}-${ua.propertyName}-${JSON.stringify(ua.value)}`);const [O,V,ja]=e.CIMSymbolHelper.getTextureAnchor(M);Q=L.primitiveName;ua=L.rotation||0;const R=L.offsetX||0,Y=L.offsetY||0;sa=k.numericHash(JSON.stringify(M)+sa).toString();S={type:"marker",templateHash:sa,materialHash:0===ba.length?sa:F(sa,S,ba,U),cim:M,materialOverrides:ba,colorLocked:L.colorLocked,effects:L.effects,scaleSymbolsProportionally:L.scaleSymbolsProportionally,alignment:fa,anchorPoint:{x:O,y:V},isAbsoluteAnchorPoint:!1,
size:L.size,rotation:J(Q,S,"Rotation",U,ua),offsetX:J(Q,S,"OffsetX",U,R),offsetY:J(Q,S,"OffsetY",U,Y),color:{r:0,g:0,b:0,a:0},outlineColor:{r:0,g:0,b:0,a:0},outlineWidth:0,scaleX:1,frameHeight:T,rotateClockwise:L.rotateClockwise,referenceSize:Z,sizeRatio:ja/x.pt2px(L.size),markerPlacement:L.markerPlacement};W.push(S)}function H(L){return L&&0===L.indexOf("Level_")?parseInt(L.substr(6),10):0}function K(L){if(!L||0===L.length)return null;L=(new y(L)).toRgba();return{r:L[0],g:L[1],b:L[2],a:L[3]}}function J(L,
M,S,Q,U,W,fa){if(L=M[L]){const Z=L[S];if("string"===typeof Z||"number"===typeof Z||Z instanceof Array)return W?W.call(null,Z,fa):Z;if(null!=Z&&Z instanceof z.ArcadeExpression)return(T,ba,ha)=>{T=h(Z,T,{$view:ha},Q.geometryType,ba);null!==T&&W&&(T=W.call(null,T,fa));return null!==T?T:U}}return U}function F(L,M,S,Q){for(const U of S)if(U.valueExpressionInfo){const W=M[U.primitiveName]&&M[U.primitiveName][U.propertyName];W instanceof z.ArcadeExpression&&(U.fn=(fa,Z,T)=>h(W,fa,{$view:T},Q.geometryType,
Z))}return(U,W,fa)=>{for(const Z of S)Z.fn&&(Z.value=Z.fn(U,W,fa));return k.numericHash(L+e.OverrideHelper.buildOverrideKey(S)).toString()}}const N=m.getLogger("esri.symbols.cim.cimAnalyzer");t.analyzeCIMResource=function(L,M){if(!M||0===M.length)return L;L=JSON.parse(JSON.stringify(L));e.OverrideHelper.applyOverrides(L,M);return L};t.analyzeCIMSymbol=async function(L,M,S,Q){S=S?S:[];if(!L)return S;let U;const W={};if("CIMSymbolReference"===L.type){if(U=L.symbol,L=L.primitiveOverrides){const Z=[];
for(const T of L){var fa=T.valueExpressionInfo;fa&&M?(fa=z.createRendererExpression(fa.expression,M.spatialReference,M.fields).then(ba=>{ba&&a(W,T.primitiveName,T.propertyName,ba)}),Z.push(fa)):null!=T.value&&a(W,T.primitiveName,T.propertyName,T.value)}await Promise.all(Z)}}else return N.error("Expect cim type to be 'CIMSymbolReference'"),S;switch(U.type){case "CIMPointSymbol":case "CIMLineSymbol":case "CIMPolygonSymbol":g(U,L,W,M,S,Q)}return S};Object.defineProperty(t,"__esModule",{value:!0})})},
"esri/symbols/cim/CIMSymbolHelper":function(){define("exports ../../core/Logger ../../core/mathUtils ../../Color ./CIMPlacements ./CIMSymbolDrawHelper ./packingUtils".split(" "),function(t,k,m,z,y,x,f){function h(d,b){switch(b.type){case "CIMSymbolReference":d.drawSymbol(b.symbol,{type:"point",x:0,y:0});break;case "CIMPointSymbol":d.drawSymbol(b,{type:"point",x:0,y:0});break;case "CIMVectorMarker":{const a=new y.Placement;d.drawMarker(b,a)}}return d.envelope()}const e=Math.PI,l=e/2,q=k.getLogger("esri.symbols.cim.CIMSymbolHelper");
k=function(){function d(){}d.getEnvelope=function(b){const a=new x.EnvDrawHelper;if(Array.isArray(b)){let c;for(const g of b)c?c.union(h(a,g)):c=h(a,g);return c}return h(a,b)};d.getTextureAnchor=function(b){b=this.getEnvelope(b);if(!b||0>=b.width||0>=b.height)return[0,0,0];const a=96/72,c=b.height*a+2;return[(b.x+.5*b.width)*a/(b.width*a+2),-(b.y+.5*b.height)*a/c,c]};d.rasterize=function(b,a,c,g=!0){var r=c||this.getEnvelope(a);if(!r||0>=r.width||0>=r.height)return[null,0,0,0,0];var u=96/72;const w=
(r.x+.5*r.width)*u,v=(r.y+.5*r.height)*u;b.width=r.width*u;b.height=r.height*u;c||(b.width+=2,b.height+=2);c=b.getContext("2d");u=x.Transformation.createScale(u,-u);u.translate(.5*b.width-w,.5*b.height+v);u=new x.CanvasDrawHelper(c,u);switch(a.type){case "CIMPointSymbol":u.drawSymbol(a,{type:"point",x:0,y:0});break;case "CIMVectorMarker":r=new y.Placement,u.drawMarker(a,r)}a=c.getImageData(0,0,b.width,b.height);a=new Uint8Array(a.data);if(g)for(c=0;c<a.length;c+=4)g=a[c+3]/255,a[c]*=g,a[c+1]*=g,a[c+
2]*=g;return[a,b.width,b.height,-w/b.width,-v/b.height]};d.fromSimpleMarker=function(b){var a=b.style;if("circle"===a||"esriSMSCircle"===a){var c=Math.acos(.995);var g=Math.ceil(e/c/4);0===g&&(g=1);c=l/g;g*=4;a=[];a.push([50,0]);for(let u=1;u<g;u++)a.push([50*Math.cos(u*c),-50*Math.sin(u*c)]);a.push([50,0]);c={rings:[a]};g={xmin:-50,ymin:-50,xmax:50,ymax:50}}else if("cross"===a||"esriSMSCross"===a)c={rings:[[[0,50],[0,0],[50,0],[50,-0],[0,-0],[0,-50],[-0,-50],[-0,-0],[-50,-0],[-50,0],[-0,0],[-0,50],
[0,50]]]},g={xmin:-50,ymin:-50,xmax:50,ymax:50};else if("diamond"===a||"esriSMSDiamond"===a)c={rings:[[[-50,0],[0,50],[50,0],[0,-50],[-50,0]]]},g={xmin:-50,ymin:-50,xmax:50,ymax:50};else if("square"===a||"esriSMSSquare"===a)c={rings:[[[-50,-50],[-50,50],[50,50],[50,-50],[-50,-50]]]},g={xmin:-50,ymin:-50,xmax:50,ymax:50};else if("x"===a||"esriSMSX"===a)c={rings:[[[0,0],[50,50],[50,50],[0,0],[50,-50],[50,-50],[0,-0],[-50,-50],[-50,-50],[-0,0],[-50,50],[-50,50],[0,0]]]},g={xmin:-50,ymin:-50,xmax:50,
ymax:50};else if("triangle"===a||"esriSMSTriangle"===a)g=2/3*100,a=g-100,c={rings:[[[-57.735026918962575,a],[0,g],[57.735026918962575,a],[-57.735026918962575,a]]]},g={xmin:-57.735026918962575,ymin:a,xmax:57.735026918962575,ymax:g};else if("arrow"===a||"esriSMSArrow"===a)c={rings:[[[-50,50],[50,0],[-50,-50],[-33,-20],[-33,20],[-50,50]]]},g={xmin:-50,ymin:-50,xmax:50,ymax:50};if(c&&g){var r=[{type:"CIMSolidFill",enable:!0,color:b.color}];b.outline&&r.push({type:"CIMSolidStroke",enable:!0,width:b.outline.width,
color:b.outline.color});r={type:"CIMPointSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,rotation:b.angle,size:b.size,offsetX:b.xoffset,offsetY:b.yoffset,frame:g,markerGraphics:[{type:"CIMMarkerGraphic",geometry:c,symbol:{type:"CIMPolygonSymbol",symbolLayers:r}}]}]}}return r};d.fromCIMHatchFill=function(b){const a=void 0!==b.separation?b.separation:4,c=a/2;for(var g=this._getLineSymbolPeriod(b.lineSymbol)||4;4>g;)g*=2;g/=2;return{type:"CIMVectorMarker",frame:{xmin:-g,xmax:g,ymin:-c,ymax:c},
markerGraphics:[{type:"CIMMarkerGraphic",geometry:{paths:[[[-g,0],[g,0]]]},symbol:b.lineSymbol}],size:a}};d._getLineSymbolPeriod=function(b){if(b){const a=this._getEffectsRepeat(b.effects);if(a)return a;if(b.symbolLayers)for(const c of b.symbolLayers)if((b=this._getEffectsRepeat(c.effects))||c&&(b=this._getPlacementRepeat(c.markerPlacement)))return b}return 0};d._getEffectsRepeat=function(b){if(b)for(var a of b)if(a)switch(a.type){case "CIMGeometricEffectDashes":if((b=a.dashTemplate)&&b.length){a=
0;for(const c of b)a+=c;b.length&1&&(a*=2);return a}break;case "CIMGeometricEffectWave":return a.period;default:q.error(`unsupported geometric effect type ${a.type}`)}return 0};d._getPlacementRepeat=function(b){if(b)switch(b.type){case "CIMMarkerPlacementAlongLineSameSize":case "CIMMarkerPlacementAlongLineRandomSize":case "CIMMarkerPlacementAlongLineVariableSize":if((b=b.placementTemplate)&&b.length){let a=0;for(const c of b)a+=c;b.length&1&&(a*=2);return a}}return 0};d.fromCIMInsidePolygon=function(b){var a=
b.markerPlacement;const c={type:b.type,...b,markerPlacement:null,anchorPoint:null};let g,r;!0===a.shiftOddRows?(b=a.stepX/2,g=a.stepY,r=2*a.stepY,a=[{x:-b,y:0},{x:b,y:0},{x:0,y:g},{x:0,y:-g}].map(u=>({type:"CIMMarkerGraphic",geometry:u,symbol:{type:"CIMPointSymbol",symbolLayers:[c]}}))):(b=a.stepX/2,g=a.stepY/2,r=a.stepY,a=[{type:"CIMMarkerGraphic",geometry:{x:0,y:0},symbol:{type:"CIMPointSymbol",symbolLayers:[c]}}]);return{type:"CIMVectorMarker",frame:{xmin:-b,xmax:b,ymin:-g,ymax:g},markerGraphics:a,
size:r}};d.getFillColor=function(b){if(!b)return null;switch(b.type){case "CIMPolygonSymbol":if(b.symbolLayers)for(const a of b.symbolLayers)if(b=d.getFillColor(a),null!=b)return b;break;case "CIMTextSymbol":return d.getFillColor(b.symbol);case "CIMSolidFill":return b.color}};d.getStrokeColor=function(b){if(b)switch(b.type){case "CIMPolygonSymbol":case "CIMLineSymbol":if(b.symbolLayers)for(const a of b.symbolLayers)if(b=d.getStrokeColor(a),void 0!==b)return b;break;case "CIMTextSymbol":return d.getStrokeColor(b.symbol);
case "CIMSolidStroke":return b.color}};d.getStrokeWidth=function(b){if(b)switch(b.type){case "CIMPolygonSymbol":case "CIMLineSymbol":if(b.symbolLayers)for(const a of b.symbolLayers)if(b=d.getStrokeWidth(a),void 0!==b)return b;break;case "CIMTextSymbol":return d.getStrokeWidth(b.symbol);case "CIMSolidStroke":case "CIMGradientStroke":case "CIMPictureStroke":return b.width}};d.getSize=function(b){if(b)switch(b.type){case "CIMPointSymbol":case "CIMLineSymbol":case "CIMPolygonSymbol":{let a=0;if(b.symbolLayers)for(const c of b.symbolLayers)b=
d.getSize(c),b>a&&(a=b);return a}case "CIMSolidStroke":case "CIMPictureStroke":case "CIMGradientStroke":return b.width;case "CIMCharacterMarker":case "CIMPictureMarker":case "CIMVectorMarker":return b.size}};d.getMarkerScaleRatio=function(b){if(b)switch(b.type){case "CIMVectorMarker":if(!1!==b.scaleSymbolsProportionally&&b.frame)return b.size/(b.frame.ymax-b.frame.ymin)}return 1};return d}();let p=function(){function d(){}d.rasterizeSimpleFill=function(b,a,c){"solid"!==a&&"none"!==a&&"esriSFSSolid"!==
a&&"esriSFSNull"!==a||console.error("Unexpected: style does not require rasterization");c=m.nextPowerOfTwo(Math.ceil(c));var g=this._isHorizontalOrVertical(a)?8*c:16*c;const r=2*c;b.width=g;b.height=g;const u=b.getContext("2d");u.strokeStyle="#FFFFFF";u.lineWidth=c;u.beginPath();if("vertical"===a||"cross"===a||"esriSFSCross"===a||"esriSFSVertical"===a)u.moveTo(g/2,-r),u.lineTo(g/2,g+r);if("horizontal"===a||"cross"===a||"esriSFSCross"===a||"esriSFSHorizontal"===a)u.moveTo(-r,g/2),u.lineTo(g+r,g/2);
if("forward-diagonal"===a||"diagonal-cross"===a||"esriSFSDiagonalCross"===a||"esriSFSForwardDiagonal"===a)u.moveTo(-r,-r),u.lineTo(g+r,g+r),u.moveTo(g-r,-r),u.lineTo(g+r,r),u.moveTo(-r,g-r),u.lineTo(r,g+r);if("backward-diagonal"===a||"diagonal-cross"===a||"esriSFSBackwardDiagonal"===a||"esriSFSDiagonalCross"===a)u.moveTo(g+r,-r),u.lineTo(-r,g+r),u.moveTo(r,-r),u.lineTo(-r,r),u.moveTo(g+r,g-r),u.lineTo(g-r,g+r);u.stroke();a=u.getImageData(0,0,b.width,b.height);a=new Uint8Array(a.data);for(g=0;g<a.length;g+=
4)c=a[g+3]/255,a[g]*=c,a[g+1]*=c,a[g+2]*=c;return[a,b.width,b.height]};d.rasterizeSimpleLine=function(b,a){switch(a){case "butt":a="Butt";break;case "square":a="Square";break;default:a="Round"}const c="Butt"===a;switch(b){case "dash":case "esriSLSDash":b=c?[4,3]:[3,4];break;case "dash-dot":case "esriSLSDashDot":b=c?[4,3,1,3]:[3,4,0,4];break;case "dot":case "esriSLSDot":b=c?[1,3]:[0,4];break;case "long-dash":case "esriSLSLongDash":b=c?[8,3]:[7,4];break;case "long-dash-dot":case "esriSLSLongDashDot":b=
c?[8,3,1,3]:[7,4,0,4];break;case "long-dash-dot-dot":case "esriSLSDashDotDot":b=c?[8,3,1,3,1,3]:[7,4,0,4,0,4];break;case "short-dash":case "esriSLSShortDash":b=c?[4,1]:[3,2];break;case "short-dash-dot":case "esriSLSShortDashDot":b=c?[4,1,1,1]:[3,2,0,2];break;case "short-dash-dot-dot":case "esriSLSShortDashDotDot":b=c?[4,1,1,1,1,1]:[3,2,0,2,0,2];break;case "short-dot":case "esriSLSShortDot":b=c?[1,1]:[0,2];break;case "solid":case "esriSLSSolid":case "none":q.error("Unexpected: style does not require rasterization");
b=[0,0];break;default:q.error(`Tried to rasterize SLS, but found an unexpected style: ${b}!`),b=[0,0]}return this.rasterizeDash(b,a)};d.rasterizeDash=function(b,a){var c="Butt"===a,g="Square"===a;a=!c&&!g;var r=0;for(var u of b)r+=u;u=15*r;var w=31*u;r=new Float32Array(w);var v=a?225:15;for(var D=0;D<w;++D)r[D]=v;v=w=0;D=!0;for(var B of b){w=v;v+=15*B;for(b=w;b<v;){let C=0;for(;31>C;){const A=a?(C-15)*(C-15):Math.abs(C-15);r[C*u+b]=D?c?Math.max(Math.max(w+7.5-b,A),Math.max(b-v+7.5,A)):A:a?Math.min((b-
w)*(b-w)+A,(b-v)*(b-v)+A):g?Math.min(Math.max(b-w,A),Math.max(v-b,A)):Math.min(Math.max(b-w+7.5,A),Math.max(v+7.5-b,A));C++}b++}D=!D}c=r.length;B=new Uint8Array(4*c);for(g=0;g<c;++g)f.packFloatRGBA((a?Math.sqrt(r[g]):r[g])/15,B,4*g);return[B,u,31]};d._isHorizontalOrVertical=function(b){return"vertical"===b||"horizontal"===b||"cross"===b||"esriSFSCross"===b||"esriSFSVertical"===b||"esriSFSHorizontal"===b};return d}(),n=function(){function d(){}d.findApplicableOverrides=function(b,a,c){if(a){if(b.primitiveName){let g=
!1;for(const r of c)if(r.primitiveName===b.primitiveName){g=!0;break}if(!g)for(const r of a)r.primitiveName===b.primitiveName&&c.push(r)}switch(b.type){case "CIMPointSymbol":case "CIMLineSymbol":case "CIMPolygonSymbol":if(b.effects)for(const g of b.effects)d.findApplicableOverrides(g,a,c);if(b.symbolLayers)for(const g of b.symbolLayers)d.findApplicableOverrides(g,a,c);break;case "CIMSolidStroke":case "CIMPictureStroke":case "CIMGradientStroke":case "CIMSolidFill":case "CIMPictureFill":case "CIMHatchFill":case "CIMGradientFill":case "CIMVectorMarker":case "CIMCharacterMarker":case "CIMPictureMarker":if(b.effects)for(const g of b.effects)d.findApplicableOverrides(g,
a,c);b.markerPlacement&&d.findApplicableOverrides(b.markerPlacement,a,c);if("CIMVectorMarker"===b.type){if(b.markerGraphics)for(const g of b.markerGraphics)d.findApplicableOverrides(g,a,c),d.findApplicableOverrides(g.symbol,a,c)}else"CIMCharacterMarker"===b.type?d.findApplicableOverrides(b.symbol,a,c):"CIMHatchFill"===b.type&&d.findApplicableOverrides(b.lineSymbol,a,c)}}};d.applyOverrides=function(b,a,c,g){if(a){if(b.primitiveName)for(const u of a)if(u.primitiveName===b.primitiveName){var r=(r=u.propertyName)?
r.charAt(0).toLowerCase()+r.substr(1):r;g&&g.push({cim:b,nocapPropertyName:r,value:b[r]});u.expression&&(u.value=d.toValue(u.propertyName,u.expression));if(c){let w=!1;for(const v of c)v.primitiveName===b.primitiveName&&(w=!0);w||c.push(u)}b[r]=u.value}switch(b.type){case "CIMPointSymbol":case "CIMLineSymbol":case "CIMPolygonSymbol":if(b.effects)for(const u of b.effects)d.applyOverrides(u,a,c,g);if(b.symbolLayers)for(const u of b.symbolLayers)d.applyOverrides(u,a,c,g);break;case "CIMSolidStroke":case "CIMSolidFill":case "CIMVectorMarker":if(b.effects)for(const u of b.effects)d.applyOverrides(u,
a,c,g);if("CIMVectorMarker"===b.type&&b.markerGraphics)for(const u of b.markerGraphics)d.applyOverrides(u,a,c,g),d.applyOverrides(u.symbol,a,c,g)}}};d.restoreOverrides=function(b){for(const a of b)a.cim[a.nocapPropertyName]=a.value};d.buildOverrideKey=function(b){let a="";for(const c of b)void 0!==c.value&&(a+=`${c.primitiveName}${c.propertyName}${JSON.stringify(c.value)}`);return a};d.toValue=function(b,a){return"DashTemplate"===b?a.split(" ").map(c=>Number(c)):"Color"===b?(b=(new z(a)).toRgba(),
b[3]*=255,b):a};return d}();t.CIMSymbolHelper=k;t.OverrideHelper=n;t.SymbolHelper=p;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/symbols/cim/CIMPlacements":function(){define(["exports"],function(t){let k=function(){function z(){this.setIdentity()}var y=z.prototype;y.getAngle=function(){if(null==this.rz||0===this.rz&&1!==this.rz_c&&0!==this.rz_s)this.rz=Math.atan2(this.rz_s,this.rz_c);return this.rz};y.setIdentity=function(){this.tz=this.ty=this.tx=0;this.s=1;this.rz=this.ry=this.rx=0;
this.rz_c=1;this.rz_s=0};y.setTranslate=function(x,f){this.tx=x;this.ty=f};y.setTranslateZ=function(x){this.tz=x};y.setRotateCS=function(x,f){this.rz=void 0;this.rz_c=x;this.rz_s=f};y.setRotate=function(x){this.rz=x;this.rz_s=this.rz_c=void 0};y.setRotateY=function(x){this.ry=x};y.setScale=function(x){this.s=x};y.setMeasure=function(x){this.m=x};return z}(),m=function(){function z(){}z.prototype.next=function(){return null};return z}();t.EmptyPlacementCursor=m;t.Placement=k;Object.defineProperty(t,
"__esModule",{value:!0})})},"esri/symbols/cim/CIMSymbolDrawHelper":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../core/Logger ../../geometry/support/boundsUtils ../../geometry/support/jsonUtils ../../geometry/support/aaBoundingRect ./CIMPlacements ./CIMEffects ./CIMOperators ./Rect".split(" "),function(t,k,m,z,y,x,f,h,e,l){const q=Math.PI/180,p=m.getLogger("esri.symbols.cim.CIMSymbolDrawHelper");let n=function(){function a(g){this._t=g}a.createIdentity=function(){return new a([1,
0,0,0,1,0])};var c=a.prototype;c.clone=function(){return new a(this._t.slice())};c.transform=function(g){const r=this._t;return[r[0]*g[0]+r[1]*g[1]+r[2],r[3]*g[0]+r[4]*g[1]+r[5]]};a.createScale=function(g,r){return new a([g,0,0,0,r,0])};c.scale=function(g,r){const u=this._t;u[0]*=g;u[1]*=g;u[2]*=g;u[3]*=r;u[4]*=r;u[5]*=r;return this};c.scaleRatio=function(){return Math.sqrt(this._t[0]*this._t[0]+this._t[1]*this._t[1])};a.createTranslate=function(g,r){return new a([0,0,g,0,0,r])};c.translate=function(g,
r){const u=this._t;u[2]+=g;u[5]+=r;return this};a.createRotate=function(g){const r=Math.cos(g);g=Math.sin(g);return new a([r,-g,0,g,r,0])};c.rotate=function(g){return this.multiply(a.createRotate(g))};c.multiply=function(g){const r=this._t;g=g._t;const u=r[1]*g[0]+r[4]*g[1],w=r[2]*g[0]+r[5]*g[1]+g[2],v=r[0]*g[3]+r[3]*g[4],D=r[1]*g[3]+r[4]*g[4],B=r[2]*g[3]+r[5]*g[4]+g[5];r[0]=r[0]*g[0]+r[3]*g[1];r[1]=u;r[2]=w;r[3]=v;r[4]=D;r[5]=B;return this};return a}();m=function(){function a(g){this._transfos=[];
this._sizeTransfos=[];this._transfos.push(g||n.createIdentity());this._sizeTransfos.push(g?g.scaleRatio():1)}var c=a.prototype;c.transformPt=function(g){return this._transfos[this._transfos.length-1].transform(g)};c.transformSize=function(g){return g*this._sizeTransfos[this._sizeTransfos.length-1]};c.back=function(){return this._transfos[this._transfos.length-1]};c.push=function(g,r){r=r?g.scaleRatio():1;g.multiply(this.back());this._transfos.push(g);this._sizeTransfos.push(this._sizeTransfos[this._sizeTransfos.length-
1]*r)};c.pop=function(){this._transfos.splice(-1,1);this._sizeTransfos.splice(-1,1)};c.drawSymbol=function(g,r){if(g)switch(g.type){case "CIMPointSymbol":case "CIMLineSymbol":case "CIMPolygonSymbol":this.drawMultiLayerSymbol(g,r)}};c.drawMultiLayerSymbol=function(g,r){if(g){var u=g.symbolLayers;if(u)if(g=g.effects){if(r=this.executeEffects(g,r))for(g=r.next();g;)this.drawSymbolLayers(u,g),g=r.next()}else this.drawSymbolLayers(u,r)}};c.executeEffects=function(g,r){r=new h.SimpleGeometryCursor(r);for(const u of g)(g=
e.getEffectOperator(u))&&(r=g.execute(r,u,1));return r};c.drawSymbolLayers=function(g,r){let u=g.length;for(;u--;){const v=g[u];if(v&&!1!==v.enable){var w=v.effects;if(w){if(w=this.executeEffects(w,r)){let D=w.next();for(;D;)this.drawSymbolLayer(v,D),D=w.next()}}else this.drawSymbolLayer(v,r)}}};c.drawSymbolLayer=function(g,r){switch(g.type){case "CIMSolidFill":this.drawSolidFill(r,g.color);break;case "CIMHatchFill":this.drawHatchFill(g,r);break;case "CIMSolidStroke":this.drawSolidStroke(r,g.color,
g.width,g.capStyle,g.joinStyle,g.miterLimit);break;case "CIMCharacterMarker":case "CIMPictureMarker":case "CIMVectorMarker":this.drawMarkerLayer(g,r)}};c.drawHatchFill=function(g,r){const u=this._buildHatchPolyline(g,r,1);u&&(this.pushClipPath(r),this.drawMultiLayerSymbol(g.lineSymbol,u),this.popClipPath())};c.drawMarkerLayer=function(g,r){var u=g.markerPlacement;if(u){const v=e.getPlacementOperator(u);if(v){var w="CIMMarkerPlacementInsidePolygon"===u.type;w&&this.pushClipPath(r);if(r=v.execute(r,
u,1))for(u=r.next();u;)this.drawMarker(g,u),u=r.next();w&&this.popClipPath()}}else w=new f.Placement,w.tx=r.x,w.ty=r.y,this.drawMarker(g,w)};c.drawMarker=function(g,r){switch(g.type){case "CIMCharacterMarker":case "CIMPictureMarker":this.drawPictureMarker(g,r);break;case "CIMVectorMarker":this.drawVectorMarker(g,r)}};c.drawPictureMarker=function(g,r){if(g){var u=g.size||10,w=n.createIdentity(),v=g.anchorPoint;if(v){let D=v.x;v=v.y;"Absolute"!==g.anchorPointUnits&&(D*=u,v*=u);w.translate(-D,-v)}g.rotation&&
w.rotate(g.rotation*q);w.translate(g.offsetX||0,g.offsetY||0);w.translate(r.tx,r.ty);this.push(w,!1);this.drawImage(g.url,u,g.scaleX);this.pop()}};c.drawVectorMarker=function(g,r){if(g){var u=g.markerGraphics;if(u){var w=g.size,v=g.frame,D=v?v.ymax-v.ymin:0;w=w&&D?w/D:1;D=n.createIdentity();v&&D.translate(.5*-(v.xmax+v.xmin),.5*-(v.ymax+v.ymin));var B=g.anchorPoint;if(B){let C=B.x;B=B.y;"Absolute"!==g.anchorPointUnits&&v&&(C*=v.xmax-v.xmin,B*=v.ymax-v.ymin);D.translate(-C,-B)}1!==w&&D.scale(w,w);
g.rotation&&D.rotate(g.rotation*q);D.translate(g.offsetX||0,g.offsetY||0);D.translate(r.tx,r.ty);this.push(D,g.scaleSymbolsProportionally);for(const C of u)C&&C.symbol&&C.geometry||p.error("Invalid marker graphic",C),this.drawSymbol(C.symbol,C.geometry);this.pop()}}};c._buildHatchPolyline=function(g,r,u){var w=(void 0!==g.separation?g.separation:4)*u,v=void 0!==g.rotation?g.rotation:0;if(0===w)return null;0>w&&(w=-w);for(var D=0,B=.5*w;D>B;)D-=w;for(;D<-B;)D+=w;D=x.create();z.getBoundsXY(D,r);D[0]-=
B;D[1]-=B;D[2]+=B;D[3]+=B;for(var C=[[D[0],D[1]],[D[0],D[3]],[D[2],D[3]],[D[2],D[1]]];180<v;)v-=180;for(;0>v;)v+=180;B=Math.cos(v*q);var A=Math.sin(v*q);v=-w*A;r=w*B;D=(void 0!==g.offsetX?g.offsetX*u:0)*A-(void 0!==g.offsetY?g.offsetY*u:0)*B;let E;var G=g=Number.MAX_VALUE;E=u=-Number.MAX_VALUE;for(var H of C){var K=H[0];const J=H[1];C=B*K+A*J;K=-A*K+B*J;G=Math.min(G,C);g=Math.min(g,K);E=Math.max(E,C);u=Math.max(u,K)}g=Math.floor(g/w)*w;H=B*G-A*g-v*D/w;G=A*G+B*g-r*D/w;C=B*E-A*g-v*D/w;D=A*E+B*g-r*D/
w;w=1+Math.round((u-g)/w);B=[];for(A=0;A<w;A++)H+=v,G+=r,C+=v,D+=r,B.push([[H,G],[C,D]]);return{paths:B}};return a}();let d=function(a){function c(){var r=a.call(this)||this;r.reset();return r}k._inheritsLoose(c,a);var g=c.prototype;g.reset=function(){this._xmin=this._ymin=Infinity;this._xmax=this._ymax=-Infinity;this._clipCount=0};g.envelope=function(){return new l(this._xmin,this._ymin,this._xmax-this._xmin,this._ymax-this._ymin)};g.drawSolidFill=function(r){!r||0<this._clipCount||(y.isPolygon(r)?
this._processPath(r.rings,0):y.isPolyline(r)&&this._processPath(r.paths,0))};g.drawSolidStroke=function(r,u,w){!r||0<this._clipCount||(u=.5*this.transformSize(w),y.isPolygon(r)?this._processPath(r.rings,u):y.isPolyline(r)&&this._processPath(r.paths,u))};g.pushClipPath=function(r){this.drawSolidFill(r);++this._clipCount};g.popClipPath=function(){--this._clipCount};g.drawImage=function(r,u,w){r=u/2;this._merge(this.transformPt([0,0]),r)};g._processPath=function(r,u){if(r)for(const w of r)if(r=w?w.length:
0,1<r){this._merge(this.transformPt(w[0]),u);for(let v=1;v<r;++v)this._merge(this.transformPt(w[v]),u)}};g._merge=function(r,u){r[0]-u<this._xmin&&(this._xmin=r[0]-u);r[0]+u>this._xmax&&(this._xmax=r[0]+u);r[1]-u<this._ymin&&(this._ymin=r[1]-u);r[1]+u>this._ymax&&(this._ymax=r[1]+u)};return c}(m),b=function(a){function c(r,u){u=a.call(this,u)||this;u._ctx=r;return u}k._inheritsLoose(c,a);var g=c.prototype;g.drawSolidFill=function(r,u){if(r){if(y.isPolygon(r))this._buildPath(r.rings,!0);else if(y.isPolyline(r))this._buildPath(r.paths,
!0);else return;r=this._ctx;r.fillStyle="string"===typeof u?u:"rgba("+Math.round(u[0])+","+Math.round(u[1])+","+Math.round(u[2])+","+u[3]/255+")";r.fill("evenodd")}};g.drawSolidStroke=function(r,u,w,v,D,B){if(r&&u&&0!==w){if(y.isPolygon(r))this._buildPath(r.rings,!0);else if(y.isPolyline(r))this._buildPath(r.paths,!1);else return;r=this._ctx;r.strokeStyle="string"===typeof u?u:"rgba("+Math.round(u[0])+","+Math.round(u[1])+","+Math.round(u[2])+","+u[3]/255+")";r.lineWidth=this.transformSize(w)+.5;
this._setCapStyle(v);this._setJoinStyle(D);r.miterLimit=B;r.stroke()}};g.pushClipPath=function(r){this._ctx.save();y.isPolygon(r)?this._buildPath(r.rings,!0):y.isPolyline(r)&&this._buildPath(r.paths,!0);this._ctx.clip("evenodd")};g.popClipPath=function(){this._ctx.restore()};g.drawImage=function(r,u,w){};g._buildPath=function(r,u){const w=this._ctx;w.beginPath();if(r)for(const v of r)if(r=v?v.length:0,1<r){let D=this.transformPt(v[0]);w.moveTo(D[0],D[1]);for(let B=1;B<r;++B)D=this.transformPt(v[B]),
w.lineTo(D[0],D[1]);u&&w.closePath()}};g._setCapStyle=function(r){switch(r){case "Butt":this._ctx.lineCap="butt";break;case "Round":this._ctx.lineCap="round";break;case "Square":this._ctx.lineCap="square"}};g._setJoinStyle=function(r){switch(r){case "Bevel":this._ctx.lineJoin="bevel";break;case "Round":this._ctx.lineJoin="round";break;case "Miter":this._ctx.lineJoin="miter"}};return c}(m);t.CIMSymbolDrawHelper=m;t.C_DEG_TO_RAD=q;t.CanvasDrawHelper=b;t.EnvDrawHelper=d;t.Transformation=n;Object.defineProperty(t,
"__esModule",{value:!0})})},"esri/symbols/cim/CIMEffects":function(){define(["exports","../../core/lang"],function(t,k){let m=function(){function z(y){this._geometry=y}z.prototype.next=function(){const y=this._geometry;this._geometry=null;return y};return z}();t.SimpleGeometryCursor=m;t.clone=function(z){return k.clone(z)};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/symbols/cim/CIMOperators":function(){define("exports ./effects/EffectAddControlPoints ./effects/EffectArrow ./effects/EffectBuffer ./effects/EffectCut ./effects/EffectDashes ./effects/EffectDonut ./effects/EffectJog ./effects/EffectMove ./effects/EffectOffset ./effects/EffectReverse ./effects/EffectRotate ./effects/EffectScale ./effects/EffectWave ./placements/PlacementAlongLineSameSize ./placements/PlacementAtExtremities ./placements/PlacementAtRatioPositions ./placements/PlacementInsidePolygon ./placements/PlacementOnLine ./placements/PlacementOnVertices ./placements/PlacementPolygonCenter".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d,b,a,c,g,r,u,w){t.getEffectOperator=function(v){if(!v)return null;switch(v.type){case "CIMGeometricEffectAddControlPoints":return k.EffectAddControlPoints.local();case "CIMGeometricEffectArrow":return m.EffectArrow.local();case "CIMGeometricEffectBuffer":return z.EffectBuffer.local();case "CIMGeometricEffectCut":return y.EffectCut.local();case "CIMGeometricEffectDashes":return x.EffectDashes.local();case "CIMGeometricEffectDonut":return f.EffectDonut.local();case "CIMGeometricEffectJog":return h.EffectJog.local();
case "CIMGeometricEffectMove":return e.EffectMove.local();case "CIMGeometricEffectOffset":return l.EffectOffset.local();case "CIMGeometricEffectReverse":return q.EffectReverse.local();case "CIMGeometricEffectRotate":return p.EffectRotate.local();case "CIMGeometricEffectScale":return n.EffectScale.local();case "CIMGeometricEffectWave":return d.EffectWave.local()}return null};t.getPlacementOperator=function(v){if(!v)return null;switch(v.type){case "CIMMarkerPlacementAlongLineSameSize":return b.PlacementAlongLineSameSize.local();
case "CIMMarkerPlacementAtExtremities":return a.PlacementAtExtremities.local();case "CIMMarkerPlacementAtRatioPositions":return c.PlacementAtRatioPositions.local();case "CIMMarkerPlacementInsidePolygon":return g.PlacementInsidePolygon.local();case "CIMMarkerPlacementOnLine":return r.PlacementOnLine.local();case "CIMMarkerPlacementOnVertices":return u.PlacementOnVertices.local();case "CIMMarkerPlacementPolygonCenter":return w.PlacementPolygonCenter.local()}return null};Object.defineProperty(t,"__esModule",
{value:!0})})},"esri/symbols/cim/effects/EffectAddControlPoints":function(){define(["exports","../../../core/lang","../../../geometry/support/jsonUtils","../CIMCursor"],function(t,k,m,z){let y=function(){function f(){}f.local=function(){null===f.instance&&(f.instance=new f);return f.instance};f.prototype.execute=function(h,e,l){return new x(h,e,l)};return f}();y.instance=null;let x=function(){function f(e,l,q){this._inputGeometries=e;this._angleTolerance=void 0!==l.angleTolerance?l.angleTolerance:
120;this._maxCosAngle=Math.cos((1-Math.abs(this._angleTolerance)/180)*Math.PI)}var h=f.prototype;h.next=function(){for(var e=this._inputGeometries.next();e;){if(m.isPolygon(e))return this._isClosed=!0,e=k.clone(e),this._processMultipath(e.rings),e;if(m.isPolyline(e))return this._isClosed=!1,e=k.clone(e),this._processMultipath(e.paths),e;if(m.isExtent(e)){if(this._maxCosAngle)return e;this._isClosed=!0;e=[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]];this._processPath(e);
return{rings:[e]}}e=this._inputGeometries.next()}return null};h._processMultipath=function(e){if(e)for(const l of e)this._processPath(l)};h._processPath=function(e){if(e){let l=e.length,q=e[0],p,n,d,b,a,c;this._isClosed&&++l;for(let g=1;g<l;++g){let r;r=this._isClosed&&g===l-1?e[0]:e[g];const u=r[0]-q[0],w=r[1]-q[1],v=Math.sqrt(u*u+w*w);1<g&&0<v&&0<d&&(p*u+n*w)/v/d<=this._maxCosAngle&&z.setId(q,1);1===g&&(b=u,a=w,c=v);0<v&&(q=r,p=u,n=w,d=v)}this._isClosed&&0<d&&0<c&&(p*b+n*a)/c/d<=this._maxCosAngle&&
z.setId(e[0],1)}};return f}();t.EffectAddControlPoints=y;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/symbols/cim/CIMCursor":function(){define(["exports","../../core/lang","../../geometry/support/jsonUtils","./CIMPlacements"],function(t,k,m,z){function y(d){if(d){var b=d.length;for(--b;0<b;--b)d[b][0]-=d[b-1][0],d[b][1]-=d[b-1][1]}}function x(d){if(d)for(const b of d)y(b)}function f(d){if(d){const b=d.length;for(let a=1;a<b;++a)d[a][0]+=d[a-1][0],d[a][1]+=d[a-1][1]}}function h(d){if(d)for(const b of d)f(b)}
function e(d){d&&(m.isPolygon(d)?h(d.rings):m.isPolyline(d)?h(d.paths):m.isMultipoint(d)&&f(d.points))}function l(d){d&&d.reverse()}function q(d){return{rings:[[[d.xmin,d.ymin],[d.xmin,d.ymax],[d.xmax,d.ymax],[d.xmax,d.ymin],[d.xmin,d.ymin]]]}}let p=function(){function d(b,a,c,g){this.acceptPolygon=a;this.acceptPolyline=c;this.geomUnitsPerPoint=g;this.pathIndex=this.pathCount=-1;this.iteratePath=!1;b&&(m.isPolygon(b)?a&&(this.multiPath=b.rings,this.isClosed=!0):m.isPolyline(b)?c&&(this.multiPath=
b.paths,this.isClosed=!1):m.isExtent(b)&&a&&(this.multiPath=q(b).rings,this.isClosed=!0),this.multiPath&&(this.pathCount=this.multiPath.length));this.internalPlacement=new z.Placement}d.prototype.next=function(){if(!this.multiPath)return null;for(;this.iteratePath||this.pathIndex<this.pathCount-1;){this.iteratePath||this.pathIndex++;const b=this.processPath(this.multiPath[this.pathIndex]);if(b)return b}this.pathIndex=this.pathCount=-1;return this.multiPath=null};return d}(),n=function(){function d(b,
a,c,g){this.inputGeometries=b;this.acceptPolygon=a;this.acceptPolyline=c;this.geomUnitsPerPoint=g;this.pathIndex=this.pathCount=-1;this.iteratePath=!1}d.prototype.next=function(){for(;;){if(!this.multiPath){for(var b=this.inputGeometries.next();b;)if(m.isPolygon(b)?this.acceptPolygon&&(this.multiPath=b.rings,this.isClosed=!0):m.isPolyline(b)?this.acceptPolyline&&(this.multiPath=b.paths,this.isClosed=!1):m.isExtent(b)&&this.acceptPolygon&&(this.multiPath=q(b).rings,this.isClosed=!0),this.multiPath){this.pathCount=
this.multiPath.length;this.pathIndex=-1;break}else b=this.inputGeometries.next();if(!this.multiPath)return null}for(;this.iteratePath||this.pathIndex<this.pathCount-1;)if(this.iteratePath||this.pathIndex++,b=this.processPath(this.multiPath[this.pathIndex]))return b;this.pathIndex=this.pathCount=-1;this.multiPath=null}};return d}();t.PathGeometryCursor=n;t.PathTransformationCursor=p;t.cloneAndDecodeGeometry=function(d){d=k.clone(d);e(d);return d};t.deltaDecodeGeometry=e;t.deltaEncodeGeometry=function(d){d&&
(m.isPolygon(d)?x(d.rings):m.isPolyline(d)?x(d.paths):m.isMultipoint(d)&&y(d.points))};t.getCoord2D=function(d,b,a){return[d[0]+(b[0]-d[0])*a,d[1]+(b[1]-d[1])*a]};t.getId=function(d){return d[4]};t.isClosedPath=function(d){return d&&0!==d.length?d[0][0]===d[d.length-1][0]&&d[0][1]===d[d.length-1][1]:!1};t.reverseMultipath=function(d){if(d)for(const b of d)l(b)};t.reversePath=l;t.setId=function(d,b){d[4]=b};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/symbols/cim/effects/EffectArrow":function(){define(["exports",
"../../../chunks/_rollupPluginBabelHelpers","../CIMCursor","../CurveHelper"],function(t,k,m,z){let y=function(){function f(){}f.local=function(){null===f.instance&&(f.instance=new f);return f.instance};f.prototype.execute=function(h,e,l){return new x(h,e,l)};return f}();y.instance=null;let x=function(f){function h(l,q,p){l=f.call(this,l,!1,!0)||this;l._curveHelper=new z.CurveHelper;l._width=(void 0!==q.width?q.width:5)*p;l._arrowType=void 0!==q.geometricEffectArrowType?q.geometricEffectArrowType:
"OpenEnded";l._offsetFlattenError=z.PIXEL_TOLERANCE*p;return l}k._inheritsLoose(h,f);var e=h.prototype;e.processPath=function(l){switch(this._arrowType){default:return this._constructSimpleArrow(l,!0);case "Block":return this._constructSimpleArrow(l,!1);case "Crossed":return this._constructCrossedArrow(l)}};e._constructSimpleArrow=function(l,q){var p=this._curveHelper.calculatePathLength(l),n=this._width;p<2*n&&(n=p/2);p=this._curveHelper.getSubCurve(l,0,p-n);if(!p)return null;var d=n/2;if(this._curveHelper.isEmpty(p,
!1))return null;n=this._constructOffset(p,-d);if(!n)return null;p=this._constructOffset(p,d);if(!p)return null;const b=this._constructArrowBasePoint(n,-d/2);if(!b)return null;d=this._constructArrowBasePoint(p,d/2);if(!d)return null;l=l[l.length-1];q||(this._makeControlPoint(p,!0),this._makeControlPoint(n,!0));const a=new z.PathHelper;a.addPath(p,!0);a.lineTo(d);this._makeControlPoint(a.path());a.lineTo(l);this._makeControlPoint(a.path());a.lineTo(b);this._makeControlPoint(a.path());a.addPath(n,!1);
return q?{paths:[a.path()]}:(a.close(),{rings:[a.path()]})};e._constructCrossedArrow=function(l){var q=this._curveHelper.calculatePathLength(l),p=this._width;q<3.732050807568877*p&&(p=q/3.732050807568877);var n=this._curveHelper.getSubCurve(l,0,q-2.732050807568877*p);if(!n)return null;var d=p/2;if(this._curveHelper.isEmpty(n,!1))return null;const b=this._constructOffset(n,d);if(!b)return null;n=this._constructOffset(n,-d);if(!n)return null;q=this._curveHelper.getSubCurve(l,0,q-p);if(!q||this._curveHelper.isEmpty(q,
!1))return null;p=this._constructOffset(q,d);if(!p)return null;var a=this._constructOffset(q,-d);if(!a)return null;q=p[p.length-1];p=this._constructArrowBasePoint(p,d/2);if(!p)return null;const c=a[a.length-1];d=this._constructArrowBasePoint(a,-d/2);if(!d)return null;l=l[l.length-1];this._makeControlPoint(b,!1);this._makeControlPoint(n,!1);a=new z.PathHelper;a.addPath(b,!0);this._makeControlPoint(a.path());a.lineTo(c);a.lineTo(d);this._makeControlPoint(a.path());a.lineTo(l);this._makeControlPoint(a.path());
a.lineTo(p);this._makeControlPoint(a.path());a.lineTo(q);this._makeControlPoint(a.path());a.addPath(n,!1);return{paths:[a.path()]}};e._constructOffset=function(l,q){return this._curveHelper.offset(l,q,"Rounded",4,this._offsetFlattenError)};e._constructArrowBasePoint=function(l,q){if(!l||2>l.length)return null;var p=l[l.length-2];l=l[l.length-1];p=[l[0]-p[0],l[1]-p[1]];this._curveHelper.normalize(p);return[l[0]+p[1]*q,l[1]-p[0]*q]};e._makeControlPoint=function(l,q=!1){q?m.setId(l[0],1):m.setId(l[l.length-
1],1)};return h}(m.PathGeometryCursor);t.EffectArrow=y;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/symbols/cim/CurveHelper":function(){define(["exports"],function(t){let k=function(){function z(){this._path=[]}var y=z.prototype;y.path=function(){return this._path};y.addPath=function(x,f){f||x.reverse();Array.prototype.push.apply(this._path,x);f||x.reverse()};z.mergePath=function(x,f){f&&Array.prototype.push.apply(x,f)};y.startPath=function(x){this._path.push(x)};y.lineTo=function(x){this._path.push(x)};
y.close=function(){const x=this._path;1<x.length&&(x[0][0]!==x[x.length-1][0]||x[0][1]!==x[x.length-1][1])&&x.push([x[0][0],x[0][1]])};return z}(),m=function(){function z(x,f){}var y=z.prototype;y.normalize=function(x){const f=Math.sqrt(x[0]*x[0]+x[1]*x[1]);x[0]/=f;x[1]/=f};y.calculateLength=function(x,f){const h=f[0]-x[0];x=f[1]-x[1];return Math.sqrt(h*h+x*x)};y.calculateSegLength=function(x,f){return this.calculateLength(x[f],x[f+1])};y.calculatePathLength=function(x){let f=0;const h=x?x.length:
0;for(let e=0;e<h-1;++e)f+=this.calculateSegLength(x,e);return f};y.calculatePathArea=function(x){let f=0;const h=x?x.length:0;for(let e=0;e<h-1;++e)f+=(x[e+1][0]-x[e][0])*(x[e+1][1]+x[e][1]);return f/2};y.getCoord2D=function(x,f,h){return[x[0]+(f[0]-x[0])*h,x[1]+(f[1]-x[1])*h]};y.getSegCoord2D=function(x,f,h){return this.getCoord2D(x[f],x[f+1],h)};y.getAngle=function(x,f,h){return Math.atan2(f[1]-x[1],f[0]-x[0])};y.getSegAngle=function(x,f,h){return this.getAngle(x[f],x[f+1],h)};y.getAngleCS=function(x,
f,h){h=f[0]-x[0];x=f[1]-x[1];f=Math.sqrt(h*h+x*x);return 0<f?[h/f,x/f]:[1,0]};y.getSegAngleCS=function(x,f,h){return this.getAngleCS(x[f],x[f+1],h)};y.cut=function(x,f,h,e){h=0>=h?x[f]:this.getSegCoord2D(x,f,h);x=1<=e?x[f+1]:this.getSegCoord2D(x,f,e);return[h,x]};y.addSegment=function(x,f,h){h&&x.push(f[0]);x.push(f[1])};y.getSubCurve=function(x,f,h){const e=[];return this.appendSubCurve(e,x,f,h)?e:null};y.appendSubCurve=function(x,f,h,e){const l=f?f.length-1:0;let q=0,p=!0,n=0;for(;n<l;){const b=
this.calculateSegLength(f,n);if(0!==b){if(p){if(q+b>h){var d=(h-q)/b;let a=1,c=!1;q+b>=e&&(a=(e-q)/b,c=!0);(d=this.cut(f,n,d,a))&&this.addSegment(x,d,p);if(c)break;p=!1}}else{if(q+b>e){(f=this.cut(f,n,0,(e-q)/b))&&this.addSegment(x,f,p);break}this.addSegment(x,[f[n],f[n+1]],p)}q+=b}++n}return!0};y.getCIMPointAlong=function(x,f){const h=x?x.length-1:0;let e=0,l=-1;for(;l<h;){++l;const q=this.calculateSegLength(x,l);if(0!==q){if(e+q>f)return this.getCoord2D(x[l],x[l+1],(f-e)/q);e+=q}}return null};y.isEmpty=
function(x,f){if(!x||1>=x.length)return!0;const h=x?x.length-1:0;let e=-1;for(;e<h;)if(++e,x[e+1][0]!==x[e][0]||x[e+1][1]!==x[e][1]||f&&x[e+1][2]!==x[e][2])return!1;return!0};y.offset=function(x,f,h,e,l){if(!x||2>x.length)return null;l=x.length;const q=x[0][0]===x[l-1][0]&&x[0][1]===x[l-1][1];if(q){if(3>x.length)return null;--l}const p=[];var n=q?x[l-1]:null;let d=x[0];for(let g=0;g<l;g++){const r=g===l-1?q?x[0]:null:x[g+1];if(n)if(r){var b=[r[0]-d[0],r[1]-d[1]];this.normalize(b);n=[d[0]-n[0],d[1]-
n[1]];this.normalize(n);var a=n[0]*b[1]-n[1]*b[0],c=n[0]*b[0]+n[1]*b[1];if(0<=a===0>=f)b=[b[0]-n[0],b[1]-n[1]],this.normalize(b),n=-Math.abs(f)/Math.sqrt((1+c)/2),p.push([d[0]-b[0]*n,d[1]-b[1]*n]);else switch(h){case "Mitered":if(c=Math.sqrt((1+c)/2),0<c&&1/c<e){b=[b[0]-n[0],b[1]-n[1]];this.normalize(b);n=Math.abs(f)/c;p.push([d[0]-b[0]*n,d[1]-b[1]*n]);break}case "Bevelled":p.push([d[0]+n[1]*f,d[1]-n[0]*f]);p.push([d[0]+b[1]*f,d[1]-b[0]*f]);break;case "Rounded":p.push([d[0]+n[1]*f,d[1]-n[0]*f]);c=
.2;for(a=1;5>a;a++,c+=.2){const u=[n[1]*(1-c)+b[1]*c,-n[0]*(1-c)-b[0]*c];this.normalize(u);p.push([d[0]+u[0]*f,d[1]+u[1]*f])}p.push([d[0]+b[1]*f,d[1]-b[0]*f]);break;default:0>a?(p.push([d[0]+(n[1]+n[0])*f,d[1]+(n[1]-n[0])*f]),p.push([d[0]+(b[1]-b[0])*f,d[1]-(b[0]+b[1])*f])):(c=Math.sqrt((1+Math.abs(c))/2),b=[b[0]-n[0],b[1]-n[1]],this.normalize(b),n=f/c,p.push([d[0]-b[0]*n,d[1]-b[1]*n]))}}else b=[d[0]-n[0],d[1]-n[1]],this.normalize(b),p.push([d[0]+b[1]*f,d[1]-b[0]*f]);else b=[r[0]-d[0],r[1]-d[1]],
this.normalize(b),p.push([d[0]+b[1]*f,d[1]-b[0]*f]);n=d;d=r}q&&p.push([p[0][0],p[0][1]]);return p};return z}();t.CurveHelper=m;t.PIXEL_TOLERANCE=.03;t.PathHelper=k;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/symbols/cim/effects/EffectBuffer":function(){define(["exports","../../../geometry/support/jsonUtils","../CurveHelper"],function(t,k,m){let z=function(){function x(){}x.local=function(){null===x.instance&&(x.instance=new x);return x.instance};x.prototype.execute=function(f,h,e){return new y(f,
h,e)};return x}();z.instance=null;let y=function(){function x(f,h,e){this._inputGeometries=f;this._curveHelper=new m.CurveHelper;this._size=(void 0!==h.size?h.size:1)*e;this._offsetFlattenError=m.PIXEL_TOLERANCE*e}x.prototype.next=function(){let f=this._inputGeometries.next();for(;f;){if(k.isExtent(f))if(0<this._size){var h=this._curveHelper.offset([[f.xmin,f.ymin],[f.xmin,f.ymax],[f.xmax,f.ymax],[f.xmax,f.ymin],[f.xmin,f.ymin]],this._size,"Rounded",4,this._offsetFlattenError);if(h)return{rings:[h]}}else if(0>
this._size){if(0<Math.min(f.xmax-f.xmin,f.ymax-f.ymin)+2*this._size)return{xmin:f.xmin-this._size,xmax:f.xmax+this._size,ymin:f.ymin-this._size,ymax:f.ymax+this._size}}else return f;if(k.isPolygon(f)){if(0===this._size)return f;h=[];for(const l of f.rings){var e=this._curveHelper.offset(l,this._size,"Rounded",4,this._offsetFlattenError);e&&h.push(e)}if(h.length)return{rings:h}}if(k.isPolyline(f)&&0<this._size){h=[];for(const l of f.paths)if(l&&1<l.length){e=this._curveHelper.offset(l,this._size,"Rounded",
4,this._offsetFlattenError);const q=this._curveHelper.offset(l,-this._size,"Rounded",4,this._offsetFlattenError);if(e&&q){for(let p=q.length-1;0<=p;p--)e.push(q[p]);e.push([e[0][0],e[0][1]]);h.push(e)}}if(h.length)return{rings:h}}k.isPoint(f);f=this._inputGeometries.next()}return null};return x}();t.EffectBuffer=z;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/symbols/cim/effects/EffectCut":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../CIMCursor","../CurveHelper"],
function(t,k,m,z){let y=function(){function f(){}f.local=function(){null===f.instance&&(f.instance=new f);return f.instance};f.prototype.execute=function(h,e,l){return new x(h,e,l)};return f}();y.instance=null;let x=function(f){function h(e,l,q){e=f.call(this,e,!0,!0)||this;e._curveHelper=new z.CurveHelper;e._beginCut=(void 0!==l.beginCut?l.beginCut:1)*q;e._endCut=(void 0!==l.endCut?l.endCut:1)*q;e._middleCut=(void 0!==l.middleCut?l.middleCut:0)*q;e._invert=void 0!==l.invert?l.invert:!1;0>e._beginCut&&
(e._beginCut=0);0>e._endCut&&(e._endCut=0);0>e._middleCut&&(e._middleCut=0);return e}k._inheritsLoose(h,f);h.prototype.processPath=function(e){var l=this._beginCut;const q=this._endCut,p=this._middleCut,n=this._curveHelper.calculatePathLength(e),d=[];if(!this._invert)0===l&&0===q&&0===p?d.push(e):l+q+p>=n||(0===p?(e=this._curveHelper.getSubCurve(e,l,n-q))&&d.push(e):((l=this._curveHelper.getSubCurve(e,l,.5*(n-p)))&&d.push(l),(l=this._curveHelper.getSubCurve(e,.5*(n+p),n-q))&&d.push(l)));else if(0!==
l||0!==q||0!==p)l+q+p>=n?d.push(e):((l=this._curveHelper.getSubCurve(e,0,l))&&d.push(l),(l=this._curveHelper.getSubCurve(e,.5*(n-p),.5*(n+p)))&&d.push(l),(l=this._curveHelper.getSubCurve(e,n-q,q))&&d.push(l));return 0===d.length?null:{paths:d}};return h}(m.PathGeometryCursor);t.EffectCut=y;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/symbols/cim/effects/EffectDashes":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../CIMCursor","../CurveHelper","../GeometryWalker"],
function(t,k,m,z,y){let x=function(){function h(){}h.local=function(){null===h.instance&&(h.instance=new h);return h.instance};h.prototype.execute=function(e,l,q){return new f(e,l,q)};return h}();x.instance=null;let f=function(h){function e(l,q,p){l=h.call(this,l,!0,!0)||this;l._walker=new y.GeometryWalker;l._walker.updateTolerance(p);l._endings=q.lineDashEnding;l._customDashPos=void 0!==q.offsetAlongLine?q.offsetAlongLine*p:0;l._offsetAtEnd=void 0!==q.customEndingOffset?q.customEndingOffset*p:0;
l._pattern=new y.DashPattern;l._pattern.init(q.dashTemplate,!0);l._pattern.scale(p);return l}k._inheritsLoose(e,h);e.prototype.processPath=function(l){if(0===this._pattern.length())return this.iteratePath=!1,{paths:[l]};if(!this.iteratePath){var q=!0;switch(this._endings){default:this._pattern.extPtGap=0;break;case "FullPattern":this.isClosed||(this._pattern.extPtGap=.5*this._pattern.firstValue());break;case "FullGap":this.isClosed||(this._pattern.extPtGap=.5*this._pattern.lastValue());break;case "NoConstraint":this.isClosed||
(q=!1);break;case "Custom":this.isClosed||(this._pattern.extPtGap=.5*this._offsetAtEnd)}var p=this._walker.calculatePathLength(l);if(this._pattern.isEmpty()||p<.1*this._pattern.length()||!this._walker.init(l,this._pattern,q))return{paths:[l]}}if(this.iteratePath)l=this._pattern.nextValue();else{switch(this._endings){default:q=.5*this._pattern.firstValue();break;case "HalfGap":q=.5*-this._pattern.lastValue();break;case "FullGap":q=-this._pattern.lastValue();break;case "FullPattern":q=0;break;case "NoConstraint":case "Custom":q=
-this._customDashPos}l=q/this._pattern.length();l-=Math.floor(l);q=l*this._pattern.length();this._pattern.reset();l=this._pattern.nextValue();for(p=!1;q>=l;)q-=l,l=this._pattern.nextValue(),p=!p;l-=q;p?(this._walker.nextPosition(l),l=this._pattern.nextValue()):this.isClosed&&(this._firstCurve=this._walker.nextCurve(l),l=this._pattern.nextValue(),this._walker.nextPosition(l),l=this._pattern.nextValue())}(q=this._walker.nextCurve(l))?this._walker.isPathEnd()?(this.iteratePath=!1,this._firstCurve&&(this._firstCurve.splice(0,
1),z.PathHelper.mergePath(q,this._firstCurve),this._firstCurve=null)):(l=this._pattern.nextValue(),!this._walker.nextPosition(l)||this._walker.isPathEnd()?(this.iteratePath=!1,this._firstCurve&&(q=this._firstCurve,this._firstCurve=null)):this.iteratePath=!0):(this.iteratePath=!1,q=this._firstCurve,this._firstCurve=null);return{paths:[q]}};return e}(m.PathGeometryCursor);t.EffectDashes=x;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/symbols/cim/GeometryWalker":function(){define(["exports",
"../../chunks/_rollupPluginBabelHelpers","./CIMCursor","./CurveHelper"],function(t,k,m,z){let y=function(){function h(){this._values=[];this._currentValue=this._length=this.ctrlPtGap=this.extPtGap=0}var e=h.prototype;e.isEmpty=function(){return 0===this._values.length};e.size=function(){return this._values.length};e.init=function(l,q,p=!0){this._setEmpty();if(!l||0===l.length)return!1;for(let n=0;n<l.length;n++){let d=Math.abs(l[n]);p&&1E-7>d&&(d=1E-7);this._values.push(d);this._length+=d}q&&l.length&
1&&(this._length*=2);if(0===this._length)return!1;this.ctrlPtGap=this.extPtGap=0;this._currentValue=-1;return!0};e.scale=function(l){const q=this._values?this._values.length:0;for(let p=0;p<q;++p)this._values[p]*=l;this._length*=l;this.extPtGap*=l;this.ctrlPtGap*=l};e.addValue=function(l){this._length+=l;this._values.push(l)};e.firstValue=function(){return this._values[0]};e.lastValue=function(){return this._values[this._values.length-1]};e.nextValue=function(){this._currentValue++;this._currentValue===
this._values.length&&(this._currentValue=0);return this._values[this._currentValue]};e.reset=function(){this._currentValue=-1};e.length=function(){return this._length};e._setEmpty=function(){this.extPtGap=this.ctrlPtGap=this._length=0;this._currentValue=-1;this._values.length=0};return h}(),x=function(){function h(){this.reset()}var e=h.prototype;e.reset=function(){this.segment=-1;this.abscissa=this.segmentLength=0;this.isPartEnd=this.isPathEnd=!1};e.isValid=function(){return-1!==this.segment};e.copyTo=
function(l){l.segment=this.segment;l.segmentLength=this.segmentLength;l.abscissa=this.abscissa;l.isPathEnd=this.isPathEnd;l.isPartEnd=this.isPartEnd};return h}(),f=function(h){function e(q=0,p=!1){q=h.call(this,q,p)||this;q._tolerance=z.PIXEL_TOLERANCE;q._currentPosition=new x;return q}k._inheritsLoose(e,h);var l=e.prototype;l.updateTolerance=function(q){this._tolerance=z.PIXEL_TOLERANCE*q};l.init=function(q,p,n=!0){n?(this._patternLength=p.length(),this._partExtPtGap=p.extPtGap,this._partCtrlPtGap=
p.ctrlPtGap):this._partCtrlPtGap=this._partExtPtGap=this._patternLength=0;this._currentPosition.reset();this._partSegCount=0;this._path=q;this._seg=-1;return this.setPosAtNextPart()};l.curPositionIsValid=function(){return this._currentPosition.isValid()};l.nextPosition=function(q,p=0){const n=new x;if(!this._nextPosition(q,n,null,p))return!1;n.copyTo(this._currentPosition);return!0};l.curPointAndAngle=function(q){q.pt=this._getPoint(this._currentPosition);const [p,n]=this._getAngle(this._currentPosition);
q.ca=p;q.sa=n};l.nextPointAndAngle=function(q,p,n=0){const d=new x;if(!this._nextPosition(q,d,null,n))return!1;d.copyTo(this._currentPosition);p.pt=this._getPoint(d);const [b,a]=this._getAngle(d);p.ca=b;p.sa=a;return!0};l.nextCurve=function(q){if(0===q)return null;const p=[],n=new x;if(!this._nextPosition(q,n,p,1))return null;n.copyTo(this._currentPosition);return p};l.isPathEnd=function(){return this._currentPosition.isPathEnd};l.getPathEnd=function(){if(-1===this._currentPosition.segment)throw Error("missing segment");
return this._path[this._currentPosition.segment+1]};l._nextPosition=function(q,p,n,d){if(this._currentPosition.isPathEnd)return!1;var b=this._currentPosition.abscissa;0<this._currentPosition.segmentLength&&(b/=this._currentPosition.segmentLength);for(this._currentPosition.copyTo(p);p.abscissa+q*this._partLengthRatio>p.segmentLength+this._tolerance;)if(n&&(0===n.length&&(0===b?(b=this._path[p.segment],n.push([b[0],b[1]])):n.push(this.getSegCoord2D(this._path,p.segment,b))),b=this._path[p.segment+1],
n.push([b[0],b[1]])),b=0,q-=(p.segmentLength-p.abscissa)/this._partLengthRatio,this._partSegCount)p.segment=this.nextSegment(),p.segmentLength=this.calculateSegLength(this._path,p.segment),p.abscissa=0,this._partSegCount--;else{if(!this.setPosAtNextPart()){if(0===d)return!1;p.segmentLength=this.calculateSegLength(this._path,p.segment);p.isPartEnd=!0;1===d?(p.abscissa=p.segmentLength,p.isPathEnd=!0):p.abscissa=p.segmentLength+q;return!0}this._currentPosition.copyTo(p)}p.abscissa+=q*this._partLengthRatio;
n&&(0===n.length&&(0===b?(q=this._path[p.segment],n.push([q[0],q[1]])):n.push(this.getSegCoord2D(this._path,p.segment,b))),q=p.abscissa/p.segmentLength,1===q?(q=this._path[p.segment+1],n.push([q[0],q[1]])):n.push(this.getSegCoord2D(this._path,p.segment,q)));!this._partSegCount&&Math.abs(p.abscissa-p.segmentLength)<this._tolerance&&(p.isPathEnd=this._partIsLast,p.isPartEnd=!0);return!0};l._getPoint=function(q){if(-1===q.segment)throw Error("missing segment");return this.getSegCoord2D(this._path,q.segment,
0>=q.segmentLength?0:q.abscissa/q.segmentLength)};l._getAngle=function(q){if(-1===q.segment)throw Error("missing segment");return this.getSegAngleCS(this._path,q.segment,0>=q.segmentLength?0:q.abscissa/q.segmentLength)};l.setPosAtNextPart=function(){for(;this._partSegCount;)this.hasNextSegment()&&this.nextSegment(),this._partSegCount--;if(!this.hasNextSegment())return!1;this._partLength=0;this._partIsLast=!0;for(this._partSegCount=0;this.hasNextSegment();)if(this._partLength+=this.calculateSegLength(this._path,
this.nextSegment()),this._partSegCount++,1===m.getId(this._path[this.getEndPointIndex()])){this._partIsLast=!this.hasNextSegment();break}for(var q=this._partSegCount;q;)this.previousSegment(),--q;this._currentPosition.segment=this.nextSegment();this._currentPosition.segmentLength=this.calculateSegLength(this._path,this._currentPosition.segment);this._currentPosition.abscissa=0;this._currentPosition.isPathEnd=this._currentPosition.isPartEnd=!1;--this._partSegCount;q=this.getStartPointIndex();this._ctrlPtBegin=
1===m.getId(this._path[q]);q=q+this._partSegCount+1;q>=this._path.length&&(q=0);this._ctrlPtEnd=1===m.getId(this._path[q]);if(0<this._patternLength){q=this._ctrlPtBegin?this._partCtrlPtGap:this._partExtPtGap;const p=this._ctrlPtEnd?this._partCtrlPtGap:this._partExtPtGap;let n=Math.round((this._partLength-(q+p))/this._patternLength);0>=n&&(n=0<q+p?0:1);this._partLengthRatio=this._partLength/(q+p+n*this._patternLength);.01>this._partLengthRatio&&(this._partLengthRatio=1)}else this._partLengthRatio=
1;return!0};l.hasNextSegment=function(){return this._seg<this._path.length-2};l.previousSegment=function(){return--this._seg};l.nextSegment=function(){return++this._seg};l.getStartPointIndex=function(){return this._seg};l.getEndPointIndex=function(){return this._seg+1};return e}(z.CurveHelper);t.DashPattern=y;t.GeometryWalker=f;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/symbols/cim/effects/EffectDonut":function(){define(["exports","../../../geometry/support/jsonUtils","../CurveHelper"],
function(t,k,m){let z=function(){function x(){}x.local=function(){null===x.instance&&(x.instance=new x);return x.instance};x.prototype.execute=function(f,h,e){return new y(f,h,e)};return x}();z.instance=null;let y=function(){function x(f,h,e){this._inputGeometries=f;this._curveHelper=new m.CurveHelper;this._width=(void 0!==h.width?h.width:2)*e;switch(h.method){default:this._method="Mitered";break;case "Bevelled":this._method="Bevelled";break;case "Rounded":case "TrueBuffer":this._method="Rounded";
break;case "Square":this._method="Square"}this._option=h.option;this._offsetFlattenError=m.PIXEL_TOLERANCE*e}x.prototype.next=function(){for(var f=this._inputGeometries.next();f;){if(k.isExtent(f)&&0<this._width){if(0>Math.min(f.xmax-f.xmin,f.ymax-f.ymin)-2*this._width)return f;var h=[];h.push([[f.xmin,f.ymin],[f.xmin,f.ymax],[f.xmax,f.ymax],[f.xmax,f.ymin],[f.xmin,f.ymin]]);h.push([[f.xmin+this._width,f.ymin+this._width],[f.xmax-this._width,f.ymin+this._width],[f.xmax-this._width,f.ymax-this._width],
[f.xmin+this._width,f.ymax-this._width],[f.xmin+this._width,f.ymin+this._width]]);return{rings:h}}if(k.isPolygon(f)&&0<this._width){h=[];for(const e of f.rings){f=this._curveHelper.calculatePathLength(e);const l=this._curveHelper.offset(e,this._width,this._method,4,this._offsetFlattenError);l&&(0>f&&l.reverse(),h.push(l))}if(h.length)return{rings:h}}f=this._inputGeometries.next()}return null};return x}();t.EffectDonut=z;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/symbols/cim/effects/EffectJog":function(){define(["exports",
"../../../chunks/_rollupPluginBabelHelpers","../CIMCursor","../CurveHelper"],function(t,k,m,z){let y=function(){function f(){}f.local=function(){null===f.instance&&(f.instance=new f);return f.instance};f.prototype.execute=function(h,e,l){return new x(h,e,l)};return f}();y.instance=null;let x=function(f){function h(e,l,q){e=f.call(this,e,!1,!0)||this;e._curveHelper=new z.CurveHelper;e._length=(void 0!==l.length?l.length:20)*q;e._angle=void 0!==l.angle?l.angle:225;e._position=void 0!==l.position?l.position:
50;0>e._length&&(e._length=-e._length);20>e._position&&(e._position=20);80<e._position&&(e._position=80);e._mirror=!1;return e}k._inheritsLoose(h,f);h.prototype.processPath=function(e){if(this._curveHelper.isEmpty(e,!1))return null;const l=e[0];e=e[e.length-1];this._curveHelper.normalize([e[0]-l[0],e[1]-l[1]]);const q=[l[0]+(e[0]-l[0])*this._position/100,l[1]+(e[1]-l[1])*this._position/100],p=Math.cos((90-this._angle)/180*Math.PI);let n=Math.sin((90-this._angle)/180*Math.PI);this._mirror&&(n=-n);
this._mirror=!this._mirror;return{paths:[[l,[q[0]-this._length/2*p,q[1]-this._length/2*n],[q[0]+this._length/2*p,q[1]+this._length/2*n],e]]}};return h}(m.PathGeometryCursor);t.EffectJog=y;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/symbols/cim/effects/EffectMove":function(){define(["exports","../../../core/lang","../../../geometry/support/jsonUtils"],function(t,k,m){let z=function(){function x(){}x.local=function(){null===x.instance&&(x.instance=new x);return x.instance};x.prototype.execute=
function(f,h,e){return new y(f,h,e)};return x}();z.instance=null;let y=function(){function x(h,e,l){this._inputGeometries=h;this._offsetX=void 0!==e.offsetX?e.offsetX*l:0;this._offsetY=void 0!==e.offsetY?-e.offsetY*l:0}var f=x.prototype;f.next=function(){for(var h=this._inputGeometries.next();h;){if(m.isExtent(h))return{xmin:h.xmin+this._offsetX,xmax:h.xmax+this._offsetX,ymin:h.ymin+this._offsetY,ymax:h.ymax+this._offsetY};if(m.isPolygon(h))return h=k.clone(h),this._moveMultipath(h.rings,this._offsetX,
this._offsetY),h;if(m.isPolyline(h))return h=k.clone(h),this._moveMultipath(h.paths,this._offsetX,this._offsetY),h;if(m.isMultipoint(h))return h=k.clone(h),this._movePath(h.points,this._offsetX,this._offsetY),h;if(m.isPoint(h))return{x:h.x+this._offsetX,y:h.y+this._offsetY};h=this._inputGeometries.next()}return null};f._moveMultipath=function(h,e,l){if(h)for(const q of h)this._movePath(q,e,l)};f._movePath=function(h,e,l){if(h)for(const q of h)q[0]+=e,q[1]+=l};return x}();t.EffectMove=z;Object.defineProperty(t,
"__esModule",{value:!0})})},"esri/symbols/cim/effects/EffectOffset":function(){define(["exports","../../../geometry/support/jsonUtils","../CurveHelper"],function(t,k,m){let z=function(){function x(){}x.local=function(){null===x.instance&&(x.instance=new x);return x.instance};x.prototype.execute=function(f,h,e){return new y(f,h,e)};return x}();z.instance=null;let y=function(){function x(f,h,e){this._inputGeometries=f;this._curveHelper=new m.CurveHelper;this._offset=(void 0!==h.offset?h.offset:1)*e;
this._method=h.method;this._option=h.option;this._offsetFlattenError=m.PIXEL_TOLERANCE*e}x.prototype.next=function(){for(var f=this._inputGeometries.next();f;){if(0===this._offset)return f;if(k.isExtent(f)){if("Rounded"===this._method&&0<this._offset){var h=this._curveHelper.offset([[f.xmin,f.ymin],[f.xmin,f.ymax],[f.xmax,f.ymax],[f.xmax,f.ymin],[f.xmin,f.ymin]],this._offset,this._method,4,this._offsetFlattenError);return h?{rings:[h]}:null}if(0<Math.min(f.xmax-f.xmin,f.ymax-f.ymin)+2*this._offset)return{xmin:f.xmin-
this._offset,xmax:f.xmax+this._offset,ymin:f.ymin-this._offset,ymax:f.ymax+this._offset}}if(k.isPolygon(f)){var e=[];for(h of f.rings){const l=this._curveHelper.offset(h,this._offset,this._method,4,this._offsetFlattenError);l&&e.push(l)}if(e.length)return{rings:e}}if(k.isPolyline(f)){e=[];for(const l of f.paths)(f=this._curveHelper.offset(l,this._offset,this._method,4,this._offsetFlattenError))&&e.push(f);if(e.length)return{paths:e}}f=this._inputGeometries.next()}return null};return x}();t.EffectOffset=
z;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/symbols/cim/effects/EffectReverse":function(){define(["exports","../../../core/lang","../../../geometry/support/jsonUtils","../CIMCursor"],function(t,k,m,z){let y=function(){function f(){}f.local=function(){null===f.instance&&(f.instance=new f);return f.instance};f.prototype.execute=function(h,e,l){return new x(h,e,l)};return f}();y.instance=null;let x=function(){function f(h,e,l){this._inputGeometries=h;this._reverse=void 0!==e.reverse?
e.reverse:!0}f.prototype.next=function(){for(var h=this._inputGeometries.next();h;){if(!this._reverse)return h;if(m.isPolyline(h))return h=k.clone(h),z.reverseMultipath(h.paths),h;h=this._inputGeometries.next()}return null};return f}();t.EffectReverse=y;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/symbols/cim/effects/EffectRotate":function(){define(["exports","../../../core/lang","../../../geometry/support/boundsUtils","../../../geometry/support/jsonUtils","../../../geometry/support/aaBoundingRect"],
function(t,k,m,z,y){let x=function(){function h(){}h.local=function(){null===h.instance&&(h.instance=new h);return h.instance};h.prototype.execute=function(e,l,q){return new f(e,l,q)};return h}();x.instance=null;let f=function(){function h(l,q,p){this._inputGeometries=l;this._rotateAngle=void 0!==q.angle?-q.angle*Math.PI/180:0}var e=h.prototype;e.next=function(){for(var l=this._inputGeometries.next();l;){if(0===this._rotateAngle)return l;var q=y.create();m.getBoundsXY(q,l);const p=(q[2]+q[0])/2;q=
(q[3]+q[1])/2;if(z.isExtent(l))return l={rings:[[[l.xmin,l.ymin],[l.xmin,l.ymax],[l.xmax,l.ymax],[l.xmax,l.ymin],[l.xmin,l.ymin]]]},this._rotateMultipath(l.rings,p,q),l;if(z.isPolygon(l))return l=k.clone(l),this._rotateMultipath(l.rings,p,q),l;if(z.isPolyline(l))return l=k.clone(l),this._rotateMultipath(l.paths,p,q),l;if(z.isMultipoint(l))return l=k.clone(l),this._rotatePath(l.points,p,q),l;if(z.isPoint(l))return l;l=this._inputGeometries.next()}return null};e._rotateMultipath=function(l,q,p){if(l)for(const n of l)this._rotatePath(n,
q,p)};e._rotatePath=function(l,q,p){if(l){const n=Math.cos(this._rotateAngle),d=Math.sin(this._rotateAngle);for(const b of l){l=b[0]-q;const a=b[1]-p;b[0]=q+l*n-a*d;b[1]=p+l*d+a*n}}};return h}();t.EffectRotate=x;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/symbols/cim/effects/EffectScale":function(){define(["exports","../../../core/lang","../../../geometry/support/boundsUtils","../../../geometry/support/jsonUtils","../../../geometry/support/aaBoundingRect"],function(t,k,m,z,y){let x=
function(){function h(){}h.local=function(){null===h.instance&&(h.instance=new h);return h.instance};h.prototype.execute=function(e,l,q){return new f(e,l,q)};return h}();x.instance=null;let f=function(){function h(l,q,p){this._inputGeometries=l;this._xFactor=void 0!==q.xScaleFactor?q.xScaleFactor:1.15;this._yFactor=void 0!==q.yScaleFactor?q.yScaleFactor:1.15}var e=h.prototype;e.next=function(){for(var l=this._inputGeometries.next();l;){if(1===this._xFactor&&1===this._yFactor)return l;var q=y.create();
m.getBoundsXY(q,l);const p=(q[2]+q[0])/2;q=(q[3]+q[1])/2;if(z.isExtent(l))return l={rings:[[[l.xmin,l.ymin],[l.xmin,l.ymax],[l.xmax,l.ymax],[l.xmax,l.ymin],[l.xmin,l.ymin]]]},this._scaleMultipath(l.rings,p,q),l;if(z.isPolygon(l))return l=k.clone(l),this._scaleMultipath(l.rings,p,q),l;if(z.isPolyline(l))return l=k.clone(l),this._scaleMultipath(l.paths,p,q),l;if(z.isMultipoint(l))return l=k.clone(l),this._scalePath(l.points,p,q),l;if(z.isPoint(l))return l;l=this._inputGeometries.next()}return null};
e._scaleMultipath=function(l,q,p){if(l)for(const n of l)this._scalePath(n,q,p)};e._scalePath=function(l,q,p){if(l)for(const n of l)l=(n[1]-p)*this._yFactor,n[0]=q+(n[0]-q)*this._xFactor,n[1]=p+l};return h}();t.EffectScale=x;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/symbols/cim/effects/EffectWave":function(){define(["exports","../../../geometry/support/jsonUtils","../CurveHelper","../GeometryWalker"],function(t,k,m,z){let y=function(){function f(){}f.local=function(){null===f.instance&&
(f.instance=new f);return f.instance};f.prototype.execute=function(h,e,l){return new x(h,e,l)};return f}();y.instance=null;let x=function(){function f(e,l,q){this._inputGeometries=e;this._height=(void 0!==l.amplitude?l.amplitude:2)*q;this._period=(void 0!==l.period?l.period:3)*q;this._style=l.waveform;0>=this._height&&(this._height=Math.abs(this._height));0>=this._period&&(this._period=Math.abs(this._period));this._pattern=new z.DashPattern;this._pattern.addValue(this._period);this._pattern.addValue(this._period);
this._walker=new z.GeometryWalker;this._walker.updateTolerance(q)}var h=f.prototype;h.next=function(){for(var e=this._inputGeometries.next();e;){if(0===this._height||0===this._period)return e;if(k.isPolyline(e)){const l=this._processGeom(e.paths);if(l.length)return{paths:l}}if(k.isPolygon(e)&&(e=this._processGeom(e.rings),e.length))return{rings:e};e=this._inputGeometries.next()}return null};h._processGeom=function(e){const l=[];for(const q of e)if(this._walker.init(q,this._pattern))switch(this._style){default:l.push(this._constructCurve(q,
!1));break;case "Square":l.push(this._constructSquare(q));break;case "Triangle":l.push(this._constructTriangle(q));break;case "Random":l.push(this._constructCurve(q,!0))}else l.push(q);return l};h._constructCurve=function(e,l){const q=new m.PathHelper;var p=this._walker.calculatePathLength(e),n=Math.round(p/this._period);0===n&&(n=1);const d=this._period/16,b=1/(16*n+1);p=2*Math.PI*p/(p/n);n=2*Math.PI*Math.random();const a=2*Math.PI*Math.random(),c=2*Math.PI*Math.random(),g=.75-Math.random()/2,r=
.75-Math.random()/2,u={};this._walker.curPointAndAngle(u);q.startPath(u.pt);let w=0;for(;;)if(this._walker.nextPointAndAngle(d,u)){const v=w;w+=b;let D;if(l){const B=this._height/2*(1+.3*Math.sin(g*p*v+n));D=B*Math.sin(p*v+a);D+=B*Math.sin(r*p*v+c);D/=2}else D=.5*this._height*Math.sin(.5*p*v);q.lineTo([u.pt[0]-D*u.sa,u.pt[1]+D*u.ca])}else{q.lineTo(e[e.length-1]);break}return q.path()};h._constructSquare=function(e){const l=new m.PathHelper;e=this._walker.calculatePathLength(e);e=Math.round(e/this._period);
0===e&&(e=1);for(e=!0;;){let q=!1;if(this._walker.curPositionIsValid()){const p={};this._walker.curPointAndAngle(p);const n={};if(this._walker.nextPointAndAngle(this._period,n)){const d={};this._walker.nextPointAndAngle(this._period,d)&&(e?(l.startPath(p.pt),e=!1):l.lineTo(p.pt),l.lineTo([p.pt[0]-this._height/2*p.sa,p.pt[1]+this._height/2*p.ca]),l.lineTo([n.pt[0]-this._height/2*n.sa,n.pt[1]+this._height/2*n.ca]),l.lineTo([n.pt[0]+this._height/2*n.sa,n.pt[1]-this._height/2*n.ca]),l.lineTo([d.pt[0]+
this._height/2*d.sa,d.pt[1]-this._height/2*d.ca]),q=!0)}}if(!q){l.lineTo(this._walker.getPathEnd());break}}return l.path()};h._constructTriangle=function(e){const l=new m.PathHelper;e=this._walker.calculatePathLength(e);e=Math.round(e/this._period);0===e&&(e=1);for(e=!0;;){let q=!1;if(this._walker.curPositionIsValid()){const p={};this._walker.curPointAndAngle(p);const n={};if(this._walker.nextPointAndAngle(this._period/2,n)){const d={};this._walker.nextPointAndAngle(this._period,d)&&(this._walker.nextPosition(this._period/
2)&&(e?(l.startPath(p.pt),e=!1):l.lineTo(p.pt),l.lineTo([n.pt[0]-this._height/2*n.sa,n.pt[1]+this._height/2*n.ca]),l.lineTo([d.pt[0]+this._height/2*d.sa,d.pt[1]-this._height/2*d.ca])),q=!0)}}if(!q){l.lineTo(this._walker.getPathEnd());break}}return l.path()};return f}();t.EffectWave=y;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/symbols/cim/placements/PlacementAlongLineSameSize":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../CIMCursor","../GeometryWalker",
"../enums"],function(t,k,m,z,y){let x=function(){function h(){}h.local=function(){null===h.instance&&(h.instance=new h);return h.instance};h.prototype.execute=function(e,l,q){return new f(e,l,q)};return h}();x.instance=null;let f=function(h){function e(q,p,n){q=h.call(this,q,!0,!0)||this;q._grometryWalker=new z.GeometryWalker;q._grometryWalker.updateTolerance(n);q._angleToLine=void 0!==p.angleToLine?p.angleToLine:!0;q._offset=void 0!==p.offset?p.offset*n:0;q._originalEndings=p.endings;q._offsetAtEnd=
void 0!==p.customEndingOffset?p.customEndingOffset*n:0;q._position=void 0!==p.offsetAlongLine?p.offsetAlongLine*n:0;q._pattern=new z.DashPattern;q._pattern.init(p.placementTemplate,!1);q._pattern.scale(n);q._endings=q._originalEndings;return q}k._inheritsLoose(e,h);var l=e.prototype;l.processPath=function(q){if(this._pattern.isEmpty())return null;if(this.iteratePath)var p=this._pattern.nextValue();else{this._endings=this._originalEndings===y.PlacementEndings.WithFullGap&&this.isClosed?y.PlacementEndings.WithMarkers:
this._originalEndings;this._pattern.extPtGap=0;let n=!0;switch(this._endings){case y.PlacementEndings.NoConstraint:p=-this._position;p=this._adjustPosition(p);n=!1;break;default:p=-this._pattern.lastValue()/2;break;case y.PlacementEndings.WithFullGap:p=-this._pattern.lastValue();this._pattern.extPtGap=this._pattern.lastValue();break;case y.PlacementEndings.WithMarkers:p=0;break;case y.PlacementEndings.Custom:p=-this._position,p=this._adjustPosition(p),this._pattern.extPtGap=.5*this._offsetAtEnd}if(!this._grometryWalker.init(q,
this._pattern,n))return null;this._pattern.reset();for(q=0;p>q;)p-=q,q=this._pattern.nextValue();p=q-=p;this.iteratePath=!0}q={};if(!this._grometryWalker.nextPointAndAngle(p,q)||this._endings===y.PlacementEndings.WithFullGap&&this._grometryWalker.isPathEnd())return this.iteratePath=!1,null;if(this._endings===y.PlacementEndings.WithMarkers&&this._grometryWalker.isPathEnd()&&(this.iteratePath=!1,this.isClosed))return null;this.internalPlacement.setTranslate(q.pt[0]+this._offset*q.sa,q.pt[1]-this._offset*
q.ca);this._angleToLine&&this.internalPlacement.setRotateCS(q.ca,q.sa);return this.internalPlacement};l._adjustPosition=function(q){q/=this._pattern.length();q-=Math.floor(q);return q*this._pattern.length()};return e}(m.PathTransformationCursor);t.PlacementAlongLineSameSize=x;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/symbols/cim/enums":function(){define(["exports"],function(t){var k=t.PlacementEndings||(t.PlacementEndings={});k.NoConstraint="NoConstraint";k.WithMarkers="WithMarkers";
k.WithFullGap="WithFullGap";k.WithHalfGap="WithHalfGap";k.Custom="Custom";Object.defineProperty(t,"__esModule",{value:!0})})},"esri/symbols/cim/placements/PlacementAtExtremities":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../CIMCursor","../CurveHelper"],function(t,k,m,z){let y=function(){function f(){}f.local=function(){null===f.instance&&(f.instance=new f);return f.instance};f.prototype.execute=function(h,e,l){return new x(h,e,l)};return f}();y.instance=null;let x=
function(f){function h(l,q,p){l=f.call(this,l,!1,!0)||this;l._curveHelper=new z.CurveHelper;l._angleToLine=void 0!==q.angleToLine?q.angleToLine:!0;l._offset=void 0!==q.offset?q.offset*p:0;l._type=q.extremityPlacement;l._position=void 0!==q.offsetAlongLine?q.offsetAlongLine*p:0;l._beginProcessed=!1;return l}k._inheritsLoose(h,f);var e=h.prototype;e.processPath=function(l){let q;switch(this._type){default:this._beginProcessed?(q=this._atExtremities(l,this._position,!1),this.iteratePath=this._beginProcessed=
!1):(q=this._atExtremities(l,this._position,!0),this.iteratePath=this._beginProcessed=!0);break;case "JustBegin":q=this._atExtremities(l,this._position,!0);break;case "JustEnd":q=this._atExtremities(l,this._position,!1);case "None":}return q};e._atExtremities=function(l,q,p){var n=l.length;if(2>n)return null;var d=p?1:n-2;const b=p?n:-1,a=p?1:-1;let c=0;p=p?l[0]:l[n-1];for(n=d;n!==b;n+=a){d=p;p=l[n];const g=this._curveHelper.calculateLength(d,p);if(c+g>q){l=(q-c)/g;const [r,u]=this._curveHelper.getAngleCS(d,
p,l);l=m.getCoord2D(d,p,l);this.internalPlacement.setTranslate(l[0]-this._offset*u,l[1]+this._offset*r);this._angleToLine&&this.internalPlacement.setRotateCS(-r,-u);return this.internalPlacement}c+=g}return null};return h}(m.PathTransformationCursor);t.PlacementAtExtremities=y;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/symbols/cim/placements/PlacementAtRatioPositions":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../CIMCursor","../GeometryWalker"],function(t,
k,m,z){let y=function(){function f(){}f.local=function(){null===f.instance&&(f.instance=new f);return f.instance};f.prototype.execute=function(h,e,l){return new x(h,e,l)};return f}();y.instance=null;let x=function(f){function h(e,l,q){e=f.call(this,e,!0,!0)||this;e._walker=new z.GeometryWalker;e._walker.updateTolerance(q);e._angleToLine=void 0!==l.angleToLine?l.angleToLine:!0;e._offset=void 0!==l.offset?l.offset*q:0;e._beginGap=void 0!==l.beginPosition?l.beginPosition*q:0;e._endGap=void 0!==l.endPosition?
l.endPosition*q:0;e._flipFirst=void 0!==l.flipFirst?l.flipFirst:!0;e._pattern=new z.DashPattern;e._pattern.init(l.positionArray,!1,!1);e._subPathLen=0;e._posCount=e._pattern.size();e._isFirst=!0;e._prevPos=0;return e}k._inheritsLoose(h,f);h.prototype.processPath=function(e){if(this._pattern.isEmpty())return null;if(this.iteratePath){e=this._pattern.nextValue()*this._subPathLen;var l=this._beginGap+e;e=l-this._prevPos;this._prevPos=l}else{this._posCount=this._pattern.size();this._isFirst=!0;this._prevPos=
0;this._subPathLen=this._walker.calculatePathLength(e)-this._beginGap-this._endGap;if(0>this._subPathLen)return this.iteratePath=!1,null;if(!this._walker.init(e,this._pattern,!1))return null;this._pattern.reset();e=this._pattern.nextValue()*this._subPathLen;l=this._beginGap+e;e=l-this._prevPos;this._prevPos=l;this.iteratePath=!0}l={};if(!this._walker.nextPointAndAngle(e,l,1))return this.iteratePath=!1,null;this.internalPlacement.setTranslate(l.pt[0]+this._offset*l.sa,l.pt[1]-this._offset*l.ca);e=
this._isFirst&&this._flipFirst;let q;this._angleToLine?(q=l.ca,l=l.sa):(q=1,l=0);e&&(q=-q,l=-l);this.internalPlacement.setRotateCS(q,l);this._isFirst=!1;this._posCount--;0===this._posCount&&(this.iteratePath=!1);return this.internalPlacement};return h}(m.PathTransformationCursor);t.PlacementAtRatioPositions=y;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/symbols/cim/placements/PlacementInsidePolygon":function(){define(["exports","../CIMPlacements"],function(t,k){let m=function(){function y(){}
y.local=function(){null===y.instance&&(y.instance=new y);return y.instance};y.prototype.execute=function(x,f,h){return new z(x,f,h)};return y}();m.instance=null;let z=function(){function y(f,h,e){this._currentY=this._currentX=this._yMax=this._yMin=this._xMax=this._xMin=0;this._stepX=(void 0!==h.stepX?Math.abs(h.stepX):16)*e;this._stepY=(void 0!==h.stepY?Math.abs(h.stepY):16)*e;if(0!==this._stepX&&0!==this._stepY&&f&&void 0!==f.rings&&f.rings){this._gridType=void 0!==h.gridType?h.gridType:"Fixed";
if("Random"===this._gridType)this._randomness=void 0!==h.randomness?h.randomness/100:1,this._gridAngle=0,this._shiftOddRows=!1,this._cosAngle=1,this._offsetY=this._offsetX=this._sinAngle=0;else{this._randomness=0;this._gridAngle=void 0!==h.gridAngle?h.gridAngle:0;this._shiftOddRows=void 0!==h.shiftOddRows?h.shiftOddRows:!1;this._offsetX=void 0!==h.offsetX?h.offsetX*e:0;this._offsetY=void 0!==h.offsetY?h.offsetY*e:0;this._cosAngle=Math.cos(this._gridAngle/180*Math.PI);this._sinAngle=-Math.sin(this._gridAngle/
180*Math.PI);if(this._stepX)if(0>this._offsetX)for(;this._offsetX<-.5*this._stepX;)this._offsetX+=this._stepX;else for(;this._offsetX>=.5*this._stepX;)this._offsetX-=this._stepX;if(this._stepY)if(0>this._offsetY)for(;this._offsetY<-.5*this._stepY;)this._offsetY+=this._stepY;else for(;this._offsetY>=.5*this._stepY;)this._offsetY-=this._stepY}this._graphicOriginY=this._graphicOriginX=0;this._internalPlacement=new k.Placement;this._calculateMinMax(f);this._geometry=f}}var x=y.prototype;x.next=function(){return this._geometry?
this._nextInside():null};x._calculateMinMax=function(f){this._yMax=this._yMin=this._xMax=this._xMin=0;let h,e,l,q,p;e=l=Number.MAX_VALUE;q=p=-Number.MAX_VALUE;for(const d of f.rings){const b=d?d.length:0;for(let a=0;a<b;++a){var n=d[a][0]-this._graphicOriginX-this._offsetX;h=d[a][1]-this._graphicOriginY-this._offsetY;f=this._cosAngle*n-this._sinAngle*h;n=this._sinAngle*n+this._cosAngle*h;e=Math.min(e,f);q=Math.max(q,f);l=Math.min(l,n);p=Math.max(p,n)}}e+=this._graphicOriginX;q+=this._graphicOriginX;
l+=this._graphicOriginY;p+=this._graphicOriginY;this._xMin=Math.round(e/this._stepX);this._xMax=Math.round(q/this._stepX);this._yMin=Math.round(l/this._stepY);this._yMax=Math.round(p/this._stepY);this._currentX=this._xMax+1;this._currentY=this._yMin-1};x._nextInside=function(){for(;;){if(this._currentX>this._xMax){this._currentY++;if(this._currentY>this._yMax)return null;this._currentX=this._xMin;this._shiftOddRows&&this._currentY%2&&this._currentX--}var f=this._currentX*this._stepX+this._offsetX;
this._shiftOddRows&&this._currentY%2&&(f+=.5*this._stepX);const h=this._currentY*this._stepY+this._offsetY;this._currentX++;let e;"Random"===this._gridType?(e=this._graphicOriginX+f+this._stepX*this._randomness*(.5-Math.random())*2/3,f=this._graphicOriginY+h+this._stepY*this._randomness*(.5-Math.random())*2/3):(e=this._graphicOriginX+this._cosAngle*f+this._sinAngle*h,f=this._graphicOriginY-this._sinAngle*f+this._cosAngle*h);this._internalPlacement.setTranslate(e,f);return this._internalPlacement}};
return y}();t.PlacementInsidePolygon=m;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/symbols/cim/placements/PlacementOnLine":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../CIMCursor","../CurveHelper"],function(t,k,m,z){let y=function(){function f(){}f.local=function(){null===f.instance&&(f.instance=new f);return f.instance};f.prototype.execute=function(h,e,l){return new x(h,e,l)};return f}();y.instance=null;let x=function(f){function h(l,q,p){l=f.call(this,
l,!0,!0)||this;l._curveHelper=new z.CurveHelper;l._angleToLine=void 0!==q.angleToLine?q.angleToLine:!0;l._offset=void 0!==q.offset?q.offset*p:0;l._relativeTo=q.relativeTo;l._position=void 0!==q.startPointOffset?q.startPointOffset*p:0;l._epsilon=.001*p;return l}k._inheritsLoose(h,f);var e=h.prototype;e.processPath=function(l){var q=this._position;if("SegmentMidpoint"===this._relativeTo){this.iteratePath||(this._segmentCount=l.length,this._curSegment=1,this.iteratePath=!0);for(;this._curSegment<this._segmentCount;){var p=
this._curSegment;this._curSegment++;q=l[p-1];p=l[p];const n=this._curveHelper.calculateLength(q,p);if(n<this._epsilon)continue;l=.5+this._position/n;const [d,b]=this._curveHelper.getAngleCS(q,p,l);l=m.getCoord2D(q,p,l);this.internalPlacement.setTranslate(l[0]-this._offset*b,l[1]+this._offset*d);this._angleToLine&&this.internalPlacement.setRotateCS(d,b);return this.internalPlacement}this.iteratePath=!1;return null}"LineEnd"===this._relativeTo&&m.reversePath(l);q=this.onLine(l,q);"LineEnd"===this._relativeTo&&
m.reversePath(l);return q};e.onLine=function(l,q){let p,n=!1;switch(this._relativeTo){default:p=this._curveHelper.calculatePathLength(l)/2+q;break;case "LineBeginning":p=q;break;case "LineEnd":p=q,n=!0}const d=l.length;let b=0,a=l[0];for(let c=1;c<d;++c){q=a;a=l[c];const g=this._curveHelper.calculateLength(q,a);if(b+g>p){l=(p-b)/g;const [r,u]=this._curveHelper.getAngleCS(q,a,l);l=m.getCoord2D(q,a,l);q=n?this._offset:-this._offset;this.internalPlacement.setTranslate(l[0]-q*u,l[1]+q*r);this._angleToLine&&
(n?this.internalPlacement.setRotateCS(-r,-u):this.internalPlacement.setRotateCS(r,u));return this.internalPlacement}b+=g}return null};return h}(m.PathTransformationCursor);t.PlacementOnLine=y;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/symbols/cim/placements/PlacementOnVertices":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../CIMCursor","../CurveHelper"],function(t,k,m,z){function y(h,e){const l=Math.PI;for(;Math.abs(e-h)>l+2E-15;)e=e-h>l?e-2*l:e+2*l;return(h+
e)/2}let x=function(){function h(){}h.local=function(){null===h.instance&&(h.instance=new h);return h.instance};h.prototype.execute=function(e,l,q){return new f(e,l,q)};return h}();x.instance=null;let f=function(h){function e(q,p,n){q=h.call(this,q,!0,!0)||this;q._curveHelper=new z.CurveHelper;q._angleToLine=void 0!==p.angleToLine?p.angleToLine:!0;q._offset=void 0!==p.offset?p.offset*n:0;q._endPoints=void 0!==p.placeOnEndPoints?p.placeOnEndPoints:!0;q._controlPoints=void 0!==p.placeOnControlPoints?
p.placeOnControlPoints:!0;q._regularVertices=void 0!==p.placeOnRegularVertices?p.placeOnRegularVertices:!0;q._tags=[];q._tagIterator=0;return q}k._inheritsLoose(e,h);var l=e.prototype;l.processPath=function(q){this.iteratePath||(this._preparePath(q),this.iteratePath=!0);if(this._tagIterator>=this._tags.length)return this._tagIterator=this._tags.length=0,this.iteratePath=!1,null;q=this._tags[this._tagIterator];this._angleToLine&&this.internalPlacement.setRotate(q[2]);let p=q[0],n=q[1];if(0!==this._offset){const d=
Math.cos(q[2]);p-=this._offset*Math.sin(q[2]);n+=this._offset*d}this.internalPlacement.setTranslate(p,n);this._tagIterator++;return this.internalPlacement};l._preparePath=function(q){this._tagIterator=this._tags.length=0;const p=m.isClosedPath(q),n=q.length-1;let d=0,b=0,a=0,c=0,g=0,r,u;for(;d<n;){d++;r=q[d-1];u=q[d];const w=m.getId(r),v=m.getId(u);if(this._angleToLine||0!==this._offset)c=this._curveHelper.getAngle(r,u,0);1===d?p?(b=c,a=w):this._endPoints&&this._tags.push([r[0],r[1],c]):1===w?this._controlPoints&&
this._tags.push([r[0],r[1],y(g,c)]):this._regularVertices&&this._tags.push([r[0],r[1],y(g,c)]);if(this._angleToLine||0!==this._offset)g=this._curveHelper.getAngle(r,u,1);d===n&&(p?1===v||1===a?this._controlPoints&&this._tags.push([u[0],u[1],y(g,b)]):this._regularVertices&&this._tags.push([u[0],u[1],y(g,b)]):this._endPoints&&this._tags.push([u[0],u[1],g]))}this._tagIterator=0};return e}(m.PathTransformationCursor);t.PlacementOnVertices=x;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/symbols/cim/placements/PlacementPolygonCenter":function(){define(["exports",
"../../../geometry/support/boundsUtils","../../../geometry/support/aaBoundingRect","../CIMPlacements"],function(t,k,m,z){let y=function(){function f(){}f.local=function(){null===f.instance&&(f.instance=new f);return f.instance};f.prototype.execute=function(h,e,l){return new x(h,e,l)};return f}();y.instance=null;let x=function(){function f(e,l,q){this._geometry=e;this._offsetX=void 0!==l.offsetX?l.offsetX*q:0;this._offsetY=void 0!==l.offsetY?l.offsetY*q:0;this._method=void 0!==l.method?l.method:"OnPolygon";
this._internalPlacement=new z.Placement}var h=f.prototype;h.next=function(){const e=this._geometry;this._geometry=null;return e&&void 0!==e.rings?this._polygonCenter(e):null};h._polygonCenter=function(e){switch(this._method){default:case "CenterOfMass":case "BoundingBoxCenter":{const l=m.create();k.getBoundsXY(l,e);this._internalPlacement.setTranslate((l[2]+l[0])/2+this._offsetX,(l[3]+l[1])/2-this._offsetY)}}return this._internalPlacement};return f}();t.PlacementPolygonCenter=y;Object.defineProperty(t,
"__esModule",{value:!0})})},"esri/symbols/cim/Rect":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(t){return function(){function k(m=0,z=0,y=0,x=0){this.x=m;this.y=z;this.width=y;this.height=x}k.prototype.union=function(m){this.x=Math.min(this.x,m.x);this.y=Math.min(this.y,m.y);this.width=Math.max(this.width,m.width);this.height=Math.max(this.height,m.height)};t._createClass(k,[{key:"isEmpty",get:function(){return 0>=this.width||0>=this.height}}]);return k}()})},"esri/symbols/cim/packingUtils":function(){define(["exports"],
function(t){function k(f,h=0){let e=0;for(let l=0;4>l;l++)e+=f[h+l]*y[l];return e}function m(f){return f-Math.floor(f)}const z=[1,256,65536,16777216],y=[1/256,1/65536,1/16777216,1/4294967296],x=k(new Uint8ClampedArray([255,255,255,255]));t.packFloatRGBA=function(f,h,e=0){f=0>f?0:f>x?x:f;for(let l=0;4>l;l++)h[e+l]=Math.floor(256*m(f*z[l]))};t.unpackFloatRGBA=k;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/symbols/cim/SDFHelper":function(){define(["exports","../../geometry/support/jsonUtils",
"./Rect","./packingUtils"],function(t,k,m,z){function y(f){if(!f)return null;switch(f.type){case "CIMPointSymbol":f=f.symbolLayers;if(!f||1!==f.length)break;return y(f[0]);case "CIMVectorMarker":f=f.markerGraphics;if(!f||1!==f.length)break;var h=f[0];if(!h)break;f=h.geometry;if(!f)break;h=h.symbol;if(!h||"CIMPolygonSymbol"!==h.type&&"CIMLineSymbol"!==h.type)break;return{geom:f,asFill:"CIMPolygonSymbol"===h.type};case "sdf":return{geom:f.geom,asFill:f.asFill}}return null}function x(f){let h=Infinity,
e=-Infinity,l=Infinity,q=-Infinity;for(const p of f)for(const n of p)n[0]<h&&(h=n[0]),n[0]>e&&(e=n[0]),n[1]<l&&(l=n[1]),n[1]>q&&(q=n[1]);return[h,l,e,q]}t.buildSDF=function(f){var h=f.geom;var e=h?h.rings?h.rings:h.paths?h.paths:void 0!==h.xmin&&void 0!==h.ymin&&void 0!==h.xmax&&void 0!==h.ymax?[[[h.xmin,h.ymin],[h.xmin,h.ymax],[h.xmax,h.ymax],[h.xmax,h.ymin],[h.xmin,h.ymin]]]:null:null;h=Infinity;var l=-Infinity;var q=Infinity,p=-Infinity;for(var n of e)for(var d of n)d[0]<h&&(h=d[0]),d[0]>l&&(l=
d[0]),d[1]<q&&(q=d[1]),d[1]>p&&(p=d[1]);l=new m(h,q,l-h,p-q);q=64/Math.max(l.width,l.height);n=Math.round(l.width*q)+62;d=Math.round(l.height*q)+62;h=[];for(var b of e)if(b&&1<b.length){e=[];for(var a of b){let [A,E]=a;A-=l.x;E-=l.y;A*=q;E*=q;A+=30.5;E+=30.5;e.push([A,E])}f.asFill&&(p=e.length-1,e[0][0]===e[p][0]&&e[0][1]===e[p][1]||e.push(e[0]));h.push(e)}var c;b=n*d;a=Array(b);for(e=0;e<b;++e)a[e]=962;for(c of h)for(e=c.length,l=1;l<e;++l){q=c[l-1];p=c[l];var g=void 0,r=void 0;q[0]<p[0]?(g=q[0],
r=p[0]):(g=p[0],r=q[0]);var u=void 0,w=void 0;q[1]<p[1]?(u=q[1],w=p[1]):(u=p[1],w=q[1]);var v=Math.floor(g)-31;r=Math.floor(r)+31;u=Math.floor(u)-31;w=Math.floor(w)+31;0>v&&(v=0);r>n&&(r=n);0>u&&(u=0);w>d&&(w=d);g=p[0]-q[0];const A=p[1]-q[1],E=g*g+A*A;for(;v<r;v++)for(let G=u;G<w;G++){var D=(v-q[0])*g+(G-q[1])*A,B=void 0;0>D?(B=q[0],D=q[1]):D>E?(B=p[0],D=p[1]):(D/=E,B=q[0]+D*g,D=q[1]+D*A);B=(v-B)*(v-B)+(G-D)*(G-D);D=(d-G-1)*n+v;B<a[D]&&(a[D]=B)}}for(c=0;c<b;++c)a[c]=Math.sqrt(a[c]);c=a;if(f.asFill)for(var C of h)for(f=
C.length,h=1;h<f;++h)for(b=C[h-1],a=C[h],b[0]<a[0]?(e=b[0],l=a[0]):(e=a[0],l=b[0]),b[1]<a[1]?(p=b[1],q=a[1]):(p=a[1],q=b[1]),e=Math.floor(e),l=Math.floor(l)+1,p=Math.floor(p),q=Math.floor(q)+1,31>e&&(e=31),l>n-31&&(l=n-31),31>p&&(p=31),q>d-31&&(q=d-31);p<q;++p)if(b[1]>p!==a[1]>p){r=(d-p-1)*n;for(u=e;u<l;++u)u<(a[0]-b[0])*(p-b[1])/(a[1]-b[1])+b[0]&&(c[r+u]=-c[r+u]);for(u=31;u<e;++u)c[r+u]=-c[r+u]}C=c.length;f=new Uint8Array(4*C);for(h=0;h<C;++h)z.packFloatRGBA(.5-c[h]/62,f,4*h);C=f;return[C,n,d]};
t.getExtent=function(f){return f?f.rings?x(f.rings):f.paths?x(f.paths):k.isExtent(f)?[f.xmin,f.ymin,f.xmax,f.ymax]:null:null};t.getSDFInfo=y;t.getSDFMetrics=function(f,h,e,l,q){const [p,n,d,b]=f;if(d<p||b<n)return[0,0,0];var a=d-p,c=b-n;f=64/Math.max(a,c);a=Math.round(a*f);c=Math.round(c*f)+62;let g=1;h&&(g=c/f/(h.ymax-h.ymin));let r=0,u=0;l&&(q?h&&e&&0<h.ymax-h.ymin&&(r=l.x/((h.xmax-h.xmin)/(h.ymax-h.ymin)*e),u=l.y/e):(r=l.x,u=l.y));r=.5*(h.xmax+h.xmin)+r*(h.xmax-h.xmin);u=.5*(h.ymax+h.ymin)+u*(h.ymax-
h.ymin);r=(r-p)*f+31;u=(u-n)*f+31;return[g,r/(a+62)-.5,-(u/c-.5)]};t.getSDFSymbol=function(f){f=f.markerGraphics;if(!f||1!==f.length)return null;f=f[0];if(!f)return null;f=f.symbol;return!f||"CIMPolygonSymbol"!==f.type&&"CIMLineSymbol"!==f.type?null:f};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/symbols/cim/ExpandedCIM":function(){define(["exports","../../chunks/_rollupPluginBabelHelpers","../../views/2d/engine/webgl/enums","../../views/2d/engine/webgl/materialKey/MaterialKey"],function(t,
k,m,z){const y={marker:m.WGLGeometryType.MARKER,fill:m.WGLGeometryType.FILL,line:m.WGLGeometryType.LINE,text:m.WGLGeometryType.TEXT};m=function(){function x(f,h,e,l){this.layers=f;this.data=h;this.hash=this._createHash();this.rendererKey=e;for(const q of f)q.materialKey=z.createMaterialKey(y[q.type],this.rendererKey,!1,!1),q.maxVVSize=l}x.prototype._createHash=function(){let f="";for(const h of this.layers)f+=h.templateHash;return f};k._createClass(x,[{key:"type",get:function(){return"expanded-cim"}}]);
return x}();t.ExpandedCIM=m;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/materialKey/MaterialKey":function(){define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../../../../../core/Error","../enums","../mesh/templates/meshUtils"],function(t,k,m,z,y){function x(g,r=!1){const u=z.WGLVVFlag.SIZE_FIELD_STOPS|z.WGLVVFlag.SIZE_MINMAX_VALUE|z.WGLVVFlag.SIZE_SCALE_STOPS|z.WGLVVFlag.SIZE_UNIT_VALUE;g=(g&(z.WGLVVTarget.FIELD_TARGETS_OUTLINE|z.WGLVVTarget.MINMAX_TARGETS_OUTLINE|
z.WGLVVTarget.SCALE_TARGETS_OUTLINE|z.WGLVVTarget.UNIT_TARGETS_OUTLINE))>>>4;return r?u&g:u&~g}function f(g){const r=x(g,!1);return g&(z.WGLVVFlag.COLOR|z.WGLVVFlag.OPACITY|z.WGLVVFlag.ROTATION|r)}let h=function(){function g(u){this._data=0;this._data=u}g.load=function(u){const w=this.shared;w.data=u;return w};var r=g.prototype;r.setBit=function(u,w){u=1<<u;this._data=w?this._data|u:this._data&~u};r.bit=function(u){return(this._data&1<<u)>>u};r.setBits=function(u,w,v){for(let D=w,B=0;D<v;D++,B++)this.setBit(D,
0!==(u&1<<B))};r.bits=function(u,w){let v=0;for(let D=u,B=0;D<w;D++,B++)v|=this.bit(D)<<B;return v};r.hasVV=function(){return!1};r.setVV=function(u,w){};r.getVariation=function(){return{mapAligned:this.mapAligned,pattern:this.pattern,sdf:this.sdf}};r.getVariationHash=function(){return this._data&~(7&this.textureBinding)};k._createClass(g,[{key:"data",get:function(){return this._data},set:function(u){this._data=u}},{key:"geometryType",get:function(){return this.bits(8,11)},set:function(u){this.setBits(u,
8,11)}},{key:"mapAligned",get:function(){return!!this.bit(20)},set:function(u){this.setBit(20,u)}},{key:"sdf",get:function(){return!!this.bit(11)},set:function(u){this.setBit(11,u)}},{key:"pattern",get:function(){return!!this.bit(12)},set:function(u){this.setBit(12,u)}},{key:"textureBinding",get:function(){return this.bits(0,8)},set:function(u){this.setBits(u,0,8)}},{key:"geometryTypeString",get:function(){switch(this.geometryType){case z.WGLGeometryType.FILL:return"fill";case z.WGLGeometryType.MARKER:return"marker";
case z.WGLGeometryType.LINE:return"line";case z.WGLGeometryType.TEXT:return"text";case z.WGLGeometryType.LABEL:return"label";default:throw new m(`Unable to handle unknown geometryType: ${this.geometryType}`);}}}]);return g}();h.shared=new h(0);const e=g=>function(r){function u(){return r.apply(this,arguments)||this}k._inheritsLoose(u,r);var w=u.prototype;w.hasVV=function(){return r.prototype.hasVV.call(this)||this.vvSizeMinMaxValue||this.vvSizeScaleStops||this.vvSizeFieldStops||this.vvSizeUnitValue};
w.setVV=function(v,D){r.prototype.setVV.call(this,v,D);v&=x(v,D);this.vvSizeMinMaxValue=!!(v&z.WGLVVFlag.SIZE_MINMAX_VALUE);this.vvSizeFieldStops=!!(v&z.WGLVVFlag.SIZE_FIELD_STOPS);this.vvSizeUnitValue=!!(v&z.WGLVVFlag.SIZE_UNIT_VALUE);this.vvSizeScaleStops=!!(v&z.WGLVVFlag.SIZE_SCALE_STOPS)};k._createClass(u,[{key:"vvSizeMinMaxValue",get:function(){return 0!==this.bit(16)},set:function(v){this.setBit(16,v)}},{key:"vvSizeScaleStops",get:function(){return 0!==this.bit(17)},set:function(v){this.setBit(17,
v)}},{key:"vvSizeFieldStops",get:function(){return 0!==this.bit(18)},set:function(v){this.setBit(18,v)}},{key:"vvSizeUnitValue",get:function(){return 0!==this.bit(19)},set:function(v){this.setBit(19,v)}}]);return u}(g),l=g=>function(r){function u(){return r.apply(this,arguments)||this}k._inheritsLoose(u,r);var w=u.prototype;w.hasVV=function(){return r.prototype.hasVV.call(this)||this.vvRotation};w.setVV=function(v,D){r.prototype.setVV.call(this,v,D);this.vvRotation=!D&&!!(v&z.WGLVVFlag.ROTATION)};
k._createClass(u,[{key:"vvRotation",get:function(){return 0!==this.bit(15)},set:function(v){this.setBit(15,v)}}]);return u}(g),q=g=>function(r){function u(){return r.apply(this,arguments)||this}k._inheritsLoose(u,r);var w=u.prototype;w.hasVV=function(){return r.prototype.hasVV.call(this)||this.vvColor};w.setVV=function(v,D){r.prototype.setVV.call(this,v,D);this.vvColor=!D&&!!(v&z.WGLVVFlag.COLOR)};k._createClass(u,[{key:"vvColor",get:function(){return 0!==this.bit(13)},set:function(v){this.setBit(13,
v)}}]);return u}(g),p=g=>function(r){function u(){return r.apply(this,arguments)||this}k._inheritsLoose(u,r);var w=u.prototype;w.hasVV=function(){return r.prototype.hasVV.call(this)||this.vvOpacity};w.setVV=function(v,D){r.prototype.setVV.call(this,v,D);this.vvOpacity=!D&&!!(v&z.WGLVVFlag.OPACITY)};k._createClass(u,[{key:"vvOpacity",get:function(){return 0!==this.bit(14)},set:function(v){this.setBit(14,v)}}]);return u}(g);let n=function(g){function r(){return g.apply(this,arguments)||this}k._inheritsLoose(r,
g);r.load=function(u){const w=this.shared;w.data=u;return w};r.from=function(u,w){const v=this.load(0);v.geometryType=z.WGLGeometryType.FILL;w?v.dotDensity=!0:v.setVV(u,!1);return v.data};r.prototype.getVariation=function(){return{...g.prototype.getVariation.call(this),dotDensity:this.dotDensity,vvColor:this.vvColor,vvOpacity:this.vvOpacity}};k._createClass(r,[{key:"dotDensity",get:function(){return!!this.bit(15)},set:function(u){this.setBit(15,u)}}]);return r}(q(p(h)));n.shared=new n(0);let d=function(g){function r(){return g.apply(this,
arguments)||this}k._inheritsLoose(r,g);r.load=function(u){const w=this.shared;w.data=u;return w};r.from=function(u){const w=this.load(0);w.geometryType=z.WGLGeometryType.MARKER;w.setVV(u,!1);return w.data};r.prototype.getVariation=function(){return{...g.prototype.getVariation.call(this),vvColor:this.vvColor,vvRotation:this.vvRotation,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}};
return r}(q(p(l(e(h)))));d.shared=new d(0);let b=function(g){function r(){return g.apply(this,arguments)||this}k._inheritsLoose(r,g);r.load=function(u){const w=this.shared;w.data=u;return w};r.from=function(u,w){const v=this.load(0);v.geometryType=z.WGLGeometryType.LINE;v.setVV(u,w);return v.data};r.prototype.getVariation=function(){return{...g.prototype.getVariation.call(this),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,
vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}};return r}(q(p(e(h))));b.shared=new b(0);let a=function(g){function r(){return g.apply(this,arguments)||this}k._inheritsLoose(r,g);r.load=function(u){const w=this.shared;w.data=u;return w};r.from=function(u){const w=this.load(u);w.geometryType=z.WGLGeometryType.TEXT;w.setVV(u,!1);return w.data};r.prototype.getVariation=function(){return{...g.prototype.getVariation.call(this),vvColor:this.vvColor,vvOpacity:this.vvOpacity,
vvRotation:this.vvRotation,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}};return r}(q(p(l(e(h)))));a.shared=new a(0);let c=function(g){function r(){return g.apply(this,arguments)||this}k._inheritsLoose(r,g);r.load=function(u){const w=this.shared;w.data=u;return w};r.from=function(u,w){const v=this.load(0);v.geometryType=z.WGLGeometryType.LABEL;v.setVV(u,!1);v.mapAligned=!!y.isMapAligned(w);
return v.data};r.prototype.getVariation=function(){return{...g.prototype.getVariation.call(this),vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}};return r}(e(h));c.shared=new c(0);t.FillMaterialKey=n;t.LabelMaterialKey=c;t.LineMaterialKey=b;t.MarkerMaterialKey=d;t.MaterialKeyBase=h;t.TextMaterialKey=a;t.createMaterialKey=function(g,r,u,w,v){switch(g){case z.WGLGeometryType.FILL:return n.from(r,
w);case z.WGLGeometryType.LINE:return b.from(r,u);case z.WGLGeometryType.MARKER:return d.from(r);case z.WGLGeometryType.TEXT:return a.from(r);case z.WGLGeometryType.LABEL:return c.from(r,v);default:throw Error(`Unable to createMaterialKey for unknown geometryType ${g}`);}};t.getFillVVFlags=function(g){return g&(z.WGLVVFlag.COLOR|z.WGLVVFlag.OPACITY)};t.getLabelVVFlags=function(g){const r=x(g,!1);return g&r};t.getLineVVFlags=function(g,r){if(r)return r=x(g,!0),g&r;r=x(g,!1);return g&(z.WGLVVFlag.COLOR|
z.WGLVVFlag.OPACITY|r)};t.getMarkerVVFlags=f;t.getSizeFlagsMask=x;t.getTextVVFlags=function(g){return f(g)};t.hydrateMaterialKey=function(g){switch(h.load(g).geometryType){case z.WGLGeometryType.MARKER:return new d(g);case z.WGLGeometryType.FILL:return new n(g);case z.WGLGeometryType.LINE:return new b(g);case z.WGLGeometryType.TEXT:return new a(g);case z.WGLGeometryType.LABEL:return new c(g)}};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/mesh/templates/meshUtils":function(){define(["exports"],
function(t){t.isMapAligned=function(k){switch(k){case "above-along":case "below-along":case "center-along":return 1;default:return 0}};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/views/2d/layers/features/schemaUtils":function(){define("exports ../../../../core/has ../../../../core/lang ../../../../core/maybe ../../../../core/Logger ../../../../core/Error ../../../../core/screenUtils ../../../../renderers/Renderer ../../../../symbols/support/jsonUtils ../../../../renderers/ClassBreaksRenderer ../../../../renderers/UniqueValueRenderer ../../../../renderers/DictionaryRenderer ../../../../renderers/DotDensityRenderer ../../../../renderers/HeatmapRenderer ../../../../renderers/SimpleRenderer ../../../../renderers/support/jsonUtils ../support/clusterUtils ../../engine/webgl/enums ../../engine/webgl/materialKey/MaterialKey ../../engine/webgl/Utils ../../engine/webgl/util/vvFlagUtils ./support/pixelBuffering ./support/rendererUtils ../support/util".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d,b,a,c,g,r,u,w,v,D,B){function C(R){switch(R.type){case "line-marker":var Y;return{type:"line-marker",color:null==(Y=R.color)?void 0:Y.toJSON(),placement:R.placement,style:R.style};default:return e.fromJSON(R.toJSON()).toJSON()}}function A(R,Y,aa){if(!R)return null;var ca=0;let ka=!1,ia=0;z.isSome(Y)&&(ia=v.getPtMaxVVSize(Y),"visualVariables"in Y&&(ca=w.getVVFlags(Y.visualVariables||[]),ka="dot-density"===Y.type));switch(R.type){case "simple-fill":case "picture-fill":return E(R,
ca,ka,aa);case "simple-marker":case "picture-marker":return Y=ia,ca=r.createMaterialKey(g.WGLGeometryType.MARKER,ca,!1,!1),aa=aa?r.hydrateMaterialKey(ca):ca,ca=C(R),R={materialKey:aa,hash:R.hash(),...ca,angle:R.angle,maxVVSize:Y};case "simple-line":return G(R,ca,aa);case "text":return Y=ia,ca=r.createMaterialKey(g.WGLGeometryType.TEXT,ca,!1,!1),aa=aa?r.hydrateMaterialKey(ca):ca,ca=C(R),R={materialKey:aa,hash:R.hash(),...ca,angle:R.angle,maxVVSize:Y};case "label":return ca=r.createMaterialKey(g.WGLGeometryType.LABEL,
ca,!1,!1,R.labelPlacement),R={materialKey:aa?r.hydrateMaterialKey(ca):ca,hash:R.hash(),...R.toJSON(),labelPlacement:R.labelPlacement};case "cim":return{type:"cim",rendererKey:ca,data:R.data,maxVVSize:ia};case "web-style":return{...C(R),type:"web-style",hash:R.hash(),rendererKey:ca,maxVVSize:ia};default:throw Error(`symbol not supported ${R.type}`);}}function E(R,Y,aa,ca){aa=r.createMaterialKey(g.WGLGeometryType.FILL,Y,!1,aa);var ka=ca?r.hydrateMaterialKey(aa):aa;const ia=R.clone();aa=ia.outline;ia.outline=
null;R=[];ka={materialKey:ka,hash:ia.hash(),...C(ia)};R.push(ka);aa&&(Y=r.createMaterialKey(g.WGLGeometryType.LINE,Y,!0,!1),ca={materialKey:ca?r.hydrateMaterialKey(Y):Y,hash:aa.hash(),...C(aa)},R.push(ca));return{type:"composite-symbol",layers:R,hash:R.reduce((na,qa)=>qa.hash+na,"")}}function G(R,Y,aa){var ca=r.createMaterialKey(g.WGLGeometryType.LINE,Y,!1,!1);const ka=aa?r.hydrateMaterialKey(ca):ca;R=R.clone();ca=R.marker;R.marker=null;const ia=[];ia.push({materialKey:ka,hash:R.hash(),...C(R)});
if(ca){var na;Y=r.createMaterialKey(g.WGLGeometryType.MARKER,Y,!1,!1);aa=aa?r.hydrateMaterialKey(Y):Y;ca.color=null!=(na=ca.color)?na:R.color;ia.push({materialKey:aa,hash:ca.hash(),lineWidth:R.width,...C(ca)})}return{type:"composite-symbol",layers:ia,hash:ia.reduce((qa,ra)=>ra.hash+qa,"")}}function H(R,Y){const aa=R.labelPlacement;var ca=ja[Y];if(!R.symbol)return V.warn("No LabelClass symbol specified."),!0;if(!ca)return V.error(new x("mapview-labeling:unsupported-geometry-type",`Unable to create labels for Feature Layer, ${Y} is not supported`)),
!0;ca.some(ka=>ka===aa)||(ca=ca[0],aa&&V.warn(`Found invalid label placement type ${aa} for ${Y}. Defaulting to ${ca}`),R.labelPlacement=ca);return!1}function K(R,Y){R=m.clone(R);return R.some(aa=>H(aa,Y))?[]:R}function J(R,Y=!1){try{var aa,ca;const ka=Q(R,Y),ia={};ka.map(na=>{a:{switch(na.target){case "feature":L(ia,N(R),na);na=void 0;break a;case "aggregate":var qa=R.featureReduction;if("selection"===qa.type)throw new x("ValidationError","Mapview does not support `selection` reduction type",qa);
L(ia,N(R),na);ia.aggregate||(ia.aggregate={name:"aggregate",input:"feature",filters:null,attributes:{},params:{clusterRadius:f.pt2px(qa.clusterRadius/2),clusterPixelBuffer:64*Math.ceil(f.pt2px(qa.clusterMaxSize)/64),fields:na.aggregateFields}});F(ia.aggregate,na.attributes.fields);na=void 0;break a}na=void 0}return na});return{source:{definitionExpression:R.definitionExpression,fields:R.fields.map(na=>na.toJSON()),gdbVersion:R.gdbVersion,historicMoment:null==(aa=R.historicMoment)?void 0:aa.getTime(),
outFields:R.availableFields,pixelBuffer:R.pixelBuffer,spatialReference:R.spatialReference.toJSON(),timeExtent:null==(ca=R.timeExtent)?void 0:ca.toJSON()},attributes:{fields:{},indexCount:0},processors:ka,targets:ia}}catch(ka){if("ValidationError"===ka.fieldName)return V.error(ka),null;throw ka;}}function F(R,Y){for(const aa in Y){const ca=Y[aa];if(ca.target!==R.name)continue;const ka=R.attributes[aa];ka?(ka.context.mesh=ka.context.mesh||ca.context.mesh,ka.context.storage=ka.context.storage||ca.context.storage):
R.attributes[aa]=ca}return R}function N(R){var Y,aa,ca,ka,ia;return[null!=(Y=null==(aa=R.filter)?void 0:aa.toJSON())?Y:null,null!=(ca=null==(ka=R.effect)?void 0:null==(ia=ka.filter)?void 0:ia.toJSON())?ca:null]}function L(R,Y,aa){R.feature||(R.feature={name:"feature",input:"source",filters:Y,attributes:{}});F(R.feature,aa.attributes.fields);return R}function M(R,Y){return Y.field?S(R,{...Y,type:"field",field:Y.field}):Y.valueExpression?S(R,{...Y,type:"expression",valueExpression:Y.valueExpression}):
{field:null,fieldIndex:null}}function S(R,Y){switch(Y.type){case "expression":var aa=Y.valueExpression;if(!R.fields[aa]){var ca=R.indexCount++;R.fields[aa]={...Y,name:aa,fieldIndex:ca}}return{fieldIndex:R.fields[aa].fieldIndex};case "label-expression":return aa=JSON.stringify(Y.label),R.fields[aa]||(ca=R.indexCount++,R.fields[aa]={...Y,name:aa,fieldIndex:ca}),{fieldIndex:R.fields[aa].fieldIndex};case "field":aa=Y.field;if("aggregate"===Y.target&&R.fields[aa])return{field:aa};R.fields[aa]={...Y,name:aa};
return{field:aa};case "statistic":return R.fields[Y.name]={...Y},{field:Y.name}}}function Q(R,Y=!1){const aa=[];let ca=0;aa.push(W(R,ca++,Y));return aa}function U(R,Y,aa,ca,ka,ia=!1){Y=S(Y,{type:"label-expression",target:ca,context:{mesh:!0},resultType:"string",label:{labelExpression:aa.labelExpression,labelExpressionInfo:aa.labelExpressionInfo?{expression:aa.labelExpressionInfo.expression}:null,symbol:!!aa.symbol,where:aa.where}});({fieldIndex:Y}=Y);return{...A(aa,R,ia),fieldIndex:Y,target:ca,index:ka}}
function W(R,Y,aa=!1){const ca={indexCount:0,fields:{}};var ka="featureReduction"in R&&R.featureReduction;Y=ka?"aggregate":"feature";switch(R.renderer.type){case "heatmap":{const {blurRadius:na,fieldOffset:qa,field:ra}=R.renderer;return{type:"heatmap",aggregateFields:[],attributes:ca,target:Y,storage:null,mesh:{blurRadius:na,fieldOffset:qa,field:M(ca,{target:Y,field:ra,resultType:"numeric"}).field}}}default:{const na=[],qa="aggregate"===Y?c.createClusterRenderer(na,R.renderer,ka,null):R.renderer;
fa(ca,na);const ra=ha(ca,Y,qa,aa);var ia=null;const xa=Z(ca,Y,qa),ya=B.toJSONGeometryType(R.geometryType);R=R.labelsVisible&&R.labelingInfo||[];let Aa=[];if(ka){if("selection"===ka.type)throw new x("ValidationError","Mapview does not support `selection` reduction type",ka);ka.symbol&&(ia=new b({symbol:ka.symbol,visualVariables:"visualVariables"in qa?qa.visualVariables:null}),ia=ha(ca,Y,ia,aa));Aa=ka&&ka.labelsVisible&&ka.labelingInfo||[]}R=K(R,ya);Aa=K(Aa,ya);let Ba=0;ka=[...R.map(Ca=>U(qa,ca,Ca,
"feature",Ba++,aa)),...Aa.map(Ca=>U(qa,ca,Ca,"aggregate",Ba++,aa))];return{type:"symbol",target:Y,attributes:ca,aggregateFields:na,storage:xa,mesh:{matcher:ra,labels:ka,aggregateMatcher:ia}}}}}function fa(R,Y){const aa={mesh:!0,storage:!0};for(const ca of Y){const {name:ka,outStatistic:ia}=ca,{statisticType:na,onStatisticField:qa}=ia;let ra=Y=null,xa=null;"onStatisticValueExpression"in ia?ra=S(R,{type:"expression",target:"feature",valueExpression:ia.onStatisticValueExpression,resultType:"numeric"}).fieldIndex:
"onStatisticNormalizationField"in ia?(Y=S(R,{type:"field",target:"feature",field:qa,resultType:"numeric"}).field,xa=ia.onStatisticNormalizationField):Y=S(R,{type:"field",target:"feature",field:qa,resultType:"numeric"}).field;S(R,{type:"statistic",target:"aggregate",name:ka,context:aa,inField:Y,inNormalizationField:xa,inFieldIndex:ra,statisticType:na})}}function Z(R,Y,aa){switch(aa.type){case "dot-density":return T(R,Y,aa.attributes);case "simple":case "class-breaks":case "unique-value":return ba(R,
Y,aa.visualVariables);case "heatmap":case "dictionary":return null}}function T(R,Y,aa){return aa&&aa.length?{type:"dot-density",mapping:aa.map((ca,ka)=>{const {field:ia,fieldIndex:na}=M(R,{valueExpression:ca.valueExpression,field:ca.field,resultType:"numeric",target:Y});return{binding:ka,field:ia,fieldIndex:na}}),target:Y}:{type:"dot-density",mapping:[],target:Y}}function ba(R,Y,aa){if(!aa||!aa.length)return{type:"visual-variable",mapping:[],target:Y};const ca={storage:!0};return{type:"visual-variable",
mapping:D.simplifyVisualVariables(aa).map(ka=>{var ia;const na=u.getVVType(ka.type),{field:qa,fieldIndex:ra}=M(R,{target:Y,valueExpression:ka.valueExpression,field:ka.field,context:ca,resultType:"numeric"});switch(ka.type){case "size":return"$view.scale"===ka.valueExpression?null:{type:"size",binding:na,field:qa,fieldIndex:ra,normalizationField:M(R,{target:Y,field:ka.normalizationField,context:ca,resultType:"numeric"}).field,valueRepresentation:null!=(ia=ka.valueRepresentation)?ia:null};case "color":return{type:"color",
binding:na,field:qa,fieldIndex:ra,normalizationField:M(R,{target:Y,field:ka.normalizationField,context:ca,resultType:"numeric"}).field};case "opacity":return{type:"opacity",binding:na,field:qa,fieldIndex:ra,normalizationField:M(R,{target:Y,field:ka.normalizationField,context:ca,resultType:"numeric"}).field};case "rotation":return{type:"rotation",binding:na,field:qa,fieldIndex:ra}}}).filter(ka=>ka),target:Y}}function ha(R,Y,aa,ca=!1){R=z.unwrapOr(R,{indexCount:0,fields:{}});switch(aa.type){case "simple":case "dot-density":return sa(R,
aa,"dot-density"===aa.type,ca);case "class-breaks":return ua(R,Y,aa,ca);case "unique-value":return O(R,Y,aa,ca);case "dictionary":return{type:"dictionary",renderer:aa.toJSON()}}}function sa(R,Y,aa,ca=!1){R=Y.getSymbols();return{type:"simple",symbol:A(R.length?R[0]:null,Y,ca),isDotDensity:aa}}function ua(R,Y,aa,ca=!1){const ka=aa.backgroundFillSymbol,{field:ia,fieldIndex:na}=M(R,{target:Y,field:aa.field,valueExpression:aa.valueExpression,resultType:"numeric",context:{mesh:!0,use:"renderer.field"}});
Y=aa.normalizationType;Y="log"===Y?"esriNormalizeByLog":"percent-of-total"===Y?"esriNormalizeByPercentOfTotal":"field"===Y?"esriNormalizeByField":null;const qa=aa.classBreakInfos.map(ra=>({symbol:A(ra.symbol,aa,ca),min:ra.minValue,max:ra.maxValue})).sort((ra,xa)=>ra.min-xa.min);return{type:"interval",attributes:R.fields,field:ia,fieldIndex:na,backgroundFillSymbol:A(ka,aa,ca),defaultSymbol:A(aa.defaultSymbol,aa,ca),intervals:qa,normalizationField:aa.normalizationField,normalizationTotal:aa.normalizationTotal,
normalizationType:Y,isMaxInclusive:aa.isMaxInclusive}}function O(R,Y,aa,ca=!1){const ka=[],ia=aa.backgroundFillSymbol;Y={target:Y,context:{mesh:!0},resultType:"string"};if(aa.field&&"string"!==typeof aa.field)throw new x("ValidationError","Expected renderer.field to be a string",aa);const {field:na,fieldIndex:qa}=M(R,{...Y,field:aa.field,valueExpression:aa.valueExpression});for(const ra of aa.uniqueValueInfos)ka.push({value:""+ra.value,symbol:A(ra.symbol,aa,ca)});return{type:"map",attributes:R.fields,
field:na,fieldIndex:qa,field2:M(R,{...Y,field:aa.field2}).field,field3:M(R,{...Y,field:aa.field3}).field,fieldDelimiter:aa.fieldDelimiter,backgroundFillSymbol:A(ia,aa),defaultSymbol:A(aa.defaultSymbol,aa),map:ka}}const V=y.getLogger("esri.views.2d.layers.features.schemaUtils"),ja={esriGeometryPoint:"above-right above-center above-left center-center center-left center-right below-center below-left below-right".split(" "),esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along"],
esriGeometryMultipoint:null};t.addAggregateFields=fa;t.createMatcherSchema=ha;t.createSchema=function(R){k("esri-2d-update-debug")&&console.debug("Created new schema",J(R,!0));return J(R)};t.createSymbolSchema=A;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/renderers/Renderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/JSONSupport ./support/AuthoringInfo".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n){m=new f.JSONMap({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary"},{ignoreUnknown:!0});p=function(d){function b(c){c=d.call(this,c)||this;c.authoringInfo=null;c.type=null;return c}t._inheritsLoose(b,d);var a=b.prototype;a.getRequiredFields=async function(c){if(!this.collectRequiredFields)return[];const g=new Set;await this.collectRequiredFields(g,c);return Array.from(g).sort()};
a.getSymbol=function(c,g){};a.getSymbolAsync=async function(c,g){};a.getSymbols=function(){return[]};a.getAttributeHash=function(){return JSON.stringify(this)};a.getMeshHash=function(){return JSON.stringify(this)};return b}(p.JSONSupport);k.__decorate([x.property({type:n,json:{write:!0}})],p.prototype,"authoringInfo",void 0);k.__decorate([x.property({type:m.apiValues,readOnly:!0,json:{type:m.jsonValues,read:!1,write:{writer:m.write,ignoreOrigin:!0}}})],p.prototype,"type",void 0);return p=k.__decorate([h.subclass("esri.renderers.Renderer")],
p)})},"esri/renderers/support/AuthoringInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/lang ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ./AuthoringInfoFieldInfo ./AuthoringInfoVisualVariable ../../tasks/support/colorRamps".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d,b,a,c){var g;m=new h.JSONMap({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"});h=new h.JSONMap({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"});
y="inches feet yards miles nautical-miles millimeters centimeters decimeters meters kilometers decimal-degrees".split(" ");d=g=function(r){function u(v){v=r.call(this,v)||this;v.colorRamp=null;v.lengthUnit=null;v.maxSliderValue=null;v.minSliderValue=null;v.visualVariables=null;return v}t._inheritsLoose(u,r);var w=u.prototype;w.readColorRamp=function(v){if(v)return c.fromJSON(v)};w.clone=function(){return new g({classificationMethod:this.classificationMethod,colorRamp:z.clone(this.colorRamp),fields:this.fields&&
this.fields.slice(0),field1:z.clone(this.field1),field2:z.clone(this.field2),focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(v=>v.clone()),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme})};t._createClass(u,[{key:"classificationMethod",
get:function(){const v=this._get("classificationMethod"),D=this.type;return D&&"relationship"!==D?"class-breaks-size"===D||"class-breaks-color"===D?v||"manual":null:v},set:function(v){this._set("classificationMethod",v)}},{key:"fields",get:function(){return this.type&&"predominance"!==this.type?null:this._get("fields")},set:function(v){this._set("fields",v)}},{key:"field1",get:function(){return this.type&&"relationship"!==this.type?null:this._get("field1")},set:function(v){this._set("field1",v)}},
{key:"field2",get:function(){return this.type&&"relationship"!==this.type?null:this._get("field2")},set:function(v){this._set("field2",v)}},{key:"focus",get:function(){return this.type&&"relationship"!==this.type?null:this._get("focus")},set:function(v){this._set("focus",v)}},{key:"numClasses",get:function(){return this.type&&"relationship"!==this.type?null:this._get("numClasses")},set:function(v){this._set("numClasses",v)}},{key:"statistics",get:function(){return"univariate-color-size"===this.type&&
"above-and-below"===this.univariateTheme?this._get("statistics"):null},set:function(v){this._set("statistics",v)}},{key:"standardDeviationInterval",get:function(){const v=this.type;return v&&"relationship"!==v&&"class-breaks-size"!==v&&"class-breaks-color"!==v?null:this.classificationMethod&&"standard-deviation"!==this.classificationMethod?null:this._get("standardDeviationInterval")},set:function(v){this._set("standardDeviationInterval",v)}},{key:"type",get:function(){return this._get("type")},set:function(v){let D=
v;"classed-size"===v?D="class-breaks-size":"classed-color"===v&&(D="class-breaks-color");this._set("type",D)}},{key:"univariateSymbolStyle",get:function(){return"univariate-color-size"===this.type&&"above-and-below"===this.univariateTheme?this._get("univariateSymbolStyle"):null},set:function(v){this._set("univariateSymbolStyle",v)}},{key:"univariateTheme",get:function(){return"univariate-color-size"===this.type?this._get("univariateTheme"):null},set:function(v){this._set("univariateTheme",v)}}]);
return u}(d.JSONSupport);k.__decorate([f.property({type:m.apiValues,value:null,json:{type:m.jsonValues,read:m.read,write:m.write,origins:{"web-document":{default:"manual",type:m.jsonValues,read:m.read,write:m.write}}}})],d.prototype,"classificationMethod",null);k.__decorate([f.property({types:c.types,json:{write:!0}})],d.prototype,"colorRamp",void 0);k.__decorate([e.reader("colorRamp")],d.prototype,"readColorRamp",null);k.__decorate([f.property({type:[String],value:null,json:{write:!0}})],d.prototype,
"fields",null);k.__decorate([f.property({type:b["default"],value:null,json:{write:!0}})],d.prototype,"field1",null);k.__decorate([f.property({type:b["default"],value:null,json:{write:!0}})],d.prototype,"field2",null);k.__decorate([f.property({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],d.prototype,"focus",null);k.__decorate([f.property({type:Number,value:null,json:{type:x.Integer,write:!0}})],d.prototype,"numClasses",null);k.__decorate([f.property({type:y,json:{type:y,read:!1,write:!1,
origins:{"web-scene":{read:!0,write:!0}}}})],d.prototype,"lengthUnit",void 0);k.__decorate([f.property({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],d.prototype,"maxSliderValue",void 0);k.__decorate([f.property({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],d.prototype,"minSliderValue",void 0);k.__decorate([f.property({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],d.prototype,"statistics",null);k.__decorate([f.property({type:[.25,
.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],d.prototype,"standardDeviationInterval",null);k.__decorate([f.property({type:h.apiValues,value:null,json:{type:h.jsonValues,read:h.read,write:h.write}})],d.prototype,"type",null);k.__decorate([f.property({type:[a],json:{write:!0}})],d.prototype,"visualVariables",void 0);k.__decorate([f.property({type:"caret circle-caret arrow circle-arrow plus-minus circle-plus-minus square circle triangle happy-sad thumb custom".split(" "),value:null,json:{write:!0,
origins:{"web-scene":{write:!1}}}})],d.prototype,"univariateSymbolStyle",null);k.__decorate([f.property({type:["high-to-low","above-and-below","above","below","90-10"],value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],d.prototype,"univariateTheme",null);return d=g=k.__decorate([l.subclass("esri.renderers.support.AuthoringInfo")],d)})},"esri/renderers/support/AuthoringInfoFieldInfo":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/lang ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ./AuthoringInfoClassBreakInfo".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d,b){var a;t.AuthoringInfoFieldInfo=a=function(c){function g(r){r=c.call(this,r)||this;r.field="";r.normalizationField="";r.label="";r.classBreakInfos=[];return r}k._inheritsLoose(g,c);g.prototype.clone=function(){return new a({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:y.clone(this.classBreakInfos)})};return g}(d.JSONSupport);m.__decorate([h.property({type:String,json:{write:!0}})],t.AuthoringInfoFieldInfo.prototype,
"field",void 0);m.__decorate([h.property({type:String,json:{write:!0}})],t.AuthoringInfoFieldInfo.prototype,"normalizationField",void 0);m.__decorate([h.property({type:String,json:{write:!0}})],t.AuthoringInfoFieldInfo.prototype,"label",void 0);m.__decorate([h.property({type:[b["default"]],json:{write:!0}})],t.AuthoringInfoFieldInfo.prototype,"classBreakInfos",void 0);t.AuthoringInfoFieldInfo=a=m.__decorate([l.subclass("esri.renderers.support.AuthoringInfoFieldInfo")],t.AuthoringInfoFieldInfo);t.default=
t.AuthoringInfoFieldInfo;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/renderers/support/AuthoringInfoClassBreakInfo":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n){var d;t.AuthoringInfoClassBreakInfo=d=function(b){function a(c){c=b.call(this,c)||this;c.minValue=0;c.maxValue=0;return c}k._inheritsLoose(a,b);a.prototype.clone=function(){return new d({minValue:this.minValue,maxValue:this.maxValue})};return a}(n.JSONSupport);m.__decorate([f.property({type:Number,json:{write:!0}})],t.AuthoringInfoClassBreakInfo.prototype,"minValue",void 0);m.__decorate([f.property({type:Number,json:{write:!0}})],t.AuthoringInfoClassBreakInfo.prototype,
"maxValue",void 0);t.AuthoringInfoClassBreakInfo=d=m.__decorate([e.subclass("esri.renderer.support.AuthoringInfoClassBreakInfo")],t.AuthoringInfoClassBreakInfo);t.default=t.AuthoringInfoClassBreakInfo;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/renderers/support/AuthoringInfoVisualVariable":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p){var n;m=new f.JSONMap({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"});f=new f.JSONMap({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"});z={key(b){return"number"===typeof b?"number":"string"},typeMap:{number:Number,string:String},base:null};const d=["high-to-low","above-and-below","centered-on","extremes"];e=[...new Set("high-to-low above-and-below centered-on extremes 90-10 above below high-to-low above-and-below 90-10 above below".split(" "))];
l="seconds minutes hours days months years".split(" ");p=n=function(b){function a(g){g=b.call(this,g)||this;g.endTime=null;g.field=null;g.maxSliderValue=null;g.minSliderValue=null;g.startTime=null;g.type=null;g.units=null;return g}t._inheritsLoose(a,b);var c=a.prototype;c.castEndTime=function(g){return"string"===typeof g||"number"===typeof g?g:null};c.castStartTime=function(g){return"string"===typeof g||"number"===typeof g?g:null};c.clone=function(){return new n({endTime:this.endTime,field:this.field,
maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})};t._createClass(a,[{key:"style",get:function(){return"color"===this.type?this._get("style"):null},set:function(g){this._set("style",g)}},{key:"theme",get:function(){return"color"===this.type||"size"===this.type?this._get("theme")||"high-to-low":null},set:function(g){this._set("theme",g)}}]);return a}(p.JSONSupport);k.__decorate([y.property({types:z,
json:{write:!0}})],p.prototype,"endTime",void 0);k.__decorate([x.cast("endTime")],p.prototype,"castEndTime",null);k.__decorate([y.property({type:String,json:{write:!0}})],p.prototype,"field",void 0);k.__decorate([y.property({type:Number,json:{write:!0}})],p.prototype,"maxSliderValue",void 0);k.__decorate([y.property({type:Number,json:{write:!0}})],p.prototype,"minSliderValue",void 0);k.__decorate([y.property({types:z,json:{write:!0}})],p.prototype,"startTime",void 0);k.__decorate([x.cast("startTime")],
p.prototype,"castStartTime",null);k.__decorate([y.property({type:m.apiValues,value:null,json:{type:m.jsonValues,read:m.read,write:m.write}})],p.prototype,"style",null);k.__decorate([y.property({type:e,value:null,json:{type:e,origins:{"web-scene":{type:d,write:{writer:(b,a)=>{-1<d.indexOf(b)&&(a.theme=b)}}}},write:!0}})],p.prototype,"theme",null);k.__decorate([y.property({type:f.apiValues,json:{type:f.jsonValues,read:f.read,write:f.write}})],p.prototype,"type",void 0);k.__decorate([y.property({type:l,
json:{type:l,write:!0}})],p.prototype,"units",void 0);return p=n=k.__decorate([h.subclass("esri.renderers.support.AuthoringInfoVisualVariable")],p)})},"esri/tasks/support/colorRamps":function(){define(["exports","./ColorRamp","./AlgorithmicColorRamp","./MultipartColorRamp"],function(t,k,m,z){k={key:"type",base:k,typeMap:{algorithmic:m,multipart:z}};t.fromJSON=function(y){return y&&y.type?"algorithmic"===y.type?m.fromJSON(y):"multipart"===y.type?z.fromJSON(y):null:null};t.types=k;Object.defineProperty(t,
"__esModule",{value:!0})})},"esri/tasks/support/ColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport".split(" "),function(t,k,m,z,y,x,f,h,e,l,q,p){m=function(n){function d(b){b=n.call(this,
b)||this;b.type=null;return b}t._inheritsLoose(d,n);return d}(p.JSONSupport);k.__decorate([x.property({readOnly:!0,json:{read:!1,write:!0}})],m.prototype,"type",void 0);return m=k.__decorate([h.subclass("esri.tasks.support.ColorRamp")],m)})},"esri/tasks/support/AlgorithmicColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/lang ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../Color ./ColorRamp".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d){var b;m=b=function(a){function c(g){g=a.call(this,g)||this;g.algorithm=null;g.fromColor=null;g.toColor=null;g.type="algorithmic";return g}t._inheritsLoose(c,a);c.prototype.clone=function(){return new b({fromColor:z.clone(this.fromColor),toColor:z.clone(this.toColor),algorithm:this.algorithm})};return c}(d);k.__decorate([h.enumeration({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],m.prototype,"algorithm",void 0);k.__decorate([f.property({type:n,
json:{type:[x.Integer],write:!0}})],m.prototype,"fromColor",void 0);k.__decorate([f.property({type:n,json:{type:[x.Integer],write:!0}})],m.prototype,"toColor",void 0);k.__decorate([f.property({type:["algorithmic"]})],m.prototype,"type",void 0);return m=b=k.__decorate([e.subclass("esri.tasks.support.AlgorithmicColorRamp")],m)})},"esri/tasks/support/MultipartColorRamp":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/lang ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ./ColorRamp ./AlgorithmicColorRamp".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d){var b;m=b=function(a){function c(g){g=a.call(this,g)||this;g.colorRamps=null;g.type="multipart";return g}t._inheritsLoose(c,a);c.prototype.clone=function(){return new b({colorRamps:z.clone(this.colorRamps)})};return c}(n);k.__decorate([f.property({type:[d],json:{write:!0}})],m.prototype,"colorRamps",void 0);k.__decorate([f.property({type:["multipart"]})],m.prototype,"type",void 0);return m=b=k.__decorate([e.subclass("esri.tasks.support.MultipartColorRamp")],m)})},
"esri/symbols/support/jsonUtils":function(){define("exports ../../core/Error ../Symbol3D ../WebStyleSymbol ../../symbols ./symbolConversion".split(" "),function(t,k,m,z,y,x){function f(h,e,l){if(!h)return null;if(!(!l||"web-scene"!==l.origin||h instanceof m||h instanceof z)){const q="cim"!==h.type?x.to3D(h):{symbol:null,error:new k("symbol-conversion:unsupported-cim-symbol","CIM symbol is unsupported in web scenes",{symbol:h})};if(q.symbol)return q.symbol.write(e,l);l.messages&&l.messages.push(new k("symbol:unsupported",
`Symbols of type '${h.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:h,context:l,error:q.error}));return null}return l&&"web-map"===l.origin&&"web-style"===h.type?(l.messages&&l.messages.push(new k("symbol:unsupported",`Symbols of type '${h.declaredClass}' are not supported in webmaps. Use CIMSymbol instead when working with WebMap in MapView.`,{symbol:h,context:l})),null):h.write(e,l)}t.fromJSON=function(h,e){return y.readSymbol(h,
null,e)};t.write=function(h,e,l,q){(h=f(h,{},q))&&(e[l]=h)};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/symbols/support/symbolConversion":function(){define("exports ../../core/Error ../SimpleLineSymbol ../LabelSymbol3D ../LineSymbol3D ../PictureMarkerSymbol ../PointSymbol3D ../PolygonSymbol3D ../SimpleFillSymbol ../SimpleMarkerSymbol ../TextSymbol ../WebStyleSymbol ../../symbols".split(" "),function(t,k,m,z,y,x,f,h,e,l,q,p,n){t.to3D=function(d,b=!1,a=!1,c=!0){if(!d)return{symbol:null};
if(n.isSymbol3D(d)||d instanceof p)c=d.clone();else if("cim"===d.type)c=f.fromCIMSymbol(d);else if(d instanceof m)c=y.fromSimpleLineSymbol(d);else if(d instanceof l)c=f.fromSimpleMarkerSymbol(d);else if(d instanceof x)c=f.fromPictureMarkerSymbol(d);else if(d instanceof e)c=h.fromSimpleFillSymbol(d);else if(d instanceof q)c=c?z.fromTextSymbol(d):f.fromTextSymbol(d);else return{error:new k("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${d.type||d.declaredClass}' is unsupported in 3D`,
{symbol:d})};b&&(c.id=d.id);if(a&&n.isSymbol3D(c))for(d=0;d<c.symbolLayers.length;++d)c.symbolLayers.getItemAt(d)._ignoreDrivers=!0;return{symbol:c}};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/renderers/ClassBreaksRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/lang ../core/maybe ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/jsonMap ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../support/arcadeOnDemand ../layers/support/fieldUtils ../symbols ./support/LegendOptions ./Renderer ./mixins/VisualVariablesMixin ./support/ClassBreakInfo ./support/commonProperties".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d,b,a,c,g,r,u,w,v,D,B,C){var A;const E=x.getLogger("esri.renderers.ClassBreaksRenderer");m=new l.JSONMap({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});const G=f.ensureType(B);v=A=function(H){function K(F){F=H.call(this,F)||this;F._compiledValueExpression={valueExpression:null,compiledFunction:null};F.backgroundFillSymbol=null;F.classBreakInfos=null;F.defaultLabel=null;F.defaultSymbol=null;F.field=null;F.isMaxInclusive=
!0;F.legendOptions=null;F.normalizationField=null;F.normalizationTotal=null;F.type="class-breaks";F.valueExpression=null;F.valueExpressionTitle=null;F._set("classBreakInfos",[]);return F}t._inheritsLoose(K,H);var J=K.prototype;J.readClassBreakInfos=function(F,N,L){if(Array.isArray(F)){var M=N.minValue;return F.map(S=>{const Q=new B;Q.read(S,L);null==Q.minValue&&(Q.minValue=M);null==Q.maxValue&&(Q.maxValue=Q.minValue);M=Q.maxValue;return Q})}};J.writeClassBreakInfos=function(F,N,L,M){F=F.map(S=>S.write({},
M));this._areClassBreaksConsecutive()&&F.forEach(S=>delete S.classMinValue);N[L]=F};J.castField=function(F){return null==F?F:"function"===typeof F?(E.error(".field: field must be a string value"),null):f.ensureString(F)};J.addClassBreakInfo=function(F,N,L){let M=null;M="number"===typeof F?new B({minValue:F,maxValue:N,symbol:u.ensureType(L)}):G(z.clone(F));this.classBreakInfos.push(M);1===this.classBreakInfos.length&&this.notifyChange("minValue")};J.removeClassBreakInfo=function(F,N){const L=this.classBreakInfos.length;
for(let M=0;M<L;M++){const S=[this.classBreakInfos[M].minValue,this.classBreakInfos[M].maxValue];if(S[0]===F&&S[1]===N){this.classBreakInfos.splice(M,1);break}}};J.getBreakIndex=function(F,N){this.valueExpression&&(y.isNone(N)||y.isNone(N.arcade))&&E.warn("");return this.valueExpression?this._getBreakIndexForExpression(F,N):this._getBreakIndexForField(F)};J.getClassBreakInfo=async function(F,N){let L=N;this.valueExpression&&(y.isNone(N)||y.isNone(N.arcade))&&(L={...L,arcade:await g.loadArcade()});
F=this.getBreakIndex(F,L);return-1!==F?this.classBreakInfos[F]:null};J.getSymbol=function(F,N){if(this.valueExpression&&(y.isNone(N)||y.isNone(N.arcade)))E.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");else return F=this.getBreakIndex(F,N),-1<F?this.classBreakInfos[F].symbol:this.defaultSymbol};J.getSymbolAsync=async function(F,N){let L=N;if(this.valueExpression&&(y.isNone(N)||y.isNone(N.arcade))){N=await g.loadArcade();const {arcadeUtils:M}=N;M.hasGeometryOperations(this.valueExpression)&&
await M.enableGeometryOperations();L={...L,arcade:N}}F=this.getBreakIndex(F,L);return-1<F?this.classBreakInfos[F].symbol:this.defaultSymbol};J.getSymbols=function(){const F=[];this.classBreakInfos.forEach(N=>{N.symbol&&F.push(N.symbol)});this.defaultSymbol&&F.push(this.defaultSymbol);return F};J.getAttributeHash=function(){return this.visualVariables&&this.visualVariables.reduce((F,N)=>F+N.getAttributeHash(),"")};J.getMeshHash=function(){const F=JSON.stringify(this.backgroundFillSymbol),N=JSON.stringify(this.defaultSymbol),
L=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`,M=this.classBreakInfos.reduce((S,Q)=>S+Q.getMeshHash(),"");return`${F}.${N}.${M}.${L}.${this.field}.${this.valueExpression}`};J.clone=function(){return new A({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol&&this.backgroundFillSymbol.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,
classBreakInfos:z.clone(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:z.clone(this.visualVariables),legendOptions:z.clone(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})};J.collectRequiredFields=async function(F,N){F=[this.collectVVRequiredFields(F,N),this.collectSymbolFields(F,N)];await Promise.all(F)};J.collectSymbolFields=
async function(F,N){const L=[...this.getSymbols().map(M=>M.collectRequiredFields(F,N)),r.collectArcadeFieldNames(F,N,this.valueExpression)];r.collectField(F,N,this.field);r.collectField(F,N,this.normalizationField);await Promise.all(L)};J._getBreakIndexForExpression=function(F,N){const {viewingMode:L,scale:M,spatialReference:S,arcade:Q}=y.unwrapOr(N,{});var U=this._compiledValueExpression.valueExpression===this.valueExpression?this._compiledValueExpression.compiledFunction:null;N=y.unwrap(Q).arcadeUtils;
U||(U=N.createSyntaxTree(this.valueExpression),U=N.createFunction(U),this._compiledValueExpression.compiledFunction=U);this._compiledValueExpression.valueExpression=this.valueExpression;F=N.executeFunction(U,N.createExecContext(F,N.getViewInfo({viewingMode:L,scale:M,spatialReference:S})));return this._getBreakIndexfromInfos(F)};J._getBreakIndexForField=function(F){var N=F.attributes;F=this.normalizationType;let L=parseFloat(N[this.field]);if(F){const M=this.normalizationTotal;N=parseFloat(N[this.normalizationField]);
if("log"===F)L=Math.log(L)*Math.LOG10E;else if("percent-of-total"===F&&!isNaN(M))L=L/M*100;else if("field"===F&&!isNaN(N)){if(isNaN(L)||isNaN(N))return-1;L/=N}}return this._getBreakIndexfromInfos(L)};J._getBreakIndexfromInfos=function(F){const N=this.isMaxInclusive;if(null!=F&&"number"===typeof F&&!isNaN(F))for(let L=0;L<this.classBreakInfos.length;L++){const M=[this.classBreakInfos[L].minValue,this.classBreakInfos[L].maxValue];if(M[0]<=F&&(N?F<=M[1]:F<M[1]))return L}return-1};J._areClassBreaksConsecutive=
function(){const F=this.classBreakInfos,N=F.length;for(let L=1;L<N;L++)if(F[L-1].maxValue!==F[L].minValue)return!1;return!0};t._createClass(K,[{key:"minValue",get:function(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}},{key:"normalizationType",get:function(){let F=this._get("normalizationType");const N=!!this.normalizationField,L=null!=this.normalizationTotal;if(N||L)F=N&&"field"||L&&"percent-of-total"||null,N&&L&&E.warn("warning: both normalizationField and normalizationTotal are set!");
else if("field"===F||"percent-of-total"===F)F=null;return F},set:function(F){this._set("normalizationType",F)}},{key:"arcadeRequired",get:function(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}}]);return K}(D.VisualVariablesMixin(v));k.__decorate([h.property(C.rendererBackgroundFillSymbolProperty)],v.prototype,"backgroundFillSymbol",void 0);k.__decorate([h.property({type:[B]})],v.prototype,"classBreakInfos",void 0);k.__decorate([p.reader("classBreakInfos")],v.prototype,"readClassBreakInfos",
null);k.__decorate([d.writer("classBreakInfos")],v.prototype,"writeClassBreakInfos",null);k.__decorate([h.property({type:String,json:{write:!0}})],v.prototype,"defaultLabel",void 0);k.__decorate([h.property(C.rendererSymbolProperty)],v.prototype,"defaultSymbol",void 0);k.__decorate([h.property({type:String,json:{write:!0}})],v.prototype,"field",void 0);k.__decorate([e.cast("field")],v.prototype,"castField",null);k.__decorate([h.property({type:Boolean})],v.prototype,"isMaxInclusive",void 0);k.__decorate([h.property({type:w["default"],
json:{write:!0}})],v.prototype,"legendOptions",void 0);k.__decorate([h.property({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return 0!==this.classBreakInfos.length&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],v.prototype,"minValue",null);k.__decorate([h.property({type:String,json:{write:!0}})],v.prototype,"normalizationField",void 0);k.__decorate([h.property({type:Number,cast:H=>f.ensureNumber(H),json:{write:!0}})],v.prototype,"normalizationTotal",
void 0);k.__decorate([h.property({type:m.apiValues,value:null,json:{type:m.jsonValues,read:m.read,write:m.write}})],v.prototype,"normalizationType",null);k.__decorate([q.enumeration({classBreaks:"class-breaks"})],v.prototype,"type",void 0);k.__decorate([h.property({type:String,json:{write:!0}})],v.prototype,"valueExpression",void 0);k.__decorate([h.property({type:String,json:{write:!0}})],v.prototype,"valueExpressionTitle",void 0);return v=A=k.__decorate([n.subclass("esri.renderers.ClassBreaksRenderer")],
v)})},"esri/renderers/support/LegendOptions":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport".split(" "),function(t,k,m,z,y,x,f,h,e,l,q,p,n){var d;t.LegendOptions=d=function(b){function a(){var c=
b.apply(this,arguments)||this;c.title=null;return c}k._inheritsLoose(a,b);a.prototype.clone=function(){return new d({title:this.title})};return a}(n.JSONSupport);m.__decorate([f.property({type:String,json:{write:!0}})],t.LegendOptions.prototype,"title",void 0);t.LegendOptions=d=m.__decorate([e.subclass("esri.renderers.support.LegendOptions")],t.LegendOptions);t.default=t.LegendOptions;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/renderers/mixins/VisualVariablesMixin":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../layers/support/fieldUtils ../visualVariables/VisualVariable ../visualVariables/ColorVariable ../visualVariables/OpacityVariable ../visualVariables/RotationVariable ../visualVariables/SizeVariable ../visualVariables/VisualVariableFactory".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d,b,a,c,g,r,u,w){const v={base:a,key:"type",typeMap:{opacity:g,color:c,rotation:r,size:u}};t.VisualVariablesMixin=D=>{D=function(B){function C(){var E=B.apply(this,arguments)||this;E._vvFactory=new w;return E}k._inheritsLoose(C,B);var A=C.prototype;A.readVisualVariables=function(E,G,H){return this._vvFactory.readVariables(E,G,H)};A.writeVisualVariables=function(E,G,H,K){G[H]=this._vvFactory.writeVariables(E,K)};A.hasVisualVariables=function(E,G){return E?!!this.getVisualVariablesForType(E,
G):!!(this.getVisualVariablesForType("size",G)||this.getVisualVariablesForType("color",G)||this.getVisualVariablesForType("opacity",G)||this.getVisualVariablesForType("rotation",G))};A.getVisualVariablesForType=function(E,G){var H=this.visualVariables;if(H&&(H=H.filter(K=>K.type===E&&("string"===typeof G?K.target===G:!1===G?!K.target:!0)),!H||0!==H.length))return H};A.collectVVRequiredFields=async function(E,G){let H=[];this.visualVariables&&(H=H.concat(this.visualVariables));for(const K of H)K&&
(K.field&&b.collectField(E,G,K.field),K.normalizationField&&b.collectField(E,G,K.normalizationField),K.valueExpression&&await b.collectArcadeFieldNames(E,G,K.valueExpression))};k._createClass(C,[{key:"visualVariables",set:function(E){this._vvFactory.visualVariables=E;this._set("visualVariables",this._vvFactory.visualVariables)}},{key:"arcadeRequiredForVisualVariables",get:function(){if(!this.visualVariables)return!1;for(const E of this.visualVariables)if(E.arcadeRequired)return!0;return!1}}]);return C}(D);
m.__decorate([f.property({types:[v],value:null,json:{write:!0}})],D.prototype,"visualVariables",null);m.__decorate([e.reader("visualVariables",["visualVariables","rotationType","rotationExpression"])],D.prototype,"readVisualVariables",null);m.__decorate([q.writer("visualVariables")],D.prototype,"writeVisualVariables",null);return D=m.__decorate([l.subclass("esri.renderers.mixins.VisualVariablesMixin")],D)};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/renderers/visualVariables/VisualVariable":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ./support/VisualVariableLegendOptions".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d){const b=z.getLogger("esri.renderers.visualVariables.VisualVariable");m=new h.JSONMap({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});n=function(a){function c(r){r=a.call(this,r)||this;r.index=null;r.type=null;r.field=null;r.valueExpression=null;r.valueExpressionTitle=null;r.legendOptions=null;return r}t._inheritsLoose(c,a);var g=c.prototype;g.castField=function(r){return null==r?r:"function"===typeof r?(b.error(".field: field must be a string value"),
null):y.ensureString(r)};g.clone=function(){};g.getAttributeHash=function(){return`${this.type}-${this.field}-${this.valueExpression}`};t._createClass(c,[{key:"arcadeRequired",get:function(){return!!this.valueExpression}}]);return c}(n.JSONSupport);k.__decorate([x.property()],n.prototype,"index",void 0);k.__decorate([x.property({type:m.apiValues,readOnly:!0,json:{read:m.read,write:m.write}})],n.prototype,"type",void 0);k.__decorate([x.property({type:String,json:{write:!0}})],n.prototype,"field",void 0);
k.__decorate([f.cast("field")],n.prototype,"castField",null);k.__decorate([x.property({type:String,json:{write:!0}})],n.prototype,"valueExpression",void 0);k.__decorate([x.property({type:String,json:{write:!0}})],n.prototype,"valueExpressionTitle",void 0);k.__decorate([x.property({readOnly:!0})],n.prototype,"arcadeRequired",null);k.__decorate([x.property({type:d,json:{write:!0}})],n.prototype,"legendOptions",void 0);return n=k.__decorate([e.subclass("esri.renderers.visualVariables.VisualVariable")],
n)})},"esri/renderers/visualVariables/support/VisualVariableLegendOptions":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../support/LegendOptions".split(" "),function(t,k,
m,z,y,x,f,h,e,l,q,p){var n;m=n=function(d){function b(){var a=d.apply(this,arguments)||this;a.showLegend=null;return a}t._inheritsLoose(b,d);b.prototype.clone=function(){return new n({title:this.title,showLegend:this.showLegend})};return b}(p["default"]);k.__decorate([x.property({type:Boolean,json:{write:!0}})],m.prototype,"showLegend",void 0);return m=n=k.__decorate([h.subclass("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],m)})},"esri/renderers/visualVariables/ColorVariable":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ./support/ColorStop ./VisualVariable".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n){var d;m=d=function(b){function a(g){g=b.call(this,g)||this;g.type="color";g.normalizationField=null;return g}t._inheritsLoose(a,b);var c=a.prototype;c.clone=function(){return new d({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(g=>g.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})};c.getAttributeHash=function(){return`${b.prototype.getAttributeHash.call(this)}-${this.normalizationField}`};
c._interpolateData=function(){return this.stops&&this.stops.map(g=>g.value||0)};t._createClass(a,[{key:"cache",get:function(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}},{key:"stops",set:function(g){g&&Array.isArray(g)&&(g=g.filter(r=>!!r),g.sort((r,u)=>r.value-u.value));this._set("stops",g)}}]);return a}(n);k.__decorate([x.property({readOnly:!0})],m.prototype,"cache",null);k.__decorate([x.property({type:["color"],json:{type:["colorInfo"]}})],m.prototype,
"type",void 0);k.__decorate([x.property({type:String,json:{write:!0}})],m.prototype,"normalizationField",void 0);k.__decorate([x.property({type:[p],json:{write:!0}})],m.prototype,"stops",null);return m=d=k.__decorate([h.subclass("esri.renderers.visualVariables.ColorVariable")],m)})},"esri/renderers/visualVariables/support/ColorStop":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../core/accessorSupport/decorators/writer ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../../core/JSONSupport ../../../Color".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d){var b;m=b=function(a){function c(r){r=a.call(this,r)||this;r.color=null;r.label=null;r.value=null;return r}t._inheritsLoose(c,a);var g=c.prototype;g.writeValue=function(r,u,w){u[w]=null==r?0:r};g.clone=function(){return new b({color:this.color&&this.color.clone(),label:this.label,value:this.value})};return c}(n.JSONSupport);k.__decorate([x.property({type:d,json:{type:[y.Integer],write:!0}})],m.prototype,"color",void 0);k.__decorate([x.property({type:String,json:{write:!0}})],
m.prototype,"label",void 0);k.__decorate([x.property({type:Number,json:{write:{allowNull:!0}}})],m.prototype,"value",void 0);k.__decorate([e.writer("value")],m.prototype,"writeValue",null);return m=b=k.__decorate([h.subclass("esri.renderers.visualVariables.support.ColorStop")],m)})},"esri/renderers/visualVariables/OpacityVariable":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ./VisualVariable ./support/OpacityStop".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n){var d;m=d=function(b){function a(g){g=b.call(this,g)||this;g.type="opacity";g.normalizationField=null;return g}t._inheritsLoose(a,b);var c=a.prototype;c.clone=function(){return new d({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(g=>g.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})};c.getAttributeHash=function(){return`${b.prototype.getAttributeHash.call(this)}-${this.normalizationField}`};
c._interpolateData=function(){return this.stops&&this.stops.map(g=>g.value||0)};t._createClass(a,[{key:"cache",get:function(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}},{key:"stops",set:function(g){g&&Array.isArray(g)&&(g=g.filter(r=>!!r),g.sort((r,u)=>r.value-u.value));this._set("stops",g)}}]);return a}(p);k.__decorate([x.property({readOnly:!0})],m.prototype,"cache",null);k.__decorate([x.property({type:["opacity"],json:{type:["transparencyInfo"]}})],
m.prototype,"type",void 0);k.__decorate([x.property({type:String,json:{write:!0}})],m.prototype,"normalizationField",void 0);k.__decorate([x.property({type:[n],json:{write:!0}})],m.prototype,"stops",null);return m=d=k.__decorate([h.subclass("esri.renderers.visualVariables.OpacityVariable")],m)})},"esri/renderers/visualVariables/support/OpacityStop":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/jsonMap ../../../core/accessorSupport/decorators/reader ../../../core/accessorSupport/decorators/subclass ../../../core/accessorSupport/decorators/writer ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../../core/JSONSupport ../../../webdoc/support/opacityUtils".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d,b){var a;m=a=function(c){function g(u){u=c.call(this,u)||this;u.label=null;u.opacity=null;u.value=null;return u}t._inheritsLoose(g,c);var r=g.prototype;r.readOpacity=function(u,w){return b.transparencyToOpacity(w.transparency)};r.writeOpacity=function(u,w,v){w[v]=b.opacityToTransparency(u)};r.clone=function(){return new a({label:this.label,opacity:this.opacity,value:this.value})};return g}(d.JSONSupport);k.__decorate([x.property({type:String,json:{write:!0}})],
m.prototype,"label",void 0);k.__decorate([x.property({type:Number,json:{type:y.Integer,write:{target:"transparency"}}})],m.prototype,"opacity",void 0);k.__decorate([h.reader("opacity",["transparency"])],m.prototype,"readOpacity",null);k.__decorate([l.writer("opacity")],m.prototype,"writeOpacity",null);k.__decorate([x.property({type:Number,json:{write:!0}})],m.prototype,"value",void 0);return m=a=k.__decorate([e.subclass("esri.renderers.visualVariables.support.OpacityStop")],m)})},"esri/renderers/visualVariables/RotationVariable":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/Error ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ./VisualVariable".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d){var b;m=b=function(a){function c(r){r=a.call(this,r)||this;r.axis=null;r.type="rotation";r.rotationType="geographic";r.valueExpressionTitle=null;return r}t._inheritsLoose(c,a);var g=c.prototype;g.writeValueExpressionTitleWebScene=function(r,u,w,v){v&&v.messages&&v.messages.push(new l("property:unsupported",this.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:`visualVariables[${this.index}]`+
".valueExpressionTitle",context:v}))};g.clone=function(){return new b({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:this.legendOptions&&this.legendOptions.clone()})};t._createClass(c,[{key:"cache",get:function(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}}]);return c}(d);k.__decorate([x.property({readOnly:!0})],m.prototype,"cache",null);k.__decorate([x.property({type:["heading",
"tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],m.prototype,"axis",void 0);k.__decorate([x.property({type:["rotation"],json:{type:["rotationInfo"]}})],m.prototype,"type",void 0);k.__decorate([x.property({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],m.prototype,"rotationType",void 0);k.__decorate([x.property({type:String,json:{write:!0}})],m.prototype,"valueExpressionTitle",void 0);k.__decorate([e.writer("web-scene",
"valueExpressionTitle")],m.prototype,"writeValueExpressionTitleWebScene",null);return m=b=k.__decorate([h.subclass("esri.renderers.visualVariables.RotationVariable")],m)})},"esri/renderers/visualVariables/SizeVariable":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/jsonMap ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/Error ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/screenUtils ./VisualVariable ./support/SizeStop ./support/SizeVariableLegendOptions ./support/sizeVariableUtils ./support/visualVariableUtils".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d,b,a,c,g,r,u){function w(E){if(null!=E){if("string"===typeof E||"number"===typeof E)return b.toPt(E);if("size"===E.type){if(r.isSizeVariable(E))return E;E={...E};delete E.type;return new A(E)}}}function v(E,G,H){if("object"!==typeof E)return E;G=new A;G.read(E,H);return G}var D;const B=z.getLogger("esri.renderers.visualVariables.SizeVariable");m=new f.JSONMap({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"});const C=new f.JSONMap({unknown:"unknown",
inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"});let A=D=function(E){function G(K){K=E.call(this,K)||this;K.axis=null;K.legendOptions=null;K.normalizationField=null;K.scaleBy=null;K.target=null;K.type="size";K.useSymbolValue=null;K.valueExpression=null;K.valueRepresentation=null;K.valueUnit=null;return K}t._inheritsLoose(G,
E);var H=G.prototype;H.castMaxSize=function(K){return w(K)};H.readMaxSize=function(K,J,F){return v(K,J,F)};H.castMinSize=function(K){return w(K)};H.readMinSize=function(K,J,F){return v(K,J,F)};H.readValueExpression=function(K,J){return K||J.expression&&"$view.scale"};H.writeValueExpressionWebScene=function(K,J,F,N){"$view.scale"===K?N&&N.messages&&(K=this.index,N.messages.push(new q("property:unsupported",this.type+"VisualVariable.valueExpression \x3d '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",
{instance:this,propertyName:("string"===typeof K?K:`visualVariables[${K}]`)+".valueExpression",context:N}))):J[F]=K};H.readValueUnit=function(K){return K?C.read(K):null};H.clone=function(){return new D({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:r.isSizeVariable(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:r.isSizeVariable(this.minSize)?this.minSize.clone():
this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map(K=>K.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone()})};H.flipSizes=function(){if("clamped-linear"===this.transformationType){const {minSize:K,maxSize:J}=this;this.minSize=J;this.maxSize=K;return this}if("stops"===this.transformationType){const K=this.stops,J=K.map(N=>
N.size).reverse(),F=K.length;for(let N=0;N<F;N++)K[N].size=J[N]}return this};H.getAttributeHash=function(){return`${E.prototype.getAttributeHash.call(this)}-${this.target}-${this.normalizationField}`};H._interpolateData=function(){return this.stops&&this.stops.map(K=>K.value||0)};t._createClass(G,[{key:"cache",get:function(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:u.viewScaleRE.test(this.valueExpression)}}},{key:"expression",set:function(K){B.warn("'expression' is deprecated since version 4.2. Use 'valueExpression' instead. The only supported expression is 'view.scale'.");
"view.scale"===K?(this.valueExpression="$view.scale",this._set("expression",K)):this._set("expression",null)}},{key:"index",set:function(K){r.isSizeVariable(this.maxSize)&&(this.maxSize.index=`visualVariables[${K}].maxSize`);r.isSizeVariable(this.minSize)&&(this.minSize.index=`visualVariables[${K}].minSize`);this._set("index",K)}},{key:"inputValueType",get:function(){return r.getInputValueType(this)}},{key:"maxDataValue",set:function(K){K&&this.stops&&(B.warn("cannot set maxDataValue when stops is not null."),
K=null);this._set("maxDataValue",K)}},{key:"maxSize",set:function(K){K&&this.stops&&(B.warn("cannot set maxSize when stops is not null."),K=null);this._set("maxSize",K)}},{key:"minDataValue",set:function(K){K&&this.stops&&(B.warn("cannot set minDataValue when stops is not null."),K=null);this._set("minDataValue",K)}},{key:"minSize",set:function(K){K&&this.stops&&(B.warn("cannot set minSize when stops is not null."),K=null);this._set("minSize",K)}},{key:"arcadeRequired",get:function(){return this.valueExpression?
!0:this.minSize&&"object"===typeof this.minSize&&this.minSize.arcadeRequired||this.maxSize&&"object"===typeof this.maxSize&&this.maxSize.arcadeRequired}},{key:"stops",set:function(K){null==this.minDataValue&&null==this.maxDataValue&&null==this.minSize&&null==this.maxSize?K&&Array.isArray(K)&&(K=K.filter(J=>!!J),K.sort((J,F)=>J.value-F.value)):K&&(B.warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),K=null);this._set("stops",K)}},{key:"transformationType",
get:function(){return r.getTransformationType(this,this.inputValueType)}}]);return G}(a);k.__decorate([y.property({readOnly:!0})],A.prototype,"cache",null);k.__decorate([y.property({type:m.apiValues,json:{type:m.jsonValues,origins:{"web-map":{read:!1}},read:m.read,write:m.write}})],A.prototype,"axis",void 0);k.__decorate([y.property({type:String,value:null,json:{read:!1}})],A.prototype,"expression",null);k.__decorate([y.property()],A.prototype,"index",null);k.__decorate([y.property({type:String,readOnly:!0})],
A.prototype,"inputValueType",null);k.__decorate([y.property({type:g,json:{write:!0}})],A.prototype,"legendOptions",void 0);k.__decorate([y.property({type:Number,value:null,json:{write:!0}})],A.prototype,"maxDataValue",null);k.__decorate([y.property({type:Number,value:null,json:{write:!0}})],A.prototype,"maxSize",null);k.__decorate([x.cast("maxSize")],A.prototype,"castMaxSize",null);k.__decorate([h.reader("maxSize")],A.prototype,"readMaxSize",null);k.__decorate([y.property({type:Number,value:null,
json:{write:!0}})],A.prototype,"minDataValue",null);k.__decorate([y.property({type:Number,value:null,json:{write:!0}})],A.prototype,"minSize",null);k.__decorate([x.cast("minSize")],A.prototype,"castMinSize",null);k.__decorate([h.reader("minSize")],A.prototype,"readMinSize",null);k.__decorate([y.property({type:String,json:{write:!0}})],A.prototype,"normalizationField",void 0);k.__decorate([y.property({readOnly:!0})],A.prototype,"arcadeRequired",null);k.__decorate([y.property({type:String})],A.prototype,
"scaleBy",void 0);k.__decorate([y.property({type:[c],value:null,json:{write:!0}})],A.prototype,"stops",null);k.__decorate([y.property({type:["outline"],json:{write:!0}})],A.prototype,"target",void 0);k.__decorate([y.property({type:String,readOnly:!0})],A.prototype,"transformationType",null);k.__decorate([y.property({type:["size"],json:{type:["sizeInfo"]}})],A.prototype,"type",void 0);k.__decorate([y.property({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],A.prototype,"useSymbolValue",
void 0);k.__decorate([y.property({type:String,json:{write:!0}})],A.prototype,"valueExpression",void 0);k.__decorate([h.reader("valueExpression",["valueExpression","expression"])],A.prototype,"readValueExpression",null);k.__decorate([l.writer("web-scene","valueExpression")],A.prototype,"writeValueExpressionWebScene",null);k.__decorate([y.property({type:["radius","diameter","area","width","distance"],json:{write:!0}})],A.prototype,"valueRepresentation",void 0);k.__decorate([y.property({type:C.apiValues,
json:{write:C.write,origins:{"web-map":{read:!1},"web-scene":{write:!0}}}})],A.prototype,"valueUnit",void 0);k.__decorate([h.reader("valueUnit")],A.prototype,"readValueUnit",null);return A=D=k.__decorate([e.subclass("esri.renderers.visualVariables.SizeVariable")],A)})},"esri/renderers/visualVariables/support/SizeStop":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../../core/JSONSupport ../../../core/screenUtils".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n){var d;m=d=function(b){function a(c){c=b.call(this,c)||this;c.label=null;c.size=null;c.value=null;return c}t._inheritsLoose(a,b);a.prototype.clone=function(){return new d({label:this.label,size:this.size,value:this.value})};return a}(p.JSONSupport);k.__decorate([x.property({type:String,json:{write:!0}})],m.prototype,"label",void 0);k.__decorate([x.property({type:Number,cast:n.toPt,json:{write:!0}})],m.prototype,"size",void 0);k.__decorate([x.property({type:Number,
json:{write:!0}})],m.prototype,"value",void 0);return m=d=k.__decorate([h.subclass("esri.renderers.visualVariables.support.SizeStop")],m)})},"esri/renderers/visualVariables/support/SizeVariableLegendOptions":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ./VisualVariableLegendOptions".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p){var n;m=n=function(d){function b(){var a=d.apply(this,arguments)||this;a.customValues=null;return a}t._inheritsLoose(b,d);b.prototype.clone=function(){return new n({title:this.title,showLegend:this.showLegend,customValues:this.customValues&&this.customValues.slice(0)})};return b}(p);k.__decorate([x.property({type:[Number],json:{write:!0}})],m.prototype,"customValues",void 0);return m=n=k.__decorate([h.subclass("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],
m)})},"esri/renderers/visualVariables/support/sizeVariableUtils":function(){define(["exports"],function(t){function k(m){return m.valueExpression?"expression":m.field&&"string"===typeof m.field?"field":"unknown"}t.getInputValueType=k;t.getTransformationType=function(m,z){return"unknown"===(z||k(m))?"constant":m.stops?"stops":null!=m.minSize&&null!=m.maxSize&&null!=m.minDataValue&&null!=m.maxDataValue?"clamped-linear":"unknown"===(m.valueUnit||"unknown")?null!=m.minSize&&null!=m.minDataValue?m.minSize&&
m.minDataValue?"proportional":"additive":"identity":"real-world-size"};t.isSizeVariable=function(m){return m&&"esri.renderers.visualVariables.SizeVariable"===m.declaredClass};t.isValidNumber=function(m){return null!=m&&!isNaN(m)&&isFinite(m)};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/renderers/visualVariables/support/visualVariableUtils":function(){define("exports ../../../core/compilerUtils ../../../core/maybe ../../../core/Logger ../../../Color ../../../Graphic ./sizeVariableUtils ../../support/lengthUtils".split(" "),
function(t,k,m,z,y,x,f,h){function e(w,v,D){if(w="visualVariables"in w&&w.visualVariables?w.visualVariables.filter(J=>"color"===J.type)[0]:w)if("esri.renderers.visualVariables.ColorVariable"!==w.declaredClass)g.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable");else{var B="number"===typeof v,C=B?null:v,A=C&&C.attributes,E=B?v:null,G=w.field,{ipData:H,hasExpression:K}=w.cache;v=w.cache.compiledFunc;if(!G&&!K)return(D=w.stops)&&D[0]&&D[0].color;if("number"!==
typeof E)if(K){if(!m.isSome(D)||!m.isSome(D.arcade)){g.error("Use of arcade expressions requires an arcade context");return}E=D.arcade.arcadeUtils;G=E.getViewInfo({viewingMode:D.viewingMode,scale:D.scale,spatialReference:D.spatialReference});C=E.createExecContext(C,G);v||(v=E.createSyntaxTree(w.valueExpression),v=E.createFunction(v),w.cache.compiledFunc=v);E=E.executeFunction(v,C)}else A&&(E=A[G]);C=w.normalizationField;A=A?parseFloat(A[C]):void 0;if(null!=E&&(!C||B||!isNaN(A)&&0!==A)&&(isNaN(A)||
B||(E/=A),B=c(E,H)))return A=B[0],C=B[1],D=A===C?w.stops[A].color:y.blendColors(w.stops[A].color,w.stops[C].color,B[2],m.isSome(D)?D.color:void 0),new y(D)}}function l(w,v,D){if(w="visualVariables"in w&&w.visualVariables?w.visualVariables.filter(J=>"opacity"===J.type)[0]:w)if("esri.renderers.visualVariables.OpacityVariable"!==w.declaredClass)g.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable");else{var B="number"===typeof v,C=B?null:v,A=C&&C.attributes,
E=B?v:null,G=w.field,{ipData:H,hasExpression:K}=w.cache;v=w.cache.compiledFunc;if(!G&&!K)return(w=w.stops)&&w[0]&&w[0].opacity;if("number"!==typeof E)if(K){if(m.isNone(D)||m.isNone(D.arcade)){g.error("Use of arcade expressions requires an arcade context");return}E=D.arcade.arcadeUtils;D=E.getViewInfo({viewingMode:D.viewingMode,scale:D.scale,spatialReference:D.spatialReference});D=E.createExecContext(C,D);v||(C=E.createSyntaxTree(w.valueExpression),v=E.createFunction(C),w.cache.compiledFunc=v);E=E.executeFunction(v,
D)}else A&&(E=A[G]);D=w.normalizationField;A=A?parseFloat(A[D]):void 0;if(null!=E&&(!D||B||!isNaN(A)&&0!==A)&&(isNaN(A)||B||(E/=A),B=c(E,H))){D=B[0];A=B[1];if(D===A)return w.stops[D].opacity;D=w.stops[D].opacity;return D+(w.stops[A].opacity-D)*B[2]}}}function q(w,v,D){if(w="visualVariables"in w&&w.visualVariables?w.visualVariables.filter(J=>"rotation"===J.type)[0]:w)if("esri.renderers.visualVariables.RotationVariable"!==w.declaredClass)g.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable");
else{var B=w.axis||"heading",C="heading"===B&&"arithmetic"===w.rotationType?90:0;B="heading"===B&&"arithmetic"===w.rotationType?-1:1;var A="number"===typeof v?null:v,E=A&&A.attributes,G=w.field,{hasExpression:H}=w.cache;v=w.cache.compiledFunc;var K=0;if(!G&&!H)return K;if(H){if(m.isNone(D)||m.isNone(D.arcade)){g.error("Use of arcade expressions requires an arcade context");return}E=D.arcade.arcadeUtils;D=E.getViewInfo({viewingMode:D.viewingMode,scale:D.scale,spatialReference:D.spatialReference});
D=E.createExecContext(A,D);v||(v=E.createSyntaxTree(w.valueExpression),v=E.createFunction(v),w.cache.compiledFunc=v);K=E.executeFunction(v,D)}else E&&(K=E[G]||0);return K="number"!==typeof K||isNaN(K)?null:C+B*K}}function p(w,v,D){const B="number"===typeof v;var C=B?null:v;const A=C&&C.attributes;var E=B?v:null;const {isScaleDriven:G}=w.cache;v=w.cache.compiledFunc;if(G)C=m.isSome(D)?D.scale:void 0,D=m.isSome(D)?D.view:void 0,null==C||"3d"===D?(C=D=null,(C=w.stops)?(D=C[0].value,C=C[C.length-1].value):
(D=w.minDataValue||0,C=w.maxDataValue||0),D=(D+C)/2):D=C,E=D;else if(!B)switch(w.inputValueType){case "expression":if(m.isNone(D)||m.isNone(D.arcade)){g.error("Use of arcade expressions requires an arcade context");return}E=D.arcade.arcadeUtils;D=E.getViewInfo({viewingMode:D.viewingMode,scale:D.scale,spatialReference:D.spatialReference});D=E.createExecContext(C,D);v||(C=E.createSyntaxTree(w.valueExpression),v=E.createFunction(C),w.cache.compiledFunc=v);E=E.executeFunction(v,D);break;case "field":A&&
(E=A[w.field]);break;case "unknown":E=null}if(!f.isValidNumber(E))return null;if(B||!w.normalizationField)return E;w=A?parseFloat(A[w.normalizationField]):null;return f.isValidNumber(w)&&0!==w?E/w:null}function n(w,v,D){if(w="visualVariables"in w&&w.visualVariables?w.visualVariables.filter(C=>"size"===C.type)[0]:w)if("esri.renderers.visualVariables.SizeVariable"!==w.declaredClass)g.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable");else{var B=p(w,v,D);
v=a(B,w,v,D,w.cache.ipData);return null===v||void 0===v||isNaN(v)?0:v}}function d(w,v,D){return null==w?null:f.isSizeVariable(w)?n(w,v,D):f.isValidNumber(w)?w:null}function b(w,v,D){return f.isValidNumber(D)&&w>D?D:f.isValidNumber(v)&&w<v?v:w}function a(w,v,D,B,C){switch(v.transformationType){case "additive":return B=d(v.minSize,D,B),v=w+(B||v.minDataValue);case "constant":return w=(w=v.stops)&&w.length&&w[0].size,null==w&&(w=v.minSize),v=d(w,D,B);case "clamped-linear":C=(w-v.minDataValue)/(v.maxDataValue-
v.minDataValue);var A=d(v.minSize,D,B);D=d(v.maxSize,D,B);B=m.isSome(B)?B.shape:void 0;w<=v.minDataValue?v=A:w>=v.maxDataValue?v=D:"area"===v.scaleBy&&B?(w=(v="circle"===B)?u*(A/2)**2:A*A,w+=C*((v?u*(D/2)**2:D*D)-w),v=v?2*Math.sqrt(w/u):Math.sqrt(w)):v=A+C*(D-A);return v;case "proportional":return C=m.isSome(B)?B.shape:void 0,w/=v.minDataValue,A=d(v.minSize,D,B),v=d(v.maxSize,D,B),B=null,B="circle"===C?2*Math.sqrt(w*(A/2)**2):"square"===C||"diamond"===C||"image"===C?Math.sqrt(w*A**2):w*A,v=b(B,A,
v);case "stops":{const [E,G,H]=c(w,C);E===G?v=d(v.stops[E].size,D,B):(w=d(v.stops[E].size,D,B),v=d(v.stops[G].size,D,B),v=w+(v-w)*H)}return v;case "real-world-size":return C=(m.isSome(B)&&B.resolution?B.resolution:1)*h.meterIn[v.valueUnit],A=d(v.minSize,D,B),B=d(v.maxSize,D,B),{valueRepresentation:v}=v,D=null,D="area"===v?2*Math.sqrt(w/u)/C:"radius"===v||"distance"===v?2*w/C:w/C,v=b(D,A,B);case "identity":return w;case "unknown":return null}}function c(w,v){if(v){var D=0,B=v.length-1;v.some((C,A)=>
{if(w<C)return B=A,!0;D=A;return!1});return[D,B,(w-v[D])/(v[B]-v[D])]}}const g=z.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),r=new x,u=Math.PI;t.getAllSizes=function(w,v,D){const B=["proportional","proportional","proportional"];for(const C of w)switch(w=C.useSymbolValue?"symbol-value":n(C,v,D),C.axis){case "width":B[0]=w;break;case "depth":B[1]=w;break;case "height":B[2]=w;break;case "width-and-depth":B[0]=w;B[1]=w;break;case "all":case void 0:case null:B[0]=w;B[1]=w;B[2]=
w;break;default:k.neverReached(C.axis)}return B};t.getColor=e;t.getOpacity=l;t.getRotationAngle=q;t.getSize=n;t.getSizeForValue=a;t.getSizeFromNumberOrVariable=d;t.getSizeRangeAtScale=function(w,v,D){const {isScaleDriven:B}=w.cache;if(!(B&&"3d"===D||v))return null;D={scale:v,view:D};v=d(w.minSize,r,D);w=d(w.maxSize,r,D);if(null!=v||null!=w)return v>w&&(D=w,w=v,v=D),{minSize:v,maxSize:w}};t.getVisualVariableValues=function(w,v,D){if(w.visualVariables){var B=[],C=[],A=[],E=[],G=[];for(const H of w.visualVariables)switch(H.type){case "color":C.push(H);
break;case "opacity":A.push(H);break;case "rotation":G.push(H);break;case "size":E.push(H)}C.forEach(H=>{const K=e(H,v,D);B.push({variable:H,value:K})});A.forEach(H=>{const K=l(H,v,D);B.push({variable:H,value:K})});G.forEach(H=>{const K=q(H,v,D);B.push({variable:H,value:K})});E.forEach(H=>{const K=n(H,v,D);B.push({variable:H,value:K})});return B.filter(H=>null!=H.value)}};t.viewScaleRE=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/core/compilerUtils":function(){define(["exports",
"./has"],function(t,k){t.neverReached=function(m){};t.neverReachedSilent=function(m){};t.tuple=(...m)=>m;t.typeCast=function(m){return()=>m};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/renderers/support/lengthUtils":function(){define(["exports","../../geometry/support/Ellipsoid","../../core/unitUtils"],function(t,k,m){k={inches:m.convertUnit(1,"meters","inches"),feet:m.convertUnit(1,"meters","feet"),"us-feet":m.convertUnit(1,"meters","us-feet"),yards:m.convertUnit(1,"meters","yards"),
miles:m.convertUnit(1,"meters","miles"),"nautical-miles":m.convertUnit(1,"meters","nautical-miles"),millimeters:m.convertUnit(1,"meters","millimeters"),centimeters:m.convertUnit(1,"meters","centimeters"),decimeters:m.convertUnit(1,"meters","decimeters"),meters:m.convertUnit(1,"meters","meters"),kilometers:m.convertUnit(1,"meters","kilometers"),"decimal-degrees":1/m.lengthToDegrees(1,"meters",k.earth.radius)};t.meterIn=k;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/renderers/visualVariables/VisualVariableFactory":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/Warning ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/Accessor ./ColorVariable ./OpacityVariable ./RotationVariable ./SizeVariable".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d,b,a,c){const g=z.getLogger("esri.renderers.visualVariables.VisualVariableFactory"),r={color:d,size:c,opacity:b,rotation:a},u=new f.JSONMap({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),w=/^\[([^\]]+)\]$/i;m=function(v){function D(){var C=v.apply(this,arguments)||this;C.colorVariables=null;C.opacityVariables=null;C.rotationVariables=null;C.sizeVariables=null;return C}t._inheritsLoose(D,v);var B=D.prototype;B.readVariables=
function(C,A,E){const {rotationExpression:G,rotationType:H}=A;if(A=(A=G&&G.match(w))&&A[1])C||(C=[]),C.push({type:"rotationInfo",rotationType:H,field:A});if(C)return C.map(K=>{var J=u.read(K.type);const F=r[J];F||(g.warn(`Unknown variable type: ${J}`),E&&E.messages&&E.messages.push(new h("visual-variable:unsupported",`visualVariable of type '${J}' is not supported`,{definition:K,context:E})));J=new F;J.read(K,E);return J})};B.writeVariables=function(C,A){const E=[];for(const G of C)(C=G.toJSON(A))&&
E.push(C);return E};B._resetVariables=function(){this.colorVariables=[];this.opacityVariables=[];this.rotationVariables=[];this.sizeVariables=[]};t._createClass(D,[{key:"visualVariables",set:function(C){this._resetVariables();if((C=C&&C.filter(E=>!!E))&&C.length){for(var A of C)switch(A.type){case "color":this.colorVariables.push(A);break;case "opacity":this.opacityVariables.push(A);break;case "rotation":this.rotationVariables.push(A);break;case "size":this.sizeVariables.push(A)}this.sizeVariables.length&&
this.sizeVariables.some(E=>!!E.target)&&C.sort((E,G)=>{let H=null;return H=E.target===G.target?0:E.target?1:-1});for(A=0;A<C.length;A++)C[A].index=A}this._set("visualVariables",C)}}]);return D}(n);k.__decorate([x.property()],m.prototype,"visualVariables",null);return m=k.__decorate([e.subclass("esri.renderers.visualVariables.VisualVariableFactory")],m)})},"esri/renderers/support/ClassBreakInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../symbols ../../symbols/support/jsonUtils".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d){var b;m=b=function(a){function c(r){r=a.call(this,r)||this;r.description=null;r.label=null;r.minValue=null;r.maxValue=0;r.symbol=null;return r}t._inheritsLoose(c,a);var g=c.prototype;g.clone=function(){return new b({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?this.symbol.clone():null})};g.getMeshHash=function(){const r=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${r}`};
return c}(p.JSONSupport);k.__decorate([x.property({type:String,json:{write:!0}})],m.prototype,"description",void 0);k.__decorate([x.property({type:String,json:{write:!0}})],m.prototype,"label",void 0);k.__decorate([x.property({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],m.prototype,"minValue",void 0);k.__decorate([x.property({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],m.prototype,"maxValue",void 0);k.__decorate([x.property({types:n.symbolTypesRenderer,
json:{origins:{"web-scene":{types:n.symbolTypesRenderer3D,write:d.write}},write:d.write}})],m.prototype,"symbol",void 0);return m=b=k.__decorate([h.subclass("esri.renderers.support.ClassBreakInfo")],m)})},"esri/renderers/support/commonProperties":function(){define(["exports","../../symbols/Symbol","../../symbols/PolygonSymbol3D","../../symbols","../../symbols/support/jsonUtils"],function(t,k,m,z,y){const x={types:z.symbolTypesRenderer,json:{write:{writer:y.write},origins:{"web-scene":{types:z.symbolTypesRenderer3D,
write:{writer:y.write}}}}};t.rendererBackgroundFillSymbolProperty={types:{base:k,key:"type",typeMap:{"simple-fill":z.symbolTypes.typeMap["simple-fill"],"picture-fill":z.symbolTypes.typeMap["picture-fill"],"polygon-3d":z.symbolTypes.typeMap["polygon-3d"]}},json:{write:{writer:y.write},origins:{"web-scene":{type:m,write:{writer:y.write}}}}};t.rendererSymbolProperty=x;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/renderers/UniqueValueRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/lang ../core/object ../core/maybe ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ../core/Error ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../chunks/persistableUrlUtils ../support/arcadeOnDemand ../layers/support/fieldUtils ../portal/Portal ../symbols/WebStyleSymbol ../symbols ./support/LegendOptions ./Renderer ./mixins/VisualVariablesMixin ./support/commonProperties ../core/accessorSupport/diffUtils ./support/UniqueValueInfo ../symbols/support/styleUtils".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d,b,a,c,g,r,u,w,v,D,B,C,A,E,G,H,K,J){var F;const N=f.getLogger("esri.renderers.UniqueValueRenderer"),L=h.ensureType(K);m=F=function(M){function S(U){U=M.call(this,U)||this;U._valueInfoMap={};U._isDefaultSymbolDerived=!1;U.type="unique-value";U.backgroundFillSymbol=null;U.field=null;U.field2=null;U.field3=null;U.valueExpression=null;U.valueExpressionTitle=null;U.legendOptions=null;U.defaultLabel=null;U.fieldDelimiter=null;U.portal=null;U.styleOrigin=null;U.diff={uniqueValueInfos(W,
fa){if(W||fa){if(!W||!fa)return{type:"complete",oldValue:W,newValue:fa};var Z=!1,T={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let ba=0;ba<fa.length;ba++){const ha=W.find(sa=>sa.value===fa[ba].value);ha?H.diff(ha,fa[ba])?(T.changed.push({type:"complete",oldValue:ha,newValue:fa[ba]}),Z=!0):T.unchanged.push({oldValue:ha,newValue:fa[ba]}):(T.added.push(fa[ba]),Z=!0)}for(let ba=0;ba<W.length;ba++)fa.find(ha=>ha.value===W[ba].value)||(T.removed.push(W[ba]),Z=!0);return Z?T:void 0}}};
U._set("uniqueValueInfos",[]);return U}t._inheritsLoose(S,M);var Q=S.prototype;Q.castField=function(U){return null==U||"function"===typeof U?U:h.ensureString(U)};Q.writeField=function(U,W,fa,Z){"string"===typeof U?W[fa]=U:Z&&Z.messages?Z.messages.push(new b("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):N.error(".field: cannot write field to JSON since it's not a string value")};Q.readPortal=function(U,W,fa){return fa.portal||v.getDefault()};Q.readStyleOrigin=
function(U,W,fa){if(W.styleName)return Object.freeze({styleName:W.styleName});if(W.styleUrl)return U=r.fromJSON(W.styleUrl,fa),Object.freeze({styleUrl:U})};Q.writeStyleOrigin=function(U,W,fa,Z){U.styleName?W.styleName=U.styleName:U.styleUrl&&(W.styleUrl=r.toJSON(U.styleUrl,Z))};Q.addUniqueValueInfo=function(U,W){this.styleOrigin?N.error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(U="object"===typeof U?L(U):new K({value:U,symbol:B.ensureType(W)}),
this.uniqueValueInfos.push(U),this._valueInfoMap[U.value]=U)};Q.removeUniqueValueInfo=function(U){if(this.styleOrigin)N.error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");else for(let W=0;W<this.uniqueValueInfos.length;W++)if(this.uniqueValueInfos[W].value===U+""){delete this._valueInfoMap[U];this.uniqueValueInfos.splice(W,1);break}};Q.getUniqueValueInfo=async function(U,W){let fa=W;this.valueExpression&&(x.isNone(W)||x.isNone(W.arcade))&&
(fa={...fa,arcade:await u.loadArcade()});return this._getUniqueValueInfo(U,fa)};Q.getSymbol=function(U,W){if(this.valueExpression&&(x.isNone(W)||x.isNone(W.arcade)))N.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");else return(U=this._getUniqueValueInfo(U,W))&&U.symbol||this.defaultSymbol};Q.getSymbolAsync=async function(U,W){if(this.valueExpression&&(x.isNone(W)||x.isNone(W.arcade))){const fa=await u.loadArcade(),{arcadeUtils:Z}=fa;Z.hasGeometryOperations(this.valueExpression)&&
await Z.enableGeometryOperations();W={...W,arcade:fa}}return(U=this._getUniqueValueInfo(U,W))&&U.symbol||this.defaultSymbol};Q.getSymbols=function(){const U=[];for(const W of this.uniqueValueInfos)W.symbol&&U.push(W.symbol);this.defaultSymbol&&U.push(this.defaultSymbol);return U};Q.getAttributeHash=function(){return this.visualVariables&&this.visualVariables.reduce((U,W)=>U+W.getAttributeHash(),"")};Q.getMeshHash=function(){const U=JSON.stringify(this.backgroundFillSymbol),W=JSON.stringify(this.defaultSymbol),
fa=this.uniqueValueInfos.reduce((Z,T)=>Z+T.getMeshHash(),"");return`${U}.${W}.${fa}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`};Q.clone=function(){const U=new F({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:z.clone(this.defaultSymbol),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:z.clone(this.visualVariables),
legendOptions:z.clone(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),backgroundFillSymbol:z.clone(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(U._isDefaultSymbolDerived=!0);U._set("portal",this.portal);const W=z.clone(this.uniqueValueInfos);this.styleOrigin&&(U._set("styleOrigin",Object.freeze(z.clone(this.styleOrigin))),Object.freeze(W));U._set("uniqueValueInfos",W);U._updateValueInfoMap();return U};Q.collectRequiredFields=async function(U,W){U=[this.collectVVRequiredFields(U,
W),this.collectSymbolFields(U,W)];await Promise.all(U)};Q.collectSymbolFields=async function(U,W){const fa=[...this.getSymbols().map(Z=>Z.collectRequiredFields(U,W)),w.collectArcadeFieldNames(U,W,this.valueExpression)];w.collectField(U,W,this.field);w.collectField(U,W,this.field2);w.collectField(U,W,this.field3);await Promise.all(fa)};Q.populateFromStyle=function(){return J.fetchStyle(this.styleOrigin,{portal:this.portal}).then(U=>{const W=[];this._valueInfoMap={};U&&U.data&&Array.isArray(U.data.items)&&
U.data.items.forEach(fa=>{var Z=new D({styleUrl:U.styleUrl,styleName:U.styleName,portal:this.portal,name:fa.name});this.defaultSymbol||fa.name!==U.data.defaultItem||(this.defaultSymbol=Z,this._isDefaultSymbolDerived=!0);Z=new K({value:fa.name,symbol:Z});W.push(Z);this._valueInfoMap[fa.name]=Z});this._set("uniqueValueInfos",Object.freeze(W));!this.defaultSymbol&&this.uniqueValueInfos.length&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0);return this})};Q._updateValueInfoMap=
function(){this._valueInfoMap={};this.uniqueValueInfos.forEach(U=>this._valueInfoMap[U.value+""]=U)};Q._getUniqueValueInfo=function(U,W){return this.valueExpression?this._getUnqiueValueInfoForExpression(U,W):this._getUnqiueValueInfoForFields(U)};Q._getUnqiueValueInfoForExpression=function(U,W){const {viewingMode:fa,scale:Z,spatialReference:T,arcade:ba}=x.unwrapOr(W,{});var ha=this._cache.compiledFunc;W=x.unwrap(ba).arcadeUtils;ha||(ha=W.createSyntaxTree(this.valueExpression),ha=W.createFunction(ha),
this._cache.compiledFunc=ha);U=W.executeFunction(ha,W.createExecContext(U,W.getViewInfo({viewingMode:fa,scale:Z,spatialReference:T})));return this._valueInfoMap[U+""]};Q._getUnqiueValueInfoForFields=function(U){const W=this.field,fa=U.attributes;if("function"!==typeof W&&this.field2){U=this.field2;var Z=this.field3;const T=[];W&&T.push(fa[W]);U&&T.push(fa[U]);Z&&T.push(fa[Z]);Z=T.join(this.fieldDelimiter||"")}else"function"===typeof W?Z=W(U):W&&(Z=fa[W]);return this._valueInfoMap[Z+""]};S.fromPortalStyle=
function(U,W){const fa=new F(W&&W.properties);fa._set("styleOrigin",Object.freeze({styleName:U}));fa._set("portal",W&&W.portal||v.getDefault());W=fa.populateFromStyle();W.catch(Z=>{N.error(`#fromPortalStyle('${U}'[, ...])`,"Failed to create unique value renderer from style name",Z)});return W};S.fromStyleUrl=function(U,W){W=new F(W&&W.properties);W._set("styleOrigin",Object.freeze({styleUrl:U}));W=W.populateFromStyle();W.catch(fa=>{N.error(`#fromStyleUrl('${U}'[, ...])`,"Failed to create unique value renderer from style URL",
fa)});return W};t._createClass(S,[{key:"_cache",get:function(){return{compiledFunc:null}}},{key:"defaultSymbol",set:function(U){this._isDefaultSymbolDerived=!1;this._set("defaultSymbol",U)}},{key:"uniqueValueInfos",set:function(U){this.styleOrigin?N.error("#uniqueValueInfos\x3d","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",U),this._updateValueInfoMap())}},{key:"arcadeRequired",get:function(){return this.arcadeRequiredForVisualVariables||
!!this.valueExpression}}]);return S}(E.VisualVariablesMixin(A));k.__decorate([e.property({readOnly:!0})],m.prototype,"_cache",null);k.__decorate([q.enumeration({uniqueValue:"unique-value"})],m.prototype,"type",void 0);k.__decorate([e.property(G.rendererBackgroundFillSymbolProperty)],m.prototype,"backgroundFillSymbol",void 0);k.__decorate([e.property({json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],m.prototype,"field",void 0);k.__decorate([l.cast("field")],m.prototype,"castField",
null);k.__decorate([d.writer("field")],m.prototype,"writeField",null);k.__decorate([e.property({type:String,json:{write:!0}})],m.prototype,"field2",void 0);k.__decorate([e.property({type:String,json:{write:!0}})],m.prototype,"field3",void 0);k.__decorate([e.property({type:String,json:{write:!0}})],m.prototype,"valueExpression",void 0);k.__decorate([e.property({type:String,json:{write:!0}})],m.prototype,"valueExpressionTitle",void 0);k.__decorate([e.property({type:C["default"],json:{write:!0}})],m.prototype,
"legendOptions",void 0);k.__decorate([e.property({type:String,json:{write:!0}})],m.prototype,"defaultLabel",void 0);k.__decorate([e.property(y.deepMerge({...G.rendererSymbolProperty},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],m.prototype,"defaultSymbol",null);k.__decorate([e.property({type:String,json:{write:!0}})],m.prototype,"fieldDelimiter",void 0);k.__decorate([e.property({type:v,
readOnly:!0})],m.prototype,"portal",void 0);k.__decorate([p.reader("portal",["styleName"])],m.prototype,"readPortal",null);k.__decorate([e.property({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],m.prototype,"styleOrigin",void 0);k.__decorate([p.reader("styleOrigin",["styleName","styleUrl"])],m.prototype,"readStyleOrigin",null);k.__decorate([d.writer("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],m.prototype,"writeStyleOrigin",null);k.__decorate([e.property({type:[K],
json:{write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],m.prototype,"uniqueValueInfos",null);return m=F=k.__decorate([n.subclass("esri.renderers.UniqueValueRenderer")],m)})},"esri/renderers/support/UniqueValueInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../symbols ../../symbols/support/jsonUtils".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d){var b;m=b=function(a){function c(r){r=a.call(this,r)||this;r.description=null;r.label=null;r.symbol=null;r.value=null;return r}t._inheritsLoose(c,a);var g=c.prototype;g.clone=function(){return new b({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})};g.getMeshHash=function(){const r=JSON.stringify(this.symbol&&this.symbol.toJSON());return`${this.value}.${r}`};return c}(p.JSONSupport);k.__decorate([x.property({type:String,
json:{write:!0}})],m.prototype,"description",void 0);k.__decorate([x.property({type:String,json:{write:!0}})],m.prototype,"label",void 0);k.__decorate([x.property({types:n.symbolTypesRenderer,json:{origins:{"web-scene":{types:n.symbolTypesRenderer3D,write:d.write}},write:d.write}})],m.prototype,"symbol",void 0);k.__decorate([x.property({type:[String,Number],json:{type:String,write:{writer:(a,c)=>{c.value=null==a?void 0:a.toString()}}}})],m.prototype,"value",void 0);return m=b=k.__decorate([h.subclass("esri.renderers.support.UniqueValueInfo")],
m)})},"esri/symbols/support/styleUtils":function(){define("exports ../../core/Error ../../core/urlUtils ../../chunks/persistableUrlUtils ../../request ../../portal/PortalQueryParams ../../portal/Portal ./StyleOrigin ./Thumbnail ../../symbols ./jsonUtils ../../core/devEnvironmentUtils ../../support/featureFlags".split(" "),function(t,k,m,z,y,x,f,h,e,l,q,p,n){function d(B,C){return v(B,C).then(A=>({data:A.data,baseUrl:m.removeFile(B),styleUrl:B}))}function b(B,C,A){C=C.portal||f.getDefault();let E;
const G=`${C.url} - ${C.user&&C.user.username} - ${B}`;D[G]||(D[G]=a(B,C,A).then(H=>{E=H;return H.fetchData()}).then(H=>({data:H,baseUrl:E.itemUrl,styleName:B})));return D[G]}function a(B,C,A){return C.load(A).then(()=>{const E=new x({disableExtraQuery:!0,query:`owner:${"esri_en"} AND type:${"Style"} AND typekeywords:"${B}"`});return C.queryItems(E,A)}).then(({results:E})=>{let G=null;const H=B.toLowerCase();if(E&&Array.isArray(E))for(const K of E)if(K.typeKeywords.some(J=>J.toLowerCase()===H)&&"Style"===
K.type&&"esri_en"===K.owner){G=K;break}if(!G)throw new k("symbolstyleutils:style-not-found",`The style '${B}' could not be found`,{styleName:B});return G.load(A)})}function c(B,C,A){return B.styleUrl?d(B.styleUrl,A):B.styleName?b(B.styleName,C,A):Promise.reject(new k("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function g(B,C,A,E,G){var H=B.data;const K={portal:A.portal,url:m.urlToObject(B.baseUrl),origin:"portal-item"};H=H.items.find(M=>
M.name===C);if(!H)return Promise.reject(new k("symbolstyleutils:symbol-name-not-found",`The symbol name '${C}' could not be found`,{symbolName:C}));let J=z.fromJSON(u(H,E),K),F=H.thumbnail&&H.thumbnail.href;const N=H.thumbnail&&H.thumbnail.imageData;p.isDevEnvironment()&&(J=p.adjustStaticAGOUrl(J),F=p.adjustStaticAGOUrl(F));const L={portal:A.portal,url:m.urlToObject(m.removeFile(J)),origin:"portal-item"};return v(J,G).then(M=>{M="cimRef"===E?r(M.data):M.data;if((M=q.fromJSON(M,L))&&l.isSymbol3D(M)){if(F){const S=
z.fromJSON(F,K);M.thumbnail=new e["default"]({url:S})}else N&&(M.thumbnail=new e["default"]({url:`data:image/png;base64,${N}`}));B.styleUrl?M.styleOrigin=new h({portal:A.portal,styleUrl:B.styleUrl,name:C}):B.styleName&&(M.styleOrigin=new h({portal:A.portal,styleName:B.styleName,name:C}))}return M})}function r(B){return null===B||"CIMSymbolReference"===B.type?B:{type:"CIMSymbolReference",symbol:B}}function u(B,C){if("cimRef"===C)return B.cimRef;if(B.formatInfos&&!n.enableWebStyleForceWOSR())for(const A of B.formatInfos)if("gltf"===
A.type)return A.href;return B.webRef}function w(B,C,A){const E="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f\x3djson".replace(/\{SymbolName\}/gi,B.name);return v(E,A).then(G=>{G=r(G.data);return q.fromJSON(G,{portal:C.portal,url:m.urlToObject(m.removeFile(E)),origin:"portal-item"})})}function v(B,C){C={responseType:"json",query:{f:"json"},...C};return y(m.normalize(B),C)}const D={};t.fetchStyle=c;t.fetchSymbolFromStyle=
g;t.resolveWebStyleSymbol=function(B,C,A,E){return B.name?B.styleName&&"Esri2DPointSymbolsStyle"===B.styleName?w(B,C,E):c(B,C,E).then(G=>g(G,B.name,C,A,E)):Promise.reject(new k("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference"))};t.styleNameFromItem=function(B){for(const C of B.typeKeywords)if(/^Esri.*Style$/.test(C)&&"Esri Style"!==C)return C};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/core/devEnvironmentUtils":function(){define(["exports",
"./global"],function(t,k){const m=/^devext.arcgis.com$/,z=/^qaext.arcgis.com$/,y=/^[\w-]*\.mapsdevext.arcgis.com$/,x=/^[\w-]*\.mapsqa.arcgis.com$/,f=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local.esri.com$/,m,z,/^jsapps.esri.com$/,y,x];t.adjustStaticAGOUrl=function(h,e){return h?(e=e||k.location.hostname)?null!=e.match(m)||null!=e.match(y)?h.replace("static.arcgis.com","staticdev.arcgis.com"):null!=e.match(z)||null!=e.match(x)?h.replace("static.arcgis.com","staticqa.arcgis.com"):h:h:h};t.isDevEnvironment=function(h){h=
h||k.location.hostname;return f.some(e=>{var l;return null!=(null==(l=h)?void 0:l.match(e))})};t.isTelemetryDevEnvironment=function(h){h=h||k.location.hostname;return[/^zrh-.+?\.esri\.com$/].concat(f).some(e=>{var l;return null!=(null==(l=h)?void 0:l.match(e))})};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/support/featureFlags":function(){define(["exports","../core/has"],function(t,k){function m(z){return!!k(`enable-feature:${z}`)}t.disableContextNavigation=()=>m("disable-context-navigation");
t.enableWebStyleForceWOSR=()=>m("force-wosr");t.hasEnableFeature=m;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/renderers/DictionaryRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/lang ../core/maybe ../core/string ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ../core/Error ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/promiseUtils ../support/arcadeOnDemand ../layers/support/fieldUtils ../Color ../symbols/CIMSymbol ../request ./Renderer ./mixins/VisualVariablesMixin ../core/LRUCache".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d,b,a,c,g,r,u,w,v,D,B,C){var A;const E=f.getLogger("esri.renderers.DictionaryRenderer"),G={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};m=A=function(H){function K(F){F=H.call(this,F)||this;F._ongoingRequests=new Map;F._symbolCache=new C(100);F.config=null;F.fieldMap=null;F.scaleExpression=null;F.scaleExpressionTitle=null;F.url=null;F.type="dictionary";return F}t._inheritsLoose(K,
H);var J=K.prototype;J.writeData=function(F,N){F&&(N.scalingExpressionInfo={expression:F,returnType:"number"})};J.writeVisualVariables=function(F,N,L,M){null!=M&&M.origin||H.prototype.writeVisualVariables.call(this,F,N,L,M)};J.clone=function(){return new A({config:z.clone(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:z.clone(this.fieldMap),url:z.clone(this.url),visualVariables:z.clone(this.visualVariables)})};J.getSymbolAsync=async function(F,
N){this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(N));try{var L=await this._dictionaryPromise}catch(fa){if(c.isAbortError(fa))return this._dictionaryPromise=null}var M={};if(this.fieldMap)for(var S of this._symbolFields){var Q=this.fieldMap[S];M[S]=Q&&null!==F.attributes[Q]&&void 0!==F.attributes[Q]?""+F.attributes[Q]:""}L=L(M,N);if(!L||"string"!==typeof L)return null;const U=x.numericHash(L).toString();if(M=this._symbolCache.get(U))return M.catch(()=>{this._symbolCache.pop(U)}),
M;S=L.split(";");L=[];M=[];for(const fa of S)if(fa&&0!==fa.length)if(-1!==fa.indexOf("po:")){var W=fa.substr(3).split("|");3===W.length&&(S=W[0],Q=W[1],W=W[2],"DashTemplate"===Q?W=W.split(" ").map(Z=>Number(Z)):"Color"===Q?(W=(new u(W)).toRgba(),W=[W[0],W[1],W[2],255*W[3]]):W=Number(W),M.push({primitiveName:S,propertyName:Q,value:W}))}else if(-1!==fa.indexOf("|"))for(const Z of fa.split("|"))this._itemNames.has(Z)&&L.push(Z);else this._itemNames.has(fa)&&L.push(fa);F=y.isSome(F.geometry)&&(F.geometry.hasZ||
"point"!==F.geometry.type)?!1:!0;N=this._cimPartsToCIMSymbol(L,M,F,N);this._symbolCache.put(U,N,1);return N};J.collectRequiredFields=async function(F,N){await this.collectVVRequiredFields(F,N);this.scaleExpression&&await r.collectArcadeFieldNames(F,N,this.scaleExpression);N=N.map(L=>L.name);for(const L in this.fieldMap)0>N.indexOf(this.fieldMap[L])||F.add(this.fieldMap[L])};J.fetchResources=async function(F){if(this._dictionaryPromise)return this._dictionaryPromise;if(this.url){var N=y.isSome(F)?
F.abortOptions:null;N=v(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"},...N});var [{data:L}]=await Promise.all([N,g.loadArcade()]);if(!L)throw this._dictionaryPromise=null,new n("esri.renderers.DictionaryRenderer","Bad dictionary data!");N=L.expression;var M=L.authoringInfo;this._refSymbolUrlTemplate=this.url+"/"+L.cimRefTemplateUrl;this._itemNames=new Set(L.itemsNames);this._symbolFields=M.symbol;L={};if(this.config){const U=this.config;for(var S in U)L[S]=
U[S]}if(M.configuration)for(var Q of M.configuration)L.hasOwnProperty(Q.name)||(L[Q.name]=Q.value);S=[];if(y.isSome(F)&&F.fields&&this.fieldMap)for(const U of this._symbolFields){const W=this.fieldMap[U];Q=F.fields.filter(fa=>fa.name===W);0<Q.length&&S.push({...Q[0],name:U})}return this._dictionaryPromise=g.createDictionaryExpression(N,y.isSome(F)?F.spatialReference:null,S,L).then(U=>{const W={scale:0};return(fa,Z)=>{fa=U.repurposeFeature({geometry:null,attributes:fa});W.scale=y.isSome(Z)?Z.scale:
void 0;return U.evaluate({$feature:fa,$view:W})}}).catch(U=>{E.error("Creating dictinoary expression failed:",U);return null})}E.error("no valid URL!")};J.getSymbol=function(){return null};J.getSymbols=function(){return[]};J.getAttributeHash=function(){return this.visualVariables&&this.visualVariables.reduce((F,N)=>F+N.getAttributeHash(),"")};J.getMeshHash=function(){return`${this.url}-${JSON.stringify(this.fieldMap)}`};J.getSymbolFields=function(){return this._symbolFields};J._getSymbolPart=async function(F,
N){if(this._ongoingRequests.has(F))return this._ongoingRequests.get(F).then(M=>M.data);const L=this._refSymbolUrlTemplate.replace(/\{itemName\}/gi,F);N=v(L,{responseType:"json",query:{f:"json"},...N});this._ongoingRequests.set(F,N);try{return(await N).data}catch(M){return this._ongoingRequests.delete(F),Promise.reject(M)}};J._combineSymbolParts=function(F,N,L){if(!F||0===F.length)return null;const M={...F[0]};if(1<F.length){M.symbolLayers=[];for(const S of F)M.symbolLayers.unshift(...S.symbolLayers)}L&&
(M.callout=G);return{type:"CIMSymbolReference",symbol:M,primitiveOverrides:N}};J._cimPartsToCIMSymbol=async function(F,N,L,M){const S=Array(F.length);for(let Q=0;Q<F.length;Q++)S[Q]=this._getSymbolPart(F[Q],M);F=await Promise.all(S);return new w({data:this._combineSymbolParts(F,N,L)})};t._createClass(K,[{key:"arcadeRequired",get:function(){return!0}}]);return K}(B.VisualVariablesMixin(D));k.__decorate([e.property({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],
m.prototype,"config",void 0);k.__decorate([e.property({type:Object,json:{write:!0}})],m.prototype,"fieldMap",void 0);k.__decorate([e.property({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],m.prototype,"scaleExpression",void 0);k.__decorate([p.writer("scaleExpression")],m.prototype,"writeData",null);k.__decorate([e.property({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(H){return{enabled:!!H&&
!!this.scaleExpression}}}}})],m.prototype,"scaleExpressionTitle",void 0);k.__decorate([e.property({type:String,json:{write:!0}})],m.prototype,"url",void 0);k.__decorate([p.writer("visualVariables")],m.prototype,"writeVisualVariables",null);return m=A=k.__decorate([q.subclass("esri.renderers.DictionaryRenderer")],m)})},"esri/renderers/DotDensityRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/lang ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/aliasOf ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../layers/support/fieldUtils ../Color ../symbols/SimpleLineSymbol ../symbols/SimpleFillSymbol ./Renderer ./mixins/VisualVariablesMixin ./support/AttributeColorInfo ./support/DotDensityLegendOptions".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d,b,a,c,g,r,u,w){var v;m=v=function(D){function B(A){A=D.call(this,A)||this;A.attributes=null;A.backgroundColor=new b([0,0,0,0]);A.blendDots=!0;A.dotBlendingEnabled=!0;A.dotShape="square";A.dotSize=1;A.legendOptions=null;A.outline=new a;A.dotValue=null;A.referenceDotValue=null;A.referenceScale=null;A.seed=1;A.type="dot-density";return A}t._inheritsLoose(B,D);var C=B.prototype;C.calculateDotValue=function(A){if(null==this.referenceScale)return this.dotValue;A=A/this.referenceScale*
this.dotValue;return 1>A?1:A};C.getSymbol=function(){return new c({outline:this.outline})};C.getSymbolAsync=async function(){return this.getSymbol()};C.getSymbols=function(){return[this.getSymbol()]};C.getAttributeHash=function(){return this.attributes&&this.attributes.reduce((A,E)=>A+E.getAttributeHash(),"")};C.getMeshHash=function(){return JSON.stringify(this.outline)};C.clone=function(){return new v({attributes:z.clone(this.attributes),backgroundColor:z.clone(this.backgroundColor),dotBlendingEnabled:z.clone(this.dotBlendingEnabled),
dotShape:z.clone(this.dotShape),dotSize:z.clone(this.dotSize),dotValue:z.clone(this.dotValue),legendOptions:z.clone(this.legendOptions),outline:z.clone(this.outline),referenceScale:z.clone(this.referenceScale),visualVariables:z.clone(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})};C.getControllerHash=function(){const A=this.attributes.map(G=>G.field||G.valueExpression||""),E=this.outline&&JSON.stringify(this.outline.toJSON())||"";return`${A}-${E}`};C.collectRequiredFields=
async function(A,E){await this.collectVVRequiredFields(A,E);for(const G of this.attributes)G.valueExpression&&await d.collectArcadeFieldNames(A,E,G.valueExpression),G.field&&A.add(G.field)};return B}(r.VisualVariablesMixin(g));k.__decorate([f.property({type:[u],json:{write:!0}})],m.prototype,"attributes",void 0);k.__decorate([f.property({type:b,json:{write:!0}})],m.prototype,"backgroundColor",void 0);k.__decorate([f.property({type:Boolean}),h.aliasOf("dotBlendingEnabled")],m.prototype,"blendDots",
void 0);k.__decorate([f.property({type:Boolean,json:{write:!0}})],m.prototype,"dotBlendingEnabled",void 0);k.__decorate([f.property({type:String,json:{write:!1}})],m.prototype,"dotShape",void 0);k.__decorate([f.property({type:Number,json:{write:!1}})],m.prototype,"dotSize",void 0);k.__decorate([f.property({type:w,json:{write:!0}})],m.prototype,"legendOptions",void 0);k.__decorate([f.property({type:a,json:{default:null,write:!0}})],m.prototype,"outline",void 0);k.__decorate([f.property({type:Number,
json:{write:!0}})],m.prototype,"dotValue",void 0);k.__decorate([f.property({type:Number}),h.aliasOf("dotValue")],m.prototype,"referenceDotValue",void 0);k.__decorate([f.property({type:Number,json:{write:!0}})],m.prototype,"referenceScale",void 0);k.__decorate([f.property({type:Number,json:{write:!0}})],m.prototype,"seed",void 0);k.__decorate([e.enumeration({dotDensity:"dot-density"})],m.prototype,"type",void 0);return m=v=k.__decorate([l.subclass("esri.renderers.DotDensityRenderer")],m)})},"esri/renderers/support/AttributeColorInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../Color".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d){var b;const a=z.getLogger("esri.renderers.support.AttributeColorInfo");m=b=function(c){function g(u){u=c.call(this,u)||this;u.color=null;u.field=null;u.label=null;u.valueExpression=null;u.valueExpressionTitle=null;return u}t._inheritsLoose(g,c);var r=g.prototype;r.castField=function(u){return null==u?u:"function"===typeof u?(a.error(".field: field must be a string value"),null):y.ensureString(u)};r.getAttributeHash=function(){return`${this.field}-${this.valueExpression}`};
r.clone=function(){return new b({color:this.color&&this.color.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})};return g}(n.JSONSupport);k.__decorate([x.property({type:d,json:{type:[Number],write:!0}})],m.prototype,"color",void 0);k.__decorate([x.property({type:String,json:{write:!0}})],m.prototype,"field",void 0);k.__decorate([f.cast("field")],m.prototype,"castField",null);k.__decorate([x.property({type:String,json:{write:!0}})],
m.prototype,"label",void 0);k.__decorate([x.property({type:String,json:{write:!0}})],m.prototype,"valueExpression",void 0);k.__decorate([x.property({type:String,json:{write:!0}})],m.prototype,"valueExpressionTitle",void 0);return m=b=k.__decorate([e.subclass("esri.renderers.support.AttributeColorInfo")],m)})},"esri/renderers/support/DotDensityLegendOptions":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p){var n;m=n=function(d){function b(){var a=d.apply(this,arguments)||this;a.unit=null;return a}t._inheritsLoose(b,d);b.prototype.clone=function(){return new n({unit:this.unit})};return b}(p.JSONSupport);k.__decorate([x.property({type:String,json:{write:!0}})],m.prototype,"unit",void 0);return m=n=k.__decorate([h.subclass("esri.renderers.support.DotDensityLegendOptions")],m)})},"esri/renderers/HeatmapRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/lang ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../layers/support/fieldUtils ../Color ./Renderer ./support/HeatmapColorStop".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d,b,a){var c;m=c=function(g){function r(w){w=g.call(this,w)||this;w.blurRadius=10;w.colorStops=[new a({ratio:0,color:new d("rgba(255, 140, 0, 0)")}),new a({ratio:.75,color:new d("rgba(255, 140, 0, 1)")}),new a({ratio:.9,color:new d("rgba(255, 0,   0, 1)")})];w.field=null;w.fieldOffset=0;w.maxPixelIntensity=100;w.minPixelIntensity=0;w.type="heatmap";return w}t._inheritsLoose(r,g);var u=r.prototype;u.collectRequiredFields=async function(w,v){const D=this.field;D&&
"string"===typeof D&&n.collectField(w,v,D)};u.getAttributeHash=function(){return null};u.getMeshHash=function(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`};u.clone=function(){return new c({blurRadius:this.blurRadius,colorStops:z.clone(this.colorStops),field:this.field,maxPixelIntensity:this.maxPixelIntensity,minPixelIntensity:this.minPixelIntensity})};return r}(b);k.__decorate([f.property({type:Number,json:{write:!0}})],m.prototype,"blurRadius",void 0);k.__decorate([f.property({type:[a],
json:{write:!0}})],m.prototype,"colorStops",void 0);k.__decorate([f.property({type:String,json:{write:!0}})],m.prototype,"field",void 0);k.__decorate([f.property({type:Number,json:{write:{overridePolicy:(g,r,u)=>({enabled:null==u})}}})],m.prototype,"fieldOffset",void 0);k.__decorate([f.property({type:Number,json:{write:!0}})],m.prototype,"maxPixelIntensity",void 0);k.__decorate([f.property({type:Number,json:{write:!0}})],m.prototype,"minPixelIntensity",void 0);k.__decorate([h.enumeration({heatmap:"heatmap"})],
m.prototype,"type",void 0);return m=c=k.__decorate([e.subclass("esri.renderers.HeatmapRenderer")],m)})},"esri/renderers/support/HeatmapColorStop":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../Color".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n){var d;m=d=function(b){function a(c){c=b.call(this,c)||this;c.color=null;c.ratio=null;return c}t._inheritsLoose(a,b);a.prototype.clone=function(){return new d({color:this.color,ratio:this.ratio})};return a}(p.JSONSupport);k.__decorate([x.property({type:n,json:{write:!0}})],m.prototype,"color",void 0);k.__decorate([x.property({type:Number,json:{write:!0}})],m.prototype,"ratio",void 0);return m=d=k.__decorate([h.subclass("esri.renderers.support.HeatmapColorStop")],
m)})},"esri/renderers/SimpleRenderer":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/lang ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/enumeration ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ./Renderer ./mixins/VisualVariablesMixin ./support/commonProperties".split(" "),function(t,k,m,z,y,x,f,h,e,l,q,p,
n,d,b){var a;m=a=function(c){function g(u){u=c.call(this,u)||this;u.description=null;u.label=null;u.symbol=null;u.type="simple";return u}t._inheritsLoose(g,c);var r=g.prototype;r.collectRequiredFields=async function(u,w){await Promise.all([this.collectSymbolFields(u,w),this.collectVVRequiredFields(u,w)])};r.collectSymbolFields=async function(u,w){await Promise.all(this.getSymbols().map(v=>v.collectRequiredFields(u,w)))};r.getSymbol=function(u,w){return this.symbol};r.getSymbolAsync=async function(u,
w){return this.symbol};r.getSymbols=function(){return this.symbol?[this.symbol]:[]};r.getAttributeHash=function(){return this.visualVariables&&this.visualVariables.reduce((u,w)=>u+w.getAttributeHash(),"")};r.getMeshHash=function(){return this.getSymbols().reduce((u,w)=>u+=JSON.stringify(w),"")};r.clone=function(){return new a({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:z.clone(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})};
t._createClass(g,[{key:"arcadeRequired",get:function(){return this.arcadeRequiredForVisualVariables}}]);return g}(d.VisualVariablesMixin(n));k.__decorate([f.property({type:String,json:{write:!0}})],m.prototype,"description",void 0);k.__decorate([f.property({type:String,json:{write:!0}})],m.prototype,"label",void 0);k.__decorate([f.property(b.rendererSymbolProperty)],m.prototype,"symbol",void 0);k.__decorate([h.enumeration({simple:"simple"})],m.prototype,"type",void 0);return m=a=k.__decorate([e.subclass("esri.renderers.SimpleRenderer")],
m)})},"esri/renderers/support/jsonUtils":function(){define("exports ../../core/has ../../core/object ../../core/Warning ../../core/accessorSupport/extensions/serializableProperty/reader ../../core/Error ./types".split(" "),function(t,k,m,z,y,x,f){function h(q,p){if(!p||"web-scene"!==p.origin)return!0;switch(q.type){case "simple":case "unique-value":case "class-breaks":return!0;case "heatmap":case "dictionary":case "dot-density":return!1;default:return!1}}function e(q,p,n){return q?q&&(q.styleName||
q.styleUrl)&&"uniqueValue"!==q.type?(n&&n.messages&&n.messages.push(new z("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+q.type+"'",{definition:q,context:n})),null):l(q,p,n):null}const l=y.createTypeReader({types:f.rendererTypes});t.fromJSON=function(q,p){return e(q,null,p)};t.read=e;t.write=function(q,p,n,d){q?h(q,d)?q=q.write({},d):(d.messages&&d.messages.push(new x("renderer:unsupported",`Renderer of type '${q.declaredClass}' are not supported in scenes.`,
{renderer:q,context:d})),q=null):q=null;q&&m.setDeepValue(n,q,p)};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/renderers/support/types":function(){define("exports ../Renderer ../ClassBreaksRenderer ../UniqueValueRenderer ../DictionaryRenderer ../DotDensityRenderer ../HeatmapRenderer ../SimpleRenderer".split(" "),function(t,k,m,z,y,x,f,h){const e={key:"type",base:k,typeMap:{simple:h,"unique-value":z,"class-breaks":m},errorContext:"renderer"};t.rendererTypes={key:"type",base:k,typeMap:{heatmap:f,
simple:h,"unique-value":z,"class-breaks":m,"dot-density":x,dictionary:y},errorContext:"renderer"};t.webSceneRendererTypes=e;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/views/2d/layers/support/clusterUtils":function(){define("exports ../../../../core/has ../../../../core/maybe ../../../../core/Logger ../../../../core/Error ../../../../renderers/visualVariables/support/SizeStop ../../../../renderers/visualVariables/SizeVariable ../../../../core/MD5 ../../engine/LevelDependentSizeVariable".split(" "),
function(t,k,m,z,y,x,f,h,e){function l(u,w,v){switch(u){case "avg":case "avg_angle":return`cluster_avg_${w}`;case "mode":return`cluster_type_${w}`;case "norm":return u=w.toLowerCase()+",norm:field,"+v.toLowerCase(),"cluster_avg_"+h.createMD5Hash(u)}}function q(u,w){const {name:v,outStatistic:D}=w,{onStatisticField:B,onStatisticValueExpression:C,statisticType:A}=D;C?(w=h.createMD5Hash(C.toLowerCase()),u.push({name:v,outStatistic:{onStatisticField:w,onStatisticValueExpression:C,statisticType:A}})):
B?u.push({name:v,outStatistic:{onStatisticField:B,statisticType:A}}):d.error(new y("mapview-unsupported-field","Unable to handle field",{field:w}))}function p(u,w,v){const D=h.createMD5Hash(w),B="mode"===v?`cluster_type_${D}`:`cluster_avg_${D}`;u.some(C=>C.name===B)||u.push({name:B,outStatistic:{onStatisticField:D,onStatisticValueExpression:w,statisticType:v}});return B}function n(u,w,v,D){if("cluster_count"===w||u.some(C=>C.name===w))return w;const B=l(v,w,D);u.some(C=>C.name===B)||("norm"===v?u.push({name:B,
outStatistic:{onStatisticField:w,onStatisticNormalizationField:D,statisticType:v}}):u.push({name:B,outStatistic:{onStatisticField:w,statisticType:v}}));return B}const d=z.getLogger("esri.views.2d.layers.support.clusterUtils");k.add("esri-cluster-arcade-enabled",1);const b=k("esri-cluster-arcade-enabled"),a=u=>{for(const w of u)if("size"===w.type)return w;return null},c=u=>{for(const w of u)if("cluster_count"===w.field)return!0;return!1},g=(u,w)=>{const v=[new x({value:0,size:0}),new x({value:1})];
if(m.isNone(w))return new f({field:"cluster_count",stops:[...v,new x({value:2,size:0})]});const D=Object.keys(w).reduce((B,C)=>({...B,[C]:[...v,new x({value:Math.max(2,w[C].minValue),size:u.clusterMinSize}),new x({value:Math.max(3,w[C].maxValue),size:u.clusterMaxSize})]}),{});return new e.LevelDependentSizeVariable({field:"cluster_count",levels:D})},r=u=>{const w=v=>d.error(new y("Unsupported-renderer",v,{renderer:u}));if("unique-value"===u.type){if(u.field2||u.field3)return w("FeatureReductionCluster does not support multi-field UniqueValueRenderers"),
!1}else if("class-breaks"===u.type){if(u.normalizationField){const v=u.normalizationType;if("field"!==v)return w(`FeatureReductionCluster does not support a normalizationType of ${v}`),!1}}else if("simple"!==u.type)return w(`FeatureReductionCluster does not support renderers of type ${u.type}`),!1;if(!b){if("valueExpression"in u&&u.valueExpression)return w("FeatureReductionCluster does not currently support renderer.valueExpression. Support will be added in a future release"),!1;if(("visualVariables"in
u&&u.visualVariables||[]).some(v=>!!("valueExpression"in v&&v.valueExpression)))return w("FeatureReductionCluster does not currently support visualVariables with a valueExpression. Support will be added in a future release"),!1}return!0};t.createClusterCountSizeVariable=g;t.createClusterRenderer=(u,w,v,D)=>{w=w.clone();if(!r(w))return w;if(v.fields)for(var B of v.fields)q(u,B);if("visualVariables"in w){B=(w.visualVariables||[]).filter(A=>"$view.scale"!==A.valueExpression);const C=a(B);B.forEach(A=>
{"rotation"===A.type?A.field?A.field=n(u,A.field,"avg_angle"):A.valueExpression&&(A.field=p(u,A.valueExpression,"avg_angle"),A.valueExpression=null):A.normalizationField?(A.field=n(u,A.field,"norm",A.normalizationField),A.normalizationField=null):A.field?A.field=n(u,A.field,"avg"):(A.field=p(u,A.valueExpression,"avg"),A.valueExpression=null)});m.isNone(C)&&!c(B)&&(B.push(g(v,D)),w.dynamicClusterSize=!0);w.visualVariables=B}switch(w.type){case "unique-value":w.field?w.field=n(u,w.field,"mode"):w.valueExpression&&
(w.field=p(u,w.valueExpression,"mode"),w.valueExpression=null);break;case "class-breaks":w.normalizationField?(w.field=n(u,w.field,"norm",w.normalizationField),w.normalizationField=null):w.field?w.field=n(u,w.field,"avg"):(w.field=p(u,w.valueExpression,"avg"),w.valueExpression=null)}return w};t.findSizeVV=a;t.hasClusterCountVV=c;t.isClusterCompatibleRenderer=r;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/core/MD5":function(){define(["exports"],function(t){function k(h,e){const l=(h&65535)+
(e&65535);return(h>>16)+(e>>16)+(l>>16)<<16|l&65535}function m(h,e,l,q,p,n){h=k(k(e,h),k(q,n));return k(h<<p|h>>>32-p,l)}function z(h,e,l,q,p,n,d){return m(e&l|~e&q,h,e,p,n,d)}function y(h,e,l,q,p,n,d){return m(e&q|l&~q,h,e,p,n,d)}function x(h,e,l,q,p,n,d){return m(l^(e|~q),h,e,p,n,d)}const f={Base64:0,Hex:1,String:2,Raw:3};t.createMD5Hash=function(h,e=f.Hex){e=e||f.Base64;var l=[];for(let p=0,n=8*h.length;p<n;p+=8)l[p>>5]|=(h.charCodeAt(p/8)&255)<<p%32;{h=8*h.length;l[h>>5]|=128<<h%32;l[(h+64>>>
9<<4)+14]=h;h=1732584193;var q=-271733879;let p=-1732584194,n=271733878;for(let d=0;d<l.length;d+=16){const b=h,a=q,c=p,g=n;h=z(h,q,p,n,l[d+0],7,-680876936);n=z(n,h,q,p,l[d+1],12,-389564586);p=z(p,n,h,q,l[d+2],17,606105819);q=z(q,p,n,h,l[d+3],22,-1044525330);h=z(h,q,p,n,l[d+4],7,-176418897);n=z(n,h,q,p,l[d+5],12,1200080426);p=z(p,n,h,q,l[d+6],17,-1473231341);q=z(q,p,n,h,l[d+7],22,-45705983);h=z(h,q,p,n,l[d+8],7,1770035416);n=z(n,h,q,p,l[d+9],12,-1958414417);p=z(p,n,h,q,l[d+10],17,-42063);q=z(q,p,
n,h,l[d+11],22,-1990404162);h=z(h,q,p,n,l[d+12],7,1804603682);n=z(n,h,q,p,l[d+13],12,-40341101);p=z(p,n,h,q,l[d+14],17,-1502002290);q=z(q,p,n,h,l[d+15],22,1236535329);h=y(h,q,p,n,l[d+1],5,-165796510);n=y(n,h,q,p,l[d+6],9,-1069501632);p=y(p,n,h,q,l[d+11],14,643717713);q=y(q,p,n,h,l[d+0],20,-373897302);h=y(h,q,p,n,l[d+5],5,-701558691);n=y(n,h,q,p,l[d+10],9,38016083);p=y(p,n,h,q,l[d+15],14,-660478335);q=y(q,p,n,h,l[d+4],20,-405537848);h=y(h,q,p,n,l[d+9],5,568446438);n=y(n,h,q,p,l[d+14],9,-1019803690);
p=y(p,n,h,q,l[d+3],14,-187363961);q=y(q,p,n,h,l[d+8],20,1163531501);h=y(h,q,p,n,l[d+13],5,-1444681467);n=y(n,h,q,p,l[d+2],9,-51403784);p=y(p,n,h,q,l[d+7],14,1735328473);q=y(q,p,n,h,l[d+12],20,-1926607734);h=m(q^p^n,h,q,l[d+5],4,-378558);n=m(h^q^p,n,h,l[d+8],11,-2022574463);p=m(n^h^q,p,n,l[d+11],16,1839030562);q=m(p^n^h,q,p,l[d+14],23,-35309556);h=m(q^p^n,h,q,l[d+1],4,-1530992060);n=m(h^q^p,n,h,l[d+4],11,1272893353);p=m(n^h^q,p,n,l[d+7],16,-155497632);q=m(p^n^h,q,p,l[d+10],23,-1094730640);h=m(q^p^
n,h,q,l[d+13],4,681279174);n=m(h^q^p,n,h,l[d+0],11,-358537222);p=m(n^h^q,p,n,l[d+3],16,-722521979);q=m(p^n^h,q,p,l[d+6],23,76029189);h=m(q^p^n,h,q,l[d+9],4,-640364487);n=m(h^q^p,n,h,l[d+12],11,-421815835);p=m(n^h^q,p,n,l[d+15],16,530742520);q=m(p^n^h,q,p,l[d+2],23,-995338651);h=x(h,q,p,n,l[d+0],6,-198630844);n=x(n,h,q,p,l[d+7],10,1126891415);p=x(p,n,h,q,l[d+14],15,-1416354905);q=x(q,p,n,h,l[d+5],21,-57434055);h=x(h,q,p,n,l[d+12],6,1700485571);n=x(n,h,q,p,l[d+3],10,-1894986606);p=x(p,n,h,q,l[d+10],
15,-1051523);q=x(q,p,n,h,l[d+1],21,-2054922799);h=x(h,q,p,n,l[d+8],6,1873313359);n=x(n,h,q,p,l[d+15],10,-30611744);p=x(p,n,h,q,l[d+6],15,-1560198380);q=x(q,p,n,h,l[d+13],21,1309151649);h=x(h,q,p,n,l[d+4],6,-145523070);n=x(n,h,q,p,l[d+11],10,-1120210379);p=x(p,n,h,q,l[d+2],15,718787259);q=x(q,p,n,h,l[d+9],21,-343485551);h=k(h,b);q=k(q,a);p=k(p,c);n=k(n,g)}l=[h,q,p,n]}switch(e){case f.Raw:return l;case f.Hex:e=[];for(let p=0,n=4*l.length;p<n;p++)e.push("0123456789abcdef".charAt(l[p>>2]>>p%4*8+4&15)+
"0123456789abcdef".charAt(l[p>>2]>>p%4*8&15));return e=e.join("");case f.String:e=[];for(let p=0,n=32*l.length;p<n;p+=8)e.push(String.fromCharCode(l[p>>5]>>>p%32&255));return e=e.join("");case f.Base64:e=[];for(let p=0,n=4*l.length;p<n;p+=3)for(h=(l[p>>2]>>p%4*8&255)<<16|(l[p+1>>2]>>(p+1)%4*8&255)<<8|l[p+2>>2]>>(p+2)%4*8&255,q=0;4>q;q++)8*p+6*q>32*l.length?e.push("\x3d"):e.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(h>>6*(3-q)&63));return e=e.join("")}};t.outputTypes=
f;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/views/2d/engine/LevelDependentSizeVariable":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/lang ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/jsonMap ../../../core/accessorSupport/decorators/subclass ../../../core/accessorSupport/decorators/writer ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../../renderers/visualVariables/support/sizeVariableUtils ../../../renderers/visualVariables/SizeVariable".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d,b,a){var c;t.LevelDependentSizeVariable=c=function(g){function r(){return g.apply(this,arguments)||this}k._inheritsLoose(r,g);var u=r.prototype;u.writeLevels=function(w,v,D){for(const B in w){v.stops=this.levels[B];break}};u.clone=function(){return new c({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:b.isSizeVariable(this.maxSize)?this.maxSize.clone():this.maxSize,
minDataValue:this.minDataValue,minSize:b.isSizeVariable(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map(w=>w.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone(),levels:y.clone(this.levels)})};return r}(a);m.__decorate([h.property()],t.LevelDependentSizeVariable.prototype,"levels",void 0);
m.__decorate([q.writer("levels")],t.LevelDependentSizeVariable.prototype,"writeLevels",null);t.LevelDependentSizeVariable=c=m.__decorate([l.subclass("esri.views.2d.engine.LevelDependentSizeVariable")],t.LevelDependentSizeVariable);Object.defineProperty(t,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/util/vvFlagUtils":function(){define(["exports","../enums","../visualVariablesUtils"],function(t,k,m){t.getVVFlags=function(z){if(!z)return k.WGLVVFlag.NONE;let y=0;for(const x of z)"size"===
x.type?(z=m.getTypeOfSizeVisualVariable(x),y|=z,"outline"===x.target&&(y|=z<<4)):"color"===x.type?y|=k.WGLVVFlag.COLOR:"opacity"===x.type?y|=k.WGLVVFlag.OPACITY:"rotation"===x.type&&(y|=k.WGLVVFlag.ROTATION);return y};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/views/2d/layers/features/support/pixelBuffering":function(){define("exports ../../../../../core/screenUtils ../../../engine/webgl/definitions ../../../../../symbols/cim/Rect ../../../../../symbols/cim/CIMSymbolHelper ../../graphics/graphicsUtils".split(" "),
function(t,k,m,z,y,x){function f(a){if(!("visualVariables"in a&&a.hasVisualVariables("size")))return 0;a=a.getVisualVariablesForType("size");if(!a[0])return 0;a=a[0];if("stops"===a.transformationType)return a.stops.map(c=>c.size).reduce(p,0);if("clamped-linear"===a.transformationType){let c=-Infinity,g=-Infinity;c="number"===typeof a.maxSize?a.maxSize:a.maxSize.stops.map(r=>r.size).reduce(p,0);g="number"===typeof a.minSize?a.minSize:a.minSize.stops.map(r=>r.size).reduce(p,0);return Math.max(c,g)}if("real-world-size"===
a.transformationType)return 30}function h(a,c){return null==a?c:a}async function e(a,c){if("simple-marker"===a.type)return c=Math.max(h(a.size,12),c),q(a)+.707*c;if("picture-marker"===a.type){var g=Math.max(h(a.height,12),c);c=h(a.width,12)*(g/h(a.height,12))/2;g/=2;return q(a)+Math.sqrt(c*c+g*g)}if("text"===a.type){if(g=a.text&&a.text.length){c=[];for(let r=0;r<g;r++)c.push({...b,code:a.text.charCodeAt(r)});c={glyphMosaicItems:c}}else c={glyphMosaicItems:[b]};x.getTextSymbolSize(d,a.toJSON(),c);
return Math.max(Math.abs(d[0]),Math.abs(d[1]))+Math.max(d[2],d[3])}return"simple-line"===a.type?(g=Math.max(h(a.width,.75),c)/2,a.marker?Math.max(6*a.width,2*c):g):"simple-fill"===a.type||"picture-fill"===a.type?Math.max(null==a.outline?0:h(a.outline.width,0),c)/2:"cim"===a.type?(a=y.CIMSymbolHelper.getEnvelope(a.data))?Math.sqrt(a.width*a.width+a.height*a.height):0:"web-style"===a.type?e(await a.fetchCIMSymbol(),c):0}async function l(a,c){return a.type in n?Math.min(await e(a,c),75):0}function q(a){const c=
h(a.xoffset,0);a=h(a.yoffset,0);return Math.sqrt(c*c+a*a)}function p(a,c){return Math.max(a,c)}const n={"simple-marker":1,"picture-marker":1,text:0,"simple-line":0,"simple-fill":0,"picture-fill":0,cim:1,"web-style":1},d=[0,0,0,0],b={sdf:!0,code:99,metrics:m.AVERAGE_GLYPH_MOSAIC_ITEM.metrics,rect:new z(0,0,24,24),page:0,textureBinding:2};t.computePxBuffer=async function(a,c,g){if(!a||g&&"cluster"===g.type)return 0;if("heatmap"===a.type)return Math.round(3*a.blurRadius);if("dot-density"===a.type)return 0;
if("dictionary"===a.type)return"esriGeometryPoint"===c||"esriGeometryMultipoint"===c?100:200;c=a.getSymbols();a=f(a);g=[];for(var r of c)g.push(l(r,a));r=await Promise.all(g);return k.pt2px(r.reduce(p,0))};t.getPtMaxVVSize=f;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/views/2d/layers/graphics/graphicsUtils":function(){define("exports ../../../../core/has ../../../../core/maybe ../../../../geometry/support/spatialReferenceUtils ../../../../geometry/support/boundsUtils ../../../../geometry/support/jsonUtils ../../../../core/screenUtils ../../../../geometry/support/normalizeUtilsCommon ../../../../geometry/support/normalizeUtils ../../../../geometry/support/aaBoundingRect ../../../../chunks/vec2 ../../../../chunks/mat2d ../../../../chunks/mat2df32 ../../../../chunks/vec2f32 ../../engine/webgl/alignmentUtils ../../engine/webgl/mesh/templates/shapingUtils ../../engine/webgl/util/BidiText ../../../../symbols/cim/CIMSymbolHelper".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d,b,a,c,g){function r(L,M,S,Q,U,W){let fa,Z;var T=f.pt2px(S.xoffset);const ba=f.pt2px(S.yoffset),ha=B*S.angle;W*=B;switch(S.type){case "esriSMS":fa=Z=f.pt2px(S.size);break;case "esriPMS":fa=f.pt2px(S.width),Z=f.pt2px(S.height)}.04>U&&(Q=.04*Q/U);S=p.identity(C);p.translate(S,S,q.set(A,L,M));p.rotate(S,S,W-ha);p.scale(S,S,q.set(A,Q,-Q));p.translate(S,S,q.set(A,T,-ba));L=[0,0];q.transformMat2d(L,q.set(A,-.5*fa,-.5*Z),S);M=[0,0];q.transformMat2d(M,q.set(A,-.5*fa,.5*
Z),S);Q=[0,0];q.transformMat2d(Q,q.set(A,.5*fa,-.5*Z),S);T=[0,0];q.transformMat2d(T,q.set(A,.5*fa,.5*Z),S);return{rings:[[L,Q,T,M,L]]}}function u(L,M,S,Q,U,W){var fa=g.CIMSymbolHelper.getEnvelope(S.data);if(!fa)return null;.04>U&&(Q=.04*Q/U);U=f.pt2px(fa.width);var Z=f.pt2px(fa.height);S=f.pt2px(fa.x);fa=f.pt2px(fa.y);const T=0*B,ba=B*W;W=p.identity(C);p.translate(W,W,q.set(A,L,M));p.rotate(W,W,ba-T);p.scale(W,W,q.set(A,Q,Q));L=[0,0];q.transformMat2d(L,q.set(A,S,fa+Z),W);M=[0,0];q.transformMat2d(M,
q.set(A,S,fa),W);Q=[0,0];q.transformMat2d(Q,q.set(A,S+U,fa+Z),W);Z=[0,0];q.transformMat2d(Z,q.set(A,S+U,fa),W);return{rings:[[L,Q,Z,M,L]]}}function w(L,M,S,Q,U,W){var fa=f.pt2px(S.xoffset),Z=f.pt2px(S.yoffset);S=B*S.angle;const T=B*W;W=p.identity(C);p.translate(W,W,q.set(A,L,M));p.rotate(W,W,T);p.scale(W,W,q.set(A,U,-U));L=Q[0]+Q[2]/2;M=Q[1]+Q[3]/2;p.translate(W,W,q.set(A,fa,-Z));p.translate(W,W,q.set(A,L,M));p.rotate(W,W,S);p.translate(W,W,q.set(A,-L,-M));fa=[0,0];q.transformMat2d(fa,q.set(A,Q[0],
Q[1]),W);Z=[0,0];q.transformMat2d(Z,q.set(A,Q[0],Q[1]+Q[3]),W);S=[0,0];q.transformMat2d(S,q.set(A,Q[0]+Q[2],Q[1]),W);L=[0,0];q.transformMat2d(L,q.set(A,Q[0]+Q[2],Q[1]+Q[3]),W);return{rings:[[fa,S,L,Z,fa]]}}function v(L){switch(L.symbol.type){case "esriSFS":case "esriPFS":return(L=L.symbol.outline)?L.width:0;case "esriSLS":return f.pt2px(L.symbol.width);case "esriSMS":return f.pt2px(L.symbol.size);case "esriPMS":return f.pt2px(Math.max(L.symbol.width,L.symbol.height));case "esriTS":{const M=[0,0,0,
0];D(M,L.symbol,L.mosaicItem);return Math.max(M[2],M[3])+Math.max(Math.abs(M[0]),Math.abs(M[1]))}case "expanded-cim":L=g.CIMSymbolHelper.getEnvelope(L.symbol.data);if(-Infinity===L.width||-Infinity===L.height)L.width=10,L.height=10,L.x=0,L.y=0;return f.pt2px(Math.sqrt(L.width*L.width+L.height*L.height));case "composite-symbol":return L.symbol.layers.length?v({symbol:L.symbol.layers[L.symbol.layers.length-1],mosaicItem:null}):0;default:return 0}}function D(L,M,S){if(!S||0===S.glyphMosaicItems.length)return L;
const Q=c.bidiText(M.text)[1];M=a.shapeGlyphs(S.glyphMosaicItems,Q,{scale:f.pt2px(M.font.size)/24,angle:M.angle,xOffset:M.xoffset,yOffset:M.yoffset,hAlign:b.getXAnchorDirection(M.horizontalAlignment||"center"),vAlign:b.getYAnchorDirection(M.verticalAlignment||"baseline"),maxLineWidth:Math.max(32,Math.min(M.lineWidth||512,512)),lineHeight:30*Math.max(.25,Math.min(M.lineHeight||1,4)),decoration:M.font.decoration||"none",isCIM:!1}).bounds;L[0]=f.pt2px(M.x-M.halfWidth);L[1]=f.pt2px(M.y-M.halfHeight);
L[2]=f.pt2px(M.width);L[3]=f.pt2px(M.height);return L}const B=Math.PI/180,C=n.create(),A=d.create(),E=d.create(),G=d.create(),H=d.create(),K=d.create(),J=d.create(),F=d.create(),N=d.create();t.PIXEL_BUFFER=50;t.TILE_SIZE=512;t.getBounds=function(L,M,S,Q,U,W,fa){if(!Q||!S.symbol)return L[0]=L[1]=L[2]=L[3]=0,M[0]=M[1]=M[2]=M[3]=0,L;if(x.isPoint(Q)){var Z=Q.x;const ba=Q.y;"esriTS"===S.symbol.type&&0===M[2]&&0===M[3]&&D(M,S.symbol,S.mosaicItem);Q=Z;Z=ba;S=S.symbol;switch(S.type){case "esriSMS":case "esriPMS":var T=
r(Q,Z,S,U,W,0);break;case "esriTS":T=w(Q,Z,S,M,U,0);break;case "cim":case "CIMSymbolReference":case "expanded-cim":T=u(Q,Z,S,U,W,0)}M=0;for(U=0;U<T.rings[0].length-1;U++)S=T.rings[0][U],S=(Q-S[0])*(Q-S[0])+(Z-S[1])*(Z-S[1]),M=Math.max(M,S);M=Math.sqrt(M);T=e.normalizeMapX(Q-M,fa);Q=e.normalizeMapX(Q+M,fa);if(T>Q&&(fa=z.getInfo(fa))){const [ha,sa]=fa.valid;T=ha;Q=sa}L[0]=T;L[1]=Z-M;L[2]=Q;L[3]=Z+M}else y.getBoundsXY(L,Q),fa=M[0],0===fa&&(fa=v(S),M[0]=fa),fa=U*fa/2,L[0]-=fa,L[1]-=fa,L[2]+=fa,L[3]+=
fa;return L};t.getCIMMarkerBounds=u;t.getMarkerSymbolBounds=r;t.getTextSymbolBounds=w;t.getTextSymbolSize=D;t.graphicGeometryToNumber=function(L){switch(m.unwrap(L.geometry).type){case "polyline":return 1;case "polygon":case "extent":return 2}return 0};t.intersectingInternationalDateline=function(L,M){if(!M.isWrappable)return null;const [S,Q]=h.getSpatialReferenceMinMaxX(M);return L[2]>Q?[l.create([L[0],L[1],Q,L[3]]),l.create([S,L[1],S+L[2]-Q,L[3]])]:L[0]<S?[l.create([S,L[1],L[2],L[3]]),l.create([Q-
(S-L[0]),L[1],Q,L[3]])]:null};t.isMarkerSymbol=function(L){return"simple-marker"===L||"picture-marker"===L||"esriSMS"===L||"esriPMS"===L};t.isPointOnPolyline=function(L,M,S,Q){q.set(H,M,S);L=L.paths;let U,W,fa,Z,T,ba,ha,sa=Infinity;for(let O=0;O<L.length;O++){const V=L[O];if(!(2>V.length))for(let ja=1;ja<V.length;ja++){var ua=V[ja-1][0];W=V[ja-1][1];U=V[ja][0];fa=V[ja][1];Z=Math.min(ua,U)-Q;T=Math.min(W,fa)-Q;ba=Math.max(ua,U)+Q;ha=Math.max(W,fa)+Q;M<Z||M>ba||S<T||S>ha||(q.set(E,ua,W),q.set(G,U,fa),
q.subtract(K,G,E),q.subtract(J,E,H),q.scale(F,K,q.dot(K,J)/q.dot(K,K)),q.subtract(N,J,F),ua=q.dot(N,N),sa>ua&&(sa=ua))}}return Math.sqrt(sa)<=Q};t.isTextSymbol=function(L){return"text"===L||"esriTS"===L};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/chunks/mat2d":function(){define(["exports","./common"],function(t,k){function m(B,C){B[0]=C[0];B[1]=C[1];B[2]=C[2];B[3]=C[3];B[4]=C[4];B[5]=C[5];return B}function z(B){B[0]=1;B[1]=0;B[2]=0;B[3]=1;B[4]=0;B[5]=0;return B}function y(B,C,A,E,G,
H,K){B[0]=C;B[1]=A;B[2]=E;B[3]=G;B[4]=H;B[5]=K;return B}function x(B,C){const A=C[0],E=C[1],G=C[2],H=C[3],K=C[4];C=C[5];let J=A*H-E*G;if(!J)return null;J=1/J;B[0]=H*J;B[1]=-E*J;B[2]=-G*J;B[3]=A*J;B[4]=(G*C-H*K)*J;B[5]=(E*K-A*C)*J;return B}function f(B){return B[0]*B[3]-B[1]*B[2]}function h(B,C,A){const E=C[0],G=C[1],H=C[2],K=C[3],J=C[4];C=C[5];const F=A[0],N=A[1],L=A[2],M=A[3],S=A[4];A=A[5];B[0]=E*F+H*N;B[1]=G*F+K*N;B[2]=E*L+H*M;B[3]=G*L+K*M;B[4]=E*S+H*A+J;B[5]=G*S+K*A+C;return B}function e(B,C,A){const E=
C[0],G=C[1],H=C[2],K=C[3],J=C[4];C=C[5];const F=Math.sin(A);A=Math.cos(A);B[0]=E*A+H*F;B[1]=G*A+K*F;B[2]=E*-F+H*A;B[3]=G*-F+K*A;B[4]=J;B[5]=C;return B}function l(B,C,A){const E=C[1],G=C[2],H=C[3],K=C[4],J=C[5],F=A[0];A=A[1];B[0]=C[0]*F;B[1]=E*F;B[2]=G*A;B[3]=H*A;B[4]=K;B[5]=J;return B}function q(B,C,A){const E=C[0],G=C[1],H=C[2],K=C[3],J=C[4];C=C[5];const F=A[0];A=A[1];B[0]=E;B[1]=G;B[2]=H;B[3]=K;B[4]=E*F+H*A+J;B[5]=G*F+K*A+C;return B}function p(B,C){const A=Math.sin(C);C=Math.cos(C);B[0]=C;B[1]=
A;B[2]=-A;B[3]=C;B[4]=0;B[5]=0;return B}function n(B,C){B[0]=C[0];B[1]=0;B[2]=0;B[3]=C[1];B[4]=0;B[5]=0;return B}function d(B,C){B[0]=1;B[1]=0;B[2]=0;B[3]=1;B[4]=C[0];B[5]=C[1];return B}function b(B){return"mat2d("+B[0]+", "+B[1]+", "+B[2]+", "+B[3]+", "+B[4]+", "+B[5]+")"}function a(B){return Math.sqrt(B[0]**2+B[1]**2+B[2]**2+B[3]**2+B[4]**2+B[5]**2+1)}function c(B,C,A){B[0]=C[0]+A[0];B[1]=C[1]+A[1];B[2]=C[2]+A[2];B[3]=C[3]+A[3];B[4]=C[4]+A[4];B[5]=C[5]+A[5];return B}function g(B,C,A){B[0]=C[0]-
A[0];B[1]=C[1]-A[1];B[2]=C[2]-A[2];B[3]=C[3]-A[3];B[4]=C[4]-A[4];B[5]=C[5]-A[5];return B}function r(B,C,A){B[0]=C[0]*A;B[1]=C[1]*A;B[2]=C[2]*A;B[3]=C[3]*A;B[4]=C[4]*A;B[5]=C[5]*A;return B}function u(B,C,A,E){B[0]=C[0]+A[0]*E;B[1]=C[1]+A[1]*E;B[2]=C[2]+A[2]*E;B[3]=C[3]+A[3]*E;B[4]=C[4]+A[4]*E;B[5]=C[5]+A[5]*E;return B}function w(B,C){return B[0]===C[0]&&B[1]===C[1]&&B[2]===C[2]&&B[3]===C[3]&&B[4]===C[4]&&B[5]===C[5]}function v(B,C){const A=B[0],E=B[1],G=B[2],H=B[3],K=B[4];B=B[5];const J=C[0],F=C[1],
N=C[2],L=C[3],M=C[4];C=C[5];return Math.abs(A-J)<=k.EPSILON*Math.max(1,Math.abs(A),Math.abs(J))&&Math.abs(E-F)<=k.EPSILON*Math.max(1,Math.abs(E),Math.abs(F))&&Math.abs(G-N)<=k.EPSILON*Math.max(1,Math.abs(G),Math.abs(N))&&Math.abs(H-L)<=k.EPSILON*Math.max(1,Math.abs(H),Math.abs(L))&&Math.abs(K-M)<=k.EPSILON*Math.max(1,Math.abs(K),Math.abs(M))&&Math.abs(B-C)<=k.EPSILON*Math.max(1,Math.abs(B),Math.abs(C))}var D=Object.freeze({__proto__:null,copy:m,identity:z,set:y,invert:x,determinant:f,multiply:h,rotate:e,
scale:l,translate:q,fromRotation:p,fromScaling:n,fromTranslation:d,str:b,frob:a,add:c,subtract:g,multiplyScalar:r,multiplyScalarAndAdd:u,exactEquals:w,equals:v,mul:h,sub:g});t.add=c;t.copy=m;t.determinant=f;t.equals=v;t.exactEquals=w;t.frob=a;t.fromRotation=p;t.fromScaling=n;t.fromTranslation=d;t.identity=z;t.invert=x;t.mat2d=D;t.mul=h;t.multiply=h;t.multiplyScalar=r;t.multiplyScalarAndAdd=u;t.rotate=e;t.scale=l;t.set=y;t.str=b;t.sub=g;t.subtract=g;t.translate=q})},"esri/chunks/mat2df32":function(){define(["exports"],
function(t){function k(){const e=new Float32Array(6);e[0]=1;e[3]=1;return e}function m(e){const l=new Float32Array(6);l[0]=e[0];l[1]=e[1];l[2]=e[2];l[3]=e[3];l[4]=e[4];l[5]=e[5];return l}function z(e,l,q,p,n,d){const b=new Float32Array(6);b[0]=e;b[1]=l;b[2]=q;b[3]=p;b[4]=n;b[5]=d;return b}function y(e,l){return new Float32Array(e,l,6)}function x(e,l,q,p){const n=l[p];l=l[p+1];e[p]=q[0]*n+q[2]*l+q[4];e[p+1]=q[1]*n+q[3]*l+q[5]}function f(e,l,q,p=0,n=0,d=2){for(n=n||l.length/d;p<n;p++)x(e,l,q,p*d)}var h=
Object.freeze({__proto__:null,create:k,clone:m,fromValues:z,createView:y,transform:x,transformMany:f});t.clone=m;t.create=k;t.createView=y;t.fromValues=z;t.mat2df32=h;t.transform=x;t.transformMany=f})},"esri/chunks/vec2f32":function(){define(["exports"],function(t){function k(){return new Float32Array(2)}function m(b){const a=new Float32Array(2);a[0]=b[0];a[1]=b[1];return a}function z(b,a){const c=new Float32Array(2);c[0]=b;c[1]=a;return c}function y(b,a){return new Float32Array(b,a,2)}function x(){return k()}
function f(){return z(1,1)}function h(){return z(1,0)}function e(){return z(0,1)}const l=k(),q=f(),p=h(),n=e();var d=Object.freeze({__proto__:null,create:k,clone:m,fromValues:z,createView:y,zeros:x,ones:f,unitX:h,unitY:e,ZEROS:l,ONES:q,UNIT_X:p,UNIT_Y:n});t.ONES=q;t.UNIT_X=p;t.UNIT_Y=n;t.ZEROS=l;t.clone=m;t.create=k;t.createView=y;t.fromValues=z;t.ones=f;t.unitX=h;t.unitY=e;t.vec2f32=d;t.zeros=x})},"esri/views/2d/engine/webgl/alignmentUtils":function(){define(["exports"],function(t){(function(k){k[k.Left=
-1]="Left";k[k.Center=0]="Center";k[k.Right=1]="Right"})(t.HAlign||(t.HAlign={}));(function(k){k[k.Top=1]="Top";k[k.Center=0]="Center";k[k.Bottom=-1]="Bottom";k[k.Baseline=2]="Baseline"})(t.VAlign||(t.VAlign={}));t.getAlignmentFromPlacement=function(k){switch(k){case "above-left":return[t.HAlign.Right,t.VAlign.Bottom];case "above-center":case "above-along":return[t.HAlign.Center,t.VAlign.Bottom];case "above-right":return[t.HAlign.Left,t.VAlign.Bottom];case "center-left":return[t.HAlign.Right,t.VAlign.Center];
case "center-center":case "center-along":return[t.HAlign.Center,t.VAlign.Center];case "center-right":return[t.HAlign.Left,t.VAlign.Center];case "below-left":return[t.HAlign.Right,t.VAlign.Top];case "below-center":case "below-along":return[t.HAlign.Center,t.VAlign.Top];case "below-right":return[t.HAlign.Left,t.VAlign.Top];case "always-horizontal":return[t.HAlign.Center,t.VAlign.Baseline];default:return console.debug(`Found invalid placement type ${k}`),[t.HAlign.Center,t.VAlign.Center]}};t.getJustification=
function(k){switch(k){case "left":return t.HAlign.Left;case "right":return t.HAlign.Right;case "center":case "justify":return t.HAlign.Center}};t.getXAnchorDirection=function(k){switch(k){case "left":return t.HAlign.Left;case "right":return t.HAlign.Right;case "center":case "justify":return t.HAlign.Center}};t.getXDirection=function(k){switch(k){case t.HAlign.Right:return-1;case t.HAlign.Center:return 0;case t.HAlign.Left:return 1;default:return console.debug(`Found invalid horizontal alignment ${k}`),
0}};t.getYAnchorDirection=function(k){switch(k){case "top":return t.VAlign.Top;case "middle":return t.VAlign.Center;case "baseline":return t.VAlign.Baseline;case "bottom":return t.VAlign.Bottom}};t.getYDirection=function(k){switch(k){case t.VAlign.Top:return 1;case t.VAlign.Center:return 0;case t.VAlign.Bottom:case t.VAlign.Baseline:return-1;default:return console.debug(`Found invalid vertical alignment ${k}`),0}};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/mesh/templates/shapingUtils":function(){define("exports ../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../chunks/vec2 ../../../../../../chunks/mat2d ../../../../../../chunks/mat2df32 ../../../../../../chunks/vec2f32 ../../alignmentUtils ../../number ../../Rect ../../collisions/BoundingBox".split(" "),
function(t,k,m,z,y,x,f,h,e,l){const q=Math.PI/180;let p=function(){function a(g,r,u,w){this._rotationT=y.create();this.minZoom=this._yBounds=this._xBounds=0;this.maxZoom=255;this._bounds=null;const v=u.rect,D=new Float32Array(8);g*=w;r*=w;const B=u.code?v.width*w:u.metrics.width,C=u.code?v.height*w:u.metrics.height;D[0]=g;D[1]=r;D[2]=g+B;D[3]=r;D[4]=g;D[5]=r+C;D[6]=g+B;D[7]=r+C;this._data=D;this._setTextureCoords(v);this._scale=w;this._mosaic=u;this.x=g;this.y=r;this.maxOffset=Math.max(g+B,r+C)}var c=
a.prototype;c.setTransform=function(g){this._T=g;this._offsets=null};c._setOffsets=function(g){this._offsets||(this._offsets={upperLeft:0,upperRight:0,lowerLeft:0,lowerRight:0});const r=this._offsets,u=new Float32Array(8),w=z.multiply(y.create(),this._rotationT,this._T);y.transformMany(u,g,w);r.upperLeft=h.i1616to32(8*u[0],8*u[1]);r.upperRight=h.i1616to32(8*u[2],8*u[3]);r.lowerLeft=h.i1616to32(8*u[4],8*u[5]);r.lowerRight=h.i1616to32(8*u[6],8*u[7])};c._setTextureCoords=function({x:g,y:r,width:u,height:w}){this._texcoords=
{upperLeft:h.i1616to32(g,r),upperRight:h.i1616to32(g+u,r),lowerLeft:h.i1616to32(g,r+w),lowerRight:h.i1616to32(g+u,r+w)}};k._createClass(a,[{key:"width",get:function(){return this._mosaic.metrics.width*this._scale}},{key:"mosaic",get:function(){return this._mosaic}},{key:"angle",get:function(){return this._angle},set:function(g){this._angle=g;z.identity(this._rotationT);z.rotate(this._rotationT,this._rotationT,-g);this._setOffsets(this._data)}},{key:"xTopLeft",get:function(){return this._data[0]}},
{key:"yTopLeft",get:function(){return this._data[1]}},{key:"xBottomRight",get:function(){return this._data[6]}},{key:"yBottomRight",get:function(){return this._data[7]}},{key:"texcoords",get:function(){return this._texcoords}},{key:"textureBinding",get:function(){return this._mosaic.textureBinding}},{key:"offsets",get:function(){this._offsets||this._setOffsets(this._data);return this._offsets}},{key:"char",get:function(){return String.fromCharCode(this._mosaic.code)}},{key:"code",get:function(){return this._mosaic.code}},
{key:"bounds",get:function(){if(!this._bounds){const {height:v,width:D}=this._mosaic.metrics;var g=D*this._scale,r=Math.abs(v)*this._scale,u=new Float32Array(8);u[0]=this.x;u[1]=this.y;u[2]=this.x+g;u[3]=this.y;u[4]=this.x;u[5]=this.y+r;u[6]=this.x+g;u[7]=this.y+r;g=z.multiply(y.create(),this._rotationT,this._T);y.transformMany(u,u,g);r=g=Infinity;let B=0;var w=0;for(let C=0;4>C;C++){const A=u[2*C],E=u[2*C+1];g=Math.min(g,A);r=Math.min(r,E);B=Math.max(B,A);w=Math.max(w,E)}u=B-g;w-=r;this._bounds=
new l(g+u/2,r+w/2,u,w)}return this._bounds}}]);return a}();const n=(a,c)=>({code:0,page:0,sdf:!0,rect:new e(0,0,11,8),textureBinding:c,metrics:{advance:0,height:4,width:a,left:0,top:0}});let d=function(){function a(g,r,u){this._rotation=0;this._decorate(g,r,u);this.glyphs=g;this.bounds=this._createBounds(g);this.isMultiline=1<r.length;this._hasRotation=0!==u.angle;this._T=this._createGlyphTransform(this.bounds,u);for(const w of g)w.setTransform(this._T)}var c=a.prototype;c.setRotation=function(g){if(0!==
g||0!==this._rotation){this._rotation=g;var r=this._T;g=z.fromRotation(y.create(),g);z.multiply(r,g,r);for(const u of this.glyphs)u.setTransform(this._T)}};c._decorate=function(g,r,u){if(u.decoration&&"none"!==u.decoration&&g.length){var w=u.scale;u="underline"===u.decoration?30:20;var v=g[0].textureBinding;for(const D of r)g.push(new p(D.startX*w,D.startY*w+u*w,n((D.width+D.glyphWidthEnd)*w,v),1))}};c._createBounds=function(g){let r=Infinity,u=Infinity,w=0;var v=0;for(const D of g)r=Math.min(r,D.xTopLeft),
u=Math.min(u,D.yTopLeft),w=Math.max(w,D.xTopLeft+D.width),v=Math.max(v,D.yBottomRight);g=w-r;v-=u;return new l(r+g/2,u+v/2,g,v)};c._createGlyphTransform=function(g,r){const u=q*r.angle,w=y.create(),v=x.create();z.translate(w,w,m.set(v,r.xOffset,-r.yOffset));r.isCIM?z.rotate(w,w,u):(z.translate(w,w,m.set(v,g.x,g.y)),z.rotate(w,w,u),z.translate(w,w,m.set(v,-g.x,-g.y)));return w};k._createClass(a,[{key:"boundsT",get:function(){var g=this.bounds;const r=m.set(x.create(),g.x,g.y);m.transformMat2d(r,r,
this._T);return this._hasRotation?(g=Math.max(g.width,g.height),new l(r[0],r[1],g,g)):new l(r[0],r[1],g.width,g.height)}}]);return a}(),b=function(a,c,g,r,u,w){this.startY=this.startX=this.glyphWidthEnd=0;this.start=Math.max(0,Math.min(c,g));this.end=Math.max(0,Math.max(c,g));this.end<a.length&&(this.glyphWidthEnd=a[this.end].metrics.width);this.width=r;this.yMin=u;this.yMax=w};t.ShapedGlyph=p;t.ShapingInfo=d;t.shapeGlyphs=function(a,c,g){const r=g.scale,u=[];{var w=[];var v=1/g.scale*g.maxLineWidth;
var D=c?a.length-1:0;var B=c?-1:a.length;c=c?-1:1;var C=D,A=0,E=0;let J=C,F=J,N=0,L=Infinity,M=0;for(;C!==B;){const {code:S,metrics:Q}=a[C];var G=Math.abs(Q.top);10!==S&&32!==S&&(L=Math.min(L,G),M=Math.max(M,G+Q.height));10===S?(C!==D&&(w.push(new b(a,J,C-c,A,L,M)),L=Infinity,M=0),A=0,J=C+c,F=C+c,E=0):32===S?(F=C+c,E=0,N=Q.advance,A+=Q.advance):(A>v&&(F!==J?(G=F-2*c,A-=N,w.push(new b(a,J,G,A-E,L,M)),L=Infinity,M=0,J=F,A=E):(w.push(new b(a,J,C-c,A,L,M)),L=Infinity,M=0,F=J=C,A=0)),A+=Q.advance,E+=Q.advance);
C+=c}v=new b(a,J,C-c,A,L,M);0<=v.start&&v.end<a.length&&w.push(v)}for(v=0;v<w.length;v++);v=D=w[0].yMin;D=w[w.length-1].yMax+g.lineHeight*(w.length-1)+("underline"===g.decoration?4:0)-D;const {vAlign:H,hAlign:K}=g;B=H===f.VAlign.Baseline?1:0;v=(1-B)*-v+D/2*(B?0:H-1)+-26*(B?1:0);for(D=0;D<w.length;D++){const {start:J,end:F,width:N}=w[D];B=N/2*(K+1)*-1-3;c=D*g.lineHeight+v-3;w[D].startX=B;w[D].startY=c;for(C=J;C<=F;C++)A=a[C],10!==A.code&&(E=new p(B+A.metrics.left,c-A.metrics.top,A,r),B+=A.metrics.advance,
u.push(E))}return new d(u,w,g)};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/collisions/BoundingBox":function(){define(["../../../../../chunks/_rollupPluginBabelHelpers","../../../../../core/mathUtils","../../../../../chunks/vec2f32"],function(t,k,m){return function(){function z(x,f,h,e){this.center=m.fromValues(x,f);this.centerT=m.create();this.halfWidth=h/2;this.halfHeight=e/2;this.width=h;this.height=e}var y=z.prototype;y.clone=function(){return new z(this.x,
this.y,this.width,this.height)};y.serialize=function(x){x.writeF32(this.center[0]);x.writeF32(this.center[1]);x.push(this.width);x.push(this.height);return x};y.findCollisionDelta=function(x,f=4){return k.log2(Math.min((x.halfWidth+this.halfWidth+f)/Math.abs(x.centerT[0]-this.centerT[0]),(x.halfHeight+this.halfHeight+f)/Math.abs(x.centerT[1]-this.centerT[1])))};y.extend=function(x){const f=Math.min(this.xmin,x.xmin),h=Math.min(this.ymin,x.ymin),e=Math.max(this.xmax,x.xmax)-f;x=Math.max(this.ymax,
x.ymax)-h;this.width=e;this.height=x;this.halfWidth=e/2;this.halfHeight=x/2;this.x=f+e/2;this.y=h+x/2};z.deserialize=function(x){const f=x.readF32(),h=x.readF32(),e=x.readInt32();x=x.readInt32();return new z(f,h,e,x)};t._createClass(z,[{key:"x",get:function(){return this.center[0]},set:function(x){this.center[0]=x}},{key:"y",get:function(){return this.center[1]},set:function(x){this.center[1]=x}},{key:"blX",get:function(){return this.center[0]+this.halfWidth}},{key:"blY",get:function(){return this.center[1]+
this.halfHeight}},{key:"trX",get:function(){return this.center[0]-this.halfWidth}},{key:"trY",get:function(){return this.center[1]-this.halfHeight}},{key:"xmin",get:function(){return this.x-this.halfWidth}},{key:"xmax",get:function(){return this.x+this.halfWidth}},{key:"ymin",get:function(){return this.y-this.halfHeight}},{key:"ymax",get:function(){return this.y+this.halfHeight}}]);return z}()})},"esri/views/2d/layers/features/support/rendererUtils":function(){define(["exports","../../../../../core/Logger",
"../../../../../core/screenUtils"],function(t,k,m){function z(f){return("size"===f.type||"color"===f.type||"opacity"===f.type)&&null!=f.stops}function y(f){var h=f.type;var e=f.stops;if(8>=e.length)h=e;else if(x.warn(`Found ${e.length} Visual Variable stops, but MapView only supports ${8}. Displayed stops will be simplified.`),16<e.length){{const [g,...r]=e;var l=r.pop(),q=r[0].value,p=r[r.length-1].value,n=(p-q)/6;const u=[];for(;q<p;q+=n){for(var d=0;q>=r[d].value;)d++;var b=r[d],a=e[d-1],c=q-a.value;
b=b.value===a.value?1:c/(b.value-a.value);"color"===h?(a=r[d],d=e[d-1],c=a.color.clone(),c.r=(1-b)*d.color.r+b*c.r,c.g=(1-b)*d.color.g+b*c.g,c.b=(1-b)*d.color.b+b*c.b,c.a=(1-b)*d.color.a+b*c.a,u.push({value:q,color:c,label:a.label})):"size"===h?(a=r[d],c=e[d-1],d=m.toPt(a.size),c=m.toPt(c.size),u.push({value:q,size:(1-b)*c+b*d,label:a.label})):(a=r[d],u.push({value:q,opacity:(1-b)*e[d-1].opacity+b*a.opacity,label:a.label}))}h=[g,...u,l]}}else{{const [g,...r]=e;for(h=r.pop();6<r.length;){l=e=0;for(p=
1;p<r.length;p++)n=Math.abs(r[p].value-r[p-1].value),n>l&&(l=n,e=p);r.splice(e,1)}h=[g,...r,h]}}f.stops=h;return f}const x=k.getLogger("esri.renderers.visualVariables.support.utils");t.simplifyVVRenderer=f=>{if(!("visualVariables"in f&&f.visualVariables&&f.visualVariables.length))return f;f=f.clone();const h=f.visualVariables.map(e=>z(e)?y(e):e);f.visualVariables=h;return f};t.simplifyVisualVariables=function(f){return f.map(h=>z(h)?y(h.clone()):h)};Object.defineProperty(t,"__esModule",{value:!0})})},
"esri/views/2d/layers/support/util":function(){define(["exports","../../../../core/jsonMap"],function(t,k){const m=new k.JSONMap({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch",mesh:"mesh"});t.analyzeRings=function(z,y,x){const f=[],h=[];let e=0,l=0;for(const q of z){z=l;let p=q[0][0],n=q[0][1];f[l++]=p;f[l++]=n;let d=0;for(let b=1;b<q.length;++b){const a=p,c=n;p=q[b][0];n=q[b][1];d+=n*
a-p*c;f[l++]=p;f[l++]=n}y(d/2);0<d?(0<z-e&&(x(e,z,f,h),e=z),h.length=0):0>d?0<z-e?h.push(.5*(z-e)):l=z:l=z}0<l-e&&x(e,l,f,h)};t.toJSONGeometryType=function(z){return m.toJSON(z)};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/views/2d/layers/features/textUtils":function(){define(["exports"],function(t){t.codepoints=function(k){const m=Array(k.length);for(let z=0;z<k.length;z++)m[z]=k.charCodeAt(z);return m};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/mesh/templates/WGLTemplateStore":function(){define("exports ../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/Logger ../../../../../../core/Error ../../../../../../core/promiseUtils ../../../../../../symbols/support/defaults ../../util/Result ../../../../layers/features/schemaUtils ./WGLTextTemplate ./WGLMarkerTemplate ./WGLDynamicFillTemplate ./WGLDynamicLineTemplate ./WGLDynamicMarkerTemplate ../../../../layers/features/textUtils ./WGLDynamicTextTemplate ./WGLFillTemplate ./WGLLineTemplate ../../util/Lock".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d,b,a,c,g){function r(D,B){const C=D.length;D.push(null);B.then(A=>D[C]=A);return D}function u(D){return!!(D&1)}const w=m.getLogger("esri.views.2d.engine.webgl.mesh.templates.WGLTemplateStore"),v=[];m=function(){function D(C,A){this._templateIdCounter=this._idCounter=1;this._idToTemplateGroup=new Map;this._symbolToTemplate=new Map;this._fetchQueue=[];this._idToResolver=new Map;this._cimTemplateCache=new Map;this._cimAnalyses=[];this._lock=new g["default"];this._fetchResource=
C;this._joinOnUTurn=A}var B=D.prototype;B.createTemplateGroup=function(C,A){this._initErrorTemplates();const E=C.hash;if(this._symbolToTemplate.has(E))return this._symbolToTemplate.get(E);const G=[];A&&this._createMeshTemplates(G,A,!0);this._createMeshTemplates(G,C,!1);C=this._createGroupId("expanded-cim"===C.type);this._idToTemplateGroup.set(C,G);this._symbolToTemplate.set(E,C);return C};B.getTemplateGroup=function(C){return this._idToTemplateGroup.has(C)?this._idToTemplateGroup.get(C):v};B.getDynamicTemplateGroup=
function(C){if(!this._idToTemplateGroup.has(C))return v;u(C)||w.error("mapview-template-store",`Id ${C} does not refer to a dynamic template`);return this._idToTemplateGroup.get(C)};B.getMosaicItem=function(C,A){const E=this._createTemplateId(),G=new Promise(H=>this._idToResolver.set(E,H));this._fetchQueue.push({symbol:C,id:E,glyphIds:A});return G};B.finalize=function(C){return this._fetchQueue.length||this._lock.isHeld()?g.withLock(this._lock,this._fetchAllQueuedResources.bind(this),C):Promise.resolve()};
B._initErrorTemplates=function(){this._errorTemplates||(this._errorTemplates={fill:this._createMeshTemplates([],h.createSymbolSchema(x.errorPolygonSymbol2D),!1),marker:this._createMeshTemplates([],h.createSymbolSchema(x.errorPointSymbol2D),!1),line:this._createMeshTemplates([],h.createSymbolSchema(x.errorPolylineSymbol2D),!1)})};B._fetchAllQueuedResources=function(C){if(!this._fetchQueue.length)return Promise.resolve();const A=this._fetchQueue,E=this._cimAnalyses;this._fetchQueue=[];this._cimAnalyses=
[];return Promise.all(E).then(()=>this._fetchResource(A,C).then(G=>{for(const {id:H,mosaicItem:K}of G)this._idToResolver.get(H)(K),this._idToResolver.delete(H)})).catch(G=>{y.isAbortError(G)?this._fetchQueue=this._fetchQueue.concat(A):"worker:port-closed"!==G.name&&w.error(new z("mapview-template-store","Unable to fetch requested texture resources",G))})};B._createGroupId=function(C){return this._idCounter++<<1|(C?1:0)};B._createTemplateId=function(){return this._templateIdCounter++};B._createSMS=
async function(C){const {spriteMosaicItem:A}=await this.getMosaicItem(C);return f.ok(A,w)?l.fromSimpleMarker(C,A):this._markerError};B._createPMS=async function(C){const {spriteMosaicItem:A}=await this.getMosaicItem(C);return f.ok(A,w)?l.fromPictureMarker(C,A):this._markerError};B._createSFS=async function(C,A){const {spriteMosaicItem:E}=await this.getMosaicItem(C);return f.ok(E,w)?a.fromSimpleFill(C,E,A):this._fillError};B._createPFS=async function(C,A){const {spriteMosaicItem:E}=await this.getMosaicItem(C);
return f.ok(E,w)?a.fromPictureFill(C,E,A):this._fillError};B._createSLS=async function(C,A){({spriteMosaicItem:A}=await this.getMosaicItem(C));return f.ok(A,w)?c.fromSimpleLine(C,A,this._joinOnUTurn):this._lineError};B._createLMS=async function(C){const {spriteMosaicItem:A}=await this.getMosaicItem(C);return f.ok(A,w)?l.fromLineSymbolMarker(C,A):this._markerError};B._createTS=async function(C){const {glyphMosaicItems:A}=await this.getMosaicItem(C);return e.fromText(C,A)};B._createCIMText=async function(C){const {glyphMosaicItems:A}=
await this.getMosaicItem(C.cim,d.codepoints(C.text));return f.ok(A,w)?e.fromCIMText(C,A):this._textError};B._createCIMFill=async function(C){const {spriteMosaicItem:A}=await this.getMosaicItem(C.cim);return f.ok(A,w)?a.fromCIMFill(C,A):this._fillError};B._createCIMLine=async function(C){const {spriteMosaicItem:A}=await this.getMosaicItem(C.cim);return f.ok(A,w)?c.fromCIMLine(C,A,this._joinOnUTurn):this._lineError};B._createCIMMarker=async function(C){const {spriteMosaicItem:A}=await this.getMosaicItem(C.cim);
return f.ok(A,w)?l.fromCIMMarker(C,A):this._markerError};B._createCIM=async function(C){const A=C.templateHash;if(this._cimTemplateCache.has(A))return this._cimTemplateCache.get(A);C={...C,cim:{...C.cim,mosaicHash:C.materialHash}};let E;switch(C.type){case "marker":E=this._createCIMMarker(C);break;case "line":E=this._createCIMLine(C);break;case "fill":E=this._createCIMFill(C);break;case "text":E=this._createCIMText(C)}E.then(G=>this._cimTemplateCache.set(A,G));return E};B._createDynamicCIM=function(C){const A=
C.templateHash;if(this._cimTemplateCache.has(A))return this._cimTemplateCache.get(A);let E;switch(C.type){case "marker":E=n.fromCIMMarker(C);break;case "line":E=p.fromCIMLine(C);break;case "fill":E=q.fromCIMFill(C);break;case "text":E=b.fromCIMText(C)}this._cimTemplateCache.set(A,E);return E};B._createPrimitiveMeshTemplates=function(C,A,E){switch(A.type){case "esriSMS":return r(C,this._createSMS(A));case "esriPMS":return r(C,this._createPMS(A));case "esriSFS":return r(C,this._createSFS(A,E));case "line-marker":return r(C,
this._createLMS(A));case "esriPFS":return r(C,this._createPFS(A,E));case "esriSLS":return r(C,this._createSLS(A,!1));case "esriTS":return r(C,this._createTS(A));default:return w.error("Unable to create mesh template for unknown symbol type {: $ }{symbol.type}"),C}};B._createMeshTemplates=function(C,A,E){if(-1!==A.type.indexOf("3d"))return w.error("3D symbols are not supported with MapView"),C;if("expanded-cim"===A.type){for(const G of A.layers)"function"===typeof G.materialHash?C.push(this._createDynamicCIM(G)):
r(C,this._createCIM(G));return C}if("composite-symbol"===A.type){for(const G of A.layers)this._createPrimitiveMeshTemplates(C,G,E);return C}return"cim"===A.type||"label"===A.type||"web-style"===A.type?C:this._createPrimitiveMeshTemplates(C,A,E)};k._createClass(D,[{key:"_markerError",get:function(){return this._errorTemplates.marker[0]}},{key:"_fillError",get:function(){return this._errorTemplates.fill[0]}},{key:"_lineError",get:function(){return this._errorTemplates.line[0]}},{key:"_textError",get:function(){return this._errorTemplates.line[0]}}]);
return D}();t.WGLTemplateStore=m;t.isDynamicId=u;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/symbols/support/defaults":function(){define("exports ../../core/has ../../core/maybe ../SimpleLineSymbol ../SimpleFillSymbol ../SimpleMarkerSymbol ../TextSymbol ./defaultsJSON".split(" "),function(t,k,m,z,y,x,f,h){const e=x.fromJSON(h.defaultPointSymbolJSON),l=z.fromJSON(h.defaultPolylineSymbolJSON),q=y.fromJSON(h.defaultPolygonSymbolJSON);k=f.fromJSON(h.defaultTextSymbolJSON);x=x.fromJSON(h.errorPointSymbolJSON);
z=z.fromJSON(h.errorPolylineSymbolJSON);y=y.fromJSON(h.errorPolygonSymbolJSON);t.defaultPointSymbol2D=e;t.defaultPolygonSymbol2D=q;t.defaultPolylineSymbol2D=l;t.defaultTextSymbol2D=k;t.errorPointSymbol2D=x;t.errorPolygonSymbol2D=y;t.errorPolylineSymbol2D=z;t.getDefaultSymbol2D=function(p){if(m.isNone(p))return null;switch(p.type){case "point":case "multipoint":return e;case "polyline":return l;case "polygon":case "extent":return q}return null};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/util/Result":function(){define(["exports",
"../../../../../core/Error"],function(t,k){t.ok=function(m,z){return m&&"name"in m?(z&&z.error(new k(m.name,m.message,m.details)),!1):!0};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/mesh/templates/WGLTextTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/screenUtils ../../alignmentUtils ../../util/BidiText ../../materialKey/MaterialKey ../../color ./WGLBaseTextTemplate ./WGLMeshTemplate".split(" "),function(t,
k,m,z,y,x,f,h){return function(e){function l(q,p,n,d,b,a,c,g,r,u,w,v,D,B,C,A,E,G=!1){var H=e.call(this)||this;H._xOffset=k.pt2px(v);H._yOffset=k.pt2px(D);H._decoration=r||"none";H._color=d;H._haloColor=b;H._haloSize=Math.min(Math.floor(5*k.pt2px(k.toPt(n))),127);H._size=Math.min(Math.round(k.pt2px(p)),127);p=Math.min(Math.round(k.pt2px(p)),127);H._referenceSize=Math.round(Math.sqrt(256*p));H._scale=H._size/24;H._angle=w;H._justify=m.getJustification(a||"center");H._xAlignD=m.getXAnchorDirection(a||
"center");H._yAlignD=m.getYAnchorDirection(c||"baseline");H._baseline="baseline"===(c||"baseline");H._bitset=(1===g?1:0)|(u?1:0)<<1;q=y.MaterialKeyBase.load(q);q.sdf=!0;H._materialKey=q.data;H._lineWidth=k.pt2px(B)||512;H._lineHeight=C||1;H._textPlacement=A;H._effects=E;H._isCIM=G;return H}t._inheritsLoose(l,e);l.fromText=function(q,p){const n=new l(q.materialKey,q.font.size,q.haloSize||0,q.color&&x.premultiplyAlphaRGBAArray(q.color)||0,q.haloColor&&x.premultiplyAlphaRGBAArray(q.haloColor)||0,q.horizontalAlignment,
q.verticalAlignment,0,q.font.decoration,!1,q.angle||0,q.xoffset,q.yoffset,q.lineWidth,q.lineHeight,null,null,!1),[,d]=z.bidiText(q.text);n.bindTextInfo(p,d);n._vertexBoundsScale=q.maxVVSize?q.maxVVSize/q.font.size:1;return n};l.fromCIMText=function(q,p){var n=q.scaleFactor||1;const d=q.size*q.sizeRatio*n;n=new l(q.materialKey,d,q.outlineSize*q.sizeRatio,x.premultiplyAlphaRGBA(q.color),x.premultiplyAlphaRGBA(q.outlineColor),q.horizontalAlignment,q.verticalAlignment,q.alignment,q.decoration,q.colorLocked,
q.angle,q.offsetX*q.sizeRatio*n,q.offsetY*q.sizeRatio*n,512,1,q.markerPlacement,q.effects,!0);const [,b]=z.bidiText(q.text);n.bindTextInfo(p,b);n._vertexBoundsScale=q.maxVVSize?q.maxVVSize/d:1;return n};return l}(f(h))})},"esri/views/2d/engine/webgl/mesh/templates/WGLBaseTextTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/maybe ../../../../../../core/screenUtils ../../../../../../layers/graphics/featureConversionUtils ../../definitions ../../number ./shapingUtils ../../enums ../../materialKey/MaterialKey ../../../../../../symbols/cim/placements/CIMMarkerPlacementHelper".split(" "),
function(t,k,m,z,y,x,f,h,e,l){return q=>function(p){function n(...b){b=p.call(this,...b)||this;b._isCIM=!1;b._vertexBoundsScale=1;b.geometryType=h.WGLGeometryType.TEXT;b._aux=x.i8888to32(0,0,b._referenceSize,b._bitset);return b}t._inheritsLoose(n,p);var d=n.prototype;d.bindTextInfo=function(b,a){this._shapingInfo=b&&b.length?k.andThen(b,c=>f.shapeGlyphs(c,a,{scale:this._scale,angle:this._angle,xOffset:this._xOffset,yOffset:this._yOffset,hAlign:this._xAlignD,vAlign:this._yAlignD,maxLineWidth:Math.max(32,
Math.min(this._lineWidth,512)),lineHeight:y.MAGIC_LABEL_LINE_HEIGHT*Math.max(.25,Math.min(this._lineHeight,4)),decoration:this._decoration,isCIM:this._isCIM})):null};d._write=function(b,a,c){const g=a.getDisplayId();this._writeGeometry(b,a,g,c)};d._writeGeometry=function(b,a,c,g){const r=this._shapingInfo;if(!k.isNone(r)){if(k.isSome(this._textPlacement))return a=null!=g?g:a.readLegacyGeometry(),this._writePlacedText(b,c,a,r);if(a=g?z.deltaDecodeGeometry(z.convertFromGeometry(g),2):"esriGeometryPolygon"===
a.geometryType?a.readCentroid():a.readUnquantizedGeometry()){if(a.isPoint){const [u,w]=a.coords;return this._writeGlyphs(b,c,{x:u,y:w},r)}a.forEachVertex((u,w)=>this._writeGlyphs(b,c,{x:u,y:w},r))}}};d._writePlacedText=function(b,a,c,g){var r=k.unwrap(this._textPlacement);if(c=l.CIMMarkerPlacementHelper.getPlacement(c,r,m.pt2px(1)))for(r=c.next();null!=r;){const u=r.getAngle();g.setRotation(u);this._writeGlyphs(b,a,{x:r.tx,y:r.ty},g);g.setRotation(-u);r=c.next()}};d._writeGlyphs=function(b,a,c,g){const r=
e.MaterialKeyBase.load(this._materialKey);c=x.i1616to32(Math.round(8*c.x),Math.round(8*c.y));for(const u of g.glyphs){r.textureBinding=u.textureBinding;b.recordStart(a,r.data,this.geometryType,!1,!0);g=u.bounds;const w=this._vertexBoundsScale;b.vertexBounds(g.x*w,g.y*w,g.width*w,g.height*w);this._writeVertices(b,a,c,u);b.recordEnd()}};d._writeGlyph=function(b,a,c,g,r){var u=e.MaterialKeyBase.load(this._materialKey);c=x.i1616to32(Math.round(8*c),Math.round(8*g));u.textureBinding=r.textureBinding;b.recordStart(a,
u.data,this.geometryType,!1,!0);u=r.bounds;g=this._vertexBoundsScale;b.vertexBounds(u.x*g,u.y*g,u.width*g,u.height*g);this._writeVertices(b,a,c,r);b.recordEnd()};d._writeVertices=function(b,a,c,g){const r=b.vertexCount();this._writeVertexCommon(b,a,c,g);b.vertexWrite(g.offsets.upperLeft);b.vertexWrite(g.texcoords.upperLeft);b.vertexEnd();this._writeVertexCommon(b,a,c,g);b.vertexWrite(g.offsets.upperRight);b.vertexWrite(g.texcoords.upperRight);b.vertexEnd();this._writeVertexCommon(b,a,c,g);b.vertexWrite(g.offsets.lowerLeft);
b.vertexWrite(g.texcoords.lowerLeft);b.vertexEnd();this._writeVertexCommon(b,a,c,g);b.vertexWrite(g.offsets.lowerRight);b.vertexWrite(g.texcoords.lowerRight);b.vertexEnd();b.indexWrite(r+0);b.indexWrite(r+1);b.indexWrite(r+2);b.indexWrite(r+1);b.indexWrite(r+3);b.indexWrite(r+2)};d._writeVertexCommon=function(b,a,c,g){g=this._color;const r=this._haloColor,u=x.i8888to32(0,0,this._referenceSize,this._bitset),w=x.i8888to32(0,0,this._size,this._haloSize);b.vertexWrite(c);b.vertexWrite(a);b.vertexWrite(g);
b.vertexWrite(r);b.vertexWrite(w);b.vertexWrite(u)};return n}(q)})},"esri/symbols/cim/placements/CIMMarkerPlacementHelper":function(){define(["exports","../CIMCursor","../CIMOperators"],function(t,k,m){let z=function(){function y(){}y.getPlacement=function(x,f,h){const e=m.getPlacementOperator(f);if(!e)return null;x=k.cloneAndDecodeGeometry(x);return e.execute(x,f,h)};return y}();t.CIMMarkerPlacementHelper=z;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/mesh/templates/WGLMeshTemplate":function(){define(["../../../../../../core/maybe",
"../../../../../../symbols/cim/effects/CIMEffectHelper"],function(t,k){return function(){function m(){}var z=m.prototype;z.bindFeature=function(y,x,f){};z.write=function(y,x){if(t.isNone(this._effects))return this._write(y,x);const f=k.CIMEffectHelper.executeEffects(this._effects,x.readLegacyGeometry());let h=k.CIMEffectHelper.next(f);for(;h;)this._write(y,x,h),h=k.CIMEffectHelper.next(f)};z._write=function(y,x,f){};return m}()})},"esri/symbols/cim/effects/CIMEffectHelper":function(){define(["exports",
"../CIMEffects","../CIMCursor","../CIMOperators"],function(t,k,m,z){const y=96/72;let x=function(){function f(){}f.executeEffects=function(h,e){e=m.cloneAndDecodeGeometry(e);e=new k.SimpleGeometryCursor(e);for(const l of h)(h=z.getEffectOperator(l))&&(e=h.execute(e,l,y));return e};f.next=function(h){h=h.next();m.deltaEncodeGeometry(h);return h};return f}();t.CIMEffectHelper=x;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/mesh/templates/WGLMarkerTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/maybe ../../../../../../core/screenUtils ../../definitions ../../../../../../chunks/mat2df32 ../../../../../../chunks/vec2f32 ../../number ../../materialKey/MaterialKey ../../color ./WGLMeshTemplate ./WGLBaseMarkerTemplate".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q){return function(p){function n(d,b,a,c,g,r,u,w,v,D,B,C,A,E,G,H,K,J,F,N,L){var M=p.call(this)||this;M.angle=c;M.height=u;M.width=r;M.xOffset=b*F;M.yOffset=a*F;M._markerPlacement=N;M._effects=L;M._anchorX=.5-(.5+H)*G.width/G.width;M._anchorY=.5-(.5+K)*G.height/G.height;b=(1===E?1:0)|(B?1:0)<<1|(A?1:0)<<2|(C?1:0)<<3;a=G&&G.sdf;d=h.MarkerMaterialKey.load(d);d.sdf=a;d.pattern=!0;d.textureBinding=G.textureBinding;M._materialKey=d.data;M._fillColor=g;M._outlineColor=v;M._sizeOutlineWidth=
f.i8888to32(Math.round(Math.min(Math.sqrt(128*r),255)),Math.round(Math.min(Math.sqrt(128*u),255)),Math.round(Math.min(Math.sqrt(128*D),255)),Math.round(Math.min(Math.sqrt(128*w),255)));g=G.rect.x+z.SPRITE_PADDING;w=G.rect.y+z.SPRITE_PADDING;v=g+G.width;G=w+G.height;M._offsets.xUpperLeft=g;M._offsets.yUpperLeft=w;M._offsets.xUpperRight=v;M._offsets.yUpperRight=w;M._offsets.xBottomLeft=g;M._offsets.yBottomLeft=G;M._offsets.xBottomRight=v;M._offsets.yBottomRight=G;M._texUpperLeft=f.i1616to32(g,w);M._texUpperRight=
f.i1616to32(v,w);M._texBottomLeft=f.i1616to32(g,G);M._texBottomRight=f.i1616to32(v,G);r=r*J*F;u=u*J*F;M._bitestAndDistRatio=f.i1616to32(b,Math.round(64*J));M._computedWidth=r;M._computedHeight=u;r=x.create();u=y.create();M._applyTransformation(u,r);return M}t._inheritsLoose(n,p);n.fromCIMMarker=function(d,b){const a=d.size,c=(b&&b.width||1)/(b&&b.height||1)*d.scaleX;var g=d.scaleSymbolsProportionally&&d.frameHeight?a/d.frameHeight:1;const r=e.premultiplyAlphaRGBA(d.color),u=e.premultiplyAlphaRGBA(d.outlineColor),
w=m.pt2px(a),v=w*c,D=m.pt2px(d.offsetX||0),B=m.pt2px(d.offsetY||0);g*=m.pt2px(d.outlineWidth||0);const C=d.alignment||0,A=m.pt2px(d.referenceSize);let E=d.rotation||0;d.rotateClockwise||(E=-E);let G=0,H=0;const K=d.anchorPoint;K&&(d.isAbsoluteAnchorPoint?a&&(G=-K.x/(a*c),H=K.y/a):(G=K.x,H=K.y));b=new n(d.materialKey,D,B,E,r,v,w,A,u,g,d.colorLocked,d.scaleSymbolsProportionally,!1,C,b,G,H,d.sizeRatio,k.unwrapOr(d.scaleFactor,1),d.markerPlacement,d.effects);b._vertexBoundsScaleX=d.maxVVSize?d.maxVVSize/
v:1;b._vertexBoundsScaleY=d.maxVVSize?d.maxVVSize/w:1;return b};n.fromPictureMarker=function(d,b){const a=Math.round(m.pt2px(d.width)),c=Math.round(m.pt2px(d.height)),g=z.PICTURE_FILL_COLOR,r=Math.round(m.pt2px(d.xoffset||0)),u=Math.round(m.pt2px(d.yoffset||0));b=new n(d.materialKey,r,u,d.angle,g,a,c,c,0,0,!1,!1,!1,0,b,0,0,1,1,null,null);b._vertexBoundsScaleX=d.maxVVSize?d.maxVVSize/d.width:1;b._vertexBoundsScaleY=d.maxVVSize?d.maxVVSize/d.height:1;return b};n.fromSimpleMarker=function(d,b){const a=
e.premultiplyAlphaRGBAArray(d.color),c=Math.round(m.pt2px(d.size)),g=Math.round(m.pt2px(d.xoffset||0)),r=Math.round(m.pt2px(d.yoffset||0)),u=d.style;var w=d.outline;const v=(w&&w.color&&e.premultiplyAlphaRGBAArray(w.color))|0;w=(w&&w.width&&Math.round(m.pt2px(w.width)))|0;b=new n(d.materialKey,g,r,d.angle,a,c,c,c,v,w,!1,!1,"esriSMSCross"===u||"esriSMSX"===u,0,b,0,0,1.96875,1,null,null);b.boundsType="esriSMSCircle"===u?"circle":"square";b._vertexBoundsScaleX=d.maxVVSize?d.maxVVSize/d.size:1;b._vertexBoundsScaleY=
d.maxVVSize?d.maxVVSize/d.size:1;return b};n.fromLineSymbolMarker=function(d,b){const a=e.premultiplyAlphaRGBAArray(d.color),c=Math.round(m.pt2px(6*d.lineWidth)),g="cross"===d.style||"x"===d.style;switch(d.placement){case "begin-end":var r="Both";break;case "begin":r="JustBegin";break;case "end":r="JustEnd";break;default:r="None"}r={type:"CIMMarkerPlacementAtExtremities",angleToLine:!0,offset:0,extremityPlacement:r,offsetAlongLine:0};b=new n(d.materialKey,0,0,0,a,c,c,c/6,a,g?Math.round(m.pt2px(d.lineWidth)):
0,!1,!1,g,1,b,0,0,1.96875,1,r,null);b.boundsType="circle"===d.style?"circle":"square";return b};return n}(q(l))})},"esri/views/2d/engine/webgl/mesh/templates/WGLBaseMarkerTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/maybe ../../../../../../core/screenUtils ../../../../../../layers/graphics/featureConversionUtils ../../../../../../chunks/vec2 ../../../../../../chunks/mat2d ../../../../../../chunks/mat2df32 ../../../../../../chunks/vec2f32 ../../number ../../enums ../../../../../../symbols/cim/placements/CIMMarkerPlacementHelper".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q){const p=3.14159265359/180;return n=>function(d){function b(...c){c=d.call(this,...c)||this;c.angle=0;c.xOffset=0;c.yOffset=0;c.width=0;c.height=0;c.boundsType="square";c._anchorX=0;c._anchorY=0;c._computedWidth=0;c._computedHeight=0;c._vertexBoundsScaleX=1;c._vertexBoundsScaleY=1;c._offsets={xUpperLeft:0,yUpperLeft:0,xUpperRight:0,yUpperRight:0,xBottomLeft:0,yBottomLeft:0,xBottomRight:0,yBottomRight:0};c.geometryType=l.WGLGeometryType.MARKER;return c}t._inheritsLoose(b,
d);var a=b.prototype;a._write=function(c,g,r){const u=g.getDisplayId();c.recordStart(u,this._materialKey,this.geometryType,!1,!0);this._writeGeometry(c,g,u,r);c.recordEnd()};a._writeGeometry=function(c,g,r,u){if(k.isSome(this._markerPlacement))return this._writePlacedMarkers(c,g,u);if(g=u?z.deltaDecodeGeometry(z.convertFromGeometry(u),2):"esriGeometryPolygon"===g.geometryType?g.readCentroid():g.readUnquantizedGeometry()){if(g.isPoint){const [w,v]=g.coords;return!c.hasAggregates&&c.hasPixelBufferEnabled&&
(-1>w||513<=w||-1>v||513<=v)?void 0:this._writeVertices(c,r,this._getPos(w,v),w,v)}g.forEachVertex((w,v)=>this._writeVertices(c,r,this._getPos(w,v),w,v))}};a._writePlacedMarkers=function(c,g,r){r=null!=r?r:g.readLegacyGeometry();if(r=q.CIMMarkerPlacementHelper.getPlacement(r,k.unwrap(this._markerPlacement),m.pt2px(1))){g=g.getDisplayId();for(var u=h.create(),w=f.create(),v=r.next();null!=v;){const {tx:D,ty:B}=v;-128<=D&&640>=D&&-128<=B&&640>=B&&(this._applyTransformation(w,u,v.getAngle()/p),this._writeVertices(c,
g,this._getPos(D,B),D,B));v=r.next()}}};a._writeVertices=function(c,g,r,u,w){const v=c.vertexCount();c.vertexBounds(u+this.xOffset,w-this.yOffset,this._computedWidth*this._vertexBoundsScaleX,this._computedHeight*this._vertexBoundsScaleY);c.vertexWrite(r);c.vertexWrite(this._offsetUpperLeft);c.vertexWrite(this._texUpperLeft);c.vertexWrite(this._bitestAndDistRatio);c.vertexWrite(g);c.vertexWrite(this._fillColor);c.vertexWrite(this._outlineColor);c.vertexWrite(this._sizeOutlineWidth);c.vertexEnd();c.vertexWrite(r);
c.vertexWrite(this._offsetUpperRight);c.vertexWrite(this._texUpperRight);c.vertexWrite(this._bitestAndDistRatio);c.vertexWrite(g);c.vertexWrite(this._fillColor);c.vertexWrite(this._outlineColor);c.vertexWrite(this._sizeOutlineWidth);c.vertexEnd();c.vertexWrite(r);c.vertexWrite(this._offsetBottomLeft);c.vertexWrite(this._texBottomLeft);c.vertexWrite(this._bitestAndDistRatio);c.vertexWrite(g);c.vertexWrite(this._fillColor);c.vertexWrite(this._outlineColor);c.vertexWrite(this._sizeOutlineWidth);c.vertexEnd();
c.vertexWrite(r);c.vertexWrite(this._offsetBottomRight);c.vertexWrite(this._texBottomRight);c.vertexWrite(this._bitestAndDistRatio);c.vertexWrite(g);c.vertexWrite(this._fillColor);c.vertexWrite(this._outlineColor);c.vertexWrite(this._sizeOutlineWidth);c.vertexEnd();c.indexWrite(v+0);c.indexWrite(v+1);c.indexWrite(v+2);c.indexWrite(v+1);c.indexWrite(v+3);c.indexWrite(v+2)};a._applyTransformation=function(c,g,r=0){x.identity(c);x.translate(c,c,h.fromValues(this.xOffset,-this.yOffset));0!==this.angle+
r&&x.rotate(c,c,p*(this.angle+r));r=this._computedWidth;const u=this._computedHeight,w=(this._anchorX-.5)*r,v=(this._anchorY-.5)*u;y.set(g,w,v);y.transformMat2d(g,g,c);this._offsetUpperLeft=e.i1616to32(16*g[0],16*g[1]);this._offsets.xUpperLeft=g[0];this._offsets.yUpperLeft=g[1];y.set(g,w+r,v);y.transformMat2d(g,g,c);this._offsetUpperRight=e.i1616to32(16*g[0],16*g[1]);this._offsets.xUpperRight=g[0];this._offsets.yUpperRight=g[1];y.set(g,w,v+u);y.transformMat2d(g,g,c);this._offsetBottomLeft=e.i1616to32(16*
g[0],16*g[1]);this._offsets.xBottomLeft=g[0];this._offsets.yBottomLeft=g[1];y.set(g,w+r,v+u);y.transformMat2d(g,g,c);this._offsetBottomRight=e.i1616to32(16*g[0],16*g[1]);this._offsets.xBottomRight=g[0];this._offsets.yBottomRight=g[1]};a._getPos=function(c,g){return e.i1616to32(Math.round(8*c),Math.round(8*g))};return b}(n)})},"esri/views/2d/engine/webgl/mesh/templates/WGLDynamicFillTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/mathUtils ../../../../../../core/screenUtils ../../definitions ../../number ../../materialKey/MaterialKey ../../color ../../GeometryUtils ../../util/Result ./util ./WGLBaseFillTemplate ./WGLDynamicMeshTemplate".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p){return function(n){function d(b){var a;var c=n.call(this,b)||this;if(l.isFunction(b.color))c._dynamicPropertyMap.set("_fillColor",(B,C,A)=>(B=b.color(B,C,A))&&f.premultiplyAlphaRGBA(B)||0);else{const B=b.color;c.fillColor=B&&f.premultiplyAlphaRGBA(B)||0}let g=0;l.isFunction(b.height)||(g=b.height||0);const r="CIMMarkerPlacementInsidePolygon"===(null==(a=b.cim.placement)?void 0:a.type)&&b.cim.placement.shiftOddRows?2:1;c._dynamicPropertyMap.set("_height",(B,C,A)=>
l.isFunction(b.height)?b.height(B,C,A)*r:g*r);let u=0;l.isFunction(b.offsetX)||(u=m.pt2px(b.offsetX||0)+128,255<u&&(u=255));c._dynamicPropertyMap.set("_offsetX",(B,C,A)=>l.isFunction(b.offsetX)?(B=m.pt2px(b.offsetX(B,C,A))+128,255<B&&(B=255),B):u);let w=1;l.isFunction(b.scaleX)||(w=b.scaleX||1);c._dynamicPropertyMap.set("_scaleX",(B,C,A)=>l.isFunction(b.scaleX)?b.scaleX(B,C,A):w);let v=0;l.isFunction(b.offsetY)||(v=m.pt2px(-b.offsetY||0)+128,255<v&&(v=255));c._dynamicPropertyMap.set("_offsetY",(B,
C,A)=>l.isFunction(b.offsetY)?(B=m.pt2px(-b.offsetY(B,C,A))+128,255<B&&(B=255),B):v);let D=0;l.isFunction(b.angle)||(D=h.radToByte(b.angle)||0);c._dynamicPropertyMap.set("_angle",(B,C,A)=>l.isFunction(b.angle)?h.radToByte(b.angle(B,C,A)):D);c._effects=b.effects;c._cimFillLayer=b;c._fillMaterialKey=x.FillMaterialKey.load(b.materialKey);return c}t._inheritsLoose(d,n);d.fromCIMFill=function(b){return new d(b)};d.prototype.bindFeature=function(b,a,c){const g=b.readLegacyFeature();this._dynamicPropertyMap.forEach((w,
v)=>{this[v]=w(g,a,c)});b=this._fillMaterialKey;var r=this._materialCache,u=this._cimFillLayer;this.aux3=y.i8888to32(0,0,this._angle,u.colorLocked?1:0);u=u.materialHash;u=u(g,a,c);u=r.get(u);r=null;u&&e.ok(u.spriteMosaicItem)&&(r=u.spriteMosaicItem);if(r){const {rect:w,width:v,height:D}=r;u=w.x+z.SPRITE_PADDING;const B=w.y+z.SPRITE_PADDING,C=u+v,A=B+D;let E=k.nextHighestPowerOfTwo(m.pt2px(this._height));255<E?E=255:0>=E&&(E=k.nextHighestPowerOfTwo(A-B));let G=k.nextHighestPowerOfTwo(m.pt2px(this._height/
D*v||0));255<G?G=255:0>=G&&(G=k.nextHighestPowerOfTwo(C-u));const H=this._scaleX;this.tl=y.i1616to32(u,B);this.br=y.i1616to32(C,A);this.aux1=y.i8888to32(G,E,this._offsetX,this._offsetY);this.aux2=y.i1616to32(128*H,128);b.sdf=r.sdf;b.pattern=!0;b.textureBinding=r.textureBinding}else this.aux2=this.aux1=this.br=this.tl=0,b.sdf=!1,b.pattern=!1,b.textureBinding=0;this._materialKey=b.data};return d}(q(p))})},"esri/views/2d/engine/webgl/mesh/templates/WGLBaseFillTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/maybe ../../../../../../layers/graphics/featureConversionUtils ../../number ../../enums ../../materialKey/MaterialKey ./templateUtils".split(" "),
function(t,k,m,z,y,x,f){return h=>function(e){function l(...p){p=e.call(this,...p)||this;p.forceLibtess=!1;p.geometryType=y.WGLGeometryType.FILL;return p}t._inheritsLoose(l,e);var q=l.prototype;q._write=function(p,n,d){const b="esriGeometryPoint"===n.geometryType,a=x.FillMaterialKey.load(this._materialKey);p.recordStart(n.getDisplayId(),this._materialKey,this.geometryType,a.dotDensity,b);this._writeGeometry(p,n,a,d,b);p.recordEnd()};q._writeGeometry=function(p,n,d,b,a){a=this._getGeometry(n,b,a);
if(!k.isNone(a))if(b=p.indexCount(),1E3<a.lengths[0]||this.forceLibtess||!f.triangulate(p,a)){a=f.triangulateLibtess(p,a);var c=p.indexCount();b!==c&&this._writeVertices(p,n,a,[a.length/2],d)}else c=p.indexCount(),b!==c&&this._writeVertices(p,n,a.coords,a.lengths,d)};q._writeVertices=function(p,n,d,b,a){const c=n.getDisplayId();let g=0;for(const u of b){var r=g;for(b=u+g;r<b;r++){const w=d[2*r],v=d[2*r+1],D=z.i1616to32(1*w,1*v);p.vertexBounds(w,v,0,0);p.vertexWrite(D);p.vertexWrite(c);a.dotDensity?
p.vertexWriteF32(1/Math.abs(n.readGeometryArea())):(p.vertexWrite(this.fillColor),p.vertexWrite(this.tl),p.vertexWrite(this.br),p.vertexWrite(this.aux1),p.vertexWrite(this.aux2),p.vertexWrite(this.aux3))}g+=u}};q._getGeometry=function(p,n,d){return(p=n?m.deltaDecodeGeometry(m.convertFromGeometry(n),2):p.readUnquantizedGeometry())?f.clipMarshall(p,d?256:128):null};return l}(h)})},"esri/views/2d/engine/webgl/mesh/templates/templateUtils":function(){define("exports ../../../../../../layers/graphics/OptimizedGeometry ../../../../../../core/libs/earcut/earcut ../../definitions ../../TileClipper ../bufcut ../Tesselator".split(" "),
function(t,k,m,z,y,x,f){function h(d,b,a){let c=0;for(let g=1;g<a;g++)c+=(d[2*(b+g)]-d[2*(b+g-1)])*(d[2*(b+g)+1]+d[2*(b+g-1)+1]);return c}function e(d,b,a,c,g){let r=0;for(;a<c;a+=3){const u=2*(d.getValue(a)-g),w=2*(d.getValue(a+1)-g),v=2*(d.getValue(a+2)-g);r+=Math.abs((b[u]-b[v])*(b[w+1]-b[u+1])-(b[u]-b[w])*(b[v+1]-b[u+1]))}return r}function l(d,b,a,c,g,r,u,w){g=((d-g)*(r-w)-(b-w)*(g-u))/((d-a)*(r-w)-(b-c)*(g-u));return 0>g||1<g?null:{x:Math.round(d+g*(a-d)),y:Math.round(b+g*(c-b))}}const q=new f,
p=new y.TileClipper(0,0,0,1,0),n=new y.TileClipper(0,0,0,1,0);p.setExtent(z.TILE_SIZE);n.setExtent(z.TILE_SIZE);t.area=h;t.clip=function(d,b,a=0){const c=-a;b+=a;let g=a=0,r=0;for(let w=0;w<d.lengths.length;w++){const v=d.lengths[w],D=r+v;let B=0,C=null;for(;a!==D;){let A=d.coords[2*a],E=d.coords[2*a++ +1],G=A<c||A>=b||E<c||E>=b;for(var u=G;a!==D&&G===u;)G||(d.coords[2*g]=A,d.coords[2*g++ +1]=E,B++),A=d.coords[2*a],E=d.coords[2*a++ +1],G=A<c||A>=b||E<c||E>=b;if(a===D){G?C&&(d.coords[2*g]=C.x,d.coords[2*
g++ +1]=C.y,B++):(d.coords[2*g]=A,d.coords[2*g++ +1]=E,B++);continue}u=d.coords[2*(a-2)];const H=d.coords[2*(a-2)+1];if(u=l(u,H,A,E,c,c,b,c)||l(u,H,A,E,b,c,b,b)||l(u,H,A,E,b,b,c,b)||l(u,H,A,E,c,c,c,b))d.coords[2*g]=u.x,d.coords[2*g++ +1]=u.y,B++,C||(C=u);G||(d.coords[2*g]=A,d.coords[2*g++ +1]=E,B++)}d.lengths[w]=B;r+=v}};t.clipLinesMarshall=function(d,b){n.setPixelMargin(b);const a=-b;b=z.TILE_SIZE+b;let c=[];var g=!1;let r=0;for(;r<d.length;){const u=[],w=d[r];n.reset(2);let [v,D]=w[0];if(g)n.moveTo(v,
D);else{if(v<a||v>b||D<a||D>b){g=!0;continue}u.push({x:v,y:D})}let B=!1;const C=w.length;for(let A=1;A<C;++A)if(v+=w[A][0],D+=w[A][1],g)n.lineTo(v,D);else{if(v<a||v>b||D<a||D>b){B=!0;break}u.push({x:v,y:D})}if(B)g=!0;else{if(g){if(g=n.resultWithStarts())for(const A of g)c.push(A)}else c.push({line:u,start:0});r++;g=!1}}c=c.filter(u=>1<u.line.length);return 0===c.length?null:c};t.clipMarshall=function(d,b){a:{var a=z.TILE_SIZE+128;var c=0;for(var g=0;g<d.lengths.length;g++){var r=d.lengths[g];for(var u=
0;u<r;u++){const w=d.coords[2*(u+c)],v=d.coords[2*(u+c)+1];if(-128>w||w>a||-128>v||v>a){a=!0;break a}}c+=r}a=!1}if(!a)return d;p.setPixelMargin(b);p.reset(3);b=0;for(a=0;a<d.lengths.length;a++){c=d.lengths[a];g=d.coords[2*(0+b)];r=d.coords[2*(0+b)+1];p.moveTo(g,r);for(u=1;u<c;u++)g=d.coords[2*(u+b)],r=d.coords[2*(u+b)+1],p.lineTo(g,r);p.close();b+=c}a=p.result(!1);if(!a)return null;d=[];b=[];for(const w of a){a=0;for(const v of w)b.push(v.x),b.push(v.y),a++;d.push(a)}return new k(d,b)};t.triangleArea=
e;t.triangulate=function(d,b){const {coords:a,lengths:c,hasIndeterminateRingOrder:g}=b;b=d.indexWriter();d=d.vertexCount();if(g)return!1;const r=b.length;let u=0;for(var w=0;w<c.length;){let B=w,C=c[w];w=h(a,u,C);for(var v=[];++B<c.length;){var D=c[B];const A=h(a,u+C,D);if(!(0<A))break;w+=A;v.push(u+C);C+=D}D=b.length;x.bufcut(b,a,u,u+C,v,2,d);v=e(b,a,D,b.length,d);w=Math.abs(w);if(1E-5<Math.abs((v-w)/Math.max(1E-7,w)))return b.seek(r),!1;w=B;u+=C}return!0};t.triangulateEarcut=function(d,b,a){const {coords:c,
lengths:g,hasIndeterminateRingOrder:r}=b;if(r)return!1;let u=0;for(var w=0;w<g.length;){let D=w,B=g[w];for(w=[];++D<g.length;){var v=g[D];if(!(0<h(c,u+B,v)))break;w.push(u+B-u);B+=v}v=b.coords.slice(2*u,2*(u+B));w=m.earcut(v,w,2);for(const C of w)d.push(C+a+u);w=D;u+=B}return!0};t.triangulateLibtess=function(d,b){const a=[],c=[],g=d.indexWriter();d=d.vertexCount();const {coords:r,lengths:u}=b;q.beginPolygon(a,c);let w=0;for(let v=0;v<u.length;v++){const D=b.lengths[v];q.beginContour();for(let B=0;B<
D;B++){const C=[r[2*(w+B)],r[2*(w+B)+1],0];q.addVertex(C,C)}q.endContour();w+=D}q.endPolygon();for(b=0;b<c.length;b++)g.push(c[b]+d);return a};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/mesh/bufcut":function(){define(["exports"],function(t){function k(v,D,B,C,A,E,G){let H;B=0;for(let K=C,J=A-E;K<A;K+=E)B+=(v[J+D*E]-v[K+D*E])*(v[K+1+D*E]+v[J+1+D*E]),J=K;if(G===0<B)for(;C<A;C+=E)H=x(C+D*E,v[C+D*E],v[C+1+D*E],H);else for(A-=E;A>=C;A-=E)H=x(A+D*E,v[A+D*E],v[A+1+D*
E],H);H&&a(H,H.next)&&(f(H),H=H.next);return H}function m(v,D=v){if(!v)return v;let B;do if(B=!1,v.steiner||!a(v,v.next)&&0!==q(v.prev,v,v.next))v=v.next;else{f(v);v=D=v.prev;if(v===v.next)break;B=!0}while(B||v!==D);return D}function z(v,D,B,C,A,E,G,H){if(v){!H&&E&&(v=l(v,C,A,E));for(var K=v;v.prev!==v.next;){var J=v.prev,F=v.next;if(E)var N=y(v,C,A,E);else a:{N=v;var L=N.prev,M=N;const S=N.next;if(0<=q(L,M,S)){N=!1;break a}let Q=N.next.next;const U=Q;let W=0;for(;Q!==N.prev&&(0===W||Q!==U);){W++;
if(n(L.x,L.y,M.x,M.y,S.x,S.y,Q.x,Q.y)&&0<=q(Q.prev,Q,Q.next)){N=!1;break a}Q=Q.next}N=!0}if(N)D.push(J.index/B+G),D.push(v.index/B+G),D.push(F.index/B+G),f(v),K=v=F.next;else if(v=F,v===K){if(!H)z(m(v),D,B,C,A,E,G,1);else if(1===H){H=D;K=B;J=G;F=v;do N=F.prev,L=F.next.next,!a(N,L)&&p(N,F,F.next,L)&&d(N,L)&&d(L,N)&&(H.push(N.index/K+J),H.push(F.index/K+J),H.push(L.index/K+J),f(F),f(F.next),F=v=L),F=F.next;while(F!==v);v=F;z(v,D,B,C,A,E,G,2)}else if(2===H)a:{H=v;do{for(K=H.next.next;K!==H.prev;){if(J=
H.index!==K.index){N=N=N=void 0;J=H;F=K;if(N=J.next.index!==F.index&&J.prev.index!==F.index){b:{N=J;do{if(N.index!==J.index&&N.next.index!==J.index&&N.index!==F.index&&N.next.index!==F.index&&p(N,N.next,J,F)){N=!0;break b}N=N.next}while(N!==J);N=!1}N=!N}if(N=N&&d(J,F)&&d(F,J)){N=J;L=!1;M=(J.x+F.x)/2;F=(J.y+F.y)/2;do N.y>F!==N.next.y>F&&N.next.y!==N.y&&M<(N.next.x-N.x)*(F-N.y)/(N.next.y-N.y)+N.x&&(L=!L),N=N.next;while(N!==J);N=L}J=N}if(J){v=g(H,K);H=m(H,H.next);v=m(v,v.next);z(H,D,B,C,A,E,G,0);z(v,
D,B,C,A,E,G,0);break a}K=K.next}H=H.next}while(H!==v)}break}}}}function y(v,D,B,C){const A=v.prev,E=v.next;if(0<=q(A,v,E))return!1;const G=A.x>v.x?A.x>E.x?A.x:E.x:v.x>E.x?v.x:E.x,H=A.y>v.y?A.y>E.y?A.y:E.y:v.y>E.y?v.y:E.y,K=b(A.x<v.x?A.x<E.x?A.x:E.x:v.x<E.x?v.x:E.x,A.y<v.y?A.y<E.y?A.y:E.y:v.y<E.y?v.y:E.y,D,B,C);D=b(G,H,D,B,C);B=v.prevZ;for(C=v.nextZ;B&&B.z>=K&&C&&C.z<=D;){if(B!==v.prev&&B!==v.next&&n(A.x,A.y,v.x,v.y,E.x,E.y,B.x,B.y)&&0<=q(B.prev,B,B.next))return!1;B=B.prevZ;if(C!==v.prev&&C!==v.next&&
n(A.x,A.y,v.x,v.y,E.x,E.y,C.x,C.y)&&0<=q(C.prev,C,C.next))return!1;C=C.nextZ}for(;B&&B.z>=K;){if(B!==v.prev&&B!==v.next&&n(A.x,A.y,v.x,v.y,E.x,E.y,B.x,B.y)&&0<=q(B.prev,B,B.next))return!1;B=B.prevZ}for(;C&&C.z<=D;){if(C!==v.prev&&C!==v.next&&n(A.x,A.y,v.x,v.y,E.x,E.y,C.x,C.y)&&0<=q(C.prev,C,C.next))return!1;C=C.nextZ}return!0}function x(v,D,B,C){v=r.create(v,D,B);C?(v.next=C.next,v.prev=C,C.next.prev=v,C.next=v):(v.prev=v,v.next=v);return v}function f(v){v.next.prev=v.prev;v.prev.next=v.next;v.prevZ&&
(v.prevZ.nextZ=v.nextZ);v.nextZ&&(v.nextZ.prevZ=v.prevZ)}function h(v){let D=v,B=v;do{if(D.x<B.x||D.x===B.x&&D.y<B.y)B=D;D=D.next}while(D!==v);return B}function e(v,D){let B=D;const C=v.x,A=v.y;let E=-Infinity,G;do{if(A<=B.y&&A>=B.next.y&&B.next.y!==B.y){var H=B.x+(A-B.y)*(B.next.x-B.x)/(B.next.y-B.y);if(H<=C&&H>E){E=H;if(H===C){if(A===B.y)return B;if(A===B.next.y)return B.next}G=B.x<B.next.x?B:B.next}}B=B.next}while(B!==D);if(!G)return null;if(C===E)return G.prev;D=G;H=G.x;const K=G.y;let J=Infinity,
F;for(B=G.next;B!==D;)C>=B.x&&B.x>=H&&C!==B.x&&n(A<K?C:E,A,H,K,A<K?E:C,A,B.x,B.y)&&(F=Math.abs(A-B.y)/(C-B.x),(F<J||F===J&&B.x>G.x)&&d(B,v)&&(G=B,J=F)),B=B.next;return G}function l(v,D,B,C){for(var A;A!==v;A=A.next){A=A||v;null===A.z&&(A.z=b(A.x,A.y,D,B,C));if(A.prev.next!==A||A.next.prev!==A)return A.prev.next=A,A.next.prev=A,l(v,D,B,C);A.prevZ=A.prev;A.nextZ=A.next}v.prevZ.nextZ=null;v.prevZ=null;a:for(B=1;;){C=v;D=v=null;let E=0;for(;C;){E++;A=C;let G=0;for(;G<B&&A;G++)A=A.nextZ;let H=B;for(;0<
G||0<H&&A;){let K;0===G?(K=A,A=A.nextZ,H--):0!==H&&A?C.z<=A.z?(K=C,C=C.nextZ,G--):(K=A,A=A.nextZ,H--):(K=C,C=C.nextZ,G--);D?D.nextZ=K:v=K;K.prevZ=D;D=K}C=A}D.nextZ=null;B*=2;if(2>E)break a}return v}function q(v,D,B){return(D.y-v.y)*(B.x-D.x)-(D.x-v.x)*(B.y-D.y)}function p(v,D,B,C){return a(v,D)&&a(B,C)||a(v,C)&&a(B,D)?!0:0<q(v,D,B)!==0<q(v,D,C)&&0<q(B,C,v)!==0<q(B,C,D)}function n(v,D,B,C,A,E,G,H){return 0<=(A-G)*(D-H)-(v-G)*(E-H)&&0<=(v-G)*(C-H)-(B-G)*(D-H)&&0<=(B-G)*(E-H)-(A-G)*(C-H)}function d(v,
D){return 0>q(v.prev,v,v.next)?0<=q(v,D,v.next)&&0<=q(v,v.prev,D):0>q(v,D,v.prev)||0>q(v,v.next,D)}function b(v,D,B,C,A){v=32767*(v-B)*A;D=32767*(D-C)*A;v=(v|v<<8)&16711935;v=(v|v<<4)&252645135;v=(v|v<<2)&858993459;D=(D|D<<8)&16711935;D=(D|D<<4)&252645135;D=(D|D<<2)&858993459;return(v|v<<1)&1431655765|((D|D<<1)&1431655765)<<1}function a(v,D){return v.x===D.x&&v.y===D.y}function c(v,D){return v.x-D.x}function g(v,D){const B=r.create(v.index,v.x,v.y),C=r.create(D.index,D.x,D.y),A=v.next,E=D.prev;v.next=
D;D.prev=v;B.next=A;A.prev=B;C.next=B;B.prev=C;E.next=C;C.prev=E;return C}let r=function(){function v(){this.y=this.x=this.index=0;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}v.create=function(D,B,C){const A=w<u.length?u[w++]:new v;A.index=D;A.x=B;A.y=C;A.prev=null;A.next=null;A.z=null;A.prevZ=null;A.nextZ=null;A.steiner=!1;return A};return v}();const u=[];let w=0;for(let v=0;8096>v;v++)u.push(new r);t.bufcut=function(v,D,B,C,A,E,G){w=0;var H=(C-B)*E,K=A&&A.length;const J=
K?(A[0]-B)*E:H;var F=k(D,B,C,0,J,E,!0);if(F&&F.next!==F.prev){var N;if(K){K=[];for(let Q=0,U=A.length;Q<U;Q++){const W=k(D,B,C,A[Q]*E,Q<U-1?A[Q+1]*E:C*E,E,!1);W===W.next&&(W.steiner=!0);K.push(h(W))}K.sort(c);for(var L of K){C=L;A=F;if(A=e(C,A))C=g(A,C),m(C,C.next);F=m(F,F.next)}}if(H>80*E){var M=H=D[B*E];var S=N=D[1+B*E];for(L=E;L<J;L+=E)C=D[L+B*E],A=D[L+1+B*E],M=Math.min(M,C),S=Math.min(S,A),H=Math.max(H,C),N=Math.max(N,A);N=Math.max(H-M,N-S);N=0!==N?1/N:0}z(F,v,E,M,S,N,G,0)}};Object.defineProperty(t,
"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/mesh/templates/WGLDynamicMeshTemplate":function(){define(["../../../../../../chunks/_rollupPluginBabelHelpers","../../../../../../core/Logger","../../../../../../symbols/cim/cimAnalyzer","./WGLMeshTemplate"],function(t,k,m,z){const y=k.getLogger("esri.views.2d.engine.webgl.WGLDynamicMeshTemplate");return function(x){function f(h){var e=x.call(this)||this;e._ongoingMaterialRequestMap=new Map;e._materialCache=new Map;e._dynamicPropertyMap=new Map;
e._cimLayer=h;return e}t._inheritsLoose(f,x);f.prototype.analyze=function(h,e,l,q){e=e.readLegacyFeature();const p=this._materialCache,n=this._cimLayer.materialHash;if(!n)return y.error("A Dynamic mesh template must have a material hash value or function!"),Promise.reject(null);const d="function"===typeof n?n(e,l,q):n;if(p.has(d))return h=p.get(d),Promise.resolve(h);if(this._ongoingMaterialRequestMap.has(d))return this._ongoingMaterialRequestMap.get(d);l=m.analyzeCIMResource(this._cimLayer.cim,this._cimLayer.materialOverrides);
l.mosaicHash=d;h=h.getMosaicItem(l).then(b=>{this._ongoingMaterialRequestMap.delete(d);p.set(d,b);return b}).catch(b=>{this._ongoingMaterialRequestMap.delete(d);y.error(".analyze()",b.message);return null});this._ongoingMaterialRequestMap.set(d,h);return h};return f}(z)})},"esri/views/2d/engine/webgl/mesh/templates/WGLDynamicLineTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/screenUtils ../../definitions ../../number ../../materialKey/MaterialKey ../../color ../../util/Result ./util ./WGLDynamicMeshTemplate ./WGLBaseLineTemplate".split(" "),
function(t,k,m,z,y,x,f,h,e,l){return function(q){function p(n){var d=q.call(this,n)||this;d._cimLineLayer=n;let b=0;h.isFunction(n.width)||(b=.5*k.pt2px(n.width));d._dynamicPropertyMap.set("_halfWidth",(a,c,g)=>h.isFunction(n.width)?.5*k.pt2px(n.width(a,c,g)):b);h.isFunction(n.cap)?d._dynamicPropertyMap.set("_capType",n.cap):d._capType=n.cap;h.isFunction(n.join)?d._dynamicPropertyMap.set("_joinType",n.join):d._joinType=n.join;if(h.isFunction(n.color))d._dynamicPropertyMap.set("_fillColor",(a,c,g)=>
(a=n.color(a,c,g))&&x.premultiplyAlphaRGBA(a)||0);else{const a=n.color;d._fillColor=a&&x.premultiplyAlphaRGBA(a)||0}h.isFunction(n.miterLimit)?d._dynamicPropertyMap.set("_miterLimitCosine",(a,c,g)=>h.getLimitCosine(n.miterLimit(a,c,g))):d._miterLimitCosine=h.getLimitCosine(n.miterLimit);d._scaleFactor=n.scaleFactor||1;d._isDashed=n.isDashed;d._effects=n.effects;d.tessellationProperties._bitset=n.colorLocked?1:0;d._materialKey=n.materialKey;d._initializeTessellator(!0);return d}t._inheritsLoose(p,
q);p.fromCIMLine=function(n){return new p(n)};p.prototype.bindFeature=function(n,d,b){const a=n.readLegacyFeature();this._dynamicPropertyMap.forEach((g,r)=>{this[r]=g(a,d,b)});this._halfWidth*=this._scaleFactor;n=this._materialCache;var c=this._cimLineLayer.materialHash;c=c(a,d,b);c=n.get(c);n=null;c&&f.ok(c.spriteMosaicItem)&&(n=c.spriteMosaicItem);if(n){this._hasPattern=!0;const {rect:g,width:r,height:u}=n;c=g.x+m.SPRITE_PADDING;const w=g.y+m.SPRITE_PADDING,v=c+r,D=w+u;this.tessellationProperties._tl=
z.i1616to32(c,w);this.tessellationProperties._br=z.i1616to32(v,D)}else this._hasPattern=!1,this.tessellationProperties._tl=0,this.tessellationProperties._br=0;this.tessellationProperties._fillColor=this._fillColor;this.tessellationProperties._halfWidth=this._halfWidth;this.tessellationProperties._halfReferenceWidth=this.tessellationProperties._halfWidth;c=y.LineMaterialKey.load(this._materialKey);n&&(c.sdf=n.sdf,c.pattern=!0,c.textureBinding=n.textureBinding);this._materialKey=c.data};return p}(l(e))})},
"esri/views/2d/engine/webgl/mesh/templates/WGLBaseLineTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/maybe ../../definitions ../../number ../../enums ../../materialKey/MaterialKey ./templateUtils ../../TurboLine".split(" "),function(t,k,m,z,y,x,f,h){const e=1/3.8,l=d=>b=>{const a=d.out;var c=Math.ceil(1024*d._halfWidth);const g=Math.ceil(1024*d._halfReferenceWidth);b.entry0=d.offset+d.vertexCount++;var r=z.i1616to32(b.distance,c),u=z.i8888to32(Math.round(31*
b.prevNormal.x),Math.round(31*b.prevNormal.y),0,-31),w=z.i8888to32(0,0,0,d._bitset);a.vertexBounds(b.currentVertex.x,b.currentVertex.y,0,0);a.vertexWrite(z.i1616to32(8*b.currentVertex.x,8*b.currentVertex.y));a.vertexWrite(d.id);a.vertexWrite(d._fillColor);a.vertexWrite(u);a.vertexWrite(r);a.vertexWrite(d._tl);a.vertexWrite(d._br);a.vertexWrite(w);a.vertexWrite(z.i1616to32(g,0));a.vertexEnd();b.entry2=d.offset+d.vertexCount++;r=z.i1616to32(b.distance,c);u=z.i8888to32(Math.round(31*-b.prevNormal.x),
Math.round(31*-b.prevNormal.y),0,31);w=z.i8888to32(0,0,0,d._bitset);a.vertexBounds(b.currentVertex.x,b.currentVertex.y,0,0);a.vertexWrite(z.i1616to32(8*b.currentVertex.x,8*b.currentVertex.y));a.vertexWrite(d.id);a.vertexWrite(d._fillColor);a.vertexWrite(u);a.vertexWrite(r);a.vertexWrite(d._tl);a.vertexWrite(d._br);a.vertexWrite(w);a.vertexWrite(z.i1616to32(g,0));a.vertexEnd();b.exit0=d.offset+d.vertexCount++;r=z.i1616to32(b.distance,c);u=z.i8888to32(Math.round(31*b.nextNormal.x),Math.round(31*b.nextNormal.y),
0,-31);w=z.i8888to32(0,0,0,d._bitset);a.vertexBounds(b.currentVertex.x,b.currentVertex.y,0,0);a.vertexWrite(z.i1616to32(8*b.currentVertex.x,8*b.currentVertex.y));a.vertexWrite(d.id);a.vertexWrite(d._fillColor);a.vertexWrite(u);a.vertexWrite(r);a.vertexWrite(d._tl);a.vertexWrite(d._br);a.vertexWrite(w);a.vertexWrite(z.i1616to32(g,0));a.vertexEnd();b.exit2=d.offset+d.vertexCount++;c=z.i1616to32(b.distance,c);r=z.i8888to32(Math.round(31*-b.nextNormal.x),Math.round(31*-b.nextNormal.y),0,31);u=z.i8888to32(0,
0,0,d._bitset);a.vertexBounds(b.currentVertex.x,b.currentVertex.y,0,0);a.vertexWrite(z.i1616to32(8*b.currentVertex.x,8*b.currentVertex.y));a.vertexWrite(d.id);a.vertexWrite(d._fillColor);a.vertexWrite(r);a.vertexWrite(c);a.vertexWrite(d._tl);a.vertexWrite(d._br);a.vertexWrite(u);a.vertexWrite(z.i1616to32(g,0));a.vertexEnd()},q=d=>b=>{const a=d.out;a.indexWrite(b.leftExit0);a.indexWrite(b.rightEntry0);a.indexWrite(b.leftExit2);a.indexWrite(b.rightEntry0);a.indexWrite(b.rightEntry2);a.indexWrite(b.leftExit2);
d.indexCount+=6},p=d=>(b,a,c,g,r,u,w,v,D)=>{D=z.i1616to32(D,Math.ceil(1024*d._halfWidth));r=z.i8888to32(Math.round(31*r),Math.round(31*u),Math.round(31*w),Math.round(31*v));c=z.i8888to32(31*c,31*g,0,d._bitset);g=d.out;g.vertexBounds(b,a,1,1);g.vertexWrite(z.i1616to32(8*b,8*a));g.vertexWrite(d.id);g.vertexWrite(d._fillColor);g.vertexWrite(r);g.vertexWrite(D);g.vertexWrite(d._tl);g.vertexWrite(d._br);g.vertexWrite(c);g.vertexWrite(z.i1616to32(Math.ceil(1024*d._halfReferenceWidth),0));g.vertexEnd();
return d.offset+d.vertexCount++},n=d=>(b,a,c)=>{const g=d.out;g.indexWrite(b);g.indexWrite(a);g.indexWrite(c);d.indexCount+=3};return d=>function(b){function a(...g){g=b.call(this,...g)||this;g.tessellationProperties={};g._tessellationOptions={};g.geometryType=y.WGLGeometryType.LINE;return g}t._inheritsLoose(a,b);var c=a.prototype;c._initializeTessellator=function(g){var r=x.LineMaterialKey.load(this._materialKey);const u=this._tessellationOptions;r=r.vvSizeFieldStops||r.vvSizeMinMaxValue||r.vvSizeScaleStops||
r.vvSizeUnitValue;u.thin=this.tessellationProperties._halfWidth<m.THIN_LINE_THRESHOLD/2&&!g&&!r;u.trackDistance=this._isDashed||this._hasPattern;u.wrapDistance=65535;u.innerBisectorAutoSplitThreshold=e;u.outerBisectorAutoSplitThreshold=e;u.enableInnerBisectorSplit=this._isDashed||this._hasPattern;u.enableOuterBisectorSplit=this._isDashed||this._hasPattern;u.thin?this._tessellationCallbacks={vertex:l(this.tessellationProperties),bridge:q(this.tessellationProperties)}:(g=new h.StandardTessellationCallbacks(p(this.tessellationProperties),
n(this.tessellationProperties)),g.miterLimitCosine=this._miterLimitCosine,g.textured=this._isDashed||this._hasPattern,g.joinOnUTurn=this._joinOnUTurn,this._tessellationCallbacks=g)};c._write=function(g,r,u){const w="esriGeometryPoint"===r.geometryType;g.recordStart(r.getDisplayId(),this._materialKey,this.geometryType,!1,w);this._writeGeometry(g,r,u,w);g.recordEnd()};c._writeGeometry=function(g,r,u,w){u=null!=u?u:r.readLegacyGeometry();w=this._getLines(u,w);k.isNone(w)||this._writeVertices(g,r,w)};
c._getLines=function(g,r){if(k.isNone(g))return null;g=g.paths||g.rings;return k.isNone(g)?null:f.clipLinesMarshall(g,r?256:16)};c._writeVertices=function(g,r,u){r=r.getDisplayId();const w=g.vertexCount(),v=this.tessellationProperties;v.out=g;v.id=r;v.indexCount=0;v.vertexCount=0;v.offset=w;for(const {line:D,start:B}of u)this._tessellationOptions.initialDistance=B%65535,this._tessellationCallbacks instanceof h.StandardTessellationCallbacks&&(this._tessellationCallbacks.capType=this._capType,this._tessellationCallbacks.joinType=
this._joinType),h.tessellate(D,this._tessellationOptions,this._tessellationCallbacks),h.cleanup()};return a}(d)})},"esri/views/2d/engine/webgl/mesh/templates/WGLDynamicMarkerTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/maybe ../../../../../../core/Logger ../../../../../../core/Error ../../../../../../core/screenUtils ../../definitions ../../../../../../chunks/mat2df32 ../../../../../../chunks/vec2f32 ../../number ../../materialKey/MaterialKey ../../color ../../util/Result ./util ./WGLBaseMarkerTemplate ./WGLDynamicMeshTemplate".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d,b){const a=h.create(),c=f.create(),g=m.getLogger("esri.views.2d.engine.webgl.WGLDynamicMarkerTemplate");return function(r){function u(w){var v=r.call(this,w)||this;v._cimMarkerLayer=w;n.isFunction(w.color)?v._dynamicPropertyMap.set("_fillColor",(D,B,C)=>q.premultiplyAlphaRGBA(w.color(D,B,C))):v._fillColor=q.premultiplyAlphaRGBA(w.color);n.isFunction(w.outlineColor)?v._dynamicPropertyMap.set("_outlineColor",(D,B,C)=>q.premultiplyAlphaRGBA(w.outlineColor(D,B,C))):
v._outlineColor=q.premultiplyAlphaRGBA(w.outlineColor);n.isFunction(w.size)?v._dynamicPropertyMap.set("_size",(D,B,C)=>y.pt2px(w.size(D,B,C))):v._size=y.pt2px(w.size);n.isFunction(w.scaleX)?v._dynamicPropertyMap.set("_scaleX",w.scaleX):v._scaleX=w.scaleX;n.isFunction(w.offsetX)?v._dynamicPropertyMap.set("xOffset",(D,B,C)=>y.pt2px(w.offsetX(D,B,C))):v.xOffset=y.pt2px(w.offsetX);n.isFunction(w.offsetY)?v._dynamicPropertyMap.set("yOffset",(D,B,C)=>y.pt2px(w.offsetY(D,B,C))):v.yOffset=y.pt2px(w.offsetY);
n.isFunction(w.outlineWidth)?v._dynamicPropertyMap.set("_outlineWidth",(D,B,C)=>y.pt2px(w.outlineWidth(D,B,C))):v._outlineWidth=y.pt2px(w.outlineWidth);n.isFunction(w.rotation)?v._dynamicPropertyMap.set("_angle",w.rotation):v._angle=w.rotation;v._scaleFactor=k.unwrapOr(w.scaleFactor,1);v._markerPlacement=w.markerPlacement;v._effects=w.effects;v._bitSet=(1===w.alignment?1:0)|(w.colorLocked?1:0)<<1|(w.scaleSymbolsProportionally?1:0)<<3;v._materialKey=w.materialKey;return v}t._inheritsLoose(u,r);u.fromCIMMarker=
function(w){return new u(w)};u.prototype.bindFeature=function(w,v,D){const B=w.readLegacyFeature();this._dynamicPropertyMap.forEach((Q,U)=>{this[U]=Q(B,v,D)});w=this._cimMarkerLayer.materialHash;w="function"===typeof w?w(B,v,D):w;if((w=this._materialCache.get(w))&&p.ok(w.spriteMosaicItem)&&w.spriteMosaicItem){w=w.spriteMosaicItem;var C=this._cimMarkerLayer.sizeRatio,A=w.width/w.height*this._scaleX,E=this._cimMarkerLayer.rotateClockwise?this._angle:-this._angle,G=this._size,H=G*A,K=this.xOffset,J=
this.yOffset;this.xOffset*=this._scaleFactor;this.yOffset*=this._scaleFactor;var F=this._cimMarkerLayer.scaleSymbolsProportionally&&this._cimMarkerLayer.frameHeight?this._size/y.pt2px(this._cimMarkerLayer.frameHeight):1,N=this._outlineWidth*F,L=y.pt2px(this._cimMarkerLayer.referenceSize),M=F=0,S=this._cimMarkerLayer.anchorPoint;S&&(this._cimMarkerLayer.isAbsoluteAnchorPoint?this._size&&(F=-S.x/(this._size*A),M=S.y/this._size):(F=S.x,M=S.y));this._sizeOutlineWidth=e.i8888to32(Math.round(Math.min(Math.sqrt(128*
H),255)),Math.round(Math.min(Math.sqrt(128*G),255)),Math.round(Math.min(Math.sqrt(128*N),255)),Math.round(Math.min(Math.sqrt(128*L),255)));this.angle=E;this._bitestAndDistRatio=e.i1616to32(this._bitSet,Math.round(64*C));A=w.rect.x+x.SPRITE_PADDING;E=w.rect.y+x.SPRITE_PADDING;N=A+w.width;L=E+w.height;this._texUpperLeft=e.i1616to32(A,E);this._texUpperRight=e.i1616to32(N,E);this._texBottomLeft=e.i1616to32(A,L);this._texBottomRight=e.i1616to32(N,L);A=l.MarkerMaterialKey.load(this._materialKey);A.sdf=
w.sdf;A.pattern=!0;A.textureBinding=w.textureBinding;this._materialKey=A.data;this._anchorX=.5-(.5+F)*w.width/w.width;this._anchorY=.5-(.5+M)*w.height/w.height;H=H*C*this._scaleFactor;G=G*C*this._scaleFactor;H*=w.rect.width/w.width;G*=w.rect.height/w.height;this._computedWidth=H;this._computedHeight=G;this._applyTransformation(c,a);this.xOffset=K;this.yOffset=J}else g.error(new z("mapview-cim","Encountered an error when binding feature"))};return u}(d(b))})},"esri/views/2d/engine/webgl/mesh/templates/WGLDynamicTextTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/screenUtils ../../alignmentUtils ../../materialKey/MaterialKey ../../color ./util ./WGLBaseTextTemplate ./WGLDynamicMeshTemplate ../../../../layers/features/textUtils".split(" "),
function(t,k,m,z,y,x,f,h,e){return function(l){function q(n){var d=l.call(this,n)||this;d._horizontalAlignment="center";d._verticalAlignment="middle";d._textToGlyphs=new Map;var b=n.scaleFactor||1;d._cimTextLayer=n;x.isFunction(n.color)?d._dynamicPropertyMap.set("_color",(r,u,w)=>y.premultiplyAlphaRGBA(n.color(r,u,w))):d._color=y.premultiplyAlphaRGBA(n.color);x.isFunction(n.color)?d._dynamicPropertyMap.set("_haloColor",(r,u,w)=>y.premultiplyAlphaRGBA(n.outlineColor(r,u,w))):d._haloColor=y.premultiplyAlphaRGBA(n.outlineColor);
let a;x.isFunction(n.size)||(a=Math.min(Math.round(k.pt2px(n.size*n.sizeRatio)),127));d._dynamicPropertyMap.set("_size",(r,u,w)=>x.isFunction(n.size)?Math.min(Math.round(k.pt2px(n.size(r,u,w)*n.sizeRatio)),127):a);x.isFunction(n.outlineSize)?d._dynamicPropertyMap.set("_haloSize",(r,u,w)=>Math.min(Math.floor(5*k.pt2px(n.outlineSize(r,u,w)*n.sizeRatio)),127)):d._haloSize=Math.min(Math.floor(5*k.pt2px(n.outlineSize*n.sizeRatio)),127);let c;x.isFunction(n.offsetX)||(c=Math.round(k.pt2px(n.offsetX*n.sizeRatio)));
d._dynamicPropertyMap.set("_xOffset",(r,u,w)=>x.isFunction(n.offsetX)?Math.round(k.pt2px(n.offsetX(r,u,w)*n.sizeRatio)):c);let g;x.isFunction(n.offsetY)||(g=Math.round(k.pt2px(n.offsetY*n.sizeRatio)));d._dynamicPropertyMap.set("_yOffset",(r,u,w)=>x.isFunction(n.offsetY)?Math.round(k.pt2px(n.offsetY(r,u,w)*n.sizeRatio)):g);x.isFunction(n.angle)?d._dynamicPropertyMap.set("_angle",n.angle):d._angle=n.angle;x.isFunction(n.horizontalAlignment)?d._dynamicPropertyMap.set("_horizontalAlignment",n.horizontalAlignment):
d._horizontalAlignment=n.horizontalAlignment;x.isFunction(n.verticalAlignment)?d._dynamicPropertyMap.set("_verticalAlignment",n.verticalAlignment):d._verticalAlignment=n.verticalAlignment;d._scaleFactor=b;x.isFunction(n.text)?d._dynamicPropertyMap.set("_text",n.text):d._text=n.text;b=Math.min(Math.round(k.pt2px(n.referenceSize*n.sizeRatio)),127);d._referenceSize=Math.round(Math.sqrt(256*b));d._materialKey=n.materialKey;b=z.TextMaterialKey.load(d._materialKey);b.sdf=!0;d._bitset=(1===n.alignment?1:
0)|(n.colorLocked?1:0)<<1;d._materialKey=b.data;d._decoration="none";d._lineHeight=1;d._lineWidth=512;d._textPlacement=n.markerPlacement;d._effects=n.effects;d._isCIM=!0;return d}t._inheritsLoose(q,l);q.fromCIMText=function(n){return new q(n)};var p=q.prototype;p.analyze=async function(n,d,b,a){d=d.readLegacyFeature();var c=this._cimTextLayer;b="string"===typeof c.text?c.text:"function"===typeof c.text?c.text(d,b,a):"";n=await n.getMosaicItem(this._cimTextLayer.cim,e.codepoints(b));this._textToGlyphs.set(b,
n.glyphMosaicItems);return n};p.bindFeature=function(n,d,b){const a=n.readLegacyFeature();this._dynamicPropertyMap.forEach((c,g)=>{this[g]=c(a,d,b)});this._text&&0!==this._text.length?(this._size*=this._scaleFactor,this._scale=this._size/24,this._xOffset*=this._scaleFactor,this._yOffset*=this._scaleFactor,this._xAlignD=m.getXAnchorDirection(this._horizontalAlignment||"center"),this._yAlignD=m.getYAnchorDirection(this._verticalAlignment||"baseline"),n=this._textToGlyphs.get(this._text),this.bindTextInfo(n,
!1)):this._shapingInfo=null};return q}(f(h))})},"esri/views/2d/engine/webgl/mesh/templates/WGLFillTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/mathUtils ../../../../../../core/screenUtils ../../definitions ../../number ../../materialKey/MaterialKey ../../color ../../GeometryUtils ./WGLMeshTemplate ./WGLBaseFillTemplate".split(" "),function(t,k,m,z,y,x,f,h,e,l){return function(q){function p(n,d,b,a,c,g,r,u,w){var v=q.call(this)||this;v._effects=
w;n=x.FillMaterialKey.load(n);d&&(n.sdf=d.sdf,n.pattern=!0,n.textureBinding=d.textureBinding);v.fillColor=b;v.tl=a;v.br=c;v.aux1=g;v.aux2=r;v.aux3=u;v._materialKey=n.data;return v}t._inheritsLoose(p,q);p.fromCIMFill=function(n,d){var b=n.color;b=b&&f.premultiplyAlphaRGBA(b)||0;const a=n.materialKey;if(!d)return d=y.i8888to32(0,0,0,n.colorLocked?1:0),new p(a,null,b,0,0,0,0,d,n.effects);const {rect:c,width:g,height:r}=d;var u=c.x+z.SPRITE_PADDING;const w=c.y+z.SPRITE_PADDING;var v=u+g;const D=w+r;var B=
k.nextHighestPowerOfTwo(r);255<B?B=255:0>=B&&(B=k.nextHighestPowerOfTwo(D-w));var C=k.nextHighestPowerOfTwo(g||0);255<C?C=255:0>=C&&(C=k.nextHighestPowerOfTwo(v-u));let A=m.pt2px(n.offsetX||0)+128;255<A&&(A=255);let E=m.pt2px(-n.offsetY||0)+128;255<E&&(E=255);var G=n.scaleX||1;u=y.i1616to32(u,w);v=y.i1616to32(v,D);B=y.i8888to32(C,B,A,E);G=y.i1616to32(128*G,128);C=y.i8888to32(0,0,h.degToByte(n.angle),n.colorLocked?1:0);return new p(a,d,b,u,v,B,G,C,n.effects)};p.fromSimpleFill=function(n,d,b=!1){var {color:a}=
n;a=a&&"esriSFSNull"!==n.style&&f.premultiplyAlphaRGBAArray(a)||0;b=y.i8888to32(0,0,0,b?255:0);n=n.materialKey;if(!d)return new p(n,null,a,0,0,0,0,b,null);const {rect:c,width:g,height:r}=d;var u=c.x+z.SPRITE_PADDING,w=c.y+z.SPRITE_PADDING;const v=u+g,D=w+r,B=y.i1616to32(u,w),C=y.i1616to32(v,D);u=y.i8888to32(k.nextHighestPowerOfTwo(v-u),k.nextHighestPowerOfTwo(D-w),0,0);w=y.i1616to32(128,128);return new p(n,d,a,B,C,u,w,b,null)};p.fromPictureFill=function(n,d,b=!1){const a=z.PICTURE_FILL_COLOR,{rect:c,
width:g,height:r}=d;var u=c.x+z.SPRITE_PADDING,w=c.y+z.SPRITE_PADDING,v=u+g,D=w+r;u=y.i1616to32(u,w);v=y.i1616to32(v,D);D=k.nextHighestPowerOfTwo(m.pt2px(n.width));255<D&&(D=255);w=k.nextHighestPowerOfTwo(m.pt2px(n.height));255<w&&(w=255);let B=m.pt2px(n.xoffset)+128;255<B&&(B=255);let C=m.pt2px(-n.yoffset)+128;255<C&&(C=255);D=y.i8888to32(D,w,B,C);w=y.i1616to32(128*n.xscale,128*n.yscale);b=y.i8888to32(0,0,0,b?255:0);return new p(n.materialKey,d,a,u,v,D,w,b,null)};return p}(l(e))})},"esri/views/2d/engine/webgl/mesh/templates/WGLLineTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/Logger ../../../../../../core/screenUtils ../../definitions ../../number ../../materialKey/MaterialKey ../../color ../../Utils ./util ./WGLMeshTemplate ./WGLBaseLineTemplate".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q){const p=k.getLogger("esri.views.2d.engine.webgl.WGLLineTemplate");return function(n){function d(b,a,c,g,r,u,w,v,D,B,C,A,E,G,H,K){var J=n.call(this)||this;b=x.LineMaterialKey.load(b);a&&(b.sdf=a.sdf,b.pattern=!0,b.textureBinding=a.textureBinding);J._capType=g;J._joinType=r;J._miterLimitCosine=e.getLimitCosine(u);J.tessellationProperties._fillColor=w;J.tessellationProperties._tl=v;J.tessellationProperties._br=D;J._hasPattern=B;J._isDashed=C;J._joinOnUTurn=H;J._isColorLocked=
A;J._zOrder=G;J._effects=K;J._materialKey=b.data;J.tessellationProperties._bitset=A?1:0;J.tessellationProperties._halfWidth=.5*c;J.tessellationProperties._halfReferenceWidth=.5*E;J._initializeTessellator(!1);return J}t._inheritsLoose(d,n);d.fromCIMLine=function(b,a,c){var g=b.color,r=b.scaleFactor||1;const u=b.isDashed;let w=b.cap;u&&1===w&&(w=2);const v=b.join;r*=m.pt2px(b.width);const D=m.pt2px(b.referenceWidth),B=m.pt2px(b.miterLimit);g=g&&f.premultiplyAlphaRGBA(g)||0;if(!a)return new d(b.materialKey,
a,r,w,v,B,g,0,0,!1,u,b.colorLocked,D,b.zOrder,c,b.effects);const {rect:C,width:A,height:E}=a;var G=C.x+z.SPRITE_PADDING;const H=C.y+z.SPRITE_PADDING;var K=G+A;const J=H+E;G=y.i1616to32(G,H);K=y.i1616to32(K,J);return new d(b.materialKey,a,r,w,v,B,g,G,K,!0,u,b.colorLocked,D,b.zOrder,c,b.effects)};d.fromSimpleLine=function(b,a,c){var {color:g}=b;const r="esriSLSSolid"!==b.style&&"esriSLSNull"!==b.style,u=h.getCapType(b.cap||"round",r),w=h.getJoinType(b.join||"round");g=g&&"esriSLSNull"!==b.style&&f.premultiplyAlphaRGBAArray(g)||
0;"esriSLSNull"===b.style&&(g=0);const v=m.pt2px(b.width),D=b.miterLimit;if(!a)return new d(b.materialKey,a,v,u,w,D,g,0,0,!1,r,!1,v,0,c,null);const {rect:B,width:C,height:A}=a;var E=B.x+z.SPRITE_PADDING;const G=B.y+z.SPRITE_PADDING;var H=E+C;const K=G+A;E=y.i1616to32(E,G);H=y.i1616to32(H,K);return new d(b.materialKey,a,v,u,w,D,g,E,H,!0,r,!1,v,0,c,null)};d.fromPictureLineSymbol=function(b,a,c,g){p.error("PictureLineSymbol support does not exist!");return null};return d}(q(l))})},"esri/views/2d/engine/webgl/util/Lock":function(){define(["exports",
"../../../../../core/promiseUtils"],function(t,k){let m=function(){function z(){this._resolver=null}var y=z.prototype;y.isHeld=function(){return!!this._resolver};y.acquire=async function(){if(!this._resolver)return this._resolver=k.createResolver(),Promise.resolve();await this._resolver.promise;await this.acquire()};y.release=function(){const x=this._resolver;this._resolver=null;x.resolve()};return z}();t.default=m;t.withLock=async function(z,y,x){try{await z.acquire(),await y(x),z.release()}catch(f){throw z.release(),
f;}};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/mesh/factories/WGLMeshFactory":function(){define("exports ../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/has ../../../../../../core/maybe ../../../../../../core/promiseUtils ../../../../layers/features/support/AttributeStore ../templates/WGLLabelTemplate ../templates/WGLMarkerTemplate ../templates/WGLTemplateStore".split(" "),function(t,k,m,z,y,x,f,h,e){m=function(){function l(p,n,d){this._geometryType=
p;this._idField=n;this._templateStore=d}var q=l.prototype;q.update=function(p,n){z.isSome(p.mesh.labels)&&this._setLabelTemplates(p.mesh.labels,n)};q._setLabelTemplates=function(p,n){this._labelTemplates=p.map(d=>f.fromLabelClass(d,n))};q.analyze=async function(p,n,d,b,a,c){if(!y.isAborted(c)){var g;"dictionary"===n.type&&(g=await n.analyze(this._idField,p.copy(),b,a,c));for(var r=0;p.next();){var u=void 0;u=g?g[r++]:z.isSome(d)&&x.isAggregateId(p.getDisplayId())&&1!==p.readAttribute("cluster_count")?
d.match(this._idField,p,this._geometryType,b,a):n.match(this._idField,p,this._geometryType,b,a);p.setGroupId(u);if(e.isDynamicId(u)){u=this._templateStore.getDynamicTemplateGroup(u);for(const w of u)w&&w.analyze&&w.analyze(this._templateStore,p,b,a)}}return this._templateStore.finalize(c)}};q.analyzeGraphics=async function(p,n,d,b,a){if(!y.isAborted(a)){p=p.getCursor();for(n&&await n.analyze(this._idField,p.copy(),d,b,a);p.next();){let c=p.getGroupId();if(null==c||-1===c)c=n.match(this._idField,p,
p.geometryType,d,b),p.setGroupId(c);if(e.isDynamicId(c)){const g=this._templateStore.getDynamicTemplateGroup(c);for(const r of g)r&&r.analyze&&r.analyze(this._templateStore,p,d,b)}p.setGroupId(c)}return this._templateStore.finalize(a)}};q.writeGraphic=function(p,n){const d=n.getGroupId(),b=n.getDisplayId(),a=this._templateStore.getTemplateGroup(d);p.featureStart(n.insertAfter);if(null!=b){if(e.isDynamicId(d))for(const c of a)c.bindFeature(n,null,null);if(a){for(const c of a)c&&c.write(p,n);p.featureEnd()}}};
q.writeCursor=function(p,n,d,b,a,c){const g=n.getGroupId(),r=n.getDisplayId(),u=this._templateStore.getTemplateGroup(g);n.getObjectId();if(null!=r&&u){if(e.isDynamicId(g))for(const w of u)w.bindFeature(n,d,b);for(const w of u)w.write(p,n);z.isSome(c)&&p.hasRecords&&(d=c&&this._findLabelRef(u),this._writeLabels(p,n,c,d,a))}};q._findLabelRef=function(p){for(const n of p)if(n instanceof h)return n;return null};q._writeLabels=function(p,n,d,b,a){for(const c of d)if(z.isSome(c)&&c){const {glyphs:g,rtl:r,
index:u}=c;d=this._labelTemplates[u];d.setZoomLevel(a);d.bindReferenceTemplate(b);d.bindTextInfo(g,r);d.write(p,n)}};k._createClass(l,[{key:"templates",get:function(){return this._templateStore}}]);return l}();t.WGLMeshFactory=m;Object.defineProperty(t,"__esModule",{value:!0})})},"esri/views/2d/engine/webgl/mesh/templates/WGLLabelTemplate":function(){define("../../../../../../chunks/_rollupPluginBabelHelpers ../../../../../../core/maybe ../../../../../../core/Logger ../../../../../../core/Error ../../../../../../core/mathUtils ../../../../../../core/screenUtils ../../definitions ../../alignmentUtils ../../number ../../enums ./meshUtils ../../materialKey/MaterialKey ../../color ./segmentUtils ./WGLTextTemplate".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p,n,d,b){const a=m.getLogger("esri.views.2d.engine.webgl.WGLLabelTemplate"),c=(r,u="mapview-labeling")=>a.error(new z(u,r)),g=function(r){const u=new Map;return w=>{u.has(w)||u.set(w,r(w));return u.get(w)}}(r=>{let u=0;if(0===r)return Infinity;for(;!(r%2);)u++,r/=2;return u});return function(r){function u(v,D,B,C){var A=r.call(this,v,B.font.size,B.haloSize||0,B.color&&n.premultiplyAlphaRGBAArray(B.color)||0,B.haloColor&&n.premultiplyAlphaRGBAArray(B.haloColor)||0,B.horizontalAlignment,
B.verticalAlignment,q.isMapAligned(D.labelPlacement)?1:0,B.font.decoration,!1,B.angle||0,B.xoffset,B.yoffset,B.lineWidth,B.lineHeight,null,null)||this;A._outLineLabelAngle=0;A._refPlacementPadding=0;A._refPlacementDirX=0;A._refPlacementDirY=0;A._refOffsetX=0;A._refOffsetY=0;A._zoomLevel=0;A.geometryType=l.WGLGeometryType.LABEL;var E=!!D.minScale&&C.scaleToZoom(D.minScale)||0;E=y.clamp(E,0,25.5);C=!!D.maxScale&&C.scaleToZoom(D.maxScale)||255;C=y.clamp(C,0,25.5);const [G,H]=h.getAlignmentFromPlacement(D.labelPlacement);
A._xAlignD=G;A._yAlignD=H;A._minZoom=E;A._maxZoom=C;A._refPlacementPadding=x.pt2px(B.haloSize)+f.TEXT_PLACEMENT_PADDING;v=p.LabelMaterialKey.load(v);v.sdf=!0;A._materialKey=v.data;return A}t._inheritsLoose(u,r);u.fromLabelClass=function(v,D){if("center-along"===v.labelPlacement){const B=v.symbol;B.xoffset=0;B.yoffset=0;B.angle=0;B.font.decoration="none"}return new u(v.materialKey,v,v.symbol,D)};var w=u.prototype;w.setZoomLevel=function(v){this._zoomLevel=v};w.bindReferenceTemplate=function(v){let D=
h.getXDirection(this._xAlignD),B=h.getYDirection(this._yAlignD);this._refOffsetY=this._refOffsetX=0;if(k.isNone(v))this._refSymbolAndPlacementOffset=e.i8888to32(0,0,Math.floor(127*D+127),Math.floor(127*B+127));else{if("circle"===v.boundsType&&(D||B)){var C=Math.sqrt(D*D+B*B);D/=C;B/=C}C=Math.max(v.height,v.width);this._refSymbolAndPlacementOffset=e.i8888to32(4*this._refPlacementPadding,C,Math.floor(127*D+127),Math.floor(127*B+127));this._referenceSize=C;this._refPlacementDirX=D;this._refPlacementDirY=
B;this._refOffsetX=v.xOffset;this._refOffsetY=v.yOffset}};w._write=function(v,D){if(!k.isNone(this._shapingInfo)){var B=this._shapingInfo,C=D.getDisplayId(),A="esriGeometryPolygon"===D.geometryType?D.readLegacyCentroid():D.readLegacyGeometry();if(A)switch(this.current={out:v,inId:C,inShaping:B,zoomLevel:this._zoomLevel},D.geometryType){case "esriGeometryPolyline":this._placeLineLabels(A);break;case "esriGeometryPoint":case "esriGeometryPolygon":this._placePointLabels(A);break;default:c("mapview-labeling",
`Geometry of type ${D.geometryType} is not supported`)}}};w._isVisible=function(v,D){const B=Math.floor(10*this.current.zoomLevel);return Math.floor(10*v)<=B&&B<=Math.floor(10*D)};w._placePointLabels=function(v){const {out:D,inId:B,inShaping:C}=this.current;this._writeGlyphs(D,B,v,C)};w._placeLineLabels=function(v){v=d.smoothPaths(v.paths,this.current.inShaping.bounds.width);const D=this._placeSubdivGlyphs.bind(this),B=(this._shapedBox.width+128)/2;for(const C of v)d.pathDivide(C,B,D)};w._placeSubdivGlyphs=
function(v,D,B,C){var A=g(D);B=y.log2(Math.min(B,C-B)/(8+this._shapedBox.width/2/2));A=Math.max(this._minZoom,this.current.zoomLevel+1-(0===D?B:Math.min(A,B)));B=this._shapedBox.width/2*2**(this.current.zoomLevel-A);this.current.inShaping.isMultiline?0===D&&this._placeStraight(v,A):this._placeCurved(v,A,B)};w._placeStraight=function(v,D){const {out:B,inId:C,inShaping:A}=this.current;this._writeGlyphs(B,C,v,A,D)};w._placeCurved=function(v,D,B){const {out:C,inId:A}=this.current;C.metricStart(A,D,v.x,
v.y,0,0,0,0);const E=v.clone(),G=(180/Math.PI*v.angle+180)%360;this._outLineLabelAngle=Math.round(180/Math.PI*v.angle%360*(254/360));this._placeFirst(E,D,1);this._placeBack(v,E,D,B,1);this._placeForward(v,E,D,B,1);this._outLineLabelAngle=Math.round(254/360*G);this._placeFirst(E,D,0);this._placeBack(v,E,D,B,0);this._placeForward(v,E,D,B,0);C.metricEnd()};w._placeBack=function(v,D,B,C,A){const E=v.clone();for(v=v.backwardLength+0;E.prev()&&!(v>=C);)this._placeOnSegment(E,D,v,B,-1,A),v+=E.length+0};
w._placeForward=function(v,D,B,C,A){const E=v.clone();for(v=v.remainingLength+0;E.next()&&!(v>=C);)this._placeOnSegment(E,D,v,B,1,A),v+=E.length+0};w._placeFirst=function(v,D,B){const C=this.current.inShaping;var A=C.glyphs;const E=this.current.zoomLevel,{out:G,inId:H}=this.current;for(const K of A)A=K.x>C.bounds.x?B:1-B,A=Math.max(0,E+y.log2(Math.abs(K.x+K.width/2-C.bounds.x)/(A*v.remainingLength+(1-A)*v.backwardLength))),A=Math.max(D,A),K.maxZoom=25,K.angle=v.angle+(1-B)*Math.PI,K.minZoom=A,0>v.x||
512<=v.x||0>v.y||512<=v.y||(this._writeGlyph(G,H,v.x,v.y,K),B&&this._isVisible(K.minZoom,K.maxZoom)&&(A=K.bounds,G.metricBoxWrite(A.center[0],A.center[1],A.width,A.height)))};w._placeOnSegment=function(v,D,B,C,A,E){var G=this.current.inShaping.glyphs;const {out:H,inId:K}=this.current,J=this.current.inShaping,F=this.current.zoomLevel;var N=v.x+v.dx/v.length*-A*B,L=v.y+v.dy/v.length*-A*B;for(const S of G)if((G=S.x>J.bounds.x?E:1-E)&&1===A||!G&&-1===A){var M=Math.abs(S.x+S.width/2-J.bounds.x);G=Math.max(0,
F+y.log2(M/B)-.1);M=Math.max(C,F+y.log2(M/(B+v.length+0)));0!==G&&(S.angle=v.angle+(1-E)*Math.PI,S.minZoom=M,S.maxZoom=G,0>N||512<=N||0>L||512<=L||(this._writeGlyph(H,K,N,L,S),E&&this._isVisible(S.minZoom,S.maxZoom)&&(G=S.bounds,H.metricBoxWrite(G.center[0]+(v.x-D.x),G.center[1]+(v.y-D.y),G.width,G.height))))}};w._writeGlyphs=function(v,D,B,C,A=this._minZoom){if(!(0>B.x||512<=B.x||0>B.y||512<=B.y)){var E=B.x+this._refOffsetX;B=B.y-this._refOffsetY;for(var G of C.glyphs)G.minZoom=A,G.maxZoom=this._maxZoom,
this._writeGlyph(v,D,E,B,G);G=p.LabelMaterialKey.load(this._materialKey);C=C.boundsT;v.metricStart(D,A,E,B,this._refPlacementDirX,this._refPlacementDirY,this._referenceSize,G.vvSizeFieldStops||G.vvSizeMinMaxValue||G.vvSizeScaleStops||G.vvSizeUnitValue?1:0);v.metricBoxWrite(C.center[0],C.center[1],C.width,C.height);v.metricEnd()}};w._writeVertexCommon=function(v,D,B,C){const A=this._color,E=this._haloColor,G=e.i8888to32(0,0,this._size,this._haloSize);C=e.i8888to32(Math.floor(10*Math.max(C.minZoom,
this._minZoom)),Math.floor(10*Math.min(C.maxZoom,this._maxZoom)),this._outLineLabelAngle,0);v.vertexWrite(B);v.vertexWrite(D);v.vertexWrite(A);v.vertexWrite(E);v.vertexWrite(G);v.vertexWrite(this._refSymbolAndPlacementOffset);v.vertexWrite(C)};t._createClass(u,[{key:"_shapedBox",get:function(){return k.unwrap(this._shapingInfo).bounds}}]);return u}(b)})},"esri/views/2d/engine/webgl/mesh/templates/segmentUtils":function(){define(["exports","../../../../../../chunks/_rollupPluginBabelHelpers","../../../../../../core/maybe",
"./util"],function(t,k,m,z){function y(l){return l.length-1}function x(l){let q=0;for(let p=0;p<y(l);p++)q+=f(l,p);return q}function f(l,q,p=1){const [n,d]=l[q+1];return Math.sqrt(n*n+d*d)*p}function h(l,q,p,n,d){if(!(p<q)){var b=n.clone().seek(p/2);m.isNone(b)||(l(b.clone(),p,d),p=(p-q)/2,b=m.unwrap(b.seek(q/2)),h(l,q,p,n,d+1),h(l,q,p,b,d+1))}}let e=function(){function l(p,n,d,b,a){this._segments=p;this._index=n;this._distance=d;this._xStart=b;this._yStart=a;this._done=!1}l.create=function(p){return new l(p,
0,0,p[0][0],p[0][1])};var q=l.prototype;q.clone=function(){return new l(this._segments,this._index,this._distance,this.xStart,this.yStart)};q.equals=function(p){return this._index===p._index||p._index===this._index-1&&(0===this._distance||1===p._distance)||p._index===this._index+1&&(1===this._distance||0===p._distance)};q.leq=function(p){return this._index<p._index||this._index===p._index&&this._distance<=p._distance};q.geq=function(p){return this._index>p._index||this._index===p._index&&this._distance>=
p._distance};q.hasPrev=function(){return 0<=this._index-1};q.hasNext=function(){return this._index+1<y(this._segments)};q.next=function(){if(!this.hasNext())return null;this._xStart+=this.dx;this._yStart+=this.dy;this._distance=0;this._index+=1;return this};q.prev=function(){if(!this.hasPrev())return this._done=!0,null;--this._index;this._xStart-=this.dx;this._yStart-=this.dy;this._distance=1;return this};q._seekBackwards=function(p,n){var d=this.backwardLength;if(p<=d)return this._distance=(d-p)/
this.length,this;for(d=this.backwardLength;this.prev();){if(d+this.length>p)return this._seekBackwards(p-d);d+=this.length}this._distance=0;return n?this:null};q.seek=function(p,n=!1){if(0>p)return this._seekBackwards(Math.abs(p),n);if(p<=this.remainingLength)return this._distance=(this.backwardLength+p)/this.length,this;let d=this.remainingLength;for(;this.next();){if(d+this.length>p)return this.seek(p-d,n);d+=this.length}this._distance=1;return n?this:null};k._createClass(l,[{key:"_segment",get:function(){return this._segments[this._index+
1]}},{key:"angle",get:function(){const p=this.dy;let n=Math.acos((0*p+-1*-this.dx)/(1*this.length));0<p&&(n=2*Math.PI-n);return n}},{key:"xStart",get:function(){return this._xStart}},{key:"yStart",get:function(){return this._yStart}},{key:"x",get:function(){return this.xStart+this.distance*this.dx}},{key:"y",get:function(){return this.yStart+this.distance*this.dy}},{key:"dx",get:function(){return this._segment[0]}},{key:"dy",get:function(){return this._segment[1]}},{key:"xMidpoint",get:function(){return this.xStart+
.5*this.dx}},{key:"yMidpoint",get:function(){return this.yStart+.5*this.dy}},{key:"xEnd",get:function(){return this.xStart+this.dx}},{key:"yEnd",get:function(){return this.yStart+this.dy}},{key:"length",get:function(){const {dx:p,dy:n}=this;return Math.sqrt(p*p+n*n)}},{key:"remainingLength",get:function(){return this.length*(1-this._distance)}},{key:"backwardLength",get:function(){return this.length*this._distance}},{key:"distance",get:function(){return this._distance}},{key:"done",get:function(){return this._done}}]);
return l}();t.SegmentCursor=e;t.pathDivide=function(l,q,p){const n=x(l);l=e.create(l);const d=n/2,b=Math.floor((n-q)/2/q);l.seek(d-b*q);for(let a=-b;a<=b;a++)512>l.x&&0<=l.x&&512>l.y&&0<=l.y&&p(l.clone(),a,d+a*q,n),l.seek(q)};t.pathLength=x;t.pathSubdivide=function(l,q,p){h(p,q,x(l),e.create(l),0)};t.segmentAt=function(l,q){return l[q+1]};t.segmentCount=y;t.segmentLength=f;t.smoothPaths=function(l,q){for(let E=0;E<l.length;E++){var p=l[E];const G=[];G.push(p[0]);for(var n=1;n<p.length;n++){let [H,
K]=G[n-1];H+=p[n][0];K+=p[n][1];G.push([H,K])}a:{p=G;n=q;if(0>=n)break a;const H=p.length;if(3>H)break a;const K=[];var d=0;K.push(0);for(var b=1;b<H;b++)d+=z.dist(p[b],p[b-1]),K.push(d);n=Math.min(n,.2*d);d=[];d.push(p[0][0]);d.push(p[0][1]);b=p[H-1][0];const J=p[H-1][1];var a=z.sub([0,0],p[0],p[1]);z.normalize(a);p[0][0]+=n*a[0];p[0][1]+=n*a[1];z.sub(a,p[H-1],p[H-2]);z.normalize(a);p[H-1][0]+=n*a[0];p[H-1][1]+=n*a[1];for(a=1;a<H;a++)K[a]+=n;K[H-1]+=n;a=.5*n;for(let F=1;F<H-1;F++){let N=0,L=0,M=
0;for(var c=F-1;0<=c&&!(K[c+1]<K[F]-a);c--){var g=a+K[c+1]-K[F],r=K[c+1]-K[c],u=K[F]-K[c]<a?1:g/r;if(1E-6>Math.abs(u))break;var w=u*u,v=u*g-.5*w*r,D=u*r/n,B=p[c+1],C=p[c][0]-B[0],A=p[c][1]-B[1];N+=D/v*(B[0]*u*g+.5*w*(g*C-r*B[0])-w*u*r*C/3);L+=D/v*(B[1]*u*g+.5*w*(g*A-r*B[1])-w*u*r*A/3);M+=D}for(c=F+1;c<H&&!(K[c-1]>K[F]+a);c++){g=a-K[c-1]+K[F];r=K[c]-K[c-1];u=K[c]-K[F]<a?1:g/r;if(1E-6>Math.abs(u))break;w=u*u;v=u*g-.5*w*r;D=u*r/n;B=p[c-1];C=p[c][0]-B[0];A=p[c][1]-B[1];N+=D/v*(B[0]*u*g+.5*w*(g*C-r*B[0])-
w*u*r*C/3);L+=D/v*(B[1]*u*g+.5*w*(g*A-r*B[1])-w*u*r*A/3);M+=D}d.push(N/M);d.push(L/M)}d.push(b);d.push(J);for(let F=0,N=0;F<H;F++)p[F][0]=d[N++],p[F][1]=d[N++]}p=[];p.push(G[0]);for(n=1;n<G.length;n++){const [H,K]=G[n-1],[J,F]=G[n];p.push([Math.round(J-H),Math.round(F-K)])}l[E]=p}return l};Object.defineProperty(t,"__esModule",{value:!0})})},"esri/views/2d/layers/features/processors/BaseProcessor":function(){define("../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/has ../../../../../core/Logger ../../../../../core/accessorSupport/ensureType ../../../../../core/accessorSupport/decorators/property ../../../../../core/jsonMap ../../../../../core/accessorSupport/decorators/subclass ../../../../../core/urlUtils ../../../../../core/uuid ../../../../../portal/support/resourceExtension ../../../../../core/HandleOwner".split(" "),
function(t,k,m,z,y,x,f,h,e,l,q,p){m=function(n){function d(){return n.apply(this,arguments)||this}t._inheritsLoose(d,n);var b=d.prototype;b.initialize=function(){};b.destroy=function(){};t._createClass(d,[{key:"supportsTileUpdates",get:function(){return!1}},{key:"spatialReference",get:function(){const a=this.get("tileStore.tileScheme.spatialReference");return a&&a.toJSON()||null}}]);return d}(p.HandleOwner);k.__decorate([x.property({readOnly:!0})],m.prototype,"supportsTileUpdates",null);k.__decorate([x.property({constructOnly:!0})],
m.prototype,"remoteClient",void 0);k.__decorate([x.property({constructOnly:!0})],m.prototype,"service",void 0);k.__decorate([x.property()],m.prototype,"spatialReference",null);k.__decorate([x.property({constructOnly:!0})],m.prototype,"tileInfo",void 0);k.__decorate([x.property({constructOnly:!0})],m.prototype,"tileStore",void 0);return m=k.__decorate([h.subclass("esri.views.2d.layers.features.processors.BaseProcessor")],m)})},"*noref":1}});
define("exports ../../../../chunks/_rollupPluginBabelHelpers ../../../../chunks/tslib.es6 ../../../../core/has ../../../../core/Logger ../../../../core/accessorSupport/ensureType ../../../../core/accessorSupport/decorators/property ../../../../core/jsonMap ../../../../core/accessorSupport/decorators/subclass ../../../../core/urlUtils ../../../../core/uuid ../../../../portal/support/resourceExtension ../../../../core/HandleOwner ../../../../layers/support/TileInfo ../../tiling/TileInfoView ./support/TileStore ./processors ./support/UpdateToken ./controllers/FeatureController2D".split(" "),function(t,
k,m,z,y,x,f,h,e,l,q,p,n,d,b,a,c,g,r){const u=new Set;z=function(w){function v(){var B=w.apply(this,arguments)||this;B.controller=null;B.processor=null;B.remoteClient=null;B.tileStore=null;B.service=null;B.viewState=null;return B}k._inheritsLoose(v,w);var D=v.prototype;D.initialize=function(){this.handles.add(this.watch("updating",B=>{this.remoteClient.invoke("setUpdating",B).catch(C=>{})}))};D.destroy=function(){var B,C,A;null==(B=this.controller)?void 0:B.destroy();null==(C=this.processor)?void 0:
C.destroy();null==(A=this.tileStore)?void 0:A.destroy();this.controller=this.processor=this.tileStore=this.remoteClient=null};D.startup=async function({service:B,config:C,tileInfo:A,tiles:E}){this.service=B;this.tileStore||(B=new b(d.fromJSON(A)),this.tileStore=new a(B));this.tileStore.clear();await this._createProcessorAndController(C);await this.update({config:C},!0);this.tileStore.updateTiles(E)};D.updateTiles=async function(B){this.tileStore.updateTiles(B)};D.update=async function({config:B},
C=!1){const A=g.UpdateToken.empty();C||this.controller.pause();await Promise.all([this.processor.update(A,B),this.controller.update(A,B)]);return A.toJSON()};D.applyUpdate=async function(B){return this.controller.applyUpdate(g.UpdateToken.create(B))};D._createProcessorAndController=async function(B){await Promise.all([this._handleControllerConfig(B),this._handleProcessorConfig(B)]);this.controller.processor=this.processor};D._handleControllerConfig=async function(B){B=await this._createController(this.service,
B);await B.startup();return B};D._handleProcessorConfig=async function(B){return this._createProcessor(this.service,B)};D._createController=async function(B,C){this.controller&&this.controller.destroy();const {tileStore:A,remoteClient:E}=this;return this.controller=B=new r({service:B,config:C,tileStore:A,remoteClient:E})};D._createProcessor=async function(B,C){const A=(await c.loadProcessorModule(C.schema.processors[0].type)).default,{remoteClient:E,tileStore:G}=this;B=new A({service:B,config:C,tileStore:G,
remoteClient:E});this.processor&&this.processor.destroy();return this.processor=B};k._createClass(v,[{key:"updating",get:function(){return!this.controller||this.controller.updating}}]);return v}(n.HandleOwner);m.__decorate([f.property()],z.prototype,"controller",void 0);m.__decorate([f.property()],z.prototype,"processor",void 0);m.__decorate([f.property()],z.prototype,"updating",null);m.__decorate([f.property()],z.prototype,"viewState",void 0);z=m.__decorate([e.subclass("esri.views.2d.layers.features.Pipeline")],
z);t.default=z;t.getInstances=function(){return u};Object.defineProperty(t,"__esModule",{value:!0})});