// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.19/esri/copyright.txt for details.
//>>built
require({cache:{"esri/core/Evented":function(){define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","./handleUtils","./accessorSupport/decorators/subclass","./Accessor"],function(l,h,F,I,q){let E=function(){function m(){this._emitter=new m.EventEmitter(this)}var v=m.prototype;v.emit=function(x,B){return this._emitter.emit(x,B)};v.on=function(x,B){return this._emitter.on(x,B)};v.once=function(x,B){return this._emitter.once(x,B)};v.hasEventListener=function(x){return this._emitter.hasEventListener(x)};
return m}();(function(m){let v=function(){function B(V=null){this.target=V;this._listenersMap=null}var Q=B.prototype;Q.clear=function(){this._listenersMap&&this._listenersMap.clear()};Q.emit=function(V,z){V=this._listenersMap&&this._listenersMap.get(V);if(!V)return!1;const y=this.target||this;[...V].forEach(C=>{C.call(y,z)});return 0<V.length};Q.on=function(V,z){if(Array.isArray(V)){var y=V.map(C=>this.on(C,z));return F.handlesGroup(y)}if(-1<V.indexOf(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");
this._listenersMap||(this._listenersMap=new Map);y=this._listenersMap.get(V)||[];y.push(z);this._listenersMap.set(V,y);return{remove:()=>{const C=this._listenersMap&&this._listenersMap.get(V)||[],b=C.indexOf(z);0<=b&&C.splice(b,1)}}};Q.once=function(V,z){const y=this.on(V,C=>{y.remove();z.call(null,C)});return y};Q.hasEventListener=function(V){V=this._listenersMap&&this._listenersMap.get(V);return null!=V&&0<V.length};return B}();m.EventEmitter=v;m.EventedMixin=B=>{B=function(Q){function V(){var y=
Q.apply(this,arguments)||this;y._emitter=new v;return y}l._inheritsLoose(V,Q);var z=V.prototype;z.destroy=function(){this._emitter.clear()};z.emit=function(y,C){return this._emitter.emit(y,C)};z.on=function(y,C){return this._emitter.on(y,C)};z.once=function(y,C){return this._emitter.once(y,C)};z.hasEventListener=function(y){return this._emitter.hasEventListener(y)};return V}(B);return B=h.__decorate([I.subclass("esri.core.Evented")],B)};let x=function(B){function Q(){var z=B.apply(this,arguments)||
this;z._emitter=new E.EventEmitter(l._assertThisInitialized(z));return z}l._inheritsLoose(Q,B);var V=Q.prototype;V.emit=function(z,y){return this._emitter.emit(z,y)};V.on=function(z,y){return this._emitter.on(z,y)};V.once=function(z,y){return this._emitter.once(z,y)};V.hasEventListener=function(z){return this._emitter.hasEventListener(z)};return Q}(q);x=h.__decorate([I.subclass("esri.core.Evented")],x);m.EventedAccessor=x})(E||(E={}));return E})},"esri/core/Handles":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./maybe ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass ./Accessor ./Collection".split(" "),
function(l,h,F,I,q,E,m){E=function(v){function x(Q){Q=v.call(this,Q)||this;Q._groups=new Map;return Q}l._inheritsLoose(x,v);var B=x.prototype;B.destroy=function(){this.removeAll()};B.add=function(Q,V){if(!this._isHandle(Q)&&!Array.isArray(Q)&&!m.isCollection(Q))return this;const z=this._getOrCreateGroup(V);Array.isArray(Q)||m.isCollection(Q)?Q.forEach(y=>this._isHandle(y)&&z.push(y)):z.push(Q);this.notifyChange("size");return this};B.forEach=function(Q,V){if("function"===typeof Q)this._groups.forEach(z=>
z.forEach(Q));else{const z=this._getGroup(Q);z&&V&&z.forEach(V)}};B.has=function(Q){return this._groups.has(this._ensureGroupKey(Q))};B.remove=function(Q){if(Array.isArray(Q)||m.isCollection(Q))return Q.forEach(this.remove,this),this;if(!this.has(Q))return this;const V=this._getGroup(Q);for(let z=0;z<V.length;z++)V[z].remove();this._deleteGroup(Q);this.notifyChange("size");return this};B.removeAll=function(){this._groups.forEach(Q=>{for(let V=0;V<Q.length;V++)Q[V].remove()});this._groups.clear();
this.notifyChange("size");return this};B._isHandle=function(Q){return Q&&!!Q.remove};B._getOrCreateGroup=function(Q){if(this.has(Q))return this._getGroup(Q);const V=[];this._groups.set(this._ensureGroupKey(Q),V);return V};B._getGroup=function(Q){return F.assumeNonNull(this._groups.get(this._ensureGroupKey(Q)))};B._deleteGroup=function(Q){return this._groups.delete(this._ensureGroupKey(Q))};B._ensureGroupKey=function(Q){return Q||"_default_"};l._createClass(x,[{key:"size",get:function(){let Q=0;this._groups.forEach(V=>
{Q+=V.length});return Q}}]);return x}(E);h.__decorate([I.property({readOnly:!0})],E.prototype,"size",null);return E=h.__decorate([q.subclass("esri.core.Handles")],E)})},"esri/core/Collection":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./lang ./maybe ./accessorSupport/ensureType ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass ./ObjectPool ./accessorSupport/tracking ./ArrayPool ./scheduling ./Evented ./accessorSupport/tracking/SimpleObservable".split(" "),
function(l,h,F,I,q,E,m,v,x,B,Q,V,z){function y(k){return k?k instanceof D?k.toArray():k.length?Array.prototype.slice.apply(k):[]:[]}function C(k){if(k&&k.length)return k[0]}function b(k,p,n,e){p&&p.forEach((g,f,A)=>{k.push(g);b(k,n.call(e,g,f,A),n,e)})}var r;let G=function(){function k(){this.target=null;this.defaultPrevented=this.cancellable=!1;this.type=this.item=void 0}var p=k.prototype;p.preventDefault=function(){this.cancellable&&(this.defaultPrevented=!0)};p.reset=function(n){this.defaultPrevented=
!1;this.item=n};return k}();const L=new v(G,void 0,k=>{k.item=null;k.target=null;k.defaultPrevented=!1;k.cancellable=!1}),J=()=>{},O=new Set,P=new Set,X=new Set,ca=new Map;let S=0,D=r=function(k){function p(e){e=k.call(this,e)||this;e._chgListeners=[];e._notifications=null;e._timer=null;e._observable=new z.SimpleObservable;e.length=0;e._items=[];Object.defineProperty(l._assertThisInitialized(e),"uid",{value:S++});return e}l._inheritsLoose(p,k);p.isCollection=function(e){return null!=e&&e instanceof
r};var n=p.prototype;n.normalizeCtorArgs=function(e){return e?Array.isArray(e)||e instanceof r?{items:e}:e:{}};n[Symbol.iterator]=function*(){yield*this.items};n.hasEventListener=function(e){return"change"===e?0<this._chgListeners.length:this._emitter.hasEventListener(e)};n.on=function(e,g){if("change"===e){const f=this._chgListeners,A={removed:!1,callback:g};f.push(A);this._notifications&&this._notifications.push({listeners:f.slice(),items:this._items.slice(),changes:[]});return{remove(){this.remove=
J;A.removed=!0;f.splice(f.indexOf(A),1)}}}return this._emitter.on(e,g)};n.once=function(e,g){const f=this.on(e,g);return{remove(){f.remove()}}};n.add=function(e,g){x.trackAccess(this._observable);if(this._emitBeforeChanges(1))return this;g=this.getNextIndex(null!=g?g:null);this._splice(g,0,e);this._emitAfterChanges(1);return this};n.addMany=function(e,g=this._items.length){x.trackAccess(this._observable);if(!e||!e.length||this._emitBeforeChanges(1))return this;g=this.getNextIndex(g);this._splice(g,
0,...y(e));this._emitAfterChanges(1);return this};n.removeAll=function(){x.trackAccess(this._observable);if(!this.length||this._emitBeforeChanges(2))return[];const e=this._splice(0,this.length)||[];this._emitAfterChanges(2);return e};n.clone=function(){x.trackAccess(this._observable);return this._createNewInstance({items:this._items.map(F.clone)})};n.concat=function(...e){x.trackAccess(this._observable);e=e.map(y);return this._createNewInstance({items:this._items.concat(...e)})};n.drain=function(e,
g){x.trackAccess(this._observable);if(this.length&&!this._emitBeforeChanges(2)){var f=I.assumeNonNull(this._splice(0,this.length)),A=f.length;for(let R=0;R<A;R++)e.call(g,f[R],R,f);this._emitAfterChanges(2)}};n.every=function(e,g){x.trackAccess(this._observable);return this._items.every(e,g)};n.filter=function(e,g){x.trackAccess(this._observable);let f;f=2===arguments.length?this._items.filter(e,g):this._items.filter(e);return this._createNewInstance({items:f})};n.find=function(e,g){x.trackAccess(this._observable);
return this._items.find(e,g)};n.findIndex=function(e,g){x.trackAccess(this._observable);return this._items.findIndex(e,g)};n.flatten=function(e,g){x.trackAccess(this._observable);const f=[];b(f,this,e,g);return new r(f)};n.forEach=function(e,g){x.trackAccess(this._observable);return this._items.forEach(e,g)};n.getItemAt=function(e){x.trackAccess(this._observable);return this._items[e]};n.getNextIndex=function(e){x.trackAccess(this._observable);const g=this.length;e=null==e?g:e;0>e?e=0:e>g&&(e=g);
return e};n.includes=function(e,g=0){x.trackAccess(this._observable);return this._items.includes(e,g)};n.indexOf=function(e,g=0){x.trackAccess(this._observable);return this._items.indexOf(e,g)};n.join=function(e=","){x.trackAccess(this._observable);return this._items.join(e)};n.lastIndexOf=function(e,g=this.length-1){x.trackAccess(this._observable);return this._items.lastIndexOf(e,g)};n.map=function(e,g){x.trackAccess(this._observable);e=this._items.map(e,g);return new r({items:e})};n.reorder=function(e,
g=this.length-1){x.trackAccess(this._observable);const f=this.indexOf(e);if(-1!==f){0>g?g=0:g>=this.length&&(g=this.length-1);if(f!==g){if(this._emitBeforeChanges(4))return e;this._splice(f,1);this._splice(g,0,e);this._emitAfterChanges(4)}return e}};n.pop=function(){x.trackAccess(this._observable);if(this.length&&!this._emitBeforeChanges(2)){var e=C(this._splice(this.length-1,1));this._emitAfterChanges(2);return e}};n.push=function(...e){x.trackAccess(this._observable);if(this._emitBeforeChanges(1))return this.length;
this._splice(this.length,0,...e);this._emitAfterChanges(1);return this.length};n.reduce=function(e,g){x.trackAccess(this._observable);const f=this._items;return 2===arguments.length?f.reduce(e,g):f.reduce(e)};n.reduceRight=function(e,g){x.trackAccess(this._observable);const f=this._items;return 2===arguments.length?f.reduceRight(e,g):f.reduceRight(e)};n.remove=function(e){x.trackAccess(this._observable);return this.removeAt(this.indexOf(e))};n.removeAt=function(e){x.trackAccess(this._observable);
if(!(0>e||e>=this.length||this._emitBeforeChanges(2)))return e=C(this._splice(e,1)),this._emitAfterChanges(2),e};n.removeMany=function(e){x.trackAccess(this._observable);if(!e||!e.length||this._emitBeforeChanges(2))return[];e=e instanceof r?e.toArray():e;const g=this._items,f=[],A=e.length;for(let la=0;la<A;la++){var R=g.indexOf(e[la]);if(-1<R){{var N=la+1;var ba=R+1;const na=Math.min(e.length-N,g.length-ba);let pa=0;for(;pa<na&&e[N+pa]===g[ba+pa];)pa++;N=pa}N=1+N;(R=this._splice(R,N))&&0<R.length&&
f.push.apply(f,R);la+=N-1}}this._emitAfterChanges(2);return f};n.reverse=function(){x.trackAccess(this._observable);if(this._emitBeforeChanges(4))return this;const e=this._splice(0,this.length);e&&(e.reverse(),this._splice(0,0,...e));this._emitAfterChanges(4);return this};n.shift=function(){x.trackAccess(this._observable);if(this.length&&!this._emitBeforeChanges(2)){var e=C(this._splice(0,1));this._emitAfterChanges(2);return e}};n.slice=function(e=0,g=this.length){x.trackAccess(this._observable);
return this._createNewInstance({items:this._items.slice(e,g)})};n.some=function(e,g){x.trackAccess(this._observable);return this._items.some(e,g)};n.sort=function(e){x.trackAccess(this._observable);if(!this.length||this._emitBeforeChanges(4))return this;const g=I.assumeNonNull(this._splice(0,this.length));arguments.length?g.sort(e):g.sort();this._splice(0,0,...g);this._emitAfterChanges(4);return this};n.splice=function(e,g,...f){x.trackAccess(this._observable);const A=(g?2:0)|(f.length?1:0);if(this._emitBeforeChanges(A))return[];
e=this._splice(e,g,...f)||[];this._emitAfterChanges(A);return e};n.toArray=function(){x.trackAccess(this._observable);return this._items.slice()};n.toJSON=function(){x.trackAccess(this._observable);return this.toArray()};n.toLocaleString=function(){x.trackAccess(this._observable);return this._items.toLocaleString()};n.toString=function(){x.trackAccess(this._observable);return this._items.toString()};n.unshift=function(...e){x.trackAccess(this._observable);if(!e.length||this._emitBeforeChanges(1))return this.length;
this._splice(0,0,...e);this._emitAfterChanges(1);return this.length};n._createNewInstance=function(e){return new this.constructor(e)};n._splice=function(e,g,...f){const A=this._items;var R=this.constructor.prototype.itemType;let N=void 0;!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=Q.schedule(()=>this._dispatchChange()));if(g){N=A.splice(e,g);if(this.hasEventListener("before-remove")){var ba=
L.acquire();ba.target=this;ba.cancellable=!0;for(let pa=0,za=N.length;pa<za;pa++)g=N[pa],ba.reset(g),this.emit("before-remove",ba),ba.defaultPrevented&&(N.splice(pa,1),A.splice(e,0,g),e+=1,--pa,--za);L.release(ba)}this.length=this._items.length;if(this.hasEventListener("after-remove")){g=L.acquire();g.target=this;g.cancellable=!1;ba=N.length;for(let pa=0;pa<ba;pa++)g.reset(N[pa]),this.emit("after-remove",g);L.release(g)}}if(f&&f.length){if(R){g=[];for(var la of f)f=R.ensureType(la),null==f&&null!=
la||g.push(f);f=g}R=this.hasEventListener("before-add");la=this.hasEventListener("after-add");g=e===this.length;if(R||la){var na=L.acquire();na.target=this;na.cancellable=!0;ba=L.acquire();ba.target=this;ba.cancellable=!1;for(const pa of f)R?(na.reset(pa),this.emit("before-add",na),na.defaultPrevented||(g?A.push(pa):A.splice(e++,0,pa),this._set("length",A.length),la&&(ba.reset(pa),this.emit("after-add",ba)))):(g?A.push(pa):A.splice(e++,0,pa),this._set("length",A.length),ba.reset(pa),this.emit("after-add",
ba));L.release(ba);L.release(na)}else{if(g)for(na of f)A.push(na);else A.splice(e,0,...f);this._set("length",A.length)}}(f&&f.length||N&&N.length)&&this._notifyChangeEvent(f,N);return N};n._emitBeforeChanges=function(e){let g=!1;if(this.hasEventListener("before-changes")){const f=L.acquire();f.target=this;f.cancellable=!0;f.type=e;this.emit("before-changes",f);g=f.defaultPrevented;L.release(f)}return g};n._emitAfterChanges=function(e){if(this.hasEventListener("after-changes")){const g=L.acquire();
g.target=this;g.cancellable=!1;g.type=e;this.emit("after-changes",g);L.release(g)}this._observable.notify()};n._notifyChangeEvent=function(e,g){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:g})};n._dispatchChange=function(){this._timer&&(this._timer.remove(),this._timer=null);if(this._notifications){var e=this._notifications;this._notifications=null;for(const g of e){e=g.changes;O.clear();P.clear();X.clear();for(const {added:la,
removed:na}of e){if(la)if(0===X.size&&0===P.size)for(const pa of la)O.add(pa);else for(const pa of la)P.has(pa)?(X.add(pa),P.delete(pa)):X.has(pa)||O.add(pa);if(na)if(0===X.size&&0===O.size)for(const pa of na)P.add(pa);else for(const pa of na)O.has(pa)?O.delete(pa):(X.delete(pa),P.add(pa))}const f=B.acquire();O.forEach(la=>{f.push(la)});const A=B.acquire();P.forEach(la=>{A.push(la)});const R=this._items,N=g.items,ba=B.acquire();X.forEach(la=>{N.indexOf(la)!==R.indexOf(la)&&ba.push(la)});if(g.listeners&&
(f.length||A.length||ba.length)){e={target:this,added:f,removed:A,moved:ba};const la=g.listeners.length;for(let na=0;na<la;na++){const pa=g.listeners[na];pa.removed||pa.callback.call(this,e)}}B.release(f);B.release(A);B.release(ba)}O.clear();P.clear();X.clear()}};l._createClass(p,[{key:"items",get:function(){x.trackAccess(this._observable);return this._items},set:function(e){this._emitBeforeChanges(1)||(this._splice(0,this.length,...y(e)),this._emitAfterChanges(1))}}]);return p}(V.EventedAccessor);
D.ofType=k=>{if(!k)return r;if(ca.has(k))return ca.get(k);var p=null;if("function"===typeof k)p=k.prototype.declaredClass;else if(k.base)p=k.base.prototype.declaredClass;else for(var n in k.typeMap){const e=k.typeMap[n].prototype.declaredClass;p=p?p+` | ${e}`:e}n=function(e){function g(){return e.apply(this,arguments)||this}l._inheritsLoose(g,e);return g}(r);n=h.__decorate([m.subclass(`esri.core.Collection<${p}>`)],n);p={Type:k,ensureType:"function"===typeof k?q.ensureType(k):q.ensureOneOfType(k)};
Object.defineProperty(n.prototype,"itemType",{value:p});ca.set(k,n);return n};h.__decorate([E.property()],D.prototype,"length",void 0);h.__decorate([E.property()],D.prototype,"items",null);return D=r=h.__decorate([m.subclass("esri.core.Collection")],D)})},"esri/core/accessorSupport/tracking/SimpleObservable":function(){define(["exports","./ObservationHandle"],function(l,h){let F=function(){function I(){this._observers=new Set}var q=I.prototype;q.observe=function(E){return new h.ObservationHandle(this._observers.add(E),
E)};q.notify=function(){var E=this._observers;const m=this._observers.size,v=Array(m);let x=0;for(const B of E)v[x++]=B;for(E=0;E<m;E++)v[E].notify()};return I}();l.SimpleObservable=F;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/support/TimeInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/lang ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ./timeUtils ../../TimeExtent ../../TimeInterval ./TimeReference".split(" "),
function(l,h,F,I,q,E,m,v,x,B,Q,V,z,y,C,b,r,G,L){var J;F=J=function(O){function P(ca){ca=O.call(this,ca)||this;ca.cumulative=!1;ca.endField=null;ca.fullTimeExtent=null;ca.hasLiveData=!1;ca.interval=null;ca.startField=null;ca.timeReference=null;ca.trackIdField=null;ca.useTime=!0;return ca}l._inheritsLoose(P,O);var X=P.prototype;X.readFullTimeExtent=function(ca,S){return S.timeExtent&&Array.isArray(S.timeExtent)&&2===S.timeExtent.length?new r({start:new Date(S.timeExtent[0]),end:new Date(S.timeExtent[1])}):
null};X.writeFullTimeExtent=function(ca,S){S.timeExtent=ca&&ca.start&&ca.end?[ca.start.getTime(),ca.end.getTime()]:null};X.readInterval=function(ca,S){return S.timeInterval&&S.timeIntervalUnits?new G({value:S.timeInterval,unit:b.timeUnitKebabDictionary.fromJSON(S.timeIntervalUnits)}):S.defaultTimeInterval&&S.defaultTimeIntervalUnits?new G({value:S.defaultTimeInterval,unit:b.timeUnitKebabDictionary.fromJSON(S.defaultTimeIntervalUnits)}):null};X.writeInterval=function(ca,S){ca?(ca=ca.toJSON(),S.timeInterval=
ca.value,S.timeIntervalUnits=ca.unit):(S.timeInterval=null,S.timeIntervalUnits=null)};X.clone=function(){const {cumulative:ca,endField:S,hasLiveData:D,interval:k,startField:p,timeReference:n,fullTimeExtent:e,trackIdField:g,useTime:f}=this;return new J({cumulative:ca,endField:S,hasLiveData:D,interval:k,startField:p,timeReference:I.clone(n),fullTimeExtent:I.clone(e),trackIdField:g,useTime:f})};return P}(C.JSONSupport);h.__decorate([m.property({type:Boolean,json:{read:{source:"exportOptions.timeDataCumulative"},
write:{target:"exportOptions.timeDataCumulative"}}})],F.prototype,"cumulative",void 0);h.__decorate([m.property({type:String,json:{read:{source:"endTimeField"},write:{target:"endTimeField",allowNull:!0}}})],F.prototype,"endField",void 0);h.__decorate([m.property({type:r,json:{write:{enabled:!0,allowNull:!0}}})],F.prototype,"fullTimeExtent",void 0);h.__decorate([x.reader("fullTimeExtent",["timeExtent"])],F.prototype,"readFullTimeExtent",null);h.__decorate([Q.writer("fullTimeExtent")],F.prototype,"writeFullTimeExtent",
null);h.__decorate([m.property({type:Boolean,json:{write:!0}})],F.prototype,"hasLiveData",void 0);h.__decorate([m.property({type:G,json:{write:{enabled:!0,allowNull:!0}}})],F.prototype,"interval",void 0);h.__decorate([x.reader("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],F.prototype,"readInterval",null);h.__decorate([Q.writer("interval")],F.prototype,"writeInterval",null);h.__decorate([m.property({type:String,json:{read:{source:"startTimeField"},
write:{target:"startTimeField",allowNull:!0}}})],F.prototype,"startField",void 0);h.__decorate([m.property({type:L,json:{write:{enabled:!0,allowNull:!0}}})],F.prototype,"timeReference",void 0);h.__decorate([m.property({type:String,json:{write:{enabled:!0,allowNull:!0}}})],F.prototype,"trackIdField",void 0);h.__decorate([m.property({type:Boolean,json:{read:{source:"exportOptions.useTime"},write:{target:"exportOptions.useTime"}}})],F.prototype,"useTime",void 0);return F=J=h.__decorate([B.subclass("esri.layers.support.TimeInfo")],
F)})},"esri/layers/support/timeUtils":function(){define(["exports","../../core/has","../../core/jsonMap"],function(l,h,F){const I={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},
months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}};h=F.strict()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",
esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:null});l.Milliseconds=function(q){return q};l.millisecondsPerTimeUnit={milliseconds:1,seconds:1E3,minutes:6E4,hours:36E5,days:864E5,weeks:6048E5,months:26784E5,years:31536E6,decades:31536E7,centuries:31536E8};l.offsetDate=function(q,E,m){q=new Date(q.getTime());if(E&&m){const {getter:v,setter:x,multiplier:B}=I[m];q[x](q[v]()+E*B)}return q};l.timeUnitKebabDictionary=h;l.truncateDate=function(q,E){switch(E){case "milliseconds":return new Date(q.getTime());
case "seconds":return new Date(q.getFullYear(),q.getMonth(),q.getDate(),q.getHours(),q.getMinutes(),q.getSeconds());case "minutes":return new Date(q.getFullYear(),q.getMonth(),q.getDate(),q.getHours(),q.getMinutes());case "hours":return new Date(q.getFullYear(),q.getMonth(),q.getDate(),q.getHours());case "days":return new Date(q.getFullYear(),q.getMonth(),q.getDate());case "weeks":return new Date(q.getFullYear(),q.getMonth(),q.getDate()-q.getDay());case "months":return new Date(q.getFullYear(),q.getMonth(),
1);case "years":return new Date(q.getFullYear(),0,1);case "decades":return new Date(q.getFullYear()-q.getFullYear()%10,0,1);case "centuries":return new Date(q.getFullYear()-q.getFullYear()%100,0,1);default:return null}};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/TimeExtent":function(){define("./chunks/_rollupPluginBabelHelpers ./chunks/tslib.es6 ./core/has ./core/Logger ./core/accessorSupport/ensureType ./core/accessorSupport/decorators/property ./core/jsonMap ./core/accessorSupport/decorators/reader ./core/accessorSupport/decorators/subclass ./core/accessorSupport/decorators/writer ./core/urlUtils ./core/uuid ./portal/support/resourceExtension ./core/JSONSupport ./layers/support/timeUtils".split(" "),
function(l,h,F,I,q,E,m,v,x,B,Q,V,z,y,C){var b;F=b=function(L){function J(P){P=L.call(this,P)||this;P.end=null;P.start=null;return P}l._inheritsLoose(J,L);var O=J.prototype;O.readEnd=function(P,X){return null!=X.end?new Date(X.end):null};O.writeEnd=function(P,X){X.end=P?P.getTime():null};O.readStart=function(P,X){return null!=X.start?new Date(X.start):null};O.writeStart=function(P,X){X.start=P?P.getTime():null};O.clone=function(){return new b({end:this.end,start:this.start})};O.expandTo=function(P){if(this.isEmpty||
this.isAllTime)return this.clone();const X=this.start?C.truncateDate(this.start,P):null;P=this.end?C.offsetDate(C.truncateDate(this.end,P),1,P):null;return new b({start:X,end:P})};O.intersection=function(P){var X,ca,S,D,k,p,n,e;if(!P)return this.clone();if(this.isEmpty||P.isEmpty)return b.empty;if(this.isAllTime)return P.clone();if(P.isAllTime)return this.clone();const g=null!=(X=null==(ca=this.start)?void 0:ca.getTime())?X:-Infinity;X=null!=(S=null==(D=this.end)?void 0:D.getTime())?S:Infinity;S=
null!=(k=null==(p=P.start)?void 0:p.getTime())?k:-Infinity;P=null!=(n=null==(e=P.end)?void 0:e.getTime())?n:Infinity;let f,A;S>=g&&S<=X?f=S:g>=S&&g<=P&&(f=g);X>=S&&X<=P?A=X:P>=g&&P<=X&&(A=P);return isNaN(f)||isNaN(A)?b.empty:(n=new b,n.start=-Infinity===f?null:new Date(f),n.end=Infinity===A?null:new Date(A),n)};O.offset=function(P,X){if(this.isEmpty||this.isAllTime)return this.clone();const ca=new b,{start:S,end:D}=this;S&&(ca.start=C.offsetDate(S,P,X));D&&(ca.end=C.offsetDate(D,P,X));return ca};
O.equals=function(P){if(!P)return!1;const X=this.start?this.start.getTime():this.start,ca=this.end?this.end.getTime():this.end,S=P.start?P.start.getTime():P.start;P=P.end?P.end.getTime():P.end;return X===S&&ca===P};O.union=function(P){if(!P||P.isEmpty)return this.clone();if(this.isEmpty)return P.clone();if(this.isAllTime||P.isAllTime)return r.clone();const X=this.start&&P.start?new Date(Math.min(this.start.getTime(),P.start.getTime())):null;P=this.end&&P.end?new Date(Math.max(this.end.getTime(),P.end.getTime())):
null;return new b({start:X,end:P})};l._createClass(J,[{key:"isAllTime",get:function(){return this.equals(b.allTime)}},{key:"isEmpty",get:function(){return this.equals(b.empty)}}],[{key:"allTime",get:function(){return r}},{key:"empty",get:function(){return G}}]);return J}(y.JSONSupport);h.__decorate([E.property({type:Date,json:{write:{allowNull:!0}}})],F.prototype,"end",void 0);h.__decorate([v.reader("end")],F.prototype,"readEnd",null);h.__decorate([B.writer("end")],F.prototype,"writeEnd",null);h.__decorate([E.property({readOnly:!0,
json:{read:!1}})],F.prototype,"isAllTime",null);h.__decorate([E.property({readOnly:!0,json:{read:!1}})],F.prototype,"isEmpty",null);h.__decorate([E.property({type:Date,json:{write:{allowNull:!0}}})],F.prototype,"start",void 0);h.__decorate([v.reader("start")],F.prototype,"readStart",null);h.__decorate([B.writer("start")],F.prototype,"writeStart",null);F=b=h.__decorate([x.subclass("esri.TimeExtent")],F);const r=new F,G=new F({start:void 0,end:void 0});return F})},"esri/TimeInterval":function(){define("./chunks/_rollupPluginBabelHelpers ./chunks/tslib.es6 ./core/has ./core/Logger ./core/accessorSupport/ensureType ./core/accessorSupport/decorators/property ./core/jsonMap ./core/accessorSupport/decorators/subclass ./core/urlUtils ./core/uuid ./portal/support/resourceExtension ./core/JSONSupport ./layers/support/timeUtils".split(" "),
function(l,h,F,I,q,E,m,v,x,B,Q,V,z){var y;F=y=function(C){function b(G){G=C.call(this,G)||this;G.value=0;G.unit="milliseconds";return G}l._inheritsLoose(b,C);var r=b.prototype;r.toMilliseconds=function(){return this.value*z.millisecondsPerTimeUnit[this.unit]};r.clone=function(){return new y({value:this.value,unit:this.unit})};return b}(V.JSONSupport);h.__decorate([E.property({type:Number,json:{write:!0},nonNullable:!0})],F.prototype,"value",void 0);h.__decorate([E.property({type:z.timeUnitKebabDictionary.apiValues,
json:{type:z.timeUnitKebabDictionary.jsonValues,read:z.timeUnitKebabDictionary.read,write:z.timeUnitKebabDictionary.write},nonNullable:!0})],F.prototype,"unit",void 0);return F=y=h.__decorate([v.subclass("esri.TimeInterval")],F)})},"esri/layers/support/TimeReference":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport".split(" "),
function(l,h,F,I,q,E,m,v,x,B,Q,V,z){var y;F=y=function(C){function b(G){G=C.call(this,G)||this;G.respectsDaylightSaving=!1;G.timezone=null;return G}l._inheritsLoose(b,C);var r=b.prototype;r.readRespectsDaylightSaving=function(G,L){return void 0!==L.respectsDaylightSaving?L.respectsDaylightSaving:void 0!==L.respectDaylightSaving?L.respectDaylightSaving:!1};r.clone=function(){const {respectsDaylightSaving:G,timezone:L}=this;return new y({respectsDaylightSaving:G,timezone:L})};return b}(z.JSONSupport);
h.__decorate([E.property({type:Boolean,json:{write:!0}})],F.prototype,"respectsDaylightSaving",void 0);h.__decorate([v.reader("respectsDaylightSaving",["respectsDaylightSaving","respectDaylightSaving"])],F.prototype,"readRespectsDaylightSaving",null);h.__decorate([E.property({type:String,json:{read:{source:"timeZone"},write:{target:"timeZone"}}})],F.prototype,"timezone",void 0);return F=y=h.__decorate([x.subclass("esri.layers.support.TimeReference")],F)})},"esri/tasks/support/Query":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/lang ../../core/maybe ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../geometry/SpatialReference ../../geometry/Point ../../geometry/support/jsonUtils ../../geometry ../../TimeExtent ../../layers/support/source/DataLayerSource ./QuantizationParameters ./StatisticDefinition".split(" "),
function(l,h,F,I,q,E,m,v,x,B,Q,V,z,y,C,b,r,G,L,J,O,P,X,ca){var S;F=new B.JSONMap({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"});B=new B.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",
esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});b=S=function(D){function k(n){n=D.call(this,n)||this;n.aggregateIds=null;n.cacheHint=void 0;n.datumTransformation=null;n.distance=void 0;n.dynamicDataSource=void 0;n.gdbVersion=null;n.geometry=null;n.geometryPrecision=void 0;n.groupByFieldsForStatistics=null;n.having=null;n.historicMoment=null;n.maxAllowableOffset=void 0;n.maxRecordCountFactor=1;n.multipatchOption=
null;n.num=void 0;n.objectIds=null;n.orderByFields=null;n.outFields=null;n.outSpatialReference=null;n.outStatistics=null;n.parameterValues=null;n.pixelSize=null;n.quantizationParameters=null;n.rangeValues=null;n.relationParameter=null;n.resultType=null;n.returnCentroid=!1;n.returnDistinctValues=!1;n.returnExceededLimitFeatures=!0;n.returnGeometry=!1;n.returnQueryGeometry=!1;n.returnM=void 0;n.returnZ=void 0;n.sourceSpatialReference=null;n.spatialRelationship="intersects";n.start=void 0;n.sqlFormat=
null;n.text=null;n.timeExtent=null;n.units=null;n.where=null;return n}l._inheritsLoose(k,D);k.from=function(n){return m.ensureClass(S,n)};var p=k.prototype;p.castDatumTransformation=function(n){return"number"===typeof n||"object"===typeof n?n:null};p.writeHistoricMoment=function(n,e){e.historicMoment=n&&n.getTime()};p.writeParameterValues=function(n,e){if(n){const g={};for(const f in n){const A=n[f];Array.isArray(A)?g[f]=A.map(R=>R instanceof Date?R.getTime():R):g[f]=A instanceof Date?A.getTime():
A}e.parameterValues=g}};p.writeStart=function(n,e){e.resultOffset=this.start;e.resultRecordCount=this.num||10;e.where="1\x3d1"};p.writeWhere=function(n,e){e.where=n||"1\x3d1"};p.clone=function(){return new S(I.clone({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,datumTransformation:this.datumTransformation,distance:this.distance,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,
historicMoment:q.isSome(this.historicMoment)?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,
rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,
sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,units:this.units,where:this.where}))};return k}(b.JSONSupport);b.MAX_MAX_RECORD_COUNT_FACTOR=5;h.__decorate([v.property({json:{write:!0}})],b.prototype,"aggregateIds",void 0);h.__decorate([v.property({type:Boolean,json:{write:{writer:(D,k)=>{null!=D&&(k.cacheHint=D)}}}})],b.prototype,"cacheHint",void 0);h.__decorate([v.property({json:{write:!0}})],b.prototype,"datumTransformation",void 0);h.__decorate([x.cast("datumTransformation")],
b.prototype,"castDatumTransformation",null);h.__decorate([v.property({type:Number,json:{write:{overridePolicy(D){return{enabled:0<D}}}}})],b.prototype,"distance",void 0);h.__decorate([v.property({type:P.DataLayerSource,json:{write:!0}})],b.prototype,"dynamicDataSource",void 0);h.__decorate([v.property({type:String,json:{write:!0}})],b.prototype,"gdbVersion",void 0);h.__decorate([v.property({types:J.geometryTypes,json:{read:L.fromJSON,write:!0}})],b.prototype,"geometry",void 0);h.__decorate([v.property({type:Number,
json:{write:!0}})],b.prototype,"geometryPrecision",void 0);h.__decorate([v.property({type:[String],json:{write:!0}})],b.prototype,"groupByFieldsForStatistics",void 0);h.__decorate([v.property({type:String,json:{write:!0}})],b.prototype,"having",void 0);h.__decorate([v.property({type:Date})],b.prototype,"historicMoment",void 0);h.__decorate([V.writer("historicMoment")],b.prototype,"writeHistoricMoment",null);h.__decorate([v.property({type:Number,json:{write:!0}})],b.prototype,"maxAllowableOffset",
void 0);h.__decorate([v.property({type:Number,cast(D){return 1>D?1:D>S.MAX_MAX_RECORD_COUNT_FACTOR?S.MAX_MAX_RECORD_COUNT_FACTOR:D},json:{write:{overridePolicy(D){return{enabled:1<D}}}}})],b.prototype,"maxRecordCountFactor",void 0);h.__decorate([v.property({type:String,json:{write:!0}})],b.prototype,"multipatchOption",void 0);h.__decorate([v.property({type:Number,json:{read:{source:"resultRecordCount"}}})],b.prototype,"num",void 0);h.__decorate([v.property({json:{write:!0}})],b.prototype,"objectIds",
void 0);h.__decorate([v.property({type:[String],json:{write:!0}})],b.prototype,"orderByFields",void 0);h.__decorate([v.property({type:[String],json:{write:!0}})],b.prototype,"outFields",void 0);h.__decorate([v.property({type:r,json:{read:{source:"outSR"},write:{target:"outSR"}}})],b.prototype,"outSpatialReference",void 0);h.__decorate([v.property({type:[ca],json:{write:{enabled:!0,overridePolicy(){return{enabled:q.isSome(this.outStatistics)&&0<this.outStatistics.length}}}}})],b.prototype,"outStatistics",
void 0);h.__decorate([v.property({json:{write:!0}})],b.prototype,"parameterValues",void 0);h.__decorate([V.writer("parameterValues")],b.prototype,"writeParameterValues",null);h.__decorate([v.property({type:G,json:{write:!0}})],b.prototype,"pixelSize",void 0);h.__decorate([v.property({type:X,json:{write:!0}})],b.prototype,"quantizationParameters",void 0);h.__decorate([v.property({type:[Object],json:{write:!0}})],b.prototype,"rangeValues",void 0);h.__decorate([v.property({type:String,json:{read:{source:"relationParam"},
write:{target:"relationParam",overridePolicy(){return{enabled:"relation"===this.spatialRelationship}}}}})],b.prototype,"relationParameter",void 0);h.__decorate([v.property({type:String,json:{write:!0}})],b.prototype,"resultType",void 0);h.__decorate([v.property({type:Boolean,json:{write:{overridePolicy(D){return{enabled:D}}}}})],b.prototype,"returnCentroid",void 0);h.__decorate([v.property({type:Boolean,json:{write:{overridePolicy(D){return{enabled:D}}}}})],b.prototype,"returnDistinctValues",void 0);
h.__decorate([v.property({type:Boolean,json:{write:{overridePolicy(D){return{enabled:!D}}}}})],b.prototype,"returnExceededLimitFeatures",void 0);h.__decorate([v.property({type:Boolean,json:{write:!0}})],b.prototype,"returnGeometry",void 0);h.__decorate([v.property({type:Boolean,json:{write:{overridePolicy(D){return{enabled:D}}}}})],b.prototype,"returnQueryGeometry",void 0);h.__decorate([v.property({type:Boolean,json:{write:{overridePolicy(D){return{enabled:D}}}}})],b.prototype,"returnM",void 0);h.__decorate([v.property({type:Boolean,
json:{write:{overridePolicy(D){return{enabled:D}}}}})],b.prototype,"returnZ",void 0);h.__decorate([v.property({type:r,json:{write:!0}})],b.prototype,"sourceSpatialReference",void 0);h.__decorate([v.property({type:String,json:{read:{source:"spatialRel",reader:F.read},write:{target:"spatialRel",writer:F.write}}})],b.prototype,"spatialRelationship",void 0);h.__decorate([v.property({type:Number,json:{read:{source:"resultOffset"}}})],b.prototype,"start",void 0);h.__decorate([V.writer("start"),V.writer("num")],
b.prototype,"writeStart",null);h.__decorate([v.property({type:String,json:{write:!0}})],b.prototype,"sqlFormat",void 0);h.__decorate([v.property({type:String,json:{write:!0}})],b.prototype,"text",void 0);h.__decorate([v.property({type:O,json:{write:!0}})],b.prototype,"timeExtent",void 0);h.__decorate([v.property({type:String,json:{read:B.read,write:{writer:B.write,overridePolicy(D){return{enabled:D&&0<this.distance}}}}})],b.prototype,"units",void 0);h.__decorate([v.property({type:String,json:{write:{overridePolicy(D){return{enabled:null!=
D||0<this.start}}}}})],b.prototype,"where",void 0);h.__decorate([V.writer("where")],b.prototype,"writeWhere",null);return b=S=h.__decorate([Q.subclass("esri.tasks.support.Query")],b)})},"esri/layers/support/source/DataLayerSource":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/decorators/cast ../../../core/jsonMap ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/reader ../../../core/accessorSupport/extensions/serializableProperty/reader ../../../core/accessorSupport/decorators/subclass ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../../core/JSONSupport ../Field ./MapLayerSource ./QueryTableDataSource ./RasterDataSource ./TableDataSource".split(" "),
function(l,h,F,I,q,E,m,v,x,B,Q,V,z,y,C,b,r,G,L,J,O,P){function X(){k||(k=V.createTypeReader({types:ca()}));return k}function ca(){p||(p={key:"type",base:null,typeMap:{"data-layer":l.DataLayerSource,"map-layer":L.MapLayerSource}});return p}var S,D;I=x.strict()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});l.JoinTableDataSource=S=function(n){function e(f){f=n.call(this,f)||this;f.type="join-table";return f}h._inheritsLoose(e,n);var g=e.prototype;g.readLeftTableSource=function(f,
A,R){return X()(f,A,R)};g.castLeftTableSource=function(f){return E.ensureOneOfType(ca(),f)};g.readRightTableSource=function(f,A,R){return X()(f,A,R)};g.castRightTableSource=function(f){return E.ensureOneOfType(ca(),f)};g.clone=function(){var f,A;const {leftTableKey:R,rightTableKey:N,leftTableSource:ba,rightTableSource:la,joinType:na}=this,pa={leftTableKey:R,rightTableKey:N,leftTableSource:null!=(f=null==ba?void 0:ba.clone())?f:void 0,rightTableSource:null!=(A=null==la?void 0:la.clone())?A:void 0,
joinType:na};return new S(pa)};return e}(r.JSONSupport);F.__decorate([B.enumeration({joinTable:"join-table"})],l.JoinTableDataSource.prototype,"type",void 0);F.__decorate([m.property({type:String,json:{write:!0}})],l.JoinTableDataSource.prototype,"leftTableKey",void 0);F.__decorate([m.property({type:String,json:{write:!0}})],l.JoinTableDataSource.prototype,"rightTableKey",void 0);F.__decorate([m.property({json:{write:!0}})],l.JoinTableDataSource.prototype,"leftTableSource",void 0);F.__decorate([Q.reader("leftTableSource")],
l.JoinTableDataSource.prototype,"readLeftTableSource",null);F.__decorate([v.cast("leftTableSource")],l.JoinTableDataSource.prototype,"castLeftTableSource",null);F.__decorate([m.property({json:{write:!0}})],l.JoinTableDataSource.prototype,"rightTableSource",void 0);F.__decorate([Q.reader("rightTableSource")],l.JoinTableDataSource.prototype,"readRightTableSource",null);F.__decorate([v.cast("rightTableSource")],l.JoinTableDataSource.prototype,"castRightTableSource",null);F.__decorate([B.enumeration(I)],
l.JoinTableDataSource.prototype,"joinType",void 0);l.JoinTableDataSource=S=F.__decorate([z.subclass("esri.layers.support.source.JoinTableDataSource")],l.JoinTableDataSource);let k=null,p=null;v={key:"type",base:null,typeMap:{"join-table":l.JoinTableDataSource,"query-table":J.QueryTableDataSource,raster:O.RasterDataSource,table:P.TableDataSource}};l.DataLayerSource=D=function(n){function e(g){g=n.call(this,g)||this;g.type="data-layer";return g}h._inheritsLoose(e,n);e.prototype.clone=function(){const {fields:g,
dataSource:f}=this;return new D({fields:g,dataSource:f})};return e}(r.JSONSupport);F.__decorate([B.enumeration({dataLayer:"data-layer"})],l.DataLayerSource.prototype,"type",void 0);F.__decorate([m.property({type:[G],json:{write:!0}})],l.DataLayerSource.prototype,"fields",void 0);F.__decorate([m.property({types:v,json:{write:!0}})],l.DataLayerSource.prototype,"dataSource",void 0);l.DataLayerSource=D=F.__decorate([z.subclass("esri.layers.support.source.DataLayerSource")],l.DataLayerSource);l.DataLayerSource.from=
E.ensureType(l.DataLayerSource);Object.defineProperty(l,"__esModule",{value:!0})})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["exports","./property","../../jsonMap"],function(l,h,F){l.enumeration=function(I,q={ignoreUnknown:!0}){I=I instanceof F.JSONMap?I:new F.JSONMap(I,q);I={type:null!=q&&q.ignoreUnknown?I.apiValues:String,readOnly:null==q?void 0:q.readOnly,json:{type:I.jsonValues,read:null!=q&&q.readOnly?!1:{reader:I.read},write:{writer:I.write}}};void 0!==(null==q?
void 0:q.default)&&(I.json.default=q.default);return h.property(I)};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/support/Field":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ./domains ./fieldType".split(" "),
function(l,h,F,I,q,E,m,v,x,B,Q,V,z,y,C,b){var r;const G=new m.JSONMap({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});F=r=function(L){function J(P){P=L.call(this,
P)||this;P.alias=null;P.defaultValue=void 0;P.description=null;P.domain=null;P.editable=!0;P.length=-1;P.name=null;P.nullable=!0;P.type=null;P.valueType=null;return P}l._inheritsLoose(J,L);var O=J.prototype;O.readDescription=function(P,{description:X}){let ca;try{ca=JSON.parse(X)}catch(S){}return ca?ca.value:null};O.readValueType=function(P,{description:X}){let ca;try{ca=JSON.parse(X)}catch(S){}return ca?G.fromJSON(ca.fieldValueType):null};O.clone=function(){return new r({alias:this.alias,defaultValue:this.defaultValue,
description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType})};return J}(y.JSONSupport);h.__decorate([E.property({type:String,json:{write:!0}})],F.prototype,"alias",void 0);h.__decorate([E.property({type:[String,Number],json:{write:{allowNull:!0}}})],F.prototype,"defaultValue",void 0);h.__decorate([E.property()],F.prototype,"description",void 0);h.__decorate([x.reader("description")],
F.prototype,"readDescription",null);h.__decorate([E.property({types:C.types,json:{read:{reader:C.fromJSON},write:!0}})],F.prototype,"domain",void 0);h.__decorate([E.property({type:Boolean,json:{write:!0}})],F.prototype,"editable",void 0);h.__decorate([E.property({type:q.Integer,json:{write:!0}})],F.prototype,"length",void 0);h.__decorate([E.property({type:String,json:{write:!0}})],F.prototype,"name",void 0);h.__decorate([E.property({type:Boolean,json:{write:!0}})],F.prototype,"nullable",void 0);h.__decorate([v.enumeration(b.kebabDict)],
F.prototype,"type",void 0);h.__decorate([E.property()],F.prototype,"valueType",void 0);h.__decorate([x.reader("valueType",["description"])],F.prototype,"readValueType",null);return F=r=h.__decorate([B.subclass("esri.layers.support.Field")],F)})},"esri/layers/support/domains":function(){define("exports ../../core/has ./Domain ./CodedValueDomain ./InheritedDomain ./RangeDomain".split(" "),function(l,h,F,I,q,E){function m(v,x){switch(v.type){case "range":{const B="range"in v?v.range[1]:v.maxValue;if(+x<
("range"in v?v.range[0]:v.minValue)||+x>B)return l.DomainValidationError.VALUE_OUT_OF_RANGE;break}case "coded-value":case "codedValue":if(null==v.codedValues||v.codedValues.every(B=>null==B||B.code!==x))return l.DomainValidationError.INVALID_CODED_VALUE}return null}(function(v){v.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range";v.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(l.DomainValidationError||(l.DomainValidationError={}));h={key:"type",base:F,typeMap:{range:E,
"coded-value":I,inherited:q}};l.DomainBase=F;l.CodedValueDomain=I;l.InheritedDomain=q;l.RangeDomain=E;l.fromJSON=function(v){if(!v||!v.type)return null;switch(v.type){case "range":return E.fromJSON(v);case "codedValue":return I.fromJSON(v);case "inherited":return q.fromJSON(v)}return null};l.getDomainRange=function(v){if(v&&"range"===v.type)return{min:"range"in v?v.range[0]:v.minValue,max:"range"in v?v.range[1]:v.maxValue}};l.isValidDomainValue=function(v,x){return null===m(v,x)};l.types=h;l.validateDomainValue=
m;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/support/Domain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport".split(" "),
function(l,h,F,I,q,E,m,v,x,B,Q,V,z){F=new m.JSONMap({inherited:"inherited",codedValue:"coded-value",range:"range"});z=function(y){function C(b){b=y.call(this,b)||this;b.name=null;b.type=null;return b}l._inheritsLoose(C,y);return C}(z.JSONSupport);h.__decorate([E.property({type:String,json:{write:!0}})],z.prototype,"name",void 0);h.__decorate([v.enumeration(F)],z.prototype,"type",void 0);return z=h.__decorate([x.subclass("esri.layers.support.Domain")],z)})},"esri/layers/support/CodedValueDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/lang ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ./CodedValue ./Domain".split(" "),
function(l,h,F,I,q,E,m,v,x,B,Q,V,z,y){var C;F=C=function(b){function r(L){L=b.call(this,L)||this;L.codedValues=null;L.type="coded-value";return L}l._inheritsLoose(r,b);var G=r.prototype;G.getName=function(L){let J=null;if(this.codedValues){const O=String(L);this.codedValues.some(P=>{String(P.code)===O&&(J=P.name);return!!J})}return J};G.clone=function(){return new C({codedValues:I.clone(this.codedValues),name:this.name})};return r}(y);h.__decorate([m.property({type:[z["default"]],json:{write:!0}})],
F.prototype,"codedValues",void 0);h.__decorate([v.enumeration({codedValue:"coded-value"})],F.prototype,"type",void 0);return F=C=h.__decorate([x.subclass("esri.layers.support.CodedValueDomain")],F)})},"esri/layers/support/CodedValue":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport".split(" "),
function(l,h,F,I,q,E,m,v,x,B,Q,V,z){var y;l.CodedValue=y=function(C){function b(r){r=C.call(this,r)||this;r.name=null;r.code=null;return r}h._inheritsLoose(b,C);b.prototype.clone=function(){return new y({name:this.name,code:this.code})};return b}(z.JSONSupport);F.__decorate([m.property({type:String,json:{write:!0}})],l.CodedValue.prototype,"name",void 0);F.__decorate([m.property({type:[String,Number],json:{write:!0}})],l.CodedValue.prototype,"code",void 0);l.CodedValue=y=F.__decorate([x.subclass("esri.layers.support.CodedValue")],
l.CodedValue);l.default=l.CodedValue;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/support/InheritedDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ./Domain".split(" "),
function(l,h,F,I,q,E,m,v,x,B,Q,V){var z;F=z=function(y){function C(b){b=y.call(this,b)||this;b.type="inherited";return b}l._inheritsLoose(C,y);C.prototype.clone=function(){return new z};return C}(V);h.__decorate([m.enumeration({inherited:"inherited"})],F.prototype,"type",void 0);return F=z=h.__decorate([v.subclass("esri.layers.support.InheritedDomain")],F)})},"esri/layers/support/RangeDomain":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ./Domain".split(" "),
function(l,h,F,I,q,E,m,v,x,B,Q,V){var z;F=z=function(y){function C(b){b=y.call(this,b)||this;b.maxValue=null;b.minValue=null;b.type="range";return b}l._inheritsLoose(C,y);C.prototype.clone=function(){return new z({maxValue:this.maxValue,minValue:this.minValue,name:this.name})};return C}(V);h.__decorate([E.property({type:Number,json:{type:[Number],read:{source:"range",reader(y,C){return C.range&&C.range[1]}},write:{enabled:!1,overridePolicy(){return{enabled:null!=this.maxValue&&null==this.minValue}},
target:"range",writer(y,C,b){C[b]=[this.minValue||0,y]}}}})],F.prototype,"maxValue",void 0);h.__decorate([E.property({type:Number,json:{type:[Number],read:{source:"range",reader(y,C){return C.range&&C.range[0]}},write:{target:"range",writer(y,C,b){C[b]=[y,this.maxValue||0]}}}})],F.prototype,"minValue",void 0);h.__decorate([m.enumeration({range:"range"})],F.prototype,"type",void 0);return F=z=h.__decorate([v.subclass("esri.layers.support.RangeDomain")],F)})},"esri/layers/support/fieldType":function(){define(["exports",
"../../core/jsonMap"],function(l,h){h=new h.JSONMap({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"});l.kebabDict=h;Object.defineProperty(l,"__esModule",
{value:!0})})},"esri/layers/support/source/MapLayerSource":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../../core/JSONSupport".split(" "),
function(l,h,F,I,q,E,m,v,x,B,Q,V,z){var y;l.MapLayerSource=y=function(C){function b(r){r=C.call(this,r)||this;r.type="map-layer";return r}h._inheritsLoose(b,C);b.prototype.clone=function(){const {mapLayerId:r,gdbVersion:G}=this;return new y({mapLayerId:r,gdbVersion:G})};return b}(z.JSONSupport);F.__decorate([v.enumeration({mapLayer:"map-layer"})],l.MapLayerSource.prototype,"type",void 0);F.__decorate([m.property({type:E.Integer,json:{write:!0}})],l.MapLayerSource.prototype,"mapLayerId",void 0);F.__decorate([m.property({type:String,
json:{write:!0}})],l.MapLayerSource.prototype,"gdbVersion",void 0);l.MapLayerSource=y=F.__decorate([x.subclass("esri.layers.support.source.MapLayerSource")],l.MapLayerSource);Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/support/source/QueryTableDataSource":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../../core/JSONSupport ../../../geometry/SpatialReference ../../../geometry/support/typeUtils ../../../geometry".split(" "),
function(l,h,F,I,q,E,m,v,x,B,Q,V,z,y,C,b){var r;l.QueryTableDataSource=r=function(G){function L(J){J=G.call(this,J)||this;J.type="query-table";return J}h._inheritsLoose(L,G);L.prototype.clone=function(){var J;const {workspaceId:O,query:P,oidFields:X,spatialReference:ca,geometryType:S}=this,D={workspaceId:O,query:P,oidFields:X,spatialReference:null!=(J=null==ca?void 0:ca.clone())?J:void 0,geometryType:S};return new r(D)};return L}(z.JSONSupport);F.__decorate([v.enumeration({queryTable:"query-table"})],
l.QueryTableDataSource.prototype,"type",void 0);F.__decorate([m.property({type:String,json:{write:!0}})],l.QueryTableDataSource.prototype,"workspaceId",void 0);F.__decorate([m.property({type:String,json:{write:!0}})],l.QueryTableDataSource.prototype,"query",void 0);F.__decorate([m.property({type:String,json:{write:!0}})],l.QueryTableDataSource.prototype,"oidFields",void 0);F.__decorate([m.property({type:y,json:{write:!0}})],l.QueryTableDataSource.prototype,"spatialReference",void 0);F.__decorate([v.enumeration(C.featureGeometryTypeKebabDictionary)],
l.QueryTableDataSource.prototype,"geometryType",void 0);l.QueryTableDataSource=r=F.__decorate([x.subclass("esri.layers.support.source.QueryTableDataSource")],l.QueryTableDataSource);Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/support/source/RasterDataSource":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../../core/JSONSupport".split(" "),
function(l,h,F,I,q,E,m,v,x,B,Q,V,z){var y;l.RasterDataSource=y=function(C){function b(r){r=C.call(this,r)||this;r.type="raster";return r}h._inheritsLoose(b,C);b.prototype.clone=function(){const {workspaceId:r,dataSourceName:G}=this;return new y({workspaceId:r,dataSourceName:G})};return b}(z.JSONSupport);F.__decorate([v.enumeration({raster:"raster"})],l.RasterDataSource.prototype,"type",void 0);F.__decorate([m.property({type:String,json:{write:!0}})],l.RasterDataSource.prototype,"dataSourceName",void 0);
F.__decorate([m.property({type:String,json:{write:!0}})],l.RasterDataSource.prototype,"workspaceId",void 0);l.RasterDataSource=y=F.__decorate([x.subclass("esri.layers.support.source.RasterDataSource")],l.RasterDataSource);Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/support/source/TableDataSource":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../chunks/tslib.es6 ../../../core/has ../../../core/Logger ../../../core/accessorSupport/ensureType ../../../core/accessorSupport/decorators/property ../../../core/accessorSupport/decorators/enumeration ../../../core/accessorSupport/decorators/subclass ../../../core/urlUtils ../../../core/uuid ../../../portal/support/resourceExtension ../../../core/JSONSupport".split(" "),
function(l,h,F,I,q,E,m,v,x,B,Q,V,z){var y;l.TableDataSource=y=function(C){function b(r){r=C.call(this,r)||this;r.type="table";return r}h._inheritsLoose(b,C);b.prototype.clone=function(){const {workspaceId:r,gdbVersion:G,dataSourceName:L}=this;return new y({workspaceId:r,gdbVersion:G,dataSourceName:L})};return b}(z.JSONSupport);F.__decorate([v.enumeration({table:"table"})],l.TableDataSource.prototype,"type",void 0);F.__decorate([m.property({type:String,json:{write:!0}})],l.TableDataSource.prototype,
"workspaceId",void 0);F.__decorate([m.property({type:String,json:{write:!0}})],l.TableDataSource.prototype,"gdbVersion",void 0);F.__decorate([m.property({type:String,json:{write:!0}})],l.TableDataSource.prototype,"dataSourceName",void 0);l.TableDataSource=y=F.__decorate([x.subclass("esri.layers.support.source.TableDataSource")],l.TableDataSource);Object.defineProperty(l,"__esModule",{value:!0})})},"esri/tasks/support/QuantizationParameters":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/lang ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../geometry/Extent ../../geometry".split(" "),
function(l,h,F,I,q,E,m,v,x,B,Q,V,z,y,C){var b;F=new v.JSONMap({upperLeft:"upper-left",lowerLeft:"lower-left"});z=b=function(r){function G(L){L=r.call(this,L)||this;L.extent=null;L.mode="view";L.originPosition="upper-left";L.tolerance=1;return L}l._inheritsLoose(G,r);G.prototype.clone=function(){return new b(I.clone({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))};return G}(z.JSONSupport);h.__decorate([m.property({type:y,json:{write:{overridePolicy(){return{enabled:"view"===
this.mode}}}}})],z.prototype,"extent",void 0);h.__decorate([m.property({type:["view","edit"],json:{write:!0}})],z.prototype,"mode",void 0);h.__decorate([m.property({type:String,json:{read:F.read,write:F.write}})],z.prototype,"originPosition",void 0);h.__decorate([m.property({type:Number,json:{write:{overridePolicy(){return{enabled:"view"===this.mode}}}}})],z.prototype,"tolerance",void 0);return z=b=h.__decorate([x.subclass("esri.tasks.support.QuantizationParameters")],z)})},"esri/tasks/support/StatisticDefinition":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/lang ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport".split(" "),
function(l,h,F,I,q,E,m,v,x,B,Q,V,z,y){var C;F=new v.JSONMap({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete"});y=C=function(b){function r(L){L=b.call(this,L)||this;L.maxPointCount=void 0;L.maxRecordCount=void 0;L.maxVertexCount=void 0;L.onStatisticField=null;L.outStatisticFieldName=null;L.statisticType=null;L.statisticParameters=null;return L}l._inheritsLoose(r,
b);var G=r.prototype;G.writeStatisticParameters=function(L,J){if("percentile-continuous"===this.statisticType||"percentile-discrete"===this.statisticType)J.statisticParameters=I.clone(L)};G.clone=function(){return new C({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:I.clone(this.statisticParameters)})};
return r}(y.JSONSupport);h.__decorate([m.property({type:Number,json:{write:!0}})],y.prototype,"maxPointCount",void 0);h.__decorate([m.property({type:Number,json:{write:!0}})],y.prototype,"maxRecordCount",void 0);h.__decorate([m.property({type:Number,json:{write:!0}})],y.prototype,"maxVertexCount",void 0);h.__decorate([m.property({type:String,json:{write:!0}})],y.prototype,"onStatisticField",void 0);h.__decorate([m.property({type:String,json:{write:!0}})],y.prototype,"outStatisticFieldName",void 0);
h.__decorate([m.property({type:String,json:{read:{source:"statisticType",reader:F.read},write:{target:"statisticType",writer:F.write}}})],y.prototype,"statisticType",void 0);h.__decorate([m.property({type:Object})],y.prototype,"statisticParameters",void 0);h.__decorate([B.writer("statisticParameters")],y.prototype,"writeStatisticParameters",null);return y=C=h.__decorate([x.subclass("esri.tasks.support.StatisticDefinition")],y)})},"esri/views/support/WatchUpdatingTracking":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/maybe ../../core/accessorSupport/get ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/subclass ../../core/scheduling ../../core/accessorSupport/trackingUtils ../../core/Accessor ../../core/Handles ../../core/watchUtils".split(" "),
function(l,h,F,I,q,E,m,v,x,B,Q,V){l.WatchUpdatingTracking=function(z){function y(){var b=z.apply(this,arguments)||this;b.updating=!1;b.handleId=0;b.handles=new Q;b.scheduleHandleId=0;b.pendingPromises=new Set;return b}h._inheritsLoose(y,z);var C=y.prototype;C.destroy=function(){this.removeAll();this.handles.destroy()};C.add=function(b,r,G,L=0){const J=0!==(L&1),O=++this.handleId;J||this.installSyncUpdatingWatch(b,r,O);b=0!==(L&2)?V.init(b,r,G,J):b.watch(r,G,J);this.handles.add(b,O);return{remove:()=>
{this.handles.remove(O)}}};C.addOnCollectionPropertyChange=function(b,r,G,L=0){L=0!==(L&2);const J=++this.handleId;this.handles.add([V.on(b,r,"after-changes",this.createSyncUpdatingCallback()),V.on(b,r,"change",G,L?O=>{G({added:O.items,removed:[],moved:[],target:O})}:void 0)],J);return{remove:()=>{this.handles.remove(J)}}};C.addOnCollectionChange=function(b,r,G=0){G=0!==(G&2);const L=++this.handleId;this.handles.add([b.on("after-changes",this.createSyncUpdatingCallback()),b.on("change",r)],L);G&&
r({added:b.items,removed:[],moved:[],target:b});return{remove:()=>{this.handles.remove(L)}}};C.addPromise=function(b){if(I.isNone(b))return b;const r=++this.handleId;this.handles.add({remove:()=>{this.pendingPromises.delete(b)&&(0!==this.pendingPromises.size||this.handles.has(-42)||this._set("updating",!1))}},r);this.pendingPromises.add(b);this._set("updating",!0);const G=()=>this.handles.remove(r);b.then(G,G);return b};C.removeAll=function(){this.pendingPromises.clear();this.handles.removeAll();
this._set("updating",!1)};C.installSyncUpdatingWatch=function(b,r,G){var L=this.createSyncUpdatingCallback();L=x.reaction(()=>q.valueOf(b,r),L);this.handles.add(L,G);return L};C.createSyncUpdatingCallback=function(){return()=>{this.handles.remove(-42);++this.scheduleHandleId;const b=this.scheduleHandleId;this._get("updating")||this._set("updating",!0);this.handles.add(v.schedule(()=>{b===this.scheduleHandleId&&(this._set("updating",0<this.pendingPromises.size),this.handles.remove(-42))}),-42)}};return y}(B);
F.__decorate([E.property({readOnly:!0})],l.WatchUpdatingTracking.prototype,"updating",void 0);l.WatchUpdatingTracking=F.__decorate([m.subclass("esri.views.support.WatchUpdatingTracking")],l.WatchUpdatingTracking);Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/support/TileInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../geometry/support/spatialReferenceUtils ../../geometry/SpatialReference ../../geometry/support/webMercatorUtils ../../geometry/Point ../../geometry ../../core/unitUtils ../../geometry/support/aaBoundingRect ./LOD".split(" "),
function(l,h,F,I,q,E,m,v,x,B,Q,V,z,y,C,b,r,G,L,J,O,P){var X;F=new m.JSONMap({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});y=X=function(ca){function S(k){k=ca.call(this,k)||this;k.dpi=96;k.format=null;k.origin=null;k.minScale=0;k.maxScale=0;k.size=null;k.spatialReference=null;return k}l._inheritsLoose(S,ca);S.create=
function(k={size:256,spatialReference:b.WebMercator}){var p=k.resolutionFactor||1,n=k.scales;const e=k.size||256,g=k.spatialReference||b.WebMercator;if(!C.isValid(g)){p=[];if(n)for(k=0;k<n.length;k++){var f=n[k];p.push({level:k,scale:f,resolution:f})}else for(n=5E-4,k=23;0<=k;k--)p.unshift({level:k,scale:n,resolution:n}),n*=2;return new X({dpi:96,lods:p,origin:new G(0,0,g),size:[e,e],spatialReference:g})}f=C.getInfo(g);k=k.origin?new G({x:k.origin.x,y:k.origin.y,spatialReference:g}):f?new G({x:f.origin[0],
y:f.origin[1],spatialReference:g}):new G({x:0,y:0,spatialReference:g});f=1/(39.37*J.getMetersPerUnitForSR(g)*96);const A=[];if(n)for(p=0;p<n.length;p++){var R=n[p];A.push({level:p,scale:R,resolution:R*f})}else{var N=C.isGeographic(g)?512/e*5.916575275917094E8:256/e*5.91657527591555E8;n=Math.ceil(24/p);A.push({level:0,scale:N,resolution:N*f});for(R=1;R<n;R++)N/=2**p,A.push({level:R,scale:N,resolution:N*f})}return new X({dpi:96,lods:A,origin:k,size:[e,e],spatialReference:g})};var D=S.prototype;D.readOrigin=
function(k,p){return G.fromJSON({spatialReference:p.spatialReference,...k})};D.readSize=function(k,p){return[p.cols,p.rows]};D.writeSize=function(k,p){p.cols=k[0];p.rows=k[0]};D.zoomToScale=function(k){const p=this.scales;if(0>=k)return p[0];if(k>=p.length)return p[p.length-1];{const n=Math.round(k);return p[n]+(n-k)*(p[Math.round(k-.5)]-p[n])}};D.scaleToZoom=function(k){const p=this.scales,n=p.length-1;let e=0;for(;e<n;e++){const g=p[e],f=p[e+1];if(g<=k)break;if(f===k)return e+1;if(g>k&&f<k)return e+
1-(k-f)/(g-f)}return e};D.snapScale=function(k,p=.95){k=this.scaleToZoom(k);return k%Math.floor(k)>=p?this.zoomToScale(Math.ceil(k)):this.zoomToScale(Math.floor(k))};D.tileAt=function(k,p,n,e){var g=this.lodAt(k);if(!g)return null;let f;if("number"===typeof p)f=p,p=n;else{if(C.equals(p.spatialReference,this.spatialReference))f=p.x,p=p.y;else{e=r.project(p,this.spatialReference);if(!e)return null;f=e.x;p=e.y}e=n}n=g.resolution*this.size[0];g=g.resolution*this.size[1];e||(e={id:null,level:0,row:0,col:0,
extent:O.create()});e.level=k;e.row=Math.floor((this.origin.y-p)/g+.001);e.col=Math.floor((f-this.origin.x)/n+.001);this.updateTileInfo(e);return e};D.updateTileInfo=function(k,p=0){var n=this.lodAt(k.level);n||1!==p||(p=this.lods[this.lods.length-1],p.level<k.level&&(n=p));if(n){var e=k.level-n.level;p=n.resolution*this.size[0]/2**e;n=n.resolution*this.size[1]/2**e;k.id=`${k.level}/${k.row}/${k.col}`;k.extent||(k.extent=O.create());k.extent[0]=this.origin.x+k.col*p;k.extent[1]=this.origin.y-(k.row+
1)*n;k.extent[2]=k.extent[0]+p;k.extent[3]=k.extent[1]+n}};D.upsampleTile=function(k){const p=this._upsampleLevels[k.level];if(!p||-1===p.parentLevel)return!1;k.level=p.parentLevel;k.row=Math.floor(k.row/p.factor+.001);k.col=Math.floor(k.col/p.factor+.001);this.updateTileInfo(k);return!0};D.getTileBounds=function(k,p){var {resolution:n}=this.lodAt(p.level);const e=n*this.size[0];n*=this.size[1];k[0]=this.origin.x+p.col*e;k[1]=this.origin.y-(p.row+1)*n;k[2]=k[0]+e;k[3]=k[1]+n;return k};D.lodAt=function(k){return this._levelToLOD&&
this._levelToLOD[k]||null};D.clone=function(){return X.fromJSON(this.write({}))};D._initializeUpsampleLevels=function(){const k=this.lods;this._upsampleLevels=[];let p=null;for(let n=0;n<k.length;n++){const e=k[n];this._upsampleLevels[e.level]={parentLevel:p?p.level:-1,factor:p?p.resolution/e.resolution:0};p=e}};l._createClass(S,[{key:"isWrappable",get:function(){const {spatialReference:k,origin:p}=this;if(k&&p){const n=C.getInfo(k);return k.isWrappable&&Math.abs(n.origin[0]-p.x)<=n.dx}return!1}},
{key:"lods",set:function(k){let p=0,n=0;const e=[];this._levelToLOD={};k&&(p=-Infinity,n=Infinity,k.forEach(g=>{e.push(g.scale);p=g.scale>p?g.scale:p;n=g.scale<n?g.scale:n;this._levelToLOD[g.level]=g}));this._set("scales",e);this._set("minScale",p);this._set("maxScale",n);this._set("lods",k);this._initializeUpsampleLevels()}}]);return S}(y.JSONSupport);h.__decorate([E.property({type:Number,json:{write:!0}})],y.prototype,"compressionQuality",void 0);h.__decorate([E.property({type:Number,json:{write:!0}})],
y.prototype,"dpi",void 0);h.__decorate([E.property({type:String,json:{read:F.read,write:F.write,origins:{"web-scene":{read:!1,write:!1}}}})],y.prototype,"format",void 0);h.__decorate([E.property({readOnly:!0})],y.prototype,"isWrappable",null);h.__decorate([E.property({type:G,json:{write:!0}})],y.prototype,"origin",void 0);h.__decorate([v.reader("origin")],y.prototype,"readOrigin",null);h.__decorate([E.property({type:[P],value:null,json:{write:!0}})],y.prototype,"lods",null);h.__decorate([E.property({readOnly:!0})],
y.prototype,"minScale",void 0);h.__decorate([E.property({readOnly:!0})],y.prototype,"maxScale",void 0);h.__decorate([E.property({readOnly:!0})],y.prototype,"scales",void 0);h.__decorate([E.property({cast:ca=>Array.isArray(ca)?ca:"number"===typeof ca?[ca,ca]:[256,256]})],y.prototype,"size",void 0);h.__decorate([v.reader("size",["rows","cols"])],y.prototype,"readSize",null);h.__decorate([B.writer("size",{cols:{type:q.Integer},rows:{type:q.Integer}})],y.prototype,"writeSize",null);h.__decorate([E.property({type:b,
json:{write:!0}})],y.prototype,"spatialReference",void 0);return y=X=h.__decorate([x.subclass("esri.layers.support.TileInfo")],y)})},"esri/core/unitUtils":function(){define("exports ./has ./jsonMap ../geometry/support/WKIDUnitConversion ../geometry/support/spatialReferenceUtils ../geometry/SpatialReference ../geometry/support/Ellipsoid ../geometry/projectionEllipsoid".split(" "),function(l,h,F,I,q,E,m,v){function x(g){if(g=p[g])return g;throw Error("unknown measure");}function B(g){return k[g].baseUnit}
function Q(g,f=null){f=f||x(g);return k[f].baseUnit===g}function V(g,f,A){if(f===A)return g;const R=x(f);if(R!==x(A))throw Error("incompatible units");g=Q(f,R)?g:g*k[R].units[f].inBaseUnits;return Q(A,R)?g:g/k[R].units[A].inBaseUnits}function z(g,f){return 3E3>V(g,f,"meters")?"meters":"kilometers"}function y(g,f){return 1E5>V(g,f,"meters")?"meters":"kilometers"}function C(g,f){return 1E3>V(g,f,"feet")?"feet":"miles"}function b(g,f){return 1E5>V(g,f,"feet")?"feet":"miles"}function r(g){return D.fromJSON(g.toLowerCase())||
null}function G(g,f=m.earth.metersPerDegree){return L(g,!0)||f}function L(g,f=!1){let A,R,N=null;null!=g&&("object"===typeof g?(A=g.wkid,R=g.wkt):"number"===typeof g?A=g:"string"===typeof g&&(R=g));if(A){if(q.isWKIDFromMars(A))return m.mars.metersPerDegree;if(q.isWKIDFromMoon(A))return m.moon.metersPerDegree;N=X.values[X[A]];!N&&f&&S.has(A)&&(N=O)}else R&&(-1!==R.search(/^PROJCS/i)?(g=P.exec(R))&&g[1]&&(N=parseFloat(g[1].split(",")[1])):-1!==R.search(/^GEOCCS/i)&&(g=ca.exec(R))&&g[1]&&(N=parseFloat(g[1].split(",")[1])));
return N}function J(g){let f,A,R=null;null!=g&&("object"===typeof g?(f=g.wkid,A=g.wkt):"number"===typeof g?f=g:"string"===typeof g&&(A=g));f?R=X.units[X[f]]:A&&-1!==A.search(/^PROJCS/i)&&(g=P.exec(A))&&g[1]&&(R=(g=/[\\"\\']{1}([^\\"\\']+)/.exec(g[1]))&&g[1]);return R?r(R):null}const O=m.earth.radius*Math.PI/200,P=/UNIT\[([^\]]+)\]\]$/i,X=I,ca=/UNIT\[([^\]]+)\]/i,S=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),D=F.strict()({meter:"meters",foot:"feet",foot_us:"us-feet",
foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"});h={millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},
meters:{inBaseUnits:1},kilometers:{inBaseUnits:1E3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}};I={"square-millimeters":{inBaseUnits:1E-6},"square-centimeters":{inBaseUnits:1E-4},"square-decimeters":{inBaseUnits:.1*.1},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:1E6},"square-inches":{inBaseUnits:6.4516E-4},"square-feet":{inBaseUnits:.09290304},
"square-yards":{inBaseUnits:.83612736},"square-miles":{inBaseUnits:2589988.110336},"square-us-feet":{inBaseUnits:(g=>g*g)(1200/3937)},acres:{inBaseUnits:4046.8564224},ares:{inBaseUnits:100},hectares:{inBaseUnits:1E4}};const k={length:{baseUnit:"meters",units:h},area:{baseUnit:"square-meters",units:I},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1E3*1E-9},"cubic-centimeters":{inBaseUnits:.001},"cubic-decimeters":{inBaseUnits:1},"cubic-meters":{inBaseUnits:1E3},
"cubic-kilometers":{inBaseUnits:1E12},"cubic-inches":{inBaseUnits:.016387064},"cubic-feet":{inBaseUnits:.09290304*304.8},"cubic-yards":{inBaseUnits:764.554857984},"cubic-miles":{inBaseUnits:4.16818182544058E12}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},p=function(){const g={};for(const f in k)for(const A in k[f].units)g[A]=f;return g}(),n={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",
esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},e={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",
esriYards:"yards"};h=F.strict()(n);I=F.strict()(e);F=F.strict()({...n,...e});l.areaUnitsJSONMap=h;l.baseUnitForMeasure=B;l.baseUnitForUnit=function(g){return B(x(g))};l.convertUnit=V;l.getDefaultUnitSystem=function(g){if(!g)return null;switch(J(g)){case "feet":case "us-feet":case "clarke-feet":case "clarke-yards":case "clarke-links":case "sears-yards":case "sears-feet":case "sears-chains":case "benoit-1895-b-chains":case "indian-yards":case "indian-1937-yards":case "gold-coast-feet":case "sears-1922-truncated-chains":return"imperial";
case "50-kilometers":case "150-kilometers":case "meters":return"metric"}return null};l.getMetersPerUnit=L;l.getMetersPerUnitForSR=G;l.getMetersPerVerticalUnitForSR=function(g){if(g&&"object"===typeof g&&!q.isEarth(g))return 1;g=G(g);return 1E5<g?1:g};l.getUnitString=J;l.getVerticalUnitStringForSR=function(g){const f=G(g),A=g instanceof E?v.getReferenceEllipsoid(g).metersPerDegree:1E5;return f>=A?"meters":J(g)};l.inchesPerMeter=39.37;l.isBaseUnit=Q;l.isMeasurementSystem=function(g){return"imperial"===
g||"metric"===g};l.lengthToDegrees=function(g,f,A){return V(g,f,"meters")/(A*Math.PI/180)};l.lengthUnitsJSONMap=I;l.measureForUnit=x;l.measurementAreaUnits="metric imperial square-inches square-feet square-yards square-miles square-us-feet square-meters square-kilometers acres ares hectares".split(" ");l.measurementLengthUnits="metric imperial inches feet yards miles nautical-miles us-feet meters kilometers".split(" ");l.preferredImperialAreaUnit=function(g,f){return 1E6>V(g,f,"square-feet")?"square-feet":
"square-miles"};l.preferredImperialLengthUnit=C;l.preferredImperialVerticalLengthUnit=b;l.preferredLengthUnit=function(g,f,A){switch(A){case "metric":return z(g,f);case "imperial":return C(g,f);default:return A}};l.preferredMetricAreaUnit=function(g,f){return 3E6>V(g,f,"square-meters")?"square-meters":"square-kilometers"};l.preferredMetricLengthUnit=z;l.preferredMetricVerticalLengthUnit=y;l.preferredVerticalLengthUnit=function(g,f,A){switch(A){case "metric":return y(g,f);case "imperial":return b(g,
f);default:return A}};l.unitFromRESTJSON=r;l.unitToRESTJSON=function(g){return D.toJSON(g)||null};l.unitsJSONMap=F;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/geometry/projectionEllipsoid":function(){define(["exports","./support/spatialReferenceUtils","./SpatialReference","./support/Ellipsoid"],function(l,h,F,I){function q(B){return new F({wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${B.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`})}const E=q(I.earth),m=q(I.mars),v=q(I.moon),x=new F({wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${I.earth.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`});l.SphericalECEFSpatialReference=E;l.SphericalPCPFMars=m;l.SphericalPCPFMoon=v;l.WGS84ECEFSpatialReference=x;l.createSphericalPCPF=q;l.getReferenceEllipsoid=function(B){return B&&(h.isMars(B)||B===m)?I.mars:B&&(h.isMoon(B)||B===v)?I.moon:I.earth};l.getReferenceEllipsoidFromWKID=function(B){return h.isWKIDFromMars(B)?I.mars:h.isWKIDFromMoon(B)?I.moon:I.earth};l.getSphericalPCPF=function(B){return B&&(h.isMars(B)||B===m)?m:B&&(h.isMoon(B)||B===v)?v:E};l.getSphericalPCPFForEllipsoid=function(B){return B&&
B===I.mars?m:B&&B===I.moon?v:E};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/geometry/support/aaBoundingRect":function(){define(["exports","../../core/has","../../core/maybe","../Extent"],function(l,h,F,I){function q(y=z){return[y[0],y[1],y[2],y[3]]}function E(y){return y[0]>=y[2]?0:y[2]-y[0]}function m(y){return y[1]>=y[3]?0:y[3]-y[1]}function v(y,C,b){return C>=y[0]&&b>=y[1]&&C<=y[2]&&b<=y[3]}function x(y,C){y[0]=C[0];y[1]=C[1];y[2]=C[2];y[3]=C[3];return y}function B(y){return 4===
y.length}function Q(y,C,b){return y<C?C:y>b?b:y}const V=[Infinity,Infinity,-Infinity,-Infinity],z=[0,0,0,0];l.NEGATIVE_INFINITY=V;l.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];l.UNIT=[0,0,1,1];l.ZERO=z;l.allFinite=function(y){for(let C=0;4>C;C++)if(!isFinite(y[C]))return!1;return!0};l.area=function(y){return E(y)*m(y)};l.center=function(y,C=[0,0]){C[0]=(y[0]+y[2])/2;C[1]=(y[1]+y[3])/2;return C};l.clone=function(y){return[y[0],y[1],y[2],y[3]]};l.contains=function(y,C){return C[0]>=y[0]&&
C[2]<=y[2]&&C[1]>=y[1]&&C[3]<=y[3]};l.containsPoint=function(y,C){return v(y,C[0],C[1])};l.containsPointObject=function(y,C){return v(y,C.x,C.y)};l.containsPointWithMargin=function(y,C,b){return C[0]>=y[0]-b&&C[1]>=y[1]-b&&C[0]<=y[2]+b&&C[1]<=y[3]+b};l.containsXY=v;l.create=q;l.diameter=function(y){const C=E(y);y=m(y);return Math.sqrt(C*C+y*y)};l.distance=function(y,C){const b=(y[1]+y[3])/2,r=Math.max(Math.abs(C[0]-(y[0]+y[2])/2)-E(y)/2,0);y=Math.max(Math.abs(C[1]-b)-m(y)/2,0);return Math.sqrt(r*
r+y*y)};l.empty=function(y){return y?x(y,V):q(V)};l.equals=function(y,C,b){if(F.isNone(y)||F.isNone(C))return y===C;if(!B(y)||!B(C))return!1;if(b)for(let r=0;r<y.length;r++){if(!b(y[r],C[r]))return!1}else for(b=0;b<y.length;b++)if(y[b]!==C[b])return!1;return!0};l.expand=function(y,C,b=y){if("length"in C)if(B(C))b[0]=Math.min(y[0],C[0]),b[1]=Math.min(y[1],C[1]),b[2]=Math.max(y[2],C[2]),b[3]=Math.max(y[3],C[3]);else{if(2===C.length||3===C.length)b[0]=Math.min(y[0],C[0]),b[1]=Math.min(y[1],C[1]),b[2]=
Math.max(y[2],C[0]),b[3]=Math.max(y[3],C[1])}else switch(C.type){case "extent":b[0]=Math.min(y[0],C.xmin);b[1]=Math.min(y[1],C.ymin);b[2]=Math.max(y[2],C.xmax);b[3]=Math.max(y[3],C.ymax);break;case "point":b[0]=Math.min(y[0],C.x),b[1]=Math.min(y[1],C.y),b[2]=Math.max(y[2],C.x),b[3]=Math.max(y[3],C.y)}return b};l.expandPointInPlace=function(y,C){C[0]<y[0]&&(y[0]=C[0]);C[0]>y[2]&&(y[2]=C[0]);C[1]<y[1]&&(y[1]=C[1]);C[1]>y[3]&&(y[3]=C[1])};l.expandWithNestedArray=function(y,C,b=y){const r=C.length;let G=
y[0],L=y[1],J=y[2];y=y[3];for(let O=0;O<r;O++){const P=C[O];G=Math.min(G,P[0]);L=Math.min(L,P[1]);J=Math.max(J,P[0]);y=Math.max(y,P[1])}b[0]=G;b[1]=L;b[2]=J;b[3]=y;return b};l.fromExtent=function(y,C=q()){C[0]=y.xmin;C[1]=y.ymin;C[2]=y.xmax;C[3]=y.ymax;return C};l.fromValues=function(y,C,b,r,G=q()){G[0]=y;G[1]=C;G[2]=b;G[3]=r;return G};l.height=m;l.intersection=function(y,C,b=y){const r=C[0],G=C[1],L=C[2];C=C[3];b[0]=Q(y[0],r,L);b[1]=Q(y[1],G,C);b[2]=Q(y[2],r,L);b[3]=Q(y[3],G,C);return b};l.intersects=
function(y,C){return Math.max(C[0],y[0])<=Math.min(C[2],y[2])&&Math.max(C[1],y[1])<=Math.min(C[3],y[3])};l.is=B;l.isPoint=function(y){return(0===E(y)||!isFinite(y[0]))&&(0===m(y)||!isFinite(y[1]))};l.offset=function(y,C,b,r=y){r[0]=y[0]+C;r[1]=y[1]+b;r[2]=y[2]+C;r[3]=y[3]+b;return r};l.pad=function(y,C,b=y){b[0]=y[0]-C;b[1]=y[1]-C;b[2]=y[2]+C;b[3]=y[3]+C;return b};l.set=x;l.setMax=function(y,C,b=y){b[2]=C[0];b[3]=C[1];b!==y&&(b[0]=y[0],b[1]=y[1]);return y};l.setMin=function(y,C,b=y){b[0]=C[0];b[1]=
C[1];b!==y&&(b[2]=y[2],b[3]=y[3]);return b};l.size=function(y,C){C[0]=y[2]-y[0];C[1]=y[3]-y[1]};l.toExtent=function(y,C){return new I({xmin:y[0],ymin:y[1],xmax:y[2],ymax:y[3],spatialReference:C})};l.width=E;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/support/LOD":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport".split(" "),
function(l,h,F,I,q,E,m,v,x,B,Q,V){var z;F=z=function(y){function C(b){b=y.call(this,b)||this;b.level=0;b.levelValue=null;b.resolution=0;b.scale=0;return b}l._inheritsLoose(C,y);C.prototype.clone=function(){return new z({level:this.level,levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})};return C}(V.JSONSupport);h.__decorate([E.property({type:q.Integer,json:{write:!0}})],F.prototype,"level",void 0);h.__decorate([E.property({type:String,json:{write:!0}})],F.prototype,"levelValue",
void 0);h.__decorate([E.property({type:Number,json:{write:!0}})],F.prototype,"resolution",void 0);h.__decorate([E.property({type:Number,json:{write:!0}})],F.prototype,"scale",void 0);return F=z=h.__decorate([v.subclass("esri.layers.support.LOD")],F)})},"esri/layers/graphics/data/FeatureStore":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../core/Logger ../../../core/Error ../../../core/Evented ../../../geometry/support/aaBoundingRect ../featureConversionUtils ../../../geometry/support/aaBoundingBox ./BoundsStore ./optimizedFeatureQueryEngineAdapter".split(" "),
function(l,h,F,I,q,E,m,v,x,B){return function(){function Q(z){this.geometryInfo=z;this._boundsStore=new x.BoundsStore;this._featuresById=new Map;this._markedIds=new Set;this.events=new q;this.featureAdapter=B.optimizedFeatureQueryEngineAdapter}var V=Q.prototype;V.add=function(z){this._add(z);this._emitChanged()};V.addMany=function(z){for(const y of z)this._add(y);this._emitChanged()};V.clear=function(){this._featuresById.clear();this._boundsStore.clear();this._emitChanged()};V.removeById=function(z){z=
this._featuresById.get(z);if(!z)return null;this._remove(z);this._emitChanged();return z};V.removeManyById=function(z){this._boundsStore.invalidateIndex();for(const y of z)(z=this._featuresById.get(y))&&this._remove(z);this._emitChanged()};V.forEachBounds=function(z,y,C){for(const b of z)(z=this._boundsStore.get(b.objectId))&&y(v.fromRect(C,z))};V.getFeature=function(z){return this._featuresById.get(z)};V.has=function(z){return this._featuresById.has(z)};V.forEach=function(z){this._featuresById.forEach(y=>
z(y))};V.forEachInBounds=function(z,y){this._boundsStore.forEachInBounds(z,C=>{y(this._featuresById.get(C))})};V.startMarkingUsedFeatures=function(){this._boundsStore.invalidateIndex();this._markedIds.clear()};V.sweep=function(){let z=!1;this._featuresById.forEach((y,C)=>{this._markedIds.has(C)||(z=!0,this._remove(y))});this._markedIds.clear();z&&this._emitChanged()};V._emitChanged=function(){this.events.emit("changed",void 0)};V._add=function(z){if(z){var y=z.objectId;if(null==y)F.getLogger("esri.layers.graphics.data.FeatureStore").error(new I("featurestore:invalid-feature",
"feature id is missing",{feature:z}));else{var C=this._featuresById.get(y);this._markedIds.add(y);if(C){z.displayId=C.displayId;var b=this._boundsStore.get(y);this._boundsStore.delete(y)}else if(h.isSome(this.onFeatureAdd))this.onFeatureAdd(z);z.geometry&&z.geometry.coords&&z.geometry.coords.length?(b=m.getBoundsOptimizedGeometry(b||E.create(),z.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),this._boundsStore.set(y,b)):this._boundsStore.set(y,null);this._featuresById.set(y,z)}}};V._remove=
function(z){if(h.isSome(this.onFeatureRemove))this.onFeatureRemove(z);this._markedIds.delete(z.objectId);this._boundsStore.delete(z.objectId);this._featuresById.delete(z.objectId);return z};l._createClass(Q,[{key:"geometryType",get:function(){return this.geometryInfo.geometryType}},{key:"hasM",get:function(){return this.geometryInfo.hasM}},{key:"hasZ",get:function(){return this.geometryInfo.hasZ}},{key:"numFeatures",get:function(){return this._featuresById.size}},{key:"fullBounds",get:function(){if(!this.numFeatures)return null;
const z=E.create(E.NEGATIVE_INFINITY);this._featuresById.forEach(y=>{if(y=this._boundsStore.get(y.objectId))z[0]=Math.min(y[0],z[0]),z[1]=Math.min(y[1],z[1]),z[2]=Math.max(y[2],z[2]),z[3]=Math.max(y[3],z[3])});return z}},{key:"storeStatistics",get:function(){let z=0;this._featuresById.forEach(y=>{y.geometry&&y.geometry.coords&&(z+=y.geometry.coords.length)});return{featureCount:this._featuresById.size,vertexCount:z/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}}]);return Q}()})},"esri/layers/graphics/featureConversionUtils":function(){define("exports ../../core/Logger ../../core/Error ../../geometry/support/jsonUtils ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),
function(l,h,F,I,q,E,m){function v(u,H){return u?H?4:3:H?3:2}function x(u,H,T,U){if(u){if(T)return H&&U?c:Ca;if(H&&U)return xa}else if(H&&U)return Ca;return qa}function B({scale:u,translate:H},T){return Math.round((T-H[0])/u[0])}function Q({scale:u,translate:H},T){return Math.round((H[1]-T)/u[1])}function V({scale:u,translate:H},T){return T*u[0]+H[0]}function z({scale:u,translate:H},T){return H[1]-T*u[1]}function y(u){u=u.coords;return{x:u[0],y:u[1]}}function C(u,H){u.coords[0]=H.x;u.coords[1]=H.y;
return u}function b(u){u=u.coords;return{x:u[0],y:u[1],z:u[2]}}function r(u,H){u.coords[0]=H.x;u.coords[1]=H.y;u.coords[2]=H.z;return u}function G(u){u=u.coords;return{x:u[0],y:u[1],m:u[2]}}function L(u,H){u.coords[0]=H.x;u.coords[1]=H.y;u.coords[2]=H.m;return u}function J(u){u=u.coords;return{x:u[0],y:u[1],z:u[2],m:u[3]}}function O(u,H){u.coords[0]=H.x;u.coords[1]=H.y;u.coords[2]=H.z;u.coords[3]=H.m;return u}function P(u,H){return u&&H?O:u?r:H?L:C}function X(u,H,T,U,ea){T=P(T,U);for(const Y of H){const {geometry:ia,
attributes:ka}=Y;let ma;ia&&(ma=T(new m,ia));u.push(new q(ma,ka,null,ka[ea]))}return u}function ca(u,H,T,U){for(const ea of H){const {geometry:Y,attributes:ia}=ea;let ka;Y&&(ka=S(Y,T,U));u.push({attributes:ia,geometry:ka})}return u}function S(u,H,T){if(!u)return null;const U=v(H,T),ea=[];for(let Y=0;Y<u.coords.length;Y+=U){const ia=[];for(let ka=0;ka<U;ka++)ia.push(u.coords[Y+ka]);ea.push(ia)}return H?T?{points:ea,hasZ:H,hasM:T}:{points:ea,hasZ:H}:T?{points:ea,hasM:T}:{points:ea}}function D(u,H,T,
U,ea){T=v(T,U);for(const Y of H){H=Y.geometry;U=Y.attributes;let ia;H&&(ia=k(new m,H,T));u.push(new q(ia,U,null,U[ea]))}return u}function k(u,H,T=v(H.hasZ,H.hasM)){u.lengths[0]=H.points.length;const U=u.coords;let ea=0;for(const Y of H.points)for(H=0;H<T;H++)U[ea++]=Y[H];return u}function p(u,H,T){if(!u)return null;const U=v(H,T),{coords:ea,lengths:Y}=u;u=[];let ia=0;for(const ka of Y){const ma=[];for(let ua=0;ua<ka;ua++){const ta=[];for(let wa=0;wa<U;wa++)ta.push(ea[ia++]);ma.push(ta)}u.push(ma)}return H?
T?{paths:u,hasZ:H,hasM:T}:{paths:u,hasZ:H}:T?{paths:u,hasM:T}:{paths:u}}function n(u,H,T,U,ea){T=v(T,U);for(const Y of H){H=Y.geometry;U=Y.attributes;let ia;H&&(ia=e(new m,H,T));u.push(new q(ia,U,null,U[ea]))}return u}function e(u,H,T=v(H.hasZ,H.hasM)){const {lengths:U,coords:ea}=u;let Y=0;for(const ia of H.paths){for(const ka of ia)for(H=0;H<T;H++)ea[Y++]=ka[H];U.push(ia.length)}return u}function g(u,H,T){if(!u)return null;const U=v(H,T),{coords:ea,lengths:Y}=u;u=[];let ia=0;for(const ka of Y){const ma=
[];for(let ua=0;ua<ka;ua++){const ta=[];for(let wa=0;wa<U;wa++)ta.push(ea[ia++]);ma.push(ta)}u.push(ma)}return H?T?{rings:u,hasZ:H,hasM:T}:{rings:u,hasZ:H}:T?{rings:u,hasM:T}:{rings:u}}function f(u,H,T,U,ea){for(const Y of H){H=Y.geometry;const ia=Y.centroid,ka=Y.attributes;let ma;H&&(ma=A(new m,H,T,U));ia?u.push(new q(ma,ka,C(new m,ia),ka[ea])):u.push(new q(ma,ka,null,ka[ea]))}return u}function A(u,H,T=H.hasZ,U=H.hasM){R(u,H.rings,T,U);return u}function R(u,H,T,U){T=v(T,U);const {lengths:ea,coords:Y}=
u;U=0;ea.length=Y.length=0;for(const ia of H){for(const ka of ia)for(H=0;H<T;H++)Y[U++]=ka[H];ea.push(ia.length)}return u}function N(u,H,T,U,ea,Y){u.length=0;if(!T){for(const ia of H)u.push(new q(null,ia.attributes,null,ia.attributes[Y]));return u}switch(T){case "esriGeometryPoint":return X(u,H,U,ea,Y);case "esriGeometryMultipoint":return D(u,H,U,ea,Y);case "esriGeometryPolyline":return n(u,H,U,ea,Y);case "esriGeometryPolygon":return f(u,H,U,ea,Y);default:da.error("convertToFeatureSet:unknown-geometry",
new F(`Unable to parse unknown geometry type '${T}'`)),u.length=0}return u}function ba(u,H,T,U){u=u&&("coords"in u?u:u.geometry);if(!u)return null;switch(H){case "esriGeometryPoint":return H=y,T&&U?H=J:T?H=b:U&&(H=G),H(u);case "esriGeometryMultipoint":return S(u,T,U);case "esriGeometryPolyline":return p(u,T,U);case "esriGeometryPolygon":return g(u,T,U);default:da.error("convertToGeometry:unknown-geometry",new F(`Unable to parse unknown geometry type '${H}'`))}}function la(u,H,T,U,ea){u.length=0;switch(T){case "esriGeometryPoint":var Y=
y;U&&ea?Y=J:U?Y=b:ea&&(Y=G);for(var ia of H){const {geometry:ka,attributes:ma}=ia;U=ka?Y(ka):null;u.push({attributes:ma,geometry:U})}break;case "esriGeometryMultipoint":return ca(u,H,U,ea);case "esriGeometryPolyline":for(const ka of H){const {geometry:ma,attributes:ua}=ka;let ta;ma&&(ta=p(ma,U,ea));u.push({attributes:ua,geometry:ta})}break;case "esriGeometryPolygon":for(Y of H){const {geometry:ka,attributes:ma,centroid:ua}=Y;let ta;ka&&(ta=g(ka,U,ea));ua?(ia=y(ua),u.push({attributes:ma,centroid:ia,
geometry:ta})):u.push({attributes:ma,geometry:ta})}break;default:da.error("convertToFeatureSet:unknown-geometry",new F(`Unable to parse unknown geometry type '${T}'`))}return u}function na(u,H,T,U,ea,Y,ia=T,ka=U){u.lengths.length&&(u.lengths.length=0);u.coords.length&&(u.coords.length=0);if(!H||!H.coords.length)return null;ea=ja[ea];const {coords:ma,lengths:ua}=H;H=v(T,U);const ta=v(T&&ia,U&&ka);T=x(T,U,ia,ka);if(!ua.length)return T(u.coords,ma,0,0,B(Y,ma[0]),Q(Y,ma[1])),u.lengths.length&&(u.lengths.length=
0),u.coords.length=H,u;let wa,Aa=0,Da,Ka=0;for(const Fa of ua){if(Fa<ea)continue;let Ja=0;Da=Ka;ka=U=B(Y,ma[Aa]);wa=ia=Q(Y,ma[Aa+1]);T(u.coords,ma,Da,Aa,ka,wa);Ja++;Aa+=H;Da+=ta;for(let Ga=1;Ga<Fa;Ga++,Aa+=H)if(ka=B(Y,ma[Aa]),wa=Q(Y,ma[Aa+1]),ka!==U||wa!==ia)T(u.coords,ma,Da,Aa,ka-U,wa-ia),Da+=ta,Ja++,U=ka,ia=wa;Ja>=ea&&(u.lengths.push(Ja),Ka=Da)}u.coords.length=Ka;return u.coords.length?u:null}function pa(u,H,T,U,ea,Y,ia){let ka=U,ma=0;for(let ta=Y+T;ta<ia;ta+=T){{var ua=H[ta];const wa=H[ta+1],Aa=
H[ia],Da=H[ia+1];let Ka=H[Y],Fa=H[Y+1],Ja=Aa-Ka,Ga=Da-Fa;if(0!==Ja||0!==Ga){const Ha=((ua-Ka)*Ja+(wa-Fa)*Ga)/(Ja*Ja+Ga*Ga);1<Ha?(Ka=Aa,Fa=Da):0<Ha&&(Ka+=Ja*Ha,Fa+=Ga*Ha)}Ja=ua-Ka;Ga=wa-Fa;ua=Ja*Ja+Ga*Ga}ua>ka&&(ma=ta,ka=ua)}ka>U&&(ma-Y>T&&pa(u,H,T,U,ea,Y,ma),ea(u,H,u.length,ma,H[ma],H[ma+1]),ia-ma>T&&pa(u,H,T,U,ea,ma,ia))}function za(u,H,T,U,ea){const {coords:Y,lengths:ia}=H,ka=T?U?c:Ca:U?Ca:qa;T=v(T,U);if(!Y.length)return u!==H&&(u.lengths.length=0,u.coords.length=0),u;if(!ia.length)return ka(u.coords,
Y,0,0,V(ea,Y[0]),z(ea,Y[1])),u!==H&&(u.lengths.length=0,u.coords.length=T),u;const [ma,ua]=ea.scale;U=0;for(let ta=0;ta<ia.length;ta++){const wa=ia[ta];u.lengths[ta]=wa;let Aa=V(ea,Y[U]),Da=z(ea,Y[U+1]);ka(u.coords,Y,U,U,Aa,Da);U+=T;for(let Ka=1;Ka<wa;Ka++,U+=T)Aa+=Y[U]*ma,Da-=Y[U+1]*ua,ka(u.coords,Y,U,U,Aa,Da)}u!==H&&(u.lengths.length=ia.length,u.coords.length=Y.length);return u}function Ia(u,H,T,U){let ea=0,Y=u[U*H],ia=u[U*(H+1)];for(let ka=1;ka<T;ka++){const ma=Y+u[U*(H+ka)],ua=ia+u[U*(H+ka)+1],
ta=(ma-Y)*(ua+ia);Y=ma;ia=ua;ea+=ta}return.5*ea}const da=h.getLogger("esri.tasks.support.optimizedFeatureSet"),ja={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},qa=(u,H,T,U,ea,Y)=>{u[T]=ea;u[T+1]=Y},Ca=(u,H,T,U,ea,Y)=>{u[T]=ea;u[T+1]=Y;u[T+2]=H[U+2]},xa=(u,H,T,U,ea,Y)=>{u[T]=ea;u[T+1]=Y;u[T+2]=H[U+3]},c=(u,H,T,U,ea,Y)=>{u[T]=ea;u[T+1]=Y;u[T+2]=H[U+2];u[T+3]=H[U+3]},t=[],W=[];l.convertFromFeature=function(u,H,T,U,ea){t[0]=u;[u]=N(W,t,H,T,U,ea);t.length=
W.length=0;return u};l.convertFromFeatureSet=function(u,H){const T=new E,{hasM:U,hasZ:ea,features:Y,objectIdFieldName:ia,spatialReference:ka,geometryType:ma,exceededTransferLimit:ua,transform:ta,fields:wa}=u;wa&&(T.fields=wa);T.geometryType=ma;T.objectIdFieldName=ia||H;T.spatialReference=ka;if(!T.objectIdFieldName)return da.error(new F("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),T;Y&&N(T.features,Y,ma,ea,U,T.objectIdFieldName);ua&&(T.exceededTransferLimit=ua);U&&
(T.hasM=U);ea&&(T.hasZ=ea);ta&&(T.transform=ta);return T};l.convertFromFeatures=N;l.convertFromGeometry=function(u,H,T){if(!u)return null;const U=new m;"hasZ"in u&&null==H&&(H=u.hasZ);"hasM"in u&&null==T&&(T=u.hasM);if(I.isPoint(u))return P(null!=H?H:null!=u.z,null!=T?T:null!=u.m)(U,u);if(I.isPolygon(u))return A(U,u,H,T);if(I.isPolyline(u))return e(U,u,v(H,T));if(I.isMultipoint(u))return k(U,u,v(H,T));da.error("convertFromGeometry:unknown-geometry",new F(`Unable to parse unknown geometry type '${u}'`))};
l.convertFromGraphics=function(u,H,T,U,ea,Y){const ia=u.length;switch(T){case "esriGeometryPoint":X(u,H,U,ea,Y);break;case "esriGeometryMultipoint":D(u,H,U,ea,Y);break;case "esriGeometryPolyline":n(u,H,U,ea,Y);break;case "esriGeometryPolygon":f(u,H,U,ea,Y);break;default:da.error("convertToFeatureSet:unknown-geometry",new F(`Unable to parse unknown geometry type '${T}'`))}for(U=0;U<H.length;U++)u[U+ia].geometryType=T,u[U+ia].insertAfter=H[U].insertAfter,u[U+ia].groupId=H[U].groupId;return u};l.convertFromMultipoint=
k;l.convertFromMultipointFeatures=D;l.convertFromNestedArray=R;l.convertFromPoint=function(u,H,T=P(null!=H.z,null!=H.m)){return T(u,H)};l.convertFromPointFeatures=X;l.convertFromPolygon=A;l.convertFromPolyline=e;l.convertFromPolylineFeatures=n;l.convertToFeature=function(u,H,T,U){W[0]=u;la(t,W,H,T,U);u=t[0];t.length=W.length=0;return u};l.convertToFeatureSet=function(u){const {objectIdFieldName:H,spatialReference:T,transform:U,fields:ea,hasM:Y,hasZ:ia,features:ka,geometryType:ma,exceededTransferLimit:ua,
uniqueIdField:ta,queryGeometry:wa,queryGeometryType:Aa}=u;u=la([],ka,ma,ia,Y);const Da=ba(wa,Aa,!1,!1);u={features:u,fields:ea,geometryType:ma,objectIdFieldName:H,spatialReference:T,uniqueIdField:ta,queryGeometry:Da};U&&(u.transform=U);ua&&(u.exceededTransferLimit=ua);Y&&(u.hasM=Y);ia&&(u.hasZ=ia);return u};l.convertToFeatures=la;l.convertToGeometry=ba;l.convertToMultipoint=S;l.convertToMultipointFeatures=ca;l.convertToPoint=function(u,H,T){return u?H?T?J(u):b(u):T?G(u):y(u):null};l.convertToPolygon=
g;l.convertToPolyline=p;l.deltaDecodeGeometry=function(u,H){const T=u.clone(),U=u.coords;u=u.lengths;let ea=0;for(let ka=0;ka<u.length;ka++){const ma=u[ka];var Y=U[H*ea],ia=U[H*ea+1];for(let ua=1;ua<ma;ua++)Y+=U[H*(ea+ua)],ia+=U[H*(ea+ua)+1],T.coords[H*(ea+ua)]=Y,T.coords[H*(ea+ua)+1]=ia;ea+=ma}return T};l.deltaEncodeGeometry=function(u,H){const T=u.clone(),U=u.coords;u=u.lengths;let ea=0;for(let ia=0;ia<u.length;ia++){const ka=u[ia];let ma=U[H*ea];var Y=U[H*ea+1];for(let ua=1;ua<ka;ua++){const ta=
U[H*(ea+ua)],wa=U[H*(ea+ua)+1];Y=wa-Y;T.coords[H*(ea+ua)]=ta-ma;T.coords[H*(ea+ua)+1]=Y;ma=ta;Y=wa}ea+=ka}return T};l.generalizeOptimizedGeometry=function(u,H,T,U,ea,Y,ia=T,ka=U){u.lengths.length&&(u.lengths.length=0);u.coords.length&&(u.coords.length=0);if(!H||!H.coords.length)return null;ea=ja[ea];const {coords:ma,lengths:ua}=H;H=v(T,U);const ta=v(T&&ia,U&&ka);T=x(T,U,ia,ka);if(!ua.length)return T(u.coords,ma,0,0,ma[0],ma[1]),u.lengths.length&&(u.lengths.length=0),u.coords.length=H,u;U=0;Y*=Y;for(const wa of ua){if(wa<
ea){U+=wa*H;continue}ia=u.coords.length/ta;ka=U;const Aa=U+(wa-1)*H;T(u.coords,ma,u.coords.length,ka,ma[ka],ma[ka+1]);pa(u.coords,ma,H,Y,T,ka,Aa);T(u.coords,ma,u.coords.length,Aa,ma[Aa],ma[Aa+1]);ka=u.coords.length/ta-ia;ka>=ea?u.lengths.push(ka):u.coords.length=ia*ta;U+=wa*H}return u.coords.length?u:null};l.getBoundsOptimizedGeometry=function(u,H,T,U){if(!H||!H.coords||!H.coords.length)return null;T=v(T,U);let ea=U=Number.POSITIVE_INFINITY,Y=Number.NEGATIVE_INFINITY,ia=Number.NEGATIVE_INFINITY;if(H&&
H.coords){H=H.coords;for(let ka=0;ka<H.length;ka+=T){const ma=H[ka],ua=H[ka+1];U=Math.min(U,ma);Y=Math.max(Y,ma);ea=Math.min(ea,ua);ia=Math.max(ia,ua)}}u[0]=U;u[1]=ea;u[2]=Y;u[3]=ia;return u};l.getQuantizedArea=function(u,H){const {coords:T,lengths:U}=u;let ea=u=0;for(let Y=0;Y<U.length;Y++)ea+=Ia(T,u,U[Y],H),u+=Y;return Math.abs(ea)};l.getQuantizedBoundsOptimizedGeometry=function(u,H,T,U){T=v(T,U);const {lengths:ea,coords:Y}=H;U=H=Number.POSITIVE_INFINITY;let ia=Number.NEGATIVE_INFINITY,ka=Number.NEGATIVE_INFINITY,
ma=0;for(const ua of ea){let ta=Y[ma],wa=Y[ma+1];H=Math.min(ta,H);U=Math.min(wa,U);ia=Math.max(ta,ia);ka=Math.max(wa,ka);ma+=T;for(let Aa=1;Aa<ua;Aa++,ma+=T){const Da=Y[ma],Ka=Y[ma+1];ta+=Da;wa+=Ka;0>Da&&(H=Math.min(H,ta));0<Da&&(ia=Math.max(ia,ta));0>Ka?U=Math.min(U,wa):0<Ka&&(ka=Math.max(ka,wa))}}u[0]=H;u[1]=U;u[2]=ia;u[3]=ka;return u};l.getSignedQuantizedRingArea=Ia;l.quantizeOptimizedFeatureSet=function(u,H){const {geometryType:T,features:U,hasM:ea,hasZ:Y}=H;if(!u)return H;for(let ia=0;ia<U.length;ia++){const ka=
U[ia],ma=ka.weakClone();ma.geometry=new m;na(ma.geometry,ka.geometry,ea,Y,T,u);ka.centroid&&(ma.centroid=new m,na(ma.centroid,ka.centroid,ea,Y,"esriGeometryPoint",u));U[ia]=ma}H.transform=u;return H};l.quantizeOptimizedGeometry=na;l.quantizeX=B;l.quantizeY=Q;l.removeCollinearVectices=function(u,H,T,U,ea){if(!H||!H.coords||!H.coords.length)return null;T=ja[T];const {coords:Y,lengths:ia}=H;H=x(U,ea,U,ea);U=v(U,ea);let ka=ea=0,ma=0,ua=0;for(const Aa of ia){ka=ua;H(u.coords,Y,ka,ea,Y[ea],Y[ea+1]);ea+=
U;var ta=Y[ea];let Da=Y[ea+1],Ka=ta,Fa=Da;var wa=Da/ta;ka+=U;H(u.coords,Y,ka,ea,Ka,Fa);ea+=U;for(let Ja=2;Ja<Aa;Ja++){ta=Y[ea];Da=Y[ea+1];const Ga=Da/ta,Ha=wa===Ga||!isFinite(wa)&&!isFinite(Ga);wa=Ha&&isFinite(Ga)?0<=wa&&0<=Ga||0>=wa&&0>=Ga:0<=Fa&&0<=Da||0>=Fa&&0>=Da;Ha&&wa?(Ka+=ta,Fa+=Da):(Ka=ta,Fa=Da,ka+=U);H(u.coords,Y,ka,ea,Ka,Fa);ea+=U;wa=Ga}ka+=U;ta=(ka-ua)/U;ta>=T&&(u.lengths[ma]=ta,ua=ka,ma++)}u.coords.length>ua&&(u.coords.length=ua);u.lengths.length>ma&&(u.lengths.length=ma);return u.coords.length&&
u.lengths.length?u:null};l.removeZMValues=function(u,H,T,U,ea,Y){const ia=v(T,U);T=x(T,U,ea,Y);U=H.coords;u.coords.length=0;u.lengths.length=0;u.lengths.push(...H.lengths);for(H=0;H<U.length;H+=ia)T(u.coords,U,u.coords.length,H,U[H],U[H+1]);return u};l.unquantizeOptimizedFeatureSet=function(u){const {transform:H,features:T,hasM:U,hasZ:ea}=u;if(!H)return u;for(const Y of T)Y.geometry&&za(Y.geometry,Y.geometry,U,ea,H),Y.centroid&&za(Y.centroid,Y.centroid,U,ea,H);u.transform=null;return u};l.unquantizeOptimizedGeometry=
za;l.unquantizeX=V;l.unquantizeY=z;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/graphics/OptimizedFeature":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(l){return function(){function h(F=null,I={},q,E){this.geohashY=this.geohashX=this.displayId=0;this.geometry=F;I&&(this.attributes=I);q&&(this.centroid=q);null!=E&&(this.objectId=E)}h.prototype.weakClone=function(){const F=new h(this.geometry,this.attributes,this.centroid,this.objectId);F.displayId=this.displayId;
F.geohashX=this.geohashX;F.geohashY=this.geohashY;return F};l._createClass(h,[{key:"hasGeometry",get:function(){return!(!this.geometry||!this.geometry.coords||!this.geometry.coords.length)}}]);return h}()})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(function(){return function(){function l(){this.spatialReference=this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=null;this.hasM=this.hasZ=!1;this.features=[];this.fields=[];
this.transform=null;this.exceededTransferLimit=!1;this.queryGeometry=this.queryGeometryType=this.uniqueIdField=null}l.prototype.weakClone=function(){const h=new l;h.objectIdFieldName=this.objectIdFieldName;h.globalIdFieldName=this.globalIdFieldName;h.geohashFieldName=this.geohashFieldName;h.geometryProperties=this.geometryProperties;h.geometryType=this.geometryType;h.spatialReference=this.spatialReference;h.hasZ=this.hasZ;h.hasM=this.hasM;h.features=this.features;h.fields=this.fields;h.transform=
this.transform;h.exceededTransferLimit=this.exceededTransferLimit;h.uniqueIdField=this.uniqueIdField;h.queryGeometry=this.queryGeometry;h.queryGeometryType=this.queryGeometryType;return h};return l}()})},"esri/layers/graphics/OptimizedGeometry":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(l){return function(){function h(I=[],q=[],E=!1){this.lengths=null!=I?I:[];this.coords=null!=q?q:[];this.hasIndeterminateRingOrder=E}var F=h.prototype;F.forEachVertex=function(I){let q=0;
this.lengths.length||I(this.coords[0],this.coords[1]);for(let E=0;E<this.lengths.length;E++){const m=this.lengths[E];for(let v=0;v<m;v++)I(this.coords[2*(v+q)],this.coords[2*(v+q)+1]);q+=m}};F.clone=function(){return new h(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)};l._createClass(h,[{key:"isPoint",get:function(){return 0===this.lengths.length}}]);return h}()})},"esri/geometry/support/aaBoundingBox":function(){define(["exports","../../core/maybe","../Extent","./aaBoundingRect"],
function(l,h,F,I){function q(b=y){return[b[0],b[1],b[2],b[3],b[4],b[5]]}function E(b,r,G,L,J,O,P=q()){P[0]=b;P[1]=r;P[2]=G;P[3]=L;P[4]=J;P[5]=O;return P}function m(b){return b[0]>=b[3]?0:b[3]-b[0]}function v(b){return b[1]>=b[4]?0:b[4]-b[1]}function x(b){return b[2]>=b[5]?0:b[5]-b[2]}function B(b,r){return Math.max(r[0],b[0])<=Math.min(r[3],b[3])&&Math.max(r[1],b[1])<=Math.min(r[4],b[4])&&Math.max(r[2],b[2])<=Math.min(r[5],b[5])}function Q(b,r){b[0]=r[0];b[1]=r[1];b[2]=r[2];b[3]=r[3];b[4]=r[4];b[5]=
r[5];return b}function V(b){return 6===b.length}const z=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity],y=[0,0,0,0,0,0],C=q();l.NEGATIVE_INFINITY=z;l.POSITIVE_INFINITY=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];l.ZERO=y;l.allFinite=function(b){for(let r=0;6>r;r++)if(!isFinite(b[r]))return!1;return!0};l.center=function(b,r=[0,0,0]){r[0]=b[0]+m(b)/2;r[1]=b[1]+v(b)/2;r[2]=b[2]+x(b)/2;return r};l.contains=function(b,r){return r[0]>=b[0]&&r[1]>=b[1]&&r[2]>=b[2]&&r[3]<=b[3]&&
r[4]<=b[4]&&r[5]<=b[5]};l.containsPoint=function(b,r){return r[0]>=b[0]&&r[1]>=b[1]&&r[2]>=b[2]&&r[0]<=b[3]&&r[1]<=b[4]&&r[2]<=b[5]};l.containsPointWithMargin=function(b,r,G){return r[0]>=b[0]-G&&r[1]>=b[1]-G&&r[2]>=b[2]-G&&r[0]<=b[3]+G&&r[1]<=b[4]+G&&r[2]<=b[5]+G};l.create=q;l.depth=v;l.diameter=function(b){const r=m(b),G=x(b);b=v(b);return Math.sqrt(r*r+G*G+b*b)};l.empty=function(b){return b?Q(b,z):q(z)};l.equals=function(b,r,G){if(h.isNone(b)||h.isNone(r))return b===r;if(!V(b)||!V(r))return!1;
if(G)for(let L=0;L<b.length;L++){if(!G(b[L],r[L]))return!1}else for(G=0;G<b.length;G++)if(b[G]!==r[G])return!1;return!0};l.expandWithAABB=function(b,r){b[0]=Math.min(b[0],r[0]);b[1]=Math.min(b[1],r[1]);b[2]=Math.min(b[2],r[2]);b[3]=Math.max(b[3],r[3]);b[4]=Math.max(b[4],r[4]);b[5]=Math.max(b[5],r[5])};l.expandWithBuffer=function(b,r,G=0,L=r.length/3){let J=b[0],O=b[1],P=b[2],X=b[3],ca=b[4],S=b[5];for(let D=0;D<L;D++)J=Math.min(J,r[G+3*D]),O=Math.min(O,r[G+3*D+1]),P=Math.min(P,r[G+3*D+2]),X=Math.max(X,
r[G+3*D]),ca=Math.max(ca,r[G+3*D+1]),S=Math.max(S,r[G+3*D+2]);b[0]=J;b[1]=O;b[2]=P;b[3]=X;b[4]=ca;b[5]=S};l.expandWithNestedArray=function(b,r,G){const L=r.length;let J=b[0],O=b[1],P=b[2],X=b[3],ca=b[4],S=b[5];if(G)for(G=0;G<L;G++){var D=r[G];J=Math.min(J,D[0]);O=Math.min(O,D[1]);P=Math.min(P,D[2]);X=Math.max(X,D[0]);ca=Math.max(ca,D[1]);S=Math.max(S,D[2])}else for(G=0;G<L;G++)D=r[G],J=Math.min(J,D[0]),O=Math.min(O,D[1]),X=Math.max(X,D[0]),ca=Math.max(ca,D[1]);b[0]=J;b[1]=O;b[2]=P;b[3]=X;b[4]=ca;
b[5]=S};l.expandWithOffset=function(b,r,G,L){b[0]=Math.min(b[0],b[0]+r);b[3]=Math.max(b[3],b[3]+r);b[1]=Math.min(b[1],b[1]+G);b[4]=Math.max(b[4],b[4]+G);b[2]=Math.min(b[2],b[2]+L);b[5]=Math.max(b[5],b[5]+L)};l.expandWithRect=function(b,r){b[0]=Math.min(b[0],r[0]);b[1]=Math.min(b[1],r[1]);b[3]=Math.max(b[3],r[2]);b[4]=Math.max(b[4],r[3])};l.expandWithVec3=function(b,r){b[0]=Math.min(b[0],r[0]);b[1]=Math.min(b[1],r[1]);b[2]=Math.min(b[2],r[2]);b[3]=Math.max(b[3],r[0]);b[4]=Math.max(b[4],r[1]);b[5]=
Math.max(b[5],r[2])};l.fromExtent=function(b,r=q()){r[0]=b.xmin;r[1]=b.ymin;r[2]=b.zmin;r[3]=b.xmax;r[4]=b.ymax;r[5]=b.zmax;return r};l.fromMinMax=function(b,r,G=q()){G[0]=b[0];G[1]=b[1];G[2]=b[2];G[3]=r[0];G[4]=r[1];G[5]=r[2];return G};l.fromRect=function(b,r){b[0]=r[0];b[1]=r[1];b[2]=Number.NEGATIVE_INFINITY;b[3]=r[2];b[4]=r[3];b[5]=Number.POSITIVE_INFINITY;return b};l.fromValues=E;l.getMax=function(b,r){r[0]=b[3];r[1]=b[4];r[2]=b[5];return r};l.getMin=function(b,r){r[0]=b[0];r[1]=b[1];r[2]=b[2];
return r};l.height=x;l.intersects=B;l.intersectsClippingArea=function(b,r){return h.isNone(r)?!0:B(b,r)};l.is=V;l.isPoint=function(b){return 0===m(b)&&0===v(b)&&0===x(b)};l.maximumDimension=function(b){return Math.max(m(b),x(b),v(b))};l.offset=function(b,r,G,L,J=b){J[0]=b[0]+r;J[1]=b[1]+G;J[2]=b[2]+L;J[3]=b[3]+r;J[4]=b[4]+G;J[5]=b[5]+L;return J};l.scale=function(b,r,G=b){const L=b[0]+m(b)/2,J=b[1]+v(b)/2,O=b[2]+x(b)/2;G[0]=L+(b[0]-L)*r;G[1]=J+(b[1]-J)*r;G[2]=O+(b[2]-O)*r;G[3]=L+(b[3]-L)*r;G[4]=J+
(b[4]-J)*r;G[5]=O+(b[5]-O)*r;return G};l.set=Q;l.setMax=function(b,r,G=b){G[3]=r[0];G[4]=r[1];G[5]=r[2];G!==b&&(G[0]=b[0],G[1]=b[1],G[2]=b[2]);return b};l.setMin=function(b,r,G=b){G[0]=r[0];G[1]=r[1];G[2]=r[2];G!==b&&(G[3]=b[3],G[4]=b[4],G[5]=b[5]);return G};l.size=function(b,r=[0,0,0]){r[0]=m(b);r[1]=v(b);r[2]=x(b);return r};l.toExtent=function(b,r){return isFinite(b[2])||isFinite(b[5])?new F({xmin:b[0],xmax:b[3],ymin:b[1],ymax:b[4],zmin:b[2],zmax:b[5],spatialReference:r}):new F({xmin:b[0],xmax:b[3],
ymin:b[1],ymax:b[4],spatialReference:r})};l.toRect=function(b,r){r||(r=I.create());r[0]=b[0];r[1]=b[1];r[2]=b[3];r[3]=b[4];return r};l.width=m;l.wrap=function(b,r,G,L,J,O){return E(b,r,G,L,J,O,C)};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/graphics/data/BoundsStore":function(){define(["exports","../../../core/has","../../../core/libs/rbush/PooledRBush"],function(l,h,F){function I(m,v,x){q.minX=v[0];q.minY=v[1];q.maxX=v[2];q.maxY=v[3];m.search(q,x)}const q={minX:0,minY:0,maxX:0,
maxY:0};let E=function(){function m(){this._indexInvalid=!1;this._boundsToLoad=[];this._boundsById=new Map;this._idByBounds=new Map;this._index=new F.PooledRBush(9,h("csp-restrictions")?x=>({minX:x[0],minY:x[1],maxX:x[2],maxY:x[3]}):["[0]","[1]","[2]","[3]"]);this._loadIndex=()=>{if(this._indexInvalid){const x=Array(this._idByBounds.size);let B=0;this._idByBounds.forEach((Q,V)=>{x[B++]=V});this._indexInvalid=!1;this._index.clear();this._index.load(x)}else this._boundsToLoad.length&&(this._index.load(this._boundsToLoad.filter(x=>
this._idByBounds.has(x))),this._boundsToLoad.length=0)}}var v=m.prototype;v.clear=function(){this._indexInvalid=!1;this._boundsToLoad.length=0;this._boundsById.clear();this._idByBounds.clear();this._index.clear()};v.delete=function(x){const B=this._boundsById.get(x);this._boundsById.delete(x);B&&(this._idByBounds.delete(B),this._indexInvalid||this._index.remove(B))};v.forEachInBounds=function(x,B){this._loadIndex();I(this._index,x,Q=>B(this._idByBounds.get(Q)))};v.get=function(x){return this._boundsById.get(x)};
v.has=function(x){return this._boundsById.has(x)};v.invalidateIndex=function(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)};v.set=function(x,B){if(!this._indexInvalid){const Q=this._boundsById.get(x);Q&&(this._index.remove(Q),this._idByBounds.delete(Q))}this._boundsById.set(x,B);B&&(this._idByBounds.set(B,x),this._indexInvalid||(this._boundsToLoad.push(B),5E4<this._boundsToLoad.length&&this._loadIndex()))};return m}();l.BoundsStore=E;Object.defineProperty(l,"__esModule",
{value:!0})})},"esri/core/libs/rbush/PooledRBush":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../maybe ../../arrayUtils ../../PooledArray ../../../chunks/quickselect".split(" "),function(l,h,F,I,q,E){function m(S,D){v(S,0,S.children.length,D,S)}function v(S,D,k,p,n){n||(n=new X([]));n.minX=Infinity;n.minY=Infinity;n.maxX=-Infinity;n.maxY=-Infinity;for(let e=D,g;e<k;e++)g=S.children[e],x(n,S.leaf?p(g):g);return n}function x(S,D){S.minX=Math.min(S.minX,D.minX);S.minY=Math.min(S.minY,
D.minY);S.maxX=Math.max(S.maxX,D.maxX);S.maxY=Math.max(S.maxY,D.maxY)}function B(S,D){return S.minX-D.minX}function Q(S,D){return S.minY-D.minY}function V(S){return(S.maxX-S.minX)*(S.maxY-S.minY)}function z(S){return S.maxX-S.minX+(S.maxY-S.minY)}function y(S,D){return S.minX<=D.minX&&S.minY<=D.minY&&D.maxX<=S.maxX&&D.maxY<=S.maxY}function C(S,D){return D.minX<=S.maxX&&D.minY<=S.maxY&&D.maxX>=S.minX&&D.maxY>=S.minY}function b(S,D,k,p,n){for(D=[D,k];D.length;){k=F.assumeNonNull(D.pop());const e=F.assumeNonNull(D.pop());
if(k-e<=p)continue;const g=e+Math.ceil((k-e)/p/2)*p;E.quickselect(S,g,e,k,n);D.push(e,g,g,k)}}let r=function(){function S(k=9,p){this.compareMinX=B;this.compareMinY=Q;this.toBBox=function(n){return n};this._maxEntries=Math.max(4,k||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));p&&("function"===typeof p?this.toBBox=p:this._initFormat(p));this.clear()}var D=S.prototype;D.destroy=function(){this.clear();G.prune();L.prune();J.prune();O.prune()};D.all=function(k){this._all(this.data,k)};
D.search=function(k,p){let n=this.data;const e=this.toBBox;if(C(k,n))for(G.clear();n;){for(let g=0,f=n.children.length;g<f;g++){const A=n.children[g],R=n.leaf?e(A):A;C(k,R)&&(n.leaf?p(A):y(k,R)?this._all(A,p):G.push(A))}n=G.pop()}};D.collides=function(k){let p=this.data;const n=this.toBBox;if(!C(k,p))return!1;for(G.clear();p;){for(let e=0,g=p.children.length;e<g;e++){const f=p.children[e],A=p.leaf?n(f):f;if(C(k,A)){if(p.leaf||y(k,A))return!0;G.push(f)}}p=G.pop()}return!1};D.load=function(k){if(!k.length)return this;
if(k.length<this._minEntries){for(let p=0,n=k.length;p<n;p++)this.insert(k[p]);return this}k=this._build(k.slice(0,k.length),0,k.length-1,0);if(this.data.children.length)if(this.data.height===k.height)this._splitRoot(this.data,k);else{if(this.data.height<k.height){const p=this.data;this.data=k;k=p}this._insert(k,this.data.height-k.height-1,!0)}else this.data=k;return this};D.insert=function(k){k&&this._insert(k,this.data.height-1);return this};D.clear=function(){this.data=new X([]);return this};D.remove=
function(k){if(!k)return this;let p=this.data,n=null,e=0,g=!1,f;const A=this.toBBox(k);J.clear();for(O.clear();p||0<J.length;){if(!p){var R;p=F.assumeNonNull(J.pop());n=J.data[J.length-1];e=null!=(R=O.pop())?R:0;g=!0}if(p.leaf&&(f=I.indexOf(p.children,k,p.children.length,p.indexHint),-1!==f)){p.children.splice(f,1);J.push(p);this._condense(J);break}g||p.leaf||!y(p,A)?n?(e++,p=n.children[e],g=!1):p=null:(J.push(p),O.push(e),e=0,n=p,p=p.children[0])}return this};D.toJSON=function(){return this.data};
D.fromJSON=function(k){this.data=k;return this};D._all=function(k,p){for(L.clear();k;){var n;if(!0===k.leaf)for(const e of k.children)p(e);else L.pushArray(k.children);k=null!=(n=L.pop())?n:null}};D._build=function(k,p,n,e){var g=n-p+1,f=this._maxEntries;if(g<=f)return k=new X(k.slice(p,n+1)),m(k,this.toBBox),k;e||(e=Math.ceil(Math.log(g)/Math.log(f)),f=Math.ceil(g/f**(e-1)));const A=new ca([]);A.height=e;g=Math.ceil(g/f);f=g*Math.ceil(Math.sqrt(f));for(b(k,p,n,f,this.compareMinX);p<=n;p+=f){const R=
Math.min(p+f-1,n);b(k,p,R,g,this.compareMinY);for(let N=p;N<=R;N+=g)A.children.push(this._build(k,N,Math.min(N+g-1,R),e-1))}m(A,this.toBBox);return A};D._chooseSubtree=function(k,p,n,e){for(;;){e.push(p);if(!0===p.leaf||e.length-1===n)break;let g=Infinity,f=Infinity,A=void 0;for(let R=0,N=p.children.length;R<N;R++){const ba=p.children[R],la=V(ba),na=(Math.max(ba.maxX,k.maxX)-Math.min(ba.minX,k.minX))*(Math.max(ba.maxY,k.maxY)-Math.min(ba.minY,k.minY))-la;na<f?(f=na,g=la<g?la:g,A=ba):na===f&&la<g&&
(g=la,A=ba)}p=A||p.children[0]}return p};D._insert=function(k,p,n){var e=this.toBBox;n=n?k:e(k);J.clear();e=this._chooseSubtree(n,this.data,p,J);e.children.push(k);for(x(e,n);0<=p;)if(J.data[p].children.length>this._maxEntries)this._split(J,p),p--;else break;this._adjustParentBBoxes(n,J,p)};D._split=function(k,p){const n=k.data[p];var e=n.children.length;const g=this._minEntries;this._chooseSplitAxis(n,g,e);(e=this._chooseSplitIndex(n,g,e))?(e=n.children.splice(e,n.children.length-e),e=n.leaf?new X(e):
new ca(e),e.height=n.height,m(n,this.toBBox),m(e,this.toBBox),p?k.data[p-1].children.push(e):this._splitRoot(n,e)):console.log("  Error: assertion failed at PooledRBush._split: no valid split index")};D._splitRoot=function(k,p){this.data=new ca([k,p]);this.data.height=k.height+1;m(this.data,this.toBBox)};D._chooseSplitIndex=function(k,p,n){let e,g,f=void 0;e=g=Infinity;for(let R=p;R<=n-p;R++){var A=v(k,0,R,this.toBBox);const N=v(k,R,n,this.toBBox),ba=Math.max(0,Math.min(A.maxX,N.maxX)-Math.max(A.minX,
N.minX))*Math.max(0,Math.min(A.maxY,N.maxY)-Math.max(A.minY,N.minY));A=V(A)+V(N);ba<e?(e=ba,f=R,g=A<g?A:g):ba===e&&A<g&&(g=A,f=R)}return f};D._chooseSplitAxis=function(k,p,n){const e=k.leaf?this.compareMinX:B,g=k.leaf?this.compareMinY:Q,f=this._allDistMargin(k,p,n,e);p=this._allDistMargin(k,p,n,g);f<p&&k.children.sort(e)};D._allDistMargin=function(k,p,n,e){k.children.sort(e);e=this.toBBox;var g=v(k,0,p,e);const f=v(k,n-p,n,e);let A=z(g)+z(f);for(let R=p;R<n-p;R++){const N=k.children[R];x(g,k.leaf?
e(N):N);A+=z(g)}for(n=n-p-1;n>=p;n--)g=k.children[n],x(f,k.leaf?e(g):g),A+=z(f);return A};D._adjustParentBBoxes=function(k,p,n){for(;0<=n;n--)x(p.data[n],k)};D._condense=function(k){for(let p=k.length-1;0<=p;p--){const n=k.data[p];if(0===n.children.length)if(0<p){const e=k.data[p-1],g=e.children;g.splice(I.indexOf(g,n,g.length,e.indexHint),1)}else this.clear();else m(n,this.toBBox)}};D._initFormat=function(k){const p=["return a"," - b",";"];this.compareMinX=new Function("a","b",p.join(k[0]));this.compareMinY=
new Function("a","b",p.join(k[1]));this.toBBox=new Function("a","return {minX: a"+k[0]+", minY: a"+k[1]+", maxX: a"+k[2]+", maxY: a"+k[3]+"};")};return S}();const G=new q,L=new q,J=new q,O=new q({deallocator:void 0});q=function(){this.minY=this.minX=Infinity;this.maxY=this.maxX=-Infinity};let P=function(S){function D(){var k=S.apply(this,arguments)||this;k.height=1;k.indexHint=new I.PositionHint;return k}h._inheritsLoose(D,S);return D}(q),X=function(S){function D(k){var p=S.call(this)||this;p.children=
k;p.leaf=!0;return p}h._inheritsLoose(D,S);return D}(P),ca=function(S){function D(k){var p=S.call(this)||this;p.children=k;p.leaf=!1;return p}h._inheritsLoose(D,S);return D}(P);l.BBox=q;l.PooledRBush=r;l.default=r;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/chunks/quickselect":function(){define(["exports","./_commonjsHelpers"],function(l,h){h=h.createCommonjsModule(function(F){(function(I){I=I();void 0!==I&&(F.exports=I)})(function(){function I(m,v,x,B,Q){for(;B>x;){if(600<B-x){var V=
B-x+1,z=v-x+1,y=Math.log(V),C=.5*Math.exp(2*y/3);y=.5*Math.sqrt(y*C*(V-C)/V)*(0>z-V/2?-1:1);I(m,v,Math.max(x,Math.floor(v-z*C/V+y)),Math.min(B,Math.floor(v+(V-z)*C/V+y)),Q)}V=m[v];z=x;C=B;q(m,x,v);for(0<Q(m[B],V)&&q(m,x,B);z<C;){q(m,z,C);z++;for(C--;0>Q(m[z],V);)z++;for(;0<Q(m[C],V);)C--}0===Q(m[x],V)?q(m,x,C):(C++,q(m,C,B));C<=v&&(x=C+1);v<=C&&(B=C-1)}}function q(m,v,x){var B=m[v];m[v]=m[x];m[x]=B}function E(m,v){return m<v?-1:m>v?1:0}return function(m,v,x,B,Q){I(m,v,x||0,B||m.length-1,Q||E)}})});
l.quickselect=h})},"esri/layers/graphics/data/optimizedFeatureQueryEngineAdapter":function(){define(["exports","../OptimizedFeature","../OptimizedGeometry","../centroid"],function(l,h,F,I){const q={getObjectId(E){return E.objectId},getAttributes(E){return E.attributes},getAttribute(E,m){return E.attributes[m]},cloneWithGeometry(E,m){return new h(m,E.attributes,null,E.objectId)},getGeometry(E){return E.geometry},getCentroid(E,m){E.centroid||(E.centroid=I.getCentroidOptimizedGeometry(new F,E.geometry,
m.hasZ,m.hasM));return E.centroid}};l.default=q;l.optimizedFeatureQueryEngineAdapter=q;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/graphics/centroid":function(){define(["exports"],function(l){function h(I,q,E,m,v,x,B=1){x=v?x?4:3:x?3:2;let Q=E,V=E+x,z=0,y=0,C=E=0,b=0;for(let r=0,G=m-1;r<G;r++,Q+=x,V+=x){m=q[Q];const L=q[Q+1],J=q[Q+2],O=q[V],P=q[V+1],X=q[V+2];let ca=m*P-O*L;C+=ca;z+=(m+O)*ca;y+=(L+P)*ca;v&&(ca=m*X-O*J,E+=(J+X)*ca,b+=ca);m<I[0]&&(I[0]=m);m>I[1]&&(I[1]=m);L<I[2]&&
(I[2]=L);L>I[3]&&(I[3]=L);v&&(J<I[4]&&(I[4]=J),J>I[5]&&(I[5]=J))}0<C*B&&(C*=-1);0<b*B&&(b*=-1);if(!C)return null;I=[z,y,.5*C];v&&(I[3]=E,I[4]=.5*b);return I}function F(I,q,E,m,v){v=m?v?4:3:v?3:2;let x=q,B=q+v,Q=0,V=0,z=0,y=0;for(let G=0,L=E-1;G<L;G++,x+=v,B+=v){var C=I[x];const J=I[x+1],O=I[x+2],P=I[B],X=I[B+1],ca=I[B+2];if(m){{var b=P-C;var r=X-J;const S=ca-O;b=Math.sqrt(b*b+r*r+S*S)}}else b=P-C,r=X-J,b=Math.sqrt(b*b+r*r);b&&(Q+=b,m?(C=[C+.5*(P-C),J+.5*(X-J),O+.5*(ca-O)],V+=b*C[0],z+=b*C[1],y+=b*
C[2]):(C=[C+.5*(P-C),J+.5*(X-J)],V+=b*C[0],z+=b*C[1]))}return 0<Q?m?[V/Q,z/Q,y/Q]:[V/Q,z/Q]:0<E?m?[I[q],I[q+1],I[q+2]]:[I[q],I[q+1]]:null}l.getCentroidOptimizedGeometry=function(I,q,E,m,v){if(!q||!q.lengths.length)return null;const x="upperLeft"===(null==v?void 0:v.originPosition)?-1:1;I.lengths.length&&(I.lengths.length=0);I.coords.length&&(I.coords.length=0);v=I.coords;const B=[],Q=E?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,
Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:V,coords:z}=q,y=E?m?4:3:m?3:2;let C=0;for(var b of V){const r=h(Q,z,C,b,E,m,x);r&&B.push(r);C+=b*y}B.sort((r,G)=>{let L=x*r[2]-x*G[2];0===L&&E&&(L=r[4]-G[4]);return L});B.length&&(b=6*B[0][2],v[0]=B[0][0]/b,v[1]=B[0][1]/b,E&&(b=6*B[0][4],v[2]=0!==b?B[0][3]/b:0),v[0]<Q[0]||v[0]>Q[1]||v[1]<Q[2]||v[1]>Q[3]||E&&(v[2]<Q[4]||v[2]>Q[5]))&&(v.length=0);if(!v.length)if(q=
q.lengths[0]?F(z,0,V[0],E,m):null)v[0]=q[0],v[1]=q[1],E&&2<q.length&&(v[2]=q[2]);else return null;return I};l.lineCentroid=F;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/graphics/data/QueryEngine":function(){define("exports ../../../chunks/_rollupPluginBabelHelpers ../../../core/lang ../../../core/maybe ../../../core/Error ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/boundsUtils ../../../geometry/support/jsonUtils ../../../core/unitUtils ../../../geometry/support/normalizeUtils ../../../core/MemCache ../../../geometry/support/aaBoundingRect ../../support/PromiseQueue ../../support/FieldsIndex ./QueryEngineCapabilities ../../../geometry/support/aaBoundingBox ./projectionSupport ./attributeSupport ./utils ./spatialQuerySupport ./timeSupport ./QueryEngineResult".split(" "),
function(l,h,F,I,q,E,m,v,x,B,Q,V,z,y,C,b,r,G,L,J,O,P){function X(e){return e.every(g=>"exceedslimit"!==g.statisticType)}const ca=new Set,S=new Q.MemCacheStorage(2E6);let D=0,k=function(){function e(f){this.capabilities={query:C.queryCapabilities};this.geometryType=f.geometryType;this.hasM=f.hasM;this.hasZ=f.hasZ;this.objectIdField=f.objectIdField;this.spatialReference=f.spatialReference;this.definitionExpression=f.definitionExpression;this.featureStore=f.featureStore;this.aggregateAdapter=f.aggregateAdapter;
this._changeHandle=this.featureStore.events.on("changed",()=>this.clearCache());this.timeInfo=f.timeInfo;f.cacheSpatialQueries&&(this._geometryQueryCache=new Q.MemCache(D++ +"$$",S));this.fieldsIndex=new y(f.fields);f.scheduler&&f.task&&(this._frameQueue=new z,this._frameTask=f.scheduler.registerTask(f.task,A=>this._update(A),()=>0<this._frameQueue.length))}var g=e.prototype;g.destroy=function(){this._frameTask&&(this._frameTask.remove(),this._frameTask=null,this._frameQueue.cancelAll(),this._frameQueue=
null);this.clearCache();this._geometryQueryCache&&this._geometryQueryCache.destroy();this._changeHandle&&(this._changeHandle.remove(),this._changeHandle=null);this.fieldsIndex.destroy()};g.clearCache=function(){this._geometryQueryCache&&this._geometryQueryCache.clear();this._timeExtent=this._allItems=null};g.executeQuery=async function(f={},A){let R=F.clone(f),N;try{R=await this._schedule(()=>L.normalizeQuery(R,this.definitionExpression,this.spatialReference),A),R=await this._reschedule(()=>this._checkQuerySupport(R),
A),N=await this._reschedule(()=>this._executeGeometryQuery(R,A),A),N=await this._reschedule(()=>N.executeAggregateIdsQuery(R),A),N=await this._reschedule(()=>N.executeObjectIdsQuery(R),A),N=await this._reschedule(()=>N.executeTimeQuery(R),A),N=await this._reschedule(()=>N.executeAttributesQuery(R),A)}catch(ba){if(ba!==L.QUERY_ENGINE_EMPTY_RESULT)throw ba;N=new P([],null,this)}return N.createQueryResponse(R)};g.executeQueryForCount=async function(f={},A){let R=F.clone(f),N;R.returnGeometry=!1;R.returnCentroid=
!1;R.outSR=null;try{R=await this._schedule(()=>L.normalizeQuery(R,this.definitionExpression,this.spatialReference),A),R=await this._reschedule(()=>this._checkQuerySupport(R),A),N=await this._reschedule(()=>this._executeGeometryQuery(R,A),A),N=await this._reschedule(()=>N.executeAggregateIdsQuery(R),A),N=await this._reschedule(()=>N.executeObjectIdsQuery(R),A),N=await this._reschedule(()=>N.executeTimeQuery(R),A),N=await this._reschedule(()=>N.executeAttributesQuery(R),A)}catch(ba){if(ba!==L.QUERY_ENGINE_EMPTY_RESULT)throw ba;
return 0}return N.createQueryResponseForCount(R)};g.executeQueryForExtent=async function(f={},A){let R=F.clone(f),N;f=R.outSR;try{R=await this._schedule(()=>L.normalizeQuery(R,this.definitionExpression,this.spatialReference),A);R=await this._reschedule(()=>this._checkQuerySupport(R),A);R.returnGeometry=!0;R.returnCentroid=!1;R.outSR=null;N=await this._reschedule(()=>this._executeGeometryQuery(R,A),A);N=await this._reschedule(()=>N.executeAggregateIdsQuery(R),A);N=await this._reschedule(()=>N.executeObjectIdsQuery(R),
A);N=await this._reschedule(()=>N.executeTimeQuery(R),A);N=await this._reschedule(()=>N.executeAttributesQuery(R),A);const ba=N.size;if(!ba)return{count:ba,extent:null};b.set(n,b.NEGATIVE_INFINITY);this.featureStore.forEachBounds(N.items,pa=>b.expandWithAABB(n,pa),p);const la={xmin:n[0],ymin:n[1],xmax:n[3],ymax:n[4],spatialReference:L.cleanFromGeometryEngine(this.spatialReference)};this.hasZ&&isFinite(n[2])&&isFinite(n[5])&&(la.zmin=n[2],la.zmax=n[5]);const na=r.project(la,N.spatialReference,f);na.spatialReference=
L.cleanFromGeometryEngine(f||this.spatialReference);if(0===na.xmax-na.xmin){const pa=x.getMetersPerUnitForSR(na.spatialReference);na.xmin-=pa;na.xmax+=pa}if(0===na.ymax-na.ymin){const pa=x.getMetersPerUnitForSR(na.spatialReference);na.ymin-=pa;na.ymax+=pa}if(this.hasZ&&null!=na.zmin&&null!=na.zmax&&0===na.zmax-na.zmin){const pa=x.getMetersPerUnitForSR(na.spatialReference);na.zmin-=pa;na.zmax+=pa}return{count:ba,extent:na}}catch(ba){if(ba===L.QUERY_ENGINE_EMPTY_RESULT)return{count:0,extent:null};throw ba;
}};g.executeQueryForIds=async function(f={},A){return this.executeQueryForIdSet(f,A).then(R=>Array.from(R))};g.executeQueryForIdSet=async function(f={},A){let R=F.clone(f),N;R.returnGeometry=!1;R.returnCentroid=!1;R.outSR=null;try{R=await this._schedule(()=>L.normalizeQuery(R,this.definitionExpression,this.spatialReference),A);R=await this._reschedule(()=>this._checkQuerySupport(R),A);N=await this._reschedule(()=>this._executeGeometryQuery(R,A),A);N=await this._reschedule(()=>N.executeAggregateIdsQuery(R),
A);N=await this._reschedule(()=>N.executeObjectIdsQuery(R),A);N=await this._reschedule(()=>N.executeTimeQuery(R),A);N=await this._reschedule(()=>N.executeAttributesQuery(R),A);const ba=N.items,la=new Set;await this._reschedule(()=>{for(const na of ba)la.add(N.featureAdapter.getObjectId(na))},A);return la}catch(ba){if(ba===L.QUERY_ENGINE_EMPTY_RESULT)return new Set;throw ba;}};g.executeQueryForSnapping=async function(f,A){const {point:R,distance:N,types:ba}=f;if(0===ba)return{candidates:[]};const la=
await this._reschedule(()=>this._checkQuerySupport(f.query),A),na=!E.equals(R.spatialReference,this.spatialReference);na&&await r.checkProjectionSupport(R.spatialReference,this.spatialReference);var pa="number"===typeof N?N:N.x,za="number"===typeof N?N:N.y;pa={xmin:R.x-pa,xmax:R.x+pa,ymin:R.y-za,ymax:R.y+za,spatialReference:R.spatialReference};pa=na?r.project(pa,this.spatialReference):pa;if(!pa)return{candidates:[]};za=(await B.normalizeCentralMeridian(v.fromJSON(R),null,{signal:A}))[0];const Ia=
(await B.normalizeCentralMeridian(v.fromJSON(pa),null,{signal:A}))[0];if(I.isNone(za)||I.isNone(Ia))return{candidates:[]};let da=new P(this._searchFeatures(this._getQueryBBoxes(Ia.toJSON())),null,this);da=await this._reschedule(()=>da.executeObjectIdsQuery(la),A);da=await this._reschedule(()=>da.executeTimeQuery(la),A);da=await this._reschedule(()=>da.executeAttributesQuery(la),A);A=za.toJSON();A=na?r.project(A,this.spatialReference):A;return da.createSnappingResponse({...f,point:A,distance:na?Math.max(pa.xmax-
pa.xmin,pa.ymax-pa.ymin)/2:N},R.spatialReference)};g.executeQueryForLatestObservations=async function(f={},A){if(!this.timeInfo||!this.timeInfo.trackIdField)throw new q("feature-store:unsupported-query","Missing timeInfo or timeInfo.trackIdField",{query:f,timeInfo:this.timeInfo});let R=F.clone(f),N;try{R=await this._schedule(()=>L.normalizeQuery(R,this.definitionExpression,this.spatialReference),A),R=await this._reschedule(()=>this._checkQuerySupport(R),A),N=await this._reschedule(()=>this._executeGeometryQuery(R,
A),A),N=await this._reschedule(()=>N.executeAggregateIdsQuery(R),A),N=await this._reschedule(()=>N.executeObjectIdsQuery(R),A),N=await this._reschedule(()=>N.executeTimeQuery(R),A),N=await this._reschedule(()=>N.executeAttributesQuery(R),A),N=await this._reschedule(()=>N.filterLatest(),A)}catch(ba){if(ba!==L.QUERY_ENGINE_EMPTY_RESULT)throw ba;N=new P([],null,this)}return N.createQueryResponse(R)};g._schedule=async function(f,A){return this._frameQueue?this._frameQueue.push(f,A):f()};g._reschedule=
async function(f,A){return this._frameQueue?this._frameQueue.unshift(f,A):f()};g._update=function(f){for(this._budget=f;!f.done&&this._frameQueue&&this._frameQueue.process();)f.madeProgress();this._budget=null};g._getAll=function(){if(!this._allItems){const f=[];this.featureStore.forEach(A=>f.push(A));this._allItems=new P(f,null,this)}return this._allItems};g._executeGeometryQuery=async function(f,A){const {geometry:R,outSR:N,spatialRel:ba,returnGeometry:la,returnCentroid:na}=f,pa=la||na,za=E.isValid(N)&&
!E.equals(this.spatialReference,N),Ia=this._geometryQueryCache?za&&pa?JSON.stringify({geometry:R,spatialRelationship:ba,outSpatialReference:N}):JSON.stringify({geometry:R,spatialRelationship:ba}):null;if(Ia){var da=this._geometryQueryCache.get(Ia);if(!I.isUndefined(da))return da}da=async xa=>{if(za&&pa)return xa=await xa.project(N),Ia&&this._geometryQueryCache.put(Ia,xa,xa.size||1),xa;Ia&&this._geometryQueryCache.put(Ia,xa,xa.size||1);return xa};if(!R)return da(this._getAll());const ja=this.featureAdapter;
if("esriSpatialRelDisjoint"===ba){f=this._searchFeatures(this._getQueryBBoxes(R));if(!f.length)return da(this._getAll());let xa,c;const t=new Set;for(var qa of f)t.add(ja.getObjectId(qa));await this._reschedule(()=>{let W=0;xa=Array(t.size);this.featureStore.forEach(u=>xa[W++]=u);c=t},A);f=await this._reschedule(async()=>{const W=await J.getSpatialQueryOperator(ba,R,this.geometryType,this.hasZ,this.hasM);return new P(await this._runSpatialFilter(xa,u=>!c.has(ja.getObjectId(u))||W(ja.getGeometry(u)),
A),R,this)},A);return da(f)}qa=this._searchFeatures(this._getQueryBBoxes(R));if(!qa.length)return da=new P([],R,this),Ia&&this._geometryQueryCache.put(Ia,da,da.size||1),da;if(this._canExecuteSoloPass(R,f))return da(new P(qa,R,this));const Ca=await J.getSpatialQueryOperator(ba,R,this.geometryType,this.hasZ,this.hasM);f=await this._runSpatialFilter(qa,xa=>Ca(ja.getGeometry(xa)),A);return da(new P(f,R,this))};g._runSpatialFilter=async function(f,A,R){if(!A)return f;if(!this._budget)return f.filter(na=>
A(na));let N=0;const ba=[],la=async()=>{for(;N<f.length;){const na=f[N];A(na)&&ba.push(na);this._budget.done&&await this._reschedule(()=>la(),R);++N}};return this._reschedule(()=>la(),R).then(()=>ba)};g._canExecuteSoloPass=function(f,A){const {geometryType:R}=this;({spatialRel:A}=A);return J.canQueryWithRBush(f)&&("esriSpatialRelEnvelopeIntersects"===A||"esriGeometryPoint"===R&&("esriSpatialRelIntersects"===A||"esriSpatialRelContains"===A||"esriSpatialRelWithin"===A))};g._getQueryBBoxes=function(f){if(J.canQueryWithRBush(f)){if(v.isExtent(f))return[V.fromValues(f.xmin,
f.ymin,f.xmax,f.ymax)];if(v.isPolygon(f))return f.rings.map(A=>V.fromValues(Math.min(A[0][0],A[2][0]),Math.min(A[0][1],A[2][1]),Math.max(A[0][0],A[2][0]),Math.max(A[0][1],A[2][1])))}return[m.getBoundsXY(V.create(),f)]};g._searchFeatures=function(f){for(const N of f)this.featureStore.forEachInBounds(N,ba=>{ca.add(ba)});const A=Array(ca.size);let R=0;ca.forEach(N=>A[R++]=N);ca.clear();return A};g._checkQuerySupport=async function(f){if(0>f.distance||null!=f.geometryPrecision||f.multipatchOption||f.pixelSize||
f.relationParam||f.text)throw new q("feature-store:unsupported-query","Unsupported query options",{query:f});return Promise.all([this._checkAttributesQuerySupport(f),this._checkStatisticsQuerySupport(f),J.checkSpatialQuerySupport(f,this.geometryType,this.spatialReference),r.checkProjectionSupport(this.spatialReference,f.outSR)]).then(()=>f)};g._checkAttributesQuerySupport=function(f){const {outFields:A,orderByFields:R,returnDistinctValues:N,outStatistics:ba}=f,la=ba?ba.map(na=>na.outStatisticFieldName&&
na.outStatisticFieldName.toLowerCase()):[];if(R&&0<R.length){const na=R.map(pa=>{const za=pa.toLowerCase();return-1<za.indexOf(" asc")?za.split(" asc")[0]:-1<za.indexOf(" desc")?za.split(" desc")[0]:pa}).filter(pa=>-1===la.indexOf(pa));G.validateFields(this.fieldsIndex,na,"orderByFields contains missing fields")}if(A&&0<A.length)G.validateFields(this.fieldsIndex,A,"outFields contains missing fields");else if(N)throw new q("feature-store:unsupported-query","outFields should be specified for returnDistinctValues",
{query:f});G.validateWhere(this.fieldsIndex,f.where)};g._checkStatisticsQuerySupport=async function(f){const {outStatistics:A,groupByFieldsForStatistics:R,having:N}=f;var ba=R&&R.length,la=A&&A.length;if(N){if(!ba||!la)throw new q("feature-store:unsupported-query","outStatistics and groupByFieldsForStatistics should be specified with having",{query:f});G.validateHaving(this.fieldsIndex,N,A)}if(la&&X(A)){la=A.map(na=>na.onStatisticField);G.validateFields(this.fieldsIndex,la,"onStatisticFields contains missing fields");
ba&&G.validateFields(this.fieldsIndex,R,"groupByFieldsForStatistics contains missing fields");for(const na of A){const {onStatisticField:pa,statisticType:za}=na;if(("percentile_disc"===za||"percentile_cont"===za)&&"statisticParameters"in na){if({statisticParameters:ba}=na,!ba)throw new q("feature-store:unsupported-query","statisticParamters should be set for percentile type",{definition:na,query:f});}else if("count"!==za&&pa&&G.hasInvalidFieldType(pa,this.fieldsIndex))throw new q("feature-store:unsupported-query",
"outStatistics contains non-numeric fields",{definition:na,query:f});}}};h._createClass(e,[{key:"featureAdapter",get:function(){return this.featureStore.featureAdapter}},{key:"fullExtent",get:function(){const f=this.featureStore.fullBounds;return f?{xmin:f[0],ymin:f[1],xmax:f[2],ymax:f[3],spatialReference:L.cleanFromGeometryEngine(this.spatialReference)}:null}},{key:"timeExtent",get:function(){return this.timeInfo?this._timeExtent?this._timeExtent:this._timeExtent=O.getTimeExtent(this.timeInfo,this.featureStore):
null}}]);return e}();const p=b.create(),n=b.create();l.Feature=function(e,g=null,f,A,R){this.attributes=e;this.geometry=f;this.centroid=A;this.filterFlags=R;this.groupId=-1;this.displayId=g};l.default=k;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/geometry/support/normalizeUtils":function(){define("exports ../../config ../../core/maybe ../../core/Logger ../../core/Error ./spatialReferenceUtils ./webMercatorUtils ../Polygon ../Polyline ./normalizeUtilsCommon ../../tasks/geometry/cut ../../tasks/geometry/simplify".split(" "),
function(l,h,F,I,q,E,m,v,x,B,Q,V){function z(J){const O=[];let P=0,X=0;for(let ca=0;ca<J.length;ca++){const S=J[ca];let D=null;for(let k=0;k<S.length;k++)D=S[k],O.push(D),0===k?X=P=D[0]:(P=Math.min(P,D[0]),X=Math.max(X,D[0]));D&&O.push([(P+X)/2,0])}return O}function y(J,O){if(!(J instanceof x||J instanceof v))throw L.error("straightLineDensify: the input geometry is neither polyline nor polygon"),new q("straightLineDensify: the input geometry is neither polyline nor polygon");var P=B.getGeometryParts(J);
const X=[];for(const S of P){P=[];X.push(P);P.push([S[0][0],S[0][1]]);for(let D=0;D<S.length-1;D++){const k=S[D][0],p=S[D][1],n=S[D+1][0],e=S[D+1][1];var ca=Math.sqrt((n-k)*(n-k)+(e-p)*(e-p));const g=(e-p)/ca,f=(n-k)/ca,A=ca/O;if(1<A){for(let R=1;R<=A-1;R++){const N=R*O;P.push([f*N+k,g*N+p])}ca=(ca+Math.floor(A-1)*O)/2;P.push([f*ca+k,g*ca+p])}P.push([n,e])}}return"polygon"===J.type?new v({rings:X,spatialReference:J.spatialReference}):new x({paths:X,spatialReference:J.spatialReference})}function C(J,
O,P){O&&(J=y(J,1E6),J=m.webMercatorToGeographic(J,!0));P&&(J=B.updatePolyGeometry(J,P));return J}function b(J,O,P){if(Array.isArray(J)){var X=J[0];X>O?(P=B.offsetMagnitude(X,O),J[0]=X+-2*P*O):X<P&&(O=B.offsetMagnitude(X,P),J[0]=X+-2*O*P)}else X=J.x,X>O?(P=B.offsetMagnitude(X,O),J=J.clone().offset(-2*P*O,0)):X<P&&(O=B.offsetMagnitude(X,P),J=J.clone().offset(-2*O*P,0));return J}function r(J,O){let P=-1;for(let X=0;X<O.cutIndexes.length;X++){const ca=O.cutIndexes[X],S=O.geometries[X],D=B.getGeometryParts(S);
for(let k=0;k<D.length;k++){const p=D[k];p.some(n=>{if(180>n[0])return!0;n=0;for(var e=0;e<p.length;e++){var g=p[e][0];n=g>n?g:n}n=Number(n.toFixed(9));n=-360*B.offsetMagnitude(n,180);for(e=0;e<p.length;e++)g=S.getPoint(k,e),S.setPoint(k,e,g.clone().offset(n,0));return!0})}if(ca===P)if("polygon"===J[0].type)for(const k of B.getGeometryParts(S))J[ca]=J[ca].addRing(k);else{if("polyline"===J[0].type)for(const k of B.getGeometryParts(S))J[ca]=J[ca].addPath(k)}else P=ca,J[ca]=S}return J}async function G(J,
O,P){if(!Array.isArray(J))return G([J],O);var X=O?O.url:h.geometryServiceUrl;let ca,S,D;let k=0;var p=[];O=[];for(var n of J)if(F.isNone(n))O.push(n);else{if(!e){var e=n.spatialReference;var g=E.getInfo(e);var f=(ca=e.isWebMercator)?102100:4326;S=B.cutParams[f].maxX;D=B.cutParams[f].minX;var A=B.cutParams[f].plus180Line;f=B.cutParams[f].minus180Line}if(g)if("mesh"===n.type)O.push(n);else if("point"===n.type)O.push(b(n.clone(),S,D));else if("multipoint"===n.type){var R=n.clone();R.points=R.points.map(N=>
b(N,S,D));O.push(R)}else if("extent"===n.type)R=n.clone()._normalize(!1,!1,g),O.push(R.rings?new v(R):R);else if(n.extent){R=n.extent;const N=2*B.offsetMagnitude(R.xmin,D)*S;let ba=0===N?n.clone():B.updatePolyGeometry(n.clone(),N);R.offset(N,0);R.intersects(A)&&R.xmax!==S?(k=R.xmax>k?R.xmax:k,ba=C(ba,ca),p.push(ba),O.push("cut")):R.intersects(f)&&R.xmin!==D?(k=2*R.xmax*S>k?2*R.xmax*S:k,ba=C(ba,ca,360),p.push(ba),O.push("cut")):O.push(ba)}else O.push(n.clone());else O.push(n)}e=B.offsetMagnitude(k,
S);g=-90;A=e;for(n=new x;0<e;)f=-180+360*e,n.addPath([[f,g],[f,-1*g]]),g*=-1,e--;if(0<p.length&&0<A){e=await Q.cut(X,p,n,P);e=r(p,e);g=[];p=[];for(A=0;A<O.length;A++)n=O[A],"cut"!==n?p.push(n):(n=e.shift(),f=J[A],F.isSome(f)&&"polygon"===f.type&&f.rings&&1<f.rings.length&&n.rings.length>=f.rings.length?(g.push(n),p.push("simplify")):p.push(ca?m.geographicToWebMercator(n):n));if(!g.length)return p;O=await V.simplify(X,g,P);J=[];for(P=0;P<p.length;P++)X=p[P],"simplify"!==X?J.push(X):J.push(ca?m.geographicToWebMercator(O.shift()):
O.shift());return J}J=[];for(P=0;P<O.length;P++)X=O[P],"cut"!==X?J.push(X):(X=p.shift(),J.push(!0===ca?m.geographicToWebMercator(X):X));return Promise.resolve(J)}const L=I.getLogger("esri.geometry.support.normalizeUtils");l.getDenormalizedExtent=function(J){if(!J)return null;const O=J.extent;if(!O)return null;var P=J.spatialReference&&E.getInfo(J.spatialReference);if(!P)return O;const [X,ca]=P.valid;({width:P}=O);let {xmin:S,xmax:D}=O;[S,D]=[D,S];if("extent"===J.type||0===P||P<=ca||P>2*ca||S<X||D>
ca)return O;let k;switch(J.type){case "polygon":if(1<J.rings.length)k=z(J.rings);else return O;break;case "polyline":if(1<J.paths.length)k=z(J.paths);else return O;break;case "multipoint":k=J.points}J=O.clone();for(let p=0;p<k.length;p++){let n=k[p][0];0>n?(n+=ca,D=Math.max(n,D)):(n-=ca,S=Math.min(n,S))}J.xmin=S;J.xmax=D;return J.width<P?(J.xmin-=ca,J.xmax-=ca,J):O};l.normalizeCentralMeridian=G;l.normalizeMapX=function(J,O){if(O=E.getInfo(O)){const [P,X]=O.valid;O=X-P;if(J<P)for(;J<P;)J+=O;if(J>X)for(;J>
X;)J-=O}return J};l.straightLineDensify=y;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/geometry/support/normalizeUtilsCommon":function(){define(["exports","../SpatialReference","../Polyline","./jsonUtils"],function(l,h,F,I){function q(m){return I.isPolygon(m)?m.rings:m.paths}const E={102100:{maxX:2.0037508342788905E7,minX:-2.0037508342788905E7,plus180Line:new F({paths:[[[2.0037508342788905E7,-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:h.WebMercator}),
minus180Line:new F({paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:h.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new F({paths:[[[180,-180],[180,180]]],spatialReference:h.WGS84}),minus180Line:new F({paths:[[[-180,-180],[-180,180]]],spatialReference:h.WGS84})}};l.cutParams=E;l.getGeometryParts=q;l.getSpatialReferenceMinMaxX=function(m){m=(null==m?0:m.isWebMercator)?102100:4326;return[E[m].minX,E[m].maxX]};l.offsetMagnitude=
function(m,v){return Math.ceil((m-v)/(2*v))};l.updatePolyGeometry=function(m,v){const x=q(m);for(const B of x)for(const Q of B)Q[0]+=v;return m};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/tasks/geometry/cut":function(){define(["exports","../../core/urlUtils","../../geometry/support/jsonUtils","../../geometry","../../request"],function(l,h,F,I,q){l.cut=async function(E,m,v,x){E="string"===typeof E?h.urlToObject(E):E;const B=m[0].spatialReference;m={...x,query:{...E.query,f:"json",sr:JSON.stringify(B),
target:JSON.stringify({geometryType:F.getJsonType(m[0]),geometries:m}),cutter:JSON.stringify(v)}};m=await q(E.path+"/cut",m);const {cutIndexes:Q,geometries:V=[]}=m.data;return{cutIndexes:Q,geometries:V.map(z=>{z=F.fromJSON(z);z.spatialReference=B;return z})}};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/request":function(){define("require ./core/global ./core/has ./core/lang ./config ./core/maybe ./core/Error ./core/urlUtils ./core/promiseUtils ./kernel ./support/apiKeyUtils ./support/requestUtils".split(" "),
function(l,h,F,I,q,E,m,v,x,B,Q,V){async function z(N,ba){var la=v.isDataProtocol(N);const na=v.isBlobProtocol(N);na||la||(N=v.normalize(N));const pa={url:N,requestOptions:{...E.unwrap(ba)}};let za=v.getInterceptor(N);if(za){N=await P(za,pa);if(null!=N)return{data:N,getHeader:R,requestOptions:pa.requestOptions,url:pa.url};za.after||za.error||(za=null)}N=pa.url;ba=pa.requestOptions;if("image"===ba.responseType){if(F("host-webworker")||F("host-node"))throw b("request:invalid-parameters",Error("responseType 'image' is not supported in Web Workers or Node environment"),
pa);}else if(la)throw b("request:invalid-parameters",Error("Data URLs are not supported for responseType \x3d "+ba.responseType),pa);if("head"===ba.method){if(ba.body)throw b("request:invalid-parameters",Error("body parameter cannot be set when method is 'head'"),pa);if(la||na)throw b("request:invalid-parameters",Error("data and blob URLs are not supported for method 'head'"),pa);}await r();if(p)return p.execute(N,ba);const Ia=x.createAbortController();x.onAbort(ba,()=>Ia.abort());la=await S({controller:Ia,
credential:null,credentialToken:null,fetchOptions:null,hasToken:!1,interceptor:za,params:pa,redoRequest:!1,useIdentity:n.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1});za&&za.after&&za.after(la);return la}function y(N){v.isBlobProtocol(N)||v.isDataProtocol(N)||(N=v.getOrigin(N))&&-1===z._corsServers.indexOf(N)&&z._corsServers.push(N)}function C(N){N=v.getOrigin(N);return!N||N.endsWith(".arcgis.com")||-1!==z._corsServers.indexOf(N)||v.isTrustedServer(N)}function b(N,ba,la,na){let pa="Error";
const za={url:la.url,requestOptions:la.requestOptions,getHeader:R,ssl:!1};if(ba instanceof m)return ba.details?(ba.details=I.clone(ba.details),ba.details.url=la.url,ba.details.requestOptions=la.requestOptions):ba.details=za,ba;if(ba){la=na&&(ja=>na.headers.get(ja));const Ia=na&&na.status,da=ba.message;da&&(pa=da);la&&(za.getHeader=la);za.httpStatus=(null!=ba.httpCode?ba.httpCode:ba.code)||Ia||0;za.subCode=ba.subcode;za.messageCode=ba.messageCode;za.messages="string"===typeof ba.details?[ba.details]:
ba.details}return x.isAbortError(ba)?x.createAbortError():new m(N,pa,za)}async function r(){F("host-webworker")?p||(p=await new Promise(function(N,ba){l(["./core/workers/request"],N,ba)})):z._abortableFetch||(z._abortableFetch=h.fetch.bind(h))}async function G(){B.id||await new Promise(function(N,ba){l(["./identity/IdentityManager"],function(la){N(Object.freeze({__proto__:null,"default":la}))},ba)})}async function L(N){const ba=N.params.url,la=N.params.requestOptions,na=N.controller.signal,pa=la.body;
let za=null,Ia=null,da=null;e&&"HTMLFormElement"in h&&(pa instanceof FormData?za=pa:pa instanceof HTMLFormElement&&(Ia=pa,za=new FormData(Ia)));"string"===typeof pa&&(da=pa);N.fetchOptions={cache:la.cacheBust&&!z._abortableFetch.polyfill?"no-cache":"default",credentials:"same-origin",headers:la.headers||{},method:"head"===la.method?"HEAD":"GET",mode:"cors",redirect:"follow",signal:na};if(za||da)N.fetchOptions.body=za||da;"anonymous"===la.authMode&&(N.useIdentity=!1);N.hasToken=!!(/token=/i.test(ba)||
la.query&&la.query.token||za&&za.get&&za.get("token")||Ia&&Ia.elements.token);!N.hasToken&&q.apiKey&&Q.supportsApiKey(ba)&&(la.query||(la.query={}),la.query.token=q.apiKey,N.hasToken=!0);if(N.useIdentity&&!N.hasToken&&!N.credentialToken&&!J(ba)&&!x.isAborted(na)){let ja;"immediate"===la.authMode?(await G(),ja=await B.id.getCredential(ba,{signal:na}),N.credential=ja):"no-prompt"===la.authMode?(await G(),ja=await B.id.getCredential(ba,{prompt:!1,signal:na}).catch(()=>{}),N.credential=ja):B.id&&(ja=
B.id.findCredential(ba));ja&&(N.credentialToken=ja.token,N.useSSL=!!ja.ssl)}}function J(N){return A.some(ba=>ba.test(N))}async function O(N){let ba=N.params.url;const la=N.params.requestOptions,na=N.fetchOptions,pa=v.isBlobProtocol(ba)||v.isDataProtocol(ba),za=la.responseType||"json",Ia=pa?0:null!=la.timeout?la.timeout:n.timeout;var da=!1;if(!pa){N.useSSL&&(ba=v.toHTTPS(ba));la.cacheBust&&"default"===na.cache&&(ba=v.addQueryParameter(ba,"request.preventCache",Date.now()));var ja={...la.query};N.credentialToken&&
(ja.token=N.credentialToken);da=v.objectToQuery(ja);F("esri-url-encodes-apostrophe")&&(da=da.replace(/'/g,"%27"));const t=ba.length+1+da.length;da="delete"===la.method||"post"===la.method||"put"===la.method||!!la.body||t>n.maxUrlLength;const W=la.useProxy||!!v.getProxyRule(ba);if(W){const u=v.getProxyUrl(ba);var qa=u.path;!da&&qa.length+1+t>n.maxUrlLength&&(da=!0);u.query&&(ja={...u.query,...ja})}if("HEAD"===na.method&&(da||W)){if(da){if(t>n.maxUrlLength)throw b("request:invalid-parameters",Error("URL exceeds maximum length"),
N.params);throw b("request:invalid-parameters",Error("cannot use POST request when method is 'head'"),N.params);}if(W)throw b("request:invalid-parameters",Error("cannot use proxy when method is 'head'"),N.params);}da?(na.method="delete"===la.method?"DELETE":"put"===la.method?"PUT":"POST",la.body?ba=v.addQueryParameters(ba,ja):(na.body=v.objectToQuery(ja),na.headers["Content-Type"]="application/x-www-form-urlencoded")):ba=v.addQueryParameters(ba,ja);W&&(N.useProxy=!0,ba=`${qa}?${ba}`);ja.token&&e&&
na.body instanceof FormData&&(qa=na.body,qa.set?qa.set("token",ja.token):qa.append("token",ja.token));la.hasOwnProperty("withCredentials")?N.withCredentials=la.withCredentials:v.hasSameOrigin(ba,v.appUrl)||(v.isTrustedServer(ba)?N.withCredentials=!0:B.id&&(ja=B.id.findServerInfo(ba))&&ja.webTierAuth&&(N.withCredentials=!0));N.withCredentials&&(na.credentials="include")}ja=0;let Ca=!1;0<Ia&&(ja=setTimeout(()=>{Ca=!0;N.controller.abort()},Ia));let xa,c;try{if("image"!==la.responseType||"default"!==
na.cache||"GET"!==na.method||da||X(la.headers)||!pa&&!N.useProxy&&n.proxyUrl&&!C(ba)){if(xa=await z._abortableFetch(ba,na),N.useProxy||y(ba),xa.ok&&"HEAD"!==na.method){switch(za){case "array-buffer":c=await xa.arrayBuffer();break;case "blob":case "image":c=await xa.blob();break;default:c=await xa.text()}ja&&(clearTimeout(ja),ja=0);if("json"===za||"xml"===za||"document"===za)if(c)switch(za){case "json":c=JSON.parse(c);break;case "xml":c=ca(c,"application/xml");break;case "document":c=ca(c,"text/html")}else c=
null;if(c){if("array-buffer"===za||"blob"===za){const t=xa.headers.get("Content-Type");if(/application\/json|text\/plain/i.test(t)&&750>=c["blob"===za?"size":"byteLength"])try{const W=await (new Response(c)).json();W.error&&(c=W)}catch{}}"image"===za&&c instanceof Blob&&(c=await k(URL.createObjectURL(c),N,!0))}}}else c=await k(ba,N)}catch(t){if("AbortError"===t.name){if(Ca)throw Error("Timeout exceeded");throw x.createAbortError("Request canceled");}if(!xa&&t instanceof TypeError&&n.proxyUrl&&!la.body&&
"delete"!==la.method&&"head"!==la.method&&"post"!==la.method&&"put"!==la.method&&!N.useProxy)N.redoRequest=!0,v.addProxyRule({proxyUrl:n.proxyUrl,urlPrefix:v.removeFile(v.urlToObject(ba).path)});else throw t;}finally{ja&&clearTimeout(ja)}return[xa,c]}async function P(N,ba){if(null!=N.responseData)return N.responseData;N.headers&&(ba.requestOptions.headers={...ba.requestOptions.headers,...N.headers});N.query&&(ba.requestOptions.query={...ba.requestOptions.query,...N.query});if(N.before){let la,na;
try{na=await N.before(ba)}catch(pa){la=b("request:interceptor",pa,ba)}if(na instanceof Error||na instanceof m)la=b("request:interceptor",na,ba);if(la)throw N.error&&N.error(la),la;return na}}function X(N){if(N)for(const ba of Object.getOwnPropertyNames(N))if(N[ba])return!0;return!1}function ca(N,ba){let la;try{la=(new DOMParser).parseFromString(N,ba)}catch{}if(!la||la.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return la}async function S(N){await L(N);let ba;
try{do[ba,la]=await O(N);while(!await D(N,ba,la))}catch(za){var la=b("request:server",za,N.params,ba);la.details.ssl=N.useSSL;N.interceptor&&N.interceptor.error&&N.interceptor.error(la);throw la;}var na=N.params.url;/\/sharing\/rest\/(accounts|portals)\/self/i.test(na)&&!N.hasToken&&!N.credentialToken&&la&&la.user&&la.user.username&&!v.isTrustedServer(na)&&(na=v.getOrigin(na,!0))&&n.trustedServers.push(na);if((na=N.credential)&&B.id){var pa=B.id.findServerInfo(na.server);if(pa=pa&&pa.owningSystemUrl)pa=
pa.replace(/\/?$/,"/sharing"),(na=B.id.findCredential(pa,na.userId))&&-1===B.id._getIdenticalSvcIdx(pa,na)&&na.resources.unshift(pa)}return{data:la,getHeader:ba?za=>ba.headers.get(za):R,requestOptions:N.params.requestOptions,ssl:N.useSSL,url:N.params.url}}async function D(N,ba,la){if(N.redoRequest)return N.redoRequest=!1;if(!ba)return!0;if(!ba.ok)throw Error(`Unable to load ${ba.url} status: ${ba.status}`);let na;la&&la.error&&(na=Object.assign(Error(),la.error));let pa,za,Ia;na&&(pa=Number(na.code),
za=na.hasOwnProperty("subcode")?Number(na.subcode):null,Ia=(Ia=na.messageCode)&&Ia.toUpperCase());ba=N.params.requestOptions.authMode;if(403===pa&&(4===za||na.message&&-1<na.message.toLowerCase().indexOf("ssl")&&-1===na.message.toLowerCase().indexOf("permission"))){if(!N.useSSL)return N.useSSL=!0,!1}else if(!N.hasToken&&N.useIdentity&&("no-prompt"!==ba||498===pa)&&-1!==g.indexOf(pa)&&!J(N.params.url)&&(403!==pa||-1===f.indexOf(Ia)&&(null==za||2===za&&N.credentialToken))){await G();try{const da=await B.id.getCredential(N.params.url,
{error:b("request:server",na,N.params),prompt:"no-prompt"!==ba,signal:N.controller.signal,token:N.credentialToken});N.credential=da;N.credentialToken=da.token;N.useSSL=N.useSSL||da.ssl;return!1}catch(da){if("no-prompt"===ba)return N.credential=null,N.credentialToken=null,!1;na=da}}if(na)throw na;return!0}function k(N,ba,la=!1){const na=ba.controller.signal,pa=new Image;pa.crossOrigin=ba.withCredentials?"use-credentials":"anonymous";pa.alt="";pa.src=N;return V.loadImageAsync(pa,N,la,na)}let p;const n=
q.request,e="FormData"in h,g=[499,498,403,401],f=["COM_0056","COM_0057","SB_0008"],A=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],R=()=>null;z._abortableFetch=null;z._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"];return z})},"esri/support/apiKeyUtils":function(){define(["exports","../core/urlUtils"],function(l,h){const F=["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"];l.isApiKey=
function(I){return I&&4<I.length&&I.startsWith("AAPK")};l.supportsApiKey=function(I){const q=h.getOrigin(I,!0);return q&&q.endsWith(".arcgis.com")&&!F.includes(q)&&!I.endsWith("/sharing/rest/generateToken")};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/support/requestUtils":function(){define(["exports","../core/has","../core/maybe","../core/promiseUtils"],function(l,h,F,I){function q(){try{return new DOMException("Aborted","AbortError")}catch{const E=Error();E.name="AbortError";return E}}
l.loadImageAsync=function(E,m,v=!1,x){return new Promise((B,Q)=>{if(I.isAborted(x))Q(q());else{var V=()=>{C();Q(Error(`Unable to load ${m}`))},z=()=>{const b=E;C();B(b)},y=()=>{if(E){var b=E;C();b.src="";Q(q())}},C=()=>{h("esri-image-decode")||(E.removeEventListener("error",V),E.removeEventListener("load",z));E=z=V=null;F.isSome(x)&&x.removeEventListener("abort",y);y=null;v&&URL.revokeObjectURL(m)};F.isSome(x)&&x.addEventListener("abort",y);h("esri-image-decode")?E.decode().then(z,V):(E.addEventListener("error",
V),E.addEventListener("load",z))}})};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/tasks/geometry/simplify":function(){define(["exports","../../core/urlUtils","../../geometry/support/jsonUtils","../../request"],function(l,h,F,I){function q(m){return{geometryType:F.getJsonType(m[0]),geometries:m.map(v=>v.toJSON())}}function E(m,v,x){const B=F.getGeometryType(v);return m.map(Q=>{Q=B.fromJSON(Q);Q.spatialReference=x;return Q})}l.simplify=async function(m,v,x){const B="string"===typeof m?
h.urlToObject(m):m;m=v[0].spatialReference;const Q=F.getJsonType(v[0]);v={...x,query:{...B.query,f:"json",sr:m.wkid?m.wkid:JSON.stringify(m),geometries:JSON.stringify(q(v))}};v=await I(B.path+"/simplify",v);return E(v.data,Q,m)};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/core/MemCache":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","./PooledArray"],function(l,h,F){let I=function(){function E(v,x,B){this._namespace=v;this._storage=x;this._removeFunc=!1;this._miss=
this._hit=0;this._storage.register(this);this._namespace+=":";B&&(this._storage.registerRemoveFunc(this._namespace,B),this._removeFunc=!0)}var m=E.prototype;m.destroy=function(){this._storage.clear(this._namespace);this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace);this._storage.deregister(this);this._storage=null};m.resetHitRate=function(){this._hit=this._miss=0};m.put=function(v,x,B,Q=0){this._storage.put(this._namespace+v,x,B,Q)};m.get=function(v){v=this._storage.get(this._namespace+
v);void 0===v?++this._miss:++this._hit;return v};m.pop=function(v){v=this._storage.pop(this._namespace+v);void 0===v?++this._miss:++this._hit;return v};m.updateSize=function(v,x,B){this._storage.updateSize(this._namespace+v,x,B)};m.clear=function(){this._storage.clear(this._namespace)};m.clearAll=function(){this._storage.clearAll()};m.getStats=function(){return this._storage.getStats()};m.resetStats=function(){this._storage.resetStats()};h._createClass(E,[{key:"namespace",get:function(){return this._namespace.slice(0,
-1)}},{key:"hitRate",get:function(){return this._hit/(this._hit+this._miss)}},{key:"size",get:function(){return this._storage.size}},{key:"maxSize",get:function(){return this._storage.maxSize}}]);return E}(),q=function(){function E(v=10485760){this._maxSize=v;this._db=new Map;this._miss=this._hit=this._size=0;this._removeFuncs=new F;this._users=new F}var m=E.prototype;m.destroy=function(){this.clearAll();this._removeFuncs.clear();this._users.clear();this._db=null};m.register=function(v){this._users.push(v)};
m.deregister=function(v){this._users.removeUnordered(v)};m.registerRemoveFunc=function(v,x){this._removeFuncs.push([v,x])};m.deregisterRemoveFunc=function(v){this._removeFuncs.filterInPlace(x=>x[0]!==v)};m.put=function(v,x,B,Q){const V=this._db.get(v);V&&(this._size-=V.size,this._db.delete(v),V.entry!==x&&this._notifyRemoved(v,V.entry));B>this._maxSize?this._notifyRemoved(v,x):void 0===x?console.warn("Refusing to cache undefined entry "):!B||0>B?console.warn("Refusing to cache entry with invalid size "+
B):(Q=1+Math.max(Q,-3)- -3,this._db.set(v,{entry:x,size:B,lifetime:Q,lives:Q}),this._size+=B,this._checkSizeLimit())};m.updateSize=function(v,x,B){const Q=this._db.get(v);Q&&Q.entry===x&&(this._size-=Q.size,B>this._maxSize?(this._db.delete(v),this._notifyRemoved(v,x)):(Q.size=B,this._size+=B,this._checkSizeLimit()))};m.pop=function(v){const x=this._db.get(v);if(x)return this._size-=x.size,this._db.delete(v),++this._hit,x.entry;++this._miss};m.get=function(v){const x=this._db.get(v);if(void 0===x)++this._miss;
else return this._db.delete(v),x.lives=x.lifetime,this._db.set(v,x),++this._hit,x.entry};m.getStats=function(){const v={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},x={},B=[];this._db.forEach((z,y)=>{const C=z.lifetime;B[C]=(B[C]||0)+z.size;this._users.forAll(b=>{b=b.namespace;y.startsWith(b)&&(x[b]=(x[b]||0)+z.size)})});const Q={};this._users.forAll(z=>{const y=z.namespace;!isNaN(z.hitRate)&&
0<z.hitRate?(x[y]=x[y]||0,Q[y]=Math.round(100*z.hitRate)+"%"):Q[y]="0%"});var V=Object.keys(x);V.forEach(z=>x[z]=x[z]/this._size*100);V.sort((z,y)=>x[y]-x[z]);V.forEach(z=>v[z]=Math.round(x[z])+"% / "+Q[z]);for(V=B.length-1;0<=V;--V){const z=B[V];z&&(v["Priority "+(V+-3-1)]=Math.round(z/this.size*100)+"%")}return v};m.resetStats=function(){this._hit=this._miss=0;this._users.forAll(v=>v.resetHitRate())};m.clear=function(v){this._db.forEach((x,B)=>{B.startsWith(v)&&(this._size-=x.size,this._db.delete(B),
this._notifyRemoved(B,x.entry))})};m.clearAll=function(){this._db.forEach((v,x)=>this._notifyRemoved(x,v.entry));this._size=0;this._db.clear()};m._getHitRate=function(){return this._hit/(this._hit+this._miss)};m._notifyRemoved=function(v,x){this._removeFuncs.forAll(B=>{if(v.startsWith(B[0]))B[1](x)})};m._checkSizeLimit=function(){if(!(this._size<=this._maxSize))for(const [v,x]of this._db)if(this._db.delete(v),1>=x.lives?(this._size-=x.size,this._notifyRemoved(v,x.entry)):(--x.lives,this._db.set(v,
x)),this._size<=.9*this.maxSize)break};h._createClass(E,[{key:"size",get:function(){return this._size}},{key:"maxSize",get:function(){return this._maxSize},set:function(v){this._maxSize=Math.max(v,0);this._checkSizeLimit()}}]);return E}();l.MIN_PRIORITY=-3;l.MemCache=I;l.MemCacheStorage=q;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/support/FieldsIndex":function(){define(function(){return function(){function l(F){this.fields=F;this._fieldsMap=new Map;this._dateFieldsSet=new Set;
this.dateFields=[];if(F){var I=[];for(const q of F)if(F=q&&q.name){const E=F.toLowerCase().trim();this._fieldsMap.set(F,q);this._fieldsMap.set(E,q);I.push(E);if("date"===q.type||"esriFieldTypeDate"===q.type)this.dateFields.push(q),this._dateFieldsSet.add(q)}I.sort();this.uid=I.join(",")}}var h=l.prototype;h.destroy=function(){this._fieldsMap.clear()};h.has=function(F){return null!=this.get(F)};h.get=function(F){return null!=F?this._fieldsMap.get(F)||this._fieldsMap.get(F.toLowerCase().trim()):void 0};
h.isDateField=function(F){return this._dateFieldsSet.has(this.get(F))};h.normalizeFieldName=function(F){if(F=this.get(F))return F.name};return l}()})},"esri/layers/graphics/data/QueryEngineCapabilities":function(){define(["exports"],function(l){l.queryCapabilities={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,
supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/graphics/data/projectionSupport":function(){define(["exports",
"../../../geometry/support/spatialReferenceUtils","../../../geometry/support/webMercatorUtils","../../../geometry/projection","../../../geometry/geometryAdapters/json"],function(l,h,F,I,q){function E(z,y){if(!y)return null;if("x"in y){var C={x:0,y:0};[C.x,C.y]=z(y.x,y.y,x);null!=y.z&&(C.z=y.z);null!=y.m&&(C.m=y.m);return C}if("xmin"in y)return C={xmin:0,ymin:0,xmax:0,ymax:0},[C.xmin,C.ymin]=z(y.xmin,y.ymin,x),[C.xmax,C.ymax]=z(y.xmax,y.ymax,x),y.hasZ&&(C.zmin=y.zmin,C.zmax=y.zmax,C.hasZ=!0),y.hasM&&
(C.mmin=y.mmin,C.mmax=y.mmax,C.hasM=!0),C;if("rings"in y)return{rings:m(y.rings,z),hasM:y.hasM,hasZ:y.hasZ};if("paths"in y)return{paths:m(y.paths,z),hasM:y.hasM,hasZ:y.hasZ};if("points"in y)return{points:v(y.points,z),hasM:y.hasM,hasZ:y.hasZ}}function m(z,y){const C=[];for(const b of z)C.push(v(b,y));return C}function v(z,y){const C=[];for(const b of z)z=y(b[0],b[1],[0,0]),C.push(z),2<b.length&&z.push(b[2]),3<b.length&&z.push(b[3]);return C}const x=[0,0],B=E.bind(null,F.lngLatToXY),Q=E.bind(null,
F.xyToLngLat),V=new (function(){function z(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}var y=z.prototype;y.push=async function(C,b,r){C&&C.length&&b&&r&&h.equals(b,r);const G={geometries:C,inSpatialReference:b,outSpatialReference:r,resolve:null};this._jobs.push(G);return new Promise(L=>{G.resolve=L;null===this._timer&&(this._timer=setTimeout(this._process,10))})};y._process=function(){this._timer=null;const C=this._jobs.shift();if(C){var {geometries:b,inSpatialReference:r,
outSpatialReference:G,resolve:L}=C;F.canProject(r,G)?h.isWebMercator(G)?L(b.map(B)):L(b.map(Q)):L(I.projectMany(q.jsonAdapter,b,r,G,null));0<this._jobs.length&&(this._timer=setTimeout(this._process,10))}};return z}());l.checkProjectionSupport=async function(z,y){y&&(z=Array.isArray(z)?z.map(C=>{var b;return null==(b=C.geometry)?void 0:b.spatialReference}):[z],await I.initializeProjection(z.map(C=>({source:C,dest:y}))))};l.project=function(z,y,C){if(!z)return z;C||(C=y,y=z.spatialReference);return h.isValid(y)&&
h.isValid(C)&&!h.equals(y,C)?F.canProject(y,C)?h.isWebMercator(C)?B(z):Q(z):I.projectMany(q.jsonAdapter,[z],y,C,null)[0]:z};l.projectMany=async function(z,y,C){return V.push(z,y,C)};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/maybe ../core/Error ../core/promiseUtils ./support/spatialReferenceUtils ./support/Ellipsoid ./Point ./Extent ./Multipoint ./Polygon ./Polyline ../core/mathUtils ../chunks/vec3f64 ../chunks/vec3 ./projectionEllipsoid ../core/unitUtils ../chunks/mat4 ../chunks/pe ./support/aaBoundingRect ./support/geodesicConstants ./support/GeographicTransformation".split(" "),
function(l,h,F,I,q,E,m,v,x,B,Q,V,z,y,C,b,r,G,L,J,O,P,X){function ca(){return!!Fa&&J.isLoaded()}function S(aa){I.isNone(Ga)&&(Ga=Promise.all([J.load(),(new Promise(function(ha,fa){l(["../chunks/geometryEngineBase"],ha,fa)})).then(function(ha){return ha.geometryEngineBase}),new Promise(function(ha,fa){l(["./geometryAdapters/hydrated"],ha,fa)})]));return Ga.then(([,ha,{hydratedAdapter:fa}])=>{E.throwIfAborted(aa);Ja=fa;Fa=ha.default;Fa._enableProjection(J.pe)})}function D(aa,ha,fa,oa,ya=null){if(I.isNone(fa)||
I.isNone(oa))return ha;if(p(fa,oa,ya))return ha.map(Ba=>n(Ba,fa,oa));if(I.isNone(ya)){const Ba=X.cacheKey(fa,oa);void 0!==Ha[Ba]?ya=Ha[Ba]:(ya=k(fa,oa,null),I.isNone(ya)&&(ya=new X),Ha[Ba]=ya)}if(I.isNone(Fa))throw new Sa;return Fa._project(aa,ha,fa,oa,ya)}function k(aa,ha,fa=null){if(I.isNone(Fa))throw new Sa;if(I.isNone(aa)||I.isNone(ha))return null;aa=Fa._getTransformation(Ja,aa,ha,fa,null==fa?void 0:fa.spatialReference);return null!==aa?X.fromGE(aa):null}function p(aa,ha,fa){return fa?!1:m.equals(aa,
ha)?!0:m.isValid(aa)&&m.isValid(ha)&&!!Aa(aa,ha,cb)}function n(aa,ha,fa){if(!aa)return aa;if("x"in aa){var oa=new x;return e(aa,ha,oa,fa)?oa:null}return"xmin"in aa?(oa=new B,R(aa,ha,oa,fa)?oa:null):"rings"in aa?(oa=new V,A(aa,ha,oa,fa)?oa:null):"paths"in aa?(oa=new z,f(aa,ha,oa,fa)?oa:null):"points"in aa?(oa=new Q,g(aa,ha,oa,fa)?oa:null):null}function e(aa,ha,fa,oa,ya=0){Qa[0]=aa.x;Qa[1]=aa.y;const Ba=aa.z;Qa[2]=void 0!==Ba?Ba:ya;if(!na(Qa,ha,0,Qa,oa,0,1))return!1;fa.x=Qa[0];fa.y=Qa[1];fa.spatialReference=
oa;void 0===Ba?(fa.z=void 0,fa.hasZ=!1):(fa.z=Qa[2],fa.hasZ=!0);void 0===aa.m?(fa.m=void 0,fa.hasM=!1):(fa.m=aa.m,fa.hasM=!0);return!0}function g(aa,ha,fa,oa,ya=0){const {points:Ba,hasZ:Na,hasM:Oa}=aa;aa=[];const ab=Ba.length,Za=[];for(var $a of Ba)Za.push($a[0],$a[1],Na?$a[2]:ya);if(!na(Za,ha,0,Za,oa,0,ab))return!1;for(ha=0;ha<ab;++ha){ya=3*ha;$a=Za[ya];const gb=Za[ya+1];Na&&Oa?aa.push([$a,gb,Za[ya+2],Ba[ha][3]]):Na?aa.push([$a,gb,Za[ya+2]]):Oa?aa.push([$a,gb,Ba[ha][2]]):aa.push([$a,gb])}fa.points=
aa;fa.spatialReference=oa;fa.hasZ=Na;fa.hasM=Oa;return!0}function f(aa,ha,fa,oa,ya=0){const {paths:Ba,hasZ:Na,hasM:Oa}=aa;aa=[];if(!pa(Ba,Na,Oa,ha,aa,oa,ya))return!1;fa.paths=aa;fa.spatialReference=oa;fa.hasZ=Na;fa.hasM=Oa;return!0}function A(aa,ha,fa,oa,ya=0){const {rings:Ba,hasZ:Na,hasM:Oa}=aa;aa=[];if(!pa(Ba,Na,Oa,ha,aa,oa,ya))return!1;fa.rings=aa;fa.spatialReference=oa;fa.hasZ=Na;fa.hasM=Oa;return!0}function R(aa,ha,fa,oa,ya=0){const {xmin:Ba,ymin:Na,xmax:Oa,ymax:ab,hasZ:Za,hasM:$a}=aa;if(!N(Ba,
Na,Za?aa.zmin:ya,ha,Qa,oa))return!1;fa.xmin=Qa[0];fa.ymin=Qa[1];Za&&(fa.zmin=Qa[2]);if(!N(Oa,ab,Za?aa.zmax:ya,ha,Qa,oa))return!1;fa.xmax=Qa[0];fa.ymax=Qa[1];Za&&(fa.zmax=Qa[2]);$a&&(fa.mmin=aa.mmin,fa.mmax=aa.mmax);fa.spatialReference=oa;return!0}function N(aa,ha,fa,oa,ya,Ba){Ta[0]=aa;Ta[1]=ha;Ta[2]=fa;return na(Ta,oa,0,ya,Ba,0,1)}function ba(aa,ha,fa,oa){if(I.isNone(ha)||I.isNone(oa)||2>aa.length)return!1;2===aa.length&&(Ta[0]=aa[0],Ta[1]=aa[1],Ta[2]=0,aa=Ta);return na(aa,ha,0,fa,oa,0,1)}function la(aa,
ha,fa){I.isNone(ha)?aa=!1:(ha=Ia(ha,fb),ha=ra[ha][6],I.isNone(ha)?aa=!1:(ha(aa,0,Ta,0),fa!==Ta&&(fa[0]=Ta[0],fa[1]=Ta[1],2<fa.length&&(fa[2]=Ta[2])),aa=!0));return aa}function na(aa,ha,fa,oa,ya,Ba,Na=1){ha=Aa(ha,ya,cb);if(I.isNone(ha))return!1;if(ha===da){if(aa===oa&&fa===Ba)return!0;Na=fa+3*Na;for(let Oa=fa,ab=Ba;Oa<Na;Oa++,ab++)oa[ab]=aa[Oa];return!0}Na=fa+3*Na;for(let Oa=fa,ab=Ba;Oa<Na;Oa+=3,ab+=3)ha(aa,Oa,oa,ab);return!0}function pa(aa,ha,fa,oa,ya,Ba,Na=0){const Oa=[];for(const ab of aa)for(const Za of ab)Oa.push(Za[0],
Za[1],ha?Za[2]:Na);if(!na(Oa,oa,0,Oa,Ba,0,Oa.length/3))return!1;oa=0;ya.length=0;for(const ab of aa){aa=[];for(const Za of ab)ha&&fa?aa.push([Oa[oa++],Oa[oa++],Oa[oa++],Za[3]]):ha?aa.push([Oa[oa++],Oa[oa++],Oa[oa++]]):(fa?aa.push([Oa[oa++],Oa[oa++],Za[2]]):aa.push([Oa[oa++],Oa[oa++]]),oa++);ya.push(aa)}return!0}function za(aa,ha,fa){const oa=Math.sin(ha);ha=Math.cos(ha);const ya=Math.sin(aa);aa=Math.cos(aa);fa[0]=-oa;fa[4]=-ya*ha;fa[8]=aa*ha;fa[12]=0;fa[1]=ha;fa[5]=-ya*oa;fa[9]=aa*oa;fa[13]=0;fa[2]=
0;fa[6]=aa;fa[10]=ya;fa[14]=0;fa[3]=0;fa[7]=0;fa[11]=0;fa[15]=1;return fa}function Ia(aa,ha){if(ha.spatialReference===aa)return ha.spatialReferenceId;ha.spatialReference=aa;"metersPerUnit"in ha&&(ha.metersPerUnit=G.getMetersPerUnitForSR(aa,1));return aa.wkt===r.SphericalECEFSpatialReference.wkt?ha.spatialReferenceId=1:m.isWGS84(aa)?ha.spatialReferenceId=2:m.isWebMercator(aa)?ha.spatialReferenceId=3:aa.wkt===r.WGS84ECEFSpatialReference.wkt?ha.spatialReferenceId=4:4490===aa.wkid?ha.spatialReferenceId=
5:aa.wkt===r.SphericalPCPFMars.wkt?ha.spatialReferenceId=7:aa.wkt===r.SphericalPCPFMoon.wkt?ha.spatialReferenceId=9:m.isMars(aa)?ha.spatialReferenceId=8:m.isMoon(aa)?ha.spatialReferenceId=10:ha.spatialReferenceId=0}function da(aa,ha,fa,oa){aa!==fa&&(fa[oa++]=aa[ha++],fa[oa++]=aa[ha++],fa[oa]=aa[ha])}function ja(aa,ha,fa,oa){fa[oa++]=Ua*(aa[ha++]/v.earth.radius);fa[oa++]=Ua*(Math.PI/2-2*Math.atan(Math.exp(-1*aa[ha++]/v.earth.radius)));fa[oa]=aa[ha]}function qa(aa,ha,fa,oa){ja(aa,ha,fa,oa);H(fa,oa,
fa,oa)}function Ca(aa,ha,fa,oa){ja(aa,ha,fa,oa);ma(fa,oa,fa,oa)}function xa(aa,ha,fa,oa,ya){var Ba=.4999999*Math.PI;Ba=y.clamp(Va*aa[ha+1],-Ba,Ba);Ba=Math.sin(Ba);fa[oa++]=Va*aa[ha]*ya.radius;fa[oa++]=ya.halfSemiMajorAxis*Math.log((1+Ba)/(1-Ba));fa[oa]=aa[ha+2]}function c(aa,ha,fa,oa){xa(aa,ha,fa,oa,v.earth)}function t(aa,ha,fa,oa,ya){ya+=aa[ha+2];const Ba=Va*aa[ha+1];aa=Va*aa[ha];ha=Math.cos(Ba);fa[oa++]=Math.cos(aa)*ha*ya;fa[oa++]=Math.sin(aa)*ha*ya;fa[oa]=Math.sin(Ba)*ya}function W(aa,ha,fa,oa){t(aa,
ha,fa,oa,v.moon.radius)}function u(aa,ha,fa,oa){t(aa,ha,fa,oa,v.mars.radius)}function H(aa,ha,fa,oa){t(aa,ha,fa,oa,v.earth.radius)}function T(aa,ha,fa,oa,ya){var Ba=aa[ha];const Na=aa[ha+1];ha=aa[ha+2];aa=Math.sqrt(Ba*Ba+Na*Na+ha*ha);ha=y.asinClamped(ha/(0===aa?1:aa));Ba=Math.atan2(Na,Ba);fa[oa++]=Ua*Ba;fa[oa++]=Ua*ha;fa[oa]=aa-ya}function U(aa,ha,fa,oa){T(aa,ha,fa,oa,v.moon.radius)}function ea(aa,ha,fa,oa){T(aa,ha,fa,oa,v.mars.radius)}function Y(aa,ha,fa,oa){T(aa,ha,fa,oa,v.earth.radius)}function ia(aa,
ha,fa,oa){Y(aa,ha,fa,oa);c(fa,oa,fa,oa)}function ka(aa,ha,fa,oa){Y(aa,ha,fa,oa);ma(fa,oa,fa,oa)}function ma(aa,ha,fa,oa){{var ya=v.earth;const Na=Va*aa[ha];var Ba=Va*aa[ha+1];aa=aa[ha+2];ha=Math.sin(Ba);Ba=Math.cos(Ba);const Oa=ya.radius/Math.sqrt(1-ya.eccentricitySquared*ha*ha);fa[oa++]=(Oa+aa)*Ba*Math.cos(Na);fa[oa++]=(Oa+aa)*Ba*Math.sin(Na);fa[oa++]=(Oa*(1-ya.eccentricitySquared)+aa)*ha}}function ua(aa,ha,fa,oa){var ya=P.earthEllipsoidConstants,Ba=aa[ha],Na=aa[ha+1];aa=aa[ha+2];let Oa;ha=Math.abs(aa);
var ab=Ba*Ba+Na*Na;var Za=Math.sqrt(ab);var $a=ab+aa*aa;var gb=Math.sqrt($a);Ba=Math.atan2(Na,Ba);var kb=aa*aa/$a;$a=ab/$a;Na=ya.a2/gb;ab=ya.a3-ya.a4/gb;.3<$a?(kb=ha/gb*(1+$a*(ya.a1+Na+kb*ab)/gb),gb=Math.asin(kb),Na=kb*kb,$a=Math.sqrt(1-Na)):($a=Za/gb*(1-kb*(ya.a5-Na-$a*ab)/gb),gb=Math.acos($a),Na=1-$a*$a,kb=Math.sqrt(Na));Oa=1-v.earth.eccentricitySquared*Na;Na=v.earth.radius/Math.sqrt(Oa);ya=ya.a6*Na;Na=Za-Na*$a;ab=ha-ya*kb;ha=$a*Na+kb*ab;Za=$a*ab-kb*Na;ya=Za/(ya/Oa+ha);gb+=ya;0>aa&&(gb=-gb);fa[oa++]=
Ua*Ba;fa[oa++]=Ua*gb;fa[oa]=ha+Za*ya/2}function ta(aa,ha,fa,oa){ua(aa,ha,fa,oa);H(fa,oa,fa,oa)}function wa(aa,ha,fa,oa){ua(aa,ha,fa,oa);c(fa,oa,fa,oa)}function Aa(aa,ha,fa=Ka()){return I.isNone(aa)||I.isNone(ha)?null:Da(aa,ha,fa).projector}function Da(aa,ha,fa){if(I.isNone(aa)||I.isNone(ha)||fa.source.spatialReference===aa&&fa.dest.spatialReference===ha)return fa;const oa=Ia(aa,fa.source),ya=Ia(ha,fa.dest);0===oa&&0===ya?m.equals(aa,ha)?fa.projector=da:fa.projector=null:fa.projector=ra[oa][ya];return fa}
function Ka(){return{source:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},projector:da}}let Fa=null,Ja=null,Ga=null,Ha={},Sa=function(aa){function ha(){return aa.call(this,"projection:not-loaded","projection engine not fully loaded yet, please call load()")||this}F._inheritsLoose(ha,aa);return ha}(q);const ra={[2]:{[5]:null,[8]:null,[10]:null,[6]:da,[1]:H,[7]:null,[9]:null,[0]:null,[3]:c,[2]:da,[4]:ma},[5]:{[5]:da,[8]:null,
[10]:null,[6]:da,[1]:H,[7]:null,[9]:null,[0]:null,[3]:null,[2]:null,[4]:ma},[8]:{[5]:null,[8]:da,[10]:null,[6]:null,[1]:null,[7]:u,[9]:null,[0]:null,[3]:null,[2]:null,[4]:null},[10]:{[5]:null,[8]:null,[10]:da,[6]:null,[1]:null,[7]:null,[9]:W,[0]:null,[3]:null,[2]:null,[4]:null},[3]:{[5]:null,[8]:null,[10]:null,[6]:ja,[1]:qa,[7]:null,[9]:null,[0]:null,[3]:da,[2]:ja,[4]:Ca},[4]:{[5]:ua,[8]:null,[10]:null,[6]:ua,[1]:ta,[7]:null,[9]:null,[0]:null,[3]:wa,[2]:ua,[4]:da},[1]:{[5]:Y,[8]:null,[10]:null,[6]:Y,
[1]:da,[7]:null,[9]:null,[0]:null,[3]:ia,[2]:Y,[4]:ka},[7]:{[5]:null,[8]:ea,[10]:null,[6]:null,[1]:null,[7]:da,[9]:null,[0]:null,[3]:null,[2]:null,[4]:null},[9]:{[5]:null,[8]:null,[10]:U,[6]:null,[1]:null,[7]:null,[9]:da,[0]:null,[3]:null,[2]:null,[4]:null},[0]:{[5]:null,[8]:null,[10]:null,[6]:null,[1]:null,[7]:null,[9]:null,[0]:da,[3]:null,[2]:null,[4]:null},[6]:{[5]:null,[8]:null,[10]:null,[6]:da,[1]:H,[7]:null,[9]:null,[0]:null,[3]:null,[2]:da,[4]:ma}},fb={spatialReference:null,spatialReferenceId:0},
hb={spatialReference:null,spatialReferenceId:0},cb=Ka(),a=Ka(),Va=y.deg2rad(1),Ua=y.rad2deg(1),Ta=C.create(),jb=C.create(),rb=C.create(),Qa=C.create(),xb=C.create();h.canProjectToWGS84ComparableLonLat=function(aa){if(I.isNone(aa))return!1;aa=Ia(aa,fb);return!!ra[aa][6]};h.canProjectWithoutEngine=p;h.computeLatLonToENURotation=za;h.computeLinearTransformation=function(aa,ha,fa,oa){if(I.isNone(aa)||I.isNone(oa))return!1;var ya=Ia(aa,fb),Ba=Ia(oa,hb);if(ya===Ba&&1!==Ba&&(0!==ya||m.equals(aa,oa)))return L.identity(fa),
L.translate(fa,fa,ha),!0;if(1===Ba||7===Ba||9===Ba){oa=aa=0;if(1===Ba){ya=ra[ya][6];Ba=ra[6][Ba];if(I.isNone(ya)||I.isNone(Ba))return!1;ya(ha,0,jb,0);Ba(jb,0,rb,0);aa=Va*jb[0];oa=Va*jb[1]}else if(7===Ba||9===Ba){Ba=ra[ya][Ba];if(I.isNone(Ba))return!1;Ba(ha,0,rb,0);aa=Va*ha[0];oa=Va*ha[1]}za(oa,aa,fa);fa[12]=rb[0];fa[13]=rb[1];fa[14]=rb[2];return!0}if(3===Ba&&(2===ya||1===ya)){Ba=ra[ya][6];if(I.isNone(Ba))return!1;Ba(ha,0,jb,0);ha=Va*jb[1];c(jb,0,rb,0);L.identity(fa);L.translate(fa,fa,rb);ha=1/Math.cos(ha);
L.scale(fa,fa,[ha,ha,1]);return!0}return!1};h.getProjectorName=function(aa,ha){switch(Aa(aa,ha,cb)){case da:return"copy3";case H:return"wgs84ToSphericalECEF";case c:return"wgs84ToWebMercator";case ma:return"wgs84ToWGS84ECEF";case ja:return"webMercatorToWGS84";case qa:return"webMercatorToSphericalECEF";case Ca:return"webMercatorToWGS84ECEF";case ua:return"wgs84ECEFToWGS84";case ta:return"wgs84ECEFToSphericalECEF";case wa:return"wgs84ECEFToWebMercator";case Y:return"sphericalECEFToWGS84";case ia:return"sphericalECEFToWebMercator";
case ea:return"sphericalMarsPCPFToMars2000";case U:return"sphericalMoonPCPFToMoon2000";case ka:return"sphericalECEFToWGS84ECEF";case u:return"mars2000ToSphericalPCPF";case W:return"moon2000ToSphericalPCPF";default:return null}};h.getTransformation=k;h.getTransformations=function(aa,ha,fa=null){if(I.isNone(Fa))throw new Sa;aa=Fa._getTransformationBySuitability(Ja,aa,ha,fa,null==fa?void 0:fa.spatialReference);if(null!==aa){ha=[];for(const oa of aa)ha.push(X.fromGE(oa));return ha}return[]};h.initializeProjection=
async function(aa,ha){if(!ca())for(const {source:fa,dest:oa,geographicTransformation:ya}of aa)if(!p(fa,oa,ya))return S(ha)};h.isLoaded=ca;h.isSupported=function(){return!0};h.load=S;h.localLinearScaleFactors=function(aa,ha,fa,oa){if(I.isNone(ha)||I.isNone(oa))return!1;const ya=Ia(ha,fb);var Ba=Ia(oa,hb);if(ya===Ba&&0!==ya||m.equals(ha,oa))return fa[0]=1,fa[1]=1,fa[2]=1,!0;if(1===ya){ha=b.length(aa);aa=ha/Math.sqrt(aa[0]*aa[0]+aa[1]*aa[1]);ha/=v.earth.radius;if(3===Ba)return fa[0]=aa*ha,fa[1]=aa*ha,
fa[2]=1,!0;if(2===Ba||5===Ba)return Ba=180/(v.earth.radius*Math.PI),fa[0]=Ba*aa*ha,fa[1]=Ba*ha,fa[2]=1,!0}return!1};h.lonLatToSphericalPCPF=function(aa,ha,fa,oa,ya=0){oa+=ya;ya=Math.cos(fa);aa[0]=Math.cos(ha)*ya*oa;aa[1]=Math.sin(ha)*ya*oa;aa[2]=Math.sin(fa)*oa};h.lonLatToWebMercatorComparable=xa;h.project=function(aa,ha,fa=null){return Array.isArray(aa)?0===aa.length?[]:D(Ja,aa,aa[0].spatialReference,ha,fa):D(Ja,[aa],aa.spatialReference,ha,fa)[0]};h.projectBoundingRect=function(aa,ha,fa,oa){if(null==
aa)return!1;if(m.equals(ha,oa))return O.set(fa,aa),!0;Ta[0]=aa[0];Ta[1]=aa[1];Ta[2]=0;if(!na(Ta,ha,0,Ta,oa,0,1))return!1;fa[0]=Ta[0];fa[1]=Ta[1];Ta[0]=aa[2];Ta[1]=aa[3];Ta[2]=0;if(!na(Ta,ha,0,Ta,oa,0,1))return!1;fa[2]=Ta[0];fa[3]=Ta[1];return!0};h.projectBoundingSphere=function(aa,ha,fa,oa){if(I.isNone(ha)||I.isNone(oa))return!1;ha=Da(ha,oa,a);if(ha.projector===da)return fa[0]=aa[0],fa[1]=aa[1],fa[2]=aa[2],fa[3]=aa[3],!0;if(I.isNone(ha.projector))return!1;const {source:ya,dest:Ba}=ha;if(3===Ba.spatialReferenceId){ha=
ra[ya.spatialReferenceId][2];if(I.isNone(ha))return!1;ha(aa,0,jb,0);ha=Math.abs(Va*jb[1])+Math.asin(aa[3]/(v.earth.radius+aa[2]));c(jb,0,fa,0);fa[3]=ha>.9999*Math.PI?Number.MAX_VALUE:1/Math.cos(ha)*aa[3];return!0}ha.projector(aa,0,fa,0);fa[3]=aa[3]*ya.metersPerUnit/Ba.metersPerUnit;return!0};h.projectBuffer=na;h.projectDirection=function(aa,ha,fa,oa,ya){b.copy(Qa,aa);b.add(xb,aa,ha);ba(Qa,fa,Qa,ya);ba(xb,fa,xb,ya);b.subtract(oa,xb,Qa);b.normalize(oa,oa)};h.projectExtent=function(aa,ha,fa=ha.spatialReference,
oa=0){return I.isNone(fa)?!1:R(aa,aa.spatialReference,ha,fa,oa)};h.projectMany=D;h.projectMultipoint=function(aa,ha,fa=ha.spatialReference,oa=0){return I.isNone(fa)?!1:g(aa,aa.spatialReference,ha,fa,oa)};h.projectPoint=function(aa,ha,fa=ha.spatialReference,oa=0){return I.isNone(fa)?!1:e(aa,aa.spatialReference,ha,fa,oa)};h.projectPointToVector=function(aa,ha,fa,oa=0){Qa[0]=aa.x;Qa[1]=aa.y;const ya=aa.z;Qa[2]=void 0!==ya?ya:oa;return na(Qa,aa.spatialReference,0,ha,fa,0,1)};h.projectPointToWGS84ComparableLonLat=
function(aa,ha){Qa[0]=aa.x;Qa[1]=aa.y;const fa=aa.z;Qa[2]=void 0!==fa?fa:0;return la(Qa,aa.spatialReference,ha)};h.projectPolygon=function(aa,ha,fa=ha.spatialReference,oa=0){return I.isNone(fa)?!1:A(aa,aa.spatialReference,ha,fa,oa)};h.projectPolyline=function(aa,ha,fa=ha.spatialReference,oa=0){return I.isNone(fa)?!1:f(aa,aa.spatialReference,ha,fa,oa)};h.projectVectorToDehydratedPoint=function(aa,ha,fa){return na(aa,ha,0,Qa,fa.spatialReference,0,1)?(fa.x=Qa[0],fa.y=Qa[1],fa.z=Qa[2],fa):null};h.projectVectorToPoint=
function(aa,ha,fa){if(I.isNone(ha)||I.isNone(fa))return null;const oa=new x({spatialReference:fa});return na(aa,ha,0,Qa,fa,0,1)?(oa.x=Qa[0],oa.y=Qa[1],oa.z=Qa[2],oa):null};h.projectVectorToVector=ba;h.projectVectorToWGS84ComparableLonLat=la;h.projectXYZToVector=N;h.sphericalPCPFtoLonLatElevation=T;h.unload=function(){Ga=Ja=Fa=null;Ha={}};Object.defineProperty(h,"__esModule",{value:!0})})},"esri/chunks/vec3f64":function(){define(["exports"],function(l){function h(){return[0,0,0]}function F(G){return[G[0],
G[1],G[2]]}function I(G,L,J){return[G,L,J]}function q(G){const L=h(),J=Math.min(3,G.length);for(let O=0;O<J;++O)L[O]=G[O];return L}function E(G,L){return new Float64Array(G,L,3)}function m(){return h()}function v(){return[1,1,1]}function x(){return[1,0,0]}function B(){return[0,1,0]}function Q(){return[0,0,1]}const V=h(),z=v(),y=x(),C=B(),b=Q();var r=Object.freeze({__proto__:null,create:h,clone:F,fromValues:I,fromArray:q,createView:E,zeros:m,ones:v,unitX:x,unitY:B,unitZ:Q,ZEROS:V,ONES:z,UNIT_X:y,UNIT_Y:C,
UNIT_Z:b});l.ONES=z;l.UNIT_X=y;l.UNIT_Y=C;l.UNIT_Z=b;l.ZEROS=V;l.clone=F;l.create=h;l.createView=E;l.fromArray=q;l.fromValues=I;l.ones=v;l.unitX=x;l.unitY=B;l.unitZ=Q;l.vec3f64=r;l.zeros=m})},"esri/chunks/vec3":function(){define(["exports","./vec3f64","./common"],function(l,h,F){function I(da){const ja=da[0],qa=da[1];da=da[2];return Math.sqrt(ja*ja+qa*qa+da*da)}function q(da,ja){da[0]=ja[0];da[1]=ja[1];da[2]=ja[2];return da}function E(da,ja,qa,Ca){da[0]=ja;da[1]=qa;da[2]=Ca;return da}function m(da,
ja,qa){da[0]=ja[0]+qa[0];da[1]=ja[1]+qa[1];da[2]=ja[2]+qa[2];return da}function v(da,ja,qa){da[0]=ja[0]-qa[0];da[1]=ja[1]-qa[1];da[2]=ja[2]-qa[2];return da}function x(da,ja,qa){da[0]=ja[0]*qa[0];da[1]=ja[1]*qa[1];da[2]=ja[2]*qa[2];return da}function B(da,ja,qa){da[0]=ja[0]/qa[0];da[1]=ja[1]/qa[1];da[2]=ja[2]/qa[2];return da}function Q(da,ja){da[0]=Math.ceil(ja[0]);da[1]=Math.ceil(ja[1]);da[2]=Math.ceil(ja[2]);return da}function V(da,ja){da[0]=Math.floor(ja[0]);da[1]=Math.floor(ja[1]);da[2]=Math.floor(ja[2]);
return da}function z(da,ja,qa){da[0]=Math.min(ja[0],qa[0]);da[1]=Math.min(ja[1],qa[1]);da[2]=Math.min(ja[2],qa[2]);return da}function y(da,ja,qa){da[0]=Math.max(ja[0],qa[0]);da[1]=Math.max(ja[1],qa[1]);da[2]=Math.max(ja[2],qa[2]);return da}function C(da,ja){da[0]=Math.round(ja[0]);da[1]=Math.round(ja[1]);da[2]=Math.round(ja[2]);return da}function b(da,ja,qa){da[0]=ja[0]*qa;da[1]=ja[1]*qa;da[2]=ja[2]*qa;return da}function r(da,ja,qa,Ca){da[0]=ja[0]+qa[0]*Ca;da[1]=ja[1]+qa[1]*Ca;da[2]=ja[2]+qa[2]*Ca;
return da}function G(da,ja){const qa=ja[0]-da[0],Ca=ja[1]-da[1];da=ja[2]-da[2];return Math.sqrt(qa*qa+Ca*Ca+da*da)}function L(da,ja){const qa=ja[0]-da[0],Ca=ja[1]-da[1];da=ja[2]-da[2];return qa*qa+Ca*Ca+da*da}function J(da){const ja=da[0],qa=da[1];da=da[2];return ja*ja+qa*qa+da*da}function O(da,ja){da[0]=-ja[0];da[1]=-ja[1];da[2]=-ja[2];return da}function P(da,ja){da[0]=1/ja[0];da[1]=1/ja[1];da[2]=1/ja[2];return da}function X(da,ja){var qa=ja[0];const Ca=ja[1],xa=ja[2];qa=qa*qa+Ca*Ca+xa*xa;0<qa&&
(qa=1/Math.sqrt(qa),da[0]=ja[0]*qa,da[1]=ja[1]*qa,da[2]=ja[2]*qa);return da}function ca(da,ja){return da[0]*ja[0]+da[1]*ja[1]+da[2]*ja[2]}function S(da,ja,qa){const Ca=ja[0],xa=ja[1];ja=ja[2];const c=qa[0],t=qa[1];qa=qa[2];da[0]=xa*qa-ja*t;da[1]=ja*c-Ca*qa;da[2]=Ca*t-xa*c;return da}function D(da,ja,qa,Ca){const xa=ja[0],c=ja[1];ja=ja[2];da[0]=xa+Ca*(qa[0]-xa);da[1]=c+Ca*(qa[1]-c);da[2]=ja+Ca*(qa[2]-ja);return da}function k(da,ja,qa,Ca,xa,c){const t=c*c,W=t*(2*c-3)+1,u=t*(c-2)+c,H=t*(c-1);c=t*(3-2*
c);da[0]=ja[0]*W+qa[0]*u+Ca[0]*H+xa[0]*c;da[1]=ja[1]*W+qa[1]*u+Ca[1]*H+xa[1]*c;da[2]=ja[2]*W+qa[2]*u+Ca[2]*H+xa[2]*c;return da}function p(da,ja,qa,Ca,xa,c){var t=1-c,W=t*t;const u=c*c,H=W*t;W*=3*c;t*=3*u;c*=u;da[0]=ja[0]*H+qa[0]*W+Ca[0]*t+xa[0]*c;da[1]=ja[1]*H+qa[1]*W+Ca[1]*t+xa[1]*c;da[2]=ja[2]*H+qa[2]*W+Ca[2]*t+xa[2]*c;return da}function n(da,ja){ja=ja||1;const qa=2*F.RANDOM()*Math.PI,Ca=2*F.RANDOM()-1,xa=Math.sqrt(1-Ca*Ca)*ja;da[0]=Math.cos(qa)*xa;da[1]=Math.sin(qa)*xa;da[2]=Ca*ja;return da}function e(da,
ja,qa){const Ca=ja[0],xa=ja[1];ja=ja[2];da[0]=qa[0]*Ca+qa[4]*xa+qa[8]*ja+qa[12];da[1]=qa[1]*Ca+qa[5]*xa+qa[9]*ja+qa[13];da[2]=qa[2]*Ca+qa[6]*xa+qa[10]*ja+qa[14];return da}function g(da,ja,qa){const Ca=ja[0],xa=ja[1];ja=ja[2];da[0]=Ca*qa[0]+xa*qa[3]+ja*qa[6];da[1]=Ca*qa[1]+xa*qa[4]+ja*qa[7];da[2]=Ca*qa[2]+xa*qa[5]+ja*qa[8];return da}function f(da,ja,qa){const Ca=qa[0],xa=qa[1],c=qa[2],t=ja[0],W=ja[1];ja=ja[2];let u=xa*ja-c*W,H=c*t-Ca*ja,T=Ca*W-xa*t;qa=2*qa[3];da[0]=t+u*qa+2*(xa*T-c*H);da[1]=W+H*qa+
2*(c*u-Ca*T);da[2]=ja+T*qa+2*(Ca*H-xa*u);return da}function A(da,ja,qa,Ca){const xa=[],c=[];xa[0]=ja[0]-qa[0];xa[1]=ja[1]-qa[1];xa[2]=ja[2]-qa[2];c[0]=xa[0];c[1]=xa[1]*Math.cos(Ca)-xa[2]*Math.sin(Ca);c[2]=xa[1]*Math.sin(Ca)+xa[2]*Math.cos(Ca);da[0]=c[0]+qa[0];da[1]=c[1]+qa[1];da[2]=c[2]+qa[2];return da}function R(da,ja,qa,Ca){const xa=[],c=[];xa[0]=ja[0]-qa[0];xa[1]=ja[1]-qa[1];xa[2]=ja[2]-qa[2];c[0]=xa[2]*Math.sin(Ca)+xa[0]*Math.cos(Ca);c[1]=xa[1];c[2]=xa[2]*Math.cos(Ca)-xa[0]*Math.sin(Ca);da[0]=
c[0]+qa[0];da[1]=c[1]+qa[1];da[2]=c[2]+qa[2];return da}function N(da,ja,qa,Ca){const xa=[],c=[];xa[0]=ja[0]-qa[0];xa[1]=ja[1]-qa[1];xa[2]=ja[2]-qa[2];c[0]=xa[0]*Math.cos(Ca)-xa[1]*Math.sin(Ca);c[1]=xa[0]*Math.sin(Ca)+xa[1]*Math.cos(Ca);c[2]=xa[2];da[0]=c[0]+qa[0];da[1]=c[1]+qa[1];da[2]=c[2]+qa[2];return da}function ba(da,ja){q(za,da);q(Ia,ja);X(za,za);X(Ia,Ia);da=ca(za,Ia);return 1<da?0:-1>da?Math.PI:Math.acos(da)}function la(da){return"vec3("+da[0]+", "+da[1]+", "+da[2]+")"}function na(da,ja){return da[0]===
ja[0]&&da[1]===ja[1]&&da[2]===ja[2]}function pa(da,ja){const qa=da[0],Ca=da[1];da=da[2];const xa=ja[0],c=ja[1];ja=ja[2];return Math.abs(qa-xa)<=F.EPSILON*Math.max(1,Math.abs(qa),Math.abs(xa))&&Math.abs(Ca-c)<=F.EPSILON*Math.max(1,Math.abs(Ca),Math.abs(c))&&Math.abs(da-ja)<=F.EPSILON*Math.max(1,Math.abs(da),Math.abs(ja))}const za=h.create(),Ia=h.create();h=Object.freeze({__proto__:null,length:I,copy:q,set:E,add:m,subtract:v,multiply:x,divide:B,ceil:Q,floor:V,min:z,max:y,round:C,scale:b,scaleAndAdd:r,
distance:G,squaredDistance:L,squaredLength:J,negate:O,inverse:P,normalize:X,dot:ca,cross:S,lerp:D,hermite:k,bezier:p,random:n,transformMat4:e,transformMat3:g,transformQuat:f,rotateX:A,rotateY:R,rotateZ:N,angle:ba,str:la,exactEquals:na,equals:pa,sub:v,mul:x,div:B,dist:G,sqrDist:L,len:I,sqrLen:J});l.add=m;l.angle=ba;l.bezier=p;l.ceil=Q;l.copy=q;l.cross=S;l.dist=G;l.distance=G;l.div=B;l.divide=B;l.dot=ca;l.equals=pa;l.exactEquals=na;l.floor=V;l.hermite=k;l.inverse=P;l.len=I;l.length=I;l.lerp=D;l.max=
y;l.min=z;l.mul=x;l.multiply=x;l.negate=O;l.normalize=X;l.random=n;l.rotateX=A;l.rotateY=R;l.rotateZ=N;l.round=C;l.scale=b;l.scaleAndAdd=r;l.set=E;l.sqrDist=L;l.sqrLen=J;l.squaredDistance=L;l.squaredLength=J;l.str=la;l.sub=v;l.subtract=v;l.transformMat3=g;l.transformMat4=e;l.transformQuat=f;l.vec3=h})},"esri/chunks/common":function(){define(["exports"],function(l){function h(x){return x*E}function F(x){return x*m}function I(x,B){return Math.abs(x-B)<=1E-6*Math.max(1,Math.abs(x),Math.abs(B))}const q=
Math.random,E=Math.PI/180,m=180/Math.PI;var v=Object.freeze({__proto__:null,EPSILON:1E-6,RANDOM:q,toRadian:h,toDegree:F,equals:I});l.EPSILON=1E-6;l.RANDOM=q;l.common=v;l.equals=I;l.toDegree=F;l.toRadian=h})},"esri/chunks/mat4":function(){define(["exports","./vec3f64","./common"],function(l,h,F){function I(c,t){c[0]=t[0];c[1]=t[1];c[2]=t[2];c[3]=t[3];c[4]=t[4];c[5]=t[5];c[6]=t[6];c[7]=t[7];c[8]=t[8];c[9]=t[9];c[10]=t[10];c[11]=t[11];c[12]=t[12];c[13]=t[13];c[14]=t[14];c[15]=t[15];return c}function q(c,
t,W,u,H,T,U,ea,Y,ia,ka,ma,ua,ta,wa,Aa,Da){c[0]=t;c[1]=W;c[2]=u;c[3]=H;c[4]=T;c[5]=U;c[6]=ea;c[7]=Y;c[8]=ia;c[9]=ka;c[10]=ma;c[11]=ua;c[12]=ta;c[13]=wa;c[14]=Aa;c[15]=Da;return c}function E(c){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function m(c,t){if(c===t){const W=t[1],u=t[2],H=t[3],T=t[6],U=t[7],ea=t[11];c[1]=t[4];c[2]=t[8];c[3]=t[12];c[4]=W;c[6]=t[9];c[7]=t[13];c[8]=u;c[9]=T;c[11]=t[14];c[12]=H;c[13]=U;c[14]=
ea}else c[0]=t[0],c[1]=t[4],c[2]=t[8],c[3]=t[12],c[4]=t[1],c[5]=t[5],c[6]=t[9],c[7]=t[13],c[8]=t[2],c[9]=t[6],c[10]=t[10],c[11]=t[14],c[12]=t[3],c[13]=t[7],c[14]=t[11],c[15]=t[15];return c}function v(c,t){const W=t[0],u=t[1],H=t[2],T=t[3],U=t[4],ea=t[5],Y=t[6],ia=t[7],ka=t[8],ma=t[9],ua=t[10],ta=t[11],wa=t[12],Aa=t[13],Da=t[14];t=t[15];const Ka=W*ea-u*U,Fa=W*Y-H*U,Ja=W*ia-T*U,Ga=u*Y-H*ea,Ha=u*ia-T*ea,Sa=H*ia-T*Y,ra=ka*Aa-ma*wa,fb=ka*Da-ua*wa,hb=ka*t-ta*wa,cb=ma*Da-ua*Aa,a=ma*t-ta*Aa,Va=ua*t-ta*Da;
let Ua=Ka*Va-Fa*a+Ja*cb+Ga*hb-Ha*fb+Sa*ra;if(!Ua)return null;Ua=1/Ua;c[0]=(ea*Va-Y*a+ia*cb)*Ua;c[1]=(H*a-u*Va-T*cb)*Ua;c[2]=(Aa*Sa-Da*Ha+t*Ga)*Ua;c[3]=(ua*Ha-ma*Sa-ta*Ga)*Ua;c[4]=(Y*hb-U*Va-ia*fb)*Ua;c[5]=(W*Va-H*hb+T*fb)*Ua;c[6]=(Da*Ja-wa*Sa-t*Fa)*Ua;c[7]=(ka*Sa-ua*Ja+ta*Fa)*Ua;c[8]=(U*a-ea*hb+ia*ra)*Ua;c[9]=(u*hb-W*a-T*ra)*Ua;c[10]=(wa*Ha-Aa*Ja+t*Ka)*Ua;c[11]=(ma*Ja-ka*Ha-ta*Ka)*Ua;c[12]=(ea*fb-U*cb-Y*ra)*Ua;c[13]=(W*cb-u*fb+H*ra)*Ua;c[14]=(Aa*Fa-wa*Ga-Da*Ka)*Ua;c[15]=(ka*Ga-ma*Fa+ua*Ka)*Ua;return c}
function x(c,t){const W=t[0],u=t[1],H=t[2],T=t[3],U=t[4],ea=t[5],Y=t[6],ia=t[7],ka=t[8],ma=t[9],ua=t[10],ta=t[11],wa=t[12],Aa=t[13],Da=t[14];t=t[15];c[0]=ea*(ua*t-ta*Da)-ma*(Y*t-ia*Da)+Aa*(Y*ta-ia*ua);c[1]=-(u*(ua*t-ta*Da)-ma*(H*t-T*Da)+Aa*(H*ta-T*ua));c[2]=u*(Y*t-ia*Da)-ea*(H*t-T*Da)+Aa*(H*ia-T*Y);c[3]=-(u*(Y*ta-ia*ua)-ea*(H*ta-T*ua)+ma*(H*ia-T*Y));c[4]=-(U*(ua*t-ta*Da)-ka*(Y*t-ia*Da)+wa*(Y*ta-ia*ua));c[5]=W*(ua*t-ta*Da)-ka*(H*t-T*Da)+wa*(H*ta-T*ua);c[6]=-(W*(Y*t-ia*Da)-U*(H*t-T*Da)+wa*(H*ia-T*Y));
c[7]=W*(Y*ta-ia*ua)-U*(H*ta-T*ua)+ka*(H*ia-T*Y);c[8]=U*(ma*t-ta*Aa)-ka*(ea*t-ia*Aa)+wa*(ea*ta-ia*ma);c[9]=-(W*(ma*t-ta*Aa)-ka*(u*t-T*Aa)+wa*(u*ta-T*ma));c[10]=W*(ea*t-ia*Aa)-U*(u*t-T*Aa)+wa*(u*ia-T*ea);c[11]=-(W*(ea*ta-ia*ma)-U*(u*ta-T*ma)+ka*(u*ia-T*ea));c[12]=-(U*(ma*Da-ua*Aa)-ka*(ea*Da-Y*Aa)+wa*(ea*ua-Y*ma));c[13]=W*(ma*Da-ua*Aa)-ka*(u*Da-H*Aa)+wa*(u*ua-H*ma);c[14]=-(W*(ea*Da-Y*Aa)-U*(u*Da-H*Aa)+wa*(u*Y-H*ea));c[15]=W*(ea*ua-Y*ma)-U*(u*ua-H*ma)+ka*(u*Y-H*ea);return c}function B(c){const t=c[0],
W=c[1],u=c[2],H=c[3],T=c[4],U=c[5],ea=c[6],Y=c[7],ia=c[8],ka=c[9],ma=c[10],ua=c[11],ta=c[12],wa=c[13],Aa=c[14];c=c[15];return(t*U-W*T)*(ma*c-ua*Aa)-(t*ea-u*T)*(ka*c-ua*wa)+(t*Y-H*T)*(ka*Aa-ma*wa)+(W*ea-u*U)*(ia*c-ua*ta)-(W*Y-H*U)*(ia*Aa-ma*ta)+(u*Y-H*ea)*(ia*wa-ka*ta)}function Q(c,t,W){const u=t[0],H=t[1],T=t[2],U=t[3],ea=t[4],Y=t[5],ia=t[6],ka=t[7],ma=t[8],ua=t[9],ta=t[10],wa=t[11],Aa=t[12],Da=t[13],Ka=t[14];t=t[15];let Fa=W[0],Ja=W[1],Ga=W[2],Ha=W[3];c[0]=Fa*u+Ja*ea+Ga*ma+Ha*Aa;c[1]=Fa*H+Ja*Y+Ga*
ua+Ha*Da;c[2]=Fa*T+Ja*ia+Ga*ta+Ha*Ka;c[3]=Fa*U+Ja*ka+Ga*wa+Ha*t;Fa=W[4];Ja=W[5];Ga=W[6];Ha=W[7];c[4]=Fa*u+Ja*ea+Ga*ma+Ha*Aa;c[5]=Fa*H+Ja*Y+Ga*ua+Ha*Da;c[6]=Fa*T+Ja*ia+Ga*ta+Ha*Ka;c[7]=Fa*U+Ja*ka+Ga*wa+Ha*t;Fa=W[8];Ja=W[9];Ga=W[10];Ha=W[11];c[8]=Fa*u+Ja*ea+Ga*ma+Ha*Aa;c[9]=Fa*H+Ja*Y+Ga*ua+Ha*Da;c[10]=Fa*T+Ja*ia+Ga*ta+Ha*Ka;c[11]=Fa*U+Ja*ka+Ga*wa+Ha*t;Fa=W[12];Ja=W[13];Ga=W[14];Ha=W[15];c[12]=Fa*u+Ja*ea+Ga*ma+Ha*Aa;c[13]=Fa*H+Ja*Y+Ga*ua+Ha*Da;c[14]=Fa*T+Ja*ia+Ga*ta+Ha*Ka;c[15]=Fa*U+Ja*ka+Ga*wa+Ha*t;
return c}function V(c,t,W){const u=W[0],H=W[1];W=W[2];let T=void 0,U=void 0,ea=void 0,Y=void 0,ia=void 0,ka=void 0,ma=void 0,ua=void 0,ta=void 0,wa=void 0,Aa=void 0,Da=void 0;t===c?(c[12]=t[0]*u+t[4]*H+t[8]*W+t[12],c[13]=t[1]*u+t[5]*H+t[9]*W+t[13],c[14]=t[2]*u+t[6]*H+t[10]*W+t[14],c[15]=t[3]*u+t[7]*H+t[11]*W+t[15]):(T=t[0],U=t[1],ea=t[2],Y=t[3],ia=t[4],ka=t[5],ma=t[6],ua=t[7],ta=t[8],wa=t[9],Aa=t[10],Da=t[11],c[0]=T,c[1]=U,c[2]=ea,c[3]=Y,c[4]=ia,c[5]=ka,c[6]=ma,c[7]=ua,c[8]=ta,c[9]=wa,c[10]=Aa,c[11]=
Da,c[12]=T*u+ia*H+ta*W+t[12],c[13]=U*u+ka*H+wa*W+t[13],c[14]=ea*u+ma*H+Aa*W+t[14],c[15]=Y*u+ua*H+Da*W+t[15]);return c}function z(c,t,W){const u=W[0],H=W[1];W=W[2];c[0]=t[0]*u;c[1]=t[1]*u;c[2]=t[2]*u;c[3]=t[3]*u;c[4]=t[4]*H;c[5]=t[5]*H;c[6]=t[6]*H;c[7]=t[7]*H;c[8]=t[8]*W;c[9]=t[9]*W;c[10]=t[10]*W;c[11]=t[11]*W;c[12]=t[12];c[13]=t[13];c[14]=t[14];c[15]=t[15];return c}function y(c,t,W,u){let H=u[0],T=u[1];u=u[2];let U=Math.sqrt(H*H+T*T+u*u);var ea=void 0,Y=void 0;let ia=void 0,ka=void 0,ma=void 0,ua=
void 0,ta=void 0,wa=void 0,Aa=void 0,Da=void 0,Ka=void 0,Fa=void 0,Ja=void 0,Ga=void 0,Ha=void 0,Sa=void 0,ra=void 0,fb=void 0,hb=void 0,cb=void 0,a=void 0,Va=void 0;Y=ea=void 0;if(U<F.EPSILON)return null;U=1/U;H*=U;T*=U;u*=U;ea=Math.sin(W);Y=Math.cos(W);ia=1-Y;ka=t[0];ma=t[1];ua=t[2];ta=t[3];wa=t[4];Aa=t[5];Da=t[6];Ka=t[7];Fa=t[8];Ja=t[9];Ga=t[10];Ha=t[11];Sa=H*H*ia+Y;ra=T*H*ia+u*ea;fb=u*H*ia-T*ea;hb=H*T*ia-u*ea;cb=T*T*ia+Y;a=u*T*ia+H*ea;Va=H*u*ia+T*ea;ea=T*u*ia-H*ea;Y=u*u*ia+Y;c[0]=ka*Sa+wa*ra+
Fa*fb;c[1]=ma*Sa+Aa*ra+Ja*fb;c[2]=ua*Sa+Da*ra+Ga*fb;c[3]=ta*Sa+Ka*ra+Ha*fb;c[4]=ka*hb+wa*cb+Fa*a;c[5]=ma*hb+Aa*cb+Ja*a;c[6]=ua*hb+Da*cb+Ga*a;c[7]=ta*hb+Ka*cb+Ha*a;c[8]=ka*Va+wa*ea+Fa*Y;c[9]=ma*Va+Aa*ea+Ja*Y;c[10]=ua*Va+Da*ea+Ga*Y;c[11]=ta*Va+Ka*ea+Ha*Y;t!==c&&(c[12]=t[12],c[13]=t[13],c[14]=t[14],c[15]=t[15]);return c}function C(c,t,W){const u=Math.sin(W);W=Math.cos(W);const H=t[4],T=t[5],U=t[6],ea=t[7],Y=t[8],ia=t[9],ka=t[10],ma=t[11];t!==c&&(c[0]=t[0],c[1]=t[1],c[2]=t[2],c[3]=t[3],c[12]=t[12],c[13]=
t[13],c[14]=t[14],c[15]=t[15]);c[4]=H*W+Y*u;c[5]=T*W+ia*u;c[6]=U*W+ka*u;c[7]=ea*W+ma*u;c[8]=Y*W-H*u;c[9]=ia*W-T*u;c[10]=ka*W-U*u;c[11]=ma*W-ea*u;return c}function b(c,t,W){const u=Math.sin(W);W=Math.cos(W);const H=t[0],T=t[1],U=t[2],ea=t[3],Y=t[8],ia=t[9],ka=t[10],ma=t[11];t!==c&&(c[4]=t[4],c[5]=t[5],c[6]=t[6],c[7]=t[7],c[12]=t[12],c[13]=t[13],c[14]=t[14],c[15]=t[15]);c[0]=H*W-Y*u;c[1]=T*W-ia*u;c[2]=U*W-ka*u;c[3]=ea*W-ma*u;c[8]=H*u+Y*W;c[9]=T*u+ia*W;c[10]=U*u+ka*W;c[11]=ea*u+ma*W;return c}function r(c,
t,W){const u=Math.sin(W);W=Math.cos(W);const H=t[0],T=t[1],U=t[2],ea=t[3],Y=t[4],ia=t[5],ka=t[6],ma=t[7];t!==c&&(c[8]=t[8],c[9]=t[9],c[10]=t[10],c[11]=t[11],c[12]=t[12],c[13]=t[13],c[14]=t[14],c[15]=t[15]);c[0]=H*W+Y*u;c[1]=T*W+ia*u;c[2]=U*W+ka*u;c[3]=ea*W+ma*u;c[4]=Y*W-H*u;c[5]=ia*W-T*u;c[6]=ka*W-U*u;c[7]=ma*W-ea*u;return c}function G(c,t){c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=t[0];c[13]=t[1];c[14]=t[2];c[15]=1;return c}function L(c,t){c[0]=t[0];
c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=t[1];c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=t[2];c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function J(c,t,W){let u=W[0],H=W[1];W=W[2];let T=Math.sqrt(u*u+H*H+W*W),U=void 0,ea=void 0,Y=void 0;if(T<F.EPSILON)return null;T=1/T;u*=T;H*=T;W*=T;U=Math.sin(t);ea=Math.cos(t);Y=1-ea;c[0]=u*u*Y+ea;c[1]=H*u*Y+W*U;c[2]=W*u*Y-H*U;c[3]=0;c[4]=u*H*Y-W*U;c[5]=H*H*Y+ea;c[6]=W*H*Y+u*U;c[7]=0;c[8]=u*W*Y+H*U;c[9]=H*W*Y-u*U;c[10]=W*W*Y+ea;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}
function O(c,t){const W=Math.sin(t);t=Math.cos(t);c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=t;c[6]=W;c[7]=0;c[8]=0;c[9]=-W;c[10]=t;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function P(c,t){const W=Math.sin(t);t=Math.cos(t);c[0]=t;c[1]=0;c[2]=-W;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=W;c[9]=0;c[10]=t;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function X(c,t){const W=Math.sin(t);t=Math.cos(t);c[0]=t;c[1]=W;c[2]=0;c[3]=0;c[4]=-W;c[5]=t;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=0;
c[13]=0;c[14]=0;c[15]=1;return c}function ca(c,t,W){var u=t[0],H=t[1],T=t[2],U=t[3],ea=u+u,Y=H+H;const ia=T+T;t=u*ea;const ka=u*Y;u*=ia;const ma=H*Y;H*=ia;T*=ia;ea*=U;Y*=U;U*=ia;c[0]=1-(ma+T);c[1]=ka+U;c[2]=u-Y;c[3]=0;c[4]=ka-U;c[5]=1-(t+T);c[6]=H+ea;c[7]=0;c[8]=u+Y;c[9]=H-ea;c[10]=1-(t+ma);c[11]=0;c[12]=W[0];c[13]=W[1];c[14]=W[2];c[15]=1;return c}function S(c,t){const W=xa,u=-t[0],H=-t[1],T=-t[2],U=t[3],ea=t[4],Y=t[5],ia=t[6],ka=t[7],ma=u*u+H*H+T*T+U*U;0<ma?(W[0]=2*(ea*U+ka*u+Y*T-ia*H)/ma,W[1]=2*
(Y*U+ka*H+ia*u-ea*T)/ma,W[2]=2*(ia*U+ka*T+ea*H-Y*u)/ma):(W[0]=2*(ea*U+ka*u+Y*T-ia*H),W[1]=2*(Y*U+ka*H+ia*u-ea*T),W[2]=2*(ia*U+ka*T+ea*H-Y*u));ca(c,t,W);return c}function D(c,t){c[0]=t[12];c[1]=t[13];c[2]=t[14];return c}function k(c,t){const W=t[0],u=t[1],H=t[2],T=t[4],U=t[5],ea=t[6],Y=t[8],ia=t[9];t=t[10];c[0]=Math.sqrt(W*W+u*u+H*H);c[1]=Math.sqrt(T*T+U*U+ea*ea);c[2]=Math.sqrt(Y*Y+ia*ia+t*t);return c}function p(c,t){const W=t[0]+t[5]+t[10];let u=0;0<W?(u=2*Math.sqrt(W+1),c[3]=.25*u,c[0]=(t[6]-t[9])/
u,c[1]=(t[8]-t[2])/u,c[2]=(t[1]-t[4])/u):t[0]>t[5]&&t[0]>t[10]?(u=2*Math.sqrt(1+t[0]-t[5]-t[10]),c[3]=(t[6]-t[9])/u,c[0]=.25*u,c[1]=(t[1]+t[4])/u,c[2]=(t[8]+t[2])/u):t[5]>t[10]?(u=2*Math.sqrt(1+t[5]-t[0]-t[10]),c[3]=(t[8]-t[2])/u,c[0]=(t[1]+t[4])/u,c[1]=.25*u,c[2]=(t[6]+t[9])/u):(u=2*Math.sqrt(1+t[10]-t[0]-t[5]),c[3]=(t[1]-t[4])/u,c[0]=(t[8]+t[2])/u,c[1]=(t[6]+t[9])/u,c[2]=.25*u);return c}function n(c,t,W,u){var H=t[0],T=t[1],U=t[2],ea=t[3],Y=H+H,ia=T+T,ka=U+U;t=H*Y;const ma=H*ia;H*=ka;const ua=T*
ia;T*=ka;U*=ka;Y*=ea;ia*=ea;ea*=ka;ka=u[0];const ta=u[1];u=u[2];c[0]=(1-(ua+U))*ka;c[1]=(ma+ea)*ka;c[2]=(H-ia)*ka;c[3]=0;c[4]=(ma-ea)*ta;c[5]=(1-(t+U))*ta;c[6]=(T+Y)*ta;c[7]=0;c[8]=(H+ia)*u;c[9]=(T-Y)*u;c[10]=(1-(t+ua))*u;c[11]=0;c[12]=W[0];c[13]=W[1];c[14]=W[2];c[15]=1;return c}function e(c,t,W,u,H){var T=t[0],U=t[1],ea=t[2],Y=t[3],ia=T+T,ka=U+U,ma=ea+ea;t=T*ia;var ua=T*ka,ta=T*ma;T=U*ka;U*=ma;var wa=ea*ma;ea=Y*ia;ka*=Y;const Aa=Y*ma;var Da=u[0],Ka=u[1];ma=u[2];u=H[0];Y=H[1];H=H[2];ia=(1-(T+wa))*
Da;const Fa=(ua+Aa)*Da;Da*=ta-ka;ua=(ua-Aa)*Ka;wa=(1-(t+wa))*Ka;Ka*=U+ea;ta=(ta+ka)*ma;U=(U-ea)*ma;t=(1-(t+T))*ma;c[0]=ia;c[1]=Fa;c[2]=Da;c[3]=0;c[4]=ua;c[5]=wa;c[6]=Ka;c[7]=0;c[8]=ta;c[9]=U;c[10]=t;c[11]=0;c[12]=W[0]+u-(ia*u+ua*Y+ta*H);c[13]=W[1]+Y-(Fa*u+wa*Y+U*H);c[14]=W[2]+H-(Da*u+Ka*Y+t*H);c[15]=1;return c}function g(c,t){var W=t[0],u=t[1],H=t[2];t=t[3];var T=W+W,U=u+u;const ea=H+H;W*=T;const Y=u*T;u*=U;const ia=H*T,ka=H*U;H*=ea;T*=t;U*=t;t*=ea;c[0]=1-u-H;c[1]=Y+t;c[2]=ia-U;c[3]=0;c[4]=Y-t;c[5]=
1-W-H;c[6]=ka+T;c[7]=0;c[8]=ia+U;c[9]=ka-T;c[10]=1-W-u;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c}function f(c,t,W,u,H,T,U){const ea=1/(W-t),Y=1/(H-u),ia=1/(T-U);c[0]=2*T*ea;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=2*T*Y;c[6]=0;c[7]=0;c[8]=(W+t)*ea;c[9]=(H+u)*Y;c[10]=(U+T)*ia;c[11]=-1;c[12]=0;c[13]=0;c[14]=U*T*2*ia;c[15]=0;return c}function A(c,t,W,u,H){t=1/Math.tan(t/2);let T=void 0;c[0]=t/W;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=t;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[11]=-1;c[12]=0;c[13]=0;c[15]=0;null!=H&&Infinity!==
H?(T=1/(u-H),c[10]=(H+u)*T,c[14]=2*H*u*T):(c[10]=-1,c[14]=-2*u);return c}function R(c,t,W,u){const H=Math.tan(t.upDegrees*Math.PI/180),T=Math.tan(t.downDegrees*Math.PI/180),U=Math.tan(t.leftDegrees*Math.PI/180);t=Math.tan(t.rightDegrees*Math.PI/180);const ea=2/(U+t),Y=2/(H+T);c[0]=ea;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=Y;c[6]=0;c[7]=0;c[8]=-((U-t)*ea*.5);c[9]=(H-T)*Y*.5;c[10]=u/(W-u);c[11]=-1;c[12]=0;c[13]=0;c[14]=u*W/(W-u);c[15]=0;return c}function N(c,t,W,u,H,T,U){const ea=1/(t-W),Y=1/(u-H),ia=1/(T-
U);c[0]=-2*ea;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=-2*Y;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=2*ia;c[11]=0;c[12]=(t+W)*ea;c[13]=(H+u)*Y;c[14]=(U+T)*ia;c[15]=1;return c}function ba(c,t,W,u){let H=void 0,T=void 0;var U=void 0,ea=void 0;let Y=void 0,ia=void 0;var ka=void 0,ma=void 0;let ua=void 0,ta=void 0;const wa=t[0],Aa=t[1];t=t[2];U=u[0];ea=u[1];u=u[2];ka=W[0];ma=W[1];W=W[2];if(Math.abs(wa-ka)<F.EPSILON&&Math.abs(Aa-ma)<F.EPSILON&&Math.abs(t-W)<F.EPSILON)return E(c);ka=wa-ka;ma=Aa-ma;ua=t-W;ta=1/Math.sqrt(ka*
ka+ma*ma+ua*ua);ka*=ta;ma*=ta;ua*=ta;H=ea*ua-u*ma;T=u*ka-U*ua;U=U*ma-ea*ka;(ta=Math.sqrt(H*H+T*T+U*U))?(ta=1/ta,H*=ta,T*=ta,U*=ta):U=T=H=0;ea=ma*U-ua*T;Y=ua*H-ka*U;ia=ka*T-ma*H;(ta=Math.sqrt(ea*ea+Y*Y+ia*ia))?(ta=1/ta,ea*=ta,Y*=ta,ia*=ta):ia=Y=ea=0;c[0]=H;c[1]=ea;c[2]=ka;c[3]=0;c[4]=T;c[5]=Y;c[6]=ma;c[7]=0;c[8]=U;c[9]=ia;c[10]=ua;c[11]=0;c[12]=-(H*wa+T*Aa+U*t);c[13]=-(ea*wa+Y*Aa+ia*t);c[14]=-(ka*wa+ma*Aa+ua*t);c[15]=1;return c}function la(c,t,W,u){const H=t[0],T=t[1];t=t[2];var U=u[0];const ea=u[1];
var Y=u[2];u=H-W[0];let ia=T-W[1];W=t-W[2];let ka=u*u+ia*ia+W*W;0<ka&&(ka=1/Math.sqrt(ka),u*=ka,ia*=ka,W*=ka);let ma=ea*W-Y*ia;Y=Y*u-U*W;U=U*ia-ea*u;ka=ma*ma+Y*Y+U*U;0<ka&&(ka=1/Math.sqrt(ka),ma*=ka,Y*=ka,U*=ka);c[0]=ma;c[1]=Y;c[2]=U;c[3]=0;c[4]=ia*U-W*Y;c[5]=W*ma-u*U;c[6]=u*Y-ia*ma;c[7]=0;c[8]=u;c[9]=ia;c[10]=W;c[11]=0;c[12]=H;c[13]=T;c[14]=t;c[15]=1;return c}function na(c){return"mat4("+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+", "+c[4]+", "+c[5]+", "+c[6]+", "+c[7]+", "+c[8]+", "+c[9]+", "+c[10]+", "+
c[11]+", "+c[12]+", "+c[13]+", "+c[14]+", "+c[15]+")"}function pa(c){return Math.sqrt(c[0]**2+c[1]**2+c[2]**2+c[3]**2+c[4]**2+c[5]**2+c[6]**2+c[7]**2+c[8]**2+c[9]**2+c[10]**2+c[11]**2+c[12]**2+c[13]**2+c[14]**2+c[15]**2)}function za(c,t,W){c[0]=t[0]+W[0];c[1]=t[1]+W[1];c[2]=t[2]+W[2];c[3]=t[3]+W[3];c[4]=t[4]+W[4];c[5]=t[5]+W[5];c[6]=t[6]+W[6];c[7]=t[7]+W[7];c[8]=t[8]+W[8];c[9]=t[9]+W[9];c[10]=t[10]+W[10];c[11]=t[11]+W[11];c[12]=t[12]+W[12];c[13]=t[13]+W[13];c[14]=t[14]+W[14];c[15]=t[15]+W[15];return c}
function Ia(c,t,W){c[0]=t[0]-W[0];c[1]=t[1]-W[1];c[2]=t[2]-W[2];c[3]=t[3]-W[3];c[4]=t[4]-W[4];c[5]=t[5]-W[5];c[6]=t[6]-W[6];c[7]=t[7]-W[7];c[8]=t[8]-W[8];c[9]=t[9]-W[9];c[10]=t[10]-W[10];c[11]=t[11]-W[11];c[12]=t[12]-W[12];c[13]=t[13]-W[13];c[14]=t[14]-W[14];c[15]=t[15]-W[15];return c}function da(c,t,W){c[0]=t[0]*W;c[1]=t[1]*W;c[2]=t[2]*W;c[3]=t[3]*W;c[4]=t[4]*W;c[5]=t[5]*W;c[6]=t[6]*W;c[7]=t[7]*W;c[8]=t[8]*W;c[9]=t[9]*W;c[10]=t[10]*W;c[11]=t[11]*W;c[12]=t[12]*W;c[13]=t[13]*W;c[14]=t[14]*W;c[15]=
t[15]*W;return c}function ja(c,t,W,u){c[0]=t[0]+W[0]*u;c[1]=t[1]+W[1]*u;c[2]=t[2]+W[2]*u;c[3]=t[3]+W[3]*u;c[4]=t[4]+W[4]*u;c[5]=t[5]+W[5]*u;c[6]=t[6]+W[6]*u;c[7]=t[7]+W[7]*u;c[8]=t[8]+W[8]*u;c[9]=t[9]+W[9]*u;c[10]=t[10]+W[10]*u;c[11]=t[11]+W[11]*u;c[12]=t[12]+W[12]*u;c[13]=t[13]+W[13]*u;c[14]=t[14]+W[14]*u;c[15]=t[15]+W[15]*u;return c}function qa(c,t){return c[0]===t[0]&&c[1]===t[1]&&c[2]===t[2]&&c[3]===t[3]&&c[4]===t[4]&&c[5]===t[5]&&c[6]===t[6]&&c[7]===t[7]&&c[8]===t[8]&&c[9]===t[9]&&c[10]===t[10]&&
c[11]===t[11]&&c[12]===t[12]&&c[13]===t[13]&&c[14]===t[14]&&c[15]===t[15]}function Ca(c,t){const W=c[0],u=c[1],H=c[2],T=c[3],U=c[4],ea=c[5],Y=c[6],ia=c[7],ka=c[8],ma=c[9],ua=c[10],ta=c[11],wa=c[12],Aa=c[13],Da=c[14];c=c[15];const Ka=t[0],Fa=t[1],Ja=t[2],Ga=t[3],Ha=t[4],Sa=t[5],ra=t[6],fb=t[7],hb=t[8],cb=t[9],a=t[10],Va=t[11],Ua=t[12],Ta=t[13],jb=t[14];t=t[15];return Math.abs(W-Ka)<=F.EPSILON*Math.max(1,Math.abs(W),Math.abs(Ka))&&Math.abs(u-Fa)<=F.EPSILON*Math.max(1,Math.abs(u),Math.abs(Fa))&&Math.abs(H-
Ja)<=F.EPSILON*Math.max(1,Math.abs(H),Math.abs(Ja))&&Math.abs(T-Ga)<=F.EPSILON*Math.max(1,Math.abs(T),Math.abs(Ga))&&Math.abs(U-Ha)<=F.EPSILON*Math.max(1,Math.abs(U),Math.abs(Ha))&&Math.abs(ea-Sa)<=F.EPSILON*Math.max(1,Math.abs(ea),Math.abs(Sa))&&Math.abs(Y-ra)<=F.EPSILON*Math.max(1,Math.abs(Y),Math.abs(ra))&&Math.abs(ia-fb)<=F.EPSILON*Math.max(1,Math.abs(ia),Math.abs(fb))&&Math.abs(ka-hb)<=F.EPSILON*Math.max(1,Math.abs(ka),Math.abs(hb))&&Math.abs(ma-cb)<=F.EPSILON*Math.max(1,Math.abs(ma),Math.abs(cb))&&
Math.abs(ua-a)<=F.EPSILON*Math.max(1,Math.abs(ua),Math.abs(a))&&Math.abs(ta-Va)<=F.EPSILON*Math.max(1,Math.abs(ta),Math.abs(Va))&&Math.abs(wa-Ua)<=F.EPSILON*Math.max(1,Math.abs(wa),Math.abs(Ua))&&Math.abs(Aa-Ta)<=F.EPSILON*Math.max(1,Math.abs(Aa),Math.abs(Ta))&&Math.abs(Da-jb)<=F.EPSILON*Math.max(1,Math.abs(Da),Math.abs(jb))&&Math.abs(c-t)<=F.EPSILON*Math.max(1,Math.abs(c),Math.abs(t))}const xa=h.create();h=Object.freeze({__proto__:null,copy:I,set:q,identity:E,transpose:m,invert:v,adjoint:x,determinant:B,
multiply:Q,translate:V,scale:z,rotate:y,rotateX:C,rotateY:b,rotateZ:r,fromTranslation:G,fromScaling:L,fromRotation:J,fromXRotation:O,fromYRotation:P,fromZRotation:X,fromRotationTranslation:ca,fromQuat2:S,getTranslation:D,getScaling:k,getRotation:p,fromRotationTranslationScale:n,fromRotationTranslationScaleOrigin:e,fromQuat:g,frustum:f,perspective:A,perspectiveFromFieldOfView:R,ortho:N,lookAt:ba,targetTo:la,str:na,frob:pa,add:za,subtract:Ia,multiplyScalar:da,multiplyScalarAndAdd:ja,exactEquals:qa,
equals:Ca,mul:Q,sub:Ia});l.add=za;l.adjoint=x;l.copy=I;l.determinant=B;l.equals=Ca;l.exactEquals=qa;l.frob=pa;l.fromQuat=g;l.fromQuat2=S;l.fromRotation=J;l.fromRotationTranslation=ca;l.fromRotationTranslationScale=n;l.fromRotationTranslationScaleOrigin=e;l.fromScaling=L;l.fromTranslation=G;l.fromXRotation=O;l.fromYRotation=P;l.fromZRotation=X;l.frustum=f;l.getRotation=p;l.getScaling=k;l.getTranslation=D;l.identity=E;l.invert=v;l.lookAt=ba;l.mat4=h;l.mul=Q;l.multiply=Q;l.multiplyScalar=da;l.multiplyScalarAndAdd=
ja;l.ortho=N;l.perspective=A;l.perspectiveFromFieldOfView=R;l.rotate=y;l.rotateX=C;l.rotateY=b;l.rotateZ=r;l.scale=z;l.set=q;l.str=na;l.sub=Ia;l.subtract=Ia;l.targetTo=la;l.translate=V;l.transpose=m})},"esri/chunks/pe":function(){define(["require","exports","./_rollupPluginBabelHelpers","../core/has","../assets"],function(l,h,F,I,q){function E(){return!!h._pe}function m(){return!!I("esri-wasm")}function v(){return y?y:y=(new Promise(function(b,r){l(["./pe-wasm"],b,r)})).then(function(b){return b.peWasm}).then(({default:b})=>
b({locateFile:r=>q.getAssetUrl(`esri/geometry/support/${r}`)})).then(b=>{x(b)})}function x(b){function r(J,O,P){J[O]=P(J[O])}h._pe=b;h.PeDefs.init();h.PeGTlistExtended.init();h.PeNotationMgrs.init();h.PeNotationUtm.init();h.PePCSInfo.init();h.PeGCSExtent=function(J){function O(){return J.apply(this,arguments)||this}F._inheritsLoose(O,J);O.prototype.destroy=function(){h._pe.destroy(this)};return O}(h._pe.PeGCSExtent);b=[h._pe.PeDatum,h._pe.PeGeogcs,h._pe.PeGeogtran,h._pe.PeObject,h._pe.PeParameter,
h._pe.PePrimem,h._pe.PeProjcs,h._pe.PeSpheroid,h._pe.PeUnit];for(var G of b)r(G.prototype,"getName",J=>function(){return J.call(this,Array(h.PeDefs.PE_NAME_MAX))});for(const J of[h._pe.PeGeogtran,h._pe.PeProjcs])r(J.prototype,"getParameters",O=>function(){const P=Array(h.PeDefs.PE_PARM_MAX);let X=O.call(this);for(let ca=0;ca<P.length;ca++){const S=h._pe.getValue(X,"*");P[ca]=S?h._pe.wrapPointer(S,h._pe.PeParameter):null;X+=Int32Array.BYTES_PER_ELEMENT}return P});r(h._pe.PeHorizon.prototype,"getCoord",
J=>function(){const O=this.getSize();if(!O)return null;const P=[],X=J.call(this);z(P,O,X);return P});r(h._pe.PeGTlistExtendedEntry.prototype,"getEntries",J=>{const O=h._pe._pe_getPeGTlistExtendedGTsSize();return function(){let P=null;var X=J.call(this);if(!h._pe.compare(X,h._pe.NULL)){P=[X];const ca=this.getSteps();if(1<ca){X=h._pe.getPointer(X);for(let S=1;S<ca;S++)P.push(h._pe.wrapPointer(X+O*S,h._pe.PeGTlistExtendedGTs))}}return P}});const L=h._pe._pe_getPeHorizonSize();G=J=>function(){let O=this._cache;
O||(this._cache=O=new Map);if(O.has(J))return O.get(J);let P=null;var X=J.call(this);if(!h._pe.compare(X,h._pe.NULL)){P=[X];const ca=X.getNump();if(1<ca){X=h._pe.getPointer(X);for(let S=1;S<ca;S++)P.push(h._pe.wrapPointer(X+L*S,h._pe.PeHorizon))}}O.set(J,P);return P};r(h._pe.PeProjcs.prototype,"horizonGcsGenerate",G);r(h._pe.PeProjcs.prototype,"horizonPcsGenerate",G);h._pe.PeObject.prototype.toString=function(J=h.PeDefs.PE_STR_OPTS_NONE){h._pe.ensureCache.prepare();const O=h._pe.getPointer(this),
P=h._pe.ensureInt8(Array(h.PeDefs.PE_BUFFER_MAX));return h._pe.UTF8ToString(h._pe._pe_object_to_string_ext(O,J,P))}}function B(b){if(b){var r=h._pe.getClass(b);r&&(r=h._pe.getCache(r))&&(b=h._pe.getPointer(b))&&delete r[b]}}function Q(b,r){const G=[];r=Array(r);for(let L=0;L<b;L++)G.push(h._pe.ensureInt8(r));return G}function V(b){let r;Array.isArray(b[0])?(r=[],b.forEach(G=>{r.push(G[0],G[1])})):r=b;return r}function z(b,r,G,L=!1){if(L)for(L=0;L<2*r;L++)b[L]=h._pe.getValue(G+L*Float64Array.BYTES_PER_ELEMENT,
"double");else{L=0===b.length;for(let J=0;J<r;J++)L&&(b[J]=Array(2)),b[J][0]=h._pe.getValue(G,"double"),b[J][1]=h._pe.getValue(G+Float64Array.BYTES_PER_ELEMENT,"double"),G+=2*Float64Array.BYTES_PER_ELEMENT}}let y;h._pe=null;(function(b){function r(J,O,P){h._pe.ensureCache.prepare();var X=V(P);const ca=P===X;X=h._pe.ensureFloat64(X);(J=h._pe._pe_geog_to_proj(h._pe.getPointer(J),O,X))&&z(P,O,X,ca);return J}function G(J,O,P){return L(J,O,P,0)}function L(J,O,P,X){h._pe.ensureCache.prepare();var ca=V(P);
const S=P===ca;ca=h._pe.ensureFloat64(ca);(J=h._pe._pe_proj_to_geog_center(h._pe.getPointer(J),O,ca,X))&&z(P,O,ca,S);return J}b.geogToProj=r;b.projGeog=function(J,O,P,X){switch(X){case h.PeDefs.PE_TRANSFORM_P_TO_G:return G(J,O,P);case h.PeDefs.PE_TRANSFORM_G_TO_P:return r(J,O,P)}return 0};b.projToGeog=G;b.projToGeogCenter=L})(h.PeCSTransformations||(h.PeCSTransformations={}));(function(b){b.init=function(){b.PE_BUFFER_MAX=h._pe.PeDefs.prototype.PE_BUFFER_MAX;b.PE_NAME_MAX=h._pe.PeDefs.prototype.PE_NAME_MAX;
b.PE_MGRS_MAX=h._pe.PeDefs.prototype.PE_MGRS_MAX;b.PE_USNG_MAX=h._pe.PeDefs.prototype.PE_USNG_MAX;b.PE_DD_MAX=h._pe.PeDefs.prototype.PE_DD_MAX;b.PE_DDM_MAX=h._pe.PeDefs.prototype.PE_DDM_MAX;b.PE_DMS_MAX=h._pe.PeDefs.prototype.PE_DMS_MAX;b.PE_UTM_MAX=h._pe.PeDefs.prototype.PE_UTM_MAX;b.PE_PARM_MAX=h._pe.PeDefs.prototype.PE_PARM_MAX;b.PE_TYPE_NONE=h._pe.PeDefs.prototype.PE_TYPE_NONE;b.PE_TYPE_GEOGCS=h._pe.PeDefs.prototype.PE_TYPE_GEOGCS;b.PE_TYPE_PROJCS=h._pe.PeDefs.prototype.PE_TYPE_PROJCS;b.PE_TYPE_GEOGTRAN=
h._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;b.PE_TYPE_COORDSYS=h._pe.PeDefs.prototype.PE_TYPE_COORDSYS;b.PE_TYPE_UNIT=h._pe.PeDefs.prototype.PE_TYPE_UNIT;b.PE_TYPE_LINUNIT=h._pe.PeDefs.prototype.PE_TYPE_LINUNIT;b.PE_STR_OPTS_NONE=h._pe.PeDefs.prototype.PE_STR_OPTS_NONE;b.PE_STR_AUTH_NONE=h._pe.PeDefs.prototype.PE_STR_AUTH_NONE;b.PE_STR_AUTH_TOP=h._pe.PeDefs.prototype.PE_STR_AUTH_TOP;b.PE_STR_NAME_CANON=h._pe.PeDefs.prototype.PE_STR_NAME_CANON;b.PE_PARM_X0=h._pe.PeDefs.prototype.PE_PARM_X0;b.PE_PARM_ND=
h._pe.PeDefs.prototype.PE_PARM_ND;b.PE_TRANSFORM_1_TO_2=h._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;b.PE_TRANSFORM_2_TO_1=h._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;b.PE_TRANSFORM_P_TO_G=h._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;b.PE_TRANSFORM_G_TO_P=h._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;b.PE_HORIZON_RECT=h._pe.PeDefs.prototype.PE_HORIZON_RECT;b.PE_HORIZON_POLY=h._pe.PeDefs.prototype.PE_HORIZON_POLY;b.PE_HORIZON_LINE=h._pe.PeDefs.prototype.PE_HORIZON_LINE;b.PE_HORIZON_DELTA=h._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(h.PeDefs||
(h.PeDefs={}));(function(b){function r(O,P){let X=null,ca=G[O];ca||(ca={},G[O]=ca);ca.hasOwnProperty(String(P))?X=ca[P]:(O=h._pe.PeFactory.prototype.factoryByType(O,P),h._pe.compare(O,h._pe.NULL)||(X=O,ca[P]=X));return X=J(X)}const G={},L={},J=O=>{if(O){const P=O.getType();switch(P){case h.PeDefs.PE_TYPE_GEOGCS:O=h._pe.castObject(O,h._pe.PeGeogcs);break;case h.PeDefs.PE_TYPE_PROJCS:O=h._pe.castObject(O,h._pe.PeProjcs);break;case h.PeDefs.PE_TYPE_GEOGTRAN:O=h._pe.castObject(O,h._pe.PeGeogtran);break;
default:P&h.PeDefs.PE_TYPE_UNIT&&(O=h._pe.castObject(O,h._pe.PeUnit))}}return O};b.initialize=function(){h._pe.PeFactory.prototype.initialize(null)};b.coordsys=function(O){return r(h.PeDefs.PE_TYPE_COORDSYS,O)};b.factoryByType=r;b.fromString=function(O,P){let X=null,ca=L[O];ca||(ca={},L[O]=ca);ca.hasOwnProperty(P)?X=ca[P]:(O=h._pe.PeFactory.prototype.fromString(O,P),h._pe.compare(O,h._pe.NULL)||(X=O,ca[P]=X));return X=J(X)};b.geogcs=function(O){return r(h.PeDefs.PE_TYPE_GEOGCS,O)};b.geogtran=function(O){return r(h.PeDefs.PE_TYPE_GEOGTRAN,
O)};b.getCode=function(O){return h._pe.PeFactory.prototype.getCode(O)};b.projcs=function(O){return r(h.PeDefs.PE_TYPE_PROJCS,O)};b.unit=function(O){return r(h.PeDefs.PE_TYPE_UNIT,O)}})(h.PeFactory||(h.PeFactory={}));h.PeGCSExtent=null;(function(b){let r;b.init=function(){b.PE_GTLIST_OPTS_COMMON=h._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;r=h._pe._pe_getPeGTlistExtendedEntrySize()};b.getGTlist=function(G,L,J,O,P,X){let ca=null;const S=new h._pe.PeInteger(X);try{const D=h._pe.PeGTlistExtended.prototype.getGTlist(G,
L,J,O,P,S);if(X=S.val)if(ca=[D],1<X){const k=h._pe.getPointer(D);for(G=1;G<X;G++)ca.push(h._pe.wrapPointer(k+r*G,h._pe.PeGTlistExtendedEntry))}}finally{h._pe.destroy(S)}return ca}})(h.PeGTlistExtended||(h.PeGTlistExtended={}));(function(b){b.destroy=function(r){if(r&&r.length){for(const G of r)B(G),G.getEntries().forEach(L=>{B(L);L=L.getGeogtran();B(L);L.getParameters().forEach(B);[L.getGeogcs1(),L.getGeogcs2()].forEach(J=>{B(J);const O=J.getDatum();B(O);B(O.getSpheroid());B(J.getPrimem());B(J.getUnit())})});
h._pe.PeGTlistExtendedEntry.prototype.Delete(r[0])}}})(h.PeGTlistExtendedEntry||(h.PeGTlistExtendedEntry={}));(function(b){b.geogToGeog=function(r,G,L,J,O){h._pe.ensureCache.prepare();var P=V(L);const X=L===P;P=h._pe.ensureFloat64(P);let ca=0;J&&(ca=h._pe.ensureFloat64(J));(r=h._pe._pe_geog_to_geog(h._pe.getPointer(r),G,P,ca,O))&&z(L,G,P,X);return r}})(h.PeGTTransformations||(h.PeGTTransformations={}));(function(b){const r=(L,J,O,P,X,ca)=>{h._pe.ensureCache.prepare();switch(L){case "dd":var S=h._pe._pe_geog_to_dd;
var D=h.PeDefs.PE_DD_MAX;break;case "ddm":S=h._pe._pe_geog_to_ddm;D=h.PeDefs.PE_DDM_MAX;break;case "dms":S=h._pe._pe_geog_to_dms,D=h.PeDefs.PE_DMS_MAX}L=0;J&&(L=h._pe.getPointer(J));J=V(P);J=h._pe.ensureFloat64(J);D=Q(O,D);P=h._pe.ensureInt32(D);if(X=S(L,O,J,X,P))for(S=0;S<O;S++)ca[S]=h._pe.UTF8ToString(D[S]);return X},G=(L,J,O,P,X)=>{h._pe.ensureCache.prepare();switch(L){case "dd":var ca=h._pe._pe_dd_to_geog;break;case "ddm":ca=h._pe._pe_ddm_to_geog;break;case "dms":ca=h._pe._pe_dms_to_geog}L=0;
J&&(L=h._pe.getPointer(J));J=P.map(S=>h._pe.ensureString(S));P=h._pe.ensureInt32(J);J=h._pe.ensureFloat64(Array(2*O));(ca=ca(L,O,P,J))&&z(X,O,J);return ca};b.geog_to_dms=function(L,J,O,P,X){return r("dms",L,J,O,P,X)};b.dms_to_geog=function(L,J,O,P){return G("dms",L,J,O,P)};b.geog_to_ddm=function(L,J,O,P,X){return r("ddm",L,J,O,P,X)};b.ddm_to_geog=function(L,J,O,P){return G("ddm",L,J,O,P)};b.geog_to_dd=function(L,J,O,P,X){return r("dd",L,J,O,P,X)};b.dd_to_geog=function(L,J,O,P){return G("dd",L,J,O,
P)}})(h.PeNotationDms||(h.PeNotationDms={}));(function(b){b.init=function(){b.PE_MGRS_STYLE_NEW=h._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;b.PE_MGRS_STYLE_OLD=h._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;b.PE_MGRS_STYLE_AUTO=h._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;b.PE_MGRS_180_ZONE_1_PLUS=h._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;b.PE_MGRS_ADD_SPACES=h._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};b.geog_to_mgrs_extended=function(r,G,L,J,O,P,X){h._pe.ensureCache.prepare();
let ca=0;r&&(ca=h._pe.getPointer(r));r=V(L);L=h._pe.ensureFloat64(r);r=Q(G,h.PeDefs.PE_MGRS_MAX);const S=h._pe.ensureInt32(r);if(J=h._pe._pe_geog_to_mgrs_extended(ca,G,L,J,O,P,S))for(O=0;O<G;O++)X[O]=h._pe.UTF8ToString(r[O]);return J};b.mgrs_to_geog_extended=function(r,G,L,J,O){h._pe.ensureCache.prepare();let P=0;r&&(P=h._pe.getPointer(r));r=L.map(X=>h._pe.ensureString(X));L=h._pe.ensureInt32(r);r=h._pe.ensureFloat64(Array(2*G));(J=h._pe._pe_mgrs_to_geog_extended(P,G,L,J,r))&&z(O,G,r);return J}})(h.PeNotationMgrs||
(h.PeNotationMgrs={}));(function(b){b.geog_to_usng=function(r,G,L,J,O,P,X){h._pe.ensureCache.prepare();let ca=0;r&&(ca=h._pe.getPointer(r));r=V(L);L=h._pe.ensureFloat64(r);r=Q(G,h.PeDefs.PE_MGRS_MAX);const S=h._pe.ensureInt32(r);if(J=h._pe._pe_geog_to_usng(ca,G,L,J,O,P,S))for(O=0;O<G;O++)X[O]=h._pe.UTF8ToString(r[O]);return J};b.usng_to_geog=function(r,G,L,J){h._pe.ensureCache.prepare();var O=0;r&&(O=h._pe.getPointer(r));r=L.map(P=>h._pe.ensureString(P));L=h._pe.ensureInt32(r);r=h._pe.ensureFloat64(Array(2*
G));(O=h._pe._pe_usng_to_geog(O,G,L,r))&&z(J,G,r);return O}})(h.PeNotationUsng||(h.PeNotationUsng={}));(function(b){b.init=function(){b.PE_UTM_OPTS_NONE=h._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;b.PE_UTM_OPTS_ADD_SPACES=h._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;b.PE_UTM_OPTS_NS=h._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};b.geog_to_utm=function(r,G,L,J,O){h._pe.ensureCache.prepare();var P=0;r&&(P=h._pe.getPointer(r));r=V(L);L=h._pe.ensureFloat64(r);r=Q(G,h.PeDefs.PE_UTM_MAX);const X=
h._pe.ensureInt32(r);if(J=h._pe._pe_geog_to_utm(P,G,L,J,X))for(P=0;P<G;P++)O[P]=h._pe.UTF8ToString(r[P]);return J};b.utm_to_geog=function(r,G,L,J,O){h._pe.ensureCache.prepare();let P=0;r&&(P=h._pe.getPointer(r));r=L.map(X=>h._pe.ensureString(X));L=h._pe.ensureInt32(r);r=h._pe.ensureFloat64(Array(2*G));(J=h._pe._pe_utm_to_geog(P,G,L,J,r))&&z(O,G,r);return J}})(h.PeNotationUtm||(h.PeNotationUtm={}));(function(b){const r=new Map;b.init=function(){b.PE_PCSINFO_OPTION_NONE=h._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;
b.PE_PCSINFO_OPTION_DOMAIN=h._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;b.PE_POLE_OUTSIDE_BOUNDARY=h._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;b.PE_POLE_POINT=h._pe.PePCSInfo.prototype.PE_POLE_POINT};b.generate=function(G,L=b.PE_PCSINFO_OPTION_DOMAIN){let J,O;r.has(G)&&(O=r.get(G),O[L]&&(J=O[L]));J||(J=h._pe.PePCSInfo.prototype.generate(G,L),O||(O=[],r.set(G,O)),O[L]=J);return J}})(h.PePCSInfo||(h.PePCSInfo={}));(function(b){b.version_string=function(){return h._pe.PeVersion.prototype.version_string()}})(h.PeVersion||
(h.PeVersion={}));var C=Object.freeze({__proto__:null,get _pe(){return h._pe},isLoaded:E,isSupported:m,load:v,get PeCSTransformations(){return h.PeCSTransformations},get PeDefs(){return h.PeDefs},get PeFactory(){return h.PeFactory},get PeGCSExtent(){return h.PeGCSExtent},get PeGTlistExtended(){return h.PeGTlistExtended},get PeGTlistExtendedEntry(){return h.PeGTlistExtendedEntry},get PeGTTransformations(){return h.PeGTTransformations},get PeNotationDms(){return h.PeNotationDms},get PeNotationMgrs(){return h.PeNotationMgrs},
get PeNotationUsng(){return h.PeNotationUsng},get PeNotationUtm(){return h.PeNotationUtm},get PePCSInfo(){return h.PePCSInfo},get PeVersion(){return h.PeVersion},_init:x});h._init=x;h.isLoaded=E;h.isSupported=m;h.load=v;h.pe=C})},"esri/assets":function(){define("exports ./config ./core/Logger ./core/Error ./core/urlUtils ./request".split(" "),function(l,h,F,I,q,E){function m(x){if(!h.assetsPath)throw v.errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),
new I("assets:path-not-set","config.assetsPath is not set");return q.join(h.assetsPath,x)}const v=F.getLogger("esri.assets");l.fetchAsset=function(x,B){return E(m(x),B)};l.getAssetUrl=m;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/geometry/support/geodesicConstants":function(){define(["exports","./Ellipsoid"],function(l,h){const F=Math.PI/180;var I=h.earth.radius;const q=h.earth.eccentricitySquared;I={a1:I*q,a2:I*q*I*q,a3:I*q*q/2,a4:I*q*I*q*2.5,a5:I*q+I*q*q/2,a6:1-q};h={4326:{a:h.earth.radius,
f:h.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,f:0},104902:{a:6051800,f:0},104903:{a:h.moon.radius,f:h.moon.flattening},104904:{a:3393400,f:.005207166853303471},104905:{a:h.mars.radius,f:h.mars.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1E4,f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},104914:{a:4E4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85E3,f:0},104918:{a:1821460,
f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,f:3},104922:{a:18E3,f:0},104923:{a:14E3,f:0},104924:{a:49300,f:0},104925:{a:60268E3,f:.09796243445941462},104926:{a:16E3,f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,f:0},104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,f:0},104938:{a:11E4,f:0},104939:{a:50100,f:0},104940:{a:764E3,f:0},104941:{a:11E3,f:0},104942:{a:529800,
f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},104945:{a:578900,f:0},104946:{a:33E3,f:0},104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,f:0},104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},104961:{a:74E3,f:0},104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},104964:{a:29E3,
f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,f:0},104968:{a:1352600,f:0},104969:{a:1195E3,f:0},104970:{a:593E3,f:0},104971:{a:h.mars.radius,f:0},104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};l.WKT_SPHEROID_REGEX=/SPHEROID\[([^\]]+)]/i;l.earthEllipsoidConstants=I;l.spheroids=h;l.toRadians=F;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/geometry/support/GeographicTransformation":function(){define(["./GeographicTransformationStep"],function(l){return function(){function h(I){this.steps=
[];this._cached_projection={};this._chain="";this._gtlistentry=null;if(I&&I.steps)for(const q of I.steps)q instanceof l?this.steps.push(q):this.steps.push(new l({wkid:q.wkid,wkt:q.wkt,isInverse:q.isInverse}))}h.cacheKey=function(I,q){return[void 0!==I.wkid&&null!==I.wkid?I.wkid.toString():"-1",void 0!==I.wkt&&null!==I.wkt?I.wkt.toString():"",void 0!==q.wkid&&null!==q.wkid?q.wkid.toString():"-1",void 0!==q.wkt&&null!==q.wkt?q.wkt.toString():""].join()};h.fromGE=function(I){const q=new h;let E="";for(const m of I.steps)I=
l.fromGE(m),q.steps.push(I),E+=I.uid.toString()+",";q._cached_projection={};q._gtlistentry=null;q._chain=E;return q};var F=h.prototype;F.getInverse=function(){const I=new h;I.steps=[];for(let q=this.steps.length-1;0<=q;q--)I.steps.push(this.steps[q].getInverse());return I};F.getGTListEntry=function(){let I="";for(const q of this.steps)I+=q.uid.toString()+",";I!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=I);return this._gtlistentry};F.assignCachedGe=function(I,q,E){this._cached_projection[h.cacheKey(I,
q)]=E};F.getCachedGeTransformation=function(I,q){let E="";for(const m of this.steps)E+=m.uid.toString()+",";E!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=E);I=this._cached_projection[h.cacheKey(I,q)];return void 0===I?null:I};return h}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(l){let h=0;return function(){function F(I=null){this.uid=h++;I?(this._wkt=void 0!==I.wkt?I.wkt:null,this._wkid=
void 0!==I.wkid?I.wkid:-1,this._isInverse=void 0!==I.isInverse?!0===I.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}F.fromGE=function(I){const q=new F;q._wkt=I.wkt;q._wkid=I.wkid;q._isInverse=I.isInverse;return q};F.prototype.getInverse=function(){const I=new F;I._wkt=this.wkt;I._wkid=this._wkid;I._isInverse=!this.isInverse;return I};l._createClass(F,[{key:"wkt",get:function(){return this._wkt},set:function(I){this._wkt=I;this.uid=h++}},{key:"wkid",get:function(){return this._wkid},
set:function(I){this._wkid=I;this.uid=h++}},{key:"isInverse",get:function(){return this._isInverse},set:function(I){this._isInverse=I;this.uid=h++}}]);return F}()})},"esri/geometry/geometryAdapters/json":function(){define(["exports"],function(l){let h=function(m,v,x){this.x=m;this.y=v;this.spatialReference=x;this.m=this.z=void 0},F=function(m,v,x,B){this.rings=m;this.spatialReference=v;this.hasM=this.hasZ=void 0;x&&(this.hasZ=x);B&&(this.hasM=B)},I=function(m,v,x,B){this.paths=m;this.spatialReference=
v;this.hasM=this.hasZ=void 0;x&&(this.hasZ=x);B&&(this.hasM=B)},q=function(m,v,x,B){this.points=m;this.spatialReference=v;this.hasM=this.hasZ=void 0;x&&(this.hasZ=x);B&&(this.hasM=B)},E=function(m,v,x,B,Q){this.xmin=m;this.ymin=v;this.xmax=x;this.ymax=B;this.spatialReference=Q;this.mmax=this.mmin=this.zmax=this.zmin=void 0};l.jsonAdapter={convertToGEGeometry:function(m,v){return null==v?null:m.convertJSONToGeometry(v)},exportPoint:function(m,v,x){x=new h(m.getPointX(v),m.getPointY(v),x);const B=m.hasZ(v),
Q=m.hasM(v);B&&(x.z=m.getPointZ(v));Q&&(x.m=m.getPointM(v));return x},exportPolygon:function(m,v,x){return new F(m.exportPaths(v),x,m.hasZ(v),m.hasM(v))},exportPolyline:function(m,v,x){return new I(m.exportPaths(v),x,m.hasZ(v),m.hasM(v))},exportMultipoint:function(m,v,x){return new q(m.exportPoints(v),x,m.hasZ(v),m.hasM(v))},exportExtent:function(m,v,x){var B=m.hasZ(v);const Q=m.hasM(v);x=new E(m.getXMin(v),m.getYMin(v),m.getXMax(v),m.getYMax(v),x);B&&(B=m.getZExtent(v),x.zmin=B.vmin,x.zmax=B.vmax);
Q&&(m=m.getMExtent(v),x.mmin=m.vmin,x.mmax=m.vmax);return x}};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/graphics/data/attributeSupport":function(){define(["exports","../../../core/Error","../../../core/sql/WhereClauseCache"],function(l,h,F){function I(x,B){return x?m.get(x,B):null}function q(x,B,Q,V=!0){const z=[];for(const y of B)if("*"!==y&&!x.has(y))if(V){B=E(y);try{const C=I(B,x);if(!C)throw new h("feature-store:unsupported-query","invalid SQL expression",{where:B});if(!C.isStandardized)throw new h("feature-store:unsupported-query",
"expression is not standard",{clause:C});q(x,C.fieldNames,"expression contains missing fields")}catch(C){if((B=C&&C.details)&&(B.clause||B.where))throw C;B&&B.missingFields?z.push(...B.missingFields):z.push(y)}}else z.push(y);if(z.length)throw new h("feature-store:unsupported-query",Q,{missingFields:z});}function E(x){return x.split(" as ")[0]}const m=new F.WhereClauseCache(50,500),v=new Set("esriFieldTypeOID esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong esriFieldTypeDate".split(" "));
l.getAliasFromFieldName=function(x){return x.split(" as ")[1]};l.getExpressionFromFieldName=E;l.getWhereClause=I;l.hasInvalidFieldType=function(x,B){return(x=B.get(x))?!v.has(x.type):!1};l.validateFields=q;l.validateHaving=function(x,B,Q){if(!B)return!0;const V=m.get(B,x);if(!V)throw new h("feature-store:unsupported-query","invalid SQL expression",{having:B});if(!V.isAggregate)throw new h("feature-store:unsupported-query","having does not contain a valid aggregate function",{having:B});q(x,V.fieldNames,
"having contains missing fields");if(!V.getExpressions().every(z=>{const {aggregateType:y,field:C}=z,b=x.has(C)&&x.get(C).name;return Q.some(r=>{const {onStatisticField:G,statisticType:L}=r;return(x.has(G)&&x.get(G).name)===b&&L.toLowerCase().trim()===y})}))throw new h("feature-store:unsupported-query","expressions in having should also exist in outStatistics",{having:B});return!0};l.validateWhere=function(x,B){if(!B)return!0;const Q=m.get(B,x);if(!Q)throw new h("feature-store:unsupported-query",
"invalid SQL expression",{where:B});if(!Q.isStandardized)throw new h("feature-store:unsupported-query","where clause is not standard",{where:B});q(x,Q.fieldNames,"where clause contains missing fields");return!0};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/core/sql/WhereClauseCache":function(){define(["exports","../ItemCache","./WhereClause"],function(l,h,F){let I=function(){function q(E,m){this._cache=new h(E);this._invalidCache=new h(m)}q.prototype.get=function(E,m){const v=`${m.uid}:${E}`,
x=this._cache.get(v);if(x)return x;if(void 0!==this._invalidCache.get(v))return null;try{const B=F.WhereClause.create(E,m);this._cache.put(v,B);return B}catch{return this._invalidCache.put(v,null),null}};return q}();l.WhereClauseCache=I;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/core/ItemCache":function(){define(["./MemCache"],function(l){return function(){function h(I,q){this._storage=new l.MemCacheStorage;this._storage.maxSize=I;q&&this._storage.registerRemoveFunc("",q)}var F=h.prototype;
F.put=function(I,q){this._storage.put(I,q,1,1)};F.pop=function(I){return this._storage.pop(I)};F.get=function(I){return this._storage.get(I)};F.clear=function(){this._storage.clearAll()};F.destroy=function(){this._storage.destroy()};return h}()})},"esri/core/sql/WhereClause":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../has ./AggregateFunctions ./StandardizedFunctions ./WhereGrammar".split(" "),function(l,h,F,I,q,E){function m(e,g){e+="";return e.length>=g?e:Array(g-e.length+
1).join("0")+e}function v(e,g,f="0",A="0",R="0",N="0",ba="",la="0",na="0"){return"+"===ba||"-"===ba?(e=`${m(parseInt(e,10),4)}-${m(parseInt(g,10),2)}-${m(parseInt(f,10),2)}`,g="",10>parseFloat(N)&&(g="0"),A=`${m(parseInt(A,10),2)}:${m(parseInt(R,10),2)}:${g+parseFloat(N).toString()}`,ba=`${ba}${m(parseInt(la,10),2)}:${m(parseInt(na,10),2)}`,new Date(e+"T"+A+ba)):new Date(parseInt(e,10),parseInt(g,10)-1,parseInt(f,10),parseInt(A,10),parseInt(R,10),parseFloat(N))}function x(e){let g=X.exec(e);if(null!==
g){const [,f,A,R,N,ba,la]=g;return v(f,A,R,N,ba,la)}g=ca.exec(e);if(null!==g){const [,f,A,R,N,ba,la,na,pa,za]=g;return v(f,A,R,N,ba,la,na,pa,za)}g=S.exec(e);if(null!==g){const [,f,A,R,N,ba,la,na,pa]=g;return v(f,A,R,N,ba,"0",la,na,pa)}g=D.exec(e);if(null!==g){const [,f,A,R,N,ba]=g;return v(f,A,R,N,ba)}g=P.exec(e);if(null!==g){const [,f,A,R]=g;return v(f,A,R)}throw Error("SQL Invalid Timestamp");}function B(e){e=P.exec(e);if(null===e)throw Error("SQL Invalid Date");const [,g,f,A]=e;return new Date(parseInt(g,
10),parseInt(f,10)-1,parseInt(A,10))}function Q(e){return Array.isArray(e)?e:[e]}function V(e){return null!==e?!0!==e:null}function z(e,g){return null!=e&&null!=g?!0===e&&!0===g:!1===e||!1===g?!1:null}function y(e,g){return null!=e&&null!=g?!0===e||!0===g:!0===e||!0===g?!0:null}function C(e,g){if(null==e)return null;let f=!1;for(const A of g)if(null==A)f=null;else if(e===A){f=!0;break}return f}function b(e,g,f){if(null==e)return null;let A="",R=0;for(let N=0;N<g.length;N++){const ba=g.charAt(N);switch(R){case 0:ba===
f?R=1:A=0<="-[]/{}()*+?.\\^$|".indexOf(ba)?A+("\\"+ba):"%"===ba?A+".*":"_"===ba?A+".":A+ba;break;case 1:A=0<="-[]/{}()*+?.\\^$|".indexOf(ba)?A+("\\"+ba):A+ba,R=0}}return(new RegExp("^"+A+"$")).test(e)}function r(e){return e instanceof Date?e.valueOf():e}function G(e,g,f){if(null==g||null==f)return null;g=r(g);f=r(f);switch(e){case "\x3c\x3e":return g!==f;case "\x3d":return g===f;case "\x3e":return g>f;case "\x3c":return g<f;case "\x3e\x3d":return g>=f;case "\x3c\x3d":return g<=f}}function L(e){const g=
[],f={};for(const A of e)e=A.toLowerCase(),void 0===f[e]&&(g.push(A),f[e]=1);return g}function J(e,g,f){if(g instanceof q.SqlInterval)if(f instanceof Date)switch(e){case "+":return new Date(g.valueInMilliseconds()+f.getTime());case "-":return g.valueInMilliseconds()-f.getTime();case "*":return g.valueInMilliseconds()*f.getTime();case "/":return g.valueInMilliseconds()/f.getTime()}else if(f instanceof q.SqlInterval)switch(e){case "+":return q.SqlInterval.createFromMilliseconds(g.valueInMilliseconds()+
f.valueInMilliseconds());case "-":return q.SqlInterval.createFromMilliseconds(g.valueInMilliseconds()-f.valueInMilliseconds());case "*":return g.valueInMilliseconds()*f.valueInMilliseconds();case "/":return g.valueInMilliseconds()/f.valueInMilliseconds()}else g=g.valueInMilliseconds();else if(f instanceof q.SqlInterval)if(g instanceof Date)switch(e){case "+":return new Date(f.valueInMilliseconds()+g.getTime());case "-":return new Date(g.getTime()-f.valueInMilliseconds());case "*":return g.getTime()*
f.valueInMilliseconds();case "/":return g.getTime()/f.valueInMilliseconds()}else f=f.valueInMilliseconds();else if(g instanceof Date&&"number"===typeof f)switch(f*=864E5,g=g.getTime(),e){case "+":return new Date(g+f);case "-":return new Date(g-f);case "*":return new Date(g*f);case "/":return new Date(g/f)}else if(f instanceof Date&&"number"===typeof g)switch(g*=864E5,f=f.getTime(),e){case "+":return new Date(g+f);case "-":return new Date(g-f);case "*":return new Date(g*f);case "/":return new Date(g/
f)}switch(e){case "+":return g+f;case "-":return g-f;case "*":return g*f;case "/":return g/f}}function O(e,g,f,A){e=A.getAttribute(e,g);return null!=e&&1===f[g]?new Date(e):e}const P=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,X=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,ca=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,S=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,D=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/;
let k=function(){function e(){}e.makeBool=function(g){return!0===g};e.featureValue=function(g,f,A,R){return O(g,f,A,R)};e.equalsNull=function(g){return null===g};e.applyLike=function(g,f,A){return b(g,f,A)};e.ensureArray=function(g){return Q(g)};e.applyIn=function(g,f){return C(g,f)};e.currentDate=function(){const g=new Date;g.setHours(0,0,0,0);return g};e.makeSqlInterval=function(g,f,A){return q.SqlInterval.createFromValueAndQualifer(g,f,A)};e.convertInterval=function(g){return g instanceof q.SqlInterval?
g.valueInMilliseconds():g};e.currentTimestamp=function(){return new Date};e.compare=function(g,f,A){return G(g,f,A)};e.calculate=function(g,f,A){return J(g,f,A)};e.makeComparable=function(g){return r(g)};e.evaluateFunction=function(g,f){return q.evaluateFunction(g,f)};e.lookup=function(g,f){g=f[g];return void 0===g?null:g};e.between=function(g,f){return null==g||null==f[0]||null==f[1]?null:g>=f[0]&&g<=f[1]};e.notbetween=function(g,f){return null==g||null==f[0]||null==f[1]?null:g<f[0]||g>f[1]};e.ternaryNot=
function(g){return V(g)};e.ternaryAnd=function(g,f){return z(g,f)};e.ternaryOr=function(g,f){return y(g,f)};return e}(),p=function(){function e(f,A){this.fieldsIndex=A;this.datefields={};this.parameters={};this.parseTree=E.WhereGrammar.parse(f);const {isStandardized:R,isAggregate:N,referencedFieldNames:ba}=this.extractExpressionInfo(A);this.referencedFieldNames=ba;this.isStandardized=R;this.isAggregate=N}e.create=function(f,A){return new e(f,A)};var g=e.prototype;g.testSet=function(f,A=n){const R=
{};for(const N of this.fieldNames)R[N]=f.map(ba=>A.getAttribute(ba,N));return!!this.evaluateNode(this.parseTree,{attributes:R},n)};g.calculateValue=function(f,A=n){f=this.evaluateNode(this.parseTree,f,A);return f instanceof q.SqlInterval?f.valueInMilliseconds()/864E5:f};g.calculateValueCompiled=function(f,A=n){if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(f,this.parameters,A,this.datefields);if(F("csp-restrictions"))return this.calculateValue(f,A);this.compileMe();
return this.parseTree._compiledVersion(f,this.parameters,A,this.datefields)};g.testFeature=function(f,A=n){return!!this.evaluateNode(this.parseTree,f,A)};g.testFeatureCompiled=function(f,A=n){if(null!=this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(f,this.parameters,A,this.datefields);if(F("csp-restrictions"))return this.testFeature(f,A);this.compileMe();return!!this.parseTree._compiledVersion(f,this.parameters,A,this.datefields)};g.getFunctions=function(){const f=[];this.visitAll(this.parseTree,
A=>{"function"===A.type&&f.push(A.name.toLowerCase())});return L(f)};g.getExpressions=function(){const f=new Map;this.visitAll(this.parseTree,A=>{if("function"===A.type){const R=A.name.toLowerCase();A=A.args.value[0];if("column_ref"===A.type){A=A.column;const N=`${R}-${A}`;f.has(N)||f.set(N,{aggregateType:R,field:A})}}});return[...f.values()]};g.getVariables=function(){const f=[];this.visitAll(this.parseTree,A=>{"param"===A.type&&f.push(A.value.toLowerCase())});return L(f)};g.compileMe=function(){const f=
"return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=(new Function("feature","lookups","attributeAdapter","datefields",f)).bind(k)};g.extractExpressionInfo=function(f){const A=[];let R=!0,N=!0;this.visitAll(this.parseTree,ba=>{switch(ba.type){case "column_ref":{const la=f.get(ba.column),na=la&&la.name;!la||"date"!==la.type&&"esriFieldTypeDate"!==la.type||(this.datefields[la.name]=1);void 0!==na?(A.push(na),ba.column=na):A.push(ba.column);
break}case "function":{const {name:la,args:na}=ba;ba=na.value.length;R&&(R=q.isStandardized(la,ba));N&&(N=I.isAggregate(la,ba))}}});return{referencedFieldNames:L(A),isStandardized:R,isAggregate:N}};g.visitAll=function(f,A){if(null!=f)switch(A(f),f.type){case "when_clause":this.visitAll(f.operand,A);this.visitAll(f.value,A);break;case "case_expression":for(const R of f.clauses)this.visitAll(R,A);"simple"===f.format&&this.visitAll(f.operand,A);null!==f.else&&this.visitAll(f.else,A);break;case "expr_list":for(const R of f.value)this.visitAll(R,
A);break;case "unary_expr":this.visitAll(f.expr,A);break;case "binary_expr":this.visitAll(f.left,A);this.visitAll(f.right,A);break;case "function":this.visitAll(f.args,A)}};g.evaluateNodeToJavaScript=function(f){switch(f.type){case "interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(f.value)+", "+JSON.stringify(f.qualifier)+","+JSON.stringify(f.op)+")";case "case_expression":var A="";if("simple"===f.format){var R="this.makeComparable("+this.evaluateNodeToJavaScript(f.operand)+")";
A="( ";for(let N=0;N<f.clauses.length;N++)A+=" ("+R+" \x3d\x3d\x3d this.makeComparable("+this.evaluateNodeToJavaScript(f.clauses[N].operand)+")) ? ("+this.evaluateNodeToJavaScript(f.clauses[N].value)+") : "}else for(A="( ",R=0;R<f.clauses.length;R++)A+=" this.makeBool("+this.evaluateNodeToJavaScript(f.clauses[R].operand)+")\x3d\x3d\x3dtrue ? ("+this.evaluateNodeToJavaScript(f.clauses[R].value)+") : ";A=null!==f.else?A+this.evaluateNodeToJavaScript(f.else):A+"null";return A+=" )";case "param":return"this.lookup("+
JSON.stringify(f.value.toLowerCase())+",lookups)";case "expr_list":A="[";for(R of f.value)"["!==A&&(A+=","),A+=this.evaluateNodeToJavaScript(R);return A+="]";case "unary_expr":return"this.ternaryNot("+this.evaluateNodeToJavaScript(f.expr)+")";case "binary_expr":switch(f.operator){case "AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(f.left)+","+this.evaluateNodeToJavaScript(f.right)+" )";case "OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(f.left)+","+this.evaluateNodeToJavaScript(f.right)+
" )";case "IS":if("null"!==f.right.type)throw Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(f.left)+")";case "ISNOT":if("null"!==f.right.type)throw Error("Unsupported RHS for IS");return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(f.left)+")))";case "IN":return"this.applyIn("+this.evaluateNodeToJavaScript(f.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(f.right)+"))";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(f.left)+
",this.ensureArray("+this.evaluateNodeToJavaScript(f.right)+")))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(f.left)+","+this.evaluateNodeToJavaScript(f.right)+")";case "NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(f.left)+","+this.evaluateNodeToJavaScript(f.right)+")";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(f.left)+","+this.evaluateNodeToJavaScript(f.right)+","+JSON.stringify(f.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+
this.evaluateNodeToJavaScript(f.left)+","+this.evaluateNodeToJavaScript(f.right)+","+JSON.stringify(f.escape)+"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+JSON.stringify(f.operator)+","+this.evaluateNodeToJavaScript(f.left)+","+this.evaluateNodeToJavaScript(f.right)+")";case "*":case "-":case "+":case "/":return"this.calculate("+JSON.stringify(f.operator)+","+this.evaluateNodeToJavaScript(f.left)+","+this.evaluateNodeToJavaScript(f.right)+
")"}throw Error("Not Supported Operator "+f.operator);case "null":case "bool":case "string":case "number":return JSON.stringify(f.value);case "date":return"(new Date("+B(f.value).getTime().toString()+"))";case "timestamp":return"(new Date("+x(f.value).getTime().toString()+"))";case "current_time":return"date"===f.mode?"this.currentDate()":"this.currentTimestamp()";case "column_ref":return"this.featureValue(feature,"+JSON.stringify(f.column)+",datefields,attributeAdapter)";case "function":return"this.evaluateFunction("+
JSON.stringify(f.name)+","+this.evaluateNodeToJavaScript(f.args)+")"}throw Error("Unsupported sql syntax "+f.type);};g.evaluateNode=function(f,A,R){switch(f.type){case "interval":return A=this.evaluateNode(f.value,A,R),q.SqlInterval.createFromValueAndQualifer(A,f.qualifier,f.op);case "case_expression":if("simple"===f.format){var N=r(this.evaluateNode(f.operand,A,R));for(var ba=0;ba<f.clauses.length;ba++)if(N===r(this.evaluateNode(f.clauses[ba].operand,A,R)))return this.evaluateNode(f.clauses[ba].value,
A,R)}else for(N=0;N<f.clauses.length;N++)if(!0===this.evaluateNode(f.clauses[N].operand,A,R))return this.evaluateNode(f.clauses[N].value,A,R);return null!==f.else?this.evaluateNode(f.else,A,R):null;case "param":return this.parameters[f.value.toLowerCase()];case "expr_list":N=[];for(ba of f.value)N.push(this.evaluateNode(ba,A,R));return N;case "unary_expr":return V(this.evaluateNode(f.expr,A,R));case "binary_expr":switch(f.operator){case "AND":return z(this.evaluateNode(f.left,A,R),this.evaluateNode(f.right,
A,R));case "OR":return y(this.evaluateNode(f.left,A,R),this.evaluateNode(f.right,A,R));case "IS":if("null"!==f.right.type)throw Error("Unsupported RHS for IS");return null===this.evaluateNode(f.left,A,R);case "ISNOT":if("null"!==f.right.type)throw Error("Unsupported RHS for IS");return null!==this.evaluateNode(f.left,A,R);case "IN":return N=Q(this.evaluateNode(f.right,A,R)),C(this.evaluateNode(f.left,A,R),N);case "NOT IN":return N=Q(this.evaluateNode(f.right,A,R)),V(C(this.evaluateNode(f.left,A,R),
N));case "BETWEEN":return N=this.evaluateNode(f.left,A,R),f=this.evaluateNode(f.right,A,R),null==N||null==f[0]||null==f[1]?null:N>=r(f[0])&&N<=r(f[1]);case "NOTBETWEEN":return N=this.evaluateNode(f.left,A,R),f=this.evaluateNode(f.right,A,R),null==N||null==f[0]||null==f[1]?null:N<r(f[0])||N>r(f[1]);case "LIKE":return b(this.evaluateNode(f.left,A,R),this.evaluateNode(f.right,A,R),f.escape);case "NOT LIKE":return V(b(this.evaluateNode(f.left,A,R),this.evaluateNode(f.right,A,R),f.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return G(f.operator,
this.evaluateNode(f.left,A,R),this.evaluateNode(f.right,A,R));case "-":case "+":case "*":case "/":return J(f.operator,this.evaluateNode(f.left,A,R),this.evaluateNode(f.right,A,R))}case "null":case "bool":case "string":case "number":return f.value;case "date":return B(f.value);case "timestamp":return x(f.value);case "current_time":return A=new Date,"date"===f.mode&&A.setHours(0,0,0,0),A;case "column_ref":return O(A,f.column,this.datefields,R);case "function":return A=this.evaluateNode(f.args,A,R),
this.isAggregate?I.aggregateFunction(f.name,A):q.evaluateFunction(f.name,A)}throw Error("Unsupported sql syntax "+f.type);};h._createClass(e,[{key:"fieldNames",get:function(){return this.referencedFieldNames}}]);return e}();const n={getAttribute(e,g){return(e&&"object"===typeof e.attributes?e.attributes:e)[g]}};l.WhereClause=p;l.defaultAttributeAdapter=n;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/core/sql/AggregateFunctions":function(){define(["exports"],function(l){function h(q){let E=
0;for(let m=0;m<q.length;m++)E+=q[m];return E/q.length}function F(q){const E=h(q),m=q.length;let v=0;for(const x of q)v+=(x-E)**2;return 1<m?v/(m-1):0}const I={min:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.min.apply(Math,q[0])},max:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.max.apply(Math,q[0])},avg:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:h(q[0])},sum:{minParams:1,maxParams:1,evaluate:q=>{if(null==q[0])q=null;else{{q=q[0];let E=0;for(let m=0;m<q.length;m++)E+=
q[m];q=E}}return q}},stddev:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.sqrt(F(q[0]))},count:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:q[0].length},var:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:F(q[0])}};l.aggregateFunction=function(q,E){const m=I[q.toLowerCase()];if(null==m)throw Error("Function Not Recognised");if(E.length<m.minParams||E.length>m.maxParams)throw Error(`Invalid Parameter count for call to ${q.toUpperCase()}`);return m.evaluate(E)};l.isAggregate=
function(q,E){q=I[q.toLowerCase()];return null!=q&&E>=q.minParams&&E<=q.maxParams};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/core/sql/StandardizedFunctions":function(){define(["exports","../string"],function(l,h){let F=function(){function q(){this.op="+";this.minute=this.year=this.month=this.hour=this.second=this.day=0}q.fixDefaults=function(E){if(null!==E.precision||null!==E.secondary)throw Error("Primary and Secondary SqlInterval qualifiers not supported");};q.createFromMilliseconds=
function(E){const m=new q;m.second=E/1E3;return m};q.createFromValueAndQualifer=function(E,m,v){let x=null;const B=new q;B.op="-"===v?"-":"+";if("interval-period"===m.type){q.fixDefaults(m);if("year"===m.period||"month"===m.period)throw Error("Year-Month Intervals not supported");if(/^[0-9]{1,}$/.test(E))B[m.period]=parseFloat(E);else throw Error("Illegal Interval");}else{q.fixDefaults(m.start);q.fixDefaults(m.end);if("year"===m.start.period||"month"===m.start.period)throw Error("Year-Month Intervals not supported");
if("year"===m.end.period||"month"===m.end.period)throw Error("Year-Month Intervals not supported");switch(m.start.period){case "day":switch(m.end.period){case "hour":x=/^[0-9]{1,} [0-9]{1,}$/;if(x.test(E))B[m.start.period]=parseFloat(E.split(" ")[0]),B[m.end.period]=parseFloat(E.split(" ")[1]);else throw Error("Illegal Interval");break;case "minute":x=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$/;if(x.test(E))B[m.start.period]=parseFloat(E.split(" ")[0]),E=E.split(" ")[1].split(":"),B.hour=parseFloat(E[0]),
B.minute=parseFloat(E[1]);else throw Error("Illegal Interval");break;case "second":x=/^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(x.test(E))B[m.start.period]=parseFloat(E.split(" ")[0]),E=E.split(" ")[1].split(":"),B.hour=parseFloat(E[0]),B.minute=parseFloat(E[1]),B.second=parseFloat(E[2]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;case "hour":switch(m.end.period){case "minute":x=/^[0-9]{1,}:[0-9]{1,}$/;if(x.test(E))B.hour=parseFloat(E.split(":")[0]),
B.minute=parseFloat(E.split(":")[1]);else throw Error("Illegal Interval");break;case "second":x=/^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(x.test(E))E=E.split(":"),B.hour=parseFloat(E[0]),B.minute=parseFloat(E[1]),B.second=parseFloat(E[2]);else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;case "minute":switch(m.end.period){case "second":x=/^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/;if(x.test(E))E=E.split(":"),B.minute=parseFloat(E[0]),B.second=parseFloat(E[1]);
else throw Error("Illegal Interval");break;default:throw"Invalid Interval.";}break;default:throw"Invalid Interval.";}}return B};q.prototype.valueInMilliseconds=function(){return("-"===this.op?-1:1)*(1E3*this.second+6E4*this.minute+36E5*this.hour+864E5*this.day+365/12*this.month*864E5+31536E6*this.year)};return q}();const I={extract:{minParams:2,maxParams:2,evaluate:([q,E])=>{if(null==E)return null;if(E instanceof Date)switch(q.toUpperCase()){case "SECOND":return E.getSeconds();case "MINUTE":return E.getMinutes();
case "HOUR":return E.getHours();case "DAY":return E.getDate();case "MONTH":return E.getMonth()+1;case "YEAR":return E.getFullYear()}throw Error("Invalid Parameter for call to EXTRACT");}},substring:{minParams:2,maxParams:3,evaluate:q=>{if(2===q.length){const [E,m]=q;return null==E||null==m?null:E.toString().substring(m-1)}if(3===q.length){const [E,m,v]=q;return null==E||null==m||null==v?null:0>=v?"":E.toString().substring(m-1,m+v-1)}}},position:{minParams:2,maxParams:2,evaluate:([q,E])=>null==q||
null==E?null:E.indexOf(q)+1},trim:{minParams:2,maxParams:3,evaluate:q=>{var E=3===q.length,m=E?q[1]:" ";E=E?q[2]:q[1];if(null==m||null==E)return null;m=`(${h.escapeRegExpString(m)})`;switch(q[0]){case "BOTH":return E.replace(new RegExp(`^${m}*|${m}*$`,"g"),"");case "LEADING":return E.replace(new RegExp(`^${m}*`,"g"),"");case "TRAILING":return E.replace(new RegExp(`${m}*$`,"g"),"")}throw Error("Invalid Parameter for call to TRIM");}},abs:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.abs(q[0])},
ceiling:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.ceil(q[0])},floor:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.floor(q[0])},log:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.log(q[0])},log10:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.log(q[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.sin(q[0])},cos:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.cos(q[0])},tan:{minParams:1,maxParams:1,evaluate:q=>
null==q[0]?null:Math.tan(q[0])},asin:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.asin(q[0])},acos:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.acos(q[0])},atan:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:Math.atan(q[0])},sign:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:0<q[0]?1:0>q[1]?-1:0},power:{minParams:2,maxParams:2,evaluate:q=>null==q[0]||null==q[1]?null:q[0]**q[1]},mod:{minParams:2,maxParams:2,evaluate:q=>null==q[0]||null==q[1]?null:q[0]%q[1]},round:{minParams:1,
maxParams:2,evaluate:q=>{const E=q[0];q=2===q.length?10**q[1]:1;return null==E?null:Math.round(E*q)/q}},truncate:{minParams:1,maxParams:2,evaluate:q=>null==q[0]?null:1===q.length?parseInt(q[0].toFixed(0),10):parseFloat(q[0].toFixed(q[1]))},char_length:{minParams:1,maxParams:1,evaluate:q=>"string"===typeof q[0]||q[0]instanceof String?q[0].length:0},concat:{minParams:1,maxParams:Infinity,evaluate:q=>{let E="";for(let m=0;m<q.length;m++){if(null==q[m])return null;E+=q[m].toString()}return E}},lower:{minParams:1,
maxParams:1,evaluate:q=>null==q[0]?null:q[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:q=>null==q[0]?null:q[0].toString().toUpperCase()}};l.SqlInterval=F;l.evaluateFunction=function(q,E){const m=I[q.toLowerCase()];if(null==m)throw Error("Function Not Recognised");if(E.length<m.minParams||E.length>m.maxParams)throw Error(`Invalid Parameter count for call to ${q.toUpperCase()}`);return m.evaluate(E)};l.isStandardized=function(q,E){q=I[q.toLowerCase()];return null!=q&&E>=q.minParams&&
E<=q.maxParams};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/core/sql/WhereGrammar":function(){define(["exports","../../chunks/_commonjsHelpers"],function(l,h){var F=h.createCommonjsModule(function(q){(function(E,m){q.exports&&(q.exports=m())})(h.commonjsGlobal,function(){function E(m,v,x,B){this.message=m;this.expected=v;this.found=x;this.location=B;this.name="SyntaxError";"function"===typeof Error.captureStackTrace&&Error.captureStackTrace(this,E)}(function(m,v){function x(){this.constructor=
m}x.prototype=v.prototype;m.prototype=new x})(E,Error);E.buildMessage=function(m,v){function x(z){return z.charCodeAt(0).toString(16).toUpperCase()}function B(z){return z.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(y){return"\\x0"+x(y)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(y){return"\\x"+x(y)})}function Q(z){return z.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,
"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(y){return"\\x0"+x(y)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(y){return"\\x"+x(y)})}var V={literal:function(z){return'"'+B(z.text)+'"'},"class":function(z){var y="",C;for(C=0;C<z.parts.length;C++)y+=z.parts[C]instanceof Array?Q(z.parts[C][0])+"-"+Q(z.parts[C][1]):Q(z.parts[C]);return"["+(z.inverted?"^":"")+y+"]"},any:function(z){return"any character"},end:function(z){return"end of input"},
other:function(z){return z.description}};return"Expected "+function(z){var y=Array(z.length),C;for(C=0;C<z.length;C++){var b=C;var r=z[C];r=V[r.type](r);y[b]=r}y.sort();if(0<y.length){for(z=C=1;C<y.length;C++)y[C-1]!==y[C]&&(y[z]=y[C],z++);y.length=z}switch(y.length){case 1:return y[0];case 2:return y[0]+" or "+y[1];default:return y.slice(0,-1).join(", ")+", or "+y[y.length-1]}}(m)+" but "+(v?'"'+B(v)+'"':"end of input")+" found."};return{SyntaxError:E,parse:function(m,v){function x(w,M){return{type:"literal",
text:w,ignoreCase:M}}function B(w,M,K){return{type:"class",parts:w,inverted:M,ignoreCase:K}}function Q(w){var M=Zb[w],K;if(!M){for(K=w-1;!Zb[K];)K--;M=Zb[K];for(M={line:M.line,column:M.column};K<w;)10===m.charCodeAt(K)?(M.line++,M.column=1):M.column++,K++;Zb[w]=M}return M}function V(w,M){var K=Q(w),Z=Q(M);return{start:{offset:w,line:K.line,column:K.column},end:{offset:M,line:Z.line,column:Z.column}}}function z(w){d<sb||(d>sb&&(sb=d,oc=[]),oc.push(w))}function y(){var w=d;var M=ra();if(M!==a)if(M=
b(),M!==a){var K=ra();K!==a?w=M:(d=w,w=a)}else d=w,w=a;else d=w,w=a;return w}function C(){var w=d;var M=b();if(M!==a){var K=[];var Z=d;var va=ra();if(va!==a){var Ea=Ga();if(Ea!==a){var La=ra();if(La!==a){var Pa=b();Pa!==a?Z=va=[va,Ea,La,Pa]:(d=Z,Z=a)}else d=Z,Z=a}else d=Z,Z=a}else d=Z,Z=a;for(;Z!==a;)K.push(Z),Z=d,va=ra(),va!==a?(Ea=Ga(),Ea!==a?(La=ra(),La!==a?(Pa=b(),Pa!==a?Z=va=[va,Ea,La,Pa]:(d=Z,Z=a)):(d=Z,Z=a)):(d=Z,Z=a)):(d=Z,Z=a);if(K!==a){w={type:"expr_list"};M=[M];for(Z=0;Z<K.length;Z++)M.push(K[Z][3]);
w.value=M}else d=w,w=a}else d=w,w=a;return w}function b(){var w=d;var M=r();if(M!==a){var K=[];var Z=d;var va=ra();if(va!==a){var Ea=T();if(Ea!==a){var La=ra();if(La!==a){var Pa=r();Pa!==a?Z=va=[va,Ea,La,Pa]:(d=Z,Z=a)}else d=Z,Z=a}else d=Z,Z=a}else d=Z,Z=a;for(;Z!==a;)K.push(Z),Z=d,va=ra(),va!==a?(Ea=T(),Ea!==a?(La=ra(),La!==a?(Pa=r(),Pa!==a?Z=va=[va,Ea,La,Pa]:(d=Z,Z=a)):(d=Z,Z=a)):(d=Z,Z=a)):(d=Z,Z=a);K!==a?w=M=cb(M,K):(d=w,w=a)}else d=w,w=a;return w}function r(){var w=d;var M=G();if(M!==a){var K=
[];var Z=d;var va=ra();if(va!==a){var Ea=H();if(Ea!==a){var La=ra();if(La!==a){var Pa=G();Pa!==a?Z=va=[va,Ea,La,Pa]:(d=Z,Z=a)}else d=Z,Z=a}else d=Z,Z=a}else d=Z,Z=a;for(;Z!==a;)K.push(Z),Z=d,va=ra(),va!==a?(Ea=H(),Ea!==a?(La=ra(),La!==a?(Pa=G(),Pa!==a?Z=va=[va,Ea,La,Pa]:(d=Z,Z=a)):(d=Z,Z=a)):(d=Z,Z=a)):(d=Z,Z=a);K!==a?w=M=cb(M,K):(d=w,w=a)}else d=w,w=a;return w}function G(){var w=d;var M=u();if(M===a){M=d;if(33===m.charCodeAt(d)){var K=Ta;d++}else K=a,0===sa&&z(jb);if(K!==a){var Z=d;sa++;if(61===
m.charCodeAt(d)){var va=rb;d++}else va=a,0===sa&&z(Qa);sa--;va===a?Z=void 0:(d=Z,Z=a);Z!==a?M=K=[K,Z]:(d=M,M=a)}else d=M,M=a}M!==a?(K=ra(),K!==a?(Z=G(),Z!==a?w=M={type:"unary_expr",operator:"NOT",expr:Z}:(d=w,w=a)):(d=w,w=a)):(d=w,w=a);if(w===a)if(w=d,M=P(),M!==a)if(K=ra(),K!==a){K=[];Z=d;va=ra();if(va!==a){var Ea=L();if(Ea!==a){var La=ra();if(La!==a){var Pa=P();Pa!==a?Z=va=[va,Ea,La,Pa]:(d=Z,Z=a)}else d=Z,Z=a}else d=Z,Z=a}else d=Z,Z=a;if(Z!==a)for(;Z!==a;)K.push(Z),Z=d,va=ra(),va!==a?(Ea=L(),Ea!==
a?(La=ra(),La!==a?(Pa=P(),Pa!==a?Z=va=[va,Ea,La,Pa]:(d=Z,Z=a)):(d=Z,Z=a)):(d=Z,Z=a)):(d=Z,Z=a);else K=a;K!==a&&(K={type:"arithmetic",tail:K});K===a&&(K=d,Z=O(),Z!==a?(va=ra(),va!==a?(va=Ha(),va!==a?(va=ra(),va!==a?(va=C(),va!==a?(Ea=ra(),Ea!==a?(Ea=Sa(),Ea!==a?K=Z={op:Z,right:va}:(d=K,K=a)):(d=K,K=a)):(d=K,K=a)):(d=K,K=a)):(d=K,K=a)):(d=K,K=a)):(d=K,K=a),K===a&&(K=d,Z=O(),Z!==a?(va=ra(),va!==a?(va=Ha(),va!==a?(va=ra(),va!==a?(va=Sa(),va!==a?K=Z={op:Z,right:{type:"expr_list",value:[]}}:(d=K,K=a)):
(d=K,K=a)):(d=K,K=a)):(d=K,K=a)):(d=K,K=a),K===a&&(K=d,Z=O(),Z!==a?(va=ra(),va!==a?(va=g(),va!==a?K=Z={op:Z,right:va}:(d=K,K=a)):(d=K,K=a)):(d=K,K=a))),K===a&&(K=d,va=u(),va!==a?(Z=ra(),Z!==a?(Z=U(),Z!==a?(Ea=ra(),Ea!==a?(Ea=P(),Ea!==a?(La=ra(),La!==a?(La=H(),La!==a?(va=ra(),va!==a?(va=P(),va!==a?K=va={op:"NOT"+Z,right:{type:"expr_list",value:[Ea,va]}}:(d=K,K=a)):(d=K,K=a)):(d=K,K=a)):(d=K,K=a)):(d=K,K=a)):(d=K,K=a)):(d=K,K=a)):(d=K,K=a)):(d=K,K=a),K===a&&(K=d,va=U(),va!==a?(Z=ra(),Z!==a?(Z=P(),Z!==
a?(Ea=ra(),Ea!==a?(Ea=H(),Ea!==a?(La=ra(),La!==a?(La=P(),La!==a?K=va={op:va,right:{type:"expr_list",value:[Z,La]}}:(d=K,K=a)):(d=K,K=a)):(d=K,K=a)):(d=K,K=a)):(d=K,K=a)):(d=K,K=a)):(d=K,K=a)),K===a&&(K=d,Z=t(),Z!==a?(va=ra(),va!==a?(va=u(),va!==a?(va=ra(),va!==a?(va=P(),va!==a?K=Z={op:Z+"NOT",right:va}:(d=K,K=a)):(d=K,K=a)):(d=K,K=a)):(d=K,K=a)):(d=K,K=a),K===a&&(K=d,Z=t(),Z!==a?(va=ra(),va!==a?(va=P(),va!==a?K=Z={op:Z,right:va}:(d=K,K=a)):(d=K,K=a)):(d=K,K=a)),K===a&&(K=d,Z=J(),Z!==a?(va=ra(),va!==
a?(va=la(),va!==a?(Ea=ra(),Ea!==a?(Ea=d,m.substr(d,6).toLowerCase()===ud?(La=m.substr(d,6),d+=6):(La=a,0===sa&&z(vd)),La!==a?(La=d,sa++,Pa=n(),sa--,Pa===a?La=void 0:(d=La,La=a),La!==a?Ea="ESCAPE":(d=Ea,Ea=a)):(d=Ea,Ea=a),Ea!==a?(Ea=ra(),Ea!==a?(Ea=na(),Ea!==a?K=Z={op:Z,right:va,escape:Ea.value}:(d=K,K=a)):(d=K,K=a)):(d=K,K=a)):(d=K,K=a)):(d=K,K=a)):(d=K,K=a)):(d=K,K=a),K===a&&(K=d,Z=J(),Z!==a?(va=ra(),va!==a?(va=la(),va!==a?K=Z={op:Z,right:va,escape:""}:(d=K,K=a)):(d=K,K=a)):(d=K,K=a))))));K===a&&
(K=null);K!==a?(w=M,M=K,""==M||void 0==M||null==M?M=w:(K=null,M=K="arithmetic"==M.type?cb(w,M.tail):hb(M.op,w,M.right,M.escape)),w=M):(d=w,w=a)}else d=w,w=a;else d=w,w=a;return w}function L(){if(m.substr(d,2)===xb){var w=xb;d+=2}else w=a,0===sa&&z(aa);w===a&&(62===m.charCodeAt(d)?(w=ha,d++):(w=a,0===sa&&z(fa)),w===a&&(m.substr(d,2)===oa?(w=oa,d+=2):(w=a,0===sa&&z(ya)),w===a&&(m.substr(d,2)===Ba?(w=Ba,d+=2):(w=a,0===sa&&z(Na)),w===a&&(60===m.charCodeAt(d)?(w=Oa,d++):(w=a,0===sa&&z(ab)),w===a&&(61===
m.charCodeAt(d)?(w=rb,d++):(w=a,0===sa&&z(Qa)),w===a&&(m.substr(d,2)===Za?(w=Za,d+=2):(w=a,0===sa&&z($a))))))));return w}function J(){var w=w=d;var M=u();if(M!==a){var K=ra();if(K!==a){var Z=W();Z!==a?w=M=[M,K,Z]:(d=w,w=a)}else d=w,w=a}else d=w,w=a;w!==a&&(w=w[0]+" "+w[2]);w===a&&(w=W());return w}function O(){var w=w=d;var M=u();if(M!==a){var K=ra();if(K!==a){var Z=c();Z!==a?w=M=[M,K,Z]:(d=w,w=a)}else d=w,w=a}else d=w,w=a;w!==a&&(w=w[0]+" "+w[2]);w===a&&(w=c());return w}function P(){var w=d;var M=
ca();if(M!==a){var K=[];var Z=d;var va=ra();if(va!==a){var Ea=X();if(Ea!==a){var La=ra();if(La!==a){var Pa=ca();Pa!==a?Z=va=[va,Ea,La,Pa]:(d=Z,Z=a)}else d=Z,Z=a}else d=Z,Z=a}else d=Z,Z=a;for(;Z!==a;)K.push(Z),Z=d,va=ra(),va!==a?(Ea=X(),Ea!==a?(La=ra(),La!==a?(Pa=ca(),Pa!==a?Z=va=[va,Ea,La,Pa]:(d=Z,Z=a)):(d=Z,Z=a)):(d=Z,Z=a)):(d=Z,Z=a);K!==a?w=M=cb(M,K):(d=w,w=a)}else d=w,w=a;return w}function X(){if(43===m.charCodeAt(d)){var w=gb;d++}else w=a,0===sa&&z(kb);w===a&&(45===m.charCodeAt(d)?(w=pc,d++):
(w=a,0===sa&&z(qc)));return w}function ca(){var w=d;var M=D();if(M!==a){var K=[];var Z=d;var va=ra();if(va!==a){var Ea=S();if(Ea!==a){var La=ra();if(La!==a){var Pa=D();Pa!==a?Z=va=[va,Ea,La,Pa]:(d=Z,Z=a)}else d=Z,Z=a}else d=Z,Z=a}else d=Z,Z=a;for(;Z!==a;)K.push(Z),Z=d,va=ra(),va!==a?(Ea=S(),Ea!==a?(La=ra(),La!==a?(Pa=D(),Pa!==a?Z=va=[va,Ea,La,Pa]:(d=Z,Z=a)):(d=Z,Z=a)):(d=Z,Z=a)):(d=Z,Z=a);K!==a?w=M=cb(M,K):(d=w,w=a)}else d=w,w=a;return w}function S(){if(42===m.charCodeAt(d)){var w=wd;d++}else w=a,
0===sa&&z(xd);w===a&&(47===m.charCodeAt(d)?(w=yd,d++):(w=a,0===sa&&z(zd)));return w}function D(){var w=na();if(w===a){var M=d;var K=d;var Z=da();if(Z!==a){var va=ja();if(va!==a){var Ea=qa();Ea!==a?K=Z=parseFloat(Z+va+Ea):(d=K,K=a)}else d=K,K=a}else d=K,K=a;K===a&&(K=d,Z=da(),Z!==a?(va=ja(),va!==a?K=Z=parseFloat(Z+va):(d=K,K=a)):(d=K,K=a),K===a&&(K=d,Z=da(),Z!==a?(va=qa(),va!==a?K=Z=parseFloat(Z+va):(d=K,K=a)):(d=K,K=a),K===a&&(K=d,Z=da(),Z!==a&&(Z=parseFloat(Z)),K=Z)));var La=K;if(La!==a){var Pa=
d;sa++;var Ad=p();sa--;Ad===a?Pa=void 0:(d=Pa,Pa=a);Pa!==a?M=La={type:"number",value:La}:(d=M,M=a)}else d=M,M=a;w=M;if(w===a){var Lb=d;var Bb=d;if(m.substr(d,4).toLowerCase()===Bd){var $b=m.substr(d,4);d+=4}else $b=a,0===sa&&z(Cd);if($b!==a){var Mb=d;sa++;var Dd=n();sa--;Dd===a?Mb=void 0:(d=Mb,Mb=a);Mb!==a?Bb=$b=[$b,Mb]:(d=Bb,Bb=a)}else d=Bb,Bb=a;var yb=Bb;yb!==a&&(yb={type:"bool",value:!0});Lb=yb;if(Lb===a){Lb=d;var Cb=d;if(m.substr(d,5).toLowerCase()===Ed){var ac=m.substr(d,5);d+=5}else ac=a,0===
sa&&z(Fd);if(ac!==a){var Nb=d;sa++;var Gd=n();sa--;Gd===a?Nb=void 0:(d=Nb,Nb=a);Nb!==a?Cb=ac=[ac,Nb]:(d=Cb,Cb=a)}else d=Cb,Cb=a;yb=Cb;yb!==a&&(yb={type:"bool",value:!1});Lb=yb}w=Lb;if(w===a){var Db=d;if(m.substr(d,4).toLowerCase()===Hd){var bc=m.substr(d,4);d+=4}else bc=a,0===sa&&z(Id);if(bc!==a){var Ob=d;sa++;var Jd=n();sa--;Jd===a?Ob=void 0:(d=Ob,Ob=a);Ob!==a?Db=bc=[bc,Ob]:(d=Db,Db=a)}else d=Db,Db=a;var rc=Db;rc!==a&&(rc={type:"null",value:null});w=rc;if(w===a){var vb=d;var Eb=d;if(m.substr(d,4).toLowerCase()===
Kd){var sc=m.substr(d,4);d+=4}else sc=a,0===sa&&z(Ld);if(sc!==a){var cc=d;sa++;var Md=n();sa--;Md===a?cc=void 0:(d=cc,cc=a);cc!==a?Eb=sc="DATE":(d=Eb,Eb=a)}else d=Eb,Eb=a;var Rc=Eb;if(Rc!==a){var Nd=ra();if(Nd!==a){var Sc=la();Sc!==a?vb=Rc={type:"date",value:Sc.value}:(d=vb,vb=a)}else d=vb,vb=a}else d=vb,vb=a;w=vb;if(w===a){var wb=d;var Fb=d;if(m.substr(d,9).toLowerCase()===Od){var tc=m.substr(d,9);d+=9}else tc=a,0===sa&&z(Pd);if(tc!==a){var dc=d;sa++;var Qd=n();sa--;Qd===a?dc=void 0:(d=dc,dc=a);
dc!==a?Fb=tc="TIMESTAMP":(d=Fb,Fb=a)}else d=Fb,Fb=a;var Tc=Fb;if(Tc!==a){var Rd=ra();if(Rd!==a){var Uc=la();Uc!==a?wb=Tc={type:"timestamp",value:Uc.value}:(d=wb,wb=a)}else d=wb,wb=a}else d=wb,wb=a;w=wb;if(w===a){var Xa=d;var Pb=ia();if(Pb!==a){var uc=ra();if(uc!==a){if(45===m.charCodeAt(d)){var tb=pc;d++}else tb=a,0===sa&&z(qc);tb===a&&(43===m.charCodeAt(d)?(tb=gb,d++):(tb=a,0===sa&&z(kb)));if(tb!==a){var vc=ra();if(vc!==a){var Qb=la();if(Qb!==a){var Sd=ra();if(Sd!==a){var Vc=A();Vc!==a?Xa=Pb={type:"interval",
value:Qb,qualifier:Vc,op:tb}:(d=Xa,Xa=a)}else d=Xa,Xa=a}else d=Xa,Xa=a}else d=Xa,Xa=a}else d=Xa,Xa=a}else d=Xa,Xa=a}else d=Xa,Xa=a;Xa===a&&(Xa=d,Pb=ia(),Pb!==a?(uc=ra(),uc!==a?(tb=la(),tb!==a?(vc=ra(),vc!==a?(Qb=A(),Qb!==a?Xa=Pb={type:"interval",value:tb,qualifier:Qb,op:""}:(d=Xa,Xa=a)):(d=Xa,Xa=a)):(d=Xa,Xa=a)):(d=Xa,Xa=a)):(d=Xa,Xa=a));w=Xa}}}}}}var Wa=w;if(Wa===a){var db=d;var Gb=d;if(m.substr(d,7).toLowerCase()===Td){var wc=m.substr(d,7);d+=7}else wc=a,0===sa&&z(Ud);if(wc!==a){var ec=d;sa++;var Vd=
n();sa--;Vd===a?ec=void 0:(d=ec,ec=a);ec!==a?Gb=wc="EXTRACT":(d=Gb,Gb=a)}else d=Gb,Gb=a;var Wc=Gb;if(Wc!==a){var Wd=ra();if(Wd!==a){var Xd=Ha();if(Xd!==a){var Yd=ra();if(Yd!==a){var ob=ka();ob===a&&(ob=ma(),ob===a&&(ob=ua(),ob===a&&(ob=ta(),ob===a&&(ob=wa(),ob===a&&(ob=Aa())))));var Xc=ob;if(Xc!==a){var Zd=ra();if(Zd!==a){var $d=ea();if($d!==a){var ae=ra();if(ae!==a){var Yc=b();if(Yc!==a){var be=ra();if(be!==a){var ce=Sa();ce!==a?db=Wc={type:"function",name:"extract",args:{type:"expr_list",value:[{type:"string",
value:Xc},Yc]}}:(d=db,db=a)}else d=db,db=a}else d=db,db=a}else d=db,db=a}else d=db,db=a}else d=db,db=a}else d=db,db=a}else d=db,db=a}else d=db,db=a}else d=db,db=a}else d=db,db=a;Wa=db;if(Wa===a){var bb=d;var Hb=d;if(m.substr(d,9).toLowerCase()===de){var xc=m.substr(d,9);d+=9}else xc=a,0===sa&&z(ee);if(xc!==a){var fc=d;sa++;var fe=n();sa--;fe===a?fc=void 0:(d=fc,fc=a);fc!==a?Hb=xc="SUBSTRING":(d=Hb,Hb=a)}else d=Hb,Hb=a;var Zc=Hb;if(Zc!==a){var ge=ra();if(ge!==a){var he=Ha();if(he!==a){var ie=ra();
if(ie!==a){var yc=b();if(yc!==a){var je=ra();if(je!==a){var ke=ea();if(ke!==a){var le=ra();if(le!==a){var zc=b();if(zc!==a){var me=ra();if(me!==a){var lb=d;var Ib=d;if(m.substr(d,3).toLowerCase()===ne){var Ac=m.substr(d,3);d+=3}else Ac=a,0===sa&&z(oe);if(Ac!==a){var gc=d;sa++;var pe=n();sa--;pe===a?gc=void 0:(d=gc,gc=a);gc!==a?Ib=Ac="FOR":(d=Ib,Ib=a)}else d=Ib,Ib=a;var Rb=Ib;if(Rb!==a){var $c=ra();if($c!==a){var ad=b();if(ad!==a){var bd=ra();bd!==a?lb=Rb=[Rb,$c,ad,bd]:(d=lb,lb=a)}else d=lb,lb=a}else d=
lb,lb=a}else d=lb,lb=a;lb===a&&(lb=null);lb!==a?(Rb=Sa(),Rb!==a?bb=Zc={type:"function",name:"substring",args:{type:"expr_list",value:lb?[yc,zc,lb[2]]:[yc,zc]}}:(d=bb,bb=a)):(d=bb,bb=a)}else d=bb,bb=a}else d=bb,bb=a}else d=bb,bb=a}else d=bb,bb=a}else d=bb,bb=a}else d=bb,bb=a}else d=bb,bb=a}else d=bb,bb=a}else d=bb,bb=a}else d=bb,bb=a;Wa=bb;if(Wa===a){var Ma=d;var Sb=Y();if(Sb!==a){var Bc=ra();if(Bc!==a){var Cc=Ha();if(Cc!==a){var Dc=ra();if(Dc!==a){var pb=f();pb===a&&(pb=null);if(pb!==a){var Ec=ra();
if(Ec!==a){var Tb=b();if(Tb!==a){var Fc=ra();if(Fc!==a){var Gc=ea();if(Gc!==a){var qe=ra();if(qe!==a){var cd=b();if(cd!==a){var re=ra();if(re!==a){var se=Sa();se!==a?Ma=Sb={type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==pb?"BOTH":pb},Tb,cd]}}:(d=Ma,Ma=a)}else d=Ma,Ma=a}else d=Ma,Ma=a}else d=Ma,Ma=a}else d=Ma,Ma=a}else d=Ma,Ma=a}else d=Ma,Ma=a}else d=Ma,Ma=a}else d=Ma,Ma=a}else d=Ma,Ma=a}else d=Ma,Ma=a}else d=Ma,Ma=a}else d=Ma,Ma=a;Ma===a&&(Ma=d,Sb=Y(),Sb!==a?
(Bc=ra(),Bc!==a?(Cc=Ha(),Cc!==a?(Dc=ra(),Dc!==a?(pb=f(),pb===a&&(pb=null),pb!==a?(Ec=ra(),Ec!==a?(Tb=b(),Tb!==a?(Fc=ra(),Fc!==a?(Gc=Sa(),Gc!==a?Ma=Sb={type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==pb?"BOTH":pb},Tb]}}:(d=Ma,Ma=a)):(d=Ma,Ma=a)):(d=Ma,Ma=a)):(d=Ma,Ma=a)):(d=Ma,Ma=a)):(d=Ma,Ma=a)):(d=Ma,Ma=a)):(d=Ma,Ma=a)):(d=Ma,Ma=a));Wa=Ma;if(Wa===a){var eb=d;var Jb=d;if(m.substr(d,8).toLowerCase()===te){var Hc=m.substr(d,8);d+=8}else Hc=a,0===sa&&z(ue);if(Hc!==
a){var hc=d;sa++;var ve=n();sa--;ve===a?hc=void 0:(d=hc,hc=a);hc!==a?Jb=Hc="POSITION":(d=Jb,Jb=a)}else d=Jb,Jb=a;var dd=Jb;if(dd!==a){var we=ra();if(we!==a){var xe=Ha();if(xe!==a){var ye=ra();if(ye!==a){var ed=b();if(ed!==a){var ze=ra();if(ze!==a){var Ae=c();if(Ae!==a){var Be=ra();if(Be!==a){var fd=b();if(fd!==a){var Ce=ra();if(Ce!==a){var De=Sa();De!==a?eb=dd={type:"function",name:"position",args:{type:"expr_list",value:[ed,fd]}}:(d=eb,eb=a)}else d=eb,eb=a}else d=eb,eb=a}else d=eb,eb=a}else d=eb,
eb=a}else d=eb,eb=a}else d=eb,eb=a}else d=eb,eb=a}else d=eb,eb=a}else d=eb,eb=a}else d=eb,eb=a;Wa=eb;if(Wa===a){var ib=d;var Ub;var qb=d;qb=Ub=k();if(qb===a)if(qb=d,96===m.charCodeAt(d)?(Ub=gd,d++):(Ub=a,0===sa&&z(hd)),Ub!==a){var ic=[];if(id.test(m.charAt(d))){var ub=m.charAt(d);d++}else ub=a,0===sa&&z(jd);if(ub!==a)for(;ub!==a;)ic.push(ub),id.test(m.charAt(d))?(ub=m.charAt(d),d++):(ub=a,0===sa&&z(jd));else ic=a;ic!==a?(96===m.charCodeAt(d)?(ub=gd,d++):(ub=a,0===sa&&z(hd)),ub!==a?qb=Ub=ic.join(""):
(d=qb,qb=a)):(d=qb,qb=a)}else d=qb,qb=a;var Ic=qb;if(Ic!==a){var Ee=ra();if(Ee!==a){var Fe=Ha();if(Fe!==a){var Ge=ra();if(Ge!==a){var Vb=C();Vb===a&&(Vb=null);if(Vb!==a){var He=ra();if(He!==a){var Ie=Sa();Ie!==a?ib=Ic={type:"function",name:Ic,args:Vb?Vb:{type:"expr_list",value:[]}}:(d=ib,ib=a)}else d=ib,ib=a}else d=ib,ib=a}else d=ib,ib=a}else d=ib,ib=a}else d=ib,ib=a}else d=ib,ib=a;Wa=ib;if(Wa===a){var mb;var Ra=d;var Wb=Da();if(Wb!==a){var Jc=ra();if(Jc!==a){var Xb=b();if(Xb!==a){var Kc=ra();if(Kc!==
a){var zb=[];for(mb=za();mb!==a;)zb.push(mb),mb=za();if(zb!==a)if(mb=ra(),mb!==a){var jc=Ka();jc!==a?Ra=Wb={type:"case_expression",format:"simple",operand:Xb,clauses:zb,else:null}:(d=Ra,Ra=a)}else d=Ra,Ra=a;else d=Ra,Ra=a}else d=Ra,Ra=a}else d=Ra,Ra=a}else d=Ra,Ra=a}else d=Ra,Ra=a;if(Ra===a)if(Ra=d,Wb=Da(),Wb!==a)if(Jc=ra(),Jc!==a)if(Xb=b(),Xb!==a)if(Kc=ra(),Kc!==a){zb=[];for(mb=za();mb!==a;)zb.push(mb),mb=za();if(zb!==a)if(mb=ra(),mb!==a)if(jc=Ia(),jc!==a){var Je=ra();if(Je!==a){var Ke=Ka();Ke!==
a?Ra=Wb={type:"case_expression",format:"simple",operand:Xb,clauses:zb,else:jc.value}:(d=Ra,Ra=a)}else d=Ra,Ra=a}else d=Ra,Ra=a;else d=Ra,Ra=a;else d=Ra,Ra=a}else d=Ra,Ra=a;else d=Ra,Ra=a;else d=Ra,Ra=a;else d=Ra,Ra=a;var Lc=Ra;if(Lc===a){var nb;var Ya=d;var Yb=Da();if(Yb!==a){var Mc=ra();if(Mc!==a){var Ab=[];for(nb=pa();nb!==a;)Ab.push(nb),nb=pa();if(Ab!==a)if(nb=ra(),nb!==a){var kc=Ka();kc!==a?Ya=Yb={type:"case_expression",format:"searched",clauses:Ab,else:null}:(d=Ya,Ya=a)}else d=Ya,Ya=a;else d=
Ya,Ya=a}else d=Ya,Ya=a}else d=Ya,Ya=a;if(Ya===a)if(Ya=d,Yb=Da(),Yb!==a)if(Mc=ra(),Mc!==a){Ab=[];for(nb=pa();nb!==a;)Ab.push(nb),nb=pa();if(Ab!==a)if(nb=ra(),nb!==a)if(kc=Ia(),kc!==a){var Le=ra();if(Le!==a){var Me=Ka();Me!==a?Ya=Yb={type:"case_expression",format:"searched",clauses:Ab,else:kc.value}:(d=Ya,Ya=a)}else d=Ya,Ya=a}else d=Ya,Ya=a;else d=Ya,Ya=a;else d=Ya,Ya=a}else d=Ya,Ya=a;else d=Ya,Ya=a;Lc=Ya}Wa=Lc;if(Wa===a){var lc;var Kb=d;var kd=p();if(kd!==a){var Nc=[];for(lc=e();lc!==a;)Nc.push(lc),
lc=e();Nc!==a?Kb=kd+=Nc.join(""):(d=Kb,Kb=a)}else d=Kb,Kb=a;var mc=Kb;if(mc!==a){var Oc=mc;mc=/^CURRENT_DATE$/i.test(Oc)?{type:"current_time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(Oc)?{type:"current_time",mode:"timestamp"}:{type:"column_ref",table:"",column:Oc}}Wa=mc;if(Wa===a&&(Wa=g(),Wa===a)){Wa=d;var ld=Ha();if(ld!==a){var Ne=ra();if(Ne!==a){var Pc=b();if(Pc!==a){var Oe=ra();if(Oe!==a){var Pe=Sa();Pe!==a?(Pc.paren=!0,Wa=ld=Pc):(d=Wa,Wa=a)}else d=Wa,Wa=a}else d=Wa,Wa=a}else d=Wa,Wa=a}else d=
Wa,Wa=a}}}}}}}}return Wa}function k(){var w;var M=d;var K=p();if(K!==a){var Z=[];for(w=n();w!==a;)Z.push(w),w=n();Z!==a?M=K+=Z.join(""):(d=M,M=a)}else d=M,M=a;return M}function p(){if(Qe.test(m.charAt(d))){var w=m.charAt(d);d++}else w=a,0===sa&&z(Re);return w}function n(){if(Se.test(m.charAt(d))){var w=m.charAt(d);d++}else w=a,0===sa&&z(Te);return w}function e(){if(Ue.test(m.charAt(d))){var w=m.charAt(d);d++}else w=a,0===sa&&z(Ve);return w}function g(){var w=d;if(64===m.charCodeAt(d)){var M=We;d++}else M=
a,0===sa&&z(Xe);if(M!==a){var K=k();K!==a?w=M=[M,K]:(d=w,w=a)}else d=w,w=a;w!==a&&(w={type:"param",value:w[1]});return w}function f(){var w=d;if(m.substr(d,7).toLowerCase()===Ye){var M=m.substr(d,7);d+=7}else M=a,0===sa&&z(Ze);if(M!==a){M=d;sa++;var K=n();sa--;K===a?M=void 0:(d=M,M=a);M!==a?w="LEADING":(d=w,w=a)}else d=w,w=a;w===a&&(w=d,m.substr(d,8).toLowerCase()===$e?(M=m.substr(d,8),d+=8):(M=a,0===sa&&z(af)),M!==a?(M=d,sa++,K=n(),sa--,K===a?M=void 0:(d=M,M=a),M!==a?w="TRAILING":(d=w,w=a)):(d=w,
w=a),w===a&&(w=d,m.substr(d,4).toLowerCase()===bf?(M=m.substr(d,4),d+=4):(M=a,0===sa&&z(cf)),M!==a?(M=d,sa++,K=n(),sa--,K===a?M=void 0:(d=M,M=a),M!==a?w="BOTH":(d=w,w=a)):(d=w,w=a)));return w}function A(){var w=d;var M=d;var K=R();if(K!==a){var Z=ra();if(Z!==a)if(Z=Ha(),Z!==a)if(Z=ra(),Z!==a)if(Z=ba(),Z!==a){var va=ra();va!==a?(va=Sa(),va!==a?M=K={type:"interval-period",period:K.value,precision:Z,secondary:null}:(d=M,M=a)):(d=M,M=a)}else d=M,M=a;else d=M,M=a;else d=M,M=a;else d=M,M=a}else d=M,M=a;
M===a&&(M=d,K=R(),K!==a&&(K=md(K)),M=K);if(M!==a)if(K=ra(),K!==a)if(K=d,m.substr(d,2).toLowerCase()===df?(Z=m.substr(d,2),d+=2):(Z=a,0===sa&&z(ef)),Z!==a?(Z=d,sa++,va=n(),sa--,va===a?Z=void 0:(d=Z,Z=a),Z!==a?K="TO":(d=K,K=a)):(d=K,K=a),K!==a)if(K=ra(),K!==a){K=d;Z=R();Z!==a&&(Z={type:"interval-period",period:Z.value,precision:null,secondary:null});K=Z;if(K===a){K=d;Z=Aa();if(Z!==a)if(Z=ra(),Z!==a)if(Z=Ha(),Z!==a)if(Z=ra(),Z!==a)if(Z=ba(),Z!==a)if(va=ra(),va!==a)if(va=Ga(),va!==a)if(va=ra(),va!==a)if(va=
N(),va!==a){var Ea=ra();Ea!==a?(Ea=Sa(),Ea!==a?K=Z=nd(Z,va):(d=K,K=a)):(d=K,K=a)}else d=K,K=a;else d=K,K=a;else d=K,K=a;else d=K,K=a;else d=K,K=a;else d=K,K=a;else d=K,K=a;else d=K,K=a;else d=K,K=a;K===a&&(K=d,Z=Aa(),Z!==a?(Z=ra(),Z!==a?(Z=Ha(),Z!==a?(Z=ra(),Z!==a?(Z=ba(),Z!==a?(va=ra(),va!==a?(va=Sa(),va!==a?K=Z={type:"interval-period",period:"second",precision:Z,secondary:null}:(d=K,K=a)):(d=K,K=a)):(d=K,K=a)):(d=K,K=a)):(d=K,K=a)):(d=K,K=a)):(d=K,K=a),K===a&&(K=d,Z=Aa(),Z!==a&&(Z={type:"interval-period",
period:"second",precision:null,secondary:null}),K=Z))}K!==a?w=M={type:"interval-qualifier",start:M,end:K}:(d=w,w=a)}else d=w,w=a;else d=w,w=a;else d=w,w=a;else d=w,w=a;w===a&&(w=d,K=R(),K!==a?(M=ra(),M!==a?(M=Ha(),M!==a?(M=ra(),M!==a?(M=N(),M!==a?(Z=ra(),Z!==a?(Z=Sa(),Z!==a?w=K={type:"interval-period",period:K.value,precision:M,secondary:null}:(d=w,w=a)):(d=w,w=a)):(d=w,w=a)):(d=w,w=a)):(d=w,w=a)):(d=w,w=a)):(d=w,w=a),w===a&&(w=d,K=R(),K!==a&&(K=md(K)),w=K,w===a&&(w=d,K=Aa(),K!==a?(M=ra(),M!==a?(M=
Ha(),M!==a?(M=ra(),M!==a?(M=ba(),M!==a?(Z=ra(),Z!==a?(Z=Ga(),Z!==a?(K=ra(),K!==a?(K=N(),K!==a?(Z=ra(),Z!==a?(Z=Sa(),Z!==a?w=K=nd(M,K):(d=w,w=a)):(d=w,w=a)):(d=w,w=a)):(d=w,w=a)):(d=w,w=a)):(d=w,w=a)):(d=w,w=a)):(d=w,w=a)):(d=w,w=a)):(d=w,w=a)):(d=w,w=a),w===a&&(w=d,K=Aa(),K!==a?(M=ra(),M!==a?(M=Ha(),M!==a?(M=ra(),M!==a?(M=N(),M!==a?(Z=ra(),Z!==a?(Z=Sa(),Z!==a?w=K={type:"interval-period",period:"second",precision:M,secondary:null}:(d=w,w=a)):(d=w,w=a)):(d=w,w=a)):(d=w,w=a)):(d=w,w=a)):(d=w,w=a)):(d=
w,w=a),w===a&&(w=d,K=Aa(),K!==a&&(K={type:"interval-period",period:"second",precision:null,secondary:null}),w=K)))));return w}function R(){var w=d;w=ua();w!==a&&(w={type:"string",value:"day"});w===a&&(w=d,w=ta(),w!==a&&(w={type:"string",value:"hour"}),w===a&&(w=d,w=wa(),w!==a&&(w={type:"string",value:"minute"}),w===a&&(w=d,w=ma(),w!==a&&(w={type:"string",value:"month"}),w===a&&(w=d,w=ka(),w!==a&&(w={type:"string",value:"year"})))));return w}function N(){var w=Ca();w!==a&&(w=parseFloat(w));return w}
function ba(){var w=Ca();w!==a&&(w=parseFloat(w));return w}function la(){var w=na();w===a&&(w=g());return w}function na(){var w=d;if(39===m.charCodeAt(d)){var M=od;d++}else M=a,0===sa&&z(pd);M===a&&(m.substr(d,2)===qd?(M=qd,d+=2):(M=a,0===sa&&z(ff)));if(M!==a){M=[];var K=d;m.substr(d,2)===nc?(K=nc,d+=2):(K=a,0===sa&&z(rd));K!==a&&(K="'");K===a&&(sd.test(m.charAt(d))?(K=m.charAt(d),d++):(K=a,0===sa&&z(td)));for(;K!==a;)M.push(K),K=d,m.substr(d,2)===nc?(K=nc,d+=2):(K=a,0===sa&&z(rd)),K!==a&&(K="'"),
K===a&&(sd.test(m.charAt(d))?(K=m.charAt(d),d++):(K=a,0===sa&&z(td)));M!==a?(39===m.charCodeAt(d)?(K=od,d++):(K=a,0===sa&&z(pd)),K!==a?w=M={type:"string",value:M.join("")}:(d=w,w=a)):(d=w,w=a)}else d=w,w=a;return w}function pa(){var w=d;var M=Fa();if(M!==a)if(M=ra(),M!==a)if(M=b(),M!==a){var K=ra();K!==a?(K=Ja(),K!==a?(K=ra(),K!==a?(K=b(),K!==a?w=M={type:"when_clause",operand:M,value:K}:(d=w,w=a)):(d=w,w=a)):(d=w,w=a)):(d=w,w=a)}else d=w,w=a;else d=w,w=a;else d=w,w=a;return w}function za(){var w=
d;var M=Fa();if(M!==a)if(M=ra(),M!==a)if(M=b(),M!==a){var K=ra();K!==a?(K=Ja(),K!==a?(K=ra(),K!==a?(K=b(),K!==a?w=M={type:"when_clause",operand:M,value:K}:(d=w,w=a)):(d=w,w=a)):(d=w,w=a)):(d=w,w=a)}else d=w,w=a;else d=w,w=a;else d=w,w=a;return w}function Ia(){var w=d;var M=d;if(m.substr(d,4).toLowerCase()===gf){var K=m.substr(d,4);d+=4}else K=a,0===sa&&z(hf);if(K!==a){K=d;sa++;var Z=n();sa--;Z===a?K=void 0:(d=K,K=a);K!==a?M="ELSE":(d=M,M=a)}else d=M,M=a;M!==a?(M=ra(),M!==a?(M=b(),M!==a?w={type:"else_clause",
value:M}:(d=w,w=a)):(d=w,w=a)):(d=w,w=a);return w}function da(){var w=Ca();if(w===a){w=d;if(45===m.charCodeAt(d)){var M=pc;d++}else M=a,0===sa&&z(qc);M===a&&(43===m.charCodeAt(d)?(M=gb,d++):(M=a,0===sa&&z(kb)));if(M!==a){var K=Ca();K!==a?w=M=M[0]+K:(d=w,w=a)}else d=w,w=a}return w}function ja(){var w=d;if(46===m.charCodeAt(d)){var M=jf;d++}else M=a,0===sa&&z(kf);M!==a?(M=Ca(),M===a&&(M=null),M!==a?w="."+(null!=M?M:""):(d=w,w=a)):(d=w,w=a);return w}function qa(){var w;var M=w=d;if(lf.test(m.charAt(d))){var K=
m.charAt(d);d++}else K=a,0===sa&&z(mf);K!==a?(nf.test(m.charAt(d))?(K=m.charAt(d),d++):(K=a,0===sa&&z(of)),K===a&&(K=null),K!==a?M="e"+(null===K?"":K):(d=M,M=a)):(d=M,M=a);M!==a?(K=Ca(),K!==a?w=M+K:(d=w,w=a)):(d=w,w=a);return w}function Ca(){var w=[];var M=xa();if(M!==a)for(;M!==a;)w.push(M),M=xa();else w=a;w!==a&&(w=w.join(""));return w}function xa(){if(pf.test(m.charAt(d))){var w=m.charAt(d);d++}else w=a,0===sa&&z(qf);return w}function c(){var w=d;if(m.substr(d,2).toLowerCase()===rf){var M=m.substr(d,
2);d+=2}else M=a,0===sa&&z(sf);if(M!==a){M=d;sa++;var K=n();sa--;K===a?M=void 0:(d=M,M=a);M!==a?w="IN":(d=w,w=a)}else d=w,w=a;return w}function t(){var w=d;if(m.substr(d,2).toLowerCase()===tf){var M=m.substr(d,2);d+=2}else M=a,0===sa&&z(uf);if(M!==a){M=d;sa++;var K=n();sa--;K===a?M=void 0:(d=M,M=a);M!==a?w="IS":(d=w,w=a)}else d=w,w=a;return w}function W(){var w=d;if(m.substr(d,4).toLowerCase()===vf){var M=m.substr(d,4);d+=4}else M=a,0===sa&&z(wf);if(M!==a){M=d;sa++;var K=n();sa--;K===a?M=void 0:(d=
M,M=a);M!==a?w="LIKE":(d=w,w=a)}else d=w,w=a;return w}function u(){var w=d;if(m.substr(d,3).toLowerCase()===xf){var M=m.substr(d,3);d+=3}else M=a,0===sa&&z(yf);if(M!==a){M=d;sa++;var K=n();sa--;K===a?M=void 0:(d=M,M=a);M!==a?w="NOT":(d=w,w=a)}else d=w,w=a;return w}function H(){var w=d;if(m.substr(d,3).toLowerCase()===zf){var M=m.substr(d,3);d+=3}else M=a,0===sa&&z(Af);if(M!==a){M=d;sa++;var K=n();sa--;K===a?M=void 0:(d=M,M=a);M!==a?w="AND":(d=w,w=a)}else d=w,w=a;return w}function T(){var w=d;if(m.substr(d,
2).toLowerCase()===Bf){var M=m.substr(d,2);d+=2}else M=a,0===sa&&z(Cf);if(M!==a){M=d;sa++;var K=n();sa--;K===a?M=void 0:(d=M,M=a);M!==a?w="OR":(d=w,w=a)}else d=w,w=a;return w}function U(){var w=d;if(m.substr(d,7).toLowerCase()===Df){var M=m.substr(d,7);d+=7}else M=a,0===sa&&z(Ef);if(M!==a){M=d;sa++;var K=n();sa--;K===a?M=void 0:(d=M,M=a);M!==a?w="BETWEEN":(d=w,w=a)}else d=w,w=a;return w}function ea(){var w=d;if(m.substr(d,4).toLowerCase()===Ff){var M=m.substr(d,4);d+=4}else M=a,0===sa&&z(Gf);if(M!==
a){M=d;sa++;var K=n();sa--;K===a?M=void 0:(d=M,M=a);M!==a?w="FROM":(d=w,w=a)}else d=w,w=a;return w}function Y(){var w=d;if(m.substr(d,4).toLowerCase()===Hf){var M=m.substr(d,4);d+=4}else M=a,0===sa&&z(If);if(M!==a){M=d;sa++;var K=n();sa--;K===a?M=void 0:(d=M,M=a);M!==a?w="TRIM":(d=w,w=a)}else d=w,w=a;return w}function ia(){var w=d;if(m.substr(d,8).toLowerCase()===Jf){var M=m.substr(d,8);d+=8}else M=a,0===sa&&z(Kf);if(M!==a){M=d;sa++;var K=n();sa--;K===a?M=void 0:(d=M,M=a);M!==a?w="INTERVAL":(d=w,
w=a)}else d=w,w=a;return w}function ka(){var w=d;if(m.substr(d,4).toLowerCase()===Lf){var M=m.substr(d,4);d+=4}else M=a,0===sa&&z(Mf);if(M!==a){M=d;sa++;var K=n();sa--;K===a?M=void 0:(d=M,M=a);M!==a?w="YEAR":(d=w,w=a)}else d=w,w=a;return w}function ma(){var w=d;if(m.substr(d,5).toLowerCase()===Nf){var M=m.substr(d,5);d+=5}else M=a,0===sa&&z(Of);if(M!==a){M=d;sa++;var K=n();sa--;K===a?M=void 0:(d=M,M=a);M!==a?w="MONTH":(d=w,w=a)}else d=w,w=a;return w}function ua(){var w=d;if(m.substr(d,3).toLowerCase()===
Pf){var M=m.substr(d,3);d+=3}else M=a,0===sa&&z(Qf);if(M!==a){M=d;sa++;var K=n();sa--;K===a?M=void 0:(d=M,M=a);M!==a?w="DAY":(d=w,w=a)}else d=w,w=a;return w}function ta(){var w=d;if(m.substr(d,4).toLowerCase()===Rf){var M=m.substr(d,4);d+=4}else M=a,0===sa&&z(Sf);if(M!==a){M=d;sa++;var K=n();sa--;K===a?M=void 0:(d=M,M=a);M!==a?w="HOUR":(d=w,w=a)}else d=w,w=a;return w}function wa(){var w=d;if(m.substr(d,6).toLowerCase()===Tf){var M=m.substr(d,6);d+=6}else M=a,0===sa&&z(Uf);if(M!==a){M=d;sa++;var K=
n();sa--;K===a?M=void 0:(d=M,M=a);M!==a?w="MINUTE":(d=w,w=a)}else d=w,w=a;return w}function Aa(){var w=d;if(m.substr(d,6).toLowerCase()===Vf){var M=m.substr(d,6);d+=6}else M=a,0===sa&&z(Wf);if(M!==a){M=d;sa++;var K=n();sa--;K===a?M=void 0:(d=M,M=a);M!==a?w="SECOND":(d=w,w=a)}else d=w,w=a;return w}function Da(){var w=d;if(m.substr(d,4).toLowerCase()===Xf){var M=m.substr(d,4);d+=4}else M=a,0===sa&&z(Yf);if(M!==a){M=d;sa++;var K=n();sa--;K===a?M=void 0:(d=M,M=a);M!==a?w="CASE":(d=w,w=a)}else d=w,w=a;
return w}function Ka(){var w=d;if(m.substr(d,3).toLowerCase()===Zf){var M=m.substr(d,3);d+=3}else M=a,0===sa&&z($f);if(M!==a){M=d;sa++;var K=n();sa--;K===a?M=void 0:(d=M,M=a);M!==a?w="END":(d=w,w=a)}else d=w,w=a;return w}function Fa(){var w=d;if(m.substr(d,4).toLowerCase()===ag){var M=m.substr(d,4);d+=4}else M=a,0===sa&&z(bg);if(M!==a){M=d;sa++;var K=n();sa--;K===a?M=void 0:(d=M,M=a);M!==a?w="WHEN":(d=w,w=a)}else d=w,w=a;return w}function Ja(){var w=d;if(m.substr(d,4).toLowerCase()===cg){var M=m.substr(d,
4);d+=4}else M=a,0===sa&&z(dg);if(M!==a){M=d;sa++;var K=n();sa--;K===a?M=void 0:(d=M,M=a);M!==a?w="THEN":(d=w,w=a)}else d=w,w=a;return w}function Ga(){if(44===m.charCodeAt(d)){var w=eg;d++}else w=a,0===sa&&z(fg);return w}function Ha(){if(40===m.charCodeAt(d)){var w=gg;d++}else w=a,0===sa&&z(hg);return w}function Sa(){if(41===m.charCodeAt(d)){var w=ig;d++}else w=a,0===sa&&z(jg);return w}function ra(){var w;var M=[];for(w=fb();w!==a;)M.push(w),w=fb();return M}function fb(){if(kg.test(m.charAt(d))){var w=
m.charAt(d);d++}else w=a,0===sa&&z(lg);return w}function hb(w,M,K,Z){w={type:"binary_expr",operator:w,left:M,right:K};void 0!==Z&&(w.escape=Z);return w}function cb(w,M){for(var K=0;K<M.length;K++)w=hb(M[K][1],w,M[K][3]);return w}v=void 0!==v?v:{};var a={},Va={start:y},Ua=y,Ta="!",jb=x("!",!1),rb="\x3d",Qa=x("\x3d",!1),xb="\x3e\x3d",aa=x("\x3e\x3d",!1),ha="\x3e",fa=x("\x3e",!1),oa="\x3c\x3d",ya=x("\x3c\x3d",!1),Ba="\x3c\x3e",Na=x("\x3c\x3e",!1),Oa="\x3c",ab=x("\x3c",!1),Za="!\x3d",$a=x("!\x3d",!1),
gb="+",kb=x("+",!1),pc="-",qc=x("-",!1),wd="*",xd=x("*",!1),yd="/",zd=x("/",!1),Qe=/^[A-Za-z_\x80-\uFFFF]/,Re=B([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),Se=/^[A-Za-z0-9_]/,Te=B([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),Ue=/^[A-Za-z0-9_.\x80-\uFFFF]/,Ve=B([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],!1,!1),We="@",Xe=x("@",!1),md=function(w){return{type:"interval-period",period:w.value,precision:null,secondary:null}},nd=function(w,M){return{type:"interval-period",period:"second",
precision:w,secondary:M}},od="'",pd=x("'",!1),qd="N'",ff=x("N'",!1),nc="''",rd=x("''",!1),sd=/^[^']/,td=B(["'"],!0,!1),jf=".",kf=x(".",!1),pf=/^[0-9]/,qf=B([["0","9"]],!1,!1),lf=/^[eE]/,mf=B(["e","E"],!1,!1),nf=/^[+\-]/,of=B(["+","-"],!1,!1),Hd="null",Id=x("NULL",!0),Bd="true",Cd=x("TRUE",!0),Ed="false",Fd=x("FALSE",!0),rf="in",sf=x("IN",!0),tf="is",uf=x("IS",!0),vf="like",wf=x("LIKE",!0),ud="escape",vd=x("ESCAPE",!0),xf="not",yf=x("NOT",!0),zf="and",Af=x("AND",!0),Bf="or",Cf=x("OR",!0),Df="between",
Ef=x("BETWEEN",!0),Ff="from",Gf=x("FROM",!0),ne="for",oe=x("FOR",!0),de="substring",ee=x("SUBSTRING",!0),Td="extract",Ud=x("EXTRACT",!0),Hf="trim",If=x("TRIM",!0),te="position",ue=x("POSITION",!0),Od="timestamp",Pd=x("TIMESTAMP",!0),Kd="date",Ld=x("DATE",!0),Ye="leading",Ze=x("LEADING",!0),$e="trailing",af=x("TRAILING",!0),bf="both",cf=x("BOTH",!0),df="to",ef=x("TO",!0),Jf="interval",Kf=x("INTERVAL",!0),Lf="year",Mf=x("YEAR",!0),Nf="month",Of=x("MONTH",!0),Pf="day",Qf=x("DAY",!0),Rf="hour",Sf=x("HOUR",
!0),Tf="minute",Uf=x("MINUTE",!0),Vf="second",Wf=x("SECOND",!0),Xf="case",Yf=x("CASE",!0),Zf="end",$f=x("END",!0),ag="when",bg=x("WHEN",!0),cg="then",dg=x("THEN",!0),gf="else",hf=x("ELSE",!0),eg=",",fg=x(",",!1),gg="(",hg=x("(",!1),ig=")",jg=x(")",!1),kg=/^[ \t\n\r]/,lg=B([" ","\t","\n","\r"],!1,!1),gd="`",hd=x("`",!1),id=/^[^`]/,jd=B(["`"],!0,!1),d=0,Zb=[{line:1,column:1}],sb=0,oc=[],sa=0;if("startRule"in v){if(!(v.startRule in Va))throw Error("Can't start parsing from rule \""+v.startRule+'".');
Ua=Va[v.startRule]}var Qc=Ua();if(Qc!==a&&d===m.length)return Qc;Qc!==a&&d<m.length&&z({type:"end"});throw function(w,M,K){return new E(E.buildMessage(w,M),w,M,K)}(oc,sb<m.length?m.charAt(sb):null,sb<m.length?V(sb,sb+1):V(sb,sb));}}})});let I=function(){function q(){}q.parse=function(E){return F.parse(E)};return q}();l.WhereGrammar=I;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/graphics/data/utils":function(){define("require exports ../../../core/maybe ../../../core/jsonMap ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/extentUtils ../../../geometry/support/jsonUtils ../../../core/unitUtils ../../../geometry/support/normalizeUtils ../OptimizedGeometry ../featureConversionUtils ../centroid ./projectionSupport".split(" "),
function(l,h,F,I,q,E,m,v,x,B,Q,V,z){function y(S,D,k,p=S.hasZ,n=S.hasM){const e=S.hasZ&&p,g=S.hasM&&n;return k?(S=Q.quantizeOptimizedGeometry(P,D,S.hasZ,S.hasM,"esriGeometryPoint",k,p,n),Q.convertToPoint(S,e,g)):Q.convertToPoint(D,e,g)}async function C(S,D,k){if(!S)return null;var {where:p}=S;S.where=p=p&&p.trim();if(!p||/^1 *= *1$/.test(p)||D&&D===p)S.where=null;if(!S.geometry)return S;D=await b(S);S.distance=0;S.units=null;"esriSpatialRelEnvelopeIntersects"===S.spatialRel&&({spatialReference:p}=
S.geometry,D=E.getGeometryExtent(D),D.spatialReference=p);S.geometry=D;await z.checkProjectionSupport(D.spatialReference,k);D=(await x.normalizeCentralMeridian(m.fromJSON(D)))[0];if(F.isNone(D))throw L;D=D.toJSON();D=await z.project(D,D.spatialReference,k);if(!D)throw L;D.spatialReference=k;S.geometry=D;return S}async function b(S){const {geometry:D,distance:k,units:p}=S;if(null==k||"vertexAttributes"in D)return D;var n=D.spatialReference;S=p?G.fromJSON(p):v.getUnitString(n);n=n&&(q.isGeographic(n)||
q.isWebMercator(n))?D:await z.checkProjectionSupport(n,q.WGS84).then(()=>z.project(D,q.WGS84));return(await r())(n.spatialReference,n,k,S)}async function r(){return(await new Promise(function(S,D){l(["../../../geometry/geometryEngineJSON"],S,D)})).geodesicBuffer}const G=new I.JSONMap({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),L=Object.freeze({}),
J=new B,O=new B,P=new B,X={esriGeometryPoint:Q.convertToPoint,esriGeometryPolyline:Q.convertToPolyline,esriGeometryPolygon:Q.convertToPolygon,esriGeometryMultipoint:Q.convertToMultipoint},ca=(S,D)=>"_geVersion"!==S?D:void 0;h.QUERY_ENGINE_EMPTY_RESULT=L;h.cleanFromGeometryEngine=function(S){return S&&"_geVersion"in S?JSON.parse(JSON.stringify(S,ca)):S};h.getCentroid=function(S,D,k){if("esriGeometryPolygon"!==S.geometryType||!D||!D.centroid&&!D.geometry)return null;D.centroid||(D.centroid=V.getCentroidOptimizedGeometry(new B,
D.geometry,S.hasZ,S.hasM));return y(S,D.centroid,k)};h.getGeometry=function(S,D,k,p,n,e,g=D,f=k){const A=D&&g,R=k&&f;p=p?"coords"in p?p:p.geometry:null;if(!p)return null;if(n)return D=Q.generalizeOptimizedGeometry(O,p,D,k,S,n,g,f),e&&(D=Q.quantizeOptimizedGeometry(P,D,A,R,S,e)),X[S](D,A,R);if(e)return e=Q.quantizeOptimizedGeometry(P,p,D,k,S,e,g,f),X[S](e,A,R);Q.removeZMValues(J,p,D,k,g,f);return X[S](J,A,R)};h.normalizeFilter=async function(S,D,k){return C(S,D,k)};h.normalizeQuery=async function(S,
D,k){const {outFields:p,orderByFields:n,groupByFieldsForStatistics:e,outStatistics:g}=S;if(p)for(var f=0;f<p.length;f++)p[f]=p[f].trim();if(n)for(f=0;f<n.length;f++)n[f]=n[f].trim();if(e)for(f=0;f<e.length;f++)e[f]=e[f].trim();if(g)for(f=0;f<g.length;f++)g[f].onStatisticField&&(g[f].onStatisticField=g[f].onStatisticField.trim());S.geometry&&!S.outSR&&(S.outSR=S.geometry.spatialReference);return C(S,D,k)};h.normalizeQueryLike=C;h.transformCentroid=y;Object.defineProperty(h,"__esModule",{value:!0})})},
"esri/layers/graphics/data/spatialQuerySupport":function(){define("require exports ../../../core/Error ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/contains ../../../geometry/support/intersects ../../../geometry/support/jsonUtils ../OptimizedGeometry ../featureConversionUtils ../contains ./projectionSupport ./utils".split(" "),function(l,h,F,I,q,E,m,v,x,B,Q,V){function z(){return new Promise(function(G,L){l(["../../../geometry/geometryEngineJSON"],G,L)})}const y={esriSpatialRelIntersects:"intersects",
esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null};var C={esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,
esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},b={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},r={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1};h.canQueryWithRBush=function(G){if(m.isExtent(G))return!0;if(m.isPolygon(G)){for(const L of G.rings)if(5!==L.length||L[0][0]!==L[1][0]||L[0][0]!==L[4][0]||L[2][0]!==L[3][0]||L[0][1]!==L[3][1]||L[0][1]!==
L[4][1]||L[1][1]!==L[2][1])return!1;return!0}return!1};h.checkSpatialQuerySupport=async function(G,L,J){const {spatialRel:O,geometry:P}=G;if(P){if(!0!==C[O])throw new F("feature-store:unsupported-query","Unsupported query spatial relationship",{query:G});if(I.isValid(P.spatialReference)&&I.isValid(J)){if(!0!==b[m.getJsonType(P)])throw new F("feature-store:unsupported-query","Unsupported query geometry type",{query:G});if(!0!==r[L])throw new F("feature-store:unsupported-query","Unsupported layer geometry type",
{query:G});if(G.outSR)return Q.checkProjectionSupport(G.geometry&&G.geometry.spatialReference,G.outSR)}}};h.getSpatialQueryOperator=function(G,L,J,O,P){if(m.isPolygon(L)&&"esriGeometryPoint"===J&&("esriSpatialRelIntersects"===G||"esriSpatialRelContains"===G)){const X=x.convertFromPolygon(new v,L,!1,!1);return Promise.resolve(ca=>B.polygonContainsPoint(X,!1,!1,ca))}if(m.isPolygon(L)&&"esriGeometryMultipoint"===J){const X=x.convertFromPolygon(new v,L,!1,!1);if("esriSpatialRelContains"===G)return Promise.resolve(ca=>
B.polygonContainsMultipoint(X,!1,!1,ca,O,P))}if(m.isExtent(L)&&"esriGeometryPoint"===J&&("esriSpatialRelIntersects"===G||"esriSpatialRelContains"===G))return Promise.resolve(X=>q.extentContainsPoint(L,V.getGeometry(J,O,P,X)));if(m.isExtent(L)&&"esriGeometryMultipoint"===J&&"esriSpatialRelContains"===G)return Promise.resolve(X=>q.extentContainsMultipoint(L,V.getGeometry(J,O,P,X)));if(m.isExtent(L)&&"esriSpatialRelIntersects"===G){const X=E.getExtentIntersector(J);return Promise.resolve(ca=>X(L,V.getGeometry(J,
O,P,ca)))}return z().then(X=>{const ca=X[y[G]].bind(null,L.spatialReference,L);return S=>ca(V.getGeometry(J,O,P,S))})};Object.defineProperty(h,"__esModule",{value:!0})})},"esri/layers/graphics/contains":function(){define(["exports"],function(l){function h(F,I,q,E,m){if(!F)return!1;I=I?q?4:3:q?3:2;const {coords:v,lengths:x}=F;q=!1;F=0;for(const Q of x){var B=F;for(let V=F,z=F+Q*I;V<z;V+=I){B=V+I;B===z&&(B=F);const y=v[V],C=v[V+1],b=v[B];B=v[B+1];(C<m&&B>=m||B<m&&C>=m)&&y+(m-C)/(B-C)*(b-y)<E&&(q=!q)}F+=
Q*I}return q}l.polygonContainsCoords=h;l.polygonContainsMultipoint=function(F,I,q,E,m,v){m=m?v?4:3:v?3:2;const {coords:x,lengths:B}=E;if(!B)return!1;for(let Q=0,V=0;Q<B.length;Q++,V+=m)if(!h(F,I,q,x[V],x[V+1]))return!1;return!0};l.polygonContainsPoint=function(F,I,q,E){return h(F,I,q,E.coords[0],E.coords[1])};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/graphics/data/timeSupport":function(){define(["exports"],function(l){function h(q,E,m,v,x){if(null!=v&&null!=x)return B=>{const Q=
q.getAttribute(B,E);B=q.getAttribute(B,m);return(null==Q||Q<=x)&&(null==B||B>=v)};if(null!=v)return B=>{B=q.getAttribute(B,m);return null==B||B>=v};if(null!=x)return B=>{B=q.getAttribute(B,E);return null==B||B<=x}}function F(q,E,m,v){if(null!=m&&null!=v&&m===v)return x=>q.getAttribute(x,E)===m;if(null!=m&&null!=v)return x=>{x=q.getAttribute(x,E);return x>=m&&x<=v};if(null!=m)return x=>q.getAttribute(x,E)>=m;if(null!=v)return x=>q.getAttribute(x,E)<=v}function I(){return()=>!1}l.getTimeExtent=function(q,
E){if(!q)return null;const m=E.featureAdapter,{startTimeField:v,endTimeField:x}=q;let B=Number.POSITIVE_INFINITY,Q=Number.NEGATIVE_INFINITY;if(v&&x)E.forEach(V=>{const z=m.getAttribute(V,v);V=m.getAttribute(V,x);null==z||isNaN(z)||(B=Math.min(B,z));null==V||isNaN(V)||(Q=Math.max(Q,V))});else{const V=v||x;E.forEach(z=>{z=m.getAttribute(z,V);null==z||isNaN(z)||(B=Math.min(B,z),Q=Math.max(Q,z))})}return{start:B,end:Q}};l.getTimeOperator=function(q,E,m){if(!E||!q)return null;const {startTimeField:v,endTimeField:x}=
q;if(!v&&!x)return null;const {start:B,end:Q}=E;return null===B&&null===Q?null:void 0===B&&void 0===Q?I():v&&x?h(m,v,x,B,Q):F(m,v||x,B,Q)};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/graphics/data/QueryEngineResult":function(){define("../../../chunks/_rollupPluginBabelHelpers ../../../core/maybe ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ../../../geometry/support/quantizationUtils ./projectionSupport ./attributeSupport ./AttributesBuilder ./utils ./timeSupport".split(" "),
function(l,h,F,I,q,E,m,v,x,B){function Q(C){return C.substr(24,12)+C.substr(19,4)+C.substr(16,2)+C.substr(14,2)+C.substr(11,2)+C.substr(9,2)+C.substr(6,2)+C.substr(4,2)+C.substr(2,2)+C.substr(0,2)}function V(C,b,r,G){if(r&&"esriFieldTypeDate"===r.type){const L=(new Date(C)).getTime(),J=(new Date(b)).getTime();if(!isNaN(L)&&!isNaN(J))return G?J-L:L-J}return"number"===typeof C&&"number"===typeof b?G?b-C:C-b:"string"===typeof C&&"string"===typeof b?(C=C.toUpperCase(),b=b.toUpperCase(),!r||"esriFieldTypeGUID"!==
r.type&&"esriFieldTypeGlobalID"!==r.type?G=(G?C>b:C<b)?-1:(G?C<b:C>b)?1:0:(r=Q(C),b=Q(b),G=(G?r>b:r<b)?-1:(G?r<b:r>b)?1:0),G):G?1:-1}function z(C,b,r,G,L,J){L-=r;J-=G;C=Math.min(1,Math.max(0,((C-r)*L+(b-G)*J)/(L*L+J*J)));return{x:r+L*C,y:G+J*C}}function y(C,b){return C?b?4:3:b?3:2}return function(){function C(r,G,L){this.items=r;this.queryGeometry=G;this.definitionExpression=L.definitionExpression;this.geometryType=L.geometryType;this.hasM=L.hasM;this.hasZ=L.hasZ;this.objectIdField=L.objectIdField;
this.spatialReference=L.spatialReference;this.fieldsIndex=L.fieldsIndex;this.timeInfo=L.timeInfo;this.featureAdapter=L.featureAdapter;this.aggregateAdapter=L.aggregateAdapter}var b=C.prototype;b.createQueryResponseForCount=function(r){const G=new v(r,this.featureAdapter,this.fieldsIndex);if(!r.outStatistics)return G.countDistinctValues(this.items);const {groupByFieldsForStatistics:L,having:J}=r;if(null==L||!L.length)return 1;const O=new Map,P=new Map,X=new Set;r=r.outStatistics;for(const S of r){({statisticType:r}=
S);r="exceedslimit"!==r?S.onStatisticField:void 0;if(!P.has(r)){var ca=[];for(const D of L){const k=this._getAttributeValues(G,D,O);ca.push(k)}P.set(r,this._calculateUniqueValues(ca))}r=P.get(r);for(const D in r){const {data:k,items:p}=r[D];ca=k.join(",");J&&!G.validateItems(p,J)||X.add(ca)}}return X.size};b.createQueryResponse=function(r){let G;G=r.outStatistics?r.outStatistics.some(L=>"exceedslimit"===L.statisticType)?this._createExceedsLimitQueryResponse(r):this._createStatisticsQueryResponse(r):
this._createFeatureQueryResponse(r);r.returnQueryGeometry&&(F.isValid(r.outSR)&&!F.equals(this.queryGeometry.spatialReference,r.outSR)?G.queryGeometry=x.cleanFromGeometryEngine({spatialReference:r.outSR,...E.project(this.queryGeometry,this.queryGeometry.spatialReference,r.outSR)}):G.queryGeometry=x.cleanFromGeometryEngine({spatialReference:r.outSR,...this.queryGeometry}));return G};b.createSnappingResponse=function(r,G){const L=this.featureAdapter,J=y(this.hasZ,this.hasM),{x:O,y:P}=r.point,X="number"===
typeof r.distance?r.distance:r.distance.x,ca="number"===typeof r.distance?r.distance:r.distance.y,S={candidates:[]},D="esriGeometryPolygon"===this.geometryType;G=this.getPointCreator(r.point,this.spatialReference,G);for(const R of this.items){var k=L.getGeometry(R);if(!k)continue;const {coords:N,lengths:ba}=k;if(r.types&1){k=0;for(var p=0;p<ba.length;p++){var n=ba[p];for(var e=0;e<n;e++,k+=J){var g=N[k],f=N[k+1];if(e!==n-1){const la=N[k+J],na=N[k+J+1],{x:pa,y:za}=z(O,P,g,f,la,na);var A=(O-pa)/X;const Ia=
(P-za)/ca;A=A*A+Ia*Ia;1>=A&&S.candidates.push({type:"edge",objectId:L.getObjectId(R),distance:Math.sqrt(A),target:G(pa,za),start:G(g,f),end:G(la,na)})}}}}if(r.types&2)for(k=D?N.length-J:N.length,p=0;p<k;p+=J)n=N[p],e=N[p+1],g=(O-n)/X,f=(P-e)/ca,g=g*g+f*f,1>=g&&S.candidates.push({type:"vertex",objectId:L.getObjectId(R),distance:Math.sqrt(g),target:G(n,e)})}S.candidates.sort((R,N)=>R.distance-N.distance);return S};b.getPointCreator=function(r,G,L){const J=h.isSome(L)&&!F.equals(G,L)?O=>E.project(O,
G,L):O=>O;return null!=r.z&&null!=r.m?(O,P)=>J({x:O,y:P,z:r.z,m:r.m}):null!=r.z?(O,P)=>J({x:O,y:P,z:r.z}):null!=r.m?(O,P)=>J({x:O,y:P,m:r.m}):(O,P)=>J({x:O,y:P})};b.executeAttributesQuery=function(r){var G=m.getWhereClause(r.where,this.fieldsIndex);if(!G)return Promise.resolve(this);if(G.isStandardized){let L=0;const J=[];for(const O of this.items)G.testFeature(O,this.featureAdapter)&&(J[L++]=O);G=new C(J,this.queryGeometry,this);G.definitionExpression=r.where;return Promise.resolve(G)}return Promise.reject(new TypeError("Where clause is not standardized"))};
b.executeAggregateIdsQuery=function(r){if(!r.aggregateIds||!r.aggregateIds.length||h.isNone(this.aggregateAdapter))return Promise.resolve(this);const G=new Set;for(const J of r.aggregateIds)this.aggregateAdapter.getFeatureObjectIds(J).forEach(O=>G.add(O));const L=this.featureAdapter.getObjectId;return Promise.resolve(new C(this.items.filter(J=>G.has(L(J))),this.queryGeometry,this))};b.executeObjectIdsQuery=function(r){if(!r.objectIds||!r.objectIds.length)return Promise.resolve(this);const G=new Set(r.objectIds),
L=this.featureAdapter.getObjectId;return Promise.resolve(new C(this.items.filter(J=>G.has(L(J))),this.queryGeometry,this))};b.executeTimeQuery=function(r){r=B.getTimeOperator(this.timeInfo,r.timeExtent,this.featureAdapter);if(!h.isSome(r))return Promise.resolve(this);r=this.items.filter(r);return Promise.resolve(new C(r,this.queryGeometry,this))};b.filterLatest=function(){const {trackIdField:r,startTimeField:G,endTimeField:L}=this.timeInfo;var J=L||G;const O=new Map,P=this.featureAdapter.getAttribute;
for(const X of this.items){const ca=P(X,r),S=P(X,J),D=O.get(ca);(!D||S>P(D,J))&&O.set(ca,X)}J=Array.from(O.values());return Promise.resolve(new C(J,this.queryGeometry,this))};b.project=async function(r){if(!r||F.equals(this.spatialReference,r))return this;const G=this.featureAdapter,L=(await E.projectMany(this.items.map(J=>x.getGeometry(this.geometryType,this.hasZ,this.hasM,G.getGeometry(J))),this.spatialReference,r)).map((J,O)=>G.cloneWithGeometry(this.items[O],I.convertFromGeometry(J,this.hasZ,
this.hasM)));return new C(L,this.queryGeometry,{definitionExpression:this.definitionExpression,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,objectIdField:this.objectIdField,spatialReference:r,fieldsIndex:this.fieldsIndex,timeInfo:this.timeInfo,featureAdapter:this.featureAdapter})};b._sortFeatures=function(r,G,L){if(1<r.length&&G&&G.length)for(const J of G.reverse()){G=J.split(" ");const O=G[0],P=this.fieldsIndex.get(O),X=G[1]&&"desc"===G[1].toLowerCase();r.sort((ca,S)=>{ca=L(ca,O,
P);S=L(S,O,P);return V(ca,S,P,X)})}};b._createFeatureQueryResponse=function(r){const G=this.items,{geometryType:L,hasM:J,hasZ:O,objectIdField:P,spatialReference:X}=this,{outFields:ca,outSR:S,quantizationParameters:D,resultRecordCount:k,resultOffset:p,returnZ:n,returnM:e}=r,g=null!=k?G.length>(p||0)+k:!1,f=ca&&(-1<ca.indexOf("*")?[...this.fieldsIndex.fields]:ca.map(A=>this.fieldsIndex.get(A)));return{exceededTransferLimit:g,features:this._createFeatures(r,G),fields:f,geometryType:L,hasM:J&&e,hasZ:O&&
n,objectIdFieldName:P,spatialReference:x.cleanFromGeometryEngine(S?S:X),transform:D&&q.toQuantizationTransform(D)||null}};b._createFeatures=function(r,G){const L=new v(r,this.featureAdapter,this.fieldsIndex),{hasM:J,hasZ:O}=this,{orderByFields:P,quantizationParameters:X,returnGeometry:ca,returnCentroid:S,maxAllowableOffset:D,resultOffset:k,resultRecordCount:p,returnZ:n=!1,returnM:e=!1}=r,g=O&&n,f=J&&e;r=[];var A=0;G=[...G];this._sortFeatures(G,P,(ba,la,na)=>L.getFieldValue(ba,la,na));if(ca||S){var R=
q.toQuantizationTransform(X);if(ca&&!S)for(var N of G)r[A++]={attributes:L.getAttributes(N),geometry:x.getGeometry(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(N),D,R,g,f)};else if(!ca&&S)for(const ba of G)r[A++]={attributes:L.getAttributes(ba),centroid:x.transformCentroid(this,this.featureAdapter.getCentroid(ba,this),R)};else for(const ba of G)r[A++]={attributes:L.getAttributes(ba),centroid:x.transformCentroid(this,this.featureAdapter.getCentroid(ba,this),R),geometry:x.getGeometry(this.geometryType,
this.hasZ,this.hasM,this.featureAdapter.getGeometry(ba),D,R,g,f)}}else for(R of G)(N=L.getAttributes(R))&&(r[A++]={attributes:N});A=k||0;null!=p&&(r=r.slice(A,Math.min(r.length,A+p)));return r};b._createExceedsLimitQueryResponse=function(r){var G=!1;let L=Number.POSITIVE_INFINITY,J=Number.POSITIVE_INFINITY;G=Number.POSITIVE_INFINITY;for(const O of r.outStatistics)if("exceedslimit"===O.statisticType){L=null!=O.maxPointCount?O.maxPointCount:Number.POSITIVE_INFINITY;J=null!=O.maxRecordCount?O.maxRecordCount:
Number.POSITIVE_INFINITY;G=null!=O.maxVertexCount?O.maxVertexCount:Number.POSITIVE_INFINITY;break}if("esriGeometryPoint"===this.geometryType)G=this.items.length>L;else if(this.items.length>J)G=!0;else{r=this.hasZ?this.hasM?4:3:this.hasM?3:2;const O=this.featureAdapter;G=this.items.reduce((P,X)=>{X=O.getGeometry(X);return P+(X&&X.coords.length||0)},0)/r>G}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(G)}}]}};
b._createStatisticsQueryResponse=function(r){var G={attributes:{}};const L=[],J=new Map,O=new Map,P=new Map,X=new Map,ca=new v(r,this.featureAdapter,this.fieldsIndex);var S=r.outStatistics;const {groupByFieldsForStatistics:D,having:k,orderByFields:p}=r;r=D&&D.length;const n=!!r,e=n&&D[0],g=n&&!this.fieldsIndex.get(e);for(const ba of S){const {outStatisticFieldName:la,statisticType:na}=ba;S=ba;var f="exceedslimit"!==na?ba.onStatisticField:void 0;const pa="percentile_disc"===na||"percentile_cont"===
na,za=n&&1===r&&(f===e||g)&&"count"===na;if(n){if(!P.has(f)){var A=[];for(const Ia of D){var R=this._getAttributeValues(ca,Ia,J);A.push(R)}P.set(f,this._calculateUniqueValues(A,ca.returnDistinctValues))}A=P.get(f);for(const Ia in A){const {count:da,data:ja,items:qa,itemPositions:Ca}=A[Ia];R=ja.join(",");if(!k||ca.validateItems(qa,k)){const xa=X.get(R)||{attributes:{}};var N=null;if(za)N=da;else{const c=this._getAttributeValues(ca,f,J);N=Ca.map(t=>c[t]);N=pa&&"statisticParameters"in S?this._getPercentileValue(S,
N):this._getStatisticValue(S,N)}xa.attributes[la]=N;D.forEach((c,t)=>xa.attributes[this.fieldsIndex.get(c)?c:`EXPR_${t+1}`]=ja[t]);X.set(R,xa)}}}else f=this._getAttributeValues(ca,f,J),G.attributes[la]=pa&&"statisticParameters"in S?this._getPercentileValue(S,f):this._getStatisticValue(S,f,O);L.push({name:la,alias:la,type:"esriFieldTypeDouble"})}G=n?Array.from(X.values()):[G];this._sortFeatures(G,p,(ba,la)=>ba.attributes[la]);return{fields:L,features:G}};b._getStatisticValue=function(r,G,L){const {onStatisticField:J,
statisticType:O}=r;r=L&&L.has(J)?L.get(J):this._calculateStatistics(G);L&&L.set(J,r);return r["var"===O?"variance":O]};b._getPercentileValue=function(r,G){const {onStatisticField:L,statisticParameters:J,statisticType:O}=r,{value:P,orderBy:X}=J,ca="desc"===X,S=this.fieldsIndex.get(L);r=[...G].filter(D=>null!=D).sort((D,k)=>V(D,k,S,ca));return this._calculatePercentile(r,P,"percentile_disc"===O)};b._getAttributeValues=function(r,G,L){if(L.has(G))return L.get(G);const J=this.fieldsIndex.get(G),O=this.items.map(P=>
r.getFieldValue(P,G,J));L.set(G,O);return O};b._calculateStatistics=function(r){let G=Number.POSITIVE_INFINITY,L=Number.NEGATIVE_INFINITY,J=null,O=null,P=null,X=null;const ca=[];let S=0;for(const D of r)"string"===typeof D?S++:null==D||isNaN(D)||(J+=D,G=Math.min(G,D),L=Math.max(L,D),ca.push(D),S++);if(S){O=J/S;r=0;for(const D of ca)r+=(D-O)**2;X=1<S?r/(S-1):0;P=Math.sqrt(X)}else L=G=null;return{avg:O,count:S,max:L,min:G,stddev:P,sum:J,variance:X}};b._calculateUniqueValues=function(r,G){const L={},
J=this.items,O=J.length;for(let P=0;P<O;P++){const X=J[P],ca=[];for(const D of r)ca.push(D[P]);const S=ca.join(",");G?null==L[S]&&(L[S]={count:1,data:ca,items:[X],itemPositions:[P]}):null==L[S]?L[S]={count:1,data:ca,items:[X],itemPositions:[P]}:(L[S].count++,L[S].items.push(X),L[S].itemPositions.push(P))}return L};b._calculatePercentile=function(r,G,L){if(0===r.length)return null;if(0>=G)return r[0];if(1<=G)return r[r.length-1];var J=(r.length-1)*G,O=Math.floor(J);G=O+1;J%=1;O=r[O];const P=r[G];return G>=
r.length||L||"string"===typeof O||"string"===typeof P?O:O*(1-J)+P*J};l._createClass(C,[{key:"size",get:function(){return this.items.length}}]);return C}()})},"esri/geometry/support/quantizationUtils":function(){define(["exports","./jsonUtils"],function(l,h){function F({scale:D,translate:k},p){return Math.round((p-k[0])/D[0])}function I({scale:D,translate:k},p){return Math.round((k[1]-p)/D[1])}function q(D,k,p){const n=[];let e,g,f,A;for(let R=0;R<p.length;R++){const N=p[R];if(0<R){if(f=F(D,N[0]),
A=I(D,N[1]),f!==e||A!==g)n.push(k(N,f-e,A-g)),e=f,g=A}else e=F(D,N[0]),g=I(D,N[1]),n.push(k(N,e,g))}return 0<n.length?n:null}function E(D,k,p,n){return q(D,p?n?S:ca:n?ca:X,k)}function m(D,k,p,n){const e=[];p=p?n?S:ca:n?ca:X;for(n=0;n<k.length;n++){const g=q(D,p,k[n]);g&&3<=g.length&&e.push(g)}return e.length?e:null}function v(D,k,p,n){const e=[];p=p?n?S:ca:n?ca:X;for(n=0;n<k.length;n++){const g=q(D,p,k[n]);g&&2<=g.length&&e.push(g)}return e.length?e:null}function x({scale:D,translate:k},p){return p*
D[0]+k[0]}function B({scale:D,translate:k},p){return k[1]-p*D[1]}function Q(D,k,p){const n=Array(p.length);if(!p.length)return n;const [e,g]=D.scale;let f=x(D,p[0][0]);D=B(D,p[0][1]);n[0]=k(p[0],f,D);for(let A=1;A<p.length;A++){const R=p[A];f+=R[0]*e;D-=R[1]*g;n[A]=k(R,f,D)}return n}function V(D,k,p){const n=Array(p.length);for(let e=0;e<p.length;e++)n[e]=Q(D,k,p[e]);return n}function z(D,k,p,n){return Q(D,p?n?S:ca:n?ca:X,k)}function y(D,k,p,n){return V(D,p?n?S:ca:n?ca:X,k)}function C(D,k,p,n){return V(D,
p?n?S:ca:n?ca:X,k)}function b(D,k,p){let [n,e]=p[0],g=Math.min(n,k[0]),f=Math.min(e,k[1]),A=Math.max(n,k[2]);k=Math.max(e,k[3]);for(let R=1;R<p.length;R++){const [N,ba]=p[R];n+=N;e+=ba;0>N&&(g=Math.min(g,n));0<N&&(A=Math.max(A,n));0>ba?f=Math.min(f,e):0<ba&&(k=Math.max(k,e))}D[0]=g;D[1]=f;D[2]=A;D[3]=k;return D}function r(D,k){if(!k.length)return null;D[0]=D[1]=Number.POSITIVE_INFINITY;D[2]=D[3]=Number.NEGATIVE_INFINITY;for(let p=0;p<k.length;p++)b(D,D,k[p]);return D}function G(D,k,p,n,e){k.xmin=
F(D,p.xmin);k.ymin=I(D,p.ymin);k.xmax=F(D,p.xmax);k.ymax=I(D,p.ymax);k!==p&&(n&&(k.zmin=p.zmin,k.zmax=p.zmax),e&&(k.mmin=p.mmin,k.mmax=p.mmax));return k}function L(D,k,p,n,e){k.points=E(D,p.points,n,e);return k}function J(D,k,p,n,e){k.x=F(D,p.x);k.y=I(D,p.y);k!==p&&(n&&(k.z=p.z),e&&(k.m=p.m));return k}function O(D,k,p,n,e){D=m(D,p.rings,n,e);if(!D)return null;k.rings=D;return k}function P(D,k,p,n,e){D=v(D,p.paths,n,e);if(!D)return null;k.paths=D;return k}const X=(D,k,p)=>[k,p],ca=(D,k,p)=>[k,p,D[2]],
S=(D,k,p)=>[k,p,D[2],D[3]];l.equals=function(D,k){if(D===k||null==D&&null==k)return!0;if(null==D||null==k)return!1;let p,n,e,g;D&&"upperLeft"===D.originPosition?(p=D.translate[0],n=D.translate[1],D=D.scale[0]):(p=D.extent.xmin,n=D.extent.ymax,D=D.tolerance);k&&"upperLeft"===k.originPosition?(e=k.translate[0],g=k.translate[1],k=k.scale[0]):(e=k.extent.xmin,g=k.extent.ymax,k=k.tolerance);return p===e&&n===g&&D===k};l.getQuantizedBoundsCoordsArray=b;l.getQuantizedBoundsCoordsArrayArray=r;l.getQuantizedBoundsPaths=
function(D){return r([0,0,0,0],D)};l.getQuantizedBoundsPoints=function(D){const k=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return b(k,k,D)};l.getQuantizedBoundsRings=function(D){return r([0,0,0,0],D)};l.quantizeBounds=function(D,k,p){k[0]=F(D,p[0]);k[3]=I(D,p[1]);k[2]=F(D,p[2]);k[1]=I(D,p[3]);return k};l.quantizeExtent=G;l.quantizeGeometry=function(D,k){return D&&k?h.isPoint(k)?J(D,{},k,!1,!1):h.isPolyline(k)?P(D,{},k,!1,!1):h.isPolygon(k)?
O(D,{},k,!1,!1):h.isMultipoint(k)?L(D,{},k,!1,!1):h.isExtent(k)?G(D,{},k,!1,!1):null:null};l.quantizeMultipoint=L;l.quantizePaths=v;l.quantizePoint=J;l.quantizePoints=E;l.quantizePolygon=O;l.quantizePolyline=P;l.quantizeRings=m;l.quantizeX=F;l.quantizeY=I;l.toQuantizationTransform=function(D){return D?{originPosition:"upper-left"===D.originPosition?"upperLeft":"lower-left"===D.originPosition?"lowerLeft":D.originPosition,scale:D.tolerance?[D.tolerance,D.tolerance]:[1,1],translate:D.extent?[D.extent.xmin,
D.extent.ymax]:[0,0]}:null};l.unquantizeBounds=function(D,k,p){return p?(k[0]=x(D,p[0]),k[1]=B(D,p[3]),k[2]=x(D,p[2]),k[3]=B(D,p[1]),k):[x(D,k[0]),B(D,k[3]),x(D,k[2]),B(D,k[1])]};l.unquantizeCoordsArray=Q;l.unquantizeCoordsArrayArray=V;l.unquantizeExtent=function(D,k,p,n,e){k.xmin=x(D,p.xmin);k.ymin=B(D,p.ymin);k.xmax=x(D,p.xmax);k.ymax=B(D,p.ymax);k!==p&&(n&&(k.zmin=p.zmin,k.zmax=p.zmax),e&&(k.mmin=p.mmin,k.mmax=p.mmax));return k};l.unquantizeMultipoint=function(D,k,p,n,e){k.points=z(D,p.points,
n,e);return k};l.unquantizePaths=y;l.unquantizePoint=function(D,k,p,n,e){k.x=x(D,p.x);k.y=B(D,p.y);k!==p&&(n&&(k.z=p.z),e&&(k.m=p.m));return k};l.unquantizePoints=z;l.unquantizePolygon=function(D,k,p,n,e){k.rings=C(D,p.rings,n,e);return k};l.unquantizePolyline=function(D,k,p,n,e){k.paths=y(D,p.paths,n,e);return k};l.unquantizeRings=C;l.unquantizeX=x;l.unquantizeY=B;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/layers/graphics/data/AttributesBuilder":function(){define(["../../../core/maybe",
"./attributeSupport"],function(l,h){return function(){function F(q,E,m){this._fieldDataCache=new Map;this._returnDistinctMap=new Map;this.returnDistinctValues=q.returnDistinctValues;this.fieldsIndex=m;this.featureAdapter=E;if((E=q.outFields)&&-1===E.indexOf("*")){this.outFields=E;q=0;for(const x of E){var v=h.getExpressionFromFieldName(x);v=(E=this.fieldsIndex.get(v))?null:h.getWhereClause(v,m);E=E?E.name:h.getAliasFromFieldName(x)||`FIELD_EXP_${q++}`;this._fieldDataCache.set(x,{alias:E,clause:v})}}}
var I=F.prototype;I.countDistinctValues=function(q){if(!this.returnDistinctValues)return q.length;q.forEach(E=>this.getAttributes(E));return this._returnDistinctMap.size};I.getAttributes=function(q){q=this._processAttributesForOutFields(q);return this._processAttributesForDistinctValues(q)};I.getFieldValue=function(q,E,m){const v=m?m.name:E;let x=null;this._fieldDataCache.has(v)?x=this._fieldDataCache.get(v).clause:m||(x=h.getWhereClause(E,this.fieldsIndex),this._fieldDataCache.set(v,{alias:v,clause:x}));
return m?this.featureAdapter.getAttribute(q,v):x.calculateValue(q,this.featureAdapter)};I.validateItem=function(q,E){this._fieldDataCache.has(E)||this._fieldDataCache.set(E,{alias:E,clause:h.getWhereClause(E,this.fieldsIndex)});return this._fieldDataCache.get(E).clause.testFeature(q,this.featureAdapter)};I.validateItems=function(q,E){this._fieldDataCache.has(E)||this._fieldDataCache.set(E,{alias:E,clause:h.getWhereClause(E,this.fieldsIndex)});return this._fieldDataCache.get(E).clause.testSet(q,this.featureAdapter)};
I._processAttributesForOutFields=function(q){const E=this.outFields;if(!E||!E.length)return this.featureAdapter.getAttributes(q);const m={};for(const v of E){const {alias:x,clause:B}=this._fieldDataCache.get(v);m[x]=B?B.calculateValue(q,this.featureAdapter):this.featureAdapter.getAttribute(q,x)}return m};I._processAttributesForDistinctValues=function(q){if(l.isNone(q)||!this.returnDistinctValues)return q;var E=this.outFields,m=[];if(E)for(const x of E){var {alias:v}=this._fieldDataCache.get(x);m.push(q[v])}else for(v in q)m.push(q[v]);
E=`${(E||["*"]).join(",")}=${m.join(",")}`;m=this._returnDistinctMap.get(E)||0;this._returnDistinctMap.set(E,++m);return 1<m?null:q};return F}()})},"esri/views/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTiledFetcher":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/has ../../../../../core/maybe ../../../../../core/Logger ../../../../../core/accessorSupport/ensureType ../../../../../core/handleUtils ../../../../../core/accessorSupport/decorators/property ../../../../../core/jsonMap ../../../../../core/accessorSupport/decorators/subclass ../../../../../core/urlUtils ../../../../../core/uuid ../../../../../portal/support/resourceExtension ../../../../../core/arrayUtils ../../../../../core/promiseUtils ../../../../../geometry/Extent ../../../../../geometry/support/aaBoundingRect ../../../../../layers/graphics/featureConversionUtils ../../../../../tasks/support/Query ../../../../../rest/query/operations/pbfOptimizedFeatureSet ../../../../../rest/query/operations/query ../../../../../core/AsyncSequence ../../../../../core/HandleOwner ./PendingFeatureTile".split(" "),
function(l,h,F,I,q,E,m,v,x,B,Q,V,z,y,C,b,r,G,L,J,O,P,X,ca,S){const D=E.getLogger("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTiledFetcher");l.FeatureServiceTiledFetcher=function(k){function p(e){e=k.call(this,e)||this;e.tilesOfInterest=[];e.availability=0;e.pendingTiles=new Map;e.pendingEdits=new X.AsyncSequence;e.pendingEditsAbortController=b.createAbortController();return e}h._inheritsLoose(p,k);var n=p.prototype;n.initialize=function(){this.initializeFetchExtent();
this.updatingHandles.add(this,"configuration",()=>this.refresh());this.updatingHandles.add(this,"tilesOfInterest",(e,g)=>{C.equals(e,g,({id:f},{id:A})=>f===A)||this.process()},1)};n.destroy=function(){this.pendingTiles.forEach(e=>this.deletePendingTile(e));this.pendingTiles.clear();this.store.destroy();this.tilesOfInterest.length=0;this.pendingEditsAbortController.abort();this.pendingEditsAbortController=null};n.refresh=function(){this.store.refresh();this.pendingTiles.forEach(e=>this.deletePendingTile(e));
this.process()};n.applyEdits=function(e){this.pendingEdits.push(e,async g=>{if(0!==g.addedFeatures.length||0!==g.updatedFeatures.length||0!==g.deletedFeatures.length){for(const [,f]of this.pendingTiles)f.reset();await this.updatingHandles.addPromise(this.store.processEdits(g,(f,A)=>this.queryFeaturesById(f,A),this.pendingEditsAbortController.signal));this.processPendingTiles()}})};n.initializeFetchExtent=function(){if(this.capabilities.query.supportsExtent){var e=b.createTask(async g=>{try{var f;
const A=await P.executeQueryForExtent(this.url,new J({where:"1\x3d1",outSpatialReference:this.spatialReference,cacheHint:this.capabilities.query.supportsCacheHint?!0:void 0}),{query:this.configuration.customParameters,signal:g});this.store.extent=r.fromJSON(null==(f=A.data)?void 0:f.extent)}catch(A){b.throwIfAbortError(A),D.error("Failed to fetch data extent",A)}});this.updatingHandles.addPromise(e.promise.then(()=>this.process()));this.handles.add(v.makeHandle(()=>e.abort()));this.fetchExtentTask=
e}};n.process=function(){q.isSome(this.fetchExtentTask)&&!this.fetchExtentTask.finished?this.setAvailability(0):(this.markTilesNotAlive(),this.createPendingTiles(),this.deletePendingTiles(),this.processPendingTiles())};n.markTilesNotAlive=function(){for(const [,e]of this.pendingTiles)e.alive=!1};n.createPendingTiles=function(){var e=this.collectMissingTilesInfo();this.setAvailability(q.isNone(e)?1:e.coveredArea/e.fullArea);if(!q.isNone(e))for(const {data:g,resolution:f}of e.missingTiles)(e=this.pendingTiles.get(g.id))?
(e.resolution=f,e.alive=!0):this.createPendingTile(g,f)};n.collectMissingTilesInfo=function(){let e=null;for(let g=this.tilesOfInterest.length-1;0<=g;g--){const f=this.store.process(this.tilesOfInterest[g],(A,R)=>this.verifyTileComplexity(A,R));q.isNone(e)?e=f:e.prepend(f)}return e};n.deletePendingTiles=function(){for(const [,e]of this.pendingTiles)e.alive||this.deletePendingTile(e)};n.processPendingTiles=function(){const e={fetchCount:(g,f)=>this.fetchCount(g,f),fetchFeatures:(g,f,A)=>this.fetchFeatures(g,
f,A),finish:(g,f)=>this.finishPendingTile(g,f),resume:()=>this.processPendingTiles()};if(this.ensureFetchAllCounts(e))for(const [,g]of this.pendingTiles)this.verifyTileComplexity(this.store.getFeatureCount(g.data),g.resolution)&&this.updatingHandles.addPromise(g.process(e))};n.verifyTileComplexity=function(e,g){return this.verifyVertexComplexity(e)&&this.verifyFeatureDensity(e,g)};n.verifyVertexComplexity=function(e){return 1E6>e*this.minimumVerticesPerFeature};n.verifyFeatureDensity=function(e,g){if(q.isNone(this.tileInfo))return!1;
g*=this.tileSize;return 1>25/(g*g)*e};n.ensureFetchAllCounts=function(e){let g=!0;for(const [,f]of this.pendingTiles)2>f.state.type&&this.updatingHandles.addPromise(f.process(e)),1>=f.state.type&&(g=!1);return g};n.finishPendingTile=function(e,g){this.store.add(e.data,g);this.deletePendingTile(e);this.updateAvailability()};n.updateAvailability=function(){const e=this.collectMissingTilesInfo();this.setAvailability(q.isNone(e)?1:e.coveredArea/e.fullArea)};n.setAvailability=function(e){this._set("availability",
e)};n.createPendingTile=function(e,g){g=new S.PendingFeatureTile(e,g);this.pendingTiles.set(e.id,g);return g};n.deletePendingTile=function(e){e.reset();this.pendingTiles.delete(e.data.id)};n.fetchCount=async function(e,g){return this.store.fetchCount(e.data,this.url,this.createCountQuery(e),{query:this.customParameters,timeout:6E5,signal:g})};n.fetchFeatures=async function(e,g,f){let A=0,R,N=0,ba=g;for(;;){const la=this.createFeaturesQuery(e),na=this.setPagingParameters(la,A,ba),{features:pa,exceededTransferLimit:za}=
await this.queryFeatures(la,f);na&&(A+=q.unwrap(la.num));N+=pa.length;R=R?R.concat(pa):pa;ba=g-N;if(!na||!za||0>=ba)return R}};n.filterProperties=function(e){return q.isNone(e)?{where:"1\x3d1",gdbVersion:void 0,timeExtent:void 0}:{where:e.where||"1\x3d1",timeExtent:e.timeExtent,gdbVersion:e.gdbVersion}};n.queryFeaturesById=function(e,g){const f=this.createFeaturesQuery(null);f.objectIds=e;return this.queryFeatures(f,g)};n.queryFeatures=function(e,g){return this.capabilities.query.supportsFormatPBF?
this.queryFeaturesPBF(e,g):this.queryFeaturesJSON(e,g)};n.queryFeaturesPBF=async function(e,g){const {sourceSpatialReference:f}=this;({data:e}=await P.executeQueryPBF(this.url,e,new O.OptimizedFeatureSetParserContext({sourceSpatialReference:f}),{query:this.configuration.customParameters,timeout:6E5,signal:g}));return L.unquantizeOptimizedFeatureSet(e)};n.queryFeaturesJSON=async function(e,g){const {sourceSpatialReference:f}=this;({data:e}=await P.executeQuery(this.url,e,f,{query:this.configuration.customParameters,
timeout:6E5,signal:g}));return L.convertFromFeatureSet(e,this.objectIdField)};n.createCountQuery=function(e){e=this.createBaseQuery(e);this.capabilities.query.supportsCacheHint&&(e.cacheHint=!0);return e};n.createFeaturesQuery=function(e){const g=this.createBaseQuery(e);g.outFields=[this.objectIdField];g.returnGeometry=!0;q.isSome(e)&&(this.capabilities.query.supportsResultType?g.resultType="tile":this.capabilities.query.supportsCacheHint&&(g.cacheHint=!0));return g};n.createBaseQuery=function(e){e=
new J({returnZ:!1,returnM:!1,geometry:q.isSome(this.tileInfo)&&q.isSome(e)?G.toExtent(e.data.extent,this.tileInfo.spatialReference):void 0});const g=this.configuration.filter;q.isSome(g)&&(e.where=g.where,e.gdbVersion=g.gdbVersion,e.timeExtent=g.timeExtent);e.outSpatialReference=this.spatialReference;return e};n.setPagingParameters=function(e,g,f){if(!this.capabilities.query.supportsPagination)return!1;const {supportsMaxRecordCountFactor:A,supportsCacheHint:R,tileMaxRecordCount:N,maxRecordCount:ba,
supportsResultType:la}=this.capabilities.query,na=A?J.MAX_MAX_RECORD_COUNT_FACTOR:1,pa=na*((la||R)&&N?N:ba?ba:2E3);e.start=g;A?(e.maxRecordCountFactor=Math.min(na,Math.ceil(f/pa)),e.num=Math.min(f,e.maxRecordCountFactor*pa)):e.num=Math.min(f,pa);return!0};h._createClass(p,[{key:"minimumVerticesPerFeature",get:function(){var e;switch(null==(e=this.store)?void 0:e.featureStore.geometryType){case "esriGeometryPoint":case "esriGeometryMultipoint":return 1;case "esriGeometryPolygon":return 4;case "esriGeometryPolyline":return 2}}},
{key:"filter",set:function(e){const g=this._get("filter");e=this.filterProperties(e);JSON.stringify(g)!==JSON.stringify(e)&&this._set("filter",e)}},{key:"customParameters",set:function(e){const g=this._get("customParameters");JSON.stringify(g)!==JSON.stringify(e)&&this._set("customParameters",e)}},{key:"configuration",get:function(){return{filter:this.filter,customParameters:this.customParameters,tileInfo:this.tileInfo,tileSize:this.tileSize}}},{key:"tileInfo",set:function(e){const g=this._get("tileInfo");
g===e||q.isSome(e)&&q.isSome(g)&&JSON.stringify(e)===JSON.stringify(g)||(this._set("tileInfo",e),this.store.tileInfo=e)}},{key:"tileSize",set:function(e){this._get("tileSize")!==e&&this._set("tileSize",e)}},{key:"updating",get:function(){return this.updatingHandles.updating||this.pendingEdits.updating}},{key:"debugInfo",get:function(){return{numberOfFeatures:this.store.featureStore.numFeatures,tilesOfInterest:this.tilesOfInterest,pendingTiles:Array.from(this.pendingTiles.values()).map(e=>e.debugInfo),
storedTiles:this.store.debugInfo}}}]);return p}(ca.HandleOwner);F.__decorate([x.property({constructOnly:!0})],l.FeatureServiceTiledFetcher.prototype,"url",void 0);F.__decorate([x.property({constructOnly:!0})],l.FeatureServiceTiledFetcher.prototype,"objectIdField",void 0);F.__decorate([x.property({constructOnly:!0})],l.FeatureServiceTiledFetcher.prototype,"capabilities",void 0);F.__decorate([x.property({constructOnly:!0})],l.FeatureServiceTiledFetcher.prototype,"sourceSpatialReference",void 0);F.__decorate([x.property({constructOnly:!0})],
l.FeatureServiceTiledFetcher.prototype,"spatialReference",void 0);F.__decorate([x.property({constructOnly:!0})],l.FeatureServiceTiledFetcher.prototype,"store",void 0);F.__decorate([x.property({readOnly:!0})],l.FeatureServiceTiledFetcher.prototype,"minimumVerticesPerFeature",null);F.__decorate([x.property()],l.FeatureServiceTiledFetcher.prototype,"filter",null);F.__decorate([x.property()],l.FeatureServiceTiledFetcher.prototype,"customParameters",null);F.__decorate([x.property({readOnly:!0})],l.FeatureServiceTiledFetcher.prototype,
"configuration",null);F.__decorate([x.property()],l.FeatureServiceTiledFetcher.prototype,"tileInfo",null);F.__decorate([x.property()],l.FeatureServiceTiledFetcher.prototype,"tileSize",null);F.__decorate([x.property()],l.FeatureServiceTiledFetcher.prototype,"tilesOfInterest",void 0);F.__decorate([x.property({readOnly:!0})],l.FeatureServiceTiledFetcher.prototype,"updating",null);F.__decorate([x.property({readOnly:!0})],l.FeatureServiceTiledFetcher.prototype,"availability",void 0);l.FeatureServiceTiledFetcher=
F.__decorate([Q.subclass("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTiledFetcher")],l.FeatureServiceTiledFetcher);Object.defineProperty(l,"__esModule",{value:!0})})},"esri/rest/query/operations/pbfOptimizedFeatureSet":function(){define("exports ../../../geometry/support/spatialReferenceUtils ../../../core/unitUtils ../../../layers/graphics/OptimizedFeature ../../../layers/graphics/OptimizedFeatureSet ../../../layers/graphics/OptimizedGeometry".split(" "),function(l,
h,F,I,q,E){const m=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];let v=function(){function x(Q){this.options=Q;this.geometryTypes=m;this._vertexDimension=this._coordinatePtr=0}var B=x.prototype;B.createFeatureResult=function(){return new q};B.prepareFeatures=function(Q){this._vertexDimension=2;Q.hasZ&&this._vertexDimension++;Q.hasM&&this._vertexDimension++};B.finishFeatureResult=function(Q){if(Q&&Q.features&&Q.hasZ&&this.options.sourceSpatialReference&&
Q.spatialReference&&!h.equals(Q.spatialReference,this.options.sourceSpatialReference)&&!Q.spatialReference.vcsWkid){var V=F.getMetersPerVerticalUnitForSR(this.options.sourceSpatialReference),z=F.getMetersPerVerticalUnitForSR(Q.spatialReference);V/=z;if(1!==V)for(const y of Q.features)if(y.geometry&&y.geometry.coords)for(Q=y.geometry.coords,z=2;z<Q.length;z+=3)Q[z]*=V}};B.addFeature=function(Q,V){Q.features.push(V)};B.createFeature=function(){return new I};B.createSpatialReference=function(){return{wkid:0}};
B.createGeometry=function(){return new E};B.addField=function(Q,V){Q.fields.push(V)};B.allocateCoordinates=function(Q){Q.coords.length=Q.lengths.reduce((V,z)=>V+z,0)*this._vertexDimension;this._coordinatePtr=0};B.addCoordinate=function(Q,V){Q.coords[this._coordinatePtr++]=V};B.addCoordinatePoint=function(Q,V){Q.coords.push(V)};B.addLength=function(Q,V){Q.lengths.push(V)};B.addQueryGeometry=function(Q,V){Q.queryGeometry=V.queryGeometry;Q.queryGeometryType=V.queryGeometryType};B.createPointGeometry=
function(){return new E};return x}();l.OPTIMIZED_GEOMETRY_TYPES=m;l.OptimizedFeatureSetParserContext=v;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/rest/query/operations/query":function(){define("exports ../../../core/maybe ../../../core/urlUtils ../../../geometry/support/jsonUtils ../../../request ../../../geometry/support/normalizeUtils ./queryZScale ../../../tasks/operations/urlUtils ./pbfQueryUtils".split(" "),function(l,h,F,I,q,E,m,v,x){function B(z,y){const C=z.geometry;z=z.toJSON();
h.isSome(C)&&(z.geometry=JSON.stringify(C),z.geometryType=I.getJsonType(C),z.inSR=C.spatialReference.wkid||JSON.stringify(C.spatialReference));z.groupByFieldsForStatistics&&(z.groupByFieldsForStatistics=z.groupByFieldsForStatistics.join(","));z.objectIds&&(z.objectIds=z.objectIds.join(","));z.orderByFields&&(z.orderByFields=z.orderByFields.join(","));!z.outFields||!z.returnDistinctValues&&(null!=y&&y.returnCountOnly||null!=y&&y.returnExtentOnly||null!=y&&y.returnIdsOnly)?delete z.outFields:-1!==z.outFields.indexOf("*")?
z.outFields="*":z.outFields=z.outFields.join(",");z.outSR?z.outSR=z.outSR.wkid||JSON.stringify(z.outSR):C&&(z.returnGeometry||z.returnCentroid)&&(z.outSR=z.inSR);z.returnGeometry&&delete z.returnGeometry;z.outStatistics&&(z.outStatistics=JSON.stringify(z.outStatistics));z.pixelSize&&(z.pixelSize=JSON.stringify(z.pixelSize));z.quantizationParameters&&(z.quantizationParameters=JSON.stringify(z.quantizationParameters));z.parameterValues&&(z.parameterValues=JSON.stringify(z.parameterValues));z.rangeValues&&
(z.rangeValues=JSON.stringify(z.rangeValues));z.dynamicDataSource&&(z.layer=JSON.stringify({source:z.dynamicDataSource}),delete z.dynamicDataSource);if(z.timeExtent){const {start:b,end:r}=z.timeExtent;if(null!=b||null!=r)z.time=b===r?b:`${null==b?"null":b},${null==r?"null":r}`;delete z.timeExtent}return z}function Q(z,y,C){return V(z,y,"pbf",C)}function V(z,y,C,b={},r={}){const G="string"===typeof z?F.urlToObject(z):z;z=y.geometry?[y.geometry]:[];b.responseType="pbf"===C?"array-buffer":"json";return E.normalizeCentralMeridian(z,
null,b).then(L=>{L=L&&L[0];h.isSome(L)&&(y=y.clone(),y.geometry=L);L=v.mapParameters({...G.query,f:C,...r,...B(y,r)});return q(F.join(G.path,"query"),{...b,query:{...L,...b.query}})})}l.executeQuery=async function(z,y,C,b){z=h.isSome(y.timeExtent)&&y.timeExtent.isEmpty?{data:{features:[]}}:await V(z,y,"json",b);m.applyFeatureSetZUnitScaling(y,C,z.data);return z};l.executeQueryForCount=function(z,y,C){return h.isSome(y.timeExtent)&&y.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):V(z,y,"json",
C,{returnIdsOnly:!0,returnCountOnly:!0})};l.executeQueryForExtent=function(z,y,C){return h.isSome(y.timeExtent)&&y.timeExtent.isEmpty?Promise.resolve({data:{count:0,extent:null}}):V(z,y,"json",C,{returnExtentOnly:!0,returnCountOnly:!0}).then(b=>{const r=b.data;if(r.hasOwnProperty("extent"))return b;if(r.features)throw Error("Layer does not support extent calculation.");if(r.hasOwnProperty("count"))throw Error("Layer does not support extent calculation.");return b})};l.executeQueryForIds=function(z,
y,C){return h.isSome(y.timeExtent)&&y.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):V(z,y,"json",C,{returnIdsOnly:!0})};l.executeQueryPBF=async function(z,y,C,b){if(h.isSome(y.timeExtent)&&y.timeExtent.isEmpty)return Promise.resolve({data:C.createFeatureResult()});z=await Q(z,y,b);z.data=x.parsePBFFeatureQuery(z.data,C);return z};l.executeQueryPBFBuffer=Q;l.queryToQueryStringParameters=B;l.runQuery=V;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/rest/query/operations/queryZScale":function(){define(["exports",
"./zscale"],function(l,h){l.applyFeatureSetZUnitScaling=function(F,I,q){if(q&&q.features&&q.hasZ&&(F=h.getGeometryZScaler(q.geometryType,I,F.outSpatialReference)))for(const E of q.features)F(E.geometry)};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/rest/query/operations/zscale":function(){define(["exports","../../../core/maybe","../../../geometry/support/spatialReferenceUtils","../../../core/unitUtils"],function(l,h,F,I){function q(m,v,x){if(null==m.hasM||m.hasZ)for(const B of v)for(const Q of B)2<
Q.length&&(Q[2]*=x)}function E(m,v,x){if(m)for(const Q of m){m=Q.geometry;var B=x;if(m&&m.spatialReference&&!F.equals(m.spatialReference,v)&&(B=I.getMetersPerVerticalUnitForSR(m.spatialReference)/B,1!==B))if("x"in m)null!=m.z&&(m.z*=B);else if("rings"in m)q(m,m.rings,B);else if("paths"in m)q(m,m.paths,B);else if("points"in m&&(null==m.hasM||m.hasZ))for(const V of m.points)2<V.length&&(V[2]*=B)}}l.getGeometryZScaler=function(m,v,x){if(h.isNone(v)||h.isNone(x)||x.vcsWkid||F.equals(v,x))return null;
v=I.getMetersPerVerticalUnitForSR(v);x=I.getMetersPerVerticalUnitForSR(x);const B=v/x;if(1===B)return null;switch(m){case "point":case "esriGeometryPoint":return Q=>{Q&&null!=Q.z&&(Q.z*=B)};case "polyline":case "esriGeometryPolyline":return Q=>{if(Q)for(const V of Q.paths)for(const z of V)2<z.length&&(z[2]*=B)};case "polygon":case "esriGeometryPolygon":return Q=>{if(Q)for(const V of Q.rings)for(const z of V)2<z.length&&(z[2]*=B)};case "multipoint":case "esriGeometryMultipoint":return Q=>{if(Q)for(const V of Q.points)2<
V.length&&(V[2]*=B)};default:return null}};l.unapplyEditsZUnitScaling=function(m,v,x){if((m||v)&&x){var B=I.getMetersPerVerticalUnitForSR(x);E(m,x,B);E(v,x,B)}};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/tasks/operations/urlUtils":function(){define(["exports"],function(l){function h(F){const I={};for(const q in F){if("declaredClass"===q)continue;const E=F[q];if(null!=E&&"function"!==typeof E)if(Array.isArray(E)){I[q]=[];for(let m=0;m<E.length;m++)I[q][m]=h(E[m])}else"object"===typeof E?
E.toJSON&&(I[q]=JSON.stringify(E)):I[q]=E}return I}l.mapParameters=h;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/rest/query/operations/pbfQueryUtils":function(){define(["exports","./pbfFeatureServiceParser"],function(l,h){l.parsePBFFeatureQuery=function(F,I){var q=h.parseFeatureQuery(F,I);F=q.queryResult.featureResult;I=q.queryResult.queryGeometry;q=q.queryResult.queryGeometryType;if(F&&F.features&&F.features.length&&F.objectIdFieldName){const E=F.objectIdFieldName;for(const m of F.features)m.attributes&&
(m.objectId=m.attributes[E])}F&&(F.queryGeometry=I,F.queryGeometryType=q);return F};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/rest/query/operations/pbfFeatureServiceParser":function(){define("exports ../../../core/maybe ../../../core/Logger ../../../core/Error ../../../layers/graphics/OptimizedGeometry ./pbfOptimizedFeatureSet ../../../core/pbf".split(" "),function(l,h,F,I,q,E,m){function v(k){return k>=ca.length?null:ca[k]}function x(k,p,n){for(n=p.createPointGeometry(n);k.next();)switch(k.tag()){case 3:{var e=
k.getUInt32();e=k.pos()+e;let g=0;for(;k.pos()<e;)p.addCoordinatePoint(n,k.getSInt64(),g++);break}default:k.skip()}return n}function B(k,p,n){const e=p.createGeometry(n);for(n=2+(n.hasZ?1:0)+(n.hasM?1:0);k.next();)switch(k.tag()){case 2:var g=k.getUInt32();g=k.pos()+g;for(var f=0;k.pos()<g;)p.addLength(e,k.getUInt32(),f++);break;case 3:g=k.getUInt32();g=k.pos()+g;f=0;for(p.allocateCoordinates(e);k.pos()<g;)p.addCoordinate(e,k.getSInt64(),f),f++,f===n&&(f=0);break;default:k.skip()}return e}function Q(k){const p=
new q;let n="esriGeometryPoint";for(;k.next();)switch(k.tag()){case 2:var e=k.getUInt32();for(e=k.pos()+e;k.pos()<e;)p.lengths.push(k.getUInt32());break;case 3:e=k.getUInt32();for(e=k.pos()+e;k.pos()<e;)p.coords.push(k.getSInt64());break;case 1:n=E.OPTIMIZED_GEOMETRY_TYPES[k.getEnum()];break;default:k.skip()}return{queryGeometry:p,queryGeometryType:n}}function V(k){for(;k.next();)switch(k.tag()){case 1:return k.getString();case 2:return k.getFloat();case 3:return k.getDouble();case 4:return k.getSInt32();
case 5:return k.getUInt32();case 6:return k.getInt64();case 7:return k.getUInt64();case 8:return k.getSInt64();case 9:return k.getBool();default:return k.skip(),null}return null}function z(k){const p={type:v(0)};for(;k.next();)switch(k.tag()){case 1:p.name=k.getString();break;case 2:p.type=v(k.getEnum());break;case 3:p.alias=k.getString();break;case 4:var n=k.getEnum();n=n>=S.length?null:S[n];p.sqlType=n;break;case 5:try{p.domain=JSON.parse(k.getString())}catch(e){X.error(new I("query:parsing-pbf",
"Failed to parse domain",{error:e})),p.domain=null}break;case 6:p.defaultValue=k.getString();break;default:k.skip()}return p}function y(k){const p={};for(;k.next();)switch(k.tag()){case 1:p.name=k.getString();break;case 2:p.isSystemMaintained=k.getBool();break;default:k.skip()}return p}function C(k,p,n,e){const g=p.createFeature(n);let f=0;for(;k.next();)switch(k.tag()){case 1:{const A=e[f++].name;g.attributes[A]=k.processMessage(V);break}case 2:g.geometry=k.processMessageWithArgs(B,p,n);break;case 4:g.centroid=
k.processMessageWithArgs(x,p,n);break;default:k.skip()}return g}function b(k){const p=[1,1,1,1];for(;k.next();)switch(k.tag()){case 1:p[0]=k.getDouble();break;case 2:p[1]=k.getDouble();break;case 4:p[2]=k.getDouble();break;case 3:p[3]=k.getDouble();break;default:k.skip()}return p}function r(k){const p=[0,0,0,0];for(;k.next();)switch(k.tag()){case 1:p[0]=k.getDouble();break;case 2:p[1]=k.getDouble();break;case 4:p[2]=k.getDouble();break;case 3:p[3]=k.getDouble();break;default:k.skip()}return p}function G(k){const p=
{originPosition:0>=D.length?null:D[0]};for(;k.next();)switch(k.tag()){case 1:var n=k.getEnum();p.originPosition=n>=D.length?null:D[n];break;case 2:p.scale=k.processMessage(b);break;case 3:p.translate=k.processMessage(r);break;default:k.skip()}return p}function L(k){const p={};for(;k.next();)switch(k.tag()){case 1:p.shapeAreaFieldName=k.getString();break;case 2:p.shapeLengthFieldName=k.getString();break;case 3:p.units=k.getString();break;default:k.skip()}return p}function J(k,p){for(p=p.createSpatialReference();k.next();)switch(k.tag()){case 1:p.wkid=
k.getUInt32();break;case 5:p.wkt=k.getString();break;case 2:p.latestWkid=k.getUInt32();break;case 3:p.vcsWkid=k.getUInt32();break;case 4:p.latestVcsWkid=k.getUInt32();break;default:k.skip()}return p}function O(k,p){const n=p.createFeatureResult();n.geometryType=0>=p.geometryTypes.length?null:p.geometryTypes[0];let e=!1;for(;k.next();)switch(k.tag()){case 1:n.objectIdFieldName=k.getString();break;case 3:n.globalIdFieldName=k.getString();break;case 4:n.geohashFieldName=k.getString();break;case 5:n.geometryProperties=
k.processMessage(L);break;case 7:var g=k.getEnum();n.geometryType=g>=p.geometryTypes.length?null:p.geometryTypes[g];break;case 8:n.spatialReference=k.processMessageWithArgs(J,p);break;case 10:n.hasZ=k.getBool();break;case 11:n.hasM=k.getBool();break;case 12:n.transform=k.processMessage(G);break;case 9:g=k.getBool();n.exceededTransferLimit=g;break;case 13:p.addField(n,k.processMessage(z));break;case 15:e||(p.prepareFeatures(n),e=!0);p.addFeature(n,k.processMessageWithArgs(C,p,n,n.fields));break;case 2:n.uniqueIdField=
k.processMessage(y);break;default:k.skip()}p.finishFeatureResult(n);return n}function P(k,p){const n={};let e=null;for(;k.next();)switch(k.tag()){case 4:e=k.processMessageWithArgs(Q);break;case 1:n.featureResult=k.processMessageWithArgs(O,p);break;default:k.skip()}h.isSome(e)&&n.featureResult&&p.addQueryGeometry(n,e);return n}const X=F.getLogger("esri.tasks.operations.pbfFeatureServiceParser"),ca="esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeString esriFieldTypeDate esriFieldTypeOID esriFieldTypeGeometry esriFieldTypeBlob esriFieldTypeRaster esriFieldTypeGUID esriFieldTypeGlobalID esriFieldTypeXML".split(" "),
S="sqlTypeBigInt sqlTypeBinary sqlTypeBit sqlTypeChar sqlTypeDate sqlTypeDecimal sqlTypeDouble sqlTypeFloat sqlTypeGeometry sqlTypeGUID sqlTypeInteger sqlTypeLongNVarchar sqlTypeLongVarbinary sqlTypeLongVarchar sqlTypeNChar sqlTypeNVarchar sqlTypeOther sqlTypeReal sqlTypeSmallInt sqlTypeSqlXml sqlTypeTime sqlTypeTimestamp sqlTypeTimestamp2 sqlTypeTinyInt sqlTypeVarbinary sqlTypeVarchar".split(" "),D=["upperLeft","lowerLeft"];l.parseFeatureQuery=function(k,p){try{const n=new m(new Uint8Array(k),new DataView(k));
for(k={};n.next();)switch(n.tag()){case 2:k.queryResult=n.processMessageWithArgs(P,p);break;default:n.skip()}return k}catch(n){throw new I("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:n});}};l.parseFieldType=v;l.parseTransform=G;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/core/AsyncSequence":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass ./Accessor".split(" "),
function(l,h,F,I,q,E){l.AsyncSequence=function(m){function v(){var B=m.apply(this,arguments)||this;B.updating=!1;B.pending=[];return B}h._inheritsLoose(v,m);var x=v.prototype;x.push=function(B,Q){this.pending.push({promise:B,callback:Q});1===this.pending.length&&this.process()};x.process=function(){if(this.pending.length){this.updating=!0;var B=this.pending[0];B.promise.then(Q=>B.callback(Q)).catch(()=>{}).then(()=>{this.pending.shift();this.process()})}else this.updating=!1};return v}(E);F.__decorate([I.property()],
l.AsyncSequence.prototype,"updating",void 0);l.AsyncSequence=F.__decorate([q.subclass("esri.core.AsyncSequence")],l.AsyncSequence);Object.defineProperty(l,"__esModule",{value:!0})})},"esri/core/HandleOwner":function(){define("exports ../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ./accessorSupport/decorators/property ./accessorSupport/decorators/subclass ./Accessor ./Handles ../views/support/WatchUpdatingTracking".split(" "),function(l,h,F,I,q,E,m,v){const x=B=>{B=function(Q){function V(){return Q.apply(this,
arguments)||this}h._inheritsLoose(V,Q);V.prototype.destroy=function(){this.destroyed||(this.handles.destroy(),this.updatingHandles.destroy())};h._createClass(V,[{key:"handles",get:function(){return this._get("handles")||new m}},{key:"updatingHandles",get:function(){return this._get("updatingHandles")||new v.WatchUpdatingTracking}}]);return V}(B);F.__decorate([I.property({readOnly:!0})],B.prototype,"handles",null);F.__decorate([I.property({readOnly:!0})],B.prototype,"updatingHandles",null);return B=
F.__decorate([q.subclass("esri.core.HandleOwner")],B)};l.HandleOwner=function(B){function Q(){return B.apply(this,arguments)||this}h._inheritsLoose(Q,B);return Q}(x(E));l.HandleOwner=F.__decorate([q.subclass("esri.core.HandleOwner")],l.HandleOwner);l.HandleOwnerMixin=x;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/views/interactive/snapping/featureSources/featureServiceSource/PendingFeatureTile":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../core/maybe ../../../../../core/promiseUtils ../../../../../core/asyncUtils ../../../../../geometry/support/aaBoundingRect".split(" "),
function(l,h,F,I,q,E){let m=function(){function x(Q,V){this.data=Q;this.resolution=V;this.state={type:0};this.alive=!0}var B=x.prototype;B.process=function(Q){switch(this.state.type){case 0:return this.state=this.gotoFetchCount(this.state,Q),this.state.task.promise.then(Q.resume,Q.resume);case 2:return this.state=this.gotoFetchFeatures(this.state,Q),this.state.task.promise.then(Q.resume,Q.resume);case 4:this.state=this.goToDone(this.state,Q)}return null};B.gotoFetchCount=function(Q,V){return{type:1,
previous:Q,task:I.createTask(async z=>{z=await q.resultOrAbort(V.fetchCount(this,z));1===this.state.type&&(this.state=this.gotoFetchedCount(this.state,z.ok?z.value:Infinity))})}};B.gotoFetchedCount=function(Q,V){return{type:2,featureCount:V,previous:Q}};B.gotoFetchFeatures=function(Q,V){return{type:3,previous:Q,task:I.createTask(async z=>{z=await q.resultOrAbort(V.fetchFeatures(this,Q.featureCount,z));3===this.state.type&&(this.state=this.gotoFetchedFeatures(this.state,z.ok?z.value:[]))})}};B.gotoFetchedFeatures=
function(Q,V){return{type:4,previous:Q,features:V}};B.goToDone=function(Q,V){V.finish(this,Q.features);return{type:5,previous:Q}};B.reset=function(){const Q=this.state;this.state={type:0};switch(Q.type){case 1:case 3:Q.task.abort()}};B.intersects=function(Q){if(F.isNone(Q)||!this.data.extent)return!0;E.fromExtent(Q,v);return E.intersects(this.data.extent,v)};h._createClass(x,[{key:"debugInfo",get:function(){return{data:this.data,featureCount:this.featureCount,state:this.stateToString}}},{key:"featureCount",
get:function(){switch(this.state.type){case 0:case 1:return 0;case 2:return this.state.featureCount;case 3:return this.state.previous.featureCount;case 4:return this.state.features.length;case 5:return this.state.previous.features.length}}},{key:"stateToString",get:function(){switch(this.state.type){case 0:return"created";case 1:return"fetch-count";case 2:return"fetched-count";case 3:return"fetch-features";case 4:return"fetched-features";case 5:return"done"}}}]);return x}();const v=E.create();l.PendingFeatureTile=
m;Object.defineProperty(l,"__esModule",{value:!0})})},"esri/core/asyncUtils":function(){define(["exports","./promiseUtils"],function(l,h){l.assertResult=function(F){if(!0===F.ok)return F.value;throw F.error;};l.forEach=function(F,I,q){return h.eachAlways(F.map((E,m)=>I.apply(q,[E,m])))};l.map=function(F,I,q){return h.eachAlways(F.map((E,m)=>I.apply(q,[E,m]))).then(E=>E.map(m=>m.value))};l.result=function(F){return F.then(I=>({ok:!0,value:I})).catch(I=>({ok:!1,error:I}))};l.resultOrAbort=function(F){return F.then(I=>
({ok:!0,value:I})).catch(I=>{h.throwIfAbortError(I);return{ok:!1,error:I}})};Object.defineProperty(l,"__esModule",{value:!0})})},"esri/views/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTileStore":function(){define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/has ../../../../../core/maybe ../../../../../core/Logger ../../../../../core/accessorSupport/ensureType ../../../../../core/accessorSupport/decorators/property ../../../../../core/jsonMap ../../../../../core/accessorSupport/decorators/subclass ../../../../../core/urlUtils ../../../../../core/uuid ../../../../../portal/support/resourceExtension ../../../../../core/Accessor ../../../../../geometry/support/aaBoundingRect ../../../../../layers/graphics/featureConversionUtils ../../../../../rest/query/operations/query ../../../../../core/byteSizeEstimations ../../../../../layers/graphics/data/BoundsStore ./FeatureServiceTileCache".split(" "),
function(l,h,F,I,q,E,m,v,x,B,Q,V,z,y,C,b,r,G,L,J){l.FeatureServiceTileStore=function(S){function D(p){p=S.call(this,p)||this;p.tileInfo=null;p.extent=null;p.maximumByteSize=10485760;p.tileBounds=new L.BoundsStore;p.tiles=new J.FeatureServiceTileCache;p.refCounts=new Map;p.tileFeatureCounts=new Map;p.tmpBoundingRect=C.create();return p}h._inheritsLoose(D,S);var k=D.prototype;k.add=function(p,n){const e=[];for(const g of n)0===this.referenceFeature(g.objectId)&&e.push(g);this.addTileStorage(p,new Set(n.map(({objectId:g})=>
g)),this.byteSizeOfFeatures(n));this.featureStore.addMany(e);this.tiles.applyByteSizeLimit(this.maximumByteSize,g=>this.removeTileStorage(g))};k.destroy=function(){this.clear();this.tileFeatureCounts.clear()};k.clear=function(){this.featureStore.clear();this.tileBounds.clear();this.tiles.clear();this.refCounts.clear()};k.refresh=function(){this.clear();this.tileFeatureCounts.clear()};k.processEdits=function(p,n,e){this.processEditsDelete(p.deletedFeatures.concat(p.updatedFeatures));return this.processEditsRefetch(p.addedFeatures.concat(p.updatedFeatures),
n,e)};k.addTileStorage=function(p,n,e){this.tiles.set(p.id,new O(p,n,e));this.tileBounds.set(p.id,p.extent);this.tileFeatureCounts.set(p.id,n.size)};k.remove=function({id:p}){(p=this.tiles.get(p))&&this.removeTileStorage(p)};k.removeTileStorage=function(p){const n=[];for(const e of p.objectIds)1===this.unreferenceFeature(e)&&n.push(e);this.featureStore.removeManyById(n);p=p.data.id;this.tiles.delete(p);this.tileBounds.delete(p)};k.processEditsDelete=function(p){this.featureStore.removeManyById(p);
for(const [,n]of this.tiles){for(const e of p)n.objectIds.delete(e);this.tileFeatureCounts.set(n.data.id,n.objectIds.size)}for(const n of p)this.refCounts.delete(n)};k.processEditsRefetch=async function(p,n,e){p=(await n(p,e)).features;const {hasZ:g,hasM:f}=this.featureStore;for(const A of p)p=b.getBoundsOptimizedGeometry(this.tmpBoundingRect,A.geometry,g,f),this.tileBounds.forEachInBounds(p,R=>{R=this.tiles.get(R);this.featureStore.add(A);R.objectIds.has(A.objectId)||(R.objectIds.add(A.objectId),
this.referenceFeature(A.objectId),this.tileFeatureCounts.set(R.data.id,R.objectIds.size))})};k.process=function(p,n=()=>!0){if(q.isNone(this.tileInfo)||!p.extent||q.isSome(this.extent)&&!C.intersects(C.fromExtent(this.extent,this.tmpBoundingRect),p.extent)||this.tiles.has(p.id))return new X(p);const e=this.createTileTree(p,this.tileInfo);this.simplify(e,n,null,0,1);return this.collectMissingTiles(p,e,this.tileInfo)};k.getFeatureCount=function(p){p=this.tileFeatureCounts.get(p.id);return null!=p?p:
0};k.fetchCount=async function(p,n,e,g){const f=this.tileFeatureCounts.get(p.id);if(null!=f)return f;n=await r.executeQueryForCount(n,e,g);this.tileFeatureCounts.set(p.id,n.data.count);return n.data.count};k.createTileTree=function(p,n){const e=new P(p.level,p.row,p.col);n.updateTileInfo(e,1);this.tileBounds.forEachInBounds(p.extent,g=>{g=this.tiles.get(g).data;this.tilesAreRelated(p,g)&&this.populateChildren(e,g,n,this.tileFeatureCounts.get(g.id)||0)});return e};k.tilesAreRelated=function(p,n){if(!p||
!n)return!1;if(p.level===n.level)return p.row===n.row&&p.col===n.col;const e=p.level<n.level,g=e?p:n;p=e?n:p;n=1<<p.level-g.level;return Math.floor(p.row/n)===g.row&&Math.floor(p.col/n)===g.col};k.populateChildren=function(p,n,e,g){var f=n.level-p.level-1;if(0>f)p.isLeaf=!0;else{var A=n.row>>f,R=n.col>>f;f=(A-(p.row<<1)<<1)+(R-(p.col<<1));var N=p.children[f];q.isSome(N)?this.populateChildren(N,n,e,g):(A=new P(p.level+1,A,R),e.updateTileInfo(A,1),p.children[f]=A,this.populateChildren(A,n,e,g))}};k.simplify=
function(p,n,e,g,f){const A=f*f;if(p.isLeaf)return n(this.getFeatureCount(p),f)?0:(this.remove(p),q.isSome(e)&&(e.children[g]=null),A);f/=2;const R=f*f;let N=0;for(let ba=0;ba<p.children.length;ba++){const la=p.children[ba];N+=q.isSome(la)?this.simplify(la,n,p,ba,f):R}0===N?this.mergeChildren(p):.18751>1-N/A&&(this.purge(p),q.isSome(e)&&(e.children[g]=null),N=A);return N};k.mergeChildren=function(p){const n=new Set;let e=0;this.forEachLeaf(p,g=>{const f=this.tiles.get(g.id);if(f){e+=f.byteSize;for(const A of f.objectIds)n.has(A)||
(n.add(A),this.referenceFeature(A));this.remove(g)}});this.addTileStorage(p,n,e);p.isLeaf=!0;p.children[0]=p.children[1]=p.children[2]=p.children[3]=null;this.tileFeatureCounts.set(p.id,n.size)};k.forEachLeaf=function(p,n){for(const e of p.children)q.isNone(e)||(e.isLeaf?n(e):this.forEachLeaf(e,n))};k.purge=function(p){if(!q.isNone(p))if(p.isLeaf)this.remove(p);else for(let n=0;n<p.children.length;n++)this.purge(p.children[n]),p.children[n]=null};k.collectMissingTiles=function(p,n,e){p=new ca(e,p,
this.extent);this.collectMissingTilesRecurse(n,p,1);return p.info};k.collectMissingTilesRecurse=function(p,n,e){if(!p.isLeaf)if(p.hasChildren){e/=2;for(let g=0;g<p.children.length;g++){const f=p.children[g];q.isNone(f)?n.addMissing(p.level+1,(p.row<<1)+((g&2)>>1),(p.col<<1)+(g&1),e):this.collectMissingTilesRecurse(f,n,e)}}else n.addMissing(p.level,p.row,p.col,e)};k.referenceFeature=function(p){const n=(this.refCounts.get(p)||0)+1;this.refCounts.set(p,n);return 1===n?0:2};k.unreferenceFeature=function(p){const n=
(this.refCounts.get(p)||0)-1;if(0===n)return this.refCounts.delete(p),1;0<n&&this.refCounts.set(p,n);return 2};k.byteSizeOfFeatures=function(p){let n=0;for(const e of p)n+=this.byteSizeOfFeature(e);return n};k.byteSizeOfFeature=function(p){return 32+this.byteSizeOfGeometry(p.geometry)+G.estimateAttributesObjectSize(p.attributes)};k.byteSizeOfGeometry=function(p){if(!p)return 0;const n=G.estimateFixedArraySize(p.lengths,4);return 32+G.estimateFixedArraySize(p.coords,8)+n};h._createClass(D,[{key:"debugInfo",
get:function(){return Array.from(this.tiles.values()).map(({data:p})=>({data:p,featureCount:this.tileFeatureCounts.get(p.id)||0}))}},{key:"test",get:function(){return{tiles:Array.from(this.tiles.values()).map(p=>`${p.data.id}:[${Array.from(p.objectIds)}]`),featureReferences:Array.from(this.refCounts.keys()).map(p=>`${p}:${this.refCounts.get(p)}`)}}}]);return D}(y);F.__decorate([v.property({constructOnly:!0})],l.FeatureServiceTileStore.prototype,"featureStore",void 0);F.__decorate([v.property()],l.FeatureServiceTileStore.prototype,
"tileInfo",void 0);F.__decorate([v.property()],l.FeatureServiceTileStore.prototype,"extent",void 0);F.__decorate([v.property()],l.FeatureServiceTileStore.prototype,"maximumByteSize",void 0);l.FeatureServiceTileStore=F.__decorate([B.subclass("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTileStore")],l.FeatureServiceTileStore);let O=function(S,D,k){this.data=S;this.objectIds=D;this.byteSize=k},P=function(){function S(D,k,p){this.level=D;this.row=k;this.col=p;this.isLeaf=
!1;this.extent=null;this.children=[null,null,null,null]}h._createClass(S,[{key:"hasChildren",get:function(){return!this.isLeaf&&(q.isSome(this.children[0])||q.isSome(this.children[1])||q.isSome(this.children[2])||q.isSome(this.children[3]))}}]);return S}(),X=function(){function S(D,k=[]){this.missingTiles=k;this.coveredArea=this.fullArea=0;this.coveredArea=this.fullArea=C.area(D.extent)}S.prototype.prepend=function(D){this.missingTiles=D.missingTiles.concat(this.missingTiles);this.coveredArea+=D.coveredArea;
this.fullArea+=D.fullArea};return S}(),ca=function(){function S(D,k,p){this.tileInfo=D;this.extent=null;this.info=new X(k);q.isSome(p)&&(this.extent=C.fromExtent(p))}S.prototype.addMissing=function(D,k,p,n){D={id:null,level:D,row:k,col:p};this.tileInfo.updateTileInfo(D,1);!q.isSome(D.extent)||q.isSome(this.extent)&&!C.intersects(this.extent,D.extent)||(this.info.missingTiles.push({data:D,resolution:n}),this.info.coveredArea-=C.area(D.extent))};return S}();l.ProcessResult=X;Object.defineProperty(l,
"__esModule",{value:!0})})},"esri/core/byteSizeEstimations":function(){define(["exports"],function(l){function h(F){return 32+F.length}l.estimateAttributesObjectSize=function(F){if(!F)return 0;let I=32;for(const q in F)if(F.hasOwnProperty(q)){const E=F[q];switch(typeof E){case "string":I+=h(E);break;case "number":I+=16;break;case "boolean":I+=4}}return I};l.estimateFixedArraySize=function(F,I){return 32+F.length*I};l.estimateNumberByteSize=function(){return 16};l.estimateStringByteSize=h;Object.defineProperty(l,
"__esModule",{value:!0})})},"esri/views/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTileCache":function(){define(["exports"],function(l){let h=function(){function F(){this._store=new Map;this._byteSize=0}var I=F.prototype;I.set=function(q,E){this.delete(q);this._store.set(q,E);this._byteSize+=E.byteSize};I.delete=function(q){const E=this._store.get(q);return this._store.delete(q)?(this._byteSize-=E.byteSize,!0):!1};I.get=function(q){this.used(q);return this._store.get(q)};
I.has=function(q){this.used(q);return this._store.has(q)};I.clear=function(){this._store.clear()};I.applyByteSizeLimit=function(q,E){for(const [m,v]of this._store){if(this._byteSize<=q)break;this.delete(m);E(v)}};I.values=function(){return this._store.values()};I[Symbol.iterator]=function(){return this._store[Symbol.iterator]()};I.used=function(q){const E=this._store.get(q);E&&(this._store.delete(q),this._store.set(q,E))};return F}();l.FeatureServiceTileCache=h;Object.defineProperty(l,"__esModule",
{value:!0})})},"*noref":1}});
define("exports ../../../../../chunks/_rollupPluginBabelHelpers ../../../../../chunks/tslib.es6 ../../../../../core/has ../../../../../core/maybe ../../../../../core/Logger ../../../../../core/accessorSupport/ensureType ../../../../../core/accessorSupport/decorators/property ../../../../../core/jsonMap ../../../../../core/accessorSupport/decorators/subclass ../../../../../core/urlUtils ../../../../../core/uuid ../../../../../portal/support/resourceExtension ../../../../../core/promiseUtils ../../../../../geometry/SpatialReference ../../../../../core/Evented ../../../../../core/Handles ../../../../../core/watchUtils ../../../../../layers/support/TimeInfo ../../../../../tasks/support/Query ../../../../support/WatchUpdatingTracking ../../../../../layers/support/TileInfo ../../../../../layers/graphics/data/FeatureStore ../../../../../layers/graphics/data/QueryEngine ./FeatureServiceTiledFetcher ./FeatureServiceTileStore".split(" "),function(l,
h,F,I,q,E,m,v,x,B,Q,V,z,y,C,b,r,G,L,J,O,P,X,ca,S,D){l.FeatureServiceSnappingSourceWorker=function(k){function p(){var e=k.apply(this,arguments)||this;e.isInitializing=!0;e.whenSetup=y.createDeferred();e.handles=new r;e.updatingHandles=new O.WatchUpdatingTracking;e.pendingApplyEdits=new Map;return e}h._inheritsLoose(p,k);var n=p.prototype;n.destroy=function(){this.featureFetcher.destroy();this.queryEngine.destroy();this.featureStore.clear();this.handles.destroy()};n.setup=async function(e){const {geometryType:g,
objectIdField:f,timeInfo:A,fields:R}=e.serviceInfo;this.featureStore=new X({...e.serviceInfo,hasZ:!1,hasM:!1});this.queryEngine=new ca["default"]({spatialReference:e.spatialReference,featureStore:this.featureStore,geometryType:g,fields:R,hasZ:!1,hasM:!1,objectIdField:f,timeInfo:A?L.fromJSON(A):null});this.featureFetcher=new S.FeatureServiceTiledFetcher({store:new D.FeatureServiceTileStore({featureStore:this.featureStore}),url:e.serviceInfo.url,objectIdField:e.serviceInfo.objectIdField,capabilities:e.serviceInfo.capabilities,
spatialReference:C.fromJSON(e.spatialReference),sourceSpatialReference:C.fromJSON(e.serviceInfo.spatialReference)});this.handles.add([this.featureFetcher.watch("availability",N=>this.emit("notify-availability",{availability:N}),!0),this.watch("updating",()=>this.notifyUpdating())]);this.whenSetup.resolve();this.isInitializing=!1;return this.configure(e.configuration)};n.configure=async function(e){await this.updatingHandles.addPromise(this.whenSetup.promise);this.updateFeatureFetcherConfiguration(e);
return{result:{}}};n.fetchCandidates=async function(e,g){await this.whenSetup.promise;y.throwIfAborted(g);return{result:await this.queryEngine.executeQueryForSnapping({point:e.point,distance:e.distance,types:e.types,query:q.isSome(e.filter)?e.filter:{where:"1\x3d1"}},q.isSome(g)?g.signal:null)}};n.updateTiles=async function(e,g){await this.updatingHandles.addPromise(this.whenSetup.promise);y.throwIfAborted(g);this.featureFetcher.tileSize=e.tileSize;this.featureFetcher.tilesOfInterest=e.tiles;this.featureFetcher.tileInfo=
q.isSome(e.tileInfo)?P.fromJSON(e.tileInfo):null;return{result:{}}};n.refresh=async function(e,g){await this.updatingHandles.addPromise(this.whenSetup.promise);y.throwIfAborted(g);this.featureFetcher.refresh();return{result:{}}};n.whenNotUpdating=async function(e,g){await this.updatingHandles.addPromise(this.whenSetup.promise);y.throwIfAborted(g);await y.whenOrAbort(G.whenNotOnce(this,"updating"),g);return{result:{}}};n.getDebugInfo=async function(e,g){y.throwIfAborted(g);return{result:this.featureFetcher.debugInfo}};
n.beginApplyEdits=async function(e,g){this.updatingHandles.addPromise(this.whenSetup.promise);y.throwIfAborted(g);g=y.createDeferred();this.pendingApplyEdits.set(e.id,g);this.featureFetcher.applyEdits(g.promise);this.updatingHandles.addPromise(g.promise);return{result:{}}};n.endApplyEdits=async function(e,g){const f=this.pendingApplyEdits.get(e.id);f&&f.resolve(e.edits);y.throwIfAborted(g);return{result:{}}};n.updateFeatureFetcherConfiguration=function(e){this.featureFetcher.filter=q.isSome(e.filter)?
J.fromJSON(e.filter):null;this.featureFetcher.customParameters=e.customParameters};n.notifyUpdating=function(){this.emit("notify-updating",{updating:this.updating})};h._createClass(p,[{key:"updating",get:function(){return this.featureFetcher.updating||this.isInitializing||this.updatingHandles.updating}}]);return p}(b.EventedAccessor);F.__decorate([v.property({readOnly:!0})],l.FeatureServiceSnappingSourceWorker.prototype,"updating",null);F.__decorate([v.property()],l.FeatureServiceSnappingSourceWorker.prototype,
"isInitializing",void 0);l.FeatureServiceSnappingSourceWorker=F.__decorate([B.subclass("esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceSnappingSourceWorker")],l.FeatureServiceSnappingSourceWorker);l.default=function(){return new l.FeatureServiceSnappingSourceWorker};Object.defineProperty(l,"__esModule",{value:!0})});