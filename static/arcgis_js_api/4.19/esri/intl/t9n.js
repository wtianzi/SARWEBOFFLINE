// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.19/esri/copyright.txt for details.
//>>built
define("exports ../core/global ../core/maybe ../core/Error ./messages ../request".split(" "),function(g,p,q,h,r,t){async function u(b,a,d,c){var e=a.exec(d);if(!e)throw new h("esri-intl:invalid-bundle",`Bundle id "${d}" is not compatible with the pattern "${a}"`);a=e[1]?`${e[1]}/`:"";e=e[2];const f=r.normalizeMessageBundleLocale(c);c=`${a}${e}.json`;a=f?`${a}${e}_${f}.json`:c;let k;try{k=await m(b(a))}catch(v){if(a===c)throw new h("intl:unknown-bundle",`Bundle "${d}" cannot be loaded`,{error:v});
try{k=await m(b(c))}catch(w){throw new h("intl:unknown-bundle",`Bundle "${d}" cannot be loaded`,{error:w});}}return k}async function m(b){if(q.isSome(l.fetchBundleAsset))return l.fetchBundleAsset(b);b=await t(b,{responseType:"text"});return JSON.parse(b.data)}let n=function(){function b({base:a="",pattern:d,location:c=new URL(window.location.href)}){let e;e="string"===typeof c?f=>(new URL(f,new URL(c,p.location))).href:c instanceof URL?f=>(new URL(f,c)).href:c;this.pattern="string"===typeof d?new RegExp(`^${d}`):
d;this.getAssetUrl=e;a=a?a.endsWith("/")?a:a+"/":"";this.matcher=new RegExp(`^${a}(?:(.*)\/)?(.*)$`)}b.prototype.fetchMessageBundle=function(a,d){return u(this.getAssetUrl,this.matcher,a,d)};return b}();const l={};g.JSONLoader=n;g.createJSONLoader=function(b){return new n(b)};g.test=l;Object.defineProperty(g,"__esModule",{value:!0})});