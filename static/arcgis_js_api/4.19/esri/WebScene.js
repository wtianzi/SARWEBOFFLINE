// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.19/esri/copyright.txt for details.
//>>built
require({cache:{"esri/core/accessorSupport/originUtils":function(){define(["exports","../multiOriginJSONSupportUtils"],function(u,c){u.updateOrigins=function(k){k&&k.writtenProperties&&k.writtenProperties.forEach(r=>{const J=r.target;r.newOrigin&&r.oldOrigin!==r.newOrigin&&c.isMultiOriginJSONMixin(J)&&J.updateOrigin(r.propName,r.newOrigin)})};Object.defineProperty(u,"__esModule",{value:!0})})},"esri/core/multiOriginJSONSupportUtils":function(){define(["exports"],function(u){u.isMultiOriginJSONMixin=
function(c){return c&&"getAtOrigin"in c&&"originOf"in c};Object.defineProperty(u,"__esModule",{value:!0})})},"esri/support/MapFloorInfo":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/JSONSupport ../layers/support/FacilityLayerInfo ../layers/support/LevelLayerInfo ../layers/support/SiteLayerInfo".split(" "),
function(u,c,k,r,J,H,N,S,G,O,X,V,P,f,p){k=function(e){function t(D){D=e.call(this,D)||this;D.levelLayer=null;D.facilityLayer=null;D.siteLayer=null;return D}u._inheritsLoose(t,e);return t}(V.JSONSupport);c.__decorate([H.property({type:f,json:{write:!0,origins:{"web-scene":{write:!1}}}})],k.prototype,"levelLayer",void 0);c.__decorate([H.property({type:P,json:{write:!0,origins:{"web-scene":{write:!1}}}})],k.prototype,"facilityLayer",void 0);c.__decorate([H.property({type:p,json:{write:!0,origins:{"web-scene":{write:!1}}}})],
k.prototype,"siteLayer",void 0);return k=c.__decorate([S.subclass("esri.support.MapFloorInfo")],k)})},"esri/layers/support/FacilityLayerInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport".split(" "),
function(u,c,k,r,J,H,N,S,G,O,X,V){k=function(P){function f(p){p=P.call(this,p)||this;p.layerId=null;p.facilityIdField=null;p.siteIdField=null;p.nameField=null;return p}u._inheritsLoose(f,P);return f}(V.JSONSupport);c.__decorate([H.property({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],k.prototype,"layerId",void 0);c.__decorate([H.property({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],k.prototype,"facilityIdField",void 0);c.__decorate([H.property({type:String,
json:{write:!0,origins:{"web-scene":{write:!1}}}})],k.prototype,"siteIdField",void 0);c.__decorate([H.property({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],k.prototype,"nameField",void 0);return k=c.__decorate([S.subclass("esri.layers.support.FacilityLayerInfo")],k)})},"esri/layers/support/LevelLayerInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport".split(" "),
function(u,c,k,r,J,H,N,S,G,O,X,V){k=function(P){function f(p){p=P.call(this,p)||this;p.layerId=null;p.levelIdField=null;p.facilityIdField=null;p.longNameField=null;p.shortNameField=null;p.levelNumberField=null;p.verticalOrderField=null;return p}u._inheritsLoose(f,P);return f}(V.JSONSupport);c.__decorate([H.property({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],k.prototype,"layerId",void 0);c.__decorate([H.property({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],
k.prototype,"levelIdField",void 0);c.__decorate([H.property({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],k.prototype,"facilityIdField",void 0);c.__decorate([H.property({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],k.prototype,"longNameField",void 0);c.__decorate([H.property({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],k.prototype,"shortNameField",void 0);c.__decorate([H.property({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],
k.prototype,"levelNumberField",void 0);c.__decorate([H.property({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],k.prototype,"verticalOrderField",void 0);return k=c.__decorate([S.subclass("esri.layers.support.LevelLayerInfo")],k)})},"esri/layers/support/SiteLayerInfo":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport".split(" "),
function(u,c,k,r,J,H,N,S,G,O,X,V){k=function(P){function f(p){p=P.call(this,p)||this;p.layerId=null;p.siteIdField=null;p.nameField=null;return p}u._inheritsLoose(f,P);return f}(V.JSONSupport);c.__decorate([H.property({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],k.prototype,"layerId",void 0);c.__decorate([H.property({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],k.prototype,"siteIdField",void 0);c.__decorate([H.property({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],
k.prototype,"nameField",void 0);return k=c.__decorate([S.subclass("esri.layers.support.SiteLayerInfo")],k)})},"esri/webdoc/support/thumbnailUtils":function(){define(["exports"],function(u){const c={width:600,height:400};u.getOptimalThumbnailSize=function(k,r){r=r||c;let {width:J,height:H}=r;r=J/H;1.5>r?H=J/1.5:1.5<r&&(J=1.5*H);J>k.width&&(H*=k.width/J,J=k.width);H>k.height&&(J*=k.height/H,H=k.height);return{width:Math.round(J),height:Math.round(H)}};Object.defineProperty(u,"__esModule",{value:!0})})},
"esri/geometry/projection":function(){define("require exports ../chunks/_rollupPluginBabelHelpers ../core/maybe ../core/Error ../core/promiseUtils ./support/spatialReferenceUtils ./support/Ellipsoid ./Point ./Extent ./Multipoint ./Polygon ./Polyline ../core/mathUtils ../chunks/vec3f64 ../chunks/vec3 ./projectionEllipsoid ../core/unitUtils ../chunks/mat4 ../chunks/pe ./support/aaBoundingRect ./support/geodesicConstants ./support/GeographicTransformation".split(" "),function(u,c,k,r,J,H,N,S,G,O,X,V,
P,f,p,e,t,D,z,C,B,L,U){function Y(){return!!ca&&C.isLoaded()}function ea(h){r.isNone(ia)&&(ia=Promise.all([C.load(),(new Promise(function(n,m){u(["../chunks/geometryEngineBase"],n,m)})).then(function(n){return n.geometryEngineBase}),new Promise(function(n,m){u(["./geometryAdapters/hydrated"],n,m)})]));return ia.then(([,n,{hydratedAdapter:m}])=>{H.throwIfAborted(h);ha=m;ca=n.default;ca._enableProjection(C.pe)})}function ja(h,n,m,v,Q=null){if(r.isNone(m)||r.isNone(v))return n;if(Ea(m,v,Q))return n.map(T=>
Sa(T,m,v));if(r.isNone(Q)){const T=U.cacheKey(m,v);void 0!==ka[T]?Q=ka[T]:(Q=Ga(m,v,null),r.isNone(Q)&&(Q=new U),ka[T]=Q)}if(r.isNone(ca))throw new ya;return ca._project(h,n,m,v,Q)}function Ga(h,n,m=null){if(r.isNone(ca))throw new ya;if(r.isNone(h)||r.isNone(n))return null;h=ca._getTransformation(ha,h,n,m,null==m?void 0:m.spatialReference);return null!==h?U.fromGE(h):null}function Ea(h,n,m){return m?!1:N.equals(h,n)?!0:N.isValid(h)&&N.isValid(n)&&!!W(h,n,za)}function Sa(h,n,m){if(!h)return h;if("x"in
h){var v=new G;return Ha(h,n,v,m)?v:null}return"xmin"in h?(v=new O,Fa(h,n,v,m)?v:null):"rings"in h?(v=new V,Ma(h,n,v,m)?v:null):"paths"in h?(v=new P,Na(h,n,v,m)?v:null):"points"in h?(v=new X,Oa(h,n,v,m)?v:null):null}function Ha(h,n,m,v,Q=0){na[0]=h.x;na[1]=h.y;const T=h.z;na[2]=void 0!==T?T:Q;if(!Aa(na,n,0,na,v,0,1))return!1;m.x=na[0];m.y=na[1];m.spatialReference=v;void 0===T?(m.z=void 0,m.hasZ=!1):(m.z=na[2],m.hasZ=!0);void 0===h.m?(m.m=void 0,m.hasM=!1):(m.m=h.m,m.hasM=!0);return!0}function Oa(h,
n,m,v,Q=0){const {points:T,hasZ:da,hasM:fa}=h;h=[];const va=T.length,ua=[];for(var ta of T)ua.push(ta[0],ta[1],da?ta[2]:Q);if(!Aa(ua,n,0,ua,v,0,va))return!1;for(n=0;n<va;++n){Q=3*n;ta=ua[Q];const Ba=ua[Q+1];da&&fa?h.push([ta,Ba,ua[Q+2],T[n][3]]):da?h.push([ta,Ba,ua[Q+2]]):fa?h.push([ta,Ba,T[n][2]]):h.push([ta,Ba])}m.points=h;m.spatialReference=v;m.hasZ=da;m.hasM=fa;return!0}function Na(h,n,m,v,Q=0){const {paths:T,hasZ:da,hasM:fa}=h;h=[];if(!Ka(T,da,fa,n,h,v,Q))return!1;m.paths=h;m.spatialReference=
v;m.hasZ=da;m.hasM=fa;return!0}function Ma(h,n,m,v,Q=0){const {rings:T,hasZ:da,hasM:fa}=h;h=[];if(!Ka(T,da,fa,n,h,v,Q))return!1;m.rings=h;m.spatialReference=v;m.hasZ=da;m.hasM=fa;return!0}function Fa(h,n,m,v,Q=0){const {xmin:T,ymin:da,xmax:fa,ymax:va,hasZ:ua,hasM:ta}=h;if(!Ja(T,da,ua?h.zmin:Q,n,na,v))return!1;m.xmin=na[0];m.ymin=na[1];ua&&(m.zmin=na[2]);if(!Ja(fa,va,ua?h.zmax:Q,n,na,v))return!1;m.xmax=na[0];m.ymax=na[1];ua&&(m.zmax=na[2]);ta&&(m.mmin=h.mmin,m.mmax=h.mmax);m.spatialReference=v;return!0}
function Ja(h,n,m,v,Q,T){qa[0]=h;qa[1]=n;qa[2]=m;return Aa(qa,v,0,Q,T,0,1)}function La(h,n,m,v){if(r.isNone(n)||r.isNone(v)||2>h.length)return!1;2===h.length&&(qa[0]=h[0],qa[1]=h[1],qa[2]=0,h=qa);return Aa(h,n,0,m,v,0,1)}function Qa(h,n,m){r.isNone(n)?h=!1:(n=la(n,xa),n=wa[n][6],r.isNone(n)?h=!1:(n(h,0,qa,0),m!==qa&&(m[0]=qa[0],m[1]=qa[1],2<m.length&&(m[2]=qa[2])),h=!0));return h}function Aa(h,n,m,v,Q,T,da=1){n=W(n,Q,za);if(r.isNone(n))return!1;if(n===ma){if(h===v&&m===T)return!0;da=m+3*da;for(let fa=
m,va=T;fa<da;fa++,va++)v[va]=h[fa];return!0}da=m+3*da;for(let fa=m,va=T;fa<da;fa+=3,va+=3)n(h,fa,v,va);return!0}function Ka(h,n,m,v,Q,T,da=0){const fa=[];for(const va of h)for(const ua of va)fa.push(ua[0],ua[1],n?ua[2]:da);if(!Aa(fa,v,0,fa,T,0,fa.length/3))return!1;v=0;Q.length=0;for(const va of h){h=[];for(const ua of va)n&&m?h.push([fa[v++],fa[v++],fa[v++],ua[3]]):n?h.push([fa[v++],fa[v++],fa[v++]]):(m?h.push([fa[v++],fa[v++],ua[2]]):h.push([fa[v++],fa[v++]]),v++);Q.push(h)}return!0}function Ra(h,
n,m){const v=Math.sin(n);n=Math.cos(n);const Q=Math.sin(h);h=Math.cos(h);m[0]=-v;m[4]=-Q*n;m[8]=h*n;m[12]=0;m[1]=n;m[5]=-Q*v;m[9]=h*v;m[13]=0;m[2]=0;m[6]=h;m[10]=Q;m[14]=0;m[3]=0;m[7]=0;m[11]=0;m[15]=1;return m}function la(h,n){if(n.spatialReference===h)return n.spatialReferenceId;n.spatialReference=h;"metersPerUnit"in n&&(n.metersPerUnit=D.getMetersPerUnitForSR(h,1));return h.wkt===t.SphericalECEFSpatialReference.wkt?n.spatialReferenceId=1:N.isWGS84(h)?n.spatialReferenceId=2:N.isWebMercator(h)?n.spatialReferenceId=
3:h.wkt===t.WGS84ECEFSpatialReference.wkt?n.spatialReferenceId=4:4490===h.wkid?n.spatialReferenceId=5:h.wkt===t.SphericalPCPFMars.wkt?n.spatialReferenceId=7:h.wkt===t.SphericalPCPFMoon.wkt?n.spatialReferenceId=9:N.isMars(h)?n.spatialReferenceId=8:N.isMoon(h)?n.spatialReferenceId=10:n.spatialReferenceId=0}function ma(h,n,m,v){h!==m&&(m[v++]=h[n++],m[v++]=h[n++],m[v]=h[n])}function oa(h,n,m,v){m[v++]=ra*(h[n++]/S.earth.radius);m[v++]=ra*(Math.PI/2-2*Math.atan(Math.exp(-1*h[n++]/S.earth.radius)));m[v]=
h[n]}function K(h,n,m,v){oa(h,n,m,v);y(m,v,m,v)}function aa(h,n,m,v){oa(h,n,m,v);E(m,v,m,v)}function ba(h,n,m,v,Q){var T=.4999999*Math.PI;T=f.clamp(sa*h[n+1],-T,T);T=Math.sin(T);m[v++]=sa*h[n]*Q.radius;m[v++]=Q.halfSemiMajorAxis*Math.log((1+T)/(1-T));m[v]=h[n+2]}function a(h,n,m,v){ba(h,n,m,v,S.earth)}function b(h,n,m,v,Q){Q+=h[n+2];const T=sa*h[n+1];h=sa*h[n];n=Math.cos(T);m[v++]=Math.cos(h)*n*Q;m[v++]=Math.sin(h)*n*Q;m[v]=Math.sin(T)*Q}function l(h,n,m,v){b(h,n,m,v,S.moon.radius)}function q(h,n,
m,v){b(h,n,m,v,S.mars.radius)}function y(h,n,m,v){b(h,n,m,v,S.earth.radius)}function A(h,n,m,v,Q){var T=h[n];const da=h[n+1];n=h[n+2];h=Math.sqrt(T*T+da*da+n*n);n=f.asinClamped(n/(0===h?1:h));T=Math.atan2(da,T);m[v++]=ra*T;m[v++]=ra*n;m[v]=h-Q}function F(h,n,m,v){A(h,n,m,v,S.moon.radius)}function w(h,n,m,v){A(h,n,m,v,S.mars.radius)}function d(h,n,m,v){A(h,n,m,v,S.earth.radius)}function g(h,n,m,v){d(h,n,m,v);a(m,v,m,v)}function x(h,n,m,v){d(h,n,m,v);E(m,v,m,v)}function E(h,n,m,v){{var Q=S.earth;const da=
sa*h[n];var T=sa*h[n+1];h=h[n+2];n=Math.sin(T);T=Math.cos(T);const fa=Q.radius/Math.sqrt(1-Q.eccentricitySquared*n*n);m[v++]=(fa+h)*T*Math.cos(da);m[v++]=(fa+h)*T*Math.sin(da);m[v++]=(fa*(1-Q.eccentricitySquared)+h)*n}}function I(h,n,m,v){var Q=L.earthEllipsoidConstants,T=h[n],da=h[n+1];h=h[n+2];let fa;n=Math.abs(h);var va=T*T+da*da;var ua=Math.sqrt(va);var ta=va+h*h;var Ba=Math.sqrt(ta);T=Math.atan2(da,T);var Pa=h*h/ta;ta=va/ta;da=Q.a2/Ba;va=Q.a3-Q.a4/Ba;.3<ta?(Pa=n/Ba*(1+ta*(Q.a1+da+Pa*va)/Ba),
Ba=Math.asin(Pa),da=Pa*Pa,ta=Math.sqrt(1-da)):(ta=ua/Ba*(1-Pa*(Q.a5-da-ta*va)/Ba),Ba=Math.acos(ta),da=1-ta*ta,Pa=Math.sqrt(da));fa=1-S.earth.eccentricitySquared*da;da=S.earth.radius/Math.sqrt(fa);Q=Q.a6*da;da=ua-da*ta;va=n-Q*Pa;n=ta*da+Pa*va;ua=ta*va-Pa*da;Q=ua/(Q/fa+n);Ba+=Q;0>h&&(Ba=-Ba);m[v++]=ra*T;m[v++]=ra*Ba;m[v]=n+ua*Q/2}function M(h,n,m,v){I(h,n,m,v);y(m,v,m,v)}function R(h,n,m,v){I(h,n,m,v);a(m,v,m,v)}function W(h,n,m=pa()){return r.isNone(h)||r.isNone(n)?null:Z(h,n,m).projector}function Z(h,
n,m){if(r.isNone(h)||r.isNone(n)||m.source.spatialReference===h&&m.dest.spatialReference===n)return m;const v=la(h,m.source),Q=la(n,m.dest);0===v&&0===Q?N.equals(h,n)?m.projector=ma:m.projector=null:m.projector=wa[v][Q];return m}function pa(){return{source:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},projector:ma}}let ca=null,ha=null,ia=null,ka={},ya=function(h){function n(){return h.call(this,"projection:not-loaded",
"projection engine not fully loaded yet, please call load()")||this}k._inheritsLoose(n,h);return n}(J);const wa={[2]:{[5]:null,[8]:null,[10]:null,[6]:ma,[1]:y,[7]:null,[9]:null,[0]:null,[3]:a,[2]:ma,[4]:E},[5]:{[5]:ma,[8]:null,[10]:null,[6]:ma,[1]:y,[7]:null,[9]:null,[0]:null,[3]:null,[2]:null,[4]:E},[8]:{[5]:null,[8]:ma,[10]:null,[6]:null,[1]:null,[7]:q,[9]:null,[0]:null,[3]:null,[2]:null,[4]:null},[10]:{[5]:null,[8]:null,[10]:ma,[6]:null,[1]:null,[7]:null,[9]:l,[0]:null,[3]:null,[2]:null,[4]:null},
[3]:{[5]:null,[8]:null,[10]:null,[6]:oa,[1]:K,[7]:null,[9]:null,[0]:null,[3]:ma,[2]:oa,[4]:aa},[4]:{[5]:I,[8]:null,[10]:null,[6]:I,[1]:M,[7]:null,[9]:null,[0]:null,[3]:R,[2]:I,[4]:ma},[1]:{[5]:d,[8]:null,[10]:null,[6]:d,[1]:ma,[7]:null,[9]:null,[0]:null,[3]:g,[2]:d,[4]:x},[7]:{[5]:null,[8]:w,[10]:null,[6]:null,[1]:null,[7]:ma,[9]:null,[0]:null,[3]:null,[2]:null,[4]:null},[9]:{[5]:null,[8]:null,[10]:F,[6]:null,[1]:null,[7]:null,[9]:ma,[0]:null,[3]:null,[2]:null,[4]:null},[0]:{[5]:null,[8]:null,[10]:null,
[6]:null,[1]:null,[7]:null,[9]:null,[0]:ma,[3]:null,[2]:null,[4]:null},[6]:{[5]:null,[8]:null,[10]:null,[6]:ma,[1]:y,[7]:null,[9]:null,[0]:null,[3]:null,[2]:ma,[4]:E}},xa={spatialReference:null,spatialReferenceId:0},Ca={spatialReference:null,spatialReferenceId:0},za=pa(),Da=pa(),sa=f.deg2rad(1),ra=f.rad2deg(1),qa=p.create(),Ia=p.create(),Ta=p.create(),na=p.create(),Ua=p.create();c.canProjectToWGS84ComparableLonLat=function(h){if(r.isNone(h))return!1;h=la(h,xa);return!!wa[h][6]};c.canProjectWithoutEngine=
Ea;c.computeLatLonToENURotation=Ra;c.computeLinearTransformation=function(h,n,m,v){if(r.isNone(h)||r.isNone(v))return!1;var Q=la(h,xa),T=la(v,Ca);if(Q===T&&1!==T&&(0!==Q||N.equals(h,v)))return z.identity(m),z.translate(m,m,n),!0;if(1===T||7===T||9===T){v=h=0;if(1===T){Q=wa[Q][6];T=wa[6][T];if(r.isNone(Q)||r.isNone(T))return!1;Q(n,0,Ia,0);T(Ia,0,Ta,0);h=sa*Ia[0];v=sa*Ia[1]}else if(7===T||9===T){T=wa[Q][T];if(r.isNone(T))return!1;T(n,0,Ta,0);h=sa*n[0];v=sa*n[1]}Ra(v,h,m);m[12]=Ta[0];m[13]=Ta[1];m[14]=
Ta[2];return!0}if(3===T&&(2===Q||1===Q)){T=wa[Q][6];if(r.isNone(T))return!1;T(n,0,Ia,0);n=sa*Ia[1];a(Ia,0,Ta,0);z.identity(m);z.translate(m,m,Ta);n=1/Math.cos(n);z.scale(m,m,[n,n,1]);return!0}return!1};c.getProjectorName=function(h,n){switch(W(h,n,za)){case ma:return"copy3";case y:return"wgs84ToSphericalECEF";case a:return"wgs84ToWebMercator";case E:return"wgs84ToWGS84ECEF";case oa:return"webMercatorToWGS84";case K:return"webMercatorToSphericalECEF";case aa:return"webMercatorToWGS84ECEF";case I:return"wgs84ECEFToWGS84";
case M:return"wgs84ECEFToSphericalECEF";case R:return"wgs84ECEFToWebMercator";case d:return"sphericalECEFToWGS84";case g:return"sphericalECEFToWebMercator";case w:return"sphericalMarsPCPFToMars2000";case F:return"sphericalMoonPCPFToMoon2000";case x:return"sphericalECEFToWGS84ECEF";case q:return"mars2000ToSphericalPCPF";case l:return"moon2000ToSphericalPCPF";default:return null}};c.getTransformation=Ga;c.getTransformations=function(h,n,m=null){if(r.isNone(ca))throw new ya;h=ca._getTransformationBySuitability(ha,
h,n,m,null==m?void 0:m.spatialReference);if(null!==h){n=[];for(const v of h)n.push(U.fromGE(v));return n}return[]};c.initializeProjection=async function(h,n){if(!Y())for(const {source:m,dest:v,geographicTransformation:Q}of h)if(!Ea(m,v,Q))return ea(n)};c.isLoaded=Y;c.isSupported=function(){return!0};c.load=ea;c.localLinearScaleFactors=function(h,n,m,v){if(r.isNone(n)||r.isNone(v))return!1;const Q=la(n,xa);var T=la(v,Ca);if(Q===T&&0!==Q||N.equals(n,v))return m[0]=1,m[1]=1,m[2]=1,!0;if(1===Q){n=e.length(h);
h=n/Math.sqrt(h[0]*h[0]+h[1]*h[1]);n/=S.earth.radius;if(3===T)return m[0]=h*n,m[1]=h*n,m[2]=1,!0;if(2===T||5===T)return T=180/(S.earth.radius*Math.PI),m[0]=T*h*n,m[1]=T*n,m[2]=1,!0}return!1};c.lonLatToSphericalPCPF=function(h,n,m,v,Q=0){v+=Q;Q=Math.cos(m);h[0]=Math.cos(n)*Q*v;h[1]=Math.sin(n)*Q*v;h[2]=Math.sin(m)*v};c.lonLatToWebMercatorComparable=ba;c.project=function(h,n,m=null){return Array.isArray(h)?0===h.length?[]:ja(ha,h,h[0].spatialReference,n,m):ja(ha,[h],h.spatialReference,n,m)[0]};c.projectBoundingRect=
function(h,n,m,v){if(null==h)return!1;if(N.equals(n,v))return B.set(m,h),!0;qa[0]=h[0];qa[1]=h[1];qa[2]=0;if(!Aa(qa,n,0,qa,v,0,1))return!1;m[0]=qa[0];m[1]=qa[1];qa[0]=h[2];qa[1]=h[3];qa[2]=0;if(!Aa(qa,n,0,qa,v,0,1))return!1;m[2]=qa[0];m[3]=qa[1];return!0};c.projectBoundingSphere=function(h,n,m,v){if(r.isNone(n)||r.isNone(v))return!1;n=Z(n,v,Da);if(n.projector===ma)return m[0]=h[0],m[1]=h[1],m[2]=h[2],m[3]=h[3],!0;if(r.isNone(n.projector))return!1;const {source:Q,dest:T}=n;if(3===T.spatialReferenceId){n=
wa[Q.spatialReferenceId][2];if(r.isNone(n))return!1;n(h,0,Ia,0);n=Math.abs(sa*Ia[1])+Math.asin(h[3]/(S.earth.radius+h[2]));a(Ia,0,m,0);m[3]=n>.9999*Math.PI?Number.MAX_VALUE:1/Math.cos(n)*h[3];return!0}n.projector(h,0,m,0);m[3]=h[3]*Q.metersPerUnit/T.metersPerUnit;return!0};c.projectBuffer=Aa;c.projectDirection=function(h,n,m,v,Q){e.copy(na,h);e.add(Ua,h,n);La(na,m,na,Q);La(Ua,m,Ua,Q);e.subtract(v,Ua,na);e.normalize(v,v)};c.projectExtent=function(h,n,m=n.spatialReference,v=0){return r.isNone(m)?!1:
Fa(h,h.spatialReference,n,m,v)};c.projectMany=ja;c.projectMultipoint=function(h,n,m=n.spatialReference,v=0){return r.isNone(m)?!1:Oa(h,h.spatialReference,n,m,v)};c.projectPoint=function(h,n,m=n.spatialReference,v=0){return r.isNone(m)?!1:Ha(h,h.spatialReference,n,m,v)};c.projectPointToVector=function(h,n,m,v=0){na[0]=h.x;na[1]=h.y;const Q=h.z;na[2]=void 0!==Q?Q:v;return Aa(na,h.spatialReference,0,n,m,0,1)};c.projectPointToWGS84ComparableLonLat=function(h,n){na[0]=h.x;na[1]=h.y;const m=h.z;na[2]=void 0!==
m?m:0;return Qa(na,h.spatialReference,n)};c.projectPolygon=function(h,n,m=n.spatialReference,v=0){return r.isNone(m)?!1:Ma(h,h.spatialReference,n,m,v)};c.projectPolyline=function(h,n,m=n.spatialReference,v=0){return r.isNone(m)?!1:Na(h,h.spatialReference,n,m,v)};c.projectVectorToDehydratedPoint=function(h,n,m){return Aa(h,n,0,na,m.spatialReference,0,1)?(m.x=na[0],m.y=na[1],m.z=na[2],m):null};c.projectVectorToPoint=function(h,n,m){if(r.isNone(n)||r.isNone(m))return null;const v=new G({spatialReference:m});
return Aa(h,n,0,na,m,0,1)?(v.x=na[0],v.y=na[1],v.z=na[2],v):null};c.projectVectorToVector=La;c.projectVectorToWGS84ComparableLonLat=Qa;c.projectXYZToVector=Ja;c.sphericalPCPFtoLonLatElevation=A;c.unload=function(){ia=ha=ca=null;ka={}};Object.defineProperty(c,"__esModule",{value:!0})})},"esri/chunks/mat4":function(){define(["exports","./vec3f64","./common"],function(u,c,k){function r(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];
a[11]=b[11];a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a}function J(a,b,l,q,y,A,F,w,d,g,x,E,I,M,R,W,Z){a[0]=b;a[1]=l;a[2]=q;a[3]=y;a[4]=A;a[5]=F;a[6]=w;a[7]=d;a[8]=g;a[9]=x;a[10]=E;a[11]=I;a[12]=M;a[13]=R;a[14]=W;a[15]=Z;return a}function H(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function N(a,b){if(a===b){const l=b[1],q=b[2],y=b[3],A=b[6],F=b[7],w=b[11];a[1]=b[4];a[2]=b[8];a[3]=b[12];a[4]=l;a[6]=
b[9];a[7]=b[13];a[8]=q;a[9]=A;a[11]=b[14];a[12]=y;a[13]=F;a[14]=w}else a[0]=b[0],a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=b[1],a[5]=b[5],a[6]=b[9],a[7]=b[13],a[8]=b[2],a[9]=b[6],a[10]=b[10],a[11]=b[14],a[12]=b[3],a[13]=b[7],a[14]=b[11],a[15]=b[15];return a}function S(a,b){const l=b[0],q=b[1],y=b[2],A=b[3],F=b[4],w=b[5],d=b[6],g=b[7],x=b[8],E=b[9],I=b[10],M=b[11],R=b[12],W=b[13],Z=b[14];b=b[15];const pa=l*w-q*F,ca=l*d-y*F,ha=l*g-A*F,ia=q*d-y*w,ka=q*g-A*w,ya=y*g-A*d,wa=x*W-E*R,xa=x*Z-I*R,Ca=x*b-M*R,za=E*
Z-I*W,Da=E*b-M*W,sa=I*b-M*Z;let ra=pa*sa-ca*Da+ha*za+ia*Ca-ka*xa+ya*wa;if(!ra)return null;ra=1/ra;a[0]=(w*sa-d*Da+g*za)*ra;a[1]=(y*Da-q*sa-A*za)*ra;a[2]=(W*ya-Z*ka+b*ia)*ra;a[3]=(I*ka-E*ya-M*ia)*ra;a[4]=(d*Ca-F*sa-g*xa)*ra;a[5]=(l*sa-y*Ca+A*xa)*ra;a[6]=(Z*ha-R*ya-b*ca)*ra;a[7]=(x*ya-I*ha+M*ca)*ra;a[8]=(F*Da-w*Ca+g*wa)*ra;a[9]=(q*Ca-l*Da-A*wa)*ra;a[10]=(R*ka-W*ha+b*pa)*ra;a[11]=(E*ha-x*ka-M*pa)*ra;a[12]=(w*xa-F*za-d*wa)*ra;a[13]=(l*za-q*xa+y*wa)*ra;a[14]=(W*ca-R*ia-Z*pa)*ra;a[15]=(x*ia-E*ca+I*pa)*
ra;return a}function G(a,b){const l=b[0],q=b[1],y=b[2],A=b[3],F=b[4],w=b[5],d=b[6],g=b[7],x=b[8],E=b[9],I=b[10],M=b[11],R=b[12],W=b[13],Z=b[14];b=b[15];a[0]=w*(I*b-M*Z)-E*(d*b-g*Z)+W*(d*M-g*I);a[1]=-(q*(I*b-M*Z)-E*(y*b-A*Z)+W*(y*M-A*I));a[2]=q*(d*b-g*Z)-w*(y*b-A*Z)+W*(y*g-A*d);a[3]=-(q*(d*M-g*I)-w*(y*M-A*I)+E*(y*g-A*d));a[4]=-(F*(I*b-M*Z)-x*(d*b-g*Z)+R*(d*M-g*I));a[5]=l*(I*b-M*Z)-x*(y*b-A*Z)+R*(y*M-A*I);a[6]=-(l*(d*b-g*Z)-F*(y*b-A*Z)+R*(y*g-A*d));a[7]=l*(d*M-g*I)-F*(y*M-A*I)+x*(y*g-A*d);a[8]=F*(E*
b-M*W)-x*(w*b-g*W)+R*(w*M-g*E);a[9]=-(l*(E*b-M*W)-x*(q*b-A*W)+R*(q*M-A*E));a[10]=l*(w*b-g*W)-F*(q*b-A*W)+R*(q*g-A*w);a[11]=-(l*(w*M-g*E)-F*(q*M-A*E)+x*(q*g-A*w));a[12]=-(F*(E*Z-I*W)-x*(w*Z-d*W)+R*(w*I-d*E));a[13]=l*(E*Z-I*W)-x*(q*Z-y*W)+R*(q*I-y*E);a[14]=-(l*(w*Z-d*W)-F*(q*Z-y*W)+R*(q*d-y*w));a[15]=l*(w*I-d*E)-F*(q*I-y*E)+x*(q*d-y*w);return a}function O(a){const b=a[0],l=a[1],q=a[2],y=a[3],A=a[4],F=a[5],w=a[6],d=a[7],g=a[8],x=a[9],E=a[10],I=a[11],M=a[12],R=a[13],W=a[14];a=a[15];return(b*F-l*A)*(E*
a-I*W)-(b*w-q*A)*(x*a-I*R)+(b*d-y*A)*(x*W-E*R)+(l*w-q*F)*(g*a-I*M)-(l*d-y*F)*(g*W-E*M)+(q*d-y*w)*(g*R-x*M)}function X(a,b,l){const q=b[0],y=b[1],A=b[2],F=b[3],w=b[4],d=b[5],g=b[6],x=b[7],E=b[8],I=b[9],M=b[10],R=b[11],W=b[12],Z=b[13],pa=b[14];b=b[15];let ca=l[0],ha=l[1],ia=l[2],ka=l[3];a[0]=ca*q+ha*w+ia*E+ka*W;a[1]=ca*y+ha*d+ia*I+ka*Z;a[2]=ca*A+ha*g+ia*M+ka*pa;a[3]=ca*F+ha*x+ia*R+ka*b;ca=l[4];ha=l[5];ia=l[6];ka=l[7];a[4]=ca*q+ha*w+ia*E+ka*W;a[5]=ca*y+ha*d+ia*I+ka*Z;a[6]=ca*A+ha*g+ia*M+ka*pa;a[7]=ca*
F+ha*x+ia*R+ka*b;ca=l[8];ha=l[9];ia=l[10];ka=l[11];a[8]=ca*q+ha*w+ia*E+ka*W;a[9]=ca*y+ha*d+ia*I+ka*Z;a[10]=ca*A+ha*g+ia*M+ka*pa;a[11]=ca*F+ha*x+ia*R+ka*b;ca=l[12];ha=l[13];ia=l[14];ka=l[15];a[12]=ca*q+ha*w+ia*E+ka*W;a[13]=ca*y+ha*d+ia*I+ka*Z;a[14]=ca*A+ha*g+ia*M+ka*pa;a[15]=ca*F+ha*x+ia*R+ka*b;return a}function V(a,b,l){const q=l[0],y=l[1];l=l[2];let A=void 0,F=void 0,w=void 0,d=void 0,g=void 0,x=void 0,E=void 0,I=void 0,M=void 0,R=void 0,W=void 0,Z=void 0;b===a?(a[12]=b[0]*q+b[4]*y+b[8]*l+b[12],
a[13]=b[1]*q+b[5]*y+b[9]*l+b[13],a[14]=b[2]*q+b[6]*y+b[10]*l+b[14],a[15]=b[3]*q+b[7]*y+b[11]*l+b[15]):(A=b[0],F=b[1],w=b[2],d=b[3],g=b[4],x=b[5],E=b[6],I=b[7],M=b[8],R=b[9],W=b[10],Z=b[11],a[0]=A,a[1]=F,a[2]=w,a[3]=d,a[4]=g,a[5]=x,a[6]=E,a[7]=I,a[8]=M,a[9]=R,a[10]=W,a[11]=Z,a[12]=A*q+g*y+M*l+b[12],a[13]=F*q+x*y+R*l+b[13],a[14]=w*q+E*y+W*l+b[14],a[15]=d*q+I*y+Z*l+b[15]);return a}function P(a,b,l){const q=l[0],y=l[1];l=l[2];a[0]=b[0]*q;a[1]=b[1]*q;a[2]=b[2]*q;a[3]=b[3]*q;a[4]=b[4]*y;a[5]=b[5]*y;a[6]=
b[6]*y;a[7]=b[7]*y;a[8]=b[8]*l;a[9]=b[9]*l;a[10]=b[10]*l;a[11]=b[11]*l;a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a}function f(a,b,l,q){let y=q[0],A=q[1];q=q[2];let F=Math.sqrt(y*y+A*A+q*q);var w=void 0,d=void 0;let g=void 0,x=void 0,E=void 0,I=void 0,M=void 0,R=void 0,W=void 0,Z=void 0,pa=void 0,ca=void 0,ha=void 0,ia=void 0,ka=void 0,ya=void 0,wa=void 0,xa=void 0,Ca=void 0,za=void 0,Da=void 0,sa=void 0;d=w=void 0;if(F<k.EPSILON)return null;F=1/F;y*=F;A*=F;q*=F;w=Math.sin(l);d=Math.cos(l);
g=1-d;x=b[0];E=b[1];I=b[2];M=b[3];R=b[4];W=b[5];Z=b[6];pa=b[7];ca=b[8];ha=b[9];ia=b[10];ka=b[11];ya=y*y*g+d;wa=A*y*g+q*w;xa=q*y*g-A*w;Ca=y*A*g-q*w;za=A*A*g+d;Da=q*A*g+y*w;sa=y*q*g+A*w;w=A*q*g-y*w;d=q*q*g+d;a[0]=x*ya+R*wa+ca*xa;a[1]=E*ya+W*wa+ha*xa;a[2]=I*ya+Z*wa+ia*xa;a[3]=M*ya+pa*wa+ka*xa;a[4]=x*Ca+R*za+ca*Da;a[5]=E*Ca+W*za+ha*Da;a[6]=I*Ca+Z*za+ia*Da;a[7]=M*Ca+pa*za+ka*Da;a[8]=x*sa+R*w+ca*d;a[9]=E*sa+W*w+ha*d;a[10]=I*sa+Z*w+ia*d;a[11]=M*sa+pa*w+ka*d;b!==a&&(a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=
b[15]);return a}function p(a,b,l){const q=Math.sin(l);l=Math.cos(l);const y=b[4],A=b[5],F=b[6],w=b[7],d=b[8],g=b[9],x=b[10],E=b[11];b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[4]=y*l+d*q;a[5]=A*l+g*q;a[6]=F*l+x*q;a[7]=w*l+E*q;a[8]=d*l-y*q;a[9]=g*l-A*q;a[10]=x*l-F*q;a[11]=E*l-w*q;return a}function e(a,b,l){const q=Math.sin(l);l=Math.cos(l);const y=b[0],A=b[1],F=b[2],w=b[3],d=b[8],g=b[9],x=b[10],E=b[11];b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=
b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=y*l-d*q;a[1]=A*l-g*q;a[2]=F*l-x*q;a[3]=w*l-E*q;a[8]=y*q+d*l;a[9]=A*q+g*l;a[10]=F*q+x*l;a[11]=w*q+E*l;return a}function t(a,b,l){const q=Math.sin(l);l=Math.cos(l);const y=b[0],A=b[1],F=b[2],w=b[3],d=b[4],g=b[5],x=b[6],E=b[7];b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=y*l+d*q;a[1]=A*l+g*q;a[2]=F*l+x*q;a[3]=w*l+E*q;a[4]=d*l-y*q;a[5]=g*l-A*q;a[6]=x*l-F*q;a[7]=E*l-w*q;return a}function D(a,
b){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=b[0];a[13]=b[1];a[14]=b[2];a[15]=1;return a}function z(a,b){a[0]=b[0];a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b[1];a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=b[2];a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function C(a,b,l){let q=l[0],y=l[1];l=l[2];let A=Math.sqrt(q*q+y*y+l*l),F=void 0,w=void 0,d=void 0;if(A<k.EPSILON)return null;A=1/A;q*=A;y*=A;l*=A;F=Math.sin(b);w=Math.cos(b);d=1-w;a[0]=q*q*d+w;a[1]=y*q*d+l*F;a[2]=
l*q*d-y*F;a[3]=0;a[4]=q*y*d-l*F;a[5]=y*y*d+w;a[6]=l*y*d+q*F;a[7]=0;a[8]=q*l*d+y*F;a[9]=y*l*d-q*F;a[10]=l*l*d+w;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function B(a,b){const l=Math.sin(b);b=Math.cos(b);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=l;a[7]=0;a[8]=0;a[9]=-l;a[10]=b;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function L(a,b){const l=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=0;a[2]=-l;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=l;a[9]=0;a[10]=b;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=
1;return a}function U(a,b){const l=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=l;a[2]=0;a[3]=0;a[4]=-l;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function Y(a,b,l){var q=b[0],y=b[1],A=b[2],F=b[3],w=q+q,d=y+y;const g=A+A;b=q*w;const x=q*d;q*=g;const E=y*d;y*=g;A*=g;w*=F;d*=F;F*=g;a[0]=1-(E+A);a[1]=x+F;a[2]=q-d;a[3]=0;a[4]=x-F;a[5]=1-(b+A);a[6]=y+w;a[7]=0;a[8]=q+d;a[9]=y-w;a[10]=1-(b+E);a[11]=0;a[12]=l[0];a[13]=l[1];a[14]=l[2];a[15]=1;return a}function ea(a,
b){const l=ba,q=-b[0],y=-b[1],A=-b[2],F=b[3],w=b[4],d=b[5],g=b[6],x=b[7],E=q*q+y*y+A*A+F*F;0<E?(l[0]=2*(w*F+x*q+d*A-g*y)/E,l[1]=2*(d*F+x*y+g*q-w*A)/E,l[2]=2*(g*F+x*A+w*y-d*q)/E):(l[0]=2*(w*F+x*q+d*A-g*y),l[1]=2*(d*F+x*y+g*q-w*A),l[2]=2*(g*F+x*A+w*y-d*q));Y(a,b,l);return a}function ja(a,b){a[0]=b[12];a[1]=b[13];a[2]=b[14];return a}function Ga(a,b){const l=b[0],q=b[1],y=b[2],A=b[4],F=b[5],w=b[6],d=b[8],g=b[9];b=b[10];a[0]=Math.sqrt(l*l+q*q+y*y);a[1]=Math.sqrt(A*A+F*F+w*w);a[2]=Math.sqrt(d*d+g*g+b*b);
return a}function Ea(a,b){const l=b[0]+b[5]+b[10];let q=0;0<l?(q=2*Math.sqrt(l+1),a[3]=.25*q,a[0]=(b[6]-b[9])/q,a[1]=(b[8]-b[2])/q,a[2]=(b[1]-b[4])/q):b[0]>b[5]&&b[0]>b[10]?(q=2*Math.sqrt(1+b[0]-b[5]-b[10]),a[3]=(b[6]-b[9])/q,a[0]=.25*q,a[1]=(b[1]+b[4])/q,a[2]=(b[8]+b[2])/q):b[5]>b[10]?(q=2*Math.sqrt(1+b[5]-b[0]-b[10]),a[3]=(b[8]-b[2])/q,a[0]=(b[1]+b[4])/q,a[1]=.25*q,a[2]=(b[6]+b[9])/q):(q=2*Math.sqrt(1+b[10]-b[0]-b[5]),a[3]=(b[1]-b[4])/q,a[0]=(b[8]+b[2])/q,a[1]=(b[6]+b[9])/q,a[2]=.25*q);return a}
function Sa(a,b,l,q){var y=b[0],A=b[1],F=b[2],w=b[3],d=y+y,g=A+A,x=F+F;b=y*d;const E=y*g;y*=x;const I=A*g;A*=x;F*=x;d*=w;g*=w;w*=x;x=q[0];const M=q[1];q=q[2];a[0]=(1-(I+F))*x;a[1]=(E+w)*x;a[2]=(y-g)*x;a[3]=0;a[4]=(E-w)*M;a[5]=(1-(b+F))*M;a[6]=(A+d)*M;a[7]=0;a[8]=(y+g)*q;a[9]=(A-d)*q;a[10]=(1-(b+I))*q;a[11]=0;a[12]=l[0];a[13]=l[1];a[14]=l[2];a[15]=1;return a}function Ha(a,b,l,q,y){var A=b[0],F=b[1],w=b[2],d=b[3],g=A+A,x=F+F,E=w+w;b=A*g;var I=A*x,M=A*E;A=F*x;F*=E;var R=w*E;w=d*g;x*=d;const W=d*E;var Z=
q[0],pa=q[1];E=q[2];q=y[0];d=y[1];y=y[2];g=(1-(A+R))*Z;const ca=(I+W)*Z;Z*=M-x;I=(I-W)*pa;R=(1-(b+R))*pa;pa*=F+w;M=(M+x)*E;F=(F-w)*E;b=(1-(b+A))*E;a[0]=g;a[1]=ca;a[2]=Z;a[3]=0;a[4]=I;a[5]=R;a[6]=pa;a[7]=0;a[8]=M;a[9]=F;a[10]=b;a[11]=0;a[12]=l[0]+q-(g*q+I*d+M*y);a[13]=l[1]+d-(ca*q+R*d+F*y);a[14]=l[2]+y-(Z*q+pa*d+b*y);a[15]=1;return a}function Oa(a,b){var l=b[0],q=b[1],y=b[2];b=b[3];var A=l+l,F=q+q;const w=y+y;l*=A;const d=q*A;q*=F;const g=y*A,x=y*F;y*=w;A*=b;F*=b;b*=w;a[0]=1-q-y;a[1]=d+b;a[2]=g-F;
a[3]=0;a[4]=d-b;a[5]=1-l-y;a[6]=x+A;a[7]=0;a[8]=g+F;a[9]=x-A;a[10]=1-l-q;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a}function Na(a,b,l,q,y,A,F){const w=1/(l-b),d=1/(y-q),g=1/(A-F);a[0]=2*A*w;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*A*d;a[6]=0;a[7]=0;a[8]=(l+b)*w;a[9]=(y+q)*d;a[10]=(F+A)*g;a[11]=-1;a[12]=0;a[13]=0;a[14]=F*A*2*g;a[15]=0;return a}function Ma(a,b,l,q,y){b=1/Math.tan(b/2);let A=void 0;a[0]=b/l;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[11]=-1;a[12]=0;a[13]=0;a[15]=
0;null!=y&&Infinity!==y?(A=1/(q-y),a[10]=(y+q)*A,a[14]=2*y*q*A):(a[10]=-1,a[14]=-2*q);return a}function Fa(a,b,l,q){const y=Math.tan(b.upDegrees*Math.PI/180),A=Math.tan(b.downDegrees*Math.PI/180),F=Math.tan(b.leftDegrees*Math.PI/180);b=Math.tan(b.rightDegrees*Math.PI/180);const w=2/(F+b),d=2/(y+A);a[0]=w;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=d;a[6]=0;a[7]=0;a[8]=-((F-b)*w*.5);a[9]=(y-A)*d*.5;a[10]=q/(l-q);a[11]=-1;a[12]=0;a[13]=0;a[14]=q*l/(l-q);a[15]=0;return a}function Ja(a,b,l,q,y,A,F){const w=1/(b-
l),d=1/(q-y),g=1/(A-F);a[0]=-2*w;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*d;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*g;a[11]=0;a[12]=(b+l)*w;a[13]=(y+q)*d;a[14]=(F+A)*g;a[15]=1;return a}function La(a,b,l,q){let y=void 0,A=void 0;var F=void 0,w=void 0;let d=void 0,g=void 0;var x=void 0,E=void 0;let I=void 0,M=void 0;const R=b[0],W=b[1];b=b[2];F=q[0];w=q[1];q=q[2];x=l[0];E=l[1];l=l[2];if(Math.abs(R-x)<k.EPSILON&&Math.abs(W-E)<k.EPSILON&&Math.abs(b-l)<k.EPSILON)return H(a);x=R-x;E=W-E;I=b-l;M=1/Math.sqrt(x*x+
E*E+I*I);x*=M;E*=M;I*=M;y=w*I-q*E;A=q*x-F*I;F=F*E-w*x;(M=Math.sqrt(y*y+A*A+F*F))?(M=1/M,y*=M,A*=M,F*=M):F=A=y=0;w=E*F-I*A;d=I*y-x*F;g=x*A-E*y;(M=Math.sqrt(w*w+d*d+g*g))?(M=1/M,w*=M,d*=M,g*=M):g=d=w=0;a[0]=y;a[1]=w;a[2]=x;a[3]=0;a[4]=A;a[5]=d;a[6]=E;a[7]=0;a[8]=F;a[9]=g;a[10]=I;a[11]=0;a[12]=-(y*R+A*W+F*b);a[13]=-(w*R+d*W+g*b);a[14]=-(x*R+E*W+I*b);a[15]=1;return a}function Qa(a,b,l,q){const y=b[0],A=b[1];b=b[2];var F=q[0];const w=q[1];var d=q[2];q=y-l[0];let g=A-l[1];l=b-l[2];let x=q*q+g*g+l*l;0<x&&
(x=1/Math.sqrt(x),q*=x,g*=x,l*=x);let E=w*l-d*g;d=d*q-F*l;F=F*g-w*q;x=E*E+d*d+F*F;0<x&&(x=1/Math.sqrt(x),E*=x,d*=x,F*=x);a[0]=E;a[1]=d;a[2]=F;a[3]=0;a[4]=g*F-l*d;a[5]=l*E-q*F;a[6]=q*d-g*E;a[7]=0;a[8]=q;a[9]=g;a[10]=l;a[11]=0;a[12]=y;a[13]=A;a[14]=b;a[15]=1;return a}function Aa(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"}function Ka(a){return Math.sqrt(a[0]**2+a[1]**
2+a[2]**2+a[3]**2+a[4]**2+a[5]**2+a[6]**2+a[7]**2+a[8]**2+a[9]**2+a[10]**2+a[11]**2+a[12]**2+a[13]**2+a[14]**2+a[15]**2)}function Ra(a,b,l){a[0]=b[0]+l[0];a[1]=b[1]+l[1];a[2]=b[2]+l[2];a[3]=b[3]+l[3];a[4]=b[4]+l[4];a[5]=b[5]+l[5];a[6]=b[6]+l[6];a[7]=b[7]+l[7];a[8]=b[8]+l[8];a[9]=b[9]+l[9];a[10]=b[10]+l[10];a[11]=b[11]+l[11];a[12]=b[12]+l[12];a[13]=b[13]+l[13];a[14]=b[14]+l[14];a[15]=b[15]+l[15];return a}function la(a,b,l){a[0]=b[0]-l[0];a[1]=b[1]-l[1];a[2]=b[2]-l[2];a[3]=b[3]-l[3];a[4]=b[4]-l[4];
a[5]=b[5]-l[5];a[6]=b[6]-l[6];a[7]=b[7]-l[7];a[8]=b[8]-l[8];a[9]=b[9]-l[9];a[10]=b[10]-l[10];a[11]=b[11]-l[11];a[12]=b[12]-l[12];a[13]=b[13]-l[13];a[14]=b[14]-l[14];a[15]=b[15]-l[15];return a}function ma(a,b,l){a[0]=b[0]*l;a[1]=b[1]*l;a[2]=b[2]*l;a[3]=b[3]*l;a[4]=b[4]*l;a[5]=b[5]*l;a[6]=b[6]*l;a[7]=b[7]*l;a[8]=b[8]*l;a[9]=b[9]*l;a[10]=b[10]*l;a[11]=b[11]*l;a[12]=b[12]*l;a[13]=b[13]*l;a[14]=b[14]*l;a[15]=b[15]*l;return a}function oa(a,b,l,q){a[0]=b[0]+l[0]*q;a[1]=b[1]+l[1]*q;a[2]=b[2]+l[2]*q;a[3]=
b[3]+l[3]*q;a[4]=b[4]+l[4]*q;a[5]=b[5]+l[5]*q;a[6]=b[6]+l[6]*q;a[7]=b[7]+l[7]*q;a[8]=b[8]+l[8]*q;a[9]=b[9]+l[9]*q;a[10]=b[10]+l[10]*q;a[11]=b[11]+l[11]*q;a[12]=b[12]+l[12]*q;a[13]=b[13]+l[13]*q;a[14]=b[14]+l[14]*q;a[15]=b[15]+l[15]*q;return a}function K(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]&&a[6]===b[6]&&a[7]===b[7]&&a[8]===b[8]&&a[9]===b[9]&&a[10]===b[10]&&a[11]===b[11]&&a[12]===b[12]&&a[13]===b[13]&&a[14]===b[14]&&a[15]===b[15]}function aa(a,b){const l=
a[0],q=a[1],y=a[2],A=a[3],F=a[4],w=a[5],d=a[6],g=a[7],x=a[8],E=a[9],I=a[10],M=a[11],R=a[12],W=a[13],Z=a[14];a=a[15];const pa=b[0],ca=b[1],ha=b[2],ia=b[3],ka=b[4],ya=b[5],wa=b[6],xa=b[7],Ca=b[8],za=b[9],Da=b[10],sa=b[11],ra=b[12],qa=b[13],Ia=b[14];b=b[15];return Math.abs(l-pa)<=k.EPSILON*Math.max(1,Math.abs(l),Math.abs(pa))&&Math.abs(q-ca)<=k.EPSILON*Math.max(1,Math.abs(q),Math.abs(ca))&&Math.abs(y-ha)<=k.EPSILON*Math.max(1,Math.abs(y),Math.abs(ha))&&Math.abs(A-ia)<=k.EPSILON*Math.max(1,Math.abs(A),
Math.abs(ia))&&Math.abs(F-ka)<=k.EPSILON*Math.max(1,Math.abs(F),Math.abs(ka))&&Math.abs(w-ya)<=k.EPSILON*Math.max(1,Math.abs(w),Math.abs(ya))&&Math.abs(d-wa)<=k.EPSILON*Math.max(1,Math.abs(d),Math.abs(wa))&&Math.abs(g-xa)<=k.EPSILON*Math.max(1,Math.abs(g),Math.abs(xa))&&Math.abs(x-Ca)<=k.EPSILON*Math.max(1,Math.abs(x),Math.abs(Ca))&&Math.abs(E-za)<=k.EPSILON*Math.max(1,Math.abs(E),Math.abs(za))&&Math.abs(I-Da)<=k.EPSILON*Math.max(1,Math.abs(I),Math.abs(Da))&&Math.abs(M-sa)<=k.EPSILON*Math.max(1,Math.abs(M),
Math.abs(sa))&&Math.abs(R-ra)<=k.EPSILON*Math.max(1,Math.abs(R),Math.abs(ra))&&Math.abs(W-qa)<=k.EPSILON*Math.max(1,Math.abs(W),Math.abs(qa))&&Math.abs(Z-Ia)<=k.EPSILON*Math.max(1,Math.abs(Z),Math.abs(Ia))&&Math.abs(a-b)<=k.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))}const ba=c.create();c=Object.freeze({__proto__:null,copy:r,set:J,identity:H,transpose:N,invert:S,adjoint:G,determinant:O,multiply:X,translate:V,scale:P,rotate:f,rotateX:p,rotateY:e,rotateZ:t,fromTranslation:D,fromScaling:z,fromRotation:C,
fromXRotation:B,fromYRotation:L,fromZRotation:U,fromRotationTranslation:Y,fromQuat2:ea,getTranslation:ja,getScaling:Ga,getRotation:Ea,fromRotationTranslationScale:Sa,fromRotationTranslationScaleOrigin:Ha,fromQuat:Oa,frustum:Na,perspective:Ma,perspectiveFromFieldOfView:Fa,ortho:Ja,lookAt:La,targetTo:Qa,str:Aa,frob:Ka,add:Ra,subtract:la,multiplyScalar:ma,multiplyScalarAndAdd:oa,exactEquals:K,equals:aa,mul:X,sub:la});u.add=Ra;u.adjoint=G;u.copy=r;u.determinant=O;u.equals=aa;u.exactEquals=K;u.frob=Ka;
u.fromQuat=Oa;u.fromQuat2=ea;u.fromRotation=C;u.fromRotationTranslation=Y;u.fromRotationTranslationScale=Sa;u.fromRotationTranslationScaleOrigin=Ha;u.fromScaling=z;u.fromTranslation=D;u.fromXRotation=B;u.fromYRotation=L;u.fromZRotation=U;u.frustum=Na;u.getRotation=Ea;u.getScaling=Ga;u.getTranslation=ja;u.identity=H;u.invert=S;u.lookAt=La;u.mat4=c;u.mul=X;u.multiply=X;u.multiplyScalar=ma;u.multiplyScalarAndAdd=oa;u.ortho=Ja;u.perspective=Ma;u.perspectiveFromFieldOfView=Fa;u.rotate=f;u.rotateX=p;u.rotateY=
e;u.rotateZ=t;u.scale=P;u.set=J;u.str=Aa;u.sub=la;u.subtract=la;u.targetTo=Qa;u.translate=V;u.transpose=N})},"esri/chunks/pe":function(){define(["require","exports","./_rollupPluginBabelHelpers","../core/has","../assets"],function(u,c,k,r,J){function H(){return!!c._pe}function N(){return!!r("esri-wasm")}function S(){return f?f:f=(new Promise(function(e,t){u(["./pe-wasm"],e,t)})).then(function(e){return e.peWasm}).then(({default:e})=>e({locateFile:t=>J.getAssetUrl(`esri/geometry/support/${t}`)})).then(e=>
{G(e)})}function G(e){function t(C,B,L){C[B]=L(C[B])}c._pe=e;c.PeDefs.init();c.PeGTlistExtended.init();c.PeNotationMgrs.init();c.PeNotationUtm.init();c.PePCSInfo.init();c.PeGCSExtent=function(C){function B(){return C.apply(this,arguments)||this}k._inheritsLoose(B,C);B.prototype.destroy=function(){c._pe.destroy(this)};return B}(c._pe.PeGCSExtent);e=[c._pe.PeDatum,c._pe.PeGeogcs,c._pe.PeGeogtran,c._pe.PeObject,c._pe.PeParameter,c._pe.PePrimem,c._pe.PeProjcs,c._pe.PeSpheroid,c._pe.PeUnit];for(var D of e)t(D.prototype,
"getName",C=>function(){return C.call(this,Array(c.PeDefs.PE_NAME_MAX))});for(const C of[c._pe.PeGeogtran,c._pe.PeProjcs])t(C.prototype,"getParameters",B=>function(){const L=Array(c.PeDefs.PE_PARM_MAX);let U=B.call(this);for(let Y=0;Y<L.length;Y++){const ea=c._pe.getValue(U,"*");L[Y]=ea?c._pe.wrapPointer(ea,c._pe.PeParameter):null;U+=Int32Array.BYTES_PER_ELEMENT}return L});t(c._pe.PeHorizon.prototype,"getCoord",C=>function(){const B=this.getSize();if(!B)return null;const L=[],U=C.call(this);P(L,B,
U);return L});t(c._pe.PeGTlistExtendedEntry.prototype,"getEntries",C=>{const B=c._pe._pe_getPeGTlistExtendedGTsSize();return function(){let L=null;var U=C.call(this);if(!c._pe.compare(U,c._pe.NULL)){L=[U];const Y=this.getSteps();if(1<Y){U=c._pe.getPointer(U);for(let ea=1;ea<Y;ea++)L.push(c._pe.wrapPointer(U+B*ea,c._pe.PeGTlistExtendedGTs))}}return L}});const z=c._pe._pe_getPeHorizonSize();D=C=>function(){let B=this._cache;B||(this._cache=B=new Map);if(B.has(C))return B.get(C);let L=null;var U=C.call(this);
if(!c._pe.compare(U,c._pe.NULL)){L=[U];const Y=U.getNump();if(1<Y){U=c._pe.getPointer(U);for(let ea=1;ea<Y;ea++)L.push(c._pe.wrapPointer(U+z*ea,c._pe.PeHorizon))}}B.set(C,L);return L};t(c._pe.PeProjcs.prototype,"horizonGcsGenerate",D);t(c._pe.PeProjcs.prototype,"horizonPcsGenerate",D);c._pe.PeObject.prototype.toString=function(C=c.PeDefs.PE_STR_OPTS_NONE){c._pe.ensureCache.prepare();const B=c._pe.getPointer(this),L=c._pe.ensureInt8(Array(c.PeDefs.PE_BUFFER_MAX));return c._pe.UTF8ToString(c._pe._pe_object_to_string_ext(B,
C,L))}}function O(e){if(e){var t=c._pe.getClass(e);t&&(t=c._pe.getCache(t))&&(e=c._pe.getPointer(e))&&delete t[e]}}function X(e,t){const D=[];t=Array(t);for(let z=0;z<e;z++)D.push(c._pe.ensureInt8(t));return D}function V(e){let t;Array.isArray(e[0])?(t=[],e.forEach(D=>{t.push(D[0],D[1])})):t=e;return t}function P(e,t,D,z=!1){if(z)for(z=0;z<2*t;z++)e[z]=c._pe.getValue(D+z*Float64Array.BYTES_PER_ELEMENT,"double");else{z=0===e.length;for(let C=0;C<t;C++)z&&(e[C]=Array(2)),e[C][0]=c._pe.getValue(D,"double"),
e[C][1]=c._pe.getValue(D+Float64Array.BYTES_PER_ELEMENT,"double"),D+=2*Float64Array.BYTES_PER_ELEMENT}}let f;c._pe=null;(function(e){function t(C,B,L){c._pe.ensureCache.prepare();var U=V(L);const Y=L===U;U=c._pe.ensureFloat64(U);(C=c._pe._pe_geog_to_proj(c._pe.getPointer(C),B,U))&&P(L,B,U,Y);return C}function D(C,B,L){return z(C,B,L,0)}function z(C,B,L,U){c._pe.ensureCache.prepare();var Y=V(L);const ea=L===Y;Y=c._pe.ensureFloat64(Y);(C=c._pe._pe_proj_to_geog_center(c._pe.getPointer(C),B,Y,U))&&P(L,
B,Y,ea);return C}e.geogToProj=t;e.projGeog=function(C,B,L,U){switch(U){case c.PeDefs.PE_TRANSFORM_P_TO_G:return D(C,B,L);case c.PeDefs.PE_TRANSFORM_G_TO_P:return t(C,B,L)}return 0};e.projToGeog=D;e.projToGeogCenter=z})(c.PeCSTransformations||(c.PeCSTransformations={}));(function(e){e.init=function(){e.PE_BUFFER_MAX=c._pe.PeDefs.prototype.PE_BUFFER_MAX;e.PE_NAME_MAX=c._pe.PeDefs.prototype.PE_NAME_MAX;e.PE_MGRS_MAX=c._pe.PeDefs.prototype.PE_MGRS_MAX;e.PE_USNG_MAX=c._pe.PeDefs.prototype.PE_USNG_MAX;
e.PE_DD_MAX=c._pe.PeDefs.prototype.PE_DD_MAX;e.PE_DDM_MAX=c._pe.PeDefs.prototype.PE_DDM_MAX;e.PE_DMS_MAX=c._pe.PeDefs.prototype.PE_DMS_MAX;e.PE_UTM_MAX=c._pe.PeDefs.prototype.PE_UTM_MAX;e.PE_PARM_MAX=c._pe.PeDefs.prototype.PE_PARM_MAX;e.PE_TYPE_NONE=c._pe.PeDefs.prototype.PE_TYPE_NONE;e.PE_TYPE_GEOGCS=c._pe.PeDefs.prototype.PE_TYPE_GEOGCS;e.PE_TYPE_PROJCS=c._pe.PeDefs.prototype.PE_TYPE_PROJCS;e.PE_TYPE_GEOGTRAN=c._pe.PeDefs.prototype.PE_TYPE_GEOGTRAN;e.PE_TYPE_COORDSYS=c._pe.PeDefs.prototype.PE_TYPE_COORDSYS;
e.PE_TYPE_UNIT=c._pe.PeDefs.prototype.PE_TYPE_UNIT;e.PE_TYPE_LINUNIT=c._pe.PeDefs.prototype.PE_TYPE_LINUNIT;e.PE_STR_OPTS_NONE=c._pe.PeDefs.prototype.PE_STR_OPTS_NONE;e.PE_STR_AUTH_NONE=c._pe.PeDefs.prototype.PE_STR_AUTH_NONE;e.PE_STR_AUTH_TOP=c._pe.PeDefs.prototype.PE_STR_AUTH_TOP;e.PE_STR_NAME_CANON=c._pe.PeDefs.prototype.PE_STR_NAME_CANON;e.PE_PARM_X0=c._pe.PeDefs.prototype.PE_PARM_X0;e.PE_PARM_ND=c._pe.PeDefs.prototype.PE_PARM_ND;e.PE_TRANSFORM_1_TO_2=c._pe.PeDefs.prototype.PE_TRANSFORM_1_TO_2;
e.PE_TRANSFORM_2_TO_1=c._pe.PeDefs.prototype.PE_TRANSFORM_2_TO_1;e.PE_TRANSFORM_P_TO_G=c._pe.PeDefs.prototype.PE_TRANSFORM_P_TO_G;e.PE_TRANSFORM_G_TO_P=c._pe.PeDefs.prototype.PE_TRANSFORM_G_TO_P;e.PE_HORIZON_RECT=c._pe.PeDefs.prototype.PE_HORIZON_RECT;e.PE_HORIZON_POLY=c._pe.PeDefs.prototype.PE_HORIZON_POLY;e.PE_HORIZON_LINE=c._pe.PeDefs.prototype.PE_HORIZON_LINE;e.PE_HORIZON_DELTA=c._pe.PeDefs.prototype.PE_HORIZON_DELTA}})(c.PeDefs||(c.PeDefs={}));(function(e){function t(B,L){let U=null,Y=D[B];Y||
(Y={},D[B]=Y);Y.hasOwnProperty(String(L))?U=Y[L]:(B=c._pe.PeFactory.prototype.factoryByType(B,L),c._pe.compare(B,c._pe.NULL)||(U=B,Y[L]=U));return U=C(U)}const D={},z={},C=B=>{if(B){const L=B.getType();switch(L){case c.PeDefs.PE_TYPE_GEOGCS:B=c._pe.castObject(B,c._pe.PeGeogcs);break;case c.PeDefs.PE_TYPE_PROJCS:B=c._pe.castObject(B,c._pe.PeProjcs);break;case c.PeDefs.PE_TYPE_GEOGTRAN:B=c._pe.castObject(B,c._pe.PeGeogtran);break;default:L&c.PeDefs.PE_TYPE_UNIT&&(B=c._pe.castObject(B,c._pe.PeUnit))}}return B};
e.initialize=function(){c._pe.PeFactory.prototype.initialize(null)};e.coordsys=function(B){return t(c.PeDefs.PE_TYPE_COORDSYS,B)};e.factoryByType=t;e.fromString=function(B,L){let U=null,Y=z[B];Y||(Y={},z[B]=Y);Y.hasOwnProperty(L)?U=Y[L]:(B=c._pe.PeFactory.prototype.fromString(B,L),c._pe.compare(B,c._pe.NULL)||(U=B,Y[L]=U));return U=C(U)};e.geogcs=function(B){return t(c.PeDefs.PE_TYPE_GEOGCS,B)};e.geogtran=function(B){return t(c.PeDefs.PE_TYPE_GEOGTRAN,B)};e.getCode=function(B){return c._pe.PeFactory.prototype.getCode(B)};
e.projcs=function(B){return t(c.PeDefs.PE_TYPE_PROJCS,B)};e.unit=function(B){return t(c.PeDefs.PE_TYPE_UNIT,B)}})(c.PeFactory||(c.PeFactory={}));c.PeGCSExtent=null;(function(e){let t;e.init=function(){e.PE_GTLIST_OPTS_COMMON=c._pe.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON;t=c._pe._pe_getPeGTlistExtendedEntrySize()};e.getGTlist=function(D,z,C,B,L,U){let Y=null;const ea=new c._pe.PeInteger(U);try{const ja=c._pe.PeGTlistExtended.prototype.getGTlist(D,z,C,B,L,ea);if(U=ea.val)if(Y=[ja],1<U){const Ga=
c._pe.getPointer(ja);for(D=1;D<U;D++)Y.push(c._pe.wrapPointer(Ga+t*D,c._pe.PeGTlistExtendedEntry))}}finally{c._pe.destroy(ea)}return Y}})(c.PeGTlistExtended||(c.PeGTlistExtended={}));(function(e){e.destroy=function(t){if(t&&t.length){for(const D of t)O(D),D.getEntries().forEach(z=>{O(z);z=z.getGeogtran();O(z);z.getParameters().forEach(O);[z.getGeogcs1(),z.getGeogcs2()].forEach(C=>{O(C);const B=C.getDatum();O(B);O(B.getSpheroid());O(C.getPrimem());O(C.getUnit())})});c._pe.PeGTlistExtendedEntry.prototype.Delete(t[0])}}})(c.PeGTlistExtendedEntry||
(c.PeGTlistExtendedEntry={}));(function(e){e.geogToGeog=function(t,D,z,C,B){c._pe.ensureCache.prepare();var L=V(z);const U=z===L;L=c._pe.ensureFloat64(L);let Y=0;C&&(Y=c._pe.ensureFloat64(C));(t=c._pe._pe_geog_to_geog(c._pe.getPointer(t),D,L,Y,B))&&P(z,D,L,U);return t}})(c.PeGTTransformations||(c.PeGTTransformations={}));(function(e){const t=(z,C,B,L,U,Y)=>{c._pe.ensureCache.prepare();switch(z){case "dd":var ea=c._pe._pe_geog_to_dd;var ja=c.PeDefs.PE_DD_MAX;break;case "ddm":ea=c._pe._pe_geog_to_ddm;
ja=c.PeDefs.PE_DDM_MAX;break;case "dms":ea=c._pe._pe_geog_to_dms,ja=c.PeDefs.PE_DMS_MAX}z=0;C&&(z=c._pe.getPointer(C));C=V(L);C=c._pe.ensureFloat64(C);ja=X(B,ja);L=c._pe.ensureInt32(ja);if(U=ea(z,B,C,U,L))for(ea=0;ea<B;ea++)Y[ea]=c._pe.UTF8ToString(ja[ea]);return U},D=(z,C,B,L,U)=>{c._pe.ensureCache.prepare();switch(z){case "dd":var Y=c._pe._pe_dd_to_geog;break;case "ddm":Y=c._pe._pe_ddm_to_geog;break;case "dms":Y=c._pe._pe_dms_to_geog}z=0;C&&(z=c._pe.getPointer(C));C=L.map(ea=>c._pe.ensureString(ea));
L=c._pe.ensureInt32(C);C=c._pe.ensureFloat64(Array(2*B));(Y=Y(z,B,L,C))&&P(U,B,C);return Y};e.geog_to_dms=function(z,C,B,L,U){return t("dms",z,C,B,L,U)};e.dms_to_geog=function(z,C,B,L){return D("dms",z,C,B,L)};e.geog_to_ddm=function(z,C,B,L,U){return t("ddm",z,C,B,L,U)};e.ddm_to_geog=function(z,C,B,L){return D("ddm",z,C,B,L)};e.geog_to_dd=function(z,C,B,L,U){return t("dd",z,C,B,L,U)};e.dd_to_geog=function(z,C,B,L){return D("dd",z,C,B,L)}})(c.PeNotationDms||(c.PeNotationDms={}));(function(e){e.init=
function(){e.PE_MGRS_STYLE_NEW=c._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW;e.PE_MGRS_STYLE_OLD=c._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD;e.PE_MGRS_STYLE_AUTO=c._pe.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO;e.PE_MGRS_180_ZONE_1_PLUS=c._pe.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS;e.PE_MGRS_ADD_SPACES=c._pe.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES};e.geog_to_mgrs_extended=function(t,D,z,C,B,L,U){c._pe.ensureCache.prepare();let Y=0;t&&(Y=c._pe.getPointer(t));t=V(z);z=c._pe.ensureFloat64(t);
t=X(D,c.PeDefs.PE_MGRS_MAX);const ea=c._pe.ensureInt32(t);if(C=c._pe._pe_geog_to_mgrs_extended(Y,D,z,C,B,L,ea))for(B=0;B<D;B++)U[B]=c._pe.UTF8ToString(t[B]);return C};e.mgrs_to_geog_extended=function(t,D,z,C,B){c._pe.ensureCache.prepare();let L=0;t&&(L=c._pe.getPointer(t));t=z.map(U=>c._pe.ensureString(U));z=c._pe.ensureInt32(t);t=c._pe.ensureFloat64(Array(2*D));(C=c._pe._pe_mgrs_to_geog_extended(L,D,z,C,t))&&P(B,D,t);return C}})(c.PeNotationMgrs||(c.PeNotationMgrs={}));(function(e){e.geog_to_usng=
function(t,D,z,C,B,L,U){c._pe.ensureCache.prepare();let Y=0;t&&(Y=c._pe.getPointer(t));t=V(z);z=c._pe.ensureFloat64(t);t=X(D,c.PeDefs.PE_MGRS_MAX);const ea=c._pe.ensureInt32(t);if(C=c._pe._pe_geog_to_usng(Y,D,z,C,B,L,ea))for(B=0;B<D;B++)U[B]=c._pe.UTF8ToString(t[B]);return C};e.usng_to_geog=function(t,D,z,C){c._pe.ensureCache.prepare();var B=0;t&&(B=c._pe.getPointer(t));t=z.map(L=>c._pe.ensureString(L));z=c._pe.ensureInt32(t);t=c._pe.ensureFloat64(Array(2*D));(B=c._pe._pe_usng_to_geog(B,D,z,t))&&
P(C,D,t);return B}})(c.PeNotationUsng||(c.PeNotationUsng={}));(function(e){e.init=function(){e.PE_UTM_OPTS_NONE=c._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NONE;e.PE_UTM_OPTS_ADD_SPACES=c._pe.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES;e.PE_UTM_OPTS_NS=c._pe.PeNotationUtm.prototype.PE_UTM_OPTS_NS};e.geog_to_utm=function(t,D,z,C,B){c._pe.ensureCache.prepare();var L=0;t&&(L=c._pe.getPointer(t));t=V(z);z=c._pe.ensureFloat64(t);t=X(D,c.PeDefs.PE_UTM_MAX);const U=c._pe.ensureInt32(t);if(C=c._pe._pe_geog_to_utm(L,
D,z,C,U))for(L=0;L<D;L++)B[L]=c._pe.UTF8ToString(t[L]);return C};e.utm_to_geog=function(t,D,z,C,B){c._pe.ensureCache.prepare();let L=0;t&&(L=c._pe.getPointer(t));t=z.map(U=>c._pe.ensureString(U));z=c._pe.ensureInt32(t);t=c._pe.ensureFloat64(Array(2*D));(C=c._pe._pe_utm_to_geog(L,D,z,C,t))&&P(B,D,t);return C}})(c.PeNotationUtm||(c.PeNotationUtm={}));(function(e){const t=new Map;e.init=function(){e.PE_PCSINFO_OPTION_NONE=c._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE;e.PE_PCSINFO_OPTION_DOMAIN=c._pe.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN;
e.PE_POLE_OUTSIDE_BOUNDARY=c._pe.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY;e.PE_POLE_POINT=c._pe.PePCSInfo.prototype.PE_POLE_POINT};e.generate=function(D,z=e.PE_PCSINFO_OPTION_DOMAIN){let C,B;t.has(D)&&(B=t.get(D),B[z]&&(C=B[z]));C||(C=c._pe.PePCSInfo.prototype.generate(D,z),B||(B=[],t.set(D,B)),B[z]=C);return C}})(c.PePCSInfo||(c.PePCSInfo={}));(function(e){e.version_string=function(){return c._pe.PeVersion.prototype.version_string()}})(c.PeVersion||(c.PeVersion={}));var p=Object.freeze({__proto__:null,
get _pe(){return c._pe},isLoaded:H,isSupported:N,load:S,get PeCSTransformations(){return c.PeCSTransformations},get PeDefs(){return c.PeDefs},get PeFactory(){return c.PeFactory},get PeGCSExtent(){return c.PeGCSExtent},get PeGTlistExtended(){return c.PeGTlistExtended},get PeGTlistExtendedEntry(){return c.PeGTlistExtendedEntry},get PeGTTransformations(){return c.PeGTTransformations},get PeNotationDms(){return c.PeNotationDms},get PeNotationMgrs(){return c.PeNotationMgrs},get PeNotationUsng(){return c.PeNotationUsng},
get PeNotationUtm(){return c.PeNotationUtm},get PePCSInfo(){return c.PePCSInfo},get PeVersion(){return c.PeVersion},_init:G});c._init=G;c.isLoaded=H;c.isSupported=N;c.load=S;c.pe=p})},"esri/geometry/support/aaBoundingRect":function(){define(["exports","../../core/has","../../core/maybe","../Extent"],function(u,c,k,r){function J(f=P){return[f[0],f[1],f[2],f[3]]}function H(f){return f[0]>=f[2]?0:f[2]-f[0]}function N(f){return f[1]>=f[3]?0:f[3]-f[1]}function S(f,p,e){return p>=f[0]&&e>=f[1]&&p<=f[2]&&
e<=f[3]}function G(f,p){f[0]=p[0];f[1]=p[1];f[2]=p[2];f[3]=p[3];return f}function O(f){return 4===f.length}function X(f,p,e){return f<p?p:f>e?e:f}const V=[Infinity,Infinity,-Infinity,-Infinity],P=[0,0,0,0];u.NEGATIVE_INFINITY=V;u.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];u.UNIT=[0,0,1,1];u.ZERO=P;u.allFinite=function(f){for(let p=0;4>p;p++)if(!isFinite(f[p]))return!1;return!0};u.area=function(f){return H(f)*N(f)};u.center=function(f,p=[0,0]){p[0]=(f[0]+f[2])/2;p[1]=(f[1]+f[3])/2;return p};
u.clone=function(f){return[f[0],f[1],f[2],f[3]]};u.contains=function(f,p){return p[0]>=f[0]&&p[2]<=f[2]&&p[1]>=f[1]&&p[3]<=f[3]};u.containsPoint=function(f,p){return S(f,p[0],p[1])};u.containsPointObject=function(f,p){return S(f,p.x,p.y)};u.containsPointWithMargin=function(f,p,e){return p[0]>=f[0]-e&&p[1]>=f[1]-e&&p[0]<=f[2]+e&&p[1]<=f[3]+e};u.containsXY=S;u.create=J;u.diameter=function(f){const p=H(f);f=N(f);return Math.sqrt(p*p+f*f)};u.distance=function(f,p){const e=(f[1]+f[3])/2,t=Math.max(Math.abs(p[0]-
(f[0]+f[2])/2)-H(f)/2,0);f=Math.max(Math.abs(p[1]-e)-N(f)/2,0);return Math.sqrt(t*t+f*f)};u.empty=function(f){return f?G(f,V):J(V)};u.equals=function(f,p,e){if(k.isNone(f)||k.isNone(p))return f===p;if(!O(f)||!O(p))return!1;if(e)for(let t=0;t<f.length;t++){if(!e(f[t],p[t]))return!1}else for(e=0;e<f.length;e++)if(f[e]!==p[e])return!1;return!0};u.expand=function(f,p,e=f){if("length"in p)if(O(p))e[0]=Math.min(f[0],p[0]),e[1]=Math.min(f[1],p[1]),e[2]=Math.max(f[2],p[2]),e[3]=Math.max(f[3],p[3]);else{if(2===
p.length||3===p.length)e[0]=Math.min(f[0],p[0]),e[1]=Math.min(f[1],p[1]),e[2]=Math.max(f[2],p[0]),e[3]=Math.max(f[3],p[1])}else switch(p.type){case "extent":e[0]=Math.min(f[0],p.xmin);e[1]=Math.min(f[1],p.ymin);e[2]=Math.max(f[2],p.xmax);e[3]=Math.max(f[3],p.ymax);break;case "point":e[0]=Math.min(f[0],p.x),e[1]=Math.min(f[1],p.y),e[2]=Math.max(f[2],p.x),e[3]=Math.max(f[3],p.y)}return e};u.expandPointInPlace=function(f,p){p[0]<f[0]&&(f[0]=p[0]);p[0]>f[2]&&(f[2]=p[0]);p[1]<f[1]&&(f[1]=p[1]);p[1]>f[3]&&
(f[3]=p[1])};u.expandWithNestedArray=function(f,p,e=f){const t=p.length;let D=f[0],z=f[1],C=f[2];f=f[3];for(let B=0;B<t;B++){const L=p[B];D=Math.min(D,L[0]);z=Math.min(z,L[1]);C=Math.max(C,L[0]);f=Math.max(f,L[1])}e[0]=D;e[1]=z;e[2]=C;e[3]=f;return e};u.fromExtent=function(f,p=J()){p[0]=f.xmin;p[1]=f.ymin;p[2]=f.xmax;p[3]=f.ymax;return p};u.fromValues=function(f,p,e,t,D=J()){D[0]=f;D[1]=p;D[2]=e;D[3]=t;return D};u.height=N;u.intersection=function(f,p,e=f){const t=p[0],D=p[1],z=p[2];p=p[3];e[0]=X(f[0],
t,z);e[1]=X(f[1],D,p);e[2]=X(f[2],t,z);e[3]=X(f[3],D,p);return e};u.intersects=function(f,p){return Math.max(p[0],f[0])<=Math.min(p[2],f[2])&&Math.max(p[1],f[1])<=Math.min(p[3],f[3])};u.is=O;u.isPoint=function(f){return(0===H(f)||!isFinite(f[0]))&&(0===N(f)||!isFinite(f[1]))};u.offset=function(f,p,e,t=f){t[0]=f[0]+p;t[1]=f[1]+e;t[2]=f[2]+p;t[3]=f[3]+e;return t};u.pad=function(f,p,e=f){e[0]=f[0]-p;e[1]=f[1]-p;e[2]=f[2]+p;e[3]=f[3]+p;return e};u.set=G;u.setMax=function(f,p,e=f){e[2]=p[0];e[3]=p[1];
e!==f&&(e[0]=f[0],e[1]=f[1]);return f};u.setMin=function(f,p,e=f){e[0]=p[0];e[1]=p[1];e!==f&&(e[2]=f[2],e[3]=f[3]);return e};u.size=function(f,p){p[0]=f[2]-f[0];p[1]=f[3]-f[1]};u.toExtent=function(f,p){return new r({xmin:f[0],ymin:f[1],xmax:f[2],ymax:f[3],spatialReference:p})};u.width=H;Object.defineProperty(u,"__esModule",{value:!0})})},"esri/geometry/support/geodesicConstants":function(){define(["exports","./Ellipsoid"],function(u,c){const k=Math.PI/180;var r=c.earth.radius;const J=c.earth.eccentricitySquared;
r={a1:r*J,a2:r*J*r*J,a3:r*J*J/2,a4:r*J*r*J*2.5,a5:r*J+r*J*J/2,a6:1-J};c={4326:{a:c.earth.radius,f:c.earth.flattening},104900:{a:2439700,f:0},104901:{a:6051E3,f:0},104902:{a:6051800,f:0},104903:{a:c.moon.radius,f:c.moon.flattening},104904:{a:3393400,f:.005207166853303471},104905:{a:c.mars.radius,f:c.mars.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492E3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1E4,f:0},104912:{a:2409300,f:0},104913:{a:15E3,f:0},
104914:{a:4E4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85E3,f:0},104918:{a:1821460,f:0},104919:{a:5E3,f:0},104920:{a:12E3,f:0},104921:{a:3E4,f:3},104922:{a:18E3,f:0},104923:{a:14E3,f:0},104924:{a:49300,f:0},104925:{a:60268E3,f:.09796243445941462},104926:{a:16E3,f:0},104927:{a:9500,f:0},104928:{a:56E4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16E3,f:0},104932:{a:133E3,f:0},104933:{a:718E3,f:0},104934:{a:888E3,f:0},104935:{a:1986300,f:0},104936:{a:1E4,f:0},104937:{a:41900,
f:0},104938:{a:11E4,f:0},104939:{a:50100,f:0},104940:{a:764E3,f:0},104941:{a:11E3,f:0},104942:{a:529800,f:0},104943:{a:2575E3,f:0},104944:{a:25559E3,f:.022927344575296365},104945:{a:578900,f:0},104946:{a:33E3,f:0},104947:{a:21E3,f:0},104948:{a:13E3,f:0},104949:{a:31E3,f:0},104950:{a:27E3,f:0},104951:{a:42E3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15E3,f:0},104955:{a:54E3,f:0},104956:{a:77E3,f:0},104957:{a:27E3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764E3,f:.01708124697141011},
104961:{a:74E3,f:0},104962:{a:79E3,f:0},104963:{a:104E3,f:.14423076923076922},104964:{a:29E3,f:0},104965:{a:17E4,f:0},104966:{a:208E3,f:0},104967:{a:4E4,f:0},104968:{a:1352600,f:0},104969:{a:1195E3,f:0},104970:{a:593E3,f:0},104971:{a:c.mars.radius,f:0},104972:{a:47E4,f:0},104973:{a:255E3,f:0},104974:{a:2439400,f:0}};u.WKT_SPHEROID_REGEX=/SPHEROID\[([^\]]+)]/i;u.earthEllipsoidConstants=r;u.spheroids=c;u.toRadians=k;Object.defineProperty(u,"__esModule",{value:!0})})},"esri/geometry/support/GeographicTransformation":function(){define(["./GeographicTransformationStep"],
function(u){return function(){function c(r){this.steps=[];this._cached_projection={};this._chain="";this._gtlistentry=null;if(r&&r.steps)for(const J of r.steps)J instanceof u?this.steps.push(J):this.steps.push(new u({wkid:J.wkid,wkt:J.wkt,isInverse:J.isInverse}))}c.cacheKey=function(r,J){return[void 0!==r.wkid&&null!==r.wkid?r.wkid.toString():"-1",void 0!==r.wkt&&null!==r.wkt?r.wkt.toString():"",void 0!==J.wkid&&null!==J.wkid?J.wkid.toString():"-1",void 0!==J.wkt&&null!==J.wkt?J.wkt.toString():""].join()};
c.fromGE=function(r){const J=new c;let H="";for(const N of r.steps)r=u.fromGE(N),J.steps.push(r),H+=r.uid.toString()+",";J._cached_projection={};J._gtlistentry=null;J._chain=H;return J};var k=c.prototype;k.getInverse=function(){const r=new c;r.steps=[];for(let J=this.steps.length-1;0<=J;J--)r.steps.push(this.steps[J].getInverse());return r};k.getGTListEntry=function(){let r="";for(const J of this.steps)r+=J.uid.toString()+",";r!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=
r);return this._gtlistentry};k.assignCachedGe=function(r,J,H){this._cached_projection[c.cacheKey(r,J)]=H};k.getCachedGeTransformation=function(r,J){let H="";for(const N of this.steps)H+=N.uid.toString()+",";H!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=H);r=this._cached_projection[c.cacheKey(r,J)];return void 0===r?null:r};return c}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["../../chunks/_rollupPluginBabelHelpers"],function(u){let c=
0;return function(){function k(r=null){this.uid=c++;r?(this._wkt=void 0!==r.wkt?r.wkt:null,this._wkid=void 0!==r.wkid?r.wkid:-1,this._isInverse=void 0!==r.isInverse?!0===r.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}k.fromGE=function(r){const J=new k;J._wkt=r.wkt;J._wkid=r.wkid;J._isInverse=r.isInverse;return J};k.prototype.getInverse=function(){const r=new k;r._wkt=this.wkt;r._wkid=this._wkid;r._isInverse=!this.isInverse;return r};u._createClass(k,[{key:"wkt",get:function(){return this._wkt},
set:function(r){this._wkt=r;this.uid=c++}},{key:"wkid",get:function(){return this._wkid},set:function(r){this._wkid=r;this.uid=c++}},{key:"isInverse",get:function(){return this._isInverse},set:function(r){this._isInverse=r;this.uid=c++}}]);return k}()})},"esri/support/webSceneUtils":function(){define(["exports","../core/Error"],function(u,c){u.createCopyError=function(){return new c("webscene:failed-to-copy-embedded-resources","Copying of embedded resources is currently not supported")};u.createSchemaValidationError=
function(k){return new c("webscene:schema-validation","Failed to save webscene due to schema validation errors. See 'details.errors' for more detailed information",{errors:k})};u.isCopyError=function(k){return k&&"webscene:failed-to-copy-embedded-resources"===k.name};u.isSchemaValidationError=function(k){return k&&"webscene:schema-validation"===k.name};Object.defineProperty(u,"__esModule",{value:!0})})},"esri/views/support/spatialReferenceSupport":function(){define(["exports"],function(u){u.isSpatialReferenceSupported=
function(c,k){return null==c?!1:"2d"===k?!0:"local"===k?!c.isGeographic:c.isWebMercator||c.isWGS84||4490===c.wkid||104971===c.wkid||104905===c.wkid||104903===c.wkid};Object.defineProperty(u,"__esModule",{value:!0})})},"esri/webdoc/support/saveUtils":function(){define("exports ../../core/Error ../../core/uuid ../../core/promiseUtils ../../core/asyncUtils ../../portal/support/resourceUtils".split(" "),function(u,c,k,r,J,H){async function N(G,O){O=await J.result(G.resource.portalItem.addResource(G.resource,
G.content,O));if(!0===O.ok)G.finish&&G.finish(G.resource);else throw G.error&&G.error(O.error),O.error;}async function S(G,O){O=await J.result(G.resource.update(G.content,O));if(!0===O.ok)G.finish(G.resource);else throw G.error(O.error),O.error;}u.saveResources=async function(G,O,X){if(O&&O.resources){var V=O.portalItem===G.portalItem?new Set(G.paths):new Set;G.paths.length=0;G.portalItem=O.portalItem;var P=new Set(O.resources.toKeep.map(e=>e.resource.path)),f=new Set,p=[];P.forEach(e=>{V.delete(e);
G.paths.push(e)});for(const e of O.resources.toUpdate)if(V.delete(e.resource.path),P.has(e.resource.path)||f.has(e.resource.path)){const {resource:t,content:D,finish:z,error:C}=e,B=H.getSiblingOfSameTypeI(t,k.generateUUID());G.paths.push(B.path);p.push(N({resource:B,content:D,finish:z,error:C},X))}else G.paths.push(e.resource.path),p.push(S(e,X)),f.add(e.resource.path);for(const e of O.resources.toAdd)p.push(N(e,X)),G.paths.push(e.resource.path);V.forEach(e=>{e=O.portalItem.resourceFromPath(e);p.push(e.portalItem.removeResource(e).catch(()=>
{}))});if(0!==p.length&&(P=await r.eachAlways(p),r.throwIfAborted(X),X=P.filter(e=>"error"in e).map(e=>e.error),0<X.length))throw new c("save:resources","Failed to save one or more resources",{errors:X});}};Object.defineProperty(u,"__esModule",{value:!0})})},"esri/portal/support/resourceUtils":function(){define(["exports","../../core/maybe","../../core/Error","../../core/urlUtils","../../request"],function(u,c,k,r,J){function H(G){const O=G.lastIndexOf("/");return-1===O?[".",G]:[G.slice(0,O),G.slice(O+
1)]}function N(G){{const f=r.getPathExtension(G);G=c.isNone(f)?[G,""]:[G.slice(0,G.length-f.length-1),`.${f}`]}const [O,X]=G,[V,P]=H(O);return[V,P,X]}async function S(G){return G instanceof Blob?G:(await J(G.url,{responseType:"blob"})).data}u.addOrUpdateResource=async function(G,O,X,V){if(!G.hasPath())throw new k(`portal-item-resource-${O}:invalid-path`,"Resource does not have a valid path");await G.portalItem.load(V);O=r.join(G.portalItem.userItemUrl,"add"===O?"addResources":"updateResources");const [P,
f]=H(G.path);X=await S(X);const p=new FormData;P&&"."!==P&&p.append("resourcesPrefix",P);p.append("fileName",f);p.append("file",X,f);p.append("f","json");c.isSome(V)&&V.access&&p.append("access",V.access);await G.portalItem.portal._request(O,{method:"post",body:p,signal:c.get(V,"signal")});return G};u.contentToBlob=S;u.fetchResources=async function(G,O={},X){await G.load(X);var V=r.join(G.itemUrl,"resources");const {start:P=1,num:f=10,sortOrder:p="asc",sortField:e="created"}=O;O={query:{start:P,num:f,
sortOrder:p,sortField:e},signal:c.get(X,"signal")};V=await G.portal._request(V,O);return{total:V.total,nextStart:V.nextStart,resources:V.resources.map(({created:t,size:D,resource:z})=>({created:new Date(t),size:D,resource:G.resourceFromPath(z)}))}};u.getSiblingOfSameType=function(G,O){if(!G.hasPath())return null;const [X,,V]=N(G.path);return G.portalItem.resourceFromPath(r.join(X,O+V))};u.getSiblingOfSameTypeI=function(G,O){if(!G.hasPath())return null;const [X,,V]=N(G.path);return G.portalItem.resourceFromPath(r.join(X,
O+V))};u.removeAllResources=async function(G,O){await G.load(O);const X=r.join(G.userItemUrl,"removeResources");return G.portal._request(X,{method:"post",query:{deleteAll:!0},signal:c.get(O,"signal")})};u.removeResource=async function(G,O,X){if(!O.hasPath())throw new k("portal-item-resources-remove:invalid-path","Resource does not have a valid path");await G.load(X);const V=r.join(G.userItemUrl,"removeResources");await G.portal._request(V,{method:"post",query:{resource:O.path},signal:c.get(X,"signal")});
O.portalItem=null};u.splitPrefixFileNameAndExtension=N;Object.defineProperty(u,"__esModule",{value:!0})})},"esri/webscene/ApplicationProperties":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/JSONSupport ../webdoc/applicationProperties/Viewing".split(" "),
function(u,c,k,r,J,H,N,S,G,O,X,V,P){var f;k=f=function(p){function e(t){t=p.call(this,t)||this;t.viewing=null;return t}u._inheritsLoose(e,p);e.prototype.clone=function(){return new f({viewing:this.viewing?this.viewing.clone():null})};return e}(V.JSONSupport);c.__decorate([H.property({type:P,json:{write:!0}})],k.prototype,"viewing",void 0);return k=f=c.__decorate([S.subclass("esri.webscene.ApplicationProperties")],k)})},"esri/webdoc/applicationProperties/Viewing":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/lang ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ./Search".split(" "),
function(u,c,k,r,J,H,N,S,G,O,X,V,P,f){var p;k=p=function(e){function t(D){D=e.call(this,D)||this;D.search=null;return D}u._inheritsLoose(t,e);t.prototype.clone=function(){return new p(r.clone({search:this.search}))};return t}(P.JSONSupport);c.__decorate([N.property({type:f,json:{write:!0}})],k.prototype,"search",void 0);return k=p=c.__decorate([G.subclass("esri.webdoc.applicationProperties.Viewing")],k)})},"esri/webdoc/applicationProperties/Search":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/lang ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../core/Collection ../../core/accessorSupport/extensions/serializableProperty/writePolicyUtils ./SearchLayer ./SearchTable".split(" "),
function(u,c,k,r,J,H,N,S,G,O,X,V,P,f,p,e,t,D,z){var C;const B=e.ofType(D),L=e.ofType(z);k=C=function(U){function Y(ja){ja=U.call(this,ja)||this;ja.addressSearchEnabled=!0;ja.enabled=!0;ja.hintText=null;ja.layers=new B;ja.tables=new L;return ja}u._inheritsLoose(Y,U);var ea=Y.prototype;ea.readAddressSearchEnabled=function(ja){return!ja};ea.writeAddressSearchEnabled=function(ja,Ga,Ea){Ga[Ea]=!ja};ea.clone=function(){return new C(r.clone({addressSearchEnabled:this.addressSearchEnabled,enabled:this.enabled,
hintText:this.hintText,layers:this.layers,tables:this.tables}))};return Y}(p.JSONSupport);c.__decorate([N.property({type:Boolean,nonNullable:!0,json:{read:{source:"disablePlaceFinder"},write:{target:"disablePlaceFinder",isRequired:!0},origins:{"web-scene":{read:!1,write:!1}}}})],k.prototype,"addressSearchEnabled",void 0);c.__decorate([G.reader("addressSearchEnabled")],k.prototype,"readAddressSearchEnabled",null);c.__decorate([X.writer("addressSearchEnabled")],k.prototype,"writeAddressSearchEnabled",
null);c.__decorate([N.property({type:Boolean,nonNullable:!0,json:{write:!0,origins:{"web-map":{write:{isRequired:!0}},"web-scene":{default:!0,write:!0}}}})],k.prototype,"enabled",void 0);c.__decorate([N.property({type:String,json:{write:!0}})],k.prototype,"hintText",void 0);c.__decorate([N.property({type:B,json:{write:{overridePolicy:t.writeNonEmptyCollectionPolicy},origins:{"web-scene":{write:{isRequired:!0}}}}})],k.prototype,"layers",void 0);c.__decorate([N.property({type:L,json:{read:!0,write:{overridePolicy:t.writeNonEmptyCollectionPolicy},
origins:{"web-scene":{read:!1,write:!1}}}})],k.prototype,"tables",void 0);return k=C=c.__decorate([O.subclass("esri.webdoc.applicationProperties.Search")],k)})},"esri/core/accessorSupport/extensions/serializableProperty/writePolicyUtils":function(){define(["exports"],function(u){u.writeNonEmptyCollectionPolicy=function(c){return{enabled:!(null==c||!c.length)}};Object.defineProperty(u,"__esModule",{value:!0})})},"esri/webdoc/applicationProperties/SearchLayer":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/lang ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ./SearchLayerField".split(" "),
function(u,c,k,r,J,H,N,S,G,O,X,V,P,f){var p;k=p=function(e){function t(D){D=e.call(this,D)||this;D.field=null;D.id=null;D.subLayer=null;return D}u._inheritsLoose(t,e);t.prototype.clone=function(){return new p(r.clone({field:this.field,id:this.id,subLayer:this.subLayer}))};return t}(P.JSONSupport);c.__decorate([N.property({type:f,json:{write:{isRequired:!0}}})],k.prototype,"field",void 0);c.__decorate([N.property({type:String,json:{write:{isRequired:!0}}})],k.prototype,"id",void 0);c.__decorate([N.property({type:H.Integer,
json:{write:!0}})],k.prototype,"subLayer",void 0);return k=p=c.__decorate([G.subclass("esri.webdoc.applicationProperties.SearchLayer")],k)})},"esri/webdoc/applicationProperties/SearchLayerField":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../layers/support/fieldType".split(" "),
function(u,c,k,r,J,H,N,S,G,O,X,V,P){var f;k=f=function(p){function e(t){t=p.call(this,t)||this;t.exactMatch=!1;t.name=null;t.type=null;return t}u._inheritsLoose(e,p);e.prototype.clone=function(){return new f({exactMatch:this.exactMatch,type:this.type,name:this.name})};return e}(V.JSONSupport);c.__decorate([H.property({type:Boolean,json:{write:!0}})],k.prototype,"exactMatch",void 0);c.__decorate([H.property({type:String,json:{write:!0}})],k.prototype,"name",void 0);c.__decorate([N.enumeration(P.kebabDict)],
k.prototype,"type",void 0);return k=f=c.__decorate([S.subclass("esri.webdoc.applicationProperties.SearchLayerField")],k)})},"esri/webdoc/applicationProperties/SearchTable":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/lang ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ./SearchTableField".split(" "),
function(u,c,k,r,J,H,N,S,G,O,X,V,P,f){var p;k=p=function(e){function t(D){D=e.call(this,D)||this;D.field=null;D.id=null;return D}u._inheritsLoose(t,e);t.prototype.clone=function(){return new p(r.clone({field:this.field,id:this.id}))};return t}(P.JSONSupport);c.__decorate([N.property({type:f,json:{write:{isRequired:!0}}})],k.prototype,"field",void 0);c.__decorate([N.property({type:String,json:{write:{isRequired:!0}}})],k.prototype,"id",void 0);return k=p=c.__decorate([G.subclass("esri.webdoc.applicationProperties.SearchTable")],
k)})},"esri/webdoc/applicationProperties/SearchTableField":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../layers/support/fieldType".split(" "),function(u,
c,k,r,J,H,N,S,G,O,X,V,P){var f;k=f=function(p){function e(t){t=p.call(this,t)||this;t.exactMatch=!1;t.name=null;t.type=null;return t}u._inheritsLoose(e,p);e.prototype.clone=function(){return new f({exactMatch:this.exactMatch,type:this.type,name:this.name})};return e}(V.JSONSupport);c.__decorate([H.property({type:Boolean,json:{write:!0}})],k.prototype,"exactMatch",void 0);c.__decorate([H.property({type:String,json:{write:!0}})],k.prototype,"name",void 0);c.__decorate([N.enumeration(P.kebabDict)],k.prototype,
"type",void 0);return k=f=c.__decorate([S.subclass("esri.webdoc.applicationProperties.SearchTableField")],k)})},"esri/webscene/Environment":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/lang ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/JSONSupport ./Lighting ./background/utils".split(" "),
function(u,c,k,r,J,H,N,S,G,O,X,V,P,f,p){var e;k=(t,D,z)=>({enabled:!z||!z.isPresentation});P=e=function(t){function D(C){C=t.call(this,C)||this;C.lighting=new f;C.background=null;C.atmosphereEnabled=!0;C.starsEnabled=!0;return C}u._inheritsLoose(D,t);var z=D.prototype;z.clone=function(){return new e(this.cloneConstructProperties())};z.cloneConstructProperties=function(){return{lighting:f.prototype.clone.call(this.lighting),background:r.clone(this.background),atmosphereEnabled:this.atmosphereEnabled,
starsEnabled:this.starsEnabled}};return D}(P.JSONSupport);c.__decorate([N.property({type:f,json:{write:!0}})],P.prototype,"lighting",void 0);c.__decorate([N.property(p.backgroundProperty)],P.prototype,"background",void 0);c.__decorate([N.property({type:Boolean,nonNullable:!0,json:{write:{overridePolicy:k}}})],P.prototype,"atmosphereEnabled",void 0);c.__decorate([N.property({type:Boolean,nonNullable:!0,json:{write:{overridePolicy:k}}})],P.prototype,"starsEnabled",void 0);return P=e=c.__decorate([G.subclass("esri.webscene.Environment")],
P)})},"esri/webscene/Lighting":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/JSONSupport".split(" "),function(u,c,k,r,J,H,N,S,G,O,X,V,P,f){var p;k=p=
function(e){function t(z){z=e.call(this,z)||this;z.date=null;z.directShadowsEnabled=!1;z.displayUTCOffset=null;return z}u._inheritsLoose(t,e);var D=t.prototype;D.readDate=function(z,C){return null!=C.datetime&&new Date(C.datetime)||null};D.writeDate=function(z,C,B){C[B]=z.getTime()};D.readDirectShadowsEnabled=function(z,C){return!!C.directShadows};D.writedirectShadowsEnabled=function(z,C,B){z&&(C[B]=z)};D.writeDisplayUTCOffset=function(z,C){null!=z&&(C.displayUTCOffset=z)};D.clone=function(){return new p(this.cloneConstructProperties())};
D.cloneConstructProperties=function(){const z={directShadowsEnabled:this.directShadowsEnabled,displayUTCOffset:null!=this.displayUTCOffset?this.displayUTCOffset:null};null!=this.date&&(z.date=new Date(this.date.getTime()));return z};return t}(f.JSONSupport);c.__decorate([H.property({type:Date,json:{type:Number,write:{target:"datetime"}}})],k.prototype,"date",void 0);c.__decorate([S.reader("date",["datetime"])],k.prototype,"readDate",null);c.__decorate([O.writer("date")],k.prototype,"writeDate",null);
c.__decorate([H.property({type:Boolean,json:{default:!1,write:{target:"directShadows"}}})],k.prototype,"directShadowsEnabled",void 0);c.__decorate([S.reader("directShadowsEnabled",["directShadows"])],k.prototype,"readDirectShadowsEnabled",null);c.__decorate([O.writer("directShadowsEnabled")],k.prototype,"writedirectShadowsEnabled",null);c.__decorate([H.property({type:Number,json:{write:!0}})],k.prototype,"displayUTCOffset",void 0);c.__decorate([O.writer("displayUTCOffset")],k.prototype,"writeDisplayUTCOffset",
null);return k=p=c.__decorate([G.subclass("esri.webscene.Lighting")],k)})},"esri/webscene/background/utils":function(){define(["exports","./Background","./ColorBackground"],function(u,c,k){c={base:c,key:"type",typeMap:{color:k}};c={types:c,json:{read:function(r){return(J,H,N)=>{if(!J)return J;for(const S in r.typeMap)if(J.type===S)return H=new r.typeMap[S],H.read(J,N),H}}(c),write:{overridePolicy:(r,J,H)=>({enabled:!H||!H.isPresentation})}}};u.backgroundProperty=c;Object.defineProperty(u,"__esModule",
{value:!0})})},"esri/webscene/background/Background":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport".split(" "),function(u,c,k,r,J,H,N,S,G,O,X,V){k=function(P){function f(p){return P.call(this,
p)||this}u._inheritsLoose(f,P);f.prototype.clone=function(){};return f}(V.JSONSupport);c.__decorate([H.property({readOnly:!0,json:{read:!1}})],k.prototype,"type",void 0);return k=c.__decorate([S.subclass("esri.webscene.background.Background")],k)})},"esri/webscene/background/ColorBackground":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../Color ../../symbols/support/materialUtils ./Background".split(" "),
function(u,c,k,r,J,H,N,S,G,O,X,V,P,f){var p;k={...P.colorAndTransparencyProperty,nonNullable:!0};f=p=function(e){function t(z){z=e.call(this,z)||this;z.type="color";z.color=new V([0,0,0,1]);return z}u._inheritsLoose(t,e);var D=t.prototype;D.clone=function(){return new p(this.cloneProperties())};D.cloneProperties=function(){return{color:this.color.clone()}};return t}(f);c.__decorate([N.enumeration({color:"color"},{readOnly:!0})],f.prototype,"type",void 0);c.__decorate([H.property(k)],f.prototype,"color",
void 0);return f=p=c.__decorate([S.subclass("esri.webscene.background.ColorBackground")],f)})},"esri/webscene/InitialViewProperties":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/JSONSupport ../geometry/SpatialReference ../Viewpoint ./Environment".split(" "),
function(u,c,k,r,J,H,N,S,G,O,X,V,P,f,p){var e;k=e=function(t){function D(z){z=t.call(this,z)||this;z.environment=new p;z.spatialReference=null;z.viewpoint=null;return z}u._inheritsLoose(D,t);D.prototype.clone=function(){return new e({environment:this.environment.clone(),spatialReference:this.spatialReference?this.spatialReference.clone():null,viewingMode:this.viewingMode,viewpoint:this.viewpoint?this.viewpoint.clone():null})};u._createClass(D,[{key:"viewingMode",set:function(z){this._set("viewingMode",
z)}}]);return D}(V.JSONSupport);c.__decorate([H.property({type:p,json:{write:{isRequired:!0}}})],k.prototype,"environment",void 0);c.__decorate([H.property({type:P})],k.prototype,"spatialReference",void 0);c.__decorate([H.property({type:["local","global"]})],k.prototype,"viewingMode",null);c.__decorate([H.property({type:f,json:{write:{isRequired:!0}}})],k.prototype,"viewpoint",void 0);return k=e=c.__decorate([S.subclass("esri.webscene.InitialViewProperties")],k)})},"esri/webscene/Presentation":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/JSONSupport ../core/Collection ../core/collectionUtils ./Slide".split(" "),
function(u,c,k,r,J,H,N,S,G,O,X,V,P,f,p){const e=P.ofType(p);k=function(t){function D(C){C=t.call(this,C)||this;C.slides=new e;return C}u._inheritsLoose(D,t);var z=D.prototype;z.destroy=function(){this.slides.forEach(C=>C.destroy());this.slides.removeAll()};z.clone=function(){return new this.constructor({slides:this.slides.clone()})};u._createClass(D,[{key:"slides",set:function(C){C&&(C=C.filter(B=>!!B.viewpoint));this._set("slides",f.referenceSetter(C,this._get("slides"),e))}}]);return D}(V.JSONSupport);
c.__decorate([J.property({type:e,nonNullable:!0,json:{write:!0}}),H.cast(f.castForReferenceSetter)],k.prototype,"slides",null);return k=c.__decorate([S.subclass("esri.webscene.Presentation")],k)})},"esri/webscene/Slide":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/maybe ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/promiseUtils ../core/JSONSupport ../core/Collection ../core/collectionUtils ../core/asyncUtils ../Basemap ../chunks/vec3f64 ../chunks/vec3 ../views/3d/support/mathUtils ../support/basemapUtils ../layers/Layer ../Viewpoint ../webdoc/support/Thumbnail ./Lighting ../layers/mixins/OperationalLayer ../views/support/Scheduler ./support/Description ./support/SlideEnvironment ./support/SlideGround ./support/SlideVisibleLayer ./support/Title".split(" "),
function(u,c,k,r,J,H,N,S,G,O,X,V,P,f,p,e,t,D,z,C,B,L,U,Y,ea,ja,Ga,Ea,Sa,Ha,Oa,Na,Ma,Fa){function Ja(la){if("building-scene"===la.type||"map-image"===la.type)return la.allSublayers.toArray()}function La(la){if(la=Ja(la))return la.filter(ma=>ma.visible).map(ma=>ma.id)}function Qa(la,ma){la=ma-la;43200<la&&(la-=86400);-43200>la&&(la+=86400);return la}let Aa=0;const Ka=e.ofType(Ma["default"]),Ra=J.getLogger("esri.webscene.Slide");k=function(la){function ma(K){K=la.call(this,K)||this;K.id=Date.now().toString(16)+
"-slide-"+Aa++;K.title=new Fa;K.description=new Ha;K.thumbnail=new ja;K.viewpoint=null;K.basemap=null;K.ground=null;K.environment=new Oa.SlideEnvironment;K.visibleLayers=new Ka;return K}u._inheritsLoose(ma,la);var oa=ma.prototype;oa.destroy=function(){this.visibleLayers.removeAll();this.basemap=null;this.thumbnail&&this.thumbnail.destroy();this.thumbnail=this.title=this.description=null};oa.castTitle=function(K){return"string"===typeof K?new Fa({text:K}):H.ensureType(Fa,K)};oa.castDescription=function(K){return"string"===
typeof K?new Ha({text:K}):H.ensureType(Ha,K)};oa.castThumbnail=function(K){return"string"===typeof K?new ja({url:K}):H.ensureType(ja,K)};oa.castBasemap=function(K){return U.ensureType(K)};oa.castVisibleLayers=function(K){return K&&"function"===typeof K.map?K.map(aa=>{if("string"===typeof aa)return{id:aa};if(aa instanceof Y){const ba=La(aa);return{id:aa.id,sublayerIds:ba}}if(aa.id)return{id:aa.id,sublayerIds:aa.sublayerIds};Ra.warn('Invalid visible layer, expected { id }, Layer or "id"');return aa}):
null};oa.clone=function(){return new this.constructor({id:this.id,title:this.title.clone(),thumbnail:this.thumbnail.clone(),description:this.description&&this.description.clone()||null,viewpoint:this.viewpoint&&this.viewpoint.clone()||null,basemap:this.basemap&&this.basemap.clone()||null,ground:this.ground&&this.ground.clone()||null,visibleLayers:this.visibleLayers.clone(),environment:this.environment&&this.environment.clone()||null})};oa._updateVisibleLayersFrom=function(K){const aa=[];return f.eachAlways(this._getLayers(K.map).map(ba=>
K.whenLayerView(ba).then(a=>{if(a.visible){const b=La(ba);aa.push(new Ma["default"]({id:a.layer.id,sublayerIds:b}))}})).toArray()).then(()=>{this.visibleLayers.removeAll();this.visibleLayers.addMany(aa)})};oa.updateFrom=function(K,aa){aa={screenshot:{format:"png",quality:80,width:120,height:75,disableDecorations:!0,...aa&&aa.screenshot}};return K.when(()=>{this.viewpoint=K.viewpoint.clone();this.environment.lighting=Ga.prototype.clone.apply(K.environment.lighting);this.basemap=K.map.basemap&&K.map.basemap.clone()||
null;this.ground=K.map.ground?Na.fromGround(K.map.ground):null;return this._updateVisibleLayersFrom(K)}).then(()=>K.takeScreenshot(aa.screenshot)).then(ba=>{this.thumbnail=new ja({url:ba.dataUrl});return this})};oa.applyTo=async function(K,aa){r.isSome(this._applyToController)&&this._applyToController.abort();let ba=f.createAbortController();this._applyToController=ba;const a=f.onAbortOrThrow(aa,()=>ba.abort()),b=K.resourceController.scheduler.registerTask(Sa.Task.SLIDE,q=>b.processQueue(q),()=>!1),
l={animate:!0,...aa,signal:this._applyToController.signal};aa=await D.result(K.addUpdatingPromise((async()=>{await b.schedule(()=>this._applyBasemap(K,l),l.signal);b.schedule(()=>this._applyLayerVisibility(K),l.signal);b.schedule(()=>this._applyGround(K),l.signal);await b.schedule(()=>this._applyViewpoint(K,l),l.signal)})()));b.remove();this._applyToController===ba&&(this._applyToController=null);ba=null;null==a?void 0:a.remove();if(!1===aa.ok)throw aa.error;return this};oa._applyBasemap=async function(K,
aa){if(this.basemap){try{await this.basemap.load(aa)}catch(ba){if(f.isAbortError(ba))throw ba;}K.map.basemap=U.clonePreservingTiledLayers(this.basemap,K.map.basemap)}};oa._applyGround=function(K){this.ground&&(K.map.ground=this.ground.cloneAndApplyTo(K.map.ground))};oa._getLayers=function(K){const aa=new e;this._collectLayers(K,aa);this._collectLayers(K.ground,aa);return aa};oa._collectLayers=function(K,aa){K.layers.forEach(ba=>{Ea.isOperationalLayer(ba)&&(aa.add(ba),ba.layers&&this._collectLayers(ba,
aa))})};oa._applyLayerVisibility=function(K){this.visibleLayers&&this._getLayers(K.map).forEach(aa=>{var ba=this.visibleLayers.find(b=>b.id===aa.id);aa.visible=null!=ba;const a=ba&&ba.sublayerIds;ba=Ja(aa);a&&ba&&ba.forEach(b=>b.visible=0<=a.indexOf(b.id))})};oa._applyViewpoint=async function(K,aa){if(this.viewpoint&&!aa.ignoreViewpoint){r.isSome(this.viewpoint.camera)&&(this.viewpoint.camera.fov=K.camera.fov);if(aa.animate&&this.get("environment.lighting.date")){await this._animateToLighting(K,aa);
return}aa.animate&&(K.environment.applyLighting(this.environment.lighting.clone()),await K.goTo(this.viewpoint,aa));K.viewpoint=this.viewpoint}K.environment.applyLighting(this.environment.lighting.clone())};oa._animateToLighting=async function(K,aa){let ba=null;"global"===K.viewingMode&&(ba=this._animateLightingWithCamera(K));K.environment.lighting.cameraTrackingEnabled=!1;K.environment.lighting.directShadowsEnabled=this.environment.lighting.directShadowsEnabled;null!=this.environment.lighting.displayUTCOffset&&
(K.environment.lighting.displayUTCOffset=this.environment.lighting.displayUTCOffset);return K.goTo(this.viewpoint,aa).then(()=>{K.environment.applyLighting(this.environment.lighting.clone());ba&&ba.remove();K.environment.lighting.cameraTrackingEnabled=!0},a=>{ba&&ba.remove();K.environment.lighting.cameraTrackingEnabled=!0;throw a;})};oa._getTime=function(K){const aa=K.getTime();K=3600*K.getUTCHours()+60*K.getUTCMinutes()+K.getUTCSeconds();return[aa,K]};oa._setTime=function(K,aa,ba){K.setTime(aa);
K.setUTCHours(ba/3600);K.setUTCMinutes(ba%3600/60);K.setUTCSeconds(ba%3600%60);return K};oa._animateLightingWithCamera=function(K){const [aa,ba]=this._getTime(new Date(K.environment.lighting.date.toString())),[a,b]=this._getTime(this.environment.lighting.date),l=Qa(ba,b),q=K.renderCoordsHelper,y=C.create();q.toRenderCoords(K.camera.position,y);const A=C.create(),F=C.create();r.isSome(this.viewpoint.camera)&&q.toRenderCoords(this.viewpoint.camera.position,A);const w=new Date;return K.watch("camera",
d=>{q.toRenderCoords(d.position,F);var g=B.squaredDistance(y,F);const x=B.squaredDistance(A,F);d=0;0!==g+x&&(d=g/(g+x));g=aa+(a-aa)*d;d=L.moduloPositive(ba+l*d,86400);K.environment.lighting.date=this._setTime(w,g,d)})};ma.createFrom=function(K,aa){return(new this).updateFrom(K,aa)};u._createClass(ma,[{key:"visibleLayers",set:function(K){this._set("visibleLayers",t.referenceSetter(K,this._get("visibleLayers"),Ka))}}]);return ma}(p.JSONSupport);c.__decorate([N.property({type:String,json:{write:{isRequired:!0}}})],
k.prototype,"id",void 0);c.__decorate([N.property({type:Fa,json:{default:()=>new Fa({text:""}),write:{isRequired:!0}}})],k.prototype,"title",void 0);c.__decorate([S.cast("title")],k.prototype,"castTitle",null);c.__decorate([N.property({type:Ha,json:{write:{overridePolicy(la){return{enabled:!(!la||!la.text)}}}}})],k.prototype,"description",void 0);c.__decorate([S.cast("description")],k.prototype,"castDescription",null);c.__decorate([N.property({type:ja,json:{default:()=>new ja({url:""}),write:{isRequired:!0}}})],
k.prototype,"thumbnail",void 0);c.__decorate([S.cast("thumbnail")],k.prototype,"castThumbnail",null);c.__decorate([N.property({type:ea,nonNullable:!0,json:{write:{isRequired:!0}}})],k.prototype,"viewpoint",void 0);c.__decorate([N.property({type:z,json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],k.prototype,"basemap",void 0);c.__decorate([S.cast("basemap")],k.prototype,"castBasemap",null);c.__decorate([N.property({type:Na,json:{write:!0}})],k.prototype,"ground",void 0);c.__decorate([N.property({type:Ka,
json:{write:{isRequired:!0}}})],k.prototype,"visibleLayers",null);c.__decorate([S.cast("visibleLayers")],k.prototype,"castVisibleLayers",null);c.__decorate([N.property({type:Oa.SlideEnvironment,json:{write:!0}})],k.prototype,"environment",void 0);return k=c.__decorate([O.subclass("esri.webscene.Slide")],k)})},"esri/webdoc/support/Thumbnail":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport".split(" "),
function(u,c,k,r,J,H,N,S,G,O,X,V){var P;k=P=function(f){function p(){var t=f.apply(this,arguments)||this;t.url="";return t}u._inheritsLoose(p,f);var e=p.prototype;e.destroy=function(){this.url=""};e.clone=function(){return new P({url:this.url})};return p}(V.JSONSupport);c.__decorate([H.property({type:String,json:{write:{isRequired:!0}}})],k.prototype,"url",void 0);return k=P=c.__decorate([S.subclass("esri.webdoc.support.Thumbnail")],k)})},"esri/webscene/support/Description":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport".split(" "),
function(u,c,k,r,J,H,N,S,G,O,X,V){var P;k=P=function(f){function p(){var e=f.apply(this,arguments)||this;e.text="";return e}u._inheritsLoose(p,f);p.prototype.clone=function(){return new P({text:this.text})};return p}(V.JSONSupport);c.__decorate([H.property({type:String,json:{write:!0}})],k.prototype,"text",void 0);return k=P=c.__decorate([S.subclass("esri.webscene.support.Description")],k)})},"esri/webscene/support/SlideEnvironment":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../Lighting".split(" "),
function(u,c,k,r,J,H,N,S,G,O,X,V,P,f){var p;u.SlideEnvironment=p=function(e){function t(){var D=e.apply(this,arguments)||this;D.lighting=new f;return D}c._inheritsLoose(t,e);t.prototype.clone=function(){return new p({lighting:f.prototype.clone.call(this.lighting)})};return t}(P.JSONSupport);k.__decorate([N.property({type:f,json:{write:!0}})],u.SlideEnvironment.prototype,"lighting",void 0);u.SlideEnvironment=p=k.__decorate([G.subclass("esri.webscene.Environment")],u.SlideEnvironment);Object.defineProperty(u,
"__esModule",{value:!0})})},"esri/webscene/support/SlideGround":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport ../../webdoc/support/opacityUtils ../../Ground".split(" "),function(u,c,k,
r,J,H,N,S,G,O,X,V,P,f){var p;k=p=function(e){function t(){var z=e.apply(this,arguments)||this;z.opacity=null;return z}u._inheritsLoose(t,e);var D=t.prototype;D.clone=function(){return new p({opacity:this.opacity})};D.cloneAndApplyTo=function(z){if(null==this.opacity)return z;z=null!=z?z.clone():new f;z.opacity=this.opacity;return z};t.fromGround=function(z){return new p({opacity:z.opacity})};return t}(V.JSONSupport);c.__decorate([H.property({type:Number,json:{type:J.Integer,read:{reader:P.transparencyToOpacity,
source:"transparency"},write:{writer:(e,t)=>{t.transparency=P.opacityToTransparency(e)},target:"transparency"}}})],k.prototype,"opacity",void 0);return k=p=c.__decorate([S.subclass("esri.webscene.support.SlideGround")],k)})},"esri/webscene/support/SlideVisibleLayer":function(){define("exports ../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/lang ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport".split(" "),
function(u,c,k,r,J,H,N,S,G,O,X,V,P,f){var p;u.SlideVisibleLayer=p=function(e){function t(D){D=e.call(this,D)||this;D.id="";D.sublayerIds=null;return D}c._inheritsLoose(t,e);t.prototype.clone=function(){return new p({id:this.id,sublayerIds:J.clone(this.sublayerIds)})};return t}(f.JSONSupport);k.__decorate([S.property({type:String,json:{write:!0}})],u.SlideVisibleLayer.prototype,"id",void 0);k.__decorate([S.property({type:[N.Integer],json:{read:{source:"subLayerIds"},write:{target:"subLayerIds"}}})],
u.SlideVisibleLayer.prototype,"sublayerIds",void 0);u.SlideVisibleLayer=p=k.__decorate([O.subclass("esri.webscene.support.SlideVisibleLayer")],u.SlideVisibleLayer);u.default=u.SlideVisibleLayer;Object.defineProperty(u,"__esModule",{value:!0})})},"esri/webscene/support/Title":function(){define("../../chunks/_rollupPluginBabelHelpers ../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/property ../../core/jsonMap ../../core/accessorSupport/decorators/subclass ../../core/urlUtils ../../core/uuid ../../portal/support/resourceExtension ../../core/JSONSupport".split(" "),
function(u,c,k,r,J,H,N,S,G,O,X,V){var P;k=P=function(f){function p(){var e=f.apply(this,arguments)||this;e.text="";return e}u._inheritsLoose(p,f);p.prototype.clone=function(){return new P({text:this.text})};return p}(V.JSONSupport);c.__decorate([H.property({type:String,json:{write:{isRequired:!0}}})],k.prototype,"text",void 0);return k=P=c.__decorate([S.subclass("esri.webscene.support.Title")],k)})},"esri/webscene/TransportationNetwork":function(){define("../chunks/_rollupPluginBabelHelpers ../chunks/tslib.es6 ../core/has ../core/Logger ../core/accessorSupport/ensureType ../core/accessorSupport/decorators/property ../core/jsonMap ../core/accessorSupport/decorators/subclass ../core/urlUtils ../core/uuid ../portal/support/resourceExtension ../core/JSONSupport".split(" "),
function(u,c,k,r,J,H,N,S,G,O,X,V){var P;k=P=function(f){function p(e){return f.call(this,e)||this}u._inheritsLoose(p,f);p.prototype.clone=function(){return new P({name:this.name,path:this.path,title:this.title})};return p}(V.JSONSupport);c.__decorate([H.property({type:String,json:{write:!0}})],k.prototype,"name",void 0);c.__decorate([H.property({type:String,json:{write:!0}})],k.prototype,"path",void 0);c.__decorate([H.property({type:String,json:{write:!0}})],k.prototype,"title",void 0);return k=P=
c.__decorate([S.subclass("esri.webscene.TransportationNetwork")],k)})},"esri/webscene/Version":function(){define(["exports","../chunks/_rollupPluginBabelHelpers","../core/Version"],function(u,c,k){k=function(r){function J(H,N){return r.call(this,H,N,"webscene")||this}c._inheritsLoose(J,r);c._createClass(J,[{key:"supportsGround",get:function(){return this.since(1,8)}},{key:"supportsVisibleElevationLayersInSlides",get:function(){return this.lessThan(1,8)}}]);return J}(k.Version);u.Version=k;u.default=
k;Object.defineProperty(u,"__esModule",{value:!0})})},"esri/core/Version":function(){define(["exports","./Error"],function(u,c){let k=function(){function r(H,N,S=""){this.major=H;this.minor=N;this._context=S}var J=r.prototype;J.lessThan=function(H,N){return this.major<H||H===this.major&&this.minor<N};J.since=function(H,N){return!this.lessThan(H,N)};J.validate=function(H){if(this.major!==H.major)throw new c((this._context&&this._context+":")+"unsupported-version",`Required major ${this._context&&this._context+
" "}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:H});};J.clone=function(){return new r(this.major,this.minor,this._context)};r.parse=function(H,N=""){const [S,G]=H.split(".");var O=/^\s*\d+\s*$/;if(!S||!S.match||!S.match(O))throw new c((N&&N+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:H});if(!G||!G.match||!G.match(O))throw new c((N&&N+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",
{version:H});H=parseInt(S,10);O=parseInt(G,10);return new r(H,O,N)};return r}();u.Version=k;Object.defineProperty(u,"__esModule",{value:!0})})},"*noref":1}});
define("require ./chunks/_rollupPluginBabelHelpers ./chunks/tslib.es6 ./core/has ./core/lang ./core/maybe ./core/Logger ./core/accessorSupport/ensureType ./core/accessorSupport/decorators/property ./core/jsonMap ./core/accessorSupport/decorators/reader ./core/accessorSupport/decorators/subclass ./core/accessorSupport/decorators/writer ./core/Error ./core/urlUtils ./core/uuid ./portal/support/resourceExtension ./core/promiseUtils ./core/accessorSupport/read ./geometry/support/spatialReferenceUtils ./geometry/SpatialReference ./geometry/Extent ./geometry/support/jsonUtils ./core/Collection ./kernel ./core/Promise ./core/Loadable ./portal/Portal ./core/loadAll ./portal/PortalItem ./core/Handles ./Map ./Viewpoint ./core/MultiOriginJSONSupport ./core/accessorSupport/originUtils ./support/MapFloorInfo ./webdoc/support/thumbnailUtils ./geometry/HeightModelInfo ./geometry/projection ./geometry/support/heightModelInfoUtils ./support/webSceneUtils ./views/support/spatialReferenceSupport ./webdoc/support/saveUtils ./webscene/ApplicationProperties ./webscene/Environment ./webscene/InitialViewProperties ./webscene/Presentation ./webscene/TransportationNetwork ./webscene/Version".split(" "),function(u,
c,k,r,J,H,N,S,G,O,X,V,P,f,p,e,t,D,z,C,B,L,U,Y,ea,ja,Ga,Ea,Sa,Ha,Oa,Na,Ma,Fa,Ja,La,Qa,Aa,Ka,Ra,la,ma,oa,K,aa,ba,a,b,l){const q=N.getLogger("esri.WebScene"),y=new l.Version(1,23);r=function(A){function F(d){var g=A.call(this,d)||this;g._handles=new Oa;g.applicationProperties=null;g.clippingArea=null;g.clippingEnabled=!1;g.floorInfo=null;g.heightModelInfo=null;g.sourceVersion=null;g.supportsHeightModelInfo=!0;g.transportationNetworks=null;g.presentation=new a;g.initialViewProperties=new ba;g.portalItem=
null;g.resourceInfo=null;g.debouncedSaveOperations=D.debounce(async(x,E,I)=>{switch(x){case 0:return g._saveImpl(E);case 1:return g._saveAsImpl(I,E)}});g.resourceReferences={portalItem:null,paths:[]};g.authoringApp=null;g.authoringAppVersion=null;g._isAuthoringAppSetByUser=!1;g._isAuthoringAppVersionSetByUser=!1;return g}c._inheritsLoose(F,A);var w=F.prototype;w.initialize=function(){this.when().catch(d=>{q.error("#load()","Failed to load web scene",d)});if(this.resourceInfo){let d;try{d=this._validateJSON(this.resourceInfo)}catch(g){this.addResolvingPromise(Promise.reject(g));
return}this.read(d);this.addResolvingPromise(this._validateSpatialReference());this.addResolvingPromise(this._validateHeightModelInfo())}this._handles.add(this.allLayers.on("change",()=>this._scheduleLayersIdGC()))};w.destroy=function(){this._unscheduleLayersIdGC();this._handles.destroy();this.presentation&&this.presentation.destroy();const d=this.portalItem;this.portalItem=null;null==d?void 0:d.destroy()};w.writeClippingArea=function(d,g){g.clippingArea||(g.clippingArea={});g.clippingArea.geometry=
d.toJSON()};w.readClippingEnabled=function(d,g){return g.clippingArea?!!g.clippingArea.clip:!1};w.writeClippingEnabled=function(d,g){this.clippingArea&&(g.clippingArea||(g.clippingArea={}),g.clippingArea.clip=d)};w.writeLayers=function(d,g,x,E){const I={...E,layerContainerType:"operational-layers"};d=d.map(M=>this.verifyWriteLayer(M,E)?M.write(null,I):null).filter(M=>!!M);g[x]=d.toArray()};w.verifyWriteLayer=function(d,g){return"write"in d?!0:(g&&g.messages&&g.messages.push(new f("layer:unsupported",
`Layers (${d.title}, ${d.id}) of type '${d.declaredClass}' cannot be persisted in web scenes`,{layer:d})),!1)};w.readSourceVersion=function(d,g){const [x,E]=g.version.split(".");return new l.Version(parseInt(x,10),parseInt(E,10))};w.writeSourceVersion=function(d,g,x){g[x]=`${y.major}.${y.minor}`};w.writeAuthoringApp=function(d,g){g.authoringApp=d&&this._isAuthoringAppSetByUser?d:"ArcGIS API for JavaScript"};w.writeAuthoringAppVersion=function(d,g){g.authoringAppVersion=d&&this._isAuthoringAppVersionSetByUser?
d:ea.version};w.writeGround=function(d,g,x,E){g[x]=d?d.write(null,E):{transparency:0,layers:[]}};w.readInitialViewProperties=function(d,g){d={};g.initialState&&g.initialState.environment&&(d.environment=aa.fromJSON(g.initialState.environment));d.spatialReference=g.spatialReference?B.fromJSON(g.spatialReference):B.WebMercator;d.viewingMode=g.viewingMode||"global";g.initialState&&g.initialState.viewpoint&&(d.viewpoint=Ma.fromJSON(g.initialState.viewpoint));return new ba(d)};w.load=function(d){this.addResolvingPromise(this._loadFromSource());
return Promise.resolve(this)};w.loadAll=function(){return Sa.loadAll(this,d=>{const g=this.presentation&&this.presentation.slides;d(this.ground,this.basemap,this.layers,g&&g.map(x=>x.basemap))})};w.read=function(d,g){g={...g,origin:"web-scene"};const x=this._isAuthoringAppVersionSetByUser,E=this._isAuthoringAppSetByUser;z.readLoadable(this,d,I=>A.prototype.read.call(this,d,I),g);E||(this._isAuthoringAppSetByUser=!1);x||(this._isAuthoringAppVersionSetByUser=!1);if(d.baseMap&&Array.isArray(d.baseMap.elevationLayers)&&
this.sourceVersion.supportsVisibleElevationLayersInSlides){g=d.baseMap.elevationLayers.map(W=>({id:W.id}));const I=this.presentation.slides,M=(W,Z)=>W.visibleLayers.some(pa=>pa.id===Z),R=g.filter(W=>!I.some(Z=>M(Z,W.id)));I.forEach(W=>{W.visibleLayers.addMany(R)})}};w._writeBasemapElevationLayers=function(d){const g=d.ground&&d.ground.layers;!d.baseMap&&g&&g.length&&(d.baseMap={title:"Basemap",baseMapLayers:[]});d.baseMap&&(d.baseMap.elevationLayers=J.clone(g))};w.write=function(d,g){var x;if("loaded"!==
this.loadStatus)throw g=new f("webscene:not-loaded","Web scene must be loaded before it can be serialized"),q.error("#toJSON()","Web scene must be loaded before it can be serialized",this.loadError||this.loadStatus),g;this._runLayersIdGC();var E=!(null!=(x=g)&&x.messages);g={messages:[],...g,origin:"web-scene"};d=A.prototype.write.call(this,d,g);if(E&&(g=g.messages.filter(I=>"web-document-write:property-required"===I.name),g.length))throw E=new f("web-document:property-required","One or more properties that are required in the webscene JSON are missing, see details for the specific errors",
{errors:g}),q.error("#toJSON()","One or more properties that are required in the webscene JSON are missing",g),E;this._writeBasemapElevationLayers(d);return d};w.save=async function(d){return this.debouncedSaveOperations(0,d)};w._saveImpl=async function(d){this.portalItem||(q.error("save(): requires the .portalItem property to be set"),await Promise.reject(new f("webscene:portal-item-not-set","Portal item to save to has not been set on the WebScene")));"Web Scene"!==this.portalItem.type&&await Promise.reject(new f("webscene:portal-item-wrong-type",
'Portal item needs to have type "Web Scene"'));const g=this._updateFromPromise;await this._ensureLoadBeforeSave();const x=this._enableVerifyItemRelativeUrls({origin:"web-scene",url:this.portalItem.itemUrl&&p.urlToObject(this.portalItem.itemUrl),messages:[],portal:this.portalItem.portal||Ea.getDefault(),portalItem:this.portalItem,writtenProperties:[],blockedRelativeUrls:[],resources:{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}}),E=this.write(null,x);await Promise.all(x.resources.pendingOperations);
await this._verifySave(E,x,d);this._updateTypeKeywords(this.portalItem);await this.portalItem.update({data:E});await oa.saveResources(this.resourceReferences,x,null);Ja.updateOrigins(x);g&&await g;await this._saveThumbnail();return this.portalItem};w.saveAs=async function(d,g){return this.debouncedSaveOperations(1,g,d)};w._saveAsImpl=async function(d,g){d=Ha.from(d);d||(q.error("saveAs(portalItem): requires a portal item parameter"),await Promise.reject(new f("webscene:portal-item-required","saveAs requires a portal item to save to")));
d.id&&(d=d.clone(),d.id=null);const x=d.portal||Ea.getDefault();await this._ensureLoadBeforeSave();d.type="Web Scene";d.portal=x;const E=this._enableVerifyItemRelativeUrls({origin:"web-scene",url:null,messages:[],portal:x,portalItem:d,writtenProperties:[],blockedRelativeUrls:[],resources:{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}}),I=this.write(null,E);await Promise.all(E.resources.pendingOperations);await this._verifySaveAs(I,E,g);const M=this.thumbnailUrl,R=!this._isOverridden("thumbnailUrl");
this._updateTypeKeywords(d);await x._signIn();await x.user.addItem({item:d,folder:g&&g.folder,data:I});await oa.saveResources(this.resourceReferences,E,null);this.portalItem=d;Fa.MultiOriginJSONSupport.prototype.read.call(this,{version:I.version,authoringApp:I.authoringApp,authoringAppVersion:I.authoringAppVersion},{name:"web-scene",ignoreDefaults:!0,url:d.itemUrl&&p.urlToObject(d.itemUrl)});Ja.updateOrigins(E);M&&(this.thumbnailUrl=R?p.addQueryParameter(M,"w","8192"):M);E.portalItem=d;await this._saveThumbnail();
return d};w._saveThumbnail=async function(){this._isOverridden("thumbnailUrl")&&(await this.portalItem.updateThumbnail({thumbnail:this.thumbnailUrl}),this._clearOverride("thumbnailUrl"),this.clear("thumbnailUrl","user"))};w._verifySave=function(d,g,x,E=!1){if(!C.isEarth(this.spatialReference))return Promise.reject(new f("webscene:unsupported-spatial-reference","Webscenes using spatial reference systems from Mars or Moon can not be saved currently."));let I=g.messages.filter(R=>"error"===R.type).map(R=>
new f(R.name,R.message,R.details));g.blockedRelativeUrls&&(I=I.concat(g.blockedRelativeUrls.map(R=>new f("url:unsupported",`Relative url '${R}' is not supported in Web Scene`))));x&&x.ignoreUnsupported&&(I=I.filter(R=>"layer:unsupported"!==R.name&&"symbol:unsupported"!==R.name&&"symbol-layer:unsupported"!==R.name&&"property:unsupported"!==R.name&&"url:unsupported"!==R.name&&"scenemodification:unsupported"!==R.name));null!=x&&x.requiredPropertyChecksDisabled&&(I=I.filter(R=>"web-document-write:property-required"!==
R.name));const M=x&&x.strictSchemaValidationEnabled;return(M?(new Promise(function(R,W){u(["./webscene/support/schemaValidator"],R,W)})).then(R=>{R=R.validate(d);if(0<R.length){const W=`webscene did not validate:\n${R.join("\n")}`;q.error(`${E?"saveAs":"save"}(): ${W}`)}return R.map(W=>new f("webscene:schema-validation",W))}).then(R=>{if(M&&0<R.length)throw la.createSchemaValidationError(R.concat(I));return I}):Promise.resolve(I)).then(R=>{if(0<R.length)return Promise.reject(new f("webscene:save",
"Failed to save webscene due to unsupported or invalid content. See 'details.errors' for more detailed information",{errors:R}))})};w._verifySaveAs=function(d,g,x){return this.canSaveAs(g)?Promise.reject(la.createCopyError()):this._verifySave(d,g,x,!0)};w.verifySaveAs=function(d){const g=this._enableVerifyItemRelativeUrls({origin:"web-scene",messages:[]}),x=this.write(null,g);return this._verifySaveAs(x,g,d)};w.canSaveAs=function(d){d||(d=this._enableVerifyItemRelativeUrls({origin:"web-scene",messages:[]}),
this.write(null,d));return d.verifyItemRelativeUrls&&0<d.verifyItemRelativeUrls.writtenUrls.length};w.updateFrom=async function(d,g={}){this._updateFromPromise=d=this._updateFromInternal(d,g);await d;this._updateFromPromise===d&&(this._updateFromPromise=null)};w._updateFromInternal=async function(d,g={}){await d.whenReady();!g.environmentExcluded&&d.environment&&(this.initialViewProperties.environment=aa.prototype.clone.apply(d.environment));!g.viewpointExcluded&&d.viewpoint&&(this.initialViewProperties.viewpoint=
d.viewpoint.clone());this.initialViewProperties.spatialReference=d.spatialReference.clone();this.initialViewProperties.viewingMode=d.viewingMode;d.clippingArea?d.clippingArea!==this.clippingArea&&(this.clippingArea=d.clippingArea.clone(),this.clippingEnabled=!0):this.clippingEnabled=!1;d.heightModelInfo&&(this.heightModelInfo=d.heightModelInfo.clone());d.map===this&&d.allLayerViews.forEach(x=>{x.layer.visible=x.visible});(!1===g.thumbnailExcluded||null==g.thumbnailExcluded&&!g.viewpointExcluded)&&
await this._updateFromThumbnail(d,g.thumbnailSize||void 0)};w._updateFromThumbnail=async function(d,g){g=Qa.getOptimalThumbnailSize(d,g);this.thumbnailUrl=(await d.takeScreenshot({format:"jpg",width:g.width,height:g.height,disableDecorations:!0})).dataUrl};w._loadFromSource=function(){return this.resourceInfo?this._loadFromJSON(this.resourceInfo,{origin:"web-scene"}):this.portalItem&&this.portalItem.id?this._loadFromItem(this.portalItem):this._loadObjectsWithLayers()};w._readAndLoadFromJSON=function(d,
g){d=this._validateJSON(d);this.read(d,g);return this._loadFromJSON(d,g)};w._extractOperationalLayers=function(d){const g=[];if(!this.sourceVersion.supportsGround&&d.baseMap&&Array.isArray(d.baseMap.elevationLayers))for(const I of d.baseMap.elevationLayers)g.push(I);const x=[],E=I=>{I.layers&&(I.layers=I.layers.filter(E));return"ArcGISTiledElevationServiceLayer"===I.layerType?(this.sourceVersion.supportsGround||x.push(I),!1):!0};return{operationalLayers:d.operationalLayers?d.operationalLayers.filter(E):
[],operationalElevationLayers:x,basemapElevationLayers:g}};w._loadFromJSON=function(d,g){const x=new Y;return this._validateSpatialReference().then(()=>this._validateHeightModelInfo()).then(()=>new Promise(function(E,I){u(["./layers/support/layersCreator"],E,I)})).then(({populateOperationalLayers:E})=>{const {operationalLayers:I,operationalElevationLayers:M,basemapElevationLayers:R}=this._extractOperationalLayers(d),W=[],Z={context:{...g,layerContainerType:"operational-layers"}};this.portalItem&&
(Z.context.portal=this.portalItem.portal||Ea.getDefault());0<R.length&&W.push(E(this.ground.layers,R,{...Z,context:{...Z.context,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"}));0<M.length&&W.push(E(x,M,{...Z,context:{...Z.context,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"}));I&&0<I.length&&W.push(E(this.layers,I,Z));return D.eachAlways(W).then(()=>{})}).then(()=>this._loadObjectsWithLayers()).then(()=>{this.ground.layers.addMany(x)})};
w._ensureLoadBeforeSave=async function(){await this.load();await this._loadObjectsWithLayers();const d=[];for(const g of this.allLayers.items)if("beforeSave"in g&&"function"===typeof g.beforeSave){const x=g.beforeSave();x&&d.push(x)}await D.eachAlways(d)};w._loadObjectsWithLayers=async function(){const d=[];this.ground&&d.push(this.ground.load());this.basemap&&d.push(this.basemap.load());this.presentation.slides.forEach(g=>{g.basemap&&d.push(g.basemap.load())});await D.eachAlways(d)};w._loadFromItem=
async function(d){await d.load().catch(E=>{throw new f("webscene:load-portal-item","Failed to load portal item",{error:E});});if("Web Scene"!==d.type)throw new f("webscene:invalid-portal-item","Invalid portal item type '${type}', expected 'Web Scene'",{type:d.type});const g=await d.fetchData();this.resourceInfo=g;const x={origin:"web-scene",url:p.urlToObject(d.itemUrl),portal:d.portal||Ea.getDefault(),portalItem:d,readResourcePaths:[]};await this._readAndLoadFromJSON(g,x);this.resourceReferences=
{portalItem:d,paths:x.readResourcePaths}};w._validateSpatialReference=function(){const d=this.initialViewProperties,g=this._sceneSpatialReference;let x;if("local"!==d.viewingMode){if(!ma.isSpatialReferenceSupported(g,"global"))return Promise.reject(new f("webscene:unsupported-spatial-reference","Unsupported spatial reference (${spatialReference.wkid}) in global mode, only Web Mercator, WGS84 GCS or CGCS2000 are supported",{spatialReference:g,viewingMode:d.viewingMode}));x=M=>!M||Ka.canProjectWithoutEngine(M,
g)}else{if(!ma.isSpatialReferenceSupported(g,"local"))return Promise.reject(new f("webscene:unsupported-spatial-reference","Unsupported spatial reference (${spatialReference.wkid}) in local mode, only projected coordinate systems are supported",{spatialReference:g,viewingMode:d.viewingMode}));x=M=>!M||M.equals(g)}const E=M=>M&&(H.isSome(M.camera)&&M.camera.position&&M.camera.position.spatialReference||H.isSome(M.targetGeometry)&&M.targetGeometry.spatialReference);var I=E(d.viewpoint);return I&&!x(I)?
Promise.reject(new f("webscene:incompatible-camera-spatial-reference","Camera spatial reference (${cameraSpatialReference.wkid}) is incompatible with the scene spatial reference (${sceneSpatialReference.wkid})",{cameraSpatialReference:I,sceneSpatialReference:g,viewingMode:d.viewingMode})):(I=this.presentation.slides.find(M=>!x(E(M.viewpoint))))?(I=E(I.viewpoint),Promise.reject(new f("webscene:incompatible-slide-spatial-reference","Slide spatial reference (${slideSpatialReference.wkid}) is incompatible with the scene spatial reference (${sceneSpatialReference.wkid})",
{slideSpatialReference:I,sceneSpatialReference:g,viewingMode:d.viewingMode}))):Promise.resolve()};w._validateHeightModelInfo=function(){const d=Ra.validateWebSceneError(this.heightModelInfo,this._sceneSpatialReference);return d?Promise.reject(d):Promise.resolve()};w._validateJSON=function(d){const g=l.Version.parse(d.version||"","webscene");y.validate(g);d.version=`${g.major}.${g.minor}`;1===g.major&&2>=g.minor&&(d.spatialReference=B.WebMercator.toJSON());return d};w._updateTypeKeywords=function(d){"local"===
this.initialViewProperties.viewingMode?d.typeKeywords?-1===d.typeKeywords.indexOf("ViewingMode-Local")&&d.typeKeywords.push("ViewingMode-Local"):d.typeKeywords=["ViewingMode-Local"]:"global"===this.initialViewProperties.viewingMode&&d.typeKeywords&&(d.typeKeywords=d.typeKeywords.filter(g=>"ViewingMode-Local"!==g));d.typeKeywords&&(d.typeKeywords=d.typeKeywords.filter((g,x,E)=>E.indexOf(g)===x))};w._enableVerifyItemRelativeUrls=function(d){const g=this._verifyItemRelativeRootPath;g&&(d.verifyItemRelativeUrls=
{rootPath:g,writtenUrls:[]});return d};w._unscheduleLayersIdGC=function(){this._layersIdGCTimeoutId&&(clearTimeout(this._layersIdGCTimeoutId),this._layersIdGCTimeoutId=0)};w._scheduleLayersIdGC=function(){this._unscheduleLayersIdGC();this._layersIdGCTimeoutId=setTimeout(()=>{this._layersIdGCTimeoutId=0;this._runLayersIdGC()},3E3)};w._runLayersIdGC=function(){this._unscheduleLayersIdGC();var d=this.applicationProperties&&this.applicationProperties.viewing&&this.applicationProperties.viewing.search;
const g=x=>!!this.allLayers.find(E=>E.id===x);d&&d.layers&&(d.layers=d.layers.filter(x=>g(x.id)));(d=this.presentation&&this.presentation.slides)&&d.forEach(x=>{x.visibleLayers&&(x.visibleLayers=x.visibleLayers.filter(E=>g(E.id)))})};F.fromJSON=function(d){if(!d)throw new f("webscene:empty-resource","Expected a JSON resource but got nothing");return new this({resourceInfo:d})};c._createClass(F,[{key:"thumbnailUrl",get:function(){return this.portalItem&&this.portalItem.thumbnailUrl||null},set:function(d){d?
this._override("thumbnailUrl",d):(this._clearOverride("thumbnailUrl"),this.clear("thumbnailUrl","user"))}},{key:"authoringApp",set:function(d){this._isAuthoringAppSetByUser=!0;this._set("authoringApp",d)}},{key:"authoringAppVersion",set:function(d){this._isAuthoringAppVersionSetByUser=!0;this._set("authoringAppVersion",d)}},{key:"spatialReference",get:function(){var d,g;return null!=(d=null==(g=this.initialViewProperties)?void 0:g.spatialReference)?d:B.WebMercator}},{key:"viewingMode",get:function(){var d,
g;return null!=(d=null==(g=this.initialViewProperties)?void 0:g.viewingMode)?d:"global"}},{key:"_sceneSpatialReference",get:function(){return this.initialViewProperties.spatialReference||B.WebMercator}},{key:"_verifyItemRelativeRootPath",get:function(){return this.portalItem&&this.portalItem.itemUrl?p.urlToObject(this.portalItem.itemUrl).path:null}}]);return F}(Ga.LoadableMixin(ja.EsriPromiseMixin(Fa.MultiOriginJSONMixin(Na))));r.VERSION=y;k.__decorate([G.property({type:K,json:{write:!0}})],r.prototype,
"applicationProperties",void 0);k.__decorate([G.property({json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],r.prototype,"basemap",void 0);k.__decorate([G.property({type:L,json:{read:{source:"clippingArea.geometry",reader:U.fromJSON},write:{target:"clippingArea.geometry"}}})],r.prototype,"clippingArea",void 0);k.__decorate([P.writer("clippingArea")],r.prototype,"writeClippingArea",null);k.__decorate([G.property({type:Boolean,json:{write:{target:"clippingArea.clip"}}})],r.prototype,"clippingEnabled",
void 0);k.__decorate([X.reader("clippingEnabled",["clippingArea"])],r.prototype,"readClippingEnabled",null);k.__decorate([P.writer("clippingEnabled")],r.prototype,"writeClippingEnabled",null);k.__decorate([G.property({type:La,json:{read:{source:"mapFloorInfo"},write:{target:"mapFloorInfo"}}})],r.prototype,"floorInfo",void 0);k.__decorate([G.property({type:Aa,json:{write:!0}})],r.prototype,"heightModelInfo",void 0);k.__decorate([G.property({json:{write:{target:"operationalLayers",ignoreOrigin:!0}}})],
r.prototype,"layers",void 0);k.__decorate([P.writer("layers")],r.prototype,"writeLayers",null);k.__decorate([G.property({readOnly:!0,type:l.Version,json:{type:(()=>{const A=[],F=y.major;for(let w=8;w<=y.minor;w++)A.push(`${F}.${w}`);return A})(),write:{ignoreOrigin:!0,target:"version",isRequired:!0,overridePolicy:()=>({enabled:!0,allowNull:!0,ignoreOrigin:!0})}}})],r.prototype,"sourceVersion",void 0);k.__decorate([X.reader("sourceVersion",["version"])],r.prototype,"readSourceVersion",null);k.__decorate([P.writer("sourceVersion")],
r.prototype,"writeSourceVersion",null);k.__decorate([G.property({json:{read:!1,write:!1}})],r.prototype,"tables",void 0);k.__decorate([G.property()],r.prototype,"thumbnailUrl",null);k.__decorate([G.property({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],r.prototype,"authoringApp",null);k.__decorate([P.writer("authoringApp")],r.prototype,"writeAuthoringApp",null);k.__decorate([G.property({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],r.prototype,"authoringAppVersion",null);
k.__decorate([P.writer("authoringAppVersion")],r.prototype,"writeAuthoringAppVersion",null);k.__decorate([G.property({json:{write:{isRequired:!0,allowNull:!0,ignoreOrigin:!0,enabled:!0}}})],r.prototype,"ground",void 0);k.__decorate([P.writer("ground")],r.prototype,"writeGround",null);k.__decorate([G.property({type:Y.ofType(b),json:{write:!0}})],r.prototype,"transportationNetworks",void 0);k.__decorate([G.property({type:a,nonNullable:!0,json:{write:{ignoreOrigin:!0,writer:(A,F,w,d)=>{A.slides&&0<A.slides.length&&
(F.presentation=A.write(null,{...d,isPresentation:!0}))}}}})],r.prototype,"presentation",void 0);k.__decorate([G.property({type:ba,nonNullable:!0,json:{write:{target:"initialState",isRequired:!0,ignoreOrigin:!0},default:()=>new ba({viewingMode:"global",spatialReference:B.WebMercator})}})],r.prototype,"initialViewProperties",void 0);k.__decorate([X.reader("initialViewProperties",["initialState.environment","spatialReference","viewingMode","initialState.viewpoint"])],r.prototype,"readInitialViewProperties",
null);k.__decorate([G.property({type:B,json:{read:!1,write:{isRequired:!0,ignoreOrigin:!0}}})],r.prototype,"spatialReference",null);k.__decorate([G.property({type:["local","global"],json:{read:!1,write:{isRequired:!0,ignoreOrigin:!0}}})],r.prototype,"viewingMode",null);k.__decorate([G.property({type:Ha})],r.prototype,"portalItem",void 0);k.__decorate([G.property()],r.prototype,"resourceInfo",void 0);return r=k.__decorate([V.subclass("esri.WebScene")],r)});